import{u as b,r as p,j as e,S as N,M as y,P as w,H as D,R as C,g as f,a as S,b as h,c as k,f as g}from"./index-uBceAcs4.js";const M=()=>{const{character:s,updateCharacter:l}=b(),{hp:t}=s,[n,o]=p.useState(""),d=()=>{const r=Number(n)||0;if(r<=0)return;const a=Math.min(r,t.temporary),u=t.temporary-a,j=r-a,v=Math.max(0,t.current-j);l({hp:{...t,current:v,temporary:u}}),o("")},m=()=>{const r=Number(n)||0;if(r<=0)return;const a=Math.min(t.max,t.current+r);l({hp:{...t,current:a}}),o("")},x=()=>{const r=Number(n);!isNaN(r)&&r>=0&&(l({hp:{...t,temporary:r}}),o(""))},i=t.max>0?t.current/t.max*100:100,c=i>50?"bg-green-500":i>25?"bg-yellow-500":"bg-red-500";return e.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border space-y-3",children:[e.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3 text-center",children:"Hit Points"}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl font-bold text-destructive",children:t.current}),t.temporary>0&&e.jsxs("span",{className:"text-3xl font-bold text-accent",title:"Temporary HP",children:[" +",t.temporary]}),e.jsxs("span",{className:"text-2xl text-muted-foreground",children:[" / ",t.max]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2.5",children:e.jsx("div",{className:`${c} h-2.5 rounded-full transition-all duration-500`,style:{width:`${i}%`}})}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-2 items-center",children:[e.jsx(N,{value:n,onChange:r=>o(r===""?"":Number(r)),placeholder:"Value",inputClassName:"w-24 text-3xl",showModifier:!1,className:"flex-grow sm:flex-grow-0 max-w-[200px]"}),e.jsxs("div",{className:"flex-grow flex gap-2 justify-center",children:[e.jsxs("button",{onClick:d,className:"flex-1 sm:flex-auto flex items-center justify-center gap-2 px-3 py-2 bg-red-600 text-white font-bold rounded-lg shadow-md hover:bg-red-700 transition-colors",children:[e.jsx(y,{className:"w-5 h-5"})," Damage"]}),e.jsxs("button",{onClick:m,className:"flex-1 sm:flex-auto flex items-center justify-center gap-2 px-3 py-2 bg-green-600 text-white font-bold rounded-lg shadow-md hover:bg-green-700 transition-colors",children:[e.jsx(w,{className:"w-5 h-5"})," Heal"]}),e.jsxs("button",{onClick:x,className:"flex-1 sm:flex-auto flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white font-bold rounded-lg shadow-md hover:bg-blue-700 transition-colors",children:[e.jsx(D,{className:"w-5 h-5"})," Temp"]})]})]})]})},H=()=>{const{character:s,updateCharacter:l}=b(),{deathSaves:t}=s,n=(r,a)=>{const u=Math.max(0,Math.min(3,a));l({deathSaves:{...t,[r]:u}})},o=r=>{n(r,t[r]+2)},d=()=>{l({deathSaves:{successes:0,failures:0}})},m=t.successes>0||t.failures>0,x=t.successes>=3,i=t.failures>=3,c=x||i;return e.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Death Saves"}),m&&e.jsx("button",{onClick:d,className:"p-1.5 text-muted-foreground hover:text-accent transition-colors","aria-label":"Reset Death Saves",children:e.jsx(C,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Successes"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:[...Array(3)].map((r,a)=>e.jsx("div",{role:"button",tabIndex:c?-1:0,"aria-label":`Set successes to ${a+1}`,onClick:()=>!c&&n("successes",a+1),onKeyDown:u=>!c&&u.key==="Enter"&&n("successes",a+1),className:`w-8 h-8 rounded-full transition-colors ${c?"opacity-50 cursor-not-allowed":"cursor-pointer"} ${a<t.successes?"bg-green-500":"bg-background border border-border hover:bg-muted"}`},a))}),e.jsx("button",{onClick:()=>o("successes"),disabled:c||t.successes>=2,className:"text-xs bg-background border border-border hover:bg-accent hover:text-accent-foreground rounded-md px-2 py-1 disabled:opacity-50 disabled:cursor-not-allowed",children:"+2 Crit"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold text-foreground",children:"Failures"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:[...Array(3)].map((r,a)=>e.jsx("div",{role:"button",tabIndex:c?-1:0,"aria-label":`Set failures to ${a+1}`,onClick:()=>!c&&n("failures",a+1),onKeyDown:u=>!c&&u.key==="Enter"&&n("failures",a+1),className:`w-8 h-8 rounded-full transition-colors ${c?"opacity-50 cursor-not-allowed":"cursor-pointer"} ${a<t.failures?"bg-red-600":"bg-background border border-border hover:bg-muted"}`},a))}),e.jsx("button",{onClick:()=>o("failures"),disabled:c||t.failures>=2,className:"text-xs bg-background border border-border hover:bg-destructive hover:text-destructive-foreground rounded-md px-2 py-1 disabled:opacity-50 disabled:cursor-not-allowed",children:"+2 Crit"})]})]})]}),x&&e.jsx("p",{className:"text-center text-lg font-bold text-green-400 uppercase tracking-wider",children:"Stabilized"}),i&&e.jsx("p",{className:"text-center text-2xl font-bold text-destructive uppercase tracking-widest animate-pulse",children:"Dead"})]})},$=()=>{const{character:s,updateCharacter:l}=b(),[t,n]=p.useState(null),o=f(s.abilityScores.constitution),d=()=>{if(s.hitDice.used>=s.level||s.hp.current===0)return;const{total:x,pretty:i}=S(`${s.hitDice.total}+${o}`),c=Math.min(s.hp.max,s.hp.current+Math.max(0,x));n(`${i} HP`),l({hp:{...s.hp,current:c},hitDice:{...s.hitDice,used:s.hitDice.used+1}})},m=()=>{l({hitDice:{...s.hitDice,used:0}}),n(null)};return e.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[e.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:"Hit Dice"}),e.jsxs("p",{className:"text-center text-3xl font-bold font-mono text-foreground mb-3",children:[s.level-s.hitDice.used," / ",s.level]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:d,disabled:s.hitDice.used>=s.level||s.hp.current===0,className:"w-full bg-primary/80 hover:bg-primary text-primary-foreground font-bold py-2 px-4 rounded-md transition-colors disabled:bg-muted disabled:text-muted-foreground disabled:cursor-not-allowed",children:["Spend (",s.hitDice.total,")"]}),e.jsx("button",{onClick:m,className:"bg-secondary/80 hover:bg-secondary text-secondary-foreground font-bold py-2 px-4 rounded-md transition-colors",children:"Reset"})]}),t&&e.jsx("p",{className:"text-center text-accent font-mono mt-3 p-2 bg-muted/50 rounded-md",children:t})]})},T=()=>{const{character:s}=b(),l=p.useMemo(()=>{const t=f(s.abilityScores.wisdom),n=s.skills.find(d=>d.name==="Perception");let o=0;return n&&(n.expertise?o=s.proficiencyBonus*2:n.proficient&&(o=s.proficiencyBonus)),10+t+o},[s]);return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 lg:col-span-3 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:[e.jsx(h,{label:"Armor Class",value:p.useMemo(()=>k(s),[s])}),e.jsx(h,{label:"Initiative",value:g(s.initiative)}),e.jsx(h,{label:"Speed",value:`${s.speed}ft`,subValue:`â‰ˆ ${Math.round(s.speed*.3)}m`}),e.jsx(h,{label:"Proficiency",value:g(s.proficiencyBonus)}),e.jsx(h,{label:"Passive Perception",value:l,className:"col-span-2 sm:col-span-1"})]}),e.jsx(M,{}),e.jsx(H,{}),e.jsx($,{}),e.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[e.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:"Languages"}),e.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:s.languages||"None"})]})]})};export{T as default};
