function HS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qS={exports:{}},Vg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sP=Symbol.for("react.transitional.element"),aP=Symbol.for("react.fragment");function GS(t,e,n){var r=null;if(n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:sP,type:t,key:r,ref:e!==void 0?e:null,props:n}}Vg.Fragment=aP;Vg.jsx=GS;Vg.jsxs=GS;qS.exports=Vg;var g=qS.exports,$S={exports:{}},Je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kb=Symbol.for("react.transitional.element"),oP=Symbol.for("react.portal"),lP=Symbol.for("react.fragment"),uP=Symbol.for("react.strict_mode"),cP=Symbol.for("react.profiler"),hP=Symbol.for("react.consumer"),fP=Symbol.for("react.context"),dP=Symbol.for("react.forward_ref"),mP=Symbol.for("react.suspense"),pP=Symbol.for("react.memo"),YS=Symbol.for("react.lazy"),YE=Symbol.iterator;function gP(t){return t===null||typeof t!="object"?null:(t=YE&&t[YE]||t["@@iterator"],typeof t=="function"?t:null)}var WS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},XS=Object.assign,KS={};function Xc(t,e,n){this.props=t,this.context=e,this.refs=KS,this.updater=n||WS}Xc.prototype.isReactComponent={};Xc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function QS(){}QS.prototype=Xc.prototype;function Pb(t,e,n){this.props=t,this.context=e,this.refs=KS,this.updater=n||WS}var Lb=Pb.prototype=new QS;Lb.constructor=Pb;XS(Lb,Xc.prototype);Lb.isPureReactComponent=!0;var WE=Array.isArray,gn={H:null,A:null,T:null,S:null,V:null},ZS=Object.prototype.hasOwnProperty;function Ub(t,e,n,r,i,s){return n=s.ref,{$$typeof:kb,type:t,key:e,ref:n!==void 0?n:null,props:s}}function vP(t,e){return Ub(t.type,e,void 0,void 0,void 0,t.props)}function Vb(t){return typeof t=="object"&&t!==null&&t.$$typeof===kb}function yP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var XE=/\/+/g;function V0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yP(""+t.key):e.toString(36)}function KE(){}function _P(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(KE,KE):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Fu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case kb:case oP:a=!0;break;case YS:return a=t._init,Fu(a(t._payload),e,n,r,i)}}if(a)return i=i(t),a=r===""?"."+V0(t,0):r,WE(i)?(n="",a!=null&&(n=a.replace(XE,"$&/")+"/"),Fu(i,e,n,"",function(f){return f})):i!=null&&(Vb(i)&&(i=vP(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(XE,"$&/")+"/")+a)),e.push(i)),1;a=0;var l=r===""?".":r+":";if(WE(t))for(var c=0;c<t.length;c++)r=t[c],s=l+V0(r,c),a+=Fu(r,e,n,s,i);else if(c=gP(t),typeof c=="function")for(t=c.call(t),c=0;!(r=t.next()).done;)r=r.value,s=l+V0(r,c++),a+=Fu(r,e,n,s,i);else if(s==="object"){if(typeof t.then=="function")return Fu(_P(t),e,n,r,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Mm(t,e,n){if(t==null)return t;var r=[],i=0;return Fu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function bP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var QE=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function xP(){}Je.Children={map:Mm,forEach:function(t,e,n){Mm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mm(t,function(){e++}),e},toArray:function(t){return Mm(t,function(e){return e})||[]},only:function(t){if(!Vb(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Je.Component=Xc;Je.Fragment=lP;Je.Profiler=cP;Je.PureComponent=Pb;Je.StrictMode=uP;Je.Suspense=mP;Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=gn;Je.__COMPILER_RUNTIME={__proto__:null,c:function(t){return gn.H.useMemoCache(t)}};Je.cache=function(t){return function(){return t.apply(null,arguments)}};Je.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var r=XS({},t.props),i=t.key,s=void 0;if(e!=null)for(a in e.ref!==void 0&&(s=void 0),e.key!==void 0&&(i=""+e.key),e)!ZS.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(r[a]=e[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return Ub(t.type,i,void 0,void 0,s,r)};Je.createContext=function(t){return t={$$typeof:fP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:hP,_context:t},t};Je.createElement=function(t,e,n){var r,i={},s=null;if(e!=null)for(r in e.key!==void 0&&(s=""+e.key),e)ZS.call(e,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return Ub(t,s,void 0,void 0,null,i)};Je.createRef=function(){return{current:null}};Je.forwardRef=function(t){return{$$typeof:dP,render:t}};Je.isValidElement=Vb;Je.lazy=function(t){return{$$typeof:YS,_payload:{_status:-1,_result:t},_init:bP}};Je.memo=function(t,e){return{$$typeof:pP,type:t,compare:e===void 0?null:e}};Je.startTransition=function(t){var e=gn.T,n={};gn.T=n;try{var r=t(),i=gn.S;i!==null&&i(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(xP,QE)}catch(s){QE(s)}finally{gn.T=e}};Je.unstable_useCacheRefresh=function(){return gn.H.useCacheRefresh()};Je.use=function(t){return gn.H.use(t)};Je.useActionState=function(t,e,n){return gn.H.useActionState(t,e,n)};Je.useCallback=function(t,e){return gn.H.useCallback(t,e)};Je.useContext=function(t){return gn.H.useContext(t)};Je.useDebugValue=function(){};Je.useDeferredValue=function(t,e){return gn.H.useDeferredValue(t,e)};Je.useEffect=function(t,e,n){var r=gn.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(t,e)};Je.useId=function(){return gn.H.useId()};Je.useImperativeHandle=function(t,e,n){return gn.H.useImperativeHandle(t,e,n)};Je.useInsertionEffect=function(t,e){return gn.H.useInsertionEffect(t,e)};Je.useLayoutEffect=function(t,e){return gn.H.useLayoutEffect(t,e)};Je.useMemo=function(t,e){return gn.H.useMemo(t,e)};Je.useOptimistic=function(t,e){return gn.H.useOptimistic(t,e)};Je.useReducer=function(t,e,n){return gn.H.useReducer(t,e,n)};Je.useRef=function(t){return gn.H.useRef(t)};Je.useState=function(t){return gn.H.useState(t)};Je.useSyncExternalStore=function(t,e,n){return gn.H.useSyncExternalStore(t,e,n)};Je.useTransition=function(){return gn.H.useTransition()};Je.version="19.1.0";$S.exports=Je;var K=$S.exports;const Ku=jb(K),wP=HS({__proto__:null,default:Ku},[K]);var JS={exports:{}},zg={},eR={exports:{}},tR={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,V){var J=z.length;z.push(V);e:for(;0<J;){var ee=J-1>>>1,ie=z[ee];if(0<i(ie,V))z[ee]=V,z[J]=ie,J=ee;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var V=z[0],J=z.pop();if(J!==V){z[0]=J;e:for(var ee=0,ie=z.length,_e=ie>>>1;ee<_e;){var me=2*(ee+1)-1,ye=z[me],W=me+1,X=z[W];if(0>i(ye,J))W<ie&&0>i(X,ye)?(z[ee]=X,z[W]=J,ee=W):(z[ee]=ye,z[me]=J,ee=me);else if(W<ie&&0>i(X,J))z[ee]=X,z[W]=J,ee=W;else break e}}return V}function i(z,V){var J=z.sortIndex-V.sortIndex;return J!==0?J:z.id-V.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],f=[],h=1,m=null,p=3,y=!1,T=!1,N=!1,j=!1,A=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function U(z){for(var V=n(f);V!==null;){if(V.callback===null)r(f);else if(V.startTime<=z)r(f),V.sortIndex=V.expirationTime,e(c,V);else break;V=n(f)}}function H(z){if(N=!1,U(z),!T)if(n(c)!==null)T=!0,D||(D=!0,P());else{var V=n(f);V!==null&&Z(H,V.startTime-z)}}var D=!1,E=-1,_=5,w=-1;function R(){return j?!0:!(t.unstable_now()-w<_)}function k(){if(j=!1,D){var z=t.unstable_now();w=z;var V=!0;try{e:{T=!1,N&&(N=!1,C(E),E=-1),y=!0;var J=p;try{t:{for(U(z),m=n(c);m!==null&&!(m.expirationTime>z&&R());){var ee=m.callback;if(typeof ee=="function"){m.callback=null,p=m.priorityLevel;var ie=ee(m.expirationTime<=z);if(z=t.unstable_now(),typeof ie=="function"){m.callback=ie,U(z),V=!0;break t}m===n(c)&&r(c),U(z)}else r(c);m=n(c)}if(m!==null)V=!0;else{var _e=n(f);_e!==null&&Z(H,_e.startTime-z),V=!1}}break e}finally{m=null,p=J,y=!1}V=void 0}}finally{V?P():D=!1}}}var P;if(typeof M=="function")P=function(){M(k)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,G=O.port2;O.port1.onmessage=k,P=function(){G.postMessage(null)}}else P=function(){A(k,0)};function Z(z,V){E=A(function(){z(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var J=p;p=V;try{return z()}finally{p=J}},t.unstable_requestPaint=function(){j=!0},t.unstable_runWithPriority=function(z,V){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var J=p;p=z;try{return V()}finally{p=J}},t.unstable_scheduleCallback=function(z,V,J){var ee=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ee+J:ee):J=ee,z){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=J+ie,z={id:h++,callback:V,priorityLevel:z,startTime:J,expirationTime:ie,sortIndex:-1},J>ee?(z.sortIndex=J,e(f,z),n(c)===null&&z===n(f)&&(N?(C(E),E=-1):N=!0,Z(H,J-ee))):(z.sortIndex=ie,e(c,z),T||y||(T=!0,D||(D=!0,P()))),z},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(z){var V=p;return function(){var J=p;p=V;try{return z.apply(this,arguments)}finally{p=J}}}})(tR);eR.exports=tR;var EP=eR.exports,nR={exports:{}},qr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TP=K;function rR(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function io(){}var Hr={d:{f:io,r:function(){throw Error(rR(522))},D:io,C:io,L:io,m:io,X:io,S:io,M:io},p:0,findDOMNode:null},AP=Symbol.for("react.portal");function SP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:AP,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}var lf=TP.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Bg(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}qr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Hr;qr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(rR(299));return SP(t,e,null,n)};qr.flushSync=function(t){var e=lf.T,n=Hr.p;try{if(lf.T=null,Hr.p=2,t)return t()}finally{lf.T=e,Hr.p=n,Hr.d.f()}};qr.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Hr.d.C(t,e))};qr.prefetchDNS=function(t){typeof t=="string"&&Hr.d.D(t)};qr.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,r=Bg(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Hr.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):n==="script"&&Hr.d.X(t,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};qr.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Bg(e.as,e.crossOrigin);Hr.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Hr.d.M(t)};qr.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,r=Bg(n,e.crossOrigin);Hr.d.L(t,n,{crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};qr.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Bg(e.as,e.crossOrigin);Hr.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Hr.d.m(t)};qr.requestFormReset=function(t){Hr.d.r(t)};qr.unstable_batchedUpdates=function(t,e){return t(e)};qr.useFormState=function(t,e,n){return lf.H.useFormState(t,e,n)};qr.useFormStatus=function(){return lf.H.useHostTransitionStatus()};qr.version="19.1.0";function iR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iR)}catch(t){console.error(t)}}iR(),nR.exports=qr;var zb=nR.exports;const RP=jb(zb),CP=HS({__proto__:null,default:RP},[zb]);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rr=EP,sR=K,NP=zb;function pe(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function aR(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function td(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function oR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ZE(t){if(td(t)!==t)throw Error(pe(188))}function IP(t){var e=t.alternate;if(!e){if(e=td(t),e===null)throw Error(pe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ZE(i),t;if(s===r)return ZE(i),e;s=s.sibling}throw Error(pe(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(pe(189))}}if(n.alternate!==r)throw Error(pe(190))}if(n.tag!==3)throw Error(pe(188));return n.stateNode.current===n?t:e}function lR(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=lR(t),e!==null)return e;t=t.sibling}return null}var ln=Object.assign,DP=Symbol.for("react.element"),jm=Symbol.for("react.transitional.element"),Zh=Symbol.for("react.portal"),Qu=Symbol.for("react.fragment"),uR=Symbol.for("react.strict_mode"),$y=Symbol.for("react.profiler"),OP=Symbol.for("react.provider"),cR=Symbol.for("react.consumer"),xa=Symbol.for("react.context"),Bb=Symbol.for("react.forward_ref"),Yy=Symbol.for("react.suspense"),Wy=Symbol.for("react.suspense_list"),Fb=Symbol.for("react.memo"),co=Symbol.for("react.lazy"),Xy=Symbol.for("react.activity"),MP=Symbol.for("react.memo_cache_sentinel"),JE=Symbol.iterator;function kh(t){return t===null||typeof t!="object"?null:(t=JE&&t[JE]||t["@@iterator"],typeof t=="function"?t:null)}var jP=Symbol.for("react.client.reference");function Ky(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===jP?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qu:return"Fragment";case $y:return"Profiler";case uR:return"StrictMode";case Yy:return"Suspense";case Wy:return"SuspenseList";case Xy:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Zh:return"Portal";case xa:return(t.displayName||"Context")+".Provider";case cR:return(t._context.displayName||"Context")+".Consumer";case Bb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fb:return e=t.displayName||null,e!==null?e:Ky(t.type)||"Memo";case co:e=t._payload,t=t._init;try{return Ky(t(e))}catch{}}return null}var Jh=Array.isArray,Fe=sR.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Dt=NP.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ul={pending:!1,data:null,method:null,action:null},Qy=[],Zu=-1;function Js(t){return{current:t}}function dr(t){0>Zu||(t.current=Qy[Zu],Qy[Zu]=null,Zu--)}function vn(t,e){Zu++,Qy[Zu]=t.current,t.current=e}var zs=Js(null),Df=Js(null),No=Js(null),Ip=Js(null);function Dp(t,e){switch(vn(No,e),vn(Df,t),vn(zs,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?i2(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=i2(e),t=RN(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}dr(zs),vn(zs,t)}function Rc(){dr(zs),dr(Df),dr(No)}function Zy(t){t.memoizedState!==null&&vn(Ip,t);var e=zs.current,n=RN(e,t.type);e!==n&&(vn(Df,t),vn(zs,n))}function Op(t){Df.current===t&&(dr(zs),dr(Df)),Ip.current===t&&(dr(Ip),Bf._currentValue=Ul)}var Jy=Object.prototype.hasOwnProperty,Hb=rr.unstable_scheduleCallback,z0=rr.unstable_cancelCallback,kP=rr.unstable_shouldYield,PP=rr.unstable_requestPaint,Bs=rr.unstable_now,LP=rr.unstable_getCurrentPriorityLevel,hR=rr.unstable_ImmediatePriority,fR=rr.unstable_UserBlockingPriority,Mp=rr.unstable_NormalPriority,UP=rr.unstable_LowPriority,dR=rr.unstable_IdlePriority,VP=rr.log,zP=rr.unstable_setDisableYieldValue,nd=null,Si=null;function xo(t){if(typeof VP=="function"&&zP(t),Si&&typeof Si.setStrictMode=="function")try{Si.setStrictMode(nd,t)}catch{}}var Ri=Math.clz32?Math.clz32:HP,BP=Math.log,FP=Math.LN2;function HP(t){return t>>>=0,t===0?32:31-(BP(t)/FP|0)|0}var km=256,Pm=4194304;function Rl(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Fg(t,e,n){var r=t.pendingLanes;if(r===0)return 0;var i=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var l=r&134217727;return l!==0?(r=l&~s,r!==0?i=Rl(r):(a&=l,a!==0?i=Rl(a):n||(n=l&~t,n!==0&&(i=Rl(n))))):(l=r&~s,l!==0?i=Rl(l):a!==0?i=Rl(a):n||(n=r&~t,n!==0&&(i=Rl(n)))),i===0?0:e!==0&&e!==i&&!(e&s)&&(s=i&-i,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:i}function rd(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function qP(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mR(){var t=km;return km<<=1,!(km&4194048)&&(km=256),t}function pR(){var t=Pm;return Pm<<=1,!(Pm&62914560)&&(Pm=4194304),t}function B0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function id(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function GP(t,e,n,r,i,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,c=t.expirationTimes,f=t.hiddenUpdates;for(n=a&~n;0<n;){var h=31-Ri(n),m=1<<h;l[h]=0,c[h]=-1;var p=f[h];if(p!==null)for(f[h]=null,h=0;h<p.length;h++){var y=p[h];y!==null&&(y.lane&=-536870913)}n&=~m}r!==0&&gR(t,r,0),s!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function gR(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var r=31-Ri(e);t.entangledLanes|=e,t.entanglements[r]=t.entanglements[r]|1073741824|n&4194090}function vR(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ri(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}function qb(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Gb(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function yR(){var t=Dt.p;return t!==0?t:(t=window.event,t===void 0?32:LN(t.type))}function $P(t,e){var n=Dt.p;try{return Dt.p=t,e()}finally{Dt.p=n}}var el=Math.random().toString(36).slice(2),Or="__reactFiber$"+el,li="__reactProps$"+el,Kc="__reactContainer$"+el,e_="__reactEvents$"+el,YP="__reactListeners$"+el,WP="__reactHandles$"+el,eT="__reactResources$"+el,sd="__reactMarker$"+el;function $b(t){delete t[Or],delete t[li],delete t[e_],delete t[YP],delete t[WP]}function Ju(t){var e=t[Or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kc]||n[Or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=o2(t);t!==null;){if(n=t[Or])return n;t=o2(t)}return e}t=n,n=t.parentNode}return null}function Qc(t){if(t=t[Or]||t[Kc]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function ef(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(pe(33))}function dc(t){var e=t[eT];return e||(e=t[eT]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function hr(t){t[sd]=!0}var _R=new Set,bR={};function au(t,e){Cc(t,e),Cc(t+"Capture",e)}function Cc(t,e){for(bR[t]=e,t=0;t<e.length;t++)_R.add(e[t])}var XP=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tT={},nT={};function KP(t){return Jy.call(nT,t)?!0:Jy.call(tT,t)?!1:XP.test(t)?nT[t]=!0:(tT[t]=!0,!1)}function sp(t,e,n){if(KP(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var r=e.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Lm(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function ga(t,e,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+r)}}var F0,rT;function Hu(t){if(F0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);F0=e&&e[1]||"",rT=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+F0+t+rT}var H0=!1;function q0(t,e){if(!t||H0)return"";H0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(e){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(y){var p=y}Reflect.construct(t,[],m)}else{try{m.call()}catch(y){p=y}t.call(m.prototype)}}else{try{throw Error()}catch(y){p=y}(m=t())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(y){if(y&&p&&typeof y.stack=="string")return[y.stack,p.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var c=a.split(`
`),f=l.split(`
`);for(i=r=0;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;for(;i<f.length&&!f[i].includes("DetermineComponentFrameRoot");)i++;if(r===c.length||i===f.length)for(r=c.length-1,i=f.length-1;1<=r&&0<=i&&c[r]!==f[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==f[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==f[i]){var h=`
`+c[r].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=r&&0<=i);break}}}finally{H0=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Hu(n):""}function QP(t){switch(t.tag){case 26:case 27:case 5:return Hu(t.type);case 16:return Hu("Lazy");case 13:return Hu("Suspense");case 19:return Hu("SuspenseList");case 0:case 15:return q0(t.type,!1);case 11:return q0(t.type.render,!1);case 1:return q0(t.type,!0);case 31:return Hu("Activity");default:return""}}function iT(t){try{var e="";do e+=QP(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Ki(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ZP(t){var e=xR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jp(t){t._valueTracker||(t._valueTracker=ZP(t))}function wR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function kp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var JP=/[\n"\\]/g;function Ji(t){return t.replace(JP,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function t_(t,e,n,r,i,s,a,l){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Ki(e)):t.value!==""+Ki(e)&&(t.value=""+Ki(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?n_(t,a,Ki(e)):n!=null?n_(t,a,Ki(n)):r!=null&&t.removeAttribute("value"),i==null&&s!=null&&(t.defaultChecked=!!s),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+Ki(l):t.removeAttribute("name")}function ER(t,e,n,r,i,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null))return;n=n!=null?""+Ki(n):"",e=e!=null?""+Ki(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}r=r??i,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=l?t.checked:!!r,t.defaultChecked=!!r,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a)}function n_(t,e,n){e==="number"&&kp(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function mc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ki(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function TR(t,e,n){if(e!=null&&(e=""+Ki(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Ki(n):""}function AR(t,e,n,r){if(e==null){if(r!=null){if(n!=null)throw Error(pe(92));if(Jh(r)){if(1<r.length)throw Error(pe(93));r=r[0]}n=r}n==null&&(n=""),e=n}n=Ki(e),t.defaultValue=n,r=t.textContent,r===n&&r!==""&&r!==null&&(t.value=r)}function Nc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var eL=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sT(t,e,n){var r=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":r?t.setProperty(e,n):typeof n!="number"||n===0||eL.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function SR(t,e,n){if(e!=null&&typeof e!="object")throw Error(pe(62));if(t=t.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||e!=null&&e.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var i in e)r=e[i],e.hasOwnProperty(i)&&n[i]!==r&&sT(t,i,r)}else for(var s in e)e.hasOwnProperty(s)&&sT(t,s,e[s])}function Yb(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tL=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nL=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ap(t){return nL.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var r_=null;function Wb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ec=null,pc=null;function aT(t){var e=Qc(t);if(e&&(t=e.stateNode)){var n=t[li]||null;e:switch(t=e.stateNode,e.type){case"input":if(t_(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Ji(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=r[li]||null;if(!i)throw Error(pe(90));t_(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)r=n[e],r.form===t.form&&wR(r)}break e;case"textarea":TR(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&mc(t,!!n.multiple,e,!1)}}}var G0=!1;function RR(t,e,n){if(G0)return t(e,n);G0=!0;try{var r=t(e);return r}finally{if(G0=!1,(ec!==null||pc!==null)&&(Zg(),ec&&(e=ec,t=pc,pc=ec=null,aT(e),t)))for(e=0;e<t.length;e++)aT(t[e])}}function Of(t,e){var n=t.stateNode;if(n===null)return null;var r=n[li]||null;if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(pe(231,e,typeof n));return n}var Da=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),i_=!1;if(Da)try{var Ph={};Object.defineProperty(Ph,"passive",{get:function(){i_=!0}}),window.addEventListener("test",Ph,Ph),window.removeEventListener("test",Ph,Ph)}catch{i_=!1}var wo=null,Xb=null,op=null;function CR(){if(op)return op;var t,e=Xb,n=e.length,r,i="value"in wo?wo.value:wo.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return op=i.slice(t,1<r?1-r:void 0)}function lp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Um(){return!0}function oT(){return!1}function ui(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Um:oT,this.isPropagationStopped=oT,this}return ln(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Um)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Um)},persist:function(){},isPersistent:Um}),e}var ou={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hg=ui(ou),ad=ln({},ou,{view:0,detail:0}),rL=ui(ad),$0,Y0,Lh,qg=ln({},ad,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kb,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lh&&(Lh&&t.type==="mousemove"?($0=t.screenX-Lh.screenX,Y0=t.screenY-Lh.screenY):Y0=$0=0,Lh=t),$0)},movementY:function(t){return"movementY"in t?t.movementY:Y0}}),lT=ui(qg),iL=ln({},qg,{dataTransfer:0}),sL=ui(iL),aL=ln({},ad,{relatedTarget:0}),W0=ui(aL),oL=ln({},ou,{animationName:0,elapsedTime:0,pseudoElement:0}),lL=ui(oL),uL=ln({},ou,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cL=ui(uL),hL=ln({},ou,{data:0}),uT=ui(hL),fL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mL[t])?!!e[t]:!1}function Kb(){return pL}var gL=ln({},ad,{key:function(t){if(t.key){var e=fL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kb,charCode:function(t){return t.type==="keypress"?lp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vL=ui(gL),yL=ln({},qg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cT=ui(yL),_L=ln({},ad,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kb}),bL=ui(_L),xL=ln({},ou,{propertyName:0,elapsedTime:0,pseudoElement:0}),wL=ui(xL),EL=ln({},qg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TL=ui(EL),AL=ln({},ou,{newState:0,oldState:0}),SL=ui(AL),RL=[9,13,27,32],Qb=Da&&"CompositionEvent"in window,uf=null;Da&&"documentMode"in document&&(uf=document.documentMode);var CL=Da&&"TextEvent"in window&&!uf,NR=Da&&(!Qb||uf&&8<uf&&11>=uf),hT=" ",fT=!1;function IR(t,e){switch(t){case"keyup":return RL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var tc=!1;function NL(t,e){switch(t){case"compositionend":return DR(e);case"keypress":return e.which!==32?null:(fT=!0,hT);case"textInput":return t=e.data,t===hT&&fT?null:t;default:return null}}function IL(t,e){if(tc)return t==="compositionend"||!Qb&&IR(t,e)?(t=CR(),op=Xb=wo=null,tc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return NR&&e.locale!=="ko"?null:e.data;default:return null}}var DL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!DL[t.type]:e==="textarea"}function OR(t,e,n,r){ec?pc?pc.push(r):pc=[r]:ec=r,e=Jp(e,"onChange"),0<e.length&&(n=new Hg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var cf=null,Mf=null;function OL(t){TN(t,0)}function Gg(t){var e=ef(t);if(wR(e))return t}function mT(t,e){if(t==="change")return e}var MR=!1;if(Da){var X0;if(Da){var K0="oninput"in document;if(!K0){var pT=document.createElement("div");pT.setAttribute("oninput","return;"),K0=typeof pT.oninput=="function"}X0=K0}else X0=!1;MR=X0&&(!document.documentMode||9<document.documentMode)}function gT(){cf&&(cf.detachEvent("onpropertychange",jR),Mf=cf=null)}function jR(t){if(t.propertyName==="value"&&Gg(Mf)){var e=[];OR(e,Mf,t,Wb(t)),RR(OL,e)}}function ML(t,e,n){t==="focusin"?(gT(),cf=e,Mf=n,cf.attachEvent("onpropertychange",jR)):t==="focusout"&&gT()}function jL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gg(Mf)}function kL(t,e){if(t==="click")return Gg(e)}function PL(t,e){if(t==="input"||t==="change")return Gg(e)}function LL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Di=typeof Object.is=="function"?Object.is:LL;function jf(t,e){if(Di(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Jy.call(e,i)||!Di(t[i],e[i]))return!1}return!0}function vT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yT(t,e){var n=vT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vT(n)}}function kR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function PR(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=kp(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=kp(t.document)}return e}function Zb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var UL=Da&&"documentMode"in document&&11>=document.documentMode,nc=null,s_=null,hf=null,a_=!1;function _T(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;a_||nc==null||nc!==kp(r)||(r=nc,"selectionStart"in r&&Zb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hf&&jf(hf,r)||(hf=r,r=Jp(s_,"onSelect"),0<r.length&&(e=new Hg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=nc)))}function Tl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rc={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionrun:Tl("Transition","TransitionRun"),transitionstart:Tl("Transition","TransitionStart"),transitioncancel:Tl("Transition","TransitionCancel"),transitionend:Tl("Transition","TransitionEnd")},Q0={},LR={};Da&&(LR=document.createElement("div").style,"AnimationEvent"in window||(delete rc.animationend.animation,delete rc.animationiteration.animation,delete rc.animationstart.animation),"TransitionEvent"in window||delete rc.transitionend.transition);function lu(t){if(Q0[t])return Q0[t];if(!rc[t])return t;var e=rc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in LR)return Q0[t]=e[n];return t}var UR=lu("animationend"),VR=lu("animationiteration"),zR=lu("animationstart"),VL=lu("transitionrun"),zL=lu("transitionstart"),BL=lu("transitioncancel"),BR=lu("transitionend"),FR=new Map,o_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");o_.push("scrollEnd");function Rs(t,e){FR.set(t,e),au(e,[t])}var bT=new WeakMap;function es(t,e){if(typeof t=="object"&&t!==null){var n=bT.get(t);return n!==void 0?n:(e={value:t,source:e,stack:iT(e)},bT.set(t,e),e)}return{value:t,source:e,stack:iT(e)}}var Xi=[],ic=0,Jb=0;function $g(){for(var t=ic,e=Jb=ic=0;e<t;){var n=Xi[e];Xi[e++]=null;var r=Xi[e];Xi[e++]=null;var i=Xi[e];Xi[e++]=null;var s=Xi[e];if(Xi[e++]=null,r!==null&&i!==null){var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}s!==0&&HR(n,i,s)}}function Yg(t,e,n,r){Xi[ic++]=t,Xi[ic++]=e,Xi[ic++]=n,Xi[ic++]=r,Jb|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function e1(t,e,n,r){return Yg(t,e,n,r),Pp(t)}function Zc(t,e){return Yg(t,null,null,e),Pp(t)}function HR(t,e,n){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n);for(var i=!1,s=t.return;s!==null;)s.childLanes|=n,r=s.alternate,r!==null&&(r.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(i=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,i&&e!==null&&(i=31-Ri(n),t=s.hiddenUpdates,r=t[i],r===null?t[i]=[e]:r.push(e),e.lane=n|536870912),s):null}function Pp(t){if(50<xf)throw xf=0,C_=null,Error(pe(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var sc={};function FL(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wi(t,e,n,r){return new FL(t,e,n,r)}function t1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ca(t,e){var n=t.alternate;return n===null?(n=wi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function qR(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function up(t,e,n,r,i,s){var a=0;if(r=t,typeof t=="function")t1(t)&&(a=1);else if(typeof t=="string")a=qU(t,n,zs.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Xy:return t=wi(31,n,e,i),t.elementType=Xy,t.lanes=s,t;case Qu:return Vl(n.children,i,s,e);case uR:a=8,i|=24;break;case $y:return t=wi(12,n,e,i|2),t.elementType=$y,t.lanes=s,t;case Yy:return t=wi(13,n,e,i),t.elementType=Yy,t.lanes=s,t;case Wy:return t=wi(19,n,e,i),t.elementType=Wy,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case OP:case xa:a=10;break e;case cR:a=9;break e;case Bb:a=11;break e;case Fb:a=14;break e;case co:a=16,r=null;break e}a=29,n=Error(pe(130,t===null?"null":typeof t,"")),r=null}return e=wi(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Vl(t,e,n,r){return t=wi(7,t,r,e),t.lanes=n,t}function Z0(t,e,n){return t=wi(6,t,null,e),t.lanes=n,t}function J0(t,e,n){return e=wi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var ac=[],oc=0,Lp=null,Up=0,Qi=[],Zi=0,zl=null,wa=1,Ea="";function Cl(t,e){ac[oc++]=Up,ac[oc++]=Lp,Lp=t,Up=e}function GR(t,e,n){Qi[Zi++]=wa,Qi[Zi++]=Ea,Qi[Zi++]=zl,zl=t;var r=wa;t=Ea;var i=32-Ri(r)-1;r&=~(1<<i),n+=1;var s=32-Ri(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,wa=1<<32-Ri(e)+i|n<<i|r,Ea=s+t}else wa=1<<s|n<<i|r,Ea=t}function n1(t){t.return!==null&&(Cl(t,1),GR(t,1,0))}function r1(t){for(;t===Lp;)Lp=ac[--oc],ac[oc]=null,Up=ac[--oc],ac[oc]=null;for(;t===zl;)zl=Qi[--Zi],Qi[Zi]=null,Ea=Qi[--Zi],Qi[Zi]=null,wa=Qi[--Zi],Qi[Zi]=null}var Fr=null,Sn=null,It=!1,Bl=null,Us=!1,l_=Error(pe(519));function Xl(t){var e=Error(pe(418,""));throw kf(es(e,t)),l_}function xT(t){var e=t.stateNode,n=t.type,r=t.memoizedProps;switch(e[Or]=t,e[li]=r,n){case"dialog":ct("cancel",e),ct("close",e);break;case"iframe":case"object":case"embed":ct("load",e);break;case"video":case"audio":for(n=0;n<Uf.length;n++)ct(Uf[n],e);break;case"source":ct("error",e);break;case"img":case"image":case"link":ct("error",e),ct("load",e);break;case"details":ct("toggle",e);break;case"input":ct("invalid",e),ER(e,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),jp(e);break;case"select":ct("invalid",e);break;case"textarea":ct("invalid",e),AR(e,r.value,r.defaultValue,r.children),jp(e)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||r.suppressHydrationWarning===!0||SN(e.textContent,n)?(r.popover!=null&&(ct("beforetoggle",e),ct("toggle",e)),r.onScroll!=null&&ct("scroll",e),r.onScrollEnd!=null&&ct("scrollend",e),r.onClick!=null&&(e.onclick=tv),e=!0):e=!1,e||Xl(t)}function wT(t){for(Fr=t.return;Fr;)switch(Fr.tag){case 5:case 13:Us=!1;return;case 27:case 3:Us=!0;return;default:Fr=Fr.return}}function Uh(t){if(t!==Fr)return!1;if(!It)return wT(t),It=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||j_(t.type,t.memoizedProps)),n=!n),n&&Sn&&Xl(t),wT(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(pe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){Sn=Ts(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}Sn=null}}else e===27?(e=Sn,tl(t.type)?(t=L_,L_=null,Sn=t):Sn=e):Sn=Fr?Ts(t.stateNode.nextSibling):null;return!0}function od(){Sn=Fr=null,It=!1}function ET(){var t=Bl;return t!==null&&(ti===null?ti=t:ti.push.apply(ti,t),Bl=null),t}function kf(t){Bl===null?Bl=[t]:Bl.push(t)}var u_=Js(null),uu=null,Ta=null;function fo(t,e,n){vn(u_,e._currentValue),e._currentValue=n}function Na(t){t._currentValue=u_.current,dr(u_)}function c_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function h_(t,e,n,r){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){var a=i.child;s=s.firstContext;e:for(;s!==null;){var l=s;s=i;for(var c=0;c<e.length;c++)if(l.context===e[c]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),c_(s.return,n,t),r||(a=null);break e}s=l.next}}else if(i.tag===18){if(a=i.return,a===null)throw Error(pe(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),c_(a,n,t),a=null}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}}function ld(t,e,n,r){t=null;for(var i=e,s=!1;i!==null;){if(!s){if(i.flags&524288)s=!0;else if(i.flags&262144)break}if(i.tag===10){var a=i.alternate;if(a===null)throw Error(pe(387));if(a=a.memoizedProps,a!==null){var l=i.type;Di(i.pendingProps.value,a.value)||(t!==null?t.push(l):t=[l])}}else if(i===Ip.current){if(a=i.alternate,a===null)throw Error(pe(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(Bf):t=[Bf])}i=i.return}t!==null&&h_(e,t,n,r),e.flags|=262144}function Vp(t){for(t=t.firstContext;t!==null;){if(!Di(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Kl(t){uu=t,Ta=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Mr(t){return $R(uu,t)}function Vm(t,e){return uu===null&&Kl(t),$R(t,e)}function $R(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Ta===null){if(t===null)throw Error(pe(308));Ta=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Ta=Ta.next=e;return n}var HL=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,r){t.push(r)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},qL=rr.unstable_scheduleCallback,GL=rr.unstable_NormalPriority,er={$$typeof:xa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function i1(){return{controller:new HL,data:new Map,refCount:0}}function ud(t){t.refCount--,t.refCount===0&&qL(GL,function(){t.controller.abort()})}var ff=null,f_=0,Ic=0,gc=null;function $L(t,e){if(ff===null){var n=ff=[];f_=0,Ic=R1(),gc={status:"pending",value:void 0,then:function(r){n.push(r)}}}return f_++,e.then(TT,TT),e}function TT(){if(--f_===0&&ff!==null){gc!==null&&(gc.status="fulfilled");var t=ff;ff=null,Ic=0,gc=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function YL(t,e){var n=[],r={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){r.status="fulfilled",r.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(r.status="rejected",r.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),r}var AT=Fe.S;Fe.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&$L(t,e),AT!==null&&AT(t,e)};var Fl=Js(null);function s1(){var t=Fl.current;return t!==null?t:nn.pooledCache}function cp(t,e){e===null?vn(Fl,Fl.current):vn(Fl,e.pool)}function YR(){var t=s1();return t===null?null:{parent:er._currentValue,pool:t}}var cd=Error(pe(460)),WR=Error(pe(474)),Wg=Error(pe(542)),d_={then:function(){}};function ST(t){return t=t.status,t==="fulfilled"||t==="rejected"}function zm(){}function XR(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(zm,zm),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,CT(t),t;default:if(typeof e.status=="string")e.then(zm,zm);else{if(t=nn,t!==null&&100<t.shellSuspendCounter)throw Error(pe(482));t=e,t.status="pending",t.then(function(r){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=r}},function(r){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=r}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,CT(t),t}throw df=e,cd}}var df=null;function RT(){if(df===null)throw Error(pe(459));var t=df;return df=null,t}function CT(t){if(t===cd||t===Wg)throw Error(pe(483))}var ho=!1;function a1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function m_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Io(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Do(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ft&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,e=Pp(t),HR(t,null,n),e}return Yg(t,r,e,n),Pp(t)}function mf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vR(t,n)}}function ey(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var p_=!1;function pf(){if(p_){var t=gc;if(t!==null)throw t}}function gf(t,e,n,r){p_=!1;var i=t.updateQueue;ho=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,f=c.next;c.next=null,a===null?s=f:a.next=f,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=f:l.next=f,h.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;a=0,h=f=c=null,l=s;do{var p=l.lane&-536870913,y=p!==l.lane;if(y?(wt&p)===p:(r&p)===p){p!==0&&p===Ic&&(p_=!0),h!==null&&(h=h.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var T=t,N=l;p=e;var j=n;switch(N.tag){case 1:if(T=N.payload,typeof T=="function"){m=T.call(j,m,p);break e}m=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=N.payload,p=typeof T=="function"?T.call(j,m,p):T,p==null)break e;m=ln({},m,p);break e;case 2:ho=!0}}p=l.callback,p!==null&&(t.flags|=64,y&&(t.flags|=8192),y=i.callbacks,y===null?i.callbacks=[p]:y.push(p))}else y={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(f=h=y,c=m):h=h.next=y,a|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;y=l,l=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);h===null&&(c=m),i.baseState=c,i.firstBaseUpdate=f,i.lastBaseUpdate=h,s===null&&(i.shared.lanes=0),qo|=a,t.lanes=a,t.memoizedState=m}}function KR(t,e){if(typeof t!="function")throw Error(pe(191,t));t.call(e)}function QR(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)KR(n[t],e)}var Dc=Js(null),zp=Js(0);function NT(t,e){t=ja,vn(zp,t),vn(Dc,e),ja=t|e.baseLanes}function g_(){vn(zp,ja),vn(Dc,Dc.current)}function o1(){ja=zp.current,dr(Dc),dr(zp)}var Fo=0,rt=null,Yt=null,Hn=null,Bp=!1,vc=!1,Ql=!1,Fp=0,Pf=0,yc=null,WL=0;function Mn(){throw Error(pe(321))}function l1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Di(t[n],e[n]))return!1;return!0}function u1(t,e,n,r,i,s){return Fo=s,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fe.H=t===null||t.memoizedState===null?CC:NC,Ql=!1,s=n(r,i),Ql=!1,vc&&(s=JR(e,n,r,i)),ZR(t),s}function ZR(t){Fe.H=Hp;var e=Yt!==null&&Yt.next!==null;if(Fo=0,Hn=Yt=rt=null,Bp=!1,Pf=0,yc=null,e)throw Error(pe(300));t===null||fr||(t=t.dependencies,t!==null&&Vp(t)&&(fr=!0))}function JR(t,e,n,r){rt=t;var i=0;do{if(vc&&(yc=null),Pf=0,vc=!1,25<=i)throw Error(pe(301));if(i+=1,Hn=Yt=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}Fe.H=tU,s=e(n,r)}while(vc);return s}function XL(){var t=Fe.H,e=t.useState()[0];return e=typeof e.then=="function"?hd(e):e,t=t.useState()[0],(Yt!==null?Yt.memoizedState:null)!==t&&(rt.flags|=1024),e}function c1(){var t=Fp!==0;return Fp=0,t}function h1(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function f1(t){if(Bp){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Bp=!1}Fo=0,Hn=Yt=rt=null,vc=!1,Pf=Fp=0,yc=null}function Qr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?rt.memoizedState=Hn=t:Hn=Hn.next=t,Hn}function Yn(){if(Yt===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=Yt.next;var e=Hn===null?rt.memoizedState:Hn.next;if(e!==null)Hn=e,Yt=t;else{if(t===null)throw rt.alternate===null?Error(pe(467)):Error(pe(310));Yt=t,t={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},Hn===null?rt.memoizedState=Hn=t:Hn=Hn.next=t}return Hn}function d1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hd(t){var e=Pf;return Pf+=1,yc===null&&(yc=[]),t=XR(yc,t,e),e=rt,(Hn===null?e.memoizedState:Hn.next)===null&&(e=e.alternate,Fe.H=e===null||e.memoizedState===null?CC:NC),t}function Xg(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return hd(t);if(t.$$typeof===xa)return Mr(t)}throw Error(pe(438,String(t)))}function m1(t){var e=null,n=rt.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var r=rt.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(e={data:r.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=d1(),rt.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),r=0;r<t;r++)n[r]=MP;return e.index++,n}function Oa(t,e){return typeof e=="function"?e(t):e}function hp(t){var e=Yn();return p1(e,Yt,t)}function p1(t,e,n){var r=t.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=n;var i=t.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}e.baseQueue=i=s,r.pending=null}if(s=t.baseState,i===null)t.memoizedState=s;else{e=i.next;var l=a=null,c=null,f=e,h=!1;do{var m=f.lane&-536870913;if(m!==f.lane?(wt&m)===m:(Fo&m)===m){var p=f.revertLane;if(p===0)c!==null&&(c=c.next={lane:0,revertLane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),m===Ic&&(h=!0);else if((Fo&p)===p){f=f.next,p===Ic&&(h=!0);continue}else m={lane:0,revertLane:f.revertLane,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},c===null?(l=c=m,a=s):c=c.next=m,rt.lanes|=p,qo|=p;m=f.action,Ql&&n(s,m),s=f.hasEagerState?f.eagerState:n(s,m)}else p={lane:m,revertLane:f.revertLane,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},c===null?(l=c=p,a=s):c=c.next=p,rt.lanes|=m,qo|=m;f=f.next}while(f!==null&&f!==e);if(c===null?a=s:c.next=l,!Di(s,t.memoizedState)&&(fr=!0,h&&(n=gc,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=c,r.lastRenderedState=s}return i===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function ty(t){var e=Yn(),n=e.queue;if(n===null)throw Error(pe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Di(s,e.memoizedState)||(fr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function eC(t,e,n){var r=rt,i=Yn(),s=It;if(s){if(n===void 0)throw Error(pe(407));n=n()}else n=e();var a=!Di((Yt||i).memoizedState,n);a&&(i.memoizedState=n,fr=!0),i=i.queue;var l=rC.bind(null,r,i,t);if(fd(2048,8,l,[t]),i.getSnapshot!==e||a||Hn!==null&&Hn.memoizedState.tag&1){if(r.flags|=2048,Oc(9,Kg(),nC.bind(null,r,i,n,e),null),nn===null)throw Error(pe(349));s||Fo&124||tC(r,e,n)}return n}function tC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rt.updateQueue,e===null?(e=d1(),rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function nC(t,e,n,r){e.value=n,e.getSnapshot=r,iC(e)&&sC(t)}function rC(t,e,n){return n(function(){iC(e)&&sC(t)})}function iC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Di(t,n)}catch{return!0}}function sC(t){var e=Zc(t,2);e!==null&&Ni(e,t,2)}function v_(t){var e=Qr();if(typeof t=="function"){var n=t;if(t=n(),Ql){xo(!0);try{n()}finally{xo(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:t},e}function aC(t,e,n,r){return t.baseState=n,p1(t,Yt,typeof r=="function"?r:Oa)}function KL(t,e,n,r,i){if(Qg(t))throw Error(pe(485));if(t=e.action,t!==null){var s={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};Fe.T!==null?n(!0):s.isTransition=!1,r(s),n=e.pending,n===null?(s.next=e.pending=s,oC(e,s)):(s.next=n.next,e.pending=n.next=s)}}function oC(t,e){var n=e.action,r=e.payload,i=t.state;if(e.isTransition){var s=Fe.T,a={};Fe.T=a;try{var l=n(i,r),c=Fe.S;c!==null&&c(a,l),IT(t,e,l)}catch(f){y_(t,e,f)}finally{Fe.T=s}}else try{s=n(i,r),IT(t,e,s)}catch(f){y_(t,e,f)}}function IT(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){DT(t,e,r)},function(r){return y_(t,e,r)}):DT(t,e,n)}function DT(t,e,n){e.status="fulfilled",e.value=n,lC(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,oC(t,n)))}function y_(t,e,n){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do e.status="rejected",e.reason=n,lC(e),e=e.next;while(e!==r)}t.action=null}function lC(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function uC(t,e){return e}function OT(t,e){if(It){var n=nn.formState;if(n!==null){e:{var r=rt;if(It){if(Sn){t:{for(var i=Sn,s=Us;i.nodeType!==8;){if(!s){i=null;break t}if(i=Ts(i.nextSibling),i===null){i=null;break t}}s=i.data,i=s==="F!"||s==="F"?i:null}if(i){Sn=Ts(i.nextSibling),r=i.data==="F!";break e}}Xl(r)}r=!1}r&&(e=n[0])}}return n=Qr(),n.memoizedState=n.baseState=e,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uC,lastRenderedState:e},n.queue=r,n=AC.bind(null,rt,r),r.dispatch=n,r=v_(!1),s=_1.bind(null,rt,!1,r.queue),r=Qr(),i={state:e,dispatch:null,action:t,pending:null},r.queue=i,n=KL.bind(null,rt,i,s,n),i.dispatch=n,r.memoizedState=t,[e,n,!1]}function MT(t){var e=Yn();return cC(e,Yt,t)}function cC(t,e,n){if(e=p1(t,e,uC)[0],t=hp(Oa)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var r=hd(e)}catch(a){throw a===cd?Wg:a}else r=e;e=Yn();var i=e.queue,s=i.dispatch;return n!==e.memoizedState&&(rt.flags|=2048,Oc(9,Kg(),QL.bind(null,i,n),null)),[r,s,t]}function QL(t,e){t.action=e}function jT(t){var e=Yn(),n=Yt;if(n!==null)return cC(e,n,t);Yn(),e=e.memoizedState,n=Yn();var r=n.queue.dispatch;return n.memoizedState=t,[e,r,!1]}function Oc(t,e,n,r){return t={tag:t,create:n,deps:r,inst:e,next:null},e=rt.updateQueue,e===null&&(e=d1(),rt.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Kg(){return{destroy:void 0,resource:void 0}}function hC(){return Yn().memoizedState}function fp(t,e,n,r){var i=Qr();r=r===void 0?null:r,rt.flags|=t,i.memoizedState=Oc(1|e,Kg(),n,r)}function fd(t,e,n,r){var i=Yn();r=r===void 0?null:r;var s=i.memoizedState.inst;Yt!==null&&r!==null&&l1(r,Yt.memoizedState.deps)?i.memoizedState=Oc(e,s,n,r):(rt.flags|=t,i.memoizedState=Oc(1|e,s,n,r))}function kT(t,e){fp(8390656,8,t,e)}function fC(t,e){fd(2048,8,t,e)}function dC(t,e){return fd(4,2,t,e)}function mC(t,e){return fd(4,4,t,e)}function pC(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gC(t,e,n){n=n!=null?n.concat([t]):null,fd(4,4,pC.bind(null,e,t),n)}function g1(){}function vC(t,e){var n=Yn();e=e===void 0?null:e;var r=n.memoizedState;return e!==null&&l1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function yC(t,e){var n=Yn();e=e===void 0?null:e;var r=n.memoizedState;if(e!==null&&l1(e,r[1]))return r[0];if(r=t(),Ql){xo(!0);try{t()}finally{xo(!1)}}return n.memoizedState=[r,e],r}function v1(t,e,n){return n===void 0||Fo&1073741824?t.memoizedState=e:(t.memoizedState=n,t=lN(),rt.lanes|=t,qo|=t,n)}function _C(t,e,n,r){return Di(n,e)?n:Dc.current!==null?(t=v1(t,n,r),Di(t,e)||(fr=!0),t):Fo&42?(t=lN(),rt.lanes|=t,qo|=t,e):(fr=!0,t.memoizedState=n)}function bC(t,e,n,r,i){var s=Dt.p;Dt.p=s!==0&&8>s?s:8;var a=Fe.T,l={};Fe.T=l,_1(t,!1,e,n);try{var c=i(),f=Fe.S;if(f!==null&&f(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=YL(c,r);vf(t,e,h,Ci(t))}else vf(t,e,r,Ci(t))}catch(m){vf(t,e,{then:function(){},status:"rejected",reason:m},Ci())}finally{Dt.p=s,Fe.T=a}}function ZL(){}function __(t,e,n,r){if(t.tag!==5)throw Error(pe(476));var i=xC(t).queue;bC(t,i,e,Ul,n===null?ZL:function(){return wC(t),n(r)})}function xC(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Ul,baseState:Ul,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:Ul},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function wC(t){var e=xC(t).next.queue;vf(t,e,{},Ci())}function y1(){return Mr(Bf)}function EC(){return Yn().memoizedState}function TC(){return Yn().memoizedState}function JL(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Ci();t=Io(n);var r=Do(e,t,n);r!==null&&(Ni(r,e,n),mf(r,e,n)),e={cache:i1()},t.payload=e;return}e=e.return}}function eU(t,e,n){var r=Ci();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Qg(t)?SC(e,n):(n=e1(t,e,n,r),n!==null&&(Ni(n,t,r),RC(n,e,r)))}function AC(t,e,n){var r=Ci();vf(t,e,n,r)}function vf(t,e,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qg(t))SC(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,Di(l,a))return Yg(t,e,i,0),nn===null&&$g(),!1}catch{}finally{}if(n=e1(t,e,i,r),n!==null)return Ni(n,t,r),RC(n,e,r),!0}return!1}function _1(t,e,n,r){if(r={lane:2,revertLane:R1(),action:r,hasEagerState:!1,eagerState:null,next:null},Qg(t)){if(e)throw Error(pe(479))}else e=e1(t,n,r,2),e!==null&&Ni(e,t,2)}function Qg(t){var e=t.alternate;return t===rt||e!==null&&e===rt}function SC(t,e){vc=Bp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function RC(t,e,n){if(n&4194048){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vR(t,n)}}var Hp={readContext:Mr,use:Xg,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useLayoutEffect:Mn,useInsertionEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useSyncExternalStore:Mn,useId:Mn,useHostTransitionStatus:Mn,useFormState:Mn,useActionState:Mn,useOptimistic:Mn,useMemoCache:Mn,useCacheRefresh:Mn},CC={readContext:Mr,use:Xg,useCallback:function(t,e){return Qr().memoizedState=[t,e===void 0?null:e],t},useContext:Mr,useEffect:kT,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,fp(4194308,4,pC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fp(4194308,4,t,e)},useInsertionEffect:function(t,e){fp(4,2,t,e)},useMemo:function(t,e){var n=Qr();e=e===void 0?null:e;var r=t();if(Ql){xo(!0);try{t()}finally{xo(!1)}}return n.memoizedState=[r,e],r},useReducer:function(t,e,n){var r=Qr();if(n!==void 0){var i=n(e);if(Ql){xo(!0);try{n(e)}finally{xo(!1)}}}else i=e;return r.memoizedState=r.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},r.queue=t,t=t.dispatch=eU.bind(null,rt,t),[r.memoizedState,t]},useRef:function(t){var e=Qr();return t={current:t},e.memoizedState=t},useState:function(t){t=v_(t);var e=t.queue,n=AC.bind(null,rt,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:g1,useDeferredValue:function(t,e){var n=Qr();return v1(n,t,e)},useTransition:function(){var t=v_(!1);return t=bC.bind(null,rt,t.queue,!0,!1),Qr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var r=rt,i=Qr();if(It){if(n===void 0)throw Error(pe(407));n=n()}else{if(n=e(),nn===null)throw Error(pe(349));wt&124||tC(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,kT(rC.bind(null,r,s,t),[t]),r.flags|=2048,Oc(9,Kg(),nC.bind(null,r,s,n,e),null),n},useId:function(){var t=Qr(),e=nn.identifierPrefix;if(It){var n=Ea,r=wa;n=(r&~(1<<32-Ri(r)-1)).toString(32)+n,e="«"+e+"R"+n,n=Fp++,0<n&&(e+="H"+n.toString(32)),e+="»"}else n=WL++,e="«"+e+"r"+n.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:y1,useFormState:OT,useActionState:OT,useOptimistic:function(t){var e=Qr();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=_1.bind(null,rt,!0,n),n.dispatch=e,[t,e]},useMemoCache:m1,useCacheRefresh:function(){return Qr().memoizedState=JL.bind(null,rt)}},NC={readContext:Mr,use:Xg,useCallback:vC,useContext:Mr,useEffect:fC,useImperativeHandle:gC,useInsertionEffect:dC,useLayoutEffect:mC,useMemo:yC,useReducer:hp,useRef:hC,useState:function(){return hp(Oa)},useDebugValue:g1,useDeferredValue:function(t,e){var n=Yn();return _C(n,Yt.memoizedState,t,e)},useTransition:function(){var t=hp(Oa)[0],e=Yn().memoizedState;return[typeof t=="boolean"?t:hd(t),e]},useSyncExternalStore:eC,useId:EC,useHostTransitionStatus:y1,useFormState:MT,useActionState:MT,useOptimistic:function(t,e){var n=Yn();return aC(n,Yt,t,e)},useMemoCache:m1,useCacheRefresh:TC},tU={readContext:Mr,use:Xg,useCallback:vC,useContext:Mr,useEffect:fC,useImperativeHandle:gC,useInsertionEffect:dC,useLayoutEffect:mC,useMemo:yC,useReducer:ty,useRef:hC,useState:function(){return ty(Oa)},useDebugValue:g1,useDeferredValue:function(t,e){var n=Yn();return Yt===null?v1(n,t,e):_C(n,Yt.memoizedState,t,e)},useTransition:function(){var t=ty(Oa)[0],e=Yn().memoizedState;return[typeof t=="boolean"?t:hd(t),e]},useSyncExternalStore:eC,useId:EC,useHostTransitionStatus:y1,useFormState:jT,useActionState:jT,useOptimistic:function(t,e){var n=Yn();return Yt!==null?aC(n,Yt,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:m1,useCacheRefresh:TC},_c=null,Lf=0;function Bm(t){var e=Lf;return Lf+=1,_c===null&&(_c=[]),XR(_c,t,e)}function Vh(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Fm(t,e){throw e.$$typeof===DP?Error(pe(525)):(t=Object.prototype.toString.call(e),Error(pe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function PT(t){var e=t._init;return e(t._payload)}function IC(t){function e(A,C){if(t){var M=A.deletions;M===null?(A.deletions=[C],A.flags|=16):M.push(C)}}function n(A,C){if(!t)return null;for(;C!==null;)e(A,C),C=C.sibling;return null}function r(A){for(var C=new Map;A!==null;)A.key!==null?C.set(A.key,A):C.set(A.index,A),A=A.sibling;return C}function i(A,C){return A=Ca(A,C),A.index=0,A.sibling=null,A}function s(A,C,M){return A.index=M,t?(M=A.alternate,M!==null?(M=M.index,M<C?(A.flags|=67108866,C):M):(A.flags|=67108866,C)):(A.flags|=1048576,C)}function a(A){return t&&A.alternate===null&&(A.flags|=67108866),A}function l(A,C,M,U){return C===null||C.tag!==6?(C=Z0(M,A.mode,U),C.return=A,C):(C=i(C,M),C.return=A,C)}function c(A,C,M,U){var H=M.type;return H===Qu?h(A,C,M.props.children,U,M.key):C!==null&&(C.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===co&&PT(H)===C.type)?(C=i(C,M.props),Vh(C,M),C.return=A,C):(C=up(M.type,M.key,M.props,null,A.mode,U),Vh(C,M),C.return=A,C)}function f(A,C,M,U){return C===null||C.tag!==4||C.stateNode.containerInfo!==M.containerInfo||C.stateNode.implementation!==M.implementation?(C=J0(M,A.mode,U),C.return=A,C):(C=i(C,M.children||[]),C.return=A,C)}function h(A,C,M,U,H){return C===null||C.tag!==7?(C=Vl(M,A.mode,U,H),C.return=A,C):(C=i(C,M),C.return=A,C)}function m(A,C,M){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=Z0(""+C,A.mode,M),C.return=A,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case jm:return M=up(C.type,C.key,C.props,null,A.mode,M),Vh(M,C),M.return=A,M;case Zh:return C=J0(C,A.mode,M),C.return=A,C;case co:var U=C._init;return C=U(C._payload),m(A,C,M)}if(Jh(C)||kh(C))return C=Vl(C,A.mode,M,null),C.return=A,C;if(typeof C.then=="function")return m(A,Bm(C),M);if(C.$$typeof===xa)return m(A,Vm(A,C),M);Fm(A,C)}return null}function p(A,C,M,U){var H=C!==null?C.key:null;if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return H!==null?null:l(A,C,""+M,U);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case jm:return M.key===H?c(A,C,M,U):null;case Zh:return M.key===H?f(A,C,M,U):null;case co:return H=M._init,M=H(M._payload),p(A,C,M,U)}if(Jh(M)||kh(M))return H!==null?null:h(A,C,M,U,null);if(typeof M.then=="function")return p(A,C,Bm(M),U);if(M.$$typeof===xa)return p(A,C,Vm(A,M),U);Fm(A,M)}return null}function y(A,C,M,U,H){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return A=A.get(M)||null,l(C,A,""+U,H);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case jm:return A=A.get(U.key===null?M:U.key)||null,c(C,A,U,H);case Zh:return A=A.get(U.key===null?M:U.key)||null,f(C,A,U,H);case co:var D=U._init;return U=D(U._payload),y(A,C,M,U,H)}if(Jh(U)||kh(U))return A=A.get(M)||null,h(C,A,U,H,null);if(typeof U.then=="function")return y(A,C,M,Bm(U),H);if(U.$$typeof===xa)return y(A,C,M,Vm(C,U),H);Fm(C,U)}return null}function T(A,C,M,U){for(var H=null,D=null,E=C,_=C=0,w=null;E!==null&&_<M.length;_++){E.index>_?(w=E,E=null):w=E.sibling;var R=p(A,E,M[_],U);if(R===null){E===null&&(E=w);break}t&&E&&R.alternate===null&&e(A,E),C=s(R,C,_),D===null?H=R:D.sibling=R,D=R,E=w}if(_===M.length)return n(A,E),It&&Cl(A,_),H;if(E===null){for(;_<M.length;_++)E=m(A,M[_],U),E!==null&&(C=s(E,C,_),D===null?H=E:D.sibling=E,D=E);return It&&Cl(A,_),H}for(E=r(E);_<M.length;_++)w=y(E,A,_,M[_],U),w!==null&&(t&&w.alternate!==null&&E.delete(w.key===null?_:w.key),C=s(w,C,_),D===null?H=w:D.sibling=w,D=w);return t&&E.forEach(function(k){return e(A,k)}),It&&Cl(A,_),H}function N(A,C,M,U){if(M==null)throw Error(pe(151));for(var H=null,D=null,E=C,_=C=0,w=null,R=M.next();E!==null&&!R.done;_++,R=M.next()){E.index>_?(w=E,E=null):w=E.sibling;var k=p(A,E,R.value,U);if(k===null){E===null&&(E=w);break}t&&E&&k.alternate===null&&e(A,E),C=s(k,C,_),D===null?H=k:D.sibling=k,D=k,E=w}if(R.done)return n(A,E),It&&Cl(A,_),H;if(E===null){for(;!R.done;_++,R=M.next())R=m(A,R.value,U),R!==null&&(C=s(R,C,_),D===null?H=R:D.sibling=R,D=R);return It&&Cl(A,_),H}for(E=r(E);!R.done;_++,R=M.next())R=y(E,A,_,R.value,U),R!==null&&(t&&R.alternate!==null&&E.delete(R.key===null?_:R.key),C=s(R,C,_),D===null?H=R:D.sibling=R,D=R);return t&&E.forEach(function(P){return e(A,P)}),It&&Cl(A,_),H}function j(A,C,M,U){if(typeof M=="object"&&M!==null&&M.type===Qu&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case jm:e:{for(var H=M.key;C!==null;){if(C.key===H){if(H=M.type,H===Qu){if(C.tag===7){n(A,C.sibling),U=i(C,M.props.children),U.return=A,A=U;break e}}else if(C.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===co&&PT(H)===C.type){n(A,C.sibling),U=i(C,M.props),Vh(U,M),U.return=A,A=U;break e}n(A,C);break}else e(A,C);C=C.sibling}M.type===Qu?(U=Vl(M.props.children,A.mode,U,M.key),U.return=A,A=U):(U=up(M.type,M.key,M.props,null,A.mode,U),Vh(U,M),U.return=A,A=U)}return a(A);case Zh:e:{for(H=M.key;C!==null;){if(C.key===H)if(C.tag===4&&C.stateNode.containerInfo===M.containerInfo&&C.stateNode.implementation===M.implementation){n(A,C.sibling),U=i(C,M.children||[]),U.return=A,A=U;break e}else{n(A,C);break}else e(A,C);C=C.sibling}U=J0(M,A.mode,U),U.return=A,A=U}return a(A);case co:return H=M._init,M=H(M._payload),j(A,C,M,U)}if(Jh(M))return T(A,C,M,U);if(kh(M)){if(H=kh(M),typeof H!="function")throw Error(pe(150));return M=H.call(M),N(A,C,M,U)}if(typeof M.then=="function")return j(A,C,Bm(M),U);if(M.$$typeof===xa)return j(A,C,Vm(A,M),U);Fm(A,M)}return typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint"?(M=""+M,C!==null&&C.tag===6?(n(A,C.sibling),U=i(C,M),U.return=A,A=U):(n(A,C),U=Z0(M,A.mode,U),U.return=A,A=U),a(A)):n(A,C)}return function(A,C,M,U){try{Lf=0;var H=j(A,C,M,U);return _c=null,H}catch(E){if(E===cd||E===Wg)throw E;var D=wi(29,E,null,A.mode);return D.lanes=U,D.return=A,D}finally{}}}var Mc=IC(!0),DC=IC(!1),as=Js(null),Fs=null;function mo(t){var e=t.alternate;vn(tr,tr.current&1),vn(as,t),Fs===null&&(e===null||Dc.current!==null||e.memoizedState!==null)&&(Fs=t)}function OC(t){if(t.tag===22){if(vn(tr,tr.current),vn(as,t),Fs===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Fs=t)}}else po()}function po(){vn(tr,tr.current),vn(as,as.current)}function Aa(t){dr(as),Fs===t&&(Fs=null),dr(tr)}var tr=Js(0);function qp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||P_(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function ny(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ln({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var b_={enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ci(),i=Io(r);i.payload=e,n!=null&&(i.callback=n),e=Do(t,i,r),e!==null&&(Ni(e,t,r),mf(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ci(),i=Io(r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Do(t,i,r),e!==null&&(Ni(e,t,r),mf(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ci(),r=Io(n);r.tag=2,e!=null&&(r.callback=e),e=Do(t,r,n),e!==null&&(Ni(e,t,n),mf(e,t,n))}};function LT(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!jf(n,r)||!jf(i,s):!0}function UT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&b_.enqueueReplaceState(e,e.state,null)}function Zl(t,e){var n=e;if("ref"in e){n={};for(var r in e)r!=="ref"&&(n[r]=e[r])}if(t=t.defaultProps){n===e&&(n=ln({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}var Gp=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function MC(t){Gp(t)}function jC(t){console.error(t)}function kC(t){Gp(t)}function $p(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(r){setTimeout(function(){throw r})}}function VT(t,e,n){try{var r=t.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function x_(t,e,n){return n=Io(n),n.tag=3,n.payload={element:null},n.callback=function(){$p(t,e)},n}function PC(t){return t=Io(t),t.tag=3,t}function LC(t,e,n,r){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=r.value;t.payload=function(){return i(s)},t.callback=function(){VT(e,n,r)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){VT(e,n,r),typeof i!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var l=r.stack;this.componentDidCatch(r.value,{componentStack:l!==null?l:""})})}function nU(t,e,n,r,i){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(e=n.alternate,e!==null&&ld(e,n,i,!0),n=as.current,n!==null){switch(n.tag){case 13:return Fs===null?N_():n.alternate===null&&Rn===0&&(Rn=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===d_?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([r]):e.add(r),dy(t,r,i)),!1;case 22:return n.flags|=65536,r===d_?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([r]):n.add(r)),dy(t,r,i)),!1}throw Error(pe(435,n.tag))}return dy(t,r,i),N_(),!1}if(It)return e=as.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,r!==l_&&(t=Error(pe(422),{cause:r}),kf(es(t,n)))):(r!==l_&&(e=Error(pe(423),{cause:r}),kf(es(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,r=es(r,n),i=x_(t.stateNode,r,i),ey(t,i),Rn!==4&&(Rn=2)),!1;var s=Error(pe(520),{cause:r});if(s=es(s,n),bf===null?bf=[s]:bf.push(s),Rn!==4&&(Rn=2),e===null)return!0;r=es(r,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=x_(n.stateNode,r,t),ey(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Oo===null||!Oo.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,i=PC(i),LC(i,t,n,r),ey(n,i),!1}n=n.return}while(n!==null);return!1}var UC=Error(pe(461)),fr=!1;function yr(t,e,n,r){e.child=t===null?DC(e,null,n,r):Mc(e,t.child,n,r)}function zT(t,e,n,r,i){n=n.render;var s=e.ref;if("ref"in r){var a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}else a=r;return Kl(e),r=u1(t,e,n,a,s,i),l=c1(),t!==null&&!fr?(h1(t,e,i),Ma(t,e,i)):(It&&l&&n1(e),e.flags|=1,yr(t,e,r,i),e.child)}function BT(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!t1(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,VC(t,e,s,r,i)):(t=up(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!b1(t,i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:jf,n(a,r)&&t.ref===e.ref)return Ma(t,e,i)}return e.flags|=1,t=Ca(s,r),t.ref=e.ref,t.return=e,e.child=t}function VC(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(jf(s,r)&&t.ref===e.ref)if(fr=!1,e.pendingProps=r=s,b1(t,i))t.flags&131072&&(fr=!0);else return e.lanes=t.lanes,Ma(t,e,i)}return w_(t,e,n,r,i)}function zC(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden"){if(e.flags&128){if(r=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,s=0;i!==null;)s=s|i.lanes|i.childLanes,i=i.sibling;e.childLanes=s&~r}else e.childLanes=0,e.child=null;return FT(t,e,r,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&cp(e,s!==null?s.cachePool:null),s!==null?NT(e,s):g_(),OC(e);else return e.lanes=e.childLanes=536870912,FT(t,e,s!==null?s.baseLanes|n:n,n)}else s!==null?(cp(e,s.cachePool),NT(e,s),po(),e.memoizedState=null):(t!==null&&cp(e,null),g_(),po());return yr(t,e,i,n),e.child}function FT(t,e,n,r){var i=s1();return i=i===null?null:{parent:er._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},t!==null&&cp(e,null),g_(),OC(e),t!==null&&ld(t,e,r,!0),null}function dp(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(pe(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function w_(t,e,n,r,i){return Kl(e),n=u1(t,e,n,r,void 0,i),r=c1(),t!==null&&!fr?(h1(t,e,i),Ma(t,e,i)):(It&&r&&n1(e),e.flags|=1,yr(t,e,n,i),e.child)}function HT(t,e,n,r,i,s){return Kl(e),e.updateQueue=null,n=JR(e,r,n,i),ZR(t),r=c1(),t!==null&&!fr?(h1(t,e,s),Ma(t,e,s)):(It&&r&&n1(e),e.flags|=1,yr(t,e,n,s),e.child)}function qT(t,e,n,r,i){if(Kl(e),e.stateNode===null){var s=sc,a=n.contextType;typeof a=="object"&&a!==null&&(s=Mr(a)),s=new n(r,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=b_,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=r,s.state=e.memoizedState,s.refs={},a1(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?Mr(a):sc,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(ny(e,n,a,r),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&b_.enqueueReplaceState(s,s.state,null),gf(e,r,s,i),pf(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!0}else if(t===null){s=e.stateNode;var l=e.memoizedProps,c=Zl(n,l);s.props=c;var f=s.context,h=n.contextType;a=sc,typeof h=="object"&&h!==null&&(a=Mr(h));var m=n.getDerivedStateFromProps;h=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||f!==a)&&UT(e,s,r,a),ho=!1;var p=e.memoizedState;s.state=p,gf(e,r,s,i),pf(),f=e.memoizedState,l||p!==f||ho?(typeof m=="function"&&(ny(e,n,m,r),f=e.memoizedState),(c=ho||LT(e,n,c,r,p,f,a))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=f),s.props=r,s.state=f,s.context=a,r=c):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,m_(t,e),a=e.memoizedProps,h=Zl(n,a),s.props=h,m=e.pendingProps,p=s.context,f=n.contextType,c=sc,typeof f=="object"&&f!==null&&(c=Mr(f)),l=n.getDerivedStateFromProps,(f=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==m||p!==c)&&UT(e,s,r,c),ho=!1,p=e.memoizedState,s.state=p,gf(e,r,s,i),pf();var y=e.memoizedState;a!==m||p!==y||ho||t!==null&&t.dependencies!==null&&Vp(t.dependencies)?(typeof l=="function"&&(ny(e,n,l,r),y=e.memoizedState),(h=ho||LT(e,n,h,r,p,y,c)||t!==null&&t.dependencies!==null&&Vp(t.dependencies))?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,y,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,y,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),s.props=r,s.state=y,s.context=c,r=h):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return s=r,dp(t,e),r=(e.flags&128)!==0,s||r?(s=e.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&r?(e.child=Mc(e,t.child,null,i),e.child=Mc(e,null,n,i)):yr(t,e,n,i),e.memoizedState=s.state,t=e.child):t=Ma(t,e,i),t}function GT(t,e,n,r){return od(),e.flags|=256,yr(t,e,n,r),e.child}var ry={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function iy(t){return{baseLanes:t,cachePool:YR()}}function sy(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=ns),t}function BC(t,e,n){var r=e.pendingProps,i=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(tr.current&2)!==0),a&&(i=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(It){if(i?mo(e):po(),It){var l=Sn,c;if(c=l){e:{for(c=l,l=Us;c.nodeType!==8;){if(!l){l=null;break e}if(c=Ts(c.nextSibling),c===null){l=null;break e}}l=c}l!==null?(e.memoizedState={dehydrated:l,treeContext:zl!==null?{id:wa,overflow:Ea}:null,retryLane:536870912,hydrationErrors:null},c=wi(18,null,null,0),c.stateNode=l,c.return=e,e.child=c,Fr=e,Sn=null,c=!0):c=!1}c||Xl(e)}if(l=e.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return P_(l)?e.lanes=32:e.lanes=536870912,null;Aa(e)}return l=r.children,r=r.fallback,i?(po(),i=e.mode,l=Yp({mode:"hidden",children:l},i),r=Vl(r,i,n,null),l.return=e,r.return=e,l.sibling=r,e.child=l,i=e.child,i.memoizedState=iy(n),i.childLanes=sy(t,a,n),e.memoizedState=ry,r):(mo(e),E_(e,l))}if(c=t.memoizedState,c!==null&&(l=c.dehydrated,l!==null)){if(s)e.flags&256?(mo(e),e.flags&=-257,e=ay(t,e,n)):e.memoizedState!==null?(po(),e.child=t.child,e.flags|=128,e=null):(po(),i=r.fallback,l=e.mode,r=Yp({mode:"visible",children:r.children},l),i=Vl(i,l,n,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,Mc(e,t.child,null,n),r=e.child,r.memoizedState=iy(n),r.childLanes=sy(t,a,n),e.memoizedState=ry,e=i);else if(mo(e),P_(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var f=a.dgst;a=f,r=Error(pe(419)),r.stack="",r.digest=a,kf({value:r,source:null,stack:null}),e=ay(t,e,n)}else if(fr||ld(t,e,n,!1),a=(n&t.childLanes)!==0,fr||a){if(a=nn,a!==null&&(r=n&-n,r=r&42?1:qb(r),r=r&(a.suspendedLanes|n)?0:r,r!==0&&r!==c.retryLane))throw c.retryLane=r,Zc(t,r),Ni(a,t,r),UC;l.data==="$?"||N_(),e=ay(t,e,n)}else l.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,Sn=Ts(l.nextSibling),Fr=e,It=!0,Bl=null,Us=!1,t!==null&&(Qi[Zi++]=wa,Qi[Zi++]=Ea,Qi[Zi++]=zl,wa=t.id,Ea=t.overflow,zl=e),e=E_(e,r.children),e.flags|=4096);return e}return i?(po(),i=r.fallback,l=e.mode,c=t.child,f=c.sibling,r=Ca(c,{mode:"hidden",children:r.children}),r.subtreeFlags=c.subtreeFlags&65011712,f!==null?i=Ca(f,i):(i=Vl(i,l,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,l=t.child.memoizedState,l===null?l=iy(n):(c=l.cachePool,c!==null?(f=er._currentValue,c=c.parent!==f?{parent:f,pool:f}:c):c=YR(),l={baseLanes:l.baseLanes|n,cachePool:c}),i.memoizedState=l,i.childLanes=sy(t,a,n),e.memoizedState=ry,r):(mo(e),n=t.child,t=n.sibling,n=Ca(n,{mode:"visible",children:r.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function E_(t,e){return e=Yp({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Yp(t,e){return t=wi(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function ay(t,e,n){return Mc(e,t.child,null,n),t=E_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $T(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),c_(t.return,e,n)}function oy(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function FC(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(yr(t,e,r.children,n),r=tr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$T(t,n,e);else if(t.tag===19)$T(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}switch(vn(tr,r),i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&qp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),oy(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&qp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}oy(e,!0,n,null,s);break;case"together":oy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ma(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qo|=e.lanes,!(n&e.childLanes))if(t!==null){if(ld(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(pe(153));if(e.child!==null){for(t=e.child,n=Ca(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ca(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function b1(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Vp(t)))}function rU(t,e,n){switch(e.tag){case 3:Dp(e,e.stateNode.containerInfo),fo(e,er,t.memoizedState.cache),od();break;case 27:case 5:Zy(e);break;case 4:Dp(e,e.stateNode.containerInfo);break;case 10:fo(e,e.type,e.memoizedProps.value);break;case 13:var r=e.memoizedState;if(r!==null)return r.dehydrated!==null?(mo(e),e.flags|=128,null):n&e.child.childLanes?BC(t,e,n):(mo(e),t=Ma(t,e,n),t!==null?t.sibling:null);mo(e);break;case 19:var i=(t.flags&128)!==0;if(r=(n&e.childLanes)!==0,r||(ld(t,e,n,!1),r=(n&e.childLanes)!==0),i){if(r)return FC(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),vn(tr,tr.current),r)break;return null;case 22:case 23:return e.lanes=0,zC(t,e,n);case 24:fo(e,er,t.memoizedState.cache)}return Ma(t,e,n)}function HC(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)fr=!0;else{if(!b1(t,n)&&!(e.flags&128))return fr=!1,rU(t,e,n);fr=!!(t.flags&131072)}else fr=!1,It&&e.flags&1048576&&GR(e,Up,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var r=e.elementType,i=r._init;if(r=i(r._payload),e.type=r,typeof r=="function")t1(r)?(t=Zl(r,t),e.tag=1,e=qT(null,e,r,t,n)):(e.tag=0,e=w_(null,e,r,t,n));else{if(r!=null){if(i=r.$$typeof,i===Bb){e.tag=11,e=zT(null,e,r,t,n);break e}else if(i===Fb){e.tag=14,e=BT(null,e,r,t,n);break e}}throw e=Ky(r)||r,Error(pe(306,e,""))}}return e;case 0:return w_(t,e,e.type,e.pendingProps,n);case 1:return r=e.type,i=Zl(r,e.pendingProps),qT(t,e,r,i,n);case 3:e:{if(Dp(e,e.stateNode.containerInfo),t===null)throw Error(pe(387));r=e.pendingProps;var s=e.memoizedState;i=s.element,m_(t,e),gf(e,r,null,n);var a=e.memoizedState;if(r=a.cache,fo(e,er,r),r!==s.cache&&h_(e,[er],n,!0),pf(),r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=GT(t,e,r,n);break e}else if(r!==i){i=es(Error(pe(424)),e),kf(i),e=GT(t,e,r,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Sn=Ts(t.firstChild),Fr=e,It=!0,Bl=null,Us=!0,n=DC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(od(),r===i){e=Ma(t,e,n);break e}yr(t,e,r,n)}e=e.child}return e;case 26:return dp(t,e),t===null?(n=u2(e.type,null,e.pendingProps,null))?e.memoizedState=n:It||(n=e.type,t=e.pendingProps,r=eg(No.current).createElement(n),r[Or]=e,r[li]=t,wr(r,n,t),hr(r),e.stateNode=r):e.memoizedState=u2(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Zy(e),t===null&&It&&(r=e.stateNode=NN(e.type,e.pendingProps,No.current),Fr=e,Us=!0,i=Sn,tl(e.type)?(L_=i,Sn=Ts(r.firstChild)):Sn=i),yr(t,e,e.pendingProps.children,n),dp(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&It&&((i=r=Sn)&&(r=DU(r,e.type,e.pendingProps,Us),r!==null?(e.stateNode=r,Fr=e,Sn=Ts(r.firstChild),Us=!1,i=!0):i=!1),i||Xl(e)),Zy(e),i=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,r=s.children,j_(i,s)?r=null:a!==null&&j_(i,a)&&(e.flags|=32),e.memoizedState!==null&&(i=u1(t,e,XL,null,null,n),Bf._currentValue=i),dp(t,e),yr(t,e,r,n),e.child;case 6:return t===null&&It&&((t=n=Sn)&&(n=OU(n,e.pendingProps,Us),n!==null?(e.stateNode=n,Fr=e,Sn=null,t=!0):t=!1),t||Xl(e)),null;case 13:return BC(t,e,n);case 4:return Dp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Mc(e,null,r,n):yr(t,e,r,n),e.child;case 11:return zT(t,e,e.type,e.pendingProps,n);case 7:return yr(t,e,e.pendingProps,n),e.child;case 8:return yr(t,e,e.pendingProps.children,n),e.child;case 12:return yr(t,e,e.pendingProps.children,n),e.child;case 10:return r=e.pendingProps,fo(e,e.type,r.value),yr(t,e,r.children,n),e.child;case 9:return i=e.type._context,r=e.pendingProps.children,Kl(e),i=Mr(i),r=r(i),e.flags|=1,yr(t,e,r,n),e.child;case 14:return BT(t,e,e.type,e.pendingProps,n);case 15:return VC(t,e,e.type,e.pendingProps,n);case 19:return FC(t,e,n);case 31:return r=e.pendingProps,n=e.mode,r={mode:r.mode,children:r.children},t===null?(n=Yp(r,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=Ca(t.child,r),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return zC(t,e,n);case 24:return Kl(e),r=Mr(er),t===null?(i=s1(),i===null&&(i=nn,s=i1(),i.pooledCache=s,s.refCount++,s!==null&&(i.pooledCacheLanes|=n),i=s),e.memoizedState={parent:r,cache:i},a1(e),fo(e,er,i)):(t.lanes&n&&(m_(t,e),gf(e,null,null,n),pf()),i=t.memoizedState,s=e.memoizedState,i.parent!==r?(i={parent:r,cache:r},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),fo(e,er,r)):(r=s.cache,fo(e,er,r),r!==i.cache&&h_(e,[er],n,!0))),yr(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(pe(156,e.tag))}function va(t){t.flags|=4}function YT(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!ON(e)){if(e=as.current,e!==null&&((wt&4194048)===wt?Fs!==null:(wt&62914560)!==wt&&!(wt&536870912)||e!==Fs))throw df=d_,WR;t.flags|=8192}}function Hm(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?pR():536870912,t.lanes|=e,jc|=e)}function zh(t,e){if(!It)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function bn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iU(t,e,n){var r=e.pendingProps;switch(r1(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(e),null;case 1:return bn(e),null;case 3:return n=e.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),Na(er),Rc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Uh(e)?va(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ET())),bn(e),null;case 26:return n=e.memoizedState,t===null?(va(e),n!==null?(bn(e),YT(e,n)):(bn(e),e.flags&=-16777217)):n?n!==t.memoizedState?(va(e),bn(e),YT(e,n)):(bn(e),e.flags&=-16777217):(t.memoizedProps!==r&&va(e),bn(e),e.flags&=-16777217),null;case 27:Op(e),n=No.current;var i=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==r&&va(e);else{if(!r){if(e.stateNode===null)throw Error(pe(166));return bn(e),null}t=zs.current,Uh(e)?xT(e):(t=NN(i,r,n),e.stateNode=t,va(e))}return bn(e),null;case 5:if(Op(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==r&&va(e);else{if(!r){if(e.stateNode===null)throw Error(pe(166));return bn(e),null}if(t=zs.current,Uh(e))xT(e);else{switch(i=eg(No.current),t){case 1:t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof r.is=="string"?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?t.multiple=!0:r.size&&(t.size=r.size);break;default:t=typeof r.is=="string"?i.createElement(n,{is:r.is}):i.createElement(n)}}t[Or]=e,t[li]=r;e:for(i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}e.stateNode=t;e:switch(wr(t,n,r),n){case"button":case"input":case"select":case"textarea":t=!!r.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&va(e)}}return bn(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==r&&va(e);else{if(typeof r!="string"&&e.stateNode===null)throw Error(pe(166));if(t=No.current,Uh(e)){if(t=e.stateNode,n=e.memoizedProps,r=null,i=Fr,i!==null)switch(i.tag){case 27:case 5:r=i.memoizedProps}t[Or]=e,t=!!(t.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||SN(t.nodeValue,n)),t||Xl(e)}else t=eg(t).createTextNode(r),t[Or]=e,e.stateNode=t}return bn(e),null;case 13:if(r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=Uh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(pe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(pe(317));i[Or]=e}else od(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bn(e),i=!1}else i=ET(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(Aa(e),e):(Aa(e),null)}if(Aa(e),e.flags&128)return e.lanes=n,e;if(n=r!==null,t=t!==null&&t.memoizedState!==null,n){r=e.child,i=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),Hm(e,e.updateQueue),bn(e),null;case 4:return Rc(),t===null&&C1(e.stateNode.containerInfo),bn(e),null;case 10:return Na(e.type),bn(e),null;case 19:if(dr(tr),i=e.memoizedState,i===null)return bn(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)zh(i,!1);else{if(Rn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=qp(t),s!==null){for(e.flags|=128,zh(i,!1),t=s.updateQueue,e.updateQueue=t,Hm(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)qR(n,t),n=n.sibling;return vn(tr,tr.current&1|2),e.child}t=t.sibling}i.tail!==null&&Bs()>Xp&&(e.flags|=128,r=!0,zh(i,!1),e.lanes=4194304)}else{if(!r)if(t=qp(s),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,Hm(e,t),zh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!It)return bn(e),null}else 2*Bs()-i.renderingStartTime>Xp&&n!==536870912&&(e.flags|=128,r=!0,zh(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Bs(),e.sibling=null,t=tr.current,vn(tr,r?t&1|2:t&1),e):(bn(e),null);case 22:case 23:return Aa(e),o1(),r=e.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(e.flags|=8192):r&&(e.flags|=8192),r?n&536870912&&!(e.flags&128)&&(bn(e),e.subtreeFlags&6&&(e.flags|=8192)):bn(e),n=e.updateQueue,n!==null&&Hm(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),r=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),r!==n&&(e.flags|=2048),t!==null&&dr(Fl),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Na(er),bn(e),null;case 25:return null;case 30:return null}throw Error(pe(156,e.tag))}function sU(t,e){switch(r1(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Na(er),Rc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Op(e),null;case 13:if(Aa(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(pe(340));od()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return dr(tr),null;case 4:return Rc(),null;case 10:return Na(e.type),null;case 22:case 23:return Aa(e),o1(),t!==null&&dr(Fl),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Na(er),null;case 25:return null;default:return null}}function qC(t,e){switch(r1(e),e.tag){case 3:Na(er),Rc();break;case 26:case 27:case 5:Op(e);break;case 4:Rc();break;case 13:Aa(e);break;case 19:dr(tr);break;case 10:Na(e.type);break;case 22:case 23:Aa(e),o1(),t!==null&&dr(Fl);break;case 24:Na(er)}}function dd(t,e){try{var n=e.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var i=r.next;n=i;do{if((n.tag&t)===t){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(l){Jt(e,e.return,l)}}function Ho(t,e,n){try{var r=e.updateQueue,i=r!==null?r.lastEffect:null;if(i!==null){var s=i.next;r=s;do{if((r.tag&t)===t){var a=r.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,i=e;var c=n,f=l;try{f()}catch(h){Jt(i,c,h)}}}r=r.next}while(r!==s)}}catch(h){Jt(e,e.return,h)}}function GC(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{QR(e,n)}catch(r){Jt(t,t.return,r)}}}function $C(t,e,n){n.props=Zl(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(r){Jt(t,e,r)}}function yf(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof n=="function"?t.refCleanup=n(r):n.current=r}}catch(i){Jt(t,e,i)}}function Vs(t,e){var n=t.ref,r=t.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(i){Jt(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){Jt(t,e,i)}else n.current=null}function YC(t){var e=t.type,n=t.memoizedProps,r=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){Jt(t,t.return,i)}}function ly(t,e,n){try{var r=t.stateNode;SU(r,t.type,n,e),r[li]=e}catch(i){Jt(t,t.return,i)}}function WC(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&tl(t.type)||t.tag===4}function uy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||WC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&tl(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function T_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=tv));else if(r!==4&&(r===27&&tl(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(T_(t,e,n),t=t.sibling;t!==null;)T_(t,e,n),t=t.sibling}function Wp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(r===27&&tl(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Wp(t,e,n),t=t.sibling;t!==null;)Wp(t,e,n),t=t.sibling}function XC(t){var e=t.stateNode,n=t.memoizedProps;try{for(var r=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);wr(e,r,n),e[Or]=t,e[li]=n}catch(s){Jt(t,t.return,s)}}var _a=!1,jn=!1,cy=!1,WT=typeof WeakSet=="function"?WeakSet:Set,cr=null;function aU(t,e){if(t=t.containerInfo,O_=ig,t=PR(t),Zb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,f=0,h=0,m=t,p=null;t:for(;;){for(var y;m!==n||i!==0&&m.nodeType!==3||(l=a+i),m!==s||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(y=m.firstChild)!==null;)p=m,m=y;for(;;){if(m===t)break t;if(p===n&&++f===i&&(l=a),p===s&&++h===r&&(c=a),(y=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(M_={focusedElem:t,selectionRange:n},ig=!1,cr=e;cr!==null;)if(e=cr,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,cr=t;else for(;cr!==null;){switch(e=cr,s=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var T=Zl(n.type,i,n.elementType===n.type);t=r.getSnapshotBeforeUpdate(T,s),r.__reactInternalSnapshotBeforeUpdate=t}catch(N){Jt(n,n.return,N)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)k_(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":k_(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(pe(163))}if(t=e.sibling,t!==null){t.return=e.return,cr=t;break}cr=e.return}}function KC(t,e,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:so(t,n),r&4&&dd(5,n);break;case 1:if(so(t,n),r&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Jt(n,n.return,a)}else{var i=Zl(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Jt(n,n.return,a)}}r&64&&GC(n),r&512&&yf(n,n.return);break;case 3:if(so(t,n),r&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{QR(t,e)}catch(a){Jt(n,n.return,a)}}break;case 27:e===null&&r&4&&XC(n);case 26:case 5:so(t,n),e===null&&r&4&&YC(n),r&512&&yf(n,n.return);break;case 12:so(t,n);break;case 13:so(t,n),r&4&&JC(t,n),r&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=pU.bind(null,n),MU(t,n))));break;case 22:if(r=n.memoizedState!==null||_a,!r){e=e!==null&&e.memoizedState!==null||jn,i=_a;var s=jn;_a=r,(jn=e)&&!s?lo(t,n,(n.subtreeFlags&8772)!==0):so(t,n),_a=i,jn=s}break;case 30:break;default:so(t,n)}}function QC(t){var e=t.alternate;e!==null&&(t.alternate=null,QC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&$b(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var fn=null,Zr=!1;function ya(t,e,n){for(n=n.child;n!==null;)ZC(t,e,n),n=n.sibling}function ZC(t,e,n){if(Si&&typeof Si.onCommitFiberUnmount=="function")try{Si.onCommitFiberUnmount(nd,n)}catch{}switch(n.tag){case 26:jn||Vs(n,e),ya(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:jn||Vs(n,e);var r=fn,i=Zr;tl(n.type)&&(fn=n.stateNode,Zr=!1),ya(t,e,n),wf(n.stateNode),fn=r,Zr=i;break;case 5:jn||Vs(n,e);case 6:if(r=fn,i=Zr,fn=null,ya(t,e,n),fn=r,Zr=i,fn!==null)if(Zr)try{(fn.nodeType===9?fn.body:fn.nodeName==="HTML"?fn.ownerDocument.body:fn).removeChild(n.stateNode)}catch(s){Jt(n,e,s)}else try{fn.removeChild(n.stateNode)}catch(s){Jt(n,e,s)}break;case 18:fn!==null&&(Zr?(t=fn,a2(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),qf(t)):a2(fn,n.stateNode));break;case 4:r=fn,i=Zr,fn=n.stateNode.containerInfo,Zr=!0,ya(t,e,n),fn=r,Zr=i;break;case 0:case 11:case 14:case 15:jn||Ho(2,n,e),jn||Ho(4,n,e),ya(t,e,n);break;case 1:jn||(Vs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"&&$C(n,e,r)),ya(t,e,n);break;case 21:ya(t,e,n);break;case 22:jn=(r=jn)||n.memoizedState!==null,ya(t,e,n),jn=r;break;default:ya(t,e,n)}}function JC(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{qf(t)}catch(n){Jt(e,e.return,n)}}function oU(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new WT),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new WT),e;default:throw Error(pe(435,t.tag))}}function hy(t,e){var n=oU(t);e.forEach(function(r){var i=gU.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}function yi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r],s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 27:if(tl(l.type)){fn=l.stateNode,Zr=!1;break e}break;case 5:fn=l.stateNode,Zr=!1;break e;case 3:case 4:fn=l.stateNode.containerInfo,Zr=!0;break e}l=l.return}if(fn===null)throw Error(pe(160));ZC(s,a,i),fn=null,Zr=!1,s=i.alternate,s!==null&&(s.return=null),i.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)eN(e,t),e=e.sibling}var bs=null;function eN(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:yi(e,t),_i(t),r&4&&(Ho(3,t,t.return),dd(3,t),Ho(5,t,t.return));break;case 1:yi(e,t),_i(t),r&512&&(jn||n===null||Vs(n,n.return)),r&64&&_a&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var i=bs;if(yi(e,t),_i(t),r&512&&(jn||n===null||Vs(n,n.return)),r&4){var s=n!==null?n.memoizedState:null;if(r=t.memoizedState,n===null)if(r===null)if(t.stateNode===null){e:{r=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":s=i.getElementsByTagName("title")[0],(!s||s[sd]||s[Or]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),wr(s,r,n),s[Or]=t,hr(s),r=s;break e;case"link":var a=h2("link","href",i).get(r+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break t}}s=i.createElement(r),wr(s,r,n),i.head.appendChild(s);break;case"meta":if(a=h2("meta","content",i).get(r+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break t}}s=i.createElement(r),wr(s,r,n),i.head.appendChild(s);break;default:throw Error(pe(468,r))}s[Or]=t,hr(s),r=s}t.stateNode=r}else f2(i,t.type,t.stateNode);else t.stateNode=c2(i,r,t.memoizedProps);else s!==r?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,r===null?f2(i,t.type,t.stateNode):c2(i,r,t.memoizedProps)):r===null&&t.stateNode!==null&&ly(t,t.memoizedProps,n.memoizedProps)}break;case 27:yi(e,t),_i(t),r&512&&(jn||n===null||Vs(n,n.return)),n!==null&&r&4&&ly(t,t.memoizedProps,n.memoizedProps);break;case 5:if(yi(e,t),_i(t),r&512&&(jn||n===null||Vs(n,n.return)),t.flags&32){i=t.stateNode;try{Nc(i,"")}catch(y){Jt(t,t.return,y)}}r&4&&t.stateNode!=null&&(i=t.memoizedProps,ly(t,i,n!==null?n.memoizedProps:i)),r&1024&&(cy=!0);break;case 6:if(yi(e,t),_i(t),r&4){if(t.stateNode===null)throw Error(pe(162));r=t.memoizedProps,n=t.stateNode;try{n.nodeValue=r}catch(y){Jt(t,t.return,y)}}break;case 3:if(gp=null,i=bs,bs=tg(e.containerInfo),yi(e,t),bs=i,_i(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qf(e.containerInfo)}catch(y){Jt(t,t.return,y)}cy&&(cy=!1,tN(t));break;case 4:r=bs,bs=tg(t.stateNode.containerInfo),yi(e,t),_i(t),bs=r;break;case 12:yi(e,t),_i(t);break;case 13:yi(e,t),_i(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(A1=Bs()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,hy(t,r)));break;case 22:i=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,f=_a,h=jn;if(_a=f||i,jn=h||c,yi(e,t),jn=h,_a=f,_i(t),r&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||c||_a||jn||Nl(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(s=c.stateNode,i)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var m=c.memoizedProps.style,p=m!=null&&m.hasOwnProperty("display")?m.display:null;l.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(y){Jt(c,c.return,y)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(y){Jt(c,c.return,y)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}r&4&&(r=t.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,hy(t,n))));break;case 19:yi(e,t),_i(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,hy(t,r)));break;case 30:break;case 21:break;default:yi(e,t),_i(t)}}function _i(t){var e=t.flags;if(e&2){try{for(var n,r=t.return;r!==null;){if(WC(r)){n=r;break}r=r.return}if(n==null)throw Error(pe(160));switch(n.tag){case 27:var i=n.stateNode,s=uy(t);Wp(t,s,i);break;case 5:var a=n.stateNode;n.flags&32&&(Nc(a,""),n.flags&=-33);var l=uy(t);Wp(t,l,a);break;case 3:case 4:var c=n.stateNode.containerInfo,f=uy(t);T_(t,f,c);break;default:throw Error(pe(161))}}catch(h){Jt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tN(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;tN(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function so(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)KC(t,e.alternate,e),e=e.sibling}function Nl(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Ho(4,e,e.return),Nl(e);break;case 1:Vs(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&$C(e,e.return,n),Nl(e);break;case 27:wf(e.stateNode);case 26:case 5:Vs(e,e.return),Nl(e);break;case 22:e.memoizedState===null&&Nl(e);break;case 30:Nl(e);break;default:Nl(e)}t=t.sibling}}function lo(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var r=e.alternate,i=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:lo(i,s,n),dd(4,s);break;case 1:if(lo(i,s,n),r=s,i=r.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(f){Jt(r,r.return,f)}if(r=s,i=r.updateQueue,i!==null){var l=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)KR(c[i],l)}catch(f){Jt(r,r.return,f)}}n&&a&64&&GC(s),yf(s,s.return);break;case 27:XC(s);case 26:case 5:lo(i,s,n),n&&r===null&&a&4&&YC(s),yf(s,s.return);break;case 12:lo(i,s,n);break;case 13:lo(i,s,n),n&&a&4&&JC(i,s);break;case 22:s.memoizedState===null&&lo(i,s,n),yf(s,s.return);break;case 30:break;default:lo(i,s,n)}e=e.sibling}}function x1(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&ud(n))}function w1(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ud(t))}function js(t,e,n,r){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)nN(t,e,n,r),e=e.sibling}function nN(t,e,n,r){var i=e.flags;switch(e.tag){case 0:case 11:case 15:js(t,e,n,r),i&2048&&dd(9,e);break;case 1:js(t,e,n,r);break;case 3:js(t,e,n,r),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ud(t)));break;case 12:if(i&2048){js(t,e,n,r),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){Jt(e,e.return,c)}}else js(t,e,n,r);break;case 13:js(t,e,n,r);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?js(t,e,n,r):_f(t,e):s._visibility&2?js(t,e,n,r):(s._visibility|=2,qu(t,e,n,r,(e.subtreeFlags&10256)!==0)),i&2048&&x1(a,e);break;case 24:js(t,e,n,r),i&2048&&w1(e.alternate,e);break;default:js(t,e,n,r)}}function qu(t,e,n,r,i){for(i=i&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var s=t,a=e,l=n,c=r,f=a.flags;switch(a.tag){case 0:case 11:case 15:qu(s,a,l,c,i),dd(8,a);break;case 23:break;case 22:var h=a.stateNode;a.memoizedState!==null?h._visibility&2?qu(s,a,l,c,i):_f(s,a):(h._visibility|=2,qu(s,a,l,c,i)),i&&f&2048&&x1(a.alternate,a);break;case 24:qu(s,a,l,c,i),i&&f&2048&&w1(a.alternate,a);break;default:qu(s,a,l,c,i)}e=e.sibling}}function _f(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,r=e,i=r.flags;switch(r.tag){case 22:_f(n,r),i&2048&&x1(r.alternate,r);break;case 24:_f(n,r),i&2048&&w1(r.alternate,r);break;default:_f(n,r)}e=e.sibling}}var tf=8192;function Pu(t){if(t.subtreeFlags&tf)for(t=t.child;t!==null;)rN(t),t=t.sibling}function rN(t){switch(t.tag){case 26:Pu(t),t.flags&tf&&t.memoizedState!==null&&$U(bs,t.memoizedState,t.memoizedProps);break;case 5:Pu(t);break;case 3:case 4:var e=bs;bs=tg(t.stateNode.containerInfo),Pu(t),bs=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=tf,tf=16777216,Pu(t),tf=e):Pu(t));break;default:Pu(t)}}function iN(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Bh(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];cr=r,aN(r,t)}iN(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)sN(t),t=t.sibling}function sN(t){switch(t.tag){case 0:case 11:case 15:Bh(t),t.flags&2048&&Ho(9,t,t.return);break;case 3:Bh(t);break;case 12:Bh(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,mp(t)):Bh(t);break;default:Bh(t)}}function mp(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];cr=r,aN(r,t)}iN(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Ho(8,e,e.return),mp(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,mp(e));break;default:mp(e)}t=t.sibling}}function aN(t,e){for(;cr!==null;){var n=cr;switch(n.tag){case 0:case 11:case 15:Ho(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ud(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,cr=r;else e:for(n=t;cr!==null;){r=cr;var i=r.sibling,s=r.return;if(QC(r),r===n){cr=null;break e}if(i!==null){i.return=s,cr=i;break e}cr=s}}}var lU={getCacheForType:function(t){var e=Mr(er),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},uU=typeof WeakMap=="function"?WeakMap:Map,Ft=0,nn=null,ht=null,wt=0,zt=0,bi=null,Eo=!1,Jc=!1,E1=!1,ja=0,Rn=0,qo=0,Hl=0,T1=0,ns=0,jc=0,bf=null,ti=null,A_=!1,A1=0,Xp=1/0,Kp=null,Oo=null,br=0,Mo=null,kc=null,bc=0,S_=0,R_=null,oN=null,xf=0,C_=null;function Ci(){if(Ft&2&&wt!==0)return wt&-wt;if(Fe.T!==null){var t=Ic;return t!==0?t:R1()}return yR()}function lN(){ns===0&&(ns=!(wt&536870912)||It?mR():536870912);var t=as.current;return t!==null&&(t.flags|=32),ns}function Ni(t,e,n){(t===nn&&(zt===2||zt===9)||t.cancelPendingCommit!==null)&&(Pc(t,0),To(t,wt,ns,!1)),id(t,n),(!(Ft&2)||t!==nn)&&(t===nn&&(!(Ft&2)&&(Hl|=n),Rn===4&&To(t,wt,ns,!1)),ea(t))}function uN(t,e,n){if(Ft&6)throw Error(pe(327));var r=!n&&(e&124)===0&&(e&t.expiredLanes)===0||rd(t,e),i=r?fU(t,e):fy(t,e,!0),s=r;do{if(i===0){Jc&&!r&&To(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!cU(n)){i=fy(t,e,!1),s=!1;continue}if(i===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var l=t;i=bf;var c=l.current.memoizedState.isDehydrated;if(c&&(Pc(l,a).flags|=256),a=fy(l,a,!1),a!==2){if(E1&&!c){l.errorRecoveryDisabledLanes|=s,Hl|=s,i=4;break e}s=ti,ti=i,s!==null&&(ti===null?ti=s:ti.push.apply(ti,s))}i=a}if(s=!1,i!==2)continue}}if(i===1){Pc(t,0),To(t,e,0,!0);break}e:{switch(r=t,s=i,s){case 0:case 1:throw Error(pe(345));case 4:if((e&4194048)!==e)break;case 6:To(r,e,ns,!Eo);break e;case 2:ti=null;break;case 3:case 5:break;default:throw Error(pe(329))}if((e&62914560)===e&&(i=A1+300-Bs(),10<i)){if(To(r,e,ns,!Eo),Fg(r,0,!0)!==0)break e;r.timeoutHandle=CN(XT.bind(null,r,n,ti,Kp,A_,e,ns,Hl,jc,Eo,s,2,-0,0),i);break e}XT(r,n,ti,Kp,A_,e,ns,Hl,jc,Eo,s,0,-0,0)}}break}while(!0);ea(t)}function XT(t,e,n,r,i,s,a,l,c,f,h,m,p,y){if(t.timeoutHandle=-1,m=e.subtreeFlags,(m&8192||(m&16785408)===16785408)&&(zf={stylesheets:null,count:0,unsuspend:GU},rN(e),m=YU(),m!==null)){t.cancelPendingCommit=m(QT.bind(null,t,e,s,n,r,i,a,l,c,h,1,p,y)),To(t,s,a,!f);return}QT(t,e,s,n,r,i,a,l,c)}function cU(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Di(s(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function To(t,e,n,r){e&=~T1,e&=~Hl,t.suspendedLanes|=e,t.pingedLanes&=~e,r&&(t.warmLanes|=e),r=t.expirationTimes;for(var i=e;0<i;){var s=31-Ri(i),a=1<<s;r[s]=-1,i&=~a}n!==0&&gR(t,n,e)}function Zg(){return Ft&6?!0:(md(0),!1)}function S1(){if(ht!==null){if(zt===0)var t=ht.return;else t=ht,Ta=uu=null,f1(t),_c=null,Lf=0,t=ht;for(;t!==null;)qC(t.alternate,t),t=t.return;ht=null}}function Pc(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,CU(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),S1(),nn=t,ht=n=Ca(t.current,null),wt=e,zt=0,bi=null,Eo=!1,Jc=rd(t,e),E1=!1,jc=ns=T1=Hl=qo=Rn=0,ti=bf=null,A_=!1,e&8&&(e|=e&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=e;0<r;){var i=31-Ri(r),s=1<<i;e|=t[i],r&=~s}return ja=e,$g(),n}function cN(t,e){rt=null,Fe.H=Hp,e===cd||e===Wg?(e=RT(),zt=3):e===WR?(e=RT(),zt=4):zt=e===UC?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,bi=e,ht===null&&(Rn=1,$p(t,es(e,t.current)))}function hN(){var t=Fe.H;return Fe.H=Hp,t===null?Hp:t}function fN(){var t=Fe.A;return Fe.A=lU,t}function N_(){Rn=4,Eo||(wt&4194048)!==wt&&as.current!==null||(Jc=!0),!(qo&134217727)&&!(Hl&134217727)||nn===null||To(nn,wt,ns,!1)}function fy(t,e,n){var r=Ft;Ft|=2;var i=hN(),s=fN();(nn!==t||wt!==e)&&(Kp=null,Pc(t,e)),e=!1;var a=Rn;e:do try{if(zt!==0&&ht!==null){var l=ht,c=bi;switch(zt){case 8:S1(),a=6;break e;case 3:case 2:case 9:case 6:as.current===null&&(e=!0);var f=zt;if(zt=0,bi=null,lc(t,l,c,f),n&&Jc){a=0;break e}break;default:f=zt,zt=0,bi=null,lc(t,l,c,f)}}hU(),a=Rn;break}catch(h){cN(t,h)}while(!0);return e&&t.shellSuspendCounter++,Ta=uu=null,Ft=r,Fe.H=i,Fe.A=s,ht===null&&(nn=null,wt=0,$g()),a}function hU(){for(;ht!==null;)dN(ht)}function fU(t,e){var n=Ft;Ft|=2;var r=hN(),i=fN();nn!==t||wt!==e?(Kp=null,Xp=Bs()+500,Pc(t,e)):Jc=rd(t,e);e:do try{if(zt!==0&&ht!==null){e=ht;var s=bi;t:switch(zt){case 1:zt=0,bi=null,lc(t,e,s,1);break;case 2:case 9:if(ST(s)){zt=0,bi=null,KT(e);break}e=function(){zt!==2&&zt!==9||nn!==t||(zt=7),ea(t)},s.then(e,e);break e;case 3:zt=7;break e;case 4:zt=5;break e;case 7:ST(s)?(zt=0,bi=null,KT(e)):(zt=0,bi=null,lc(t,e,s,7));break;case 5:var a=null;switch(ht.tag){case 26:a=ht.memoizedState;case 5:case 27:var l=ht;if(!a||ON(a)){zt=0,bi=null;var c=l.sibling;if(c!==null)ht=c;else{var f=l.return;f!==null?(ht=f,Jg(f)):ht=null}break t}}zt=0,bi=null,lc(t,e,s,5);break;case 6:zt=0,bi=null,lc(t,e,s,6);break;case 8:S1(),Rn=6;break e;default:throw Error(pe(462))}}dU();break}catch(h){cN(t,h)}while(!0);return Ta=uu=null,Fe.H=r,Fe.A=i,Ft=n,ht!==null?0:(nn=null,wt=0,$g(),Rn)}function dU(){for(;ht!==null&&!kP();)dN(ht)}function dN(t){var e=HC(t.alternate,t,ja);t.memoizedProps=t.pendingProps,e===null?Jg(t):ht=e}function KT(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=HT(n,e,e.pendingProps,e.type,void 0,wt);break;case 11:e=HT(n,e,e.pendingProps,e.type.render,e.ref,wt);break;case 5:f1(e);default:qC(n,e),e=ht=qR(e,ja),e=HC(n,e,ja)}t.memoizedProps=t.pendingProps,e===null?Jg(t):ht=e}function lc(t,e,n,r){Ta=uu=null,f1(e),_c=null,Lf=0;var i=e.return;try{if(nU(t,i,e,n,wt)){Rn=1,$p(t,es(n,t.current)),ht=null;return}}catch(s){if(i!==null)throw ht=i,s;Rn=1,$p(t,es(n,t.current)),ht=null;return}e.flags&32768?(It||r===1?t=!0:Jc||wt&536870912?t=!1:(Eo=t=!0,(r===2||r===9||r===3||r===6)&&(r=as.current,r!==null&&r.tag===13&&(r.flags|=16384))),mN(e,t)):Jg(e)}function Jg(t){var e=t;do{if(e.flags&32768){mN(e,Eo);return}t=e.return;var n=iU(e.alternate,e,ja);if(n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);Rn===0&&(Rn=5)}function mN(t,e){do{var n=sU(t.alternate,t);if(n!==null){n.flags&=32767,ht=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ht=t;return}ht=t=n}while(t!==null);Rn=6,ht=null}function QT(t,e,n,r,i,s,a,l,c){t.cancelPendingCommit=null;do ev();while(br!==0);if(Ft&6)throw Error(pe(327));if(e!==null){if(e===t.current)throw Error(pe(177));if(s=e.lanes|e.childLanes,s|=Jb,GP(t,n,s,a,l,c),t===nn&&(ht=nn=null,wt=0),kc=e,Mo=t,bc=n,S_=s,R_=i,oN=r,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,vU(Mp,function(){return _N(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(e.flags&13878)!==0,e.subtreeFlags&13878||r){r=Fe.T,Fe.T=null,i=Dt.p,Dt.p=2,a=Ft,Ft|=4;try{aU(t,e,n)}finally{Ft=a,Dt.p=i,Fe.T=r}}br=1,pN(),gN(),vN()}}function pN(){if(br===1){br=0;var t=Mo,e=kc,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=Fe.T,Fe.T=null;var r=Dt.p;Dt.p=2;var i=Ft;Ft|=4;try{eN(e,t);var s=M_,a=PR(t.containerInfo),l=s.focusedElem,c=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&kR(l.ownerDocument.documentElement,l)){if(c!==null&&Zb(l)){var f=c.start,h=c.end;if(h===void 0&&(h=f),"selectionStart"in l)l.selectionStart=f,l.selectionEnd=Math.min(h,l.value.length);else{var m=l.ownerDocument||document,p=m&&m.defaultView||window;if(p.getSelection){var y=p.getSelection(),T=l.textContent.length,N=Math.min(c.start,T),j=c.end===void 0?N:Math.min(c.end,T);!y.extend&&N>j&&(a=j,j=N,N=a);var A=yT(l,N),C=yT(l,j);if(A&&C&&(y.rangeCount!==1||y.anchorNode!==A.node||y.anchorOffset!==A.offset||y.focusNode!==C.node||y.focusOffset!==C.offset)){var M=m.createRange();M.setStart(A.node,A.offset),y.removeAllRanges(),N>j?(y.addRange(M),y.extend(C.node,C.offset)):(M.setEnd(C.node,C.offset),y.addRange(M))}}}}for(m=[],y=l;y=y.parentNode;)y.nodeType===1&&m.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<m.length;l++){var U=m[l];U.element.scrollLeft=U.left,U.element.scrollTop=U.top}}ig=!!O_,M_=O_=null}finally{Ft=i,Dt.p=r,Fe.T=n}}t.current=e,br=2}}function gN(){if(br===2){br=0;var t=Mo,e=kc,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=Fe.T,Fe.T=null;var r=Dt.p;Dt.p=2;var i=Ft;Ft|=4;try{KC(t,e.alternate,e)}finally{Ft=i,Dt.p=r,Fe.T=n}}br=3}}function vN(){if(br===4||br===3){br=0,PP();var t=Mo,e=kc,n=bc,r=oN;e.subtreeFlags&10256||e.flags&10256?br=5:(br=0,kc=Mo=null,yN(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(Oo=null),Gb(n),e=e.stateNode,Si&&typeof Si.onCommitFiberRoot=="function")try{Si.onCommitFiberRoot(nd,e,void 0,(e.current.flags&128)===128)}catch{}if(r!==null){e=Fe.T,i=Dt.p,Dt.p=2,Fe.T=null;try{for(var s=t.onRecoverableError,a=0;a<r.length;a++){var l=r[a];s(l.value,{componentStack:l.stack})}}finally{Fe.T=e,Dt.p=i}}bc&3&&ev(),ea(t),i=t.pendingLanes,n&4194090&&i&42?t===C_?xf++:(xf=0,C_=t):xf=0,md(0)}}function yN(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,ud(e)))}function ev(t){return pN(),gN(),vN(),_N()}function _N(){if(br!==5)return!1;var t=Mo,e=S_;S_=0;var n=Gb(bc),r=Fe.T,i=Dt.p;try{Dt.p=32>n?32:n,Fe.T=null,n=R_,R_=null;var s=Mo,a=bc;if(br=0,kc=Mo=null,bc=0,Ft&6)throw Error(pe(331));var l=Ft;if(Ft|=4,sN(s.current),nN(s,s.current,a,n),Ft=l,md(0,!1),Si&&typeof Si.onPostCommitFiberRoot=="function")try{Si.onPostCommitFiberRoot(nd,s)}catch{}return!0}finally{Dt.p=i,Fe.T=r,yN(t,e)}}function ZT(t,e,n){e=es(n,e),e=x_(t.stateNode,e,2),t=Do(t,e,2),t!==null&&(id(t,2),ea(t))}function Jt(t,e,n){if(t.tag===3)ZT(t,t,n);else for(;e!==null;){if(e.tag===3){ZT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Oo===null||!Oo.has(r))){t=es(n,t),n=PC(2),r=Do(e,n,2),r!==null&&(LC(n,r,e,t),id(r,2),ea(r));break}}e=e.return}}function dy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new uU;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(E1=!0,i.add(n),t=mU.bind(null,t,e,n),e.then(t,t))}function mU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,nn===t&&(wt&n)===n&&(Rn===4||Rn===3&&(wt&62914560)===wt&&300>Bs()-A1?!(Ft&2)&&Pc(t,0):T1|=n,jc===wt&&(jc=0)),ea(t)}function bN(t,e){e===0&&(e=pR()),t=Zc(t,e),t!==null&&(id(t,e),ea(t))}function pU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),bN(t,n)}function gU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(pe(314))}r!==null&&r.delete(e),bN(t,n)}function vU(t,e){return Hb(t,e)}var Qp=null,Gu=null,I_=!1,Zp=!1,my=!1,ql=0;function ea(t){t!==Gu&&t.next===null&&(Gu===null?Qp=Gu=t:Gu=Gu.next=t),Zp=!0,I_||(I_=!0,_U())}function md(t,e){if(!my&&Zp){my=!0;do for(var n=!1,r=Qp;r!==null;){if(t!==0){var i=r.pendingLanes;if(i===0)var s=0;else{var a=r.suspendedLanes,l=r.pingedLanes;s=(1<<31-Ri(42|t)+1)-1,s&=i&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,JT(r,s))}else s=wt,s=Fg(r,r===nn?s:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(s&3)||rd(r,s)||(n=!0,JT(r,s));r=r.next}while(n);my=!1}}function yU(){xN()}function xN(){Zp=I_=!1;var t=0;ql!==0&&(RU()&&(t=ql),ql=0);for(var e=Bs(),n=null,r=Qp;r!==null;){var i=r.next,s=wN(r,e);s===0?(r.next=null,n===null?Qp=i:n.next=i,i===null&&(Gu=n)):(n=r,(t!==0||s&3)&&(Zp=!0)),r=i}md(t)}function wN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-Ri(s),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=qP(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}if(e=nn,n=wt,n=Fg(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,n===0||t===e&&(zt===2||zt===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&z0(r),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||rd(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(r!==null&&z0(r),Gb(n)){case 2:case 8:n=fR;break;case 32:n=Mp;break;case 268435456:n=dR;break;default:n=Mp}return r=EN.bind(null,t),n=Hb(n,r),t.callbackPriority=e,t.callbackNode=n,e}return r!==null&&r!==null&&z0(r),t.callbackPriority=2,t.callbackNode=null,2}function EN(t,e){if(br!==0&&br!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(ev()&&t.callbackNode!==n)return null;var r=wt;return r=Fg(t,t===nn?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(uN(t,r,e),wN(t,Bs()),t.callbackNode!=null&&t.callbackNode===n?EN.bind(null,t):null)}function JT(t,e){if(ev())return null;uN(t,e,!0)}function _U(){NU(function(){Ft&6?Hb(hR,yU):xN()})}function R1(){return ql===0&&(ql=mR()),ql}function e2(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ap(""+t)}function t2(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function bU(t,e,n,r,i){if(e==="submit"&&n&&n.stateNode===i){var s=e2((i[li]||null).action),a=r.submitter;a&&(e=(e=a[li]||null)?e2(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var l=new Hg("action","action",null,r,i);t.push({event:l,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(ql!==0){var c=a?t2(i,a):new FormData(i);__(n,{pending:!0,data:c,method:i.method,action:s},null,c)}}else typeof s=="function"&&(l.preventDefault(),c=a?t2(i,a):new FormData(i),__(n,{pending:!0,data:c,method:i.method,action:s},s,c))},currentTarget:i}]})}}for(var py=0;py<o_.length;py++){var gy=o_[py],xU=gy.toLowerCase(),wU=gy[0].toUpperCase()+gy.slice(1);Rs(xU,"on"+wU)}Rs(UR,"onAnimationEnd");Rs(VR,"onAnimationIteration");Rs(zR,"onAnimationStart");Rs("dblclick","onDoubleClick");Rs("focusin","onFocus");Rs("focusout","onBlur");Rs(VL,"onTransitionRun");Rs(zL,"onTransitionStart");Rs(BL,"onTransitionCancel");Rs(BR,"onTransitionEnd");Cc("onMouseEnter",["mouseout","mouseover"]);Cc("onMouseLeave",["mouseout","mouseover"]);Cc("onPointerEnter",["pointerout","pointerover"]);Cc("onPointerLeave",["pointerout","pointerover"]);au("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));au("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));au("onBeforeInput",["compositionend","keypress","textInput","paste"]);au("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));au("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));au("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uf));function TN(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,f=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;s=l,i.currentTarget=f;try{s(i)}catch(h){Gp(h)}i.currentTarget=null,s=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,f=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;s=l,i.currentTarget=f;try{s(i)}catch(h){Gp(h)}i.currentTarget=null,s=c}}}}function ct(t,e){var n=e[e_];n===void 0&&(n=e[e_]=new Set);var r=t+"__bubble";n.has(r)||(AN(e,t,2,!1),n.add(r))}function vy(t,e,n){var r=0;e&&(r|=4),AN(n,t,r,e)}var qm="_reactListening"+Math.random().toString(36).slice(2);function C1(t){if(!t[qm]){t[qm]=!0,_R.forEach(function(n){n!=="selectionchange"&&(EU.has(n)||vy(n,!1,t),vy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qm]||(e[qm]=!0,vy("selectionchange",!1,e))}}function AN(t,e,n,r){switch(LN(e)){case 2:var i=KU;break;case 8:i=QU;break;default:i=O1}n=i.bind(null,e,n,t),i=void 0,!i_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function yy(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&a.stateNode.containerInfo===i)return;a=a.return}for(;l!==null;){if(a=Ju(l),a===null)return;if(c=a.tag,c===5||c===6||c===26||c===27){r=s=a;continue e}l=l.parentNode}}r=r.return}RR(function(){var f=s,h=Wb(n),m=[];e:{var p=FR.get(t);if(p!==void 0){var y=Hg,T=t;switch(t){case"keypress":if(lp(n)===0)break e;case"keydown":case"keyup":y=vL;break;case"focusin":T="focus",y=W0;break;case"focusout":T="blur",y=W0;break;case"beforeblur":case"afterblur":y=W0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=lT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=sL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=bL;break;case UR:case VR:case zR:y=lL;break;case BR:y=wL;break;case"scroll":case"scrollend":y=rL;break;case"wheel":y=TL;break;case"copy":case"cut":case"paste":y=cL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=cT;break;case"toggle":case"beforetoggle":y=SL}var N=(e&4)!==0,j=!N&&(t==="scroll"||t==="scrollend"),A=N?p!==null?p+"Capture":null:p;N=[];for(var C=f,M;C!==null;){var U=C;if(M=U.stateNode,U=U.tag,U!==5&&U!==26&&U!==27||M===null||A===null||(U=Of(C,A),U!=null&&N.push(Vf(C,U,M))),j)break;C=C.return}0<N.length&&(p=new y(p,T,null,n,h),m.push({event:p,listeners:N}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==r_&&(T=n.relatedTarget||n.fromElement)&&(Ju(T)||T[Kc]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(T=n.relatedTarget||n.toElement,y=f,T=T?Ju(T):null,T!==null&&(j=td(T),N=T.tag,T!==j||N!==5&&N!==27&&N!==6)&&(T=null)):(y=null,T=f),y!==T)){if(N=lT,U="onMouseLeave",A="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(N=cT,U="onPointerLeave",A="onPointerEnter",C="pointer"),j=y==null?p:ef(y),M=T==null?p:ef(T),p=new N(U,C+"leave",y,n,h),p.target=j,p.relatedTarget=M,U=null,Ju(h)===f&&(N=new N(A,C+"enter",T,n,h),N.target=M,N.relatedTarget=j,U=N),j=U,y&&T)t:{for(N=y,A=T,C=0,M=N;M;M=Lu(M))C++;for(M=0,U=A;U;U=Lu(U))M++;for(;0<C-M;)N=Lu(N),C--;for(;0<M-C;)A=Lu(A),M--;for(;C--;){if(N===A||A!==null&&N===A.alternate)break t;N=Lu(N),A=Lu(A)}N=null}else N=null;y!==null&&n2(m,p,y,N,!1),T!==null&&j!==null&&n2(m,j,T,N,!0)}}e:{if(p=f?ef(f):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var H=mT;else if(dT(p))if(MR)H=PL;else{H=jL;var D=ML}else y=p.nodeName,!y||y.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?f&&Yb(f.elementType)&&(H=mT):H=kL;if(H&&(H=H(t,f))){OR(m,H,n,h);break e}D&&D(t,p,f),t==="focusout"&&f&&p.type==="number"&&f.memoizedProps.value!=null&&n_(p,"number",p.value)}switch(D=f?ef(f):window,t){case"focusin":(dT(D)||D.contentEditable==="true")&&(nc=D,s_=f,hf=null);break;case"focusout":hf=s_=nc=null;break;case"mousedown":a_=!0;break;case"contextmenu":case"mouseup":case"dragend":a_=!1,_T(m,n,h);break;case"selectionchange":if(UL)break;case"keydown":case"keyup":_T(m,n,h)}var E;if(Qb)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else tc?IR(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(NR&&n.locale!=="ko"&&(tc||_!=="onCompositionStart"?_==="onCompositionEnd"&&tc&&(E=CR()):(wo=h,Xb="value"in wo?wo.value:wo.textContent,tc=!0)),D=Jp(f,_),0<D.length&&(_=new uT(_,t,null,n,h),m.push({event:_,listeners:D}),E?_.data=E:(E=DR(n),E!==null&&(_.data=E)))),(E=CL?NL(t,n):IL(t,n))&&(_=Jp(f,"onBeforeInput"),0<_.length&&(D=new uT("onBeforeInput","beforeinput",null,n,h),m.push({event:D,listeners:_}),D.data=E)),bU(m,t,f,n,h)}TN(m,e)})}function Vf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jp(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||s===null||(i=Of(t,n),i!=null&&r.unshift(Vf(t,i,s)),i=Of(t,e),i!=null&&r.push(Vf(t,i,s))),t.tag===3)return r;t=t.return}return[]}function Lu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function n2(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,f=l.stateNode;if(l=l.tag,c!==null&&c===r)break;l!==5&&l!==26&&l!==27||f===null||(c=f,i?(f=Of(n,s),f!=null&&a.unshift(Vf(n,f,c))):i||(f=Of(n,s),f!=null&&a.push(Vf(n,f,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var TU=/\r\n?/g,AU=/\u0000|\uFFFD/g;function r2(t){return(typeof t=="string"?t:""+t).replace(TU,`
`).replace(AU,"")}function SN(t,e){return e=r2(e),r2(t)===e}function tv(){}function $t(t,e,n,r,i,s){switch(n){case"children":typeof r=="string"?e==="body"||e==="textarea"&&r===""||Nc(t,r):(typeof r=="number"||typeof r=="bigint")&&e!=="body"&&Nc(t,""+r);break;case"className":Lm(t,"class",r);break;case"tabIndex":Lm(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Lm(t,n,r);break;case"style":SR(t,r,s);break;case"data":if(e!=="object"){Lm(t,"data",r);break}case"src":case"href":if(r===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=ap(""+r),t.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&$t(t,e,"name",i.name,i,null),$t(t,e,"formEncType",i.formEncType,i,null),$t(t,e,"formMethod",i.formMethod,i,null),$t(t,e,"formTarget",i.formTarget,i,null)):($t(t,e,"encType",i.encType,i,null),$t(t,e,"method",i.method,i,null),$t(t,e,"target",i.target,i,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=ap(""+r),t.setAttribute(n,r);break;case"onClick":r!=null&&(t.onclick=tv);break;case"onScroll":r!=null&&ct("scroll",t);break;case"onScrollEnd":r!=null&&ct("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(pe(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(pe(60));t.innerHTML=n}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}n=ap(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""+r):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":r===!0?t.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,r):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(n,r):t.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(n):t.setAttribute(n,r);break;case"popover":ct("beforetoggle",t),ct("toggle",t),sp(t,"popover",r);break;case"xlinkActuate":ga(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ga(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ga(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ga(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ga(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ga(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ga(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ga(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ga(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":sp(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=tL.get(n)||n,sp(t,n,r))}}function D_(t,e,n,r,i,s){switch(n){case"style":SR(t,r,s);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(pe(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(pe(60));t.innerHTML=n}}break;case"children":typeof r=="string"?Nc(t,r):(typeof r=="number"||typeof r=="bigint")&&Nc(t,""+r);break;case"onScroll":r!=null&&ct("scroll",t);break;case"onScrollEnd":r!=null&&ct("scrollend",t);break;case"onClick":r!=null&&(t.onclick=tv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bR.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),s=t[li]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,i),typeof r=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,r,i);break e}n in t?t[n]=r:r===!0?t.setAttribute(n,""):sp(t,n,r)}}}function wr(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",t),ct("load",t);var r=!1,i=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":r=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(pe(137,e));default:$t(t,e,s,a,n,null)}}i&&$t(t,e,"srcSet",n.srcSet,n,null),r&&$t(t,e,"src",n.src,n,null);return;case"input":ct("invalid",t);var l=s=a=i=null,c=null,f=null;for(r in n)if(n.hasOwnProperty(r)){var h=n[r];if(h!=null)switch(r){case"name":i=h;break;case"type":a=h;break;case"checked":c=h;break;case"defaultChecked":f=h;break;case"value":s=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(pe(137,e));break;default:$t(t,e,r,h,n,null)}}ER(t,s,l,c,f,a,i,!1),jp(t);return;case"select":ct("invalid",t),r=a=s=null;for(i in n)if(n.hasOwnProperty(i)&&(l=n[i],l!=null))switch(i){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":r=l;default:$t(t,e,i,l,n,null)}e=s,n=a,t.multiple=!!r,e!=null?mc(t,!!r,e,!1):n!=null&&mc(t,!!r,n,!0);return;case"textarea":ct("invalid",t),s=i=r=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":r=l;break;case"defaultValue":i=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(pe(91));break;default:$t(t,e,a,l,n,null)}AR(t,r,i,s),jp(t);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(r=n[c],r!=null))switch(c){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:$t(t,e,c,r,n,null)}return;case"dialog":ct("beforetoggle",t),ct("toggle",t),ct("cancel",t),ct("close",t);break;case"iframe":case"object":ct("load",t);break;case"video":case"audio":for(r=0;r<Uf.length;r++)ct(Uf[r],t);break;case"image":ct("error",t),ct("load",t);break;case"details":ct("toggle",t);break;case"embed":case"source":case"link":ct("error",t),ct("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(f in n)if(n.hasOwnProperty(f)&&(r=n[f],r!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(pe(137,e));default:$t(t,e,f,r,n,null)}return;default:if(Yb(e)){for(h in n)n.hasOwnProperty(h)&&(r=n[h],r!==void 0&&D_(t,e,h,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(r=n[l],r!=null&&$t(t,e,l,r,n,null))}function SU(t,e,n,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,c=null,f=null,h=null;for(y in n){var m=n[y];if(n.hasOwnProperty(y)&&m!=null)switch(y){case"checked":break;case"value":break;case"defaultValue":c=m;default:r.hasOwnProperty(y)||$t(t,e,y,null,r,m)}}for(var p in r){var y=r[p];if(m=n[p],r.hasOwnProperty(p)&&(y!=null||m!=null))switch(p){case"type":s=y;break;case"name":i=y;break;case"checked":f=y;break;case"defaultChecked":h=y;break;case"value":a=y;break;case"defaultValue":l=y;break;case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(pe(137,e));break;default:y!==m&&$t(t,e,p,y,r,m)}}t_(t,a,l,c,f,h,s,i);return;case"select":y=a=l=p=null;for(s in n)if(c=n[s],n.hasOwnProperty(s)&&c!=null)switch(s){case"value":break;case"multiple":y=c;default:r.hasOwnProperty(s)||$t(t,e,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(s!=null||c!=null))switch(i){case"value":p=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==c&&$t(t,e,i,s,r,c)}e=l,n=a,r=y,p!=null?mc(t,!!n,p,!1):!!r!=!!n&&(e!=null?mc(t,!!n,e,!0):mc(t,!!n,n?[]:"",!1));return;case"textarea":y=p=null;for(l in n)if(i=n[l],n.hasOwnProperty(l)&&i!=null&&!r.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:$t(t,e,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(i!=null||s!=null))switch(a){case"value":p=i;break;case"defaultValue":y=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(pe(91));break;default:i!==s&&$t(t,e,a,i,r,s)}TR(t,p,y);return;case"option":for(var T in n)if(p=n[T],n.hasOwnProperty(T)&&p!=null&&!r.hasOwnProperty(T))switch(T){case"selected":t.selected=!1;break;default:$t(t,e,T,null,r,p)}for(c in r)if(p=r[c],y=n[c],r.hasOwnProperty(c)&&p!==y&&(p!=null||y!=null))switch(c){case"selected":t.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:$t(t,e,c,p,r,y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var N in n)p=n[N],n.hasOwnProperty(N)&&p!=null&&!r.hasOwnProperty(N)&&$t(t,e,N,null,r,p);for(f in r)if(p=r[f],y=n[f],r.hasOwnProperty(f)&&p!==y&&(p!=null||y!=null))switch(f){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(pe(137,e));break;default:$t(t,e,f,p,r,y)}return;default:if(Yb(e)){for(var j in n)p=n[j],n.hasOwnProperty(j)&&p!==void 0&&!r.hasOwnProperty(j)&&D_(t,e,j,void 0,r,p);for(h in r)p=r[h],y=n[h],!r.hasOwnProperty(h)||p===y||p===void 0&&y===void 0||D_(t,e,h,p,r,y);return}}for(var A in n)p=n[A],n.hasOwnProperty(A)&&p!=null&&!r.hasOwnProperty(A)&&$t(t,e,A,null,r,p);for(m in r)p=r[m],y=n[m],!r.hasOwnProperty(m)||p===y||p==null&&y==null||$t(t,e,m,p,r,y)}var O_=null,M_=null;function eg(t){return t.nodeType===9?t:t.ownerDocument}function i2(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function RN(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function j_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _y=null;function RU(){var t=window.event;return t&&t.type==="popstate"?t===_y?!1:(_y=t,!0):(_y=null,!1)}var CN=typeof setTimeout=="function"?setTimeout:void 0,CU=typeof clearTimeout=="function"?clearTimeout:void 0,s2=typeof Promise=="function"?Promise:void 0,NU=typeof queueMicrotask=="function"?queueMicrotask:typeof s2<"u"?function(t){return s2.resolve(null).then(t).catch(IU)}:CN;function IU(t){setTimeout(function(){throw t})}function tl(t){return t==="head"}function a2(t,e){var n=e,r=0,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<r&&8>r){n=r;var a=t.ownerDocument;if(n&1&&wf(a.documentElement),n&2&&wf(a.body),n&4)for(n=a.head,wf(n),a=n.firstChild;a;){var l=a.nextSibling,c=a.nodeName;a[sd]||c==="SCRIPT"||c==="STYLE"||c==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(i===0){t.removeChild(s),qf(e);return}i--}else n==="$"||n==="$?"||n==="$!"?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);qf(e)}function k_(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":k_(n),$b(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function DU(t,e,n,r){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[sd])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=Ts(t.nextSibling),t===null)break}return null}function OU(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Ts(t.nextSibling),t===null))return null;return t}function P_(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function MU(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var r=function(){e(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function Ts(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var L_=null;function o2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function NN(t,e,n){switch(e=eg(n),t){case"html":if(t=e.documentElement,!t)throw Error(pe(452));return t;case"head":if(t=e.head,!t)throw Error(pe(453));return t;case"body":if(t=e.body,!t)throw Error(pe(454));return t;default:throw Error(pe(451))}}function wf(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);$b(t)}var os=new Map,l2=new Set;function tg(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ba=Dt.d;Dt.d={f:jU,r:kU,D:PU,C:LU,L:UU,m:VU,X:BU,S:zU,M:FU};function jU(){var t=Ba.f(),e=Zg();return t||e}function kU(t){var e=Qc(t);e!==null&&e.tag===5&&e.type==="form"?wC(e):Ba.r(t)}var eh=typeof document>"u"?null:document;function IN(t,e,n){var r=eh;if(r&&typeof e=="string"&&e){var i=Ji(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),l2.has(i)||(l2.add(i),t={rel:t,crossOrigin:n,href:e},r.querySelector(i)===null&&(e=r.createElement("link"),wr(e,"link",t),hr(e),r.head.appendChild(e)))}}function PU(t){Ba.D(t),IN("dns-prefetch",t,null)}function LU(t,e){Ba.C(t,e),IN("preconnect",t,e)}function UU(t,e,n){Ba.L(t,e,n);var r=eh;if(r&&t&&e){var i='link[rel="preload"][as="'+Ji(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+Ji(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+Ji(n.imageSizes)+'"]')):i+='[href="'+Ji(t)+'"]';var s=i;switch(e){case"style":s=Lc(t);break;case"script":s=th(t)}os.has(s)||(t=ln({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),os.set(s,t),r.querySelector(i)!==null||e==="style"&&r.querySelector(pd(s))||e==="script"&&r.querySelector(gd(s))||(e=r.createElement("link"),wr(e,"link",t),hr(e),r.head.appendChild(e)))}}function VU(t,e){Ba.m(t,e);var n=eh;if(n&&t){var r=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+Ji(r)+'"][href="'+Ji(t)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=th(t)}if(!os.has(s)&&(t=ln({rel:"modulepreload",href:t},e),os.set(s,t),n.querySelector(i)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(gd(s)))return}r=n.createElement("link"),wr(r,"link",t),hr(r),n.head.appendChild(r)}}}function zU(t,e,n){Ba.S(t,e,n);var r=eh;if(r&&t){var i=dc(r).hoistableStyles,s=Lc(t);e=e||"default";var a=i.get(s);if(!a){var l={loading:0,preload:null};if(a=r.querySelector(pd(s)))l.loading=5;else{t=ln({rel:"stylesheet",href:t,"data-precedence":e},n),(n=os.get(s))&&N1(t,n);var c=a=r.createElement("link");hr(c),wr(c,"link",t),c._p=new Promise(function(f,h){c.onload=f,c.onerror=h}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,pp(a,e,r)}a={type:"stylesheet",instance:a,count:1,state:l},i.set(s,a)}}}function BU(t,e){Ba.X(t,e);var n=eh;if(n&&t){var r=dc(n).hoistableScripts,i=th(t),s=r.get(i);s||(s=n.querySelector(gd(i)),s||(t=ln({src:t,async:!0},e),(e=os.get(i))&&I1(t,e),s=n.createElement("script"),hr(s),wr(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}function FU(t,e){Ba.M(t,e);var n=eh;if(n&&t){var r=dc(n).hoistableScripts,i=th(t),s=r.get(i);s||(s=n.querySelector(gd(i)),s||(t=ln({src:t,async:!0,type:"module"},e),(e=os.get(i))&&I1(t,e),s=n.createElement("script"),hr(s),wr(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}function u2(t,e,n,r){var i=(i=No.current)?tg(i):null;if(!i)throw Error(pe(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Lc(n.href),n=dc(i).hoistableStyles,r=n.get(e),r||(r={type:"style",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Lc(n.href);var s=dc(i).hoistableStyles,a=s.get(t);if(a||(i=i.ownerDocument||i,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=i.querySelector(pd(t)))&&!s._p&&(a.instance=s,a.state.loading=5),os.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},os.set(t,n),s||HU(i,t,n,a.state))),e&&r===null)throw Error(pe(528,""));return a}if(e&&r!==null)throw Error(pe(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=th(n),n=dc(i).hoistableScripts,r=n.get(e),r||(r={type:"script",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(pe(444,t))}}function Lc(t){return'href="'+Ji(t)+'"'}function pd(t){return'link[rel="stylesheet"]['+t+"]"}function DN(t){return ln({},t,{"data-precedence":t.precedence,precedence:null})}function HU(t,e,n,r){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?r.loading=1:(e=t.createElement("link"),r.preload=e,e.addEventListener("load",function(){return r.loading|=1}),e.addEventListener("error",function(){return r.loading|=2}),wr(e,"link",n),hr(e),t.head.appendChild(e))}function th(t){return'[src="'+Ji(t)+'"]'}function gd(t){return"script[async]"+t}function c2(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var r=t.querySelector('style[data-href~="'+Ji(n.href)+'"]');if(r)return e.instance=r,hr(r),r;var i=ln({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),hr(r),wr(r,"style",i),pp(r,n.precedence,t),e.instance=r;case"stylesheet":i=Lc(n.href);var s=t.querySelector(pd(i));if(s)return e.state.loading|=4,e.instance=s,hr(s),s;r=DN(n),(i=os.get(i))&&N1(r,i),s=(t.ownerDocument||t).createElement("link"),hr(s);var a=s;return a._p=new Promise(function(l,c){a.onload=l,a.onerror=c}),wr(s,"link",r),e.state.loading|=4,pp(s,n.precedence,t),e.instance=s;case"script":return s=th(n.src),(i=t.querySelector(gd(s)))?(e.instance=i,hr(i),i):(r=n,(i=os.get(s))&&(r=ln({},n),I1(r,i)),t=t.ownerDocument||t,i=t.createElement("script"),hr(i),wr(i,"link",r),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(pe(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(r=e.instance,e.state.loading|=4,pp(r,n.precedence,t));return e.instance}function pp(t,e,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var l=r[a];if(l.dataset.precedence===e)s=l;else if(s!==i)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function N1(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function I1(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var gp=null;function h2(t,e,n){if(gp===null){var r=new Map,i=gp=new Map;i.set(n,r)}else i=gp,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(t))return r;for(r.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var s=n[i];if(!(s[sd]||s[Or]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var l=r.get(a);l?l.push(s):r.set(a,[s])}}return r}function f2(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function qU(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function ON(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var zf=null;function GU(){}function $U(t,e,n){if(zf===null)throw Error(pe(475));var r=zf;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var i=Lc(n.href),s=t.querySelector(pd(i));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(r.count++,r=ng.bind(r),t.then(r,r)),e.state.loading|=4,e.instance=s,hr(s);return}s=t.ownerDocument||t,n=DN(n),(i=os.get(i))&&N1(n,i),s=s.createElement("link"),hr(s);var a=s;a._p=new Promise(function(l,c){a.onload=l,a.onerror=c}),wr(s,"link",n),e.instance=s}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(r.count++,e=ng.bind(r),t.addEventListener("load",e),t.addEventListener("error",e))}}function YU(){if(zf===null)throw Error(pe(475));var t=zf;return t.stylesheets&&t.count===0&&U_(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&U_(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function ng(){if(this.count--,this.count===0){if(this.stylesheets)U_(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var rg=null;function U_(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,rg=new Map,e.forEach(WU,t),rg=null,ng.call(t))}function WU(t,e){if(!(e.state.loading&4)){var n=rg.get(t);if(n)var r=n.get(null);else{n=new Map,rg.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}i=e.instance,a=i.getAttribute("data-precedence"),s=n.get(a)||r,s===r&&n.set(null,i),n.set(a,i),this.count++,r=ng.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var Bf={$$typeof:xa,Provider:null,Consumer:null,_currentValue:Ul,_currentValue2:Ul,_threadCount:0};function XU(t,e,n,r,i,s,a,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=B0(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=B0(0),this.hiddenUpdates=B0(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function MN(t,e,n,r,i,s,a,l,c,f,h,m){return t=new XU(t,e,n,a,l,c,f,m),e=1,s===!0&&(e|=24),s=wi(3,null,null,e),t.current=s,s.stateNode=t,e=i1(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:e},a1(s),t}function jN(t){return t?(t=sc,t):sc}function kN(t,e,n,r,i,s){i=jN(i),r.context===null?r.context=i:r.pendingContext=i,r=Io(e),r.payload={element:n},s=s===void 0?null:s,s!==null&&(r.callback=s),n=Do(t,r,e),n!==null&&(Ni(n,t,e),mf(n,t,e))}function d2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function D1(t,e){d2(t,e),(t=t.alternate)&&d2(t,e)}function PN(t){if(t.tag===13){var e=Zc(t,67108864);e!==null&&Ni(e,t,67108864),D1(t,67108864)}}var ig=!0;function KU(t,e,n,r){var i=Fe.T;Fe.T=null;var s=Dt.p;try{Dt.p=2,O1(t,e,n,r)}finally{Dt.p=s,Fe.T=i}}function QU(t,e,n,r){var i=Fe.T;Fe.T=null;var s=Dt.p;try{Dt.p=8,O1(t,e,n,r)}finally{Dt.p=s,Fe.T=i}}function O1(t,e,n,r){if(ig){var i=V_(r);if(i===null)yy(t,e,r,sg,n),m2(t,r);else if(JU(i,t,e,n,r))r.stopPropagation();else if(m2(t,r),e&4&&-1<ZU.indexOf(t)){for(;i!==null;){var s=Qc(i);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=Rl(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var c=1<<31-Ri(a);l.entanglements[1]|=c,a&=~c}ea(s),!(Ft&6)&&(Xp=Bs()+500,md(0))}}break;case 13:l=Zc(s,2),l!==null&&Ni(l,s,2),Zg(),D1(s,2)}if(s=V_(r),s===null&&yy(t,e,r,sg,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else yy(t,e,r,null,n)}}function V_(t){return t=Wb(t),M1(t)}var sg=null;function M1(t){if(sg=null,t=Ju(t),t!==null){var e=td(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=oR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return sg=t,null}function LN(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(LP()){case hR:return 2;case fR:return 8;case Mp:case UP:return 32;case dR:return 268435456;default:return 32}default:return 32}}var z_=!1,jo=null,ko=null,Po=null,Ff=new Map,Hf=new Map,go=[],ZU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function m2(t,e){switch(t){case"focusin":case"focusout":jo=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":Po=null;break;case"pointerover":case"pointerout":Ff.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hf.delete(e.pointerId)}}function Fh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Qc(e),e!==null&&PN(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function JU(t,e,n,r,i){switch(e){case"focusin":return jo=Fh(jo,t,e,n,r,i),!0;case"dragenter":return ko=Fh(ko,t,e,n,r,i),!0;case"mouseover":return Po=Fh(Po,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ff.set(s,Fh(Ff.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Hf.set(s,Fh(Hf.get(s)||null,t,e,n,r,i)),!0}return!1}function UN(t){var e=Ju(t.target);if(e!==null){var n=td(e);if(n!==null){if(e=n.tag,e===13){if(e=oR(n),e!==null){t.blockedOn=e,$P(t.priority,function(){if(n.tag===13){var r=Ci();r=qb(r);var i=Zc(n,r);i!==null&&Ni(i,n,r),D1(n,r)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=V_(t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);r_=r,n.target.dispatchEvent(r),r_=null}else return e=Qc(n),e!==null&&PN(e),t.blockedOn=n,!1;e.shift()}return!0}function p2(t,e,n){vp(t)&&n.delete(e)}function e9(){z_=!1,jo!==null&&vp(jo)&&(jo=null),ko!==null&&vp(ko)&&(ko=null),Po!==null&&vp(Po)&&(Po=null),Ff.forEach(p2),Hf.forEach(p2)}function Gm(t,e){t.blockedOn===e&&(t.blockedOn=null,z_||(z_=!0,rr.unstable_scheduleCallback(rr.unstable_NormalPriority,e9)))}var $m=null;function g2(t){$m!==t&&($m=t,rr.unstable_scheduleCallback(rr.unstable_NormalPriority,function(){$m===t&&($m=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],i=t[e+2];if(typeof r!="function"){if(M1(r||n)===null)continue;break}var s=Qc(n);s!==null&&(t.splice(e,3),e-=3,__(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function qf(t){function e(c){return Gm(c,t)}jo!==null&&Gm(jo,t),ko!==null&&Gm(ko,t),Po!==null&&Gm(Po,t),Ff.forEach(e),Hf.forEach(e);for(var n=0;n<go.length;n++){var r=go[n];r.blockedOn===t&&(r.blockedOn=null)}for(;0<go.length&&(n=go[0],n.blockedOn===null);)UN(n),n.blockedOn===null&&go.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[li]||null;if(typeof s=="function")a||g2(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[li]||null)l=a.formAction;else if(M1(i)!==null)continue}else l=a.action;typeof l=="function"?n[r+1]=l:(n.splice(r,3),r-=3),g2(n)}}}function j1(t){this._internalRoot=t}nv.prototype.render=j1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(pe(409));var n=e.current,r=Ci();kN(n,r,t,e,null,null)};nv.prototype.unmount=j1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;kN(t.current,2,null,t,null,null),Zg(),e[Kc]=null}};function nv(t){this._internalRoot=t}nv.prototype.unstable_scheduleHydration=function(t){if(t){var e=yR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<go.length&&e!==0&&e<go[n].priority;n++);go.splice(n,0,t),n===0&&UN(t)}};var v2=sR.version;if(v2!=="19.1.0")throw Error(pe(527,v2,"19.1.0"));Dt.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(pe(188)):(t=Object.keys(t).join(","),Error(pe(268,t)));return t=IP(e),t=t!==null?lR(t):null,t=t===null?null:t.stateNode,t};var t9={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Fe,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ym=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ym.isDisabled&&Ym.supportsFiber)try{nd=Ym.inject(t9),Si=Ym}catch{}}zg.createRoot=function(t,e){if(!aR(t))throw Error(pe(299));var n=!1,r="",i=MC,s=jC,a=kC,l=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(l=e.unstable_transitionCallbacks)),e=MN(t,1,!1,null,null,n,r,i,s,a,l,null),t[Kc]=e.current,C1(t),new j1(e)};zg.hydrateRoot=function(t,e,n){if(!aR(t))throw Error(pe(299));var r=!1,i="",s=MC,a=jC,l=kC,c=null,f=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(c=n.unstable_transitionCallbacks),n.formState!==void 0&&(f=n.formState)),e=MN(t,1,!0,e,n??null,r,i,s,a,l,c,f),e.context=jN(null),n=e.current,r=Ci(),r=qb(r),i=Io(r),i.callback=null,Do(n,i,r),n=r,e.current.lanes=n,id(e,n),ea(e),t[Kc]=e.current,C1(t),new nv(e)};zg.version="19.1.0";function VN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VN)}catch(t){console.error(t)}}VN(),JS.exports=zg;var n9=JS.exports;const r9=jb(n9);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mn(){return mn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mn.apply(this,arguments)}var Fn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fn||(Fn={}));const y2="popstate";function i9(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:l}=r.location;return Gf("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:vd(i)}return a9(e,n,null,t)}function _t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Uc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function s9(){return Math.random().toString(36).substr(2,8)}function _2(t,e){return{usr:t.state,key:t.key,idx:e}}function Gf(t,e,n,r){return n===void 0&&(n=null),mn({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?nl(e):e,{state:n,key:e&&e.key||r||s9()})}function vd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function nl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function a9(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l=Fn.Pop,c=null,f=h();f==null&&(f=0,a.replaceState(mn({},a.state,{idx:f}),""));function h(){return(a.state||{idx:null}).idx}function m(){l=Fn.Pop;let j=h(),A=j==null?null:j-f;f=j,c&&c({action:l,location:N.location,delta:A})}function p(j,A){l=Fn.Push;let C=Gf(N.location,j,A);f=h()+1;let M=_2(C,f),U=N.createHref(C);try{a.pushState(M,"",U)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;i.location.assign(U)}s&&c&&c({action:l,location:N.location,delta:1})}function y(j,A){l=Fn.Replace;let C=Gf(N.location,j,A);f=h();let M=_2(C,f),U=N.createHref(C);a.replaceState(M,"",U),s&&c&&c({action:l,location:N.location,delta:0})}function T(j){let A=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof j=="string"?j:vd(j);return C=C.replace(/ $/,"%20"),_t(A,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,A)}let N={get action(){return l},get location(){return t(i,a)},listen(j){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(y2,m),c=j,()=>{i.removeEventListener(y2,m),c=null}},createHref(j){return e(i,j)},createURL:T,encodeLocation(j){let A=T(j);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:p,replace:y,go(j){return a.go(j)}};return N}var Bt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Bt||(Bt={}));const o9=new Set(["lazy","caseSensitive","path","id","index","children"]);function l9(t){return t.index===!0}function ag(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let a=[...n,String(s)],l=typeof i.id=="string"?i.id:a.join("-");if(_t(i.index!==!0||!i.children,"Cannot specify children on an index route"),_t(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),l9(i)){let c=mn({},i,e(i),{id:l});return r[l]=c,c}else{let c=mn({},i,e(i),{id:l,children:void 0});return r[l]=c,i.children&&(c.children=ag(i.children,e,a,r)),c}})}function Dl(t,e,n){return n===void 0&&(n="/"),yp(t,e,n,!1)}function yp(t,e,n,r){let i=typeof e=="string"?nl(e):e,s=yd(i.pathname||"/",n);if(s==null)return null;let a=zN(t);c9(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let f=x9(s);l=_9(a[c],f,r)}return l}function u9(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function zN(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(_t(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=Lo([r,c.relativePath]),h=n.concat(c);s.children&&s.children.length>0&&(_t(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),zN(s.children,e,h,f)),!(s.path==null&&!s.index)&&e.push({path:f,score:v9(f,s.index),routesMeta:h})};return t.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,a);else for(let c of BN(s.path))i(s,a,c)}),e}function BN(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=BN(r.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function c9(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:y9(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const h9=/^:[\w-]+$/,f9=3,d9=2,m9=1,p9=10,g9=-2,b2=t=>t==="*";function v9(t,e){let n=t.split("/"),r=n.length;return n.some(b2)&&(r+=g9),e&&(r+=d9),n.filter(i=>!b2(i)).reduce((i,s)=>i+(h9.test(s)?f9:s===""?m9:p9),r)}function y9(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function _9(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],f=l===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",m=x2({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),p=c.route;if(!m&&f&&n&&!r[r.length-1].route.index&&(m=x2({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:Lo([s,m.pathname]),pathnameBase:T9(Lo([s,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(s=Lo([s,m.pathnameBase]))}return a}function x2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=b9(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,h,m)=>{let{paramName:p,isOptional:y}=h;if(p==="*"){let N=l[m]||"";a=s.slice(0,s.length-N.length).replace(/(.)\/+$/,"$1")}const T=l[m];return y&&!T?f[p]=void 0:f[p]=(T||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:t}}function b9(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Uc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function x9(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Uc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function yd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function w9(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?nl(t):t;return{pathname:n?n.startsWith("/")?n:E9(n,e):e,search:A9(r),hash:S9(i)}}function E9(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function by(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function FN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function HN(t,e){let n=FN(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function qN(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=nl(t):(i=mn({},t),_t(!i.pathname||!i.pathname.includes("?"),by("?","pathname","search",i)),_t(!i.pathname||!i.pathname.includes("#"),by("#","pathname","hash",i)),_t(!i.search||!i.search.includes("#"),by("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=n;else{let m=e.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),m-=1;i.pathname=p.join("/")}l=m>=0?e[m]:"/"}let c=w9(i,l),f=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}const Lo=t=>t.join("/").replace(/\/\/+/g,"/"),T9=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),A9=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,S9=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class og{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Vc(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const GN=["post","put","patch","delete"],R9=new Set(GN),C9=["get",...GN],N9=new Set(C9),I9=new Set([301,302,303,307,308]),D9=new Set([307,308]),xy={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},O9={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Hh={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},k1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M9=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),$N="remix-router-transitions";function j9(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;_t(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let $=t.detectErrorBoundary;i=te=>({hasErrorBoundary:$(te)})}else i=M9;let s={},a=ag(t.routes,i,void 0,s),l,c=t.basename||"/",f=t.dataStrategy||U9,h=t.patchRoutesOnNavigation,m=mn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),p=null,y=new Set,T=null,N=null,j=null,A=t.hydrationData!=null,C=Dl(a,t.history.location,c),M=!1,U=null;if(C==null&&!h){let $=Jr(404,{pathname:t.history.location.pathname}),{matches:te,route:se}=O2(a);C=te,U={[se.id]:$}}C&&!t.hydrationData&&sr(C,a,t.history.location.pathname).active&&(C=null);let H;if(C)if(C.some($=>$.route.lazy))H=!1;else if(!C.some($=>$.route.loader))H=!0;else if(m.v7_partialHydration){let $=t.hydrationData?t.hydrationData.loaderData:null,te=t.hydrationData?t.hydrationData.errors:null;if(te){let se=C.findIndex(ge=>te[ge.route.id]!==void 0);H=C.slice(0,se+1).every(ge=>!F_(ge.route,$,te))}else H=C.every(se=>!F_(se.route,$,te))}else H=t.hydrationData!=null;else if(H=!1,C=[],m.v7_partialHydration){let $=sr(null,a,t.history.location.pathname);$.active&&$.matches&&(M=!0,C=$.matches)}let D,E={historyAction:t.history.action,location:t.history.location,matches:C,initialized:H,navigation:xy,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||U,fetchers:new Map,blockers:new Map},_=Fn.Pop,w=!1,R,k=!1,P=new Map,O=null,G=!1,Z=!1,z=[],V=new Set,J=new Map,ee=0,ie=-1,_e=new Map,me=new Set,ye=new Map,W=new Map,X=new Set,ce=new Map,Oe=new Map,je;function $e(){if(p=t.history.listen($=>{let{action:te,location:se,delta:ge}=$;if(je){je(),je=void 0;return}Uc(Oe.size===0||ge!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let xe=ci({currentLocation:E.location,nextLocation:se,historyAction:te});if(xe&&ge!=null){let Ne=new Promise(Le=>{je=Le});t.history.go(ge*-1),ji(xe,{state:"blocked",location:se,proceed(){ji(xe,{state:"proceeding",proceed:void 0,reset:void 0,location:se}),Ne.then(()=>t.history.go(ge))},reset(){let Le=new Map(E.blockers);Le.set(xe,Hh),Ye({blockers:Le})}});return}return Ut(te,se)}),n){Z9(e,P);let $=()=>J9(e,P);e.addEventListener("pagehide",$),O=()=>e.removeEventListener("pagehide",$)}return E.initialized||Ut(Fn.Pop,E.location,{initialHydration:!0}),D}function Pe(){p&&p(),O&&O(),y.clear(),R&&R.abort(),E.fetchers.forEach(($,te)=>wn(te)),E.blockers.forEach(($,te)=>Mi(te))}function gt($){return y.add($),()=>y.delete($)}function Ye($,te){te===void 0&&(te={}),E=mn({},E,$);let se=[],ge=[];m.v7_fetcherPersist&&E.fetchers.forEach((xe,Ne)=>{xe.state==="idle"&&(X.has(Ne)?ge.push(Ne):se.push(Ne))}),X.forEach(xe=>{!E.fetchers.has(xe)&&!J.has(xe)&&ge.push(xe)}),[...y].forEach(xe=>xe(E,{deletedFetchers:ge,viewTransitionOpts:te.viewTransitionOpts,flushSync:te.flushSync===!0})),m.v7_fetcherPersist?(se.forEach(xe=>E.fetchers.delete(xe)),ge.forEach(xe=>wn(xe))):ge.forEach(xe=>X.delete(xe))}function In($,te,se){var ge,xe;let{flushSync:Ne}=se===void 0?{}:se,Le=E.actionData!=null&&E.navigation.formMethod!=null&&xs(E.navigation.formMethod)&&E.navigation.state==="loading"&&((ge=$.state)==null?void 0:ge._isRedirect)!==!0,Ce;te.actionData?Object.keys(te.actionData).length>0?Ce=te.actionData:Ce=null:Le?Ce=E.actionData:Ce=null;let Se=te.loaderData?I2(E.loaderData,te.loaderData,te.matches||[],te.errors):E.loaderData,Te=E.blockers;Te.size>0&&(Te=new Map(Te),Te.forEach((qe,En)=>Te.set(En,Hh)));let Ie=w===!0||E.navigation.formMethod!=null&&xs(E.navigation.formMethod)&&((xe=$.state)==null?void 0:xe._isRedirect)!==!0;l&&(a=l,l=void 0),G||_===Fn.Pop||(_===Fn.Push?t.history.push($,$.state):_===Fn.Replace&&t.history.replace($,$.state));let ze;if(_===Fn.Pop){let qe=P.get(E.location.pathname);qe&&qe.has($.pathname)?ze={currentLocation:E.location,nextLocation:$}:P.has($.pathname)&&(ze={currentLocation:$,nextLocation:E.location})}else if(k){let qe=P.get(E.location.pathname);qe?qe.add($.pathname):(qe=new Set([$.pathname]),P.set(E.location.pathname,qe)),ze={currentLocation:E.location,nextLocation:$}}Ye(mn({},te,{actionData:Ce,loaderData:Se,historyAction:_,location:$,initialized:!0,navigation:xy,revalidation:"idle",restoreScrollPosition:Pi($,te.matches||E.matches),preventScrollReset:Ie,blockers:Te}),{viewTransitionOpts:ze,flushSync:Ne===!0}),_=Fn.Pop,w=!1,k=!1,G=!1,Z=!1,z=[]}async function Lt($,te){if(typeof $=="number"){t.history.go($);return}let se=B_(E.location,E.matches,c,m.v7_prependBasename,$,m.v7_relativeSplatPath,te==null?void 0:te.fromRouteId,te==null?void 0:te.relative),{path:ge,submission:xe,error:Ne}=w2(m.v7_normalizeFormMethod,!1,se,te),Le=E.location,Ce=Gf(E.location,ge,te&&te.state);Ce=mn({},Ce,t.history.encodeLocation(Ce));let Se=te&&te.replace!=null?te.replace:void 0,Te=Fn.Push;Se===!0?Te=Fn.Replace:Se===!1||xe!=null&&xs(xe.formMethod)&&xe.formAction===E.location.pathname+E.location.search&&(Te=Fn.Replace);let Ie=te&&"preventScrollReset"in te?te.preventScrollReset===!0:void 0,ze=(te&&te.flushSync)===!0,qe=ci({currentLocation:Le,nextLocation:Ce,historyAction:Te});if(qe){ji(qe,{state:"blocked",location:Ce,proceed(){ji(qe,{state:"proceeding",proceed:void 0,reset:void 0,location:Ce}),Lt($,te)},reset(){let En=new Map(E.blockers);En.set(qe,Hh),Ye({blockers:En})}});return}return await Ut(Te,Ce,{submission:xe,pendingError:Ne,preventScrollReset:Ie,replace:te&&te.replace,enableViewTransition:te&&te.viewTransition,flushSync:ze})}function bt(){if(Mt(),Ye({revalidation:"loading"}),E.navigation.state!=="submitting"){if(E.navigation.state==="idle"){Ut(E.historyAction,E.location,{startUninterruptedRevalidation:!0});return}Ut(_||E.historyAction,E.navigation.location,{overrideNavigation:E.navigation,enableViewTransition:k===!0})}}async function Ut($,te,se){R&&R.abort(),R=null,_=$,G=(se&&se.startUninterruptedRevalidation)===!0,ki(E.location,E.matches),w=(se&&se.preventScrollReset)===!0,k=(se&&se.enableViewTransition)===!0;let ge=l||a,xe=se&&se.overrideNavigation,Ne=se!=null&&se.initialHydration&&E.matches&&E.matches.length>0&&!M?E.matches:Dl(ge,te,c),Le=(se&&se.flushSync)===!0;if(Ne&&E.initialized&&!Z&&q9(E.location,te)&&!(se&&se.submission&&xs(se.submission.formMethod))){In(te,{matches:Ne},{flushSync:Le});return}let Ce=sr(Ne,ge,te.pathname);if(Ce.active&&Ce.matches&&(Ne=Ce.matches),!Ne){let{error:St,notFoundMatches:ot,route:qt}=Gr(te.pathname);In(te,{matches:ot,loaderData:{},errors:{[qt.id]:St}},{flushSync:Le});return}R=new AbortController;let Se=Uu(t.history,te,R.signal,se&&se.submission),Te;if(se&&se.pendingError)Te=[Ol(Ne).route.id,{type:Bt.error,error:se.pendingError}];else if(se&&se.submission&&xs(se.submission.formMethod)){let St=await it(Se,te,se.submission,Ne,Ce.active,{replace:se.replace,flushSync:Le});if(St.shortCircuited)return;if(St.pendingActionResult){let[ot,qt]=St.pendingActionResult;if(xi(qt)&&Vc(qt.error)&&qt.error.status===404){R=null,In(te,{matches:St.matches,loaderData:{},errors:{[ot]:qt.error}});return}}Ne=St.matches||Ne,Te=St.pendingActionResult,xe=wy(te,se.submission),Le=!1,Ce.active=!1,Se=Uu(t.history,Se.url,Se.signal)}let{shortCircuited:Ie,matches:ze,loaderData:qe,errors:En}=await Et(Se,te,Ne,Ce.active,xe,se&&se.submission,se&&se.fetcherSubmission,se&&se.replace,se&&se.initialHydration===!0,Le,Te);Ie||(R=null,In(te,mn({matches:ze||Ne},D2(Te),{loaderData:qe,errors:En})))}async function it($,te,se,ge,xe,Ne){Ne===void 0&&(Ne={}),Mt();let Le=K9(te,se);if(Ye({navigation:Le},{flushSync:Ne.flushSync===!0}),xe){let Te=await Un(ge,te.pathname,$.signal);if(Te.type==="aborted")return{shortCircuited:!0};if(Te.type==="error"){let Ie=Ol(Te.partialMatches).route.id;return{matches:Te.partialMatches,pendingActionResult:[Ie,{type:Bt.error,error:Te.error}]}}else if(Te.matches)ge=Te.matches;else{let{notFoundMatches:Ie,error:ze,route:qe}=Gr(te.pathname);return{matches:Ie,pendingActionResult:[qe.id,{type:Bt.error,error:ze}]}}}let Ce,Se=nf(ge,te);if(!Se.route.action&&!Se.route.lazy)Ce={type:Bt.error,error:Jr(405,{method:$.method,pathname:te.pathname,routeId:Se.route.id})};else if(Ce=(await Ht("action",E,$,[Se],ge,null))[Se.route.id],$.signal.aborted)return{shortCircuited:!0};if(jl(Ce)){let Te;return Ne&&Ne.replace!=null?Te=Ne.replace:Te=R2(Ce.response.headers.get("Location"),new URL($.url),c)===E.location.pathname+E.location.search,await et($,Ce,!0,{submission:se,replace:Te}),{shortCircuited:!0}}if(Ao(Ce))throw Jr(400,{type:"defer-action"});if(xi(Ce)){let Te=Ol(ge,Se.route.id);return(Ne&&Ne.replace)!==!0&&(_=Fn.Push),{matches:ge,pendingActionResult:[Te.route.id,Ce]}}return{matches:ge,pendingActionResult:[Se.route.id,Ce]}}async function Et($,te,se,ge,xe,Ne,Le,Ce,Se,Te,Ie){let ze=xe||wy(te,Ne),qe=Ne||Le||j2(ze),En=!G&&(!m.v7_partialHydration||!Se);if(ge){if(En){let Kt=rn(Ie);Ye(mn({navigation:ze},Kt!==void 0?{actionData:Kt}:{}),{flushSync:Te})}let lt=await Un(se,te.pathname,$.signal);if(lt.type==="aborted")return{shortCircuited:!0};if(lt.type==="error"){let Kt=Ol(lt.partialMatches).route.id;return{matches:lt.partialMatches,loaderData:{},errors:{[Kt]:lt.error}}}else if(lt.matches)se=lt.matches;else{let{error:Kt,notFoundMatches:hs,route:Ns}=Gr(te.pathname);return{matches:hs,loaderData:{},errors:{[Ns.id]:Kt}}}}let St=l||a,[ot,qt]=T2(t.history,E,se,qe,te,m.v7_partialHydration&&Se===!0,m.v7_skipActionErrorRevalidation,Z,z,V,X,ye,me,St,c,Ie);if(Wn(lt=>!(se&&se.some(Kt=>Kt.route.id===lt))||ot&&ot.some(Kt=>Kt.route.id===lt)),ie=++ee,ot.length===0&&qt.length===0){let lt=ir();return In(te,mn({matches:se,loaderData:{},errors:Ie&&xi(Ie[1])?{[Ie[0]]:Ie[1].error}:null},D2(Ie),lt?{fetchers:new Map(E.fetchers)}:{}),{flushSync:Te}),{shortCircuited:!0}}if(En){let lt={};if(!ge){lt.navigation=ze;let Kt=rn(Ie);Kt!==void 0&&(lt.actionData=Kt)}qt.length>0&&(lt.fetchers=Xt(qt)),Ye(lt,{flushSync:Te})}qt.forEach(lt=>{an(lt.key),lt.controller&&J.set(lt.key,lt.controller)});let ls=()=>qt.forEach(lt=>an(lt.key));R&&R.signal.addEventListener("abort",ls);let{loaderResults:hi,fetcherResults:fi}=await Ot(E,se,ot,qt,$);if($.signal.aborted)return{shortCircuited:!0};R&&R.signal.removeEventListener("abort",ls),qt.forEach(lt=>J.delete(lt.key));let Vn=Wm(hi);if(Vn)return await et($,Vn.result,!0,{replace:Ce}),{shortCircuited:!0};if(Vn=Wm(fi),Vn)return me.add(Vn.key),await et($,Vn.result,!0,{replace:Ce}),{shortCircuited:!0};let{loaderData:Ha,errors:us}=N2(E,se,hi,Ie,qt,fi,ce);ce.forEach((lt,Kt)=>{lt.subscribe(hs=>{(hs||lt.done)&&ce.delete(Kt)})}),m.v7_partialHydration&&Se&&E.errors&&(us=mn({},E.errors,us));let kr=ir(),Pr=Oi(ie),cs=kr||Pr||qt.length>0;return mn({matches:se,loaderData:Ha,errors:us},cs?{fetchers:new Map(E.fetchers)}:{})}function rn($){if($&&!xi($[1]))return{[$[0]]:$[1].data};if(E.actionData)return Object.keys(E.actionData).length===0?null:E.actionData}function Xt($){return $.forEach(te=>{let se=E.fetchers.get(te.key),ge=qh(void 0,se?se.data:void 0);E.fetchers.set(te.key,ge)}),new Map(E.fetchers)}function st($,te,se,ge){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");an($);let xe=(ge&&ge.flushSync)===!0,Ne=l||a,Le=B_(E.location,E.matches,c,m.v7_prependBasename,se,m.v7_relativeSplatPath,te,ge==null?void 0:ge.relative),Ce=Dl(Ne,Le,c),Se=sr(Ce,Ne,Le);if(Se.active&&Se.matches&&(Ce=Se.matches),!Ce){un($,te,Jr(404,{pathname:Le}),{flushSync:xe});return}let{path:Te,submission:Ie,error:ze}=w2(m.v7_normalizeFormMethod,!0,Le,ge);if(ze){un($,te,ze,{flushSync:xe});return}let qe=nf(Ce,Te),En=(ge&&ge.preventScrollReset)===!0;if(Ie&&xs(Ie.formMethod)){yn($,te,Te,qe,Ce,Se.active,xe,En,Ie);return}ye.set($,{routeId:te,path:Te}),At($,te,Te,qe,Ce,Se.active,xe,En,Ie)}async function yn($,te,se,ge,xe,Ne,Le,Ce,Se){Mt(),ye.delete($);function Te(en){if(!en.route.action&&!en.route.lazy){let di=Jr(405,{method:Se.formMethod,pathname:se,routeId:te});return un($,te,di,{flushSync:Le}),!0}return!1}if(!Ne&&Te(ge))return;let Ie=E.fetchers.get($);at($,Q9(Se,Ie),{flushSync:Le});let ze=new AbortController,qe=Uu(t.history,se,ze.signal,Se);if(Ne){let en=await Un(xe,new URL(qe.url).pathname,qe.signal,$);if(en.type==="aborted")return;if(en.type==="error"){un($,te,en.error,{flushSync:Le});return}else if(en.matches){if(xe=en.matches,ge=nf(xe,se),Te(ge))return}else{un($,te,Jr(404,{pathname:se}),{flushSync:Le});return}}J.set($,ze);let En=ee,ot=(await Ht("action",E,qe,[ge],xe,$))[ge.route.id];if(qe.signal.aborted){J.get($)===ze&&J.delete($);return}if(m.v7_fetcherPersist&&X.has($)){if(jl(ot)||xi(ot)){at($,uo(void 0));return}}else{if(jl(ot))if(J.delete($),ie>En){at($,uo(void 0));return}else return me.add($),at($,qh(Se)),et(qe,ot,!1,{fetcherSubmission:Se,preventScrollReset:Ce});if(xi(ot)){un($,te,ot.error);return}}if(Ao(ot))throw Jr(400,{type:"defer-action"});let qt=E.navigation.location||E.location,ls=Uu(t.history,qt,ze.signal),hi=l||a,fi=E.navigation.state!=="idle"?Dl(hi,E.navigation.location,c):E.matches;_t(fi,"Didn't find any matches after fetcher action");let Vn=++ee;_e.set($,Vn);let Ha=qh(Se,ot.data);E.fetchers.set($,Ha);let[us,kr]=T2(t.history,E,fi,Se,qt,!1,m.v7_skipActionErrorRevalidation,Z,z,V,X,ye,me,hi,c,[ge.route.id,ot]);kr.filter(en=>en.key!==$).forEach(en=>{let di=en.key,qa=E.fetchers.get(di),ol=qh(void 0,qa?qa.data:void 0);E.fetchers.set(di,ol),an(di),en.controller&&J.set(di,en.controller)}),Ye({fetchers:new Map(E.fetchers)});let Pr=()=>kr.forEach(en=>an(en.key));ze.signal.addEventListener("abort",Pr);let{loaderResults:cs,fetcherResults:lt}=await Ot(E,fi,us,kr,ls);if(ze.signal.aborted)return;ze.signal.removeEventListener("abort",Pr),_e.delete($),J.delete($),kr.forEach(en=>J.delete(en.key));let Kt=Wm(cs);if(Kt)return et(ls,Kt.result,!1,{preventScrollReset:Ce});if(Kt=Wm(lt),Kt)return me.add(Kt.key),et(ls,Kt.result,!1,{preventScrollReset:Ce});let{loaderData:hs,errors:Ns}=N2(E,fi,cs,void 0,kr,lt,ce);if(E.fetchers.has($)){let en=uo(ot.data);E.fetchers.set($,en)}Oi(Vn),E.navigation.state==="loading"&&Vn>ie?(_t(_,"Expected pending action"),R&&R.abort(),In(E.navigation.location,{matches:fi,loaderData:hs,errors:Ns,fetchers:new Map(E.fetchers)})):(Ye({errors:Ns,loaderData:I2(E.loaderData,hs,fi,Ns),fetchers:new Map(E.fetchers)}),Z=!1)}async function At($,te,se,ge,xe,Ne,Le,Ce,Se){let Te=E.fetchers.get($);at($,qh(Se,Te?Te.data:void 0),{flushSync:Le});let Ie=new AbortController,ze=Uu(t.history,se,Ie.signal);if(Ne){let ot=await Un(xe,new URL(ze.url).pathname,ze.signal,$);if(ot.type==="aborted")return;if(ot.type==="error"){un($,te,ot.error,{flushSync:Le});return}else if(ot.matches)xe=ot.matches,ge=nf(xe,se);else{un($,te,Jr(404,{pathname:se}),{flushSync:Le});return}}J.set($,Ie);let qe=ee,St=(await Ht("loader",E,ze,[ge],xe,$))[ge.route.id];if(Ao(St)&&(St=await P1(St,ze.signal,!0)||St),J.get($)===Ie&&J.delete($),!ze.signal.aborted){if(X.has($)){at($,uo(void 0));return}if(jl(St))if(ie>qe){at($,uo(void 0));return}else{me.add($),await et(ze,St,!1,{preventScrollReset:Ce});return}if(xi(St)){un($,te,St.error);return}_t(!Ao(St),"Unhandled fetcher deferred data"),at($,uo(St.data))}}async function et($,te,se,ge){let{submission:xe,fetcherSubmission:Ne,preventScrollReset:Le,replace:Ce}=ge===void 0?{}:ge;te.response.headers.has("X-Remix-Revalidate")&&(Z=!0);let Se=te.response.headers.get("Location");_t(Se,"Expected a Location header on the redirect Response"),Se=R2(Se,new URL($.url),c);let Te=Gf(E.location,Se,{_isRedirect:!0});if(n){let ot=!1;if(te.response.headers.has("X-Remix-Reload-Document"))ot=!0;else if(k1.test(Se)){const qt=t.history.createURL(Se);ot=qt.origin!==e.location.origin||yd(qt.pathname,c)==null}if(ot){Ce?e.location.replace(Se):e.location.assign(Se);return}}R=null;let Ie=Ce===!0||te.response.headers.has("X-Remix-Replace")?Fn.Replace:Fn.Push,{formMethod:ze,formAction:qe,formEncType:En}=E.navigation;!xe&&!Ne&&ze&&qe&&En&&(xe=j2(E.navigation));let St=xe||Ne;if(D9.has(te.response.status)&&St&&xs(St.formMethod))await Ut(Ie,Te,{submission:mn({},St,{formAction:Se}),preventScrollReset:Le||w,enableViewTransition:se?k:void 0});else{let ot=wy(Te,xe);await Ut(Ie,Te,{overrideNavigation:ot,fetcherSubmission:Ne,preventScrollReset:Le||w,enableViewTransition:se?k:void 0})}}async function Ht($,te,se,ge,xe,Ne){let Le,Ce={};try{Le=await V9(f,$,te,se,ge,xe,Ne,s,i)}catch(Se){return ge.forEach(Te=>{Ce[Te.route.id]={type:Bt.error,error:Se}}),Ce}for(let[Se,Te]of Object.entries(Le))if(G9(Te)){let Ie=Te.result;Ce[Se]={type:Bt.redirect,response:F9(Ie,se,Se,xe,c,m.v7_relativeSplatPath)}}else Ce[Se]=await B9(Te);return Ce}async function Ot($,te,se,ge,xe){let Ne=$.matches,Le=Ht("loader",$,xe,se,te,null),Ce=Promise.all(ge.map(async Ie=>{if(Ie.matches&&Ie.match&&Ie.controller){let qe=(await Ht("loader",$,Uu(t.history,Ie.path,Ie.controller.signal),[Ie.match],Ie.matches,Ie.key))[Ie.match.route.id];return{[Ie.key]:qe}}else return Promise.resolve({[Ie.key]:{type:Bt.error,error:Jr(404,{pathname:Ie.path})}})})),Se=await Le,Te=(await Ce).reduce((Ie,ze)=>Object.assign(Ie,ze),{});return await Promise.all([W9(te,Se,xe.signal,Ne,$.loaderData),X9(te,Te,ge)]),{loaderResults:Se,fetcherResults:Te}}function Mt(){Z=!0,z.push(...Wn()),ye.forEach(($,te)=>{J.has(te)&&V.add(te),an(te)})}function at($,te,se){se===void 0&&(se={}),E.fetchers.set($,te),Ye({fetchers:new Map(E.fetchers)},{flushSync:(se&&se.flushSync)===!0})}function un($,te,se,ge){ge===void 0&&(ge={});let xe=Ol(E.matches,te);wn($),Ye({errors:{[xe.route.id]:se},fetchers:new Map(E.fetchers)},{flushSync:(ge&&ge.flushSync)===!0})}function sn($){return W.set($,(W.get($)||0)+1),X.has($)&&X.delete($),E.fetchers.get($)||O9}function wn($){let te=E.fetchers.get($);J.has($)&&!(te&&te.state==="loading"&&_e.has($))&&an($),ye.delete($),_e.delete($),me.delete($),m.v7_fetcherPersist&&X.delete($),V.delete($),E.fetchers.delete($)}function cn($){let te=(W.get($)||0)-1;te<=0?(W.delete($),X.add($),m.v7_fetcherPersist||wn($)):W.set($,te),Ye({fetchers:new Map(E.fetchers)})}function an($){let te=J.get($);te&&(te.abort(),J.delete($))}function Ln($){for(let te of $){let se=sn(te),ge=uo(se.data);E.fetchers.set(te,ge)}}function ir(){let $=[],te=!1;for(let se of me){let ge=E.fetchers.get(se);_t(ge,"Expected fetcher: "+se),ge.state==="loading"&&(me.delete(se),$.push(se),te=!0)}return Ln($),te}function Oi($){let te=[];for(let[se,ge]of _e)if(ge<$){let xe=E.fetchers.get(se);_t(xe,"Expected fetcher: "+se),xe.state==="loading"&&(an(se),_e.delete(se),te.push(se))}return Ln(te),te.length>0}function ra($,te){let se=E.blockers.get($)||Hh;return Oe.get($)!==te&&Oe.set($,te),se}function Mi($){E.blockers.delete($),Oe.delete($)}function ji($,te){let se=E.blockers.get($)||Hh;_t(se.state==="unblocked"&&te.state==="blocked"||se.state==="blocked"&&te.state==="blocked"||se.state==="blocked"&&te.state==="proceeding"||se.state==="blocked"&&te.state==="unblocked"||se.state==="proceeding"&&te.state==="unblocked","Invalid blocker state transition: "+se.state+" -> "+te.state);let ge=new Map(E.blockers);ge.set($,te),Ye({blockers:ge})}function ci($){let{currentLocation:te,nextLocation:se,historyAction:ge}=$;if(Oe.size===0)return;Oe.size>1&&Uc(!1,"A router only supports one blocker at a time");let xe=Array.from(Oe.entries()),[Ne,Le]=xe[xe.length-1],Ce=E.blockers.get(Ne);if(!(Ce&&Ce.state==="proceeding")&&Le({currentLocation:te,nextLocation:se,historyAction:ge}))return Ne}function Gr($){let te=Jr(404,{pathname:$}),se=l||a,{matches:ge,route:xe}=O2(se);return Wn(),{notFoundMatches:ge,route:xe,error:te}}function Wn($){let te=[];return ce.forEach((se,ge)=>{(!$||$(ge))&&(se.cancel(),te.push(ge),ce.delete(ge))}),te}function Tr($,te,se){if(T=$,j=te,N=se||null,!A&&E.navigation===xy){A=!0;let ge=Pi(E.location,E.matches);ge!=null&&Ye({restoreScrollPosition:ge})}return()=>{T=null,j=null,N=null}}function Xn($,te){return N&&N($,te.map(ge=>u9(ge,E.loaderData)))||$.key}function ki($,te){if(T&&j){let se=Xn($,te);T[se]=j()}}function Pi($,te){if(T){let se=Xn($,te),ge=T[se];if(typeof ge=="number")return ge}return null}function sr($,te,se){if(h)if($){if(Object.keys($[0].params).length>0)return{active:!0,matches:yp(te,se,c,!0)}}else return{active:!0,matches:yp(te,se,c,!0)||[]};return{active:!1,matches:null}}async function Un($,te,se,ge){if(!h)return{type:"success",matches:$};let xe=$;for(;;){let Ne=l==null,Le=l||a,Ce=s;try{await h({signal:se,path:te,matches:xe,fetcherKey:ge,patch:(Ie,ze)=>{se.aborted||S2(Ie,ze,Le,Ce,i)}})}catch(Ie){return{type:"error",error:Ie,partialMatches:xe}}finally{Ne&&!se.aborted&&(a=[...a])}if(se.aborted)return{type:"aborted"};let Se=Dl(Le,te,c);if(Se)return{type:"success",matches:Se};let Te=yp(Le,te,c,!0);if(!Te||xe.length===Te.length&&xe.every((Ie,ze)=>Ie.route.id===Te[ze].route.id))return{type:"success",matches:null};xe=Te}}function gu($){s={},l=ag($,i,void 0,s)}function Kn($,te){let se=l==null;S2($,te,l||a,s,i),se&&(a=[...a],Ye({}))}return D={get basename(){return c},get future(){return m},get state(){return E},get routes(){return a},get window(){return e},initialize:$e,subscribe:gt,enableScrollRestoration:Tr,navigate:Lt,fetch:st,revalidate:bt,createHref:$=>t.history.createHref($),encodeLocation:$=>t.history.encodeLocation($),getFetcher:sn,deleteFetcher:cn,dispose:Pe,getBlocker:ra,deleteBlocker:Mi,patchRoutes:Kn,_internalFetchControllers:J,_internalActiveDeferreds:ce,_internalSetRoutes:gu},D}function k9(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function B_(t,e,n,r,i,s,a,l){let c,f;if(a){c=[];for(let m of e)if(c.push(m),m.route.id===a){f=m;break}}else c=e,f=e[e.length-1];let h=qN(i||".",HN(c,s),yd(t.pathname,n)||t.pathname,l==="path");if(i==null&&(h.search=t.search,h.hash=t.hash),(i==null||i===""||i===".")&&f){let m=L1(h.search);if(f.route.index&&!m)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!f.route.index&&m){let p=new URLSearchParams(h.search),y=p.getAll("index");p.delete("index"),y.filter(N=>N).forEach(N=>p.append("index",N));let T=p.toString();h.search=T?"?"+T:""}}return r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:Lo([n,h.pathname])),vd(h)}function w2(t,e,n,r){if(!r||!k9(r))return{path:n};if(r.formMethod&&!Y9(r.formMethod))return{path:n,error:Jr(405,{method:r.formMethod})};let i=()=>({path:n,error:Jr(400,{type:"invalid-body"})}),s=r.formMethod||"get",a=t?s.toUpperCase():s.toLowerCase(),l=XN(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!xs(a))return i();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((y,T)=>{let[N,j]=T;return""+y+N+"="+j+`
`},""):String(r.body);return{path:n,submission:{formMethod:a,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!xs(a))return i();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:a,formAction:l,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return i()}}}_t(typeof FormData=="function","FormData is not available in this environment");let c,f;if(r.formData)c=H_(r.formData),f=r.formData;else if(r.body instanceof FormData)c=H_(r.body),f=r.body;else if(r.body instanceof URLSearchParams)c=r.body,f=C2(c);else if(r.body==null)c=new URLSearchParams,f=new FormData;else try{c=new URLSearchParams(r.body),f=C2(c)}catch{return i()}let h={formMethod:a,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:f,json:void 0,text:void 0};if(xs(h.formMethod))return{path:n,submission:h};let m=nl(n);return e&&m.search&&L1(m.search)&&c.append("index",""),m.search="?"+c,{path:vd(m),submission:h}}function E2(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function T2(t,e,n,r,i,s,a,l,c,f,h,m,p,y,T,N){let j=N?xi(N[1])?N[1].error:N[1].data:void 0,A=t.createURL(e.location),C=t.createURL(i),M=n;s&&e.errors?M=E2(n,Object.keys(e.errors)[0],!0):N&&xi(N[1])&&(M=E2(n,N[0]));let U=N?N[1].statusCode:void 0,H=a&&U&&U>=400,D=M.filter((_,w)=>{let{route:R}=_;if(R.lazy)return!0;if(R.loader==null)return!1;if(s)return F_(R,e.loaderData,e.errors);if(P9(e.loaderData,e.matches[w],_)||c.some(O=>O===_.route.id))return!0;let k=e.matches[w],P=_;return A2(_,mn({currentUrl:A,currentParams:k.params,nextUrl:C,nextParams:P.params},r,{actionResult:j,actionStatus:U,defaultShouldRevalidate:H?!1:l||A.pathname+A.search===C.pathname+C.search||A.search!==C.search||YN(k,P)}))}),E=[];return m.forEach((_,w)=>{if(s||!n.some(G=>G.route.id===_.routeId)||h.has(w))return;let R=Dl(y,_.path,T);if(!R){E.push({key:w,routeId:_.routeId,path:_.path,matches:null,match:null,controller:null});return}let k=e.fetchers.get(w),P=nf(R,_.path),O=!1;p.has(w)?O=!1:f.has(w)?(f.delete(w),O=!0):k&&k.state!=="idle"&&k.data===void 0?O=l:O=A2(P,mn({currentUrl:A,currentParams:e.matches[e.matches.length-1].params,nextUrl:C,nextParams:n[n.length-1].params},r,{actionResult:j,actionStatus:U,defaultShouldRevalidate:H?!1:l})),O&&E.push({key:w,routeId:_.routeId,path:_.path,matches:R,match:P,controller:new AbortController})}),[D,E]}function F_(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function P9(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function YN(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function A2(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function S2(t,e,n,r,i){var s;let a;if(t){let f=r[t];_t(f,"No route found to patch children into: routeId = "+t),f.children||(f.children=[]),a=f.children}else a=n;let l=e.filter(f=>!a.some(h=>WN(f,h))),c=ag(l,i,[t||"_","patch",String(((s=a)==null?void 0:s.length)||"0")],r);a.push(...c)}function WN(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>WN(n,s))}):!1}async function L9(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];_t(i,"No route found in manifest");let s={};for(let a in r){let c=i[a]!==void 0&&a!=="hasErrorBoundary";Uc(!c,'Route "'+i.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+a+'" will be ignored.')),!c&&!o9.has(a)&&(s[a]=r[a])}Object.assign(i,s),Object.assign(i,mn({},e(i),{lazy:void 0}))}async function U9(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,a)=>Object.assign(i,{[n[a].route.id]:s}),{})}async function V9(t,e,n,r,i,s,a,l,c,f){let h=s.map(y=>y.route.lazy?L9(y.route,c,l):void 0),m=s.map((y,T)=>{let N=h[T],j=i.some(C=>C.route.id===y.route.id);return mn({},y,{shouldLoad:j,resolve:async C=>(C&&r.method==="GET"&&(y.route.lazy||y.route.loader)&&(j=!0),j?z9(e,r,y,N,C,f):Promise.resolve({type:Bt.data,result:void 0}))})}),p=await t({matches:m,request:r,params:s[0].params,fetcherKey:a,context:f});try{await Promise.all(h)}catch{}return p}async function z9(t,e,n,r,i,s){let a,l,c=f=>{let h,m=new Promise((T,N)=>h=N);l=()=>h(),e.signal.addEventListener("abort",l);let p=T=>typeof f!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):f({request:e,params:n.params,context:s},...T!==void 0?[T]:[]),y=(async()=>{try{return{type:"data",result:await(i?i(N=>p(N)):p())}}catch(T){return{type:"error",result:T}}})();return Promise.race([y,m])};try{let f=n.route[t];if(r)if(f){let h,[m]=await Promise.all([c(f).catch(p=>{h=p}),r]);if(h!==void 0)throw h;a=m}else if(await r,f=n.route[t],f)a=await c(f);else if(t==="action"){let h=new URL(e.url),m=h.pathname+h.search;throw Jr(405,{method:e.method,pathname:m,routeId:n.route.id})}else return{type:Bt.data,result:void 0};else if(f)a=await c(f);else{let h=new URL(e.url),m=h.pathname+h.search;throw Jr(404,{pathname:m})}_t(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(f){return{type:Bt.error,result:f}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function B9(t){let{result:e,type:n}=t;if(KN(e)){let m;try{let p=e.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?e.body==null?m=null:m=await e.json():m=await e.text()}catch(p){return{type:Bt.error,error:p}}return n===Bt.error?{type:Bt.error,error:new og(e.status,e.statusText,m),statusCode:e.status,headers:e.headers}:{type:Bt.data,data:m,statusCode:e.status,headers:e.headers}}if(n===Bt.error){if(M2(e)){var r,i;if(e.data instanceof Error){var s,a;return{type:Bt.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}}return{type:Bt.error,error:new og(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:Vc(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:Bt.error,error:e,statusCode:Vc(e)?e.status:void 0}}if($9(e)){var l,c;return{type:Bt.deferred,deferredData:e,statusCode:(l=e.init)==null?void 0:l.status,headers:((c=e.init)==null?void 0:c.headers)&&new Headers(e.init.headers)}}if(M2(e)){var f,h;return{type:Bt.data,data:e.data,statusCode:(f=e.init)==null?void 0:f.status,headers:(h=e.init)!=null&&h.headers?new Headers(e.init.headers):void 0}}return{type:Bt.data,data:e}}function F9(t,e,n,r,i,s){let a=t.headers.get("Location");if(_t(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!k1.test(a)){let l=r.slice(0,r.findIndex(c=>c.route.id===n)+1);a=B_(new URL(e.url),l,i,!0,a,s),t.headers.set("Location",a)}return t}function R2(t,e,n){if(k1.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=yd(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Uu(t,e,n,r){let i=t.createURL(XN(e)).toString(),s={signal:n};if(r&&xs(r.formMethod)){let{formMethod:a,formEncType:l}=r;s.method=a.toUpperCase(),l==="application/json"?(s.headers=new Headers({"Content-Type":l}),s.body=JSON.stringify(r.json)):l==="text/plain"?s.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?s.body=H_(r.formData):s.body=r.formData}return new Request(i,s)}function H_(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function C2(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function H9(t,e,n,r,i){let s={},a=null,l,c=!1,f={},h=n&&xi(n[1])?n[1].error:void 0;return t.forEach(m=>{if(!(m.route.id in e))return;let p=m.route.id,y=e[p];if(_t(!jl(y),"Cannot handle redirect results in processLoaderData"),xi(y)){let T=y.error;h!==void 0&&(T=h,h=void 0),a=a||{};{let N=Ol(t,p);a[N.route.id]==null&&(a[N.route.id]=T)}s[p]=void 0,c||(c=!0,l=Vc(y.error)?y.error.status:500),y.headers&&(f[p]=y.headers)}else Ao(y)?(r.set(p,y.deferredData),s[p]=y.deferredData.data,y.statusCode!=null&&y.statusCode!==200&&!c&&(l=y.statusCode),y.headers&&(f[p]=y.headers)):(s[p]=y.data,y.statusCode&&y.statusCode!==200&&!c&&(l=y.statusCode),y.headers&&(f[p]=y.headers))}),h!==void 0&&n&&(a={[n[0]]:h},s[n[0]]=void 0),{loaderData:s,errors:a,statusCode:l||200,loaderHeaders:f}}function N2(t,e,n,r,i,s,a){let{loaderData:l,errors:c}=H9(e,n,r,a);return i.forEach(f=>{let{key:h,match:m,controller:p}=f,y=s[h];if(_t(y,"Did not find corresponding fetcher result"),!(p&&p.signal.aborted))if(xi(y)){let T=Ol(t.matches,m==null?void 0:m.route.id);c&&c[T.route.id]||(c=mn({},c,{[T.route.id]:y.error})),t.fetchers.delete(h)}else if(jl(y))_t(!1,"Unhandled fetcher revalidation redirect");else if(Ao(y))_t(!1,"Unhandled fetcher deferred data");else{let T=uo(y.data);t.fetchers.set(h,T)}}),{loaderData:l,errors:c}}function I2(t,e,n,r){let i=mn({},e);for(let s of n){let a=s.route.id;if(e.hasOwnProperty(a)?e[a]!==void 0&&(i[a]=e[a]):t[a]!==void 0&&s.route.loader&&(i[a]=t[a]),r&&r.hasOwnProperty(a))break}return i}function D2(t){return t?xi(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ol(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function O2(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Jr(t,e){let{pathname:n,routeId:r,method:i,type:s,message:a}=e===void 0?{}:e,l="Unknown Server Error",c="Unknown @remix-run/router error";return t===400?(l="Bad Request",i&&n&&r?c="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?c="defer() is not supported in actions":s==="invalid-body"&&(c="Unable to encode submission body")):t===403?(l="Forbidden",c='Route "'+r+'" does not match URL "'+n+'"'):t===404?(l="Not Found",c='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",i&&n&&r?c="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(c='Invalid request method "'+i.toUpperCase()+'"')),new og(t||500,l,new Error(c),!0)}function Wm(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(jl(i))return{key:r,result:i}}}function XN(t){let e=typeof t=="string"?nl(t):t;return vd(mn({},e,{hash:""}))}function q9(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function G9(t){return KN(t.result)&&I9.has(t.result.status)}function Ao(t){return t.type===Bt.deferred}function xi(t){return t.type===Bt.error}function jl(t){return(t&&t.type)===Bt.redirect}function M2(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function $9(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function KN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function Y9(t){return N9.has(t.toLowerCase())}function xs(t){return R9.has(t.toLowerCase())}async function W9(t,e,n,r,i){let s=Object.entries(e);for(let a=0;a<s.length;a++){let[l,c]=s[a],f=t.find(p=>(p==null?void 0:p.route.id)===l);if(!f)continue;let h=r.find(p=>p.route.id===f.route.id),m=h!=null&&!YN(h,f)&&(i&&i[f.route.id])!==void 0;Ao(c)&&m&&await P1(c,n,!1).then(p=>{p&&(e[l]=p)})}}async function X9(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:a}=n[r],l=e[i];t.find(f=>(f==null?void 0:f.route.id)===s)&&Ao(l)&&(_t(a,"Expected an AbortController for revalidating fetcher deferred result"),await P1(l,a.signal,!0).then(f=>{f&&(e[i]=f)}))}}async function P1(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Bt.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Bt.error,error:i}}return{type:Bt.data,data:t.deferredData.data}}}function L1(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function nf(t,e){let n=typeof e=="string"?nl(e).search:e.search;if(t[t.length-1].route.index&&L1(n||""))return t[t.length-1];let r=FN(t);return r[r.length-1]}function j2(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:a}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:a,text:void 0}}}function wy(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function K9(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function qh(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Q9(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function uo(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Z9(t,e){try{let n=t.sessionStorage.getItem($N);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function J9(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem($N,JSON.stringify(n))}catch(r){Uc(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lg(){return lg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lg.apply(this,arguments)}const rv=K.createContext(null),QN=K.createContext(null),iv=K.createContext(null),U1=K.createContext(null),rl=K.createContext({outlet:null,matches:[],isDataRoute:!1}),ZN=K.createContext(null);function sv(){return K.useContext(U1)!=null}function JN(){return sv()||_t(!1),K.useContext(U1).location}function eI(t){K.useContext(iv).static||K.useLayoutEffect(t)}function nh(){let{isDataRoute:t}=K.useContext(rl);return t?f8():e8()}function e8(){sv()||_t(!1);let t=K.useContext(rv),{basename:e,future:n,navigator:r}=K.useContext(iv),{matches:i}=K.useContext(rl),{pathname:s}=JN(),a=JSON.stringify(HN(i,n.v7_relativeSplatPath)),l=K.useRef(!1);return eI(()=>{l.current=!0}),K.useCallback(function(f,h){if(h===void 0&&(h={}),!l.current)return;if(typeof f=="number"){r.go(f);return}let m=qN(f,JSON.parse(a),s,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Lo([e,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[e,r,a,s,t])}const t8=K.createContext(null);function n8(t){let e=K.useContext(rl).outlet;return e&&K.createElement(t8.Provider,{value:t},e)}function tI(){let{matches:t}=K.useContext(rl),e=t[t.length-1];return e?e.params:{}}function r8(t,e,n,r){sv()||_t(!1);let{navigator:i}=K.useContext(iv),{matches:s}=K.useContext(rl),a=s[s.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let f=JN(),h;h=f;let m=h.pathname||"/",p=m;if(c!=="/"){let N=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(N.length).join("/")}let y=Dl(t,{pathname:p});return l8(y&&y.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:Lo([c,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?c:Lo([c,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),s,n,r)}function i8(){let t=sI(),e=Vc(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),n?K.createElement("pre",{style:i},n):null,null)}const s8=K.createElement(i8,null);class a8 extends K.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?K.createElement(rl.Provider,{value:this.props.routeContext},K.createElement(ZN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function o8(t){let{routeContext:e,match:n,children:r}=t,i=K.useContext(rv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),K.createElement(rl.Provider,{value:e},r)}function l8(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);h>=0||_t(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let m=a[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=h),m.route.id){let{loaderData:p,errors:y}=n,T=m.route.loader&&p[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||T){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((h,m,p)=>{let y,T=!1,N=null,j=null;n&&(y=l&&m.route.id?l[m.route.id]:void 0,N=m.route.errorElement||s8,c&&(f<0&&p===0?(d8("route-fallback"),T=!0,j=null):f===p&&(T=!0,j=m.route.hydrateFallbackElement||null)));let A=e.concat(a.slice(0,p+1)),C=()=>{let M;return y?M=N:T?M=j:m.route.Component?M=K.createElement(m.route.Component,null):m.route.element?M=m.route.element:M=h,K.createElement(o8,{match:m,routeContext:{outlet:h,matches:A,isDataRoute:n!=null},children:M})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?K.createElement(a8,{location:n.location,revalidation:n.revalidation,component:N,error:y,children:C(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):C()},null)}var nI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(nI||{}),rI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(rI||{});function u8(t){let e=K.useContext(rv);return e||_t(!1),e}function c8(t){let e=K.useContext(QN);return e||_t(!1),e}function h8(t){let e=K.useContext(rl);return e||_t(!1),e}function iI(t){let e=h8(),n=e.matches[e.matches.length-1];return n.route.id||_t(!1),n.route.id}function sI(){var t;let e=K.useContext(ZN),n=c8(rI.UseRouteError),r=iI();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function f8(){let{router:t}=u8(nI.UseNavigateStable),e=iI(),n=K.useRef(!1);return eI(()=>{n.current=!0}),K.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,lg({fromRouteId:e},s)))},[t,e])}const k2={};function d8(t,e,n){k2[t]||(k2[t]=!0)}function m8(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function aI(t){return n8(t.context)}function p8(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Fn.Pop,navigator:s,static:a=!1,future:l}=t;sv()&&_t(!1);let c=e.replace(/^\/*/,"/"),f=K.useMemo(()=>({basename:c,navigator:s,static:a,future:lg({v7_relativeSplatPath:!1},l)}),[c,l,s,a]);typeof r=="string"&&(r=nl(r));let{pathname:h="/",search:m="",hash:p="",state:y=null,key:T="default"}=r,N=K.useMemo(()=>{let j=yd(h,c);return j==null?null:{location:{pathname:j,search:m,hash:p,state:y,key:T},navigationType:i}},[c,h,m,p,y,T,i]);return N==null?null:K.createElement(iv.Provider,{value:f},K.createElement(U1.Provider,{children:n,value:N}))}new Promise(()=>{});function g8(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:K.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:K.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:K.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ug(){return ug=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ug.apply(this,arguments)}const v8="6";try{window.__reactRouterVersion=v8}catch{}function y8(t,e){return j9({basename:void 0,future:ug({},void 0,{v7_prependBasename:!0}),history:i9({window:void 0}),hydrationData:_8(),routes:t,mapRouteProperties:g8,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function _8(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=ug({},e,{errors:b8(e.errors)})),e}function b8(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new og(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let a=new s(i.message);a.stack="",n[r]=a}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const x8=K.createContext({isTransitioning:!1}),w8=K.createContext(new Map),E8="startTransition",P2=wP[E8],T8="flushSync",L2=CP[T8];function A8(t){P2?P2(t):t()}function Gh(t){L2?L2(t):t()}let S8=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function R8(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=K.useState(n.state),[a,l]=K.useState(),[c,f]=K.useState({isTransitioning:!1}),[h,m]=K.useState(),[p,y]=K.useState(),[T,N]=K.useState(),j=K.useRef(new Map),{v7_startTransition:A}=r||{},C=K.useCallback(_=>{A?A8(_):_()},[A]),M=K.useCallback((_,w)=>{let{deletedFetchers:R,flushSync:k,viewTransitionOpts:P}=w;_.fetchers.forEach((G,Z)=>{G.data!==void 0&&j.current.set(Z,G.data)}),R.forEach(G=>j.current.delete(G));let O=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!P||O){k?Gh(()=>s(_)):C(()=>s(_));return}if(k){Gh(()=>{p&&(h&&h.resolve(),p.skipTransition()),f({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let G=n.window.document.startViewTransition(()=>{Gh(()=>s(_))});G.finished.finally(()=>{Gh(()=>{m(void 0),y(void 0),l(void 0),f({isTransitioning:!1})})}),Gh(()=>y(G));return}p?(h&&h.resolve(),p.skipTransition(),N({state:_,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(l(_),f({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[n.window,p,h,j,C]);K.useLayoutEffect(()=>n.subscribe(M),[n,M]),K.useEffect(()=>{c.isTransitioning&&!c.flushSync&&m(new S8)},[c]),K.useEffect(()=>{if(h&&a&&n.window){let _=a,w=h.promise,R=n.window.document.startViewTransition(async()=>{C(()=>s(_)),await w});R.finished.finally(()=>{m(void 0),y(void 0),l(void 0),f({isTransitioning:!1})}),y(R)}},[C,a,h,n.window]),K.useEffect(()=>{h&&a&&i.location.key===a.location.key&&h.resolve()},[h,p,i.location,a]),K.useEffect(()=>{!c.isTransitioning&&T&&(l(T.state),f({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}),N(void 0))},[c.isTransitioning,T]),K.useEffect(()=>{},[]);let U=K.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:_=>n.navigate(_),push:(_,w,R)=>n.navigate(_,{state:w,preventScrollReset:R==null?void 0:R.preventScrollReset}),replace:(_,w,R)=>n.navigate(_,{replace:!0,state:w,preventScrollReset:R==null?void 0:R.preventScrollReset})}),[n]),H=n.basename||"/",D=K.useMemo(()=>({router:n,navigator:U,static:!1,basename:H}),[n,U,H]),E=K.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return K.useEffect(()=>m8(r,n.future),[r,n.future]),K.createElement(K.Fragment,null,K.createElement(rv.Provider,{value:D},K.createElement(QN.Provider,{value:i},K.createElement(w8.Provider,{value:j.current},K.createElement(x8.Provider,{value:c},K.createElement(p8,{basename:H,location:i.location,navigationType:i.historyAction,navigator:U,future:E},i.initialized||n.future.v7_partialHydration?K.createElement(C8,{routes:n.routes,future:n.future,state:i}):e))))),null)}const C8=K.memo(N8);function N8(t){let{routes:e,future:n,state:r}=t;return r8(e,void 0,r,n)}var U2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(U2||(U2={}));var V2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(V2||(V2={}));const I8=()=>{};var z2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},D8=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},lI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,c=i+2<t.length,f=c?t[i+2]:0,h=s>>2,m=(s&3)<<4|l>>4;let p=(l&15)<<2|f>>6,y=f&63;c||(y=64,a||(p=64)),r.push(n[h],n[m],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):D8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||f==null||m==null)throw new O8;const p=s<<2|l>>4;if(r.push(p),f!==64){const y=l<<4&240|f>>2;if(r.push(y),m!==64){const T=f<<6&192|m;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class O8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const M8=function(t){const e=oI(t);return lI.encodeByteArray(e,!0)},cg=function(t){return M8(t).replace(/\./g,"")},uI=function(t){try{return lI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8=()=>j8().__FIREBASE_DEFAULTS__,P8=()=>{if(typeof process>"u"||typeof z2>"u")return;const t=z2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},L8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&uI(t[1]);return e&&JSON.parse(e)},av=()=>{try{return I8()||k8()||P8()||L8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cI=t=>{var e,n;return(n=(e=av())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},V1=t=>{const e=cI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},hI=()=>{var t;return(t=av())===null||t===void 0?void 0:t.config},fI=t=>{var e;return(e=av())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ov(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[cg(JSON.stringify(n)),cg(JSON.stringify(a)),""].join(".")}const Ef={};function V8(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ef))Ef[e]?t.emulator.push(e):t.prod.push(e);return t}function z8(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let B2=!1;function lv(t,e){if(typeof window>"u"||typeof document>"u"||!Fa(window.location.host)||Ef[t]===e||Ef[t]||B2)return;Ef[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=V8().prod.length>0;function a(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function f(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{B2=!0,a()},p}function h(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=z8(r),y=n("text"),T=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),j=document.getElementById(N)||document.createElement("a"),A=n("preprendIcon"),C=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const M=p.element;l(M),h(j,N);const U=f();c(C,A),M.append(C,T,j,U),document.body.appendChild(M)}s?(T.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function B8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jr())}function F8(){var t;const e=(t=av())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function H8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function q8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function G8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $8(){const t=jr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Y8(){return!F8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W8(){try{return typeof indexedDB=="object"}catch{return!1}}function X8(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8="FirebaseError";class Cs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=K8,Object.setPrototypeOf(this,Cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_d.prototype.create)}}class _d{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?Q8(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new Cs(i,l,r)}}function Q8(t,e){return t.replace(Z8,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Z8=/\{\$([^}]+)}/g;function J8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(F2(s)&&F2(a)){if(!Jl(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function F2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function eV(t,e){const n=new tV(t,e);return n.subscribe.bind(n)}class tV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");nV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ey),i.error===void 0&&(i.error=Ey),i.complete===void 0&&(i.complete=Ey);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ey(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(t){return t&&t._delegate?t._delegate:t}class ka{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new U8;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sV(e))try{this.getOrInitializeService({instanceIdentifier:Il})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Il){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Il){return this.instances.has(e)}getOptions(e=Il){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Il){return this.component?this.component.multipleInstances?e:Il:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iV(t){return t===Il?void 0:t}function sV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(mt||(mt={}));const oV={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},lV=mt.INFO,uV={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},cV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=uV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class z1{constructor(e){this.name=e,this._logLevel=lV,this._logHandler=cV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...e),this._logHandler(this,mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...e),this._logHandler(this,mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...e),this._logHandler(this,mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...e),this._logHandler(this,mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...e),this._logHandler(this,mt.ERROR,...e)}}const hV=(t,e)=>e.some(n=>t instanceof n);let H2,q2;function fV(){return H2||(H2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dV(){return q2||(q2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mI=new WeakMap,q_=new WeakMap,pI=new WeakMap,Ty=new WeakMap,B1=new WeakMap;function mV(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Uo(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&mI.set(n,t)}).catch(()=>{}),B1.set(e,t),e}function pV(t){if(q_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});q_.set(t,e)}let G_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return q_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Uo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gV(t){G_=t(G_)}function vV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ay(this),e,...n);return pI.set(r,e.sort?e.sort():[e]),Uo(r)}:dV().includes(t)?function(...e){return t.apply(Ay(this),e),Uo(mI.get(this))}:function(...e){return Uo(t.apply(Ay(this),e))}}function yV(t){return typeof t=="function"?vV(t):(t instanceof IDBTransaction&&pV(t),hV(t,fV())?new Proxy(t,G_):t)}function Uo(t){if(t instanceof IDBRequest)return mV(t);if(Ty.has(t))return Ty.get(t);const e=yV(t);return e!==t&&(Ty.set(t,e),B1.set(e,t)),e}const Ay=t=>B1.get(t);function _V(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=Uo(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Uo(a.result),c.oldVersion,c.newVersion,Uo(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const bV=["get","getKey","getAll","getAllKeys","count"],xV=["put","add","delete","clear"],Sy=new Map;function G2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sy.get(e))return Sy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=xV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||bV.includes(n)))return;const s=async function(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),i&&c.done]))[0]};return Sy.set(e,s),s}gV(t=>({...t,get:(e,n,r)=>G2(e,n)||t.get(e,n,r),has:(e,n)=>!!G2(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(EV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function EV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $_="@firebase/app",$2="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=new z1("@firebase/app"),TV="@firebase/app-compat",AV="@firebase/analytics-compat",SV="@firebase/analytics",RV="@firebase/app-check-compat",CV="@firebase/app-check",NV="@firebase/auth",IV="@firebase/auth-compat",DV="@firebase/database",OV="@firebase/data-connect",MV="@firebase/database-compat",jV="@firebase/functions",kV="@firebase/functions-compat",PV="@firebase/installations",LV="@firebase/installations-compat",UV="@firebase/messaging",VV="@firebase/messaging-compat",zV="@firebase/performance",BV="@firebase/performance-compat",FV="@firebase/remote-config",HV="@firebase/remote-config-compat",qV="@firebase/storage",GV="@firebase/storage-compat",$V="@firebase/firestore",YV="@firebase/ai",WV="@firebase/firestore-compat",XV="firebase",KV="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="[DEFAULT]",QV={[$_]:"fire-core",[TV]:"fire-core-compat",[SV]:"fire-analytics",[AV]:"fire-analytics-compat",[CV]:"fire-app-check",[RV]:"fire-app-check-compat",[NV]:"fire-auth",[IV]:"fire-auth-compat",[DV]:"fire-rtdb",[OV]:"fire-data-connect",[MV]:"fire-rtdb-compat",[jV]:"fire-fn",[kV]:"fire-fn-compat",[PV]:"fire-iid",[LV]:"fire-iid-compat",[UV]:"fire-fcm",[VV]:"fire-fcm-compat",[zV]:"fire-perf",[BV]:"fire-perf-compat",[FV]:"fire-rc",[HV]:"fire-rc-compat",[qV]:"fire-gcs",[GV]:"fire-gcs-compat",[$V]:"fire-fst",[WV]:"fire-fst-compat",[YV]:"fire-vertex","fire-js":"fire-js",[XV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=new Map,ZV=new Map,W_=new Map;function Y2(t,e){try{t.container.addComponent(e)}catch(n){Pa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Go(t){const e=t.name;if(W_.has(e))return Pa.debug(`There were multiple attempts to register component ${e}.`),!1;W_.set(e,t);for(const n of hg.values())Y2(n,t);for(const n of ZV.values())Y2(n,t);return!0}function xd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ei(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vo=new _d("app","Firebase",JV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ka("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=KV;function gI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Y_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Vo.create("bad-app-name",{appName:String(i)});if(n||(n=hI()),!n)throw Vo.create("no-options");const s=hg.get(i);if(s){if(Jl(n,s.options)&&Jl(r,s.config))return s;throw Vo.create("duplicate-app",{appName:i})}const a=new aV(i);for(const c of W_.values())a.addComponent(c);const l=new e7(n,r,a);return hg.set(i,l),l}function uv(t=Y_){const e=hg.get(t);if(!e&&t===Y_&&hI())return gI();if(!e)throw Vo.create("no-app",{appName:t});return e}function is(t,e,n){var r;let i=(r=QV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pa.warn(l.join(" "));return}Go(new ka(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7="firebase-heartbeat-database",n7=1,$f="firebase-heartbeat-store";let Ry=null;function vI(){return Ry||(Ry=_V(t7,n7,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($f)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vo.create("idb-open",{originalErrorMessage:t.message})})),Ry}async function r7(t){try{const n=(await vI()).transaction($f),r=await n.objectStore($f).get(yI(t));return await n.done,r}catch(e){if(e instanceof Cs)Pa.warn(e.message);else{const n=Vo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pa.warn(n.message)}}}async function W2(t,e){try{const r=(await vI()).transaction($f,"readwrite");await r.objectStore($f).put(e,yI(t)),await r.done}catch(n){if(n instanceof Cs)Pa.warn(n.message);else{const r=Vo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Pa.warn(r.message)}}}function yI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7=1024,s7=30;class a7{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new l7(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=X2();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>s7){const a=u7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Pa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=X2(),{heartbeatsToSend:r,unsentEntries:i}=o7(this._heartbeatsCache.heartbeats),s=cg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Pa.warn(n),""}}}function X2(){return new Date().toISOString().substring(0,10)}function o7(t,e=i7){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),K2(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),K2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class l7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return W8()?X8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await r7(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return W2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return W2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function K2(t){return cg(JSON.stringify({version:2,heartbeats:t})).length}function u7(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c7(t){Go(new ka("platform-logger",e=>new wV(e),"PRIVATE")),Go(new ka("heartbeat",e=>new a7(e),"PRIVATE")),is($_,$2,t),is($_,$2,"esm2017"),is("fire-js","")}c7("");function F1(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function _I(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h7=_I,bI=new _d("auth","Firebase",_I());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=new z1("@firebase/auth");function f7(t,...e){fg.logLevel<=mt.WARN&&fg.warn(`Auth (${cu}): ${t}`,...e)}function _p(t,...e){fg.logLevel<=mt.ERROR&&fg.error(`Auth (${cu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(t,...e){throw q1(t,...e)}function As(t,...e){return q1(t,...e)}function H1(t,e,n){const r=Object.assign(Object.assign({},h7()),{[e]:n});return new _d("auth","Firebase",r).create(e,{appName:t.name})}function Gl(t){return H1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function d7(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ks(t,"argument-error"),H1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function q1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return bI.create(t,...e)}function He(t,e,...n){if(!t)throw q1(e,...n)}function Sa(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _p(e),new Error(e)}function La(t,e){t||Sa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function m7(){return Q2()==="http:"||Q2()==="https:"}function Q2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(m7()||q8()||"connection"in navigator)?navigator.onLine:!0}function g7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n){this.shortDelay=e,this.longDelay=n,La(n>e,"Short delay should be less than long delay!"),this.isMobile=B8()||G8()}get(){return p7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t,e){La(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_7=new wd(3e4,6e4);function $1(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function hu(t,e,n,r,i={}){return wI(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const l=bd(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:c},s);return H8()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Fa(t.emulatorConfig.host)&&(f.credentials="include"),xI.fetch()(await EI(t,t.config.apiHost,n,l),f)})}async function wI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},v7),e);try{const i=new x7(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Xm(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[c,f]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xm(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Xm(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Xm(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw H1(t,h,f);Ks(t,h)}}catch(i){if(i instanceof Cs)throw i;Ks(t,"network-request-failed",{message:String(i)})}}async function b7(t,e,n,r,i={}){const s=await hu(t,e,n,r,i);return"mfaPendingCredential"in s&&Ks(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function EI(t,e,n,r){const i=`${e}${n}?${r}`,s=t,a=s.config.emulator?G1(t.config,i):`${t.config.apiScheme}://${i}`;return y7.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class x7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(As(this.auth,"network-request-failed")),_7.get())})}}function Xm(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=As(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w7(t,e){return hu(t,"POST","/v1/accounts:delete",e)}async function dg(t,e){return hu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function E7(t,e=!1){const n=Wt(t),r=await n.getIdToken(e),i=Y1(r);He(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Tf(Cy(i.auth_time)),issuedAtTime:Tf(Cy(i.iat)),expirationTime:Tf(Cy(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Cy(t){return Number(t)*1e3}function Y1(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return _p("JWT malformed, contained fewer than 3 sections"),null;try{const i=uI(n);return i?JSON.parse(i):(_p("Failed to decode base64 JWT payload"),null)}catch(i){return _p("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Z2(t){const e=Y1(t);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Cs&&T7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function T7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tf(this.lastLoginAt),this.creationTime=Tf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mg(t){var e;const n=t.auth,r=await t.getIdToken(),i=await zc(t,dg(n,{idToken:r}));He(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?TI(s.providerUserInfo):[],l=R7(t.providerData,a),c=t.isAnonymous,f=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),h=c?f:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new K_(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function S7(t){const e=Wt(t);await mg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function R7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function TI(t){return t.map(e=>{var{providerId:n}=e,r=F1(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C7(t,e){const n=await wI(t,{},async()=>{const r=bd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=await EI(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Fa(t.emulatorConfig.host)&&(c.credentials="include"),xI.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function N7(t,e){return hu(t,"POST","/v2/accounts:revokeToken",$1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Z2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){He(e.length!==0,"internal-error");const n=Z2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await C7(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new xc;return r&&(He(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(He(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(He(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xc,this.toJSON())}_performRefresh(){return Sa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(t,e){He(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Es{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=F1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new A7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new K_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await zc(this,this.stsTokenManager.getToken(this.auth,e));return He(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return E7(this,e)}reload(){return S7(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Es(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await mg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ei(this.auth.app))return Promise.reject(Gl(this.auth));const e=await this.getIdToken();return await zc(this,w7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,l,c,f,h;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(a=n.photoURL)!==null&&a!==void 0?a:void 0,N=(l=n.tenantId)!==null&&l!==void 0?l:void 0,j=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,A=(f=n.createdAt)!==null&&f!==void 0?f:void 0,C=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:M,emailVerified:U,isAnonymous:H,providerData:D,stsTokenManager:E}=n;He(M&&E,e,"internal-error");const _=xc.fromJSON(this.name,E);He(typeof M=="string",e,"internal-error"),ao(m,e.name),ao(p,e.name),He(typeof U=="boolean",e,"internal-error"),He(typeof H=="boolean",e,"internal-error"),ao(y,e.name),ao(T,e.name),ao(N,e.name),ao(j,e.name),ao(A,e.name),ao(C,e.name);const w=new Es({uid:M,auth:e,email:p,emailVerified:U,displayName:m,isAnonymous:H,photoURL:T,phoneNumber:y,tenantId:N,stsTokenManager:_,createdAt:A,lastLoginAt:C});return D&&Array.isArray(D)&&(w.providerData=D.map(R=>Object.assign({},R))),j&&(w._redirectEventId=j),w}static async _fromIdTokenResponse(e,n,r=!1){const i=new xc;i.updateFromServerResponse(n);const s=new Es({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await mg(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];He(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?TI(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new xc;l.updateFromIdToken(r);const c=new Es({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:a}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new K_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=new Map;function Ra(t){La(t instanceof Function,"Expected a class definition");let e=J2.get(t);return e?(La(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,J2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}AI.type="NONE";const eA=AI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(t,e,n){return`firebase:${t}:${e}:${n}`}class wc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=bp(this.userKey,i.apiKey,s),this.fullPersistenceKey=bp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await dg(this.auth,{idToken:e}).catch(()=>{});return n?Es._fromGetAccountInfoResponse(this.auth,n,e):null}return Es._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new wc(Ra(eA),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let s=i[0]||Ra(eA);const a=bp(r,e.config.apiKey,e.name);let l=null;for(const f of n)try{const h=await f._get(a);if(h){let m;if(typeof h=="string"){const p=await dg(e,{idToken:h}).catch(()=>{});if(!p)break;m=await Es._fromGetAccountInfoResponse(e,p,h)}else m=Es._fromJSON(e,h);f!==s&&(l=m),s=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new wc(s,e,r):(s=c[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async f=>{if(f!==s)try{await f._remove(a)}catch{}})),new wc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DI(e))return"Blackberry";if(OI(e))return"Webos";if(RI(e))return"Safari";if((e.includes("chrome/")||CI(e))&&!e.includes("edge/"))return"Chrome";if(II(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function SI(t=jr()){return/firefox\//i.test(t)}function RI(t=jr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CI(t=jr()){return/crios\//i.test(t)}function NI(t=jr()){return/iemobile/i.test(t)}function II(t=jr()){return/android/i.test(t)}function DI(t=jr()){return/blackberry/i.test(t)}function OI(t=jr()){return/webos/i.test(t)}function W1(t=jr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function I7(t=jr()){var e;return W1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function D7(){return $8()&&document.documentMode===10}function MI(t=jr()){return W1(t)||II(t)||OI(t)||DI(t)||/windows phone/i.test(t)||NI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t,e=[]){let n;switch(t){case"Browser":n=tA(jr());break;case"Worker":n=`${tA(jr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,l)=>{try{const c=e(s);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M7(t,e={}){return hu(t,"GET","/v2/passwordPolicy",$1(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7=6;class k7{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:j7,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nA(this),this.idTokenSubscription=new nA(this),this.beforeStateQueue=new O7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ra(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await wc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dg(this,{idToken:e}),r=await Es._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ei(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await mg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=g7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ei(this.app))return Promise.reject(Gl(this));const n=e?Wt(e):null;return n&&He(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ei(this.app)?Promise.reject(Gl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ei(this.app)?Promise.reject(Gl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ra(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await M7(this),n=new k7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _d("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await N7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ra(e)||this._popupRedirectResolver;He(n,this,"argument-error"),this.redirectPersistenceManager=await wc.create(this,[Ra(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&f7(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function cv(t){return Wt(t)}class nA{constructor(e){this.auth=e,this.observer=null,this.addObserver=eV(n=>this.observer=n)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function L7(t){X1=t}function U7(t){return X1.loadJS(t)}function V7(){return X1.gapiScript}function z7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B7(t,e){const n=xd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Jl(s,e??{}))return i;Ks(i,"already-initialized")}return n.initialize({options:e})}function F7(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ra);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function H7(t,e,n){const r=cv(t);He(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=kI(e),{host:a,port:l}=q7(e),c=l===null?"":`:${l}`,f={url:`${s}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){He(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),He(Jl(f,r.config.emulator)&&Jl(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Fa(a)?(ov(`${s}//${a}${c}`),lv("Auth",!0)):G7()}function kI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function q7(t){const e=kI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:rA(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:rA(a)}}}function rA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function G7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sa("not implemented")}_getIdTokenResponse(e){return Sa("not implemented")}_linkToIdToken(e,n){return Sa("not implemented")}_getReauthenticationResolver(e){return Sa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ec(t,e){return b7(t,"POST","/v1/accounts:signInWithIdp",$1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7="http://localhost";class eu extends PI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new eu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ks("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=F1(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new eu(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ec(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ec(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ec(e,n)}buildRequest(){const e={requestUri:$7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed extends K1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends Ed{constructor(){super("facebook.com")}static credential(e){return eu._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vo.credentialFromTaggedObject(e)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vo.credential(e.oauthAccessToken)}catch{return null}}}vo.FACEBOOK_SIGN_IN_METHOD="facebook.com";vo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends Ed{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return eu._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ba.credential(n,r)}catch{return null}}}ba.GOOGLE_SIGN_IN_METHOD="google.com";ba.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends Ed{constructor(){super("github.com")}static credential(e){return eu._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yo.credential(e.oauthAccessToken)}catch{return null}}}yo.GITHUB_SIGN_IN_METHOD="github.com";yo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends Ed{constructor(){super("twitter.com")}static credential(e,n){return eu._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return _o.credential(n,r)}catch{return null}}}_o.TWITTER_SIGN_IN_METHOD="twitter.com";_o.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Es._fromIdTokenResponse(e,r,i),a=iA(r);return new Bc({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=iA(r);return new Bc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function iA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg extends Cs{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,pg.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new pg(e,n,r,i)}}function LI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?pg._fromErrorAndOperation(t,s,e,r):s})}async function Y7(t,e,n=!1){const r=await zc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W7(t,e,n=!1){const{auth:r}=t;if(Ei(r.app))return Promise.reject(Gl(r));const i="reauthenticate";try{const s=await zc(t,LI(r,i,e,t),n);He(s.idToken,r,"internal-error");const a=Y1(s.idToken);He(a,r,"internal-error");const{sub:l}=a;return He(t.uid===l,r,"user-mismatch"),Bc._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ks(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X7(t,e,n=!1){if(Ei(t.app))return Promise.reject(Gl(t));const r="signIn",i=await LI(t,r,e),s=await Bc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K7(t,e){return hu(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q7(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Wt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await zc(r,K7(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function Z7(t,e,n,r){return Wt(t).onIdTokenChanged(e,n,r)}function J7(t,e,n){return Wt(t).beforeAuthStateChanged(e,n)}function ez(t,e,n,r){return Wt(t).onAuthStateChanged(e,n,r)}function tz(t){return Wt(t).signOut()}const gg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gg,"1"),this.storage.removeItem(gg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz=1e3,rz=10;class VI extends UI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);D7()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,rz):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},nz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VI.type="LOCAL";const iz=VI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI extends UI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zI.type="SESSION";const BI=zI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sz(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new hv(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(a).map(async f=>f(n.origin,s)),c=await sz(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((l,c)=>{const f=Q1("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(m){const p=m;if(p.data.eventId===f)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(p.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(){return window}function oz(t){Hs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(){return typeof Hs().WorkerGlobalScope<"u"&&typeof Hs().importScripts=="function"}async function lz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uz(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function cz(){return FI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="firebaseLocalStorageDb",hz=1,vg="firebaseLocalStorage",qI="fbase_key";class Td{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fv(t,e){return t.transaction([vg],e?"readwrite":"readonly").objectStore(vg)}function fz(){const t=indexedDB.deleteDatabase(HI);return new Td(t).toPromise()}function Q_(){const t=indexedDB.open(HI,hz);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(vg,{keyPath:qI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(vg)?e(r):(r.close(),await fz(),e(await Q_()))})})}async function sA(t,e,n){const r=fv(t,!0).put({[qI]:e,value:n});return new Td(r).toPromise()}async function dz(t,e){const n=fv(t,!1).get(e),r=await new Td(n).toPromise();return r===void 0?null:r.value}function aA(t,e){const n=fv(t,!0).delete(e);return new Td(n).toPromise()}const mz=800,pz=3;class GI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Q_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>pz)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hv._getInstance(cz()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await lz(),!this.activeServiceWorker)return;this.sender=new az(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Q_();return await sA(e,gg,"1"),await aA(e,gg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>sA(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>dz(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>aA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=fv(i,!1).getAll();return new Td(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GI.type="LOCAL";const gz=GI;new wd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(t,e){return e?Ra(e):(He(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1 extends PI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ec(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ec(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ec(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function vz(t){return X7(t.auth,new Z1(t),t.bypassAuthState)}function yz(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),W7(n,new Z1(t),t.bypassAuthState)}async function _z(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),Y7(n,new Z1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vz;case"linkViaPopup":case"linkViaRedirect":return _z;case"reauthViaPopup":case"reauthViaRedirect":return yz;default:Ks(this.auth,"internal-error")}}resolve(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bz=new wd(2e3,1e4);async function xz(t,e,n){if(Ei(t.app))return Promise.reject(As(t,"operation-not-supported-in-this-environment"));const r=cv(t);d7(t,e,K1);const i=$I(r,n);return new kl(r,"signInViaPopup",e,i).executeNotNull()}class kl extends YI{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,kl.currentPopupAction&&kl.currentPopupAction.cancel(),kl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return He(e,this.auth,"internal-error"),e}async onExecution(){La(this.filter.length===1,"Popup operations only handle one event");const e=Q1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(As(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(As(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(As(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bz.get())};e()}}kl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz="pendingRedirect",xp=new Map;class Ez extends YI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=xp.get(this.auth._key());if(!e){try{const r=await Tz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}xp.set(this.auth._key(),e)}return this.bypassAuthState||xp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Tz(t,e){const n=Rz(e),r=Sz(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Az(t,e){xp.set(t._key(),e)}function Sz(t){return Ra(t._redirectPersistence)}function Rz(t){return bp(wz,t.config.apiKey,t.name)}async function Cz(t,e,n=!1){if(Ei(t.app))return Promise.reject(Gl(t));const r=cv(t),i=$I(r,e),a=await new Ez(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nz=10*60*1e3;class Iz{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Dz(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!WI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(As(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Nz&&this.cachedEventUids.clear(),this.cachedEventUids.has(oA(e))}saveEventToCache(e){this.cachedEventUids.add(oA(e)),this.lastProcessedEventTime=Date.now()}}function oA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function WI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Dz(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oz(t,e={}){return hu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jz=/^https?/;async function kz(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Oz(t);for(const n of e)try{if(Pz(n))return}catch{}Ks(t,"unauthorized-domain")}function Pz(t){const e=X_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!jz.test(n))return!1;if(Mz.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lz=new wd(3e4,6e4);function lA(){const t=Hs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Uz(t){return new Promise((e,n)=>{var r,i,s;function a(){lA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lA(),n(As(t,"network-request-failed"))},timeout:Lz.get()})}if(!((i=(r=Hs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Hs().gapi)===null||s===void 0)&&s.load)a();else{const l=z7("iframefcb");return Hs()[l]=()=>{gapi.load?a():n(As(t,"network-request-failed"))},U7(`${V7()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw wp=null,e})}let wp=null;function Vz(t){return wp=wp||Uz(t),wp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zz=new wd(5e3,15e3),Bz="__/auth/iframe",Fz="emulator/auth/iframe",Hz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gz(t){const e=t.config;He(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?G1(e,Fz):`https://${t.config.authDomain}/${Bz}`,r={apiKey:e.apiKey,appName:t.name,v:cu},i=qz.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${bd(r).slice(1)}`}async function $z(t){const e=await Vz(t),n=Hs().gapi;return He(n,t,"internal-error"),e.open({where:document.body,url:Gz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hz,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=As(t,"network-request-failed"),l=Hs().setTimeout(()=>{s(a)},zz.get());function c(){Hs().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wz=500,Xz=600,Kz="_blank",Qz="http://localhost";class uA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Zz(t,e,n,r=Wz,i=Xz){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Yz),{width:r.toString(),height:i.toString(),top:s,left:a}),f=jr().toLowerCase();n&&(l=CI(f)?Kz:n),SI(f)&&(e=e||Qz,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[y,T])=>`${p}${y}=${T},`,"");if(I7(f)&&l!=="_self")return Jz(e||"",l),new uA(null);const m=window.open(e||"",l,h);He(m,t,"popup-blocked");try{m.focus()}catch{}return new uA(m)}function Jz(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB="__/auth/handler",tB="emulator/auth/handler",nB=encodeURIComponent("fac");async function cA(t,e,n,r,i,s){He(t.config.authDomain,t,"auth-domain-config-required"),He(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:cu,eventId:i};if(e instanceof K1){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",J8(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))a[h]=m}if(e instanceof Ed){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),f=c?`#${nB}=${encodeURIComponent(c)}`:"";return`${rB(t)}?${bd(l).slice(1)}${f}`}function rB({config:t}){return t.emulator?G1(t,tB):`https://${t.authDomain}/${eB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="webStorageSupport";class iB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BI,this._completeRedirectFn=Cz,this._overrideRedirectResult=Az}async _openPopup(e,n,r,i){var s;La((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await cA(e,n,r,X_(),i);return Zz(e,a,Q1())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await cA(e,n,r,X_(),i);return oz(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(La(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $z(e),r=new Iz(e);return n.register("authEvent",i=>(He(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ny,{type:Ny},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Ny];a!==void 0&&n(!!a),Ks(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kz(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return MI()||RI()||W1()}}const sB=iB;var hA="@firebase/auth",fA="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lB(t){Go(new ka("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;He(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jI(t)},f=new P7(r,i,s,c);return F7(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Go(new ka("auth-internal",e=>{const n=cv(e.getProvider("auth").getImmediate());return(r=>new aB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),is(hA,fA,oB(t)),is(hA,fA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=5*60,cB=fI("authIdTokenMaxAge")||uB;let dA=null;const hB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>cB)return;const i=n==null?void 0:n.token;dA!==i&&(dA=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function fB(t=uv()){const e=xd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=B7(t,{popupRedirectResolver:sB,persistence:[gz,iz,BI]}),r=fI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=hB(s.toString());J7(n,a,()=>a(n.currentUser)),Z7(n,l=>a(l))}}const i=cI("auth");return i&&H7(n,`http://${i}`),n}function dB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}L7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=As("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",dB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lB("Browser");var mB="firebase",pB="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is(mB,pB,"app");var mA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zo,XI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,_){function w(){}w.prototype=_.prototype,E.D=_.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(R,k,P){for(var O=Array(arguments.length-2),G=2;G<arguments.length;G++)O[G-2]=arguments[G];return _.prototype[k].apply(R,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,_,w){w||(w=0);var R=Array(16);if(typeof _=="string")for(var k=0;16>k;++k)R[k]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(k=0;16>k;++k)R[k]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=E.g[0],w=E.g[1],k=E.g[2];var P=E.g[3],O=_+(P^w&(k^P))+R[0]+3614090360&4294967295;_=w+(O<<7&4294967295|O>>>25),O=P+(k^_&(w^k))+R[1]+3905402710&4294967295,P=_+(O<<12&4294967295|O>>>20),O=k+(w^P&(_^w))+R[2]+606105819&4294967295,k=P+(O<<17&4294967295|O>>>15),O=w+(_^k&(P^_))+R[3]+3250441966&4294967295,w=k+(O<<22&4294967295|O>>>10),O=_+(P^w&(k^P))+R[4]+4118548399&4294967295,_=w+(O<<7&4294967295|O>>>25),O=P+(k^_&(w^k))+R[5]+1200080426&4294967295,P=_+(O<<12&4294967295|O>>>20),O=k+(w^P&(_^w))+R[6]+2821735955&4294967295,k=P+(O<<17&4294967295|O>>>15),O=w+(_^k&(P^_))+R[7]+4249261313&4294967295,w=k+(O<<22&4294967295|O>>>10),O=_+(P^w&(k^P))+R[8]+1770035416&4294967295,_=w+(O<<7&4294967295|O>>>25),O=P+(k^_&(w^k))+R[9]+2336552879&4294967295,P=_+(O<<12&4294967295|O>>>20),O=k+(w^P&(_^w))+R[10]+4294925233&4294967295,k=P+(O<<17&4294967295|O>>>15),O=w+(_^k&(P^_))+R[11]+2304563134&4294967295,w=k+(O<<22&4294967295|O>>>10),O=_+(P^w&(k^P))+R[12]+1804603682&4294967295,_=w+(O<<7&4294967295|O>>>25),O=P+(k^_&(w^k))+R[13]+4254626195&4294967295,P=_+(O<<12&4294967295|O>>>20),O=k+(w^P&(_^w))+R[14]+2792965006&4294967295,k=P+(O<<17&4294967295|O>>>15),O=w+(_^k&(P^_))+R[15]+1236535329&4294967295,w=k+(O<<22&4294967295|O>>>10),O=_+(k^P&(w^k))+R[1]+4129170786&4294967295,_=w+(O<<5&4294967295|O>>>27),O=P+(w^k&(_^w))+R[6]+3225465664&4294967295,P=_+(O<<9&4294967295|O>>>23),O=k+(_^w&(P^_))+R[11]+643717713&4294967295,k=P+(O<<14&4294967295|O>>>18),O=w+(P^_&(k^P))+R[0]+3921069994&4294967295,w=k+(O<<20&4294967295|O>>>12),O=_+(k^P&(w^k))+R[5]+3593408605&4294967295,_=w+(O<<5&4294967295|O>>>27),O=P+(w^k&(_^w))+R[10]+38016083&4294967295,P=_+(O<<9&4294967295|O>>>23),O=k+(_^w&(P^_))+R[15]+3634488961&4294967295,k=P+(O<<14&4294967295|O>>>18),O=w+(P^_&(k^P))+R[4]+3889429448&4294967295,w=k+(O<<20&4294967295|O>>>12),O=_+(k^P&(w^k))+R[9]+568446438&4294967295,_=w+(O<<5&4294967295|O>>>27),O=P+(w^k&(_^w))+R[14]+3275163606&4294967295,P=_+(O<<9&4294967295|O>>>23),O=k+(_^w&(P^_))+R[3]+4107603335&4294967295,k=P+(O<<14&4294967295|O>>>18),O=w+(P^_&(k^P))+R[8]+1163531501&4294967295,w=k+(O<<20&4294967295|O>>>12),O=_+(k^P&(w^k))+R[13]+2850285829&4294967295,_=w+(O<<5&4294967295|O>>>27),O=P+(w^k&(_^w))+R[2]+4243563512&4294967295,P=_+(O<<9&4294967295|O>>>23),O=k+(_^w&(P^_))+R[7]+1735328473&4294967295,k=P+(O<<14&4294967295|O>>>18),O=w+(P^_&(k^P))+R[12]+2368359562&4294967295,w=k+(O<<20&4294967295|O>>>12),O=_+(w^k^P)+R[5]+4294588738&4294967295,_=w+(O<<4&4294967295|O>>>28),O=P+(_^w^k)+R[8]+2272392833&4294967295,P=_+(O<<11&4294967295|O>>>21),O=k+(P^_^w)+R[11]+1839030562&4294967295,k=P+(O<<16&4294967295|O>>>16),O=w+(k^P^_)+R[14]+4259657740&4294967295,w=k+(O<<23&4294967295|O>>>9),O=_+(w^k^P)+R[1]+2763975236&4294967295,_=w+(O<<4&4294967295|O>>>28),O=P+(_^w^k)+R[4]+1272893353&4294967295,P=_+(O<<11&4294967295|O>>>21),O=k+(P^_^w)+R[7]+4139469664&4294967295,k=P+(O<<16&4294967295|O>>>16),O=w+(k^P^_)+R[10]+3200236656&4294967295,w=k+(O<<23&4294967295|O>>>9),O=_+(w^k^P)+R[13]+681279174&4294967295,_=w+(O<<4&4294967295|O>>>28),O=P+(_^w^k)+R[0]+3936430074&4294967295,P=_+(O<<11&4294967295|O>>>21),O=k+(P^_^w)+R[3]+3572445317&4294967295,k=P+(O<<16&4294967295|O>>>16),O=w+(k^P^_)+R[6]+76029189&4294967295,w=k+(O<<23&4294967295|O>>>9),O=_+(w^k^P)+R[9]+3654602809&4294967295,_=w+(O<<4&4294967295|O>>>28),O=P+(_^w^k)+R[12]+3873151461&4294967295,P=_+(O<<11&4294967295|O>>>21),O=k+(P^_^w)+R[15]+530742520&4294967295,k=P+(O<<16&4294967295|O>>>16),O=w+(k^P^_)+R[2]+3299628645&4294967295,w=k+(O<<23&4294967295|O>>>9),O=_+(k^(w|~P))+R[0]+4096336452&4294967295,_=w+(O<<6&4294967295|O>>>26),O=P+(w^(_|~k))+R[7]+1126891415&4294967295,P=_+(O<<10&4294967295|O>>>22),O=k+(_^(P|~w))+R[14]+2878612391&4294967295,k=P+(O<<15&4294967295|O>>>17),O=w+(P^(k|~_))+R[5]+4237533241&4294967295,w=k+(O<<21&4294967295|O>>>11),O=_+(k^(w|~P))+R[12]+1700485571&4294967295,_=w+(O<<6&4294967295|O>>>26),O=P+(w^(_|~k))+R[3]+2399980690&4294967295,P=_+(O<<10&4294967295|O>>>22),O=k+(_^(P|~w))+R[10]+4293915773&4294967295,k=P+(O<<15&4294967295|O>>>17),O=w+(P^(k|~_))+R[1]+2240044497&4294967295,w=k+(O<<21&4294967295|O>>>11),O=_+(k^(w|~P))+R[8]+1873313359&4294967295,_=w+(O<<6&4294967295|O>>>26),O=P+(w^(_|~k))+R[15]+4264355552&4294967295,P=_+(O<<10&4294967295|O>>>22),O=k+(_^(P|~w))+R[6]+2734768916&4294967295,k=P+(O<<15&4294967295|O>>>17),O=w+(P^(k|~_))+R[13]+1309151649&4294967295,w=k+(O<<21&4294967295|O>>>11),O=_+(k^(w|~P))+R[4]+4149444226&4294967295,_=w+(O<<6&4294967295|O>>>26),O=P+(w^(_|~k))+R[11]+3174756917&4294967295,P=_+(O<<10&4294967295|O>>>22),O=k+(_^(P|~w))+R[2]+718787259&4294967295,k=P+(O<<15&4294967295|O>>>17),O=w+(P^(k|~_))+R[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(k+(O<<21&4294967295|O>>>11))&4294967295,E.g[2]=E.g[2]+k&4294967295,E.g[3]=E.g[3]+P&4294967295}r.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var w=_-this.blockSize,R=this.B,k=this.h,P=0;P<_;){if(k==0)for(;P<=w;)i(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<_;)if(R[k++]=E.charCodeAt(P++),k==this.blockSize){i(this,R),k=0;break}}else for(;P<_;)if(R[k++]=E[P++],k==this.blockSize){i(this,R),k=0;break}}this.h=k,this.o+=_},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var w=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=w&255,w/=256;for(this.u(E),E=Array(16),_=w=0;4>_;++_)for(var R=0;32>R;R+=8)E[w++]=this.g[_]>>>R&255;return E};function s(E,_){var w=l;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=_(E)}function a(E,_){this.h=_;for(var w=[],R=!0,k=E.length-1;0<=k;k--){var P=E[k]|0;R&&P==_||(w[k]=P,R=!1)}this.g=w}var l={};function c(E){return-128<=E&&128>E?s(E,function(_){return new a([_|0],0>_?-1:0)}):new a([E|0],0>E?-1:0)}function f(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return j(f(-E));for(var _=[],w=1,R=0;E>=w;R++)_[R]=E/w|0,w*=4294967296;return new a(_,0)}function h(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return j(h(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=f(Math.pow(_,8)),R=m,k=0;k<E.length;k+=8){var P=Math.min(8,E.length-k),O=parseInt(E.substring(k,k+P),_);8>P?(P=f(Math.pow(_,P)),R=R.j(P).add(f(O))):(R=R.j(w),R=R.add(f(O)))}return R}var m=c(0),p=c(1),y=c(16777216);t=a.prototype,t.m=function(){if(N(this))return-j(this).m();for(var E=0,_=1,w=0;w<this.g.length;w++){var R=this.i(w);E+=(0<=R?R:4294967296+R)*_,_*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T(this))return"0";if(N(this))return"-"+j(this).toString(E);for(var _=f(Math.pow(E,6)),w=this,R="";;){var k=U(w,_).g;w=A(w,k.j(_));var P=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=k,T(w))return P+R;for(;6>P.length;)P="0"+P;R=P+R}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function T(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function N(E){return E.h==-1}t.l=function(E){return E=A(this,E),N(E)?-1:T(E)?0:1};function j(E){for(var _=E.g.length,w=[],R=0;R<_;R++)w[R]=~E.g[R];return new a(w,~E.h).add(p)}t.abs=function(){return N(this)?j(this):this},t.add=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],R=0,k=0;k<=_;k++){var P=R+(this.i(k)&65535)+(E.i(k)&65535),O=(P>>>16)+(this.i(k)>>>16)+(E.i(k)>>>16);R=O>>>16,P&=65535,O&=65535,w[k]=O<<16|P}return new a(w,w[w.length-1]&-2147483648?-1:0)};function A(E,_){return E.add(j(_))}t.j=function(E){if(T(this)||T(E))return m;if(N(this))return N(E)?j(this).j(j(E)):j(j(this).j(E));if(N(E))return j(this.j(j(E)));if(0>this.l(y)&&0>E.l(y))return f(this.m()*E.m());for(var _=this.g.length+E.g.length,w=[],R=0;R<2*_;R++)w[R]=0;for(R=0;R<this.g.length;R++)for(var k=0;k<E.g.length;k++){var P=this.i(R)>>>16,O=this.i(R)&65535,G=E.i(k)>>>16,Z=E.i(k)&65535;w[2*R+2*k]+=O*Z,C(w,2*R+2*k),w[2*R+2*k+1]+=P*Z,C(w,2*R+2*k+1),w[2*R+2*k+1]+=O*G,C(w,2*R+2*k+1),w[2*R+2*k+2]+=P*G,C(w,2*R+2*k+2)}for(R=0;R<_;R++)w[R]=w[2*R+1]<<16|w[2*R];for(R=_;R<2*_;R++)w[R]=0;return new a(w,0)};function C(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function M(E,_){this.g=E,this.h=_}function U(E,_){if(T(_))throw Error("division by zero");if(T(E))return new M(m,m);if(N(E))return _=U(j(E),_),new M(j(_.g),j(_.h));if(N(_))return _=U(E,j(_)),new M(j(_.g),_.h);if(30<E.g.length){if(N(E)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var w=p,R=_;0>=R.l(E);)w=H(w),R=H(R);var k=D(w,1),P=D(R,1);for(R=D(R,2),w=D(w,2);!T(R);){var O=P.add(R);0>=O.l(E)&&(k=k.add(w),P=O),R=D(R,1),w=D(w,1)}return _=A(E,k.j(_)),new M(k,_)}for(k=m;0<=E.l(_);){for(w=Math.max(1,Math.floor(E.m()/_.m())),R=Math.ceil(Math.log(w)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),P=f(w),O=P.j(_);N(O)||0<O.l(E);)w-=R,P=f(w),O=P.j(_);T(P)&&(P=p),k=k.add(P),E=A(E,O)}return new M(k,E)}t.A=function(E){return U(this,E).h},t.and=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],R=0;R<_;R++)w[R]=this.i(R)&E.i(R);return new a(w,this.h&E.h)},t.or=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],R=0;R<_;R++)w[R]=this.i(R)|E.i(R);return new a(w,this.h|E.h)},t.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],R=0;R<_;R++)w[R]=this.i(R)^E.i(R);return new a(w,this.h^E.h)};function H(E){for(var _=E.g.length+1,w=[],R=0;R<_;R++)w[R]=E.i(R)<<1|E.i(R-1)>>>31;return new a(w,E.h)}function D(E,_){var w=_>>5;_%=32;for(var R=E.g.length-w,k=[],P=0;P<R;P++)k[P]=0<_?E.i(P+w)>>>_|E.i(P+w+1)<<32-_:E.i(P+w);return new a(k,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,XI=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=h,zo=a}).apply(typeof mA<"u"?mA:typeof self<"u"?self:typeof window<"u"?window:{});var Km=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KI,rf,QI,Ep,Z_,ZI,JI,e4;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,b,S){return d==Array.prototype||d==Object.prototype||(d[b]=S.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Km=="object"&&Km];for(var b=0;b<d.length;++b){var S=d[b];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function i(d,b){if(b)e:{var S=r;d=d.split(".");for(var B=0;B<d.length-1;B++){var re=d[B];if(!(re in S))break e;S=S[re]}d=d[d.length-1],B=S[d],b=b(B),b!=B&&b!=null&&e(S,d,{configurable:!0,writable:!0,value:b})}}function s(d,b){d instanceof String&&(d+="");var S=0,B=!1,re={next:function(){if(!B&&S<d.length){var oe=S++;return{value:b(oe,d[oe]),done:!1}}return B=!0,{done:!0,value:void 0}}};return re[Symbol.iterator]=function(){return re},re}i("Array.prototype.values",function(d){return d||function(){return s(this,function(b,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(d){var b=typeof d;return b=b!="object"?b:d?Array.isArray(d)?"array":b:"null",b=="array"||b=="object"&&typeof d.length=="number"}function f(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function h(d,b,S){return d.call.apply(d.bind,arguments)}function m(d,b,S){if(!d)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var re=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(re,B),d.apply(b,re)}}return function(){return d.apply(b,arguments)}}function p(d,b,S){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,p.apply(null,arguments)}function y(d,b){var S=Array.prototype.slice.call(arguments,1);return function(){var B=S.slice();return B.push.apply(B,arguments),d.apply(this,B)}}function T(d,b){function S(){}S.prototype=b.prototype,d.aa=b.prototype,d.prototype=new S,d.prototype.constructor=d,d.Qb=function(B,re,oe){for(var be=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)be[Ct-2]=arguments[Ct];return b.prototype[re].apply(B,be)}}function N(d){const b=d.length;if(0<b){const S=Array(b);for(let B=0;B<b;B++)S[B]=d[B];return S}return[]}function j(d,b){for(let S=1;S<arguments.length;S++){const B=arguments[S];if(c(B)){const re=d.length||0,oe=B.length||0;d.length=re+oe;for(let be=0;be<oe;be++)d[re+be]=B[be]}else d.push(B)}}class A{constructor(b,S){this.i=b,this.j=S,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function C(d){return/^[\s\xa0]*$/.test(d)}function M(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function U(d){return U[" "](d),d}U[" "]=function(){};var H=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function D(d,b,S){for(const B in d)b.call(S,d[B],B,d)}function E(d,b){for(const S in d)b.call(void 0,d[S],S,d)}function _(d){const b={};for(const S in d)b[S]=d[S];return b}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(d,b){let S,B;for(let re=1;re<arguments.length;re++){B=arguments[re];for(S in B)d[S]=B[S];for(let oe=0;oe<w.length;oe++)S=w[oe],Object.prototype.hasOwnProperty.call(B,S)&&(d[S]=B[S])}}function k(d){var b=1;d=d.split(":");const S=[];for(;0<b&&d.length;)S.push(d.shift()),b--;return d.length&&S.push(d.join(":")),S}function P(d){l.setTimeout(()=>{throw d},0)}function O(){var d=ee;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class G{constructor(){this.h=this.g=null}add(b,S){const B=Z.get();B.set(b,S),this.h?this.h.next=B:this.g=B,this.h=B}}var Z=new A(()=>new z,d=>d.reset());class z{constructor(){this.next=this.g=this.h=null}set(b,S){this.h=b,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let V,J=!1,ee=new G,ie=()=>{const d=l.Promise.resolve(void 0);V=()=>{d.then(_e)}};var _e=()=>{for(var d;d=O();){try{d.h.call(d.g)}catch(S){P(S)}var b=Z;b.j(d),100>b.h&&(b.h++,d.next=b.g,b.g=d)}J=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const S=()=>{};l.addEventListener("test",S,b),l.removeEventListener("test",S,b)}catch{}return d}();function X(d,b){if(ye.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var S=this.type=d.type,B=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget){if(H){e:{try{U(b.nodeName);var re=!0;break e}catch{}re=!1}re||(b=null)}}else S=="mouseover"?b=d.fromElement:S=="mouseout"&&(b=d.toElement);this.relatedTarget=b,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ce[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&X.aa.h.call(this)}}T(X,ye);var ce={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),je=0;function $e(d,b,S,B,re){this.listener=d,this.proxy=null,this.src=b,this.type=S,this.capture=!!B,this.ha=re,this.key=++je,this.da=this.fa=!1}function Pe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function gt(d){this.src=d,this.g={},this.h=0}gt.prototype.add=function(d,b,S,B,re){var oe=d.toString();d=this.g[oe],d||(d=this.g[oe]=[],this.h++);var be=In(d,b,B,re);return-1<be?(b=d[be],S||(b.fa=!1)):(b=new $e(b,this.src,oe,!!B,re),b.fa=S,d.push(b)),b};function Ye(d,b){var S=b.type;if(S in d.g){var B=d.g[S],re=Array.prototype.indexOf.call(B,b,void 0),oe;(oe=0<=re)&&Array.prototype.splice.call(B,re,1),oe&&(Pe(b),d.g[S].length==0&&(delete d.g[S],d.h--))}}function In(d,b,S,B){for(var re=0;re<d.length;++re){var oe=d[re];if(!oe.da&&oe.listener==b&&oe.capture==!!S&&oe.ha==B)return re}return-1}var Lt="closure_lm_"+(1e6*Math.random()|0),bt={};function Ut(d,b,S,B,re){if(Array.isArray(b)){for(var oe=0;oe<b.length;oe++)Ut(d,b[oe],S,B,re);return null}return S=Ht(S),d&&d[Oe]?d.K(b,S,f(B)?!!B.capture:!1,re):it(d,b,S,!1,B,re)}function it(d,b,S,B,re,oe){if(!b)throw Error("Invalid event type");var be=f(re)?!!re.capture:!!re,Ct=At(d);if(Ct||(d[Lt]=Ct=new gt(d)),S=Ct.add(b,S,B,be,oe),S.proxy)return S;if(B=Et(),S.proxy=B,B.src=d,B.listener=S,d.addEventListener)W||(re=be),re===void 0&&(re=!1),d.addEventListener(b.toString(),B,re);else if(d.attachEvent)d.attachEvent(st(b.toString()),B);else if(d.addListener&&d.removeListener)d.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Et(){function d(S){return b.call(d.src,d.listener,S)}const b=yn;return d}function rn(d,b,S,B,re){if(Array.isArray(b))for(var oe=0;oe<b.length;oe++)rn(d,b[oe],S,B,re);else B=f(B)?!!B.capture:!!B,S=Ht(S),d&&d[Oe]?(d=d.i,b=String(b).toString(),b in d.g&&(oe=d.g[b],S=In(oe,S,B,re),-1<S&&(Pe(oe[S]),Array.prototype.splice.call(oe,S,1),oe.length==0&&(delete d.g[b],d.h--)))):d&&(d=At(d))&&(b=d.g[b.toString()],d=-1,b&&(d=In(b,S,B,re)),(S=-1<d?b[d]:null)&&Xt(S))}function Xt(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[Oe])Ye(b.i,d);else{var S=d.type,B=d.proxy;b.removeEventListener?b.removeEventListener(S,B,d.capture):b.detachEvent?b.detachEvent(st(S),B):b.addListener&&b.removeListener&&b.removeListener(B),(S=At(b))?(Ye(S,d),S.h==0&&(S.src=null,b[Lt]=null)):Pe(d)}}}function st(d){return d in bt?bt[d]:bt[d]="on"+d}function yn(d,b){if(d.da)d=!0;else{b=new X(b,this);var S=d.listener,B=d.ha||d.src;d.fa&&Xt(d),d=S.call(B,b)}return d}function At(d){return d=d[Lt],d instanceof gt?d:null}var et="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ht(d){return typeof d=="function"?d:(d[et]||(d[et]=function(b){return d.handleEvent(b)}),d[et])}function Ot(){me.call(this),this.i=new gt(this),this.M=this,this.F=null}T(Ot,me),Ot.prototype[Oe]=!0,Ot.prototype.removeEventListener=function(d,b,S,B){rn(this,d,b,S,B)};function Mt(d,b){var S,B=d.F;if(B)for(S=[];B;B=B.F)S.push(B);if(d=d.M,B=b.type||b,typeof b=="string")b=new ye(b,d);else if(b instanceof ye)b.target=b.target||d;else{var re=b;b=new ye(B,d),R(b,re)}if(re=!0,S)for(var oe=S.length-1;0<=oe;oe--){var be=b.g=S[oe];re=at(be,B,!0,b)&&re}if(be=b.g=d,re=at(be,B,!0,b)&&re,re=at(be,B,!1,b)&&re,S)for(oe=0;oe<S.length;oe++)be=b.g=S[oe],re=at(be,B,!1,b)&&re}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var d=this.i,b;for(b in d.g){for(var S=d.g[b],B=0;B<S.length;B++)Pe(S[B]);delete d.g[b],d.h--}}this.F=null},Ot.prototype.K=function(d,b,S,B){return this.i.add(String(d),b,!1,S,B)},Ot.prototype.L=function(d,b,S,B){return this.i.add(String(d),b,!0,S,B)};function at(d,b,S,B){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();for(var re=!0,oe=0;oe<b.length;++oe){var be=b[oe];if(be&&!be.da&&be.capture==S){var Ct=be.listener,Qn=be.ha||be.src;be.fa&&Ye(d.i,be),re=Ct.call(Qn,B)!==!1&&re}}return re&&!B.defaultPrevented}function un(d,b,S){if(typeof d=="function")S&&(d=p(d,S));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:l.setTimeout(d,b||0)}function sn(d){d.g=un(()=>{d.g=null,d.i&&(d.i=!1,sn(d))},d.l);const b=d.h;d.h=null,d.m.apply(null,b)}class wn extends me{constructor(b,S){super(),this.m=b,this.l=S,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:sn(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cn(d){me.call(this),this.h=d,this.g={}}T(cn,me);var an=[];function Ln(d){D(d.g,function(b,S){this.g.hasOwnProperty(S)&&Xt(b)},d),d.g={}}cn.prototype.N=function(){cn.aa.N.call(this),Ln(this)},cn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ir=l.JSON.stringify,Oi=l.JSON.parse,ra=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Mi(){}Mi.prototype.h=null;function ji(d){return d.h||(d.h=d.i())}function ci(){}var Gr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wn(){ye.call(this,"d")}T(Wn,ye);function Tr(){ye.call(this,"c")}T(Tr,ye);var Xn={},ki=null;function Pi(){return ki=ki||new Ot}Xn.La="serverreachability";function sr(d){ye.call(this,Xn.La,d)}T(sr,ye);function Un(d){const b=Pi();Mt(b,new sr(b))}Xn.STAT_EVENT="statevent";function gu(d,b){ye.call(this,Xn.STAT_EVENT,d),this.stat=b}T(gu,ye);function Kn(d){const b=Pi();Mt(b,new gu(b,d))}Xn.Ma="timingevent";function $(d,b){ye.call(this,Xn.Ma,d),this.size=b}T($,ye);function te(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},b)}function se(){this.g=!0}se.prototype.xa=function(){this.g=!1};function ge(d,b,S,B,re,oe){d.info(function(){if(d.g)if(oe)for(var be="",Ct=oe.split("&"),Qn=0;Qn<Ct.length;Qn++){var vt=Ct[Qn].split("=");if(1<vt.length){var jt=vt[0];vt=vt[1];var zn=jt.split("_");be=2<=zn.length&&zn[1]=="type"?be+(jt+"="+vt+"&"):be+(jt+"=redacted&")}}else be=null;else be=oe;return"XMLHTTP REQ ("+B+") [attempt "+re+"]: "+b+`
`+S+`
`+be})}function xe(d,b,S,B,re,oe,be){d.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+re+"]: "+b+`
`+S+`
`+oe+" "+be})}function Ne(d,b,S,B){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+Ce(d,S)+(B?" "+B:"")})}function Le(d,b){d.info(function(){return"TIMEOUT: "+b})}se.prototype.info=function(){};function Ce(d,b){if(!d.g)return b;if(!b)return null;try{var S=JSON.parse(b);if(S){for(d=0;d<S.length;d++)if(Array.isArray(S[d])){var B=S[d];if(!(2>B.length)){var re=B[1];if(Array.isArray(re)&&!(1>re.length)){var oe=re[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(var be=1;be<re.length;be++)re[be]=""}}}}return ir(S)}catch{return b}}var Se={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Te={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ie;function ze(){}T(ze,Mi),ze.prototype.g=function(){return new XMLHttpRequest},ze.prototype.i=function(){return{}},Ie=new ze;function qe(d,b,S,B){this.j=d,this.i=b,this.l=S,this.R=B||1,this.U=new cn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new En}function En(){this.i=null,this.g="",this.h=!1}var St={},ot={};function qt(d,b,S){d.L=1,d.v=$a(Li(b)),d.m=S,d.P=!0,ls(d,null)}function ls(d,b){d.F=Date.now(),Vn(d),d.A=Li(d.v);var S=d.A,B=d.R;Array.isArray(B)||(B=[String(B)]),fh(S.i,"t",B),d.C=0,S=d.j.J,d.h=new En,d.g=Wd(d.j,S?b:null,!d.m),0<d.O&&(d.M=new wn(p(d.Y,d,d.g),d.O)),b=d.U,S=d.g,B=d.ca;var re="readystatechange";Array.isArray(re)||(re&&(an[0]=re.toString()),re=an);for(var oe=0;oe<re.length;oe++){var be=Ut(S,re[oe],B||b.handleEvent,!1,b.h||b);if(!be)break;b.g[be.key]=be}b=d.H?_(d.H):{},d.m?(d.u||(d.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,b)):(d.u="GET",d.g.ea(d.A,d.u,null,b)),Un(),ge(d.i,d.u,d.A,d.l,d.R,d.m)}qe.prototype.ca=function(d){d=d.target;const b=this.M;b&&pr(d)==3?b.j():this.Y(d)},qe.prototype.Y=function(d){try{if(d==this.g)e:{const zn=pr(this.g);var b=this.g.Ba();const Bi=this.g.Z();if(!(3>zn)&&(zn!=3||this.g&&(this.h.h||this.g.oa()||ph(this.g)))){this.J||zn!=4||b==7||(b==8||0>=Bi?Un(3):Un(2)),us(this);var S=this.g.Z();this.X=S;t:if(hi(this)){var B=ph(this.g);d="";var re=B.length,oe=pr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pr(this),kr(this);var be="";break t}this.h.i=new l.TextDecoder}for(b=0;b<re;b++)this.h.h=!0,d+=this.h.i.decode(B[b],{stream:!(oe&&b==re-1)});B.length=0,this.h.g+=d,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=S==200,xe(this.i,this.u,this.A,this.l,this.R,zn,S),this.o){if(this.T&&!this.K){t:{if(this.g){var Ct,Qn=this.g;if((Ct=Qn.g?Qn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(Ct)){var vt=Ct;break t}}vt=null}if(S=vt)Ne(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cs(this,S);else{this.o=!1,this.s=3,Kn(12),Pr(this),kr(this);break e}}if(this.P){S=!0;let $r;for(;!this.J&&this.C<be.length;)if($r=fi(this,be),$r==ot){zn==4&&(this.s=4,Kn(14),S=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}else if($r==St){this.s=4,Kn(15),Ne(this.i,this.l,be,"[Invalid Chunk]"),S=!1;break}else Ne(this.i,this.l,$r,null),cs(this,$r);if(hi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zn!=4||be.length!=0||this.h.h||(this.s=1,Kn(16),S=!1),this.o=this.o&&S,!S)Ne(this.i,this.l,be,"[Invalid Chunked Response]"),Pr(this),kr(this);else if(0<be.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),zi(jt),jt.M=!0,Kn(11))}}else Ne(this.i,this.l,be,null),cs(this,be);zn==4&&Pr(this),this.o&&!this.J&&(zn==4?Qt(this.j,this):(this.o=!1,Vn(this)))}else gh(this.g),S==400&&0<be.indexOf("Unknown SID")?(this.s=3,Kn(12)):(this.s=0,Kn(13)),Pr(this),kr(this)}}}catch{}finally{}};function hi(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function fi(d,b){var S=d.C,B=b.indexOf(`
`,S);return B==-1?ot:(S=Number(b.substring(S,B)),isNaN(S)?St:(B+=1,B+S>b.length?ot:(b=b.slice(B,B+S),d.C=B+S,b)))}qe.prototype.cancel=function(){this.J=!0,Pr(this)};function Vn(d){d.S=Date.now()+d.I,Ha(d,d.I)}function Ha(d,b){if(d.B!=null)throw Error("WatchDog timer not null");d.B=te(p(d.ba,d),b)}function us(d){d.B&&(l.clearTimeout(d.B),d.B=null)}qe.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Le(this.i,this.A),this.L!=2&&(Un(),Kn(17)),Pr(this),this.s=2,kr(this)):Ha(this,this.S-d)};function kr(d){d.j.G==0||d.J||Qt(d.j,d)}function Pr(d){us(d);var b=d.M;b&&typeof b.ma=="function"&&b.ma(),d.M=null,Ln(d.U),d.g&&(b=d.g,d.g=null,b.abort(),b.ma())}function cs(d,b){try{var S=d.j;if(S.G!=0&&(S.g==d||en(S.h,d))){if(!d.K&&en(S.h,d)&&S.G==3){try{var B=S.Da.g.parse(b)}catch{B=null}if(Array.isArray(B)&&B.length==3){var re=B;if(re[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<d.F)Xa(S),cl(S);else break e;xu(S),Kn(18)}}else S.za=re[1],0<S.za-S.T&&37500>re[2]&&S.F&&S.v==0&&!S.C&&(S.C=te(p(S.Za,S),6e3));if(1>=Ns(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else ds(S,11)}else if((d.K||S.g==d)&&Xa(S),!C(b))for(re=S.Da.g.parse(b),b=0;b<re.length;b++){let vt=re[b];if(S.T=vt[0],vt=vt[1],S.G==2)if(vt[0]=="c"){S.K=vt[1],S.ia=vt[2];const jt=vt[3];jt!=null&&(S.la=jt,S.j.info("VER="+S.la));const zn=vt[4];zn!=null&&(S.Aa=zn,S.j.info("SVER="+S.Aa));const Bi=vt[5];Bi!=null&&typeof Bi=="number"&&0<Bi&&(B=1.5*Bi,S.L=B,S.j.info("backChannelRequestTimeoutMs_="+B)),B=S;const $r=d.g;if($r){const pl=$r.g?$r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pl){var oe=B.h;oe.g||pl.indexOf("spdy")==-1&&pl.indexOf("quic")==-1&&pl.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(di(oe,oe.h),oe.h=null))}if(B.D){const _h=$r.g?$r.g.getResponseHeader("X-HTTP-Session-Id"):null;_h&&(B.ya=_h,Gt(B.I,B.D,_h))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-d.F,S.j.info("Handshake RTT: "+S.R+"ms")),B=S;var be=d;if(B.qa=wu(B,B.J?B.ia:null,B.W),be.K){qa(B.h,be);var Ct=be,Qn=B.L;Qn&&(Ct.I=Qn),Ct.B&&(us(Ct),Vn(Ct)),B.g=be}else $d(B);0<S.i.length&&hl(S)}else vt[0]!="stop"&&vt[0]!="close"||ds(S,7);else S.G==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?ds(S,7):bu(S):vt[0]!="noop"&&S.l&&S.l.ta(vt),S.v=0)}}Un(4)}catch{}}var lt=class{constructor(d,b){this.g=d,this.map=b}};function Kt(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hs(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ns(d){return d.h?1:d.g?d.g.size:0}function en(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function di(d,b){d.g?d.g.add(b):d.h=b}function qa(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}Kt.prototype.cancel=function(){if(this.i=ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function ol(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let b=d.i;for(const S of d.g.values())b=b.concat(S.D);return b}return N(d.i)}function uh(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var b=[],S=d.length,B=0;B<S;B++)b.push(d[B]);return b}b=[],S=0;for(B in d)b[S++]=d[B];return b}function kv(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var b=[];d=d.length;for(var S=0;S<d;S++)b.push(S);return b}b=[],S=0;for(const B in d)b[S++]=B;return b}}}function ch(d,b){if(d.forEach&&typeof d.forEach=="function")d.forEach(b,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,b,void 0);else for(var S=kv(d),B=uh(d),re=B.length,oe=0;oe<re;oe++)b.call(void 0,B[oe],S&&S[oe],d)}var ll=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Md(d,b){if(d){d=d.split("&");for(var S=0;S<d.length;S++){var B=d[S].indexOf("="),re=null;if(0<=B){var oe=d[S].substring(0,B);re=d[S].substring(B+1)}else oe=d[S];b(oe,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function ia(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ia){this.h=d.h,ul(this,d.j),this.o=d.o,this.g=d.g,Ga(this,d.s),this.l=d.l;var b=d.i,S=new Ya;S.i=b.i,b.g&&(S.g=new Map(b.g),S.h=b.h),jd(this,S),this.m=d.m}else d&&(b=String(d).match(ll))?(this.h=!1,ul(this,b[1]||"",!0),this.o=sa(b[2]||""),this.g=sa(b[3]||"",!0),Ga(this,b[4]),this.l=sa(b[5]||"",!0),jd(this,b[6]||"",!0),this.m=sa(b[7]||"")):(this.h=!1,this.i=new Ya(null,this.h))}ia.prototype.toString=function(){var d=[],b=this.j;b&&d.push(Ui(b,hh,!0),":");var S=this.g;return(S||b=="file")&&(d.push("//"),(b=this.o)&&d.push(Ui(b,hh,!0),"@"),d.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&d.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&d.push("/"),d.push(Ui(S,S.charAt(0)=="/"?Pd:Pv,!0))),(S=this.i.toString())&&d.push("?",S),(S=this.m)&&d.push("#",Ui(S,Ud)),d.join("")};function Li(d){return new ia(d)}function ul(d,b,S){d.j=S?sa(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function Ga(d,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);d.s=b}else d.s=null}function jd(d,b,S){b instanceof Ya?(d.i=b,Lv(d.i,d.h)):(S||(b=Ui(b,Ld)),d.i=new Ya(b,d.h))}function Gt(d,b,S){d.i.set(b,S)}function $a(d){return Gt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function sa(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ui(d,b,S){return typeof d=="string"?(d=encodeURI(d).replace(b,kd),S&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function kd(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var hh=/[#\/\?@]/g,Pv=/[#\?:]/g,Pd=/[#\?]/g,Ld=/[#\?@]/g,Ud=/#/g;function Ya(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function Is(d){d.g||(d.g=new Map,d.h=0,d.i&&Md(d.i,function(b,S){d.add(decodeURIComponent(b.replace(/\+/g," ")),S)}))}t=Ya.prototype,t.add=function(d,b){Is(this),this.i=null,d=Wa(this,d);var S=this.g.get(d);return S||this.g.set(d,S=[]),S.push(b),this.h+=1,this};function Vd(d,b){Is(d),b=Wa(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function zd(d,b){return Is(d),b=Wa(d,b),d.g.has(b)}t.forEach=function(d,b){Is(this),this.g.forEach(function(S,B){S.forEach(function(re){d.call(b,re,B,this)},this)},this)},t.na=function(){Is(this);const d=Array.from(this.g.values()),b=Array.from(this.g.keys()),S=[];for(let B=0;B<b.length;B++){const re=d[B];for(let oe=0;oe<re.length;oe++)S.push(b[B])}return S},t.V=function(d){Is(this);let b=[];if(typeof d=="string")zd(this,d)&&(b=b.concat(this.g.get(Wa(this,d))));else{d=Array.from(this.g.values());for(let S=0;S<d.length;S++)b=b.concat(d[S])}return b},t.set=function(d,b){return Is(this),this.i=null,d=Wa(this,d),zd(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},t.get=function(d,b){return d?(d=this.V(d),0<d.length?String(d[0]):b):b};function fh(d,b,S){Vd(d,b),0<S.length&&(d.i=null,d.g.set(Wa(d,b),N(S)),d.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],b=Array.from(this.g.keys());for(var S=0;S<b.length;S++){var B=b[S];const oe=encodeURIComponent(String(B)),be=this.V(B);for(B=0;B<be.length;B++){var re=oe;be[B]!==""&&(re+="="+encodeURIComponent(String(be[B]))),d.push(re)}}return this.i=d.join("&")};function Wa(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function Lv(d,b){b&&!d.j&&(Is(d),d.i=null,d.g.forEach(function(S,B){var re=B.toLowerCase();B!=re&&(Vd(this,B),fh(this,re,S))},d)),d.j=b}function Uv(d,b){const S=new se;if(l.Image){const B=new Image;B.onload=y(Vi,S,"TestLoadImage: loaded",!0,b,B),B.onerror=y(Vi,S,"TestLoadImage: error",!1,b,B),B.onabort=y(Vi,S,"TestLoadImage: abort",!1,b,B),B.ontimeout=y(Vi,S,"TestLoadImage: timeout",!1,b,B),l.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=d}else b(!1)}function Vv(d,b){const S=new se,B=new AbortController,re=setTimeout(()=>{B.abort(),Vi(S,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:B.signal}).then(oe=>{clearTimeout(re),oe.ok?Vi(S,"TestPingServer: ok",!0,b):Vi(S,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(re),Vi(S,"TestPingServer: error",!1,b)})}function Vi(d,b,S,B,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),B(S)}catch{}}function zv(){this.g=new ra}function Bv(d,b,S){const B=S||"";try{ch(d,function(re,oe){let be=re;f(re)&&(be=ir(re)),b.push(B+oe+"="+encodeURIComponent(be))})}catch(re){throw b.push(B+"type="+encodeURIComponent("_badmap")),re}}function vu(d){this.l=d.Ub||null,this.j=d.eb||!1}T(vu,Mi),vu.prototype.g=function(){return new yu(this.l,this.j)},vu.prototype.i=function(d){return function(){return d}}({});function yu(d,b){Ot.call(this),this.D=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(yu,Ot),t=yu.prototype,t.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=b,this.readyState=1,Tt(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(b.body=d),(this.D||l).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rt(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Tt(this)),this.g&&(this.readyState=3,Tt(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bd(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bd(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?Rt(this):Tt(this),this.readyState==3&&Bd(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Rt(this))},t.Qa=function(d){this.g&&(this.response=d,Rt(this))},t.ga=function(){this.g&&Rt(this)};function Rt(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Tt(d)}t.setRequestHeader=function(d,b){this.u.append(d,b)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],b=this.h.entries();for(var S=b.next();!S.done;)S=S.value,d.push(S[0]+": "+S[1]),S=b.next();return d.join(`\r
`)};function Tt(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(yu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Fd(d){let b="";return D(d,function(S,B){b+=B,b+=":",b+=S,b+=`\r
`}),b}function dh(d,b,S){e:{for(B in S){var B=!1;break e}B=!0}B||(S=Fd(S),typeof d=="string"?S!=null&&encodeURIComponent(String(S)):Gt(d,b,S))}function hn(d){Ot.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(hn,Ot);var Fv=/^https?$/i,Hv=["POST","PUT"];t=hn.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,b,S,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ie.g(),this.v=this.o?ji(this.o):ji(Ie),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(oe){Hd(this,oe);return}if(d=S||"",S=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var re in B)S.set(re,B[re]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const oe of B.keys())S.set(oe,B.get(oe));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(S.keys()).find(oe=>oe.toLowerCase()=="content-type"),re=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Hv,b,void 0))||B||re||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,be]of S)this.g.setRequestHeader(oe,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_u(this),this.u=!0,this.g.send(d),this.u=!1}catch(oe){Hd(this,oe)}};function Hd(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.m=5,mh(d),Tn(d)}function mh(d){d.A||(d.A=!0,Mt(d,"complete"),Mt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Mt(this,"complete"),Mt(this,"abort"),Tn(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tn(this,!0)),hn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?qd(this):this.bb())},t.bb=function(){qd(this)};function qd(d){if(d.h&&typeof a<"u"&&(!d.v[1]||pr(d)!=4||d.Z()!=2)){if(d.u&&pr(d)==4)un(d.Ea,0,d);else if(Mt(d,"readystatechange"),pr(d)==4){d.h=!1;try{const be=d.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var S;if(!(S=b)){var B;if(B=be===0){var re=String(d.D).match(ll)[1]||null;!re&&l.self&&l.self.location&&(re=l.self.location.protocol.slice(0,-1)),B=!Fv.test(re?re.toLowerCase():"")}S=B}if(S)Mt(d,"complete"),Mt(d,"success");else{d.m=6;try{var oe=2<pr(d)?d.g.statusText:""}catch{oe=""}d.l=oe+" ["+d.Z()+"]",mh(d)}}finally{Tn(d)}}}}function Tn(d,b){if(d.g){_u(d);const S=d.g,B=d.v[0]?()=>{}:null;d.g=null,d.v=null,b||Mt(d,"ready");try{S.onreadystatechange=B}catch{}}}function _u(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function pr(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<pr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),Oi(b)}};function ph(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function gh(d){const b={};d=(d.g&&2<=pr(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<d.length;B++){if(C(d[B]))continue;var S=k(d[B]);const re=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const oe=b[re]||[];b[re]=oe,oe.push(S)}E(b,function(B){return B.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ar(d,b,S){return S&&S.internalChannelParams&&S.internalChannelParams[d]||b}function vh(d){this.Aa=0,this.i=[],this.j=new se,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ar("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ar("baseRetryDelayMs",5e3,d),this.cb=ar("retryDelaySeedMs",1e4,d),this.Wa=ar("forwardChannelMaxRetries",2,d),this.wa=ar("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Kt(d&&d.concurrentRequestLimit),this.Da=new zv,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vh.prototype,t.la=8,t.G=1,t.connect=function(d,b,S,B){Kn(0),this.W=d,this.H=b||{},S&&B!==void 0&&(this.H.OSID=S,this.H.OAID=B),this.F=this.X,this.I=wu(this,null,this.W),hl(this)};function bu(d){if(yh(d),d.G==3){var b=d.U++,S=Li(d.I);if(Gt(S,"SID",d.K),Gt(S,"RID",b),Gt(S,"TYPE","terminate"),fl(d,S),b=new qe(d,d.j,b),b.L=2,b.v=$a(Li(S)),S=!1,l.navigator&&l.navigator.sendBeacon)try{S=l.navigator.sendBeacon(b.v.toString(),"")}catch{}!S&&l.Image&&(new Image().src=b.v,S=!0),S||(b.g=Wd(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Vn(b)}Yd(d)}function cl(d){d.g&&(zi(d),d.g.cancel(),d.g=null)}function yh(d){cl(d),d.u&&(l.clearTimeout(d.u),d.u=null),Xa(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function hl(d){if(!hs(d.h)&&!d.s){d.s=!0;var b=d.Ga;V||ie(),J||(V(),J=!0),ee.add(b,d),d.B=0}}function Gd(d,b){return Ns(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=b.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=te(p(d.Ga,d,b),fs(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const re=new qe(this,this.j,d);let oe=this.o;if(this.S&&(oe?(oe=_(oe),R(oe,this.S)):oe=this.S),this.m!==null||this.O||(re.H=oe,oe=null),this.P)e:{for(var b=0,S=0;S<this.i.length;S++){t:{var B=this.i[S];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(b+=B,4096<b){b=S;break e}if(b===4096||S===this.i.length-1){b=S+1;break e}}b=1e3}else b=1e3;b=Lr(this,re,b),S=Li(this.I),Gt(S,"RID",d),Gt(S,"CVER",22),this.D&&Gt(S,"X-HTTP-Session-Id",this.D),fl(this,S),oe&&(this.O?b="headers="+encodeURIComponent(String(Fd(oe)))+"&"+b:this.m&&dh(S,this.m,oe)),di(this.h,re),this.Ua&&Gt(S,"TYPE","init"),this.P?(Gt(S,"$req",b),Gt(S,"SID","null"),re.T=!0,qt(re,S,null)):qt(re,S,b),this.G=2}}else this.G==3&&(d?Ar(this,d):this.i.length==0||hs(this.h)||Ar(this))};function Ar(d,b){var S;b?S=b.l:S=d.U++;const B=Li(d.I);Gt(B,"SID",d.K),Gt(B,"RID",S),Gt(B,"AID",d.T),fl(d,B),d.m&&d.o&&dh(B,d.m,d.o),S=new qe(d,d.j,S,d.B+1),d.m===null&&(S.H=d.o),b&&(d.i=b.D.concat(d.i)),b=Lr(d,S,1e3),S.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),di(d.h,S),qt(S,B,b)}function fl(d,b){d.H&&D(d.H,function(S,B){Gt(b,B,S)}),d.l&&ch({},function(S,B){Gt(b,B,S)})}function Lr(d,b,S){S=Math.min(d.i.length,S);var B=d.l?p(d.l.Na,d.l,d):null;e:{var re=d.i;let oe=-1;for(;;){const be=["count="+S];oe==-1?0<S?(oe=re[0].g,be.push("ofs="+oe)):oe=0:be.push("ofs="+oe);let Ct=!0;for(let Qn=0;Qn<S;Qn++){let vt=re[Qn].g;const jt=re[Qn].map;if(vt-=oe,0>vt)oe=Math.max(0,re[Qn].g-100),Ct=!1;else try{Bv(jt,be,"req"+vt+"_")}catch{B&&B(jt)}}if(Ct){B=be.join("&");break e}}}return d=d.i.splice(0,S),b.D=d,B}function $d(d){if(!d.g&&!d.u){d.Y=1;var b=d.Fa;V||ie(),J||(V(),J=!0),ee.add(b,d),d.v=0}}function xu(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=te(p(d.Fa,d),fs(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,dl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=te(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kn(10),cl(this),dl(this))};function zi(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function dl(d){d.g=new qe(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var b=Li(d.qa);Gt(b,"RID","rpc"),Gt(b,"SID",d.K),Gt(b,"AID",d.T),Gt(b,"CI",d.F?"0":"1"),!d.F&&d.ja&&Gt(b,"TO",d.ja),Gt(b,"TYPE","xmlhttp"),fl(d,b),d.m&&d.o&&dh(b,d.m,d.o),d.L&&(d.g.I=d.L);var S=d.g;d=d.ia,S.L=1,S.v=$a(Li(b)),S.m=null,S.P=!0,ls(S,d)}t.Za=function(){this.C!=null&&(this.C=null,cl(this),xu(this),Kn(19))};function Xa(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function Qt(d,b){var S=null;if(d.g==b){Xa(d),zi(d),d.g=null;var B=2}else if(en(d.h,b))S=b.D,qa(d.h,b),B=1;else return;if(d.G!=0){if(b.o)if(B==1){S=b.m?b.m.length:0,b=Date.now()-b.F;var re=d.B;B=Pi(),Mt(B,new $(B,S)),hl(d)}else $d(d);else if(re=b.s,re==3||re==0&&0<b.X||!(B==1&&Gd(d,b)||B==2&&xu(d)))switch(S&&0<S.length&&(b=d.h,b.i=b.i.concat(S)),re){case 1:ds(d,5);break;case 4:ds(d,10);break;case 3:ds(d,6);break;default:ds(d,2)}}}function fs(d,b){let S=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(S*=2),S*b}function ds(d,b){if(d.j.info("Error code "+b),b==2){var S=p(d.fb,d),B=d.Xa;const re=!B;B=new ia(B||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ul(B,"https"),$a(B),re?Uv(B.toString(),S):Vv(B.toString(),S)}else Kn(2);d.G=0,d.l&&d.l.sa(b),Yd(d),yh(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Kn(2)):(this.j.info("Failed to ping google.com"),Kn(1))};function Yd(d){if(d.G=0,d.ka=[],d.l){const b=ol(d.h);(b.length!=0||d.i.length!=0)&&(j(d.ka,b),j(d.ka,d.i),d.h.i.length=0,N(d.i),d.i.length=0),d.l.ra()}}function wu(d,b,S){var B=S instanceof ia?Li(S):new ia(S);if(B.g!="")b&&(B.g=b+"."+B.g),Ga(B,B.s);else{var re=l.location;B=re.protocol,b=b?b+"."+re.hostname:re.hostname,re=+re.port;var oe=new ia(null);B&&ul(oe,B),b&&(oe.g=b),re&&Ga(oe,re),S&&(oe.l=S),B=oe}return S=d.D,b=d.ya,S&&b&&Gt(B,S,b),Gt(B,"VER",d.la),fl(d,B),B}function Wd(d,b,S){if(b&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Ca&&!d.pa?new hn(new vu({eb:S})):new hn(d.pa),b.Ha(d.J),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xd(){}t=Xd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Eu(){}Eu.prototype.g=function(d,b){return new Sr(d,b)};function Sr(d,b){Ot.call(this),this.g=new vh(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(d?d["X-WebChannel-Client-Profile"]=b.va:d={"X-WebChannel-Client-Profile":b.va}),this.g.S=d,(d=b&&b.Sb)&&!C(d)&&(this.g.m=d),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!C(b)&&(this.g.D=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new Ka(this)}T(Sr,Ot),Sr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Sr.prototype.close=function(){bu(this.g)},Sr.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var S={};S.__data__=d,d=S}else this.u&&(S={},S.__data__=ir(d),d=S);b.i.push(new lt(b.Ya++,d)),b.G==3&&hl(b)},Sr.prototype.N=function(){this.g.l=null,delete this.j,bu(this.g),delete this.g,Sr.aa.N.call(this)};function ml(d){Wn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){e:{for(const S in b){d=S;break e}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}T(ml,Wn);function aa(){Tr.call(this),this.status=1}T(aa,Tr);function Ka(d){this.g=d}T(Ka,Xd),Ka.prototype.ua=function(){Mt(this.g,"a")},Ka.prototype.ta=function(d){Mt(this.g,new ml(d))},Ka.prototype.sa=function(d){Mt(this.g,new aa)},Ka.prototype.ra=function(){Mt(this.g,"b")},Eu.prototype.createWebChannel=Eu.prototype.g,Sr.prototype.send=Sr.prototype.o,Sr.prototype.open=Sr.prototype.m,Sr.prototype.close=Sr.prototype.close,e4=function(){return new Eu},JI=function(){return Pi()},ZI=Xn,Z_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,Ep=Se,Te.COMPLETE="complete",QI=Te,ci.EventType=Gr,Gr.OPEN="a",Gr.CLOSE="b",Gr.ERROR="c",Gr.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,rf=ci,hn.prototype.listenOnce=hn.prototype.L,hn.prototype.getLastError=hn.prototype.Ka,hn.prototype.getLastErrorCode=hn.prototype.Ba,hn.prototype.getStatus=hn.prototype.Z,hn.prototype.getResponseJson=hn.prototype.Oa,hn.prototype.getResponseText=hn.prototype.oa,hn.prototype.send=hn.prototype.ea,hn.prototype.setWithCredentials=hn.prototype.Ha,KI=hn}).apply(typeof Km<"u"?Km:typeof self<"u"?self:typeof window<"u"?window:{});const pA="@firebase/firestore",gA="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=new z1("@firebase/firestore");function $u(){return tu.logLevel}function Ae(t,...e){if(tu.logLevel<=mt.DEBUG){const n=e.map(J1);tu.debug(`Firestore (${rh}): ${t}`,...n)}}function Ua(t,...e){if(tu.logLevel<=mt.ERROR){const n=e.map(J1);tu.error(`Firestore (${rh}): ${t}`,...n)}}function $o(t,...e){if(tu.logLevel<=mt.WARN){const n=e.map(J1);tu.warn(`Firestore (${rh}): ${t}`,...n)}}function J1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,t4(t,r,n)}function t4(t,e,n){let r=`FIRESTORE (${rh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ua(r),new Error(r)}function Pt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||t4(e,i,r)}function Xe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Cs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ir.UNAUTHENTICATED))}shutdown(){}}class vB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class yB{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pt(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Ia;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ia,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ia)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pt(typeof r.accessToken=="string",31837,{l:r}),new n4(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pt(e===null||typeof e=="string",2055,{h:e}),new Ir(e)}}class _B{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bB{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new _B(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xB{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ei(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Pt(this.o===void 0,3512);const r=s=>{s.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Ae("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new vA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new vA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=wB(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function nt(t,e){return t<e?-1:t>e?1:0}function J_(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return nt(r,i);{const s=r4(),a=EB(s.encode(yA(t,n)),s.encode(yA(e,n)));return a!==0?a:nt(r,i)}}n+=r>65535?2:1}return nt(t.length,e.length)}function yA(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function EB(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return nt(t[n],e[n]);return nt(t.length,e.length)}function Fc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="__name__";class Ps{constructor(e,n,r){n===void 0?n=0:n>e.length&&Be(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Be(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ps.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ps?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Ps.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return nt(e.length,n.length)}static compareSegments(e,n){const r=Ps.isNumericId(e),i=Ps.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ps.extractNumericId(e).compare(Ps.extractNumericId(n)):J_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zo.fromString(e.substring(4,e.length-2))}}class tn extends Ps{construct(e,n,r){return new tn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new tn(n)}static emptyPath(){return new tn([])}}const TB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xr extends Ps{construct(e,n,r){return new xr(e,n,r)}static isValidIdentifier(e){return TB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_A}static keyField(){return new xr([_A])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ee(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Ee(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ee(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new Ee(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xr(n)}static emptyPath(){return new xr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(tn.fromString(e))}static fromName(e){return new Me(tn.fromString(e).popFirst(5))}static empty(){return new Me(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new tn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t,e,n){if(!n)throw new Ee(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AB(t,e,n,r){if(e===!0&&r===!0)throw new Ee(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bA(t){if(!Me.isDocumentKey(t))throw new Ee(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xA(t){if(Me.isDocumentKey(t))throw new Ee(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function s4(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function dv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Be(12329,{type:typeof t})}function ss(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dv(t);throw new Ee(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ad(t,e){if(!s4(t))throw new Ee(ue.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Ee(ue.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=-62135596800,EA=1e6;class on{static now(){return on.fromMillis(Date.now())}static fromDate(e){return on.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*EA);return new on(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<wA)throw new Ee(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/EA}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:on._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ad(e,on._jsonSchema))return new on(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}on._jsonSchemaVersion="firestore/timestamp/1.0",on._jsonSchema={type:$n("string",on._jsonSchemaVersion),seconds:$n("number"),nanoseconds:$n("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new on(0,0))}static max(){return new Ge(new on(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf=-1;function SB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ge.fromTimestamp(r===1e9?new on(n+1,0):new on(n,r));return new Yo(i,Me.empty(),e)}function RB(t){return new Yo(t.readTime,t.key,Yf)}class Yo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yo(Ge.min(),Me.empty(),Yf)}static max(){return new Yo(Ge.max(),Me.empty(),Yf)}}function CB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Me.comparator(t.documentKey,e.documentKey),n!==0?n:nt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ih(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==NB)throw t;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):de.reject(n)}static resolve(e){return new de((n,r)=>{n(e)})}static reject(e){return new de((n,r)=>{r(e)})}static waitFor(e){return new de((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},c=>r(c))}),a=!0,s===i&&n()})}static or(e){let n=de.resolve(!1);for(const r of e)n=n.next(i=>i?de.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new de((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let c=0;c<s;c++){const f=c;n(e[f]).next(h=>{a[f]=h,++l,l===s&&r(a)},h=>i(h))}})}static doWhile(e,n){return new de((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function DB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}mv.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=-1;function pv(t){return t==null}function yg(t){return t===0&&1/t==-1/0}function OB(t){return typeof t=="number"&&Number.isInteger(t)&&!yg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4="";function MB(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=TA(e)),e=jB(t.get(n),e);return TA(e)}function jB(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case a4:n+="";break;default:n+=s}}return n}function TA(t){return t+a4+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function il(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function o4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n){this.comparator=e,this.root=n||_r.EMPTY}insert(e,n){return new xn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_r.BLACK,null,null))}remove(e){return new xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_r.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qm(this.root,e,this.comparator,!0)}}class Qm{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _r{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??_r.RED,this.left=i??_r.EMPTY,this.right=s??_r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new _r(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return _r.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}_r.EMPTY=null,_r.RED=!0,_r.BLACK=!1;_r.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new _r(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.comparator=e,this.data=new xn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new SA(this.data.getIterator())}getIteratorFrom(e){return new SA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof nr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new nr(this.comparator);return n.data=e,n}}class SA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.fields=e,e.sort(xr.comparator)}static empty(){return new Ti([])}unionWith(e){let n=new nr(xr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ti(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new l4("Invalid base64 string: "+s):s}}(e);return new Er(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Er(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Er.EMPTY_BYTE_STRING=new Er("");const kB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wo(t){if(Pt(!!t,39018),typeof t=="string"){let e=0;const n=kB.exec(t);if(Pt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kn(t.seconds),nanos:kn(t.nanos)}}function kn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xo(t){return typeof t=="string"?Er.fromBase64String(t):Er.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4="server_timestamp",c4="__type__",h4="__previous_value__",f4="__local_write_time__";function nx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[c4])===null||n===void 0?void 0:n.stringValue)===u4}function gv(t){const e=t.mapValue.fields[h4];return nx(e)?gv(e):e}function Wf(t){const e=Wo(t.mapValue.fields[f4].timestampValue);return new on(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e,n,r,i,s,a,l,c,f,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=h}}const eb="(default)";class Xf{constructor(e,n){this.projectId=e,this.database=n||eb}static empty(){return new Xf("","")}get isDefaultDatabase(){return this.database===eb}isEqual(e){return e instanceof Xf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4="__type__",LB="__max__",Zm={mapValue:{}},m4="__vector__",_g="value";function Ko(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nx(t)?4:VB(t)?9007199254740991:UB(t)?10:11:Be(28295,{value:t})}function Qs(t,e){if(t===e)return!0;const n=Ko(t);if(n!==Ko(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wf(t).isEqual(Wf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Wo(i.timestampValue),l=Wo(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Xo(i.bytesValue).isEqual(Xo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return kn(i.geoPointValue.latitude)===kn(s.geoPointValue.latitude)&&kn(i.geoPointValue.longitude)===kn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return kn(i.integerValue)===kn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=kn(i.doubleValue),l=kn(s.doubleValue);return a===l?yg(a)===yg(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Fc(t.arrayValue.values||[],e.arrayValue.values||[],Qs);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(AA(a)!==AA(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Qs(a[c],l[c])))return!1;return!0}(t,e);default:return Be(52216,{left:t})}}function Kf(t,e){return(t.values||[]).find(n=>Qs(n,e))!==void 0}function Hc(t,e){if(t===e)return 0;const n=Ko(t),r=Ko(e);if(n!==r)return nt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return nt(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=kn(s.integerValue||s.doubleValue),c=kn(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return RA(t.timestampValue,e.timestampValue);case 4:return RA(Wf(t),Wf(e));case 5:return J_(t.stringValue,e.stringValue);case 6:return function(s,a){const l=Xo(s),c=Xo(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),c=a.split("/");for(let f=0;f<l.length&&f<c.length;f++){const h=nt(l[f],c[f]);if(h!==0)return h}return nt(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=nt(kn(s.latitude),kn(a.latitude));return l!==0?l:nt(kn(s.longitude),kn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return CA(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,c,f,h;const m=s.fields||{},p=a.fields||{},y=(l=m[_g])===null||l===void 0?void 0:l.arrayValue,T=(c=p[_g])===null||c===void 0?void 0:c.arrayValue,N=nt(((f=y==null?void 0:y.values)===null||f===void 0?void 0:f.length)||0,((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:CA(y,T)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Zm.mapValue&&a===Zm.mapValue)return 0;if(s===Zm.mapValue)return 1;if(a===Zm.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),f=a.fields||{},h=Object.keys(f);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){const p=J_(c[m],h[m]);if(p!==0)return p;const y=Hc(l[c[m]],f[h[m]]);if(y!==0)return y}return nt(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Be(23264,{le:n})}}function RA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return nt(t,e);const n=Wo(t),r=Wo(e),i=nt(n.seconds,r.seconds);return i!==0?i:nt(n.nanos,r.nanos)}function CA(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Hc(n[i],r[i]);if(s)return s}return nt(n.length,r.length)}function qc(t){return tb(t)}function tb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Me.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=tb(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${tb(n.fields[a])}`;return i+"}"}(t.mapValue):Be(61005,{value:t})}function Tp(t){switch(Ko(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gv(t);return e?16+Tp(e):16;case 5:return 2*t.stringValue.length;case 6:return Xo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Tp(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return il(r.fields,(s,a)=>{i+=s.length+Tp(a)}),i}(t.mapValue);default:throw Be(13486,{value:t})}}function NA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function nb(t){return!!t&&"integerValue"in t}function rx(t){return!!t&&"arrayValue"in t}function IA(t){return!!t&&"nullValue"in t}function DA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ap(t){return!!t&&"mapValue"in t}function UB(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[d4])===null||n===void 0?void 0:n.stringValue)===m4}function Af(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return il(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Af(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Af(t.arrayValue.values[n]);return e}return Object.assign({},t)}function VB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===LB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.value=e}static empty(){return new ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ap(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Af(n)}setAll(e){let n=xr.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=Af(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ap(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ap(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){il(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ai(Af(this.value))}}function p4(t){const e=[];return il(t.fields,(n,r)=>{const i=new xr([n]);if(Ap(r)){const s=p4(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Ti(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Dr(e,0,Ge.min(),Ge.min(),Ge.min(),ai.empty(),0)}static newFoundDocument(e,n,r,i){return new Dr(e,1,n,Ge.min(),r,i,0)}static newNoDocument(e,n){return new Dr(e,2,n,Ge.min(),Ge.min(),ai.empty(),0)}static newUnknownDocument(e,n){return new Dr(e,3,n,Ge.min(),Ge.min(),ai.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n){this.position=e,this.inclusive=n}}function OA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=Me.comparator(Me.fromName(a.referenceValue),n.key):r=Hc(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function MA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n="asc"){this.field=e,this.dir=n}}function zB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{}class qn extends g4{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FB(e,n,r):n==="array-contains"?new GB(e,r):n==="in"?new $B(e,r):n==="not-in"?new YB(e,r):n==="array-contains-any"?new WB(e,r):new qn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new HB(e,r):new qB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Hc(n,this.value)):n!==null&&Ko(this.value)===Ko(n)&&this.matchesComparison(Hc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ss extends g4{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ss(e,n)}matches(e){return v4(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function v4(t){return t.op==="and"}function y4(t){return BB(t)&&v4(t)}function BB(t){for(const e of t.filters)if(e instanceof Ss)return!1;return!0}function rb(t){if(t instanceof qn)return t.field.canonicalString()+t.op.toString()+qc(t.value);if(y4(t))return t.filters.map(e=>rb(e)).join(",");{const e=t.filters.map(n=>rb(n)).join(",");return`${t.op}(${e})`}}function _4(t,e){return t instanceof qn?function(r,i){return i instanceof qn&&r.op===i.op&&r.field.isEqual(i.field)&&Qs(r.value,i.value)}(t,e):t instanceof Ss?function(r,i){return i instanceof Ss&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&_4(a,i.filters[l]),!0):!1}(t,e):void Be(19439)}function b4(t){return t instanceof qn?function(n){return`${n.field.canonicalString()} ${n.op} ${qc(n.value)}`}(t):t instanceof Ss?function(n){return n.op.toString()+" {"+n.getFilters().map(b4).join(" ,")+"}"}(t):"Filter"}class FB extends qn{constructor(e,n,r){super(e,n,r),this.key=Me.fromName(r.referenceValue)}matches(e){const n=Me.comparator(e.key,this.key);return this.matchesComparison(n)}}class HB extends qn{constructor(e,n){super(e,"in",n),this.keys=x4("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class qB extends qn{constructor(e,n){super(e,"not-in",n),this.keys=x4("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function x4(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Me.fromName(r.referenceValue))}class GB extends qn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rx(n)&&Kf(n.arrayValue,this.value)}}class $B extends qn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Kf(this.value.arrayValue,n)}}class YB extends qn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Kf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Kf(this.value.arrayValue,n)}}class WB extends qn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Kf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.Pe=null}}function jA(t,e=null,n=[],r=[],i=null,s=null,a=null){return new XB(t,e,n,r,i,s,a)}function ix(t){const e=Xe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),pv(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qc(r)).join(",")),e.Pe=n}return e.Pe}function sx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_4(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!MA(t.startAt,e.startAt)&&MA(t.endAt,e.endAt)}function ib(t){return Me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function KB(t,e,n,r,i,s,a,l){return new Sd(t,e,n,r,i,s,a,l)}function vv(t){return new Sd(t)}function kA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function w4(t){return t.collectionGroup!==null}function Sf(t){const e=Xe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new nr(xr.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new xg(s,r))}),n.has(xr.keyField().canonicalString())||e.Te.push(new xg(xr.keyField(),r))}return e.Te}function qs(t){const e=Xe(t);return e.Ie||(e.Ie=QB(e,Sf(t))),e.Ie}function QB(t,e){if(t.limitType==="F")return jA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new xg(i.field,s)});const n=t.endAt?new bg(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bg(t.startAt.position,t.startAt.inclusive):null;return jA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sb(t,e){const n=t.filters.concat([e]);return new Sd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ab(t,e,n){return new Sd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yv(t,e){return sx(qs(t),qs(e))&&t.limitType===e.limitType}function E4(t){return`${ix(qs(t))}|lt:${t.limitType}`}function Yu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>b4(i)).join(", ")}]`),pv(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>qc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>qc(i)).join(",")),`Target(${r})`}(qs(t))}; limitType=${t.limitType})`}function _v(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Me.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Sf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,c){const f=OA(a,l,c);return a.inclusive?f<=0:f<0}(r.startAt,Sf(r),i)||r.endAt&&!function(a,l,c){const f=OA(a,l,c);return a.inclusive?f>=0:f>0}(r.endAt,Sf(r),i))}(t,e)}function ZB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function T4(t){return(e,n)=>{let r=!1;for(const i of Sf(t)){const s=JB(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function JB(t,e,n){const r=t.field.isKeyField()?Me.comparator(e.key,n.key):function(s,a,l){const c=a.data.field(s),f=l.data.field(s);return c!==null&&f!==null?Hc(c,f):Be(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Be(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){il(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return o4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF=new xn(Me.comparator);function Va(){return eF}const A4=new xn(Me.comparator);function sf(...t){let e=A4;for(const n of t)e=e.insert(n.key,n);return e}function S4(t){let e=A4;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Pl(){return Rf()}function R4(){return Rf()}function Rf(){return new fu(t=>t.toString(),(t,e)=>t.isEqual(e))}const tF=new xn(Me.comparator),nF=new nr(Me.comparator);function pt(...t){let e=nF;for(const n of t)e=e.add(n);return e}const rF=new nr(nt);function iF(){return rF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yg(e)?"-0":e}}function C4(t){return{integerValue:""+t}}function sF(t,e){return OB(e)?C4(e):ax(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this._=void 0}}function aF(t,e,n){return t instanceof wg?function(i,s){const a={fields:{[c4]:{stringValue:u4},[f4]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&nx(s)&&(s=gv(s)),s&&(a.fields[h4]=s),{mapValue:a}}(n,e):t instanceof Qf?I4(t,e):t instanceof Zf?D4(t,e):function(i,s){const a=N4(i,s),l=PA(a)+PA(i.Ee);return nb(a)&&nb(i.Ee)?C4(l):ax(i.serializer,l)}(t,e)}function oF(t,e,n){return t instanceof Qf?I4(t,e):t instanceof Zf?D4(t,e):n}function N4(t,e){return t instanceof Eg?function(r){return nb(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class wg extends bv{}class Qf extends bv{constructor(e){super(),this.elements=e}}function I4(t,e){const n=O4(e);for(const r of t.elements)n.some(i=>Qs(i,r))||n.push(r);return{arrayValue:{values:n}}}class Zf extends bv{constructor(e){super(),this.elements=e}}function D4(t,e){let n=O4(e);for(const r of t.elements)n=n.filter(i=>!Qs(i,r));return{arrayValue:{values:n}}}class Eg extends bv{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function PA(t){return kn(t.integerValue||t.doubleValue)}function O4(t){return rx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function lF(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Qf&&i instanceof Qf||r instanceof Zf&&i instanceof Zf?Fc(r.elements,i.elements,Qs):r instanceof Eg&&i instanceof Eg?Qs(r.Ee,i.Ee):r instanceof wg&&i instanceof wg}(t.transform,e.transform)}class uF{constructor(e,n){this.version=e,this.transformResults=n}}class Ii{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ii}static exists(e){return new Ii(void 0,e)}static updateTime(e){return new Ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class xv{}function M4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wv(t.key,Ii.none()):new Rd(t.key,t.data,Ii.none());{const n=t.data,r=ai.empty();let i=new nr(xr.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new sl(t.key,r,new Ti(i.toArray()),Ii.none())}}function cF(t,e,n){t instanceof Rd?function(i,s,a){const l=i.value.clone(),c=UA(i.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof sl?function(i,s,a){if(!Sp(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=UA(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(j4(i)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Cf(t,e,n,r){return t instanceof Rd?function(s,a,l,c){if(!Sp(s.precondition,a))return l;const f=s.value.clone(),h=VA(s.fieldTransforms,c,a);return f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof sl?function(s,a,l,c){if(!Sp(s.precondition,a))return l;const f=VA(s.fieldTransforms,c,a),h=a.data;return h.setAll(j4(s)),h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,a,l){return Sp(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function hF(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=N4(r.transform,i||null);s!=null&&(n===null&&(n=ai.empty()),n.set(r.field,s))}return n||null}function LA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Fc(r,i,(s,a)=>lF(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rd extends xv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class sl extends xv{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function j4(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function UA(t,e,n){const r=new Map;Pt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,oF(a,l,n[i]))}return r}function VA(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,aF(s,a,e))}return r}class wv extends xv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fF extends xv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&cF(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Cf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Cf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=R4();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const c=M4(a,l);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(Ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pt())}isEqual(e){return this.batchId===e.batchId&&Fc(this.mutations,e.mutations,(n,r)=>LA(n,r))&&Fc(this.baseMutations,e.baseMutations,(n,r)=>LA(n,r))}}class ox{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Pt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return tF}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new ox(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn,xt;function gF(t){switch(t){case ue.OK:return Be(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Be(15467,{code:t})}}function k4(t){if(t===void 0)return Ua("GRPC error has no .code"),ue.UNKNOWN;switch(t){case Bn.OK:return ue.OK;case Bn.CANCELLED:return ue.CANCELLED;case Bn.UNKNOWN:return ue.UNKNOWN;case Bn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Bn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Bn.INTERNAL:return ue.INTERNAL;case Bn.UNAVAILABLE:return ue.UNAVAILABLE;case Bn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Bn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Bn.NOT_FOUND:return ue.NOT_FOUND;case Bn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Bn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Bn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Bn.ABORTED:return ue.ABORTED;case Bn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Bn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Bn.DATA_LOSS:return ue.DATA_LOSS;default:return Be(39323,{code:t})}}(xt=Bn||(Bn={}))[xt.OK=0]="OK",xt[xt.CANCELLED=1]="CANCELLED",xt[xt.UNKNOWN=2]="UNKNOWN",xt[xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xt[xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xt[xt.NOT_FOUND=5]="NOT_FOUND",xt[xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",xt[xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",xt[xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",xt[xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xt[xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xt[xt.ABORTED=10]="ABORTED",xt[xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",xt[xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",xt[xt.INTERNAL=13]="INTERNAL",xt[xt.UNAVAILABLE=14]="UNAVAILABLE",xt[xt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=new zo([4294967295,4294967295],0);function zA(t){const e=r4().encode(t),n=new XI;return n.update(e),new Uint8Array(n.digest())}function BA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new zo([n,r],0),new zo([i,s],0)]}class lx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new af(`Invalid padding: ${n}`);if(r<0)throw new af(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new af(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new af(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=zo.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(zo.fromNumber(r)));return i.compare(vF)===1&&(i=new zo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=zA(e),[r,i]=BA(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(r,i,s);if(!this.ye(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new lx(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.fe===0)return;const n=zA(e),[r,i]=BA(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(r,i,s);this.we(a)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class af extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Cd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ev(Ge.min(),i,new xn(nt),Va(),pt())}}class Cd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Cd(r,n,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class P4{constructor(e,n){this.targetId=e,this.De=n}}class L4{constructor(e,n,r=Er.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class FA{constructor(){this.ve=0,this.Ce=HA(),this.Fe=Er.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=pt(),n=pt(),r=pt();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Be(38017,{changeType:s})}}),new Cd(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=HA()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Pt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class yF{constructor(e){this.We=e,this.Ge=new Map,this.ze=Va(),this.je=Jm(),this.Je=Jm(),this.He=new xn(nt)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Be(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const s=i.target;if(ib(s))if(r===0){const a=new Me(s.path);this.Xe(n,a,Dr.newNoDocument(a,Ge.min()))}else Pt(r===1,20013,{expectedCount:r});else{const a=this.ot(n);if(a!==r){const l=this._t(e),c=l?this.ut(l,e,a):1;if(c!==0){this.rt(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=Xo(r).toUint8Array()}catch(c){if(c instanceof l4)return $o("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new lx(a,i,s)}catch(c){return $o(c instanceof af?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Xe(n,s,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((s,a)=>{const l=this.st(a);if(l){if(s.current&&ib(l.target)){const c=new Me(l.target.path);this.Tt(c).has(a)||this.It(a,c)||this.Xe(a,c,Dr.newNoDocument(c,e))}s.Ne&&(n.set(a,s.Le()),s.ke())}});let r=pt();this.Je.forEach((s,a)=>{let l=!0;a.forEachWhile(c=>{const f=this.st(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ze.forEach((s,a)=>a.setReadTime(e));const i=new Ev(e,n,this.He,this.ze,r);return this.ze=Va(),this.je=Jm(),this.Je=Jm(),this.He=new xn(nt),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new FA,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new nr(nt),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new nr(nt),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Ae("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new FA),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Jm(){return new xn(Me.comparator)}function HA(){return new xn(Me.comparator)}const _F={asc:"ASCENDING",desc:"DESCENDING"},bF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xF={and:"AND",or:"OR"};class wF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ob(t,e){return t.useProto3Json||pv(e)?e:{value:e}}function Tg(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function U4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function EF(t,e){return Tg(t,e.toTimestamp())}function Gs(t){return Pt(!!t,49232),Ge.fromTimestamp(function(n){const r=Wo(n);return new on(r.seconds,r.nanos)}(t))}function ux(t,e){return lb(t,e).canonicalString()}function lb(t,e){const n=function(i){return new tn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function V4(t){const e=tn.fromString(t);return Pt(q4(e),10190,{key:e.toString()}),e}function ub(t,e){return ux(t.databaseId,e.path)}function Iy(t,e){const n=V4(e);if(n.get(1)!==t.databaseId.projectId)throw new Ee(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ee(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Me(B4(n))}function z4(t,e){return ux(t.databaseId,e)}function TF(t){const e=V4(t);return e.length===4?tn.emptyPath():B4(e)}function cb(t){return new tn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function B4(t){return Pt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function qA(t,e,n){return{name:ub(t,e),fields:n.value.mapValue.fields}}function AF(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Be(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(f,h){return f.useProto3Json?(Pt(h===void 0||typeof h=="string",58123),Er.fromBase64String(h||"")):(Pt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Er.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(f){const h=f.code===void 0?ue.UNKNOWN:k4(f.code);return new Ee(h,f.message||"")}(a);n=new L4(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Iy(t,r.document.name),s=Gs(r.document.updateTime),a=r.document.createTime?Gs(r.document.createTime):Ge.min(),l=new ai({mapValue:{fields:r.document.fields}}),c=Dr.newFoundDocument(i,s,a,l),f=r.targetIds||[],h=r.removedTargetIds||[];n=new Rp(f,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Iy(t,r.document),s=r.readTime?Gs(r.readTime):Ge.min(),a=Dr.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Rp([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Iy(t,r.document),s=r.removedTargetIds||[];n=new Rp([],s,i,null)}else{if(!("filter"in e))return Be(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new pF(i,s),l=r.targetId;n=new P4(l,a)}}return n}function SF(t,e){let n;if(e instanceof Rd)n={update:qA(t,e.key,e.value)};else if(e instanceof wv)n={delete:ub(t,e.key)};else if(e instanceof sl)n={update:qA(t,e.key,e.data),updateMask:kF(e.fieldMask)};else{if(!(e instanceof fF))return Be(16599,{Rt:e.type});n={verify:ub(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof wg)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Qf)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Zf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Eg)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw Be(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:EF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Be(27497)}(t,e.precondition)),n}function RF(t,e){return t&&t.length>0?(Pt(e!==void 0,14353),t.map(n=>function(i,s){let a=i.updateTime?Gs(i.updateTime):Gs(s);return a.isEqual(Ge.min())&&(a=Gs(s)),new uF(a,i.transformResults||[])}(n,e))):[]}function CF(t,e){return{documents:[z4(t,e.path)]}}function NF(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=z4(t,i);const s=function(f){if(f.length!==0)return H4(Ss.create(f,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(f){if(f.length!==0)return f.map(h=>function(p){return{field:Wu(p.field),direction:OF(p.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=ob(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{Vt:n,parent:i}}function IF(t){let e=TF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Pt(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(m){const p=F4(m);return p instanceof Ss&&y4(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(p=>function(T){return new xg(Xu(T.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(m){let p;return p=typeof m=="object"?m.value:m,pv(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(m){const p=!!m.before,y=m.values||[];return new bg(y,p)}(n.startAt));let f=null;return n.endAt&&(f=function(m){const p=!m.before,y=m.values||[];return new bg(y,p)}(n.endAt)),KB(e,i,a,s,l,"F",c,f)}function DF(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function F4(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Xu(n.unaryFilter.field);return qn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Xu(n.unaryFilter.field);return qn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Xu(n.unaryFilter.field);return qn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Xu(n.unaryFilter.field);return qn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}}(t):t.fieldFilter!==void 0?function(n){return qn.create(Xu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ss.create(n.compositeFilter.filters.map(r=>F4(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Be(1026)}}(n.compositeFilter.op))}(t):Be(30097,{filter:t})}function OF(t){return _F[t]}function MF(t){return bF[t]}function jF(t){return xF[t]}function Wu(t){return{fieldPath:t.canonicalString()}}function Xu(t){return xr.fromServerFormat(t.fieldPath)}function H4(t){return t instanceof qn?function(n){if(n.op==="=="){if(DA(n.value))return{unaryFilter:{field:Wu(n.field),op:"IS_NAN"}};if(IA(n.value))return{unaryFilter:{field:Wu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(DA(n.value))return{unaryFilter:{field:Wu(n.field),op:"IS_NOT_NAN"}};if(IA(n.value))return{unaryFilter:{field:Wu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wu(n.field),op:MF(n.op),value:n.value}}}(t):t instanceof Ss?function(n){const r=n.getFilters().map(i=>H4(i));return r.length===1?r[0]:{compositeFilter:{op:jF(n.op),filters:r}}}(t):Be(54877,{filter:t})}function kF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function q4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n,r,i,s=Ge.min(),a=Ge.min(),l=Er.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new So(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e){this.gt=e}}function LF(t){const e=IF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ab(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(){this.Dn=new VF}addToCollectionParentIndex(e,n){return this.Dn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(Yo.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(Yo.min())}updateCollectionGroup(e,n,r){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class VF{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new nr(tn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nr(tn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},G4=41943040;class ni{static withCacheSize(e){return new ni(e,ni.DEFAULT_COLLECTION_PERCENTILE,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ni.DEFAULT_COLLECTION_PERCENTILE=10,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ni.DEFAULT=new ni(G4,ni.DEFAULT_COLLECTION_PERCENTILE,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ni.DISABLED=new ni(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Gc(0)}static ur(){return new Gc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="LruGarbageCollector",zF=1048576;function YA([t,e],[n,r]){const i=nt(t,n);return i===0?nt(e,r):i}class BF{constructor(e){this.Tr=e,this.buffer=new nr(YA),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();YA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class FF{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ae($A,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){sh(n)?Ae($A,"Ignoring IndexedDB error during garbage collection: ",n):await ih(n)}await this.Rr(3e5)})}}class HF{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return de.resolve(mv.ue);const r=new BF(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(GA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GA):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,a,l,c,f;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,a=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(f=Date.now(),$u()<=mt.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(f-c)+`ms
Total Duration: ${f-h}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function qF(t,e){return new HF(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(){this.changes=new fu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?de.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Cf(r.mutation,i,Ti.empty(),on.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pt()){const i=Pl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=sf();return s.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Pl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=Va();const a=Rf(),l=function(){return Rf()}();return n.forEach((c,f)=>{const h=r.get(f.key);i.has(f.key)&&(h===void 0||h.mutation instanceof sl)?s=s.insert(f.key,f):h!==void 0?(a.set(f.key,h.mutation.getFieldMask()),Cf(h.mutation,f,h.mutation.getFieldMask(),on.now())):a.set(f.key,Ti.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((f,h)=>a.set(f,h)),n.forEach((f,h)=>{var m;return l.set(f,new $F(h,(m=a.get(f))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Rf();let i=new xn((a,l)=>a-l),s=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let h=r.get(c)||Ti.empty();h=l.applyToLocalView(f,h),r.set(c,h);const m=(i.get(l.batchId)||pt()).add(c);i=i.insert(l.batchId,m)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,h=c.value,m=R4();h.forEach(p=>{if(!s.has(p)){const y=M4(n.get(p),r.get(p));y!==null&&m.set(p,y),s=s.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,m))}return de.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return Me.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):w4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):de.resolve(Pl());let l=Yf,c=s;return a.next(f=>de.forEach(f,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(h)?de.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,f,s)).next(()=>this.computeViews(e,c,f,pt())).next(h=>({batchId:l,changes:S4(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Me(n)).next(r=>{let i=sf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=sf();return this.indexManager.getCollectionParents(e,s).next(l=>de.forEach(l,c=>{const f=function(m,p){return new Sd(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(h=>{h.forEach((m,p)=>{a=a.insert(m,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((c,f)=>{const h=f.getKey();a.get(h)===null&&(a=a.insert(h,Dr.newInvalidDocument(h)))});let l=sf();return a.forEach((c,f)=>{const h=s.get(c);h!==void 0&&Cf(h.mutation,f,Ti.empty(),on.now()),_v(n,f)&&(l=l.insert(c,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return de.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Gs(i.createTime)}}(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:LF(i.bundledQuery),readTime:Gs(i.readTime)}}(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(){this.overlays=new xn(Me.comparator),this.kr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Pl();return de.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),de.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),de.resolve()}getOverlaysForCollection(e,n,r){const i=Pl(),s=n.length+1,a=new Me(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return de.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new xn((f,h)=>f-h);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let h=s.get(f.largestBatchId);h===null&&(h=Pl(),s=s.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const l=Pl(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,h)=>l.set(f,h)),!(l.size()>=i)););return de.resolve(l)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new mF(n,r));let s=this.kr.get(n);s===void 0&&(s=pt(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(){this.sessionToken=Er.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this.qr=new nr(ur.Qr),this.$r=new nr(ur.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new ur(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new ur(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Me(new tn([])),r=new ur(n,e),i=new ur(n,e+1),s=[];return this.$r.forEachInRange([r,i],a=>{this.Wr(a),s.push(a.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Me(new tn([])),r=new ur(n,e),i=new ur(n,e+1);let s=pt();return this.$r.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new ur(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ur{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Me.comparator(e.key,n.key)||nt(e.Hr,n.Hr)}static Ur(e,n){return nt(e.Hr,n.Hr)||Me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new nr(ur.Qr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new dF(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.Yr=this.Yr.add(new ur(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return de.resolve(a)}lookupMutationBatch(e,n){return de.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return de.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?tx:this.er-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ur(n,0),i=new ur(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],a=>{const l=this.Zr(a.Hr);s.push(l)}),de.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nr(nt);return n.forEach(i=>{const s=new ur(i,0),a=new ur(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,a],l=>{r=r.add(l.Hr)})}),de.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Me.isDocumentKey(s)||(s=s.child(""));const a=new ur(new Me(s),0);let l=new nr(nt);return this.Yr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(l=l.add(c.Hr)),!0)},a),de.resolve(this.ei(l))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Pt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return de.forEach(n.mutations,i=>{const s=new ur(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new ur(n,0),i=this.Yr.firstAfterOrEqual(r);return de.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e){this.ni=e,this.docs=function(){return new xn(Me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return de.resolve(r?r.document.mutableCopy():Dr.newInvalidDocument(n))}getEntries(e,n){let r=Va();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Dr.newInvalidDocument(i))}),de.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Va();const a=n.path,l=new Me(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:h}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||CB(RB(h),r)<=0||(i.has(h.key)||_v(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return de.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Be(9500)}ri(e,n){return de.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new JF(this)}getSize(e){return de.resolve(this.size)}}class JF extends GF{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),de.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(e){this.persistence=e,this.ii=new fu(n=>ix(n),sx),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.si=0,this.oi=new cx,this.targetCount=0,this._i=Gc.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),de.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Gc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.hr(n),de.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ii.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ii.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),de.waitFor(s).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return de.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),de.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),de.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return de.resolve(r)}containsKey(e,n){return de.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,n){this.ai={},this.overlays={},this.ui=new mv(0),this.ci=!1,this.ci=!0,this.li=new KF,this.referenceDelegate=e(this),this.hi=new eH(this),this.indexManager=new UF,this.remoteDocumentCache=function(i){return new ZF(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new PF(n),this.Ti=new WF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XF,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new QF(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Ae("MemoryPersistence","Starting transaction:",e);const i=new tH(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return de.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class tH extends IB{constructor(e){super(),this.currentSequenceNumber=e}}class hx{constructor(e){this.persistence=e,this.Ai=new cx,this.Ri=null}static Vi(e){return new hx(e)}get mi(){if(this.Ri)return this.Ri;throw Be(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),de.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),de.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.mi,r=>{const i=Me.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,Ge.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return de.or([()=>de.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ag{constructor(e,n){this.persistence=e,this.gi=new fu(r=>MB(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=qF(this,n)}static Vi(e,n){return new Ag(e,n)}Ii(){}di(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return de.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?de.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,a=>this.Sr(e,a,n).next(l=>{l||(r++,s.removeEntry(a,Ge.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),de.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Tp(e.data.value)),n}Sr(e,n,r){return de.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return de.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=pt(),i=pt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new fx(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nH{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rH{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return Y8()?8:DB(jr())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ps(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new nH;return this.ws(e,n,a).next(l=>{if(s.result=l,this.Rs)return this.Ss(e,n,a,l.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?($u()<=mt.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",Yu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),de.resolve()):($u()<=mt.DEBUG&&Ae("QueryEngine","Query:",Yu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?($u()<=mt.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",Yu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qs(n))):de.resolve())}ps(e,n){if(kA(n))return de.resolve(null);let r=qs(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ab(n,null,"F"),r=qs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=pt(...s);return this.gs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const f=this.bs(n,l);return this.Ds(n,f,a,c.readTime)?this.ps(e,ab(n,null,"F")):this.vs(e,f,n,c)}))})))}ys(e,n,r,i){return kA(n)||i.isEqual(Ge.min())?de.resolve(null):this.gs.getDocuments(e,r).next(s=>{const a=this.bs(n,s);return this.Ds(n,a,r,i)?de.resolve(null):($u()<=mt.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Yu(n)),this.vs(e,a,n,SB(i,Yf)).next(l=>l))})}bs(e,n){let r=new nr(T4(e));return n.forEach((i,s)=>{_v(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return $u()<=mt.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",Yu(n)),this.gs.getDocumentsMatchingQuery(e,n,Yo.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="LocalStore",iH=3e8;class sH{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new xn(nt),this.Ms=new fu(s=>ix(s),sx),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YF(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function aH(t,e,n,r){return new sH(t,e,n,r)}async function Y4(t,e){const n=Xe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let c=pt();for(const f of i){a.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}for(const f of s){l.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(f=>({Bs:f,removedBatchIds:a,addedBatchIds:l}))})})}function oH(t,e){const n=Xe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,f,h){const m=f.batch,p=m.keys();let y=de.resolve();return p.forEach(T=>{y=y.next(()=>h.getEntry(c,T)).next(N=>{const j=f.docVersions.get(T);Pt(j!==null,48541),N.version.compareTo(j)<0&&(m.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),h.addEntry(N)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=pt();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function W4(t){const e=Xe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function lH(t,e){const n=Xe(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const l=[];e.targetChanges.forEach((h,m)=>{const p=i.get(m);if(!p)return;l.push(n.hi.removeMatchingKeys(s,h.removedDocuments,m).next(()=>n.hi.addMatchingKeys(s,h.addedDocuments,m)));let y=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(Er.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(m,y),function(N,j,A){return N.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=iH?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(p,y,h)&&l.push(n.hi.updateTargetData(s,y))});let c=Va(),f=pt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(uH(s,a,e.documentUpdates).next(h=>{c=h.Ls,f=h.ks})),!r.isEqual(Ge.min())){const h=n.hi.getLastRemoteSnapshotVersion(s).next(m=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(h)}return de.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,f)).next(()=>c)}).then(s=>(n.Fs=i,s))}function uH(t,e,n){let r=pt(),i=pt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Va();return n.forEach((l,c)=>{const f=s.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Ge.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):Ae(dx,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)}),{Ls:a,ks:i}})}function cH(t,e){const n=Xe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=tx),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hH(t,e){const n=Xe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,de.resolve(i)):n.hi.allocateTargetId(r).next(a=>(i=new So(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function hb(t,e,n){const r=Xe(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!sh(a))throw a;Ae(dx,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function WA(t,e,n){const r=Xe(t);let i=Ge.min(),s=pt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,f,h){const m=Xe(c),p=m.Ms.get(h);return p!==void 0?de.resolve(m.Fs.get(p)):m.hi.getTargetData(f,h)}(r,a,qs(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,n?i:Ge.min(),n?s:pt())).next(l=>(fH(r,ZB(e),l),{documents:l,qs:s})))}function fH(t,e,n){let r=t.xs.get(e)||Ge.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}class XA{constructor(){this.activeTargetIds=iF()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dH{constructor(){this.Fo=new XA,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new XA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="ConnectivityMonitor";class QA{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ae(KA,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ae(KA,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ep=null;function fb(){return ep===null?ep=function(){return 268435456+Math.round(2147483648*Math.random())}():ep++,"0x"+ep.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="RestConnection",pH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gH{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===eb?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const a=fb(),l=this.Go(e,n.toUriEncodedString());Ae(Dy,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);const{host:f}=new URL(l),h=Fa(f);return this.jo(e,l,c,r,h).then(m=>(Ae(Dy,`Received RPC '${e}' ${a}: `,m),m),m=>{throw $o(Dy,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",r),m})}Jo(e,n,r,i,s,a){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rh}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){const r=pH[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="WebChannelConnection";class yH extends gH{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){const a=fb();return new Promise((l,c)=>{const f=new KI;f.setWithCredentials(!0),f.listenOnce(QI.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Ep.NO_ERROR:const m=f.getResponseJson();Ae(Nr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case Ep.TIMEOUT:Ae(Nr,`RPC '${e}' ${a} timed out`),c(new Ee(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Ep.HTTP_ERROR:const p=f.getStatus();if(Ae(Nr,`RPC '${e}' ${a} failed with status:`,p,"response text:",f.getResponseText()),p>0){let y=f.getResponseJson();Array.isArray(y)&&(y=y[0]);const T=y==null?void 0:y.error;if(T&&T.status&&T.message){const N=function(A){const C=A.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(C)>=0?C:ue.UNKNOWN}(T.status);c(new Ee(N,T.message))}else c(new Ee(ue.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Ee(ue.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{c_:e,streamId:a,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{Ae(Nr,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(i);Ae(Nr,`RPC '${e}' ${a} sending request:`,i),f.send(n,"POST",h,r,15)})}P_(e,n,r){const i=fb(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=e4(),l=JI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=s.join("");Ae(Nr,`Creating RPC '${e}' stream ${i}: ${h}`,c);const m=a.createWebChannel(h,c);this.T_(m);let p=!1,y=!1;const T=new vH({Ho:j=>{y?Ae(Nr,`Not sending because RPC '${e}' stream ${i} is closed:`,j):(p||(Ae(Nr,`Opening RPC '${e}' stream ${i} transport.`),m.open(),p=!0),Ae(Nr,`RPC '${e}' stream ${i} sending:`,j),m.send(j))},Yo:()=>m.close()}),N=(j,A,C)=>{j.listen(A,M=>{try{C(M)}catch(U){setTimeout(()=>{throw U},0)}})};return N(m,rf.EventType.OPEN,()=>{y||(Ae(Nr,`RPC '${e}' stream ${i} transport opened.`),T.s_())}),N(m,rf.EventType.CLOSE,()=>{y||(y=!0,Ae(Nr,`RPC '${e}' stream ${i} transport closed`),T.__(),this.I_(m))}),N(m,rf.EventType.ERROR,j=>{y||(y=!0,$o(Nr,`RPC '${e}' stream ${i} transport errored. Name:`,j.name,"Message:",j.message),T.__(new Ee(ue.UNAVAILABLE,"The operation could not be completed")))}),N(m,rf.EventType.MESSAGE,j=>{var A;if(!y){const C=j.data[0];Pt(!!C,16349);const M=C,U=(M==null?void 0:M.error)||((A=M[0])===null||A===void 0?void 0:A.error);if(U){Ae(Nr,`RPC '${e}' stream ${i} received error:`,U);const H=U.status;let D=function(w){const R=Bn[w];if(R!==void 0)return k4(R)}(H),E=U.message;D===void 0&&(D=ue.INTERNAL,E="Unknown error status: "+H+" with message "+U.message),y=!0,T.__(new Ee(D,E)),m.close()}else Ae(Nr,`RPC '${e}' stream ${i} received:`,C),T.a_(C)}}),N(l,ZI.STAT_EVENT,j=>{j.stat===Z_.PROXY?Ae(Nr,`RPC '${e}' stream ${i} detected buffering proxy`):j.stat===Z_.NOPROXY&&Ae(Nr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Oy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t){return new wF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&Ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="PersistentStream";class K4{constructor(e,n,r,i,s,a,l,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new X4(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(Ua(n.toString()),Ua("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new Ee(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Ae(ZA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Ae(ZA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _H extends K4{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=AF(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ge.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ge.min():a.readTime?Gs(a.readTime):Ge.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=cb(this.serializer),n.addTarget=function(s,a){let l;const c=a.target;if(l=ib(c)?{documents:CF(s,c)}:{query:NF(s,c).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=U4(s,a.resumeToken);const f=ob(s,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(Ge.min())>0){l.readTime=Tg(s,a.snapshotVersion.toTimestamp());const f=ob(s,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,e);const r=DF(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=cb(this.serializer),n.removeTarget=e,this.k_(n)}}class bH extends K4{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=RF(e.writeResults,e.commitTime),r=Gs(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=cb(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>SF(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xH{}class wH extends xH{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Ee(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,lb(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ee(ue.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Jo(e,lb(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(ue.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class EH{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ua(n),this._a=!1):Ae("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu="RemoteStore";class TH{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(a=>{r.enqueueAndForget(async()=>{du(this)&&(Ae(nu,"Restarting streams for network reachability change."),await async function(c){const f=Xe(c);f.Ia.add(4),await Nd(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Av(f)}(this))})}),this.Aa=new EH(r,i)}}async function Av(t){if(du(t))for(const e of t.da)await e(!0)}async function Nd(t){for(const e of t.da)await e(!1)}function Q4(t,e){const n=Xe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),vx(n)?gx(n):ah(n).x_()&&px(n,e))}function mx(t,e){const n=Xe(t),r=ah(n);n.Ta.delete(e),r.x_()&&Z4(n,e),n.Ta.size===0&&(r.x_()?r.B_():du(n)&&n.Aa.set("Unknown"))}function px(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ah(t).H_(e)}function Z4(t,e){t.Ra.$e(e),ah(t).Y_(e)}function gx(t){t.Ra=new yF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ah(t).start(),t.Aa.aa()}function vx(t){return du(t)&&!ah(t).M_()&&t.Ta.size>0}function du(t){return Xe(t).Ia.size===0}function J4(t){t.Ra=void 0}async function AH(t){t.Aa.set("Online")}async function SH(t){t.Ta.forEach((e,n)=>{px(t,e)})}async function RH(t,e){J4(t),vx(t)?(t.Aa.la(e),gx(t)):t.Aa.set("Unknown")}async function CH(t,e,n){if(t.Aa.set("Online"),e instanceof L4&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.Ta.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ta.delete(l),i.Ra.removeTarget(l))}(t,e)}catch(r){Ae(nu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sg(t,r)}else if(e instanceof Rp?t.Ra.Ye(e):e instanceof P4?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Ge.min()))try{const r=await W4(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.Ra.Pt(a);return l.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const h=s.Ta.get(f);h&&s.Ta.set(f,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,f)=>{const h=s.Ta.get(c);if(!h)return;s.Ta.set(c,h.withResumeToken(Er.EMPTY_BYTE_STRING,h.snapshotVersion)),Z4(s,c);const m=new So(h.target,c,f,h.sequenceNumber);px(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Ae(nu,"Failed to raise snapshot:",r),await Sg(t,r)}}async function Sg(t,e,n){if(!sh(e))throw e;t.Ia.add(1),await Nd(t),t.Aa.set("Offline"),n||(n=()=>W4(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ae(nu,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Av(t)})}function e3(t,e){return e().catch(n=>Sg(t,n,e))}async function Sv(t){const e=Xe(t),n=Qo(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:tx;for(;NH(e);)try{const i=await cH(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,IH(e,i)}catch(i){await Sg(e,i)}t3(e)&&n3(e)}function NH(t){return du(t)&&t.Pa.length<10}function IH(t,e){t.Pa.push(e);const n=Qo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function t3(t){return du(t)&&!Qo(t).M_()&&t.Pa.length>0}function n3(t){Qo(t).start()}async function DH(t){Qo(t).na()}async function OH(t){const e=Qo(t);for(const n of t.Pa)e.X_(n.mutations)}async function MH(t,e,n){const r=t.Pa.shift(),i=ox.from(r,e,n);await e3(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Sv(t)}async function jH(t,e){e&&Qo(t).Z_&&await async function(r,i){if(function(a){return gF(a)&&a!==ue.ABORTED}(i.code)){const s=r.Pa.shift();Qo(r).N_(),await e3(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Sv(r)}}(t,e),t3(t)&&n3(t)}async function JA(t,e){const n=Xe(t);n.asyncQueue.verifyOperationInProgress(),Ae(nu,"RemoteStore received new credentials");const r=du(n);n.Ia.add(3),await Nd(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Av(n)}async function kH(t,e){const n=Xe(t);e?(n.Ia.delete(2),await Av(n)):e||(n.Ia.add(2),await Nd(n),n.Aa.set("Unknown"))}function ah(t){return t.Va||(t.Va=function(n,r,i){const s=Xe(n);return s.ia(),new _H(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:AH.bind(null,t),e_:SH.bind(null,t),n_:RH.bind(null,t),J_:CH.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),vx(t)?gx(t):t.Aa.set("Unknown")):(await t.Va.stop(),J4(t))})),t.Va}function Qo(t){return t.ma||(t.ma=function(n,r,i){const s=Xe(n);return s.ia(),new bH(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:DH.bind(null,t),n_:jH.bind(null,t),ea:OH.bind(null,t),ta:MH.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Sv(t)):(await t.ma.stop(),t.Pa.length>0&&(Ae(nu,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ia,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new yx(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _x(t,e){if(Ua("AsyncQueue",`${e}: ${t}`),sh(t))return new Ee(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{static emptySet(e){return new Tc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Me.comparator(n.key,r.key):(n,r)=>Me.comparator(n.key,r.key),this.keyedMap=sf(),this.sortedSet=new xn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Tc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Tc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.fa=new xn(Me.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Be(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class $c{constructor(e,n,r,i,s,a,l,c,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new $c(e,n,Tc.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class LH{constructor(){this.queries=tS(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=Xe(n),s=i.queries;i.queries=tS(),s.forEach((a,l)=>{for(const c of l.wa)c.onError(r)})})(this,new Ee(ue.ABORTED,"Firestore shutting down"))}}function tS(){return new fu(t=>E4(t),yv)}async function bx(t,e){const n=Xe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new PH,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=_x(a,`Initialization of query '${Yu(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&wx(n)}async function xx(t,e){const n=Xe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.wa.indexOf(e);a>=0&&(s.wa.splice(a,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function UH(t,e){const n=Xe(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.wa)l.Ca(i)&&(r=!0);a.ya=i}}r&&wx(n)}function VH(t,e,n){const r=Xe(t),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(e)}function wx(t){t.Da.forEach(e=>{e.next()})}var db,nS;(nS=db||(db={})).Fa="default",nS.Cache="cache";class Ex{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new $c(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=$c.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==db.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e){this.key=e}}class i3{constructor(e){this.key=e}}class zH{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=pt(),this.mutatedKeys=pt(),this.Xa=T4(e),this.eu=new Tc(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new eS,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const p=i.get(h),y=_v(this.query,m)?m:null,T=!!p&&this.mutatedKeys.has(p.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let j=!1;p&&y?p.data.isEqual(y.data)?T!==N&&(r.track({type:3,doc:y}),j=!0):this.iu(p,y)||(r.track({type:2,doc:y}),j=!0,(c&&this.Xa(y,c)>0||f&&this.Xa(y,f)<0)&&(l=!0)):!p&&y?(r.track({type:0,doc:y}),j=!0):p&&!y&&(r.track({type:1,doc:p}),j=!0,(c||f)&&(l=!0)),j&&(y?(a=a.add(y),s=N?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:a,ru:r,Ds:l,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort((h,m)=>function(y,T){const N=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{At:j})}};return N(y)-N(T)}(h.type,m.type)||this.Xa(h.doc,m.doc)),this.su(r),i=i!=null&&i;const l=n&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,f=c!==this.Ya;return this.Ya=c,a.length!==0||f?{snapshot:new $c(this.query,e.eu,s,a,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new eS,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=pt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new i3(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new r3(r))}),n}uu(e){this.Ha=e.qs,this.Za=pt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return $c.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Tx="SyncEngine";class BH{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class FH{constructor(e){this.key=e,this.lu=!1}}class HH{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new fu(l=>E4(l),yv),this.Tu=new Map,this.Iu=new Set,this.du=new xn(Me.comparator),this.Eu=new Map,this.Au=new cx,this.Ru={},this.Vu=new Map,this.mu=Gc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function qH(t,e,n=!0){const r=c3(t);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await s3(r,e,n,!0),i}async function GH(t,e){const n=c3(t);await s3(n,e,!0,!1)}async function s3(t,e,n,r){const i=await hH(t.localStore,qs(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await $H(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&Q4(t.remoteStore,i),l}async function $H(t,e,n,r,i){t.gu=(m,p,y)=>async function(N,j,A,C){let M=j.view.nu(A);M.Ds&&(M=await WA(N.localStore,j.query,!1).then(({documents:E})=>j.view.nu(E,M)));const U=C&&C.targetChanges.get(j.targetId),H=C&&C.targetMismatches.get(j.targetId)!=null,D=j.view.applyChanges(M,N.isPrimaryClient,U,H);return iS(N,j.targetId,D._u),D.snapshot}(t,m,p,y);const s=await WA(t.localStore,e,!0),a=new zH(e,s.qs),l=a.nu(s.documents),c=Cd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=a.applyChanges(l,t.isPrimaryClient,c);iS(t,n,f._u);const h=new BH(e,n,a);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function YH(t,e,n){const r=Xe(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(a=>!yv(a,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await hb(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&mx(r.remoteStore,i.targetId),mb(r,i.targetId)}).catch(ih)):(mb(r,i.targetId),await hb(r.localStore,i.targetId,!0))}async function WH(t,e){const n=Xe(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mx(n.remoteStore,r.targetId))}async function XH(t,e,n){const r=nq(t);try{const i=await function(a,l){const c=Xe(a),f=on.now(),h=l.reduce((y,T)=>y.add(T.key),pt());let m,p;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=Va(),N=pt();return c.Os.getEntries(y,h).next(j=>{T=j,T.forEach((A,C)=>{C.isValidDocument()||(N=N.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,T)).next(j=>{m=j;const A=[];for(const C of l){const M=hF(C,m.get(C.key).overlayedDocument);M!=null&&A.push(new sl(C.key,M,p4(M.value.mapValue),Ii.exists(!0)))}return c.mutationQueue.addMutationBatch(y,f,A,l)}).next(j=>{p=j;const A=j.applyToLocalDocumentSet(m,N);return c.documentOverlayCache.saveOverlays(y,j.batchId,A)})}).then(()=>({batchId:p.batchId,changes:S4(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,c){let f=a.Ru[a.currentUser.toKey()];f||(f=new xn(nt)),f=f.insert(l,c),a.Ru[a.currentUser.toKey()]=f}(r,i.batchId,n),await Id(r,i.changes),await Sv(r.remoteStore)}catch(i){const s=_x(i,"Failed to persist write");n.reject(s)}}async function a3(t,e){const n=Xe(t);try{const r=await lH(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Eu.get(s);a&&(Pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.lu=!0:i.modifiedDocuments.size>0?Pt(a.lu,14607):i.removedDocuments.size>0&&(Pt(a.lu,42227),a.lu=!1))}),await Id(n,r,e)}catch(r){await ih(r)}}function rS(t,e,n){const r=Xe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,a)=>{const l=a.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const c=Xe(a);c.onlineState=l;let f=!1;c.queries.forEach((h,m)=>{for(const p of m.wa)p.va(l)&&(f=!0)}),f&&wx(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KH(t,e,n){const r=Xe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),s=i&&i.key;if(s){let a=new xn(Me.comparator);a=a.insert(s,Dr.newNoDocument(s,Ge.min()));const l=pt().add(s),c=new Ev(Ge.min(),new Map,new xn(nt),a,l);await a3(r,c),r.du=r.du.remove(s),r.Eu.delete(e),Ax(r)}else await hb(r.localStore,e,!1).then(()=>mb(r,e,n)).catch(ih)}async function QH(t,e){const n=Xe(t),r=e.batch.batchId;try{const i=await oH(n.localStore,e);l3(n,r,null),o3(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Id(n,i)}catch(i){await ih(i)}}async function ZH(t,e,n){const r=Xe(t);try{const i=await function(a,l){const c=Xe(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let h;return c.mutationQueue.lookupMutationBatch(f,l).next(m=>(Pt(m!==null,37113),h=m.keys(),c.mutationQueue.removeMutationBatch(f,m))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h)).next(()=>c.localDocuments.getDocuments(f,h))})}(r.localStore,e);l3(r,e,n),o3(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Id(r,i)}catch(i){await ih(i)}}function o3(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function l3(t,e,n){const r=Xe(t);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function mb(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||u3(t,r)})}function u3(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(mx(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Ax(t))}function iS(t,e,n){for(const r of n)r instanceof r3?(t.Au.addReference(r.key,e),JH(t,r)):r instanceof i3?(Ae(Tx,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||u3(t,r.key)):Be(19791,{yu:r})}function JH(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Ae(Tx,"New document in limbo: "+n),t.Iu.add(r),Ax(t))}function Ax(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Me(tn.fromString(e)),r=t.mu.next();t.Eu.set(r,new FH(n)),t.du=t.du.insert(n,r),Q4(t.remoteStore,new So(qs(vv(n.path)),r,"TargetPurposeLimboResolution",mv.ue))}}async function Id(t,e,n){const r=Xe(t),i=[],s=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((l,c)=>{a.push(r.gu(c,e,n).then(f=>{var h;if((f||n)&&r.isPrimaryClient){const m=f?!f.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(f){i.push(f);const m=fx.Es(c.targetId,f);s.push(m)}}))}),await Promise.all(a),r.hu.J_(i),await async function(c,f){const h=Xe(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>de.forEach(f,p=>de.forEach(p.Is,y=>h.persistence.referenceDelegate.addReference(m,p.targetId,y)).next(()=>de.forEach(p.ds,y=>h.persistence.referenceDelegate.removeReference(m,p.targetId,y)))))}catch(m){if(!sh(m))throw m;Ae(dx,"Failed to update sequence numbers: "+m)}for(const m of f){const p=m.targetId;if(!m.fromCache){const y=h.Fs.get(p),T=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(T);h.Fs=h.Fs.insert(p,N)}}}(r.localStore,s))}async function eq(t,e){const n=Xe(t);if(!n.currentUser.isEqual(e)){Ae(Tx,"User change. New user:",e.toKey());const r=await Y4(n.localStore,e);n.currentUser=e,function(s,a){s.Vu.forEach(l=>{l.forEach(c=>{c.reject(new Ee(ue.CANCELLED,a))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Id(n,r.Bs)}}function tq(t,e){const n=Xe(t),r=n.Eu.get(e);if(r&&r.lu)return pt().add(r.key);{let i=pt();const s=n.Tu.get(e);if(!s)return i;for(const a of s){const l=n.Pu.get(a);i=i.unionWith(l.view.tu)}return i}}function c3(t){const e=Xe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=a3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KH.bind(null,e),e.hu.J_=UH.bind(null,e.eventManager),e.hu.pu=VH.bind(null,e.eventManager),e}function nq(t){const e=Xe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZH.bind(null,e),e}class Rg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tv(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return aH(this.persistence,new rH,e.initialUser,this.serializer)}Du(e){return new $4(hx.Vi,this.serializer)}bu(e){return new dH}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rg.provider={build:()=>new Rg};class rq extends Rg{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Pt(this.persistence.referenceDelegate instanceof Ag,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new FF(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?ni.withCacheSize(this.cacheSizeBytes):ni.DEFAULT;return new $4(r=>Ag.Vi(r,n),this.serializer)}}class pb{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eq.bind(null,this.syncEngine),await kH(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new LH}()}createDatastore(e){const n=Tv(e.databaseInfo.databaseId),r=function(s){return new yH(s)}(e.databaseInfo);return function(s,a,l,c){return new wH(s,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new TH(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>rS(this.syncEngine,n,0),function(){return QA.C()?new QA:new mH}())}createSyncEngine(e,n){return function(i,s,a,l,c,f,h){const m=new HH(i,s,a,l,c,f);return h&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Xe(i);Ae(nu,"RemoteStore shutting down."),s.Ia.add(5),await Nd(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}pb.provider={build:()=>new pb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ua("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="FirestoreClient";class iq{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ir.UNAUTHENTICATED,this.clientId=ex.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Ae(Zo,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Ae(Zo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ia;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_x(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function My(t,e){t.asyncQueue.verifyOperationInProgress(),Ae(Zo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Y4(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{$o("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Ae("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{$o("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function sS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await sq(t);Ae(Zo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>JA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>JA(e.remoteStore,i)),t._onlineComponents=e}async function sq(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ae(Zo,"Using user provided OfflineComponentProvider");try{await My(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ue.FAILED_PRECONDITION||i.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;$o("Error using user provided cache. Falling back to memory cache: "+n),await My(t,new Rg)}}else Ae(Zo,"Using default OfflineComponentProvider"),await My(t,new rq(void 0));return t._offlineComponents}async function h3(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ae(Zo,"Using user provided OnlineComponentProvider"),await sS(t,t._uninitializedComponentsProvider._online)):(Ae(Zo,"Using default OnlineComponentProvider"),await sS(t,new pb))),t._onlineComponents}function aq(t){return h3(t).then(e=>e.syncEngine)}async function Cg(t){const e=await h3(t),n=e.eventManager;return n.onListen=qH.bind(null,e.syncEngine),n.onUnlisten=YH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=GH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=WH.bind(null,e.syncEngine),n}function oq(t,e,n={}){const r=new Ia;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,f){const h=new Sx({next:p=>{h.Ou(),a.enqueueAndForget(()=>xx(s,m));const y=p.docs.has(l);!y&&p.fromCache?f.reject(new Ee(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&c&&c.source==="server"?f.reject(new Ee(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(p)},error:p=>f.reject(p)}),m=new Ex(vv(l.path),h,{includeMetadataChanges:!0,ka:!0});return bx(s,m)}(await Cg(t),t.asyncQueue,e,n,r)),r.promise}function lq(t,e,n={}){const r=new Ia;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,f){const h=new Sx({next:p=>{h.Ou(),a.enqueueAndForget(()=>xx(s,m)),p.fromCache&&c.source==="server"?f.reject(new Ee(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(p)},error:p=>f.reject(p)}),m=new Ex(l,h,{includeMetadataChanges:!0,ka:!0});return bx(s,m)}(await Cg(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3="firestore.googleapis.com",oS=!0;class lS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=d3,this.ssl=oS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:oS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=G4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zF)throw new Ee(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=f3((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ee(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ee(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ee(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rv{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gB;switch(r.type){case"firstParty":return new bB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=aS.get(n);r&&(Ae("ComponentProvider","Removing Datastore"),aS.delete(n),r.terminate())}(this),Promise.resolve()}}function uq(t,e,n,r={}){var i;t=ss(t,Rv);const s=Fa(e),a=t._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;s&&(ov(`https://${c}`),lv("Firestore",!0)),a.host!==d3&&a.host!==c&&$o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},a),{host:c,ssl:s,emulatorOptions:r});if(!Jl(f,l)&&(t._setSettings(f),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=Ir.MOCK_USER;else{h=dI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Ee(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Ir(p)}t._authCredentials=new vB(new n4(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mu(this.firestore,e,this._query)}}class Pn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pn(this.firestore,e,this._key)}toJSON(){return{type:Pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ad(n,Pn._jsonSchema))return new Pn(e,r||null,new Me(tn.fromString(n.referencePath)))}}Pn._jsonSchemaVersion="firestore/documentReference/1.0",Pn._jsonSchema={type:$n("string",Pn._jsonSchemaVersion),referencePath:$n("string")};class Bo extends mu{constructor(e,n,r){super(e,n,vv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pn(this.firestore,null,new Me(e))}withConverter(e){return new Bo(this.firestore,e,this._path)}}function cq(t,e,...n){if(t=Wt(t),i4("collection","path",e),t instanceof Rv){const r=tn.fromString(e,...n);return xA(r),new Bo(t,null,r)}{if(!(t instanceof Pn||t instanceof Bo))throw new Ee(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tn.fromString(e,...n));return xA(r),new Bo(t.firestore,null,r)}}function Rx(t,e,...n){if(t=Wt(t),arguments.length===1&&(e=ex.newId()),i4("doc","path",e),t instanceof Rv){const r=tn.fromString(e,...n);return bA(r),new Pn(t,null,new Me(r))}{if(!(t instanceof Pn||t instanceof Bo))throw new Ee(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tn.fromString(e,...n));return bA(r),new Pn(t.firestore,t instanceof Bo?t.converter:null,new Me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="AsyncQueue";class cS{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new X4(this,"async_queue_retry"),this.oc=()=>{const r=Oy();r&&Ae(uS,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Oy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Oy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Ia;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!sh(e))throw e;Ae(uS,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ua("INTERNAL UNHANDLED ERROR: ",hS(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=yx.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&Be(47125,{hc:hS(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function hS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Jo extends Rv{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new cS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cS(e),this._firestoreClient=void 0,await e}}}function hq(t,e){const n=typeof t=="object"?t:uv(),r=typeof t=="string"?t:e,i=xd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=V1("firestore");s&&uq(i,...s)}return i}function Dd(t){if(t._terminated)throw new Ee(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||fq(t),t._firestoreClient}function fq(t){var e,n,r;const i=t._freezeSettings(),s=function(l,c,f,h){return new PB(l,c,f,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,f3(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new iq(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ts(Er.fromBase64String(e))}catch(n){throw new Ee(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ts(Er.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ts._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ad(e,ts._jsonSchema))return ts.fromBase64String(e.bytes)}}ts._jsonSchemaVersion="firestore/bytes/1.0",ts._jsonSchema={type:$n("string",ts._jsonSchemaVersion),bytes:$n("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$s._jsonSchemaVersion}}static fromJSON(e){if(Ad(e,$s._jsonSchema))return new $s(e.latitude,e.longitude)}}$s._jsonSchemaVersion="firestore/geoPoint/1.0",$s._jsonSchema={type:$n("string",$s._jsonSchemaVersion),latitude:$n("number"),longitude:$n("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ys._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ad(e,Ys._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ys(e.vectorValues);throw new Ee(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ys._jsonSchemaVersion="firestore/vectorValue/1.0",Ys._jsonSchema={type:$n("string",Ys._jsonSchemaVersion),vectorValues:$n("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dq=/^__.*__$/;class mq{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new sl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rd(e,this.data,n,this.fieldTransforms)}}class m3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new sl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function p3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ec:t})}}class Nx{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Nx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ng(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(p3(this.Ec)&&dq.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class pq{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Tv(e)}Dc(e,n,r,i=!1){return new Nx({Ec:e,methodName:n,bc:r,path:xr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ix(t){const e=t._freezeSettings(),n=Tv(t._databaseId);return new pq(t._databaseId,!!e.ignoreUndefinedProperties,n)}function g3(t,e,n,r,i,s={}){const a=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);Dx("Data must be an object, but it was:",a,r);const l=v3(r,a);let c,f;if(s.merge)c=new Ti(a.fieldMask),f=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const m of s.mergeFields){const p=gb(e,m,n);if(!a.contains(p))throw new Ee(ue.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);_3(h,p)||h.push(p)}c=new Ti(h),f=a.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,f=a.fieldTransforms;return new mq(new ai(l),c,f)}class Nv extends Cx{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nv}}function gq(t,e,n,r){const i=t.Dc(1,e,n);Dx("Data must be an object, but it was:",i,r);const s=[],a=ai.empty();il(r,(c,f)=>{const h=Ox(e,c,n);f=Wt(f);const m=i.gc(h);if(f instanceof Nv)s.push(h);else{const p=Od(f,m);p!=null&&(s.push(h),a.set(h,p))}});const l=new Ti(s);return new m3(a,l,i.fieldTransforms)}function vq(t,e,n,r,i,s){const a=t.Dc(1,e,n),l=[gb(e,r,n)],c=[i];if(s.length%2!=0)throw new Ee(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)l.push(gb(e,s[p])),c.push(s[p+1]);const f=[],h=ai.empty();for(let p=l.length-1;p>=0;--p)if(!_3(f,l[p])){const y=l[p];let T=c[p];T=Wt(T);const N=a.gc(y);if(T instanceof Nv)f.push(y);else{const j=Od(T,N);j!=null&&(f.push(y),h.set(y,j))}}const m=new Ti(f);return new m3(h,m,a.fieldTransforms)}function yq(t,e,n,r=!1){return Od(n,t.Dc(r?4:3,e))}function Od(t,e){if(y3(t=Wt(t)))return Dx("Unsupported field value:",e,t),v3(t,e);if(t instanceof Cx)return function(r,i){if(!p3(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let c=Od(l,i.yc(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=on.fromDate(r);return{timestampValue:Tg(i.serializer,s)}}if(r instanceof on){const s=new on(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Tg(i.serializer,s)}}if(r instanceof $s)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ts)return{bytesValue:U4(i.serializer,r._byteString)};if(r instanceof Pn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ux(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ys)return function(a,l){return{mapValue:{fields:{[d4]:{stringValue:m4},[_g]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw l.wc("VectorValues must only contain numeric values.");return ax(l.serializer,f)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${dv(r)}`)}(t,e)}function v3(t,e){const n={};return o4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):il(t,(r,i)=>{const s=Od(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function y3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof on||t instanceof $s||t instanceof ts||t instanceof Pn||t instanceof Cx||t instanceof Ys)}function Dx(t,e,n){if(!y3(n)||!s4(n)){const r=dv(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function gb(t,e,n){if((e=Wt(e))instanceof Cv)return e._internalPath;if(typeof e=="string")return Ox(t,e);throw Ng("Field path arguments must be of type string or ",t,!1,void 0,n)}const _q=new RegExp("[~\\*/\\[\\]]");function Ox(t,e,n){if(e.search(_q)>=0)throw Ng(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cv(...e.split("."))._internalPath}catch{throw Ng(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ng(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new Ee(ue.INVALID_ARGUMENT,l+t+c)}function _3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(x3("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bq extends b3{data(){return super.data()}}function x3(t,e){return typeof e=="string"?Ox(t,e):e instanceof Cv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mx{}class xq extends Mx{}function wq(t,e,...n){let r=[];e instanceof Mx&&r.push(e),r=r.concat(n),function(s){const a=s.filter(c=>c instanceof kx).length,l=s.filter(c=>c instanceof jx).length;if(a>1||a>0&&l>0)throw new Ee(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class jx extends xq{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new jx(e,n,r)}_apply(e){const n=this._parse(e);return E3(e._query,n),new mu(e.firestore,e.converter,sb(e._query,n))}_parse(e){const n=Ix(e.firestore);return function(s,a,l,c,f,h,m){let p;if(f.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Ee(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){mS(m,h);const T=[];for(const N of m)T.push(dS(c,s,N));p={arrayValue:{values:T}}}else p=dS(c,s,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||mS(m,h),p=yq(l,a,m,h==="in"||h==="not-in");return qn.create(f,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class kx extends Mx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ss.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const l=s.getFlattenedFilters();for(const c of l)E3(a,c),a=sb(a,c)}(e._query,n),new mu(e.firestore,e.converter,sb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function dS(t,e,n){if(typeof(n=Wt(n))=="string"){if(n==="")throw new Ee(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w4(e)&&n.indexOf("/")!==-1)throw new Ee(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(tn.fromString(n));if(!Me.isDocumentKey(r))throw new Ee(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return NA(t,new Me(r))}if(n instanceof Pn)return NA(t,n._key);throw new Ee(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dv(n)}.`)}function mS(t,e){if(!Array.isArray(t)||t.length===0)throw new Ee(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function E3(t,e){const n=function(i,s){for(const a of i)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ee(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Eq{convertValue(e,n="none"){switch(Ko(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return il(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[_g].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>kn(a.doubleValue));return new Ys(s)}convertGeoPoint(e){return new $s(kn(e.latitude),kn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wf(e));default:return null}}convertTimestamp(e){const n=Wo(e);return new on(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=tn.fromString(e);Pt(q4(r),9688,{name:e});const i=new Xf(r.get(1),r.get(3)),s=new Me(r.popFirst(5));return i.isEqual(n)||Ua(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class of{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $l extends b3{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(x3("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$l._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$l._jsonSchemaVersion="firestore/documentSnapshot/1.0",$l._jsonSchema={type:$n("string",$l._jsonSchemaVersion),bundleSource:$n("string","DocumentSnapshot"),bundleName:$n("string"),bundle:$n("string")};class Cp extends $l{data(e={}){return super.data(e)}}class Yl{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new of(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Cp(this._firestore,this._userDataWriter,r.key,r,new of(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const c=new Cp(i._firestore,i._userDataWriter,l.doc.key,l.doc,new of(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new Cp(i._firestore,i._userDataWriter,l.doc.key,l.doc,new of(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,h=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:Tq(l.type),doc:c,oldIndex:f,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Yl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ex.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Tq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aq(t){t=ss(t,Pn);const e=ss(t.firestore,Jo);return oq(Dd(e),t._key).then(n=>A3(e,t,n))}Yl._jsonSchemaVersion="firestore/querySnapshot/1.0",Yl._jsonSchema={type:$n("string",Yl._jsonSchemaVersion),bundleSource:$n("string","QuerySnapshot"),bundleName:$n("string"),bundle:$n("string")};class Px extends Eq{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pn(this.firestore,null,n)}}function Iv(t){t=ss(t,mu);const e=ss(t.firestore,Jo),n=Dd(e),r=new Px(e);return w3(t._query),lq(n,t._query).then(i=>new Yl(e,r,t,i))}function Sq(t,e,n){t=ss(t,Pn);const r=ss(t.firestore,Jo),i=T3(t.converter,e,n);return Lx(r,[g3(Ix(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ii.none())])}function Rq(t){return Lx(ss(t.firestore,Jo),[new wv(t._key,Ii.none())])}function Cq(t,...e){var n,r,i;t=Wt(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||fS(e[a])||(s=e[a++]);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(fS(e[a])){const m=e[a];e[a]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[a+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[a+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let c,f,h;if(t instanceof Pn)f=ss(t.firestore,Jo),h=vv(t._key.path),c={next:m=>{e[a]&&e[a](A3(f,t,m))},error:e[a+1],complete:e[a+2]};else{const m=ss(t,mu);f=ss(m.firestore,Jo),h=m._query;const p=new Px(f);c={next:y=>{e[a]&&e[a](new Yl(f,p,m,y))},error:e[a+1],complete:e[a+2]},w3(t._query)}return function(p,y,T,N){const j=new Sx(N),A=new Ex(y,j,T);return p.asyncQueue.enqueueAndForget(async()=>bx(await Cg(p),A)),()=>{j.Ou(),p.asyncQueue.enqueueAndForget(async()=>xx(await Cg(p),A))}}(Dd(f),h,l,c)}function Lx(t,e){return function(r,i){const s=new Ia;return r.asyncQueue.enqueueAndForget(async()=>XH(await aq(r),i,s)),s.promise}(Dd(t),e)}function A3(t,e,n){const r=n.docs.get(e._key),i=new Px(t);return new $l(t,i,e._key,r,new of(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nq{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ix(e)}set(e,n,r){this._verifyNotCommitted();const i=jy(e,this._firestore),s=T3(i.converter,n,r),a=g3(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Ii.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=jy(e,this._firestore);let a;return a=typeof(n=Wt(n))=="string"||n instanceof Cv?vq(this._dataReader,"WriteBatch.update",s._key,n,r,i):gq(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,Ii.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=jy(e,this._firestore);return this._mutations=this._mutations.concat(new wv(n._key,Ii.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ee(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jy(t,e){if((t=Wt(t)).firestore!==e)throw new Ee(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t){return Dd(t=ss(t,Jo)),new Nq(t,e=>Lx(t,e))}(function(e,n=!0){(function(i){rh=i})(cu),Go(new ka("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new Jo(new yB(r.getProvider("auth-internal")),new xB(a,r.getProvider("app-check-internal")),function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ee(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xf(f.options.projectId,h)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),is(pA,gA,e),is(pA,gA,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3="firebasestorage.googleapis.com",R3="storageBucket",Iq=2*60*1e3,Dq=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn extends Cs{constructor(e,n,r=0){super(ky(e),`Firebase Storage: ${n} (${ky(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ky(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Cn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Cn||(Cn={}));function ky(t){return"storage/"+t}function Vx(){const t="An unknown error occurred, please check the error payload for server response.";return new Nn(Cn.UNKNOWN,t)}function Oq(t){return new Nn(Cn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Mq(t){return new Nn(Cn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function jq(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Nn(Cn.UNAUTHENTICATED,t)}function kq(){return new Nn(Cn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Pq(t){return new Nn(Cn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Lq(){return new Nn(Cn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Uq(){return new Nn(Cn.CANCELED,"User canceled the upload/download.")}function Vq(t){return new Nn(Cn.INVALID_URL,"Invalid URL '"+t+"'.")}function zq(t){return new Nn(Cn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Bq(){return new Nn(Cn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+R3+"' property when initializing the app?")}function Fq(){return new Nn(Cn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Hq(){return new Nn(Cn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function qq(t){return new Nn(Cn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function vb(t){return new Nn(Cn.INVALID_ARGUMENT,t)}function C3(){return new Nn(Cn.APP_DELETED,"The Firebase app was deleted.")}function Gq(t){return new Nn(Cn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nf(t,e){return new Nn(Cn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function $h(t){throw new Nn(Cn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ai.makeFromUrl(e,n)}catch{return new Ai(e,"")}if(r.path==="")return r;throw zq(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(U){U.path.charAt(U.path.length-1)==="/"&&(U.path_=U.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+i+a,"i"),c={bucket:1,path:3};function f(U){U.path_=decodeURIComponent(U.path)}const h="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${m}/${h}/b/${i}/o${p}`,"i"),T={bucket:1,path:3},N=n===S3?"(?:storage.googleapis.com|storage.cloud.google.com)":n,j="([^?#]*)",A=new RegExp(`^https?://${N}/${i}/${j}`,"i"),M=[{regex:l,indices:c,postModify:s},{regex:y,indices:T,postModify:f},{regex:A,indices:{bucket:1,path:2},postModify:f}];for(let U=0;U<M.length;U++){const H=M[U],D=H.regex.exec(e);if(D){const E=D[H.indices.bucket];let _=D[H.indices.path];_||(_=""),r=new Ai(E,_),H.postModify(r);break}}if(r==null)throw Vq(e);return r}}class $q{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yq(t,e,n){let r=1,i=null,s=null,a=!1,l=0;function c(){return l===2}let f=!1;function h(...j){f||(f=!0,e.apply(null,j))}function m(j){i=setTimeout(()=>{i=null,t(y,c())},j)}function p(){s&&clearTimeout(s)}function y(j,...A){if(f){p();return}if(j){p(),h.call(null,j,...A);return}if(c()||a){p(),h.call(null,j,...A);return}r<64&&(r*=2);let M;l===1?(l=2,M=0):M=(r+Math.random())*1e3,m(M)}let T=!1;function N(j){T||(T=!0,p(),!f&&(i!==null?(j||(l=2),clearTimeout(i),m(0)):j||(l=1)))}return m(0),s=setTimeout(()=>{a=!0,N(!0)},n),N}function Wq(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xq(t){return t!==void 0}function Kq(t){return typeof t=="object"&&!Array.isArray(t)}function zx(t){return typeof t=="string"||t instanceof String}function pS(t){return Bx()&&t instanceof Blob}function Bx(){return typeof Blob<"u"}function gS(t,e,n,r){if(r<e)throw vb(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw vb(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function N3(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Wl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Wl||(Wl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qq(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(e,n,r,i,s,a,l,c,f,h,m,p=!0,y=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=h,this.connectionFactory_=m,this.retry=p,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,N)=>{this.resolve_=T,this.reject_=N,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new tp(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=l=>{const c=l.loaded,f=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const l=s.getErrorCode()===Wl.NO_ERROR,c=s.getStatus();if(!l||Qq(c,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Wl.ABORT;r(!1,new tp(!1,null,h));return}const f=this.successCodes_.indexOf(c)!==-1;r(!0,new tp(f,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());Xq(c)?s(c):s()}catch(c){a(c)}else if(l!==null){const c=Vx();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(i.canceled){const c=this.appDelete_?C3():Uq();a(c)}else{const c=Lq();a(c)}};this.canceled_?n(!1,new tp(!1,null,!0)):this.backoffId_=Yq(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Wq(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Jq(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function eG(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tG(t,e){e&&(t["X-Firebase-GMPID"]=e)}function nG(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function rG(t,e,n,r,i,s,a=!0,l=!1){const c=N3(t.urlParams),f=t.url+c,h=Object.assign({},t.headers);return tG(h,e),Jq(h,n),eG(h,s),nG(h,r),new Zq(f,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iG(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function sG(...t){const e=iG();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Bx())return new Blob(t);throw new Nn(Cn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function aG(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oG(t){if(typeof atob>"u")throw qq("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Py{constructor(e,n){this.data=e,this.contentType=n||null}}function I3(t,e){switch(t){case rs.RAW:return new Py(D3(e));case rs.BASE64:case rs.BASE64URL:return new Py(O3(t,e));case rs.DATA_URL:return new Py(uG(e),cG(e))}throw Vx()}function D3(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=t.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function lG(t){let e;try{e=decodeURIComponent(t)}catch{throw Nf(rs.DATA_URL,"Malformed data URL.")}return D3(e)}function O3(t,e){switch(t){case rs.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Nf(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case rs.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Nf(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=oG(e)}catch(i){throw i.message.includes("polyfill")?i:Nf(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class M3{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Nf(rs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=hG(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function uG(t){const e=new M3(t);return e.base64?O3(rs.BASE64,e.rest):lG(e.rest)}function cG(t){return new M3(t).contentType}function hG(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n){let r=0,i="";pS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(pS(this.data_)){const r=this.data_,i=aG(r,e,n);return i===null?null:new bo(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new bo(r,!0)}}static getBlob(...e){if(Bx()){const n=e.map(r=>r instanceof bo?r.data_:r);return new bo(sG.apply(null,n))}else{const n=e.map(a=>zx(a)?I3(rs.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(a=>{for(let l=0;l<a.length;l++)i[s++]=a[l]}),new bo(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(t){let e;try{e=JSON.parse(t)}catch{return null}return Kq(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fG(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function dG(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function k3(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mG(t,e){return e}class Br{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||mG}}let np=null;function pG(t){return!zx(t)||t.length<2?t:k3(t)}function P3(){if(np)return np;const t=[];t.push(new Br("bucket")),t.push(new Br("generation")),t.push(new Br("metageneration")),t.push(new Br("name","fullPath",!0));function e(s,a){return pG(a)}const n=new Br("name");n.xform=e,t.push(n);function r(s,a){return a!==void 0?Number(a):a}const i=new Br("size");return i.xform=r,t.push(i),t.push(new Br("timeCreated")),t.push(new Br("updated")),t.push(new Br("md5Hash",null,!0)),t.push(new Br("cacheControl",null,!0)),t.push(new Br("contentDisposition",null,!0)),t.push(new Br("contentEncoding",null,!0)),t.push(new Br("contentLanguage",null,!0)),t.push(new Br("contentType",null,!0)),t.push(new Br("metadata","customMetadata",!0)),np=t,np}function gG(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Ai(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function vG(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const a=n[s];r[a.local]=a.xform(r,e[a.server])}return gG(r,t),r}function L3(t,e,n){const r=j3(e);return r===null?null:vG(t,r,n)}function yG(t,e,n,r){const i=j3(e);if(i===null||!zx(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(f=>{const h=t.bucket,m=t.fullPath,p="/b/"+a(h)+"/o/"+a(m),y=Fx(p,n,r),T=N3({alt:"media",token:f});return y+T})[0]}function _G(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class U3{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(t){if(!t)throw Vx()}function bG(t,e){function n(r,i){const s=L3(t,i,e);return V3(s!==null),s}return n}function xG(t,e){function n(r,i){const s=L3(t,i,e);return V3(s!==null),yG(s,i,t.host,t._protocol)}return n}function z3(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=kq():i=jq():n.getStatus()===402?i=Mq(t.bucket):n.getStatus()===403?i=Pq(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function wG(t){const e=z3(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Oq(t.path)),s.serverResponse=i.serverResponse,s}return n}function EG(t,e,n){const r=e.fullServerUrl(),i=Fx(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,l=new U3(i,s,xG(t,n),a);return l.errorHandler=wG(e),l}function TG(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function AG(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=TG(null,e)),r}function SG(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let M="";for(let U=0;U<2;U++)M=M+Math.random().toString().slice(2);return M}const c=l();a["Content-Type"]="multipart/related; boundary="+c;const f=AG(e,r,i),h=_G(f,n),m="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+f.contentType+`\r
\r
`,p=`\r
--`+c+"--",y=bo.getBlob(m,r,p);if(y===null)throw Fq();const T={name:f.fullPath},N=Fx(s,t.host,t._protocol),j="POST",A=t.maxUploadRetryTime,C=new U3(N,j,bG(t,n),A);return C.urlParams=T,C.headers=a,C.body=y.uploadData(),C.errorHandler=z3(e),C}class RG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw $h("cannot .send() more than once");if(Fa(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $h("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $h("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $h("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $h("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class CG extends RG{initXhr(){this.xhr_.responseType="text"}}function B3(){return new CG}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n){this._service=e,n instanceof Ai?this._location=n:this._location=Ai.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ru(e,n)}get root(){const e=new Ai(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return k3(this._location.path)}get storage(){return this._service}get parent(){const e=fG(this._location.path);if(e===null)return null;const n=new Ai(this._location.bucket,e);return new ru(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Gq(e)}}function F3(t,e,n){t._throwIfRoot("uploadBytes");const r=SG(t.storage,t._location,P3(),new bo(e,!0),n);return t.storage.makeRequestWithTokens(r,B3).then(i=>({metadata:i,ref:t}))}function NG(t,e,n=rs.RAW,r){t._throwIfRoot("uploadString");const i=I3(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),F3(t,i.data,s)}function IG(t){t._throwIfRoot("getDownloadURL");const e=EG(t.storage,t._location,P3());return t.storage.makeRequestWithTokens(e,B3).then(n=>{if(n===null)throw Hq();return n})}function DG(t,e){const n=dG(t._location.path,e),r=new Ai(t._location.bucket,n);return new ru(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OG(t){return/^[A-Za-z]+:\/\//.test(t)}function MG(t,e){return new ru(t,e)}function H3(t,e){if(t instanceof Hx){const n=t;if(n._bucket==null)throw Bq();const r=new ru(n,n._bucket);return e!=null?H3(r,e):r}else return e!==void 0?DG(t,e):t}function jG(t,e){if(e&&OG(e)){if(t instanceof Hx)return MG(t,e);throw vb("To use ref(service, url), the first argument must be a Storage instance.")}else return H3(t,e)}function vS(t,e){const n=e==null?void 0:e[R3];return n==null?null:Ai.makeFromBucketSpec(n,t)}function kG(t,e,n,r={}){t.host=`${e}:${n}`;const i=Fa(e);i&&(ov(`https://${t.host}/b`),lv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:dI(s,t.app.options.projectId))}class Hx{constructor(e,n,r,i,s,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=S3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Iq,this._maxUploadRetryTime=Dq,this._requests=new Set,i!=null?this._bucket=Ai.makeFromBucketSpec(i,this._host):this._bucket=vS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ai.makeFromBucketSpec(this._url,e):this._bucket=vS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ru(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new $q(C3());{const a=rG(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const yS="@firebase/storage",_S="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3="storage";function PG(t,e,n){return t=Wt(t),F3(t,e,n)}function G3(t,e,n,r){return t=Wt(t),NG(t,e,n,r)}function qx(t){return t=Wt(t),IG(t)}function Gx(t,e){return t=Wt(t),jG(t,e)}function $3(t=uv(),e){t=Wt(t);const r=xd(t,q3).getImmediate({identifier:e}),i=V1("storage");return i&&LG(r,...i),r}function LG(t,e,n,r={}){kG(t,e,n,r)}function UG(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Hx(n,r,i,e,cu)}function VG(){Go(new ka(q3,UG,"PUBLIC").setMultipleInstances(!0)),is(yS,_S,""),is(yS,_S,"esm2017")}VG();const Ly={apiKey:"AIzaSyBivqXghVKoxfSsJVXxmNi3n2yO1l2U9zU",authDomain:"runica-heros-folio.firebaseapp.com",projectId:"runica-heros-folio",storageBucket:"runica-heros-folio.firebasestorage.app",messagingSenderId:"1092943227692",appId:"1:1092943227692:web:342ed3d5e7c682b7eb9a89",measurementId:"G-GKS7XV7YEW"};let uc,yb,_b,bb;if(Ly.apiKey&&Ly.projectId)try{uc=gI(Ly),yb=fB(uc),_b=hq(uc,"runica-db"),bb=$3(uc),console.log("Firebase initialized successfully.")}catch(t){console.error("Error initializing Firebase. Please check your configuration.",t)}else console.warn("Firebase configuration environment variables are not set. Cloud features are disabled.");const ta=()=>{if(!uc||!yb||!_b||!bb)throw new Error("Firebase is not initialized. Make sure your environment variables are set.");return{app:uc,auth:yb,db:_b,storage:bb}},zG=new ba,BG=()=>{try{const{auth:t}=ta();return xz(t,zG).then(()=>{})}catch{return alert("Firebase is not configured. Cloud sign-in is disabled. Please update firebaseConfig.ts."),Promise.resolve()}},FG=()=>{try{const{auth:t}=ta();return tz(t)}catch{return Promise.resolve()}},HG=t=>{try{const{auth:e}=ta();return ez(e,t)}catch{return t(null),()=>{}}};function qG(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function Y3(t,e){return new Promise(function(n,r){let i;return GG(t).then(function(s){try{return i=s,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(a){return r(a)}},r)})}const GG=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const s=new DataView(i);let a=0;if(s.getUint16(a)!==65496)return n("not a valid JPEG");for(a+=2;;){const l=s.getUint16(a);if(l===65498)break;const c=s.getUint16(a+2);if(l===65505&&s.getUint32(a+4)===1165519206){const f=a+10;let h;switch(s.getUint16(f)){case 18761:h=!0;break;case 19789:h=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(f+2,h)!==42)return n("TIFF header contains invalid version");const m=s.getUint32(f+4,h),p=f+m+2+12*s.getUint16(f+m,h);for(let y=f+m+2;y<p;y+=12)if(s.getUint16(y,h)==274){if(s.getUint16(y+2,h)!==3)return n("Orientation data type is invalid");if(s.getUint32(y+4,h)!==1)return n("Orientation data count is invalid");s.setUint16(y+8,1,h);break}return e(i.slice(a,a+2+c))}a+=2+c}return e(new Blob)}),r.readAsArrayBuffer(t)});var Ig={},$G={get exports(){return Ig},set exports(t){Ig=t}};(function(t){var e,n,r={};$G.exports=r,r.parse=function(i,s){for(var a=r.bin.readUshort,l=r.bin.readUint,c=0,f={},h=new Uint8Array(i),m=h.length-4;l(h,m)!=101010256;)m--;c=m,c+=4;var p=a(h,c+=4);a(h,c+=2);var y=l(h,c+=2),T=l(h,c+=4);c+=4,c=T;for(var N=0;N<p;N++){l(h,c),c+=4,c+=4,c+=4,l(h,c+=4),y=l(h,c+=4);var j=l(h,c+=4),A=a(h,c+=4),C=a(h,c+2),M=a(h,c+4);c+=6;var U=l(h,c+=8);c+=4,c+=A+C+M,r._readLocal(h,U,f,y,j,s)}return f},r._readLocal=function(i,s,a,l,c,f){var h=r.bin.readUshort,m=r.bin.readUint;m(i,s),h(i,s+=4),h(i,s+=2);var p=h(i,s+=2);m(i,s+=2),m(i,s+=4),s+=4;var y=h(i,s+=8),T=h(i,s+=2);s+=2;var N=r.bin.readUTF8(i,s,y);if(s+=y,s+=T,f)a[N]={size:c,csize:l};else{var j=new Uint8Array(i.buffer,s);if(p==0)a[N]=new Uint8Array(j.buffer.slice(s,s+l));else{if(p!=8)throw"unknown compression method: "+p;var A=new Uint8Array(c);r.inflateRaw(j,A),a[N]=A}}},r.inflateRaw=function(i,s){return r.F.inflate(i,s)},r.inflate=function(i,s){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),s)},r.deflate=function(i,s){s==null&&(s={level:6});var a=0,l=new Uint8Array(50+Math.floor(1.1*i.length));l[a]=120,l[a+1]=156,a+=2,a=r.F.deflateRaw(i,l,a,s.level);var c=r.adler(i,0,i.length);return l[a+0]=c>>>24&255,l[a+1]=c>>>16&255,l[a+2]=c>>>8&255,l[a+3]=c>>>0&255,new Uint8Array(l.buffer,0,a+4)},r.deflateRaw=function(i,s){s==null&&(s={level:6});var a=new Uint8Array(50+Math.floor(1.1*i.length)),l=r.F.deflateRaw(i,a,l,s.level);return new Uint8Array(a.buffer,0,l)},r.encode=function(i,s){s==null&&(s=!1);var a=0,l=r.bin.writeUint,c=r.bin.writeUshort,f={};for(var h in i){var m=!r._noNeed(h)&&!s,p=i[h],y=r.crc.crc(p,0,p.length);f[h]={cpr:m,usize:p.length,crc:y,file:m?r.deflateRaw(p):p}}for(var h in f)a+=f[h].file.length+30+46+2*r.bin.sizeUTF8(h);a+=22;var T=new Uint8Array(a),N=0,j=[];for(var h in f){var A=f[h];j.push(N),N=r._writeHeader(T,N,h,A,0)}var C=0,M=N;for(var h in f)A=f[h],j.push(N),N=r._writeHeader(T,N,h,A,1,j[C++]);var U=N-M;return l(T,N,101010256),N+=4,c(T,N+=4,C),c(T,N+=2,C),l(T,N+=2,U),l(T,N+=4,M),N+=4,N+=2,T.buffer},r._noNeed=function(i){var s=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},r._writeHeader=function(i,s,a,l,c,f){var h=r.bin.writeUint,m=r.bin.writeUshort,p=l.file;return h(i,s,c==0?67324752:33639248),s+=4,c==1&&(s+=2),m(i,s,20),m(i,s+=2,0),m(i,s+=2,l.cpr?8:0),h(i,s+=2,0),h(i,s+=4,l.crc),h(i,s+=4,p.length),h(i,s+=4,l.usize),m(i,s+=4,r.bin.sizeUTF8(a)),m(i,s+=2,0),s+=2,c==1&&(s+=2,s+=2,h(i,s+=6,f),s+=4),s+=r.bin.writeUTF8(i,s,a),c==0&&(i.set(p,s),s+=p.length),s},r.crc={table:function(){for(var i=new Uint32Array(256),s=0;s<256;s++){for(var a=s,l=0;l<8;l++)1&a?a=3988292384^a>>>1:a>>>=1;i[s]=a}return i}(),update:function(i,s,a,l){for(var c=0;c<l;c++)i=r.crc.table[255&(i^s[a+c])]^i>>>8;return i},crc:function(i,s,a){return 4294967295^r.crc.update(4294967295,i,s,a)}},r.adler=function(i,s,a){for(var l=1,c=0,f=s,h=s+a;f<h;){for(var m=Math.min(f+5552,h);f<m;)c+=l+=i[f++];l%=65521,c%=65521}return c<<16|l},r.bin={readUshort:function(i,s){return i[s]|i[s+1]<<8},writeUshort:function(i,s,a){i[s]=255&a,i[s+1]=a>>8&255},readUint:function(i,s){return 16777216*i[s+3]+(i[s+2]<<16|i[s+1]<<8|i[s])},writeUint:function(i,s,a){i[s]=255&a,i[s+1]=a>>8&255,i[s+2]=a>>16&255,i[s+3]=a>>24&255},readASCII:function(i,s,a){for(var l="",c=0;c<a;c++)l+=String.fromCharCode(i[s+c]);return l},writeASCII:function(i,s,a){for(var l=0;l<a.length;l++)i[s+l]=a.charCodeAt(l)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,s,a){for(var l,c="",f=0;f<a;f++)c+="%"+r.bin.pad(i[s+f].toString(16));try{l=decodeURIComponent(c)}catch{return r.bin.readASCII(i,s,a)}return l},writeUTF8:function(i,s,a){for(var l=a.length,c=0,f=0;f<l;f++){var h=a.charCodeAt(f);if(!(4294967168&h))i[s+c]=h,c++;else if(!(4294965248&h))i[s+c]=192|h>>6,i[s+c+1]=128|h>>0&63,c+=2;else if(!(4294901760&h))i[s+c]=224|h>>12,i[s+c+1]=128|h>>6&63,i[s+c+2]=128|h>>0&63,c+=3;else{if(4292870144&h)throw"e";i[s+c]=240|h>>18,i[s+c+1]=128|h>>12&63,i[s+c+2]=128|h>>6&63,i[s+c+3]=128|h>>0&63,c+=4}}return c},sizeUTF8:function(i){for(var s=i.length,a=0,l=0;l<s;l++){var c=i.charCodeAt(l);if(!(4294967168&c))a++;else if(!(4294965248&c))a+=2;else if(!(4294901760&c))a+=3;else{if(4292870144&c)throw"e";a+=4}}return a}},r.F={},r.F.deflateRaw=function(i,s,a,l){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],f=r.F.U,h=r.F._goodIndex;r.F._hash;var m=r.F._putsE,p=0,y=a<<3,T=0,N=i.length;if(l==0){for(;p<N;)m(s,y,p+(k=Math.min(65535,N-p))==N?1:0),y=r.F._copyExact(i,p,k,s,y+8),p+=k;return y>>>3}var j=f.lits,A=f.strt,C=f.prev,M=0,U=0,H=0,D=0,E=0,_=0;for(N>2&&(A[_=r.F._hash(i,0)]=0),p=0;p<N;p++){if(E=_,p+1<N-2){_=r.F._hash(i,p+1);var w=p+1&32767;C[w]=A[_],A[_]=w}if(T<=p){(M>14e3||U>26697)&&N-p>100&&(T<p&&(j[M]=p-T,M+=2,T=p),y=r.F._writeBlock(p==N-1||T==N?1:0,j,M,D,i,H,p-H,s,y),M=U=D=0,H=p);var R=0;p<N-2&&(R=r.F._bestMatch(i,p,C,E,Math.min(c[2],N-p),c[3]));var k=R>>>16,P=65535&R;if(R!=0){P=65535&R;var O=h(k=R>>>16,f.of0);f.lhst[257+O]++;var G=h(P,f.df0);f.dhst[G]++,D+=f.exb[O]+f.dxb[G],j[M]=k<<23|p-T,j[M+1]=P<<16|O<<8|G,M+=2,T=p+k}else f.lhst[i[p]]++;U++}}for(H==p&&i.length!=0||(T<p&&(j[M]=p-T,M+=2,T=p),y=r.F._writeBlock(1,j,M,D,i,H,p-H,s,y),M=0,U=0,M=U=D=0,H=p);7&y;)y++;return y>>>3},r.F._bestMatch=function(i,s,a,l,c,f){var h=32767&s,m=a[h],p=h-m+32768&32767;if(m==h||l!=r.F._hash(i,s-p))return 0;for(var y=0,T=0,N=Math.min(32767,s);p<=N&&--f!=0&&m!=h;){if(y==0||i[s+y]==i[s+y-p]){var j=r.F._howLong(i,s,p);if(j>y){if(T=p,(y=j)>=c)break;p+2<j&&(j=p+2);for(var A=0,C=0;C<j-2;C++){var M=s-p+C+32768&32767,U=M-a[M]+32768&32767;U>A&&(A=U,m=M)}}}p+=(h=m)-(m=a[h])+32768&32767}return y<<16|T},r.F._howLong=function(i,s,a){if(i[s]!=i[s-a]||i[s+1]!=i[s+1-a]||i[s+2]!=i[s+2-a])return 0;var l=s,c=Math.min(i.length,s+258);for(s+=3;s<c&&i[s]==i[s-a];)s++;return s-l},r.F._hash=function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,s,a,l,c,f,h,m,p){var y,T,N,j,A,C,M,U,H,D=r.F.U,E=r.F._putsF,_=r.F._putsE;D.lhst[256]++,T=(y=r.F.getTrees())[0],N=y[1],j=y[2],A=y[3],C=y[4],M=y[5],U=y[6],H=y[7];var w=32+(p+3&7?8-(p+3&7):0)+(h<<3),R=l+r.F.contSize(D.fltree,D.lhst)+r.F.contSize(D.fdtree,D.dhst),k=l+r.F.contSize(D.ltree,D.lhst)+r.F.contSize(D.dtree,D.dhst);k+=14+3*M+r.F.contSize(D.itree,D.ihst)+(2*D.ihst[16]+3*D.ihst[17]+7*D.ihst[18]);for(var P=0;P<286;P++)D.lhst[P]=0;for(P=0;P<30;P++)D.dhst[P]=0;for(P=0;P<19;P++)D.ihst[P]=0;var O=w<R&&w<k?0:R<k?1:2;if(E(m,p,i),E(m,p+1,O),p+=3,O==0){for(;7&p;)p++;p=r.F._copyExact(c,f,h,m,p)}else{var G,Z;if(O==1&&(G=D.fltree,Z=D.fdtree),O==2){r.F.makeCodes(D.ltree,T),r.F.revCodes(D.ltree,T),r.F.makeCodes(D.dtree,N),r.F.revCodes(D.dtree,N),r.F.makeCodes(D.itree,j),r.F.revCodes(D.itree,j),G=D.ltree,Z=D.dtree,_(m,p,A-257),_(m,p+=5,C-1),_(m,p+=5,M-4),p+=4;for(var z=0;z<M;z++)_(m,p+3*z,D.itree[1+(D.ordr[z]<<1)]);p+=3*M,p=r.F._codeTiny(U,D.itree,m,p),p=r.F._codeTiny(H,D.itree,m,p)}for(var V=f,J=0;J<a;J+=2){for(var ee=s[J],ie=ee>>>23,_e=V+(8388607&ee);V<_e;)p=r.F._writeLit(c[V++],G,m,p);if(ie!=0){var me=s[J+1],ye=me>>16,W=me>>8&255,X=255&me;_(m,p=r.F._writeLit(257+W,G,m,p),ie-D.of0[W]),p+=D.exb[W],E(m,p=r.F._writeLit(X,Z,m,p),ye-D.df0[X]),p+=D.dxb[X],V+=ie}}p=r.F._writeLit(256,G,m,p)}return p},r.F._copyExact=function(i,s,a,l,c){var f=c>>>3;return l[f]=a,l[f+1]=a>>>8,l[f+2]=255-l[f],l[f+3]=255-l[f+1],f+=4,l.set(new Uint8Array(i.buffer,s,a),f),c+(a+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,s=r.F._hufTree(i.lhst,i.ltree,15),a=r.F._hufTree(i.dhst,i.dtree,15),l=[],c=r.F._lenCodes(i.ltree,l),f=[],h=r.F._lenCodes(i.dtree,f),m=0;m<l.length;m+=2)i.ihst[l[m]]++;for(m=0;m<f.length;m+=2)i.ihst[f[m]]++;for(var p=r.F._hufTree(i.ihst,i.itree,7),y=19;y>4&&i.itree[1+(i.ordr[y-1]<<1)]==0;)y--;return[s,a,p,c,h,y,l,f]},r.F.getSecond=function(i){for(var s=[],a=0;a<i.length;a+=2)s.push(i[a+1]);return s},r.F.nonZero=function(i){for(var s="",a=0;a<i.length;a+=2)i[a+1]!=0&&(s+=(a>>1)+",");return s},r.F.contSize=function(i,s){for(var a=0,l=0;l<s.length;l++)a+=s[l]*i[1+(l<<1)];return a},r.F._codeTiny=function(i,s,a,l){for(var c=0;c<i.length;c+=2){var f=i[c],h=i[c+1];l=r.F._writeLit(f,s,a,l);var m=f==16?2:f==17?3:7;f>15&&(r.F._putsE(a,l,h,m),l+=m)}return l},r.F._lenCodes=function(i,s){for(var a=i.length;a!=2&&i[a-1]==0;)a-=2;for(var l=0;l<a;l+=2){var c=i[l+1],f=l+3<a?i[l+3]:-1,h=l+5<a?i[l+5]:-1,m=l==0?-1:i[l-1];if(c==0&&f==c&&h==c){for(var p=l+5;p+2<a&&i[p+2]==c;)p+=2;(y=Math.min(p+1-l>>>1,138))<11?s.push(17,y-3):s.push(18,y-11),l+=2*y-2}else if(c==m&&f==c&&h==c){for(p=l+5;p+2<a&&i[p+2]==c;)p+=2;var y=Math.min(p+1-l>>>1,6);s.push(16,y-3),l+=2*y-2}else s.push(c,0)}return a>>>1},r.F._hufTree=function(i,s,a){var l=[],c=i.length,f=s.length,h=0;for(h=0;h<f;h+=2)s[h]=0,s[h+1]=0;for(h=0;h<c;h++)i[h]!=0&&l.push({lit:h,f:i[h]});var m=l.length,p=l.slice(0);if(m==0)return 0;if(m==1){var y=l[0].lit;return p=y==0?1:0,s[1+(y<<1)]=1,s[1+(p<<1)]=1,1}l.sort(function(U,H){return U.f-H.f});var T=l[0],N=l[1],j=0,A=1,C=2;for(l[0]={lit:-1,f:T.f+N.f,l:T,r:N,d:0};A!=m-1;)T=j!=A&&(C==m||l[j].f<l[C].f)?l[j++]:l[C++],N=j!=A&&(C==m||l[j].f<l[C].f)?l[j++]:l[C++],l[A++]={lit:-1,f:T.f+N.f,l:T,r:N};var M=r.F.setDepth(l[A-1],0);for(M>a&&(r.F.restrictDepth(p,a,M),M=a),h=0;h<m;h++)s[1+(p[h].lit<<1)]=p[h].d;return M},r.F.setDepth=function(i,s){return i.lit!=-1?(i.d=s,s):Math.max(r.F.setDepth(i.l,s+1),r.F.setDepth(i.r,s+1))},r.F.restrictDepth=function(i,s,a){var l=0,c=1<<a-s,f=0;for(i.sort(function(m,p){return p.d==m.d?m.f-p.f:p.d-m.d}),l=0;l<i.length&&i[l].d>s;l++){var h=i[l].d;i[l].d=s,f+=c-(1<<a-h)}for(f>>>=a-s;f>0;)(h=i[l].d)<s?(i[l].d++,f-=1<<s-h-1):l++;for(;l>=0;l--)i[l].d==s&&f<0&&(i[l].d--,f++);f!=0&&console.log("debt left")},r.F._goodIndex=function(i,s){var a=0;return s[16|a]<=i&&(a|=16),s[8|a]<=i&&(a|=8),s[4|a]<=i&&(a|=4),s[2|a]<=i&&(a|=2),s[1|a]<=i&&(a|=1),a},r.F._writeLit=function(i,s,a,l){return r.F._putsF(a,l,s[i<<1]),l+s[1+(i<<1)]},r.F.inflate=function(i,s){var a=Uint8Array;if(i[0]==3&&i[1]==0)return s||new a(0);var l=r.F,c=l._bitsF,f=l._bitsE,h=l._decodeTiny,m=l.makeCodes,p=l.codes2map,y=l._get17,T=l.U,N=s==null;N&&(s=new a(i.length>>>2<<3));for(var j,A,C=0,M=0,U=0,H=0,D=0,E=0,_=0,w=0,R=0;C==0;)if(C=c(i,R,1),M=c(i,R+1,2),R+=3,M!=0){if(N&&(s=r.F._check(s,w+(1<<17))),M==1&&(j=T.flmap,A=T.fdmap,E=511,_=31),M==2){U=f(i,R,5)+257,H=f(i,R+5,5)+1,D=f(i,R+10,4)+4,R+=14;for(var k=0;k<38;k+=2)T.itree[k]=0,T.itree[k+1]=0;var P=1;for(k=0;k<D;k++){var O=f(i,R+3*k,3);T.itree[1+(T.ordr[k]<<1)]=O,O>P&&(P=O)}R+=3*D,m(T.itree,P),p(T.itree,P,T.imap),j=T.lmap,A=T.dmap,R=h(T.imap,(1<<P)-1,U+H,i,R,T.ttree);var G=l._copyOut(T.ttree,0,U,T.ltree);E=(1<<G)-1;var Z=l._copyOut(T.ttree,U,H,T.dtree);_=(1<<Z)-1,m(T.ltree,G),p(T.ltree,G,j),m(T.dtree,Z),p(T.dtree,Z,A)}for(;;){var z=j[y(i,R)&E];R+=15&z;var V=z>>>4;if(!(V>>>8))s[w++]=V;else{if(V==256)break;var J=w+V-254;if(V>264){var ee=T.ldef[V-257];J=w+(ee>>>3)+f(i,R,7&ee),R+=7&ee}var ie=A[y(i,R)&_];R+=15&ie;var _e=ie>>>4,me=T.ddef[_e],ye=(me>>>4)+c(i,R,15&me);for(R+=15&me,N&&(s=r.F._check(s,w+(1<<17)));w<J;)s[w]=s[w++-ye],s[w]=s[w++-ye],s[w]=s[w++-ye],s[w]=s[w++-ye];w=J}}}else{7&R&&(R+=8-(7&R));var W=4+(R>>>3),X=i[W-4]|i[W-3]<<8;N&&(s=r.F._check(s,w+X)),s.set(new a(i.buffer,i.byteOffset+W,X),w),R=W+X<<3,w+=X}return s.length==w?s:s.slice(0,w)},r.F._check=function(i,s){var a=i.length;if(s<=a)return i;var l=new Uint8Array(Math.max(a<<1,s));return l.set(i,0),l},r.F._decodeTiny=function(i,s,a,l,c,f){for(var h=r.F._bitsE,m=r.F._get17,p=0;p<a;){var y=i[m(l,c)&s];c+=15&y;var T=y>>>4;if(T<=15)f[p]=T,p++;else{var N=0,j=0;T==16?(j=3+h(l,c,2),c+=2,N=f[p-1]):T==17?(j=3+h(l,c,3),c+=3):T==18&&(j=11+h(l,c,7),c+=7);for(var A=p+j;p<A;)f[p]=N,p++}}return c},r.F._copyOut=function(i,s,a,l){for(var c=0,f=0,h=l.length>>>1;f<a;){var m=i[f+s];l[f<<1]=0,l[1+(f<<1)]=m,m>c&&(c=m),f++}for(;f<h;)l[f<<1]=0,l[1+(f<<1)]=0,f++;return c},r.F.makeCodes=function(i,s){for(var a,l,c,f,h=r.F.U,m=i.length,p=h.bl_count,y=0;y<=s;y++)p[y]=0;for(y=1;y<m;y+=2)p[i[y]]++;var T=h.next_code;for(a=0,p[0]=0,l=1;l<=s;l++)a=a+p[l-1]<<1,T[l]=a;for(c=0;c<m;c+=2)(f=i[c+1])!=0&&(i[c]=T[f],T[f]++)},r.F.codes2map=function(i,s,a){for(var l=i.length,c=r.F.U.rev15,f=0;f<l;f+=2)if(i[f+1]!=0)for(var h=f>>1,m=i[f+1],p=h<<4|m,y=s-m,T=i[f]<<y,N=T+(1<<y);T!=N;)a[c[T]>>>15-s]=p,T++},r.F.revCodes=function(i,s){for(var a=r.F.U.rev15,l=15-s,c=0;c<i.length;c+=2){var f=i[c]<<s-i[c+1];i[c]=a[f]>>>l}},r.F._putsE=function(i,s,a){a<<=7&s;var l=s>>>3;i[l]|=a,i[l+1]|=a>>>8},r.F._putsF=function(i,s,a){a<<=7&s;var l=s>>>3;i[l]|=a,i[l+1]|=a>>>8,i[l+2]|=a>>>16},r.F._bitsE=function(i,s,a){return(i[s>>>3]|i[1+(s>>>3)]<<8)>>>(7&s)&(1<<a)-1},r.F._bitsF=function(i,s,a){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)&(1<<a)-1},r.F._get17=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)},r.F._get25=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16|i[3+(s>>>3)]<<24)>>>(7&s)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,s=0;s<32768;s++){var a=s;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,i.rev15[s]=(a>>>16|a<<16)>>>17}function l(c,f,h){for(;f--!=0;)c.push(0,h)}for(s=0;s<32;s++)i.ldef[s]=i.of0[s]<<3|i.exb[s],i.ddef[s]=i.df0[s]<<4|i.dxb[s];l(i.fltree,144,8),l(i.fltree,112,9),l(i.fltree,24,7),l(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),l(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),l(i.itree,19,0),l(i.ltree,286,0),l(i.dtree,30,0),l(i.ttree,320,0)}()})();var YG=qG({__proto__:null,default:Ig},[Ig]);const _s=function(){var t={nextZero(h,m){for(;h[m]!=0;)m++;return m},readUshort:(h,m)=>h[m]<<8|h[m+1],writeUshort(h,m,p){h[m]=p>>8&255,h[m+1]=255&p},readUint:(h,m)=>16777216*h[m]+(h[m+1]<<16|h[m+2]<<8|h[m+3]),writeUint(h,m,p){h[m]=p>>24&255,h[m+1]=p>>16&255,h[m+2]=p>>8&255,h[m+3]=255&p},readASCII(h,m,p){let y="";for(let T=0;T<p;T++)y+=String.fromCharCode(h[m+T]);return y},writeASCII(h,m,p){for(let y=0;y<p.length;y++)h[m+y]=p.charCodeAt(y)},readBytes(h,m,p){const y=[];for(let T=0;T<p;T++)y.push(h[m+T]);return y},pad:h=>h.length<2?`0${h}`:h,readUTF8(h,m,p){let y,T="";for(let N=0;N<p;N++)T+=`%${t.pad(h[m+N].toString(16))}`;try{y=decodeURIComponent(T)}catch{return t.readASCII(h,m,p)}return y}};function e(h,m,p,y){const T=m*p,N=s(y),j=Math.ceil(m*N/8),A=new Uint8Array(4*T),C=new Uint32Array(A.buffer),{ctype:M}=y,{depth:U}=y,H=t.readUshort;if(M==6){const ee=T<<2;if(U==8)for(var D=0;D<ee;D+=4)A[D]=h[D],A[D+1]=h[D+1],A[D+2]=h[D+2],A[D+3]=h[D+3];if(U==16)for(D=0;D<ee;D++)A[D]=h[D<<1]}else if(M==2){const ee=y.tabs.tRNS;if(ee==null){if(U==8)for(D=0;D<T;D++){var E=3*D;C[D]=255<<24|h[E+2]<<16|h[E+1]<<8|h[E]}if(U==16)for(D=0;D<T;D++)E=6*D,C[D]=255<<24|h[E+4]<<16|h[E+2]<<8|h[E]}else{var _=ee[0];const ie=ee[1],_e=ee[2];if(U==8)for(D=0;D<T;D++){var w=D<<2;E=3*D,C[D]=255<<24|h[E+2]<<16|h[E+1]<<8|h[E],h[E]==_&&h[E+1]==ie&&h[E+2]==_e&&(A[w+3]=0)}if(U==16)for(D=0;D<T;D++)w=D<<2,E=6*D,C[D]=255<<24|h[E+4]<<16|h[E+2]<<8|h[E],H(h,E)==_&&H(h,E+2)==ie&&H(h,E+4)==_e&&(A[w+3]=0)}}else if(M==3){const ee=y.tabs.PLTE,ie=y.tabs.tRNS,_e=ie?ie.length:0;if(U==1)for(var R=0;R<p;R++){var k=R*j,P=R*m;for(D=0;D<m;D++){w=P+D<<2;var O=3*(G=h[k+(D>>3)]>>7-((7&D)<<0)&1);A[w]=ee[O],A[w+1]=ee[O+1],A[w+2]=ee[O+2],A[w+3]=G<_e?ie[G]:255}}if(U==2)for(R=0;R<p;R++)for(k=R*j,P=R*m,D=0;D<m;D++)w=P+D<<2,O=3*(G=h[k+(D>>2)]>>6-((3&D)<<1)&3),A[w]=ee[O],A[w+1]=ee[O+1],A[w+2]=ee[O+2],A[w+3]=G<_e?ie[G]:255;if(U==4)for(R=0;R<p;R++)for(k=R*j,P=R*m,D=0;D<m;D++)w=P+D<<2,O=3*(G=h[k+(D>>1)]>>4-((1&D)<<2)&15),A[w]=ee[O],A[w+1]=ee[O+1],A[w+2]=ee[O+2],A[w+3]=G<_e?ie[G]:255;if(U==8)for(D=0;D<T;D++){var G;w=D<<2,O=3*(G=h[D]),A[w]=ee[O],A[w+1]=ee[O+1],A[w+2]=ee[O+2],A[w+3]=G<_e?ie[G]:255}}else if(M==4){if(U==8)for(D=0;D<T;D++){w=D<<2;var Z=h[z=D<<1];A[w]=Z,A[w+1]=Z,A[w+2]=Z,A[w+3]=h[z+1]}if(U==16)for(D=0;D<T;D++){var z;w=D<<2,Z=h[z=D<<2],A[w]=Z,A[w+1]=Z,A[w+2]=Z,A[w+3]=h[z+2]}}else if(M==0)for(_=y.tabs.tRNS?y.tabs.tRNS:-1,R=0;R<p;R++){const ee=R*j,ie=R*m;if(U==1)for(var V=0;V<m;V++){var J=(Z=255*(h[ee+(V>>>3)]>>>7-(7&V)&1))==255*_?0:255;C[ie+V]=J<<24|Z<<16|Z<<8|Z}else if(U==2)for(V=0;V<m;V++)J=(Z=85*(h[ee+(V>>>2)]>>>6-((3&V)<<1)&3))==85*_?0:255,C[ie+V]=J<<24|Z<<16|Z<<8|Z;else if(U==4)for(V=0;V<m;V++)J=(Z=17*(h[ee+(V>>>1)]>>>4-((1&V)<<2)&15))==17*_?0:255,C[ie+V]=J<<24|Z<<16|Z<<8|Z;else if(U==8)for(V=0;V<m;V++)J=(Z=h[ee+V])==_?0:255,C[ie+V]=J<<24|Z<<16|Z<<8|Z;else if(U==16)for(V=0;V<m;V++)Z=h[ee+(V<<1)],J=H(h,ee+(V<<1))==_?0:255,C[ie+V]=J<<24|Z<<16|Z<<8|Z}return A}function n(h,m,p,y){const T=s(h),N=Math.ceil(p*T/8),j=new Uint8Array((N+1+h.interlace)*y);return m=h.tabs.CgBI?i(m,j):r(m,j),h.interlace==0?m=a(m,h,0,p,y):h.interlace==1&&(m=function(C,M){const U=M.width,H=M.height,D=s(M),E=D>>3,_=Math.ceil(U*D/8),w=new Uint8Array(H*_);let R=0;const k=[0,0,4,0,2,0,1],P=[0,4,0,2,0,1,0],O=[8,8,8,4,4,2,2],G=[8,8,4,4,2,2,1];let Z=0;for(;Z<7;){const V=O[Z],J=G[Z];let ee=0,ie=0,_e=k[Z];for(;_e<H;)_e+=V,ie++;let me=P[Z];for(;me<U;)me+=J,ee++;const ye=Math.ceil(ee*D/8);a(C,M,R,ee,ie);let W=0,X=k[Z];for(;X<H;){let ce=P[Z],Oe=R+W*ye<<3;for(;ce<U;){var z;if(D==1&&(z=(z=C[Oe>>3])>>7-(7&Oe)&1,w[X*_+(ce>>3)]|=z<<7-((7&ce)<<0)),D==2&&(z=(z=C[Oe>>3])>>6-(7&Oe)&3,w[X*_+(ce>>2)]|=z<<6-((3&ce)<<1)),D==4&&(z=(z=C[Oe>>3])>>4-(7&Oe)&15,w[X*_+(ce>>1)]|=z<<4-((1&ce)<<2)),D>=8){const je=X*_+ce*E;for(let $e=0;$e<E;$e++)w[je+$e]=C[(Oe>>3)+$e]}Oe+=D,ce+=J}W++,X+=V}ee*ie!=0&&(R+=ie*(1+ye)),Z+=1}return w}(m,h)),m}function r(h,m){return i(new Uint8Array(h.buffer,2,h.length-6),m)}var i=function(){const h={H:{}};return h.H.N=function(m,p){const y=Uint8Array;let T,N,j=0,A=0,C=0,M=0,U=0,H=0,D=0,E=0,_=0;if(m[0]==3&&m[1]==0)return p||new y(0);const w=h.H,R=w.b,k=w.e,P=w.R,O=w.n,G=w.A,Z=w.Z,z=w.m,V=p==null;for(V&&(p=new y(m.length>>>2<<5));j==0;)if(j=R(m,_,1),A=R(m,_+1,2),_+=3,A!=0){if(V&&(p=h.H.W(p,E+(1<<17))),A==1&&(T=z.J,N=z.h,H=511,D=31),A==2){C=k(m,_,5)+257,M=k(m,_+5,5)+1,U=k(m,_+10,4)+4,_+=14;let ee=1;for(var J=0;J<38;J+=2)z.Q[J]=0,z.Q[J+1]=0;for(J=0;J<U;J++){const me=k(m,_+3*J,3);z.Q[1+(z.X[J]<<1)]=me,me>ee&&(ee=me)}_+=3*U,O(z.Q,ee),G(z.Q,ee,z.u),T=z.w,N=z.d,_=P(z.u,(1<<ee)-1,C+M,m,_,z.v);const ie=w.V(z.v,0,C,z.C);H=(1<<ie)-1;const _e=w.V(z.v,C,M,z.D);D=(1<<_e)-1,O(z.C,ie),G(z.C,ie,T),O(z.D,_e),G(z.D,_e,N)}for(;;){const ee=T[Z(m,_)&H];_+=15&ee;const ie=ee>>>4;if(!(ie>>>8))p[E++]=ie;else{if(ie==256)break;{let _e=E+ie-254;if(ie>264){const ce=z.q[ie-257];_e=E+(ce>>>3)+k(m,_,7&ce),_+=7&ce}const me=N[Z(m,_)&D];_+=15&me;const ye=me>>>4,W=z.c[ye],X=(W>>>4)+R(m,_,15&W);for(_+=15&W;E<_e;)p[E]=p[E++-X],p[E]=p[E++-X],p[E]=p[E++-X],p[E]=p[E++-X];E=_e}}}}else{7&_&&(_+=8-(7&_));const ee=4+(_>>>3),ie=m[ee-4]|m[ee-3]<<8;V&&(p=h.H.W(p,E+ie)),p.set(new y(m.buffer,m.byteOffset+ee,ie),E),_=ee+ie<<3,E+=ie}return p.length==E?p:p.slice(0,E)},h.H.W=function(m,p){const y=m.length;if(p<=y)return m;const T=new Uint8Array(y<<1);return T.set(m,0),T},h.H.R=function(m,p,y,T,N,j){const A=h.H.e,C=h.H.Z;let M=0;for(;M<y;){const U=m[C(T,N)&p];N+=15&U;const H=U>>>4;if(H<=15)j[M]=H,M++;else{let D=0,E=0;H==16?(E=3+A(T,N,2),N+=2,D=j[M-1]):H==17?(E=3+A(T,N,3),N+=3):H==18&&(E=11+A(T,N,7),N+=7);const _=M+E;for(;M<_;)j[M]=D,M++}}return N},h.H.V=function(m,p,y,T){let N=0,j=0;const A=T.length>>>1;for(;j<y;){const C=m[j+p];T[j<<1]=0,T[1+(j<<1)]=C,C>N&&(N=C),j++}for(;j<A;)T[j<<1]=0,T[1+(j<<1)]=0,j++;return N},h.H.n=function(m,p){const y=h.H.m,T=m.length;let N,j,A,C;const M=y.j;for(var U=0;U<=p;U++)M[U]=0;for(U=1;U<T;U+=2)M[m[U]]++;const H=y.K;for(N=0,M[0]=0,j=1;j<=p;j++)N=N+M[j-1]<<1,H[j]=N;for(A=0;A<T;A+=2)C=m[A+1],C!=0&&(m[A]=H[C],H[C]++)},h.H.A=function(m,p,y){const T=m.length,N=h.H.m.r;for(let j=0;j<T;j+=2)if(m[j+1]!=0){const A=j>>1,C=m[j+1],M=A<<4|C,U=p-C;let H=m[j]<<U;const D=H+(1<<U);for(;H!=D;)y[N[H]>>>15-p]=M,H++}},h.H.l=function(m,p){const y=h.H.m.r,T=15-p;for(let N=0;N<m.length;N+=2){const j=m[N]<<p-m[N+1];m[N]=y[j]>>>T}},h.H.M=function(m,p,y){y<<=7&p;const T=p>>>3;m[T]|=y,m[T+1]|=y>>>8},h.H.I=function(m,p,y){y<<=7&p;const T=p>>>3;m[T]|=y,m[T+1]|=y>>>8,m[T+2]|=y>>>16},h.H.e=function(m,p,y){return(m[p>>>3]|m[1+(p>>>3)]<<8)>>>(7&p)&(1<<y)-1},h.H.b=function(m,p,y){return(m[p>>>3]|m[1+(p>>>3)]<<8|m[2+(p>>>3)]<<16)>>>(7&p)&(1<<y)-1},h.H.Z=function(m,p){return(m[p>>>3]|m[1+(p>>>3)]<<8|m[2+(p>>>3)]<<16)>>>(7&p)},h.H.i=function(m,p){return(m[p>>>3]|m[1+(p>>>3)]<<8|m[2+(p>>>3)]<<16|m[3+(p>>>3)]<<24)>>>(7&p)},h.H.m=function(){const m=Uint16Array,p=Uint32Array;return{K:new m(16),j:new m(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new m(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new p(32),J:new m(512),_:[],h:new m(32),$:[],w:new m(32768),C:[],v:[],d:new m(32768),D:[],u:new m(512),Q:[],r:new m(32768),s:new p(286),Y:new p(30),a:new p(19),t:new p(15e3),k:new m(65536),g:new m(32768)}}(),function(){const m=h.H.m;for(var p=0;p<32768;p++){let T=p;T=(2863311530&T)>>>1|(1431655765&T)<<1,T=(3435973836&T)>>>2|(858993459&T)<<2,T=(4042322160&T)>>>4|(252645135&T)<<4,T=(4278255360&T)>>>8|(16711935&T)<<8,m.r[p]=(T>>>16|T<<16)>>>17}function y(T,N,j){for(;N--!=0;)T.push(0,j)}for(p=0;p<32;p++)m.q[p]=m.S[p]<<3|m.T[p],m.c[p]=m.p[p]<<4|m.z[p];y(m._,144,8),y(m._,112,9),y(m._,24,7),y(m._,8,8),h.H.n(m._,9),h.H.A(m._,9,m.J),h.H.l(m._,9),y(m.$,32,5),h.H.n(m.$,5),h.H.A(m.$,5,m.h),h.H.l(m.$,5),y(m.Q,19,0),y(m.C,286,0),y(m.D,30,0),y(m.v,320,0)}(),h.H.N}();function s(h){return[1,null,3,1,2,null,4][h.ctype]*h.depth}function a(h,m,p,y,T){let N=s(m);const j=Math.ceil(y*N/8);let A,C;N=Math.ceil(N/8);let M=h[p],U=0;if(M>1&&(h[p]=[0,0,1][M-2]),M==3)for(U=N;U<j;U++)h[U+1]=h[U+1]+(h[U+1-N]>>>1)&255;for(let H=0;H<T;H++)if(A=p+H*j,C=A+H+1,M=h[C-1],U=0,M==0)for(;U<j;U++)h[A+U]=h[C+U];else if(M==1){for(;U<N;U++)h[A+U]=h[C+U];for(;U<j;U++)h[A+U]=h[C+U]+h[A+U-N]}else if(M==2)for(;U<j;U++)h[A+U]=h[C+U]+h[A+U-j];else if(M==3){for(;U<N;U++)h[A+U]=h[C+U]+(h[A+U-j]>>>1);for(;U<j;U++)h[A+U]=h[C+U]+(h[A+U-j]+h[A+U-N]>>>1)}else{for(;U<N;U++)h[A+U]=h[C+U]+l(0,h[A+U-j],0);for(;U<j;U++)h[A+U]=h[C+U]+l(h[A+U-N],h[A+U-j],h[A+U-N-j])}return h}function l(h,m,p){const y=h+m-p,T=y-h,N=y-m,j=y-p;return T*T<=N*N&&T*T<=j*j?h:N*N<=j*j?m:p}function c(h,m,p){p.width=t.readUint(h,m),m+=4,p.height=t.readUint(h,m),m+=4,p.depth=h[m],m++,p.ctype=h[m],m++,p.compress=h[m],m++,p.filter=h[m],m++,p.interlace=h[m],m++}function f(h,m,p,y,T,N,j,A,C){const M=Math.min(m,T),U=Math.min(p,N);let H=0,D=0;for(let Z=0;Z<U;Z++)for(let z=0;z<M;z++)if(j>=0&&A>=0?(H=Z*m+z<<2,D=(A+Z)*T+j+z<<2):(H=(-A+Z)*m-j+z<<2,D=Z*T+z<<2),C==0)y[D]=h[H],y[D+1]=h[H+1],y[D+2]=h[H+2],y[D+3]=h[H+3];else if(C==1){var E=h[H+3]*.00392156862745098,_=h[H]*E,w=h[H+1]*E,R=h[H+2]*E,k=y[D+3]*(1/255),P=y[D]*k,O=y[D+1]*k,G=y[D+2]*k;const V=1-E,J=E+k*V,ee=J==0?0:1/J;y[D+3]=255*J,y[D+0]=(_+P*V)*ee,y[D+1]=(w+O*V)*ee,y[D+2]=(R+G*V)*ee}else if(C==2)E=h[H+3],_=h[H],w=h[H+1],R=h[H+2],k=y[D+3],P=y[D],O=y[D+1],G=y[D+2],E==k&&_==P&&w==O&&R==G?(y[D]=0,y[D+1]=0,y[D+2]=0,y[D+3]=0):(y[D]=_,y[D+1]=w,y[D+2]=R,y[D+3]=E);else if(C==3){if(E=h[H+3],_=h[H],w=h[H+1],R=h[H+2],k=y[D+3],P=y[D],O=y[D+1],G=y[D+2],E==k&&_==P&&w==O&&R==G)continue;if(E<220&&k>20)return!1}return!0}return{decode:function(m){const p=new Uint8Array(m);let y=8;const T=t,N=T.readUshort,j=T.readUint,A={tabs:{},frames:[]},C=new Uint8Array(p.length);let M,U=0,H=0;const D=[137,80,78,71,13,10,26,10];for(var E=0;E<8;E++)if(p[E]!=D[E])throw"The input is not a PNG file!";for(;y<p.length;){const Z=T.readUint(p,y);y+=4;const z=T.readASCII(p,y,4);if(y+=4,z=="IHDR")c(p,y,A);else if(z=="iCCP"){for(var _=y;p[_]!=0;)_++;T.readASCII(p,y,_-y),p[_+1];const V=p.slice(_+2,y+Z);let J=null;try{J=r(V)}catch{J=i(V)}A.tabs[z]=J}else if(z=="CgBI")A.tabs[z]=p.slice(y,y+4);else if(z=="IDAT"){for(E=0;E<Z;E++)C[U+E]=p[y+E];U+=Z}else if(z=="acTL")A.tabs[z]={num_frames:j(p,y),num_plays:j(p,y+4)},M=new Uint8Array(p.length);else if(z=="fcTL"){H!=0&&((G=A.frames[A.frames.length-1]).data=n(A,M.slice(0,H),G.rect.width,G.rect.height),H=0);const V={x:j(p,y+12),y:j(p,y+16),width:j(p,y+4),height:j(p,y+8)};let J=N(p,y+22);J=N(p,y+20)/(J==0?100:J);const ee={rect:V,delay:Math.round(1e3*J),dispose:p[y+24],blend:p[y+25]};A.frames.push(ee)}else if(z=="fdAT"){for(E=0;E<Z-4;E++)M[H+E]=p[y+E+4];H+=Z-4}else if(z=="pHYs")A.tabs[z]=[T.readUint(p,y),T.readUint(p,y+4),p[y+8]];else if(z=="cHRM")for(A.tabs[z]=[],E=0;E<8;E++)A.tabs[z].push(T.readUint(p,y+4*E));else if(z=="tEXt"||z=="zTXt"){A.tabs[z]==null&&(A.tabs[z]={});var w=T.nextZero(p,y),R=T.readASCII(p,y,w-y),k=y+Z-w-1;if(z=="tEXt")O=T.readASCII(p,w+1,k);else{var P=r(p.slice(w+2,w+2+k));O=T.readUTF8(P,0,P.length)}A.tabs[z][R]=O}else if(z=="iTXt"){A.tabs[z]==null&&(A.tabs[z]={}),w=0,_=y,w=T.nextZero(p,_),R=T.readASCII(p,_,w-_);const V=p[_=w+1];var O;p[_+1],_+=2,w=T.nextZero(p,_),T.readASCII(p,_,w-_),_=w+1,w=T.nextZero(p,_),T.readUTF8(p,_,w-_),k=Z-((_=w+1)-y),V==0?O=T.readUTF8(p,_,k):(P=r(p.slice(_,_+k)),O=T.readUTF8(P,0,P.length)),A.tabs[z][R]=O}else if(z=="PLTE")A.tabs[z]=T.readBytes(p,y,Z);else if(z=="hIST"){const V=A.tabs.PLTE.length/3;for(A.tabs[z]=[],E=0;E<V;E++)A.tabs[z].push(N(p,y+2*E))}else if(z=="tRNS")A.ctype==3?A.tabs[z]=T.readBytes(p,y,Z):A.ctype==0?A.tabs[z]=N(p,y):A.ctype==2&&(A.tabs[z]=[N(p,y),N(p,y+2),N(p,y+4)]);else if(z=="gAMA")A.tabs[z]=T.readUint(p,y)/1e5;else if(z=="sRGB")A.tabs[z]=p[y];else if(z=="bKGD")A.ctype==0||A.ctype==4?A.tabs[z]=[N(p,y)]:A.ctype==2||A.ctype==6?A.tabs[z]=[N(p,y),N(p,y+2),N(p,y+4)]:A.ctype==3&&(A.tabs[z]=p[y]);else if(z=="IEND")break;y+=Z,T.readUint(p,y),y+=4}var G;return H!=0&&((G=A.frames[A.frames.length-1]).data=n(A,M.slice(0,H),G.rect.width,G.rect.height)),A.data=n(A,C,A.width,A.height),delete A.compress,delete A.interlace,delete A.filter,A},toRGBA8:function(m){const p=m.width,y=m.height;if(m.tabs.acTL==null)return[e(m.data,p,y,m).buffer];const T=[];m.frames[0].data==null&&(m.frames[0].data=m.data);const N=p*y*4,j=new Uint8Array(N),A=new Uint8Array(N),C=new Uint8Array(N);for(let U=0;U<m.frames.length;U++){const H=m.frames[U],D=H.rect.x,E=H.rect.y,_=H.rect.width,w=H.rect.height,R=e(H.data,_,w,m);if(U!=0)for(var M=0;M<N;M++)C[M]=j[M];if(H.blend==0?f(R,_,w,j,p,y,D,E,0):H.blend==1&&f(R,_,w,j,p,y,D,E,1),T.push(j.buffer.slice(0)),H.dispose!=0){if(H.dispose==1)f(A,_,w,j,p,y,D,E,0);else if(H.dispose==2)for(M=0;M<N;M++)j[M]=C[M]}}return T},_paeth:l,_copyTile:f,_bin:t}}();(function(){const{_copyTile:t}=_s,{_bin:e}=_s,n=_s._paeth;var r={table:function(){const _=new Uint32Array(256);for(let w=0;w<256;w++){let R=w;for(let k=0;k<8;k++)1&R?R=3988292384^R>>>1:R>>>=1;_[w]=R}return _}(),update(_,w,R,k){for(let P=0;P<k;P++)_=r.table[255&(_^w[R+P])]^_>>>8;return _},crc:(_,w,R)=>4294967295^r.update(4294967295,_,w,R)};function i(_,w,R,k){w[R]+=_[0]*k>>4,w[R+1]+=_[1]*k>>4,w[R+2]+=_[2]*k>>4,w[R+3]+=_[3]*k>>4}function s(_){return Math.max(0,Math.min(255,_))}function a(_,w){const R=_[0]-w[0],k=_[1]-w[1],P=_[2]-w[2],O=_[3]-w[3];return R*R+k*k+P*P+O*O}function l(_,w,R,k,P,O,G){G==null&&(G=1);const Z=k.length,z=[];for(var V=0;V<Z;V++){const X=k[V];z.push([X>>>0&255,X>>>8&255,X>>>16&255,X>>>24&255])}for(V=0;V<Z;V++){let X=4294967295;for(var J=0,ee=0;ee<Z;ee++){var ie=a(z[V],z[ee]);ee!=V&&ie<X&&(X=ie,J=ee)}}const _e=new Uint32Array(P.buffer),me=new Int16Array(w*R*4),ye=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(V=0;V<ye.length;V++)ye[V]=255*((ye[V]+.5)/16-.5);for(let X=0;X<R;X++)for(let ce=0;ce<w;ce++){var W;V=4*(X*w+ce),G!=2?W=[s(_[V]+me[V]),s(_[V+1]+me[V+1]),s(_[V+2]+me[V+2]),s(_[V+3]+me[V+3])]:(ie=ye[4*(3&X)+(3&ce)],W=[s(_[V]+ie),s(_[V+1]+ie),s(_[V+2]+ie),s(_[V+3]+ie)]),J=0;let Oe=16777215;for(ee=0;ee<Z;ee++){const Pe=a(W,z[ee]);Pe<Oe&&(Oe=Pe,J=ee)}const je=z[J],$e=[W[0]-je[0],W[1]-je[1],W[2]-je[2],W[3]-je[3]];G==1&&(ce!=w-1&&i($e,me,V+4,7),X!=R-1&&(ce!=0&&i($e,me,V+4*w-4,3),i($e,me,V+4*w,5),ce!=w-1&&i($e,me,V+4*w+4,1))),O[V>>2]=J,_e[V>>2]=k[J]}}function c(_,w,R,k,P){P==null&&(P={});const{crc:O}=r,G=e.writeUint,Z=e.writeUshort,z=e.writeASCII;let V=8;const J=_.frames.length>1;let ee,ie=!1,_e=33+(J?20:0);if(P.sRGB!=null&&(_e+=13),P.pHYs!=null&&(_e+=21),P.iCCP!=null&&(ee=pako.deflate(P.iCCP),_e+=21+ee.length+4),_.ctype==3){for(var me=_.plte.length,ye=0;ye<me;ye++)_.plte[ye]>>>24!=255&&(ie=!0);_e+=8+3*me+4+(ie?8+1*me+4:0)}for(var W=0;W<_.frames.length;W++)J&&(_e+=38),_e+=(je=_.frames[W]).cimg.length+12,W!=0&&(_e+=4);_e+=12;const X=new Uint8Array(_e),ce=[137,80,78,71,13,10,26,10];for(ye=0;ye<8;ye++)X[ye]=ce[ye];if(G(X,V,13),V+=4,z(X,V,"IHDR"),V+=4,G(X,V,w),V+=4,G(X,V,R),V+=4,X[V]=_.depth,V++,X[V]=_.ctype,V++,X[V]=0,V++,X[V]=0,V++,X[V]=0,V++,G(X,V,O(X,V-17,17)),V+=4,P.sRGB!=null&&(G(X,V,1),V+=4,z(X,V,"sRGB"),V+=4,X[V]=P.sRGB,V++,G(X,V,O(X,V-5,5)),V+=4),P.iCCP!=null){const $e=13+ee.length;G(X,V,$e),V+=4,z(X,V,"iCCP"),V+=4,z(X,V,"ICC profile"),V+=11,V+=2,X.set(ee,V),V+=ee.length,G(X,V,O(X,V-($e+4),$e+4)),V+=4}if(P.pHYs!=null&&(G(X,V,9),V+=4,z(X,V,"pHYs"),V+=4,G(X,V,P.pHYs[0]),V+=4,G(X,V,P.pHYs[1]),V+=4,X[V]=P.pHYs[2],V++,G(X,V,O(X,V-13,13)),V+=4),J&&(G(X,V,8),V+=4,z(X,V,"acTL"),V+=4,G(X,V,_.frames.length),V+=4,G(X,V,P.loop!=null?P.loop:0),V+=4,G(X,V,O(X,V-12,12)),V+=4),_.ctype==3){for(G(X,V,3*(me=_.plte.length)),V+=4,z(X,V,"PLTE"),V+=4,ye=0;ye<me;ye++){const $e=3*ye,Pe=_.plte[ye],gt=255&Pe,Ye=Pe>>>8&255,In=Pe>>>16&255;X[V+$e+0]=gt,X[V+$e+1]=Ye,X[V+$e+2]=In}if(V+=3*me,G(X,V,O(X,V-3*me-4,3*me+4)),V+=4,ie){for(G(X,V,me),V+=4,z(X,V,"tRNS"),V+=4,ye=0;ye<me;ye++)X[V+ye]=_.plte[ye]>>>24&255;V+=me,G(X,V,O(X,V-me-4,me+4)),V+=4}}let Oe=0;for(W=0;W<_.frames.length;W++){var je=_.frames[W];J&&(G(X,V,26),V+=4,z(X,V,"fcTL"),V+=4,G(X,V,Oe++),V+=4,G(X,V,je.rect.width),V+=4,G(X,V,je.rect.height),V+=4,G(X,V,je.rect.x),V+=4,G(X,V,je.rect.y),V+=4,Z(X,V,k[W]),V+=2,Z(X,V,1e3),V+=2,X[V]=je.dispose,V++,X[V]=je.blend,V++,G(X,V,O(X,V-30,30)),V+=4);const $e=je.cimg;G(X,V,(me=$e.length)+(W==0?0:4)),V+=4;const Pe=V;z(X,V,W==0?"IDAT":"fdAT"),V+=4,W!=0&&(G(X,V,Oe++),V+=4),X.set($e,V),V+=me,G(X,V,O(X,Pe,V-Pe)),V+=4}return G(X,V,0),V+=4,z(X,V,"IEND"),V+=4,G(X,V,O(X,V-4,4)),V+=4,X.buffer}function f(_,w,R){for(let k=0;k<_.frames.length;k++){const P=_.frames[k];P.rect.width;const O=P.rect.height,G=new Uint8Array(O*P.bpl+O);P.cimg=y(P.img,O,P.bpp,P.bpl,G,w,R)}}function h(_,w,R,k,P){const O=P[0],G=P[1],Z=P[2],z=P[3],V=P[4],J=P[5];let ee=6,ie=8,_e=255;for(var me=0;me<_.length;me++){const Ut=new Uint8Array(_[me]);for(var ye=Ut.length,W=0;W<ye;W+=4)_e&=Ut[W+3]}const X=_e!=255,ce=function(it,Et,rn,Xt,st,yn){const At=[];for(var et=0;et<it.length;et++){const sn=new Uint8Array(it[et]),wn=new Uint32Array(sn.buffer);var Ht;let cn=0,an=0,Ln=Et,ir=rn,Oi=Xt?1:0;if(et!=0){const ra=yn||Xt||et==1||At[et-2].dispose!=0?1:2;let Mi=0,ji=1e9;for(let ci=0;ci<ra;ci++){var Ot=new Uint8Array(it[et-1-ci]);const Gr=new Uint32Array(it[et-1-ci]);let Wn=Et,Tr=rn,Xn=-1,ki=-1;for(let sr=0;sr<rn;sr++)for(let Un=0;Un<Et;Un++)wn[at=sr*Et+Un]!=Gr[at]&&(Un<Wn&&(Wn=Un),Un>Xn&&(Xn=Un),sr<Tr&&(Tr=sr),sr>ki&&(ki=sr));Xn==-1&&(Wn=Tr=Xn=ki=0),st&&((1&Wn)==1&&Wn--,(1&Tr)==1&&Tr--);const Pi=(Xn-Wn+1)*(ki-Tr+1);Pi<ji&&(ji=Pi,Mi=ci,cn=Wn,an=Tr,Ln=Xn-Wn+1,ir=ki-Tr+1)}Ot=new Uint8Array(it[et-1-Mi]),Mi==1&&(At[et-1].dispose=2),Ht=new Uint8Array(Ln*ir*4),t(Ot,Et,rn,Ht,Ln,ir,-cn,-an,0),Oi=t(sn,Et,rn,Ht,Ln,ir,-cn,-an,3)?1:0,Oi==1?p(sn,Et,rn,Ht,{x:cn,y:an,width:Ln,height:ir}):t(sn,Et,rn,Ht,Ln,ir,-cn,-an,0)}else Ht=sn.slice(0);At.push({rect:{x:cn,y:an,width:Ln,height:ir},img:Ht,blend:Oi,dispose:0})}if(Xt)for(et=0;et<At.length;et++){if((un=At[et]).blend==1)continue;const sn=un.rect,wn=At[et-1].rect,cn=Math.min(sn.x,wn.x),an=Math.min(sn.y,wn.y),Ln={x:cn,y:an,width:Math.max(sn.x+sn.width,wn.x+wn.width)-cn,height:Math.max(sn.y+sn.height,wn.y+wn.height)-an};At[et-1].dispose=1,et-1!=0&&m(it,Et,rn,At,et-1,Ln,st),m(it,Et,rn,At,et,Ln,st)}let Mt=0;if(it.length!=1)for(var at=0;at<At.length;at++){var un;Mt+=(un=At[at]).rect.width*un.rect.height}return At}(_,w,R,O,G,Z),Oe={},je=[],$e=[];if(k!=0){const Ut=[];for(W=0;W<ce.length;W++)Ut.push(ce[W].img.buffer);const it=function(st){let yn=0;for(var At=0;At<st.length;At++)yn+=st[At].byteLength;const et=new Uint8Array(yn);let Ht=0;for(At=0;At<st.length;At++){const Ot=new Uint8Array(st[At]),Mt=Ot.length;for(let at=0;at<Mt;at+=4){let un=Ot[at],sn=Ot[at+1],wn=Ot[at+2];const cn=Ot[at+3];cn==0&&(un=sn=wn=0),et[Ht+at]=un,et[Ht+at+1]=sn,et[Ht+at+2]=wn,et[Ht+at+3]=cn}Ht+=Mt}return et.buffer}(Ut),Et=N(it,k);for(W=0;W<Et.plte.length;W++)je.push(Et.plte[W].est.rgba);let rn=0;for(W=0;W<ce.length;W++){const Xt=(gt=ce[W]).img.length;var Pe=new Uint8Array(Et.inds.buffer,rn>>2,Xt>>2);$e.push(Pe);const st=new Uint8Array(Et.abuf,rn,Xt);J&&l(gt.img,gt.rect.width,gt.rect.height,je,st,Pe),gt.img.set(st),rn+=Xt}}else for(me=0;me<ce.length;me++){var gt=ce[me];const Ut=new Uint32Array(gt.img.buffer);var Ye=gt.rect.width;for(ye=Ut.length,Pe=new Uint8Array(ye),$e.push(Pe),W=0;W<ye;W++){const it=Ut[W];if(W!=0&&it==Ut[W-1])Pe[W]=Pe[W-1];else if(W>Ye&&it==Ut[W-Ye])Pe[W]=Pe[W-Ye];else{let Et=Oe[it];if(Et==null&&(Oe[it]=Et=je.length,je.push(it),je.length>=300))break;Pe[W]=Et}}}const In=je.length;for(In<=256&&V==0&&(ie=In<=2?1:In<=4?2:In<=16?4:8,ie=Math.max(ie,z)),me=0;me<ce.length;me++){(gt=ce[me]).rect.x,gt.rect.y,Ye=gt.rect.width;const Ut=gt.rect.height;let it=gt.img;new Uint32Array(it.buffer);let Et=4*Ye,rn=4;if(In<=256&&V==0){Et=Math.ceil(ie*Ye/8);var Lt=new Uint8Array(Et*Ut);const Xt=$e[me];for(let st=0;st<Ut;st++){W=st*Et;const yn=st*Ye;if(ie==8)for(var bt=0;bt<Ye;bt++)Lt[W+bt]=Xt[yn+bt];else if(ie==4)for(bt=0;bt<Ye;bt++)Lt[W+(bt>>1)]|=Xt[yn+bt]<<4-4*(1&bt);else if(ie==2)for(bt=0;bt<Ye;bt++)Lt[W+(bt>>2)]|=Xt[yn+bt]<<6-2*(3&bt);else if(ie==1)for(bt=0;bt<Ye;bt++)Lt[W+(bt>>3)]|=Xt[yn+bt]<<7-1*(7&bt)}it=Lt,ee=3,rn=1}else if(X==0&&ce.length==1){Lt=new Uint8Array(Ye*Ut*3);const Xt=Ye*Ut;for(W=0;W<Xt;W++){const st=3*W,yn=4*W;Lt[st]=it[yn],Lt[st+1]=it[yn+1],Lt[st+2]=it[yn+2]}it=Lt,ee=2,rn=3,Et=3*Ye}gt.img=it,gt.bpl=Et,gt.bpp=rn}return{ctype:ee,depth:ie,plte:je,frames:ce}}function m(_,w,R,k,P,O,G){const Z=Uint8Array,z=Uint32Array,V=new Z(_[P-1]),J=new z(_[P-1]),ee=P+1<_.length?new Z(_[P+1]):null,ie=new Z(_[P]),_e=new z(ie.buffer);let me=w,ye=R,W=-1,X=-1;for(let Oe=0;Oe<O.height;Oe++)for(let je=0;je<O.width;je++){const $e=O.x+je,Pe=O.y+Oe,gt=Pe*w+$e,Ye=_e[gt];Ye==0||k[P-1].dispose==0&&J[gt]==Ye&&(ee==null||ee[4*gt+3]!=0)||($e<me&&(me=$e),$e>W&&(W=$e),Pe<ye&&(ye=Pe),Pe>X&&(X=Pe))}W==-1&&(me=ye=W=X=0),G&&((1&me)==1&&me--,(1&ye)==1&&ye--),O={x:me,y:ye,width:W-me+1,height:X-ye+1};const ce=k[P];ce.rect=O,ce.blend=1,ce.img=new Uint8Array(O.width*O.height*4),k[P-1].dispose==0?(t(V,w,R,ce.img,O.width,O.height,-O.x,-O.y,0),p(ie,w,R,ce.img,O)):t(ie,w,R,ce.img,O.width,O.height,-O.x,-O.y,0)}function p(_,w,R,k,P){t(_,w,R,k,P.width,P.height,-P.x,-P.y,2)}function y(_,w,R,k,P,O,G){const Z=[];let z,V=[0,1,2,3,4];O!=-1?V=[O]:(w*k>5e5||R==1)&&(V=[0]),G&&(z={level:0});const J=YG;for(var ee=0;ee<V.length;ee++){for(let me=0;me<w;me++)T(P,_,me,k,R,V[ee]);Z.push(J.deflate(P,z))}let ie,_e=1e9;for(ee=0;ee<Z.length;ee++)Z[ee].length<_e&&(ie=ee,_e=Z[ee].length);return Z[ie]}function T(_,w,R,k,P,O){const G=R*k;let Z=G+R;if(_[Z]=O,Z++,O==0)if(k<500)for(var z=0;z<k;z++)_[Z+z]=w[G+z];else _.set(new Uint8Array(w.buffer,G,k),Z);else if(O==1){for(z=0;z<P;z++)_[Z+z]=w[G+z];for(z=P;z<k;z++)_[Z+z]=w[G+z]-w[G+z-P]+256&255}else if(R==0){for(z=0;z<P;z++)_[Z+z]=w[G+z];if(O==2)for(z=P;z<k;z++)_[Z+z]=w[G+z];if(O==3)for(z=P;z<k;z++)_[Z+z]=w[G+z]-(w[G+z-P]>>1)+256&255;if(O==4)for(z=P;z<k;z++)_[Z+z]=w[G+z]-n(w[G+z-P],0,0)+256&255}else{if(O==2)for(z=0;z<k;z++)_[Z+z]=w[G+z]+256-w[G+z-k]&255;if(O==3){for(z=0;z<P;z++)_[Z+z]=w[G+z]+256-(w[G+z-k]>>1)&255;for(z=P;z<k;z++)_[Z+z]=w[G+z]+256-(w[G+z-k]+w[G+z-P]>>1)&255}if(O==4){for(z=0;z<P;z++)_[Z+z]=w[G+z]+256-n(0,w[G+z-k],0)&255;for(z=P;z<k;z++)_[Z+z]=w[G+z]+256-n(w[G+z-P],w[G+z-k],w[G+z-P-k])&255}}}function N(_,w){const R=new Uint8Array(_),k=R.slice(0),P=new Uint32Array(k.buffer),O=j(k,w),G=O[0],Z=O[1],z=R.length,V=new Uint8Array(z>>2);let J;if(R.length<2e7)for(var ee=0;ee<z;ee+=4)J=A(G,ie=R[ee]*(1/255),_e=R[ee+1]*(1/255),me=R[ee+2]*(1/255),ye=R[ee+3]*(1/255)),V[ee>>2]=J.ind,P[ee>>2]=J.est.rgba;else for(ee=0;ee<z;ee+=4){var ie=R[ee]*.00392156862745098,_e=R[ee+1]*(1/255),me=R[ee+2]*(1/255),ye=R[ee+3]*(1/255);for(J=G;J.left;)J=C(J.est,ie,_e,me,ye)<=0?J.left:J.right;V[ee>>2]=J.ind,P[ee>>2]=J.est.rgba}return{abuf:k.buffer,inds:V,plte:Z}}function j(_,w,R){R==null&&(R=1e-4);const k=new Uint32Array(_.buffer),P={i0:0,i1:_.length,bst:null,est:null,tdst:0,left:null,right:null};P.bst=H(_,P.i0,P.i1),P.est=D(P.bst);const O=[P];for(;O.length<w;){let Z=0,z=0;for(var G=0;G<O.length;G++)O[G].est.L>Z&&(Z=O[G].est.L,z=G);if(Z<R)break;const V=O[z],J=M(_,k,V.i0,V.i1,V.est.e,V.est.eMq255);if(V.i0>=J||V.i1<=J){V.est.L=0;continue}const ee={i0:V.i0,i1:J,bst:null,est:null,tdst:0,left:null,right:null};ee.bst=H(_,ee.i0,ee.i1),ee.est=D(ee.bst);const ie={i0:J,i1:V.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ie.bst={R:[],m:[],N:V.bst.N-ee.bst.N},G=0;G<16;G++)ie.bst.R[G]=V.bst.R[G]-ee.bst.R[G];for(G=0;G<4;G++)ie.bst.m[G]=V.bst.m[G]-ee.bst.m[G];ie.est=D(ie.bst),V.left=ee,V.right=ie,O[z]=ee,O.push(ie)}for(O.sort((Z,z)=>z.bst.N-Z.bst.N),G=0;G<O.length;G++)O[G].ind=G;return[P,O]}function A(_,w,R,k,P){if(_.left==null)return _.tdst=function(ee,ie,_e,me,ye){const W=ie-ee[0],X=_e-ee[1],ce=me-ee[2],Oe=ye-ee[3];return W*W+X*X+ce*ce+Oe*Oe}(_.est.q,w,R,k,P),_;const O=C(_.est,w,R,k,P);let G=_.left,Z=_.right;O>0&&(G=_.right,Z=_.left);const z=A(G,w,R,k,P);if(z.tdst<=O*O)return z;const V=A(Z,w,R,k,P);return V.tdst<z.tdst?V:z}function C(_,w,R,k,P){const{e:O}=_;return O[0]*w+O[1]*R+O[2]*k+O[3]*P-_.eMq}function M(_,w,R,k,P,O){for(k-=4;R<k;){for(;U(_,R,P)<=O;)R+=4;for(;U(_,k,P)>O;)k-=4;if(R>=k)break;const G=w[R>>2];w[R>>2]=w[k>>2],w[k>>2]=G,R+=4,k-=4}for(;U(_,R,P)>O;)R-=4;return R+4}function U(_,w,R){return _[w]*R[0]+_[w+1]*R[1]+_[w+2]*R[2]+_[w+3]*R[3]}function H(_,w,R){const k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],P=[0,0,0,0],O=R-w>>2;for(let G=w;G<R;G+=4){const Z=_[G]*.00392156862745098,z=_[G+1]*(1/255),V=_[G+2]*(1/255),J=_[G+3]*(1/255);P[0]+=Z,P[1]+=z,P[2]+=V,P[3]+=J,k[0]+=Z*Z,k[1]+=Z*z,k[2]+=Z*V,k[3]+=Z*J,k[5]+=z*z,k[6]+=z*V,k[7]+=z*J,k[10]+=V*V,k[11]+=V*J,k[15]+=J*J}return k[4]=k[1],k[8]=k[2],k[9]=k[6],k[12]=k[3],k[13]=k[7],k[14]=k[11],{R:k,m:P,N:O}}function D(_){const{R:w}=_,{m:R}=_,{N:k}=_,P=R[0],O=R[1],G=R[2],Z=R[3],z=k==0?0:1/k,V=[w[0]-P*P*z,w[1]-P*O*z,w[2]-P*G*z,w[3]-P*Z*z,w[4]-O*P*z,w[5]-O*O*z,w[6]-O*G*z,w[7]-O*Z*z,w[8]-G*P*z,w[9]-G*O*z,w[10]-G*G*z,w[11]-G*Z*z,w[12]-Z*P*z,w[13]-Z*O*z,w[14]-Z*G*z,w[15]-Z*Z*z],J=V,ee=E;let ie=[Math.random(),Math.random(),Math.random(),Math.random()],_e=0,me=0;if(k!=0)for(let W=0;W<16&&(ie=ee.multVec(J,ie),me=Math.sqrt(ee.dot(ie,ie)),ie=ee.sml(1/me,ie),!(W!=0&&Math.abs(me-_e)<1e-9));W++)_e=me;const ye=[P*z,O*z,G*z,Z*z];return{Cov:V,q:ye,e:ie,L:_e,eMq255:ee.dot(ee.sml(255,ye),ie),eMq:ee.dot(ie,ye),rgba:(Math.round(255*ye[3])<<24|Math.round(255*ye[2])<<16|Math.round(255*ye[1])<<8|Math.round(255*ye[0])<<0)>>>0}}var E={multVec:(_,w)=>[_[0]*w[0]+_[1]*w[1]+_[2]*w[2]+_[3]*w[3],_[4]*w[0]+_[5]*w[1]+_[6]*w[2]+_[7]*w[3],_[8]*w[0]+_[9]*w[1]+_[10]*w[2]+_[11]*w[3],_[12]*w[0]+_[13]*w[1]+_[14]*w[2]+_[15]*w[3]],dot:(_,w)=>_[0]*w[0]+_[1]*w[1]+_[2]*w[2]+_[3]*w[3],sml:(_,w)=>[_*w[0],_*w[1],_*w[2],_*w[3]]};_s.encode=function(w,R,k,P,O,G,Z){P==null&&(P=0),Z==null&&(Z=!1);const z=h(w,R,k,P,[!1,!1,!1,0,Z,!1]);return f(z,-1),c(z,R,k,O,G)},_s.encodeLL=function(w,R,k,P,O,G,Z,z){const V={ctype:0+(P==1?0:2)+(O==0?0:4),depth:G,frames:[]},J=(P+O)*G,ee=J*R;for(let ie=0;ie<w.length;ie++)V.frames.push({rect:{x:0,y:0,width:R,height:k},img:new Uint8Array(w[ie]),blend:0,dispose:1,bpp:Math.ceil(J/8),bpl:Math.ceil(ee/8)});return f(V,0,!0),c(V,R,k,Z,z)},_s.encode.compress=h,_s.encode.dither=l,_s.quantize=N,_s.quantize.getKDtree=j,_s.quantize.getNearest=A})();const W3={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,s=t.getContext("2d").getImageData(0,0,n,r),a=new Uint32Array(s.data.buffer),l=(32*n+31)/32<<2,c=l*r,f=122+c,h=new ArrayBuffer(f),m=new DataView(h),p=1<<20;let y,T,N,j,A=p,C=0,M=0,U=0;function H(_){m.setUint16(M,_,!0),M+=2}function D(_){m.setUint32(M,_,!0),M+=4}function E(_){M+=_}H(19778),D(f),E(4),D(122),D(108),D(n),D(-r>>>0),H(1),H(32),D(3),D(c),D(2835),D(2835),E(8),D(16711680),D(65280),D(255),D(4278190080),D(1466527264),function _(){for(;C<r&&A>0;){for(j=122+C*l,y=0;y<i;)A--,T=a[U++],N=T>>>24,m.setUint32(j+y,T<<8|N),y+=4;C++}U<a.length?(A=p,setTimeout(_,W3._dly)):e(h)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var ii={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},WG={[ii.CHROME]:16384,[ii.FIREFOX]:11180,[ii.DESKTOP_SAFARI]:16384,[ii.IE]:8192,[ii.IOS]:4096,[ii.ETC]:8192};const $x=typeof window<"u",X3=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Dg=$x&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),XG=($x||X3)&&(Dg&&Dg.getOriginalSymbol(window,"File")||typeof File<"u"&&File),K3=($x||X3)&&(Dg&&Dg.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Yx(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),s=i[0].match(/:(.*?);/)[1],a=globalThis.atob(i[1]);let l=a.length;const c=new Uint8Array(l);for(;l--;)c[l]=a.charCodeAt(l);const f=new Blob([c],{type:s});f.name=e,f.lastModified=n,r(f)})}function Q3(t){return new Promise((e,n)=>{const r=new K3;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function Z3(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function Ll(){if(Ll.cachedResult!==void 0)return Ll.cachedResult;let t=ii.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=ii.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=ii.IOS:/Safari/i.test(e)?t=ii.DESKTOP_SAFARI:/Firefox/i.test(e)?t=ii.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=ii.IE),Ll.cachedResult=t,Ll.cachedResult}function J3(t,e){const n=Ll(),r=WG[n];let i=t,s=e,a=i*s;const l=i>s?s/i:i/s;for(;a>r*r;){const c=(r+i)/2,f=(r+s)/2;c<f?(s=f,i=f*l):(s=c*l,i=c),a=i*s}return{width:i,height:s}}function Dv(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function eD(t,e){const{width:n,height:r}=J3(t.width,t.height),[i,s]=Dv(n,r);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(t,0,0,i.width,i.height),i}function Np(){return Np.cachedResult!==void 0||(Np.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Np.cachedResult}function Og(t,e={}){return new Promise(function(n,r){let i,s;var a=function(){try{return s=eD(i,e.fileType||t.type),n([i,s])}catch(c){return r(c)}},l=function(c){try{var f=function(h){try{throw h}catch(m){return r(m)}};try{let h;return Q3(t).then(function(m){try{return h=m,Z3(h).then(function(p){try{return i=p,function(){try{return a()}catch(y){return r(y)}}()}catch(y){return f(y)}},f)}catch(p){return f(p)}},f)}catch(h){f(h)}}catch(h){return r(h)}};try{if(Np()||[ii.DESKTOP_SAFARI,ii.MOBILE_SAFARI].includes(Ll()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(c){try{return i=c,a()}catch{return l()}},l)}catch{l()}})}function Mg(t,e,n,r,i=1){return new Promise(function(s,a){let l;if(e==="image/png"){let m,p,y;return m=t.getContext("2d"),{data:p}=m.getImageData(0,0,t.width,t.height),y=_s.encode([p.buffer],t.width,t.height,4096*i),l=new Blob([y],{type:e}),l.name=n,l.lastModified=r,c.call(this)}{let m=function(){return c.call(this)};var f=m;if(e==="image/bmp")return new Promise(p=>W3.toBlob(t,p)).then((function(p){try{return l=p,l.name=n,l.lastModified=r,m.call(this)}catch(y){return a(y)}}).bind(this),a);{let p=function(){return m.call(this)};var h=p;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(y){try{return l=y,l.name=n,l.lastModified=r,p.call(this)}catch(T){return a(T)}}).bind(this),a);{let y;return y=t.toDataURL(e,i),Yx(y,n,r).then((function(T){try{return l=T,p.call(this)}catch(N){return a(N)}}).bind(this),a)}}}function c(){return s(l)}})}function Ls(t){t.width=0,t.height=0}function cc(){return new Promise(function(t,e){let n,r,i,s;return cc.cachedResult!==void 0?t(cc.cachedResult):Yx("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(a){try{return n=a,Og(n).then(function(l){try{return r=l[1],Mg(r,n.type,n.name,n.lastModified).then(function(c){try{return i=c,Ls(r),Og(i).then(function(f){try{return s=f[0],cc.cachedResult=s.width===1&&s.height===2,t(cc.cachedResult)}catch(h){return e(h)}},e)}catch(f){return e(f)}},e)}catch(c){return e(c)}},e)}catch(l){return e(l)}},e)})}function tD(t){return new Promise((e,n)=>{const r=new K3;r.onload=i=>{const s=new DataView(i.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const a=s.byteLength;let l=2;for(;l<a;){if(s.getUint16(l+2,!1)<=8)return e(-1);const c=s.getUint16(l,!1);if(l+=2,c==65505){if(s.getUint32(l+=2,!1)!=1165519206)return e(-1);const f=s.getUint16(l+=6,!1)==18761;l+=s.getUint32(l+4,f);const h=s.getUint16(l,f);l+=2;for(let m=0;m<h;m++)if(s.getUint16(l+12*m,f)==274)return e(s.getUint16(l+12*m+8,f))}else{if((65280&c)!=65280)break;l+=s.getUint16(l,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function nD(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let s,a=t;return isFinite(i)&&(n>i||r>i)&&([a,s]=Dv(n,r),n>r?(a.width=i,a.height=r/n*i):(a.width=n/r*i,a.height=i),s.drawImage(t,0,0,a.width,a.height),Ls(t)),a}function rD(t,e){const{width:n}=t,{height:r}=t,[i,s]=Dv(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,r),Ls(t),i}function bS(t,e,n=0){return new Promise(function(r,i){let s,a,l,c,f,h,m,p,y,T,N,j,A,C,M,U,H,D,E,_;function w(k=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=k,e.onProgress(Math.min(s,100))}function R(k){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(k,s),100),e.onProgress(s)}return s=n,a=e.maxIteration||10,l=1024*e.maxSizeMB*1024,w(),Og(t,e).then((function(k){try{return[,c]=k,w(),f=nD(c,e),w(),new Promise(function(P,O){var G;if(!(G=e.exifOrientation))return tD(t).then((function(z){try{return G=z,Z.call(this)}catch(V){return O(V)}}).bind(this),O);function Z(){return P(G)}return Z.call(this)}).then((function(P){try{return h=P,w(),cc().then((function(O){try{return m=O?f:rD(f,h),w(),p=e.initialQuality||1,y=e.fileType||t.type,Mg(m,y,t.name,t.lastModified,p).then((function(G){try{{let J=function(){if(a--&&(M>l||M>A)){let ie,_e;return ie=_?.95*E.width:E.width,_e=_?.95*E.height:E.height,[H,D]=Dv(ie,_e),D.drawImage(E,0,0,ie,_e),p*=y==="image/png"?.85:.95,Mg(H,y,t.name,t.lastModified,p).then(function(me){try{return U=me,Ls(E),E=H,M=U.size,R(Math.min(99,Math.floor((C-M)/(C-l)*100))),J}catch(ye){return i(ye)}},i)}return[1]},ee=function(){return Ls(E),Ls(H),Ls(f),Ls(m),Ls(c),R(100),r(U)};var z=J,V=ee;if(T=G,w(),N=T.size>l,j=T.size>t.size,!N&&!j)return R(100),r(T);var Z;return A=t.size,C=T.size,M=C,E=m,_=!e.alwaysKeepResolution&&N,(Z=(function(ie){for(;ie;){if(ie.then)return void ie.then(Z,i);try{if(ie.pop){if(ie.length)return ie.pop()?ee.call(this):ie;ie=J}else ie=ie.call(this)}catch(_e){return i(_e)}}}).bind(this))(J)}}catch(J){return i(J)}}).bind(this),i)}catch(G){return i(G)}}).bind(this),i)}catch(O){return i(O)}}).bind(this),i)}catch(P){return i(P)}}).bind(this),i)})}const KG=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Uy;function QG(t,e){return new Promise((n,r)=>{Uy||(Uy=function(a){const l=[];return l.push(a),URL.createObjectURL(new Blob(l))}(KG));const i=new Worker(Uy);i.addEventListener("message",function(a){if(e.signal&&e.signal.aborted)i.terminate();else if(a.data.progress===void 0){if(a.data.error)return r(new Error(a.data.error)),void i.terminate();n(a.data.file),i.terminate()}else e.onProgress(a.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function vr(t,e){return new Promise(function(n,r){let i,s,a,l,c,f;if(i={...e},a=0,{onProgress:l}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=y=>{a=y,typeof l=="function"&&l(a)},!(t instanceof Blob||t instanceof XG))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||f)return bS(t,i).then((function(y){try{return s=y,p.call(this)}catch(T){return r(T)}}).bind(this),r);var h=(function(){try{return p.call(this)}catch(y){return r(y)}}).bind(this),m=function(y){try{return bS(t,i).then(function(T){try{return s=T,h()}catch(N){return r(N)}},r)}catch(T){return r(T)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",QG(t,i).then(function(y){try{return s=y,h()}catch{return m()}},m)}catch{m()}function p(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(s=Y3(t,s))}catch{}return n(s)}})}vr.getDataUrlFromFile=Q3,vr.getFilefromDataUrl=Yx,vr.loadImage=Z3,vr.drawImageInCanvas=eD,vr.drawFileInCanvas=Og,vr.canvasToFile=Mg,vr.getExifOrientation=tD,vr.handleMaxWidthOrHeight=nD,vr.followExifOrientation=rD,vr.cleanupCanvasMemory=Ls,vr.isAutoOrientationInBrowser=cc,vr.approximateBelowMaximumCanvasSizeOfBrowser=J3,vr.copyExifWithoutOrientation=Y3,vr.getBrowserName=Ll,vr.version="2.0.2";async function ZG(t,e){try{return await vr(t,e)}catch(n){return console.error("Image compression failed:",n),t}}const xb=async(t,e,n)=>{const{storage:r}=ta(),i=Gx(r,`users/${e}/character-portraits/${n}`);return await G3(i,t,rs.DATA_URL),qx(i)},JG=async(t,e,n,r)=>{if(!e||!n||!r)throw new Error("User, character, or companion ID is missing for image upload.");const{storage:i}=ta(),s=`users/${e}/characters/${n}/companions/${r}/portrait.jpg`,a=Gx(i,s),l=await G3(a,t,"data_url");return await qx(l.ref)},e$=t=>Math.ceil(t/4)+1,wb=t=>Math.floor((t-10)/2),t$=t=>[{name:"Acrobatics",ability:"dexterity",proficient:!1,expertise:!1},{name:"Animal Handling",ability:"wisdom",proficient:!1,expertise:!1},{name:"Arcana",ability:"intelligence",proficient:!1,expertise:!1},{name:"Athletics",ability:"strength",proficient:!1,expertise:!1},{name:"Deception",ability:"charisma",proficient:!1,expertise:!1},{name:"History",ability:"intelligence",proficient:!1,expertise:!1},{name:"Insight",ability:"wisdom",proficient:!1,expertise:!1},{name:"Intimidation",ability:"charisma",proficient:!1,expertise:!1},{name:"Investigation",ability:"intelligence",proficient:!1,expertise:!1},{name:"Medicine",ability:"wisdom",proficient:!1,expertise:!1},{name:"Nature",ability:"intelligence",proficient:!1,expertise:!1},{name:"Perception",ability:"wisdom",proficient:!1,expertise:!1},{name:"Performance",ability:"charisma",proficient:!1,expertise:!1},{name:"Persuasion",ability:"charisma",proficient:!1,expertise:!1},{name:"Religion",ability:"intelligence",proficient:!1,expertise:!1},{name:"Sleight of Hand",ability:"dexterity",proficient:!1,expertise:!1},{name:"Stealth",ability:"dexterity",proficient:!1,expertise:!1},{name:"Survival",ability:"wisdom",proficient:!1,expertise:!1}],za=()=>{const t={strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10};return{id:`new_${Date.now()}`,lastUpdated:Date.now(),name:"",class:"",subclass:"",level:1,race:"",alignment:"",background:"",playerName:"",experiencePoints:0,abilityScores:t,inspiration:0,proficiencyBonus:e$(1),savingThrows:{strength:{proficient:!1},dexterity:{proficient:!1},constitution:{proficient:!1},intelligence:{proficient:!1},wisdom:{proficient:!1},charisma:{proficient:!1}},skills:t$(),unarmoredDefense:{base:10,abilities:["dexterity"]},initiative:wb(t.dexterity),speed:30,hp:{max:10,current:10,temporary:0},hitDice:{total:"1d8",used:0},deathSaves:{successes:0,failures:0},personalityTraits:"",ideals:"",bonds:"",flaws:"",languages:"Common",attacks:[],currency:{cp:0,sp:0,ep:0,gp:0,pp:0},equipment:[],featuresAndTraits:[],notes:"",dmNotes:"",spellcastingAbility:"",spells:[],spellSlots:{1:{max:0,used:0},2:{max:0,used:0},3:{max:0,used:0},4:{max:0,used:0},5:{max:0,used:0},6:{max:0,used:0},7:{max:0,used:0},8:{max:0,used:0},9:{max:0,used:0}},customResources:[],imageUrl:"",companions:[]}},iD=t=>{var s,a;if(!t)return 10;const e=wb(t.abilityScores.dexterity);let n=0;const r=(s=t.equipment)==null?void 0:s.find(l=>l.equipped&&["light","medium","heavy"].includes(l.armorType||"")),i=(a=t.equipment)==null?void 0:a.find(l=>l.equipped&&l.armorType==="shield");if(r){const l=r.armorClass||0;switch(r.armorType){case"light":n=l+e;break;case"medium":n=l+Math.min(2,e);break;case"heavy":n=l;break}}else{const l=t.unarmoredDefense||{base:10,abilities:[]};let c=l.base;l.abilities.forEach(f=>{c+=wb(t.abilityScores[f])}),n=c}return i&&(n+=i.armorClass||2),n},sD="runica-characters",oh=()=>{try{const t=localStorage.getItem(sD);return t?JSON.parse(t).map(e=>({...za(),...e})):[]}catch(t){return console.error("Error reading from local storage",t),[]}},Yc=t=>{try{localStorage.setItem(sD,JSON.stringify(t))}catch(e){console.error("Error saving to local storage",e)}},lh=()=>{try{const{db:t,auth:e}=ta();return e.currentUser?cq(t,"users",e.currentUser.uid,"characters"):null}catch{return null}},Wx=t=>{const e=lh();return e?Rx(e,t):null},n$=t=>{const e=lh();return e?Cq(wq(e),n=>{const r=n.docs.map(i=>({...za(),...i.data()}));t(r)}):(t(oh()),()=>{})},aD=async t=>{if(t==="new")return za();const e=Wx(t);if(e){const n=await Aq(e);if(n.exists()){const r=n.data();return{...za(),...r}}return null}else return oh().find(n=>n.id===t)||null},oD=async t=>{const e={...t,lastUpdated:Date.now()},n=Wx(e.id);if(n)await Sq(n,e);else{const r=oh(),i=r.findIndex(s=>s.id===e.id);i>-1?r[i]=e:r.push(e),Yc(r)}return e},r$=async t=>{const e=Wx(t);if(e)await Rq(e);else{const n=oh();Yc(n.filter(r=>r.id!==t))}},i$=async()=>{let t,e;try{({db:t,auth:e}=ta())}catch{return}if(!e.currentUser||!xb)return;const n=oh();if(n.length===0||!window.confirm("You have local characters saved on this device. Do you want to move them to your account? This will merge them with any existing characters on your account."))return;const r=lh();if(!r)return;const i=Ux(t),a=(await Iv(r)).docs.map(c=>c.data());let l=0;for(const c of n){const f=a.find(h=>h.id===c.id);if(!f||c.lastUpdated>(f.lastUpdated||0)){const h={...c};if(h.imageUrl&&h.imageUrl.startsWith("data:image"))try{const p=e.currentUser.uid;h.imageUrl=await xb(h.imageUrl,p,h.id)}catch(p){console.error(`Failed to upload image for character ${h.name}. It will be saved with the local data URL.`,p),h.imageUrl=""}const m=Rx(r,c.id);i.set(m,h),l++}}if(l>0)try{await i.commit(),alert(`${l} character(s) migrated to your account.`),Yc([])}catch(c){console.error("Failed to migrate characters:",c),alert("There was an error migrating your characters. They remain on this device for now.")}else alert("No characters needed to be migrated. Your cloud data is up to date."),Yc([])},s$=async()=>{const t=lh();return t?(await Iv(t)).docs.map(n=>n.data()):oh()},a$=async t=>{const e=lh();if(e){const{db:n}=ta(),r=Ux(n);(await Iv(e)).forEach(a=>r.delete(a.ref)),t.map(a=>({...za(),...a})).forEach(a=>{const l=Rx(e,a.id);r.set(l,a)}),await r.commit()}else Yc(t.map(n=>({...za(),...n})))},o$=async()=>{const t=lh();if(t){const{db:e}=ta(),n=Ux(e);(await Iv(t)).forEach(i=>n.delete(i.ref)),await n.commit()}else Yc([])},lD=K.createContext({currentUser:null,loading:!0,signInWithGoogle:()=>Promise.reject("Auth provider not initialized"),logout:()=>Promise.reject("Auth provider not initialized")}),pu=()=>K.useContext(lD),l$=({children:t})=>{const[e,n]=K.useState(null),[r,i]=K.useState(!0);K.useEffect(()=>HG(async c=>{n(c),c&&(await c.getIdToken(),await i$()),i(!1)}),[]);const s={currentUser:e,loading:r,signInWithGoogle:BG,logout:FG};return r?g.jsx("div",{className:"flex justify-center items-center h-screen w-screen bg-background",children:g.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-accent"})}):g.jsx(lD.Provider,{value:s,children:t})},u$=["theme-amber","theme-sapphire","theme-twilight","theme-evergreen","theme-crimson","theme-rose","theme-veridian","theme-obsidian","theme-solaris","theme-aether","theme-grove","theme-celestial","theme-nocturne"],uD=K.createContext(void 0),c$=({children:t})=>{const[e,n]=K.useState(()=>localStorage.getItem("app-theme")||"theme-amber");K.useEffect(()=>{const i=window.document.documentElement;i.classList.remove(...u$),i.classList.add(e),localStorage.setItem("app-theme",e)},[e]);const r=K.useMemo(()=>({theme:e,setTheme:n}),[e]);return g.jsx(uD.Provider,{value:r,children:t})},h$=()=>{const t=K.useContext(uD);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},Xx=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Ov=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),f$=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),jg=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.5 21.75l-.398-1.188a3.375 3.375 0 00-2.924-2.924l-1.188-.398 1.188-.398a3.375 3.375 0 002.924-2.924l.398-1.188.398 1.188a3.375 3.375 0 002.924 2.924l1.188.398-1.188.398a3.375 3.375 0 00-2.924 2.924z"})}),cD=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})}),hD=t=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",...t,children:[g.jsx("path",{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V7l-4-4z"}),g.jsx("path",{d:"M17 3v5H7V3"}),g.jsx("rect",{x:"9",y:"13",width:"6",height:"5",rx:"1"})]}),na=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.134H8.09a2.09 2.09 0 00-2.09 2.134v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),al=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),d$=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),m$=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),p$=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),g$=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),iu=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),v$=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 12l4.5 4.5L18.75 9"})}),fD=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),y$=t=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.242 1.417l-1.07 1.07c-.127.127-.213.289-.27.461a4.5 4.5 0 010 .752c.057.172.143.334.27.461l1.07 1.07c.48.48.577 1.232.242 1.417l-1.296 2.247a1.125 1.125 0 01-1.37.49l-1.217-.456a4.5 4.5 0 01-1.075-.124.938.938 0 01-.22.127c-.332.183-.582.495-.645.87l-.213 1.281c-.09.543-.56.94-1.11.94h-2.593c-.55 0-1.02-.398-1.11-.94l-.213-1.281a4.5 4.5 0 01-.645-.87.938.938 0 01-.22-.127 4.5 4.5 0 01-1.075-.124l-1.217.456a1.125 1.125 0 01-1.37-.49l-1.296-2.247a1.125 1.125 0 01.242-1.417l1.07-1.07c.127-.127.213-.289.27-.461a4.5 4.5 0 010-.752 4.49 4.49 0 01-.27-.461l-1.07-1.07a1.125 1.125 0 01-.242-1.417l1.296-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.075-.124.073-.044.146-.087.22-.127.332-.183-.582-.495-.645-.87l.213-1.281z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),_$=t=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"48px",height:"48px",...t,children:[g.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),g.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),g.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),g.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.574l6.19,5.238C39.99,36.62,44,30.638,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),b$=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),x$=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),w$=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),E$=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),T$=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),A$=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"})}),Mv=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m6-6H6"})}),dD=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12h12"})}),S$=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 3L6 12h6l-3 9 9-9h-6l7.5-9z"})}),R$=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.249-8.25-3.286Z"})}),C$=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.306a11.95 11.95 0 015.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"})}),N$=()=>{const[t,e]=K.useState(null),[n,r]=K.useState(!1),[i,s]=K.useState(!1);return K.useEffect(()=>{const l=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;r(l);const c=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;s(c);const f=h=>{h.preventDefault(),l||e(h)};return window.addEventListener("beforeinstallprompt",f),()=>window.removeEventListener("beforeinstallprompt",f)},[n]),{canInstall:!!t&&!n,isIos:i,isStandalone:n,promptInstall:async()=>{if(!t)return;await t.prompt(),e(null)}}},I$=({onSettingsClick:t})=>{const{currentUser:e,logout:n}=pu(),r=nh(),{canInstall:i,isIos:s,isStandalone:a,promptInstall:l}=N$(),[c,f]=K.useState(!1),h=K.useRef(null);K.useEffect(()=>{const y=T=>{h.current&&!h.current.contains(T.target)&&f(!1)};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[]);const m=async()=>{f(!1),await n(),r("/")},p=()=>{f(!1),r("/account")};return g.jsxs("header",{className:"sticky top-0 z-50 flex justify-between items-center h-20 px-6 bg-background/80 backdrop-blur-lg border-b border-white/10 [box-shadow:0_1px_10px_rgb(var(--color-accent)/0.3)] transition-all duration-300",children:[g.jsxs("h1",{onClick:()=>r("/"),className:"font-norse font-bold text-accent cursor-pointer flex items-baseline transition-all duration-300 hover:opacity-80",style:{textShadow:"0 0 8px rgb(var(--color-accent) / 0.7)"},children:[g.jsx("span",{className:"text-6xl",children:"R"}),g.jsx("span",{className:"text-4xl",children:"unica"})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[i&&g.jsxs("button",{onClick:l,className:"px-3 py-2 flex items-center gap-2 font-semibold text-accent bg-accent/10 rounded-lg border border-accent/30 hover:bg-accent/20 hover:border-accent/70 transition-all duration-300",title:"Installa Runica sul tuo dispositivo",children:[g.jsx(m$,{className:"w-5 h-5"}),g.jsx("span",{className:"hidden sm:inline",children:"Installa App"})]}),s&&!i&&!a&&g.jsxs("div",{className:"px-3 py-2 flex items-center gap-2 font-semibold text-accent bg-accent/10 rounded-lg border border-accent/30 cursor-help",title:"Per installare: tocca l'icona Condividi e poi 'Aggiungi a Home'",children:[g.jsx(p$,{className:"w-5 h-5"}),g.jsx("span",{className:"hidden sm:inline",children:"Installa App"})]}),e?g.jsxs("div",{className:"relative",ref:h,children:[g.jsx("img",{src:e.photoURL||`https://api.dicebear.com/8.x/lorelei/svg?seed=${e.uid}`,alt:e.displayName||"User Avatar",onClick:()=>f(y=>!y),className:"w-12 h-12 rounded-full cursor-pointer ring-2 ring-transparent hover:ring-accent transition-all duration-300 hover:scale-105",title:"Account"}),c&&g.jsx("div",{className:"absolute right-0 mt-2 w-56 origin-top-right rounded-md bg-zinc-800 shadow-lg ring-1 ring-white/10 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu-button",children:g.jsxs("div",{className:"py-1",role:"none",children:[g.jsxs("div",{className:"px-4 py-3 border-b border-zinc-700",children:[g.jsx("p",{className:"text-sm text-zinc-300",role:"none",children:"Signed in as"}),g.jsx("p",{className:"text-sm font-medium text-accent truncate",role:"none",children:e.displayName||e.email})]}),g.jsxs("button",{onClick:p,className:"w-full text-left flex items-center gap-3 px-4 py-3 text-sm text-zinc-200 hover:bg-zinc-700 transition-colors",role:"menuitem",children:[g.jsx(T$,{className:"w-5 h-5"}),"Account Settings"]}),g.jsxs("button",{onClick:m,className:"w-full text-left flex items-center gap-3 px-4 py-3 text-sm text-red-400 hover:bg-zinc-700 transition-colors",role:"menuitem",children:[g.jsx(E$,{className:"w-5 h-5"}),"Logout"]})]})})]}):g.jsx("button",{onClick:()=>r("/login"),className:"px-5 py-2 font-semibold text-accent bg-accent/10 rounded-lg border border-accent/30 hover:bg-accent/20 hover:border-accent/70 transition-all duration-300",children:"Login"}),g.jsx("button",{onClick:t,className:"w-12 h-12 flex items-center justify-center rounded-lg text-accent bg-accent/10 border border-accent/30 hover:bg-accent/20 hover:border-accent/70 transition-all duration-300","aria-label":"Open settings",children:g.jsx(y$,{className:"w-6 h-6"})})]})]})},Vy=({title:t,children:e})=>g.jsxs("div",{className:"border-t border-zinc-700 pt-4 mt-4 first:border-t-0 first:mt-0 first:pt-0",children:[g.jsx("h4",{className:"text-md font-semibold text-zinc-400 mb-3",children:t}),e]}),D$=[{id:"theme-amber",name:"Ambra",color:"bg-amber-400"},{id:"theme-sapphire",name:"Zaffiro",color:"bg-cyan-400"},{id:"theme-twilight",name:"Crepuscolo",color:"bg-violet-400"},{id:"theme-evergreen",name:"Foresta",color:"bg-emerald-400"},{id:"theme-crimson",name:"Cremisi",color:"bg-red-500"},{id:"theme-rose",name:"Rosato",color:"bg-rose-500"},{id:"theme-veridian",name:"Veridiano",color:"bg-green-400"},{id:"theme-obsidian",name:"Ossidiana",color:"bg-gray-300"},{id:"theme-solaris",name:"Solaris",color:"bg-orange-500"},{id:"theme-aether",name:"Etere",color:"bg-fuchsia-500"},{id:"theme-grove",name:"Bosco",color:"bg-lime-500"},{id:"theme-nocturne",name:"Notturno",color:"bg-violet-500"},{id:"theme-celestial",name:"Celeste",color:"bg-indigo-600"}],O$=({isOpen:t,onClose:e})=>{const{theme:n,setTheme:r}=h$(),i=K.useRef(null),s=K.useRef(null);K.useEffect(()=>{const h=i.current;h&&(t?h.showModal():h.close())},[t]);const a=async()=>{try{const h=await s$(),m={version:1,exportedAt:new Date().toISOString(),characters:h,settings:{theme:n}},p=JSON.stringify(m,null,2),y=new Blob([p],{type:"application/json"}),T=URL.createObjectURL(y),N=document.createElement("a");N.href=T,N.download=`runica-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(T),alert("Data exported successfully!")}catch(h){console.error("Failed to export data:",h),alert("Error exporting data. Check the console for details.")}},l=()=>{var h;(h=s.current)==null||h.click()},c=async h=>{var y;const m=(y=h.target.files)==null?void 0:y[0];if(!m||!window.confirm("Are you sure you want to import data? This will overwrite all current characters."))return;const p=new FileReader;p.onload=async T=>{var N,j;try{const A=(N=T.target)==null?void 0:N.result;if(typeof A!="string")throw new Error("Invalid file content");const C=JSON.parse(A);if(!C.characters||!Array.isArray(C.characters))throw new Error("Invalid backup file format.");await a$(C.characters),(j=C.settings)!=null&&j.theme&&r(C.settings.theme),alert("Data imported successfully! The page will now reload."),window.location.reload()}catch(A){console.error("Failed to import data:",A),alert("Error importing data. Make sure it is a valid backup file.")}},p.readAsText(m)},f=async()=>{if(window.confirm("DANGER! This will permanently delete ALL your characters. This action cannot be undone. Are you absolutely sure?"))try{await o$(),alert("All data has been cleared. The app will now reload."),window.location.reload()}catch(h){console.error("Failed to clear data:",h),alert("An error occurred while clearing data.")}};return g.jsxs("dialog",{ref:i,onClose:e,className:"bg-zinc-800 text-zinc-200 p-0 rounded-lg shadow-2xl w-full max-w-sm border border-zinc-700 backdrop:bg-black/50",children:[g.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-zinc-700",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Settings"}),g.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-zinc-700 transition-colors",children:g.jsx(Xx,{className:"w-5 h-5"})})]}),g.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:[g.jsx(Vy,{title:"Appearance",children:g.jsx("div",{className:"grid grid-cols-2 gap-3",children:D$.map(h=>g.jsxs("button",{onClick:()=>r(h.id),className:`flex items-center justify-between p-3 rounded-md border-2 transition-colors ${n===h.id?"border-accent":"border-zinc-600 hover:border-zinc-500"}`,children:[g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("span",{className:`w-5 h-5 rounded-full ${h.color}`})," ",h.name]}),n===h.id&&g.jsx(v$,{className:"w-5 h-5 text-accent"})]},h.id))})}),g.jsx(Vy,{title:"Data Management",children:g.jsxs("div",{className:"space-y-3",children:[g.jsxs("button",{onClick:a,className:"w-full flex items-center justify-center gap-2 bg-zinc-700 hover:bg-zinc-600 text-zinc-200 font-semibold py-2 px-4 rounded-md transition-colors",children:[g.jsx(b$,{className:"w-5 h-5"}),"Export All Data"]}),g.jsxs("button",{onClick:l,className:"w-full flex items-center justify-center gap-2 bg-zinc-700 hover:bg-zinc-600 text-zinc-200 font-semibold py-2 px-4 rounded-md transition-colors",children:[g.jsx(x$,{className:"w-5 h-5"}),"Import from Backup"]}),g.jsx("input",{type:"file",ref:s,onChange:c,accept:".json",className:"hidden"})]})}),g.jsx(Vy,{title:"Danger Zone",children:g.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center gap-2 bg-destructive/20 hover:bg-destructive/40 text-destructive font-semibold py-2 px-4 rounded-md transition-colors border border-destructive/50",children:[g.jsx(w$,{className:"w-5 h-5"}),"Clear All Data"]})})]})]})};function M$(){const[t,e]=K.useState(!1);return g.jsxs("div",{className:"bg-background min-h-screen text-text-main",children:[g.jsx(I$,{onSettingsClick:()=>e(!0)}),g.jsx("main",{children:g.jsx(aI,{})}),g.jsx(O$,{isOpen:t,onClose:()=>e(!1)})]})}const mD=K.createContext(void 0),mr=()=>{const t=K.useContext(mD);if(!t)throw new Error("useCharacter must be used within a CharacterProvider");return t},j$=({children:t})=>{const[e,n]=K.useState(null),[r,i]=K.useState([]),[s,a]=K.useState(!0),{currentUser:l}=pu(),c=K.useCallback(p=>{n(y=>y?{...y,...p}:null)},[]);K.useEffect(()=>{a(!0);const p=n$(y=>{const T=y.map(N=>({...za(),...N}));i(T.sort((N,j)=>N.name.localeCompare(j.name))),a(!1)});return()=>p()},[l]);const f=K.useCallback(async p=>{await r$(p),i(y=>y.filter(T=>T.id!==p))},[]),h=K.useCallback(async p=>(i(y=>{const T=y.findIndex(N=>N.id===p.id);if(T>-1){const N=[...y];return N[T]=p,N.sort((j,A)=>j.name.localeCompare(A.name))}else return[...y,p].sort((N,j)=>N.name.localeCompare(j.name))}),await oD(p)),[]),m={character:e,setCharacter:n,updateCharacter:c,characters:r,loading:s,deleteCharacter:f,saveCharacter:h};return g.jsx(mD.Provider,{value:m,children:t})},k$=({character:t,onSelect:e,onDelete:n,onEdit:r})=>g.jsxs("div",{onClick:e,className:"bg-card rounded-lg shadow-lg overflow-hidden transition-all duration-300 md:hover:shadow-accent/20 group relative cursor-pointer",role:"button",tabIndex:0,children:[g.jsx("div",{className:"relative w-full max-h-32 md:group-hover:max-h-96 transition-all duration-500 ease-in-out overflow-hidden",children:t.imageUrl?g.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-auto"}):g.jsx("div",{className:"w-full h-32 flex items-center justify-center text-muted-foreground bg-muted/50",children:g.jsx(Ov,{className:"w-16 h-16"})})}),g.jsxs("div",{className:"p-5",children:[g.jsx("h3",{className:"text-xl font-bold font-cinzel text-accent truncate",children:t.name||"Unnamed Adventurer"}),g.jsxs("p",{className:"text-muted-foreground capitalize text-sm",children:[t.race||"Race"," ",t.class||"Class"," • Level ",t.level]}),g.jsxs("div",{className:"mt-4 flex items-center gap-4 text-sm text-foreground border-t border-border pt-4",children:[g.jsxs("div",{className:"flex items-center gap-1.5",title:"Hit Points",children:[g.jsx("span",{className:"font-bold text-destructive",children:"HP"}),g.jsxs("span",{children:[t.hp.current,"/",t.hp.max]})]}),g.jsxs("div",{className:"flex items-center gap-1.5",title:"Armor Class",children:[g.jsx("span",{className:"font-bold text-accent",children:"AC"}),g.jsx("span",{children:iD(t)})]})]})]}),g.jsxs("div",{className:"absolute top-3 right-3 flex items-center space-x-2 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity duration-300",children:[g.jsx("button",{onClick:r,className:"p-2 rounded-full bg-secondary hover:bg-accent text-secondary-foreground hover:text-accent-foreground transition-colors","aria-label":`Edit ${t.name}`,children:g.jsx(al,{className:"w-4 h-4"})}),g.jsx("button",{onClick:n,className:"p-2 rounded-full bg-secondary hover:bg-accent text-secondary-foreground hover:text-destructive-foreground transition-colors","aria-label":`Delete ${t.name}`,children:g.jsx(na,{className:"w-4 h-4"})})]})]}),P$=()=>{const{characters:t,loading:e,deleteCharacter:n}=mr(),{currentUser:r}=pu(),i=nh(),s=c=>{i(c==="new"?"/character/new":`/character/${c}`)},a=c=>{i(`/character/${c}/edit`)},l=async(c,f)=>{window.confirm(`Are you sure you want to delete ${f}? This cannot be undone.`)&&await n(c)};return e?g.jsx("div",{className:"flex justify-center items-center h-screen",children:g.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-accent"})}):g.jsxs("div",{className:"p-4 sm:p-8 max-w-7xl mx-auto pt-12",children:[g.jsx("h2",{className:"text-3xl font-cinzel text-center text-foreground mb-8",children:"Your Characters"}),g.jsxs("div",{className:"flex flex-col items-center",children:[g.jsxs("button",{onClick:()=>s("new"),className:"mb-10 flex items-center gap-2 px-6 py-3 bg-accent-dark text-white font-bold rounded-lg shadow-md hover:bg-accent transition-all duration-300 transform hover:scale-105",children:[g.jsx(g$,{className:"w-5 h-5"}),"Create New Character"]}),t.length>0?g.jsx("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(c=>g.jsx(k$,{character:c,onSelect:()=>s(c.id),onDelete:f=>{f.stopPropagation(),l(c.id,c.name)},onEdit:f=>{f.stopPropagation(),a(c.id)}},c.id))}):g.jsxs("div",{className:"text-center w-full max-w-2xl mt-8 py-16 px-6 bg-card/50 rounded-lg border border-border",children:[g.jsx("h2",{className:"text-2xl font-semibold text-foreground font-cinzel",children:"Your adventure awaits!"}),g.jsxs("p",{className:"text-text-muted mt-2",children:[r?"You have no characters synced to this account.":"You have no local characters.",g.jsx("br",{}),"Click the button above to forge your first hero."]})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L$="type.googleapis.com/google.protobuf.Int64Value",U$="type.googleapis.com/google.protobuf.UInt64Value";function pD(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function kg(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>kg(e));if(typeof t=="function"||typeof t=="object")return pD(t,e=>kg(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Wc(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case L$:case U$:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Wc(e)):typeof t=="function"||typeof t=="object"?pD(t,e=>Wc(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oi extends Cs{constructor(e,n,r){super(`${Kx}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,oi.prototype)}}function V$(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Pg(t,e){let n=V$(t),r=n,i;try{const s=e&&e.error;if(s){const a=s.status;if(typeof a=="string"){if(!xS[a])return new oi("internal","internal");n=xS[a],r=a}const l=s.message;typeof l=="string"&&(r=l),i=s.details,i!==void 0&&(i=Wc(i))}}catch{}return n==="ok"?null:new oi(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ei(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="us-central1",B$=/^data: (.*?)(?:\n|$)/;function F$(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new oi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class H${constructor(e,n,r,i,s=Eb,a=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new z$(e,n,r,i),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=Eb}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function q$(t,e,n){const r=Fa(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(ov(t.emulatorOrigin),lv("Functions",!0))}function G$(t,e,n){const r=i=>Y$(t,e,i,{});return r.stream=(i,s)=>X$(t,e,i,s),r}async function $$(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}async function gD(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Y$(t,e,n,r){const i=t._url(e);return W$(t,i,n,r)}async function W$(t,e,n,r){n=kg(n);const i={data:n},s=await gD(t,r),a=r.timeout||7e4,l=F$(a),c=await Promise.race([$$(e,i,s,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new oi("cancelled","Firebase Functions instance was deleted.");const f=Pg(c.status,c.json);if(f)throw f;if(!c.json)throw new oi("internal","Response is not valid JSON object.");let h=c.json.data;if(typeof h>"u"&&(h=c.json.result),typeof h>"u")throw new oi("internal","Response is missing data field.");return{data:Wc(h)}}function X$(t,e,n,r){const i=t._url(e);return K$(t,i,n,r||{})}async function K$(t,e,n,r){var i;n=kg(n);const s={data:n},a=await gD(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let l;try{l=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:a,signal:r==null?void 0:r.signal})}catch(y){if(y instanceof Error&&y.name==="AbortError"){const N=new oi("cancelled","Request was cancelled.");return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}const T=Pg(0,null);return{data:Promise.reject(T),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(T)}}}}}}let c,f;const h=new Promise((y,T)=>{c=y,f=T});(i=r==null?void 0:r.signal)===null||i===void 0||i.addEventListener("abort",()=>{const y=new oi("cancelled","Request was cancelled.");f(y)});const m=l.body.getReader(),p=Q$(m,c,f,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const y=p.getReader();return{async next(){const{value:T,done:N}=await y.read();return{value:T,done:N}},async return(){return await y.cancel(),{done:!0,value:void 0}}}}},data:h}}function Q$(t,e,n,r){const i=(a,l)=>{const c=a.match(B$);if(!c)return;const f=c[1];try{const h=JSON.parse(f);if("result"in h){e(Wc(h.result));return}if("message"in h){l.enqueue(Wc(h.message));return}if("error"in h){const m=Pg(0,h);l.error(m),n(m);return}}catch(h){if(h instanceof oi){l.error(h),n(h);return}}},s=new TextDecoder;return new ReadableStream({start(a){let l="";return c();async function c(){if(r!=null&&r.aborted){const f=new oi("cancelled","Request was cancelled");return a.error(f),n(f),Promise.resolve()}try{const{value:f,done:h}=await t.read();if(h){l.trim()&&i(l.trim(),a),a.close();return}if(r!=null&&r.aborted){const p=new oi("cancelled","Request was cancelled");a.error(p),n(p),await t.cancel();return}l+=s.decode(f,{stream:!0});const m=l.split(`
`);l=m.pop()||"";for(const p of m)p.trim()&&i(p.trim(),a);return c()}catch(f){const h=f instanceof oi?f:Pg(0,null);a.error(h),n(h)}}},cancel(){return t.cancel()}})}const wS="@firebase/functions",ES="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z$="auth-internal",J$="app-check-internal",eY="messaging-internal";function tY(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),s=n.getProvider(Z$),a=n.getProvider(eY),l=n.getProvider(J$);return new H$(i,s,a,l,r)};Go(new ka(Kx,e,"PUBLIC").setMultipleInstances(!0)),is(wS,ES,t),is(wS,ES,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nY(t=uv(),e=Eb){const r=xd(Wt(t),Kx).getImmediate({identifier:e}),i=V1("functions");return i&&rY(r,...i),r}function rY(t,e,n){q$(Wt(t),e,n)}function iY(t,e,n){return G$(Wt(t),e)}tY();const sY={personalityTraits:"Generazione AI fallita. Impossibile contattare il servizio.",ideals:"Errore.",bonds:"Errore.",flaws:"Errore."},aY=()=>{const{app:t}=ta(),e=nY(t,"europe-west1");return iY(e,"callGemini")},oY=async(t,e)=>{const{name:n,race:r,class:i,background:s,alignment:a}=t,l=`
     Generate personality aspects for a Dungeons & Dragons character.
     Based on the following details:
     - Name: ${n}
     - Race: ${r}
     - Class: ${i}
     - Background: ${s}
     - Alignment: ${a}
     ${e?`
- Additional Theme: "${e}"`:""}

     Return a JSON object with four keys: "personalityTraits", "ideals", "bonds", and "flaws".
     - "personalityTraits": A short paragraph describing the character's general demeanor.
     - "ideals": A sentence describing a core belief.
     - "bonds": A sentence about something or someone the character cares deeply about.
     - "flaws": A sentence describing a significant weakness or fear.
   `;try{console.log("Calling Cloud Function 'callGemini'...");const f=await aY()(l);if(!f.data.success||!f.data.response)throw new Error("La Cloud Function ha riportato un errore: "+f.data.response);const h=f.data.response.trim(),m=JSON.parse(h);return{personalityTraits:m.personalityTraits||"",ideals:m.ideals||"",bonds:m.bonds||"",flaws:m.flaws||""}}catch(c){return console.error("Errore durante la chiamata alla Cloud Function 'callGemini':",c),sY}};/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function TS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TS(Object(n),!0).forEach(function(r){hY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function yD(t){var e=lY(t,"string");return typeof e=="symbol"?e:e+""}function Tb(t){"@babel/helpers - typeof";return Tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tb(t)}function uY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yD(r.key),r)}}function cY(t,e,n){return e&&AS(t.prototype,e),n&&AS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function hY(t,e,n){return e=yD(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _D(t){return fY(t)||dY(t)||mY(t)||pY()}function fY(t){if(Array.isArray(t))return Ab(t)}function dY(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mY(t,e){if(t){if(typeof t=="string")return Ab(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ab(t,e)}}function Ab(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var jv=typeof window<"u"&&typeof window.document<"u",Zs=jv?window:{},Qx=jv&&Zs.document.documentElement?"ontouchstart"in Zs.document.documentElement:!1,Zx=jv?"PointerEvent"in Zs:!1,dn="cropper",Jx="all",bD="crop",xD="move",wD="zoom",Al="e",Sl="w",Vu="s",oo="n",Yh="ne",Wh="nw",Xh="se",Kh="sw",Sb="".concat(dn,"-crop"),SS="".concat(dn,"-disabled"),ri="".concat(dn,"-hidden"),RS="".concat(dn,"-hide"),gY="".concat(dn,"-invisible"),Lg="".concat(dn,"-modal"),Rb="".concat(dn,"-move"),Jf="".concat(dn,"Action"),rp="".concat(dn,"Preview"),ew="crop",ED="move",TD="none",Cb="crop",Nb="cropend",Ib="cropmove",Db="cropstart",CS="dblclick",vY=Qx?"touchstart":"mousedown",yY=Qx?"touchmove":"mousemove",_Y=Qx?"touchend touchcancel":"mouseup",NS=Zx?"pointerdown":vY,IS=Zx?"pointermove":yY,DS=Zx?"pointerup pointercancel":_Y,OS="ready",MS="resize",jS="wheel",Ob="zoom",kS="image/jpeg",bY=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,xY=/^data:/,wY=/^data:image\/jpeg;base64,/,EY=/^img|canvas$/i,AD=200,SD=100,PS={viewMode:0,dragMode:ew,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:AD,minContainerHeight:SD,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},TY='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',AY=Number.isNaN||Zs.isNaN;function dt(t){return typeof t=="number"&&!AY(t)}var LS=function(e){return e>0&&e<1/0};function zy(t){return typeof t>"u"}function su(t){return Tb(t)==="object"&&t!==null}var SY=Object.prototype.hasOwnProperty;function hc(t){if(!su(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&SY.call(n,"isPrototypeOf")}catch{return!1}}function ei(t){return typeof t=="function"}var RY=Array.prototype.slice;function RD(t){return Array.from?Array.from(t):RY.call(t)}function Gn(t,e){return t&&ei(e)&&(Array.isArray(t)||dt(t.length)?RD(t).forEach(function(n,r){e.call(t,n,r,t)}):su(t)&&Object.keys(t).forEach(function(n){e.call(t,t[n],n,t)})),t}var pn=Object.assign||function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return su(e)&&r.length>0&&r.forEach(function(s){su(s)&&Object.keys(s).forEach(function(a){e[a]=s[a]})}),e},CY=/\.\d*(?:0|9){12}\d*$/;function Ac(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return CY.test(t)?Math.round(t*e)/e:t}var NY=/^width|height|left|top|marginLeft|marginTop$/;function Ro(t,e){var n=t.style;Gn(e,function(r,i){NY.test(i)&&dt(r)&&(r="".concat(r,"px")),n[i]=r})}function IY(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function lr(t,e){if(e){if(dt(t.length)){Gn(t,function(r){lr(r,e)});return}if(t.classList){t.classList.add(e);return}var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function Ws(t,e){if(e){if(dt(t.length)){Gn(t,function(n){Ws(n,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function fc(t,e,n){if(e){if(dt(t.length)){Gn(t,function(r){fc(r,e,n)});return}n?lr(t,e):Ws(t,e)}}var DY=/([a-z\d])([A-Z])/g;function tw(t){return t.replace(DY,"$1-$2").toLowerCase()}function Mb(t,e){return su(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(tw(e)))}function ed(t,e,n){su(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(tw(e)),n)}function OY(t,e){if(su(t[e]))try{delete t[e]}catch{t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch{t.dataset[e]=void 0}else t.removeAttribute("data-".concat(tw(e)))}var CD=/\s\s*/,ND=function(){var t=!1;if(jv){var e=!1,n=function(){},r=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(s){e=s}});Zs.addEventListener("test",n,r),Zs.removeEventListener("test",n,r)}return t}();function ys(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=n;e.trim().split(CD).forEach(function(s){if(!ND){var a=t.listeners;a&&a[s]&&a[s][n]&&(i=a[s][n],delete a[s][n],Object.keys(a[s]).length===0&&delete a[s],Object.keys(a).length===0&&delete t.listeners)}t.removeEventListener(s,i,r)})}function Wi(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=n;e.trim().split(CD).forEach(function(s){if(r.once&&!ND){var a=t.listeners,l=a===void 0?{}:a;i=function(){delete l[s][n],t.removeEventListener(s,i,r);for(var f=arguments.length,h=new Array(f),m=0;m<f;m++)h[m]=arguments[m];n.apply(t,h)},l[s]||(l[s]={}),l[s][n]&&t.removeEventListener(s,l[s][n],r),l[s][n]=i,t.listeners=l}t.addEventListener(s,i,r)})}function Sc(t,e,n){var r;return ei(Event)&&ei(CustomEvent)?r=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(r)}function ID(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var By=Zs.location,MY=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function US(t){var e=t.match(MY);return e!==null&&(e[1]!==By.protocol||e[2]!==By.hostname||e[3]!==By.port)}function VS(t){var e="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+e}function If(t){var e=t.rotate,n=t.scaleX,r=t.scaleY,i=t.translateX,s=t.translateY,a=[];dt(i)&&i!==0&&a.push("translateX(".concat(i,"px)")),dt(s)&&s!==0&&a.push("translateY(".concat(s,"px)")),dt(e)&&e!==0&&a.push("rotate(".concat(e,"deg)")),dt(n)&&n!==1&&a.push("scaleX(".concat(n,")")),dt(r)&&r!==1&&a.push("scaleY(".concat(r,")"));var l=a.length?a.join(" "):"none";return{WebkitTransform:l,msTransform:l,transform:l}}function jY(t){var e=vD({},t),n=0;return Gn(t,function(r,i){delete e[i],Gn(e,function(s){var a=Math.abs(r.startX-s.startX),l=Math.abs(r.startY-s.startY),c=Math.abs(r.endX-s.endX),f=Math.abs(r.endY-s.endY),h=Math.sqrt(a*a+l*l),m=Math.sqrt(c*c+f*f),p=(m-h)/h;Math.abs(p)>Math.abs(n)&&(n=p)})}),n}function ip(t,e){var n=t.pageX,r=t.pageY,i={endX:n,endY:r};return e?i:vD({startX:n,startY:r},i)}function kY(t){var e=0,n=0,r=0;return Gn(t,function(i){var s=i.startX,a=i.startY;e+=s,n+=a,r+=1}),e/=r,n/=r,{pageX:e,pageY:n}}function Co(t){var e=t.aspectRatio,n=t.height,r=t.width,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",s=LS(r),a=LS(n);if(s&&a){var l=n*e;i==="contain"&&l>r||i==="cover"&&l<r?n=r/e:r=n*e}else s?n=r/e:a&&(r=n*e);return{width:r,height:n}}function PY(t){var e=t.width,n=t.height,r=t.degree;if(r=Math.abs(r)%180,r===90)return{width:n,height:e};var i=r%90*Math.PI/180,s=Math.sin(i),a=Math.cos(i),l=e*a+n*s,c=e*s+n*a;return r>90?{width:c,height:l}:{width:l,height:c}}function LY(t,e,n,r){var i=e.aspectRatio,s=e.naturalWidth,a=e.naturalHeight,l=e.rotate,c=l===void 0?0:l,f=e.scaleX,h=f===void 0?1:f,m=e.scaleY,p=m===void 0?1:m,y=n.aspectRatio,T=n.naturalWidth,N=n.naturalHeight,j=r.fillColor,A=j===void 0?"transparent":j,C=r.imageSmoothingEnabled,M=C===void 0?!0:C,U=r.imageSmoothingQuality,H=U===void 0?"low":U,D=r.maxWidth,E=D===void 0?1/0:D,_=r.maxHeight,w=_===void 0?1/0:_,R=r.minWidth,k=R===void 0?0:R,P=r.minHeight,O=P===void 0?0:P,G=document.createElement("canvas"),Z=G.getContext("2d"),z=Co({aspectRatio:y,width:E,height:w}),V=Co({aspectRatio:y,width:k,height:O},"cover"),J=Math.min(z.width,Math.max(V.width,T)),ee=Math.min(z.height,Math.max(V.height,N)),ie=Co({aspectRatio:i,width:E,height:w}),_e=Co({aspectRatio:i,width:k,height:O},"cover"),me=Math.min(ie.width,Math.max(_e.width,s)),ye=Math.min(ie.height,Math.max(_e.height,a)),W=[-me/2,-ye/2,me,ye];return G.width=Ac(J),G.height=Ac(ee),Z.fillStyle=A,Z.fillRect(0,0,J,ee),Z.save(),Z.translate(J/2,ee/2),Z.rotate(c*Math.PI/180),Z.scale(h,p),Z.imageSmoothingEnabled=M,Z.imageSmoothingQuality=H,Z.drawImage.apply(Z,[t].concat(_D(W.map(function(X){return Math.floor(Ac(X))})))),Z.restore(),G}var DD=String.fromCharCode;function UY(t,e,n){var r="";n+=e;for(var i=e;i<n;i+=1)r+=DD(t.getUint8(i));return r}var VY=/^data:.*,/;function zY(t){var e=t.replace(VY,""),n=atob(e),r=new ArrayBuffer(n.length),i=new Uint8Array(r);return Gn(i,function(s,a){i[a]=n.charCodeAt(a)}),r}function BY(t,e){for(var n=[],r=8192,i=new Uint8Array(t);i.length>0;)n.push(DD.apply(null,RD(i.subarray(0,r)))),i=i.subarray(r);return"data:".concat(e,";base64,").concat(btoa(n.join("")))}function FY(t){var e=new DataView(t),n;try{var r,i,s;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var a=e.byteLength,l=2;l+1<a;){if(e.getUint8(l)===255&&e.getUint8(l+1)===225){i=l;break}l+=1}if(i){var c=i+4,f=i+10;if(UY(e,c,4)==="Exif"){var h=e.getUint16(f);if(r=h===18761,(r||h===19789)&&e.getUint16(f+2,r)===42){var m=e.getUint32(f+4,r);m>=8&&(s=f+m)}}}if(s){var p=e.getUint16(s,r),y,T;for(T=0;T<p;T+=1)if(y=s+T*12+2,e.getUint16(y,r)===274){y+=8,n=e.getUint16(y,r),e.setUint16(y,1,r);break}}}catch{n=1}return n}function HY(t){var e=0,n=1,r=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:r=-1;break;case 5:e=90,r=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:n,scaleY:r}}var qY={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,n=this.options,r=this.container,i=this.cropper,s=Number(n.minContainerWidth),a=Number(n.minContainerHeight);lr(i,ri),Ws(e,ri);var l={width:Math.max(r.offsetWidth,s>=0?s:AD),height:Math.max(r.offsetHeight,a>=0?a:SD)};this.containerData=l,Ro(i,{width:l.width,height:l.height}),lr(e,ri),Ws(i,ri)},initCanvas:function(){var e=this.containerData,n=this.imageData,r=this.options.viewMode,i=Math.abs(n.rotate)%180===90,s=i?n.naturalHeight:n.naturalWidth,a=i?n.naturalWidth:n.naturalHeight,l=s/a,c=e.width,f=e.height;e.height*l>e.width?r===3?c=e.height*l:f=e.width/l:r===3?f=e.width/l:c=e.height*l;var h={aspectRatio:l,naturalWidth:s,naturalHeight:a,width:c,height:f};this.canvasData=h,this.limited=r===1||r===2,this.limitCanvas(!0,!0),h.width=Math.min(Math.max(h.width,h.minWidth),h.maxWidth),h.height=Math.min(Math.max(h.height,h.minHeight),h.maxHeight),h.left=(e.width-h.width)/2,h.top=(e.height-h.height)/2,h.oldLeft=h.left,h.oldTop=h.top,this.initialCanvasData=pn({},h)},limitCanvas:function(e,n){var r=this.options,i=this.containerData,s=this.canvasData,a=this.cropBoxData,l=r.viewMode,c=s.aspectRatio,f=this.cropped&&a;if(e){var h=Number(r.minCanvasWidth)||0,m=Number(r.minCanvasHeight)||0;l>1?(h=Math.max(h,i.width),m=Math.max(m,i.height),l===3&&(m*c>h?h=m*c:m=h/c)):l>0&&(h?h=Math.max(h,f?a.width:0):m?m=Math.max(m,f?a.height:0):f&&(h=a.width,m=a.height,m*c>h?h=m*c:m=h/c));var p=Co({aspectRatio:c,width:h,height:m});h=p.width,m=p.height,s.minWidth=h,s.minHeight=m,s.maxWidth=1/0,s.maxHeight=1/0}if(n)if(l>(f?0:1)){var y=i.width-s.width,T=i.height-s.height;s.minLeft=Math.min(0,y),s.minTop=Math.min(0,T),s.maxLeft=Math.max(0,y),s.maxTop=Math.max(0,T),f&&this.limited&&(s.minLeft=Math.min(a.left,a.left+(a.width-s.width)),s.minTop=Math.min(a.top,a.top+(a.height-s.height)),s.maxLeft=a.left,s.maxTop=a.top,l===2&&(s.width>=i.width&&(s.minLeft=Math.min(0,y),s.maxLeft=Math.max(0,y)),s.height>=i.height&&(s.minTop=Math.min(0,T),s.maxTop=Math.max(0,T))))}else s.minLeft=-s.width,s.minTop=-s.height,s.maxLeft=i.width,s.maxTop=i.height},renderCanvas:function(e,n){var r=this.canvasData,i=this.imageData;if(n){var s=PY({width:i.naturalWidth*Math.abs(i.scaleX||1),height:i.naturalHeight*Math.abs(i.scaleY||1),degree:i.rotate||0}),a=s.width,l=s.height,c=r.width*(a/r.naturalWidth),f=r.height*(l/r.naturalHeight);r.left-=(c-r.width)/2,r.top-=(f-r.height)/2,r.width=c,r.height=f,r.aspectRatio=a/l,r.naturalWidth=a,r.naturalHeight=l,this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCanvas(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,Ro(this.canvas,pn({width:r.width,height:r.height},If({translateX:r.left,translateY:r.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var n=this.canvasData,r=this.imageData,i=r.naturalWidth*(n.width/n.naturalWidth),s=r.naturalHeight*(n.height/n.naturalHeight);pn(r,{width:i,height:s,left:(n.width-i)/2,top:(n.height-s)/2}),Ro(this.image,pn({width:r.width,height:r.height},If(pn({translateX:r.left,translateY:r.top},r)))),e&&this.output()},initCropBox:function(){var e=this.options,n=this.canvasData,r=e.aspectRatio||e.initialAspectRatio,i=Number(e.autoCropArea)||.8,s={width:n.width,height:n.height};r&&(n.height*r>n.width?s.height=s.width/r:s.width=s.height*r),this.cropBoxData=s,this.limitCropBox(!0,!0),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),s.width=Math.max(s.minWidth,s.width*i),s.height=Math.max(s.minHeight,s.height*i),s.left=n.left+(n.width-s.width)/2,s.top=n.top+(n.height-s.height)/2,s.oldLeft=s.left,s.oldTop=s.top,this.initialCropBoxData=pn({},s)},limitCropBox:function(e,n){var r=this.options,i=this.containerData,s=this.canvasData,a=this.cropBoxData,l=this.limited,c=r.aspectRatio;if(e){var f=Number(r.minCropBoxWidth)||0,h=Number(r.minCropBoxHeight)||0,m=l?Math.min(i.width,s.width,s.width+s.left,i.width-s.left):i.width,p=l?Math.min(i.height,s.height,s.height+s.top,i.height-s.top):i.height;f=Math.min(f,i.width),h=Math.min(h,i.height),c&&(f&&h?h*c>f?h=f/c:f=h*c:f?h=f/c:h&&(f=h*c),p*c>m?p=m/c:m=p*c),a.minWidth=Math.min(f,m),a.minHeight=Math.min(h,p),a.maxWidth=m,a.maxHeight=p}n&&(l?(a.minLeft=Math.max(0,s.left),a.minTop=Math.max(0,s.top),a.maxLeft=Math.min(i.width,s.left+s.width)-a.width,a.maxTop=Math.min(i.height,s.top+s.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=i.width-a.width,a.maxTop=i.height-a.height))},renderCropBox:function(){var e=this.options,n=this.containerData,r=this.cropBoxData;(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCropBox(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,e.movable&&e.cropBoxMovable&&ed(this.face,Jf,r.width>=n.width&&r.height>=n.height?xD:Jx),Ro(this.cropBox,pn({width:r.width,height:r.height},If({translateX:r.left,translateY:r.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Sc(this.element,Cb,this.getData())}},GY={initPreview:function(){var e=this.element,n=this.crossOrigin,r=this.options.preview,i=n?this.crossOriginUrl:this.url,s=e.alt||"The image to preview",a=document.createElement("img");if(n&&(a.crossOrigin=n),a.src=i,a.alt=s,this.viewBox.appendChild(a),this.viewBoxImage=a,!!r){var l=r;typeof r=="string"?l=e.ownerDocument.querySelectorAll(r):r.querySelector&&(l=[r]),this.previews=l,Gn(l,function(c){var f=document.createElement("img");ed(c,rp,{width:c.offsetWidth,height:c.offsetHeight,html:c.innerHTML}),n&&(f.crossOrigin=n),f.src=i,f.alt=s,f.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',c.innerHTML="",c.appendChild(f)})}},resetPreview:function(){Gn(this.previews,function(e){var n=Mb(e,rp);Ro(e,{width:n.width,height:n.height}),e.innerHTML=n.html,OY(e,rp)})},preview:function(){var e=this.imageData,n=this.canvasData,r=this.cropBoxData,i=r.width,s=r.height,a=e.width,l=e.height,c=r.left-n.left-e.left,f=r.top-n.top-e.top;!this.cropped||this.disabled||(Ro(this.viewBoxImage,pn({width:a,height:l},If(pn({translateX:-c,translateY:-f},e)))),Gn(this.previews,function(h){var m=Mb(h,rp),p=m.width,y=m.height,T=p,N=y,j=1;i&&(j=p/i,N=s*j),s&&N>y&&(j=y/s,T=i*j,N=y),Ro(h,{width:T,height:N}),Ro(h.getElementsByTagName("img")[0],pn({width:a*j,height:l*j},If(pn({translateX:-c*j,translateY:-f*j},e))))}))}},$Y={bind:function(){var e=this.element,n=this.options,r=this.cropper;ei(n.cropstart)&&Wi(e,Db,n.cropstart),ei(n.cropmove)&&Wi(e,Ib,n.cropmove),ei(n.cropend)&&Wi(e,Nb,n.cropend),ei(n.crop)&&Wi(e,Cb,n.crop),ei(n.zoom)&&Wi(e,Ob,n.zoom),Wi(r,NS,this.onCropStart=this.cropStart.bind(this)),n.zoomable&&n.zoomOnWheel&&Wi(r,jS,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&Wi(r,CS,this.onDblclick=this.dblclick.bind(this)),Wi(e.ownerDocument,IS,this.onCropMove=this.cropMove.bind(this)),Wi(e.ownerDocument,DS,this.onCropEnd=this.cropEnd.bind(this)),n.responsive&&Wi(window,MS,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,n=this.options,r=this.cropper;ei(n.cropstart)&&ys(e,Db,n.cropstart),ei(n.cropmove)&&ys(e,Ib,n.cropmove),ei(n.cropend)&&ys(e,Nb,n.cropend),ei(n.crop)&&ys(e,Cb,n.crop),ei(n.zoom)&&ys(e,Ob,n.zoom),ys(r,NS,this.onCropStart),n.zoomable&&n.zoomOnWheel&&ys(r,jS,this.onWheel,{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&ys(r,CS,this.onDblclick),ys(e.ownerDocument,IS,this.onCropMove),ys(e.ownerDocument,DS,this.onCropEnd),n.responsive&&ys(window,MS,this.onResize)}},YY={resize:function(){if(!this.disabled){var e=this.options,n=this.container,r=this.containerData,i=n.offsetWidth/r.width,s=n.offsetHeight/r.height,a=Math.abs(i-1)>Math.abs(s-1)?i:s;if(a!==1){var l,c;e.restore&&(l=this.getCanvasData(),c=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(Gn(l,function(f,h){l[h]=f*a})),this.setCropBoxData(Gn(c,function(f,h){c[h]=f*a})))}}},dblclick:function(){this.disabled||this.options.dragMode===TD||this.setDragMode(IY(this.dragBox,Sb)?ED:ew)},wheel:function(e){var n=this,r=Number(this.options.wheelZoomRatio)||.1,i=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50),e.deltaY?i=e.deltaY>0?1:-1:e.wheelDelta?i=-e.wheelDelta/120:e.detail&&(i=e.detail>0?1:-1),this.zoom(-i*r,e)))},cropStart:function(e){var n=e.buttons,r=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(dt(n)&&n!==1||dt(r)&&r!==0||e.ctrlKey))){var i=this.options,s=this.pointers,a;e.changedTouches?Gn(e.changedTouches,function(l){s[l.identifier]=ip(l)}):s[e.pointerId||0]=ip(e),Object.keys(s).length>1&&i.zoomable&&i.zoomOnTouch?a=wD:a=Mb(e.target,Jf),bY.test(a)&&Sc(this.element,Db,{originalEvent:e,action:a})!==!1&&(e.preventDefault(),this.action=a,this.cropping=!1,a===bD&&(this.cropping=!0,lr(this.dragBox,Lg)))}},cropMove:function(e){var n=this.action;if(!(this.disabled||!n)){var r=this.pointers;e.preventDefault(),Sc(this.element,Ib,{originalEvent:e,action:n})!==!1&&(e.changedTouches?Gn(e.changedTouches,function(i){pn(r[i.identifier]||{},ip(i,!0))}):pn(r[e.pointerId||0]||{},ip(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var n=this.action,r=this.pointers;e.changedTouches?Gn(e.changedTouches,function(i){delete r[i.identifier]}):delete r[e.pointerId||0],n&&(e.preventDefault(),Object.keys(r).length||(this.action=""),this.cropping&&(this.cropping=!1,fc(this.dragBox,Lg,this.cropped&&this.options.modal)),Sc(this.element,Nb,{originalEvent:e,action:n}))}}},WY={change:function(e){var n=this.options,r=this.canvasData,i=this.containerData,s=this.cropBoxData,a=this.pointers,l=this.action,c=n.aspectRatio,f=s.left,h=s.top,m=s.width,p=s.height,y=f+m,T=h+p,N=0,j=0,A=i.width,C=i.height,M=!0,U;!c&&e.shiftKey&&(c=m&&p?m/p:1),this.limited&&(N=s.minLeft,j=s.minTop,A=N+Math.min(i.width,r.width,r.left+r.width),C=j+Math.min(i.height,r.height,r.top+r.height));var H=a[Object.keys(a)[0]],D={x:H.endX-H.startX,y:H.endY-H.startY},E=function(w){switch(w){case Al:y+D.x>A&&(D.x=A-y);break;case Sl:f+D.x<N&&(D.x=N-f);break;case oo:h+D.y<j&&(D.y=j-h);break;case Vu:T+D.y>C&&(D.y=C-T);break}};switch(l){case Jx:f+=D.x,h+=D.y;break;case Al:if(D.x>=0&&(y>=A||c&&(h<=j||T>=C))){M=!1;break}E(Al),m+=D.x,m<0&&(l=Sl,m=-m,f-=m),c&&(p=m/c,h+=(s.height-p)/2);break;case oo:if(D.y<=0&&(h<=j||c&&(f<=N||y>=A))){M=!1;break}E(oo),p-=D.y,h+=D.y,p<0&&(l=Vu,p=-p,h-=p),c&&(m=p*c,f+=(s.width-m)/2);break;case Sl:if(D.x<=0&&(f<=N||c&&(h<=j||T>=C))){M=!1;break}E(Sl),m-=D.x,f+=D.x,m<0&&(l=Al,m=-m,f-=m),c&&(p=m/c,h+=(s.height-p)/2);break;case Vu:if(D.y>=0&&(T>=C||c&&(f<=N||y>=A))){M=!1;break}E(Vu),p+=D.y,p<0&&(l=oo,p=-p,h-=p),c&&(m=p*c,f+=(s.width-m)/2);break;case Yh:if(c){if(D.y<=0&&(h<=j||y>=A)){M=!1;break}E(oo),p-=D.y,h+=D.y,m=p*c}else E(oo),E(Al),D.x>=0?y<A?m+=D.x:D.y<=0&&h<=j&&(M=!1):m+=D.x,D.y<=0?h>j&&(p-=D.y,h+=D.y):(p-=D.y,h+=D.y);m<0&&p<0?(l=Kh,p=-p,m=-m,h-=p,f-=m):m<0?(l=Wh,m=-m,f-=m):p<0&&(l=Xh,p=-p,h-=p);break;case Wh:if(c){if(D.y<=0&&(h<=j||f<=N)){M=!1;break}E(oo),p-=D.y,h+=D.y,m=p*c,f+=s.width-m}else E(oo),E(Sl),D.x<=0?f>N?(m-=D.x,f+=D.x):D.y<=0&&h<=j&&(M=!1):(m-=D.x,f+=D.x),D.y<=0?h>j&&(p-=D.y,h+=D.y):(p-=D.y,h+=D.y);m<0&&p<0?(l=Xh,p=-p,m=-m,h-=p,f-=m):m<0?(l=Yh,m=-m,f-=m):p<0&&(l=Kh,p=-p,h-=p);break;case Kh:if(c){if(D.x<=0&&(f<=N||T>=C)){M=!1;break}E(Sl),m-=D.x,f+=D.x,p=m/c}else E(Vu),E(Sl),D.x<=0?f>N?(m-=D.x,f+=D.x):D.y>=0&&T>=C&&(M=!1):(m-=D.x,f+=D.x),D.y>=0?T<C&&(p+=D.y):p+=D.y;m<0&&p<0?(l=Yh,p=-p,m=-m,h-=p,f-=m):m<0?(l=Xh,m=-m,f-=m):p<0&&(l=Wh,p=-p,h-=p);break;case Xh:if(c){if(D.x>=0&&(y>=A||T>=C)){M=!1;break}E(Al),m+=D.x,p=m/c}else E(Vu),E(Al),D.x>=0?y<A?m+=D.x:D.y>=0&&T>=C&&(M=!1):m+=D.x,D.y>=0?T<C&&(p+=D.y):p+=D.y;m<0&&p<0?(l=Wh,p=-p,m=-m,h-=p,f-=m):m<0?(l=Kh,m=-m,f-=m):p<0&&(l=Yh,p=-p,h-=p);break;case xD:this.move(D.x,D.y),M=!1;break;case wD:this.zoom(jY(a),e),M=!1;break;case bD:if(!D.x||!D.y){M=!1;break}U=ID(this.cropper),f=H.startX-U.left,h=H.startY-U.top,m=s.minWidth,p=s.minHeight,D.x>0?l=D.y>0?Xh:Yh:D.x<0&&(f-=m,l=D.y>0?Kh:Wh),D.y<0&&(h-=p),this.cropped||(Ws(this.cropBox,ri),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}M&&(s.width=m,s.height=p,s.left=f,s.top=h,this.action=l,this.renderCropBox()),Gn(a,function(_){_.startX=_.endX,_.startY=_.endY})}},XY={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&lr(this.dragBox,Lg),Ws(this.cropBox,ri),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=pn({},this.initialImageData),this.canvasData=pn({},this.initialCanvasData),this.cropBoxData=pn({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(pn(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Ws(this.dragBox,Lg),lr(this.cropBox,ri)),this},replace:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),n?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,Gn(this.previews,function(r){r.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Ws(this.cropper,SS)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,lr(this.cropper,SS)),this},destroy:function(){var e=this.element;return e[dn]?(e[dn]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.canvasData,i=r.left,s=r.top;return this.moveTo(zy(e)?e:i+Number(e),zy(n)?n:s+Number(n))},moveTo:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.canvasData,i=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.movable&&(dt(e)&&(r.left=e,i=!0),dt(n)&&(r.top=n,i=!0),i&&this.renderCanvas(!0)),this},zoom:function(e,n){var r=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(r.width*e/r.naturalWidth,null,n)},zoomTo:function(e,n,r){var i=this.options,s=this.canvasData,a=s.width,l=s.height,c=s.naturalWidth,f=s.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&i.zoomable){var h=c*e,m=f*e;if(Sc(this.element,Ob,{ratio:e,oldRatio:a/c,originalEvent:r})===!1)return this;if(r){var p=this.pointers,y=ID(this.cropper),T=p&&Object.keys(p).length?kY(p):{pageX:r.pageX,pageY:r.pageY};s.left-=(h-a)*((T.pageX-y.left-s.left)/a),s.top-=(m-l)*((T.pageY-y.top-s.top)/l)}else hc(n)&&dt(n.x)&&dt(n.y)?(s.left-=(h-a)*((n.x-s.left)/a),s.top-=(m-l)*((n.y-s.top)/l)):(s.left-=(h-a)/2,s.top-=(m-l)/2);s.width=h,s.height=m,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),dt(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var n=this.imageData.scaleY;return this.scale(e,dt(n)?n:1)},scaleY:function(e){var n=this.imageData.scaleX;return this.scale(dt(n)?n:1,e)},scale:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.imageData,i=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.scalable&&(dt(e)&&(r.scaleX=e,i=!0),dt(n)&&(r.scaleY=n,i=!0),i&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.options,r=this.imageData,i=this.canvasData,s=this.cropBoxData,a;if(this.ready&&this.cropped){a={x:s.left-i.left,y:s.top-i.top,width:s.width,height:s.height};var l=r.width/r.naturalWidth;if(Gn(a,function(h,m){a[m]=h/l}),e){var c=Math.round(a.y+a.height),f=Math.round(a.x+a.width);a.x=Math.round(a.x),a.y=Math.round(a.y),a.width=f-a.x,a.height=c-a.y}}else a={x:0,y:0,width:0,height:0};return n.rotatable&&(a.rotate=r.rotate||0),n.scalable&&(a.scaleX=r.scaleX||1,a.scaleY=r.scaleY||1),a},setData:function(e){var n=this.options,r=this.imageData,i=this.canvasData,s={};if(this.ready&&!this.disabled&&hc(e)){var a=!1;n.rotatable&&dt(e.rotate)&&e.rotate!==r.rotate&&(r.rotate=e.rotate,a=!0),n.scalable&&(dt(e.scaleX)&&e.scaleX!==r.scaleX&&(r.scaleX=e.scaleX,a=!0),dt(e.scaleY)&&e.scaleY!==r.scaleY&&(r.scaleY=e.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var l=r.width/r.naturalWidth;dt(e.x)&&(s.left=e.x*l+i.left),dt(e.y)&&(s.top=e.y*l+i.top),dt(e.width)&&(s.width=e.width*l),dt(e.height)&&(s.height=e.height*l),this.setCropBoxData(s)}return this},getContainerData:function(){return this.ready?pn({},this.containerData):{}},getImageData:function(){return this.sized?pn({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,n={};return this.ready&&Gn(["left","top","width","height","naturalWidth","naturalHeight"],function(r){n[r]=e[r]}),n},setCanvasData:function(e){var n=this.canvasData,r=n.aspectRatio;return this.ready&&!this.disabled&&hc(e)&&(dt(e.left)&&(n.left=e.left),dt(e.top)&&(n.top=e.top),dt(e.width)?(n.width=e.width,n.height=e.width/r):dt(e.height)&&(n.height=e.height,n.width=e.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,n;return this.ready&&this.cropped&&(n={left:e.left,top:e.top,width:e.width,height:e.height}),n||{}},setCropBoxData:function(e){var n=this.cropBoxData,r=this.options.aspectRatio,i,s;return this.ready&&this.cropped&&!this.disabled&&hc(e)&&(dt(e.left)&&(n.left=e.left),dt(e.top)&&(n.top=e.top),dt(e.width)&&e.width!==n.width&&(i=!0,n.width=e.width),dt(e.height)&&e.height!==n.height&&(s=!0,n.height=e.height),r&&(i?n.height=n.width/r:s&&(n.width=n.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var n=this.canvasData,r=LY(this.image,this.imageData,n,e);if(!this.cropped)return r;var i=this.getData(e.rounded),s=i.x,a=i.y,l=i.width,c=i.height,f=r.width/Math.floor(n.naturalWidth);f!==1&&(s*=f,a*=f,l*=f,c*=f);var h=l/c,m=Co({aspectRatio:h,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),p=Co({aspectRatio:h,width:e.minWidth||0,height:e.minHeight||0},"cover"),y=Co({aspectRatio:h,width:e.width||(f!==1?r.width:l),height:e.height||(f!==1?r.height:c)}),T=y.width,N=y.height;T=Math.min(m.width,Math.max(p.width,T)),N=Math.min(m.height,Math.max(p.height,N));var j=document.createElement("canvas"),A=j.getContext("2d");j.width=Ac(T),j.height=Ac(N),A.fillStyle=e.fillColor||"transparent",A.fillRect(0,0,T,N);var C=e.imageSmoothingEnabled,M=C===void 0?!0:C,U=e.imageSmoothingQuality;A.imageSmoothingEnabled=M,U&&(A.imageSmoothingQuality=U);var H=r.width,D=r.height,E=s,_=a,w,R,k,P,O,G;E<=-l||E>H?(E=0,w=0,k=0,O=0):E<=0?(k=-E,E=0,w=Math.min(H,l+E),O=w):E<=H&&(k=0,w=Math.min(l,H-E),O=w),w<=0||_<=-c||_>D?(_=0,R=0,P=0,G=0):_<=0?(P=-_,_=0,R=Math.min(D,c+_),G=R):_<=D&&(P=0,R=Math.min(c,D-_),G=R);var Z=[E,_,w,R];if(O>0&&G>0){var z=T/l;Z.push(k*z,P*z,O*z,G*z)}return A.drawImage.apply(A,[r].concat(_D(Z.map(function(V){return Math.floor(Ac(V))})))),j},setAspectRatio:function(e){var n=this.options;return!this.disabled&&!zy(e)&&(n.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var n=this.options,r=this.dragBox,i=this.face;if(this.ready&&!this.disabled){var s=e===ew,a=n.movable&&e===ED;e=s||a?e:TD,n.dragMode=e,ed(r,Jf,e),fc(r,Sb,s),fc(r,Rb,a),n.cropBoxMovable||(ed(i,Jf,e),fc(i,Sb,s),fc(i,Rb,a))}return this}},KY=Zs.Cropper,OD=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(uY(this,t),!e||!EY.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=pn({},PS,hc(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return cY(t,[{key:"init",value:function(){var n=this.element,r=n.tagName.toLowerCase(),i;if(!n[dn]){if(n[dn]=this,r==="img"){if(this.isImg=!0,i=n.getAttribute("src")||"",this.originalUrl=i,!i)return;i=n.src}else r==="canvas"&&window.HTMLCanvasElement&&(i=n.toDataURL());this.load(i)}}},{key:"load",value:function(n){var r=this;if(n){this.url=n,this.imageData={};var i=this.element,s=this.options;if(!s.rotatable&&!s.scalable&&(s.checkOrientation=!1),!s.checkOrientation||!window.ArrayBuffer){this.clone();return}if(xY.test(n)){wY.test(n)?this.read(zY(n)):this.clone();return}var a=new XMLHttpRequest,l=this.clone.bind(this);this.reloading=!0,this.xhr=a,a.onabort=l,a.onerror=l,a.ontimeout=l,a.onprogress=function(){a.getResponseHeader("content-type")!==kS&&a.abort()},a.onload=function(){r.read(a.response)},a.onloadend=function(){r.reloading=!1,r.xhr=null},s.checkCrossOrigin&&US(n)&&i.crossOrigin&&(n=VS(n)),a.open("GET",n,!0),a.responseType="arraybuffer",a.withCredentials=i.crossOrigin==="use-credentials",a.send()}}},{key:"read",value:function(n){var r=this.options,i=this.imageData,s=FY(n),a=0,l=1,c=1;if(s>1){this.url=BY(n,kS);var f=HY(s);a=f.rotate,l=f.scaleX,c=f.scaleY}r.rotatable&&(i.rotate=a),r.scalable&&(i.scaleX=l,i.scaleY=c),this.clone()}},{key:"clone",value:function(){var n=this.element,r=this.url,i=n.crossOrigin,s=r;this.options.checkCrossOrigin&&US(r)&&(i||(i="anonymous"),s=VS(r)),this.crossOrigin=i,this.crossOriginUrl=s;var a=document.createElement("img");i&&(a.crossOrigin=i),a.src=s||r,a.alt=n.alt||"The image to crop",this.image=a,a.onload=this.start.bind(this),a.onerror=this.stop.bind(this),lr(a,RS),n.parentNode.insertBefore(a,n.nextSibling)}},{key:"start",value:function(){var n=this,r=this.image;r.onload=null,r.onerror=null,this.sizing=!0;var i=Zs.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Zs.navigator.userAgent),s=function(f,h){pn(n.imageData,{naturalWidth:f,naturalHeight:h,aspectRatio:f/h}),n.initialImageData=pn({},n.imageData),n.sizing=!1,n.sized=!0,n.build()};if(r.naturalWidth&&!i){s(r.naturalWidth,r.naturalHeight);return}var a=document.createElement("img"),l=document.body||document.documentElement;this.sizingImage=a,a.onload=function(){s(a.width,a.height),i||l.removeChild(a)},a.src=r.src,i||(a.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",l.appendChild(a))}},{key:"stop",value:function(){var n=this.image;n.onload=null,n.onerror=null,n.parentNode.removeChild(n),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var n=this.element,r=this.options,i=this.image,s=n.parentNode,a=document.createElement("div");a.innerHTML=TY;var l=a.querySelector(".".concat(dn,"-container")),c=l.querySelector(".".concat(dn,"-canvas")),f=l.querySelector(".".concat(dn,"-drag-box")),h=l.querySelector(".".concat(dn,"-crop-box")),m=h.querySelector(".".concat(dn,"-face"));this.container=s,this.cropper=l,this.canvas=c,this.dragBox=f,this.cropBox=h,this.viewBox=l.querySelector(".".concat(dn,"-view-box")),this.face=m,c.appendChild(i),lr(n,ri),s.insertBefore(l,n.nextSibling),Ws(i,RS),this.initPreview(),this.bind(),r.initialAspectRatio=Math.max(0,r.initialAspectRatio)||NaN,r.aspectRatio=Math.max(0,r.aspectRatio)||NaN,r.viewMode=Math.max(0,Math.min(3,Math.round(r.viewMode)))||0,lr(h,ri),r.guides||lr(h.getElementsByClassName("".concat(dn,"-dashed")),ri),r.center||lr(h.getElementsByClassName("".concat(dn,"-center")),ri),r.background&&lr(l,"".concat(dn,"-bg")),r.highlight||lr(m,gY),r.cropBoxMovable&&(lr(m,Rb),ed(m,Jf,Jx)),r.cropBoxResizable||(lr(h.getElementsByClassName("".concat(dn,"-line")),ri),lr(h.getElementsByClassName("".concat(dn,"-point")),ri)),this.render(),this.ready=!0,this.setDragMode(r.dragMode),r.autoCrop&&this.crop(),this.setData(r.data),ei(r.ready)&&Wi(n,OS,r.ready,{once:!0}),Sc(n,OS)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var n=this.cropper.parentNode;n&&n.removeChild(this.cropper),Ws(this.element,ri)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=KY,t}},{key:"setDefaults",value:function(n){pn(PS,hc(n)&&n)}}])}();pn(OD.prototype,qY,GY,$Y,YY,WY,XY);var Ml=function(){return Ml=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ml.apply(this,arguments)};function Fy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}var QY=["aspectRatio","autoCrop","autoCropArea","background","center","checkCrossOrigin","checkOrientation","cropBoxMovable","cropBoxResizable","data","dragMode","guides","highlight","initialAspectRatio","minCanvasHeight","minCanvasWidth","minContainerHeight","minContainerWidth","minCropBoxHeight","minCropBoxWidth","modal","movable","preview","responsive","restore","rotatable","scalable","toggleDragModeOnDblclick","viewMode","wheelZoomRatio","zoomOnTouch","zoomOnWheel","zoomable","cropstart","cropmove","cropend","crop","zoom","ready"],ZY={opacity:0,maxWidth:"100%"},JY=Ku.forwardRef(function(t,e){var n=Fy(t,[]),r=n.dragMode,i=r===void 0?"crop":r,s=n.src,a=n.style,l=n.className,c=n.crossOrigin,f=n.scaleX,h=n.scaleY,m=n.enable,p=n.zoomTo,y=n.rotateTo,T=n.alt,N=T===void 0?"picture":T,j=n.ready,A=n.onInitialized,C=Fy(n,["dragMode","src","style","className","crossOrigin","scaleX","scaleY","enable","zoomTo","rotateTo","alt","ready","onInitialized"]),M={scaleY:h,scaleX:f,enable:m,zoomTo:p,rotateTo:y},U=function(){for(var D=[],E=0;E<arguments.length;E++)D[E]=arguments[E];var _=K.useRef(null);return Ku.useEffect(function(){D.forEach(function(w){w&&(typeof w=="function"?w(_.current):w.current=_.current)})},[D]),_}(e,K.useRef(null));K.useEffect(function(){var D;!((D=U.current)===null||D===void 0)&&D.cropper&&typeof p=="number"&&U.current.cropper.zoomTo(p)},[n.zoomTo]),K.useEffect(function(){var D;!((D=U.current)===null||D===void 0)&&D.cropper&&s!==void 0&&U.current.cropper.reset().clear().replace(s)},[s]),K.useEffect(function(){if(U.current!==null){var D=new OD(U.current,Ml(Ml({dragMode:i},C),{ready:function(E){E.currentTarget!==null&&function(_,w){w===void 0&&(w={});var R=w.enable,k=R===void 0||R,P=w.scaleX,O=P===void 0?1:P,G=w.scaleY,Z=G===void 0?1:G,z=w.zoomTo,V=z===void 0?0:z,J=w.rotateTo;k?_.enable():_.disable(),_.scaleX(O),_.scaleY(Z),J!==void 0&&_.rotateTo(J),V>0&&_.zoomTo(V)}(E.currentTarget.cropper,M),j&&j(E)}}));A&&A(D)}return function(){var E,_;(_=(E=U.current)===null||E===void 0?void 0:E.cropper)===null||_===void 0||_.destroy()}},[U]);var H=function(D){return QY.reduce(function(E,_){var w=E,R=_;return w[R],Fy(w,[typeof R=="symbol"?R:R+""])},D)}(Ml(Ml({},C),{crossOrigin:c,src:s,alt:N}));return Ku.createElement("div",{style:a,className:l},Ku.createElement("img",Ml({},H,{style:ZY,ref:U})))});const MD=({isOpen:t,onClose:e,onImageReady:n})=>{const[r,i]=K.useState(null),[s,a]=K.useState(!1),[l,c]=K.useState(null),f=K.useRef(null),h=K.useRef(null);K.useEffect(()=>{const N=h.current;N&&(t?N.showModal():N.close())},[t]);const m=()=>{i(null),a(!1),c(null)},p=()=>{m(),e()},y=async N=>{if(c(null),N.target.files&&N.target.files.length>0){const j=N.target.files[0];a(!0);try{const A=await ZG(j,{maxSizeMB:1,maxWidthOrHeight:1024,useWebWorker:!0}),C=new FileReader;C.onload=()=>{i(C.result),a(!1)},C.readAsDataURL(A)}catch(A){c(A instanceof Error?A.message:"Image processing failed."),a(!1)}}},T=async()=>{var j;if(!((j=f.current)!=null&&j.cropper)){c("Cropper not available.");return}a(!0),c(null);const N=f.current.cropper.getCroppedCanvas({width:256,height:256,imageSmoothingQuality:"high"}).toDataURL("image/jpeg",.9);try{await n(N),p()}catch(A){c(A instanceof Error?A.message:"Upload failed. Please try again.")}finally{a(!1)}};return g.jsxs("dialog",{ref:h,onClose:p,className:"bg-zinc-800 text-zinc-200 p-0 rounded-lg shadow-2xl w-full max-w-md border border-zinc-700 backdrop:bg-black/50",children:[g.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-zinc-700",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Upload Portrait"}),g.jsx("button",{onClick:p,className:"p-1 rounded-full hover:bg-zinc-700 transition-colors",children:g.jsx(Xx,{className:"w-5 h-5"})})]}),g.jsxs("div",{className:"p-6",children:[r?g.jsx("div",{children:g.jsx(JY,{ref:f,src:r,style:{height:400,width:"100%"},aspectRatio:1/1,guides:!1,viewMode:1,autoCropArea:.8,movable:!0,zoomable:!0,background:!1,className:"bg-zinc-900 rounded-md"})}):g.jsxs("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-zinc-600 rounded-lg p-8 text-center",children:[g.jsx(Ov,{className:"w-12 h-12 text-zinc-500 mb-2"}),g.jsx("label",{htmlFor:"image-upload-input",className:"cursor-pointer bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition-colors duration-200",children:"Select an Image"}),g.jsx("input",{id:"image-upload-input",type:"file",accept:"image/*",onChange:y,className:"hidden"}),g.jsx("p",{className:"text-xs text-zinc-400 mt-2",children:"PNG, JPG, WEBP up to 1MB."}),s&&g.jsx("p",{className:"mt-2 text-zinc-400 animate-pulse",children:"Processing..."})]}),l&&g.jsx("p",{className:"text-red-400 text-sm mt-4",children:l})]}),g.jsxs("footer",{className:"flex justify-end gap-2 p-4 bg-zinc-900/50 border-t border-zinc-700",children:[g.jsx("button",{onClick:p,disabled:s,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition-colors disabled:bg-zinc-500 disabled:cursor-not-allowed",children:"Cancel"}),g.jsxs("button",{onClick:T,disabled:s||!r,className:"flex items-center gap-2 bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded transition-colors disabled:bg-zinc-600 disabled:cursor-not-allowed",children:[g.jsx(f$,{className:"w-5 h-5"}),s?"Saving...":"Save Cropped Image"]})]})]})},eW={name:"",level:0,school:"Evocation",castingTime:"1 Action",range:"60 feet",components:"V, S",duration:"Instantaneous",description:""},tW=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=K.useState(t),s=(f,h)=>{i(m=>({...m,[f]:h}))},a=f=>{f.preventDefault(),r.name.trim()&&e(r)},l=["Abjuration","Conjuration","Divination","Enchantment","Evocation","Illusion","Necromancy","Transmutation"],c="w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent";return g.jsxs("form",{onSubmit:a,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-6",children:[g.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Spell":"Add New Spell"}),g.jsx("input",{type:"text",placeholder:"Spell Name",value:r.name,onChange:f=>s("name",f.target.value),required:!0,className:c}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[g.jsx("input",{type:"number",placeholder:"Level",value:r.level,onChange:f=>s("level",parseInt(f.target.value)),min:"0",max:"9",className:c}),g.jsx("select",{value:r.school,onChange:f=>s("school",f.target.value),className:c,children:l.map(f=>g.jsx("option",{value:f,children:f},f))})]}),g.jsx("textarea",{placeholder:"Description",value:r.description,onChange:f=>s("description",f.target.value),rows:4,className:`${c} resize-y`}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition",children:"Cancel"}),g.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition",children:"Save Spell"})]})]})},nW=({spell:t,onEdit:e,onDelete:n,onToggleExpand:r,isExpanded:i})=>g.jsxs("div",{className:"bg-card/50 rounded-lg",children:[g.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-3",onClick:r,children:[g.jsx("h4",{className:"font-bold text-accent",children:t.name}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("span",{className:"text-sm text-muted-foreground capitalize",children:t.school}),g.jsx("button",{onClick:s=>{s.stopPropagation(),e()},className:"text-muted-foreground hover:text-accent p-1",children:g.jsx(al,{className:"w-4 h-4"})}),g.jsx("button",{onClick:s=>{s.stopPropagation(),n()},className:"text-muted-foreground hover:text-destructive p-1",children:g.jsx(na,{className:"w-4 h-4"})})]})]}),i&&g.jsxs("div",{className:"mt-2 pt-3 border-t border-border/50 space-y-2 text-sm p-3 bg-muted/30",children:[g.jsxs("p",{children:[g.jsx("strong",{className:"text-muted-foreground",children:"Casting Time:"})," ",t.castingTime]}),g.jsxs("p",{children:[g.jsx("strong",{className:"text-muted-foreground",children:"Range:"})," ",t.range]}),g.jsxs("p",{children:[g.jsx("strong",{className:"text-muted-foreground",children:"Components:"})," ",t.components]}),g.jsxs("p",{children:[g.jsx("strong",{className:"text-muted-foreground",children:"Duration:"})," ",t.duration]}),g.jsx("p",{className:"text-foreground mt-2 whitespace-pre-wrap",children:t.description})]})]}),rW=()=>{const{character:t,updateCharacter:e}=mr(),[n,r]=K.useState(null),[i,s]=K.useState({});if(!t)return null;const a=m=>{let p;if("id"in m)p=t.spells.map(y=>y.id===m.id?m:y);else{const y={...m,id:`spell_${Date.now()}`};p=[...t.spells,y]}e({spells:p}),r(null)},l=m=>{if(window.confirm("Are you sure you want to delete this spell?")){const p=t.spells.filter(y=>y.id!==m);e({spells:p})}},c=m=>{s(p=>({...p,[m]:!p[m]}))},f=K.useMemo(()=>t.spells.reduce((m,p)=>(m[p.level]=[...m[p.level]||[],p],m[p.level].sort((y,T)=>y.name.localeCompare(T.name)),m),{}),[t.spells]),h=Object.keys(f).map(Number).sort((m,p)=>m-p);return g.jsxs("div",{className:"bg-card/80 p-4 rounded-lg border border-border flex flex-col h-full",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Spellbook"}),g.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[g.jsx(iu,{className:"w-5 h-5"})," Add Spell"]})]}),n&&g.jsx(tW,{initialData:n==="new"?eW:n,onSave:a,onCancel:()=>r(null)}),g.jsxs("div",{className:"space-y-6 overflow-y-auto pr-2 -mr-2",children:[t.spells.length===0&&!n&&g.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"This character knows no spells. Add one to get started!"}),h.map(m=>g.jsxs("div",{children:[g.jsx("h4",{className:"text-xl font-serif text-foreground border-b border-border pb-1 mb-3",children:m===0?"Cantrips":`Level ${m}`}),g.jsx("div",{className:"space-y-3",children:f[m].map(p=>g.jsx(nW,{spell:p,isExpanded:!!i[p.id],onToggleExpand:()=>c(p.id),onEdit:()=>r(p),onDelete:()=>l(p.id)},p.id))})]},m))]})]})},iW={name:"",description:""},sW=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=K.useState(t),s=(l,c)=>{i(f=>({...f,[l]:c}))},a=l=>{l.preventDefault(),r.name.trim()&&e(r)};return g.jsxs("form",{onSubmit:a,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-4",children:[g.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Feature":"Add New Feature"}),g.jsx("input",{type:"text",placeholder:"Feature or Trait Name",value:r.name,onChange:l=>s("name",l.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent"}),g.jsx("textarea",{placeholder:"Description",value:r.description,onChange:l=>s("description",l.target.value),rows:4,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent resize-y"}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition",children:"Cancel"}),g.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition",children:"Save Feature"})]})]})},aW=()=>{const{character:t,updateCharacter:e}=mr(),[n,r]=K.useState(null),[i,s]=K.useState({});if(!t)return null;const a=h=>{let m;if("id"in h)m=t.featuresAndTraits.map(p=>p.id===h.id?h:p);else{const p={...h,id:`feat_${Date.now()}`};m=[...t.featuresAndTraits,p]}e({featuresAndTraits:m}),r(null)},l=h=>{if(window.confirm("Are you sure you want to delete this feature?")){const m=t.featuresAndTraits.filter(p=>p.id!==h);e({featuresAndTraits:m})}},c=h=>{s(m=>({...m,[h]:!m[h]}))},f=K.useMemo(()=>[...t.featuresAndTraits].sort((h,m)=>h.name.localeCompare(m.name)),[t.featuresAndTraits]);return g.jsxs("div",{className:"bg-card/80 p-4 rounded-lg border border-border flex flex-col h-full",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Features & Traits"}),g.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[g.jsx(iu,{className:"w-5 h-5"})," Add Feature"]})]}),n&&g.jsx(sW,{initialData:n==="new"?iW:n,onSave:a,onCancel:()=>r(null)}),g.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[f.length===0&&!n&&g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("p",{className:"text-center text-muted-foreground text-sm py-4",children:"No features or traits have been added."})}),f.map(h=>g.jsxs("div",{className:"bg-card/50 rounded-lg text-sm",children:[g.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer",onClick:()=>c(h.id),children:[g.jsx("span",{className:"font-semibold text-accent",children:h.name}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:m=>{m.stopPropagation(),r(h)},className:"text-muted-foreground hover:text-accent p-1",children:g.jsx(al,{className:"w-4 h-4"})}),g.jsx("button",{onClick:m=>{m.stopPropagation(),l(h.id)},className:"text-muted-foreground hover:text-destructive p-1",children:g.jsx(na,{className:"w-4 h-4"})})]})]}),i[h.id]&&g.jsx("div",{className:"p-3 border-t border-border/50 bg-muted/30",children:g.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:h.description})})]},h.id))]})]})},oW={name:"",quantity:1,description:"",equipped:!1},lW=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=K.useState(t),s=(f,h)=>{i(m=>({...m,[f]:h}))},a=f=>{f.preventDefault(),r.name.trim()&&e(r)},l="w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent text-sm",c="block text-xs font-medium text-muted-foreground mb-1";return g.jsxs("form",{onSubmit:a,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-4",children:[g.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Item":"Add New Item"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{htmlFor:"name",className:c,children:"Item Name"}),g.jsx("input",{id:"name",type:"text",placeholder:"e.g., Longsword",value:r.name,onChange:f=>s("name",f.target.value),required:!0,className:l})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"quantity",className:c,children:"Quantity"}),g.jsx("input",{id:"quantity",type:"number",value:r.quantity,onChange:f=>s("quantity",parseInt(f.target.value)||1),min:"1",className:`${l} text-center`})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"description",className:c,children:"Description"}),g.jsx("textarea",{id:"description",value:r.description,onChange:f=>s("description",f.target.value),className:l,rows:3})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"armorType",className:c,children:"Armor Type"}),g.jsxs("select",{id:"armorType",value:r.armorType||"",onChange:f=>s("armorType",f.target.value||void 0),className:l,children:[g.jsx("option",{value:"",children:"Not Armor"}),g.jsx("option",{value:"light",children:"Light Armor"}),g.jsx("option",{value:"medium",children:"Medium Armor"}),g.jsx("option",{value:"heavy",children:"Heavy Armor"}),g.jsx("option",{value:"shield",children:"Shield"})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"armorClass",className:c,children:"Armor Class (AC)"}),g.jsx("input",{id:"armorClass",type:"number",placeholder:"e.g., 14",value:r.armorClass||"",onChange:f=>s("armorClass",parseInt(f.target.value)||void 0),className:l})]})]}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition text-sm",children:"Cancel"}),g.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition text-sm",children:"Save Item"})]})]})},zS=({title:t,items:e,expandedItem:n,onToggleExpand:r,onEdit:i,onDelete:s})=>g.jsxs("div",{children:[g.jsx("h4",{className:"text-base font-semibold text-foreground border-b border-border pb-2 mb-3",children:t}),g.jsxs("div",{className:"space-y-2",children:[e.length===0&&g.jsx("p",{className:"text-center text-muted-foreground text-xs py-2",children:"Empty"}),e.map(a=>g.jsxs("div",{className:"bg-card/50 rounded-lg text-sm",children:[g.jsxs("div",{className:"p-3 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[g.jsx("button",{onClick:()=>r(a.id),className:"flex-shrink-0 text-muted-foreground hover:text-foreground",children:g.jsx(d$,{className:`w-5 h-5 transition-transform ${n===a.id?"rotate-180":""}`})}),g.jsxs("p",{className:"font-semibold text-accent truncate",title:a.name,children:[a.name," ",g.jsxs("span",{className:"text-xs text-muted-foreground",children:["(x",a.quantity,")"]})]})]}),g.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[g.jsx("button",{onClick:()=>i(a),className:"text-muted-foreground hover:text-accent p-1",children:g.jsx(al,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>s(a.id),className:"text-muted-foreground hover:text-destructive p-1",children:g.jsx(na,{className:"w-4 h-4"})})]})]}),n===a.id&&g.jsxs("div",{className:"p-3 border-t border-border/50 bg-muted/30 space-y-2",children:[a.armorType&&g.jsxs("p",{children:[g.jsxs("strong",{className:"text-muted-foreground capitalize",children:[a.armorType," Armor"]}),a.armorClass?g.jsxs("span",{className:"text-foreground",children:[" (AC: ",a.armorClass,")"]}):""]}),g.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:a.description||"No description."})]})]},a.id))]})]}),uW=()=>{const{character:t,updateCharacter:e}=mr(),[n,r]=K.useState(null),[i,s]=K.useState(null),a=m=>{let p;if("id"in m)p=(t.equipment||[]).map(y=>y.id===m.id?m:y);else{const y={...m,id:`item_${Date.now()}`};p=[...t.equipment||[],y]}e({equipment:p}),r(null)},l=m=>{if(window.confirm("Are you sure you want to delete this item?")){const p=(t.equipment||[]).filter(y=>y.id!==m);e({equipment:p})}},c=m=>{s(p=>p===m?null:m)},{equippableItems:f,backpackItems:h}=K.useMemo(()=>{const m=[],p=[];return(t.equipment||[]).forEach(y=>{y.armorType?m.push(y):p.push(y)}),{equippableItems:m.sort((y,T)=>y.name.localeCompare(T.name)),backpackItems:p.sort((y,T)=>y.name.localeCompare(T.name))}},[t.equipment]);return g.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Inventory"}),g.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[g.jsx(iu,{className:"w-5 h-5"})," Add Item"]})]}),n&&g.jsx(lW,{initialData:n==="new"?oW:n,onSave:a,onCancel:()=>r(null)}),g.jsxs("div",{className:"space-y-6",children:[g.jsx(zS,{title:"Equippable Gear",items:f,expandedItem:i,onToggleExpand:c,onEdit:r,onDelete:l}),g.jsx(zS,{title:"Backpack",items:h,expandedItem:i,onToggleExpand:c,onEdit:r,onDelete:l})]})]})},cW={name:"",bonus:"+0",damage:"1d4"},hW=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=K.useState(t),s=(l,c)=>{i(f=>({...f,[l]:c}))},a=l=>{l.preventDefault(),r.name.trim()&&e(r)};return g.jsxs("form",{onSubmit:a,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-4",children:[g.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Attack":"Add New Attack"}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[g.jsx("input",{type:"text",placeholder:"Attack Name",value:r.name,onChange:l=>s("name",l.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent sm:col-span-1"}),g.jsx("input",{type:"text",placeholder:"e.g. +5",value:r.bonus,onChange:l=>s("bonus",l.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent text-center"}),g.jsx("input",{type:"text",placeholder:"e.g. (2d6)+(1d4)+3",value:r.damage,onChange:l=>s("damage",l.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent text-center"})]}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition",children:"Cancel"}),g.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition",children:"Save Attack"})]})]})},fW=()=>{const{character:t,updateCharacter:e}=mr(),[n,r]=K.useState(null);if(!t)return null;const i=l=>{let c;if("id"in l)c=t.attacks.map(f=>f.id===l.id?l:f);else{const f={...l,id:`attack_${Date.now()}`};c=[...t.attacks,f]}e({attacks:c}),r(null)},s=l=>{if(window.confirm("Are you sure you want to delete this attack?")){const c=t.attacks.filter(f=>f.id!==l);e({attacks:c})}},a=K.useMemo(()=>[...t.attacks||[]].sort((l,c)=>l.name.localeCompare(c.name)),[t.attacks]);return g.jsxs("div",{className:"bg-card/80 p-4 rounded-lg border border-border flex flex-col h-full",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Attacks & Cantrips"}),g.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[g.jsx(iu,{className:"w-5 h-5"})," Add Attack"]})]}),n&&g.jsx(hW,{initialData:n==="new"?cW:n,onSave:i,onCancel:()=>r(null)}),g.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[a.length===0&&!n&&g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("p",{className:"text-center text-muted-foreground text-sm py-4",children:"No attacks have been defined."})}),a.map(l=>g.jsx("div",{className:"bg-card/50 rounded-lg text-sm",children:g.jsxs("div",{className:"grid grid-cols-6 items-center p-3",children:[g.jsx("span",{className:"font-semibold text-accent col-span-3",children:l.name}),g.jsx("span",{className:"font-mono text-foreground col-span-1 text-center",children:l.bonus}),g.jsx("span",{className:"font-mono text-foreground col-span-1 text-center",children:l.damage}),g.jsxs("div",{className:"flex items-center gap-2 justify-end col-span-1",children:[g.jsx("button",{onClick:()=>r(l),className:"text-muted-foreground hover:text-accent p-1",children:g.jsx(al,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>s(l.id),className:"text-muted-foreground hover:text-destructive p-1",children:g.jsx(na,{className:"w-4 h-4"})})]})]})},l.id))]})]})},dW={name:"",max:1},mW=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=K.useState(t),s=(l,c)=>{i(f=>({...f,[l]:c}))},a=l=>{l.preventDefault(),r.name.trim()&&e(r)};return g.jsxs("form",{onSubmit:a,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-4",children:[g.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Resource":"Add New Resource"}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[g.jsx("input",{type:"text",placeholder:"Resource Name",value:r.name,onChange:l=>s("name",l.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent sm:col-span-2"}),g.jsx("input",{type:"number",placeholder:"Max",value:r.max,onChange:l=>s("max",parseInt(l.target.value)||1),min:"1",className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent text-center"})]}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition",children:"Cancel"}),g.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition",children:"Save"})]})]})},pW=({character:t,onUpdateCharacter:e})=>{const[n,r]=K.useState(null),i=a=>{let l;if("id"in a)l=(t.customResources||[]).map(c=>c.id===a.id?{...c,name:a.name,max:a.max}:c);else{const c={...a,id:`resource_${Date.now()}`,used:0};l=[...t.customResources||[],c]}e({customResources:l}),r(null)},s=a=>{if(window.confirm("Are you sure you want to delete this resource?")){const l=(t.customResources||[]).filter(c=>c.id!==a);e({customResources:l})}};return g.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Other Resources"}),g.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[g.jsx(iu,{className:"w-5 h-5"})," Add Resource"]})]}),n&&g.jsx(mW,{initialData:n==="new"?dW:n,onSave:i,onCancel:()=>r(null)}),g.jsxs("div",{className:"space-y-2",children:[(t.customResources||[]).length===0&&!n&&g.jsx("p",{className:"text-center text-muted-foreground text-sm py-4",children:"No custom resources defined."}),(t.customResources||[]).map(a=>g.jsxs("div",{className:"bg-card/50 rounded-lg text-sm p-3 flex items-center justify-between",children:[g.jsx("span",{className:"font-semibold text-accent",children:a.name}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("span",{className:"text-muted-foreground",children:["Max: ",a.max]}),g.jsx("button",{onClick:()=>r(a),className:"text-muted-foreground hover:text-accent p-1",children:g.jsx(al,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>s(a.id),className:"text-muted-foreground hover:text-destructive p-1",children:g.jsx(na,{className:"w-4 h-4"})})]})]},a.id))]})]})},ws=({label:t,value:e,subValue:n,className:r})=>g.jsxs("div",{className:`flex flex-col items-center justify-center p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-center ${r}`,children:[g.jsx("span",{className:"text-2xl sm:text-3xl font-bold font-mono text-white",children:e}),g.jsx("span",{className:"text-xs uppercase tracking-wider text-zinc-400 mt-1",children:t}),n&&g.jsx("span",{className:"text-xs text-zinc-500",children:n})]}),Xs=t=>Math.floor((t-10)/2),si=t=>t>=0?`+${t}`:String(t),gW=t=>{if(typeof t!="string")return null;const e=parseInt(t,10);return isNaN(e)?null:`${Math.round(e/5*1.5)}m`},vW=({companion:t,onEdit:e,onDelete:n,onView:r,readOnly:i=!1})=>{const[s,a]=K.useState(!1),l=K.useRef(null),c=t.hp.max>0?t.hp.current/t.hp.max*100:0,f=c>50?"bg-green-500":c>25?"bg-yellow-500":"bg-red-500",m=Xs(t.abilityScores.dexterity),p=gW(t.speed);return K.useEffect(()=>{const y=T=>{l.current&&!l.current.contains(T.target)&&a(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]),i?g.jsxs("div",{onClick:r,className:"bg-card-alt border border-border rounded-lg shadow-lg transition-all duration-300 relative overflow-hidden group cursor-pointer hover:shadow-accent/20 hover:border-accent/30 hover:scale-[1.02]",role:"button",tabIndex:0,onKeyDown:y=>(y.key==="Enter"||y.key===" ")&&r&&r(),children:[g.jsx("div",{className:"w-full aspect-video bg-muted overflow-hidden",children:t.imageUrl?g.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}):g.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted/50",children:g.jsx(jg,{className:"w-16 h-16 text-muted-foreground/30"})})}),g.jsxs("div",{className:"p-4",children:[g.jsx("h3",{className:"text-xl font-cinzel font-bold text-accent truncate",children:t.name}),g.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:t.type||"Companion"}),g.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-center",children:[g.jsxs("div",{title:"Hit Points",children:[g.jsx(fD,{className:"w-6 h-6 mx-auto text-destructive/80 mb-1"}),g.jsxs("div",{className:"font-bold text-xl sm:text-2xl text-foreground",children:[t.hp.current," / ",t.hp.max]}),g.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"HP"})]}),g.jsxs("div",{title:"Armor Class",children:[g.jsx(R$,{className:"w-6 h-6 mx-auto text-accent/80 mb-1"}),g.jsx("div",{className:"font-bold text-2xl text-foreground",children:t.armorClass}),g.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"AC"})]}),g.jsxs("div",{title:"Speed",children:[g.jsx(C$,{className:"w-6 h-6 mx-auto text-primary/80 mb-1"}),g.jsxs("div",{className:"font-bold text-xl sm:text-2xl text-foreground",children:[t.speed,p&&g.jsxs("span",{className:"text-base font-normal",children:[" (",p,")"]})]}),g.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Speed"})]}),g.jsxs("div",{title:"Initiative",children:[g.jsx(S$,{className:"w-6 h-6 mx-auto text-yellow-400/80 mb-1"}),g.jsx("div",{className:"font-bold text-2xl text-foreground",children:si(m)}),g.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Initiative"})]})]}),g.jsx("div",{className:"w-full bg-muted rounded-full h-2.5 mt-4",children:g.jsx("div",{className:`${f} h-2.5 rounded-full transition-all duration-500`,style:{width:`${c}%`}})})]})]}):g.jsxs("div",{onClick:i?r:void 0,className:`bg-card-alt border border-border rounded-lg p-4 flex flex-col gap-3 shadow-lg transition-shadow duration-300 relative ${i?"cursor-pointer hover:shadow-accent/20":""}`,role:i?"button":void 0,tabIndex:i?0:void 0,onKeyDown:i?y=>(y.key==="Enter"||y.key===" ")&&r&&r():void 0,children:[g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("div",{className:"w-20 h-20 bg-muted rounded-md overflow-hidden flex-shrink-0",children:t.imageUrl?g.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}):g.jsx(jg,{className:"w-full h-full text-muted-foreground/50 p-4"})}),g.jsxs("div",{className:"flex-grow",children:[g.jsx("h3",{className:"text-lg font-bold text-accent truncate",children:t.name}),g.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:t.type})]}),!i&&g.jsxs("div",{className:"absolute top-2 right-2",ref:l,children:[g.jsx("button",{onClick:()=>a(y=>!y),className:"p-1 rounded-full text-muted-foreground hover:bg-muted",children:g.jsx(A$,{className:"w-5 h-5"})}),s&&g.jsxs("div",{className:"absolute right-0 mt-1 w-32 bg-zinc-800 border border-border rounded-md shadow-xl z-10",children:[g.jsxs("button",{onClick:()=>{e(),a(!1)},className:"w-full text-left flex items-center gap-2 px-3 py-2 text-sm hover:bg-zinc-700",children:[g.jsx(al,{className:"w-4 h-4"})," Edit"]}),g.jsxs("button",{onClick:()=>{n(),a(!1)},className:"w-full text-left flex items-center gap-2 px-3 py-2 text-sm text-destructive hover:bg-destructive/20",children:[g.jsx(na,{className:"w-4 h-4"})," Delete"]})]})]})]}),g.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"font-bold text-lg",children:[t.hp.current," / ",t.hp.max]}),g.jsx("div",{className:"text-xs text-muted-foreground",children:"HP"})]}),g.jsxs("div",{children:[g.jsx("div",{className:"font-bold text-lg",children:t.armorClass}),g.jsx("div",{className:"text-xs text-muted-foreground",children:"AC"})]}),g.jsxs("div",{children:[g.jsx("div",{className:"font-bold text-lg",children:t.speed}),g.jsxs("div",{className:"text-xs text-muted-foreground",children:["Speed ",p&&`(${p})`]})]}),g.jsxs("div",{children:[g.jsx("div",{className:"font-bold text-lg",children:si(m)}),g.jsx("div",{className:"text-xs text-muted-foreground",children:"Init"})]})]}),g.jsx("div",{className:"w-full bg-muted rounded-full h-1.5 mt-1",children:g.jsx("div",{className:`${f} h-1.5 rounded-full transition-all duration-500`,style:{width:`${c}%`}})})]})},yW=()=>({id:`atk_${Date.now()}_${Math.random()}`,name:"",bonus:"",damage:""}),_W=({companion:t,setCompanion:e,readOnly:n=!1})=>{if(n)return g.jsxs("div",{className:"space-y-2",children:[g.jsx("h4",{className:"text-md font-semibold text-zinc-400 mb-2",children:"Attacks"}),g.jsx("div",{className:"space-y-3 p-3 bg-muted/30 rounded-md border border-border",children:t.attacks.length===0?g.jsx("p",{className:"text-muted-foreground text-sm text-center italic",children:"No attacks defined."}):t.attacks.map((a,l)=>g.jsxs("div",{className:"grid grid-cols-[1fr_auto_auto] gap-2 items-center text-sm",children:[g.jsx("p",{className:"font-semibold",children:a.name}),g.jsx("p",{className:"w-20 text-center font-mono",children:a.bonus}),g.jsx("p",{className:"w-24 text-center font-mono",children:a.damage})]},l))})]});const r=(a,l,c)=>{const f=[...t.attacks];f[a]={...f[a],[l]:c},e(h=>({...h,attacks:f}))},i=()=>{e(a=>({...a,attacks:[...a.attacks,yW()]}))},s=a=>{e(l=>({...l,attacks:l.attacks.filter((c,f)=>f!==a)}))};return g.jsxs("div",{className:"space-y-2",children:[g.jsx("h4",{className:"text-md font-semibold text-zinc-400 mb-2",children:"Attacks"}),g.jsxs("div",{className:"space-y-3 p-3 bg-muted/30 rounded-md border border-border",children:[t.attacks.map((a,l)=>g.jsxs("div",{className:"grid grid-cols-[1fr_auto_auto_auto] gap-2 items-center",children:[g.jsx("input",{type:"text",placeholder:"Attack Name",value:a.name,onChange:c=>r(l,"name",c.target.value),className:"w-full bg-input border border-border rounded-md py-1 px-2 text-sm"}),g.jsx("input",{type:"text",placeholder:"Bonus",value:a.bonus,onChange:c=>r(l,"bonus",c.target.value),className:"w-20 bg-input border border-border rounded-md py-1 px-2 text-sm text-center"}),g.jsx("input",{type:"text",placeholder:"Damage",value:a.damage,onChange:c=>r(l,"damage",c.target.value),className:"w-24 bg-input border border-border rounded-md py-1 px-2 text-sm text-center"}),g.jsx("button",{onClick:()=>s(l),className:"p-1 text-muted-foreground hover:text-destructive",children:g.jsx(na,{className:"w-4 h-4"})})]},l)),g.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-1 text-sm text-accent hover:text-primary transition-colors py-1 border border-dashed border-border rounded-md",children:[g.jsx(Mv,{className:"w-4 h-4"})," Add Attack"]})]})]})},bW=()=>({id:`spell_${Date.now()}_${Math.random()}`,name:"",description:"",level:0,school:"",castingTime:"",range:"",components:"",duration:""}),xW=({companion:t,setCompanion:e,readOnly:n=!1})=>{if(n)return g.jsxs("div",{className:"space-y-2",children:[g.jsx("h4",{className:"text-md font-semibold text-zinc-400 mb-2",children:"Spells & Special Abilities"}),g.jsx("div",{className:"space-y-3 p-3 bg-muted/30 rounded-md border border-border",children:t.spells.length===0?g.jsx("p",{className:"text-muted-foreground text-sm text-center italic",children:"No special abilities defined."}):t.spells.map((a,l)=>g.jsxs("div",{className:"text-sm border-b border-border/50 pb-2 last:border-b-0",children:[g.jsx("p",{className:"font-semibold",children:a.name}),g.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-wrap",children:a.description})]},l))})]});const r=(a,l,c)=>{const f=[...t.spells];f[a]={...f[a],[l]:c},e(h=>({...h,spells:f}))},i=()=>{e(a=>({...a,spells:[...a.spells,bW()]}))},s=a=>{e(l=>({...l,spells:l.spells.filter((c,f)=>f!==a)}))};return g.jsxs("div",{className:"space-y-2",children:[g.jsx("h4",{className:"text-md font-semibold text-zinc-400 mb-2",children:"Spells & Special Abilities"}),g.jsxs("div",{className:"space-y-3 p-3 bg-muted/30 rounded-md border border-border",children:[t.spells.map((a,l)=>g.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-2 items-start",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsx("input",{type:"text",placeholder:"Ability Name",value:a.name,onChange:c=>r(l,"name",c.target.value),className:"w-full bg-input border border-border rounded-md py-1 px-2 text-sm"}),g.jsx("textarea",{placeholder:"Description",value:a.description,onChange:c=>r(l,"description",c.target.value),rows:2,className:"w-full bg-input border border-border rounded-md py-1 px-2 text-xs resize-y"})]}),g.jsx("button",{onClick:()=>s(l),className:"p-1 text-muted-foreground hover:text-destructive mt-1",children:g.jsx(na,{className:"w-4 h-4"})})]},l)),g.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-1 text-sm text-accent hover:text-primary transition-colors py-1 border border-dashed border-border rounded-md",children:[g.jsx(Mv,{className:"w-4 h-4"})," Add Spell/Ability"]})]})]})},jD=({label:t,value:e,onChange:n,placeholder:r,className:i="",inputClassName:s="",showModifier:a})=>{const l=()=>n(Number(e)+1),c=()=>n(Number(e)-1),f=si(Xs(Number(e))),h="p-1.5 bg-secondary hover:bg-accent text-secondary-foreground hover:text-accent-foreground rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed";return g.jsxs("div",{className:"flex flex-col items-center",children:[a&&g.jsx("div",{className:"text-lg font-bold text-accent h-7 flex items-center mb-1",children:f}),g.jsxs("div",{className:`flex items-center gap-0.5 bg-input border border-border rounded-md p-1 ${i}`,children:[g.jsx("button",{type:"button",onClick:c,className:h,children:g.jsx(dD,{className:"w-4 h-4"})}),g.jsx("input",{type:"number",value:e,onChange:m=>{const p=m.target.value;n(p===""?"":parseInt(p,10))},placeholder:r,className:`no-spinner w-12 bg-transparent border-0 text-center text-2xl font-bold text-foreground focus:ring-0 focus:outline-none placeholder:text-muted-foreground/50 placeholder:font-normal placeholder:text-sm ${s}`}),g.jsx("button",{type:"button",onClick:l,className:h,children:g.jsx(Mv,{className:"w-4 h-4"})})]}),t&&g.jsx("label",{className:"block text-sm font-medium text-muted-foreground mt-2",children:t})]})},wW=({hp:t,onHpChange:e})=>{const[n,r]=K.useState(""),i=c=>{if(isNaN(c)||c===0)return;let f=t.current,h=t.temporary;if(c<0){const m=Math.abs(c);if(h>0){const p=Math.min(m,h);h-=p,f-=m-p}else f-=m}else f+=c;f=Math.max(0,Math.min(f,t.max||f)),e({...t,current:f,temporary:h}),r("")},s=()=>{const c=Number(n);isNaN(c)||c<0||(e({...t,temporary:Math.max(t.temporary,c)}),r(""))},a=t.max>0?t.current/t.max*100:100,l=a>50?"bg-green-500":a>25?"bg-yellow-500":"bg-red-500";return g.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg border border-border space-y-3",children:[g.jsxs("div",{className:"flex justify-between items-center text-lg font-bold",children:[g.jsx("span",{className:"text-muted-foreground text-sm uppercase",children:"Punti Ferita"}),g.jsxs("div",{children:[g.jsx("span",{children:t.current}),t.temporary>0&&g.jsxs("span",{className:"text-blue-400",children:[" + ",t.temporary]}),g.jsxs("span",{className:"text-muted-foreground",children:[" / ",t.max||"??"]})]})]}),g.jsx("div",{className:"w-full bg-muted rounded-full h-2.5",children:g.jsx("div",{className:`${l} h-2.5 rounded-full transition-all duration-500`,style:{width:`${a}%`}})}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center",children:[g.jsx(jD,{value:n,onChange:c=>r(c===""?"":Number(c)),placeholder:"Valore",inputClassName:"w-16",showModifier:!1}),g.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[g.jsxs("button",{onClick:()=>i(-(Number(n)||0)),className:"flex-1 sm:flex-auto flex items-center justify-center gap-2 px-3 py-2 bg-red-800/50 text-red-200 font-bold rounded-lg shadow-md hover:bg-red-700/60 transition-colors",children:[g.jsx(dD,{className:"w-5 h-5"})," Danno"]}),g.jsxs("button",{onClick:()=>i(Number(n)||0),className:"flex-1 sm:flex-auto flex items-center justify-center gap-2 px-3 py-2 bg-green-800/50 text-green-200 font-bold rounded-lg shadow-md hover:bg-green-700/60 transition-colors",children:[g.jsx(Mv,{className:"w-5 h-5"})," Cura"]}),g.jsxs("button",{onClick:s,className:"flex-1 sm:flex-auto flex items-center justify-center gap-2 px-3 py-2 bg-blue-800/50 text-blue-200 font-bold rounded-lg shadow-md hover:bg-blue-700/60 transition-colors",children:[g.jsx(fD,{className:"w-5 h-5"})," Temp"]})]})]})]})};var Ug={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ug.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",f=500,h="__lodash_placeholder__",m=1,p=2,y=4,T=1,N=2,j=1,A=2,C=4,M=8,U=16,H=32,D=64,E=128,_=256,w=512,R=30,k="...",P=800,O=16,G=1,Z=2,z=3,V=1/0,J=9007199254740991,ee=17976931348623157e292,ie=NaN,_e=4294967295,me=_e-1,ye=_e>>>1,W=[["ary",E],["bind",j],["bindKey",A],["curry",M],["curryRight",U],["flip",w],["partial",H],["partialRight",D],["rearg",_]],X="[object Arguments]",ce="[object Array]",Oe="[object AsyncFunction]",je="[object Boolean]",$e="[object Date]",Pe="[object DOMException]",gt="[object Error]",Ye="[object Function]",In="[object GeneratorFunction]",Lt="[object Map]",bt="[object Number]",Ut="[object Null]",it="[object Object]",Et="[object Promise]",rn="[object Proxy]",Xt="[object RegExp]",st="[object Set]",yn="[object String]",At="[object Symbol]",et="[object Undefined]",Ht="[object WeakMap]",Ot="[object WeakSet]",Mt="[object ArrayBuffer]",at="[object DataView]",un="[object Float32Array]",sn="[object Float64Array]",wn="[object Int8Array]",cn="[object Int16Array]",an="[object Int32Array]",Ln="[object Uint8Array]",ir="[object Uint8ClampedArray]",Oi="[object Uint16Array]",ra="[object Uint32Array]",Mi=/\b__p \+= '';/g,ji=/\b(__p \+=) '' \+/g,ci=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Gr=/&(?:amp|lt|gt|quot|#39);/g,Wn=/[&<>"']/g,Tr=RegExp(Gr.source),Xn=RegExp(Wn.source),ki=/<%-([\s\S]+?)%>/g,Pi=/<%([\s\S]+?)%>/g,sr=/<%=([\s\S]+?)%>/g,Un=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gu=/^\w*$/,Kn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$=/[\\^$.*+?()[\]{}|]/g,te=RegExp($.source),se=/^\s+/,ge=/\s/,xe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ne=/\{\n\/\* \[wrapped with (.+)\] \*/,Le=/,? & /,Ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Se=/[()=,{}\[\]\/\s]/,Te=/\\(\\)?/g,Ie=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ze=/\w*$/,qe=/^[-+]0x[0-9a-f]+$/i,En=/^0b[01]+$/i,St=/^\[object .+?Constructor\]$/,ot=/^0o[0-7]+$/i,qt=/^(?:0|[1-9]\d*)$/,ls=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,hi=/($^)/,fi=/['\n\r\u2028\u2029\\]/g,Vn="\\ud800-\\udfff",Ha="\\u0300-\\u036f",us="\\ufe20-\\ufe2f",kr="\\u20d0-\\u20ff",Pr=Ha+us+kr,cs="\\u2700-\\u27bf",lt="a-z\\xdf-\\xf6\\xf8-\\xff",Kt="\\xac\\xb1\\xd7\\xf7",hs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ns="\\u2000-\\u206f",en=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",di="A-Z\\xc0-\\xd6\\xd8-\\xde",qa="\\ufe0e\\ufe0f",ol=Kt+hs+Ns+en,uh="['’]",kv="["+Vn+"]",ch="["+ol+"]",ll="["+Pr+"]",Md="\\d+",ia="["+cs+"]",Li="["+lt+"]",ul="[^"+Vn+ol+Md+cs+lt+di+"]",Ga="\\ud83c[\\udffb-\\udfff]",jd="(?:"+ll+"|"+Ga+")",Gt="[^"+Vn+"]",$a="(?:\\ud83c[\\udde6-\\uddff]){2}",sa="[\\ud800-\\udbff][\\udc00-\\udfff]",Ui="["+di+"]",kd="\\u200d",hh="(?:"+Li+"|"+ul+")",Pv="(?:"+Ui+"|"+ul+")",Pd="(?:"+uh+"(?:d|ll|m|re|s|t|ve))?",Ld="(?:"+uh+"(?:D|LL|M|RE|S|T|VE))?",Ud=jd+"?",Ya="["+qa+"]?",Is="(?:"+kd+"(?:"+[Gt,$a,sa].join("|")+")"+Ya+Ud+")*",Vd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",fh=Ya+Ud+Is,Wa="(?:"+[ia,$a,sa].join("|")+")"+fh,Lv="(?:"+[Gt+ll+"?",ll,$a,sa,kv].join("|")+")",Uv=RegExp(uh,"g"),Vv=RegExp(ll,"g"),Vi=RegExp(Ga+"(?="+Ga+")|"+Lv+fh,"g"),zv=RegExp([Ui+"?"+Li+"+"+Pd+"(?="+[ch,Ui,"$"].join("|")+")",Pv+"+"+Ld+"(?="+[ch,Ui+hh,"$"].join("|")+")",Ui+"?"+hh+"+"+Pd,Ui+"+"+Ld,zd,Vd,Md,Wa].join("|"),"g"),Bv=RegExp("["+kd+Vn+Pr+qa+"]"),vu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,yu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Bd=-1,Rt={};Rt[un]=Rt[sn]=Rt[wn]=Rt[cn]=Rt[an]=Rt[Ln]=Rt[ir]=Rt[Oi]=Rt[ra]=!0,Rt[X]=Rt[ce]=Rt[Mt]=Rt[je]=Rt[at]=Rt[$e]=Rt[gt]=Rt[Ye]=Rt[Lt]=Rt[bt]=Rt[it]=Rt[Xt]=Rt[st]=Rt[yn]=Rt[Ht]=!1;var Tt={};Tt[X]=Tt[ce]=Tt[Mt]=Tt[at]=Tt[je]=Tt[$e]=Tt[un]=Tt[sn]=Tt[wn]=Tt[cn]=Tt[an]=Tt[Lt]=Tt[bt]=Tt[it]=Tt[Xt]=Tt[st]=Tt[yn]=Tt[At]=Tt[Ln]=Tt[ir]=Tt[Oi]=Tt[ra]=!0,Tt[gt]=Tt[Ye]=Tt[Ht]=!1;var Fd={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},dh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},hn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Fv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Hv=parseFloat,Hd=parseInt,mh=typeof jh=="object"&&jh&&jh.Object===Object&&jh,qd=typeof self=="object"&&self&&self.Object===Object&&self,Tn=mh||qd||Function("return this")(),_u=e&&!e.nodeType&&e,pr=_u&&!0&&t&&!t.nodeType&&t,ph=pr&&pr.exports===_u,gh=ph&&mh.process,ar=function(){try{var Q=pr&&pr.require&&pr.require("util").types;return Q||gh&&gh.binding&&gh.binding("util")}catch{}}(),vh=ar&&ar.isArrayBuffer,bu=ar&&ar.isDate,cl=ar&&ar.isMap,yh=ar&&ar.isRegExp,hl=ar&&ar.isSet,Gd=ar&&ar.isTypedArray;function Ar(Q,le,ae){switch(ae.length){case 0:return Q.call(le);case 1:return Q.call(le,ae[0]);case 2:return Q.call(le,ae[0],ae[1]);case 3:return Q.call(le,ae[0],ae[1],ae[2])}return Q.apply(le,ae)}function fl(Q,le,ae,Re){for(var We=-1,Nt=Q==null?0:Q.length;++We<Nt;){var Zn=Q[We];le(Re,Zn,ae(Zn),Q)}return Re}function Lr(Q,le){for(var ae=-1,Re=Q==null?0:Q.length;++ae<Re&&le(Q[ae],ae,Q)!==!1;);return Q}function $d(Q,le){for(var ae=Q==null?0:Q.length;ae--&&le(Q[ae],ae,Q)!==!1;);return Q}function xu(Q,le){for(var ae=-1,Re=Q==null?0:Q.length;++ae<Re;)if(!le(Q[ae],ae,Q))return!1;return!0}function zi(Q,le){for(var ae=-1,Re=Q==null?0:Q.length,We=0,Nt=[];++ae<Re;){var Zn=Q[ae];le(Zn,ae,Q)&&(Nt[We++]=Zn)}return Nt}function dl(Q,le){var ae=Q==null?0:Q.length;return!!ae&&aa(Q,le,0)>-1}function Xa(Q,le,ae){for(var Re=-1,We=Q==null?0:Q.length;++Re<We;)if(ae(le,Q[Re]))return!0;return!1}function Qt(Q,le){for(var ae=-1,Re=Q==null?0:Q.length,We=Array(Re);++ae<Re;)We[ae]=le(Q[ae],ae,Q);return We}function fs(Q,le){for(var ae=-1,Re=le.length,We=Q.length;++ae<Re;)Q[We+ae]=le[ae];return Q}function ds(Q,le,ae,Re){var We=-1,Nt=Q==null?0:Q.length;for(Re&&Nt&&(ae=Q[++We]);++We<Nt;)ae=le(ae,Q[We],We,Q);return ae}function Yd(Q,le,ae,Re){var We=Q==null?0:Q.length;for(Re&&We&&(ae=Q[--We]);We--;)ae=le(ae,Q[We],We,Q);return ae}function wu(Q,le){for(var ae=-1,Re=Q==null?0:Q.length;++ae<Re;)if(le(Q[ae],ae,Q))return!0;return!1}var Wd=S("length");function Xd(Q){return Q.split("")}function Eu(Q){return Q.match(Ce)||[]}function Sr(Q,le,ae){var Re;return ae(Q,function(We,Nt,Zn){if(le(We,Nt,Zn))return Re=Nt,!1}),Re}function ml(Q,le,ae,Re){for(var We=Q.length,Nt=ae+(Re?1:-1);Re?Nt--:++Nt<We;)if(le(Q[Nt],Nt,Q))return Nt;return-1}function aa(Q,le,ae){return le===le?GD(Q,le,ae):ml(Q,d,ae)}function Ka(Q,le,ae,Re){for(var We=ae-1,Nt=Q.length;++We<Nt;)if(Re(Q[We],le))return We;return-1}function d(Q){return Q!==Q}function b(Q,le){var ae=Q==null?0:Q.length;return ae?be(Q,le)/ae:ie}function S(Q){return function(le){return le==null?n:le[Q]}}function B(Q){return function(le){return Q==null?n:Q[le]}}function re(Q,le,ae,Re,We){return We(Q,function(Nt,Zn,Zt){ae=Re?(Re=!1,Nt):le(ae,Nt,Zn,Zt)}),ae}function oe(Q,le){var ae=Q.length;for(Q.sort(le);ae--;)Q[ae]=Q[ae].value;return Q}function be(Q,le){for(var ae,Re=-1,We=Q.length;++Re<We;){var Nt=le(Q[Re]);Nt!==n&&(ae=ae===n?Nt:ae+Nt)}return ae}function Ct(Q,le){for(var ae=-1,Re=Array(Q);++ae<Q;)Re[ae]=le(ae);return Re}function Qn(Q,le){return Qt(le,function(ae){return[ae,Q[ae]]})}function vt(Q){return Q&&Q.slice(0,rw(Q)+1).replace(se,"")}function jt(Q){return function(le){return Q(le)}}function zn(Q,le){return Qt(le,function(ae){return Q[ae]})}function Bi(Q,le){return Q.has(le)}function $r(Q,le){for(var ae=-1,Re=Q.length;++ae<Re&&aa(le,Q[ae],0)>-1;);return ae}function pl(Q,le){for(var ae=Q.length;ae--&&aa(le,Q[ae],0)>-1;);return ae}function _h(Q,le){for(var ae=Q.length,Re=0;ae--;)Q[ae]===le&&++Re;return Re}var UD=B(Fd),VD=B(dh);function zD(Q){return"\\"+Fv[Q]}function BD(Q,le){return Q==null?n:Q[le]}function Tu(Q){return Bv.test(Q)}function FD(Q){return vu.test(Q)}function HD(Q){for(var le,ae=[];!(le=Q.next()).done;)ae.push(le.value);return ae}function qv(Q){var le=-1,ae=Array(Q.size);return Q.forEach(function(Re,We){ae[++le]=[We,Re]}),ae}function nw(Q,le){return function(ae){return Q(le(ae))}}function Qa(Q,le){for(var ae=-1,Re=Q.length,We=0,Nt=[];++ae<Re;){var Zn=Q[ae];(Zn===le||Zn===h)&&(Q[ae]=h,Nt[We++]=ae)}return Nt}function Kd(Q){var le=-1,ae=Array(Q.size);return Q.forEach(function(Re){ae[++le]=Re}),ae}function qD(Q){var le=-1,ae=Array(Q.size);return Q.forEach(function(Re){ae[++le]=[Re,Re]}),ae}function GD(Q,le,ae){for(var Re=ae-1,We=Q.length;++Re<We;)if(Q[Re]===le)return Re;return-1}function $D(Q,le,ae){for(var Re=ae+1;Re--;)if(Q[Re]===le)return Re;return Re}function Au(Q){return Tu(Q)?WD(Q):Wd(Q)}function ms(Q){return Tu(Q)?XD(Q):Xd(Q)}function rw(Q){for(var le=Q.length;le--&&ge.test(Q.charAt(le)););return le}var YD=B(hn);function WD(Q){for(var le=Vi.lastIndex=0;Vi.test(Q);)++le;return le}function XD(Q){return Q.match(Vi)||[]}function KD(Q){return Q.match(zv)||[]}var QD=function Q(le){le=le==null?Tn:Su.defaults(Tn.Object(),le,Su.pick(Tn,yu));var ae=le.Array,Re=le.Date,We=le.Error,Nt=le.Function,Zn=le.Math,Zt=le.Object,Gv=le.RegExp,ZD=le.String,Fi=le.TypeError,Qd=ae.prototype,JD=Nt.prototype,Ru=Zt.prototype,Zd=le["__core-js_shared__"],Jd=JD.toString,Vt=Ru.hasOwnProperty,e5=0,iw=function(){var o=/[^.]+$/.exec(Zd&&Zd.keys&&Zd.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),em=Ru.toString,t5=Jd.call(Zt),n5=Tn._,r5=Gv("^"+Jd.call(Vt).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tm=ph?le.Buffer:n,Za=le.Symbol,nm=le.Uint8Array,sw=tm?tm.allocUnsafe:n,rm=nw(Zt.getPrototypeOf,Zt),aw=Zt.create,ow=Ru.propertyIsEnumerable,im=Qd.splice,lw=Za?Za.isConcatSpreadable:n,bh=Za?Za.iterator:n,gl=Za?Za.toStringTag:n,sm=function(){try{var o=xl(Zt,"defineProperty");return o({},"",{}),o}catch{}}(),i5=le.clearTimeout!==Tn.clearTimeout&&le.clearTimeout,s5=Re&&Re.now!==Tn.Date.now&&Re.now,a5=le.setTimeout!==Tn.setTimeout&&le.setTimeout,am=Zn.ceil,om=Zn.floor,$v=Zt.getOwnPropertySymbols,o5=tm?tm.isBuffer:n,uw=le.isFinite,l5=Qd.join,u5=nw(Zt.keys,Zt),Jn=Zn.max,Rr=Zn.min,c5=Re.now,h5=le.parseInt,cw=Zn.random,f5=Qd.reverse,Yv=xl(le,"DataView"),xh=xl(le,"Map"),Wv=xl(le,"Promise"),Cu=xl(le,"Set"),wh=xl(le,"WeakMap"),Eh=xl(Zt,"create"),lm=wh&&new wh,Nu={},d5=wl(Yv),m5=wl(xh),p5=wl(Wv),g5=wl(Cu),v5=wl(wh),um=Za?Za.prototype:n,Th=um?um.valueOf:n,hw=um?um.toString:n;function L(o){if(An(o)&&!Ke(o)&&!(o instanceof ft)){if(o instanceof Hi)return o;if(Vt.call(o,"__wrapped__"))return fE(o)}return new Hi(o)}var Iu=function(){function o(){}return function(u){if(!_n(u))return{};if(aw)return aw(u);o.prototype=u;var v=new o;return o.prototype=n,v}}();function cm(){}function Hi(o,u){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=n}L.templateSettings={escape:ki,evaluate:Pi,interpolate:sr,variable:"",imports:{_:L}},L.prototype=cm.prototype,L.prototype.constructor=L,Hi.prototype=Iu(cm.prototype),Hi.prototype.constructor=Hi;function ft(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}function y5(){var o=new ft(this.__wrapped__);return o.__actions__=Yr(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Yr(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Yr(this.__views__),o}function _5(){if(this.__filtered__){var o=new ft(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function b5(){var o=this.__wrapped__.value(),u=this.__dir__,v=Ke(o),x=u<0,I=v?o.length:0,F=OO(0,I,this.__views__),q=F.start,Y=F.end,ne=Y-q,he=x?Y:q-1,fe=this.__iteratees__,ve=fe.length,we=0,De=Rr(ne,this.__takeCount__);if(!v||!x&&I==ne&&De==ne)return kw(o,this.__actions__);var Ue=[];e:for(;ne--&&we<De;){he+=u;for(var Ze=-1,Ve=o[he];++Ze<ve;){var ut=fe[Ze],yt=ut.iteratee,gi=ut.type,zr=yt(Ve);if(gi==Z)Ve=zr;else if(!zr){if(gi==G)continue e;break e}}Ue[we++]=Ve}return Ue}ft.prototype=Iu(cm.prototype),ft.prototype.constructor=ft;function vl(o){var u=-1,v=o==null?0:o.length;for(this.clear();++u<v;){var x=o[u];this.set(x[0],x[1])}}function x5(){this.__data__=Eh?Eh(null):{},this.size=0}function w5(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}function E5(o){var u=this.__data__;if(Eh){var v=u[o];return v===c?n:v}return Vt.call(u,o)?u[o]:n}function T5(o){var u=this.__data__;return Eh?u[o]!==n:Vt.call(u,o)}function A5(o,u){var v=this.__data__;return this.size+=this.has(o)?0:1,v[o]=Eh&&u===n?c:u,this}vl.prototype.clear=x5,vl.prototype.delete=w5,vl.prototype.get=E5,vl.prototype.has=T5,vl.prototype.set=A5;function oa(o){var u=-1,v=o==null?0:o.length;for(this.clear();++u<v;){var x=o[u];this.set(x[0],x[1])}}function S5(){this.__data__=[],this.size=0}function R5(o){var u=this.__data__,v=hm(u,o);if(v<0)return!1;var x=u.length-1;return v==x?u.pop():im.call(u,v,1),--this.size,!0}function C5(o){var u=this.__data__,v=hm(u,o);return v<0?n:u[v][1]}function N5(o){return hm(this.__data__,o)>-1}function I5(o,u){var v=this.__data__,x=hm(v,o);return x<0?(++this.size,v.push([o,u])):v[x][1]=u,this}oa.prototype.clear=S5,oa.prototype.delete=R5,oa.prototype.get=C5,oa.prototype.has=N5,oa.prototype.set=I5;function la(o){var u=-1,v=o==null?0:o.length;for(this.clear();++u<v;){var x=o[u];this.set(x[0],x[1])}}function D5(){this.size=0,this.__data__={hash:new vl,map:new(xh||oa),string:new vl}}function O5(o){var u=Em(this,o).delete(o);return this.size-=u?1:0,u}function M5(o){return Em(this,o).get(o)}function j5(o){return Em(this,o).has(o)}function k5(o,u){var v=Em(this,o),x=v.size;return v.set(o,u),this.size+=v.size==x?0:1,this}la.prototype.clear=D5,la.prototype.delete=O5,la.prototype.get=M5,la.prototype.has=j5,la.prototype.set=k5;function yl(o){var u=-1,v=o==null?0:o.length;for(this.__data__=new la;++u<v;)this.add(o[u])}function P5(o){return this.__data__.set(o,c),this}function L5(o){return this.__data__.has(o)}yl.prototype.add=yl.prototype.push=P5,yl.prototype.has=L5;function ps(o){var u=this.__data__=new oa(o);this.size=u.size}function U5(){this.__data__=new oa,this.size=0}function V5(o){var u=this.__data__,v=u.delete(o);return this.size=u.size,v}function z5(o){return this.__data__.get(o)}function B5(o){return this.__data__.has(o)}function F5(o,u){var v=this.__data__;if(v instanceof oa){var x=v.__data__;if(!xh||x.length<i-1)return x.push([o,u]),this.size=++v.size,this;v=this.__data__=new la(x)}return v.set(o,u),this.size=v.size,this}ps.prototype.clear=U5,ps.prototype.delete=V5,ps.prototype.get=z5,ps.prototype.has=B5,ps.prototype.set=F5;function fw(o,u){var v=Ke(o),x=!v&&El(o),I=!v&&!x&&ro(o),F=!v&&!x&&!I&&ju(o),q=v||x||I||F,Y=q?Ct(o.length,ZD):[],ne=Y.length;for(var he in o)(u||Vt.call(o,he))&&!(q&&(he=="length"||I&&(he=="offset"||he=="parent")||F&&(he=="buffer"||he=="byteLength"||he=="byteOffset")||fa(he,ne)))&&Y.push(he);return Y}function dw(o){var u=o.length;return u?o[s0(0,u-1)]:n}function H5(o,u){return Tm(Yr(o),_l(u,0,o.length))}function q5(o){return Tm(Yr(o))}function Xv(o,u,v){(v!==n&&!gs(o[u],v)||v===n&&!(u in o))&&ua(o,u,v)}function Ah(o,u,v){var x=o[u];(!(Vt.call(o,u)&&gs(x,v))||v===n&&!(u in o))&&ua(o,u,v)}function hm(o,u){for(var v=o.length;v--;)if(gs(o[v][0],u))return v;return-1}function G5(o,u,v,x){return Ja(o,function(I,F,q){u(x,I,v(I),q)}),x}function mw(o,u){return o&&Os(u,or(u),o)}function $5(o,u){return o&&Os(u,Xr(u),o)}function ua(o,u,v){u=="__proto__"&&sm?sm(o,u,{configurable:!0,enumerable:!0,value:v,writable:!0}):o[u]=v}function Kv(o,u){for(var v=-1,x=u.length,I=ae(x),F=o==null;++v<x;)I[v]=F?n:I0(o,u[v]);return I}function _l(o,u,v){return o===o&&(v!==n&&(o=o<=v?o:v),u!==n&&(o=o>=u?o:u)),o}function qi(o,u,v,x,I,F){var q,Y=u&m,ne=u&p,he=u&y;if(v&&(q=I?v(o,x,I,F):v(o)),q!==n)return q;if(!_n(o))return o;var fe=Ke(o);if(fe){if(q=jO(o),!Y)return Yr(o,q)}else{var ve=Cr(o),we=ve==Ye||ve==In;if(ro(o))return Uw(o,Y);if(ve==it||ve==X||we&&!I){if(q=ne||we?{}:rE(o),!Y)return ne?EO(o,$5(q,o)):wO(o,mw(q,o))}else{if(!Tt[ve])return I?o:{};q=kO(o,ve,Y)}}F||(F=new ps);var De=F.get(o);if(De)return De;F.set(o,q),OE(o)?o.forEach(function(Ve){q.add(qi(Ve,u,v,Ve,o,F))}):IE(o)&&o.forEach(function(Ve,ut){q.set(ut,qi(Ve,u,v,ut,o,F))});var Ue=he?ne?g0:p0:ne?Xr:or,Ze=fe?n:Ue(o);return Lr(Ze||o,function(Ve,ut){Ze&&(ut=Ve,Ve=o[ut]),Ah(q,ut,qi(Ve,u,v,ut,o,F))}),q}function Y5(o){var u=or(o);return function(v){return pw(v,o,u)}}function pw(o,u,v){var x=v.length;if(o==null)return!x;for(o=Zt(o);x--;){var I=v[x],F=u[I],q=o[I];if(q===n&&!(I in o)||!F(q))return!1}return!0}function gw(o,u,v){if(typeof o!="function")throw new Fi(a);return Oh(function(){o.apply(n,v)},u)}function Sh(o,u,v,x){var I=-1,F=dl,q=!0,Y=o.length,ne=[],he=u.length;if(!Y)return ne;v&&(u=Qt(u,jt(v))),x?(F=Xa,q=!1):u.length>=i&&(F=Bi,q=!1,u=new yl(u));e:for(;++I<Y;){var fe=o[I],ve=v==null?fe:v(fe);if(fe=x||fe!==0?fe:0,q&&ve===ve){for(var we=he;we--;)if(u[we]===ve)continue e;ne.push(fe)}else F(u,ve,x)||ne.push(fe)}return ne}var Ja=Hw(Ds),vw=Hw(Zv,!0);function W5(o,u){var v=!0;return Ja(o,function(x,I,F){return v=!!u(x,I,F),v}),v}function fm(o,u,v){for(var x=-1,I=o.length;++x<I;){var F=o[x],q=u(F);if(q!=null&&(Y===n?q===q&&!pi(q):v(q,Y)))var Y=q,ne=F}return ne}function X5(o,u,v,x){var I=o.length;for(v=Qe(v),v<0&&(v=-v>I?0:I+v),x=x===n||x>I?I:Qe(x),x<0&&(x+=I),x=v>x?0:jE(x);v<x;)o[v++]=u;return o}function yw(o,u){var v=[];return Ja(o,function(x,I,F){u(x,I,F)&&v.push(x)}),v}function gr(o,u,v,x,I){var F=-1,q=o.length;for(v||(v=LO),I||(I=[]);++F<q;){var Y=o[F];u>0&&v(Y)?u>1?gr(Y,u-1,v,x,I):fs(I,Y):x||(I[I.length]=Y)}return I}var Qv=qw(),_w=qw(!0);function Ds(o,u){return o&&Qv(o,u,or)}function Zv(o,u){return o&&_w(o,u,or)}function dm(o,u){return zi(u,function(v){return da(o[v])})}function bl(o,u){u=to(u,o);for(var v=0,x=u.length;o!=null&&v<x;)o=o[Ms(u[v++])];return v&&v==x?o:n}function bw(o,u,v){var x=u(o);return Ke(o)?x:fs(x,v(o))}function Ur(o){return o==null?o===n?et:Ut:gl&&gl in Zt(o)?DO(o):qO(o)}function Jv(o,u){return o>u}function K5(o,u){return o!=null&&Vt.call(o,u)}function Q5(o,u){return o!=null&&u in Zt(o)}function Z5(o,u,v){return o>=Rr(u,v)&&o<Jn(u,v)}function e0(o,u,v){for(var x=v?Xa:dl,I=o[0].length,F=o.length,q=F,Y=ae(F),ne=1/0,he=[];q--;){var fe=o[q];q&&u&&(fe=Qt(fe,jt(u))),ne=Rr(fe.length,ne),Y[q]=!v&&(u||I>=120&&fe.length>=120)?new yl(q&&fe):n}fe=o[0];var ve=-1,we=Y[0];e:for(;++ve<I&&he.length<ne;){var De=fe[ve],Ue=u?u(De):De;if(De=v||De!==0?De:0,!(we?Bi(we,Ue):x(he,Ue,v))){for(q=F;--q;){var Ze=Y[q];if(!(Ze?Bi(Ze,Ue):x(o[q],Ue,v)))continue e}we&&we.push(Ue),he.push(De)}}return he}function J5(o,u,v,x){return Ds(o,function(I,F,q){u(x,v(I),F,q)}),x}function Rh(o,u,v){u=to(u,o),o=oE(o,u);var x=o==null?o:o[Ms($i(u))];return x==null?n:Ar(x,o,v)}function xw(o){return An(o)&&Ur(o)==X}function eO(o){return An(o)&&Ur(o)==Mt}function tO(o){return An(o)&&Ur(o)==$e}function Ch(o,u,v,x,I){return o===u?!0:o==null||u==null||!An(o)&&!An(u)?o!==o&&u!==u:nO(o,u,v,x,Ch,I)}function nO(o,u,v,x,I,F){var q=Ke(o),Y=Ke(u),ne=q?ce:Cr(o),he=Y?ce:Cr(u);ne=ne==X?it:ne,he=he==X?it:he;var fe=ne==it,ve=he==it,we=ne==he;if(we&&ro(o)){if(!ro(u))return!1;q=!0,fe=!1}if(we&&!fe)return F||(F=new ps),q||ju(o)?eE(o,u,v,x,I,F):NO(o,u,ne,v,x,I,F);if(!(v&T)){var De=fe&&Vt.call(o,"__wrapped__"),Ue=ve&&Vt.call(u,"__wrapped__");if(De||Ue){var Ze=De?o.value():o,Ve=Ue?u.value():u;return F||(F=new ps),I(Ze,Ve,v,x,F)}}return we?(F||(F=new ps),IO(o,u,v,x,I,F)):!1}function rO(o){return An(o)&&Cr(o)==Lt}function t0(o,u,v,x){var I=v.length,F=I,q=!x;if(o==null)return!F;for(o=Zt(o);I--;){var Y=v[I];if(q&&Y[2]?Y[1]!==o[Y[0]]:!(Y[0]in o))return!1}for(;++I<F;){Y=v[I];var ne=Y[0],he=o[ne],fe=Y[1];if(q&&Y[2]){if(he===n&&!(ne in o))return!1}else{var ve=new ps;if(x)var we=x(he,fe,ne,o,u,ve);if(!(we===n?Ch(fe,he,T|N,x,ve):we))return!1}}return!0}function ww(o){if(!_n(o)||VO(o))return!1;var u=da(o)?r5:St;return u.test(wl(o))}function iO(o){return An(o)&&Ur(o)==Xt}function sO(o){return An(o)&&Cr(o)==st}function aO(o){return An(o)&&Im(o.length)&&!!Rt[Ur(o)]}function Ew(o){return typeof o=="function"?o:o==null?Kr:typeof o=="object"?Ke(o)?Sw(o[0],o[1]):Aw(o):GE(o)}function n0(o){if(!Dh(o))return u5(o);var u=[];for(var v in Zt(o))Vt.call(o,v)&&v!="constructor"&&u.push(v);return u}function oO(o){if(!_n(o))return HO(o);var u=Dh(o),v=[];for(var x in o)x=="constructor"&&(u||!Vt.call(o,x))||v.push(x);return v}function r0(o,u){return o<u}function Tw(o,u){var v=-1,x=Wr(o)?ae(o.length):[];return Ja(o,function(I,F,q){x[++v]=u(I,F,q)}),x}function Aw(o){var u=y0(o);return u.length==1&&u[0][2]?sE(u[0][0],u[0][1]):function(v){return v===o||t0(v,o,u)}}function Sw(o,u){return b0(o)&&iE(u)?sE(Ms(o),u):function(v){var x=I0(v,o);return x===n&&x===u?D0(v,o):Ch(u,x,T|N)}}function mm(o,u,v,x,I){o!==u&&Qv(u,function(F,q){if(I||(I=new ps),_n(F))lO(o,u,q,v,mm,x,I);else{var Y=x?x(w0(o,q),F,q+"",o,u,I):n;Y===n&&(Y=F),Xv(o,q,Y)}},Xr)}function lO(o,u,v,x,I,F,q){var Y=w0(o,v),ne=w0(u,v),he=q.get(ne);if(he){Xv(o,v,he);return}var fe=F?F(Y,ne,v+"",o,u,q):n,ve=fe===n;if(ve){var we=Ke(ne),De=!we&&ro(ne),Ue=!we&&!De&&ju(ne);fe=ne,we||De||Ue?Ke(Y)?fe=Y:Dn(Y)?fe=Yr(Y):De?(ve=!1,fe=Uw(ne,!0)):Ue?(ve=!1,fe=Vw(ne,!0)):fe=[]:Mh(ne)||El(ne)?(fe=Y,El(Y)?fe=kE(Y):(!_n(Y)||da(Y))&&(fe=rE(ne))):ve=!1}ve&&(q.set(ne,fe),I(fe,ne,x,F,q),q.delete(ne)),Xv(o,v,fe)}function Rw(o,u){var v=o.length;if(v)return u+=u<0?v:0,fa(u,v)?o[u]:n}function Cw(o,u,v){u.length?u=Qt(u,function(F){return Ke(F)?function(q){return bl(q,F.length===1?F[0]:F)}:F}):u=[Kr];var x=-1;u=Qt(u,jt(ke()));var I=Tw(o,function(F,q,Y){var ne=Qt(u,function(he){return he(F)});return{criteria:ne,index:++x,value:F}});return oe(I,function(F,q){return xO(F,q,v)})}function uO(o,u){return Nw(o,u,function(v,x){return D0(o,x)})}function Nw(o,u,v){for(var x=-1,I=u.length,F={};++x<I;){var q=u[x],Y=bl(o,q);v(Y,q)&&Nh(F,to(q,o),Y)}return F}function cO(o){return function(u){return bl(u,o)}}function i0(o,u,v,x){var I=x?Ka:aa,F=-1,q=u.length,Y=o;for(o===u&&(u=Yr(u)),v&&(Y=Qt(o,jt(v)));++F<q;)for(var ne=0,he=u[F],fe=v?v(he):he;(ne=I(Y,fe,ne,x))>-1;)Y!==o&&im.call(Y,ne,1),im.call(o,ne,1);return o}function Iw(o,u){for(var v=o?u.length:0,x=v-1;v--;){var I=u[v];if(v==x||I!==F){var F=I;fa(I)?im.call(o,I,1):l0(o,I)}}return o}function s0(o,u){return o+om(cw()*(u-o+1))}function hO(o,u,v,x){for(var I=-1,F=Jn(am((u-o)/(v||1)),0),q=ae(F);F--;)q[x?F:++I]=o,o+=v;return q}function a0(o,u){var v="";if(!o||u<1||u>J)return v;do u%2&&(v+=o),u=om(u/2),u&&(o+=o);while(u);return v}function tt(o,u){return E0(aE(o,u,Kr),o+"")}function fO(o){return dw(ku(o))}function dO(o,u){var v=ku(o);return Tm(v,_l(u,0,v.length))}function Nh(o,u,v,x){if(!_n(o))return o;u=to(u,o);for(var I=-1,F=u.length,q=F-1,Y=o;Y!=null&&++I<F;){var ne=Ms(u[I]),he=v;if(ne==="__proto__"||ne==="constructor"||ne==="prototype")return o;if(I!=q){var fe=Y[ne];he=x?x(fe,ne,Y):n,he===n&&(he=_n(fe)?fe:fa(u[I+1])?[]:{})}Ah(Y,ne,he),Y=Y[ne]}return o}var Dw=lm?function(o,u){return lm.set(o,u),o}:Kr,mO=sm?function(o,u){return sm(o,"toString",{configurable:!0,enumerable:!1,value:M0(u),writable:!0})}:Kr;function pO(o){return Tm(ku(o))}function Gi(o,u,v){var x=-1,I=o.length;u<0&&(u=-u>I?0:I+u),v=v>I?I:v,v<0&&(v+=I),I=u>v?0:v-u>>>0,u>>>=0;for(var F=ae(I);++x<I;)F[x]=o[x+u];return F}function gO(o,u){var v;return Ja(o,function(x,I,F){return v=u(x,I,F),!v}),!!v}function pm(o,u,v){var x=0,I=o==null?x:o.length;if(typeof u=="number"&&u===u&&I<=ye){for(;x<I;){var F=x+I>>>1,q=o[F];q!==null&&!pi(q)&&(v?q<=u:q<u)?x=F+1:I=F}return I}return o0(o,u,Kr,v)}function o0(o,u,v,x){var I=0,F=o==null?0:o.length;if(F===0)return 0;u=v(u);for(var q=u!==u,Y=u===null,ne=pi(u),he=u===n;I<F;){var fe=om((I+F)/2),ve=v(o[fe]),we=ve!==n,De=ve===null,Ue=ve===ve,Ze=pi(ve);if(q)var Ve=x||Ue;else he?Ve=Ue&&(x||we):Y?Ve=Ue&&we&&(x||!De):ne?Ve=Ue&&we&&!De&&(x||!Ze):De||Ze?Ve=!1:Ve=x?ve<=u:ve<u;Ve?I=fe+1:F=fe}return Rr(F,me)}function Ow(o,u){for(var v=-1,x=o.length,I=0,F=[];++v<x;){var q=o[v],Y=u?u(q):q;if(!v||!gs(Y,ne)){var ne=Y;F[I++]=q===0?0:q}}return F}function Mw(o){return typeof o=="number"?o:pi(o)?ie:+o}function mi(o){if(typeof o=="string")return o;if(Ke(o))return Qt(o,mi)+"";if(pi(o))return hw?hw.call(o):"";var u=o+"";return u=="0"&&1/o==-V?"-0":u}function eo(o,u,v){var x=-1,I=dl,F=o.length,q=!0,Y=[],ne=Y;if(v)q=!1,I=Xa;else if(F>=i){var he=u?null:RO(o);if(he)return Kd(he);q=!1,I=Bi,ne=new yl}else ne=u?[]:Y;e:for(;++x<F;){var fe=o[x],ve=u?u(fe):fe;if(fe=v||fe!==0?fe:0,q&&ve===ve){for(var we=ne.length;we--;)if(ne[we]===ve)continue e;u&&ne.push(ve),Y.push(fe)}else I(ne,ve,v)||(ne!==Y&&ne.push(ve),Y.push(fe))}return Y}function l0(o,u){return u=to(u,o),o=oE(o,u),o==null||delete o[Ms($i(u))]}function jw(o,u,v,x){return Nh(o,u,v(bl(o,u)),x)}function gm(o,u,v,x){for(var I=o.length,F=x?I:-1;(x?F--:++F<I)&&u(o[F],F,o););return v?Gi(o,x?0:F,x?F+1:I):Gi(o,x?F+1:0,x?I:F)}function kw(o,u){var v=o;return v instanceof ft&&(v=v.value()),ds(u,function(x,I){return I.func.apply(I.thisArg,fs([x],I.args))},v)}function u0(o,u,v){var x=o.length;if(x<2)return x?eo(o[0]):[];for(var I=-1,F=ae(x);++I<x;)for(var q=o[I],Y=-1;++Y<x;)Y!=I&&(F[I]=Sh(F[I]||q,o[Y],u,v));return eo(gr(F,1),u,v)}function Pw(o,u,v){for(var x=-1,I=o.length,F=u.length,q={};++x<I;){var Y=x<F?u[x]:n;v(q,o[x],Y)}return q}function c0(o){return Dn(o)?o:[]}function h0(o){return typeof o=="function"?o:Kr}function to(o,u){return Ke(o)?o:b0(o,u)?[o]:hE(kt(o))}var vO=tt;function no(o,u,v){var x=o.length;return v=v===n?x:v,!u&&v>=x?o:Gi(o,u,v)}var Lw=i5||function(o){return Tn.clearTimeout(o)};function Uw(o,u){if(u)return o.slice();var v=o.length,x=sw?sw(v):new o.constructor(v);return o.copy(x),x}function f0(o){var u=new o.constructor(o.byteLength);return new nm(u).set(new nm(o)),u}function yO(o,u){var v=u?f0(o.buffer):o.buffer;return new o.constructor(v,o.byteOffset,o.byteLength)}function _O(o){var u=new o.constructor(o.source,ze.exec(o));return u.lastIndex=o.lastIndex,u}function bO(o){return Th?Zt(Th.call(o)):{}}function Vw(o,u){var v=u?f0(o.buffer):o.buffer;return new o.constructor(v,o.byteOffset,o.length)}function zw(o,u){if(o!==u){var v=o!==n,x=o===null,I=o===o,F=pi(o),q=u!==n,Y=u===null,ne=u===u,he=pi(u);if(!Y&&!he&&!F&&o>u||F&&q&&ne&&!Y&&!he||x&&q&&ne||!v&&ne||!I)return 1;if(!x&&!F&&!he&&o<u||he&&v&&I&&!x&&!F||Y&&v&&I||!q&&I||!ne)return-1}return 0}function xO(o,u,v){for(var x=-1,I=o.criteria,F=u.criteria,q=I.length,Y=v.length;++x<q;){var ne=zw(I[x],F[x]);if(ne){if(x>=Y)return ne;var he=v[x];return ne*(he=="desc"?-1:1)}}return o.index-u.index}function Bw(o,u,v,x){for(var I=-1,F=o.length,q=v.length,Y=-1,ne=u.length,he=Jn(F-q,0),fe=ae(ne+he),ve=!x;++Y<ne;)fe[Y]=u[Y];for(;++I<q;)(ve||I<F)&&(fe[v[I]]=o[I]);for(;he--;)fe[Y++]=o[I++];return fe}function Fw(o,u,v,x){for(var I=-1,F=o.length,q=-1,Y=v.length,ne=-1,he=u.length,fe=Jn(F-Y,0),ve=ae(fe+he),we=!x;++I<fe;)ve[I]=o[I];for(var De=I;++ne<he;)ve[De+ne]=u[ne];for(;++q<Y;)(we||I<F)&&(ve[De+v[q]]=o[I++]);return ve}function Yr(o,u){var v=-1,x=o.length;for(u||(u=ae(x));++v<x;)u[v]=o[v];return u}function Os(o,u,v,x){var I=!v;v||(v={});for(var F=-1,q=u.length;++F<q;){var Y=u[F],ne=x?x(v[Y],o[Y],Y,v,o):n;ne===n&&(ne=o[Y]),I?ua(v,Y,ne):Ah(v,Y,ne)}return v}function wO(o,u){return Os(o,_0(o),u)}function EO(o,u){return Os(o,tE(o),u)}function vm(o,u){return function(v,x){var I=Ke(v)?fl:G5,F=u?u():{};return I(v,o,ke(x,2),F)}}function Du(o){return tt(function(u,v){var x=-1,I=v.length,F=I>1?v[I-1]:n,q=I>2?v[2]:n;for(F=o.length>3&&typeof F=="function"?(I--,F):n,q&&Vr(v[0],v[1],q)&&(F=I<3?n:F,I=1),u=Zt(u);++x<I;){var Y=v[x];Y&&o(u,Y,x,F)}return u})}function Hw(o,u){return function(v,x){if(v==null)return v;if(!Wr(v))return o(v,x);for(var I=v.length,F=u?I:-1,q=Zt(v);(u?F--:++F<I)&&x(q[F],F,q)!==!1;);return v}}function qw(o){return function(u,v,x){for(var I=-1,F=Zt(u),q=x(u),Y=q.length;Y--;){var ne=q[o?Y:++I];if(v(F[ne],ne,F)===!1)break}return u}}function TO(o,u,v){var x=u&j,I=Ih(o);function F(){var q=this&&this!==Tn&&this instanceof F?I:o;return q.apply(x?v:this,arguments)}return F}function Gw(o){return function(u){u=kt(u);var v=Tu(u)?ms(u):n,x=v?v[0]:u.charAt(0),I=v?no(v,1).join(""):u.slice(1);return x[o]()+I}}function Ou(o){return function(u){return ds(HE(FE(u).replace(Uv,"")),o,"")}}function Ih(o){return function(){var u=arguments;switch(u.length){case 0:return new o;case 1:return new o(u[0]);case 2:return new o(u[0],u[1]);case 3:return new o(u[0],u[1],u[2]);case 4:return new o(u[0],u[1],u[2],u[3]);case 5:return new o(u[0],u[1],u[2],u[3],u[4]);case 6:return new o(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new o(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var v=Iu(o.prototype),x=o.apply(v,u);return _n(x)?x:v}}function AO(o,u,v){var x=Ih(o);function I(){for(var F=arguments.length,q=ae(F),Y=F,ne=Mu(I);Y--;)q[Y]=arguments[Y];var he=F<3&&q[0]!==ne&&q[F-1]!==ne?[]:Qa(q,ne);if(F-=he.length,F<v)return Kw(o,u,ym,I.placeholder,n,q,he,n,n,v-F);var fe=this&&this!==Tn&&this instanceof I?x:o;return Ar(fe,this,q)}return I}function $w(o){return function(u,v,x){var I=Zt(u);if(!Wr(u)){var F=ke(v,3);u=or(u),v=function(Y){return F(I[Y],Y,I)}}var q=o(u,v,x);return q>-1?I[F?u[q]:q]:n}}function Yw(o){return ha(function(u){var v=u.length,x=v,I=Hi.prototype.thru;for(o&&u.reverse();x--;){var F=u[x];if(typeof F!="function")throw new Fi(a);if(I&&!q&&wm(F)=="wrapper")var q=new Hi([],!0)}for(x=q?x:v;++x<v;){F=u[x];var Y=wm(F),ne=Y=="wrapper"?v0(F):n;ne&&x0(ne[0])&&ne[1]==(E|M|H|_)&&!ne[4].length&&ne[9]==1?q=q[wm(ne[0])].apply(q,ne[3]):q=F.length==1&&x0(F)?q[Y]():q.thru(F)}return function(){var he=arguments,fe=he[0];if(q&&he.length==1&&Ke(fe))return q.plant(fe).value();for(var ve=0,we=v?u[ve].apply(this,he):fe;++ve<v;)we=u[ve].call(this,we);return we}})}function ym(o,u,v,x,I,F,q,Y,ne,he){var fe=u&E,ve=u&j,we=u&A,De=u&(M|U),Ue=u&w,Ze=we?n:Ih(o);function Ve(){for(var ut=arguments.length,yt=ae(ut),gi=ut;gi--;)yt[gi]=arguments[gi];if(De)var zr=Mu(Ve),vi=_h(yt,zr);if(x&&(yt=Bw(yt,x,I,De)),F&&(yt=Fw(yt,F,q,De)),ut-=vi,De&&ut<he){var On=Qa(yt,zr);return Kw(o,u,ym,Ve.placeholder,v,yt,On,Y,ne,he-ut)}var vs=ve?v:this,pa=we?vs[o]:o;return ut=yt.length,Y?yt=GO(yt,Y):Ue&&ut>1&&yt.reverse(),fe&&ne<ut&&(yt.length=ne),this&&this!==Tn&&this instanceof Ve&&(pa=Ze||Ih(pa)),pa.apply(vs,yt)}return Ve}function Ww(o,u){return function(v,x){return J5(v,o,u(x),{})}}function _m(o,u){return function(v,x){var I;if(v===n&&x===n)return u;if(v!==n&&(I=v),x!==n){if(I===n)return x;typeof v=="string"||typeof x=="string"?(v=mi(v),x=mi(x)):(v=Mw(v),x=Mw(x)),I=o(v,x)}return I}}function d0(o){return ha(function(u){return u=Qt(u,jt(ke())),tt(function(v){var x=this;return o(u,function(I){return Ar(I,x,v)})})})}function bm(o,u){u=u===n?" ":mi(u);var v=u.length;if(v<2)return v?a0(u,o):u;var x=a0(u,am(o/Au(u)));return Tu(u)?no(ms(x),0,o).join(""):x.slice(0,o)}function SO(o,u,v,x){var I=u&j,F=Ih(o);function q(){for(var Y=-1,ne=arguments.length,he=-1,fe=x.length,ve=ae(fe+ne),we=this&&this!==Tn&&this instanceof q?F:o;++he<fe;)ve[he]=x[he];for(;ne--;)ve[he++]=arguments[++Y];return Ar(we,I?v:this,ve)}return q}function Xw(o){return function(u,v,x){return x&&typeof x!="number"&&Vr(u,v,x)&&(v=x=n),u=ma(u),v===n?(v=u,u=0):v=ma(v),x=x===n?u<v?1:-1:ma(x),hO(u,v,x,o)}}function xm(o){return function(u,v){return typeof u=="string"&&typeof v=="string"||(u=Yi(u),v=Yi(v)),o(u,v)}}function Kw(o,u,v,x,I,F,q,Y,ne,he){var fe=u&M,ve=fe?q:n,we=fe?n:q,De=fe?F:n,Ue=fe?n:F;u|=fe?H:D,u&=~(fe?D:H),u&C||(u&=-4);var Ze=[o,u,I,De,ve,Ue,we,Y,ne,he],Ve=v.apply(n,Ze);return x0(o)&&lE(Ve,Ze),Ve.placeholder=x,uE(Ve,o,u)}function m0(o){var u=Zn[o];return function(v,x){if(v=Yi(v),x=x==null?0:Rr(Qe(x),292),x&&uw(v)){var I=(kt(v)+"e").split("e"),F=u(I[0]+"e"+(+I[1]+x));return I=(kt(F)+"e").split("e"),+(I[0]+"e"+(+I[1]-x))}return u(v)}}var RO=Cu&&1/Kd(new Cu([,-0]))[1]==V?function(o){return new Cu(o)}:P0;function Qw(o){return function(u){var v=Cr(u);return v==Lt?qv(u):v==st?qD(u):Qn(u,o(u))}}function ca(o,u,v,x,I,F,q,Y){var ne=u&A;if(!ne&&typeof o!="function")throw new Fi(a);var he=x?x.length:0;if(he||(u&=-97,x=I=n),q=q===n?q:Jn(Qe(q),0),Y=Y===n?Y:Qe(Y),he-=I?I.length:0,u&D){var fe=x,ve=I;x=I=n}var we=ne?n:v0(o),De=[o,u,v,x,I,fe,ve,F,q,Y];if(we&&FO(De,we),o=De[0],u=De[1],v=De[2],x=De[3],I=De[4],Y=De[9]=De[9]===n?ne?0:o.length:Jn(De[9]-he,0),!Y&&u&(M|U)&&(u&=-25),!u||u==j)var Ue=TO(o,u,v);else u==M||u==U?Ue=AO(o,u,Y):(u==H||u==(j|H))&&!I.length?Ue=SO(o,u,v,x):Ue=ym.apply(n,De);var Ze=we?Dw:lE;return uE(Ze(Ue,De),o,u)}function Zw(o,u,v,x){return o===n||gs(o,Ru[v])&&!Vt.call(x,v)?u:o}function Jw(o,u,v,x,I,F){return _n(o)&&_n(u)&&(F.set(u,o),mm(o,u,n,Jw,F),F.delete(u)),o}function CO(o){return Mh(o)?n:o}function eE(o,u,v,x,I,F){var q=v&T,Y=o.length,ne=u.length;if(Y!=ne&&!(q&&ne>Y))return!1;var he=F.get(o),fe=F.get(u);if(he&&fe)return he==u&&fe==o;var ve=-1,we=!0,De=v&N?new yl:n;for(F.set(o,u),F.set(u,o);++ve<Y;){var Ue=o[ve],Ze=u[ve];if(x)var Ve=q?x(Ze,Ue,ve,u,o,F):x(Ue,Ze,ve,o,u,F);if(Ve!==n){if(Ve)continue;we=!1;break}if(De){if(!wu(u,function(ut,yt){if(!Bi(De,yt)&&(Ue===ut||I(Ue,ut,v,x,F)))return De.push(yt)})){we=!1;break}}else if(!(Ue===Ze||I(Ue,Ze,v,x,F))){we=!1;break}}return F.delete(o),F.delete(u),we}function NO(o,u,v,x,I,F,q){switch(v){case at:if(o.byteLength!=u.byteLength||o.byteOffset!=u.byteOffset)return!1;o=o.buffer,u=u.buffer;case Mt:return!(o.byteLength!=u.byteLength||!F(new nm(o),new nm(u)));case je:case $e:case bt:return gs(+o,+u);case gt:return o.name==u.name&&o.message==u.message;case Xt:case yn:return o==u+"";case Lt:var Y=qv;case st:var ne=x&T;if(Y||(Y=Kd),o.size!=u.size&&!ne)return!1;var he=q.get(o);if(he)return he==u;x|=N,q.set(o,u);var fe=eE(Y(o),Y(u),x,I,F,q);return q.delete(o),fe;case At:if(Th)return Th.call(o)==Th.call(u)}return!1}function IO(o,u,v,x,I,F){var q=v&T,Y=p0(o),ne=Y.length,he=p0(u),fe=he.length;if(ne!=fe&&!q)return!1;for(var ve=ne;ve--;){var we=Y[ve];if(!(q?we in u:Vt.call(u,we)))return!1}var De=F.get(o),Ue=F.get(u);if(De&&Ue)return De==u&&Ue==o;var Ze=!0;F.set(o,u),F.set(u,o);for(var Ve=q;++ve<ne;){we=Y[ve];var ut=o[we],yt=u[we];if(x)var gi=q?x(yt,ut,we,u,o,F):x(ut,yt,we,o,u,F);if(!(gi===n?ut===yt||I(ut,yt,v,x,F):gi)){Ze=!1;break}Ve||(Ve=we=="constructor")}if(Ze&&!Ve){var zr=o.constructor,vi=u.constructor;zr!=vi&&"constructor"in o&&"constructor"in u&&!(typeof zr=="function"&&zr instanceof zr&&typeof vi=="function"&&vi instanceof vi)&&(Ze=!1)}return F.delete(o),F.delete(u),Ze}function ha(o){return E0(aE(o,n,pE),o+"")}function p0(o){return bw(o,or,_0)}function g0(o){return bw(o,Xr,tE)}var v0=lm?function(o){return lm.get(o)}:P0;function wm(o){for(var u=o.name+"",v=Nu[u],x=Vt.call(Nu,u)?v.length:0;x--;){var I=v[x],F=I.func;if(F==null||F==o)return I.name}return u}function Mu(o){var u=Vt.call(L,"placeholder")?L:o;return u.placeholder}function ke(){var o=L.iteratee||j0;return o=o===j0?Ew:o,arguments.length?o(arguments[0],arguments[1]):o}function Em(o,u){var v=o.__data__;return UO(u)?v[typeof u=="string"?"string":"hash"]:v.map}function y0(o){for(var u=or(o),v=u.length;v--;){var x=u[v],I=o[x];u[v]=[x,I,iE(I)]}return u}function xl(o,u){var v=BD(o,u);return ww(v)?v:n}function DO(o){var u=Vt.call(o,gl),v=o[gl];try{o[gl]=n;var x=!0}catch{}var I=em.call(o);return x&&(u?o[gl]=v:delete o[gl]),I}var _0=$v?function(o){return o==null?[]:(o=Zt(o),zi($v(o),function(u){return ow.call(o,u)}))}:L0,tE=$v?function(o){for(var u=[];o;)fs(u,_0(o)),o=rm(o);return u}:L0,Cr=Ur;(Yv&&Cr(new Yv(new ArrayBuffer(1)))!=at||xh&&Cr(new xh)!=Lt||Wv&&Cr(Wv.resolve())!=Et||Cu&&Cr(new Cu)!=st||wh&&Cr(new wh)!=Ht)&&(Cr=function(o){var u=Ur(o),v=u==it?o.constructor:n,x=v?wl(v):"";if(x)switch(x){case d5:return at;case m5:return Lt;case p5:return Et;case g5:return st;case v5:return Ht}return u});function OO(o,u,v){for(var x=-1,I=v.length;++x<I;){var F=v[x],q=F.size;switch(F.type){case"drop":o+=q;break;case"dropRight":u-=q;break;case"take":u=Rr(u,o+q);break;case"takeRight":o=Jn(o,u-q);break}}return{start:o,end:u}}function MO(o){var u=o.match(Ne);return u?u[1].split(Le):[]}function nE(o,u,v){u=to(u,o);for(var x=-1,I=u.length,F=!1;++x<I;){var q=Ms(u[x]);if(!(F=o!=null&&v(o,q)))break;o=o[q]}return F||++x!=I?F:(I=o==null?0:o.length,!!I&&Im(I)&&fa(q,I)&&(Ke(o)||El(o)))}function jO(o){var u=o.length,v=new o.constructor(u);return u&&typeof o[0]=="string"&&Vt.call(o,"index")&&(v.index=o.index,v.input=o.input),v}function rE(o){return typeof o.constructor=="function"&&!Dh(o)?Iu(rm(o)):{}}function kO(o,u,v){var x=o.constructor;switch(u){case Mt:return f0(o);case je:case $e:return new x(+o);case at:return yO(o,v);case un:case sn:case wn:case cn:case an:case Ln:case ir:case Oi:case ra:return Vw(o,v);case Lt:return new x;case bt:case yn:return new x(o);case Xt:return _O(o);case st:return new x;case At:return bO(o)}}function PO(o,u){var v=u.length;if(!v)return o;var x=v-1;return u[x]=(v>1?"& ":"")+u[x],u=u.join(v>2?", ":" "),o.replace(xe,`{
/* [wrapped with `+u+`] */
`)}function LO(o){return Ke(o)||El(o)||!!(lw&&o&&o[lw])}function fa(o,u){var v=typeof o;return u=u??J,!!u&&(v=="number"||v!="symbol"&&qt.test(o))&&o>-1&&o%1==0&&o<u}function Vr(o,u,v){if(!_n(v))return!1;var x=typeof u;return(x=="number"?Wr(v)&&fa(u,v.length):x=="string"&&u in v)?gs(v[u],o):!1}function b0(o,u){if(Ke(o))return!1;var v=typeof o;return v=="number"||v=="symbol"||v=="boolean"||o==null||pi(o)?!0:gu.test(o)||!Un.test(o)||u!=null&&o in Zt(u)}function UO(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function x0(o){var u=wm(o),v=L[u];if(typeof v!="function"||!(u in ft.prototype))return!1;if(o===v)return!0;var x=v0(v);return!!x&&o===x[0]}function VO(o){return!!iw&&iw in o}var zO=Zd?da:U0;function Dh(o){var u=o&&o.constructor,v=typeof u=="function"&&u.prototype||Ru;return o===v}function iE(o){return o===o&&!_n(o)}function sE(o,u){return function(v){return v==null?!1:v[o]===u&&(u!==n||o in Zt(v))}}function BO(o){var u=Cm(o,function(x){return v.size===f&&v.clear(),x}),v=u.cache;return u}function FO(o,u){var v=o[1],x=u[1],I=v|x,F=I<(j|A|E),q=x==E&&v==M||x==E&&v==_&&o[7].length<=u[8]||x==(E|_)&&u[7].length<=u[8]&&v==M;if(!(F||q))return o;x&j&&(o[2]=u[2],I|=v&j?0:C);var Y=u[3];if(Y){var ne=o[3];o[3]=ne?Bw(ne,Y,u[4]):Y,o[4]=ne?Qa(o[3],h):u[4]}return Y=u[5],Y&&(ne=o[5],o[5]=ne?Fw(ne,Y,u[6]):Y,o[6]=ne?Qa(o[5],h):u[6]),Y=u[7],Y&&(o[7]=Y),x&E&&(o[8]=o[8]==null?u[8]:Rr(o[8],u[8])),o[9]==null&&(o[9]=u[9]),o[0]=u[0],o[1]=I,o}function HO(o){var u=[];if(o!=null)for(var v in Zt(o))u.push(v);return u}function qO(o){return em.call(o)}function aE(o,u,v){return u=Jn(u===n?o.length-1:u,0),function(){for(var x=arguments,I=-1,F=Jn(x.length-u,0),q=ae(F);++I<F;)q[I]=x[u+I];I=-1;for(var Y=ae(u+1);++I<u;)Y[I]=x[I];return Y[u]=v(q),Ar(o,this,Y)}}function oE(o,u){return u.length<2?o:bl(o,Gi(u,0,-1))}function GO(o,u){for(var v=o.length,x=Rr(u.length,v),I=Yr(o);x--;){var F=u[x];o[x]=fa(F,v)?I[F]:n}return o}function w0(o,u){if(!(u==="constructor"&&typeof o[u]=="function")&&u!="__proto__")return o[u]}var lE=cE(Dw),Oh=a5||function(o,u){return Tn.setTimeout(o,u)},E0=cE(mO);function uE(o,u,v){var x=u+"";return E0(o,PO(x,$O(MO(x),v)))}function cE(o){var u=0,v=0;return function(){var x=c5(),I=O-(x-v);if(v=x,I>0){if(++u>=P)return arguments[0]}else u=0;return o.apply(n,arguments)}}function Tm(o,u){var v=-1,x=o.length,I=x-1;for(u=u===n?x:u;++v<u;){var F=s0(v,I),q=o[F];o[F]=o[v],o[v]=q}return o.length=u,o}var hE=BO(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace(Kn,function(v,x,I,F){u.push(I?F.replace(Te,"$1"):x||v)}),u});function Ms(o){if(typeof o=="string"||pi(o))return o;var u=o+"";return u=="0"&&1/o==-V?"-0":u}function wl(o){if(o!=null){try{return Jd.call(o)}catch{}try{return o+""}catch{}}return""}function $O(o,u){return Lr(W,function(v){var x="_."+v[0];u&v[1]&&!dl(o,x)&&o.push(x)}),o.sort()}function fE(o){if(o instanceof ft)return o.clone();var u=new Hi(o.__wrapped__,o.__chain__);return u.__actions__=Yr(o.__actions__),u.__index__=o.__index__,u.__values__=o.__values__,u}function YO(o,u,v){(v?Vr(o,u,v):u===n)?u=1:u=Jn(Qe(u),0);var x=o==null?0:o.length;if(!x||u<1)return[];for(var I=0,F=0,q=ae(am(x/u));I<x;)q[F++]=Gi(o,I,I+=u);return q}function WO(o){for(var u=-1,v=o==null?0:o.length,x=0,I=[];++u<v;){var F=o[u];F&&(I[x++]=F)}return I}function XO(){var o=arguments.length;if(!o)return[];for(var u=ae(o-1),v=arguments[0],x=o;x--;)u[x-1]=arguments[x];return fs(Ke(v)?Yr(v):[v],gr(u,1))}var KO=tt(function(o,u){return Dn(o)?Sh(o,gr(u,1,Dn,!0)):[]}),QO=tt(function(o,u){var v=$i(u);return Dn(v)&&(v=n),Dn(o)?Sh(o,gr(u,1,Dn,!0),ke(v,2)):[]}),ZO=tt(function(o,u){var v=$i(u);return Dn(v)&&(v=n),Dn(o)?Sh(o,gr(u,1,Dn,!0),n,v):[]});function JO(o,u,v){var x=o==null?0:o.length;return x?(u=v||u===n?1:Qe(u),Gi(o,u<0?0:u,x)):[]}function eM(o,u,v){var x=o==null?0:o.length;return x?(u=v||u===n?1:Qe(u),u=x-u,Gi(o,0,u<0?0:u)):[]}function tM(o,u){return o&&o.length?gm(o,ke(u,3),!0,!0):[]}function nM(o,u){return o&&o.length?gm(o,ke(u,3),!0):[]}function rM(o,u,v,x){var I=o==null?0:o.length;return I?(v&&typeof v!="number"&&Vr(o,u,v)&&(v=0,x=I),X5(o,u,v,x)):[]}function dE(o,u,v){var x=o==null?0:o.length;if(!x)return-1;var I=v==null?0:Qe(v);return I<0&&(I=Jn(x+I,0)),ml(o,ke(u,3),I)}function mE(o,u,v){var x=o==null?0:o.length;if(!x)return-1;var I=x-1;return v!==n&&(I=Qe(v),I=v<0?Jn(x+I,0):Rr(I,x-1)),ml(o,ke(u,3),I,!0)}function pE(o){var u=o==null?0:o.length;return u?gr(o,1):[]}function iM(o){var u=o==null?0:o.length;return u?gr(o,V):[]}function sM(o,u){var v=o==null?0:o.length;return v?(u=u===n?1:Qe(u),gr(o,u)):[]}function aM(o){for(var u=-1,v=o==null?0:o.length,x={};++u<v;){var I=o[u];x[I[0]]=I[1]}return x}function gE(o){return o&&o.length?o[0]:n}function oM(o,u,v){var x=o==null?0:o.length;if(!x)return-1;var I=v==null?0:Qe(v);return I<0&&(I=Jn(x+I,0)),aa(o,u,I)}function lM(o){var u=o==null?0:o.length;return u?Gi(o,0,-1):[]}var uM=tt(function(o){var u=Qt(o,c0);return u.length&&u[0]===o[0]?e0(u):[]}),cM=tt(function(o){var u=$i(o),v=Qt(o,c0);return u===$i(v)?u=n:v.pop(),v.length&&v[0]===o[0]?e0(v,ke(u,2)):[]}),hM=tt(function(o){var u=$i(o),v=Qt(o,c0);return u=typeof u=="function"?u:n,u&&v.pop(),v.length&&v[0]===o[0]?e0(v,n,u):[]});function fM(o,u){return o==null?"":l5.call(o,u)}function $i(o){var u=o==null?0:o.length;return u?o[u-1]:n}function dM(o,u,v){var x=o==null?0:o.length;if(!x)return-1;var I=x;return v!==n&&(I=Qe(v),I=I<0?Jn(x+I,0):Rr(I,x-1)),u===u?$D(o,u,I):ml(o,d,I,!0)}function mM(o,u){return o&&o.length?Rw(o,Qe(u)):n}var pM=tt(vE);function vE(o,u){return o&&o.length&&u&&u.length?i0(o,u):o}function gM(o,u,v){return o&&o.length&&u&&u.length?i0(o,u,ke(v,2)):o}function vM(o,u,v){return o&&o.length&&u&&u.length?i0(o,u,n,v):o}var yM=ha(function(o,u){var v=o==null?0:o.length,x=Kv(o,u);return Iw(o,Qt(u,function(I){return fa(I,v)?+I:I}).sort(zw)),x});function _M(o,u){var v=[];if(!(o&&o.length))return v;var x=-1,I=[],F=o.length;for(u=ke(u,3);++x<F;){var q=o[x];u(q,x,o)&&(v.push(q),I.push(x))}return Iw(o,I),v}function T0(o){return o==null?o:f5.call(o)}function bM(o,u,v){var x=o==null?0:o.length;return x?(v&&typeof v!="number"&&Vr(o,u,v)?(u=0,v=x):(u=u==null?0:Qe(u),v=v===n?x:Qe(v)),Gi(o,u,v)):[]}function xM(o,u){return pm(o,u)}function wM(o,u,v){return o0(o,u,ke(v,2))}function EM(o,u){var v=o==null?0:o.length;if(v){var x=pm(o,u);if(x<v&&gs(o[x],u))return x}return-1}function TM(o,u){return pm(o,u,!0)}function AM(o,u,v){return o0(o,u,ke(v,2),!0)}function SM(o,u){var v=o==null?0:o.length;if(v){var x=pm(o,u,!0)-1;if(gs(o[x],u))return x}return-1}function RM(o){return o&&o.length?Ow(o):[]}function CM(o,u){return o&&o.length?Ow(o,ke(u,2)):[]}function NM(o){var u=o==null?0:o.length;return u?Gi(o,1,u):[]}function IM(o,u,v){return o&&o.length?(u=v||u===n?1:Qe(u),Gi(o,0,u<0?0:u)):[]}function DM(o,u,v){var x=o==null?0:o.length;return x?(u=v||u===n?1:Qe(u),u=x-u,Gi(o,u<0?0:u,x)):[]}function OM(o,u){return o&&o.length?gm(o,ke(u,3),!1,!0):[]}function MM(o,u){return o&&o.length?gm(o,ke(u,3)):[]}var jM=tt(function(o){return eo(gr(o,1,Dn,!0))}),kM=tt(function(o){var u=$i(o);return Dn(u)&&(u=n),eo(gr(o,1,Dn,!0),ke(u,2))}),PM=tt(function(o){var u=$i(o);return u=typeof u=="function"?u:n,eo(gr(o,1,Dn,!0),n,u)});function LM(o){return o&&o.length?eo(o):[]}function UM(o,u){return o&&o.length?eo(o,ke(u,2)):[]}function VM(o,u){return u=typeof u=="function"?u:n,o&&o.length?eo(o,n,u):[]}function A0(o){if(!(o&&o.length))return[];var u=0;return o=zi(o,function(v){if(Dn(v))return u=Jn(v.length,u),!0}),Ct(u,function(v){return Qt(o,S(v))})}function yE(o,u){if(!(o&&o.length))return[];var v=A0(o);return u==null?v:Qt(v,function(x){return Ar(u,n,x)})}var zM=tt(function(o,u){return Dn(o)?Sh(o,u):[]}),BM=tt(function(o){return u0(zi(o,Dn))}),FM=tt(function(o){var u=$i(o);return Dn(u)&&(u=n),u0(zi(o,Dn),ke(u,2))}),HM=tt(function(o){var u=$i(o);return u=typeof u=="function"?u:n,u0(zi(o,Dn),n,u)}),qM=tt(A0);function GM(o,u){return Pw(o||[],u||[],Ah)}function $M(o,u){return Pw(o||[],u||[],Nh)}var YM=tt(function(o){var u=o.length,v=u>1?o[u-1]:n;return v=typeof v=="function"?(o.pop(),v):n,yE(o,v)});function _E(o){var u=L(o);return u.__chain__=!0,u}function WM(o,u){return u(o),o}function Am(o,u){return u(o)}var XM=ha(function(o){var u=o.length,v=u?o[0]:0,x=this.__wrapped__,I=function(F){return Kv(F,o)};return u>1||this.__actions__.length||!(x instanceof ft)||!fa(v)?this.thru(I):(x=x.slice(v,+v+(u?1:0)),x.__actions__.push({func:Am,args:[I],thisArg:n}),new Hi(x,this.__chain__).thru(function(F){return u&&!F.length&&F.push(n),F}))});function KM(){return _E(this)}function QM(){return new Hi(this.value(),this.__chain__)}function ZM(){this.__values__===n&&(this.__values__=ME(this.value()));var o=this.__index__>=this.__values__.length,u=o?n:this.__values__[this.__index__++];return{done:o,value:u}}function JM(){return this}function e6(o){for(var u,v=this;v instanceof cm;){var x=fE(v);x.__index__=0,x.__values__=n,u?I.__wrapped__=x:u=x;var I=x;v=v.__wrapped__}return I.__wrapped__=o,u}function t6(){var o=this.__wrapped__;if(o instanceof ft){var u=o;return this.__actions__.length&&(u=new ft(this)),u=u.reverse(),u.__actions__.push({func:Am,args:[T0],thisArg:n}),new Hi(u,this.__chain__)}return this.thru(T0)}function n6(){return kw(this.__wrapped__,this.__actions__)}var r6=vm(function(o,u,v){Vt.call(o,v)?++o[v]:ua(o,v,1)});function i6(o,u,v){var x=Ke(o)?xu:W5;return v&&Vr(o,u,v)&&(u=n),x(o,ke(u,3))}function s6(o,u){var v=Ke(o)?zi:yw;return v(o,ke(u,3))}var a6=$w(dE),o6=$w(mE);function l6(o,u){return gr(Sm(o,u),1)}function u6(o,u){return gr(Sm(o,u),V)}function c6(o,u,v){return v=v===n?1:Qe(v),gr(Sm(o,u),v)}function bE(o,u){var v=Ke(o)?Lr:Ja;return v(o,ke(u,3))}function xE(o,u){var v=Ke(o)?$d:vw;return v(o,ke(u,3))}var h6=vm(function(o,u,v){Vt.call(o,v)?o[v].push(u):ua(o,v,[u])});function f6(o,u,v,x){o=Wr(o)?o:ku(o),v=v&&!x?Qe(v):0;var I=o.length;return v<0&&(v=Jn(I+v,0)),Dm(o)?v<=I&&o.indexOf(u,v)>-1:!!I&&aa(o,u,v)>-1}var d6=tt(function(o,u,v){var x=-1,I=typeof u=="function",F=Wr(o)?ae(o.length):[];return Ja(o,function(q){F[++x]=I?Ar(u,q,v):Rh(q,u,v)}),F}),m6=vm(function(o,u,v){ua(o,v,u)});function Sm(o,u){var v=Ke(o)?Qt:Tw;return v(o,ke(u,3))}function p6(o,u,v,x){return o==null?[]:(Ke(u)||(u=u==null?[]:[u]),v=x?n:v,Ke(v)||(v=v==null?[]:[v]),Cw(o,u,v))}var g6=vm(function(o,u,v){o[v?0:1].push(u)},function(){return[[],[]]});function v6(o,u,v){var x=Ke(o)?ds:re,I=arguments.length<3;return x(o,ke(u,4),v,I,Ja)}function y6(o,u,v){var x=Ke(o)?Yd:re,I=arguments.length<3;return x(o,ke(u,4),v,I,vw)}function _6(o,u){var v=Ke(o)?zi:yw;return v(o,Nm(ke(u,3)))}function b6(o){var u=Ke(o)?dw:fO;return u(o)}function x6(o,u,v){(v?Vr(o,u,v):u===n)?u=1:u=Qe(u);var x=Ke(o)?H5:dO;return x(o,u)}function w6(o){var u=Ke(o)?q5:pO;return u(o)}function E6(o){if(o==null)return 0;if(Wr(o))return Dm(o)?Au(o):o.length;var u=Cr(o);return u==Lt||u==st?o.size:n0(o).length}function T6(o,u,v){var x=Ke(o)?wu:gO;return v&&Vr(o,u,v)&&(u=n),x(o,ke(u,3))}var A6=tt(function(o,u){if(o==null)return[];var v=u.length;return v>1&&Vr(o,u[0],u[1])?u=[]:v>2&&Vr(u[0],u[1],u[2])&&(u=[u[0]]),Cw(o,gr(u,1),[])}),Rm=s5||function(){return Tn.Date.now()};function S6(o,u){if(typeof u!="function")throw new Fi(a);return o=Qe(o),function(){if(--o<1)return u.apply(this,arguments)}}function wE(o,u,v){return u=v?n:u,u=o&&u==null?o.length:u,ca(o,E,n,n,n,n,u)}function EE(o,u){var v;if(typeof u!="function")throw new Fi(a);return o=Qe(o),function(){return--o>0&&(v=u.apply(this,arguments)),o<=1&&(u=n),v}}var S0=tt(function(o,u,v){var x=j;if(v.length){var I=Qa(v,Mu(S0));x|=H}return ca(o,x,u,v,I)}),TE=tt(function(o,u,v){var x=j|A;if(v.length){var I=Qa(v,Mu(TE));x|=H}return ca(u,x,o,v,I)});function AE(o,u,v){u=v?n:u;var x=ca(o,M,n,n,n,n,n,u);return x.placeholder=AE.placeholder,x}function SE(o,u,v){u=v?n:u;var x=ca(o,U,n,n,n,n,n,u);return x.placeholder=SE.placeholder,x}function RE(o,u,v){var x,I,F,q,Y,ne,he=0,fe=!1,ve=!1,we=!0;if(typeof o!="function")throw new Fi(a);u=Yi(u)||0,_n(v)&&(fe=!!v.leading,ve="maxWait"in v,F=ve?Jn(Yi(v.maxWait)||0,u):F,we="trailing"in v?!!v.trailing:we);function De(On){var vs=x,pa=I;return x=I=n,he=On,q=o.apply(pa,vs),q}function Ue(On){return he=On,Y=Oh(ut,u),fe?De(On):q}function Ze(On){var vs=On-ne,pa=On-he,$E=u-vs;return ve?Rr($E,F-pa):$E}function Ve(On){var vs=On-ne,pa=On-he;return ne===n||vs>=u||vs<0||ve&&pa>=F}function ut(){var On=Rm();if(Ve(On))return yt(On);Y=Oh(ut,Ze(On))}function yt(On){return Y=n,we&&x?De(On):(x=I=n,q)}function gi(){Y!==n&&Lw(Y),he=0,x=ne=I=Y=n}function zr(){return Y===n?q:yt(Rm())}function vi(){var On=Rm(),vs=Ve(On);if(x=arguments,I=this,ne=On,vs){if(Y===n)return Ue(ne);if(ve)return Lw(Y),Y=Oh(ut,u),De(ne)}return Y===n&&(Y=Oh(ut,u)),q}return vi.cancel=gi,vi.flush=zr,vi}var R6=tt(function(o,u){return gw(o,1,u)}),C6=tt(function(o,u,v){return gw(o,Yi(u)||0,v)});function N6(o){return ca(o,w)}function Cm(o,u){if(typeof o!="function"||u!=null&&typeof u!="function")throw new Fi(a);var v=function(){var x=arguments,I=u?u.apply(this,x):x[0],F=v.cache;if(F.has(I))return F.get(I);var q=o.apply(this,x);return v.cache=F.set(I,q)||F,q};return v.cache=new(Cm.Cache||la),v}Cm.Cache=la;function Nm(o){if(typeof o!="function")throw new Fi(a);return function(){var u=arguments;switch(u.length){case 0:return!o.call(this);case 1:return!o.call(this,u[0]);case 2:return!o.call(this,u[0],u[1]);case 3:return!o.call(this,u[0],u[1],u[2])}return!o.apply(this,u)}}function I6(o){return EE(2,o)}var D6=vO(function(o,u){u=u.length==1&&Ke(u[0])?Qt(u[0],jt(ke())):Qt(gr(u,1),jt(ke()));var v=u.length;return tt(function(x){for(var I=-1,F=Rr(x.length,v);++I<F;)x[I]=u[I].call(this,x[I]);return Ar(o,this,x)})}),R0=tt(function(o,u){var v=Qa(u,Mu(R0));return ca(o,H,n,u,v)}),CE=tt(function(o,u){var v=Qa(u,Mu(CE));return ca(o,D,n,u,v)}),O6=ha(function(o,u){return ca(o,_,n,n,n,u)});function M6(o,u){if(typeof o!="function")throw new Fi(a);return u=u===n?u:Qe(u),tt(o,u)}function j6(o,u){if(typeof o!="function")throw new Fi(a);return u=u==null?0:Jn(Qe(u),0),tt(function(v){var x=v[u],I=no(v,0,u);return x&&fs(I,x),Ar(o,this,I)})}function k6(o,u,v){var x=!0,I=!0;if(typeof o!="function")throw new Fi(a);return _n(v)&&(x="leading"in v?!!v.leading:x,I="trailing"in v?!!v.trailing:I),RE(o,u,{leading:x,maxWait:u,trailing:I})}function P6(o){return wE(o,1)}function L6(o,u){return R0(h0(u),o)}function U6(){if(!arguments.length)return[];var o=arguments[0];return Ke(o)?o:[o]}function V6(o){return qi(o,y)}function z6(o,u){return u=typeof u=="function"?u:n,qi(o,y,u)}function B6(o){return qi(o,m|y)}function F6(o,u){return u=typeof u=="function"?u:n,qi(o,m|y,u)}function H6(o,u){return u==null||pw(o,u,or(u))}function gs(o,u){return o===u||o!==o&&u!==u}var q6=xm(Jv),G6=xm(function(o,u){return o>=u}),El=xw(function(){return arguments}())?xw:function(o){return An(o)&&Vt.call(o,"callee")&&!ow.call(o,"callee")},Ke=ae.isArray,$6=vh?jt(vh):eO;function Wr(o){return o!=null&&Im(o.length)&&!da(o)}function Dn(o){return An(o)&&Wr(o)}function Y6(o){return o===!0||o===!1||An(o)&&Ur(o)==je}var ro=o5||U0,W6=bu?jt(bu):tO;function X6(o){return An(o)&&o.nodeType===1&&!Mh(o)}function K6(o){if(o==null)return!0;if(Wr(o)&&(Ke(o)||typeof o=="string"||typeof o.splice=="function"||ro(o)||ju(o)||El(o)))return!o.length;var u=Cr(o);if(u==Lt||u==st)return!o.size;if(Dh(o))return!n0(o).length;for(var v in o)if(Vt.call(o,v))return!1;return!0}function Q6(o,u){return Ch(o,u)}function Z6(o,u,v){v=typeof v=="function"?v:n;var x=v?v(o,u):n;return x===n?Ch(o,u,n,v):!!x}function C0(o){if(!An(o))return!1;var u=Ur(o);return u==gt||u==Pe||typeof o.message=="string"&&typeof o.name=="string"&&!Mh(o)}function J6(o){return typeof o=="number"&&uw(o)}function da(o){if(!_n(o))return!1;var u=Ur(o);return u==Ye||u==In||u==Oe||u==rn}function NE(o){return typeof o=="number"&&o==Qe(o)}function Im(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=J}function _n(o){var u=typeof o;return o!=null&&(u=="object"||u=="function")}function An(o){return o!=null&&typeof o=="object"}var IE=cl?jt(cl):rO;function ej(o,u){return o===u||t0(o,u,y0(u))}function tj(o,u,v){return v=typeof v=="function"?v:n,t0(o,u,y0(u),v)}function nj(o){return DE(o)&&o!=+o}function rj(o){if(zO(o))throw new We(s);return ww(o)}function ij(o){return o===null}function sj(o){return o==null}function DE(o){return typeof o=="number"||An(o)&&Ur(o)==bt}function Mh(o){if(!An(o)||Ur(o)!=it)return!1;var u=rm(o);if(u===null)return!0;var v=Vt.call(u,"constructor")&&u.constructor;return typeof v=="function"&&v instanceof v&&Jd.call(v)==t5}var N0=yh?jt(yh):iO;function aj(o){return NE(o)&&o>=-J&&o<=J}var OE=hl?jt(hl):sO;function Dm(o){return typeof o=="string"||!Ke(o)&&An(o)&&Ur(o)==yn}function pi(o){return typeof o=="symbol"||An(o)&&Ur(o)==At}var ju=Gd?jt(Gd):aO;function oj(o){return o===n}function lj(o){return An(o)&&Cr(o)==Ht}function uj(o){return An(o)&&Ur(o)==Ot}var cj=xm(r0),hj=xm(function(o,u){return o<=u});function ME(o){if(!o)return[];if(Wr(o))return Dm(o)?ms(o):Yr(o);if(bh&&o[bh])return HD(o[bh]());var u=Cr(o),v=u==Lt?qv:u==st?Kd:ku;return v(o)}function ma(o){if(!o)return o===0?o:0;if(o=Yi(o),o===V||o===-V){var u=o<0?-1:1;return u*ee}return o===o?o:0}function Qe(o){var u=ma(o),v=u%1;return u===u?v?u-v:u:0}function jE(o){return o?_l(Qe(o),0,_e):0}function Yi(o){if(typeof o=="number")return o;if(pi(o))return ie;if(_n(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=_n(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=vt(o);var v=En.test(o);return v||ot.test(o)?Hd(o.slice(2),v?2:8):qe.test(o)?ie:+o}function kE(o){return Os(o,Xr(o))}function fj(o){return o?_l(Qe(o),-J,J):o===0?o:0}function kt(o){return o==null?"":mi(o)}var dj=Du(function(o,u){if(Dh(u)||Wr(u)){Os(u,or(u),o);return}for(var v in u)Vt.call(u,v)&&Ah(o,v,u[v])}),PE=Du(function(o,u){Os(u,Xr(u),o)}),Om=Du(function(o,u,v,x){Os(u,Xr(u),o,x)}),mj=Du(function(o,u,v,x){Os(u,or(u),o,x)}),pj=ha(Kv);function gj(o,u){var v=Iu(o);return u==null?v:mw(v,u)}var vj=tt(function(o,u){o=Zt(o);var v=-1,x=u.length,I=x>2?u[2]:n;for(I&&Vr(u[0],u[1],I)&&(x=1);++v<x;)for(var F=u[v],q=Xr(F),Y=-1,ne=q.length;++Y<ne;){var he=q[Y],fe=o[he];(fe===n||gs(fe,Ru[he])&&!Vt.call(o,he))&&(o[he]=F[he])}return o}),yj=tt(function(o){return o.push(n,Jw),Ar(LE,n,o)});function _j(o,u){return Sr(o,ke(u,3),Ds)}function bj(o,u){return Sr(o,ke(u,3),Zv)}function xj(o,u){return o==null?o:Qv(o,ke(u,3),Xr)}function wj(o,u){return o==null?o:_w(o,ke(u,3),Xr)}function Ej(o,u){return o&&Ds(o,ke(u,3))}function Tj(o,u){return o&&Zv(o,ke(u,3))}function Aj(o){return o==null?[]:dm(o,or(o))}function Sj(o){return o==null?[]:dm(o,Xr(o))}function I0(o,u,v){var x=o==null?n:bl(o,u);return x===n?v:x}function Rj(o,u){return o!=null&&nE(o,u,K5)}function D0(o,u){return o!=null&&nE(o,u,Q5)}var Cj=Ww(function(o,u,v){u!=null&&typeof u.toString!="function"&&(u=em.call(u)),o[u]=v},M0(Kr)),Nj=Ww(function(o,u,v){u!=null&&typeof u.toString!="function"&&(u=em.call(u)),Vt.call(o,u)?o[u].push(v):o[u]=[v]},ke),Ij=tt(Rh);function or(o){return Wr(o)?fw(o):n0(o)}function Xr(o){return Wr(o)?fw(o,!0):oO(o)}function Dj(o,u){var v={};return u=ke(u,3),Ds(o,function(x,I,F){ua(v,u(x,I,F),x)}),v}function Oj(o,u){var v={};return u=ke(u,3),Ds(o,function(x,I,F){ua(v,I,u(x,I,F))}),v}var Mj=Du(function(o,u,v){mm(o,u,v)}),LE=Du(function(o,u,v,x){mm(o,u,v,x)}),jj=ha(function(o,u){var v={};if(o==null)return v;var x=!1;u=Qt(u,function(F){return F=to(F,o),x||(x=F.length>1),F}),Os(o,g0(o),v),x&&(v=qi(v,m|p|y,CO));for(var I=u.length;I--;)l0(v,u[I]);return v});function kj(o,u){return UE(o,Nm(ke(u)))}var Pj=ha(function(o,u){return o==null?{}:uO(o,u)});function UE(o,u){if(o==null)return{};var v=Qt(g0(o),function(x){return[x]});return u=ke(u),Nw(o,v,function(x,I){return u(x,I[0])})}function Lj(o,u,v){u=to(u,o);var x=-1,I=u.length;for(I||(I=1,o=n);++x<I;){var F=o==null?n:o[Ms(u[x])];F===n&&(x=I,F=v),o=da(F)?F.call(o):F}return o}function Uj(o,u,v){return o==null?o:Nh(o,u,v)}function Vj(o,u,v,x){return x=typeof x=="function"?x:n,o==null?o:Nh(o,u,v,x)}var VE=Qw(or),zE=Qw(Xr);function zj(o,u,v){var x=Ke(o),I=x||ro(o)||ju(o);if(u=ke(u,4),v==null){var F=o&&o.constructor;I?v=x?new F:[]:_n(o)?v=da(F)?Iu(rm(o)):{}:v={}}return(I?Lr:Ds)(o,function(q,Y,ne){return u(v,q,Y,ne)}),v}function Bj(o,u){return o==null?!0:l0(o,u)}function Fj(o,u,v){return o==null?o:jw(o,u,h0(v))}function Hj(o,u,v,x){return x=typeof x=="function"?x:n,o==null?o:jw(o,u,h0(v),x)}function ku(o){return o==null?[]:zn(o,or(o))}function qj(o){return o==null?[]:zn(o,Xr(o))}function Gj(o,u,v){return v===n&&(v=u,u=n),v!==n&&(v=Yi(v),v=v===v?v:0),u!==n&&(u=Yi(u),u=u===u?u:0),_l(Yi(o),u,v)}function $j(o,u,v){return u=ma(u),v===n?(v=u,u=0):v=ma(v),o=Yi(o),Z5(o,u,v)}function Yj(o,u,v){if(v&&typeof v!="boolean"&&Vr(o,u,v)&&(u=v=n),v===n&&(typeof u=="boolean"?(v=u,u=n):typeof o=="boolean"&&(v=o,o=n)),o===n&&u===n?(o=0,u=1):(o=ma(o),u===n?(u=o,o=0):u=ma(u)),o>u){var x=o;o=u,u=x}if(v||o%1||u%1){var I=cw();return Rr(o+I*(u-o+Hv("1e-"+((I+"").length-1))),u)}return s0(o,u)}var Wj=Ou(function(o,u,v){return u=u.toLowerCase(),o+(v?BE(u):u)});function BE(o){return O0(kt(o).toLowerCase())}function FE(o){return o=kt(o),o&&o.replace(ls,UD).replace(Vv,"")}function Xj(o,u,v){o=kt(o),u=mi(u);var x=o.length;v=v===n?x:_l(Qe(v),0,x);var I=v;return v-=u.length,v>=0&&o.slice(v,I)==u}function Kj(o){return o=kt(o),o&&Xn.test(o)?o.replace(Wn,VD):o}function Qj(o){return o=kt(o),o&&te.test(o)?o.replace($,"\\$&"):o}var Zj=Ou(function(o,u,v){return o+(v?"-":"")+u.toLowerCase()}),Jj=Ou(function(o,u,v){return o+(v?" ":"")+u.toLowerCase()}),ek=Gw("toLowerCase");function tk(o,u,v){o=kt(o),u=Qe(u);var x=u?Au(o):0;if(!u||x>=u)return o;var I=(u-x)/2;return bm(om(I),v)+o+bm(am(I),v)}function nk(o,u,v){o=kt(o),u=Qe(u);var x=u?Au(o):0;return u&&x<u?o+bm(u-x,v):o}function rk(o,u,v){o=kt(o),u=Qe(u);var x=u?Au(o):0;return u&&x<u?bm(u-x,v)+o:o}function ik(o,u,v){return v||u==null?u=0:u&&(u=+u),h5(kt(o).replace(se,""),u||0)}function sk(o,u,v){return(v?Vr(o,u,v):u===n)?u=1:u=Qe(u),a0(kt(o),u)}function ak(){var o=arguments,u=kt(o[0]);return o.length<3?u:u.replace(o[1],o[2])}var ok=Ou(function(o,u,v){return o+(v?"_":"")+u.toLowerCase()});function lk(o,u,v){return v&&typeof v!="number"&&Vr(o,u,v)&&(u=v=n),v=v===n?_e:v>>>0,v?(o=kt(o),o&&(typeof u=="string"||u!=null&&!N0(u))&&(u=mi(u),!u&&Tu(o))?no(ms(o),0,v):o.split(u,v)):[]}var uk=Ou(function(o,u,v){return o+(v?" ":"")+O0(u)});function ck(o,u,v){return o=kt(o),v=v==null?0:_l(Qe(v),0,o.length),u=mi(u),o.slice(v,v+u.length)==u}function hk(o,u,v){var x=L.templateSettings;v&&Vr(o,u,v)&&(u=n),o=kt(o),u=Om({},u,x,Zw);var I=Om({},u.imports,x.imports,Zw),F=or(I),q=zn(I,F),Y,ne,he=0,fe=u.interpolate||hi,ve="__p += '",we=Gv((u.escape||hi).source+"|"+fe.source+"|"+(fe===sr?Ie:hi).source+"|"+(u.evaluate||hi).source+"|$","g"),De="//# sourceURL="+(Vt.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Bd+"]")+`
`;o.replace(we,function(Ve,ut,yt,gi,zr,vi){return yt||(yt=gi),ve+=o.slice(he,vi).replace(fi,zD),ut&&(Y=!0,ve+=`' +
__e(`+ut+`) +
'`),zr&&(ne=!0,ve+=`';
`+zr+`;
__p += '`),yt&&(ve+=`' +
((__t = (`+yt+`)) == null ? '' : __t) +
'`),he=vi+Ve.length,Ve}),ve+=`';
`;var Ue=Vt.call(u,"variable")&&u.variable;if(!Ue)ve=`with (obj) {
`+ve+`
}
`;else if(Se.test(Ue))throw new We(l);ve=(ne?ve.replace(Mi,""):ve).replace(ji,"$1").replace(ci,"$1;"),ve="function("+(Ue||"obj")+`) {
`+(Ue?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Y?", __e = _.escape":"")+(ne?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ve+`return __p
}`;var Ze=qE(function(){return Nt(F,De+"return "+ve).apply(n,q)});if(Ze.source=ve,C0(Ze))throw Ze;return Ze}function fk(o){return kt(o).toLowerCase()}function dk(o){return kt(o).toUpperCase()}function mk(o,u,v){if(o=kt(o),o&&(v||u===n))return vt(o);if(!o||!(u=mi(u)))return o;var x=ms(o),I=ms(u),F=$r(x,I),q=pl(x,I)+1;return no(x,F,q).join("")}function pk(o,u,v){if(o=kt(o),o&&(v||u===n))return o.slice(0,rw(o)+1);if(!o||!(u=mi(u)))return o;var x=ms(o),I=pl(x,ms(u))+1;return no(x,0,I).join("")}function gk(o,u,v){if(o=kt(o),o&&(v||u===n))return o.replace(se,"");if(!o||!(u=mi(u)))return o;var x=ms(o),I=$r(x,ms(u));return no(x,I).join("")}function vk(o,u){var v=R,x=k;if(_n(u)){var I="separator"in u?u.separator:I;v="length"in u?Qe(u.length):v,x="omission"in u?mi(u.omission):x}o=kt(o);var F=o.length;if(Tu(o)){var q=ms(o);F=q.length}if(v>=F)return o;var Y=v-Au(x);if(Y<1)return x;var ne=q?no(q,0,Y).join(""):o.slice(0,Y);if(I===n)return ne+x;if(q&&(Y+=ne.length-Y),N0(I)){if(o.slice(Y).search(I)){var he,fe=ne;for(I.global||(I=Gv(I.source,kt(ze.exec(I))+"g")),I.lastIndex=0;he=I.exec(fe);)var ve=he.index;ne=ne.slice(0,ve===n?Y:ve)}}else if(o.indexOf(mi(I),Y)!=Y){var we=ne.lastIndexOf(I);we>-1&&(ne=ne.slice(0,we))}return ne+x}function yk(o){return o=kt(o),o&&Tr.test(o)?o.replace(Gr,YD):o}var _k=Ou(function(o,u,v){return o+(v?" ":"")+u.toUpperCase()}),O0=Gw("toUpperCase");function HE(o,u,v){return o=kt(o),u=v?n:u,u===n?FD(o)?KD(o):Eu(o):o.match(u)||[]}var qE=tt(function(o,u){try{return Ar(o,n,u)}catch(v){return C0(v)?v:new We(v)}}),bk=ha(function(o,u){return Lr(u,function(v){v=Ms(v),ua(o,v,S0(o[v],o))}),o});function xk(o){var u=o==null?0:o.length,v=ke();return o=u?Qt(o,function(x){if(typeof x[1]!="function")throw new Fi(a);return[v(x[0]),x[1]]}):[],tt(function(x){for(var I=-1;++I<u;){var F=o[I];if(Ar(F[0],this,x))return Ar(F[1],this,x)}})}function wk(o){return Y5(qi(o,m))}function M0(o){return function(){return o}}function Ek(o,u){return o==null||o!==o?u:o}var Tk=Yw(),Ak=Yw(!0);function Kr(o){return o}function j0(o){return Ew(typeof o=="function"?o:qi(o,m))}function Sk(o){return Aw(qi(o,m))}function Rk(o,u){return Sw(o,qi(u,m))}var Ck=tt(function(o,u){return function(v){return Rh(v,o,u)}}),Nk=tt(function(o,u){return function(v){return Rh(o,v,u)}});function k0(o,u,v){var x=or(u),I=dm(u,x);v==null&&!(_n(u)&&(I.length||!x.length))&&(v=u,u=o,o=this,I=dm(u,or(u)));var F=!(_n(v)&&"chain"in v)||!!v.chain,q=da(o);return Lr(I,function(Y){var ne=u[Y];o[Y]=ne,q&&(o.prototype[Y]=function(){var he=this.__chain__;if(F||he){var fe=o(this.__wrapped__),ve=fe.__actions__=Yr(this.__actions__);return ve.push({func:ne,args:arguments,thisArg:o}),fe.__chain__=he,fe}return ne.apply(o,fs([this.value()],arguments))})}),o}function Ik(){return Tn._===this&&(Tn._=n5),this}function P0(){}function Dk(o){return o=Qe(o),tt(function(u){return Rw(u,o)})}var Ok=d0(Qt),Mk=d0(xu),jk=d0(wu);function GE(o){return b0(o)?S(Ms(o)):cO(o)}function kk(o){return function(u){return o==null?n:bl(o,u)}}var Pk=Xw(),Lk=Xw(!0);function L0(){return[]}function U0(){return!1}function Uk(){return{}}function Vk(){return""}function zk(){return!0}function Bk(o,u){if(o=Qe(o),o<1||o>J)return[];var v=_e,x=Rr(o,_e);u=ke(u),o-=_e;for(var I=Ct(x,u);++v<o;)u(v);return I}function Fk(o){return Ke(o)?Qt(o,Ms):pi(o)?[o]:Yr(hE(kt(o)))}function Hk(o){var u=++e5;return kt(o)+u}var qk=_m(function(o,u){return o+u},0),Gk=m0("ceil"),$k=_m(function(o,u){return o/u},1),Yk=m0("floor");function Wk(o){return o&&o.length?fm(o,Kr,Jv):n}function Xk(o,u){return o&&o.length?fm(o,ke(u,2),Jv):n}function Kk(o){return b(o,Kr)}function Qk(o,u){return b(o,ke(u,2))}function Zk(o){return o&&o.length?fm(o,Kr,r0):n}function Jk(o,u){return o&&o.length?fm(o,ke(u,2),r0):n}var eP=_m(function(o,u){return o*u},1),tP=m0("round"),nP=_m(function(o,u){return o-u},0);function rP(o){return o&&o.length?be(o,Kr):0}function iP(o,u){return o&&o.length?be(o,ke(u,2)):0}return L.after=S6,L.ary=wE,L.assign=dj,L.assignIn=PE,L.assignInWith=Om,L.assignWith=mj,L.at=pj,L.before=EE,L.bind=S0,L.bindAll=bk,L.bindKey=TE,L.castArray=U6,L.chain=_E,L.chunk=YO,L.compact=WO,L.concat=XO,L.cond=xk,L.conforms=wk,L.constant=M0,L.countBy=r6,L.create=gj,L.curry=AE,L.curryRight=SE,L.debounce=RE,L.defaults=vj,L.defaultsDeep=yj,L.defer=R6,L.delay=C6,L.difference=KO,L.differenceBy=QO,L.differenceWith=ZO,L.drop=JO,L.dropRight=eM,L.dropRightWhile=tM,L.dropWhile=nM,L.fill=rM,L.filter=s6,L.flatMap=l6,L.flatMapDeep=u6,L.flatMapDepth=c6,L.flatten=pE,L.flattenDeep=iM,L.flattenDepth=sM,L.flip=N6,L.flow=Tk,L.flowRight=Ak,L.fromPairs=aM,L.functions=Aj,L.functionsIn=Sj,L.groupBy=h6,L.initial=lM,L.intersection=uM,L.intersectionBy=cM,L.intersectionWith=hM,L.invert=Cj,L.invertBy=Nj,L.invokeMap=d6,L.iteratee=j0,L.keyBy=m6,L.keys=or,L.keysIn=Xr,L.map=Sm,L.mapKeys=Dj,L.mapValues=Oj,L.matches=Sk,L.matchesProperty=Rk,L.memoize=Cm,L.merge=Mj,L.mergeWith=LE,L.method=Ck,L.methodOf=Nk,L.mixin=k0,L.negate=Nm,L.nthArg=Dk,L.omit=jj,L.omitBy=kj,L.once=I6,L.orderBy=p6,L.over=Ok,L.overArgs=D6,L.overEvery=Mk,L.overSome=jk,L.partial=R0,L.partialRight=CE,L.partition=g6,L.pick=Pj,L.pickBy=UE,L.property=GE,L.propertyOf=kk,L.pull=pM,L.pullAll=vE,L.pullAllBy=gM,L.pullAllWith=vM,L.pullAt=yM,L.range=Pk,L.rangeRight=Lk,L.rearg=O6,L.reject=_6,L.remove=_M,L.rest=M6,L.reverse=T0,L.sampleSize=x6,L.set=Uj,L.setWith=Vj,L.shuffle=w6,L.slice=bM,L.sortBy=A6,L.sortedUniq=RM,L.sortedUniqBy=CM,L.split=lk,L.spread=j6,L.tail=NM,L.take=IM,L.takeRight=DM,L.takeRightWhile=OM,L.takeWhile=MM,L.tap=WM,L.throttle=k6,L.thru=Am,L.toArray=ME,L.toPairs=VE,L.toPairsIn=zE,L.toPath=Fk,L.toPlainObject=kE,L.transform=zj,L.unary=P6,L.union=jM,L.unionBy=kM,L.unionWith=PM,L.uniq=LM,L.uniqBy=UM,L.uniqWith=VM,L.unset=Bj,L.unzip=A0,L.unzipWith=yE,L.update=Fj,L.updateWith=Hj,L.values=ku,L.valuesIn=qj,L.without=zM,L.words=HE,L.wrap=L6,L.xor=BM,L.xorBy=FM,L.xorWith=HM,L.zip=qM,L.zipObject=GM,L.zipObjectDeep=$M,L.zipWith=YM,L.entries=VE,L.entriesIn=zE,L.extend=PE,L.extendWith=Om,k0(L,L),L.add=qk,L.attempt=qE,L.camelCase=Wj,L.capitalize=BE,L.ceil=Gk,L.clamp=Gj,L.clone=V6,L.cloneDeep=B6,L.cloneDeepWith=F6,L.cloneWith=z6,L.conformsTo=H6,L.deburr=FE,L.defaultTo=Ek,L.divide=$k,L.endsWith=Xj,L.eq=gs,L.escape=Kj,L.escapeRegExp=Qj,L.every=i6,L.find=a6,L.findIndex=dE,L.findKey=_j,L.findLast=o6,L.findLastIndex=mE,L.findLastKey=bj,L.floor=Yk,L.forEach=bE,L.forEachRight=xE,L.forIn=xj,L.forInRight=wj,L.forOwn=Ej,L.forOwnRight=Tj,L.get=I0,L.gt=q6,L.gte=G6,L.has=Rj,L.hasIn=D0,L.head=gE,L.identity=Kr,L.includes=f6,L.indexOf=oM,L.inRange=$j,L.invoke=Ij,L.isArguments=El,L.isArray=Ke,L.isArrayBuffer=$6,L.isArrayLike=Wr,L.isArrayLikeObject=Dn,L.isBoolean=Y6,L.isBuffer=ro,L.isDate=W6,L.isElement=X6,L.isEmpty=K6,L.isEqual=Q6,L.isEqualWith=Z6,L.isError=C0,L.isFinite=J6,L.isFunction=da,L.isInteger=NE,L.isLength=Im,L.isMap=IE,L.isMatch=ej,L.isMatchWith=tj,L.isNaN=nj,L.isNative=rj,L.isNil=sj,L.isNull=ij,L.isNumber=DE,L.isObject=_n,L.isObjectLike=An,L.isPlainObject=Mh,L.isRegExp=N0,L.isSafeInteger=aj,L.isSet=OE,L.isString=Dm,L.isSymbol=pi,L.isTypedArray=ju,L.isUndefined=oj,L.isWeakMap=lj,L.isWeakSet=uj,L.join=fM,L.kebabCase=Zj,L.last=$i,L.lastIndexOf=dM,L.lowerCase=Jj,L.lowerFirst=ek,L.lt=cj,L.lte=hj,L.max=Wk,L.maxBy=Xk,L.mean=Kk,L.meanBy=Qk,L.min=Zk,L.minBy=Jk,L.stubArray=L0,L.stubFalse=U0,L.stubObject=Uk,L.stubString=Vk,L.stubTrue=zk,L.multiply=eP,L.nth=mM,L.noConflict=Ik,L.noop=P0,L.now=Rm,L.pad=tk,L.padEnd=nk,L.padStart=rk,L.parseInt=ik,L.random=Yj,L.reduce=v6,L.reduceRight=y6,L.repeat=sk,L.replace=ak,L.result=Lj,L.round=tP,L.runInContext=Q,L.sample=b6,L.size=E6,L.snakeCase=ok,L.some=T6,L.sortedIndex=xM,L.sortedIndexBy=wM,L.sortedIndexOf=EM,L.sortedLastIndex=TM,L.sortedLastIndexBy=AM,L.sortedLastIndexOf=SM,L.startCase=uk,L.startsWith=ck,L.subtract=nP,L.sum=rP,L.sumBy=iP,L.template=hk,L.times=Bk,L.toFinite=ma,L.toInteger=Qe,L.toLength=jE,L.toLower=fk,L.toNumber=Yi,L.toSafeInteger=fj,L.toString=kt,L.toUpper=dk,L.trim=mk,L.trimEnd=pk,L.trimStart=gk,L.truncate=vk,L.unescape=yk,L.uniqueId=Hk,L.upperCase=_k,L.upperFirst=O0,L.each=bE,L.eachRight=xE,L.first=gE,k0(L,function(){var o={};return Ds(L,function(u,v){Vt.call(L.prototype,v)||(o[v]=u)}),o}(),{chain:!1}),L.VERSION=r,Lr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){L[o].placeholder=L}),Lr(["drop","take"],function(o,u){ft.prototype[o]=function(v){v=v===n?1:Jn(Qe(v),0);var x=this.__filtered__&&!u?new ft(this):this.clone();return x.__filtered__?x.__takeCount__=Rr(v,x.__takeCount__):x.__views__.push({size:Rr(v,_e),type:o+(x.__dir__<0?"Right":"")}),x},ft.prototype[o+"Right"]=function(v){return this.reverse()[o](v).reverse()}}),Lr(["filter","map","takeWhile"],function(o,u){var v=u+1,x=v==G||v==z;ft.prototype[o]=function(I){var F=this.clone();return F.__iteratees__.push({iteratee:ke(I,3),type:v}),F.__filtered__=F.__filtered__||x,F}}),Lr(["head","last"],function(o,u){var v="take"+(u?"Right":"");ft.prototype[o]=function(){return this[v](1).value()[0]}}),Lr(["initial","tail"],function(o,u){var v="drop"+(u?"":"Right");ft.prototype[o]=function(){return this.__filtered__?new ft(this):this[v](1)}}),ft.prototype.compact=function(){return this.filter(Kr)},ft.prototype.find=function(o){return this.filter(o).head()},ft.prototype.findLast=function(o){return this.reverse().find(o)},ft.prototype.invokeMap=tt(function(o,u){return typeof o=="function"?new ft(this):this.map(function(v){return Rh(v,o,u)})}),ft.prototype.reject=function(o){return this.filter(Nm(ke(o)))},ft.prototype.slice=function(o,u){o=Qe(o);var v=this;return v.__filtered__&&(o>0||u<0)?new ft(v):(o<0?v=v.takeRight(-o):o&&(v=v.drop(o)),u!==n&&(u=Qe(u),v=u<0?v.dropRight(-u):v.take(u-o)),v)},ft.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},ft.prototype.toArray=function(){return this.take(_e)},Ds(ft.prototype,function(o,u){var v=/^(?:filter|find|map|reject)|While$/.test(u),x=/^(?:head|last)$/.test(u),I=L[x?"take"+(u=="last"?"Right":""):u],F=x||/^find/.test(u);I&&(L.prototype[u]=function(){var q=this.__wrapped__,Y=x?[1]:arguments,ne=q instanceof ft,he=Y[0],fe=ne||Ke(q),ve=function(ut){var yt=I.apply(L,fs([ut],Y));return x&&we?yt[0]:yt};fe&&v&&typeof he=="function"&&he.length!=1&&(ne=fe=!1);var we=this.__chain__,De=!!this.__actions__.length,Ue=F&&!we,Ze=ne&&!De;if(!F&&fe){q=Ze?q:new ft(this);var Ve=o.apply(q,Y);return Ve.__actions__.push({func:Am,args:[ve],thisArg:n}),new Hi(Ve,we)}return Ue&&Ze?o.apply(this,Y):(Ve=this.thru(ve),Ue?x?Ve.value()[0]:Ve.value():Ve)})}),Lr(["pop","push","shift","sort","splice","unshift"],function(o){var u=Qd[o],v=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",x=/^(?:pop|shift)$/.test(o);L.prototype[o]=function(){var I=arguments;if(x&&!this.__chain__){var F=this.value();return u.apply(Ke(F)?F:[],I)}return this[v](function(q){return u.apply(Ke(q)?q:[],I)})}}),Ds(ft.prototype,function(o,u){var v=L[u];if(v){var x=v.name+"";Vt.call(Nu,x)||(Nu[x]=[]),Nu[x].push({name:u,func:v})}}),Nu[ym(n,A).name]=[{name:"wrapper",func:n}],ft.prototype.clone=y5,ft.prototype.reverse=_5,ft.prototype.value=b5,L.prototype.at=XM,L.prototype.chain=KM,L.prototype.commit=QM,L.prototype.next=ZM,L.prototype.plant=e6,L.prototype.reverse=t6,L.prototype.toJSON=L.prototype.valueOf=L.prototype.value=n6,L.prototype.first=L.prototype.head,bh&&(L.prototype[bh]=JM),L},Su=QD();pr?((pr.exports=Su)._=Su,_u._=Su):Tn._=Su}).call(jh)})(Ug,Ug.exports);var EW=Ug.exports;const Qh=({label:t,...e})=>g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-muted-foreground",children:t}),g.jsx("input",{...e,className:`mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent sm:text-sm ${e.type==="number"?"no-spinner":""}`})]}),zu=({label:t,value:e})=>g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-muted-foreground",children:t}),g.jsx("div",{className:"mt-1 block w-full bg-input/50 border border-transparent rounded-md py-2 px-3 text-foreground/80 sm:text-sm min-h-[42px] flex items-center",children:e||g.jsx("span",{className:"text-muted-foreground/50",children:"N/A"})})]}),TW=({label:t,value:e})=>{const n=si(Xs(e));return g.jsxs("div",{className:"flex flex-col items-center gap-1",children:[g.jsx("div",{className:"text-lg font-bold text-accent h-7 flex items-center",children:n}),g.jsx("div",{className:"w-full bg-input/50 border border-transparent rounded-md py-2 px-3 text-foreground/80 text-2xl min-h-[52px] flex items-center justify-center font-bold",children:e}),g.jsx("label",{className:"block text-sm font-medium text-muted-foreground mt-1",children:t})]})},Hy=({label:t,isActive:e,onClick:n})=>g.jsx("button",{onClick:n,className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${e?"bg-accent/20 text-accent":"text-muted-foreground hover:bg-muted/50"}`,children:t}),AW=({companion:t,onSave:e,onClose:n,readOnly:r=!1})=>{const[i,s]=K.useState(t),a=K.useRef(null),[l,c]=K.useState(!1),{currentUser:f}=pu(),{character:h}=mr(),[m,p]=K.useState("overview"),y=K.useCallback(EW.debounce(H=>{r&&e(H,!1)},1e3),[r,e]);K.useEffect(()=>{var H;(H=a.current)==null||H.showModal()},[]);const T=H=>{const{name:D,value:E,type:_}=H.target;s(w=>({...w,[D]:_==="number"?parseInt(E)||0:E}))},N=(H,D)=>{s(E=>{const _={...E.hp,[H]:D};return _.current=Math.min(E.hp.current,D),{...E,hp:_}})},j=(H,D)=>{s(E=>({...E,abilityScores:{...E.abilityScores,[H]:D}}))},A=H=>{const D={...i,hp:H};s(D),y(D)},C=()=>{e(i)},M=async H=>{if(!f||!h){const D="User or character not found. Cannot upload image.";throw new Error(D)}try{const D=await JG(H,f.uid,h.id,i.id),E={...i,imageUrl:D};s(E),e(E,!1)}catch(D){throw console.error("Failed to upload companion image:",D),new Error("Error uploading image. Please try again.")}},U=Xs(i.abilityScores.dexterity);return g.jsxs("dialog",{ref:a,onClose:n,className:"bg-card text-foreground p-0 rounded-lg shadow-2xl w-full max-w-3xl border border-border backdrop-filter backdrop-blur-sm backdrop:bg-black/50",children:[g.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-zinc-700 sticky top-0 bg-zinc-800 z-10",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent",children:r?i.name:"Edit Companion"}),g.jsxs("div",{className:"flex items-center gap-2",children:[!r&&g.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-bold rounded-lg shadow-md hover:bg-primary/90 transition-colors",children:[g.jsx(hD,{className:"w-5 h-5"})," Save"]}),g.jsx("button",{onClick:n,className:"p-1 rounded-full hover:bg-zinc-700 transition-colors",children:g.jsx(Xx,{className:"w-5 h-5"})})]})]}),g.jsxs("div",{className:"p-4 sm:p-6 max-h-[70vh] overflow-y-auto",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-6 border-b border-border pb-4",children:[g.jsx(Hy,{label:"Overview",isActive:m==="overview",onClick:()=>p("overview")}),g.jsx(Hy,{label:"Combat",isActive:m==="combat",onClick:()=>p("combat")}),g.jsx(Hy,{label:"Notes",isActive:m==="notes",onClick:()=>p("notes")})]}),g.jsxs("div",{hidden:m!=="overview",className:"space-y-6",children:[g.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:[g.jsxs("div",{className:"flex-shrink-0",children:[g.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Portrait"}),g.jsxs("div",{onClick:()=>!r&&c(!0),className:`w-24 h-24 bg-muted rounded-md overflow-hidden group relative ${!r&&"cursor-pointer"}`,children:[i.imageUrl?g.jsx("img",{src:i.imageUrl,alt:i.name,className:"w-full h-full object-cover"}):g.jsx(Ov,{className:"w-full h-full text-muted-foreground p-4"}),!r&&g.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx("span",{className:"text-white text-xs",children:"Change"})})]})]}),g.jsx("div",{className:"flex-grow w-full grid grid-cols-1 sm:grid-cols-2 gap-4",children:r?g.jsxs(g.Fragment,{children:[g.jsx(zu,{label:"Name",value:i.name}),g.jsx(zu,{label:"Type",value:i.type})]}):g.jsxs(g.Fragment,{children:[g.jsx(Qh,{label:"Name",name:"name",value:i.name,onChange:T}),g.jsx(Qh,{label:"Type",name:"type",value:i.type,onChange:T,placeholder:"e.g., Familiar, Beast"})]})})]}),g.jsx(wW,{hp:i.hp,onHpChange:A}),g.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[r?g.jsx(zu,{label:"Armor Class",value:i.armorClass}):g.jsx(Qh,{label:"Armor Class",name:"armorClass",type:"number",value:i.armorClass,onChange:T}),r?g.jsx(zu,{label:"Speed",value:i.speed}):g.jsx(Qh,{label:"Speed",name:"speed",value:i.speed,onChange:T}),g.jsx(zu,{label:"Initiative",value:si(U)}),r?g.jsx(zu,{label:"Max HP",value:i.hp.max}):g.jsx(Qh,{label:"Max HP",type:"number",value:i.hp.max,onChange:H=>N("max",parseInt(H.target.value)||0)})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-md font-semibold text-zinc-400 mb-2",children:"Ability Scores"}),g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:r?Object.keys(i.abilityScores).map(H=>g.jsx(TW,{label:H.substring(0,3).toUpperCase(),value:i.abilityScores[H]},H)):Object.keys(i.abilityScores).map(H=>g.jsx(jD,{label:H.substring(0,3).toUpperCase(),value:i.abilityScores[H],onChange:D=>j(H,Number(D))},H))})]})]}),g.jsxs("div",{hidden:m!=="combat",className:"space-y-6",children:[g.jsx(_W,{companion:i,setCompanion:s,readOnly:r}),g.jsx(xW,{companion:i,setCompanion:s,readOnly:r})]}),g.jsx("div",{hidden:m!=="notes",children:g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-muted-foreground",children:"Notes, Features & Traits"}),r?g.jsx("div",{className:"mt-1 p-3 bg-input/50 rounded-md min-h-[200px] text-foreground/80 whitespace-pre-wrap",children:i.notes||g.jsx("span",{className:"text-muted-foreground/50",children:"No notes."})}):g.jsx("textarea",{name:"notes",value:i.notes,onChange:T,rows:12,className:"mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent sm:text-sm",placeholder:"Special abilities, background, resistances, immunities, etc."})]})})]}),g.jsx(MD,{isOpen:l,onClose:()=>c(!1),onImageReady:M})]})},kD=({readOnly:t=!1})=>{const{character:e,setCharacter:n}=mr(),[r,i]=K.useState(null),[s,a]=K.useState(!1),l=()=>({id:`comp_${Date.now()}`,name:"New Companion",type:"Familiar",hp:{max:10,current:10,temporary:0},armorClass:10,speed:"30 ft.",abilityScores:{strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10},skills:[],attacks:[],spells:[],featuresAndTraits:[],equipment:[],notes:""}),c=()=>{i(l()),a(!1)},f=T=>{i(T),a(!1)},h=T=>{i(T),a(!0)},m=T=>{window.confirm("Are you sure you want to delete this companion?")&&n(N=>N?{...N,companions:N.companions.filter(j=>j.id!==T)}:null)},p=(T,N=!0)=>{n(j=>j?j.companions.find(C=>C.id===T.id)?{...j,companions:j.companions.map(C=>C.id===T.id?T:C)}:{...j,companions:[...j.companions,T]}:null),N&&y()},y=()=>{i(null)};return e?g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("h2",{className:"text-2xl font-cinzel text-accent",children:"Companions & Summons"}),!t&&g.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-bold rounded-lg shadow-md hover:bg-primary/90 transition-colors",children:[g.jsx(iu,{className:"w-5 h-5"}),"Add Companion"]})]}),e.companions.length>0?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.companions.map(T=>g.jsx(vW,{companion:T,onEdit:()=>!t&&f(T),onDelete:()=>m(T.id),onView:()=>h(T),readOnly:t},T.id))}):g.jsxs("div",{className:"text-center py-16 px-6 bg-muted/20 rounded-lg border-2 border-dashed border-border",children:[g.jsx(jg,{className:"mx-auto h-12 w-12 text-muted-foreground/50"}),g.jsx("h3",{className:"mt-2 text-lg font-medium text-zinc-300",children:"No Companions Yet"}),g.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Your familiars, animal companions, and summons will appear here."}),!t&&g.jsx("div",{className:"mt-6",children:g.jsxs("button",{onClick:c,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-bold rounded-lg shadow-md hover:bg-primary/90 transition-colors",children:[g.jsx(iu,{className:"w-5 h-5"})," Add your first companion"]})})]}),r&&g.jsx(AW,{companion:r,onSave:p,onClose:y,readOnly:s})]}):null},qy=["strength","dexterity","constitution","intelligence","wisdom","charisma"],SW=({label:t,isActive:e,onClick:n,controls:r,id:i})=>g.jsx("button",{id:i,role:"tab","aria-selected":e,"aria-controls":r,onClick:n,className:`px-3 py-2 text-sm font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-card text-accent border-b-2 border-accent":"text-muted-foreground hover:bg-muted border-b-2 border-transparent"}`,children:t}),ks=({label:t,name:e,type:n,value:r,onChange:i,placeholder:s,className:a})=>g.jsxs("div",{className:a,children:[g.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-muted-foreground capitalize",children:t}),g.jsx("input",{type:n,id:e,name:e,value:r,onChange:i,placeholder:s,className:"mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent sm:text-sm"})]}),Bu=({label:t,name:e,value:n,onChange:r,placeholder:i})=>g.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col",children:[g.jsx("h3",{className:"text-lg font-semibold text-accent mb-2",children:t}),g.jsx("textarea",{name:e,value:n,onChange:r,className:"w-full bg-input border border-border rounded-md p-3 text-foreground focus:ring-ring focus:border-accent resize-y flex-grow min-h-[100px]",placeholder:i||`Your character's ${t.toLowerCase()}...`})]}),RW=[{key:"main",label:"Main"},{key:"stats",label:"Stats & Skills"},{key:"combat",label:"Combat & Features"},{key:"bio",label:"Biography & Notes"},{key:"inventory",label:"Inventory"},{key:"spells",label:"Spells"},{key:"companions",label:"Companions"}],BS=()=>{var ye;const{characterId:t}=tI(),e=nh(),{character:n,setCharacter:r,updateCharacter:i,deleteCharacter:s,saveCharacter:a}=mr(),{currentUser:l}=pu(),[c,f]=K.useState(!1),[h,m]=K.useState(!1),[p,y]=K.useState(""),[T,N]=K.useState("main"),[j,A]=K.useState(!1),C=window.location.pathname.endsWith("/character/new");K.useEffect(()=>{let W=!0;return(async()=>{let ce;t?ce=await aD(t):ce={...za(),id:"temp_new"};const Oe={...za(),...ce};W&&r(Oe)})(),()=>{W=!1}},[t,r]);const M=K.useMemo(()=>n?Math.ceil(n.level/4)+1:0,[n==null?void 0:n.level]),U=async()=>{if(n){f(!0);try{const W=C?`char_${Date.now()}`:n.id,X={...n,id:W,proficiencyBonus:M,initiative:ie,lastUpdated:Date.now()},ce=await a(X);e(`/character/${ce.id}`,{replace:C})}catch(W){console.error("Failed to save character:",W),alert("An error occurred while saving. Please try again.")}finally{f(!1)}}},H=async()=>{if(n&&!C&&window.confirm(`Are you sure you want to permanently delete ${n.name}?`))try{await s(n.id),e("/")}catch(W){console.error("Failed to delete character:",W),alert("An error occurred while deleting the character.")}},D=()=>{e(C?"/":n?`/character/${n.id}`:-1)},E=async W=>{if(!(!l||!n||C))try{const X=await xb(W,l.uid,n.id);i({imageUrl:X})}catch(X){console.error("Failed to upload character portrait:",X),alert("Error uploading image. Please try again.")}},_=W=>{if(!n)return;const{name:X,value:ce,type:Oe}=W.target;let je=ce;Oe==="number"&&(je=parseInt(ce)||0),i({[X]:je})},w=(W,X)=>{n&&r(ce=>({...ce,currency:{...ce.currency,[W]:X}}))},R=(W,X)=>{n&&r(ce=>({...ce,hp:{...ce.hp,[W]:X}}))},k=W=>{if(!n)return;const{value:X}=W.target;r(ce=>({...ce,hitDice:{...ce.hitDice,total:X}}))},P=(W,X)=>{n&&r(ce=>({...ce,abilityScores:{...ce.abilityScores,[W]:X}}))},O=W=>{if(!n)return;const X={...n.savingThrows};X[W].proficient=!X[W].proficient,r(ce=>({...ce,savingThrows:X}))},G=W=>{if(!n)return;const X=n.skills.map(ce=>{if(ce.name===W){const Oe=!ce.proficient,je=Oe?ce.expertise:!1;return{...ce,proficient:Oe,expertise:je}}return ce});r(ce=>({...ce,skills:X}))},Z=W=>{if(!n)return;const X=n.skills.map(ce=>{if(ce.name===W){const Oe=!ce.expertise,je=Oe||ce.proficient;return{...ce,proficient:je,expertise:Oe}}return ce});r(ce=>({...ce,skills:X}))},z=W=>{var ce;if(!n)return;const X=parseInt(W.target.value,10)||0;i({unarmoredDefense:{base:X,abilities:((ce=n.unarmoredDefense)==null?void 0:ce.abilities)||[]}})},V=W=>{var Oe,je;if(!n)return;const X=((Oe=n.unarmoredDefense)==null?void 0:Oe.abilities)||[],ce=X.includes(W)?X.filter($e=>$e!==W):[...X,W];i({unarmoredDefense:{base:((je=n.unarmoredDefense)==null?void 0:je.base)??10,abilities:ce}})},J=(W,X)=>{if(!n)return;const ce={...n.spellSlots};ce[W]={...ce[W],max:X},r(Oe=>({...Oe,spellSlots:ce}))},ee=async()=>{if(!n)return;m(!0);const W=await oY(n,p);r(X=>({...X,...W})),m(!1)},ie=K.useMemo(()=>n?Xs(n.abilityScores.dexterity):0,[n==null?void 0:n.abilityScores.dexterity]),{spellSaveDC:_e,spellAttackBonus:me}=K.useMemo(()=>{if(!n||!n.spellcastingAbility)return{spellSaveDC:"-",spellAttackBonus:"-"};const W=Xs(n.abilityScores[n.spellcastingAbility]);return{spellSaveDC:8+M+W,spellAttackBonus:si(M+W)}},[n==null?void 0:n.spellcastingAbility,n==null?void 0:n.abilityScores,M]);return n?g.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:pt-8",children:[g.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[g.jsxs("button",{onClick:D,className:"flex items-center gap-2 rounded-md px-3 py-2 font-semibold text-muted-foreground transition-all duration-200 hover:scale-105 hover:text-accent [text-shadow:0_1px_2px_rgba(0,0,0,0.3)] self-start","aria-label":C?"Cancel Creation":"Back to Play View",children:[g.jsx(cD,{className:"w-5 h-5"}),g.jsx("span",{children:C?"Cancel Creation":"Back to Play"})]}),g.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-center",children:[!C&&g.jsxs("button",{onClick:H,className:"flex items-center gap-2 rounded-md px-3 py-2 font-semibold text-destructive transition-all duration-200 hover:scale-105 hover:text-accent [text-shadow:0_1px_2px_rgba(0,0,0,0.3)]","aria-label":"Delete Character",children:[g.jsx(na,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:"Delete"})]}),g.jsxs("button",{onClick:U,disabled:c,className:"flex items-center gap-2 rounded-md px-3 py-2 font-bold text-primary transition-all duration-200 hover:scale-105 hover:text-accent [text-shadow:0_1px_2px_rgba(0,0,0,0.3)] disabled:text-muted-foreground/60 disabled:scale-100 disabled:cursor-not-allowed disabled:[text-shadow:none]",children:[g.jsx(hD,{className:"w-5 h-5"}),g.jsx("span",{className:"hidden sm:inline",children:c?"Saving...":"Save Changes"}),g.jsx("span",{className:"sm:hidden",children:c?"...":"Save"})]})]})]}),g.jsxs("div",{className:"bg-card border border-border shadow-lg shadow-accent/5 rounded-lg p-4 sm:p-6",children:[g.jsx("div",{role:"tablist","aria-label":"Character Sheet Sections",className:"flex space-x-1 mb-6 border-b border-border overflow-x-auto",children:RW.map(W=>g.jsx(SW,{id:`tab-${W.key}`,label:W.label,isActive:T===W.key,onClick:()=>N(W.key),controls:`panel-${W.key}`},W.key))}),g.jsx("div",{id:"panel-main",role:"tabpanel","aria-labelledby":"tab-main",hidden:T!=="main",children:g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsx("div",{className:"space-y-6",children:g.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"block text-sm font-medium text-muted-foreground",children:"Character Portrait"}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("span",{className:"inline-block h-24 w-24 rounded-lg overflow-hidden bg-muted",children:n.imageUrl?g.jsx("img",{src:n.imageUrl,alt:"Character portrait",className:"h-full w-full object-cover"}):g.jsx(Ov,{className:"h-full w-full text-muted-foreground p-4"})}),g.jsx("button",{type:"button",onClick:()=>A(!0),disabled:C,className:"cursor-pointer rounded-md bg-secondary px-3 py-2 text-sm font-semibold text-secondary-foreground shadow-sm hover:bg-secondary/80 transition-colors disabled:bg-muted disabled:text-muted-foreground disabled:cursor-not-allowed",children:"Change"})]}),C&&g.jsx("p",{className:"text-xs text-muted-foreground",children:"Save the character to enable the image uploader."})]}),g.jsx(ks,{label:"Character Name",name:"name",type:"text",value:n.name,onChange:_,placeholder:"e.g., Eldrin"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsx(ks,{label:"Class",name:"class",type:"text",value:n.class,onChange:_,placeholder:"e.g., Wizard"}),g.jsx(ks,{label:"Subclass",name:"subclass",type:"text",value:n.subclass,onChange:_,placeholder:"e.g., School of Evocation"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsx(ks,{label:"Race",name:"race",type:"text",value:n.race,onChange:_,placeholder:"e.g., High-Elf"}),g.jsx(ks,{label:"Background",name:"background",type:"text",value:n.background,onChange:_,placeholder:"e.g., Sage"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsx(ks,{label:"Alignment",name:"alignment",type:"text",value:n.alignment,onChange:_,placeholder:"e.g., Chaotic Good"}),g.jsx(ks,{label:"Level",name:"level",type:"number",value:n.level,onChange:_})]}),g.jsx(ks,{label:"Languages",name:"languages",type:"text",value:n.languages,onChange:_,placeholder:"e.g., Common, Elvish"})]})}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Hit Points"}),g.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"hp-current",className:"block text-xs font-medium text-muted-foreground text-center",children:"Current"}),g.jsx("input",{id:"hp-current",type:"number",value:n.hp.current,onChange:W=>R("current",parseInt(W.target.value)||0),className:"mt-1 w-full bg-input border border-border rounded-md py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"hp-max",className:"block text-xs font-medium text-muted-foreground text-center",children:"Max"}),g.jsx("input",{id:"hp-max",type:"number",value:n.hp.max,onChange:W=>R("max",parseInt(W.target.value)||0),className:"mt-1 w-full bg-input border border-border rounded-md py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"hp-temporary",className:"block text-xs font-medium text-muted-foreground text-center",children:"Temporary"}),g.jsx("input",{id:"hp-temporary",type:"number",value:n.hp.temporary,onChange:W=>R("temporary",parseInt(W.target.value)||0),className:"mt-1 w-full bg-input border border-border rounded-md py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]})]})]}),g.jsx(ks,{label:"Hit Dice",name:"hitDice",type:"text",value:n.hitDice.total,onChange:k,placeholder:"e.g. 1d8"})]}),g.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-2",children:[g.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Unarmored Defense"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("div",{className:"flex flex-col items-center",children:[g.jsx("input",{id:"unarmoredBase",type:"number",name:"unarmoredBase",value:((ye=n.unarmoredDefense)==null?void 0:ye.base)??10,onChange:z,className:"w-24 bg-input border border-border rounded-md py-1 px-2 text-foreground text-center focus:outline-none focus:ring-ring focus:border-accent","aria-label":"Base Armor Class"}),g.jsx("label",{htmlFor:"unarmoredBase",className:"text-xs text-muted-foreground mt-1",children:"Base AC"})]}),g.jsx("span",{className:"text-xl text-muted-foreground",children:" + "}),g.jsx("div",{className:"flex-1",children:g.jsx("div",{className:"grid grid-cols-3 gap-2",children:qy.map(W=>{var X;return g.jsxs("div",{className:"flex flex-col items-center",children:[g.jsx("input",{type:"checkbox",id:`unarmored-${W}`,checked:(X=n.unarmoredDefense)==null?void 0:X.abilities.includes(W),onChange:()=>V(W),className:"w-4 h-4 rounded-full text-primary bg-input border-border focus:ring-ring cursor-pointer"}),g.jsx("label",{htmlFor:`unarmored-${W}`,className:"text-xs text-muted-foreground mt-1 uppercase",children:W.substring(0,3)})]},W)})})})]})]})]}),g.jsx("div",{className:"space-y-6",children:g.jsxs("div",{className:"p-4 border border-border rounded-lg grid grid-cols-2 gap-4",children:[g.jsx(ws,{label:"Initiative",value:si(ie)}),g.jsx(ks,{label:"Speed",name:"speed",type:"number",value:n.speed,onChange:_}),g.jsx(ws,{label:"Proficiency",value:si(M)}),g.jsxs("div",{className:"col-span-2",children:[g.jsx("label",{htmlFor:"spellcastingAbility",className:"block text-sm font-medium text-muted-foreground",children:"Spellcasting Ability"}),g.jsxs("select",{id:"spellcastingAbility",name:"spellcastingAbility",value:n.spellcastingAbility,onChange:_,className:"mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent sm:text-sm",children:[g.jsx("option",{value:"",children:"None"}),qy.map(W=>g.jsx("option",{value:W,className:"capitalize",children:W},W))]})]}),g.jsx(ws,{label:"Spell Save DC",value:String(_e)}),g.jsx(ws,{label:"Spell Attack",value:String(me)})]})})]})}),g.jsx("div",{id:"panel-stats",role:"tabpanel","aria-labelledby":"tab-stats",hidden:T!=="stats",children:g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:qy.map(W=>{const X=n.abilityScores[W],ce=Xs(X),Oe=n.savingThrows[W],je=ce+(Oe.proficient?M:0),$e=n.skills.filter(Pe=>Pe.ability===W);return g.jsxs("div",{className:"bg-card p-3 rounded-lg flex flex-col gap-3 border border-border",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("div",{className:"flex flex-col items-center justify-center bg-muted p-2 rounded-lg w-20",children:[g.jsx("span",{className:"text-3xl font-bold font-mono text-foreground",children:si(ce)}),g.jsx("span",{className:"text-xs uppercase tracking-wider text-muted-foreground",children:W.substring(0,3)})]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-xl font-cinzel text-accent capitalize",children:W}),g.jsx("input",{type:"number",value:X,onChange:Pe=>P(W,parseInt(Pe.target.value)||0),className:"w-full bg-input text-center text-lg rounded border border-border p-1 focus:ring-ring","aria-label":`${W} score`})]})]}),g.jsxs("div",{className:"bg-muted/60 p-2 rounded-md space-y-2",children:[g.jsxs("label",{htmlFor:`saving-throw-${W}`,className:"flex items-center justify-between cursor-pointer text-sm",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:`saving-throw-${W}`,checked:Oe.proficient,onChange:()=>O(W),className:"w-4 h-4 rounded-full text-primary bg-input border-border focus:ring-ring"}),g.jsx("span",{className:"text-foreground",children:"Saving Throw"})]}),g.jsx("span",{className:"font-mono font-bold text-lg text-foreground",children:si(je)})]}),$e.map(Pe=>{const gt=ce+(Pe.proficient?M:0)+(Pe.expertise?M:0);return g.jsxs("div",{className:"flex items-center justify-between text-sm",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:`skill-prof-${Pe.name}`,checked:Pe.proficient,onChange:()=>G(Pe.name),className:"w-4 h-4 rounded-full text-primary bg-input border-border focus:ring-ring cursor-pointer"}),g.jsx("input",{type:"checkbox",id:`skill-exp-${Pe.name}`,checked:Pe.expertise,onChange:()=>Z(Pe.name),className:"w-4 h-4 rounded-sm text-accent bg-input border-border focus:ring-ring cursor-pointer",title:"Expertise"}),g.jsx("label",{htmlFor:`skill-prof-${Pe.name}`,className:"cursor-pointer text-foreground",children:Pe.name})]}),g.jsx("span",{className:"font-mono font-bold text-lg text-foreground",children:si(gt)})]},Pe.name)})]})]},W)})})}),g.jsx("div",{id:"panel-combat",role:"tabpanel","aria-labelledby":"tab-combat",hidden:T!=="combat",className:"min-h-[60vh]",children:g.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-full",children:[g.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col p-4 border border-border rounded-lg",children:g.jsx(fW,{})}),g.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col p-4 border border-border rounded-lg",children:g.jsx(aW,{})})]})}),g.jsx("div",{id:"panel-bio",role:"tabpanel","aria-labelledby":"tab-bio",hidden:T!=="bio",className:"min-h-[60vh]",children:g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"flex flex-col gap-6",children:[g.jsx(Bu,{label:"Personality Traits",name:"personalityTraits",value:n.personalityTraits,onChange:_}),g.jsx(Bu,{label:"Ideals",name:"ideals",value:n.ideals,onChange:_}),g.jsx(Bu,{label:"Bonds",name:"bonds",value:n.bonds,onChange:_}),g.jsx(Bu,{label:"Flaws",name:"flaws",value:n.flaws,onChange:_})]}),g.jsxs("div",{className:"flex flex-col gap-6",children:[g.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col",children:[g.jsx("h3",{className:"text-lg font-semibold text-accent mb-2",children:"AI Personality Generator"}),g.jsx("input",{type:"text",placeholder:"Optional: Add a keyword (e.g., 'tragic', 'grew up an orphan')",value:p,onChange:W=>y(W.target.value),className:"w-full bg-input border border-border rounded-md p-2 text-sm mb-2 focus:ring-ring focus:border-accent"}),g.jsxs("button",{onClick:ee,disabled:h,className:"flex w-full justify-center items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition disabled:bg-muted disabled:text-muted-foreground",children:[g.jsx(jg,{className:"w-4 h-4"}),h?"Generating...":"Generate with AI"]})]}),g.jsx(Bu,{label:"Notes",name:"notes",value:n.notes,onChange:_,placeholder:"Campaign notes, important NPCs, etc."}),g.jsx(Bu,{label:"DM Notes",name:"dmNotes",value:n.dmNotes,onChange:_,placeholder:"Notes from your DM, or secrets your character knows."})]})]})}),g.jsx("div",{id:"panel-inventory",role:"tabpanel","aria-labelledby":"tab-inventory",hidden:T!=="inventory",className:"min-h-[60vh]",children:g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"lg:col-span-1",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent mb-4",children:"Currency"}),g.jsx("div",{className:"bg-muted/50 p-4 rounded-lg grid grid-cols-3 sm:grid-cols-5 gap-3 border border-border",children:Object.entries(n.currency).map(([W,X])=>g.jsxs("div",{children:[g.jsx("label",{className:"block text-center text-sm font-medium text-muted-foreground uppercase",children:W}),g.jsx("input",{type:"number",value:X,onChange:ce=>w(W,parseInt(ce.target.value,10)||0),className:"mt-1 block w-full bg-input border border-border rounded-md py-1 px-2 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]},W))})]}),g.jsx("div",{className:"lg:col-span-2 p-4 border border-border rounded-lg",children:g.jsx(uW,{})})]})}),g.jsxs("div",{id:"panel-spells",role:"tabpanel","aria-labelledby":"tab-spells",hidden:T!=="spells",className:"min-h-[60vh] space-y-6",children:[g.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg border border-border",children:[g.jsx("h4",{className:"text-lg font-cinzel text-accent mb-3",children:"Maximum Spell Slots"}),g.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-5 md:grid-cols-9 gap-3",children:Array.from({length:9},(W,X)=>X+1).map(W=>{var X;return g.jsxs("div",{children:[g.jsxs("label",{className:"block text-center text-sm font-medium text-muted-foreground",children:["Lvl ",W]}),g.jsx("input",{type:"number",min:"0",value:((X=n.spellSlots[W])==null?void 0:X.max)??0,onChange:ce=>J(W,parseInt(ce.target.value,10)||0),className:"mt-1 block w-full bg-input border border-border rounded-md py-1 px-2 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]},W)})})]}),g.jsx("div",{className:"p-4 border border-border rounded-lg",children:g.jsx(pW,{character:n,onUpdateCharacter:i})}),g.jsx("div",{className:"p-4 border border-border rounded-lg",children:g.jsx(rW,{})})]}),g.jsx("div",{id:"panel-companions",role:"tabpanel","aria-labelledby":"tab-companions",hidden:T!=="companions",className:"min-h-[60vh]",children:g.jsx(kD,{})})]}),g.jsx(MD,{isOpen:j,onClose:()=>A(!1),onImageReady:E})]}):g.jsx("div",{className:"flex justify-center items-center h-screen",children:g.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-accent"})})},CW=t=>Math.floor((t-10)/2),Gy=t=>t>=0?`+${t}`:String(t),NW=["strength","dexterity","constitution","intelligence","wisdom","charisma"],IW=()=>{const{character:t}=mr();if(!t)return null;const{proficiencyBonus:e,abilityScores:n,savingThrows:r,skills:i}=t;return g.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3 text-center",children:"Abilities"}),g.jsx("div",{className:"space-y-3",children:NW.map(s=>{const a=n[s],l=CW(a),c=r[s],f=l+(c.proficient?e:0),h=i.filter(m=>m.ability===s);return g.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg border border-border/50",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("h4",{className:"text-lg font-cinzel text-accent capitalize",children:s}),g.jsxs("div",{className:"flex items-baseline gap-2",children:[g.jsx("span",{className:"text-3xl font-mono text-foreground font-bold",children:a}),g.jsxs("span",{className:"text-2xl font-mono text-accent font-bold",children:["(",Gy(l),")"]})]})]}),g.jsxs("div",{className:"bg-muted/60 p-2 rounded-md space-y-2",children:[g.jsxs("div",{className:"flex items-center justify-between text-sm text-foreground",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:`w-3 h-3 rounded-full border-2 transition-colors ${c.proficient?"bg-primary border-primary":"bg-transparent border-border"}`}),g.jsx("span",{children:"Saving Throw"})]}),g.jsx("span",{className:"font-mono font-bold text-base text-foreground",children:Gy(f)})]}),g.jsx("hr",{className:"border-border"}),h.map(m=>{const p=l+(m.proficient?e:0)+(m.expertise?e:0);let y="bg-transparent border-border";return m.expertise?y="bg-accent border-accent ring-2 ring-offset-2 ring-offset-muted/60 ring-accent":m.proficient&&(y="bg-primary border-primary"),g.jsxs("div",{className:"flex items-center justify-between text-sm text-foreground",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:`w-3 h-3 rounded-full border-2 transition-all ${y}`}),g.jsx("span",{children:m.name})]}),g.jsx("span",{className:"font-mono font-bold text-base text-foreground",children:Gy(p)})]},m.name)})]})]},s)})})]})},DW=({spell:t,onToggleExpand:e,isExpanded:n})=>g.jsxs("div",{className:"bg-card/50 rounded-lg",children:[g.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-3",onClick:e,children:[g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("h4",{className:"font-bold text-accent truncate",title:t.name,children:t.name}),g.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-1",children:[g.jsx("span",{className:"truncate",title:t.castingTime,children:t.castingTime}),g.jsx("span",{className:"opacity-50",children:"|"}),g.jsx("span",{className:"truncate",title:t.range,children:t.range})]})]}),g.jsx("div",{className:"flex items-center gap-2 pl-2 flex-shrink-0",children:g.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:t.school})})]}),n&&g.jsxs("div",{className:"mt-2 pt-3 border-t border-border/50 space-y-2 text-sm p-3 bg-muted/30",children:[g.jsxs("p",{children:[g.jsx("strong",{className:"text-muted-foreground",children:"Components:"})," ",t.components]}),g.jsxs("p",{children:[g.jsx("strong",{className:"text-muted-foreground",children:"Duration:"})," ",t.duration]}),g.jsx("p",{className:"text-foreground mt-2 whitespace-pre-wrap",children:t.description})]})]}),OW=()=>{const{character:t}=mr(),[e,n]=K.useState({}),[r,i]=K.useState(""),s=c=>{n(f=>({...f,[c]:!f[c]}))},a=K.useMemo(()=>t?t.spells.filter(f=>f.name.toLowerCase().includes(r.toLowerCase())).reduce((f,h)=>(f[h.level]=[...f[h.level]||[],h],f[h.level].sort((m,p)=>m.name.localeCompare(p.name)),f),{}):{},[t,r]),l=Object.keys(a).map(Number).sort((c,f)=>c-f);return t?g.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col h-auto max-h-[calc(100vh-10rem)]",children:[g.jsx("div",{className:"flex justify-between items-center mb-2",children:g.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Spellbook"})}),g.jsx("div",{className:"mb-4",children:g.jsx("input",{type:"text",placeholder:"Search spells...",value:r,onChange:c=>i(c.target.value),className:"w-full bg-input p-2 rounded-md border border-border text-sm focus:ring-ring focus:border-accent"})}),g.jsx("div",{className:"space-y-6 overflow-y-auto pr-2 -mr-2 flex-grow",children:t.spells.length===0?g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"This character knows no spells."})}):l.length===0?g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"No spells match your search."})}):l.map(c=>g.jsxs("div",{children:[g.jsx("h4",{className:"text-xl font-serif text-foreground border-b border-border pb-1 mb-3",children:c===0?"Cantrips":`Level ${c}`}),g.jsx("div",{className:"space-y-3",children:a[c].map(f=>g.jsx(DW,{spell:f,isExpanded:!!e[f.id],onToggleExpand:()=>s(f.id)},f.id))})]},c))})]}):null},MW=({label:t,isActive:e,onClick:n,id:r,controls:i})=>g.jsx("button",{id:r,role:"tab","aria-selected":e,"aria-controls":i,onClick:n,className:`px-4 py-2 text-sm sm:text-base font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-card text-accent border-b-2 border-accent":"text-muted-foreground hover:bg-muted border-b-2 border-transparent"}`,children:t}),PD=t=>{if(!t||typeof t!="string")return{total:0,pretty:"Invalid input"};const e=t.replace(/[\s()]/g,"").split("+");let n=0;const r=[],i=/(\d+)d(\d+)/i;for(const s of e){if(!s)continue;const a=s.match(i);if(a){const l=parseInt(a[1],10),c=parseInt(a[2],10);if(isNaN(l)||isNaN(c))continue;const f=Array.from({length:l},()=>Math.floor(Math.random()*c)+1),h=f.reduce((m,p)=>m+p,0);n+=h,r.push(`[${f.join("+")}]`)}else{const l=parseInt(s,10);isNaN(l)||(n+=l,r.push(String(l)))}}return r.length===0?{total:0,pretty:"Invalid Format"}:{total:n,pretty:`${r.join(" + ")} = ${n}`}},jW=()=>{const[t,e]=K.useState(null),{character:n,updateCharacter:r}=mr(),i=Xs(n.abilityScores.constitution),s=K.useMemo(()=>{const c=Xs(n.abilityScores.wisdom),f=n.skills.find(m=>m.name==="Perception");let h=0;return f&&(f.expertise?h=n.proficiencyBonus*2:f.proficient&&(h=n.proficiencyBonus)),10+c+h},[n]),a=()=>{if(n.hitDice.used>=n.level)return;const{total:c,pretty:f}=PD(`${n.hitDice.total}+${i}`),h=Math.min(n.hp.max,n.hp.current+Math.max(1,c));e(`${f} HP`),r({hp:{...n.hp,current:h},hitDice:{...n.hitDice,used:n.hitDice.used+1}})},l=()=>{r({hitDice:{...n.hitDice,used:0}}),e(null)};return g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"md:col-span-2 lg:col-span-3 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:[g.jsx(ws,{label:"Armor Class",value:K.useMemo(()=>iD(n),[n])}),g.jsx(ws,{label:"Initiative",value:si(n.initiative)}),g.jsx(ws,{label:"Speed",value:`${n.speed}ft`,subValue:`≈ ${Math.round(n.speed*.3)}m`}),g.jsx(ws,{label:"Proficiency",value:si(n.proficiencyBonus)}),g.jsx(ws,{label:"Passive Perception",value:s,className:"col-span-2 sm:col-span-1"})]}),g.jsx(BW,{}),g.jsx(FW,{}),g.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:"Hit Dice"}),g.jsxs("p",{className:"text-center text-3xl font-bold font-mono text-foreground mb-3",children:[n.level-n.hitDice.used," / ",n.level]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:a,disabled:n.hitDice.used>=n.level,className:"w-full bg-primary/80 hover:bg-primary text-primary-foreground font-bold py-2 px-4 rounded-md transition-colors disabled:bg-muted disabled:text-muted-foreground disabled:cursor-not-allowed",children:["Spend (",n.hitDice.total,")"]}),g.jsx("button",{onClick:l,className:"bg-secondary/80 hover:bg-secondary text-secondary-foreground font-bold py-2 px-4 rounded-md transition-colors",children:"Reset"})]}),t&&g.jsx("p",{className:"text-center text-accent font-mono mt-3 p-2 bg-muted/50 rounded-md",children:t})]}),g.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:"Languages"}),g.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:n.languages||"None"})]})]})},kW=()=>{const{character:t}=mr();return g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[g.jsx(HW,{items:t.attacks||[]}),g.jsx(qW,{title:"Features & Traits",items:t.featuresAndTraits||[]})]})},PW=()=>{const{character:t,updateCharacter:e}=mr(),n=t.spellcastingAbility,r=n?Xs(t.abilityScores[n]):0,i=n?8+t.proficiencyBonus+r:"-",s=n?t.proficiencyBonus+r:0;return g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[g.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3 text-center",children:"Spellcasting"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsx(ws,{label:"Save DC",value:i}),g.jsx(ws,{label:"Attack Bonus",value:si(s)}),g.jsxs("div",{className:"col-span-2 text-center",children:[g.jsx("p",{className:"text-xs uppercase tracking-wider text-muted-foreground",children:"Ability"}),g.jsx("p",{className:"text-xl font-bold text-foreground capitalize",children:n||"None"})]})]})]}),g.jsx(FS,{title:"Spell Slots",slots:t.spellSlots,onSlotChange:a=>e({spellSlots:a})}),t.customResources&&t.customResources.length>0&&g.jsx(FS,{title:"Other Resources",slots:t.customResources,onSlotChange:a=>e({customResources:a}),isCustom:!0})]}),g.jsx("div",{className:"lg:col-span-2",children:g.jsx(OW,{})})]})},LW=()=>{const{character:t,updateCharacter:e}=mr(),[n,r]=K.useState(null),i=f=>{const h=t.equipment.find(y=>y.id===f);if(!h)return;const m=!h.equipped,p=t.equipment.map(y=>{if(y.id===f)return{...y,equipped:m};if(m){const T=h.armorType&&h.armorType!=="shield",N=y.equipped&&y.armorType&&y.armorType!=="shield";if(T&&N)return{...y,equipped:!1};if(h.armorType==="shield"&&y.equipped&&y.armorType==="shield")return{...y,equipped:!1}}return y});e({equipment:p})},s=f=>{r(h=>h===f?null:f)},{equippableItems:a,backpackItems:l}=K.useMemo(()=>{const f=[],h=[];return(t.equipment||[]).forEach(m=>{m.armorType?f.push(m):h.push(m)}),{equippableItems:f.sort((m,p)=>m.name.localeCompare(p.name)),backpackItems:h.sort((m,p)=>m.name.localeCompare(p.name))}},[t.equipment]),c=({title:f,items:h})=>g.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:f}),h.length===0?g.jsx("p",{className:"text-muted-foreground text-sm text-center py-4",children:"None."}):g.jsx("div",{className:"space-y-2",children:h.map(m=>g.jsxs("div",{className:"bg-card/50 rounded-lg text-sm",children:[g.jsxs("div",{className:"p-3 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[g.jsx("button",{onClick:()=>s(m.id),className:"flex-shrink-0 text-muted-foreground hover:text-foreground",children:g.jsx(ChevronDownIcon,{className:`w-5 h-5 transition-transform ${n===m.id?"rotate-180":""}`})}),g.jsxs("p",{className:"font-semibold text-accent truncate",title:m.name,children:[m.name," ",g.jsxs("span",{className:"text-xs text-muted-foreground",children:["(x",m.quantity,")"]})]})]}),m.armorType&&g.jsx("button",{onClick:()=>i(m.id),className:`px-3 py-1 text-xs font-bold rounded ${m.equipped?"bg-primary text-primary-foreground":"bg-secondary hover:bg-secondary/80"}`,children:m.equipped?"Equipped":"Equip"})]}),n===m.id&&g.jsxs("div",{className:"p-3 border-t border-border/50 bg-muted/30 space-y-2",children:[m.armorType&&g.jsxs("p",{children:[g.jsxs("strong",{className:"text-muted-foreground capitalize",children:[m.armorType," Armor"]}),m.armorClass?g.jsxs("span",{className:"text-foreground",children:[" (AC: ",m.armorClass,")"]}):""]}),g.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:m.description||"No description."})]})]},m.id))})]});return g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[g.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:"Currency"}),g.jsx("div",{className:"grid grid-cols-3 gap-2 text-center",children:Object.keys(t.currency).map(f=>g.jsxs("div",{children:[g.jsx("p",{className:"text-xl font-mono text-foreground",children:t.currency[f]}),g.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:f})]},f))})]}),g.jsx(c,{title:"Equippable Gear",items:a})]}),g.jsx("div",{className:"lg:col-span-2",children:g.jsx(c,{title:"Backpack",items:l})})]})},UW=()=>{const{character:t}=mr(),e=({title:n,content:r})=>g.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex-grow",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent mb-2",children:n}),g.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:r||"Not set."})]});return g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"space-y-6 flex flex-col",children:[g.jsx(e,{title:"Personality Traits",content:t.personalityTraits}),g.jsx(e,{title:"Ideals",content:t.ideals}),g.jsx(e,{title:"Bonds",content:t.bonds}),g.jsx(e,{title:"Flaws",content:t.flaws})]}),g.jsxs("div",{className:"space-y-6 flex flex-col",children:[g.jsx(e,{title:"Character Notes",content:t.notes}),g.jsx(e,{title:"Campaign Info",content:t.dmNotes})]})]})},VW=[{key:"main",label:"Main"},{key:"abilities",label:"Abilities"},{key:"combat",label:"Combat"},{key:"spells",label:"Spells"},{key:"inventory",label:"Inventory"},{key:"info",label:"Info"},{key:"companions",label:"Companions"}],zW=()=>{const{characterId:t}=tI(),e=nh(),{character:n,setCharacter:r,updateCharacter:i}=mr(),[s,a]=K.useState("main"),l=K.useRef(!0);return K.useEffect(()=>{if(!t)return;(async()=>{const f=await aD(t);r(f)})()},[t,r]),K.useEffect(()=>{if(l.current){l.current=!1;return}if(n){const c=setTimeout(()=>{oD(n)},1500);return()=>{clearTimeout(c)}}},[n]),n?g.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:pt-8",children:[g.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-6 border-b border-border pb-4",children:[g.jsxs("button",{onClick:()=>e("/"),className:"flex items-center gap-2 rounded-md px-3 py-2 font-semibold text-muted-foreground transition-all duration-200 hover:scale-105 hover:text-accent [text-shadow:0_1px_2px_rgba(0,0,0,0.3)]","aria-label":"Back to character list",children:[g.jsx(cD,{className:"w-5 h-5"}),g.jsx("span",{className:"hidden sm:inline",children:"Back to List"}),g.jsx("span",{className:"sm:hidden",children:"Back"})]}),g.jsxs("div",{className:"flex items-center gap-4 text-center order-first sm:order-none",children:[n.imageUrl&&g.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border-2 border-border shadow-md"}),g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl sm:text-3xl font-cinzel text-accent",children:n.name}),g.jsxs("p",{className:"text-muted-foreground capitalize text-sm",children:[n.race," ",n.class," ",n.subclass&&`(${n.subclass})`," • Level ",n.level," • ",n.alignment]})]})]}),g.jsxs("button",{onClick:()=>e(`/character/${t}/edit`),className:"flex items-center gap-2 rounded-md px-3 py-2 font-bold text-primary transition-all duration-200 hover:scale-105 hover:text-accent [text-shadow:0_1px_2px_rgba(0,0,0,0.3)]","aria-label":"Edit character sheet",children:[g.jsx(al,{className:"w-5 h-5"}),g.jsx("span",{className:"hidden sm:inline",children:"Edit Sheet"}),g.jsx("span",{className:"sm:hidden",children:"Edit"})]})]}),g.jsx("div",{role:"tablist","aria-label":"Character View Sections",className:"flex space-x-1 mb-6 border-b border-border overflow-x-auto",children:VW.map(c=>g.jsx(MW,{id:`play-tab-${c.key}`,controls:`play-panel-${c.key}`,label:c.label,isActive:s===c.key,onClick:()=>a(c.key)},c.key))}),g.jsxs("div",{className:"bg-muted/50 p-4 sm:p-6 rounded-b-lg rounded-tr-lg",children:[g.jsx("div",{id:"play-panel-main",role:"tabpanel","aria-labelledby":"play-tab-main",style:{display:s==="main"?"block":"none"},children:g.jsx(jW,{})}),g.jsx("div",{id:"play-panel-abilities",role:"tabpanel","aria-labelledby":"play-tab-abilities",style:{display:s==="abilities"?"block":"none"},children:g.jsx(IW,{})}),g.jsx("div",{id:"play-panel-combat",role:"tabpanel","aria-labelledby":"play-tab-combat",style:{display:s==="combat"?"block":"none"},children:g.jsx(kW,{})}),g.jsx("div",{id:"play-panel-spells",role:"tabpanel","aria-labelledby":"play-tab-spells",style:{display:s==="spells"?"block":"none"},children:g.jsx(PW,{})}),g.jsx("div",{id:"play-panel-inventory",role:"tabpanel","aria-labelledby":"play-tab-inventory",style:{display:s==="inventory"?"block":"none"},children:g.jsx(LW,{})}),g.jsx("div",{id:"play-panel-info",role:"tabpanel","aria-labelledby":"play-tab-info",style:{display:s==="info"?"block":"none"},children:g.jsx(UW,{})})]}),g.jsx("div",{hidden:s!=="companions",children:g.jsx(kD,{readOnly:!0})})]}):g.jsx("div",{className:"flex justify-center items-center h-screen",children:g.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-accent"})})},BW=()=>{const{character:t,updateCharacter:e}=mr(),{hp:n}=t,[r,i]=K.useState(""),[s,a]=K.useState(""),[l,c]=K.useState(""),f=()=>{const p=parseInt(r,10);if(!isNaN(p)&&p>0){const y=Math.min(p,n.temporary),T=n.temporary-y,N=p-y,j=Math.max(0,n.current-N);e({hp:{...n,current:j,temporary:T}}),i("")}},h=()=>{const p=parseInt(s,10);if(!isNaN(p)&&p>0){const y=Math.min(n.max,n.current+p);e({hp:{...n,current:y}}),a("")}},m=()=>{const p=parseInt(l,10);!isNaN(p)&&p>=0&&(e({hp:{...n,temporary:p}}),c(""))};return g.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3 text-center",children:"Hit Points"}),g.jsxs("div",{className:"text-center mb-4",children:[g.jsx("span",{className:"text-5xl font-bold text-destructive",children:n.current}),n.temporary>0&&g.jsxs("span",{className:"text-3xl font-bold text-accent",title:"Temporary HP",children:[" +",n.temporary]}),g.jsxs("span",{className:"text-2xl text-muted-foreground",children:[" / ",n.max]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[g.jsxs("div",{className:"flex flex-col",children:[g.jsx("input",{type:"number",value:r,onChange:p=>i(p.target.value),onKeyDown:p=>p.key==="Enter"&&f(),placeholder:"Damage",className:"bg-input text-center rounded-md p-2 border border-border focus:ring-destructive focus:border-destructive"}),g.jsx("button",{onClick:f,className:"bg-destructive/80 hover:bg-destructive text-destructive-foreground font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Apply"})]}),g.jsxs("div",{className:"flex flex-col",children:[g.jsx("input",{type:"number",value:s,onChange:p=>a(p.target.value),onKeyDown:p=>p.key==="Enter"&&h(),placeholder:"Healing",className:"bg-input text-center rounded-md p-2 border border-border focus:ring-primary focus:border-primary"}),g.jsx("button",{onClick:h,className:"bg-primary/80 hover:bg-primary text-primary-foreground font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Apply"})]})]}),g.jsxs("div",{className:"flex flex-col",children:[g.jsx("input",{type:"number",value:l,onChange:p=>c(p.target.value),onKeyDown:p=>p.key==="Enter"&&m(),placeholder:"Set/Replace Temp HP",className:"bg-input text-center rounded-md p-2 border border-border focus:ring-accent focus:border-accent"}),g.jsx("button",{onClick:m,className:"bg-accent/80 hover:bg-accent text-accent-foreground font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Set Temp HP"})]})]})},FS=({title:t,slots:e,onSlotChange:n,isCustom:r})=>{const i=(l,c)=>{if(r){const f=e,h=f.findIndex(T=>T.id===l);if(h===-1)return;const m=f[h],p=c<m.used?c:c+1,y=[...f];y[h]={...m,used:p},n(y)}else{const f=e,h=f[l],m=c<h.used?c:c+1;n({...f,[l]:{...h,used:m}})}},s=r?e:Object.entries(e),a=s.some(l=>r?l.max>0:l[1].max>0);return g.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:t}),!a&&g.jsx("p",{className:"text-muted-foreground text-sm text-center",children:"No resources available."}),g.jsx("div",{className:"space-y-3",children:s.map(l=>{const[c,f]=r?[l.id,l]:l,h=r?f.name:`Lvl ${c}`;return f.max===0?null:g.jsxs("div",{className:"flex items-center",children:[g.jsxs("span",{className:"font-bold text-muted-foreground w-24 truncate",title:h,children:[h,":"]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:f.max}).map((m,p)=>g.jsx("button",{onClick:()=>i(c,p),className:`w-5 h-5 rounded-md border-2 transition-colors ${p<f.used?"bg-primary border-primary/80":"bg-muted border-border hover:border-accent"}`,"aria-label":`Slot ${p+1} for ${h}. ${p<f.used?"Used":"Available"}`},p))})]},c)})})]})},FW=()=>{const{character:t,updateCharacter:e}=mr(),{deathSaves:n}=t,r=(i,s)=>{const a=n[i],l=s<a?s:s+1;e({deathSaves:{...n,[i]:l}})};return g.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:"Death Saves"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"font-semibold text-foreground",children:"Successes"}),g.jsx("div",{className:"flex gap-2",children:Array.from({length:3}).map((i,s)=>g.jsx("input",{type:"checkbox",checked:s<n.successes,onChange:()=>r("successes",s),className:"w-5 h-5 rounded-full text-primary bg-input border-border focus:ring-primary"},s))})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"font-semibold text-foreground",children:"Failures"}),g.jsx("div",{className:"flex gap-2",children:Array.from({length:3}).map((i,s)=>g.jsx("input",{type:"checkbox",checked:s<n.failures,onChange:()=>r("failures",s),className:"w-5 h-5 rounded-full text-destructive bg-input border-border focus:ring-destructive"},s))})]})]})]})},HW=({items:t})=>{const[e,n]=K.useState({}),r=s=>{const a=parseInt(s.bonus)||0,l=Math.floor(Math.random()*20)+1,c=l+a,f=`${l} ${a>=0?"+":"-"} ${Math.abs(a)} = ${c}`;n(h=>({...h,[s.id]:{...h[s.id],atk:f}}))},i=s=>{const{pretty:a}=PD(s.damage);n(l=>({...l,[s.id]:{...l[s.id],dmg:a}}))};return g.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col h-full",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:"Attacks & Cantrips"}),g.jsxs("div",{className:"space-y-3 flex-grow overflow-y-auto pr-2 -mr-2 max-h-[calc(50vh-5rem)]",children:[t.length===0&&g.jsx("p",{className:"text-muted-foreground text-sm text-center py-4",children:"None."}),t.map(s=>{var a,l;return g.jsxs("div",{className:"bg-card/50 rounded-lg text-sm p-3 space-y-2",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsx("span",{className:"font-semibold text-accent text-base",children:s.name}),g.jsxs("div",{className:"flex gap-4 font-mono text-foreground text-right",children:[g.jsx("span",{title:"Attack Bonus",children:s.bonus}),g.jsx("span",{title:"Damage",children:s.damage})]})]}),g.jsxs("div",{className:"flex justify-end items-center gap-2",children:[g.jsx("button",{onClick:()=>r(s),className:"text-xs bg-secondary hover:bg-secondary/80 rounded px-3 py-1.5 transition-colors font-bold",children:"ATK"}),g.jsx("button",{onClick:()=>i(s),className:"text-xs bg-destructive/80 hover:bg-destructive rounded px-3 py-1.5 transition-colors font-bold",children:"DMG"})]}),(((a=e[s.id])==null?void 0:a.atk)||((l=e[s.id])==null?void 0:l.dmg))&&g.jsxs("div",{className:"text-xs text-foreground bg-muted/50 p-2 rounded-md border-l-2 border-accent space-y-1",children:[e[s.id].atk&&g.jsxs("div",{children:[g.jsx("strong",{children:"Attack:"})," ",g.jsx("span",{className:"font-mono text-accent",children:e[s.id].atk})]}),e[s.id].dmg&&g.jsxs("div",{children:[g.jsx("strong",{children:"Damage:"})," ",g.jsx("span",{className:"font-mono text-destructive",children:e[s.id].dmg})]})]})]},s.id)})]})]})},qW=({title:t,items:e})=>{const[n,r]=K.useState({});return g.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col h-full",children:[g.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:t}),g.jsxs("div",{className:"space-y-2 flex-grow overflow-y-auto pr-2 -mr-2 max-h-[calc(50vh-5rem)]",children:[e.length===0&&g.jsx("p",{className:"text-muted-foreground text-sm text-center py-4",children:"None."}),e.map(i=>g.jsxs("div",{className:"bg-card/50 rounded-lg text-sm",children:[g.jsx("div",{className:"flex items-center justify-between p-3 cursor-pointer w-full text-left",onClick:()=>i.description&&r(s=>({...s,[i.id]:!s[i.id]})),children:g.jsx("span",{className:"font-semibold text-accent",children:i.name})}),n[i.id]&&i.description&&g.jsx("div",{className:"p-3 border-t border-border/50 bg-muted/30",children:g.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:i.description})})]},i.id))]})]})},GW=()=>{const{currentUser:t,signInWithGoogle:e}=pu(),n=nh();K.useEffect(()=>{t&&n("/")},[t,n]);const r=async()=>{try{await e(),n("/")}catch(i){console.error("Error during sign-in:",i)}};return g.jsx("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-100px)] p-4 text-center",children:g.jsxs("div",{className:"bg-card p-8 rounded-lg shadow-lg max-w-md w-full border border-border",children:[g.jsx("h1",{className:"text-3xl font-cinzel text-accent mb-4",children:"Join the Adventure"}),g.jsx("p",{className:"text-muted-foreground mb-8",children:"Sign in with Google to sync your characters across devices."}),g.jsxs("button",{onClick:r,className:"flex items-center justify-center gap-3 w-full px-6 py-3 bg-white text-zinc-700 font-bold rounded-lg shadow-md hover:bg-zinc-200 transition-colors",children:[g.jsx(_$,{className:"w-6 h-6"}),"Sign In with Google"]})]})})},$W=()=>{const{currentUser:t}=pu(),e=nh(),[n,r]=K.useState(""),[i,s]=K.useState(null),[a,l]=K.useState(null),[c,f]=K.useState(!1),[h,m]=K.useState("");K.useEffect(()=>{t?(r(t.displayName||""),l(t.photoURL||null)):e("/login")},[t,e]);const p=async T=>{if(T.target.files&&T.target.files[0]){const N=T.target.files[0];s(N),l(URL.createObjectURL(N))}},y=async()=>{if(t){f(!0),m("");try{let T=t.photoURL;if(i){const N=await vr(i,{maxSizeMB:.5,maxWidthOrHeight:512,useWebWorker:!0}),j=$3(),A=Gx(j,`users/${t.uid}/profile.jpg`);await PG(A,N),T=await qx(A)}await Q7(t,{displayName:n,photoURL:T}),alert("Profile updated successfully!"),s(null)}catch(T){console.error("Error updating profile:",T),m("Failed to update profile. Please try again.")}finally{f(!1)}}};return t?g.jsx("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-100px)] p-4 text-center",children:g.jsxs("div",{className:"bg-card p-8 rounded-lg shadow-lg max-w-md w-full border border-border",children:[g.jsxs("h1",{className:"text-3xl font-cinzel text-accent mb-4",children:["Welcome, ",t.displayName||"Adventurer"]}),g.jsx("p",{className:"text-muted-foreground mb-8",children:"Manage your account details below."}),g.jsxs("div",{className:"flex flex-col space-y-4 w-full",children:[g.jsxs("div",{className:"flex flex-col items-center gap-4 mb-4",children:[g.jsxs("label",{htmlFor:"profile-image-upload",className:"cursor-pointer group relative",children:[g.jsx("img",{src:a||`https://api.dicebear.com/8.x/lorelei/svg?seed=${t.uid}`,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-2 border-accent/50 group-hover:opacity-75 transition-opacity"}),g.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx("span",{className:"text-white text-sm",children:"Change"})})]}),g.jsx("input",{id:"profile-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:p})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"nickname",className:"block text-sm font-medium text-muted-foreground text-left mb-1",children:"Nickname"}),g.jsx("input",{id:"nickname",type:"text",value:n,onChange:T=>r(T.target.value),placeholder:"Enter your nickname",className:"mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent sm:text-sm"})]}),g.jsx("button",{onClick:y,disabled:c,className:"px-6 py-3 bg-primary text-primary-foreground font-bold rounded-lg shadow-md hover:bg-primary/90 transition-colors disabled:bg-muted disabled:text-muted-foreground",children:c?"Saving...":"Save Profile"}),h&&g.jsx("p",{className:"text-destructive text-sm",children:h})]})]})}):null};function YW(){const t=sI();if(Vc(t))return g.jsxs("div",{className:"text-center p-8",children:[g.jsxs("h1",{className:"text-2xl font-bold text-red-500",children:[t.status," ",t.statusText]}),g.jsx("p",{className:"text-zinc-400",children:t.data})]});const e=t instanceof Error?t.message:"Unknown error";return g.jsxs("div",{className:"text-center p-8",children:[g.jsx("h1",{className:"text-2xl font-bold text-red-500",children:"Something went wrong"}),g.jsx("p",{className:"text-zinc-400",children:e})]})}function WW(){return g.jsxs("div",{className:"text-center p-8",children:[g.jsx("h1",{className:"text-2xl font-bold text-red-500",children:"404 Not Found"}),g.jsx("p",{className:"text-zinc-400",children:"The page you are looking for does not exist."})]})}const XW=()=>g.jsx(j$,{children:g.jsx(aI,{})}),KW=y8([{path:"/",element:g.jsx(M$,{}),errorElement:g.jsx(YW,{}),children:[{element:g.jsx(XW,{}),children:[{index:!0,element:g.jsx(P$,{})},{path:"character/new",element:g.jsx(BS,{})},{path:"character/:characterId/edit",element:g.jsx(BS,{})},{path:"character/:characterId",element:g.jsx(zW,{})}]},{path:"login",element:g.jsx(GW,{})},{path:"account",element:g.jsx($W,{})},{path:"*",element:g.jsx(WW,{})}]}]),LD=document.getElementById("root");if(!LD)throw new Error("Could not find root element to mount to");r9.createRoot(LD).render(g.jsx(Ku.StrictMode,{children:g.jsx(c$,{children:g.jsx(l$,{children:g.jsx(R8,{router:KW})})})}));
