(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Rv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Nv={exports:{}},Vc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y2=Symbol.for("react.transitional.element"),v2=Symbol.for("react.fragment");function Cv(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:y2,type:t,key:i,ref:e!==void 0?e:null,props:n}}Vc.Fragment=v2;Vc.jsx=Cv;Vc.jsxs=Cv;Nv.exports=Vc;var p=Nv.exports,Iv={exports:{}},ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xd=Symbol.for("react.transitional.element"),_2=Symbol.for("react.portal"),b2=Symbol.for("react.fragment"),T2=Symbol.for("react.strict_mode"),E2=Symbol.for("react.profiler"),A2=Symbol.for("react.consumer"),x2=Symbol.for("react.context"),w2=Symbol.for("react.forward_ref"),S2=Symbol.for("react.suspense"),R2=Symbol.for("react.memo"),Dv=Symbol.for("react.lazy"),wg=Symbol.iterator;function N2(t){return t===null||typeof t!="object"?null:(t=wg&&t[wg]||t["@@iterator"],typeof t=="function"?t:null)}var Ov={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mv=Object.assign,Vv={};function Aa(t,e,n){this.props=t,this.context=e,this.refs=Vv,this.updater=n||Ov}Aa.prototype.isReactComponent={};Aa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Aa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function kv(){}kv.prototype=Aa.prototype;function Zd(t,e,n){this.props=t,this.context=e,this.refs=Vv,this.updater=n||Ov}var Jd=Zd.prototype=new kv;Jd.constructor=Zd;Mv(Jd,Aa.prototype);Jd.isPureReactComponent=!0;var Sg=Array.isArray,Ge={H:null,A:null,T:null,S:null,V:null},jv=Object.prototype.hasOwnProperty;function Wd(t,e,n,i,r,s){return n=s.ref,{$$typeof:Xd,type:t,key:e,ref:n!==void 0?n:null,props:s}}function C2(t,e){return Wd(t.type,e,void 0,void 0,void 0,t.props)}function em(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xd}function I2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rg=/\/+/g;function Nh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?I2(""+t.key):e.toString(36)}function Ng(){}function D2(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Ng,Ng):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Ss(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Xd:case _2:a=!0;break;case Dv:return a=t._init,Ss(a(t._payload),e,n,i,r)}}if(a)return r=r(t),a=i===""?"."+Nh(t,0):i,Sg(r)?(n="",a!=null&&(n=a.replace(Rg,"$&/")+"/"),Ss(r,e,n,"",function(h){return h})):r!=null&&(em(r)&&(r=C2(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(Rg,"$&/")+"/")+a)),e.push(r)),1;a=0;var l=i===""?".":i+":";if(Sg(t))for(var u=0;u<t.length;u++)i=t[u],s=l+Nh(i,u),a+=Ss(i,e,n,s,r);else if(u=N2(t),typeof u=="function")for(t=u.call(t),u=0;!(i=t.next()).done;)i=i.value,s=l+Nh(i,u++),a+=Ss(i,e,n,s,r);else if(s==="object"){if(typeof t.then=="function")return Ss(D2(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Bo(t,e,n){if(t==null)return t;var i=[],r=0;return Ss(t,i,"","",function(s){return e.call(n,s,r++)}),i}function O2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Cg=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function M2(){}ue.Children={map:Bo,forEach:function(t,e,n){Bo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bo(t,function(){e++}),e},toArray:function(t){return Bo(t,function(e){return e})||[]},only:function(t){if(!em(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Aa;ue.Fragment=b2;ue.Profiler=E2;ue.PureComponent=Zd;ue.StrictMode=T2;ue.Suspense=S2;ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ge;ue.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ge.H.useMemoCache(t)}};ue.cache=function(t){return function(){return t.apply(null,arguments)}};ue.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=Mv({},t.props),r=t.key,s=void 0;if(e!=null)for(a in e.ref!==void 0&&(s=void 0),e.key!==void 0&&(r=""+e.key),e)!jv.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(i[a]=e[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return Wd(t.type,r,void 0,void 0,s,i)};ue.createContext=function(t){return t={$$typeof:x2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:A2,_context:t},t};ue.createElement=function(t,e,n){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)jv.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return Wd(t,s,void 0,void 0,null,r)};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:w2,render:t}};ue.isValidElement=em;ue.lazy=function(t){return{$$typeof:Dv,_payload:{_status:-1,_result:t},_init:O2}};ue.memo=function(t,e){return{$$typeof:R2,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=Ge.T,n={};Ge.T=n;try{var i=t(),r=Ge.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(M2,Cg)}catch(s){Cg(s)}finally{Ge.T=e}};ue.unstable_useCacheRefresh=function(){return Ge.H.useCacheRefresh()};ue.use=function(t){return Ge.H.use(t)};ue.useActionState=function(t,e,n){return Ge.H.useActionState(t,e,n)};ue.useCallback=function(t,e){return Ge.H.useCallback(t,e)};ue.useContext=function(t){return Ge.H.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t,e){return Ge.H.useDeferredValue(t,e)};ue.useEffect=function(t,e,n){var i=Ge.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(t,e)};ue.useId=function(){return Ge.H.useId()};ue.useImperativeHandle=function(t,e,n){return Ge.H.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Ge.H.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Ge.H.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Ge.H.useMemo(t,e)};ue.useOptimistic=function(t,e){return Ge.H.useOptimistic(t,e)};ue.useReducer=function(t,e,n){return Ge.H.useReducer(t,e,n)};ue.useRef=function(t){return Ge.H.useRef(t)};ue.useState=function(t){return Ge.H.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Ge.H.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Ge.H.useTransition()};ue.version="19.1.0";Iv.exports=ue;var ne=Iv.exports;const V2=Rv(ne);var Uv={exports:{}},kc={},zv={exports:{}},Pv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,C){var q=I.length;I.push(C);e:for(;0<q;){var P=q-1>>>1,G=I[P];if(0<r(G,C))I[P]=C,I[q]=G,q=P;else break e}}function n(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var C=I[0],q=I.pop();if(q!==C){I[0]=q;e:for(var P=0,G=I.length,W=G>>>1;P<W;){var z=2*(P+1)-1,Y=I[z],F=z+1,H=I[F];if(0>r(Y,q))F<G&&0>r(H,Y)?(I[P]=H,I[F]=q,P=F):(I[P]=Y,I[z]=q,P=z);else if(F<G&&0>r(H,q))I[P]=H,I[F]=q,P=F;else break e}}return C}function r(I,C){var q=I.sortIndex-C.sortIndex;return q!==0?q:I.id-C.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],c=1,d=null,f=3,g=!1,E=!1,O=!1,k=!1,b=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function M(I){for(var C=n(h);C!==null;){if(C.callback===null)i(h);else if(C.startTime<=I)i(h),C.sortIndex=C.expirationTime,e(u,C);else break;C=n(h)}}function j(I){if(O=!1,M(I),!E)if(n(u)!==null)E=!0,V||(V=!0,R());else{var C=n(h);C!==null&&B(j,C.startTime-I)}}var V=!1,w=-1,y=5,v=-1;function T(){return k?!0:!(t.unstable_now()-v<y)}function x(){if(k=!1,V){var I=t.unstable_now();v=I;var C=!0;try{e:{E=!1,O&&(O=!1,S(w),w=-1),g=!0;var q=f;try{t:{for(M(I),d=n(u);d!==null&&!(d.expirationTime>I&&T());){var P=d.callback;if(typeof P=="function"){d.callback=null,f=d.priorityLevel;var G=P(d.expirationTime<=I);if(I=t.unstable_now(),typeof G=="function"){d.callback=G,M(I),C=!0;break t}d===n(u)&&i(u),M(I)}else i(u);d=n(u)}if(d!==null)C=!0;else{var W=n(h);W!==null&&B(j,W.startTime-I),C=!1}}break e}finally{d=null,f=q,g=!1}C=void 0}}finally{C?R():V=!1}}}var R;if(typeof N=="function")R=function(){N(x)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,U=A.port2;A.port1.onmessage=x,R=function(){U.postMessage(null)}}else R=function(){b(x,0)};function B(I,C){w=b(function(){I(t.unstable_now())},C)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(I){switch(f){case 1:case 2:case 3:var C=3;break;default:C=f}var q=f;f=C;try{return I()}finally{f=q}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(I,C){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var q=f;f=I;try{return C()}finally{f=q}},t.unstable_scheduleCallback=function(I,C,q){var P=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?P+q:P):q=P,I){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=q+G,I={id:c++,callback:C,priorityLevel:I,startTime:q,expirationTime:G,sortIndex:-1},q>P?(I.sortIndex=q,e(h,I),n(u)===null&&I===n(h)&&(O?(S(w),w=-1):O=!0,B(j,q-P))):(I.sortIndex=G,e(u,I),E||g||(E=!0,V||(V=!0,R()))),I},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(I){var C=f;return function(){var q=f;f=C;try{return I.apply(this,arguments)}finally{f=q}}}})(Pv);zv.exports=Pv;var k2=zv.exports,Lv={exports:{}},Ht={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j2=ne;function Bv(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Fi(){}var qt={d:{f:Fi,r:function(){throw Error(Bv(522))},D:Fi,C:Fi,L:Fi,m:Fi,X:Fi,S:Fi,M:Fi},p:0,findDOMNode:null},U2=Symbol.for("react.portal");function z2(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U2,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var ul=j2.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function jc(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Ht.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=qt;Ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(Bv(299));return z2(t,e,null,n)};Ht.flushSync=function(t){var e=ul.T,n=qt.p;try{if(ul.T=null,qt.p=2,t)return t()}finally{ul.T=e,qt.p=n,qt.d.f()}};Ht.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,qt.d.C(t,e))};Ht.prefetchDNS=function(t){typeof t=="string"&&qt.d.D(t)};Ht.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=jc(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?qt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&qt.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Ht.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=jc(e.as,e.crossOrigin);qt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&qt.d.M(t)};Ht.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=jc(n,e.crossOrigin);qt.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Ht.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=jc(e.as,e.crossOrigin);qt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else qt.d.m(t)};Ht.requestFormReset=function(t){qt.d.r(t)};Ht.unstable_batchedUpdates=function(t,e){return t(e)};Ht.useFormState=function(t,e,n){return ul.H.useFormState(t,e,n)};Ht.useFormStatus=function(){return ul.H.useHostTransitionStatus()};Ht.version="19.1.0";function Fv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fv)}catch(t){console.error(t)}}Fv(),Lv.exports=Ht;var P2=Lv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yt=k2,qv=ne,L2=P2;function X(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Hv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Gv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ig(t){if(Jl(t)!==t)throw Error(X(188))}function B2(t){var e=t.alternate;if(!e){if(e=Jl(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Ig(r),t;if(s===i)return Ig(r),e;s=s.sibling}throw Error(X(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==i)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function Qv(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=Qv(t),e!==null)return e;t=t.sibling}return null}var Be=Object.assign,F2=Symbol.for("react.element"),Fo=Symbol.for("react.transitional.element"),tl=Symbol.for("react.portal"),Vs=Symbol.for("react.fragment"),Yv=Symbol.for("react.strict_mode"),Sf=Symbol.for("react.profiler"),q2=Symbol.for("react.provider"),$v=Symbol.for("react.consumer"),bi=Symbol.for("react.context"),tm=Symbol.for("react.forward_ref"),Rf=Symbol.for("react.suspense"),Nf=Symbol.for("react.suspense_list"),nm=Symbol.for("react.memo"),Qi=Symbol.for("react.lazy"),Cf=Symbol.for("react.activity"),H2=Symbol.for("react.memo_cache_sentinel"),Dg=Symbol.iterator;function Ya(t){return t===null||typeof t!="object"?null:(t=Dg&&t[Dg]||t["@@iterator"],typeof t=="function"?t:null)}var G2=Symbol.for("react.client.reference");function If(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===G2?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vs:return"Fragment";case Sf:return"Profiler";case Yv:return"StrictMode";case Rf:return"Suspense";case Nf:return"SuspenseList";case Cf:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case tl:return"Portal";case bi:return(t.displayName||"Context")+".Provider";case $v:return(t._context.displayName||"Context")+".Consumer";case tm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nm:return e=t.displayName||null,e!==null?e:If(t.type)||"Memo";case Qi:e=t._payload,t=t._init;try{return If(t(e))}catch{}}return null}var nl=Array.isArray,se=qv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae=L2.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Qr={pending:!1,data:null,method:null,action:null},Df=[],ks=-1;function oi(t){return{current:t}}function xt(t){0>ks||(t.current=Df[ks],Df[ks]=null,ks--)}function Qe(t,e){ks++,Df[ks]=t.current,t.current=e}var Jn=oi(null),Il=oi(null),ar=oi(null),Mu=oi(null);function Vu(t,e){switch(Qe(ar,e),Qe(Il,t),Qe(Jn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?j0(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=j0(e),t=hb(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}xt(Jn),Qe(Jn,t)}function sa(){xt(Jn),xt(Il),xt(ar)}function Of(t){t.memoizedState!==null&&Qe(Mu,t);var e=Jn.current,n=hb(e,t.type);e!==n&&(Qe(Il,t),Qe(Jn,n))}function ku(t){Il.current===t&&(xt(Jn),xt(Il)),Mu.current===t&&(xt(Mu),Ll._currentValue=Qr)}var Mf=Object.prototype.hasOwnProperty,im=yt.unstable_scheduleCallback,Ch=yt.unstable_cancelCallback,Q2=yt.unstable_shouldYield,Y2=yt.unstable_requestPaint,Wn=yt.unstable_now,$2=yt.unstable_getCurrentPriorityLevel,Kv=yt.unstable_ImmediatePriority,Xv=yt.unstable_UserBlockingPriority,ju=yt.unstable_NormalPriority,K2=yt.unstable_LowPriority,Zv=yt.unstable_IdlePriority,X2=yt.log,Z2=yt.unstable_setDisableYieldValue,Wl=null,hn=null;function tr(t){if(typeof X2=="function"&&Z2(t),hn&&typeof hn.setStrictMode=="function")try{hn.setStrictMode(Wl,t)}catch{}}var fn=Math.clz32?Math.clz32:eA,J2=Math.log,W2=Math.LN2;function eA(t){return t>>>=0,t===0?32:31-(J2(t)/W2|0)|0}var qo=256,Ho=4194304;function zr(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Uc(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?r=zr(i):(a&=l,a!==0?r=zr(a):n||(n=l&~t,n!==0&&(r=zr(n))))):(l=i&~s,l!==0?r=zr(l):a!==0?r=zr(a):n||(n=i&~t,n!==0&&(r=zr(n)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:r}function eo(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function tA(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jv(){var t=qo;return qo<<=1,!(qo&4194048)&&(qo=256),t}function Wv(){var t=Ho;return Ho<<=1,!(Ho&62914560)&&(Ho=4194304),t}function Ih(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function to(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function nA(t,e,n,i,r,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,u=t.expirationTimes,h=t.hiddenUpdates;for(n=a&~n;0<n;){var c=31-fn(n),d=1<<c;l[c]=0,u[c]=-1;var f=h[c];if(f!==null)for(h[c]=null,c=0;c<f.length;c++){var g=f[c];g!==null&&(g.lane&=-536870913)}n&=~d}i!==0&&e_(t,i,0),s!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function e_(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-fn(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&4194090}function t_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-fn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function rm(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function sm(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function n_(){var t=Ae.p;return t!==0?t:(t=window.event,t===void 0?32:Tb(t.type))}function iA(t,e){var n=Ae.p;try{return Ae.p=t,e()}finally{Ae.p=n}}var Cr=Math.random().toString(36).slice(2),zt="__reactFiber$"+Cr,en="__reactProps$"+Cr,xa="__reactContainer$"+Cr,Vf="__reactEvents$"+Cr,rA="__reactListeners$"+Cr,sA="__reactHandles$"+Cr,Og="__reactResources$"+Cr,no="__reactMarker$"+Cr;function am(t){delete t[zt],delete t[en],delete t[Vf],delete t[rA],delete t[sA]}function js(t){var e=t[zt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xa]||n[zt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=P0(t);t!==null;){if(n=t[zt])return n;t=P0(t)}return e}t=n,n=t.parentNode}return null}function wa(t){if(t=t[zt]||t[xa]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function il(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(X(33))}function Ys(t){var e=t[Og];return e||(e=t[Og]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Et(t){t[no]=!0}var i_=new Set,r_={};function os(t,e){aa(t,e),aa(t+"Capture",e)}function aa(t,e){for(r_[t]=e,t=0;t<e.length;t++)i_.add(e[t])}var aA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mg={},Vg={};function lA(t){return Mf.call(Vg,t)?!0:Mf.call(Mg,t)?!1:aA.test(t)?Vg[t]=!0:(Mg[t]=!0,!1)}function cu(t,e,n){if(lA(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Go(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function mi(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}var Dh,kg;function Rs(t){if(Dh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Dh=e&&e[1]||"",kg=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Dh+t+kg}var Oh=!1;function Mh(t,e){if(!t||Oh)return"";Oh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(g){var f=g}Reflect.construct(t,[],d)}else{try{d.call()}catch(g){f=g}t.call(d.prototype)}}else{try{throw Error()}catch(g){f=g}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(g){if(g&&f&&typeof g.stack=="string")return[g.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var c=`
`+u[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=r);break}}}finally{Oh=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Rs(n):""}function oA(t){switch(t.tag){case 26:case 27:case 5:return Rs(t.type);case 16:return Rs("Lazy");case 13:return Rs("Suspense");case 19:return Rs("SuspenseList");case 0:case 15:return Mh(t.type,!1);case 11:return Mh(t.type.render,!1);case 1:return Mh(t.type,!0);case 31:return Rs("Activity");default:return""}}function jg(t){try{var e="";do e+=oA(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Tn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function s_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uA(t){var e=s_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Uu(t){t._valueTracker||(t._valueTracker=uA(t))}function a_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=s_(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function zu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var cA=/[\n"\\]/g;function xn(t){return t.replace(cA,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function kf(t,e,n,i,r,s,a,l){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Tn(e)):t.value!==""+Tn(e)&&(t.value=""+Tn(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?jf(t,a,Tn(e)):n!=null?jf(t,a,Tn(n)):i!=null&&t.removeAttribute("value"),r==null&&s!=null&&(t.defaultChecked=!!s),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+Tn(l):t.removeAttribute("name")}function l_(t,e,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null))return;n=n!=null?""+Tn(n):"",e=e!=null?""+Tn(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=l?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a)}function jf(t,e,n){e==="number"&&zu(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function $s(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Tn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function o_(t,e,n){if(e!=null&&(e=""+Tn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Tn(n):""}function u_(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(X(92));if(nl(i)){if(1<i.length)throw Error(X(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Tn(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i)}function la(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ug(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||hA.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function c_(t,e,n){if(e!=null&&typeof e!="object")throw Error(X(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&Ug(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&Ug(t,s,e[s])}function lm(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hu(t){return dA.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Uf=null;function om(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Us=null,Ks=null;function zg(t){var e=wa(t);if(e&&(t=e.stateNode)){var n=t[en]||null;e:switch(t=e.stateNode,e.type){case"input":if(kf(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+xn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[en]||null;if(!r)throw Error(X(90));kf(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&a_(i)}break e;case"textarea":o_(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&$s(t,!!n.multiple,e,!1)}}}var Vh=!1;function h_(t,e,n){if(Vh)return t(e,n);Vh=!0;try{var i=t(e);return i}finally{if(Vh=!1,(Us!==null||Ks!==null)&&(Yc(),Us&&(e=Us,t=Ks,Ks=Us=null,zg(e),t)))for(e=0;e<t.length;e++)zg(t[e])}}function Dl(t,e){var n=t.stateNode;if(n===null)return null;var i=n[en]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zf=!1;if(Ni)try{var $a={};Object.defineProperty($a,"passive",{get:function(){zf=!0}}),window.addEventListener("test",$a,$a),window.removeEventListener("test",$a,$a)}catch{zf=!1}var nr=null,um=null,fu=null;function f_(){if(fu)return fu;var t,e=um,n=e.length,i,r="value"in nr?nr.value:nr.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return fu=r.slice(t,1<i?1-i:void 0)}function du(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qo(){return!0}function Pg(){return!1}function tn(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Qo:Pg,this.isPropagationStopped=Pg,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),e}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zc=tn(us),io=Be({},us,{view:0,detail:0}),mA=tn(io),kh,jh,Ka,Pc=Be({},io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ka&&(Ka&&t.type==="mousemove"?(kh=t.screenX-Ka.screenX,jh=t.screenY-Ka.screenY):jh=kh=0,Ka=t),kh)},movementY:function(t){return"movementY"in t?t.movementY:jh}}),Lg=tn(Pc),pA=Be({},Pc,{dataTransfer:0}),gA=tn(pA),yA=Be({},io,{relatedTarget:0}),Uh=tn(yA),vA=Be({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),_A=tn(vA),bA=Be({},us,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),TA=tn(bA),EA=Be({},us,{data:0}),Bg=tn(EA),AA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wA[t])?!!e[t]:!1}function cm(){return SA}var RA=Be({},io,{key:function(t){if(t.key){var e=AA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=du(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cm,charCode:function(t){return t.type==="keypress"?du(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?du(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NA=tn(RA),CA=Be({},Pc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fg=tn(CA),IA=Be({},io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cm}),DA=tn(IA),OA=Be({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),MA=tn(OA),VA=Be({},Pc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kA=tn(VA),jA=Be({},us,{newState:0,oldState:0}),UA=tn(jA),zA=[9,13,27,32],hm=Ni&&"CompositionEvent"in window,cl=null;Ni&&"documentMode"in document&&(cl=document.documentMode);var PA=Ni&&"TextEvent"in window&&!cl,d_=Ni&&(!hm||cl&&8<cl&&11>=cl),qg=" ",Hg=!1;function m_(t,e){switch(t){case"keyup":return zA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zs=!1;function LA(t,e){switch(t){case"compositionend":return p_(e);case"keypress":return e.which!==32?null:(Hg=!0,qg);case"textInput":return t=e.data,t===qg&&Hg?null:t;default:return null}}function BA(t,e){if(zs)return t==="compositionend"||!hm&&m_(t,e)?(t=f_(),fu=um=nr=null,zs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return d_&&e.locale!=="ko"?null:e.data;default:return null}}var FA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!FA[t.type]:e==="textarea"}function g_(t,e,n,i){Us?Ks?Ks.push(i):Ks=[i]:Us=i,e=nc(e,"onChange"),0<e.length&&(n=new zc("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var hl=null,Ol=null;function qA(t){ob(t,0)}function Lc(t){var e=il(t);if(a_(e))return t}function Qg(t,e){if(t==="change")return e}var y_=!1;if(Ni){var zh;if(Ni){var Ph="oninput"in document;if(!Ph){var Yg=document.createElement("div");Yg.setAttribute("oninput","return;"),Ph=typeof Yg.oninput=="function"}zh=Ph}else zh=!1;y_=zh&&(!document.documentMode||9<document.documentMode)}function $g(){hl&&(hl.detachEvent("onpropertychange",v_),Ol=hl=null)}function v_(t){if(t.propertyName==="value"&&Lc(Ol)){var e=[];g_(e,Ol,t,om(t)),h_(qA,e)}}function HA(t,e,n){t==="focusin"?($g(),hl=e,Ol=n,hl.attachEvent("onpropertychange",v_)):t==="focusout"&&$g()}function GA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lc(Ol)}function QA(t,e){if(t==="click")return Lc(e)}function YA(t,e){if(t==="input"||t==="change")return Lc(e)}function $A(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pn=typeof Object.is=="function"?Object.is:$A;function Ml(t,e){if(pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Mf.call(e,r)||!pn(t[r],e[r]))return!1}return!0}function Kg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xg(t,e){var n=Kg(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kg(n)}}function __(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?__(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function b_(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=zu(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zu(t.document)}return e}function fm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var KA=Ni&&"documentMode"in document&&11>=document.documentMode,Ps=null,Pf=null,fl=null,Lf=!1;function Zg(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lf||Ps==null||Ps!==zu(i)||(i=Ps,"selectionStart"in i&&fm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),fl&&Ml(fl,i)||(fl=i,i=nc(Pf,"onSelect"),0<i.length&&(e=new zc("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ps)))}function Ur(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ls={animationend:Ur("Animation","AnimationEnd"),animationiteration:Ur("Animation","AnimationIteration"),animationstart:Ur("Animation","AnimationStart"),transitionrun:Ur("Transition","TransitionRun"),transitionstart:Ur("Transition","TransitionStart"),transitioncancel:Ur("Transition","TransitionCancel"),transitionend:Ur("Transition","TransitionEnd")},Lh={},T_={};Ni&&(T_=document.createElement("div").style,"AnimationEvent"in window||(delete Ls.animationend.animation,delete Ls.animationiteration.animation,delete Ls.animationstart.animation),"TransitionEvent"in window||delete Ls.transitionend.transition);function cs(t){if(Lh[t])return Lh[t];if(!Ls[t])return t;var e=Ls[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in T_)return Lh[t]=e[n];return t}var E_=cs("animationend"),A_=cs("animationiteration"),x_=cs("animationstart"),XA=cs("transitionrun"),ZA=cs("transitionstart"),JA=cs("transitioncancel"),w_=cs("transitionend"),S_=new Map,Bf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bf.push("scrollEnd");function qn(t,e){S_.set(t,e),os(e,[t])}var Jg=new WeakMap;function wn(t,e){if(typeof t=="object"&&t!==null){var n=Jg.get(t);return n!==void 0?n:(e={value:t,source:e,stack:jg(e)},Jg.set(t,e),e)}return{value:t,source:e,stack:jg(e)}}var bn=[],Bs=0,dm=0;function Bc(){for(var t=Bs,e=dm=Bs=0;e<t;){var n=bn[e];bn[e++]=null;var i=bn[e];bn[e++]=null;var r=bn[e];bn[e++]=null;var s=bn[e];if(bn[e++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&R_(n,r,s)}}function Fc(t,e,n,i){bn[Bs++]=t,bn[Bs++]=e,bn[Bs++]=n,bn[Bs++]=i,dm|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function mm(t,e,n,i){return Fc(t,e,n,i),Pu(t)}function Sa(t,e){return Fc(t,null,null,e),Pu(t)}function R_(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(r=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,r&&e!==null&&(r=31-fn(n),t=s.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),s):null}function Pu(t){if(50<El)throw El=0,od=null,Error(X(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Fs={};function WA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(t,e,n,i){return new WA(t,e,n,i)}function pm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Si(t,e){var n=t.alternate;return n===null?(n=cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function N_(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function mu(t,e,n,i,r,s){var a=0;if(i=t,typeof t=="function")pm(t)&&(a=1);else if(typeof t=="string")a=tw(t,n,Jn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Cf:return t=cn(31,n,e,r),t.elementType=Cf,t.lanes=s,t;case Vs:return Yr(n.children,r,s,e);case Yv:a=8,r|=24;break;case Sf:return t=cn(12,n,e,r|2),t.elementType=Sf,t.lanes=s,t;case Rf:return t=cn(13,n,e,r),t.elementType=Rf,t.lanes=s,t;case Nf:return t=cn(19,n,e,r),t.elementType=Nf,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case q2:case bi:a=10;break e;case $v:a=9;break e;case tm:a=11;break e;case nm:a=14;break e;case Qi:a=16,i=null;break e}a=29,n=Error(X(130,t===null?"null":typeof t,"")),i=null}return e=cn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Yr(t,e,n,i){return t=cn(7,t,i,e),t.lanes=n,t}function Bh(t,e,n){return t=cn(6,t,null,e),t.lanes=n,t}function Fh(t,e,n){return e=cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var qs=[],Hs=0,Lu=null,Bu=0,En=[],An=0,$r=null,Ti=1,Ei="";function Pr(t,e){qs[Hs++]=Bu,qs[Hs++]=Lu,Lu=t,Bu=e}function C_(t,e,n){En[An++]=Ti,En[An++]=Ei,En[An++]=$r,$r=t;var i=Ti;t=Ei;var r=32-fn(i)-1;i&=~(1<<r),n+=1;var s=32-fn(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Ti=1<<32-fn(e)+r|n<<r|i,Ei=s+t}else Ti=1<<s|n<<r|i,Ei=t}function gm(t){t.return!==null&&(Pr(t,1),C_(t,1,0))}function ym(t){for(;t===Lu;)Lu=qs[--Hs],qs[Hs]=null,Bu=qs[--Hs],qs[Hs]=null;for(;t===$r;)$r=En[--An],En[An]=null,Ei=En[--An],En[An]=null,Ti=En[--An],En[An]=null}var Ft=null,Je=null,Ee=!1,Kr=null,Kn=!1,Ff=Error(X(519));function es(t){var e=Error(X(418,""));throw Vl(wn(e,t)),Ff}function Wg(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[zt]=t,e[en]=i,n){case"dialog":fe("cancel",e),fe("close",e);break;case"iframe":case"object":case"embed":fe("load",e);break;case"video":case"audio":for(n=0;n<Ul.length;n++)fe(Ul[n],e);break;case"source":fe("error",e);break;case"img":case"image":case"link":fe("error",e),fe("load",e);break;case"details":fe("toggle",e);break;case"input":fe("invalid",e),l_(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Uu(e);break;case"select":fe("invalid",e);break;case"textarea":fe("invalid",e),u_(e,i.value,i.defaultValue,i.children),Uu(e)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||cb(e.textContent,n)?(i.popover!=null&&(fe("beforetoggle",e),fe("toggle",e)),i.onScroll!=null&&fe("scroll",e),i.onScrollEnd!=null&&fe("scrollend",e),i.onClick!=null&&(e.onclick=Xc),e=!0):e=!1,e||es(t)}function e0(t){for(Ft=t.return;Ft;)switch(Ft.tag){case 5:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:Ft=Ft.return}}function Xa(t){if(t!==Ft)return!1;if(!Ee)return e0(t),Ee=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||md(t.type,t.memoizedProps)),n=!n),n&&Je&&es(t),e0(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){Je=Ln(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}Je=null}}else e===27?(e=Je,Ir(t.type)?(t=yd,yd=null,Je=t):Je=e):Je=Ft?Ln(t.stateNode.nextSibling):null;return!0}function ro(){Je=Ft=null,Ee=!1}function t0(){var t=Kr;return t!==null&&(Kt===null?Kt=t:Kt.push.apply(Kt,t),Kr=null),t}function Vl(t){Kr===null?Kr=[t]:Kr.push(t)}var qf=oi(null),hs=null,Ai=null;function $i(t,e,n){Qe(qf,e._currentValue),e._currentValue=n}function Ri(t){t._currentValue=qf.current,xt(qf)}function Hf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Gf(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;e:for(;s!==null;){var l=s;s=r;for(var u=0;u<e.length;u++)if(l.context===e[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Hf(s.return,n,t),i||(a=null);break e}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(X(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Hf(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function so(t,e,n,i){t=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(X(387));if(a=a.memoizedProps,a!==null){var l=r.type;pn(r.pendingProps.value,a.value)||(t!==null?t.push(l):t=[l])}}else if(r===Mu.current){if(a=r.alternate,a===null)throw Error(X(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(Ll):t=[Ll])}r=r.return}t!==null&&Gf(e,t,n,i),e.flags|=262144}function Fu(t){for(t=t.firstContext;t!==null;){if(!pn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ts(t){hs=t,Ai=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Pt(t){return I_(hs,t)}function Yo(t,e){return hs===null&&ts(t),I_(t,e)}function I_(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Ai===null){if(t===null)throw Error(X(308));Ai=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Ai=Ai.next=e;return n}var ex=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},tx=yt.unstable_scheduleCallback,nx=yt.unstable_NormalPriority,mt={$$typeof:bi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vm(){return{controller:new ex,data:new Map,refCount:0}}function ao(t){t.refCount--,t.refCount===0&&tx(nx,function(){t.controller.abort()})}var dl=null,Qf=0,oa=0,Xs=null;function ix(t,e){if(dl===null){var n=dl=[];Qf=0,oa=Bm(),Xs={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Qf++,e.then(n0,n0),e}function n0(){if(--Qf===0&&dl!==null){Xs!==null&&(Xs.status="fulfilled");var t=dl;dl=null,oa=0,Xs=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function rx(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var i0=se.S;se.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&ix(t,e),i0!==null&&i0(t,e)};var Xr=oi(null);function _m(){var t=Xr.current;return t!==null?t:Ue.pooledCache}function pu(t,e){e===null?Qe(Xr,Xr.current):Qe(Xr,e.pool)}function D_(){var t=_m();return t===null?null:{parent:mt._currentValue,pool:t}}var lo=Error(X(460)),O_=Error(X(474)),qc=Error(X(542)),Yf={then:function(){}};function r0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function $o(){}function M_(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then($o,$o),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,a0(t),t;default:if(typeof e.status=="string")e.then($o,$o);else{if(t=Ue,t!==null&&100<t.shellSuspendCounter)throw Error(X(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,a0(t),t}throw ml=e,lo}}var ml=null;function s0(){if(ml===null)throw Error(X(459));var t=ml;return ml=null,t}function a0(t){if(t===lo||t===qc)throw Error(X(483))}var Yi=!1;function bm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $f(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function lr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function or(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ne&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=Pu(t),R_(t,null,n),e}return Fc(t,i,e,n),Pu(t)}function pl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,t_(t,n)}}function qh(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Kf=!1;function gl(){if(Kf){var t=Xs;if(t!==null)throw t}}function yl(t,e,n,i){Kf=!1;var r=t.updateQueue;Yi=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==a&&(l===null?c.firstBaseUpdate=h:l.next=h,c.lastBaseUpdate=u))}if(s!==null){var d=r.baseState;a=0,c=h=u=null,l=s;do{var f=l.lane&-536870913,g=f!==l.lane;if(g?(ve&f)===f:(i&f)===f){f!==0&&f===oa&&(Kf=!0),c!==null&&(c=c.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var E=t,O=l;f=e;var k=n;switch(O.tag){case 1:if(E=O.payload,typeof E=="function"){d=E.call(k,d,f);break e}d=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=O.payload,f=typeof E=="function"?E.call(k,d,f):E,f==null)break e;d=Be({},d,f);break e;case 2:Yi=!0}}f=l.callback,f!==null&&(t.flags|=64,g&&(t.flags|=8192),g=r.callbacks,g===null?r.callbacks=[f]:g.push(f))}else g={lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(h=c=g,u=d):c=c.next=g,a|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;g=l,l=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);c===null&&(u=d),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=c,s===null&&(r.shared.lanes=0),Tr|=a,t.lanes=a,t.memoizedState=d}}function V_(t,e){if(typeof t!="function")throw Error(X(191,t));t.call(e)}function k_(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)V_(n[t],e)}var ua=oi(null),qu=oi(0);function l0(t,e){t=Di,Qe(qu,t),Qe(ua,e),Di=t|e.baseLanes}function Xf(){Qe(qu,Di),Qe(ua,ua.current)}function Tm(){Di=qu.current,xt(ua),xt(qu)}var _r=0,he=null,Ie=null,lt=null,Hu=!1,Zs=!1,ns=!1,Gu=0,kl=0,Js=null,sx=0;function tt(){throw Error(X(321))}function Em(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pn(t[n],e[n]))return!1;return!0}function Am(t,e,n,i,r,s){return _r=s,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,se.H=t===null||t.memoizedState===null?f1:d1,ns=!1,s=n(i,r),ns=!1,Zs&&(s=U_(e,n,i,r)),j_(t),s}function j_(t){se.H=Qu;var e=Ie!==null&&Ie.next!==null;if(_r=0,lt=Ie=he=null,Hu=!1,kl=0,Js=null,e)throw Error(X(300));t===null||At||(t=t.dependencies,t!==null&&Fu(t)&&(At=!0))}function U_(t,e,n,i){he=t;var r=0;do{if(Zs&&(Js=null),kl=0,Zs=!1,25<=r)throw Error(X(301));if(r+=1,lt=Ie=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}se.H=fx,s=e(n,i)}while(Zs);return s}function ax(){var t=se.H,e=t.useState()[0];return e=typeof e.then=="function"?oo(e):e,t=t.useState()[0],(Ie!==null?Ie.memoizedState:null)!==t&&(he.flags|=1024),e}function xm(){var t=Gu!==0;return Gu=0,t}function wm(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Sm(t){if(Hu){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Hu=!1}_r=0,lt=Ie=he=null,Zs=!1,kl=Gu=0,Js=null}function Yt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?he.memoizedState=lt=t:lt=lt.next=t,lt}function ht(){if(Ie===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=Ie.next;var e=lt===null?he.memoizedState:lt.next;if(e!==null)lt=e,Ie=t;else{if(t===null)throw he.alternate===null?Error(X(467)):Error(X(310));Ie=t,t={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},lt===null?he.memoizedState=lt=t:lt=lt.next=t}return lt}function Rm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function oo(t){var e=kl;return kl+=1,Js===null&&(Js=[]),t=M_(Js,t,e),e=he,(lt===null?e.memoizedState:lt.next)===null&&(e=e.alternate,se.H=e===null||e.memoizedState===null?f1:d1),t}function Hc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return oo(t);if(t.$$typeof===bi)return Pt(t)}throw Error(X(438,String(t)))}function Nm(t){var e=null,n=he.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=he.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Rm(),he.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=H2;return e.index++,n}function Ci(t,e){return typeof e=="function"?e(t):e}function gu(t){var e=ht();return Cm(e,Ie,t)}function Cm(t,e,n){var i=t.queue;if(i===null)throw Error(X(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,r===null)t.memoizedState=s;else{e=r.next;var l=a=null,u=null,h=e,c=!1;do{var d=h.lane&-536870913;if(d!==h.lane?(ve&d)===d:(_r&d)===d){var f=h.revertLane;if(f===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),d===oa&&(c=!0);else if((_r&f)===f){h=h.next,f===oa&&(c=!0);continue}else d={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=d,a=s):u=u.next=d,he.lanes|=f,Tr|=f;d=h.action,ns&&n(s,d),s=h.hasEagerState?h.eagerState:n(s,d)}else f={lane:d,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=f,a=s):u=u.next=f,he.lanes|=d,Tr|=d;h=h.next}while(h!==null&&h!==e);if(u===null?a=s:u.next=l,!pn(s,t.memoizedState)&&(At=!0,c&&(n=Xs,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Hh(t){var e=ht(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);pn(s,e.memoizedState)||(At=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function z_(t,e,n){var i=he,r=ht(),s=Ee;if(s){if(n===void 0)throw Error(X(407));n=n()}else n=e();var a=!pn((Ie||r).memoizedState,n);a&&(r.memoizedState=n,At=!0),r=r.queue;var l=B_.bind(null,i,r,t);if(uo(2048,8,l,[t]),r.getSnapshot!==e||a||lt!==null&&lt.memoizedState.tag&1){if(i.flags|=2048,ca(9,Gc(),L_.bind(null,i,r,n,e),null),Ue===null)throw Error(X(349));s||_r&124||P_(i,e,n)}return n}function P_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=he.updateQueue,e===null?(e=Rm(),he.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function L_(t,e,n,i){e.value=n,e.getSnapshot=i,F_(e)&&q_(t)}function B_(t,e,n){return n(function(){F_(e)&&q_(t)})}function F_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pn(t,n)}catch{return!0}}function q_(t){var e=Sa(t,2);e!==null&&mn(e,t,2)}function Zf(t){var e=Yt();if(typeof t=="function"){var n=t;if(t=n(),ns){tr(!0);try{n()}finally{tr(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:t},e}function H_(t,e,n,i){return t.baseState=n,Cm(t,Ie,typeof i=="function"?i:Ci)}function lx(t,e,n,i,r){if(Qc(t))throw Error(X(485));if(t=e.action,t!==null){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};se.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,G_(e,s)):(s.next=n.next,e.pending=n.next=s)}}function G_(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=se.T,a={};se.T=a;try{var l=n(r,i),u=se.S;u!==null&&u(a,l),o0(t,e,l)}catch(h){Jf(t,e,h)}finally{se.T=s}}else try{s=n(r,i),o0(t,e,s)}catch(h){Jf(t,e,h)}}function o0(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){u0(t,e,i)},function(i){return Jf(t,e,i)}):u0(t,e,n)}function u0(t,e,n){e.status="fulfilled",e.value=n,Q_(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,G_(t,n)))}function Jf(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,Q_(e),e=e.next;while(e!==i)}t.action=null}function Q_(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Y_(t,e){return e}function c0(t,e){if(Ee){var n=Ue.formState;if(n!==null){e:{var i=he;if(Ee){if(Je){t:{for(var r=Je,s=Kn;r.nodeType!==8;){if(!s){r=null;break t}if(r=Ln(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Je=Ln(r.nextSibling),i=r.data==="F!";break e}}es(i)}i=!1}i&&(e=n[0])}}return n=Yt(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Y_,lastRenderedState:e},n.queue=i,n=u1.bind(null,he,i),i.dispatch=n,i=Zf(!1),s=Mm.bind(null,he,!1,i.queue),i=Yt(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=lx.bind(null,he,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function h0(t){var e=ht();return $_(e,Ie,t)}function $_(t,e,n){if(e=Cm(t,e,Y_)[0],t=gu(Ci)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=oo(e)}catch(a){throw a===lo?qc:a}else i=e;e=ht();var r=e.queue,s=r.dispatch;return n!==e.memoizedState&&(he.flags|=2048,ca(9,Gc(),ox.bind(null,r,n),null)),[i,s,t]}function ox(t,e){t.action=e}function f0(t){var e=ht(),n=Ie;if(n!==null)return $_(e,n,t);ht(),e=e.memoizedState,n=ht();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function ca(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=he.updateQueue,e===null&&(e=Rm(),he.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Gc(){return{destroy:void 0,resource:void 0}}function K_(){return ht().memoizedState}function yu(t,e,n,i){var r=Yt();i=i===void 0?null:i,he.flags|=t,r.memoizedState=ca(1|e,Gc(),n,i)}function uo(t,e,n,i){var r=ht();i=i===void 0?null:i;var s=r.memoizedState.inst;Ie!==null&&i!==null&&Em(i,Ie.memoizedState.deps)?r.memoizedState=ca(e,s,n,i):(he.flags|=t,r.memoizedState=ca(1|e,s,n,i))}function d0(t,e){yu(8390656,8,t,e)}function X_(t,e){uo(2048,8,t,e)}function Z_(t,e){return uo(4,2,t,e)}function J_(t,e){return uo(4,4,t,e)}function W_(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function e1(t,e,n){n=n!=null?n.concat([t]):null,uo(4,4,W_.bind(null,e,t),n)}function Im(){}function t1(t,e){var n=ht();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Em(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function n1(t,e){var n=ht();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Em(e,i[1]))return i[0];if(i=t(),ns){tr(!0);try{t()}finally{tr(!1)}}return n.memoizedState=[i,e],i}function Dm(t,e,n){return n===void 0||_r&1073741824?t.memoizedState=e:(t.memoizedState=n,t=Q1(),he.lanes|=t,Tr|=t,n)}function i1(t,e,n,i){return pn(n,e)?n:ua.current!==null?(t=Dm(t,n,i),pn(t,e)||(At=!0),t):_r&42?(t=Q1(),he.lanes|=t,Tr|=t,e):(At=!0,t.memoizedState=n)}function r1(t,e,n,i,r){var s=Ae.p;Ae.p=s!==0&&8>s?s:8;var a=se.T,l={};se.T=l,Mm(t,!1,e,n);try{var u=r(),h=se.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=rx(u,i);vl(t,e,c,dn(t))}else vl(t,e,i,dn(t))}catch(d){vl(t,e,{then:function(){},status:"rejected",reason:d},dn())}finally{Ae.p=s,se.T=a}}function ux(){}function Wf(t,e,n,i){if(t.tag!==5)throw Error(X(476));var r=s1(t).queue;r1(t,r,e,Qr,n===null?ux:function(){return a1(t),n(i)})}function s1(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Qr,baseState:Qr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:Qr},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function a1(t){var e=s1(t).next.queue;vl(t,e,{},dn())}function Om(){return Pt(Ll)}function l1(){return ht().memoizedState}function o1(){return ht().memoizedState}function cx(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=dn();t=lr(n);var i=or(e,t,n);i!==null&&(mn(i,e,n),pl(i,e,n)),e={cache:vm()},t.payload=e;return}e=e.return}}function hx(t,e,n){var i=dn();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Qc(t)?c1(e,n):(n=mm(t,e,n,i),n!==null&&(mn(n,t,i),h1(n,e,i)))}function u1(t,e,n){var i=dn();vl(t,e,n,i)}function vl(t,e,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qc(t))c1(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,pn(l,a))return Fc(t,e,r,0),Ue===null&&Bc(),!1}catch{}finally{}if(n=mm(t,e,r,i),n!==null)return mn(n,t,i),h1(n,e,i),!0}return!1}function Mm(t,e,n,i){if(i={lane:2,revertLane:Bm(),action:i,hasEagerState:!1,eagerState:null,next:null},Qc(t)){if(e)throw Error(X(479))}else e=mm(t,n,i,2),e!==null&&mn(e,t,2)}function Qc(t){var e=t.alternate;return t===he||e!==null&&e===he}function c1(t,e){Zs=Hu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function h1(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,t_(t,n)}}var Qu={readContext:Pt,use:Hc,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useLayoutEffect:tt,useInsertionEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useSyncExternalStore:tt,useId:tt,useHostTransitionStatus:tt,useFormState:tt,useActionState:tt,useOptimistic:tt,useMemoCache:tt,useCacheRefresh:tt},f1={readContext:Pt,use:Hc,useCallback:function(t,e){return Yt().memoizedState=[t,e===void 0?null:e],t},useContext:Pt,useEffect:d0,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,yu(4194308,4,W_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yu(4194308,4,t,e)},useInsertionEffect:function(t,e){yu(4,2,t,e)},useMemo:function(t,e){var n=Yt();e=e===void 0?null:e;var i=t();if(ns){tr(!0);try{t()}finally{tr(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Yt();if(n!==void 0){var r=n(e);if(ns){tr(!0);try{n(e)}finally{tr(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=hx.bind(null,he,t),[i.memoizedState,t]},useRef:function(t){var e=Yt();return t={current:t},e.memoizedState=t},useState:function(t){t=Zf(t);var e=t.queue,n=u1.bind(null,he,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Im,useDeferredValue:function(t,e){var n=Yt();return Dm(n,t,e)},useTransition:function(){var t=Zf(!1);return t=r1.bind(null,he,t.queue,!0,!1),Yt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=he,r=Yt();if(Ee){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Ue===null)throw Error(X(349));ve&124||P_(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,d0(B_.bind(null,i,s,t),[t]),i.flags|=2048,ca(9,Gc(),L_.bind(null,i,s,n,e),null),n},useId:function(){var t=Yt(),e=Ue.identifierPrefix;if(Ee){var n=Ei,i=Ti;n=(i&~(1<<32-fn(i)-1)).toString(32)+n,e=""+e+"R"+n,n=Gu++,0<n&&(e+="H"+n.toString(32)),e+=""}else n=sx++,e=""+e+"r"+n.toString(32)+"";return t.memoizedState=e},useHostTransitionStatus:Om,useFormState:c0,useActionState:c0,useOptimistic:function(t){var e=Yt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Mm.bind(null,he,!0,n),n.dispatch=e,[t,e]},useMemoCache:Nm,useCacheRefresh:function(){return Yt().memoizedState=cx.bind(null,he)}},d1={readContext:Pt,use:Hc,useCallback:t1,useContext:Pt,useEffect:X_,useImperativeHandle:e1,useInsertionEffect:Z_,useLayoutEffect:J_,useMemo:n1,useReducer:gu,useRef:K_,useState:function(){return gu(Ci)},useDebugValue:Im,useDeferredValue:function(t,e){var n=ht();return i1(n,Ie.memoizedState,t,e)},useTransition:function(){var t=gu(Ci)[0],e=ht().memoizedState;return[typeof t=="boolean"?t:oo(t),e]},useSyncExternalStore:z_,useId:l1,useHostTransitionStatus:Om,useFormState:h0,useActionState:h0,useOptimistic:function(t,e){var n=ht();return H_(n,Ie,t,e)},useMemoCache:Nm,useCacheRefresh:o1},fx={readContext:Pt,use:Hc,useCallback:t1,useContext:Pt,useEffect:X_,useImperativeHandle:e1,useInsertionEffect:Z_,useLayoutEffect:J_,useMemo:n1,useReducer:Hh,useRef:K_,useState:function(){return Hh(Ci)},useDebugValue:Im,useDeferredValue:function(t,e){var n=ht();return Ie===null?Dm(n,t,e):i1(n,Ie.memoizedState,t,e)},useTransition:function(){var t=Hh(Ci)[0],e=ht().memoizedState;return[typeof t=="boolean"?t:oo(t),e]},useSyncExternalStore:z_,useId:l1,useHostTransitionStatus:Om,useFormState:f0,useActionState:f0,useOptimistic:function(t,e){var n=ht();return Ie!==null?H_(n,Ie,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Nm,useCacheRefresh:o1},Ws=null,jl=0;function Ko(t){var e=jl;return jl+=1,Ws===null&&(Ws=[]),M_(Ws,t,e)}function Za(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Xo(t,e){throw e.$$typeof===F2?Error(X(525)):(t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function m0(t){var e=t._init;return e(t._payload)}function m1(t){function e(b,S){if(t){var N=b.deletions;N===null?(b.deletions=[S],b.flags|=16):N.push(S)}}function n(b,S){if(!t)return null;for(;S!==null;)e(b,S),S=S.sibling;return null}function i(b){for(var S=new Map;b!==null;)b.key!==null?S.set(b.key,b):S.set(b.index,b),b=b.sibling;return S}function r(b,S){return b=Si(b,S),b.index=0,b.sibling=null,b}function s(b,S,N){return b.index=N,t?(N=b.alternate,N!==null?(N=N.index,N<S?(b.flags|=67108866,S):N):(b.flags|=67108866,S)):(b.flags|=1048576,S)}function a(b){return t&&b.alternate===null&&(b.flags|=67108866),b}function l(b,S,N,M){return S===null||S.tag!==6?(S=Bh(N,b.mode,M),S.return=b,S):(S=r(S,N),S.return=b,S)}function u(b,S,N,M){var j=N.type;return j===Vs?c(b,S,N.props.children,M,N.key):S!==null&&(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Qi&&m0(j)===S.type)?(S=r(S,N.props),Za(S,N),S.return=b,S):(S=mu(N.type,N.key,N.props,null,b.mode,M),Za(S,N),S.return=b,S)}function h(b,S,N,M){return S===null||S.tag!==4||S.stateNode.containerInfo!==N.containerInfo||S.stateNode.implementation!==N.implementation?(S=Fh(N,b.mode,M),S.return=b,S):(S=r(S,N.children||[]),S.return=b,S)}function c(b,S,N,M,j){return S===null||S.tag!==7?(S=Yr(N,b.mode,M,j),S.return=b,S):(S=r(S,N),S.return=b,S)}function d(b,S,N){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return S=Bh(""+S,b.mode,N),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Fo:return N=mu(S.type,S.key,S.props,null,b.mode,N),Za(N,S),N.return=b,N;case tl:return S=Fh(S,b.mode,N),S.return=b,S;case Qi:var M=S._init;return S=M(S._payload),d(b,S,N)}if(nl(S)||Ya(S))return S=Yr(S,b.mode,N,null),S.return=b,S;if(typeof S.then=="function")return d(b,Ko(S),N);if(S.$$typeof===bi)return d(b,Yo(b,S),N);Xo(b,S)}return null}function f(b,S,N,M){var j=S!==null?S.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return j!==null?null:l(b,S,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Fo:return N.key===j?u(b,S,N,M):null;case tl:return N.key===j?h(b,S,N,M):null;case Qi:return j=N._init,N=j(N._payload),f(b,S,N,M)}if(nl(N)||Ya(N))return j!==null?null:c(b,S,N,M,null);if(typeof N.then=="function")return f(b,S,Ko(N),M);if(N.$$typeof===bi)return f(b,S,Yo(b,N),M);Xo(b,N)}return null}function g(b,S,N,M,j){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return b=b.get(N)||null,l(S,b,""+M,j);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Fo:return b=b.get(M.key===null?N:M.key)||null,u(S,b,M,j);case tl:return b=b.get(M.key===null?N:M.key)||null,h(S,b,M,j);case Qi:var V=M._init;return M=V(M._payload),g(b,S,N,M,j)}if(nl(M)||Ya(M))return b=b.get(N)||null,c(S,b,M,j,null);if(typeof M.then=="function")return g(b,S,N,Ko(M),j);if(M.$$typeof===bi)return g(b,S,N,Yo(S,M),j);Xo(S,M)}return null}function E(b,S,N,M){for(var j=null,V=null,w=S,y=S=0,v=null;w!==null&&y<N.length;y++){w.index>y?(v=w,w=null):v=w.sibling;var T=f(b,w,N[y],M);if(T===null){w===null&&(w=v);break}t&&w&&T.alternate===null&&e(b,w),S=s(T,S,y),V===null?j=T:V.sibling=T,V=T,w=v}if(y===N.length)return n(b,w),Ee&&Pr(b,y),j;if(w===null){for(;y<N.length;y++)w=d(b,N[y],M),w!==null&&(S=s(w,S,y),V===null?j=w:V.sibling=w,V=w);return Ee&&Pr(b,y),j}for(w=i(w);y<N.length;y++)v=g(w,b,y,N[y],M),v!==null&&(t&&v.alternate!==null&&w.delete(v.key===null?y:v.key),S=s(v,S,y),V===null?j=v:V.sibling=v,V=v);return t&&w.forEach(function(x){return e(b,x)}),Ee&&Pr(b,y),j}function O(b,S,N,M){if(N==null)throw Error(X(151));for(var j=null,V=null,w=S,y=S=0,v=null,T=N.next();w!==null&&!T.done;y++,T=N.next()){w.index>y?(v=w,w=null):v=w.sibling;var x=f(b,w,T.value,M);if(x===null){w===null&&(w=v);break}t&&w&&x.alternate===null&&e(b,w),S=s(x,S,y),V===null?j=x:V.sibling=x,V=x,w=v}if(T.done)return n(b,w),Ee&&Pr(b,y),j;if(w===null){for(;!T.done;y++,T=N.next())T=d(b,T.value,M),T!==null&&(S=s(T,S,y),V===null?j=T:V.sibling=T,V=T);return Ee&&Pr(b,y),j}for(w=i(w);!T.done;y++,T=N.next())T=g(w,b,y,T.value,M),T!==null&&(t&&T.alternate!==null&&w.delete(T.key===null?y:T.key),S=s(T,S,y),V===null?j=T:V.sibling=T,V=T);return t&&w.forEach(function(R){return e(b,R)}),Ee&&Pr(b,y),j}function k(b,S,N,M){if(typeof N=="object"&&N!==null&&N.type===Vs&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Fo:e:{for(var j=N.key;S!==null;){if(S.key===j){if(j=N.type,j===Vs){if(S.tag===7){n(b,S.sibling),M=r(S,N.props.children),M.return=b,b=M;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Qi&&m0(j)===S.type){n(b,S.sibling),M=r(S,N.props),Za(M,N),M.return=b,b=M;break e}n(b,S);break}else e(b,S);S=S.sibling}N.type===Vs?(M=Yr(N.props.children,b.mode,M,N.key),M.return=b,b=M):(M=mu(N.type,N.key,N.props,null,b.mode,M),Za(M,N),M.return=b,b=M)}return a(b);case tl:e:{for(j=N.key;S!==null;){if(S.key===j)if(S.tag===4&&S.stateNode.containerInfo===N.containerInfo&&S.stateNode.implementation===N.implementation){n(b,S.sibling),M=r(S,N.children||[]),M.return=b,b=M;break e}else{n(b,S);break}else e(b,S);S=S.sibling}M=Fh(N,b.mode,M),M.return=b,b=M}return a(b);case Qi:return j=N._init,N=j(N._payload),k(b,S,N,M)}if(nl(N))return E(b,S,N,M);if(Ya(N)){if(j=Ya(N),typeof j!="function")throw Error(X(150));return N=j.call(N),O(b,S,N,M)}if(typeof N.then=="function")return k(b,S,Ko(N),M);if(N.$$typeof===bi)return k(b,S,Yo(b,N),M);Xo(b,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,S!==null&&S.tag===6?(n(b,S.sibling),M=r(S,N),M.return=b,b=M):(n(b,S),M=Bh(N,b.mode,M),M.return=b,b=M),a(b)):n(b,S)}return function(b,S,N,M){try{jl=0;var j=k(b,S,N,M);return Ws=null,j}catch(w){if(w===lo||w===qc)throw w;var V=cn(29,w,null,b.mode);return V.lanes=M,V.return=b,V}finally{}}}var ha=m1(!0),p1=m1(!1),In=oi(null),ei=null;function Ki(t){var e=t.alternate;Qe(pt,pt.current&1),Qe(In,t),ei===null&&(e===null||ua.current!==null||e.memoizedState!==null)&&(ei=t)}function g1(t){if(t.tag===22){if(Qe(pt,pt.current),Qe(In,t),ei===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(ei=t)}}else Xi()}function Xi(){Qe(pt,pt.current),Qe(In,In.current)}function xi(t){xt(In),ei===t&&(ei=null),xt(pt)}var pt=oi(0);function Yu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||gd(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Gh(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ed={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=dn(),r=lr(i);r.payload=e,n!=null&&(r.callback=n),e=or(t,r,i),e!==null&&(mn(e,t,i),pl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=dn(),r=lr(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=or(t,r,i),e!==null&&(mn(e,t,i),pl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dn(),i=lr(n);i.tag=2,e!=null&&(i.callback=e),e=or(t,i,n),e!==null&&(mn(e,t,n),pl(e,t,n))}};function p0(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!Ml(n,i)||!Ml(r,s):!0}function g0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ed.enqueueReplaceState(e,e.state,null)}function is(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Be({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}var $u=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function y1(t){$u(t)}function v1(t){console.error(t)}function _1(t){$u(t)}function Ku(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function y0(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function td(t,e,n){return n=lr(n),n.tag=3,n.payload={element:null},n.callback=function(){Ku(t,e)},n}function b1(t){return t=lr(t),t.tag=3,t}function T1(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){y0(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){y0(e,n,i),typeof r!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function dx(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&so(e,n,r,!0),n=In.current,n!==null){switch(n.tag){case 13:return ei===null?ud():n.alternate===null&&We===0&&(We=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Yf?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),nf(t,i,r)),!1;case 22:return n.flags|=65536,i===Yf?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),nf(t,i,r)),!1}throw Error(X(435,n.tag))}return nf(t,i,r),ud(),!1}if(Ee)return e=In.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==Ff&&(t=Error(X(422),{cause:i}),Vl(wn(t,n)))):(i!==Ff&&(e=Error(X(423),{cause:i}),Vl(wn(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=wn(i,n),r=td(t.stateNode,i,r),qh(t,r),We!==4&&(We=2)),!1;var s=Error(X(520),{cause:i});if(s=wn(s,n),Tl===null?Tl=[s]:Tl.push(s),We!==4&&(We=2),e===null)return!0;i=wn(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=td(n.stateNode,i,t),qh(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(ur===null||!ur.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=b1(r),T1(r,t,n,i),qh(n,r),!1}n=n.return}while(n!==null);return!1}var E1=Error(X(461)),At=!1;function St(t,e,n,i){e.child=t===null?p1(e,null,n,i):ha(e,t.child,n,i)}function v0(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return ts(e),i=Am(t,e,n,a,s,r),l=xm(),t!==null&&!At?(wm(t,e,r),Ii(t,e,r)):(Ee&&l&&gm(e),e.flags|=1,St(t,e,i,r),e.child)}function _0(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!pm(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,A1(t,e,s,i,r)):(t=mu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!Vm(t,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ml,n(a,i)&&t.ref===e.ref)return Ii(t,e,r)}return e.flags|=1,t=Si(s,i),t.ref=e.ref,t.return=e,e.child=t}function A1(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Ml(s,i)&&t.ref===e.ref)if(At=!1,e.pendingProps=i=s,Vm(t,r))t.flags&131072&&(At=!0);else return e.lanes=t.lanes,Ii(t,e,r)}return nd(t,e,n,i,r)}function x1(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden"){if(e.flags&128){if(i=s!==null?s.baseLanes|n:n,t!==null){for(r=e.child=t.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;e.childLanes=s&~i}else e.childLanes=0,e.child=null;return b0(t,e,i,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&pu(e,s!==null?s.cachePool:null),s!==null?l0(e,s):Xf(),g1(e);else return e.lanes=e.childLanes=536870912,b0(t,e,s!==null?s.baseLanes|n:n,n)}else s!==null?(pu(e,s.cachePool),l0(e,s),Xi(),e.memoizedState=null):(t!==null&&pu(e,null),Xf(),Xi());return St(t,e,r,n),e.child}function b0(t,e,n,i){var r=_m();return r=r===null?null:{parent:mt._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&pu(e,null),Xf(),g1(e),t!==null&&so(t,e,i,!0),null}function vu(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(X(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function nd(t,e,n,i,r){return ts(e),n=Am(t,e,n,i,void 0,r),i=xm(),t!==null&&!At?(wm(t,e,r),Ii(t,e,r)):(Ee&&i&&gm(e),e.flags|=1,St(t,e,n,r),e.child)}function T0(t,e,n,i,r,s){return ts(e),e.updateQueue=null,n=U_(e,i,n,r),j_(t),i=xm(),t!==null&&!At?(wm(t,e,s),Ii(t,e,s)):(Ee&&i&&gm(e),e.flags|=1,St(t,e,n,s),e.child)}function E0(t,e,n,i,r){if(ts(e),e.stateNode===null){var s=Fs,a=n.contextType;typeof a=="object"&&a!==null&&(s=Pt(a)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ed,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},bm(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?Pt(a):Fs,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Gh(e,n,a,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&ed.enqueueReplaceState(s,s.state,null),yl(e,i,s,r),gl(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var l=e.memoizedProps,u=is(n,l);s.props=u;var h=s.context,c=n.contextType;a=Fs,typeof c=="object"&&c!==null&&(a=Pt(c));var d=n.getDerivedStateFromProps;c=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,c||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&g0(e,s,i,a),Yi=!1;var f=e.memoizedState;s.state=f,yl(e,i,s,r),gl(),h=e.memoizedState,l||f!==h||Yi?(typeof d=="function"&&(Gh(e,n,d,i),h=e.memoizedState),(u=Yi||p0(e,n,u,i,f,h,a))?(c||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,$f(t,e),a=e.memoizedProps,c=is(n,a),s.props=c,d=e.pendingProps,f=s.context,h=n.contextType,u=Fs,typeof h=="object"&&h!==null&&(u=Pt(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==u)&&g0(e,s,i,u),Yi=!1,f=e.memoizedState,s.state=f,yl(e,i,s,r),gl();var g=e.memoizedState;a!==d||f!==g||Yi||t!==null&&t.dependencies!==null&&Fu(t.dependencies)?(typeof l=="function"&&(Gh(e,n,l,i),g=e.memoizedState),(c=Yi||p0(e,n,c,i,f,g,u)||t!==null&&t.dependencies!==null&&Fu(t.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,g,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,g,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),s.props=i,s.state=g,s.context=u,i=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,vu(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=ha(e,t.child,null,r),e.child=ha(e,null,n,r)):St(t,e,n,r),e.memoizedState=s.state,t=e.child):t=Ii(t,e,r),t}function A0(t,e,n,i){return ro(),e.flags|=256,St(t,e,n,i),e.child}var Qh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yh(t){return{baseLanes:t,cachePool:D_()}}function $h(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Nn),t}function w1(t,e,n){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(pt.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(Ee){if(r?Ki(e):Xi(),Ee){var l=Je,u;if(u=l){e:{for(u=l,l=Kn;u.nodeType!==8;){if(!l){l=null;break e}if(u=Ln(u.nextSibling),u===null){l=null;break e}}l=u}l!==null?(e.memoizedState={dehydrated:l,treeContext:$r!==null?{id:Ti,overflow:Ei}:null,retryLane:536870912,hydrationErrors:null},u=cn(18,null,null,0),u.stateNode=l,u.return=e,e.child=u,Ft=e,Je=null,u=!0):u=!1}u||es(e)}if(l=e.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return gd(l)?e.lanes=32:e.lanes=536870912,null;xi(e)}return l=i.children,i=i.fallback,r?(Xi(),r=e.mode,l=Xu({mode:"hidden",children:l},r),i=Yr(i,r,n,null),l.return=e,i.return=e,l.sibling=i,e.child=l,r=e.child,r.memoizedState=Yh(n),r.childLanes=$h(t,a,n),e.memoizedState=Qh,i):(Ki(e),id(e,l))}if(u=t.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)e.flags&256?(Ki(e),e.flags&=-257,e=Kh(t,e,n)):e.memoizedState!==null?(Xi(),e.child=t.child,e.flags|=128,e=null):(Xi(),r=i.fallback,l=e.mode,i=Xu({mode:"visible",children:i.children},l),r=Yr(r,l,n,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,ha(e,t.child,null,n),i=e.child,i.memoizedState=Yh(n),i.childLanes=$h(t,a,n),e.memoizedState=Qh,e=r);else if(Ki(e),gd(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(X(419)),i.stack="",i.digest=a,Vl({value:i,source:null,stack:null}),e=Kh(t,e,n)}else if(At||so(t,e,n,!1),a=(n&t.childLanes)!==0,At||a){if(a=Ue,a!==null&&(i=n&-n,i=i&42?1:rm(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,Sa(t,i),mn(a,t,i),E1;l.data==="$?"||ud(),e=Kh(t,e,n)}else l.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,Je=Ln(l.nextSibling),Ft=e,Ee=!0,Kr=null,Kn=!1,t!==null&&(En[An++]=Ti,En[An++]=Ei,En[An++]=$r,Ti=t.id,Ei=t.overflow,$r=e),e=id(e,i.children),e.flags|=4096);return e}return r?(Xi(),r=i.fallback,l=e.mode,u=t.child,h=u.sibling,i=Si(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=Si(h,r):(r=Yr(r,l,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,l=t.child.memoizedState,l===null?l=Yh(n):(u=l.cachePool,u!==null?(h=mt._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=D_(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=$h(t,a,n),e.memoizedState=Qh,i):(Ki(e),n=t.child,t=n.sibling,n=Si(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function id(t,e){return e=Xu({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Xu(t,e){return t=cn(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Kh(t,e,n){return ha(e,t.child,null,n),t=id(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function x0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Hf(t.return,e,n)}function Xh(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function S1(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(St(t,e,i.children,n),i=pt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&x0(t,n,e);else if(t.tag===19)x0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}switch(Qe(pt,i),r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Yu(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Xh(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Yu(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Xh(e,!0,n,null,s);break;case"together":Xh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ii(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Tr|=e.lanes,!(n&e.childLanes))if(t!==null){if(so(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Si(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Si(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Vm(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Fu(t)))}function mx(t,e,n){switch(e.tag){case 3:Vu(e,e.stateNode.containerInfo),$i(e,mt,t.memoizedState.cache),ro();break;case 27:case 5:Of(e);break;case 4:Vu(e,e.stateNode.containerInfo);break;case 10:$i(e,e.type,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Ki(e),e.flags|=128,null):n&e.child.childLanes?w1(t,e,n):(Ki(e),t=Ii(t,e,n),t!==null?t.sibling:null);Ki(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(so(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return S1(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Qe(pt,pt.current),i)break;return null;case 22:case 23:return e.lanes=0,x1(t,e,n);case 24:$i(e,mt,t.memoizedState.cache)}return Ii(t,e,n)}function R1(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)At=!0;else{if(!Vm(t,n)&&!(e.flags&128))return At=!1,mx(t,e,n);At=!!(t.flags&131072)}else At=!1,Ee&&e.flags&1048576&&C_(e,Bu,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var i=e.elementType,r=i._init;if(i=r(i._payload),e.type=i,typeof i=="function")pm(i)?(t=is(i,t),e.tag=1,e=E0(null,e,i,t,n)):(e.tag=0,e=nd(null,e,i,t,n));else{if(i!=null){if(r=i.$$typeof,r===tm){e.tag=11,e=v0(null,e,i,t,n);break e}else if(r===nm){e.tag=14,e=_0(null,e,i,t,n);break e}}throw e=If(i)||i,Error(X(306,e,""))}}return e;case 0:return nd(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=is(i,e.pendingProps),E0(t,e,i,r,n);case 3:e:{if(Vu(e,e.stateNode.containerInfo),t===null)throw Error(X(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,$f(t,e),yl(e,i,null,n);var a=e.memoizedState;if(i=a.cache,$i(e,mt,i),i!==s.cache&&Gf(e,[mt],n,!0),gl(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=A0(t,e,i,n);break e}else if(i!==r){r=wn(Error(X(424)),e),Vl(r),e=A0(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Je=Ln(t.firstChild),Ft=e,Ee=!0,Kr=null,Kn=!0,n=p1(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ro(),i===r){e=Ii(t,e,n);break e}St(t,e,i,n)}e=e.child}return e;case 26:return vu(t,e),t===null?(n=B0(e.type,null,e.pendingProps,null))?e.memoizedState=n:Ee||(n=e.type,t=e.pendingProps,i=ic(ar.current).createElement(n),i[zt]=e,i[en]=t,It(i,n,t),Et(i),e.stateNode=i):e.memoizedState=B0(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Of(e),t===null&&Ee&&(i=e.stateNode=db(e.type,e.pendingProps,ar.current),Ft=e,Kn=!0,r=Je,Ir(e.type)?(yd=r,Je=Ln(i.firstChild)):Je=r),St(t,e,e.pendingProps.children,n),vu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Ee&&((r=i=Je)&&(i=Fx(i,e.type,e.pendingProps,Kn),i!==null?(e.stateNode=i,Ft=e,Je=Ln(i.firstChild),Kn=!1,r=!0):r=!1),r||es(e)),Of(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,i=s.children,md(r,s)?i=null:a!==null&&md(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=Am(t,e,ax,null,null,n),Ll._currentValue=r),vu(t,e),St(t,e,i,n),e.child;case 6:return t===null&&Ee&&((t=n=Je)&&(n=qx(n,e.pendingProps,Kn),n!==null?(e.stateNode=n,Ft=e,Je=null,t=!0):t=!1),t||es(e)),null;case 13:return w1(t,e,n);case 4:return Vu(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ha(e,null,i,n):St(t,e,i,n),e.child;case 11:return v0(t,e,e.type,e.pendingProps,n);case 7:return St(t,e,e.pendingProps,n),e.child;case 8:return St(t,e,e.pendingProps.children,n),e.child;case 12:return St(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,$i(e,e.type,i.value),St(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,ts(e),r=Pt(r),i=i(r),e.flags|=1,St(t,e,i,n),e.child;case 14:return _0(t,e,e.type,e.pendingProps,n);case 15:return A1(t,e,e.type,e.pendingProps,n);case 19:return S1(t,e,n);case 31:return i=e.pendingProps,n=e.mode,i={mode:i.mode,children:i.children},t===null?(n=Xu(i,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=Si(t.child,i),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return x1(t,e,n);case 24:return ts(e),i=Pt(mt),t===null?(r=_m(),r===null&&(r=Ue,s=vm(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},bm(e),$i(e,mt,r)):(t.lanes&n&&($f(t,e),yl(e,null,null,n),gl()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),$i(e,mt,i)):(i=s.cache,$i(e,mt,i),i!==r.cache&&Gf(e,[mt],n,!0))),St(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(X(156,e.tag))}function pi(t){t.flags|=4}function w0(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!gb(e)){if(e=In.current,e!==null&&((ve&4194048)===ve?ei!==null:(ve&62914560)!==ve&&!(ve&536870912)||e!==ei))throw ml=Yf,O_;t.flags|=8192}}function Zo(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Wv():536870912,t.lanes|=e,fa|=e)}function Ja(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function px(t,e,n){var i=e.pendingProps;switch(ym(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(e),null;case 1:return Ke(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Ri(mt),sa(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Xa(e)?pi(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,t0())),Ke(e),null;case 26:return n=e.memoizedState,t===null?(pi(e),n!==null?(Ke(e),w0(e,n)):(Ke(e),e.flags&=-16777217)):n?n!==t.memoizedState?(pi(e),Ke(e),w0(e,n)):(Ke(e),e.flags&=-16777217):(t.memoizedProps!==i&&pi(e),Ke(e),e.flags&=-16777217),null;case 27:ku(e),n=ar.current;var r=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==i&&pi(e);else{if(!i){if(e.stateNode===null)throw Error(X(166));return Ke(e),null}t=Jn.current,Xa(e)?Wg(e):(t=db(r,i,n),e.stateNode=t,pi(e))}return Ke(e),null;case 5:if(ku(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&pi(e);else{if(!i){if(e.stateNode===null)throw Error(X(166));return Ke(e),null}if(t=Jn.current,Xa(e))Wg(e);else{switch(r=ic(ar.current),t){case 1:t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=r.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?t.multiple=!0:i.size&&(t.size=i.size);break;default:t=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}t[zt]=e,t[en]=i;e:for(r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=t;e:switch(It(t,n,i),n){case"button":case"input":case"select":case"textarea":t=!!i.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&pi(e)}}return Ke(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&pi(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(X(166));if(t=ar.current,Xa(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=Ft,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[zt]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||cb(t.nodeValue,n)),t||es(e)}else t=ic(t).createTextNode(i),t[zt]=e,e.stateNode=t}return Ke(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=Xa(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(X(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(X(317));r[zt]=e}else ro(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ke(e),r=!1}else r=t0(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(xi(e),e):(xi(e),null)}if(xi(e),e.flags&128)return e.lanes=n,e;if(n=i!==null,t=t!==null&&t.memoizedState!==null,n){i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),Zo(e,e.updateQueue),Ke(e),null;case 4:return sa(),t===null&&Fm(e.stateNode.containerInfo),Ke(e),null;case 10:return Ri(e.type),Ke(e),null;case 19:if(xt(pt),r=e.memoizedState,r===null)return Ke(e),null;if(i=(e.flags&128)!==0,s=r.rendering,s===null)if(i)Ja(r,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Yu(t),s!==null){for(e.flags|=128,Ja(r,!1),t=s.updateQueue,e.updateQueue=t,Zo(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)N_(n,t),n=n.sibling;return Qe(pt,pt.current&1|2),e.child}t=t.sibling}r.tail!==null&&Wn()>Ju&&(e.flags|=128,i=!0,Ja(r,!1),e.lanes=4194304)}else{if(!i)if(t=Yu(s),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,Zo(e,t),Ja(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!Ee)return Ke(e),null}else 2*Wn()-r.renderingStartTime>Ju&&n!==536870912&&(e.flags|=128,i=!0,Ja(r,!1),e.lanes=4194304);r.isBackwards?(s.sibling=e.child,e.child=s):(t=r.last,t!==null?t.sibling=s:e.child=s,r.last=s)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Wn(),e.sibling=null,t=pt.current,Qe(pt,i?t&1|2:t&1),e):(Ke(e),null);case 22:case 23:return xi(e),Tm(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Ke(e),e.subtreeFlags&6&&(e.flags|=8192)):Ke(e),n=e.updateQueue,n!==null&&Zo(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&xt(Xr),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Ri(mt),Ke(e),null;case 25:return null;case 30:return null}throw Error(X(156,e.tag))}function gx(t,e){switch(ym(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ri(mt),sa(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return ku(e),null;case 13:if(xi(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));ro()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xt(pt),null;case 4:return sa(),null;case 10:return Ri(e.type),null;case 22:case 23:return xi(e),Tm(),t!==null&&xt(Xr),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Ri(mt),null;case 25:return null;default:return null}}function N1(t,e){switch(ym(e),e.tag){case 3:Ri(mt),sa();break;case 26:case 27:case 5:ku(e);break;case 4:sa();break;case 13:xi(e);break;case 19:xt(pt);break;case 10:Ri(e.type);break;case 22:case 23:xi(e),Tm(),t!==null&&xt(Xr);break;case 24:Ri(mt)}}function co(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){Me(e,e.return,l)}}function br(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&t)===t){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=e;var u=n,h=l;try{h()}catch(c){Me(r,u,c)}}}i=i.next}while(i!==s)}}catch(c){Me(e,e.return,c)}}function C1(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{k_(e,n)}catch(i){Me(t,t.return,i)}}}function I1(t,e,n){n.props=is(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Me(t,e,i)}}function _l(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){Me(t,e,r)}}function Xn(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Me(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function D1(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Me(t,t.return,r)}}function Zh(t,e,n){try{var i=t.stateNode;Ux(i,t.type,n,e),i[en]=e}catch(r){Me(t,t.return,r)}}function O1(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ir(t.type)||t.tag===4}function Jh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||O1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ir(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rd(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xc));else if(i!==4&&(i===27&&Ir(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(rd(t,e,n),t=t.sibling;t!==null;)rd(t,e,n),t=t.sibling}function Zu(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Ir(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Zu(t,e,n),t=t.sibling;t!==null;)Zu(t,e,n),t=t.sibling}function M1(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);It(e,i,n),e[zt]=t,e[en]=n}catch(s){Me(t,t.return,s)}}var yi=!1,nt=!1,Wh=!1,S0=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function yx(t,e){if(t=t.containerInfo,fd=lc,t=b_(t),fm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,c=0,d=t,f=null;t:for(;;){for(var g;d!==n||r!==0&&d.nodeType!==3||(l=a+r),d!==s||i!==0&&d.nodeType!==3||(u=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++h===r&&(l=a),f===s&&++c===i&&(u=a),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(dd={focusedElem:t,selectionRange:n},lc=!1,Tt=e;Tt!==null;)if(e=Tt,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,Tt=t;else for(;Tt!==null;){switch(e=Tt,s=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var E=is(n.type,r,n.elementType===n.type);t=i.getSnapshotBeforeUpdate(E,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(O){Me(n,n.return,O)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)pd(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":pd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(X(163))}if(t=e.sibling,t!==null){t.return=e.return,Tt=t;break}Tt=e.return}}function V1(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:qi(t,n),i&4&&co(5,n);break;case 1:if(qi(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Me(n,n.return,a)}else{var r=is(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Me(n,n.return,a)}}i&64&&C1(n),i&512&&_l(n,n.return);break;case 3:if(qi(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{k_(t,e)}catch(a){Me(n,n.return,a)}}break;case 27:e===null&&i&4&&M1(n);case 26:case 5:qi(t,n),e===null&&i&4&&D1(n),i&512&&_l(n,n.return);break;case 12:qi(t,n);break;case 13:qi(t,n),i&4&&U1(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=Sx.bind(null,n),Hx(t,n))));break;case 22:if(i=n.memoizedState!==null||yi,!i){e=e!==null&&e.memoizedState!==null||nt,r=yi;var s=nt;yi=i,(nt=e)&&!s?Gi(t,n,(n.subtreeFlags&8772)!==0):qi(t,n),yi=r,nt=s}break;case 30:break;default:qi(t,n)}}function k1(t){var e=t.alternate;e!==null&&(t.alternate=null,k1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&am(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var qe=null,$t=!1;function gi(t,e,n){for(n=n.child;n!==null;)j1(t,e,n),n=n.sibling}function j1(t,e,n){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Wl,n)}catch{}switch(n.tag){case 26:nt||Xn(n,e),gi(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:nt||Xn(n,e);var i=qe,r=$t;Ir(n.type)&&(qe=n.stateNode,$t=!1),gi(t,e,n),Al(n.stateNode),qe=i,$t=r;break;case 5:nt||Xn(n,e);case 6:if(i=qe,r=$t,qe=null,gi(t,e,n),qe=i,$t=r,qe!==null)if($t)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(n.stateNode)}catch(s){Me(n,e,s)}else try{qe.removeChild(n.stateNode)}catch(s){Me(n,e,s)}break;case 18:qe!==null&&($t?(t=qe,z0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),ql(t)):z0(qe,n.stateNode));break;case 4:i=qe,r=$t,qe=n.stateNode.containerInfo,$t=!0,gi(t,e,n),qe=i,$t=r;break;case 0:case 11:case 14:case 15:nt||br(2,n,e),nt||br(4,n,e),gi(t,e,n);break;case 1:nt||(Xn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&I1(n,e,i)),gi(t,e,n);break;case 21:gi(t,e,n);break;case 22:nt=(i=nt)||n.memoizedState!==null,gi(t,e,n),nt=i;break;default:gi(t,e,n)}}function U1(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ql(t)}catch(n){Me(e,e.return,n)}}function vx(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new S0),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new S0),e;default:throw Error(X(435,t.tag))}}function ef(t,e){var n=vx(t);e.forEach(function(i){var r=Rx.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}function ln(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 27:if(Ir(l.type)){qe=l.stateNode,$t=!1;break e}break;case 5:qe=l.stateNode,$t=!1;break e;case 3:case 4:qe=l.stateNode.containerInfo,$t=!0;break e}l=l.return}if(qe===null)throw Error(X(160));j1(s,a,r),qe=null,$t=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)z1(e,t),e=e.sibling}var Un=null;function z1(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ln(e,t),on(t),i&4&&(br(3,t,t.return),co(3,t),br(5,t,t.return));break;case 1:ln(e,t),on(t),i&512&&(nt||n===null||Xn(n,n.return)),i&64&&yi&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=Un;if(ln(e,t),on(t),i&512&&(nt||n===null||Xn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[no]||s[zt]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),It(s,i,n),s[zt]=t,Et(s),i=s;break e;case"link":var a=q0("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break t}}s=r.createElement(i),It(s,i,n),r.head.appendChild(s);break;case"meta":if(a=q0("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break t}}s=r.createElement(i),It(s,i,n),r.head.appendChild(s);break;default:throw Error(X(468,i))}s[zt]=t,Et(s),i=s}t.stateNode=i}else H0(r,t.type,t.stateNode);else t.stateNode=F0(r,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?H0(r,t.type,t.stateNode):F0(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Zh(t,t.memoizedProps,n.memoizedProps)}break;case 27:ln(e,t),on(t),i&512&&(nt||n===null||Xn(n,n.return)),n!==null&&i&4&&Zh(t,t.memoizedProps,n.memoizedProps);break;case 5:if(ln(e,t),on(t),i&512&&(nt||n===null||Xn(n,n.return)),t.flags&32){r=t.stateNode;try{la(r,"")}catch(g){Me(t,t.return,g)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,Zh(t,r,n!==null?n.memoizedProps:r)),i&1024&&(Wh=!0);break;case 6:if(ln(e,t),on(t),i&4){if(t.stateNode===null)throw Error(X(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(g){Me(t,t.return,g)}}break;case 3:if(Tu=null,r=Un,Un=rc(e.containerInfo),ln(e,t),Un=r,on(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ql(e.containerInfo)}catch(g){Me(t,t.return,g)}Wh&&(Wh=!1,P1(t));break;case 4:i=Un,Un=rc(t.stateNode.containerInfo),ln(e,t),on(t),Un=i;break;case 12:ln(e,t),on(t);break;case 13:ln(e,t),on(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Pm=Wn()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,ef(t,i)));break;case 22:r=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=yi,c=nt;if(yi=h||r,nt=c||u,ln(e,t),nt=c,yi=h,on(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||u||yi||nt||Lr(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var d=u.memoizedProps.style,f=d!=null&&d.hasOwnProperty("display")?d.display:null;l.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(g){Me(u,u.return,g)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(g){Me(u,u.return,g)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,ef(t,n))));break;case 19:ln(e,t),on(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,ef(t,i)));break;case 30:break;case 21:break;default:ln(e,t),on(t)}}function on(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(O1(i)){n=i;break}i=i.return}if(n==null)throw Error(X(160));switch(n.tag){case 27:var r=n.stateNode,s=Jh(t);Zu(t,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(la(a,""),n.flags&=-33);var l=Jh(t);Zu(t,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=Jh(t);rd(t,h,u);break;default:throw Error(X(161))}}catch(c){Me(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function P1(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;P1(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function qi(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)V1(t,e.alternate,e),e=e.sibling}function Lr(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:br(4,e,e.return),Lr(e);break;case 1:Xn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&I1(e,e.return,n),Lr(e);break;case 27:Al(e.stateNode);case 26:case 5:Xn(e,e.return),Lr(e);break;case 22:e.memoizedState===null&&Lr(e);break;case 30:Lr(e);break;default:Lr(e)}t=t.sibling}}function Gi(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:Gi(r,s,n),co(4,s);break;case 1:if(Gi(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){Me(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)V_(u[r],l)}catch(h){Me(i,i.return,h)}}n&&a&64&&C1(s),_l(s,s.return);break;case 27:M1(s);case 26:case 5:Gi(r,s,n),n&&i===null&&a&4&&D1(s),_l(s,s.return);break;case 12:Gi(r,s,n);break;case 13:Gi(r,s,n),n&&a&4&&U1(r,s);break;case 22:s.memoizedState===null&&Gi(r,s,n),_l(s,s.return);break;case 30:break;default:Gi(r,s,n)}e=e.sibling}}function km(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&ao(n))}function jm(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ao(t))}function Qn(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)L1(t,e,n,i),e=e.sibling}function L1(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:Qn(t,e,n,i),r&2048&&co(9,e);break;case 1:Qn(t,e,n,i);break;case 3:Qn(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ao(t)));break;case 12:if(r&2048){Qn(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){Me(e,e.return,u)}}else Qn(t,e,n,i);break;case 13:Qn(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?Qn(t,e,n,i):bl(t,e):s._visibility&2?Qn(t,e,n,i):(s._visibility|=2,Ns(t,e,n,i,(e.subtreeFlags&10256)!==0)),r&2048&&km(a,e);break;case 24:Qn(t,e,n,i),r&2048&&jm(e.alternate,e);break;default:Qn(t,e,n,i)}}function Ns(t,e,n,i,r){for(r=r&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var s=t,a=e,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:Ns(s,a,l,u,r),co(8,a);break;case 23:break;case 22:var c=a.stateNode;a.memoizedState!==null?c._visibility&2?Ns(s,a,l,u,r):bl(s,a):(c._visibility|=2,Ns(s,a,l,u,r)),r&&h&2048&&km(a.alternate,a);break;case 24:Ns(s,a,l,u,r),r&&h&2048&&jm(a.alternate,a);break;default:Ns(s,a,l,u,r)}e=e.sibling}}function bl(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:bl(n,i),r&2048&&km(i.alternate,i);break;case 24:bl(n,i),r&2048&&jm(i.alternate,i);break;default:bl(n,i)}e=e.sibling}}var rl=8192;function Es(t){if(t.subtreeFlags&rl)for(t=t.child;t!==null;)B1(t),t=t.sibling}function B1(t){switch(t.tag){case 26:Es(t),t.flags&rl&&t.memoizedState!==null&&iw(Un,t.memoizedState,t.memoizedProps);break;case 5:Es(t);break;case 3:case 4:var e=Un;Un=rc(t.stateNode.containerInfo),Es(t),Un=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=rl,rl=16777216,Es(t),rl=e):Es(t));break;default:Es(t)}}function F1(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Wa(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Tt=i,H1(i,t)}F1(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)q1(t),t=t.sibling}function q1(t){switch(t.tag){case 0:case 11:case 15:Wa(t),t.flags&2048&&br(9,t,t.return);break;case 3:Wa(t);break;case 12:Wa(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,_u(t)):Wa(t);break;default:Wa(t)}}function _u(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Tt=i,H1(i,t)}F1(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:br(8,e,e.return),_u(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,_u(e));break;default:_u(e)}t=t.sibling}}function H1(t,e){for(;Tt!==null;){var n=Tt;switch(n.tag){case 0:case 11:case 15:br(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:ao(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Tt=i;else e:for(n=t;Tt!==null;){i=Tt;var r=i.sibling,s=i.return;if(k1(i),i===n){Tt=null;break e}if(r!==null){r.return=s,Tt=r;break e}Tt=s}}}var _x={getCacheForType:function(t){var e=Pt(mt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},bx=typeof WeakMap=="function"?WeakMap:Map,Ne=0,Ue=null,de=null,ve=0,Re=0,un=null,ir=!1,Ra=!1,Um=!1,Di=0,We=0,Tr=0,Zr=0,zm=0,Nn=0,fa=0,Tl=null,Kt=null,sd=!1,Pm=0,Ju=1/0,Wu=null,ur=null,Nt=0,cr=null,da=null,ea=0,ad=0,ld=null,G1=null,El=0,od=null;function dn(){if(Ne&2&&ve!==0)return ve&-ve;if(se.T!==null){var t=oa;return t!==0?t:Bm()}return n_()}function Q1(){Nn===0&&(Nn=!(ve&536870912)||Ee?Jv():536870912);var t=In.current;return t!==null&&(t.flags|=32),Nn}function mn(t,e,n){(t===Ue&&(Re===2||Re===9)||t.cancelPendingCommit!==null)&&(ma(t,0),rr(t,ve,Nn,!1)),to(t,n),(!(Ne&2)||t!==Ue)&&(t===Ue&&(!(Ne&2)&&(Zr|=n),We===4&&rr(t,ve,Nn,!1)),ui(t))}function Y1(t,e,n){if(Ne&6)throw Error(X(327));var i=!n&&(e&124)===0&&(e&t.expiredLanes)===0||eo(t,e),r=i?Ax(t,e):tf(t,e,!0),s=i;do{if(r===0){Ra&&!i&&rr(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!Tx(n)){r=tf(t,e,!1),s=!1;continue}if(r===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var l=t;r=Tl;var u=l.current.memoizedState.isDehydrated;if(u&&(ma(l,a).flags|=256),a=tf(l,a,!1),a!==2){if(Um&&!u){l.errorRecoveryDisabledLanes|=s,Zr|=s,r=4;break e}s=Kt,Kt=r,s!==null&&(Kt===null?Kt=s:Kt.push.apply(Kt,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){ma(t,0),rr(t,e,0,!0);break}e:{switch(i=t,s=r,s){case 0:case 1:throw Error(X(345));case 4:if((e&4194048)!==e)break;case 6:rr(i,e,Nn,!ir);break e;case 2:Kt=null;break;case 3:case 5:break;default:throw Error(X(329))}if((e&62914560)===e&&(r=Pm+300-Wn(),10<r)){if(rr(i,e,Nn,!ir),Uc(i,0,!0)!==0)break e;i.timeoutHandle=fb(R0.bind(null,i,n,Kt,Wu,sd,e,Nn,Zr,fa,ir,s,2,-0,0),r);break e}R0(i,n,Kt,Wu,sd,e,Nn,Zr,fa,ir,s,0,-0,0)}}break}while(!0);ui(t)}function R0(t,e,n,i,r,s,a,l,u,h,c,d,f,g){if(t.timeoutHandle=-1,d=e.subtreeFlags,(d&8192||(d&16785408)===16785408)&&(Pl={stylesheets:null,count:0,unsuspend:nw},B1(e),d=rw(),d!==null)){t.cancelPendingCommit=d(C0.bind(null,t,e,s,n,i,r,a,l,u,c,1,f,g)),rr(t,s,a,!h);return}C0(t,e,s,n,i,r,a,l,u)}function Tx(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!pn(s(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rr(t,e,n,i){e&=~zm,e&=~Zr,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-fn(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&e_(t,n,e)}function Yc(){return Ne&6?!0:(ho(0),!1)}function Lm(){if(de!==null){if(Re===0)var t=de.return;else t=de,Ai=hs=null,Sm(t),Ws=null,jl=0,t=de;for(;t!==null;)N1(t.alternate,t),t=t.return;de=null}}function ma(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Px(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Lm(),Ue=t,de=n=Si(t.current,null),ve=e,Re=0,un=null,ir=!1,Ra=eo(t,e),Um=!1,fa=Nn=zm=Zr=Tr=We=0,Kt=Tl=null,sd=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-fn(i),s=1<<r;e|=t[r],i&=~s}return Di=e,Bc(),n}function $1(t,e){he=null,se.H=Qu,e===lo||e===qc?(e=s0(),Re=3):e===O_?(e=s0(),Re=4):Re=e===E1?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,un=e,de===null&&(We=1,Ku(t,wn(e,t.current)))}function K1(){var t=se.H;return se.H=Qu,t===null?Qu:t}function X1(){var t=se.A;return se.A=_x,t}function ud(){We=4,ir||(ve&4194048)!==ve&&In.current!==null||(Ra=!0),!(Tr&134217727)&&!(Zr&134217727)||Ue===null||rr(Ue,ve,Nn,!1)}function tf(t,e,n){var i=Ne;Ne|=2;var r=K1(),s=X1();(Ue!==t||ve!==e)&&(Wu=null,ma(t,e)),e=!1;var a=We;e:do try{if(Re!==0&&de!==null){var l=de,u=un;switch(Re){case 8:Lm(),a=6;break e;case 3:case 2:case 9:case 6:In.current===null&&(e=!0);var h=Re;if(Re=0,un=null,Gs(t,l,u,h),n&&Ra){a=0;break e}break;default:h=Re,Re=0,un=null,Gs(t,l,u,h)}}Ex(),a=We;break}catch(c){$1(t,c)}while(!0);return e&&t.shellSuspendCounter++,Ai=hs=null,Ne=i,se.H=r,se.A=s,de===null&&(Ue=null,ve=0,Bc()),a}function Ex(){for(;de!==null;)Z1(de)}function Ax(t,e){var n=Ne;Ne|=2;var i=K1(),r=X1();Ue!==t||ve!==e?(Wu=null,Ju=Wn()+500,ma(t,e)):Ra=eo(t,e);e:do try{if(Re!==0&&de!==null){e=de;var s=un;t:switch(Re){case 1:Re=0,un=null,Gs(t,e,s,1);break;case 2:case 9:if(r0(s)){Re=0,un=null,N0(e);break}e=function(){Re!==2&&Re!==9||Ue!==t||(Re=7),ui(t)},s.then(e,e);break e;case 3:Re=7;break e;case 4:Re=5;break e;case 7:r0(s)?(Re=0,un=null,N0(e)):(Re=0,un=null,Gs(t,e,s,7));break;case 5:var a=null;switch(de.tag){case 26:a=de.memoizedState;case 5:case 27:var l=de;if(!a||gb(a)){Re=0,un=null;var u=l.sibling;if(u!==null)de=u;else{var h=l.return;h!==null?(de=h,$c(h)):de=null}break t}}Re=0,un=null,Gs(t,e,s,5);break;case 6:Re=0,un=null,Gs(t,e,s,6);break;case 8:Lm(),We=6;break e;default:throw Error(X(462))}}xx();break}catch(c){$1(t,c)}while(!0);return Ai=hs=null,se.H=i,se.A=r,Ne=n,de!==null?0:(Ue=null,ve=0,Bc(),We)}function xx(){for(;de!==null&&!Q2();)Z1(de)}function Z1(t){var e=R1(t.alternate,t,Di);t.memoizedProps=t.pendingProps,e===null?$c(t):de=e}function N0(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=T0(n,e,e.pendingProps,e.type,void 0,ve);break;case 11:e=T0(n,e,e.pendingProps,e.type.render,e.ref,ve);break;case 5:Sm(e);default:N1(n,e),e=de=N_(e,Di),e=R1(n,e,Di)}t.memoizedProps=t.pendingProps,e===null?$c(t):de=e}function Gs(t,e,n,i){Ai=hs=null,Sm(e),Ws=null,jl=0;var r=e.return;try{if(dx(t,r,e,n,ve)){We=1,Ku(t,wn(n,t.current)),de=null;return}}catch(s){if(r!==null)throw de=r,s;We=1,Ku(t,wn(n,t.current)),de=null;return}e.flags&32768?(Ee||i===1?t=!0:Ra||ve&536870912?t=!1:(ir=t=!0,(i===2||i===9||i===3||i===6)&&(i=In.current,i!==null&&i.tag===13&&(i.flags|=16384))),J1(e,t)):$c(e)}function $c(t){var e=t;do{if(e.flags&32768){J1(e,ir);return}t=e.return;var n=px(e.alternate,e,Di);if(n!==null){de=n;return}if(e=e.sibling,e!==null){de=e;return}de=e=t}while(e!==null);We===0&&(We=5)}function J1(t,e){do{var n=gx(t.alternate,t);if(n!==null){n.flags&=32767,de=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){de=t;return}de=t=n}while(t!==null);We=6,de=null}function C0(t,e,n,i,r,s,a,l,u){t.cancelPendingCommit=null;do Kc();while(Nt!==0);if(Ne&6)throw Error(X(327));if(e!==null){if(e===t.current)throw Error(X(177));if(s=e.lanes|e.childLanes,s|=dm,nA(t,n,s,a,l,u),t===Ue&&(de=Ue=null,ve=0),da=e,cr=t,ea=n,ad=s,ld=r,G1=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,Nx(ju,function(){return ib(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=se.T,se.T=null,r=Ae.p,Ae.p=2,a=Ne,Ne|=4;try{yx(t,e,n)}finally{Ne=a,Ae.p=r,se.T=i}}Nt=1,W1(),eb(),tb()}}function W1(){if(Nt===1){Nt=0;var t=cr,e=da,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=se.T,se.T=null;var i=Ae.p;Ae.p=2;var r=Ne;Ne|=4;try{z1(e,t);var s=dd,a=b_(t.containerInfo),l=s.focusedElem,u=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&__(l.ownerDocument.documentElement,l)){if(u!==null&&fm(l)){var h=u.start,c=u.end;if(c===void 0&&(c=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(c,l.value.length);else{var d=l.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var g=f.getSelection(),E=l.textContent.length,O=Math.min(u.start,E),k=u.end===void 0?O:Math.min(u.end,E);!g.extend&&O>k&&(a=k,k=O,O=a);var b=Xg(l,O),S=Xg(l,k);if(b&&S&&(g.rangeCount!==1||g.anchorNode!==b.node||g.anchorOffset!==b.offset||g.focusNode!==S.node||g.focusOffset!==S.offset)){var N=d.createRange();N.setStart(b.node,b.offset),g.removeAllRanges(),O>k?(g.addRange(N),g.extend(S.node,S.offset)):(N.setEnd(S.node,S.offset),g.addRange(N))}}}}for(d=[],g=l;g=g.parentNode;)g.nodeType===1&&d.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<d.length;l++){var M=d[l];M.element.scrollLeft=M.left,M.element.scrollTop=M.top}}lc=!!fd,dd=fd=null}finally{Ne=r,Ae.p=i,se.T=n}}t.current=e,Nt=2}}function eb(){if(Nt===2){Nt=0;var t=cr,e=da,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=se.T,se.T=null;var i=Ae.p;Ae.p=2;var r=Ne;Ne|=4;try{V1(t,e.alternate,e)}finally{Ne=r,Ae.p=i,se.T=n}}Nt=3}}function tb(){if(Nt===4||Nt===3){Nt=0,Y2();var t=cr,e=da,n=ea,i=G1;e.subtreeFlags&10256||e.flags&10256?Nt=5:(Nt=0,da=cr=null,nb(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(ur=null),sm(n),e=e.stateNode,hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Wl,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=se.T,r=Ae.p,Ae.p=2,se.T=null;try{for(var s=t.onRecoverableError,a=0;a<i.length;a++){var l=i[a];s(l.value,{componentStack:l.stack})}}finally{se.T=e,Ae.p=r}}ea&3&&Kc(),ui(t),r=t.pendingLanes,n&4194090&&r&42?t===od?El++:(El=0,od=t):El=0,ho(0)}}function nb(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,ao(e)))}function Kc(t){return W1(),eb(),tb(),ib()}function ib(){if(Nt!==5)return!1;var t=cr,e=ad;ad=0;var n=sm(ea),i=se.T,r=Ae.p;try{Ae.p=32>n?32:n,se.T=null,n=ld,ld=null;var s=cr,a=ea;if(Nt=0,da=cr=null,ea=0,Ne&6)throw Error(X(331));var l=Ne;if(Ne|=4,q1(s.current),L1(s,s.current,a,n),Ne=l,ho(0,!1),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Wl,s)}catch{}return!0}finally{Ae.p=r,se.T=i,nb(t,e)}}function I0(t,e,n){e=wn(n,e),e=td(t.stateNode,e,2),t=or(t,e,2),t!==null&&(to(t,2),ui(t))}function Me(t,e,n){if(t.tag===3)I0(t,t,n);else for(;e!==null;){if(e.tag===3){I0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ur===null||!ur.has(i))){t=wn(n,t),n=b1(2),i=or(e,n,2),i!==null&&(T1(n,i,e,t),to(i,2),ui(i));break}}e=e.return}}function nf(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new bx;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(Um=!0,r.add(n),t=wx.bind(null,t,e,n),e.then(t,t))}function wx(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ue===t&&(ve&n)===n&&(We===4||We===3&&(ve&62914560)===ve&&300>Wn()-Pm?!(Ne&2)&&ma(t,0):zm|=n,fa===ve&&(fa=0)),ui(t)}function rb(t,e){e===0&&(e=Wv()),t=Sa(t,e),t!==null&&(to(t,e),ui(t))}function Sx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rb(t,n)}function Rx(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(X(314))}i!==null&&i.delete(e),rb(t,n)}function Nx(t,e){return im(t,e)}var ec=null,Cs=null,cd=!1,tc=!1,rf=!1,Jr=0;function ui(t){t!==Cs&&t.next===null&&(Cs===null?ec=Cs=t:Cs=Cs.next=t),tc=!0,cd||(cd=!0,Ix())}function ho(t,e){if(!rf&&tc){rf=!0;do for(var n=!1,i=ec;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-fn(42|t)+1)-1,s&=r&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,D0(i,s))}else s=ve,s=Uc(i,i===Ue?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||eo(i,s)||(n=!0,D0(i,s));i=i.next}while(n);rf=!1}}function Cx(){sb()}function sb(){tc=cd=!1;var t=0;Jr!==0&&(zx()&&(t=Jr),Jr=0);for(var e=Wn(),n=null,i=ec;i!==null;){var r=i.next,s=ab(i,e);s===0?(i.next=null,n===null?ec=r:n.next=r,r===null&&(Cs=n)):(n=i,(t!==0||s&3)&&(tc=!0)),i=r}ho(t)}function ab(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-fn(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=tA(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}if(e=Ue,n=ve,n=Uc(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(Re===2||Re===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&Ch(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||eo(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&Ch(i),sm(n)){case 2:case 8:n=Xv;break;case 32:n=ju;break;case 268435456:n=Zv;break;default:n=ju}return i=lb.bind(null,t),n=im(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&Ch(i),t.callbackPriority=2,t.callbackNode=null,2}function lb(t,e){if(Nt!==0&&Nt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Kc()&&t.callbackNode!==n)return null;var i=ve;return i=Uc(t,t===Ue?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(Y1(t,i,e),ab(t,Wn()),t.callbackNode!=null&&t.callbackNode===n?lb.bind(null,t):null)}function D0(t,e){if(Kc())return null;Y1(t,e,!0)}function Ix(){Lx(function(){Ne&6?im(Kv,Cx):sb()})}function Bm(){return Jr===0&&(Jr=Jv()),Jr}function O0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:hu(""+t)}function M0(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function Dx(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var s=O0((r[en]||null).action),a=i.submitter;a&&(e=(e=a[en]||null)?O0(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var l=new zc("action","action",null,i,r);t.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Jr!==0){var u=a?M0(r,a):new FormData(r);Wf(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?M0(r,a):new FormData(r),Wf(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var sf=0;sf<Bf.length;sf++){var af=Bf[sf],Ox=af.toLowerCase(),Mx=af[0].toUpperCase()+af.slice(1);qn(Ox,"on"+Mx)}qn(E_,"onAnimationEnd");qn(A_,"onAnimationIteration");qn(x_,"onAnimationStart");qn("dblclick","onDoubleClick");qn("focusin","onFocus");qn("focusout","onBlur");qn(XA,"onTransitionRun");qn(ZA,"onTransitionStart");qn(JA,"onTransitionCancel");qn(w_,"onTransitionEnd");aa("onMouseEnter",["mouseout","mouseover"]);aa("onMouseLeave",["mouseout","mouseover"]);aa("onPointerEnter",["pointerout","pointerover"]);aa("onPointerLeave",["pointerout","pointerover"]);os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));os("onBeforeInput",["compositionend","keypress","textInput","paste"]);os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ul));function ob(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break e;s=l,r.currentTarget=h;try{s(r)}catch(c){$u(c)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break e;s=l,r.currentTarget=h;try{s(r)}catch(c){$u(c)}r.currentTarget=null,s=u}}}}function fe(t,e){var n=e[Vf];n===void 0&&(n=e[Vf]=new Set);var i=t+"__bubble";n.has(i)||(ub(e,t,2,!1),n.add(i))}function lf(t,e,n){var i=0;e&&(i|=4),ub(n,t,i,e)}var Jo="_reactListening"+Math.random().toString(36).slice(2);function Fm(t){if(!t[Jo]){t[Jo]=!0,i_.forEach(function(n){n!=="selectionchange"&&(Vx.has(n)||lf(n,!1,t),lf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jo]||(e[Jo]=!0,lf("selectionchange",!1,e))}}function ub(t,e,n,i){switch(Tb(e)){case 2:var r=lw;break;case 8:r=ow;break;default:r=Qm}n=r.bind(null,e,n,t),r=void 0,!zf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function of(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=js(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue e}l=l.parentNode}}i=i.return}h_(function(){var h=s,c=om(n),d=[];e:{var f=S_.get(t);if(f!==void 0){var g=zc,E=t;switch(t){case"keypress":if(du(n)===0)break e;case"keydown":case"keyup":g=NA;break;case"focusin":E="focus",g=Uh;break;case"focusout":E="blur",g=Uh;break;case"beforeblur":case"afterblur":g=Uh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=gA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=DA;break;case E_:case A_:case x_:g=_A;break;case w_:g=MA;break;case"scroll":case"scrollend":g=mA;break;case"wheel":g=kA;break;case"copy":case"cut":case"paste":g=TA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Fg;break;case"toggle":case"beforetoggle":g=UA}var O=(e&4)!==0,k=!O&&(t==="scroll"||t==="scrollend"),b=O?f!==null?f+"Capture":null:f;O=[];for(var S=h,N;S!==null;){var M=S;if(N=M.stateNode,M=M.tag,M!==5&&M!==26&&M!==27||N===null||b===null||(M=Dl(S,b),M!=null&&O.push(zl(S,M,N))),k)break;S=S.return}0<O.length&&(f=new g(f,E,null,n,c),d.push({event:f,listeners:O}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Uf&&(E=n.relatedTarget||n.fromElement)&&(js(E)||E[xa]))break e;if((g||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,g?(E=n.relatedTarget||n.toElement,g=h,E=E?js(E):null,E!==null&&(k=Jl(E),O=E.tag,E!==k||O!==5&&O!==27&&O!==6)&&(E=null)):(g=null,E=h),g!==E)){if(O=Lg,M="onMouseLeave",b="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(O=Fg,M="onPointerLeave",b="onPointerEnter",S="pointer"),k=g==null?f:il(g),N=E==null?f:il(E),f=new O(M,S+"leave",g,n,c),f.target=k,f.relatedTarget=N,M=null,js(c)===h&&(O=new O(b,S+"enter",E,n,c),O.target=N,O.relatedTarget=k,M=O),k=M,g&&E)t:{for(O=g,b=E,S=0,N=O;N;N=As(N))S++;for(N=0,M=b;M;M=As(M))N++;for(;0<S-N;)O=As(O),S--;for(;0<N-S;)b=As(b),N--;for(;S--;){if(O===b||b!==null&&O===b.alternate)break t;O=As(O),b=As(b)}O=null}else O=null;g!==null&&V0(d,f,g,O,!1),E!==null&&k!==null&&V0(d,k,E,O,!0)}}e:{if(f=h?il(h):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var j=Qg;else if(Gg(f))if(y_)j=YA;else{j=GA;var V=HA}else g=f.nodeName,!g||g.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?h&&lm(h.elementType)&&(j=Qg):j=QA;if(j&&(j=j(t,h))){g_(d,j,n,c);break e}V&&V(t,f,h),t==="focusout"&&h&&f.type==="number"&&h.memoizedProps.value!=null&&jf(f,"number",f.value)}switch(V=h?il(h):window,t){case"focusin":(Gg(V)||V.contentEditable==="true")&&(Ps=V,Pf=h,fl=null);break;case"focusout":fl=Pf=Ps=null;break;case"mousedown":Lf=!0;break;case"contextmenu":case"mouseup":case"dragend":Lf=!1,Zg(d,n,c);break;case"selectionchange":if(KA)break;case"keydown":case"keyup":Zg(d,n,c)}var w;if(hm)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else zs?m_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(d_&&n.locale!=="ko"&&(zs||y!=="onCompositionStart"?y==="onCompositionEnd"&&zs&&(w=f_()):(nr=c,um="value"in nr?nr.value:nr.textContent,zs=!0)),V=nc(h,y),0<V.length&&(y=new Bg(y,t,null,n,c),d.push({event:y,listeners:V}),w?y.data=w:(w=p_(n),w!==null&&(y.data=w)))),(w=PA?LA(t,n):BA(t,n))&&(y=nc(h,"onBeforeInput"),0<y.length&&(V=new Bg("onBeforeInput","beforeinput",null,n,c),d.push({event:V,listeners:y}),V.data=w)),Dx(d,t,h,n,c)}ob(d,e)})}function zl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function nc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=Dl(t,n),r!=null&&i.unshift(zl(t,r,s)),r=Dl(t,e),r!=null&&i.push(zl(t,r,s))),t.tag===3)return i;t=t.return}return[]}function As(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function V0(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=Dl(n,s),h!=null&&a.unshift(zl(n,h,u))):r||(h=Dl(n,s),h!=null&&a.push(zl(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var kx=/\r\n?/g,jx=/\u0000|\uFFFD/g;function k0(t){return(typeof t=="string"?t:""+t).replace(kx,`
`).replace(jx,"")}function cb(t,e){return e=k0(e),k0(t)===e}function Xc(){}function Ce(t,e,n,i,r,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||la(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&la(t,""+i);break;case"className":Go(t,"class",i);break;case"tabIndex":Go(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Go(t,n,i);break;case"style":c_(t,i,s);break;case"data":if(e!=="object"){Go(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=hu(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&Ce(t,e,"name",r.name,r,null),Ce(t,e,"formEncType",r.formEncType,r,null),Ce(t,e,"formMethod",r.formMethod,r,null),Ce(t,e,"formTarget",r.formTarget,r,null)):(Ce(t,e,"encType",r.encType,r,null),Ce(t,e,"method",r.method,r,null),Ce(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=hu(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Xc);break;case"onScroll":i!=null&&fe("scroll",t);break;case"onScrollEnd":i!=null&&fe("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(X(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(X(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=hu(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":fe("beforetoggle",t),fe("toggle",t),cu(t,"popover",i);break;case"xlinkActuate":mi(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":mi(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":mi(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":mi(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":mi(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":mi(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":mi(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":mi(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":mi(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":cu(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=fA.get(n)||n,cu(t,n,i))}}function hd(t,e,n,i,r,s){switch(n){case"style":c_(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(X(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(X(60));t.innerHTML=n}}break;case"children":typeof i=="string"?la(t,i):(typeof i=="number"||typeof i=="bigint")&&la(t,""+i);break;case"onScroll":i!=null&&fe("scroll",t);break;case"onScrollEnd":i!=null&&fe("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Xc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!r_.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),s=t[en]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):cu(t,n,i)}}}function It(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fe("error",t),fe("load",t);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(X(137,e));default:Ce(t,e,s,a,n,null)}}r&&Ce(t,e,"srcSet",n.srcSet,n,null),i&&Ce(t,e,"src",n.src,n,null);return;case"input":fe("invalid",t);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var c=n[i];if(c!=null)switch(i){case"name":r=c;break;case"type":a=c;break;case"checked":u=c;break;case"defaultChecked":h=c;break;case"value":s=c;break;case"defaultValue":l=c;break;case"children":case"dangerouslySetInnerHTML":if(c!=null)throw Error(X(137,e));break;default:Ce(t,e,i,c,n,null)}}l_(t,s,l,u,h,a,r,!1),Uu(t);return;case"select":fe("invalid",t),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Ce(t,e,r,l,n,null)}e=s,n=a,t.multiple=!!i,e!=null?$s(t,!!i,e,!1):n!=null&&$s(t,!!i,n,!0);return;case"textarea":fe("invalid",t),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(X(91));break;default:Ce(t,e,a,l,n,null)}u_(t,i,r,s),Uu(t);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ce(t,e,u,i,n,null)}return;case"dialog":fe("beforetoggle",t),fe("toggle",t),fe("cancel",t),fe("close",t);break;case"iframe":case"object":fe("load",t);break;case"video":case"audio":for(i=0;i<Ul.length;i++)fe(Ul[i],t);break;case"image":fe("error",t),fe("load",t);break;case"details":fe("toggle",t);break;case"embed":case"source":case"link":fe("error",t),fe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(X(137,e));default:Ce(t,e,h,i,n,null)}return;default:if(lm(e)){for(c in n)n.hasOwnProperty(c)&&(i=n[c],i!==void 0&&hd(t,e,c,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&Ce(t,e,l,i,n,null))}function Ux(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,c=null;for(g in n){var d=n[g];if(n.hasOwnProperty(g)&&d!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":u=d;default:i.hasOwnProperty(g)||Ce(t,e,g,null,i,d)}}for(var f in i){var g=i[f];if(d=n[f],i.hasOwnProperty(f)&&(g!=null||d!=null))switch(f){case"type":s=g;break;case"name":r=g;break;case"checked":h=g;break;case"defaultChecked":c=g;break;case"value":a=g;break;case"defaultValue":l=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(X(137,e));break;default:g!==d&&Ce(t,e,f,g,i,d)}}kf(t,a,l,u,h,c,s,r);return;case"select":g=a=l=f=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":g=u;default:i.hasOwnProperty(s)||Ce(t,e,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&Ce(t,e,r,s,i,u)}e=l,n=a,i=g,f!=null?$s(t,!!n,f,!1):!!i!=!!n&&(e!=null?$s(t,!!n,e,!0):$s(t,!!n,n?[]:"",!1));return;case"textarea":g=f=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ce(t,e,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":f=r;break;case"defaultValue":g=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(X(91));break;default:r!==s&&Ce(t,e,a,r,i,s)}o_(t,f,g);return;case"option":for(var E in n)if(f=n[E],n.hasOwnProperty(E)&&f!=null&&!i.hasOwnProperty(E))switch(E){case"selected":t.selected=!1;break;default:Ce(t,e,E,null,i,f)}for(u in i)if(f=i[u],g=n[u],i.hasOwnProperty(u)&&f!==g&&(f!=null||g!=null))switch(u){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ce(t,e,u,f,i,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)f=n[O],n.hasOwnProperty(O)&&f!=null&&!i.hasOwnProperty(O)&&Ce(t,e,O,null,i,f);for(h in i)if(f=i[h],g=n[h],i.hasOwnProperty(h)&&f!==g&&(f!=null||g!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(X(137,e));break;default:Ce(t,e,h,f,i,g)}return;default:if(lm(e)){for(var k in n)f=n[k],n.hasOwnProperty(k)&&f!==void 0&&!i.hasOwnProperty(k)&&hd(t,e,k,void 0,i,f);for(c in i)f=i[c],g=n[c],!i.hasOwnProperty(c)||f===g||f===void 0&&g===void 0||hd(t,e,c,f,i,g);return}}for(var b in n)f=n[b],n.hasOwnProperty(b)&&f!=null&&!i.hasOwnProperty(b)&&Ce(t,e,b,null,i,f);for(d in i)f=i[d],g=n[d],!i.hasOwnProperty(d)||f===g||f==null&&g==null||Ce(t,e,d,f,i,g)}var fd=null,dd=null;function ic(t){return t.nodeType===9?t:t.ownerDocument}function j0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hb(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function md(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var uf=null;function zx(){var t=window.event;return t&&t.type==="popstate"?t===uf?!1:(uf=t,!0):(uf=null,!1)}var fb=typeof setTimeout=="function"?setTimeout:void 0,Px=typeof clearTimeout=="function"?clearTimeout:void 0,U0=typeof Promise=="function"?Promise:void 0,Lx=typeof queueMicrotask=="function"?queueMicrotask:typeof U0<"u"?function(t){return U0.resolve(null).then(t).catch(Bx)}:fb;function Bx(t){setTimeout(function(){throw t})}function Ir(t){return t==="head"}function z0(t,e){var n=e,i=0,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=t.ownerDocument;if(n&1&&Al(a.documentElement),n&2&&Al(a.body),n&4)for(n=a.head,Al(n),a=n.firstChild;a;){var l=a.nextSibling,u=a.nodeName;a[no]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(r===0){t.removeChild(s),ql(e);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);ql(e)}function pd(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":pd(n),am(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function Fx(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[no])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=Ln(t.nextSibling),t===null)break}return null}function qx(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Ln(t.nextSibling),t===null))return null;return t}function gd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Hx(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function Ln(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var yd=null;function P0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function db(t,e,n){switch(e=ic(n),t){case"html":if(t=e.documentElement,!t)throw Error(X(452));return t;case"head":if(t=e.head,!t)throw Error(X(453));return t;case"body":if(t=e.body,!t)throw Error(X(454));return t;default:throw Error(X(451))}}function Al(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);am(t)}var Dn=new Map,L0=new Set;function rc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ji=Ae.d;Ae.d={f:Gx,r:Qx,D:Yx,C:$x,L:Kx,m:Xx,X:Jx,S:Zx,M:Wx};function Gx(){var t=ji.f(),e=Yc();return t||e}function Qx(t){var e=wa(t);e!==null&&e.tag===5&&e.type==="form"?a1(e):ji.r(t)}var Na=typeof document>"u"?null:document;function mb(t,e,n){var i=Na;if(i&&typeof e=="string"&&e){var r=xn(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),L0.has(r)||(L0.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),It(e,"link",t),Et(e),i.head.appendChild(e)))}}function Yx(t){ji.D(t),mb("dns-prefetch",t,null)}function $x(t,e){ji.C(t,e),mb("preconnect",t,e)}function Kx(t,e,n){ji.L(t,e,n);var i=Na;if(i&&t&&e){var r='link[rel="preload"][as="'+xn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+xn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+xn(n.imageSizes)+'"]')):r+='[href="'+xn(t)+'"]';var s=r;switch(e){case"style":s=pa(t);break;case"script":s=Ca(t)}Dn.has(s)||(t=Be({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Dn.set(s,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(fo(s))||e==="script"&&i.querySelector(mo(s))||(e=i.createElement("link"),It(e,"link",t),Et(e),i.head.appendChild(e)))}}function Xx(t,e){ji.m(t,e);var n=Na;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+xn(i)+'"][href="'+xn(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Ca(t)}if(!Dn.has(s)&&(t=Be({rel:"modulepreload",href:t},e),Dn.set(s,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(mo(s)))return}i=n.createElement("link"),It(i,"link",t),Et(i),n.head.appendChild(i)}}}function Zx(t,e,n){ji.S(t,e,n);var i=Na;if(i&&t){var r=Ys(i).hoistableStyles,s=pa(t);e=e||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(fo(s)))l.loading=5;else{t=Be({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Dn.get(s))&&qm(t,n);var u=a=i.createElement("link");Et(u),It(u,"link",t),u._p=new Promise(function(h,c){u.onload=h,u.onerror=c}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,bu(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function Jx(t,e){ji.X(t,e);var n=Na;if(n&&t){var i=Ys(n).hoistableScripts,r=Ca(t),s=i.get(r);s||(s=n.querySelector(mo(r)),s||(t=Be({src:t,async:!0},e),(e=Dn.get(r))&&Hm(t,e),s=n.createElement("script"),Et(s),It(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function Wx(t,e){ji.M(t,e);var n=Na;if(n&&t){var i=Ys(n).hoistableScripts,r=Ca(t),s=i.get(r);s||(s=n.querySelector(mo(r)),s||(t=Be({src:t,async:!0,type:"module"},e),(e=Dn.get(r))&&Hm(t,e),s=n.createElement("script"),Et(s),It(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function B0(t,e,n,i){var r=(r=ar.current)?rc(r):null;if(!r)throw Error(X(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=pa(n.href),n=Ys(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=pa(n.href);var s=Ys(r).hoistableStyles,a=s.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=r.querySelector(fo(t)))&&!s._p&&(a.instance=s,a.state.loading=5),Dn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Dn.set(t,n),s||ew(r,t,n,a.state))),e&&i===null)throw Error(X(528,""));return a}if(e&&i!==null)throw Error(X(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Ca(n),n=Ys(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(X(444,t))}}function pa(t){return'href="'+xn(t)+'"'}function fo(t){return'link[rel="stylesheet"]['+t+"]"}function pb(t){return Be({},t,{"data-precedence":t.precedence,precedence:null})}function ew(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),It(e,"link",n),Et(e),t.head.appendChild(e))}function Ca(t){return'[src="'+xn(t)+'"]'}function mo(t){return"script[async]"+t}function F0(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+xn(n.href)+'"]');if(i)return e.instance=i,Et(i),i;var r=Be({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),Et(i),It(i,"style",r),bu(i,n.precedence,t),e.instance=i;case"stylesheet":r=pa(n.href);var s=t.querySelector(fo(r));if(s)return e.state.loading|=4,e.instance=s,Et(s),s;i=pb(n),(r=Dn.get(r))&&qm(i,r),s=(t.ownerDocument||t).createElement("link"),Et(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),It(s,"link",i),e.state.loading|=4,bu(s,n.precedence,t),e.instance=s;case"script":return s=Ca(n.src),(r=t.querySelector(mo(s)))?(e.instance=r,Et(r),r):(i=n,(r=Dn.get(s))&&(i=Be({},n),Hm(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),Et(r),It(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(X(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,bu(i,n.precedence,t));return e.instance}function bu(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===e)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function qm(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Hm(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Tu=null;function q0(t,e,n){if(Tu===null){var i=new Map,r=Tu=new Map;r.set(n,i)}else r=Tu,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[no]||s[zt]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function H0(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function tw(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function gb(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Pl=null;function nw(){}function iw(t,e,n){if(Pl===null)throw Error(X(475));var i=Pl;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var r=pa(n.href),s=t.querySelector(fo(r));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(i.count++,i=sc.bind(i),t.then(i,i)),e.state.loading|=4,e.instance=s,Et(s);return}s=t.ownerDocument||t,n=pb(n),(r=Dn.get(r))&&qm(n,r),s=s.createElement("link"),Et(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),It(s,"link",n),e.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(i.count++,e=sc.bind(i),t.addEventListener("load",e),t.addEventListener("error",e))}}function rw(){if(Pl===null)throw Error(X(475));var t=Pl;return t.stylesheets&&t.count===0&&vd(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&vd(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function sc(){if(this.count--,this.count===0){if(this.stylesheets)vd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ac=null;function vd(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ac=new Map,e.forEach(sw,t),ac=null,sc.call(t))}function sw(t,e){if(!(e.state.loading&4)){var n=ac.get(t);if(n)var i=n.get(null);else{n=new Map,ac.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=e.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=sc.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var Ll={$$typeof:bi,Provider:null,Consumer:null,_currentValue:Qr,_currentValue2:Qr,_threadCount:0};function aw(t,e,n,i,r,s,a,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ih(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ih(0),this.hiddenUpdates=Ih(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function yb(t,e,n,i,r,s,a,l,u,h,c,d){return t=new aw(t,e,n,a,l,u,h,d),e=1,s===!0&&(e|=24),s=cn(3,null,null,e),t.current=s,s.stateNode=t,e=vm(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},bm(s),t}function vb(t){return t?(t=Fs,t):Fs}function _b(t,e,n,i,r,s){r=vb(r),i.context===null?i.context=r:i.pendingContext=r,i=lr(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=or(t,i,e),n!==null&&(mn(n,t,e),pl(n,t,e))}function G0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Gm(t,e){G0(t,e),(t=t.alternate)&&G0(t,e)}function bb(t){if(t.tag===13){var e=Sa(t,67108864);e!==null&&mn(e,t,67108864),Gm(t,67108864)}}var lc=!0;function lw(t,e,n,i){var r=se.T;se.T=null;var s=Ae.p;try{Ae.p=2,Qm(t,e,n,i)}finally{Ae.p=s,se.T=r}}function ow(t,e,n,i){var r=se.T;se.T=null;var s=Ae.p;try{Ae.p=8,Qm(t,e,n,i)}finally{Ae.p=s,se.T=r}}function Qm(t,e,n,i){if(lc){var r=_d(i);if(r===null)of(t,e,i,oc,n),Q0(t,i);else if(cw(r,t,e,n,i))i.stopPropagation();else if(Q0(t,i),e&4&&-1<uw.indexOf(t)){for(;r!==null;){var s=wa(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=zr(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-fn(a);l.entanglements[1]|=u,a&=~u}ui(s),!(Ne&6)&&(Ju=Wn()+500,ho(0))}}break;case 13:l=Sa(s,2),l!==null&&mn(l,s,2),Yc(),Gm(s,2)}if(s=_d(i),s===null&&of(t,e,i,oc,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else of(t,e,i,null,n)}}function _d(t){return t=om(t),Ym(t)}var oc=null;function Ym(t){if(oc=null,t=js(t),t!==null){var e=Jl(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=Gv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return oc=t,null}function Tb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($2()){case Kv:return 2;case Xv:return 8;case ju:case K2:return 32;case Zv:return 268435456;default:return 32}default:return 32}}var bd=!1,hr=null,fr=null,dr=null,Bl=new Map,Fl=new Map,Zi=[],uw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Q0(t,e){switch(t){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":Bl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(e.pointerId)}}function el(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=wa(e),e!==null&&bb(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function cw(t,e,n,i,r){switch(e){case"focusin":return hr=el(hr,t,e,n,i,r),!0;case"dragenter":return fr=el(fr,t,e,n,i,r),!0;case"mouseover":return dr=el(dr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Bl.set(s,el(Bl.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Fl.set(s,el(Fl.get(s)||null,t,e,n,i,r)),!0}return!1}function Eb(t){var e=js(t.target);if(e!==null){var n=Jl(e);if(n!==null){if(e=n.tag,e===13){if(e=Gv(n),e!==null){t.blockedOn=e,iA(t.priority,function(){if(n.tag===13){var i=dn();i=rm(i);var r=Sa(n,i);r!==null&&mn(r,n,i),Gm(n,i)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Eu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_d(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Uf=i,n.target.dispatchEvent(i),Uf=null}else return e=wa(n),e!==null&&bb(e),t.blockedOn=n,!1;e.shift()}return!0}function Y0(t,e,n){Eu(t)&&n.delete(e)}function hw(){bd=!1,hr!==null&&Eu(hr)&&(hr=null),fr!==null&&Eu(fr)&&(fr=null),dr!==null&&Eu(dr)&&(dr=null),Bl.forEach(Y0),Fl.forEach(Y0)}function Wo(t,e){t.blockedOn===e&&(t.blockedOn=null,bd||(bd=!0,yt.unstable_scheduleCallback(yt.unstable_NormalPriority,hw)))}var eu=null;function $0(t){eu!==t&&(eu=t,yt.unstable_scheduleCallback(yt.unstable_NormalPriority,function(){eu===t&&(eu=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(Ym(i||n)===null)continue;break}var s=wa(n);s!==null&&(t.splice(e,3),e-=3,Wf(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function ql(t){function e(u){return Wo(u,t)}hr!==null&&Wo(hr,t),fr!==null&&Wo(fr,t),dr!==null&&Wo(dr,t),Bl.forEach(e),Fl.forEach(e);for(var n=0;n<Zi.length;n++){var i=Zi[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Zi.length&&(n=Zi[0],n.blockedOn===null);)Eb(n),n.blockedOn===null&&Zi.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[en]||null;if(typeof s=="function")a||$0(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[en]||null)l=a.formAction;else if(Ym(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),$0(n)}}}function $m(t){this._internalRoot=t}Zc.prototype.render=$m.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));var n=e.current,i=dn();_b(n,i,t,e,null,null)};Zc.prototype.unmount=$m.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_b(t.current,2,null,t,null,null),Yc(),e[xa]=null}};function Zc(t){this._internalRoot=t}Zc.prototype.unstable_scheduleHydration=function(t){if(t){var e=n_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zi.length&&e!==0&&e<Zi[n].priority;n++);Zi.splice(n,0,t),n===0&&Eb(t)}};var K0=qv.version;if(K0!=="19.1.0")throw Error(X(527,K0,"19.1.0"));Ae.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=B2(e),t=t!==null?Qv(t):null,t=t===null?null:t.stateNode,t};var fw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tu.isDisabled&&tu.supportsFiber)try{Wl=tu.inject(fw),hn=tu}catch{}}kc.createRoot=function(t,e){if(!Hv(t))throw Error(X(299));var n=!1,i="",r=y1,s=v1,a=_1,l=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(l=e.unstable_transitionCallbacks)),e=yb(t,1,!1,null,null,n,i,r,s,a,l,null),t[xa]=e.current,Fm(t),new $m(e)};kc.hydrateRoot=function(t,e,n){if(!Hv(t))throw Error(X(299));var i=!1,r="",s=y1,a=v1,l=_1,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),e=yb(t,1,!0,e,n??null,i,r,s,a,l,u,h),e.context=vb(null),n=e.current,i=dn(),i=rm(i),r=lr(i),r.callback=null,or(n,r,i),n=i,e.current.lanes=n,to(e,n),ui(e),t[xa]=e.current,Fm(t),new Zc(e)};kc.version="19.1.0";function Ab(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ab)}catch(t){console.error(t)}}Ab(),Uv.exports=kc;var dw=Uv.exports;const mw=Rv(dw),pw=()=>{};var X0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},gw=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],l=t[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},wb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,l=a?t[r+1]:0,u=r+2<t.length,h=u?t[r+2]:0,c=s>>2,d=(s&3)<<4|l>>4;let f=(l&15)<<2|h>>6,g=h&63;u||(g=64,a||(f=64)),i.push(n[c],n[d],n[f],n[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||l==null||h==null||d==null)throw new yw;const f=s<<2|l>>4;if(i.push(f),h!==64){const g=l<<4&240|h>>2;if(i.push(g),d!==64){const E=h<<6&192|d;i.push(E)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vw=function(t){const e=xb(t);return wb.encodeByteArray(e,!0)},Sb=function(t){return vw(t).replace(/\./g,"")},Rb=function(t){try{return wb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=()=>_w().__FIREBASE_DEFAULTS__,Tw=()=>{if(typeof process>"u"||typeof X0>"u")return;const t=X0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ew=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Rb(t[1]);return e&&JSON.parse(e)},Jc=()=>{try{return pw()||bw()||Tw()||Ew()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Aw=t=>{var e,n;return(n=(e=Jc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},xw=t=>{const e=Aw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Nb=()=>{var t;return(t=Jc())===null||t===void 0?void 0:t.config},ww=t=>{var e;return(e=Jc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Rw(t){return(await fetch(t,{credentials:"include"})).ok}const xl={};function Nw(){const t={prod:[],emulator:[]};for(const e of Object.keys(xl))xl[e]?t.emulator.push(e):t.prod.push(e);return t}function Cw(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Z0=!1;function Iw(t,e){if(typeof window>"u"||typeof document>"u"||!po(window.location.host)||xl[t]===e||xl[t]||Z0)return;xl[t]=e;function n(f){return`__firebase__banner__${f}`}const i="__firebase__banner",s=Nw().prod.length>0;function a(){const f=document.getElementById(i);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function u(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function h(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Z0=!0,a()},f}function c(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=Cw(i),g=n("text"),E=document.getElementById(g)||document.createElement("span"),O=n("learnmore"),k=document.getElementById(O)||document.createElement("a"),b=n("preprendIcon"),S=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const N=f.element;l(N),c(k,O);const M=h();u(S,b),N.append(S,E,k,M),document.body.appendChild(N)}s?(E.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Dw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bn())}function Ow(){var t;const e=(t=Jc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Vw(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jw(){return!Ow()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Uw(){try{return typeof indexedDB=="object"}catch{return!1}}function zw(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="FirebaseError";class ci extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Pw,Object.setPrototypeOf(this,ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,go.prototype.create)}}class go{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?Lw(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new ci(r,l,i)}}function Lw(t,e){return t.replace(Bw,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Bw=/\{\$([^}]+)}/g;function Td(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(J0(s)&&J0(a)){if(!Td(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function J0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Fw(t,e){const n=new qw(t,e);return n.subscribe.bind(n)}class qw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Hw(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=cf),r.error===void 0&&(r.error=cf),r.complete===void 0&&(r.complete=cf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hw(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(t){return t&&t._delegate?t._delegate:t}class Oi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Sw;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Yw(e))try{this.getOrInitializeService({instanceIdentifier:Br})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Br){return this.instances.has(e)}getOptions(e=Br){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Qw(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Br){return this.component?this.component.multipleInstances?e:Br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Qw(t){return t===Br?void 0:t}function Yw(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Gw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const Kw={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},Xw=me.INFO,Zw={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},Jw=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=Zw[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xm{constructor(e){this.name=e,this._logLevel=Xw,this._logHandler=Jw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const Ww=(t,e)=>e.some(n=>t instanceof n);let W0,ey;function eS(){return W0||(W0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tS(){return ey||(ey=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cb=new WeakMap,Ed=new WeakMap,Ib=new WeakMap,hf=new WeakMap,Zm=new WeakMap;function nS(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(mr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Cb.set(n,t)}).catch(()=>{}),Zm.set(e,t),e}function iS(t){if(Ed.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Ed.set(t,e)}let Ad={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ed.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ib.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rS(t){Ad=t(Ad)}function sS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(ff(this),e,...n);return Ib.set(i,e.sort?e.sort():[e]),mr(i)}:tS().includes(t)?function(...e){return t.apply(ff(this),e),mr(Cb.get(this))}:function(...e){return mr(t.apply(ff(this),e))}}function aS(t){return typeof t=="function"?sS(t):(t instanceof IDBTransaction&&iS(t),Ww(t,eS())?new Proxy(t,Ad):t)}function mr(t){if(t instanceof IDBRequest)return nS(t);if(hf.has(t))return hf.get(t);const e=aS(t);return e!==t&&(hf.set(t,e),Zm.set(e,t)),e}const ff=t=>Zm.get(t);function lS(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),l=mr(a);return i&&a.addEventListener("upgradeneeded",u=>{i(mr(a.result),u.oldVersion,u.newVersion,mr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const oS=["get","getKey","getAll","getAllKeys","count"],uS=["put","add","delete","clear"],df=new Map;function ty(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(df.get(e))return df.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=uS.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||oS.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return df.set(e,s),s}rS(t=>({...t,get:(e,n,i)=>ty(e,n)||t.get(e,n,i),has:(e,n)=>!!ty(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hS(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function hS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xd="@firebase/app",ny="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new Xm("@firebase/app"),fS="@firebase/app-compat",dS="@firebase/analytics-compat",mS="@firebase/analytics",pS="@firebase/app-check-compat",gS="@firebase/app-check",yS="@firebase/auth",vS="@firebase/auth-compat",_S="@firebase/database",bS="@firebase/data-connect",TS="@firebase/database-compat",ES="@firebase/functions",AS="@firebase/functions-compat",xS="@firebase/installations",wS="@firebase/installations-compat",SS="@firebase/messaging",RS="@firebase/messaging-compat",NS="@firebase/performance",CS="@firebase/performance-compat",IS="@firebase/remote-config",DS="@firebase/remote-config-compat",OS="@firebase/storage",MS="@firebase/storage-compat",VS="@firebase/firestore",kS="@firebase/ai",jS="@firebase/firestore-compat",US="firebase",zS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="[DEFAULT]",PS={[xd]:"fire-core",[fS]:"fire-core-compat",[mS]:"fire-analytics",[dS]:"fire-analytics-compat",[gS]:"fire-app-check",[pS]:"fire-app-check-compat",[yS]:"fire-auth",[vS]:"fire-auth-compat",[_S]:"fire-rtdb",[bS]:"fire-data-connect",[TS]:"fire-rtdb-compat",[ES]:"fire-fn",[AS]:"fire-fn-compat",[xS]:"fire-iid",[wS]:"fire-iid-compat",[SS]:"fire-fcm",[RS]:"fire-fcm-compat",[NS]:"fire-perf",[CS]:"fire-perf-compat",[IS]:"fire-rc",[DS]:"fire-rc-compat",[OS]:"fire-gcs",[MS]:"fire-gcs-compat",[VS]:"fire-fst",[jS]:"fire-fst-compat",[kS]:"fire-vertex","fire-js":"fire-js",[US]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=new Map,LS=new Map,Sd=new Map;function iy(t,e){try{t.container.addComponent(e)}catch(n){Mi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Er(t){const e=t.name;if(Sd.has(e))return Mi.debug(`There were multiple attempts to register component ${e}.`),!1;Sd.set(e,t);for(const n of uc.values())iy(n,t);for(const n of LS.values())iy(n,t);return!0}function BS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pr=new go("app","Firebase",FS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=zS;function HS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:wd,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw pr.create("bad-app-name",{appName:String(r)});if(n||(n=Nb()),!n)throw pr.create("no-options");const s=uc.get(r);if(s){if(Td(n,s.options)&&Td(i,s.config))return s;throw pr.create("duplicate-app",{appName:r})}const a=new $w(r);for(const u of Sd.values())a.addComponent(u);const l=new qS(n,i,a);return uc.set(r,l),l}function GS(t=wd){const e=uc.get(t);if(!e&&t===wd&&Nb())return HS();if(!e)throw pr.create("no-app",{appName:t});return e}function Cn(t,e,n){var i;let r=(i=PS[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mi.warn(l.join(" "));return}Er(new Oi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="firebase-heartbeat-database",YS=1,Hl="firebase-heartbeat-store";let mf=null;function Db(){return mf||(mf=lS(QS,YS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hl)}catch(n){console.warn(n)}}}}).catch(t=>{throw pr.create("idb-open",{originalErrorMessage:t.message})})),mf}async function $S(t){try{const n=(await Db()).transaction(Hl),i=await n.objectStore(Hl).get(Ob(t));return await n.done,i}catch(e){if(e instanceof ci)Mi.warn(e.message);else{const n=pr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mi.warn(n.message)}}}async function ry(t,e){try{const i=(await Db()).transaction(Hl,"readwrite");await i.objectStore(Hl).put(e,Ob(t)),await i.done}catch(n){if(n instanceof ci)Mi.warn(n.message);else{const i=pr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mi.warn(i.message)}}}function Ob(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=1024,XS=30;class ZS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WS(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=sy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>XS){const a=e4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Mi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sy(),{heartbeatsToSend:i,unsentEntries:r}=JS(this._heartbeatsCache.heartbeats),s=Sb(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Mi.warn(n),""}}}function sy(){return new Date().toISOString().substring(0,10)}function JS(t,e=KS){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),ay(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ay(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class WS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Uw()?zw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $S(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return ry(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return ry(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ay(t){return Sb(JSON.stringify({version:2,heartbeats:t})).length}function e4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(t){Er(new Oi("platform-logger",e=>new cS(e),"PRIVATE")),Er(new Oi("heartbeat",e=>new ZS(e),"PRIVATE")),Cn(xd,ny,t),Cn(xd,ny,"esm2017"),Cn("fire-js","")}t4("");var n4="firebase",i4="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn(n4,i4,"app");function Jm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function Mb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const r4=Mb,Vb=new go("auth","Firebase",Mb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new Xm("@firebase/auth");function s4(t,...e){cc.logLevel<=me.WARN&&cc.warn(`Auth (${yo}): ${t}`,...e)}function Au(t,...e){cc.logLevel<=me.ERROR&&cc.error(`Auth (${yo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t,...e){throw Wm(t,...e)}function kb(t,...e){return Wm(t,...e)}function jb(t,e,n){const i=Object.assign(Object.assign({},r4()),{[e]:n});return new go("auth","Firebase",i).create(e,{appName:t.name})}function xu(t){return jb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Vb.create(t,...e)}function Te(t,e,...n){if(!t)throw Wm(e,...n)}function wi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Au(e),new Error(e)}function fc(t,e){t||wi(e)}function a4(){return ly()==="http:"||ly()==="https:"}function ly(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(a4()||Vw()||"connection"in navigator)?navigator.onLine:!0}function o4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n){this.shortDelay=e,this.longDelay=n,fc(n>e,"Short delay should be less than long delay!"),this.isMobile=Dw()||kw()}get(){return l4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(t,e){fc(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],f4=new vo(3e4,6e4);function ep(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _o(t,e,n,i,r={}){return zb(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const l=Km(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},s);return Mw()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&po(t.emulatorConfig.host)&&(h.credentials="include"),Ub.fetch()(await Pb(t,t.config.apiHost,n,l),h)})}async function zb(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},c4),e);try{const r=new m4(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw nu(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw nu(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw nu(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw nu(t,"user-disabled",a);const c=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw jb(t,c,h);hc(t,c)}}catch(r){if(r instanceof ci)throw r;hc(t,"network-request-failed",{message:String(r)})}}async function d4(t,e,n,i,r={}){const s=await _o(t,e,n,i,r);return"mfaPendingCredential"in s&&hc(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function Pb(t,e,n,i){const r=`${e}${n}?${i}`,s=t,a=s.config.emulator?u4(t.config,r):`${t.config.apiScheme}://${r}`;return h4.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class m4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(kb(this.auth,"network-request-failed")),f4.get())})}}function nu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=kb(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p4(t,e){return _o(t,"POST","/v1/accounts:delete",e)}async function dc(t,e){return _o(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function g4(t,e=!1){const n=gn(t),i=await n.getIdToken(e),r=Lb(i);Te(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:wl(pf(r.auth_time)),issuedAtTime:wl(pf(r.iat)),expirationTime:wl(pf(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function pf(t){return Number(t)*1e3}function Lb(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Au("JWT malformed, contained fewer than 3 sections"),null;try{const r=Rb(n);return r?JSON.parse(r):(Au("Failed to decode base64 JWT payload"),null)}catch(r){return Au("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function oy(t){const e=Lb(t);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rd(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ci&&y4(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function y4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wl(this.lastLoginAt),this.creationTime=wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Rd(t,dc(n,{idToken:i}));Te(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Bb(s.providerUserInfo):[],l=b4(t.providerData,a),u=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),c=u?h:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Nd(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function _4(t){const e=gn(t);await mc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function b4(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Bb(t){return t.map(e=>{var{providerId:n}=e,i=Jm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(t,e){const n=await zb(t,{},async()=>{const i=Km({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=await Pb(t,r,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return t.emulatorConfig&&po(t.emulatorConfig.host)&&(u.credentials="include"),Ub.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function E4(t,e){return _o(t,"POST","/v2/accounts:revokeToken",ep(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=oy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await T4(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new ta;return i&&(Te(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(Te(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(Te(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ta,this.toJSON())}_performRefresh(){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(t,e){Te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zn{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Jm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new v4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Nd(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Rd(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return g4(this,e)}reload(){return _4(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await mc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vi(this.auth.app))return Promise.reject(xu(this.auth));const e=await this.getIdToken();return await Rd(this,p4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,a,l,u,h,c;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(a=n.photoURL)!==null&&a!==void 0?a:void 0,O=(l=n.tenantId)!==null&&l!==void 0?l:void 0,k=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,b=(h=n.createdAt)!==null&&h!==void 0?h:void 0,S=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:N,emailVerified:M,isAnonymous:j,providerData:V,stsTokenManager:w}=n;Te(N&&w,e,"internal-error");const y=ta.fromJSON(this.name,w);Te(typeof N=="string",e,"internal-error"),Hi(d,e.name),Hi(f,e.name),Te(typeof M=="boolean",e,"internal-error"),Te(typeof j=="boolean",e,"internal-error"),Hi(g,e.name),Hi(E,e.name),Hi(O,e.name),Hi(k,e.name),Hi(b,e.name),Hi(S,e.name);const v=new Zn({uid:N,auth:e,email:f,emailVerified:M,displayName:d,isAnonymous:j,photoURL:E,phoneNumber:g,tenantId:O,stsTokenManager:y,createdAt:b,lastLoginAt:S});return V&&Array.isArray(V)&&(v.providerData=V.map(T=>Object.assign({},T))),k&&(v._redirectEventId=k),v}static async _fromIdTokenResponse(e,n,i=!1){const r=new ta;r.updateFromServerResponse(n);const s=new Zn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await mc(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Te(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?Bb(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new ta;l.updateFromIdToken(i);const u=new Zn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Nd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy=new Map;function qr(t){fc(t instanceof Function,"Expected a class definition");let e=uy.get(t);return e?(fc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,uy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Fb.type="NONE";const cy=Fb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(t,e,n){return`firebase:${t}:${e}:${n}`}class na{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=gf(this.userKey,r.apiKey,s),this.fullPersistenceKey=gf("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await dc(this.auth,{idToken:e}).catch(()=>{});return n?Zn._fromGetAccountInfoResponse(this.auth,n,e):null}return Zn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new na(qr(cy),e,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||qr(cy);const a=gf(i,e.config.apiKey,e.name);let l=null;for(const h of n)try{const c=await h._get(a);if(c){let d;if(typeof c=="string"){const f=await dc(e,{idToken:c}).catch(()=>{});if(!f)break;d=await Zn._fromGetAccountInfoResponse(e,f,c)}else d=Zn._fromJSON(e,c);h!==s&&(l=d),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new na(s,e,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new na(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(S4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(A4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(N4(e))return"Blackberry";if(C4(e))return"Webos";if(x4(e))return"Safari";if((e.includes("chrome/")||w4(e))&&!e.includes("edge/"))return"Chrome";if(R4(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function A4(t=Bn()){return/firefox\//i.test(t)}function x4(t=Bn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function w4(t=Bn()){return/crios\//i.test(t)}function S4(t=Bn()){return/iemobile/i.test(t)}function R4(t=Bn()){return/android/i.test(t)}function N4(t=Bn()){return/blackberry/i.test(t)}function C4(t=Bn()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t,e=[]){let n;switch(t){case"Browser":n=hy(Bn());break;case"Worker":n=`${hy(Bn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,l)=>{try{const u=e(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(t,e={}){return _o(t,"GET","/v2/passwordPolicy",ep(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=6;class M4{constructor(e){var n,i,r,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:O4,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,a,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fy(this),this.idTokenSubscription=new fy(this),this.beforeStateQueue=new I4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qr(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await na.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dc(this,{idToken:e}),i=await Zn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(vi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await mc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=o4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vi(this.app))return Promise.reject(xu(this));const n=e?gn(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vi(this.app)?Promise.reject(xu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vi(this.app)?Promise.reject(xu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await D4(this),n=new M4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new go("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await E4(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qr(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await na.create(this,[qr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&s4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function k4(t){return gn(t)}class fy{constructor(e){this.auth=e,this.observer=null,this.addObserver=Fw(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function j4(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(qr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,n){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yf(t,e){return d4(t,"POST","/v1/accounts:signInWithIdp",ep(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4="http://localhost";class rs extends U4{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new rs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hc("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Jm(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new rs(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return yf(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,yf(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yf(e,n)}buildRequest(){const e={requestUri:z4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Km(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends P4{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Wc{constructor(){super("facebook.com")}static credential(e){return rs._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ji.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends Wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return rs._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return _i.credential(n,i)}catch{return null}}}_i.GOOGLE_SIGN_IN_METHOD="google.com";_i.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends Wc{constructor(){super("github.com")}static credential(e){return rs._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.GITHUB_SIGN_IN_METHOD="github.com";Wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends Wc{constructor(){super("twitter.com")}static credential(e,n){return rs._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return er.credential(n,i)}catch{return null}}}er.TWITTER_SIGN_IN_METHOD="twitter.com";er.PROVIDER_ID="twitter.com";new vo(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new vo(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new vo(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new vo(5e3,15e3);var dy="@firebase/auth",my="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function F4(t){Er(new Oi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;Te(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qb(t)},h=new V4(i,r,s,u);return j4(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Er(new Oi("auth-internal",e=>{const n=k4(e.getProvider("auth").getImmediate());return(i=>new L4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cn(dy,my,B4(t)),Cn(dy,my,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=5*60;ww("authIdTokenMaxAge");F4("Browser");var py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gr,Hb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,y){function v(){}v.prototype=y.prototype,w.D=y.prototype,w.prototype=new v,w.prototype.constructor=w,w.C=function(T,x,R){for(var A=Array(arguments.length-2),U=2;U<arguments.length;U++)A[U-2]=arguments[U];return y.prototype[x].apply(T,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,y,v){v||(v=0);var T=Array(16);if(typeof y=="string")for(var x=0;16>x;++x)T[x]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(x=0;16>x;++x)T[x]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=w.g[0],v=w.g[1],x=w.g[2];var R=w.g[3],A=y+(R^v&(x^R))+T[0]+3614090360&4294967295;y=v+(A<<7&4294967295|A>>>25),A=R+(x^y&(v^x))+T[1]+3905402710&4294967295,R=y+(A<<12&4294967295|A>>>20),A=x+(v^R&(y^v))+T[2]+606105819&4294967295,x=R+(A<<17&4294967295|A>>>15),A=v+(y^x&(R^y))+T[3]+3250441966&4294967295,v=x+(A<<22&4294967295|A>>>10),A=y+(R^v&(x^R))+T[4]+4118548399&4294967295,y=v+(A<<7&4294967295|A>>>25),A=R+(x^y&(v^x))+T[5]+1200080426&4294967295,R=y+(A<<12&4294967295|A>>>20),A=x+(v^R&(y^v))+T[6]+2821735955&4294967295,x=R+(A<<17&4294967295|A>>>15),A=v+(y^x&(R^y))+T[7]+4249261313&4294967295,v=x+(A<<22&4294967295|A>>>10),A=y+(R^v&(x^R))+T[8]+1770035416&4294967295,y=v+(A<<7&4294967295|A>>>25),A=R+(x^y&(v^x))+T[9]+2336552879&4294967295,R=y+(A<<12&4294967295|A>>>20),A=x+(v^R&(y^v))+T[10]+4294925233&4294967295,x=R+(A<<17&4294967295|A>>>15),A=v+(y^x&(R^y))+T[11]+2304563134&4294967295,v=x+(A<<22&4294967295|A>>>10),A=y+(R^v&(x^R))+T[12]+1804603682&4294967295,y=v+(A<<7&4294967295|A>>>25),A=R+(x^y&(v^x))+T[13]+4254626195&4294967295,R=y+(A<<12&4294967295|A>>>20),A=x+(v^R&(y^v))+T[14]+2792965006&4294967295,x=R+(A<<17&4294967295|A>>>15),A=v+(y^x&(R^y))+T[15]+1236535329&4294967295,v=x+(A<<22&4294967295|A>>>10),A=y+(x^R&(v^x))+T[1]+4129170786&4294967295,y=v+(A<<5&4294967295|A>>>27),A=R+(v^x&(y^v))+T[6]+3225465664&4294967295,R=y+(A<<9&4294967295|A>>>23),A=x+(y^v&(R^y))+T[11]+643717713&4294967295,x=R+(A<<14&4294967295|A>>>18),A=v+(R^y&(x^R))+T[0]+3921069994&4294967295,v=x+(A<<20&4294967295|A>>>12),A=y+(x^R&(v^x))+T[5]+3593408605&4294967295,y=v+(A<<5&4294967295|A>>>27),A=R+(v^x&(y^v))+T[10]+38016083&4294967295,R=y+(A<<9&4294967295|A>>>23),A=x+(y^v&(R^y))+T[15]+3634488961&4294967295,x=R+(A<<14&4294967295|A>>>18),A=v+(R^y&(x^R))+T[4]+3889429448&4294967295,v=x+(A<<20&4294967295|A>>>12),A=y+(x^R&(v^x))+T[9]+568446438&4294967295,y=v+(A<<5&4294967295|A>>>27),A=R+(v^x&(y^v))+T[14]+3275163606&4294967295,R=y+(A<<9&4294967295|A>>>23),A=x+(y^v&(R^y))+T[3]+4107603335&4294967295,x=R+(A<<14&4294967295|A>>>18),A=v+(R^y&(x^R))+T[8]+1163531501&4294967295,v=x+(A<<20&4294967295|A>>>12),A=y+(x^R&(v^x))+T[13]+2850285829&4294967295,y=v+(A<<5&4294967295|A>>>27),A=R+(v^x&(y^v))+T[2]+4243563512&4294967295,R=y+(A<<9&4294967295|A>>>23),A=x+(y^v&(R^y))+T[7]+1735328473&4294967295,x=R+(A<<14&4294967295|A>>>18),A=v+(R^y&(x^R))+T[12]+2368359562&4294967295,v=x+(A<<20&4294967295|A>>>12),A=y+(v^x^R)+T[5]+4294588738&4294967295,y=v+(A<<4&4294967295|A>>>28),A=R+(y^v^x)+T[8]+2272392833&4294967295,R=y+(A<<11&4294967295|A>>>21),A=x+(R^y^v)+T[11]+1839030562&4294967295,x=R+(A<<16&4294967295|A>>>16),A=v+(x^R^y)+T[14]+4259657740&4294967295,v=x+(A<<23&4294967295|A>>>9),A=y+(v^x^R)+T[1]+2763975236&4294967295,y=v+(A<<4&4294967295|A>>>28),A=R+(y^v^x)+T[4]+1272893353&4294967295,R=y+(A<<11&4294967295|A>>>21),A=x+(R^y^v)+T[7]+4139469664&4294967295,x=R+(A<<16&4294967295|A>>>16),A=v+(x^R^y)+T[10]+3200236656&4294967295,v=x+(A<<23&4294967295|A>>>9),A=y+(v^x^R)+T[13]+681279174&4294967295,y=v+(A<<4&4294967295|A>>>28),A=R+(y^v^x)+T[0]+3936430074&4294967295,R=y+(A<<11&4294967295|A>>>21),A=x+(R^y^v)+T[3]+3572445317&4294967295,x=R+(A<<16&4294967295|A>>>16),A=v+(x^R^y)+T[6]+76029189&4294967295,v=x+(A<<23&4294967295|A>>>9),A=y+(v^x^R)+T[9]+3654602809&4294967295,y=v+(A<<4&4294967295|A>>>28),A=R+(y^v^x)+T[12]+3873151461&4294967295,R=y+(A<<11&4294967295|A>>>21),A=x+(R^y^v)+T[15]+530742520&4294967295,x=R+(A<<16&4294967295|A>>>16),A=v+(x^R^y)+T[2]+3299628645&4294967295,v=x+(A<<23&4294967295|A>>>9),A=y+(x^(v|~R))+T[0]+4096336452&4294967295,y=v+(A<<6&4294967295|A>>>26),A=R+(v^(y|~x))+T[7]+1126891415&4294967295,R=y+(A<<10&4294967295|A>>>22),A=x+(y^(R|~v))+T[14]+2878612391&4294967295,x=R+(A<<15&4294967295|A>>>17),A=v+(R^(x|~y))+T[5]+4237533241&4294967295,v=x+(A<<21&4294967295|A>>>11),A=y+(x^(v|~R))+T[12]+1700485571&4294967295,y=v+(A<<6&4294967295|A>>>26),A=R+(v^(y|~x))+T[3]+2399980690&4294967295,R=y+(A<<10&4294967295|A>>>22),A=x+(y^(R|~v))+T[10]+4293915773&4294967295,x=R+(A<<15&4294967295|A>>>17),A=v+(R^(x|~y))+T[1]+2240044497&4294967295,v=x+(A<<21&4294967295|A>>>11),A=y+(x^(v|~R))+T[8]+1873313359&4294967295,y=v+(A<<6&4294967295|A>>>26),A=R+(v^(y|~x))+T[15]+4264355552&4294967295,R=y+(A<<10&4294967295|A>>>22),A=x+(y^(R|~v))+T[6]+2734768916&4294967295,x=R+(A<<15&4294967295|A>>>17),A=v+(R^(x|~y))+T[13]+1309151649&4294967295,v=x+(A<<21&4294967295|A>>>11),A=y+(x^(v|~R))+T[4]+4149444226&4294967295,y=v+(A<<6&4294967295|A>>>26),A=R+(v^(y|~x))+T[11]+3174756917&4294967295,R=y+(A<<10&4294967295|A>>>22),A=x+(y^(R|~v))+T[2]+718787259&4294967295,x=R+(A<<15&4294967295|A>>>17),A=v+(R^(x|~y))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(x+(A<<21&4294967295|A>>>11))&4294967295,w.g[2]=w.g[2]+x&4294967295,w.g[3]=w.g[3]+R&4294967295}i.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var v=y-this.blockSize,T=this.B,x=this.h,R=0;R<y;){if(x==0)for(;R<=v;)r(this,w,R),R+=this.blockSize;if(typeof w=="string"){for(;R<y;)if(T[x++]=w.charCodeAt(R++),x==this.blockSize){r(this,T),x=0;break}}else for(;R<y;)if(T[x++]=w[R++],x==this.blockSize){r(this,T),x=0;break}}this.h=x,this.o+=y},i.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var v=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=v&255,v/=256;for(this.u(w),w=Array(16),y=v=0;4>y;++y)for(var T=0;32>T;T+=8)w[v++]=this.g[y]>>>T&255;return w};function s(w,y){var v=l;return Object.prototype.hasOwnProperty.call(v,w)?v[w]:v[w]=y(w)}function a(w,y){this.h=y;for(var v=[],T=!0,x=w.length-1;0<=x;x--){var R=w[x]|0;T&&R==y||(v[x]=R,T=!1)}this.g=v}var l={};function u(w){return-128<=w&&128>w?s(w,function(y){return new a([y|0],0>y?-1:0)}):new a([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return d;if(0>w)return k(h(-w));for(var y=[],v=1,T=0;w>=v;T++)y[T]=w/v|0,v*=4294967296;return new a(y,0)}function c(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return k(c(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=h(Math.pow(y,8)),T=d,x=0;x<w.length;x+=8){var R=Math.min(8,w.length-x),A=parseInt(w.substring(x,x+R),y);8>R?(R=h(Math.pow(y,R)),T=T.j(R).add(h(A))):(T=T.j(v),T=T.add(h(A)))}return T}var d=u(0),f=u(1),g=u(16777216);t=a.prototype,t.m=function(){if(O(this))return-k(this).m();for(var w=0,y=1,v=0;v<this.g.length;v++){var T=this.i(v);w+=(0<=T?T:4294967296+T)*y,y*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(E(this))return"0";if(O(this))return"-"+k(this).toString(w);for(var y=h(Math.pow(w,6)),v=this,T="";;){var x=M(v,y).g;v=b(v,x.j(y));var R=((0<v.g.length?v.g[0]:v.h)>>>0).toString(w);if(v=x,E(v))return R+T;for(;6>R.length;)R="0"+R;T=R+T}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function E(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function O(w){return w.h==-1}t.l=function(w){return w=b(this,w),O(w)?-1:E(w)?0:1};function k(w){for(var y=w.g.length,v=[],T=0;T<y;T++)v[T]=~w.g[T];return new a(v,~w.h).add(f)}t.abs=function(){return O(this)?k(this):this},t.add=function(w){for(var y=Math.max(this.g.length,w.g.length),v=[],T=0,x=0;x<=y;x++){var R=T+(this.i(x)&65535)+(w.i(x)&65535),A=(R>>>16)+(this.i(x)>>>16)+(w.i(x)>>>16);T=A>>>16,R&=65535,A&=65535,v[x]=A<<16|R}return new a(v,v[v.length-1]&-2147483648?-1:0)};function b(w,y){return w.add(k(y))}t.j=function(w){if(E(this)||E(w))return d;if(O(this))return O(w)?k(this).j(k(w)):k(k(this).j(w));if(O(w))return k(this.j(k(w)));if(0>this.l(g)&&0>w.l(g))return h(this.m()*w.m());for(var y=this.g.length+w.g.length,v=[],T=0;T<2*y;T++)v[T]=0;for(T=0;T<this.g.length;T++)for(var x=0;x<w.g.length;x++){var R=this.i(T)>>>16,A=this.i(T)&65535,U=w.i(x)>>>16,B=w.i(x)&65535;v[2*T+2*x]+=A*B,S(v,2*T+2*x),v[2*T+2*x+1]+=R*B,S(v,2*T+2*x+1),v[2*T+2*x+1]+=A*U,S(v,2*T+2*x+1),v[2*T+2*x+2]+=R*U,S(v,2*T+2*x+2)}for(T=0;T<y;T++)v[T]=v[2*T+1]<<16|v[2*T];for(T=y;T<2*y;T++)v[T]=0;return new a(v,0)};function S(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function N(w,y){this.g=w,this.h=y}function M(w,y){if(E(y))throw Error("division by zero");if(E(w))return new N(d,d);if(O(w))return y=M(k(w),y),new N(k(y.g),k(y.h));if(O(y))return y=M(w,k(y)),new N(k(y.g),y.h);if(30<w.g.length){if(O(w)||O(y))throw Error("slowDivide_ only works with positive integers.");for(var v=f,T=y;0>=T.l(w);)v=j(v),T=j(T);var x=V(v,1),R=V(T,1);for(T=V(T,2),v=V(v,2);!E(T);){var A=R.add(T);0>=A.l(w)&&(x=x.add(v),R=A),T=V(T,1),v=V(v,1)}return y=b(w,x.j(y)),new N(x,y)}for(x=d;0<=w.l(y);){for(v=Math.max(1,Math.floor(w.m()/y.m())),T=Math.ceil(Math.log(v)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),R=h(v),A=R.j(y);O(A)||0<A.l(w);)v-=T,R=h(v),A=R.j(y);E(R)&&(R=f),x=x.add(R),w=b(w,A)}return new N(x,w)}t.A=function(w){return M(this,w).h},t.and=function(w){for(var y=Math.max(this.g.length,w.g.length),v=[],T=0;T<y;T++)v[T]=this.i(T)&w.i(T);return new a(v,this.h&w.h)},t.or=function(w){for(var y=Math.max(this.g.length,w.g.length),v=[],T=0;T<y;T++)v[T]=this.i(T)|w.i(T);return new a(v,this.h|w.h)},t.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),v=[],T=0;T<y;T++)v[T]=this.i(T)^w.i(T);return new a(v,this.h^w.h)};function j(w){for(var y=w.g.length+1,v=[],T=0;T<y;T++)v[T]=w.i(T)<<1|w.i(T-1)>>>31;return new a(v,w.h)}function V(w,y){var v=y>>5;y%=32;for(var T=w.g.length-v,x=[],R=0;R<T;R++)x[R]=0<y?w.i(R+v)>>>y|w.i(R+v+1)<<32-y:w.i(R+v);return new a(x,w.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Hb=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=c,gr=a}).apply(typeof py<"u"?py:typeof self<"u"?self:typeof window<"u"?window:{});var iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gb,sl,Qb,wu,Cd,Yb,$b,Kb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,m,_){return o==Array.prototype||o==Object.prototype||(o[m]=_.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof iu=="object"&&iu];for(var m=0;m<o.length;++m){var _=o[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function r(o,m){if(m)e:{var _=i;o=o.split(".");for(var D=0;D<o.length-1;D++){var L=o[D];if(!(L in _))break e;_=_[L]}o=o[o.length-1],D=_[o],m=m(D),m!=D&&m!=null&&e(_,o,{configurable:!0,writable:!0,value:m})}}function s(o,m){o instanceof String&&(o+="");var _=0,D=!1,L={next:function(){if(!D&&_<o.length){var Q=_++;return{value:m(Q,o[Q]),done:!1}}return D=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}r("Array.prototype.values",function(o){return o||function(){return s(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var m=typeof o;return m=m!="object"?m:o?Array.isArray(o)?"array":m:"null",m=="array"||m=="object"&&typeof o.length=="number"}function h(o){var m=typeof o;return m=="object"&&o!=null||m=="function"}function c(o,m,_){return o.call.apply(o.bind,arguments)}function d(o,m,_){if(!o)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,D),o.apply(m,L)}}return function(){return o.apply(m,arguments)}}function f(o,m,_){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,f.apply(null,arguments)}function g(o,m){var _=Array.prototype.slice.call(arguments,1);return function(){var D=_.slice();return D.push.apply(D,arguments),o.apply(this,D)}}function E(o,m){function _(){}_.prototype=m.prototype,o.aa=m.prototype,o.prototype=new _,o.prototype.constructor=o,o.Qb=function(D,L,Q){for(var Z=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)Z[Oe-2]=arguments[Oe];return m.prototype[L].apply(D,Z)}}function O(o){const m=o.length;if(0<m){const _=Array(m);for(let D=0;D<m;D++)_[D]=o[D];return _}return[]}function k(o,m){for(let _=1;_<arguments.length;_++){const D=arguments[_];if(u(D)){const L=o.length||0,Q=D.length||0;o.length=L+Q;for(let Z=0;Z<Q;Z++)o[L+Z]=D[Z]}else o.push(D)}}class b{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function S(o){return/^[\s\xa0]*$/.test(o)}function N(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function M(o){return M[" "](o),o}M[" "]=function(){};var j=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function V(o,m,_){for(const D in o)m.call(_,o[D],D,o)}function w(o,m){for(const _ in o)m.call(void 0,o[_],_,o)}function y(o){const m={};for(const _ in o)m[_]=o[_];return m}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(o,m){let _,D;for(let L=1;L<arguments.length;L++){D=arguments[L];for(_ in D)o[_]=D[_];for(let Q=0;Q<v.length;Q++)_=v[Q],Object.prototype.hasOwnProperty.call(D,_)&&(o[_]=D[_])}}function x(o){var m=1;o=o.split(":");const _=[];for(;0<m&&o.length;)_.push(o.shift()),m--;return o.length&&_.push(o.join(":")),_}function R(o){l.setTimeout(()=>{throw o},0)}function A(){var o=P;let m=null;return o.g&&(m=o.g,o.g=o.g.next,o.g||(o.h=null),m.next=null),m}class U{constructor(){this.h=this.g=null}add(m,_){const D=B.get();D.set(m,_),this.h?this.h.next=D:this.g=D,this.h=D}}var B=new b(()=>new I,o=>o.reset());class I{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let C,q=!1,P=new U,G=()=>{const o=l.Promise.resolve(void 0);C=()=>{o.then(W)}};var W=()=>{for(var o;o=A();){try{o.h.call(o.g)}catch(_){R(_)}var m=B;m.j(o),100>m.h&&(m.h++,o.next=m.g,m.g=o)}q=!1};function z(){this.s=this.s,this.C=this.C}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(o,m){this.type=o,this.g=this.target=m,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var F=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,m=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const _=()=>{};l.addEventListener("test",_,m),l.removeEventListener("test",_,m)}catch{}return o}();function H(o,m){if(Y.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var _=this.type=o.type,D=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=m,m=o.relatedTarget){if(j){e:{try{M(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else _=="mouseover"?m=o.fromElement:_=="mouseout"&&(m=o.toElement);this.relatedTarget=m,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:te[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&H.aa.h.call(this)}}E(H,Y);var te={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),ae=0;function ge(o,m,_,D,L){this.listener=o,this.proxy=null,this.src=m,this.type=_,this.capture=!!D,this.ha=L,this.key=++ae,this.da=this.fa=!1}function xe(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Ve(o){this.src=o,this.g={},this.h=0}Ve.prototype.add=function(o,m,_,D,L){var Q=o.toString();o=this.g[Q],o||(o=this.g[Q]=[],this.h++);var Z=On(o,m,D,L);return-1<Z?(m=o[Z],_||(m.fa=!1)):(m=new ge(m,this.src,Q,!!D,L),m.fa=_,o.push(m)),m};function Ye(o,m){var _=m.type;if(_ in o.g){var D=o.g[_],L=Array.prototype.indexOf.call(D,m,void 0),Q;(Q=0<=L)&&Array.prototype.splice.call(D,L,1),Q&&(xe(m),o.g[_].length==0&&(delete o.g[_],o.h--))}}function On(o,m,_,D){for(var L=0;L<o.length;++L){var Q=o[L];if(!Q.da&&Q.listener==m&&Q.capture==!!_&&Q.ha==D)return L}return-1}var Gt="closure_lm_"+(1e6*Math.random()|0),ke={};function ft(o,m,_,D,L){if(Array.isArray(m)){for(var Q=0;Q<m.length;Q++)ft(o,m[Q],_,D,L);return null}return _=Ot(_),o&&o[_e]?o.K(m,_,h(D)?!!D.capture:!1,L):je(o,m,_,!1,D,L)}function je(o,m,_,D,L,Q){if(!m)throw Error("Invalid event type");var Z=h(L)?!!L.capture:!!L,Oe=Fe(o);if(Oe||(o[Gt]=Oe=new Ve(o)),_=Oe.add(m,_,D,Z,Q),_.proxy)return _;if(D=De(),_.proxy=D,D.src=o,D.listener=_,o.addEventListener)F||(L=Z),L===void 0&&(L=!1),o.addEventListener(m.toString(),D,L);else if(o.attachEvent)o.attachEvent($e(m.toString()),D);else if(o.addListener&&o.removeListener)o.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return _}function De(){function o(_){return m.call(o.src,o.listener,_)}const m=Lt;return o}function rt(o,m,_,D,L){if(Array.isArray(m))for(var Q=0;Q<m.length;Q++)rt(o,m[Q],_,D,L);else D=h(D)?!!D.capture:!!D,_=Ot(_),o&&o[_e]?(o=o.i,m=String(m).toString(),m in o.g&&(Q=o.g[m],_=On(Q,_,D,L),-1<_&&(xe(Q[_]),Array.prototype.splice.call(Q,_,1),Q.length==0&&(delete o.g[m],o.h--)))):o&&(o=Fe(o))&&(m=o.g[m.toString()],o=-1,m&&(o=On(m,_,D,L)),(_=-1<o?m[o]:null)&&dt(_))}function dt(o){if(typeof o!="number"&&o&&!o.da){var m=o.src;if(m&&m[_e])Ye(m.i,o);else{var _=o.type,D=o.proxy;m.removeEventListener?m.removeEventListener(_,D,o.capture):m.detachEvent?m.detachEvent($e(_),D):m.addListener&&m.removeListener&&m.removeListener(D),(_=Fe(m))?(Ye(_,o),_.h==0&&(_.src=null,m[Gt]=null)):xe(o)}}}function $e(o){return o in ke?ke[o]:ke[o]="on"+o}function Lt(o,m){if(o.da)o=!0;else{m=new H(m,this);var _=o.listener,D=o.ha||o.src;o.fa&&dt(o),o=_.call(D,m)}return o}function Fe(o){return o=o[Gt],o instanceof Ve?o:null}var Se="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ot(o){return typeof o=="function"?o:(o[Se]||(o[Se]=function(m){return o.handleEvent(m)}),o[Se])}function ze(){z.call(this),this.i=new Ve(this),this.M=this,this.F=null}E(ze,z),ze.prototype[_e]=!0,ze.prototype.removeEventListener=function(o,m,_,D){rt(this,o,m,_,D)};function st(o,m){var _,D=o.F;if(D)for(_=[];D;D=D.F)_.push(D);if(o=o.M,D=m.type||m,typeof m=="string")m=new Y(m,o);else if(m instanceof Y)m.target=m.target||o;else{var L=m;m=new Y(D,o),T(m,L)}if(L=!0,_)for(var Q=_.length-1;0<=Q;Q--){var Z=m.g=_[Q];L=et(Z,D,!0,m)&&L}if(Z=m.g=o,L=et(Z,D,!0,m)&&L,L=et(Z,D,!1,m)&&L,_)for(Q=0;Q<_.length;Q++)Z=m.g=_[Q],L=et(Z,D,!1,m)&&L}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var o=this.i,m;for(m in o.g){for(var _=o.g[m],D=0;D<_.length;D++)xe(_[D]);delete o.g[m],o.h--}}this.F=null},ze.prototype.K=function(o,m,_,D){return this.i.add(String(o),m,!1,_,D)},ze.prototype.L=function(o,m,_,D){return this.i.add(String(o),m,!0,_,D)};function et(o,m,_,D){if(m=o.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,Q=0;Q<m.length;++Q){var Z=m[Q];if(Z&&!Z.da&&Z.capture==_){var Oe=Z.listener,wt=Z.ha||Z.src;Z.fa&&Ye(o.i,Z),L=Oe.call(wt,D)!==!1&&L}}return L&&!D.defaultPrevented}function Hn(o,m,_){if(typeof o=="function")_&&(o=f(o,_));else if(o&&typeof o.handleEvent=="function")o=f(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:l.setTimeout(o,m||0)}function vt(o){o.g=Hn(()=>{o.g=null,o.i&&(o.i=!1,vt(o))},o.l);const m=o.h;o.h=null,o.m.apply(null,m)}class nn extends z{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:vt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _t(o){z.call(this),this.h=o,this.g={}}E(_t,z);var yn=[];function rn(o){V(o.g,function(m,_){this.g.hasOwnProperty(_)&&dt(m)},o),o.g={}}_t.prototype.N=function(){_t.aa.N.call(this),rn(this)},_t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mn=l.JSON.stringify,ka=l.JSON.parse,ph=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Dr(){}Dr.prototype.h=null;function ja(o){return o.h||(o.h=o.i())}function Ui(){}var Or={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vn(){Y.call(this,"d")}E(vn,Y);function _n(){Y.call(this,"c")}E(_n,Y);var Qt={},zi=null;function Mr(){return zi=zi||new ze}Qt.La="serverreachability";function Gn(o){Y.call(this,Qt.La,o)}E(Gn,Y);function sn(o){const m=Mr();st(m,new Gn(m))}Qt.STAT_EVENT="statevent";function zp(o,m){Y.call(this,Qt.STAT_EVENT,o),this.stat=m}E(zp,Y);function Bt(o){const m=Mr();st(m,new zp(m,o))}Qt.Ma="timingevent";function Pp(o,m){Y.call(this,Qt.Ma,o),this.size=m}E(Pp,Y);function Ua(o,m){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},m)}function za(){this.g=!0}za.prototype.xa=function(){this.g=!1};function $E(o,m,_,D,L,Q){o.info(function(){if(o.g)if(Q)for(var Z="",Oe=Q.split("&"),wt=0;wt<Oe.length;wt++){var be=Oe[wt].split("=");if(1<be.length){var Mt=be[0];be=be[1];var Vt=Mt.split("_");Z=2<=Vt.length&&Vt[1]=="type"?Z+(Mt+"="+be+"&"):Z+(Mt+"=redacted&")}}else Z=null;else Z=Q;return"XMLHTTP REQ ("+D+") [attempt "+L+"]: "+m+`
`+_+`
`+Z})}function KE(o,m,_,D,L,Q,Z){o.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+L+"]: "+m+`
`+_+`
`+Q+" "+Z})}function vs(o,m,_,D){o.info(function(){return"XMLHTTP TEXT ("+m+"): "+ZE(o,_)+(D?" "+D:"")})}function XE(o,m){o.info(function(){return"TIMEOUT: "+m})}za.prototype.info=function(){};function ZE(o,m){if(!o.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(o=0;o<_.length;o++)if(Array.isArray(_[o])){var D=_[o];if(!(2>D.length)){var L=D[1];if(Array.isArray(L)&&!(1>L.length)){var Q=L[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var Z=1;Z<L.length;Z++)L[Z]=""}}}}return Mn(_)}catch{return m}}var Ro={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Lp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gh;function No(){}E(No,Dr),No.prototype.g=function(){return new XMLHttpRequest},No.prototype.i=function(){return{}},gh=new No;function Pi(o,m,_,D){this.j=o,this.i=m,this.l=_,this.R=D||1,this.U=new _t(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bp}function Bp(){this.i=null,this.g="",this.h=!1}var Fp={},yh={};function vh(o,m,_){o.L=1,o.v=Oo(fi(m)),o.m=_,o.P=!0,qp(o,null)}function qp(o,m){o.F=Date.now(),Co(o),o.A=fi(o.v);var _=o.A,D=o.R;Array.isArray(D)||(D=[String(D)]),ig(_.i,"t",D),o.C=0,_=o.j.J,o.h=new Bp,o.g=Tg(o.j,_?m:null,!o.m),0<o.O&&(o.M=new nn(f(o.Y,o,o.g),o.O)),m=o.U,_=o.g,D=o.ca;var L="readystatechange";Array.isArray(L)||(L&&(yn[0]=L.toString()),L=yn);for(var Q=0;Q<L.length;Q++){var Z=ft(_,L[Q],D||m.handleEvent,!1,m.h||m);if(!Z)break;m.g[Z.key]=Z}m=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,m)):(o.u="GET",o.g.ea(o.A,o.u,null,m)),sn(),$E(o.i,o.u,o.A,o.l,o.R,o.m)}Pi.prototype.ca=function(o){o=o.target;const m=this.M;m&&di(o)==3?m.j():this.Y(o)},Pi.prototype.Y=function(o){try{if(o==this.g)e:{const Vt=di(this.g);var m=this.g.Ba();const Ts=this.g.Z();if(!(3>Vt)&&(Vt!=3||this.g&&(this.h.h||this.g.oa()||cg(this.g)))){this.J||Vt!=4||m==7||(m==8||0>=Ts?sn(3):sn(2)),_h(this);var _=this.g.Z();this.X=_;t:if(Hp(this)){var D=cg(this.g);o="";var L=D.length,Q=di(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vr(this),Pa(this);var Z="";break t}this.h.i=new l.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,o+=this.h.i.decode(D[m],{stream:!(Q&&m==L-1)});D.length=0,this.h.g+=o,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=_==200,KE(this.i,this.u,this.A,this.l,this.R,Vt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,wt=this.g;if((Oe=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(Oe)){var be=Oe;break t}}be=null}if(_=be)vs(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bh(this,_);else{this.o=!1,this.s=3,Bt(12),Vr(this),Pa(this);break e}}if(this.P){_=!0;let Vn;for(;!this.J&&this.C<Z.length;)if(Vn=JE(this,Z),Vn==yh){Vt==4&&(this.s=4,Bt(14),_=!1),vs(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==Fp){this.s=4,Bt(15),vs(this.i,this.l,Z,"[Invalid Chunk]"),_=!1;break}else vs(this.i,this.l,Vn,null),bh(this,Vn);if(Hp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||Z.length!=0||this.h.h||(this.s=1,Bt(16),_=!1),this.o=this.o&&_,!_)vs(this.i,this.l,Z,"[Invalid Chunked Response]"),Vr(this),Pa(this);else if(0<Z.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Sh(Mt),Mt.M=!0,Bt(11))}}else vs(this.i,this.l,Z,null),bh(this,Z);Vt==4&&Vr(this),this.o&&!this.J&&(Vt==4?yg(this.j,this):(this.o=!1,Co(this)))}else p2(this.g),_==400&&0<Z.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),Vr(this),Pa(this)}}}catch{}finally{}};function Hp(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function JE(o,m){var _=o.C,D=m.indexOf(`
`,_);return D==-1?yh:(_=Number(m.substring(_,D)),isNaN(_)?Fp:(D+=1,D+_>m.length?yh:(m=m.slice(D,D+_),o.C=D+_,m)))}Pi.prototype.cancel=function(){this.J=!0,Vr(this)};function Co(o){o.S=Date.now()+o.I,Gp(o,o.I)}function Gp(o,m){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Ua(f(o.ba,o),m)}function _h(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Pi.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(XE(this.i,this.A),this.L!=2&&(sn(),Bt(17)),Vr(this),this.s=2,Pa(this)):Gp(this,this.S-o)};function Pa(o){o.j.G==0||o.J||yg(o.j,o)}function Vr(o){_h(o);var m=o.M;m&&typeof m.ma=="function"&&m.ma(),o.M=null,rn(o.U),o.g&&(m=o.g,o.g=null,m.abort(),m.ma())}function bh(o,m){try{var _=o.j;if(_.G!=0&&(_.g==o||Th(_.h,o))){if(!o.K&&Th(_.h,o)&&_.G==3){try{var D=_.Da.g.parse(m)}catch{D=null}if(Array.isArray(D)&&D.length==3){var L=D;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<o.F)zo(_),jo(_);else break e;wh(_),Bt(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=Ua(f(_.Za,_),6e3));if(1>=$p(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else jr(_,11)}else if((o.K||_.g==o)&&zo(_),!S(m))for(L=_.Da.g.parse(m),m=0;m<L.length;m++){let be=L[m];if(_.T=be[0],be=be[1],_.G==2)if(be[0]=="c"){_.K=be[1],_.ia=be[2];const Mt=be[3];Mt!=null&&(_.la=Mt,_.j.info("VER="+_.la));const Vt=be[4];Vt!=null&&(_.Aa=Vt,_.j.info("SVER="+_.Aa));const Ts=be[5];Ts!=null&&typeof Ts=="number"&&0<Ts&&(D=1.5*Ts,_.L=D,_.j.info("backChannelRequestTimeoutMs_="+D)),D=_;const Vn=o.g;if(Vn){const Lo=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lo){var Q=D.h;Q.g||Lo.indexOf("spdy")==-1&&Lo.indexOf("quic")==-1&&Lo.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Eh(Q,Q.h),Q.h=null))}if(D.D){const Rh=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Rh&&(D.ya=Rh,Pe(D.I,D.D,Rh))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-o.F,_.j.info("Handshake RTT: "+_.R+"ms")),D=_;var Z=o;if(D.qa=bg(D,D.J?D.ia:null,D.W),Z.K){Kp(D.h,Z);var Oe=Z,wt=D.L;wt&&(Oe.I=wt),Oe.B&&(_h(Oe),Co(Oe)),D.g=Z}else pg(D);0<_.i.length&&Uo(_)}else be[0]!="stop"&&be[0]!="close"||jr(_,7);else _.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?jr(_,7):xh(_):be[0]!="noop"&&_.l&&_.l.ta(be),_.v=0)}}sn(4)}catch{}}var WE=class{constructor(o,m){this.g=o,this.map=m}};function Qp(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yp(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function $p(o){return o.h?1:o.g?o.g.size:0}function Th(o,m){return o.h?o.h==m:o.g?o.g.has(m):!1}function Eh(o,m){o.g?o.g.add(m):o.h=m}function Kp(o,m){o.h&&o.h==m?o.h=null:o.g&&o.g.has(m)&&o.g.delete(m)}Qp.prototype.cancel=function(){if(this.i=Xp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Xp(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let m=o.i;for(const _ of o.g.values())m=m.concat(_.D);return m}return O(o.i)}function e2(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var m=[],_=o.length,D=0;D<_;D++)m.push(o[D]);return m}m=[],_=0;for(D in o)m[_++]=o[D];return m}function t2(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var m=[];o=o.length;for(var _=0;_<o;_++)m.push(_);return m}m=[],_=0;for(const D in o)m[_++]=D;return m}}}function Zp(o,m){if(o.forEach&&typeof o.forEach=="function")o.forEach(m,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,m,void 0);else for(var _=t2(o),D=e2(o),L=D.length,Q=0;Q<L;Q++)m.call(void 0,D[Q],_&&_[Q],o)}var Jp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function n2(o,m){if(o){o=o.split("&");for(var _=0;_<o.length;_++){var D=o[_].indexOf("="),L=null;if(0<=D){var Q=o[_].substring(0,D);L=o[_].substring(D+1)}else Q=o[_];m(Q,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function kr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof kr){this.h=o.h,Io(this,o.j),this.o=o.o,this.g=o.g,Do(this,o.s),this.l=o.l;var m=o.i,_=new Fa;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Wp(this,_),this.m=o.m}else o&&(m=String(o).match(Jp))?(this.h=!1,Io(this,m[1]||"",!0),this.o=La(m[2]||""),this.g=La(m[3]||"",!0),Do(this,m[4]),this.l=La(m[5]||"",!0),Wp(this,m[6]||"",!0),this.m=La(m[7]||"")):(this.h=!1,this.i=new Fa(null,this.h))}kr.prototype.toString=function(){var o=[],m=this.j;m&&o.push(Ba(m,eg,!0),":");var _=this.g;return(_||m=="file")&&(o.push("//"),(m=this.o)&&o.push(Ba(m,eg,!0),"@"),o.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&o.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&o.push("/"),o.push(Ba(_,_.charAt(0)=="/"?s2:r2,!0))),(_=this.i.toString())&&o.push("?",_),(_=this.m)&&o.push("#",Ba(_,l2)),o.join("")};function fi(o){return new kr(o)}function Io(o,m,_){o.j=_?La(m,!0):m,o.j&&(o.j=o.j.replace(/:$/,""))}function Do(o,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);o.s=m}else o.s=null}function Wp(o,m,_){m instanceof Fa?(o.i=m,o2(o.i,o.h)):(_||(m=Ba(m,a2)),o.i=new Fa(m,o.h))}function Pe(o,m,_){o.i.set(m,_)}function Oo(o){return Pe(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function La(o,m){return o?m?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ba(o,m,_){return typeof o=="string"?(o=encodeURI(o).replace(m,i2),_&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function i2(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var eg=/[#\/\?@]/g,r2=/[#\?:]/g,s2=/[#\?]/g,a2=/[#\?@]/g,l2=/#/g;function Fa(o,m){this.h=this.g=null,this.i=o||null,this.j=!!m}function Li(o){o.g||(o.g=new Map,o.h=0,o.i&&n2(o.i,function(m,_){o.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}t=Fa.prototype,t.add=function(o,m){Li(this),this.i=null,o=_s(this,o);var _=this.g.get(o);return _||this.g.set(o,_=[]),_.push(m),this.h+=1,this};function tg(o,m){Li(o),m=_s(o,m),o.g.has(m)&&(o.i=null,o.h-=o.g.get(m).length,o.g.delete(m))}function ng(o,m){return Li(o),m=_s(o,m),o.g.has(m)}t.forEach=function(o,m){Li(this),this.g.forEach(function(_,D){_.forEach(function(L){o.call(m,L,D,this)},this)},this)},t.na=function(){Li(this);const o=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let D=0;D<m.length;D++){const L=o[D];for(let Q=0;Q<L.length;Q++)_.push(m[D])}return _},t.V=function(o){Li(this);let m=[];if(typeof o=="string")ng(this,o)&&(m=m.concat(this.g.get(_s(this,o))));else{o=Array.from(this.g.values());for(let _=0;_<o.length;_++)m=m.concat(o[_])}return m},t.set=function(o,m){return Li(this),this.i=null,o=_s(this,o),ng(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[m]),this.h+=1,this},t.get=function(o,m){return o?(o=this.V(o),0<o.length?String(o[0]):m):m};function ig(o,m,_){tg(o,m),0<_.length&&(o.i=null,o.g.set(_s(o,m),O(_)),o.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var D=m[_];const Q=encodeURIComponent(String(D)),Z=this.V(D);for(D=0;D<Z.length;D++){var L=Q;Z[D]!==""&&(L+="="+encodeURIComponent(String(Z[D]))),o.push(L)}}return this.i=o.join("&")};function _s(o,m){return m=String(m),o.j&&(m=m.toLowerCase()),m}function o2(o,m){m&&!o.j&&(Li(o),o.i=null,o.g.forEach(function(_,D){var L=D.toLowerCase();D!=L&&(tg(this,D),ig(this,L,_))},o)),o.j=m}function u2(o,m){const _=new za;if(l.Image){const D=new Image;D.onload=g(Bi,_,"TestLoadImage: loaded",!0,m,D),D.onerror=g(Bi,_,"TestLoadImage: error",!1,m,D),D.onabort=g(Bi,_,"TestLoadImage: abort",!1,m,D),D.ontimeout=g(Bi,_,"TestLoadImage: timeout",!1,m,D),l.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=o}else m(!1)}function c2(o,m){const _=new za,D=new AbortController,L=setTimeout(()=>{D.abort(),Bi(_,"TestPingServer: timeout",!1,m)},1e4);fetch(o,{signal:D.signal}).then(Q=>{clearTimeout(L),Q.ok?Bi(_,"TestPingServer: ok",!0,m):Bi(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Bi(_,"TestPingServer: error",!1,m)})}function Bi(o,m,_,D,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),D(_)}catch{}}function h2(){this.g=new ph}function f2(o,m,_){const D=_||"";try{Zp(o,function(L,Q){let Z=L;h(L)&&(Z=Mn(L)),m.push(D+Q+"="+encodeURIComponent(Z))})}catch(L){throw m.push(D+"type="+encodeURIComponent("_badmap")),L}}function Mo(o){this.l=o.Ub||null,this.j=o.eb||!1}E(Mo,Dr),Mo.prototype.g=function(){return new Vo(this.l,this.j)},Mo.prototype.i=function(o){return function(){return o}}({});function Vo(o,m){ze.call(this),this.D=o,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Vo,ze),t=Vo.prototype,t.open=function(o,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=m,this.readyState=1,Ha(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(m.body=o),(this.D||l).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qa(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ha(this)),this.g&&(this.readyState=3,Ha(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rg(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function rg(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var m=o.value?o.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!o.done}))&&(this.response=this.responseText+=m)}o.done?qa(this):Ha(this),this.readyState==3&&rg(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,qa(this))},t.Qa=function(o){this.g&&(this.response=o,qa(this))},t.ga=function(){this.g&&qa(this)};function qa(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ha(o)}t.setRequestHeader=function(o,m){this.u.append(o,m)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,o.push(_[0]+": "+_[1]),_=m.next();return o.join(`\r
`)};function Ha(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Vo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function sg(o){let m="";return V(o,function(_,D){m+=D,m+=":",m+=_,m+=`\r
`}),m}function Ah(o,m,_){e:{for(D in _){var D=!1;break e}D=!0}D||(_=sg(_),typeof o=="string"?_!=null&&encodeURIComponent(String(_)):Pe(o,m,_))}function Ze(o){ze.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Ze,ze);var d2=/^https?$/i,m2=["POST","PUT"];t=Ze.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,m,_,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);m=m?m.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gh.g(),this.v=this.o?ja(this.o):ja(gh),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(m,String(o),!0),this.B=!1}catch(Q){ag(this,Q);return}if(o=_||"",_=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var L in D)_.set(L,D[L]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const Q of D.keys())_.set(Q,D.get(Q));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(_.keys()).find(Q=>Q.toLowerCase()=="content-type"),L=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(m2,m,void 0))||D||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,Z]of _)this.g.setRequestHeader(Q,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ug(this),this.u=!0,this.g.send(o),this.u=!1}catch(Q){ag(this,Q)}};function ag(o,m){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=m,o.m=5,lg(o),ko(o)}function lg(o){o.A||(o.A=!0,st(o,"complete"),st(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,st(this,"complete"),st(this,"abort"),ko(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ko(this,!0)),Ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?og(this):this.bb())},t.bb=function(){og(this)};function og(o){if(o.h&&typeof a<"u"&&(!o.v[1]||di(o)!=4||o.Z()!=2)){if(o.u&&di(o)==4)Hn(o.Ea,0,o);else if(st(o,"readystatechange"),di(o)==4){o.h=!1;try{const Z=o.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var D;if(D=Z===0){var L=String(o.D).match(Jp)[1]||null;!L&&l.self&&l.self.location&&(L=l.self.location.protocol.slice(0,-1)),D=!d2.test(L?L.toLowerCase():"")}_=D}if(_)st(o,"complete"),st(o,"success");else{o.m=6;try{var Q=2<di(o)?o.g.statusText:""}catch{Q=""}o.l=Q+" ["+o.Z()+"]",lg(o)}}finally{ko(o)}}}}function ko(o,m){if(o.g){ug(o);const _=o.g,D=o.v[0]?()=>{}:null;o.g=null,o.v=null,m||st(o,"ready");try{_.onreadystatechange=D}catch{}}}function ug(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function di(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<di(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var m=this.g.responseText;return o&&m.indexOf(o)==0&&(m=m.substring(o.length)),ka(m)}};function cg(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function p2(o){const m={};o=(o.g&&2<=di(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<o.length;D++){if(S(o[D]))continue;var _=x(o[D]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Q=m[L]||[];m[L]=Q,Q.push(_)}w(m,function(D){return D.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ga(o,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[o]||m}function hg(o){this.Aa=0,this.i=[],this.j=new za,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ga("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ga("baseRetryDelayMs",5e3,o),this.cb=Ga("retryDelaySeedMs",1e4,o),this.Wa=Ga("forwardChannelMaxRetries",2,o),this.wa=Ga("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Qp(o&&o.concurrentRequestLimit),this.Da=new h2,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hg.prototype,t.la=8,t.G=1,t.connect=function(o,m,_,D){Bt(0),this.W=o,this.H=m||{},_&&D!==void 0&&(this.H.OSID=_,this.H.OAID=D),this.F=this.X,this.I=bg(this,null,this.W),Uo(this)};function xh(o){if(fg(o),o.G==3){var m=o.U++,_=fi(o.I);if(Pe(_,"SID",o.K),Pe(_,"RID",m),Pe(_,"TYPE","terminate"),Qa(o,_),m=new Pi(o,o.j,m),m.L=2,m.v=Oo(fi(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&l.Image&&(new Image().src=m.v,_=!0),_||(m.g=Tg(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Co(m)}_g(o)}function jo(o){o.g&&(Sh(o),o.g.cancel(),o.g=null)}function fg(o){jo(o),o.u&&(l.clearTimeout(o.u),o.u=null),zo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Uo(o){if(!Yp(o.h)&&!o.s){o.s=!0;var m=o.Ga;C||G(),q||(C(),q=!0),P.add(m,o),o.B=0}}function g2(o,m){return $p(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=m.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Ua(f(o.Ga,o,m),vg(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const L=new Pi(this,this.j,o);let Q=this.o;if(this.S&&(Q?(Q=y(Q),T(Q,this.S)):Q=this.S),this.m!==null||this.O||(L.H=Q,Q=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var D=this.i[_];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(m+=D,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=mg(this,L,m),_=fi(this.I),Pe(_,"RID",o),Pe(_,"CVER",22),this.D&&Pe(_,"X-HTTP-Session-Id",this.D),Qa(this,_),Q&&(this.O?m="headers="+encodeURIComponent(String(sg(Q)))+"&"+m:this.m&&Ah(_,this.m,Q)),Eh(this.h,L),this.Ua&&Pe(_,"TYPE","init"),this.P?(Pe(_,"$req",m),Pe(_,"SID","null"),L.T=!0,vh(L,_,null)):vh(L,_,m),this.G=2}}else this.G==3&&(o?dg(this,o):this.i.length==0||Yp(this.h)||dg(this))};function dg(o,m){var _;m?_=m.l:_=o.U++;const D=fi(o.I);Pe(D,"SID",o.K),Pe(D,"RID",_),Pe(D,"AID",o.T),Qa(o,D),o.m&&o.o&&Ah(D,o.m,o.o),_=new Pi(o,o.j,_,o.B+1),o.m===null&&(_.H=o.o),m&&(o.i=m.D.concat(o.i)),m=mg(o,_,1e3),_.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Eh(o.h,_),vh(_,D,m)}function Qa(o,m){o.H&&V(o.H,function(_,D){Pe(m,D,_)}),o.l&&Zp({},function(_,D){Pe(m,D,_)})}function mg(o,m,_){_=Math.min(o.i.length,_);var D=o.l?f(o.l.Na,o.l,o):null;e:{var L=o.i;let Q=-1;for(;;){const Z=["count="+_];Q==-1?0<_?(Q=L[0].g,Z.push("ofs="+Q)):Q=0:Z.push("ofs="+Q);let Oe=!0;for(let wt=0;wt<_;wt++){let be=L[wt].g;const Mt=L[wt].map;if(be-=Q,0>be)Q=Math.max(0,L[wt].g-100),Oe=!1;else try{f2(Mt,Z,"req"+be+"_")}catch{D&&D(Mt)}}if(Oe){D=Z.join("&");break e}}}return o=o.i.splice(0,_),m.D=o,D}function pg(o){if(!o.g&&!o.u){o.Y=1;var m=o.Fa;C||G(),q||(C(),q=!0),P.add(m,o),o.v=0}}function wh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Ua(f(o.Fa,o),vg(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,gg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Ua(f(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),jo(this),gg(this))};function Sh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function gg(o){o.g=new Pi(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var m=fi(o.qa);Pe(m,"RID","rpc"),Pe(m,"SID",o.K),Pe(m,"AID",o.T),Pe(m,"CI",o.F?"0":"1"),!o.F&&o.ja&&Pe(m,"TO",o.ja),Pe(m,"TYPE","xmlhttp"),Qa(o,m),o.m&&o.o&&Ah(m,o.m,o.o),o.L&&(o.g.I=o.L);var _=o.g;o=o.ia,_.L=1,_.v=Oo(fi(m)),_.m=null,_.P=!0,qp(_,o)}t.Za=function(){this.C!=null&&(this.C=null,jo(this),wh(this),Bt(19))};function zo(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function yg(o,m){var _=null;if(o.g==m){zo(o),Sh(o),o.g=null;var D=2}else if(Th(o.h,m))_=m.D,Kp(o.h,m),D=1;else return;if(o.G!=0){if(m.o)if(D==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var L=o.B;D=Mr(),st(D,new Pp(D,_)),Uo(o)}else pg(o);else if(L=m.s,L==3||L==0&&0<m.X||!(D==1&&g2(o,m)||D==2&&wh(o)))switch(_&&0<_.length&&(m=o.h,m.i=m.i.concat(_)),L){case 1:jr(o,5);break;case 4:jr(o,10);break;case 3:jr(o,6);break;default:jr(o,2)}}}function vg(o,m){let _=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(_*=2),_*m}function jr(o,m){if(o.j.info("Error code "+m),m==2){var _=f(o.fb,o),D=o.Xa;const L=!D;D=new kr(D||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Io(D,"https"),Oo(D),L?u2(D.toString(),_):c2(D.toString(),_)}else Bt(2);o.G=0,o.l&&o.l.sa(m),_g(o),fg(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function _g(o){if(o.G=0,o.ka=[],o.l){const m=Xp(o.h);(m.length!=0||o.i.length!=0)&&(k(o.ka,m),k(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function bg(o,m,_){var D=_ instanceof kr?fi(_):new kr(_);if(D.g!="")m&&(D.g=m+"."+D.g),Do(D,D.s);else{var L=l.location;D=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var Q=new kr(null);D&&Io(Q,D),m&&(Q.g=m),L&&Do(Q,L),_&&(Q.l=_),D=Q}return _=o.D,m=o.ya,_&&m&&Pe(D,_,m),Pe(D,"VER",o.la),Qa(o,D),D}function Tg(o,m,_){if(m&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=o.Ca&&!o.pa?new Ze(new Mo({eb:_})):new Ze(o.pa),m.Ha(o.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eg(){}t=Eg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Po(){}Po.prototype.g=function(o,m){return new an(o,m)};function an(o,m){ze.call(this),this.g=new hg(m),this.l=o,this.h=m&&m.messageUrlParams||null,o=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(o?o["X-WebChannel-Content-Type"]=m.messageContentType:o={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(o?o["X-WebChannel-Client-Profile"]=m.va:o={"X-WebChannel-Client-Profile":m.va}),this.g.S=o,(o=m&&m.Sb)&&!S(o)&&(this.g.m=o),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!S(m)&&(this.g.D=m,o=this.h,o!==null&&m in o&&(o=this.h,m in o&&delete o[m])),this.j=new bs(this)}E(an,ze),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){xh(this.g)},an.prototype.o=function(o){var m=this.g;if(typeof o=="string"){var _={};_.__data__=o,o=_}else this.u&&(_={},_.__data__=Mn(o),o=_);m.i.push(new WE(m.Ya++,o)),m.G==3&&Uo(m)},an.prototype.N=function(){this.g.l=null,delete this.j,xh(this.g),delete this.g,an.aa.N.call(this)};function Ag(o){vn.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var m=o.__sm__;if(m){e:{for(const _ in m){o=_;break e}o=void 0}(this.i=o)&&(o=this.i,m=m!==null&&o in m?m[o]:void 0),this.data=m}else this.data=o}E(Ag,vn);function xg(){_n.call(this),this.status=1}E(xg,_n);function bs(o){this.g=o}E(bs,Eg),bs.prototype.ua=function(){st(this.g,"a")},bs.prototype.ta=function(o){st(this.g,new Ag(o))},bs.prototype.sa=function(o){st(this.g,new xg)},bs.prototype.ra=function(){st(this.g,"b")},Po.prototype.createWebChannel=Po.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,Kb=function(){return new Po},$b=function(){return Mr()},Yb=Qt,Cd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,wu=Ro,Lp.COMPLETE="complete",Qb=Lp,Ui.EventType=Or,Or.OPEN="a",Or.CLOSE="b",Or.ERROR="c",Or.MESSAGE="d",ze.prototype.listen=ze.prototype.K,sl=Ui,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,Gb=Ze}).apply(typeof iu<"u"?iu:typeof self<"u"?self:typeof window<"u"?window:{});const gy="@firebase/firestore",yy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ia="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=new Xm("@firebase/firestore");function Is(){return ss.logLevel}function J(t,...e){if(ss.logLevel<=me.DEBUG){const n=e.map(tp);ss.debug(`Firestore (${Ia}): ${t}`,...n)}}function Vi(t,...e){if(ss.logLevel<=me.ERROR){const n=e.map(tp);ss.error(`Firestore (${Ia}): ${t}`,...n)}}function as(t,...e){if(ss.logLevel<=me.WARN){const n=e.map(tp);ss.warn(`Firestore (${Ia}): ${t}`,...n)}}function tp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Xb(t,i,n)}function Xb(t,e,n){let i=`FIRESTORE (${Ia}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Vi(i),new Error(i)}function we(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||Xb(e,r,i)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends ci{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class G4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xt.UNAUTHENTICATED))}shutdown(){}}class Q4{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yr,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(we(typeof i.accessToken=="string",31837,{l:i}),new H4(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class Y4{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $4{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new Y4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){we(this.o===void 0,3512);const i=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,J("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new vy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new vy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=X4(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function ce(t,e){return t<e?-1:t>e?1:0}function Id(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return ce(i,r);{const s=Zb(),a=Z4(s.encode(_y(t,n)),s.encode(_y(e,n)));return a!==0?a:ce(i,r)}}n+=i>65535?2:1}return ce(t.length,e.length)}function _y(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Z4(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ce(t[n],e[n]);return ce(t.length,e.length)}function ga(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="__name__";class Yn{constructor(e,n,i){n===void 0?n=0:n>e.length&&re(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&re(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Yn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yn?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=Yn.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return ce(e.length,n.length)}static compareSegments(e,n){const i=Yn.isNumericId(e),r=Yn.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Yn.extractNumericId(e).compare(Yn.extractNumericId(n)):Id(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gr.fromString(e.substring(4,e.length-2))}}class He extends Yn{construct(e,n,i){return new He(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ee(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new He(n)}static emptyPath(){return new He([])}}const J4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends Yn{construct(e,n,i){return new Ct(e,n,i)}static isValidIdentifier(e){return J4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===by}static keyField(){return new Ct([by])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new ee(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new ee(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ee(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new ee(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(He.fromString(e))}static fromName(e){return new ie(He.fromString(e).popFirst(5))}static empty(){return new ie(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(t,e,n){if(!n)throw new ee(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eR(t,e,n,i){if(e===!0&&i===!0)throw new ee(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ty(t){if(!ie.isDocumentKey(t))throw new ee(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Jb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function eh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re(12329,{type:typeof t})}function vr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=eh(t);throw new ee(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t,e){const n={typeString:t};return e&&(n.value=e),n}function bo(t,e){if(!Jb(t))throw new ee(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new ee(K.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=-62135596800,Ay=1e6;class Le{static now(){return Le.fromMillis(Date.now())}static fromDate(e){return Le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Ay);return new Le(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ey)throw new ee(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ay}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bo(e,Le._jsonSchema))return new Le(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ey;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Le._jsonSchemaVersion="firestore/timestamp/1.0",Le._jsonSchema={type:ut("string",Le._jsonSchemaVersion),seconds:ut("number"),nanoseconds:ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new Le(0,0))}static max(){return new le(new Le(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=-1;function tR(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=le.fromTimestamp(i===1e9?new Le(n+1,0):new Le(n,i));return new Ar(r,ie.empty(),e)}function nR(t){return new Ar(t.readTime,t.key,Gl)}class Ar{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ar(le.min(),ie.empty(),Gl)}static max(){return new Ar(le.max(),ie.empty(),Gl)}}function iR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==rR)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,i)=>{n(e)})}static reject(e){return new $((n,i)=>{i(e)})}static waitFor(e){return new $((n,i)=>{let r=0,s=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(e){let n=$.resolve(!1);for(const i of e)n=n.next(r=>r?$.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new $((i,r)=>{const s=e.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(c=>{a[h]=c,++l,l===s&&i(a)},c=>r(c))}})}static doWhile(e,n){return new $((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function aR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Oa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}th.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=-1;function nh(t){return t==null}function pc(t){return t===0&&1/t==-1/0}function lR(t){return typeof t=="number"&&Number.isInteger(t)&&!pc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="";function oR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=xy(e)),e=uR(t.get(n),e);return xy(e)}function uR(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case Wb:n+="";break;default:n+=s}}return n}function xy(t){return t+Wb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function eT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ru(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ru(this.root,e,this.comparator,!1)}getReverseIterator(){return new ru(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ru(this.root,e,this.comparator,!0)}}class ru{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??Rt.RED,this.left=r??Rt.EMPTY,this.right=s??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new Rt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Rt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sy(this.data.getIterator())}getIteratorFrom(e){return new Sy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class Sy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new zn([])}unionWith(e){let n=new gt(Ct.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ga(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new tT("Invalid base64 string: "+s):s}}(e);return new Dt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new Dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dt.EMPTY_BYTE_STRING=new Dt("");const cR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(t){if(we(!!t,39018),typeof t=="string"){let e=0;const n=cR.exec(t);if(we(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:it(t.seconds),nanos:it(t.nanos)}}function it(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wr(t){return typeof t=="string"?Dt.fromBase64String(t):Dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="server_timestamp",iT="__type__",rT="__previous_value__",sT="__local_write_time__";function rp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[iT])===null||n===void 0?void 0:n.stringValue)===nT}function ih(t){const e=t.mapValue.fields[rT];return rp(e)?ih(e):e}function Ql(t){const e=xr(t.mapValue.fields[sT].timestampValue);return new Le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n,i,r,s,a,l,u,h,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=c}}const Dd="(default)";class Yl{constructor(e,n){this.projectId=e,this.database=n||Dd}static empty(){return new Yl("","")}get isDefaultDatabase(){return this.database===Dd}isEqual(e){return e instanceof Yl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="__type__",fR="__max__",su={mapValue:{}},lT="__vector__",gc="value";function Sr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rp(t)?4:mR(t)?9007199254740991:dR(t)?10:11:re(28295,{value:t})}function ai(t,e){if(t===e)return!0;const n=Sr(t);if(n!==Sr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ql(t).isEqual(Ql(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=xr(r.timestampValue),l=xr(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return wr(r.bytesValue).isEqual(wr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return it(r.geoPointValue.latitude)===it(s.geoPointValue.latitude)&&it(r.geoPointValue.longitude)===it(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return it(r.integerValue)===it(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=it(r.doubleValue),l=it(s.doubleValue);return a===l?pc(a)===pc(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ga(t.arrayValue.values||[],e.arrayValue.values||[],ai);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(wy(a)!==wy(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!ai(a[u],l[u])))return!1;return!0}(t,e);default:return re(52216,{left:t})}}function $l(t,e){return(t.values||[]).find(n=>ai(n,e))!==void 0}function ya(t,e){if(t===e)return 0;const n=Sr(t),i=Sr(e);if(n!==i)return ce(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=it(s.integerValue||s.doubleValue),u=it(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Ry(t.timestampValue,e.timestampValue);case 4:return Ry(Ql(t),Ql(e));case 5:return Id(t.stringValue,e.stringValue);case 6:return function(s,a){const l=wr(s),u=wr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const c=ce(l[h],u[h]);if(c!==0)return c}return ce(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=ce(it(s.latitude),it(a.latitude));return l!==0?l:ce(it(s.longitude),it(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ny(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,u,h,c;const d=s.fields||{},f=a.fields||{},g=(l=d[gc])===null||l===void 0?void 0:l.arrayValue,E=(u=f[gc])===null||u===void 0?void 0:u.arrayValue,O=ce(((h=g==null?void 0:g.values)===null||h===void 0?void 0:h.length)||0,((c=E==null?void 0:E.values)===null||c===void 0?void 0:c.length)||0);return O!==0?O:Ny(g,E)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===su.mapValue&&a===su.mapValue)return 0;if(s===su.mapValue)return 1;if(a===su.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},c=Object.keys(h);u.sort(),c.sort();for(let d=0;d<u.length&&d<c.length;++d){const f=Id(u[d],c[d]);if(f!==0)return f;const g=ya(l[u[d]],h[c[d]]);if(g!==0)return g}return ce(u.length,c.length)}(t.mapValue,e.mapValue);default:throw re(23264,{le:n})}}function Ry(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=xr(t),i=xr(e),r=ce(n.seconds,i.seconds);return r!==0?r:ce(n.nanos,i.nanos)}function Ny(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=ya(n[r],i[r]);if(s)return s}return ce(n.length,i.length)}function va(t){return Od(t)}function Od(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=xr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Od(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${Od(n.fields[a])}`;return r+"}"}(t.mapValue):re(61005,{value:t})}function Su(t){switch(Sr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ih(t);return e?16+Su(e):16;case 5:return 2*t.stringValue.length;case 6:return wr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Su(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return fs(i.fields,(s,a)=>{r+=s.length+Su(a)}),r}(t.mapValue);default:throw re(13486,{value:t})}}function Cy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Md(t){return!!t&&"integerValue"in t}function sp(t){return!!t&&"arrayValue"in t}function Iy(t){return!!t&&"nullValue"in t}function Dy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ru(t){return!!t&&"mapValue"in t}function dR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[aT])===null||n===void 0?void 0:n.stringValue)===lT}function Sl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Sl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function mR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===fR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Ru(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sl(n)}setAll(e){let n=Ct.emptyPath(),i={},r=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=Sl(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Ru(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ai(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Ru(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){fs(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Sn(Sl(this.value))}}function oT(t){const e=[];return fs(t.fields,(n,i)=>{const r=new Ct([n]);if(Ru(i)){const s=oT(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,i,r,s,a,l){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Ut(e,0,le.min(),le.min(),le.min(),Sn.empty(),0)}static newFoundDocument(e,n,i,r){return new Ut(e,1,n,le.min(),i,r,0)}static newNoDocument(e,n){return new Ut(e,2,n,le.min(),le.min(),Sn.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,le.min(),le.min(),Sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n){this.position=e,this.inclusive=n}}function Oy(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=ie.comparator(ie.fromName(a.referenceValue),n.key):i=ya(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function My(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ai(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n="asc"){this.field=e,this.dir=n}}function pR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{}class ot extends uT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new yR(e,n,i):n==="array-contains"?new bR(e,i):n==="in"?new TR(e,i):n==="not-in"?new ER(e,i):n==="array-contains-any"?new AR(e,i):new ot(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new vR(e,i):new _R(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ya(n,this.value)):n!==null&&Sr(this.value)===Sr(n)&&this.matchesComparison(ya(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends uT{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Fn(e,n)}matches(e){return cT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function cT(t){return t.op==="and"}function hT(t){return gR(t)&&cT(t)}function gR(t){for(const e of t.filters)if(e instanceof Fn)return!1;return!0}function Vd(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+va(t.value);if(hT(t))return t.filters.map(e=>Vd(e)).join(",");{const e=t.filters.map(n=>Vd(n)).join(",");return`${t.op}(${e})`}}function fT(t,e){return t instanceof ot?function(i,r){return r instanceof ot&&i.op===r.op&&i.field.isEqual(r.field)&&ai(i.value,r.value)}(t,e):t instanceof Fn?function(i,r){return r instanceof Fn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&fT(a,r.filters[l]),!0):!1}(t,e):void re(19439)}function dT(t){return t instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${va(n.value)}`}(t):t instanceof Fn?function(n){return n.op.toString()+" {"+n.getFilters().map(dT).join(" ,")+"}"}(t):"Filter"}class yR extends ot{constructor(e,n,i){super(e,n,i),this.key=ie.fromName(i.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class vR extends ot{constructor(e,n){super(e,"in",n),this.keys=mT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class _R extends ot{constructor(e,n){super(e,"not-in",n),this.keys=mT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ie.fromName(i.referenceValue))}class bR extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sp(n)&&$l(n.arrayValue,this.value)}}class TR extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$l(this.value.arrayValue,n)}}class ER extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if($l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!$l(this.value.arrayValue,n)}}class AR extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>$l(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n=null,i=[],r=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Pe=null}}function Vy(t,e=null,n=[],i=[],r=null,s=null,a=null){return new xR(t,e,n,i,r,s,a)}function ap(t){const e=oe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Vd(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),nh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>va(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>va(i)).join(",")),e.Pe=n}return e.Pe}function lp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!My(t.startAt,e.startAt)&&My(t.endAt,e.endAt)}function kd(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function wR(t,e,n,i,r,s,a,l){return new To(t,e,n,i,r,s,a,l)}function rh(t){return new To(t)}function ky(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function pT(t){return t.collectionGroup!==null}function Rl(t){const e=oe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new gt(Ct.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new vc(s,i))}),n.has(Ct.keyField().canonicalString())||e.Te.push(new vc(Ct.keyField(),i))}return e.Te}function ti(t){const e=oe(t);return e.Ie||(e.Ie=SR(e,Rl(t))),e.Ie}function SR(t,e){if(t.limitType==="F")return Vy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new vc(r.field,s)});const n=t.endAt?new yc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new yc(t.startAt.position,t.startAt.inclusive):null;return Vy(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function jd(t,e){const n=t.filters.concat([e]);return new To(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ud(t,e,n){return new To(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sh(t,e){return lp(ti(t),ti(e))&&t.limitType===e.limitType}function gT(t){return`${ap(ti(t))}|lt:${t.limitType}`}function Ds(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>dT(r)).join(", ")}]`),nh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>va(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>va(r)).join(",")),`Target(${i})`}(ti(t))}; limitType=${t.limitType})`}function ah(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):ie.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Rl(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=Oy(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,Rl(i),r)||i.endAt&&!function(a,l,u){const h=Oy(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,Rl(i),r))}(t,e)}function RR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yT(t){return(e,n)=>{let i=!1;for(const r of Rl(t)){const s=NR(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function NR(t,e,n){const i=t.field.isKeyField()?ie.comparator(e.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?ya(u,h):re(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){fs(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return eT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=new Xe(ie.comparator);function ki(){return CR}const vT=new Xe(ie.comparator);function al(...t){let e=vT;for(const n of t)e=e.insert(n.key,n);return e}function _T(t){let e=vT;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Hr(){return Nl()}function bT(){return Nl()}function Nl(){return new ds(t=>t.toString(),(t,e)=>t.isEqual(e))}const IR=new Xe(ie.comparator),DR=new gt(ie.comparator);function pe(...t){let e=DR;for(const n of t)e=e.add(n);return e}const OR=new gt(ce);function MR(){return OR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function TT(t){return{integerValue:""+t}}function VR(t,e){return lR(e)?TT(e):op(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(){this._=void 0}}function kR(t,e,n){return t instanceof _c?function(r,s){const a={fields:{[iT]:{stringValue:nT},[sT]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&rp(s)&&(s=ih(s)),s&&(a.fields[rT]=s),{mapValue:a}}(n,e):t instanceof Kl?AT(t,e):t instanceof Xl?xT(t,e):function(r,s){const a=ET(r,s),l=jy(a)+jy(r.Ee);return Md(a)&&Md(r.Ee)?TT(l):op(r.serializer,l)}(t,e)}function jR(t,e,n){return t instanceof Kl?AT(t,e):t instanceof Xl?xT(t,e):n}function ET(t,e){return t instanceof bc?function(i){return Md(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class _c extends lh{}class Kl extends lh{constructor(e){super(),this.elements=e}}function AT(t,e){const n=wT(e);for(const i of t.elements)n.some(r=>ai(r,i))||n.push(i);return{arrayValue:{values:n}}}class Xl extends lh{constructor(e){super(),this.elements=e}}function xT(t,e){let n=wT(e);for(const i of t.elements)n=n.filter(r=>!ai(r,i));return{arrayValue:{values:n}}}class bc extends lh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function jy(t){return it(t.integerValue||t.doubleValue)}function wT(t){return sp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function UR(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Kl&&r instanceof Kl||i instanceof Xl&&r instanceof Xl?ga(i.elements,r.elements,ai):i instanceof bc&&r instanceof bc?ai(i.Ee,r.Ee):i instanceof _c&&r instanceof _c}(t.transform,e.transform)}class zR{constructor(e,n){this.version=e,this.transformResults=n}}class ni{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ni}static exists(e){return new ni(void 0,e)}static updateTime(e){return new ni(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class oh{}function ST(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new up(t.key,ni.none()):new Eo(t.key,t.data,ni.none());{const n=t.data,i=Sn.empty();let r=new gt(Ct.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new ms(t.key,i,new zn(r.toArray()),ni.none())}}function PR(t,e,n){t instanceof Eo?function(r,s,a){const l=r.value.clone(),u=zy(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ms?function(r,s,a){if(!Nu(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=zy(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(RT(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Cl(t,e,n,i){return t instanceof Eo?function(s,a,l,u){if(!Nu(s.precondition,a))return l;const h=s.value.clone(),c=Py(s.fieldTransforms,u,a);return h.setAll(c),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,i):t instanceof ms?function(s,a,l,u){if(!Nu(s.precondition,a))return l;const h=Py(s.fieldTransforms,u,a),c=a.data;return c.setAll(RT(s)),c.setAll(h),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,a,l){return Nu(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function LR(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=ET(i.transform,r||null);s!=null&&(n===null&&(n=Sn.empty()),n.set(i.field,s))}return n||null}function Uy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ga(i,r,(s,a)=>UR(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Eo extends oh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ms extends oh{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function RT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function zy(t,e,n){const i=new Map;we(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,l=e.data.field(s.field);i.set(s.field,jR(a,l,n[r]))}return i}function Py(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,kR(s,a,e))}return i}class up extends oh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BR extends oh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&PR(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Cl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Cl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=bT();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=ST(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(le.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&ga(this.mutations,e.mutations,(n,i)=>Uy(n,i))&&ga(this.baseMutations,e.baseMutations,(n,i)=>Uy(n,i))}}class cp{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){we(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=function(){return IR}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new cp(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,ye;function GR(t){switch(t){case K.OK:return re(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return re(15467,{code:t})}}function NT(t){if(t===void 0)return Vi("GRPC error has no .code"),K.UNKNOWN;switch(t){case at.OK:return K.OK;case at.CANCELLED:return K.CANCELLED;case at.UNKNOWN:return K.UNKNOWN;case at.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case at.INTERNAL:return K.INTERNAL;case at.UNAVAILABLE:return K.UNAVAILABLE;case at.UNAUTHENTICATED:return K.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case at.NOT_FOUND:return K.NOT_FOUND;case at.ALREADY_EXISTS:return K.ALREADY_EXISTS;case at.PERMISSION_DENIED:return K.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case at.ABORTED:return K.ABORTED;case at.OUT_OF_RANGE:return K.OUT_OF_RANGE;case at.UNIMPLEMENTED:return K.UNIMPLEMENTED;case at.DATA_LOSS:return K.DATA_LOSS;default:return re(39323,{code:t})}}(ye=at||(at={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=new gr([4294967295,4294967295],0);function Ly(t){const e=Zb().encode(t),n=new Hb;return n.update(e),new Uint8Array(n.digest())}function By(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new gr([n,i],0),new gr([r,s],0)]}class hp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ll(`Invalid padding: ${n}`);if(i<0)throw new ll(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ll(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ll(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=gr.fromNumber(this.fe)}pe(e,n,i){let r=e.add(n.multiply(gr.fromNumber(i)));return r.compare(QR)===1&&(r=new gr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Ly(e),[i,r]=By(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(i,r,s);if(!this.ye(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new hp(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.fe===0)return;const n=Ly(e),[i,r]=By(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(i,r,s);this.we(a)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ll extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Ao.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new uh(le.min(),r,new Xe(ce),ki(),pe())}}class Ao{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ao(i,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n,i,r){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=r}}class CT{constructor(e,n){this.targetId=e,this.De=n}}class IT{constructor(e,n,i=Dt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Fy{constructor(){this.ve=0,this.Ce=qy(),this.Fe=Dt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=pe(),n=pe(),i=pe();return this.Ce.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:re(38017,{changeType:s})}}),new Ao(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=qy()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class YR{constructor(e){this.We=e,this.Ge=new Map,this.ze=ki(),this.je=au(),this.Je=au(),this.He=new Xe(ce)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((i,r)=>{this.nt(r)&&n(r)})}it(e){const n=e.targetId,i=e.De.count,r=this.st(n);if(r){const s=r.target;if(kd(s))if(i===0){const a=new ie(s.path);this.Xe(n,a,Ut.newNoDocument(a,le.min()))}else we(i===1,20013,{expectedCount:i});else{const a=this.ot(n);if(a!==i){const l=this._t(e),u=l?this.ut(l,e,a):1;if(u!==0){this.rt(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=wr(i).toUint8Array()}catch(u){if(u instanceof tT)return as("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new hp(a,r,s)}catch(u){return as(u instanceof ll?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.fe===0?null:l}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Xe(n,s,null),r++)}),r}Pt(e){const n=new Map;this.Ge.forEach((s,a)=>{const l=this.st(a);if(l){if(s.current&&kd(l.target)){const u=new ie(l.target.path);this.Tt(u).has(a)||this.It(a,u)||this.Xe(a,u,Ut.newNoDocument(u,e))}s.Ne&&(n.set(a,s.Le()),s.ke())}});let i=pe();this.Je.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.st(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.ze.forEach((s,a)=>a.setReadTime(e));const r=new uh(e,n,this.He,this.ze,i);return this.ze=ki(),this.je=au(),this.Je=au(),this.He=new Xe(ce),r}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const r=this.tt(e);this.It(e,n)?r.qe(n,1):r.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Fy,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new gt(ce),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new gt(ce),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Fy),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function au(){return new Xe(ie.comparator)}function qy(){return new Xe(ie.comparator)}const $R={asc:"ASCENDING",desc:"DESCENDING"},KR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XR={and:"AND",or:"OR"};class ZR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zd(t,e){return t.useProto3Json||nh(e)?e:{value:e}}function Tc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function JR(t,e){return Tc(t,e.toTimestamp())}function ii(t){return we(!!t,49232),le.fromTimestamp(function(n){const i=xr(n);return new Le(i.seconds,i.nanos)}(t))}function fp(t,e){return Pd(t,e).canonicalString()}function Pd(t,e){const n=function(r){return new He(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function OT(t){const e=He.fromString(t);return we(UT(e),10190,{key:e.toString()}),e}function Ld(t,e){return fp(t.databaseId,e.path)}function vf(t,e){const n=OT(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(VT(n))}function MT(t,e){return fp(t.databaseId,e)}function WR(t){const e=OT(t);return e.length===4?He.emptyPath():VT(e)}function Bd(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VT(t){return we(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Hy(t,e,n){return{name:Ld(t,e),fields:n.value.mapValue.fields}}function eN(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:re(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(h,c){return h.useProto3Json?(we(c===void 0||typeof c=="string",58123),Dt.fromBase64String(c||"")):(we(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),Dt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const c=h.code===void 0?K.UNKNOWN:NT(h.code);return new ee(c,h.message||"")}(a);n=new IT(i,r,s,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=vf(t,i.document.name),s=ii(i.document.updateTime),a=i.document.createTime?ii(i.document.createTime):le.min(),l=new Sn({mapValue:{fields:i.document.fields}}),u=Ut.newFoundDocument(r,s,a,l),h=i.targetIds||[],c=i.removedTargetIds||[];n=new Cu(h,c,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=vf(t,i.document),s=i.readTime?ii(i.readTime):le.min(),a=Ut.newNoDocument(r,s),l=i.removedTargetIds||[];n=new Cu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=vf(t,i.document),s=i.removedTargetIds||[];n=new Cu([],s,r,null)}else{if(!("filter"in e))return re(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new HR(r,s),l=i.targetId;n=new CT(l,a)}}return n}function tN(t,e){let n;if(e instanceof Eo)n={update:Hy(t,e.key,e.value)};else if(e instanceof up)n={delete:Ld(t,e.key)};else if(e instanceof ms)n={update:Hy(t,e.key,e.data),updateMask:cN(e.fieldMask)};else{if(!(e instanceof BR))return re(16599,{Rt:e.type});n={verify:Ld(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof _c)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Kl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Xl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof bc)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw re(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:JR(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:re(27497)}(t,e.precondition)),n}function nN(t,e){return t&&t.length>0?(we(e!==void 0,14353),t.map(n=>function(r,s){let a=r.updateTime?ii(r.updateTime):ii(s);return a.isEqual(le.min())&&(a=ii(s)),new zR(a,r.transformResults||[])}(n,e))):[]}function iN(t,e){return{documents:[MT(t,e.path)]}}function rN(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=MT(t,r);const s=function(h){if(h.length!==0)return jT(Fn.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(c=>function(f){return{field:Os(f.field),direction:lN(f.dir)}}(c))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=zd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{Vt:n,parent:r}}function sN(t){let e=WR(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){we(i===1,65062);const c=n.from[0];c.allDescendants?r=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(d){const f=kT(d);return f instanceof Fn&&hT(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(d){return d.map(f=>function(E){return new vc(Ms(E.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(d){let f;return f=typeof d=="object"?d.value:d,nh(f)?null:f}(n.limit));let u=null;n.startAt&&(u=function(d){const f=!!d.before,g=d.values||[];return new yc(g,f)}(n.startAt));let h=null;return n.endAt&&(h=function(d){const f=!d.before,g=d.values||[];return new yc(g,f)}(n.endAt)),wR(e,r,a,s,l,"F",u,h)}function aN(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ms(n.unaryFilter.field);return ot.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ms(n.unaryFilter.field);return ot.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ms(n.unaryFilter.field);return ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ms(n.unaryFilter.field);return ot.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}}(t):t.fieldFilter!==void 0?function(n){return ot.create(Ms(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Fn.create(n.compositeFilter.filters.map(i=>kT(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return re(1026)}}(n.compositeFilter.op))}(t):re(30097,{filter:t})}function lN(t){return $R[t]}function oN(t){return KR[t]}function uN(t){return XR[t]}function Os(t){return{fieldPath:t.canonicalString()}}function Ms(t){return Ct.fromServerFormat(t.fieldPath)}function jT(t){return t instanceof ot?function(n){if(n.op==="=="){if(Dy(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NAN"}};if(Iy(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Dy(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NAN"}};if(Iy(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Os(n.field),op:oN(n.op),value:n.value}}}(t):t instanceof Fn?function(n){const i=n.getFilters().map(r=>jT(r));return i.length===1?i[0]:{compositeFilter:{op:uN(n.op),filters:i}}}(t):re(54877,{filter:t})}function cN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function UT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n,i,r,s=le.min(),a=le.min(),l=Dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.gt=e}}function fN(t){const e=sN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ud(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this.Dn=new mN}addToCollectionParentIndex(e,n){return this.Dn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Ar.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Ar.min())}updateCollectionGroup(e,n,i){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class mN{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new gt(He.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new gt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zT=41943040;class Zt{static withCacheSize(e){return new Zt(e,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(zT,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new _a(0)}static ur(){return new _a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="LruGarbageCollector",pN=1048576;function Yy([t,e],[n,i]){const r=ce(t,n);return r===0?ce(e,i):r}class gN{constructor(e){this.Tr=e,this.buffer=new gt(Yy),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Yy(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class yN{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){J(Qy,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Oa(n)?J(Qy,"Ignoring IndexedDB error during garbage collection: ",n):await Da(n)}await this.Rr(3e5)})}}class vN{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return $.resolve(th.ue);const i=new gN(n);return this.Vr.forEachTarget(e,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Gy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gy):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,r,s,a,l,u,h;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,a=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,l=Date.now(),this.removeTargets(e,i,n))).next(d=>(s=d,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(h=Date.now(),Is()<=me.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-c}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${d} documents in `+(h-u)+`ms
Total Duration: ${h-c}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function _N(t,e){return new vN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.changes=new ds(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?$.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Cl(i.mutation,r,zn.empty(),Le.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,pe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=pe()){const r=Hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=al();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Hr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,pe()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,i,r){let s=ki();const a=Nl(),l=function(){return Nl()}();return n.forEach((u,h)=>{const c=i.get(h.key);r.has(h.key)&&(c===void 0||c.mutation instanceof ms)?s=s.insert(h.key,h):c!==void 0?(a.set(h.key,c.mutation.getFieldMask()),Cl(c.mutation,h,c.mutation.getFieldMask(),Le.now())):a.set(h.key,zn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,c)=>a.set(h,c)),n.forEach((h,c)=>{var d;return l.set(h,new TN(c,(d=a.get(h))!==null&&d!==void 0?d:null))}),l))}recalculateAndSaveOverlays(e,n){const i=Nl();let r=new Xe((a,l)=>a-l),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let c=i.get(u)||zn.empty();c=l.applyToLocalView(h,c),i.set(u,c);const d=(r.get(l.batchId)||pe()).add(u);r=r.insert(l.batchId,d)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,c=u.value,d=bT();c.forEach(f=>{if(!s.has(f)){const g=ST(n.get(f),i.get(f));g!==null&&d.set(f,g),s=s.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,d))}return $.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ie.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):pT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):$.resolve(Hr());let l=Gl,u=s;return a.next(h=>$.forEach(h,(c,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),s.get(c)?$.resolve():this.remoteDocumentCache.getEntry(e,c).next(f=>{u=u.insert(c,f)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,pe())).next(c=>({batchId:l,changes:_T(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(i=>{let r=al();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=al();return this.indexManager.getCollectionParents(e,s).next(l=>$.forEach(l,u=>{const h=function(d,f){return new To(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next(c=>{c.forEach((d,f)=>{a=a.insert(d,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const c=h.getKey();a.get(c)===null&&(a=a.insert(c,Ut.newInvalidDocument(c)))});let l=al();return a.forEach((u,h)=>{const c=s.get(u);c!==void 0&&Cl(c.mutation,h,zn.empty(),Le.now()),ah(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return $.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ii(r.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(r){return{name:r.name,query:fN(r.bundledQuery),readTime:ii(r.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.overlays=new Xe(ie.comparator),this.kr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Hr();return $.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.wt(e,n,s)}),$.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(i)),$.resolve()}getOverlaysForCollection(e,n,i){const r=Hr(),s=n.length+1,a=new ie(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return $.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Xe((h,c)=>h-c);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let c=s.get(h.largestBatchId);c===null&&(c=Hr(),s=s.insert(h.largestBatchId,c)),c.set(h.getKey(),h)}}const l=Hr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,c)=>l.set(h,c)),!(l.size()>=r)););return $.resolve(l)}wt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new qR(n,i));let s=this.kr.get(n);s===void 0&&(s=pe(),this.kr.set(n,s)),this.kr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(){this.qr=new gt(bt.Qr),this.$r=new gt(bt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new bt(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Wr(new bt(e,n))}Gr(e,n){e.forEach(i=>this.removeReference(i,n))}zr(e){const n=new ie(new He([])),i=new bt(n,e),r=new bt(n,e+1),s=[];return this.$r.forEachInRange([i,r],a=>{this.Wr(a),s.push(a.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ie(new He([])),i=new bt(n,e),r=new bt(n,e+1);let s=pe();return this.$r.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new bt(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class bt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ie.comparator(e.key,n.key)||ce(e.Hr,n.Hr)}static Ur(e,n){return ce(e.Hr,n.Hr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new gt(bt.Qr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new FR(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Yr=this.Yr.add(new bt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return $.resolve(a)}lookupMutationBatch(e,n){return $.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Xr(i),s=r<0?0:r;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?ip:this.er-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new bt(n,0),r=new bt(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([i,r],a=>{const l=this.Zr(a.Hr);s.push(l)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new gt(ce);return n.forEach(r=>{const s=new bt(r,0),a=new bt(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,a],l=>{i=i.add(l.Hr)})}),$.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;ie.isDocumentKey(s)||(s=s.child(""));const a=new bt(new ie(s),0);let l=new gt(ce);return this.Yr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Hr)),!0)},a),$.resolve(this.ei(l))}ei(e){const n=[];return e.forEach(i=>{const r=this.Zr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){we(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return $.forEach(n.mutations,r=>{const s=new bt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,n){const i=new bt(n,0),r=this.Yr.firstAfterOrEqual(i);return $.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.ni=e,this.docs=function(){return new Xe(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return $.resolve(i?i.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let i=ki();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ut.newInvalidDocument(r))}),$.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=ki();const a=n.path,l=new ie(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:c}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||iR(nR(c),i)<=0||(r.has(c.key)||ah(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(e,n,i,r){re(9500)}ri(e,n){return $.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new NN(this)}getSize(e){return $.resolve(this.size)}}class NN extends bN{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)}),$.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.persistence=e,this.ii=new ds(n=>ap(n),lp),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.si=0,this.oi=new dp,this.targetCount=0,this._i=_a.ar()}forEachTarget(e,n){return this.ii.forEach((i,r)=>n(r)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),$.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new _a(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.hr(n),$.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.ii.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.ii.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),$.waitFor(s).next(()=>r)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return $.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),$.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),$.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return $.resolve(i)}containsKey(e,n){return $.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n){this.ai={},this.overlays={},this.ui=new th(0),this.ci=!1,this.ci=!0,this.li=new wN,this.referenceDelegate=e(this),this.hi=new CN(this),this.indexManager=new dN,this.remoteDocumentCache=function(r){return new RN(r)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new hN(n),this.Ti=new AN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new SN(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){J("MemoryPersistence","Starting transaction:",e);const r=new IN(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ei(e,n){return $.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,n)))}}class IN extends sR{constructor(e){super(),this.currentSequenceNumber=e}}class mp{constructor(e){this.persistence=e,this.Ai=new dp,this.Ri=null}static Vi(e){return new mp(e)}get mi(){if(this.Ri)return this.Ri;throw re(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),$.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(r=>this.mi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.mi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.mi,i=>{const r=ie.fromPath(i);return this.fi(e,r).next(s=>{s||n.removeEntry(r,le.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return $.or([()=>$.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ec{constructor(e,n){this.persistence=e,this.gi=new ds(i=>oR(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=_N(this,n)}static Vi(e,n){return new Ec(e,n)}Ii(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}yr(e){let n=0;return this.gr(e,i=>{n++}).next(()=>n)}gr(e,n){return $.forEach(this.gi,(i,r)=>this.Sr(e,i,r).next(s=>s?$.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ri(e,a=>this.Sr(e,a,n).next(l=>{l||(i++,s.removeEntry(a,le.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),$.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),$.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Su(e.data.value)),n}Sr(e,n,i){return $.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.gi.get(n);return $.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=r}static Es(e,n){let i=pe(),r=pe();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new pp(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return jw()?8:aR(Bn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ps(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ys(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new DN;return this.ws(e,n,a).next(l=>{if(s.result=l,this.Rs)return this.Ss(e,n,a,l.size)})}).next(()=>s.result)}Ss(e,n,i,r){return i.documentReadCount<this.Vs?(Is()<=me.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Ds(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),$.resolve()):(Is()<=me.DEBUG&&J("QueryEngine","Query:",Ds(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Is()<=me.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Ds(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(n))):$.resolve())}ps(e,n){if(ky(n))return $.resolve(null);let i=ti(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Ud(n,null,"F"),i=ti(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=pe(...s);return this.gs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const h=this.bs(n,l);return this.Ds(n,h,a,u.readTime)?this.ps(e,Ud(n,null,"F")):this.vs(e,h,n,u)}))})))}ys(e,n,i,r){return ky(n)||r.isEqual(le.min())?$.resolve(null):this.gs.getDocuments(e,i).next(s=>{const a=this.bs(n,s);return this.Ds(n,a,i,r)?$.resolve(null):(Is()<=me.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ds(n)),this.vs(e,a,n,tR(r,Gl)).next(l=>l))})}bs(e,n){let i=new gt(yT(e));return n.forEach((r,s)=>{ah(e,s)&&(i=i.add(s))}),i}Ds(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ws(e,n,i){return Is()<=me.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Ds(n)),this.gs.getDocumentsMatchingQuery(e,n,Ar.min(),i)}vs(e,n,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="LocalStore",MN=3e8;class VN{constructor(e,n,i,r){this.persistence=e,this.Cs=n,this.serializer=r,this.Fs=new Xe(ce),this.Ms=new ds(s=>ap(s),lp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EN(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function kN(t,e,n,i){return new VN(t,e,n,i)}async function LT(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=pe();for(const h of r){a.push(h.batchId);for(const c of h.mutations)u=u.add(c.key)}for(const h of s){l.push(h.batchId);for(const c of h.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Bs:h,removedBatchIds:a,addedBatchIds:l}))})})}function jN(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(l,u,h,c){const d=h.batch,f=d.keys();let g=$.resolve();return f.forEach(E=>{g=g.next(()=>c.getEntry(u,E)).next(O=>{const k=h.docVersions.get(E);we(k!==null,48541),O.version.compareTo(k)<0&&(d.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),c.addEntry(O)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(u,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=pe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function BT(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function UN(t,e){const n=oe(t),i=e.snapshotVersion;let r=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});r=n.Fs;const l=[];e.targetChanges.forEach((c,d)=>{const f=r.get(d);if(!f)return;l.push(n.hi.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.hi.addMatchingKeys(s,c.addedDocuments,d)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(Dt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):c.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(c.resumeToken,i)),r=r.insert(d,g),function(O,k,b){return O.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=MN?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,g,c)&&l.push(n.hi.updateTargetData(s,g))});let u=ki(),h=pe();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),l.push(zN(s,a,e.documentUpdates).next(c=>{u=c.Ls,h=c.ks})),!i.isEqual(le.min())){const c=n.hi.getLastRemoteSnapshotVersion(s).next(d=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(c)}return $.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Fs=r,s))}function zN(t,e,n){let i=pe(),r=pe();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=ki();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(le.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):J(gp,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ls:a,ks:r}})}function PN(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=ip),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function LN(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.hi.getTargetData(i,e).next(s=>s?(r=s,$.resolve(r)):n.hi.allocateTargetId(i).next(a=>(r=new sr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i})}async function Fd(t,e,n){const i=oe(t),r=i.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Oa(a))throw a;J(gp,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function $y(t,e,n){const i=oe(t);let r=le.min(),s=pe();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,c){const d=oe(u),f=d.Ms.get(c);return f!==void 0?$.resolve(d.Fs.get(f)):d.hi.getTargetData(h,c)}(i,a,ti(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Cs.getDocumentsMatchingQuery(a,e,n?r:le.min(),n?s:pe())).next(l=>(BN(i,RR(e),l),{documents:l,qs:s})))}function BN(t,e,n){let i=t.xs.get(e)||le.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.xs.set(e,i)}class Ky{constructor(){this.activeTargetIds=MR()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FN{constructor(){this.Fo=new Ky,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ky,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="ConnectivityMonitor";class Zy{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){J(Xy,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){J(Xy,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lu=null;function qd(){return lu===null?lu=function(){return 268435456+Math.round(2147483648*Math.random())}():lu++,"0x"+lu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="RestConnection",HN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class GN{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===Dd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,n,i,r,s){const a=qd(),l=this.Go(e,n.toUriEncodedString());J(_f,`Sending RPC '${e}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,r,s);const{host:h}=new URL(l),c=po(h);return this.jo(e,l,u,i,c).then(d=>(J(_f,`Received RPC '${e}' ${a}: `,d),d),d=>{throw as(_f,`RPC '${e}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Jo(e,n,i,r,s,a){return this.Wo(e,n,i,r,s)}zo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ia}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}Go(e,n){const i=HN[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt="WebChannelConnection";class YN extends GN{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,r,s){const a=qd();return new Promise((l,u)=>{const h=new Gb;h.setWithCredentials(!0),h.listenOnce(Qb.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case wu.NO_ERROR:const d=h.getResponseJson();J(kt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),l(d);break;case wu.TIMEOUT:J(kt,`RPC '${e}' ${a} timed out`),u(new ee(K.DEADLINE_EXCEEDED,"Request time out"));break;case wu.HTTP_ERROR:const f=h.getStatus();if(J(kt,`RPC '${e}' ${a} failed with status:`,f,"response text:",h.getResponseText()),f>0){let g=h.getResponseJson();Array.isArray(g)&&(g=g[0]);const E=g==null?void 0:g.error;if(E&&E.status&&E.message){const O=function(b){const S=b.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(S)>=0?S:K.UNKNOWN}(E.status);u(new ee(O,E.message))}else u(new ee(K.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new ee(K.UNAVAILABLE,"Connection failed."));break;default:re(9055,{c_:e,streamId:a,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{J(kt,`RPC '${e}' ${a} completed.`)}});const c=JSON.stringify(r);J(kt,`RPC '${e}' ${a} sending request:`,r),h.send(n,"POST",c,i,15)})}P_(e,n,i){const r=qd(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Kb(),l=$b(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const c=s.join("");J(kt,`Creating RPC '${e}' stream ${r}: ${c}`,u);const d=a.createWebChannel(c,u);this.T_(d);let f=!1,g=!1;const E=new QN({Ho:k=>{g?J(kt,`Not sending because RPC '${e}' stream ${r} is closed:`,k):(f||(J(kt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),J(kt,`RPC '${e}' stream ${r} sending:`,k),d.send(k))},Yo:()=>d.close()}),O=(k,b,S)=>{k.listen(b,N=>{try{S(N)}catch(M){setTimeout(()=>{throw M},0)}})};return O(d,sl.EventType.OPEN,()=>{g||(J(kt,`RPC '${e}' stream ${r} transport opened.`),E.s_())}),O(d,sl.EventType.CLOSE,()=>{g||(g=!0,J(kt,`RPC '${e}' stream ${r} transport closed`),E.__(),this.I_(d))}),O(d,sl.EventType.ERROR,k=>{g||(g=!0,as(kt,`RPC '${e}' stream ${r} transport errored. Name:`,k.name,"Message:",k.message),E.__(new ee(K.UNAVAILABLE,"The operation could not be completed")))}),O(d,sl.EventType.MESSAGE,k=>{var b;if(!g){const S=k.data[0];we(!!S,16349);const N=S,M=(N==null?void 0:N.error)||((b=N[0])===null||b===void 0?void 0:b.error);if(M){J(kt,`RPC '${e}' stream ${r} received error:`,M);const j=M.status;let V=function(v){const T=at[v];if(T!==void 0)return NT(T)}(j),w=M.message;V===void 0&&(V=K.INTERNAL,w="Unknown error status: "+j+" with message "+M.message),g=!0,E.__(new ee(V,w)),d.close()}else J(kt,`RPC '${e}' stream ${r} received:`,S),E.a_(S)}}),O(l,Yb.STAT_EVENT,k=>{k.stat===Cd.PROXY?J(kt,`RPC '${e}' stream ${r} detected buffering proxy`):k.stat===Cd.NOPROXY&&J(kt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{E.o_()},0),E}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function bf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(t){return new ZR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-i);r>0&&J("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="PersistentStream";class qT{constructor(e,n,i,r,s,a,l,u){this.Fi=e,this.w_=i,this.S_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new FT(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Vi(n.toString()),Vi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===n&&this.W_(i,r)},i=>{e(()=>{const r=new ee(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return J(Jy,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(J(Jy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $N extends qT{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=eN(this.serializer,e),i=function(s){if(!("targetChange"in s))return le.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?le.min():a.readTime?ii(a.readTime):le.min()}(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=Bd(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=kd(u)?{documents:iN(s,u)}:{query:rN(s,u).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=DT(s,a.resumeToken);const h=zd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(le.min())>0){l.readTime=Tc(s,a.snapshotVersion.toTimestamp());const h=zd(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const i=aN(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=Bd(this.serializer),n.removeTarget=e,this.k_(n)}}class KN extends qT{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=nN(e.writeResults,e.commitTime),i=ii(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=Bd(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>tN(this.serializer,i))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{}class ZN extends XN{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new ee(K.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,Pd(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee(K.UNKNOWN,s.toString())})}Jo(e,n,i,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Jo(e,Pd(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ee(K.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class JN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Vi(n),this._a=!1):J("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="RemoteStore";class WN{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(a=>{i.enqueueAndForget(async()=>{ps(this)&&(J(ls,"Restarting streams for network reachability change."),await async function(u){const h=oe(u);h.Ia.add(4),await xo(h),h.Aa.set("Unknown"),h.Ia.delete(4),await hh(h)}(this))})}),this.Aa=new JN(i,r)}}async function hh(t){if(ps(t))for(const e of t.da)await e(!0)}async function xo(t){for(const e of t.da)await e(!1)}function HT(t,e){const n=oe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),bp(n)?_p(n):Ma(n).x_()&&vp(n,e))}function yp(t,e){const n=oe(t),i=Ma(n);n.Ta.delete(e),i.x_()&&GT(n,e),n.Ta.size===0&&(i.x_()?i.B_():ps(n)&&n.Aa.set("Unknown"))}function vp(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ma(t).H_(e)}function GT(t,e){t.Ra.$e(e),Ma(t).Y_(e)}function _p(t){t.Ra=new YR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ma(t).start(),t.Aa.aa()}function bp(t){return ps(t)&&!Ma(t).M_()&&t.Ta.size>0}function ps(t){return oe(t).Ia.size===0}function QT(t){t.Ra=void 0}async function eC(t){t.Aa.set("Online")}async function tC(t){t.Ta.forEach((e,n)=>{vp(t,e)})}async function nC(t,e){QT(t),bp(t)?(t.Aa.la(e),_p(t)):t.Aa.set("Unknown")}async function iC(t,e,n){if(t.Aa.set("Online"),e instanceof IT&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ta.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ta.delete(l),r.Ra.removeTarget(l))}(t,e)}catch(i){J(ls,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ac(t,i)}else if(e instanceof Cu?t.Ra.Ye(e):e instanceof CT?t.Ra.it(e):t.Ra.et(e),!n.isEqual(le.min()))try{const i=await BT(t.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.Ra.Pt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.Ta.get(h);c&&s.Ta.set(h,c.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const c=s.Ta.get(u);if(!c)return;s.Ta.set(u,c.withResumeToken(Dt.EMPTY_BYTE_STRING,c.snapshotVersion)),GT(s,u);const d=new sr(c.target,u,h,c.sequenceNumber);vp(s,d)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){J(ls,"Failed to raise snapshot:",i),await Ac(t,i)}}async function Ac(t,e,n){if(!Oa(e))throw e;t.Ia.add(1),await xo(t),t.Aa.set("Offline"),n||(n=()=>BT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(ls,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await hh(t)})}function YT(t,e){return e().catch(n=>Ac(t,n,e))}async function fh(t){const e=oe(t),n=Rr(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ip;for(;rC(e);)try{const r=await PN(e.localStore,i);if(r===null){e.Pa.length===0&&n.B_();break}i=r.batchId,sC(e,r)}catch(r){await Ac(e,r)}$T(e)&&KT(e)}function rC(t){return ps(t)&&t.Pa.length<10}function sC(t,e){t.Pa.push(e);const n=Rr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function $T(t){return ps(t)&&!Rr(t).M_()&&t.Pa.length>0}function KT(t){Rr(t).start()}async function aC(t){Rr(t).na()}async function lC(t){const e=Rr(t);for(const n of t.Pa)e.X_(n.mutations)}async function oC(t,e,n){const i=t.Pa.shift(),r=cp.from(i,e,n);await YT(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await fh(t)}async function uC(t,e){e&&Rr(t).Z_&&await async function(i,r){if(function(a){return GR(a)&&a!==K.ABORTED}(r.code)){const s=i.Pa.shift();Rr(i).N_(),await YT(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await fh(i)}}(t,e),$T(t)&&KT(t)}async function Wy(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),J(ls,"RemoteStore received new credentials");const i=ps(n);n.Ia.add(3),await xo(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await hh(n)}async function cC(t,e){const n=oe(t);e?(n.Ia.delete(2),await hh(n)):e||(n.Ia.add(2),await xo(n),n.Aa.set("Unknown"))}function Ma(t){return t.Va||(t.Va=function(n,i,r){const s=oe(n);return s.ia(),new $N(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Zo:eC.bind(null,t),e_:tC.bind(null,t),n_:nC.bind(null,t),J_:iC.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),bp(t)?_p(t):t.Aa.set("Unknown")):(await t.Va.stop(),QT(t))})),t.Va}function Rr(t){return t.ma||(t.ma=function(n,i,r){const s=oe(n);return s.ia(),new KN(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:aC.bind(null,t),n_:uC.bind(null,t),ea:lC.bind(null,t),ta:oC.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await fh(t)):(await t.ma.stop(),t.Pa.length>0&&(J(ls,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,l=new Tp(e,n,a,r,s);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ep(t,e){if(Vi("AsyncQueue",`${e}: ${t}`),Oa(t))return new ee(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{static emptySet(e){return new ia(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ie.comparator(n.key,i.key):(n,i)=>ie.comparator(n.key,i.key),this.keyedMap=al(),this.sortedSet=new Xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ia)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ia;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.fa=new Xe(ie.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):re(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,i)=>{e.push(i)}),e}}class ba{constructor(e,n,i,r,s,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ba(e,n,ia.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class fC{constructor(){this.queries=tv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const r=oe(n),s=r.queries;r.queries=tv(),s.forEach((a,l)=>{for(const u of l.wa)u.onError(i)})})(this,new ee(K.ABORTED,"Firestore shutting down"))}}function tv(){return new ds(t=>gT(t),sh)}async function XT(t,e){const n=oe(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.Sa()&&e.ba()&&(i=2):(s=new hC,i=e.ba()?0:1);try{switch(i){case 0:s.ya=await n.onListen(r,!0);break;case 1:s.ya=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=Ep(a,`Initialization of query '${Ds(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&Ap(n)}async function ZT(t,e){const n=oe(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const a=s.wa.indexOf(e);a>=0&&(s.wa.splice(a,1),s.wa.length===0?r=e.ba()?0:1:!s.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function dC(t,e){const n=oe(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.wa)l.Ca(r)&&(i=!0);a.ya=r}}i&&Ap(n)}function mC(t,e,n){const i=oe(t),r=i.queries.get(e);if(r)for(const s of r.wa)s.onError(n);i.queries.delete(e)}function Ap(t){t.Da.forEach(e=>{e.next()})}var Hd,nv;(nv=Hd||(Hd={})).Fa="default",nv.Cache="cache";class JT{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ba(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Hd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this.key=e}}class eE{constructor(e){this.key=e}}class pC{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=pe(),this.mutatedKeys=pe(),this.Xa=yT(e),this.eu=new ia(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new ev,r=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((c,d)=>{const f=r.get(c),g=ah(this.query,d)?d:null,E=!!f&&this.mutatedKeys.has(f.key),O=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let k=!1;f&&g?f.data.isEqual(g.data)?E!==O&&(i.track({type:3,doc:g}),k=!0):this.iu(f,g)||(i.track({type:2,doc:g}),k=!0,(u&&this.Xa(g,u)>0||h&&this.Xa(g,h)<0)&&(l=!0)):!f&&g?(i.track({type:0,doc:g}),k=!0):f&&!g&&(i.track({type:1,doc:f}),k=!0,(u||h)&&(l=!0)),k&&(g?(a=a.add(g),s=O?s.add(c):s.delete(c)):(a=a.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const c=this.query.limitType==="F"?a.last():a.first();a=a.delete(c.key),s=s.delete(c.key),i.track({type:1,doc:c})}return{eu:a,ru:i,Ds:l,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort((c,d)=>function(g,E){const O=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{At:k})}};return O(g)-O(E)}(c.type,d.type)||this.Xa(c.doc,d.doc)),this.su(i),r=r!=null&&r;const l=n&&!r?this.ou():[],u=this.Za.size===0&&this.current&&!r?1:0,h=u!==this.Ya;return this.Ya=u,a.length!==0||h?{snapshot:new ba(this.query,e.eu,s,a,e.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new ev,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=pe(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const n=[];return e.forEach(i=>{this.Za.has(i)||n.push(new eE(i))}),this.Za.forEach(i=>{e.has(i)||n.push(new WT(i))}),n}uu(e){this.Ha=e.qs,this.Za=pe();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return ba.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const xp="SyncEngine";class gC{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class yC{constructor(e){this.key=e,this.lu=!1}}class vC{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new ds(l=>gT(l),sh),this.Tu=new Map,this.Iu=new Set,this.du=new Xe(ie.comparator),this.Eu=new Map,this.Au=new dp,this.Ru={},this.Vu=new Map,this.mu=_a.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function _C(t,e,n=!0){const i=aE(t);let r;const s=i.Pu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.cu()):r=await tE(i,e,n,!0),r}async function bC(t,e){const n=aE(t);await tE(n,e,!0,!1)}async function tE(t,e,n,i){const r=await LN(t.localStore,ti(e)),s=r.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await TC(t,e,s,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&HT(t.remoteStore,r),l}async function TC(t,e,n,i,r){t.gu=(d,f,g)=>async function(O,k,b,S){let N=k.view.nu(b);N.Ds&&(N=await $y(O.localStore,k.query,!1).then(({documents:w})=>k.view.nu(w,N)));const M=S&&S.targetChanges.get(k.targetId),j=S&&S.targetMismatches.get(k.targetId)!=null,V=k.view.applyChanges(N,O.isPrimaryClient,M,j);return rv(O,k.targetId,V._u),V.snapshot}(t,d,f,g);const s=await $y(t.localStore,e,!0),a=new pC(e,s.qs),l=a.nu(s.documents),u=Ao.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),h=a.applyChanges(l,t.isPrimaryClient,u);rv(t,n,h._u);const c=new gC(e,n,a);return t.Pu.set(e,c),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function EC(t,e,n){const i=oe(t),r=i.Pu.get(e),s=i.Tu.get(r.targetId);if(s.length>1)return i.Tu.set(r.targetId,s.filter(a=>!sh(a,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Fd(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&yp(i.remoteStore,r.targetId),Gd(i,r.targetId)}).catch(Da)):(Gd(i,r.targetId),await Fd(i.localStore,r.targetId,!0))}async function AC(t,e){const n=oe(t),i=n.Pu.get(e),r=n.Tu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),yp(n.remoteStore,i.targetId))}async function xC(t,e,n){const i=DC(t);try{const r=await function(a,l){const u=oe(a),h=Le.now(),c=l.reduce((g,E)=>g.add(E.key),pe());let d,f;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let E=ki(),O=pe();return u.Os.getEntries(g,c).next(k=>{E=k,E.forEach((b,S)=>{S.isValidDocument()||(O=O.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,E)).next(k=>{d=k;const b=[];for(const S of l){const N=LR(S,d.get(S.key).overlayedDocument);N!=null&&b.push(new ms(S.key,N,oT(N.value.mapValue),ni.exists(!0)))}return u.mutationQueue.addMutationBatch(g,h,b,l)}).next(k=>{f=k;const b=k.applyToLocalDocumentSet(d,O);return u.documentOverlayCache.saveOverlays(g,k.batchId,b)})}).then(()=>({batchId:f.batchId,changes:_T(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Ru[a.currentUser.toKey()];h||(h=new Xe(ce)),h=h.insert(l,u),a.Ru[a.currentUser.toKey()]=h}(i,r.batchId,n),await wo(i,r.changes),await fh(i.remoteStore)}catch(r){const s=Ep(r,"Failed to persist write");n.reject(s)}}async function nE(t,e){const n=oe(t);try{const i=await UN(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.Eu.get(s);a&&(we(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.lu=!0:r.modifiedDocuments.size>0?we(a.lu,14607):r.removedDocuments.size>0&&(we(a.lu,42227),a.lu=!1))}),await wo(n,i,e)}catch(i){await Da(i)}}function iv(t,e,n){const i=oe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Pu.forEach((s,a)=>{const l=a.view.va(e);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=oe(a);u.onlineState=l;let h=!1;u.queries.forEach((c,d)=>{for(const f of d.wa)f.va(l)&&(h=!0)}),h&&Ap(u)}(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function wC(t,e,n){const i=oe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),s=r&&r.key;if(s){let a=new Xe(ie.comparator);a=a.insert(s,Ut.newNoDocument(s,le.min()));const l=pe().add(s),u=new uh(le.min(),new Map,new Xe(ce),a,l);await nE(i,u),i.du=i.du.remove(s),i.Eu.delete(e),wp(i)}else await Fd(i.localStore,e,!1).then(()=>Gd(i,e,n)).catch(Da)}async function SC(t,e){const n=oe(t),i=e.batch.batchId;try{const r=await jN(n.localStore,e);rE(n,i,null),iE(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await wo(n,r)}catch(r){await Da(r)}}async function RC(t,e,n){const i=oe(t);try{const r=await function(a,l){const u=oe(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let c;return u.mutationQueue.lookupMutationBatch(h,l).next(d=>(we(d!==null,37113),c=d.keys(),u.mutationQueue.removeMutationBatch(h,d))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,c,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,c)).next(()=>u.localDocuments.getDocuments(h,c))})}(i.localStore,e);rE(i,e,n),iE(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await wo(i,r)}catch(r){await Da(r)}}function iE(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function rE(t,e,n){const i=oe(t);let r=i.Ru[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function Gd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(i=>{t.Au.containsKey(i)||sE(t,i)})}function sE(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(yp(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),wp(t))}function rv(t,e,n){for(const i of n)i instanceof WT?(t.Au.addReference(i.key,e),NC(t,i)):i instanceof eE?(J(xp,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||sE(t,i.key)):re(19791,{yu:i})}function NC(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(J(xp,"New document in limbo: "+n),t.Iu.add(i),wp(t))}function wp(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ie(He.fromString(e)),i=t.mu.next();t.Eu.set(i,new yC(n)),t.du=t.du.insert(n,i),HT(t.remoteStore,new sr(ti(rh(n.path)),i,"TargetPurposeLimboResolution",th.ue))}}async function wo(t,e,n){const i=oe(t),r=[],s=[],a=[];i.Pu.isEmpty()||(i.Pu.forEach((l,u)=>{a.push(i.gu(u,e,n).then(h=>{var c;if((h||n)&&i.isPrimaryClient){const d=h?!h.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;i.sharedClientState.updateQueryState(u.targetId,d?"current":"not-current")}if(h){r.push(h);const d=pp.Es(u.targetId,h);s.push(d)}}))}),await Promise.all(a),i.hu.J_(r),await async function(u,h){const c=oe(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>$.forEach(h,f=>$.forEach(f.Is,g=>c.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>$.forEach(f.ds,g=>c.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!Oa(d))throw d;J(gp,"Failed to update sequence numbers: "+d)}for(const d of h){const f=d.targetId;if(!d.fromCache){const g=c.Fs.get(f),E=g.snapshotVersion,O=g.withLastLimboFreeSnapshotVersion(E);c.Fs=c.Fs.insert(f,O)}}}(i.localStore,s))}async function CC(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){J(xp,"User change. New user:",e.toKey());const i=await LT(n.localStore,e);n.currentUser=e,function(s,a){s.Vu.forEach(l=>{l.forEach(u=>{u.reject(new ee(K.CANCELLED,a))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await wo(n,i.Bs)}}function IC(t,e){const n=oe(t),i=n.Eu.get(e);if(i&&i.lu)return pe().add(i.key);{let r=pe();const s=n.Tu.get(e);if(!s)return r;for(const a of s){const l=n.Pu.get(a);r=r.unionWith(l.view.tu)}return r}}function aE(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wC.bind(null,e),e.hu.J_=dC.bind(null,e.eventManager),e.hu.pu=mC.bind(null,e.eventManager),e}function DC(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RC.bind(null,e),e}class xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ch(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return kN(this.persistence,new ON,e.initialUser,this.serializer)}Du(e){return new PT(mp.Vi,this.serializer)}bu(e){return new FN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xc.provider={build:()=>new xc};class OC extends xc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){we(this.persistence.referenceDelegate instanceof Ec,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new yN(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new PT(i=>Ec.Vi(i,n),this.serializer)}}class Qd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>iv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=CC.bind(null,this.syncEngine),await cC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new fC}()}createDatastore(e){const n=ch(e.databaseInfo.databaseId),i=function(s){return new YN(s)}(e.databaseInfo);return function(s,a,l,u){return new ZN(s,a,l,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,l){return new WN(i,r,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>iv(this.syncEngine,n,0),function(){return Zy.C()?new Zy:new qN}())}createSyncEngine(e,n){return function(r,s,a,l,u,h,c){const d=new vC(r,s,a,l,u,h);return c&&(d.fu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=oe(r);J(ls,"RemoteStore shutting down."),s.Ia.add(5),await xo(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Qd.provider={build:()=>new Qd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Vi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="FirestoreClient";class MC{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Xt.UNAUTHENTICATED,this.clientId=np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{J(Nr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(J(Nr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Ep(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Tf(t,e){t.asyncQueue.verifyOperationInProgress(),J(Nr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await LT(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>{as("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{J("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{as("Terminating Firestore due to IndexedDb database deletion failed",r)})}),t._offlineComponents=e}async function sv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await VC(t);J(Nr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Wy(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Wy(e.remoteStore,r)),t._onlineComponents=e}async function VC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(Nr,"Using user provided OfflineComponentProvider");try{await Tf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===K.FAILED_PRECONDITION||r.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;as("Error using user provided cache. Falling back to memory cache: "+n),await Tf(t,new xc)}}else J(Nr,"Using default OfflineComponentProvider"),await Tf(t,new OC(void 0));return t._offlineComponents}async function oE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(Nr,"Using user provided OnlineComponentProvider"),await sv(t,t._uninitializedComponentsProvider._online)):(J(Nr,"Using default OnlineComponentProvider"),await sv(t,new Qd))),t._onlineComponents}function kC(t){return oE(t).then(e=>e.syncEngine)}async function Yd(t){const e=await oE(t),n=e.eventManager;return n.onListen=_C.bind(null,e.syncEngine),n.onUnlisten=EC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=AC.bind(null,e.syncEngine),n}function jC(t,e,n={}){const i=new yr;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const c=new lE({next:f=>{c.Ou(),a.enqueueAndForget(()=>ZT(s,d));const g=f.docs.has(l);!g&&f.fromCache?h.reject(new ee(K.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&u&&u.source==="server"?h.reject(new ee(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(f)},error:f=>h.reject(f)}),d=new JT(rh(l.path),c,{includeMetadataChanges:!0,ka:!0});return XT(s,d)}(await Yd(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="firestore.googleapis.com",lv=!0;class ov{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UC,this.ssl=lv}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:lv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pN)throw new ee(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ee(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cE{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ov({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ov(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new G4;switch(i.type){case"firstParty":return new $4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ee(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=av.get(n);i&&(J("ComponentProvider","Removing Datastore"),av.delete(n),i.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Va(this.firestore,e,this._query)}}class ct{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ct(this.firestore,e,this._key)}toJSON(){return{type:ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(bo(n,ct._jsonSchema))return new ct(e,i||null,new ie(He.fromString(n.referencePath)))}}ct._jsonSchemaVersion="firestore/documentReference/1.0",ct._jsonSchema={type:ut("string",ct._jsonSchemaVersion),referencePath:ut("string")};class Zl extends Va{constructor(e,n,i){super(e,n,rh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new ie(e))}withConverter(e){return new Zl(this.firestore,e,this._path)}}function zC(t,e,...n){if(t=gn(t),arguments.length===1&&(e=np.newId()),W4("doc","path",e),t instanceof cE){const i=He.fromString(e,...n);return Ty(i),new ct(t,null,new ie(i))}{if(!(t instanceof ct||t instanceof Zl))throw new ee(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(He.fromString(e,...n));return Ty(i),new ct(t.firestore,t instanceof Zl?t.converter:null,new ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="AsyncQueue";class cv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new FT(this,"async_queue_retry"),this.oc=()=>{const i=bf();i&&J(uv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=bf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=bf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new yr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Oa(e))throw e;J(uv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,Vi("INTERNAL UNHANDLED ERROR: ",hv(i)),i}).then(i=>(this.nc=!1,i))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const r=Tp.createAndSchedule(this,e,n,i,s=>this.lc(s));return this.ec.push(r),r}ac(){this.tc&&re(47125,{hc:hv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function hv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ta extends cE{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new cv,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cv(e),this._firestoreClient=void 0,await e}}}function Sp(t){if(t._terminated)throw new ee(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PC(t),t._firestoreClient}function PC(t){var e,n,i;const r=t._freezeSettings(),s=function(l,u,h,c){return new hR(l,u,h,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,uE(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new MC(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(Dt.fromBase64String(e))}catch(n){throw new ee(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rn(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bo(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:ut("string",Rn._jsonSchemaVersion),bytes:ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ri._jsonSchemaVersion}}static fromJSON(e){if(bo(e,ri._jsonSchema))return new ri(e.latitude,e.longitude)}}ri._jsonSchemaVersion="firestore/geoPoint/1.0",ri._jsonSchema={type:ut("string",ri._jsonSchemaVersion),latitude:ut("number"),longitude:ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bo(e,si._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new si(e.vectorValues);throw new ee(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}si._jsonSchemaVersion="firestore/vectorValue/1.0",si._jsonSchema={type:ut("string",si._jsonSchemaVersion),vectorValues:ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=/^__.*__$/;class BC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ms(e,this.data,this.fieldMask,n,this.fieldTransforms):new Eo(e,this.data,n,this.fieldTransforms)}}function fE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{Ec:t})}}class Np{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Np(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return wc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(fE(this.Ec)&&LC.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class FC{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||ch(e)}Dc(e,n,i,r=!1){return new Np({Ec:e,methodName:n,bc:i,path:Ct.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dE(t){const e=t._freezeSettings(),n=ch(t._databaseId);return new FC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qC(t,e,n,i,r,s={}){const a=t.Dc(s.merge||s.mergeFields?2:0,e,n,r);gE("Data must be an object, but it was:",a,i);const l=mE(i,a);let u,h;if(s.merge)u=new zn(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const f=GC(e,d,n);if(!a.contains(f))throw new ee(K.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);YC(c,f)||c.push(f)}u=new zn(c),h=a.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,h=a.fieldTransforms;return new BC(new Sn(l),u,h)}function HC(t,e,n,i=!1){return Cp(n,t.Dc(i?4:3,e))}function Cp(t,e){if(pE(t=gn(t)))return gE("Unsupported field value:",e,t),mE(t,e);if(t instanceof hE)return function(i,r){if(!fE(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=Cp(l,r.yc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=gn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return VR(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Le.fromDate(i);return{timestampValue:Tc(r.serializer,s)}}if(i instanceof Le){const s=new Le(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Tc(r.serializer,s)}}if(i instanceof ri)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Rn)return{bytesValue:DT(r.serializer,i._byteString)};if(i instanceof ct){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fp(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof si)return function(a,l){return{mapValue:{fields:{[aT]:{stringValue:lT},[gc]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.wc("VectorValues must only contain numeric values.");return op(l.serializer,h)})}}}}}}(i,r);throw r.wc(`Unsupported field value: ${eh(i)}`)}(t,e)}function mE(t,e){const n={};return eT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fs(t,(i,r)=>{const s=Cp(r,e.Vc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function pE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof ri||t instanceof Rn||t instanceof ct||t instanceof hE||t instanceof si)}function gE(t,e,n){if(!pE(n)||!Jb(n)){const i=eh(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function GC(t,e,n){if((e=gn(e))instanceof Rp)return e._internalPath;if(typeof e=="string")return yE(t,e);throw wc("Field path arguments must be of type string or ",t,!1,void 0,n)}const QC=new RegExp("[~\\*/\\[\\]]");function yE(t,e,n){if(e.search(QC)>=0)throw wc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Rp(...e.split("."))._internalPath}catch{throw wc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wc(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new ee(K.INVALID_ARGUMENT,l+t+u)}function YC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $C(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_E("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $C extends vE{data(){return super.data()}}function _E(t,e){return typeof e=="string"?yE(t,e):e instanceof Rp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ip{}class XC extends Ip{}function ZC(t,e,...n){let i=[];e instanceof Ip&&i.push(e),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof Op).length,l=s.filter(u=>u instanceof Dp).length;if(a>1||a>0&&l>0)throw new ee(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Dp extends XC{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Dp(e,n,i)}_apply(e){const n=this._parse(e);return bE(e._query,n),new Va(e.firestore,e.converter,jd(e._query,n))}_parse(e){const n=dE(e.firestore);return function(s,a,l,u,h,c,d){let f;if(h.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new ee(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){mv(d,c);const E=[];for(const O of d)E.push(dv(u,s,O));f={arrayValue:{values:E}}}else f=dv(u,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||mv(d,c),f=HC(l,a,d,c==="in"||c==="not-in");return ot.create(h,c,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Op extends Ip{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Op(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Fn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)bE(a,u),a=jd(a,u)}(e._query,n),new Va(e.firestore,e.converter,jd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function dv(t,e,n){if(typeof(n=gn(n))=="string"){if(n==="")throw new ee(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pT(e)&&n.indexOf("/")!==-1)throw new ee(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(He.fromString(n));if(!ie.isDocumentKey(i))throw new ee(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Cy(t,new ie(i))}if(n instanceof ct)return Cy(t,n._key);throw new ee(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eh(n)}.`)}function mv(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bE(t,e){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class JC{convertValue(e,n="none"){switch(Sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return fs(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[gc].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>it(a.doubleValue));return new si(s)}convertGeoPoint(e){return new ri(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=ih(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ql(e));default:return null}}convertTimestamp(e){const n=xr(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=He.fromString(e);we(UT(i),9688,{name:e});const r=new Yl(i.get(1),i.get(3)),s=new ie(i.popFirst(5));return r.isEqual(n)||Vi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class ol{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wr extends vE{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(_E("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Wr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Wr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wr._jsonSchema={type:ut("string",Wr._jsonSchemaVersion),bundleSource:ut("string","DocumentSnapshot"),bundleName:ut("string"),bundle:ut("string")};class Iu extends Wr{data(e={}){return super.data(e)}}class ra{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ol(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Iu(this._firestore,this._userDataWriter,i.key,i,new ol(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new Iu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ol(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Iu(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ol(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,c=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),c=a.indexOf(l.doc.key)),{type:e3(l.type),doc:u,oldIndex:h,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ra._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=np.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function e3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(t){t=vr(t,ct);const e=vr(t.firestore,Ta);return jC(Sp(e),t._key).then(n=>AE(e,t,n))}ra._jsonSchemaVersion="firestore/querySnapshot/1.0",ra._jsonSchema={type:ut("string",ra._jsonSchemaVersion),bundleSource:ut("string","QuerySnapshot"),bundleName:ut("string"),bundle:ut("string")};class TE extends JC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,n)}}function n3(t,e,n){t=vr(t,ct);const i=vr(t.firestore,Ta),r=WC(t.converter,e);return EE(i,[qC(dE(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,ni.none())])}function i3(t){return EE(vr(t.firestore,Ta),[new up(t._key,ni.none())])}function r3(t,...e){var n,i,r;t=gn(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||fv(e[a])||(s=e[a++]);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(fv(e[a])){const d=e[a];e[a]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[a+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[a+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let u,h,c;if(t instanceof ct)h=vr(t.firestore,Ta),c=rh(t._key.path),u={next:d=>{e[a]&&e[a](AE(h,t,d))},error:e[a+1],complete:e[a+2]};else{const d=vr(t,Va);h=vr(d.firestore,Ta),c=d._query;const f=new TE(h);u={next:g=>{e[a]&&e[a](new ra(h,f,d,g))},error:e[a+1],complete:e[a+2]},KC(t._query)}return function(f,g,E,O){const k=new lE(O),b=new JT(g,k,E);return f.asyncQueue.enqueueAndForget(async()=>XT(await Yd(f),b)),()=>{k.Ou(),f.asyncQueue.enqueueAndForget(async()=>ZT(await Yd(f),b))}}(Sp(h),c,l,u)}function EE(t,e){return function(i,r){const s=new yr;return i.asyncQueue.enqueueAndForget(async()=>xC(await kC(i),r,s)),s.promise}(Sp(t),e)}function AE(t,e,n){const i=n.docs.get(e._key),r=new TE(t);return new Wr(t,r,e._key,i,new ol(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Ia=r})(yo),Er(new Oi("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new Ta(new Q4(i.getProvider("auth-internal")),new K4(a,i.getProvider("app-check-internal")),function(h,c){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ee(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yl(h.options.projectId,c)}(a,r),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Cn(gy,yy,e),Cn(gy,yy,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="firebasestorage.googleapis.com",s3="storageBucket",a3=2*60*1e3,l3=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends ci{constructor(e,n,i=0){super(Ef(e),`Firebase Storage: ${n} (${Ef(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ef(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var li;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(li||(li={}));function Ef(t){return"storage/"+t}function o3(){const t="An unknown error occurred, please check the error payload for server response.";return new hi(li.UNKNOWN,t)}function u3(){return new hi(li.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function c3(){return new hi(li.CANCELED,"User canceled the upload/download.")}function h3(t){return new hi(li.INVALID_URL,"Invalid URL '"+t+"'.")}function f3(t){return new hi(li.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function pv(t){return new hi(li.INVALID_ARGUMENT,t)}function wE(){return new hi(li.APP_DELETED,"The Firebase app was deleted.")}function d3(t){return new hi(li.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Pn.makeFromUrl(e,n)}catch{return new Pn(e,"")}if(i.path==="")return i;throw f3(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+r+a,"i"),u={bucket:1,path:3};function h(M){M.path_=decodeURIComponent(M.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${c}/b/${r}/o${f}`,"i"),E={bucket:1,path:3},O=n===xE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",b=new RegExp(`^https?://${O}/${r}/${k}`,"i"),N=[{regex:l,indices:u,postModify:s},{regex:g,indices:E,postModify:h},{regex:b,indices:{bucket:1,path:2},postModify:h}];for(let M=0;M<N.length;M++){const j=N[M],V=j.regex.exec(e);if(V){const w=V[j.indices.bucket];let y=V[j.indices.path];y||(y=""),i=new Pn(w,y),j.postModify(i);break}}if(i==null)throw h3(e);return i}}class m3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p3(t,e,n){let i=1,r=null,s=null,a=!1,l=0;function u(){return l===2}let h=!1;function c(...k){h||(h=!0,e.apply(null,k))}function d(k){r=setTimeout(()=>{r=null,t(g,u())},k)}function f(){s&&clearTimeout(s)}function g(k,...b){if(h){f();return}if(k){f(),c.call(null,k,...b);return}if(u()||a){f(),c.call(null,k,...b);return}i<64&&(i*=2);let N;l===1?(l=2,N=0):N=(i+Math.random())*1e3,d(N)}let E=!1;function O(k){E||(E=!0,f(),!h&&(r!==null?(k||(l=2),clearTimeout(r),d(0)):k||(l=1)))}return d(0),s=setTimeout(()=>{a=!0,O(!0)},n),O}function g3(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(t){return t!==void 0}function gv(t,e,n,i){if(i<e)throw pv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw pv(`Invalid value for '${t}'. Expected ${n} or less.`)}function v3(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Sc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Sc||(Sc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,n,i,r,s,a,l,u,h,c,d,f=!0,g=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=c,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,O)=>{this.resolve_=E,this.reject_=O,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new ou(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=l=>{const u=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const l=s.getErrorCode()===Sc.NO_ERROR,u=s.getStatus();if(!l||_3(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Sc.ABORT;i(!1,new ou(!1,null,c));return}const h=this.successCodes_.indexOf(u)!==-1;i(!0,new ou(h,s))})},n=(i,r)=>{const s=this.resolve_,a=this.reject_,l=r.connection;if(r.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());y3(u)?s(u):s()}catch(u){a(u)}else if(l!==null){const u=o3();u.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,u)):a(u)}else if(r.canceled){const u=this.appDelete_?wE():c3();a(u)}else{const u=u3();a(u)}};this.canceled_?n(!1,new ou(!1,null,!0)):this.backoffId_=p3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&g3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ou{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function T3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function E3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function A3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function x3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function w3(t,e,n,i,r,s,a=!0,l=!1){const u=v3(t.urlParams),h=t.url+u,c=Object.assign({},t.headers);return A3(c,e),T3(c,n),E3(c,s),x3(c,i),new b3(h,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function R3(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this._service=e,n instanceof Pn?this._location=n:this._location=Pn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Rc(e,n)}get root(){const e=new Pn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return R3(this._location.path)}get storage(){return this._service}get parent(){const e=S3(this._location.path);if(e===null)return null;const n=new Pn(this._location.bucket,e);return new Rc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw d3(e)}}function yv(t,e){const n=e==null?void 0:e[s3];return n==null?null:Pn.makeFromBucketSpec(n,t)}class N3{constructor(e,n,i,r,s,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=xE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=a3,this._maxUploadRetryTime=l3,this._requests=new Set,r!=null?this._bucket=Pn.makeFromBucketSpec(r,this._host):this._bucket=yv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Pn.makeFromBucketSpec(this._url,e):this._bucket=yv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Rc(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new m3(wE());{const a=w3(e,this._appId,i,r,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const vv="@firebase/storage",_v="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3="storage";function I3(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new N3(n,i,r,e,yo)}function D3(){Er(new Oi(C3,I3,"PUBLIC").setMultipleInstances(!0)),Cn(vv,_v,""),Cn(vv,_v,"esm2017")}D3();console.warn("Firebase configuration environment variables are not set. Cloud features are disabled.");const O3=t=>Math.ceil(t/4)+1,bv=t=>Math.floor((t-10)/2),M3=t=>[{name:"Acrobatics",ability:"dexterity",proficient:!1,expertise:!1},{name:"Animal Handling",ability:"wisdom",proficient:!1,expertise:!1},{name:"Arcana",ability:"intelligence",proficient:!1,expertise:!1},{name:"Athletics",ability:"strength",proficient:!1,expertise:!1},{name:"Deception",ability:"charisma",proficient:!1,expertise:!1},{name:"History",ability:"intelligence",proficient:!1,expertise:!1},{name:"Insight",ability:"wisdom",proficient:!1,expertise:!1},{name:"Intimidation",ability:"charisma",proficient:!1,expertise:!1},{name:"Investigation",ability:"intelligence",proficient:!1,expertise:!1},{name:"Medicine",ability:"wisdom",proficient:!1,expertise:!1},{name:"Nature",ability:"intelligence",proficient:!1,expertise:!1},{name:"Perception",ability:"wisdom",proficient:!1,expertise:!1},{name:"Performance",ability:"charisma",proficient:!1,expertise:!1},{name:"Persuasion",ability:"charisma",proficient:!1,expertise:!1},{name:"Religion",ability:"intelligence",proficient:!1,expertise:!1},{name:"Sleight of Hand",ability:"dexterity",proficient:!1,expertise:!1},{name:"Stealth",ability:"dexterity",proficient:!1,expertise:!1},{name:"Survival",ability:"wisdom",proficient:!1,expertise:!1}],Mp=()=>{const t={strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10};return{id:`new_${Date.now()}`,lastUpdated:Date.now(),name:"",class:"",subclass:"",level:1,race:"",alignment:"",background:"",playerName:"",experiencePoints:0,abilityScores:t,inspiration:0,proficiencyBonus:O3(1),savingThrows:{strength:{proficient:!1},dexterity:{proficient:!1},constitution:{proficient:!1},intelligence:{proficient:!1},wisdom:{proficient:!1},charisma:{proficient:!1}},skills:M3(),armorClass:10+bv(t.dexterity),initiative:bv(t.dexterity),speed:30,hp:{max:10,current:10,temporary:0},hitDice:{total:"1d8",used:0},deathSaves:{successes:0,failures:0},personalityTraits:"",ideals:"",bonds:"",flaws:"",languages:"Common",attacks:[],currency:{cp:0,sp:0,ep:0,gp:0,pp:0},equipment:[],featuresAndTraits:[],notes:"",dmNotes:"",spellcastingAbility:"",spells:[],spellSlots:{1:{max:0,used:0},2:{max:0,used:0},3:{max:0,used:0},4:{max:0,used:0},5:{max:0,used:0},6:{max:0,used:0},7:{max:0,used:0},8:{max:0,used:0},9:{max:0,used:0}},customResources:[]}},SE="runica-characters",dh=()=>{try{const t=localStorage.getItem(SE);return t?JSON.parse(t).map(e=>({...Mp(),...e})):[]}catch(t){return console.error("Error reading from local storage",t),[]}},RE=t=>{try{localStorage.setItem(SE,JSON.stringify(t))}catch(e){console.error("Error saving to local storage",e)}},NE=()=>null,Vp=t=>{const e=NE();return e?zC(e,t):null},V3=t=>{const e=NE();return e?r3(ZC(e),n=>{const i=n.docs.map(r=>r.data());t(i)}):(t(dh()),()=>{})},CE=async t=>{if(t==="new")return Mp();const e=Vp(t);if(e){const n=await t3(e);return n.exists()?n.data():null}else return dh().find(n=>n.id===t)||null},IE=async t=>{const e={...t,lastUpdated:Date.now()},n=Vp(e.id);if(n)await n3(n,e);else{const i=dh(),r=i.findIndex(s=>s.id===e.id);r>-1?i[r]=e:i.push(e),RE(i)}return e},DE=async t=>{const e=Vp(t);if(e)await i3(e);else{const n=dh();RE(n.filter(i=>i.id!==t))}},k3=async()=>{};new _i;const j3=()=>(alert("Firebase is not configured. Cloud sign-in is disabled. Please update firebaseConfig.ts."),Promise.resolve()),U3=()=>Promise.resolve(),z3=t=>(t(null),()=>{}),P3=({className:t})=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor",children:[p.jsx("path",{fillRule:"evenodd",d:"M9.315 7.584C12.195 3.883 19.695 4.032 22.425 8.133c.225.33.015.765-.36.765h-2.19c-.39 0-.683-.404-.509-.757C17.58 4.568 11.535 4.818 9.315 7.584zM10.035 15c-2.88 3.701-10.38 3.552-13.11-0.549a.6.6 0 01.36-.765h2.19c.39 0 .683.404.509.757 1.785 3.552 7.83 3.302 10.05-0.21z",clipRule:"evenodd"}),p.jsx("path",{d:"M11.25 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75V12zM12 4.5a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75V4.5zM12 18a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75V18zM4.5 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H5.25a.75.75 0 01-.75-.75V12zM18 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75V12z"})]}),gs=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.256 1.478l-.209-.035-1.005 13.006a.75.75 0 01-.75.742H5.625a.75.75 0 01-.75-.742L3.87 6.66l-.209.035a.75.75 0 01-.256-1.478A48.567 48.567 0 017.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 013.369 0c1.603.051 2.815 1.387 2.815 2.951zm-6.136-1.452a51.196 51.196 0 013.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 00-6 0v-.113c0-.794.609-1.428 1.364-1.452z",clipRule:"evenodd"})}),ys=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:t,children:p.jsx("path",{d:"M2.695 14.763l-1.262 3.154a.5.5 0 00.65.65l3.155-1.262a4 4 0 001.343-.885L17.5 5.5a2.121 2.121 0 00-3-3L3.58 13.42a4 4 0 00-.885 1.343z"})}),OE=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),ME=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),L3=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),So=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),B3=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),F3=({character:t,onSelect:e,onDelete:n})=>{const i=r=>{r.stopPropagation(),e()};return p.jsxs("div",{onClick:e,className:"bg-zinc-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 hover:shadow-amber-500/20 hover:scale-105 group relative cursor-pointer",children:[p.jsx("div",{className:"h-32 bg-zinc-700/50 relative",children:t.imageUrl?p.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-600",children:p.jsx(ME,{className:"w-16 h-16"})})}),p.jsxs("div",{className:"p-5",children:[p.jsx("h3",{className:"text-xl font-bold font-cinzel text-amber-400 truncate",children:t.name||"Unnamed Adventurer"}),p.jsxs("p",{className:"text-zinc-400 capitalize text-sm",children:[t.race||"Race"," ",t.class||"Class","  Level ",t.level]}),p.jsxs("div",{className:"mt-4 flex items-center gap-4 text-sm text-zinc-300 border-t border-zinc-700 pt-4",children:[p.jsxs("div",{className:"flex items-center gap-1.5",title:"Hit Points",children:[p.jsx("span",{className:"font-bold text-red-400",children:"HP"}),p.jsxs("span",{children:[t.hp.current,"/",t.hp.max]})]}),p.jsxs("div",{className:"flex items-center gap-1.5",title:"Armor Class",children:[p.jsx("span",{className:"font-bold text-sky-400",children:"AC"}),p.jsx("span",{children:t.armorClass})]})]})]}),p.jsxs("div",{className:"absolute top-3 right-3 flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsx("button",{onClick:i,className:"p-2 rounded-full bg-zinc-700 hover:bg-amber-500 text-zinc-300 hover:text-white transition-colors","aria-label":`Edit ${t.name}`,children:p.jsx(ys,{className:"w-4 h-4"})}),p.jsx("button",{onClick:n,className:"p-2 rounded-full bg-zinc-700 hover:bg-red-600 text-zinc-300 hover:text-white transition-colors","aria-label":`Delete ${t.name}`,children:p.jsx(gs,{className:"w-4 h-4"})})]})]})},q3=({user:t})=>t?p.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("img",{src:t.photoURL||void 0,alt:"User",className:"w-8 h-8 rounded-full"}),p.jsx("span",{className:"text-zinc-300 hidden sm:inline",children:t.displayName||t.email})]}),p.jsx("button",{onClick:()=>U3(),className:"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 rounded-md text-white transition-colors",children:"Sign Out"})]}):p.jsxs("button",{onClick:()=>j3(),className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 rounded-md text-white font-bold transition-colors flex items-center gap-2",children:[p.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M22.56,12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26,1.37-1.04,2.53-2.21,3.31v2.77h3.57c2.08-1.92,3.28-4.74,3.28-8.09Z"}),p.jsx("path",{d:"M12,23c2.97,0,5.46-.98,7.28-2.66l-3.57-2.77c-.98.66-2.23,1.06-3.71,1.06-2.86,0-5.29-1.93-6.16-4.53H2.18v2.84C3.99,20.53,7.7,23,12,23Z"}),p.jsx("path",{d:"M5.84,14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43,8.55,1,10.22,1,12s.43,3.45,1.18,4.93l3.66-2.84Z"}),p.jsx("path",{d:"M12,5.38c1.62,0,3.06.56,4.21,1.64l3.15-3.15C17.45,2.09,14.97,1,12,1,7.7,1,3.99,3.47,2.18,7.07l3.66,2.84c.87-2.6,3.3-4.53,6.16-4.53Z"})]}),"Sign in with Google"]}),H3=({onSelectCharacter:t,currentUser:e})=>{const[n,i]=ne.useState([]),[r,s]=ne.useState(!0);ne.useEffect(()=>{s(!0);const u=V3(h=>{i(h.sort((c,d)=>c.name.localeCompare(d.name))),s(!1)});return()=>u()},[e]);const a=()=>{t("new")},l=async(u,h)=>{window.confirm(`Are you sure you want to delete ${h}? This cannot be undone.`)&&await DE(u)};return r?p.jsx("div",{className:"flex justify-center items-center h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})}):p.jsxs("div",{className:"p-4 sm:p-8 max-w-7xl mx-auto",children:[p.jsxs("header",{className:"flex justify-between items-center mb-8",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-amber-400 font-cinzel tracking-wider",children:"RUNICA"}),p.jsx("p",{className:"text-zinc-400 mt-1",children:"Your D&D Companion"})]}),p.jsx(q3,{user:e})]}),p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsxs("button",{onClick:a,className:"mb-10 flex items-center gap-2 px-6 py-3 bg-amber-600 text-white font-bold rounded-lg shadow-md hover:bg-amber-500 transition-all duration-300 transform hover:scale-105",children:[p.jsx(B3,{className:"w-5 h-5"}),"Create New Character"]}),n.length>0?p.jsx("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(u=>p.jsx(F3,{character:u,onSelect:()=>t(u.id),onDelete:h=>{h.stopPropagation(),l(u.id,u.name)}},u.id))}):p.jsxs("div",{className:"text-center w-full max-w-2xl mt-8 py-16 px-6 bg-zinc-800/50 rounded-lg",children:[p.jsx("h2",{className:"text-2xl font-semibold text-zinc-300 font-cinzel",children:"Your adventure awaits!"}),p.jsxs("p",{className:"text-zinc-400 mt-2",children:[e?"You have no characters synced to this account.":"You have no local characters.",p.jsx("br",{}),"Click the button above to forge your first hero."]})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3="type.googleapis.com/google.protobuf.Int64Value",Q3="type.googleapis.com/google.protobuf.UInt64Value";function VE(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function Nc(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Nc(e));if(typeof t=="function"||typeof t=="object")return VE(t,e=>Nc(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Ea(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case G3:case Q3:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Ea(e)):typeof t=="function"||typeof t=="object"?VE(t,e=>Ea(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wt extends ci{constructor(e,n,i){super(`${kp}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,Wt.prototype)}}function Y3(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Cc(t,e){let n=Y3(t),i=n,r;try{const s=e&&e.error;if(s){const a=s.status;if(typeof a=="string"){if(!Tv[a])return new Wt("internal","internal");n=Tv[a],i=a}const l=s.message;typeof l=="string"&&(i=l),r=s.details,r!==void 0&&(r=Ea(r))}}catch{}return n==="ok"?null:new Wt(n,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,n,i,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,vi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(s=>this.auth=s,()=>{}),this.messaging||i.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r==null||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="us-central1",K3=/^data: (.*?)(?:\n|$)/;function X3(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new Wt("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Z3{constructor(e,n,i,r,s=$d,a=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new $3(e,n,i,r),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=$d}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function J3(t,e,n){const i=po(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(Rw(t.emulatorOrigin),Iw("Functions",!0))}function W3(t,e,n){const i=r=>tI(t,e,r,{});return i.stream=(r,s)=>iI(t,e,r,s),i}async function eI(t,e,n,i){n["Content-Type"]="application/json";let r;try{r=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await r.json()}catch{}return{status:r.status,json:s}}async function kE(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function tI(t,e,n,i){const r=t._url(e);return nI(t,r,n,i)}async function nI(t,e,n,i){n=Nc(n);const r={data:n},s=await kE(t,i),a=i.timeout||7e4,l=X3(a),u=await Promise.race([eI(e,r,s,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!u)throw new Wt("cancelled","Firebase Functions instance was deleted.");const h=Cc(u.status,u.json);if(h)throw h;if(!u.json)throw new Wt("internal","Response is not valid JSON object.");let c=u.json.data;if(typeof c>"u"&&(c=u.json.result),typeof c>"u")throw new Wt("internal","Response is missing data field.");return{data:Ea(c)}}function iI(t,e,n,i){const r=t._url(e);return rI(t,r,n,i||{})}async function rI(t,e,n,i){var r;n=Nc(n);const s={data:n},a=await kE(t,i);a["Content-Type"]="application/json",a.Accept="text/event-stream";let l;try{l=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:a,signal:i==null?void 0:i.signal})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const O=new Wt("cancelled","Request was cancelled.");return{data:Promise.reject(O),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(O)}}}}}}const E=Cc(0,null);return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}let u,h;const c=new Promise((g,E)=>{u=g,h=E});(r=i==null?void 0:i.signal)===null||r===void 0||r.addEventListener("abort",()=>{const g=new Wt("cancelled","Request was cancelled.");h(g)});const d=l.body.getReader(),f=sI(d,u,h,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const g=f.getReader();return{async next(){const{value:E,done:O}=await g.read();return{value:E,done:O}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:c}}function sI(t,e,n,i){const r=(a,l)=>{const u=a.match(K3);if(!u)return;const h=u[1];try{const c=JSON.parse(h);if("result"in c){e(Ea(c.result));return}if("message"in c){l.enqueue(Ea(c.message));return}if("error"in c){const d=Cc(0,c);l.error(d),n(d);return}}catch(c){if(c instanceof Wt){l.error(c),n(c);return}}},s=new TextDecoder;return new ReadableStream({start(a){let l="";return u();async function u(){if(i!=null&&i.aborted){const h=new Wt("cancelled","Request was cancelled");return a.error(h),n(h),Promise.resolve()}try{const{value:h,done:c}=await t.read();if(c){l.trim()&&r(l.trim(),a),a.close();return}if(i!=null&&i.aborted){const f=new Wt("cancelled","Request was cancelled");a.error(f),n(f),await t.cancel();return}l+=s.decode(h,{stream:!0});const d=l.split(`
`);l=d.pop()||"";for(const f of d)f.trim()&&r(f.trim(),a);return u()}catch(h){const c=h instanceof Wt?h:Cc(0,null);a.error(c),n(c)}}},cancel(){return t.cancel()}})}const Ev="@firebase/functions",Av="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="auth-internal",lI="app-check-internal",oI="messaging-internal";function uI(t){const e=(n,{instanceIdentifier:i})=>{const r=n.getProvider("app").getImmediate(),s=n.getProvider(aI),a=n.getProvider(oI),l=n.getProvider(lI);return new Z3(r,s,a,l,i)};Er(new Oi(kp,e,"PUBLIC").setMultipleInstances(!0)),Cn(Ev,Av,t),Cn(Ev,Av,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t=GS(),e=$d){const i=BS(gn(t),kp).getImmediate({identifier:e}),r=xw("functions");return r&&hI(i,...r),i}function hI(t,e,n){J3(gn(t),e,n)}function fI(t,e,n){return W3(gn(t),e)}uI();const dI={personalityTraits:"Generazione AI fallita. Impossibile contattare il servizio.",ideals:"Errore.",bonds:"Errore.",flaws:"Errore."},mI=fI(cI(),"callGemini"),pI=async(t,e)=>{const{name:n,race:i,class:r,background:s,alignment:a}=t,l=`
     Generate personality aspects for a Dungeons & Dragons character.
     Based on the following details:
     - Name: ${n}
     - Race: ${i}
     - Class: ${r}
     - Background: ${s}
     - Alignment: ${a}
     ${e?`
- Additional Theme: "${e}"`:""}

     Return a JSON object with four keys: "personalityTraits", "ideals", "bonds", and "flaws".
     - "personalityTraits": A short paragraph describing the character's general demeanor.
     - "ideals": A sentence describing a core belief.
     - "bonds": A sentence about something or someone the character cares deeply about.
     - "flaws": A sentence describing a significant weakness or fear.
   `;try{console.log("Calling Cloud Function 'callGemini'...");const u=await mI(l);if(!u.data.success||!u.data.response)throw new Error("La Cloud Function ha riportato un errore: "+u.data.response);const h=u.data.response.trim(),c=JSON.parse(h);return{personalityTraits:c.personalityTraits||"",ideals:c.ideals||"",bonds:c.bonds||"",flaws:c.flaws||""}}catch(u){return console.error("Errore durante la chiamata alla Cloud Function 'callGemini':",u),dI}};function gI(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in t)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(t)}function jE(t,e){return new Promise(function(n,i){let r;return yI(t).then(function(s){try{return r=s,n(new Blob([e.slice(0,2),r,e.slice(2)],{type:"image/jpeg"}))}catch(a){return i(a)}},i)})}const yI=t=>new Promise((e,n)=>{const i=new FileReader;i.addEventListener("load",({target:{result:r}})=>{const s=new DataView(r);let a=0;if(s.getUint16(a)!==65496)return n("not a valid JPEG");for(a+=2;;){const l=s.getUint16(a);if(l===65498)break;const u=s.getUint16(a+2);if(l===65505&&s.getUint32(a+4)===1165519206){const h=a+10;let c;switch(s.getUint16(h)){case 18761:c=!0;break;case 19789:c=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(h+2,c)!==42)return n("TIFF header contains invalid version");const d=s.getUint32(h+4,c),f=h+d+2+12*s.getUint16(h+d,c);for(let g=h+d+2;g<f;g+=12)if(s.getUint16(g,c)==274){if(s.getUint16(g+2,c)!==3)return n("Orientation data type is invalid");if(s.getUint32(g+4,c)!==1)return n("Orientation data count is invalid");s.setUint16(g+8,1,c);break}return e(r.slice(a,a+2+u))}a+=2+u}return e(new Blob)}),i.readAsArrayBuffer(t)});var Ic={},vI={get exports(){return Ic},set exports(t){Ic=t}};(function(t){var e,n,i={};vI.exports=i,i.parse=function(r,s){for(var a=i.bin.readUshort,l=i.bin.readUint,u=0,h={},c=new Uint8Array(r),d=c.length-4;l(c,d)!=101010256;)d--;u=d,u+=4;var f=a(c,u+=4);a(c,u+=2);var g=l(c,u+=2),E=l(c,u+=4);u+=4,u=E;for(var O=0;O<f;O++){l(c,u),u+=4,u+=4,u+=4,l(c,u+=4),g=l(c,u+=4);var k=l(c,u+=4),b=a(c,u+=4),S=a(c,u+2),N=a(c,u+4);u+=6;var M=l(c,u+=8);u+=4,u+=b+S+N,i._readLocal(c,M,h,g,k,s)}return h},i._readLocal=function(r,s,a,l,u,h){var c=i.bin.readUshort,d=i.bin.readUint;d(r,s),c(r,s+=4),c(r,s+=2);var f=c(r,s+=2);d(r,s+=2),d(r,s+=4),s+=4;var g=c(r,s+=8),E=c(r,s+=2);s+=2;var O=i.bin.readUTF8(r,s,g);if(s+=g,s+=E,h)a[O]={size:u,csize:l};else{var k=new Uint8Array(r.buffer,s);if(f==0)a[O]=new Uint8Array(k.buffer.slice(s,s+l));else{if(f!=8)throw"unknown compression method: "+f;var b=new Uint8Array(u);i.inflateRaw(k,b),a[O]=b}}},i.inflateRaw=function(r,s){return i.F.inflate(r,s)},i.inflate=function(r,s){return r[0],r[1],i.inflateRaw(new Uint8Array(r.buffer,r.byteOffset+2,r.length-6),s)},i.deflate=function(r,s){s==null&&(s={level:6});var a=0,l=new Uint8Array(50+Math.floor(1.1*r.length));l[a]=120,l[a+1]=156,a+=2,a=i.F.deflateRaw(r,l,a,s.level);var u=i.adler(r,0,r.length);return l[a+0]=u>>>24&255,l[a+1]=u>>>16&255,l[a+2]=u>>>8&255,l[a+3]=u>>>0&255,new Uint8Array(l.buffer,0,a+4)},i.deflateRaw=function(r,s){s==null&&(s={level:6});var a=new Uint8Array(50+Math.floor(1.1*r.length)),l=i.F.deflateRaw(r,a,l,s.level);return new Uint8Array(a.buffer,0,l)},i.encode=function(r,s){s==null&&(s=!1);var a=0,l=i.bin.writeUint,u=i.bin.writeUshort,h={};for(var c in r){var d=!i._noNeed(c)&&!s,f=r[c],g=i.crc.crc(f,0,f.length);h[c]={cpr:d,usize:f.length,crc:g,file:d?i.deflateRaw(f):f}}for(var c in h)a+=h[c].file.length+30+46+2*i.bin.sizeUTF8(c);a+=22;var E=new Uint8Array(a),O=0,k=[];for(var c in h){var b=h[c];k.push(O),O=i._writeHeader(E,O,c,b,0)}var S=0,N=O;for(var c in h)b=h[c],k.push(O),O=i._writeHeader(E,O,c,b,1,k[S++]);var M=O-N;return l(E,O,101010256),O+=4,u(E,O+=4,S),u(E,O+=2,S),l(E,O+=2,M),l(E,O+=4,N),O+=4,O+=2,E.buffer},i._noNeed=function(r){var s=r.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},i._writeHeader=function(r,s,a,l,u,h){var c=i.bin.writeUint,d=i.bin.writeUshort,f=l.file;return c(r,s,u==0?67324752:33639248),s+=4,u==1&&(s+=2),d(r,s,20),d(r,s+=2,0),d(r,s+=2,l.cpr?8:0),c(r,s+=2,0),c(r,s+=4,l.crc),c(r,s+=4,f.length),c(r,s+=4,l.usize),d(r,s+=4,i.bin.sizeUTF8(a)),d(r,s+=2,0),s+=2,u==1&&(s+=2,s+=2,c(r,s+=6,h),s+=4),s+=i.bin.writeUTF8(r,s,a),u==0&&(r.set(f,s),s+=f.length),s},i.crc={table:function(){for(var r=new Uint32Array(256),s=0;s<256;s++){for(var a=s,l=0;l<8;l++)1&a?a=3988292384^a>>>1:a>>>=1;r[s]=a}return r}(),update:function(r,s,a,l){for(var u=0;u<l;u++)r=i.crc.table[255&(r^s[a+u])]^r>>>8;return r},crc:function(r,s,a){return 4294967295^i.crc.update(4294967295,r,s,a)}},i.adler=function(r,s,a){for(var l=1,u=0,h=s,c=s+a;h<c;){for(var d=Math.min(h+5552,c);h<d;)u+=l+=r[h++];l%=65521,u%=65521}return u<<16|l},i.bin={readUshort:function(r,s){return r[s]|r[s+1]<<8},writeUshort:function(r,s,a){r[s]=255&a,r[s+1]=a>>8&255},readUint:function(r,s){return 16777216*r[s+3]+(r[s+2]<<16|r[s+1]<<8|r[s])},writeUint:function(r,s,a){r[s]=255&a,r[s+1]=a>>8&255,r[s+2]=a>>16&255,r[s+3]=a>>24&255},readASCII:function(r,s,a){for(var l="",u=0;u<a;u++)l+=String.fromCharCode(r[s+u]);return l},writeASCII:function(r,s,a){for(var l=0;l<a.length;l++)r[s+l]=a.charCodeAt(l)},pad:function(r){return r.length<2?"0"+r:r},readUTF8:function(r,s,a){for(var l,u="",h=0;h<a;h++)u+="%"+i.bin.pad(r[s+h].toString(16));try{l=decodeURIComponent(u)}catch{return i.bin.readASCII(r,s,a)}return l},writeUTF8:function(r,s,a){for(var l=a.length,u=0,h=0;h<l;h++){var c=a.charCodeAt(h);if(!(4294967168&c))r[s+u]=c,u++;else if(!(4294965248&c))r[s+u]=192|c>>6,r[s+u+1]=128|c>>0&63,u+=2;else if(!(4294901760&c))r[s+u]=224|c>>12,r[s+u+1]=128|c>>6&63,r[s+u+2]=128|c>>0&63,u+=3;else{if(4292870144&c)throw"e";r[s+u]=240|c>>18,r[s+u+1]=128|c>>12&63,r[s+u+2]=128|c>>6&63,r[s+u+3]=128|c>>0&63,u+=4}}return u},sizeUTF8:function(r){for(var s=r.length,a=0,l=0;l<s;l++){var u=r.charCodeAt(l);if(!(4294967168&u))a++;else if(!(4294965248&u))a+=2;else if(!(4294901760&u))a+=3;else{if(4292870144&u)throw"e";a+=4}}return a}},i.F={},i.F.deflateRaw=function(r,s,a,l){var u=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],h=i.F.U,c=i.F._goodIndex;i.F._hash;var d=i.F._putsE,f=0,g=a<<3,E=0,O=r.length;if(l==0){for(;f<O;)d(s,g,f+(x=Math.min(65535,O-f))==O?1:0),g=i.F._copyExact(r,f,x,s,g+8),f+=x;return g>>>3}var k=h.lits,b=h.strt,S=h.prev,N=0,M=0,j=0,V=0,w=0,y=0;for(O>2&&(b[y=i.F._hash(r,0)]=0),f=0;f<O;f++){if(w=y,f+1<O-2){y=i.F._hash(r,f+1);var v=f+1&32767;S[v]=b[y],b[y]=v}if(E<=f){(N>14e3||M>26697)&&O-f>100&&(E<f&&(k[N]=f-E,N+=2,E=f),g=i.F._writeBlock(f==O-1||E==O?1:0,k,N,V,r,j,f-j,s,g),N=M=V=0,j=f);var T=0;f<O-2&&(T=i.F._bestMatch(r,f,S,w,Math.min(u[2],O-f),u[3]));var x=T>>>16,R=65535&T;if(T!=0){R=65535&T;var A=c(x=T>>>16,h.of0);h.lhst[257+A]++;var U=c(R,h.df0);h.dhst[U]++,V+=h.exb[A]+h.dxb[U],k[N]=x<<23|f-E,k[N+1]=R<<16|A<<8|U,N+=2,E=f+x}else h.lhst[r[f]]++;M++}}for(j==f&&r.length!=0||(E<f&&(k[N]=f-E,N+=2,E=f),g=i.F._writeBlock(1,k,N,V,r,j,f-j,s,g),N=0,M=0,N=M=V=0,j=f);7&g;)g++;return g>>>3},i.F._bestMatch=function(r,s,a,l,u,h){var c=32767&s,d=a[c],f=c-d+32768&32767;if(d==c||l!=i.F._hash(r,s-f))return 0;for(var g=0,E=0,O=Math.min(32767,s);f<=O&&--h!=0&&d!=c;){if(g==0||r[s+g]==r[s+g-f]){var k=i.F._howLong(r,s,f);if(k>g){if(E=f,(g=k)>=u)break;f+2<k&&(k=f+2);for(var b=0,S=0;S<k-2;S++){var N=s-f+S+32768&32767,M=N-a[N]+32768&32767;M>b&&(b=M,d=N)}}}f+=(c=d)-(d=a[c])+32768&32767}return g<<16|E},i.F._howLong=function(r,s,a){if(r[s]!=r[s-a]||r[s+1]!=r[s+1-a]||r[s+2]!=r[s+2-a])return 0;var l=s,u=Math.min(r.length,s+258);for(s+=3;s<u&&r[s]==r[s-a];)s++;return s-l},i.F._hash=function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(r,s,a,l,u,h,c,d,f){var g,E,O,k,b,S,N,M,j,V=i.F.U,w=i.F._putsF,y=i.F._putsE;V.lhst[256]++,E=(g=i.F.getTrees())[0],O=g[1],k=g[2],b=g[3],S=g[4],N=g[5],M=g[6],j=g[7];var v=32+(f+3&7?8-(f+3&7):0)+(c<<3),T=l+i.F.contSize(V.fltree,V.lhst)+i.F.contSize(V.fdtree,V.dhst),x=l+i.F.contSize(V.ltree,V.lhst)+i.F.contSize(V.dtree,V.dhst);x+=14+3*N+i.F.contSize(V.itree,V.ihst)+(2*V.ihst[16]+3*V.ihst[17]+7*V.ihst[18]);for(var R=0;R<286;R++)V.lhst[R]=0;for(R=0;R<30;R++)V.dhst[R]=0;for(R=0;R<19;R++)V.ihst[R]=0;var A=v<T&&v<x?0:T<x?1:2;if(w(d,f,r),w(d,f+1,A),f+=3,A==0){for(;7&f;)f++;f=i.F._copyExact(u,h,c,d,f)}else{var U,B;if(A==1&&(U=V.fltree,B=V.fdtree),A==2){i.F.makeCodes(V.ltree,E),i.F.revCodes(V.ltree,E),i.F.makeCodes(V.dtree,O),i.F.revCodes(V.dtree,O),i.F.makeCodes(V.itree,k),i.F.revCodes(V.itree,k),U=V.ltree,B=V.dtree,y(d,f,b-257),y(d,f+=5,S-1),y(d,f+=5,N-4),f+=4;for(var I=0;I<N;I++)y(d,f+3*I,V.itree[1+(V.ordr[I]<<1)]);f+=3*N,f=i.F._codeTiny(M,V.itree,d,f),f=i.F._codeTiny(j,V.itree,d,f)}for(var C=h,q=0;q<a;q+=2){for(var P=s[q],G=P>>>23,W=C+(8388607&P);C<W;)f=i.F._writeLit(u[C++],U,d,f);if(G!=0){var z=s[q+1],Y=z>>16,F=z>>8&255,H=255&z;y(d,f=i.F._writeLit(257+F,U,d,f),G-V.of0[F]),f+=V.exb[F],w(d,f=i.F._writeLit(H,B,d,f),Y-V.df0[H]),f+=V.dxb[H],C+=G}}f=i.F._writeLit(256,U,d,f)}return f},i.F._copyExact=function(r,s,a,l,u){var h=u>>>3;return l[h]=a,l[h+1]=a>>>8,l[h+2]=255-l[h],l[h+3]=255-l[h+1],h+=4,l.set(new Uint8Array(r.buffer,s,a),h),u+(a+4<<3)},i.F.getTrees=function(){for(var r=i.F.U,s=i.F._hufTree(r.lhst,r.ltree,15),a=i.F._hufTree(r.dhst,r.dtree,15),l=[],u=i.F._lenCodes(r.ltree,l),h=[],c=i.F._lenCodes(r.dtree,h),d=0;d<l.length;d+=2)r.ihst[l[d]]++;for(d=0;d<h.length;d+=2)r.ihst[h[d]]++;for(var f=i.F._hufTree(r.ihst,r.itree,7),g=19;g>4&&r.itree[1+(r.ordr[g-1]<<1)]==0;)g--;return[s,a,f,u,c,g,l,h]},i.F.getSecond=function(r){for(var s=[],a=0;a<r.length;a+=2)s.push(r[a+1]);return s},i.F.nonZero=function(r){for(var s="",a=0;a<r.length;a+=2)r[a+1]!=0&&(s+=(a>>1)+",");return s},i.F.contSize=function(r,s){for(var a=0,l=0;l<s.length;l++)a+=s[l]*r[1+(l<<1)];return a},i.F._codeTiny=function(r,s,a,l){for(var u=0;u<r.length;u+=2){var h=r[u],c=r[u+1];l=i.F._writeLit(h,s,a,l);var d=h==16?2:h==17?3:7;h>15&&(i.F._putsE(a,l,c,d),l+=d)}return l},i.F._lenCodes=function(r,s){for(var a=r.length;a!=2&&r[a-1]==0;)a-=2;for(var l=0;l<a;l+=2){var u=r[l+1],h=l+3<a?r[l+3]:-1,c=l+5<a?r[l+5]:-1,d=l==0?-1:r[l-1];if(u==0&&h==u&&c==u){for(var f=l+5;f+2<a&&r[f+2]==u;)f+=2;(g=Math.min(f+1-l>>>1,138))<11?s.push(17,g-3):s.push(18,g-11),l+=2*g-2}else if(u==d&&h==u&&c==u){for(f=l+5;f+2<a&&r[f+2]==u;)f+=2;var g=Math.min(f+1-l>>>1,6);s.push(16,g-3),l+=2*g-2}else s.push(u,0)}return a>>>1},i.F._hufTree=function(r,s,a){var l=[],u=r.length,h=s.length,c=0;for(c=0;c<h;c+=2)s[c]=0,s[c+1]=0;for(c=0;c<u;c++)r[c]!=0&&l.push({lit:c,f:r[c]});var d=l.length,f=l.slice(0);if(d==0)return 0;if(d==1){var g=l[0].lit;return f=g==0?1:0,s[1+(g<<1)]=1,s[1+(f<<1)]=1,1}l.sort(function(M,j){return M.f-j.f});var E=l[0],O=l[1],k=0,b=1,S=2;for(l[0]={lit:-1,f:E.f+O.f,l:E,r:O,d:0};b!=d-1;)E=k!=b&&(S==d||l[k].f<l[S].f)?l[k++]:l[S++],O=k!=b&&(S==d||l[k].f<l[S].f)?l[k++]:l[S++],l[b++]={lit:-1,f:E.f+O.f,l:E,r:O};var N=i.F.setDepth(l[b-1],0);for(N>a&&(i.F.restrictDepth(f,a,N),N=a),c=0;c<d;c++)s[1+(f[c].lit<<1)]=f[c].d;return N},i.F.setDepth=function(r,s){return r.lit!=-1?(r.d=s,s):Math.max(i.F.setDepth(r.l,s+1),i.F.setDepth(r.r,s+1))},i.F.restrictDepth=function(r,s,a){var l=0,u=1<<a-s,h=0;for(r.sort(function(d,f){return f.d==d.d?d.f-f.f:f.d-d.d}),l=0;l<r.length&&r[l].d>s;l++){var c=r[l].d;r[l].d=s,h+=u-(1<<a-c)}for(h>>>=a-s;h>0;)(c=r[l].d)<s?(r[l].d++,h-=1<<s-c-1):l++;for(;l>=0;l--)r[l].d==s&&h<0&&(r[l].d--,h++);h!=0&&console.log("debt left")},i.F._goodIndex=function(r,s){var a=0;return s[16|a]<=r&&(a|=16),s[8|a]<=r&&(a|=8),s[4|a]<=r&&(a|=4),s[2|a]<=r&&(a|=2),s[1|a]<=r&&(a|=1),a},i.F._writeLit=function(r,s,a,l){return i.F._putsF(a,l,s[r<<1]),l+s[1+(r<<1)]},i.F.inflate=function(r,s){var a=Uint8Array;if(r[0]==3&&r[1]==0)return s||new a(0);var l=i.F,u=l._bitsF,h=l._bitsE,c=l._decodeTiny,d=l.makeCodes,f=l.codes2map,g=l._get17,E=l.U,O=s==null;O&&(s=new a(r.length>>>2<<3));for(var k,b,S=0,N=0,M=0,j=0,V=0,w=0,y=0,v=0,T=0;S==0;)if(S=u(r,T,1),N=u(r,T+1,2),T+=3,N!=0){if(O&&(s=i.F._check(s,v+(1<<17))),N==1&&(k=E.flmap,b=E.fdmap,w=511,y=31),N==2){M=h(r,T,5)+257,j=h(r,T+5,5)+1,V=h(r,T+10,4)+4,T+=14;for(var x=0;x<38;x+=2)E.itree[x]=0,E.itree[x+1]=0;var R=1;for(x=0;x<V;x++){var A=h(r,T+3*x,3);E.itree[1+(E.ordr[x]<<1)]=A,A>R&&(R=A)}T+=3*V,d(E.itree,R),f(E.itree,R,E.imap),k=E.lmap,b=E.dmap,T=c(E.imap,(1<<R)-1,M+j,r,T,E.ttree);var U=l._copyOut(E.ttree,0,M,E.ltree);w=(1<<U)-1;var B=l._copyOut(E.ttree,M,j,E.dtree);y=(1<<B)-1,d(E.ltree,U),f(E.ltree,U,k),d(E.dtree,B),f(E.dtree,B,b)}for(;;){var I=k[g(r,T)&w];T+=15&I;var C=I>>>4;if(!(C>>>8))s[v++]=C;else{if(C==256)break;var q=v+C-254;if(C>264){var P=E.ldef[C-257];q=v+(P>>>3)+h(r,T,7&P),T+=7&P}var G=b[g(r,T)&y];T+=15&G;var W=G>>>4,z=E.ddef[W],Y=(z>>>4)+u(r,T,15&z);for(T+=15&z,O&&(s=i.F._check(s,v+(1<<17)));v<q;)s[v]=s[v++-Y],s[v]=s[v++-Y],s[v]=s[v++-Y],s[v]=s[v++-Y];v=q}}}else{7&T&&(T+=8-(7&T));var F=4+(T>>>3),H=r[F-4]|r[F-3]<<8;O&&(s=i.F._check(s,v+H)),s.set(new a(r.buffer,r.byteOffset+F,H),v),T=F+H<<3,v+=H}return s.length==v?s:s.slice(0,v)},i.F._check=function(r,s){var a=r.length;if(s<=a)return r;var l=new Uint8Array(Math.max(a<<1,s));return l.set(r,0),l},i.F._decodeTiny=function(r,s,a,l,u,h){for(var c=i.F._bitsE,d=i.F._get17,f=0;f<a;){var g=r[d(l,u)&s];u+=15&g;var E=g>>>4;if(E<=15)h[f]=E,f++;else{var O=0,k=0;E==16?(k=3+c(l,u,2),u+=2,O=h[f-1]):E==17?(k=3+c(l,u,3),u+=3):E==18&&(k=11+c(l,u,7),u+=7);for(var b=f+k;f<b;)h[f]=O,f++}}return u},i.F._copyOut=function(r,s,a,l){for(var u=0,h=0,c=l.length>>>1;h<a;){var d=r[h+s];l[h<<1]=0,l[1+(h<<1)]=d,d>u&&(u=d),h++}for(;h<c;)l[h<<1]=0,l[1+(h<<1)]=0,h++;return u},i.F.makeCodes=function(r,s){for(var a,l,u,h,c=i.F.U,d=r.length,f=c.bl_count,g=0;g<=s;g++)f[g]=0;for(g=1;g<d;g+=2)f[r[g]]++;var E=c.next_code;for(a=0,f[0]=0,l=1;l<=s;l++)a=a+f[l-1]<<1,E[l]=a;for(u=0;u<d;u+=2)(h=r[u+1])!=0&&(r[u]=E[h],E[h]++)},i.F.codes2map=function(r,s,a){for(var l=r.length,u=i.F.U.rev15,h=0;h<l;h+=2)if(r[h+1]!=0)for(var c=h>>1,d=r[h+1],f=c<<4|d,g=s-d,E=r[h]<<g,O=E+(1<<g);E!=O;)a[u[E]>>>15-s]=f,E++},i.F.revCodes=function(r,s){for(var a=i.F.U.rev15,l=15-s,u=0;u<r.length;u+=2){var h=r[u]<<s-r[u+1];r[u]=a[h]>>>l}},i.F._putsE=function(r,s,a){a<<=7&s;var l=s>>>3;r[l]|=a,r[l+1]|=a>>>8},i.F._putsF=function(r,s,a){a<<=7&s;var l=s>>>3;r[l]|=a,r[l+1]|=a>>>8,r[l+2]|=a>>>16},i.F._bitsE=function(r,s,a){return(r[s>>>3]|r[1+(s>>>3)]<<8)>>>(7&s)&(1<<a)-1},i.F._bitsF=function(r,s,a){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16)>>>(7&s)&(1<<a)-1},i.F._get17=function(r,s){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16)>>>(7&s)},i.F._get25=function(r,s){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16|r[3+(s>>>3)]<<24)>>>(7&s)},i.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var r=i.F.U,s=0;s<32768;s++){var a=s;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,r.rev15[s]=(a>>>16|a<<16)>>>17}function l(u,h,c){for(;h--!=0;)u.push(0,c)}for(s=0;s<32;s++)r.ldef[s]=r.of0[s]<<3|r.exb[s],r.ddef[s]=r.df0[s]<<4|r.dxb[s];l(r.fltree,144,8),l(r.fltree,112,9),l(r.fltree,24,7),l(r.fltree,8,8),i.F.makeCodes(r.fltree,9),i.F.codes2map(r.fltree,9,r.flmap),i.F.revCodes(r.fltree,9),l(r.fdtree,32,5),i.F.makeCodes(r.fdtree,5),i.F.codes2map(r.fdtree,5,r.fdmap),i.F.revCodes(r.fdtree,5),l(r.itree,19,0),l(r.ltree,286,0),l(r.dtree,30,0),l(r.ttree,320,0)}()})();var _I=gI({__proto__:null,default:Ic},[Ic]);const jn=function(){var t={nextZero(c,d){for(;c[d]!=0;)d++;return d},readUshort:(c,d)=>c[d]<<8|c[d+1],writeUshort(c,d,f){c[d]=f>>8&255,c[d+1]=255&f},readUint:(c,d)=>16777216*c[d]+(c[d+1]<<16|c[d+2]<<8|c[d+3]),writeUint(c,d,f){c[d]=f>>24&255,c[d+1]=f>>16&255,c[d+2]=f>>8&255,c[d+3]=255&f},readASCII(c,d,f){let g="";for(let E=0;E<f;E++)g+=String.fromCharCode(c[d+E]);return g},writeASCII(c,d,f){for(let g=0;g<f.length;g++)c[d+g]=f.charCodeAt(g)},readBytes(c,d,f){const g=[];for(let E=0;E<f;E++)g.push(c[d+E]);return g},pad:c=>c.length<2?`0${c}`:c,readUTF8(c,d,f){let g,E="";for(let O=0;O<f;O++)E+=`%${t.pad(c[d+O].toString(16))}`;try{g=decodeURIComponent(E)}catch{return t.readASCII(c,d,f)}return g}};function e(c,d,f,g){const E=d*f,O=s(g),k=Math.ceil(d*O/8),b=new Uint8Array(4*E),S=new Uint32Array(b.buffer),{ctype:N}=g,{depth:M}=g,j=t.readUshort;if(N==6){const P=E<<2;if(M==8)for(var V=0;V<P;V+=4)b[V]=c[V],b[V+1]=c[V+1],b[V+2]=c[V+2],b[V+3]=c[V+3];if(M==16)for(V=0;V<P;V++)b[V]=c[V<<1]}else if(N==2){const P=g.tabs.tRNS;if(P==null){if(M==8)for(V=0;V<E;V++){var w=3*V;S[V]=255<<24|c[w+2]<<16|c[w+1]<<8|c[w]}if(M==16)for(V=0;V<E;V++)w=6*V,S[V]=255<<24|c[w+4]<<16|c[w+2]<<8|c[w]}else{var y=P[0];const G=P[1],W=P[2];if(M==8)for(V=0;V<E;V++){var v=V<<2;w=3*V,S[V]=255<<24|c[w+2]<<16|c[w+1]<<8|c[w],c[w]==y&&c[w+1]==G&&c[w+2]==W&&(b[v+3]=0)}if(M==16)for(V=0;V<E;V++)v=V<<2,w=6*V,S[V]=255<<24|c[w+4]<<16|c[w+2]<<8|c[w],j(c,w)==y&&j(c,w+2)==G&&j(c,w+4)==W&&(b[v+3]=0)}}else if(N==3){const P=g.tabs.PLTE,G=g.tabs.tRNS,W=G?G.length:0;if(M==1)for(var T=0;T<f;T++){var x=T*k,R=T*d;for(V=0;V<d;V++){v=R+V<<2;var A=3*(U=c[x+(V>>3)]>>7-((7&V)<<0)&1);b[v]=P[A],b[v+1]=P[A+1],b[v+2]=P[A+2],b[v+3]=U<W?G[U]:255}}if(M==2)for(T=0;T<f;T++)for(x=T*k,R=T*d,V=0;V<d;V++)v=R+V<<2,A=3*(U=c[x+(V>>2)]>>6-((3&V)<<1)&3),b[v]=P[A],b[v+1]=P[A+1],b[v+2]=P[A+2],b[v+3]=U<W?G[U]:255;if(M==4)for(T=0;T<f;T++)for(x=T*k,R=T*d,V=0;V<d;V++)v=R+V<<2,A=3*(U=c[x+(V>>1)]>>4-((1&V)<<2)&15),b[v]=P[A],b[v+1]=P[A+1],b[v+2]=P[A+2],b[v+3]=U<W?G[U]:255;if(M==8)for(V=0;V<E;V++){var U;v=V<<2,A=3*(U=c[V]),b[v]=P[A],b[v+1]=P[A+1],b[v+2]=P[A+2],b[v+3]=U<W?G[U]:255}}else if(N==4){if(M==8)for(V=0;V<E;V++){v=V<<2;var B=c[I=V<<1];b[v]=B,b[v+1]=B,b[v+2]=B,b[v+3]=c[I+1]}if(M==16)for(V=0;V<E;V++){var I;v=V<<2,B=c[I=V<<2],b[v]=B,b[v+1]=B,b[v+2]=B,b[v+3]=c[I+2]}}else if(N==0)for(y=g.tabs.tRNS?g.tabs.tRNS:-1,T=0;T<f;T++){const P=T*k,G=T*d;if(M==1)for(var C=0;C<d;C++){var q=(B=255*(c[P+(C>>>3)]>>>7-(7&C)&1))==255*y?0:255;S[G+C]=q<<24|B<<16|B<<8|B}else if(M==2)for(C=0;C<d;C++)q=(B=85*(c[P+(C>>>2)]>>>6-((3&C)<<1)&3))==85*y?0:255,S[G+C]=q<<24|B<<16|B<<8|B;else if(M==4)for(C=0;C<d;C++)q=(B=17*(c[P+(C>>>1)]>>>4-((1&C)<<2)&15))==17*y?0:255,S[G+C]=q<<24|B<<16|B<<8|B;else if(M==8)for(C=0;C<d;C++)q=(B=c[P+C])==y?0:255,S[G+C]=q<<24|B<<16|B<<8|B;else if(M==16)for(C=0;C<d;C++)B=c[P+(C<<1)],q=j(c,P+(C<<1))==y?0:255,S[G+C]=q<<24|B<<16|B<<8|B}return b}function n(c,d,f,g){const E=s(c),O=Math.ceil(f*E/8),k=new Uint8Array((O+1+c.interlace)*g);return d=c.tabs.CgBI?r(d,k):i(d,k),c.interlace==0?d=a(d,c,0,f,g):c.interlace==1&&(d=function(S,N){const M=N.width,j=N.height,V=s(N),w=V>>3,y=Math.ceil(M*V/8),v=new Uint8Array(j*y);let T=0;const x=[0,0,4,0,2,0,1],R=[0,4,0,2,0,1,0],A=[8,8,8,4,4,2,2],U=[8,8,4,4,2,2,1];let B=0;for(;B<7;){const C=A[B],q=U[B];let P=0,G=0,W=x[B];for(;W<j;)W+=C,G++;let z=R[B];for(;z<M;)z+=q,P++;const Y=Math.ceil(P*V/8);a(S,N,T,P,G);let F=0,H=x[B];for(;H<j;){let te=R[B],_e=T+F*Y<<3;for(;te<M;){var I;if(V==1&&(I=(I=S[_e>>3])>>7-(7&_e)&1,v[H*y+(te>>3)]|=I<<7-((7&te)<<0)),V==2&&(I=(I=S[_e>>3])>>6-(7&_e)&3,v[H*y+(te>>2)]|=I<<6-((3&te)<<1)),V==4&&(I=(I=S[_e>>3])>>4-(7&_e)&15,v[H*y+(te>>1)]|=I<<4-((1&te)<<2)),V>=8){const ae=H*y+te*w;for(let ge=0;ge<w;ge++)v[ae+ge]=S[(_e>>3)+ge]}_e+=V,te+=q}F++,H+=C}P*G!=0&&(T+=G*(1+Y)),B+=1}return v}(d,c)),d}function i(c,d){return r(new Uint8Array(c.buffer,2,c.length-6),d)}var r=function(){const c={H:{}};return c.H.N=function(d,f){const g=Uint8Array;let E,O,k=0,b=0,S=0,N=0,M=0,j=0,V=0,w=0,y=0;if(d[0]==3&&d[1]==0)return f||new g(0);const v=c.H,T=v.b,x=v.e,R=v.R,A=v.n,U=v.A,B=v.Z,I=v.m,C=f==null;for(C&&(f=new g(d.length>>>2<<5));k==0;)if(k=T(d,y,1),b=T(d,y+1,2),y+=3,b!=0){if(C&&(f=c.H.W(f,w+(1<<17))),b==1&&(E=I.J,O=I.h,j=511,V=31),b==2){S=x(d,y,5)+257,N=x(d,y+5,5)+1,M=x(d,y+10,4)+4,y+=14;let P=1;for(var q=0;q<38;q+=2)I.Q[q]=0,I.Q[q+1]=0;for(q=0;q<M;q++){const z=x(d,y+3*q,3);I.Q[1+(I.X[q]<<1)]=z,z>P&&(P=z)}y+=3*M,A(I.Q,P),U(I.Q,P,I.u),E=I.w,O=I.d,y=R(I.u,(1<<P)-1,S+N,d,y,I.v);const G=v.V(I.v,0,S,I.C);j=(1<<G)-1;const W=v.V(I.v,S,N,I.D);V=(1<<W)-1,A(I.C,G),U(I.C,G,E),A(I.D,W),U(I.D,W,O)}for(;;){const P=E[B(d,y)&j];y+=15&P;const G=P>>>4;if(!(G>>>8))f[w++]=G;else{if(G==256)break;{let W=w+G-254;if(G>264){const te=I.q[G-257];W=w+(te>>>3)+x(d,y,7&te),y+=7&te}const z=O[B(d,y)&V];y+=15&z;const Y=z>>>4,F=I.c[Y],H=(F>>>4)+T(d,y,15&F);for(y+=15&F;w<W;)f[w]=f[w++-H],f[w]=f[w++-H],f[w]=f[w++-H],f[w]=f[w++-H];w=W}}}}else{7&y&&(y+=8-(7&y));const P=4+(y>>>3),G=d[P-4]|d[P-3]<<8;C&&(f=c.H.W(f,w+G)),f.set(new g(d.buffer,d.byteOffset+P,G),w),y=P+G<<3,w+=G}return f.length==w?f:f.slice(0,w)},c.H.W=function(d,f){const g=d.length;if(f<=g)return d;const E=new Uint8Array(g<<1);return E.set(d,0),E},c.H.R=function(d,f,g,E,O,k){const b=c.H.e,S=c.H.Z;let N=0;for(;N<g;){const M=d[S(E,O)&f];O+=15&M;const j=M>>>4;if(j<=15)k[N]=j,N++;else{let V=0,w=0;j==16?(w=3+b(E,O,2),O+=2,V=k[N-1]):j==17?(w=3+b(E,O,3),O+=3):j==18&&(w=11+b(E,O,7),O+=7);const y=N+w;for(;N<y;)k[N]=V,N++}}return O},c.H.V=function(d,f,g,E){let O=0,k=0;const b=E.length>>>1;for(;k<g;){const S=d[k+f];E[k<<1]=0,E[1+(k<<1)]=S,S>O&&(O=S),k++}for(;k<b;)E[k<<1]=0,E[1+(k<<1)]=0,k++;return O},c.H.n=function(d,f){const g=c.H.m,E=d.length;let O,k,b,S;const N=g.j;for(var M=0;M<=f;M++)N[M]=0;for(M=1;M<E;M+=2)N[d[M]]++;const j=g.K;for(O=0,N[0]=0,k=1;k<=f;k++)O=O+N[k-1]<<1,j[k]=O;for(b=0;b<E;b+=2)S=d[b+1],S!=0&&(d[b]=j[S],j[S]++)},c.H.A=function(d,f,g){const E=d.length,O=c.H.m.r;for(let k=0;k<E;k+=2)if(d[k+1]!=0){const b=k>>1,S=d[k+1],N=b<<4|S,M=f-S;let j=d[k]<<M;const V=j+(1<<M);for(;j!=V;)g[O[j]>>>15-f]=N,j++}},c.H.l=function(d,f){const g=c.H.m.r,E=15-f;for(let O=0;O<d.length;O+=2){const k=d[O]<<f-d[O+1];d[O]=g[k]>>>E}},c.H.M=function(d,f,g){g<<=7&f;const E=f>>>3;d[E]|=g,d[E+1]|=g>>>8},c.H.I=function(d,f,g){g<<=7&f;const E=f>>>3;d[E]|=g,d[E+1]|=g>>>8,d[E+2]|=g>>>16},c.H.e=function(d,f,g){return(d[f>>>3]|d[1+(f>>>3)]<<8)>>>(7&f)&(1<<g)-1},c.H.b=function(d,f,g){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16)>>>(7&f)&(1<<g)-1},c.H.Z=function(d,f){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16)>>>(7&f)},c.H.i=function(d,f){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16|d[3+(f>>>3)]<<24)>>>(7&f)},c.H.m=function(){const d=Uint16Array,f=Uint32Array;return{K:new d(16),j:new d(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new d(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new f(32),J:new d(512),_:[],h:new d(32),$:[],w:new d(32768),C:[],v:[],d:new d(32768),D:[],u:new d(512),Q:[],r:new d(32768),s:new f(286),Y:new f(30),a:new f(19),t:new f(15e3),k:new d(65536),g:new d(32768)}}(),function(){const d=c.H.m;for(var f=0;f<32768;f++){let E=f;E=(2863311530&E)>>>1|(1431655765&E)<<1,E=(3435973836&E)>>>2|(858993459&E)<<2,E=(4042322160&E)>>>4|(252645135&E)<<4,E=(4278255360&E)>>>8|(16711935&E)<<8,d.r[f]=(E>>>16|E<<16)>>>17}function g(E,O,k){for(;O--!=0;)E.push(0,k)}for(f=0;f<32;f++)d.q[f]=d.S[f]<<3|d.T[f],d.c[f]=d.p[f]<<4|d.z[f];g(d._,144,8),g(d._,112,9),g(d._,24,7),g(d._,8,8),c.H.n(d._,9),c.H.A(d._,9,d.J),c.H.l(d._,9),g(d.$,32,5),c.H.n(d.$,5),c.H.A(d.$,5,d.h),c.H.l(d.$,5),g(d.Q,19,0),g(d.C,286,0),g(d.D,30,0),g(d.v,320,0)}(),c.H.N}();function s(c){return[1,null,3,1,2,null,4][c.ctype]*c.depth}function a(c,d,f,g,E){let O=s(d);const k=Math.ceil(g*O/8);let b,S;O=Math.ceil(O/8);let N=c[f],M=0;if(N>1&&(c[f]=[0,0,1][N-2]),N==3)for(M=O;M<k;M++)c[M+1]=c[M+1]+(c[M+1-O]>>>1)&255;for(let j=0;j<E;j++)if(b=f+j*k,S=b+j+1,N=c[S-1],M=0,N==0)for(;M<k;M++)c[b+M]=c[S+M];else if(N==1){for(;M<O;M++)c[b+M]=c[S+M];for(;M<k;M++)c[b+M]=c[S+M]+c[b+M-O]}else if(N==2)for(;M<k;M++)c[b+M]=c[S+M]+c[b+M-k];else if(N==3){for(;M<O;M++)c[b+M]=c[S+M]+(c[b+M-k]>>>1);for(;M<k;M++)c[b+M]=c[S+M]+(c[b+M-k]+c[b+M-O]>>>1)}else{for(;M<O;M++)c[b+M]=c[S+M]+l(0,c[b+M-k],0);for(;M<k;M++)c[b+M]=c[S+M]+l(c[b+M-O],c[b+M-k],c[b+M-O-k])}return c}function l(c,d,f){const g=c+d-f,E=g-c,O=g-d,k=g-f;return E*E<=O*O&&E*E<=k*k?c:O*O<=k*k?d:f}function u(c,d,f){f.width=t.readUint(c,d),d+=4,f.height=t.readUint(c,d),d+=4,f.depth=c[d],d++,f.ctype=c[d],d++,f.compress=c[d],d++,f.filter=c[d],d++,f.interlace=c[d],d++}function h(c,d,f,g,E,O,k,b,S){const N=Math.min(d,E),M=Math.min(f,O);let j=0,V=0;for(let B=0;B<M;B++)for(let I=0;I<N;I++)if(k>=0&&b>=0?(j=B*d+I<<2,V=(b+B)*E+k+I<<2):(j=(-b+B)*d-k+I<<2,V=B*E+I<<2),S==0)g[V]=c[j],g[V+1]=c[j+1],g[V+2]=c[j+2],g[V+3]=c[j+3];else if(S==1){var w=c[j+3]*.00392156862745098,y=c[j]*w,v=c[j+1]*w,T=c[j+2]*w,x=g[V+3]*(1/255),R=g[V]*x,A=g[V+1]*x,U=g[V+2]*x;const C=1-w,q=w+x*C,P=q==0?0:1/q;g[V+3]=255*q,g[V+0]=(y+R*C)*P,g[V+1]=(v+A*C)*P,g[V+2]=(T+U*C)*P}else if(S==2)w=c[j+3],y=c[j],v=c[j+1],T=c[j+2],x=g[V+3],R=g[V],A=g[V+1],U=g[V+2],w==x&&y==R&&v==A&&T==U?(g[V]=0,g[V+1]=0,g[V+2]=0,g[V+3]=0):(g[V]=y,g[V+1]=v,g[V+2]=T,g[V+3]=w);else if(S==3){if(w=c[j+3],y=c[j],v=c[j+1],T=c[j+2],x=g[V+3],R=g[V],A=g[V+1],U=g[V+2],w==x&&y==R&&v==A&&T==U)continue;if(w<220&&x>20)return!1}return!0}return{decode:function(d){const f=new Uint8Array(d);let g=8;const E=t,O=E.readUshort,k=E.readUint,b={tabs:{},frames:[]},S=new Uint8Array(f.length);let N,M=0,j=0;const V=[137,80,78,71,13,10,26,10];for(var w=0;w<8;w++)if(f[w]!=V[w])throw"The input is not a PNG file!";for(;g<f.length;){const B=E.readUint(f,g);g+=4;const I=E.readASCII(f,g,4);if(g+=4,I=="IHDR")u(f,g,b);else if(I=="iCCP"){for(var y=g;f[y]!=0;)y++;E.readASCII(f,g,y-g),f[y+1];const C=f.slice(y+2,g+B);let q=null;try{q=i(C)}catch{q=r(C)}b.tabs[I]=q}else if(I=="CgBI")b.tabs[I]=f.slice(g,g+4);else if(I=="IDAT"){for(w=0;w<B;w++)S[M+w]=f[g+w];M+=B}else if(I=="acTL")b.tabs[I]={num_frames:k(f,g),num_plays:k(f,g+4)},N=new Uint8Array(f.length);else if(I=="fcTL"){j!=0&&((U=b.frames[b.frames.length-1]).data=n(b,N.slice(0,j),U.rect.width,U.rect.height),j=0);const C={x:k(f,g+12),y:k(f,g+16),width:k(f,g+4),height:k(f,g+8)};let q=O(f,g+22);q=O(f,g+20)/(q==0?100:q);const P={rect:C,delay:Math.round(1e3*q),dispose:f[g+24],blend:f[g+25]};b.frames.push(P)}else if(I=="fdAT"){for(w=0;w<B-4;w++)N[j+w]=f[g+w+4];j+=B-4}else if(I=="pHYs")b.tabs[I]=[E.readUint(f,g),E.readUint(f,g+4),f[g+8]];else if(I=="cHRM")for(b.tabs[I]=[],w=0;w<8;w++)b.tabs[I].push(E.readUint(f,g+4*w));else if(I=="tEXt"||I=="zTXt"){b.tabs[I]==null&&(b.tabs[I]={});var v=E.nextZero(f,g),T=E.readASCII(f,g,v-g),x=g+B-v-1;if(I=="tEXt")A=E.readASCII(f,v+1,x);else{var R=i(f.slice(v+2,v+2+x));A=E.readUTF8(R,0,R.length)}b.tabs[I][T]=A}else if(I=="iTXt"){b.tabs[I]==null&&(b.tabs[I]={}),v=0,y=g,v=E.nextZero(f,y),T=E.readASCII(f,y,v-y);const C=f[y=v+1];var A;f[y+1],y+=2,v=E.nextZero(f,y),E.readASCII(f,y,v-y),y=v+1,v=E.nextZero(f,y),E.readUTF8(f,y,v-y),x=B-((y=v+1)-g),C==0?A=E.readUTF8(f,y,x):(R=i(f.slice(y,y+x)),A=E.readUTF8(R,0,R.length)),b.tabs[I][T]=A}else if(I=="PLTE")b.tabs[I]=E.readBytes(f,g,B);else if(I=="hIST"){const C=b.tabs.PLTE.length/3;for(b.tabs[I]=[],w=0;w<C;w++)b.tabs[I].push(O(f,g+2*w))}else if(I=="tRNS")b.ctype==3?b.tabs[I]=E.readBytes(f,g,B):b.ctype==0?b.tabs[I]=O(f,g):b.ctype==2&&(b.tabs[I]=[O(f,g),O(f,g+2),O(f,g+4)]);else if(I=="gAMA")b.tabs[I]=E.readUint(f,g)/1e5;else if(I=="sRGB")b.tabs[I]=f[g];else if(I=="bKGD")b.ctype==0||b.ctype==4?b.tabs[I]=[O(f,g)]:b.ctype==2||b.ctype==6?b.tabs[I]=[O(f,g),O(f,g+2),O(f,g+4)]:b.ctype==3&&(b.tabs[I]=f[g]);else if(I=="IEND")break;g+=B,E.readUint(f,g),g+=4}var U;return j!=0&&((U=b.frames[b.frames.length-1]).data=n(b,N.slice(0,j),U.rect.width,U.rect.height)),b.data=n(b,S,b.width,b.height),delete b.compress,delete b.interlace,delete b.filter,b},toRGBA8:function(d){const f=d.width,g=d.height;if(d.tabs.acTL==null)return[e(d.data,f,g,d).buffer];const E=[];d.frames[0].data==null&&(d.frames[0].data=d.data);const O=f*g*4,k=new Uint8Array(O),b=new Uint8Array(O),S=new Uint8Array(O);for(let M=0;M<d.frames.length;M++){const j=d.frames[M],V=j.rect.x,w=j.rect.y,y=j.rect.width,v=j.rect.height,T=e(j.data,y,v,d);if(M!=0)for(var N=0;N<O;N++)S[N]=k[N];if(j.blend==0?h(T,y,v,k,f,g,V,w,0):j.blend==1&&h(T,y,v,k,f,g,V,w,1),E.push(k.buffer.slice(0)),j.dispose!=0){if(j.dispose==1)h(b,y,v,k,f,g,V,w,0);else if(j.dispose==2)for(N=0;N<O;N++)k[N]=S[N]}}return E},_paeth:l,_copyTile:h,_bin:t}}();(function(){const{_copyTile:t}=jn,{_bin:e}=jn,n=jn._paeth;var i={table:function(){const y=new Uint32Array(256);for(let v=0;v<256;v++){let T=v;for(let x=0;x<8;x++)1&T?T=3988292384^T>>>1:T>>>=1;y[v]=T}return y}(),update(y,v,T,x){for(let R=0;R<x;R++)y=i.table[255&(y^v[T+R])]^y>>>8;return y},crc:(y,v,T)=>4294967295^i.update(4294967295,y,v,T)};function r(y,v,T,x){v[T]+=y[0]*x>>4,v[T+1]+=y[1]*x>>4,v[T+2]+=y[2]*x>>4,v[T+3]+=y[3]*x>>4}function s(y){return Math.max(0,Math.min(255,y))}function a(y,v){const T=y[0]-v[0],x=y[1]-v[1],R=y[2]-v[2],A=y[3]-v[3];return T*T+x*x+R*R+A*A}function l(y,v,T,x,R,A,U){U==null&&(U=1);const B=x.length,I=[];for(var C=0;C<B;C++){const H=x[C];I.push([H>>>0&255,H>>>8&255,H>>>16&255,H>>>24&255])}for(C=0;C<B;C++){let H=4294967295;for(var q=0,P=0;P<B;P++){var G=a(I[C],I[P]);P!=C&&G<H&&(H=G,q=P)}}const W=new Uint32Array(R.buffer),z=new Int16Array(v*T*4),Y=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(C=0;C<Y.length;C++)Y[C]=255*((Y[C]+.5)/16-.5);for(let H=0;H<T;H++)for(let te=0;te<v;te++){var F;C=4*(H*v+te),U!=2?F=[s(y[C]+z[C]),s(y[C+1]+z[C+1]),s(y[C+2]+z[C+2]),s(y[C+3]+z[C+3])]:(G=Y[4*(3&H)+(3&te)],F=[s(y[C]+G),s(y[C+1]+G),s(y[C+2]+G),s(y[C+3]+G)]),q=0;let _e=16777215;for(P=0;P<B;P++){const xe=a(F,I[P]);xe<_e&&(_e=xe,q=P)}const ae=I[q],ge=[F[0]-ae[0],F[1]-ae[1],F[2]-ae[2],F[3]-ae[3]];U==1&&(te!=v-1&&r(ge,z,C+4,7),H!=T-1&&(te!=0&&r(ge,z,C+4*v-4,3),r(ge,z,C+4*v,5),te!=v-1&&r(ge,z,C+4*v+4,1))),A[C>>2]=q,W[C>>2]=x[q]}}function u(y,v,T,x,R){R==null&&(R={});const{crc:A}=i,U=e.writeUint,B=e.writeUshort,I=e.writeASCII;let C=8;const q=y.frames.length>1;let P,G=!1,W=33+(q?20:0);if(R.sRGB!=null&&(W+=13),R.pHYs!=null&&(W+=21),R.iCCP!=null&&(P=pako.deflate(R.iCCP),W+=21+P.length+4),y.ctype==3){for(var z=y.plte.length,Y=0;Y<z;Y++)y.plte[Y]>>>24!=255&&(G=!0);W+=8+3*z+4+(G?8+1*z+4:0)}for(var F=0;F<y.frames.length;F++)q&&(W+=38),W+=(ae=y.frames[F]).cimg.length+12,F!=0&&(W+=4);W+=12;const H=new Uint8Array(W),te=[137,80,78,71,13,10,26,10];for(Y=0;Y<8;Y++)H[Y]=te[Y];if(U(H,C,13),C+=4,I(H,C,"IHDR"),C+=4,U(H,C,v),C+=4,U(H,C,T),C+=4,H[C]=y.depth,C++,H[C]=y.ctype,C++,H[C]=0,C++,H[C]=0,C++,H[C]=0,C++,U(H,C,A(H,C-17,17)),C+=4,R.sRGB!=null&&(U(H,C,1),C+=4,I(H,C,"sRGB"),C+=4,H[C]=R.sRGB,C++,U(H,C,A(H,C-5,5)),C+=4),R.iCCP!=null){const ge=13+P.length;U(H,C,ge),C+=4,I(H,C,"iCCP"),C+=4,I(H,C,"ICC profile"),C+=11,C+=2,H.set(P,C),C+=P.length,U(H,C,A(H,C-(ge+4),ge+4)),C+=4}if(R.pHYs!=null&&(U(H,C,9),C+=4,I(H,C,"pHYs"),C+=4,U(H,C,R.pHYs[0]),C+=4,U(H,C,R.pHYs[1]),C+=4,H[C]=R.pHYs[2],C++,U(H,C,A(H,C-13,13)),C+=4),q&&(U(H,C,8),C+=4,I(H,C,"acTL"),C+=4,U(H,C,y.frames.length),C+=4,U(H,C,R.loop!=null?R.loop:0),C+=4,U(H,C,A(H,C-12,12)),C+=4),y.ctype==3){for(U(H,C,3*(z=y.plte.length)),C+=4,I(H,C,"PLTE"),C+=4,Y=0;Y<z;Y++){const ge=3*Y,xe=y.plte[Y],Ve=255&xe,Ye=xe>>>8&255,On=xe>>>16&255;H[C+ge+0]=Ve,H[C+ge+1]=Ye,H[C+ge+2]=On}if(C+=3*z,U(H,C,A(H,C-3*z-4,3*z+4)),C+=4,G){for(U(H,C,z),C+=4,I(H,C,"tRNS"),C+=4,Y=0;Y<z;Y++)H[C+Y]=y.plte[Y]>>>24&255;C+=z,U(H,C,A(H,C-z-4,z+4)),C+=4}}let _e=0;for(F=0;F<y.frames.length;F++){var ae=y.frames[F];q&&(U(H,C,26),C+=4,I(H,C,"fcTL"),C+=4,U(H,C,_e++),C+=4,U(H,C,ae.rect.width),C+=4,U(H,C,ae.rect.height),C+=4,U(H,C,ae.rect.x),C+=4,U(H,C,ae.rect.y),C+=4,B(H,C,x[F]),C+=2,B(H,C,1e3),C+=2,H[C]=ae.dispose,C++,H[C]=ae.blend,C++,U(H,C,A(H,C-30,30)),C+=4);const ge=ae.cimg;U(H,C,(z=ge.length)+(F==0?0:4)),C+=4;const xe=C;I(H,C,F==0?"IDAT":"fdAT"),C+=4,F!=0&&(U(H,C,_e++),C+=4),H.set(ge,C),C+=z,U(H,C,A(H,xe,C-xe)),C+=4}return U(H,C,0),C+=4,I(H,C,"IEND"),C+=4,U(H,C,A(H,C-4,4)),C+=4,H.buffer}function h(y,v,T){for(let x=0;x<y.frames.length;x++){const R=y.frames[x];R.rect.width;const A=R.rect.height,U=new Uint8Array(A*R.bpl+A);R.cimg=g(R.img,A,R.bpp,R.bpl,U,v,T)}}function c(y,v,T,x,R){const A=R[0],U=R[1],B=R[2],I=R[3],C=R[4],q=R[5];let P=6,G=8,W=255;for(var z=0;z<y.length;z++){const ft=new Uint8Array(y[z]);for(var Y=ft.length,F=0;F<Y;F+=4)W&=ft[F+3]}const H=W!=255,te=function(je,De,rt,dt,$e,Lt){const Fe=[];for(var Se=0;Se<je.length;Se++){const vt=new Uint8Array(je[Se]),nn=new Uint32Array(vt.buffer);var Ot;let _t=0,yn=0,rn=De,Mn=rt,ka=dt?1:0;if(Se!=0){const ph=Lt||dt||Se==1||Fe[Se-2].dispose!=0?1:2;let Dr=0,ja=1e9;for(let Ui=0;Ui<ph;Ui++){var ze=new Uint8Array(je[Se-1-Ui]);const Or=new Uint32Array(je[Se-1-Ui]);let vn=De,_n=rt,Qt=-1,zi=-1;for(let Gn=0;Gn<rt;Gn++)for(let sn=0;sn<De;sn++)nn[et=Gn*De+sn]!=Or[et]&&(sn<vn&&(vn=sn),sn>Qt&&(Qt=sn),Gn<_n&&(_n=Gn),Gn>zi&&(zi=Gn));Qt==-1&&(vn=_n=Qt=zi=0),$e&&((1&vn)==1&&vn--,(1&_n)==1&&_n--);const Mr=(Qt-vn+1)*(zi-_n+1);Mr<ja&&(ja=Mr,Dr=Ui,_t=vn,yn=_n,rn=Qt-vn+1,Mn=zi-_n+1)}ze=new Uint8Array(je[Se-1-Dr]),Dr==1&&(Fe[Se-1].dispose=2),Ot=new Uint8Array(rn*Mn*4),t(ze,De,rt,Ot,rn,Mn,-_t,-yn,0),ka=t(vt,De,rt,Ot,rn,Mn,-_t,-yn,3)?1:0,ka==1?f(vt,De,rt,Ot,{x:_t,y:yn,width:rn,height:Mn}):t(vt,De,rt,Ot,rn,Mn,-_t,-yn,0)}else Ot=vt.slice(0);Fe.push({rect:{x:_t,y:yn,width:rn,height:Mn},img:Ot,blend:ka,dispose:0})}if(dt)for(Se=0;Se<Fe.length;Se++){if((Hn=Fe[Se]).blend==1)continue;const vt=Hn.rect,nn=Fe[Se-1].rect,_t=Math.min(vt.x,nn.x),yn=Math.min(vt.y,nn.y),rn={x:_t,y:yn,width:Math.max(vt.x+vt.width,nn.x+nn.width)-_t,height:Math.max(vt.y+vt.height,nn.y+nn.height)-yn};Fe[Se-1].dispose=1,Se-1!=0&&d(je,De,rt,Fe,Se-1,rn,$e),d(je,De,rt,Fe,Se,rn,$e)}let st=0;if(je.length!=1)for(var et=0;et<Fe.length;et++){var Hn;st+=(Hn=Fe[et]).rect.width*Hn.rect.height}return Fe}(y,v,T,A,U,B),_e={},ae=[],ge=[];if(x!=0){const ft=[];for(F=0;F<te.length;F++)ft.push(te[F].img.buffer);const je=function($e){let Lt=0;for(var Fe=0;Fe<$e.length;Fe++)Lt+=$e[Fe].byteLength;const Se=new Uint8Array(Lt);let Ot=0;for(Fe=0;Fe<$e.length;Fe++){const ze=new Uint8Array($e[Fe]),st=ze.length;for(let et=0;et<st;et+=4){let Hn=ze[et],vt=ze[et+1],nn=ze[et+2];const _t=ze[et+3];_t==0&&(Hn=vt=nn=0),Se[Ot+et]=Hn,Se[Ot+et+1]=vt,Se[Ot+et+2]=nn,Se[Ot+et+3]=_t}Ot+=st}return Se.buffer}(ft),De=O(je,x);for(F=0;F<De.plte.length;F++)ae.push(De.plte[F].est.rgba);let rt=0;for(F=0;F<te.length;F++){const dt=(Ve=te[F]).img.length;var xe=new Uint8Array(De.inds.buffer,rt>>2,dt>>2);ge.push(xe);const $e=new Uint8Array(De.abuf,rt,dt);q&&l(Ve.img,Ve.rect.width,Ve.rect.height,ae,$e,xe),Ve.img.set($e),rt+=dt}}else for(z=0;z<te.length;z++){var Ve=te[z];const ft=new Uint32Array(Ve.img.buffer);var Ye=Ve.rect.width;for(Y=ft.length,xe=new Uint8Array(Y),ge.push(xe),F=0;F<Y;F++){const je=ft[F];if(F!=0&&je==ft[F-1])xe[F]=xe[F-1];else if(F>Ye&&je==ft[F-Ye])xe[F]=xe[F-Ye];else{let De=_e[je];if(De==null&&(_e[je]=De=ae.length,ae.push(je),ae.length>=300))break;xe[F]=De}}}const On=ae.length;for(On<=256&&C==0&&(G=On<=2?1:On<=4?2:On<=16?4:8,G=Math.max(G,I)),z=0;z<te.length;z++){(Ve=te[z]).rect.x,Ve.rect.y,Ye=Ve.rect.width;const ft=Ve.rect.height;let je=Ve.img;new Uint32Array(je.buffer);let De=4*Ye,rt=4;if(On<=256&&C==0){De=Math.ceil(G*Ye/8);var Gt=new Uint8Array(De*ft);const dt=ge[z];for(let $e=0;$e<ft;$e++){F=$e*De;const Lt=$e*Ye;if(G==8)for(var ke=0;ke<Ye;ke++)Gt[F+ke]=dt[Lt+ke];else if(G==4)for(ke=0;ke<Ye;ke++)Gt[F+(ke>>1)]|=dt[Lt+ke]<<4-4*(1&ke);else if(G==2)for(ke=0;ke<Ye;ke++)Gt[F+(ke>>2)]|=dt[Lt+ke]<<6-2*(3&ke);else if(G==1)for(ke=0;ke<Ye;ke++)Gt[F+(ke>>3)]|=dt[Lt+ke]<<7-1*(7&ke)}je=Gt,P=3,rt=1}else if(H==0&&te.length==1){Gt=new Uint8Array(Ye*ft*3);const dt=Ye*ft;for(F=0;F<dt;F++){const $e=3*F,Lt=4*F;Gt[$e]=je[Lt],Gt[$e+1]=je[Lt+1],Gt[$e+2]=je[Lt+2]}je=Gt,P=2,rt=3,De=3*Ye}Ve.img=je,Ve.bpl=De,Ve.bpp=rt}return{ctype:P,depth:G,plte:ae,frames:te}}function d(y,v,T,x,R,A,U){const B=Uint8Array,I=Uint32Array,C=new B(y[R-1]),q=new I(y[R-1]),P=R+1<y.length?new B(y[R+1]):null,G=new B(y[R]),W=new I(G.buffer);let z=v,Y=T,F=-1,H=-1;for(let _e=0;_e<A.height;_e++)for(let ae=0;ae<A.width;ae++){const ge=A.x+ae,xe=A.y+_e,Ve=xe*v+ge,Ye=W[Ve];Ye==0||x[R-1].dispose==0&&q[Ve]==Ye&&(P==null||P[4*Ve+3]!=0)||(ge<z&&(z=ge),ge>F&&(F=ge),xe<Y&&(Y=xe),xe>H&&(H=xe))}F==-1&&(z=Y=F=H=0),U&&((1&z)==1&&z--,(1&Y)==1&&Y--),A={x:z,y:Y,width:F-z+1,height:H-Y+1};const te=x[R];te.rect=A,te.blend=1,te.img=new Uint8Array(A.width*A.height*4),x[R-1].dispose==0?(t(C,v,T,te.img,A.width,A.height,-A.x,-A.y,0),f(G,v,T,te.img,A)):t(G,v,T,te.img,A.width,A.height,-A.x,-A.y,0)}function f(y,v,T,x,R){t(y,v,T,x,R.width,R.height,-R.x,-R.y,2)}function g(y,v,T,x,R,A,U){const B=[];let I,C=[0,1,2,3,4];A!=-1?C=[A]:(v*x>5e5||T==1)&&(C=[0]),U&&(I={level:0});const q=_I;for(var P=0;P<C.length;P++){for(let z=0;z<v;z++)E(R,y,z,x,T,C[P]);B.push(q.deflate(R,I))}let G,W=1e9;for(P=0;P<B.length;P++)B[P].length<W&&(G=P,W=B[P].length);return B[G]}function E(y,v,T,x,R,A){const U=T*x;let B=U+T;if(y[B]=A,B++,A==0)if(x<500)for(var I=0;I<x;I++)y[B+I]=v[U+I];else y.set(new Uint8Array(v.buffer,U,x),B);else if(A==1){for(I=0;I<R;I++)y[B+I]=v[U+I];for(I=R;I<x;I++)y[B+I]=v[U+I]-v[U+I-R]+256&255}else if(T==0){for(I=0;I<R;I++)y[B+I]=v[U+I];if(A==2)for(I=R;I<x;I++)y[B+I]=v[U+I];if(A==3)for(I=R;I<x;I++)y[B+I]=v[U+I]-(v[U+I-R]>>1)+256&255;if(A==4)for(I=R;I<x;I++)y[B+I]=v[U+I]-n(v[U+I-R],0,0)+256&255}else{if(A==2)for(I=0;I<x;I++)y[B+I]=v[U+I]+256-v[U+I-x]&255;if(A==3){for(I=0;I<R;I++)y[B+I]=v[U+I]+256-(v[U+I-x]>>1)&255;for(I=R;I<x;I++)y[B+I]=v[U+I]+256-(v[U+I-x]+v[U+I-R]>>1)&255}if(A==4){for(I=0;I<R;I++)y[B+I]=v[U+I]+256-n(0,v[U+I-x],0)&255;for(I=R;I<x;I++)y[B+I]=v[U+I]+256-n(v[U+I-R],v[U+I-x],v[U+I-R-x])&255}}}function O(y,v){const T=new Uint8Array(y),x=T.slice(0),R=new Uint32Array(x.buffer),A=k(x,v),U=A[0],B=A[1],I=T.length,C=new Uint8Array(I>>2);let q;if(T.length<2e7)for(var P=0;P<I;P+=4)q=b(U,G=T[P]*(1/255),W=T[P+1]*(1/255),z=T[P+2]*(1/255),Y=T[P+3]*(1/255)),C[P>>2]=q.ind,R[P>>2]=q.est.rgba;else for(P=0;P<I;P+=4){var G=T[P]*.00392156862745098,W=T[P+1]*(1/255),z=T[P+2]*(1/255),Y=T[P+3]*(1/255);for(q=U;q.left;)q=S(q.est,G,W,z,Y)<=0?q.left:q.right;C[P>>2]=q.ind,R[P>>2]=q.est.rgba}return{abuf:x.buffer,inds:C,plte:B}}function k(y,v,T){T==null&&(T=1e-4);const x=new Uint32Array(y.buffer),R={i0:0,i1:y.length,bst:null,est:null,tdst:0,left:null,right:null};R.bst=j(y,R.i0,R.i1),R.est=V(R.bst);const A=[R];for(;A.length<v;){let B=0,I=0;for(var U=0;U<A.length;U++)A[U].est.L>B&&(B=A[U].est.L,I=U);if(B<T)break;const C=A[I],q=N(y,x,C.i0,C.i1,C.est.e,C.est.eMq255);if(C.i0>=q||C.i1<=q){C.est.L=0;continue}const P={i0:C.i0,i1:q,bst:null,est:null,tdst:0,left:null,right:null};P.bst=j(y,P.i0,P.i1),P.est=V(P.bst);const G={i0:q,i1:C.i1,bst:null,est:null,tdst:0,left:null,right:null};for(G.bst={R:[],m:[],N:C.bst.N-P.bst.N},U=0;U<16;U++)G.bst.R[U]=C.bst.R[U]-P.bst.R[U];for(U=0;U<4;U++)G.bst.m[U]=C.bst.m[U]-P.bst.m[U];G.est=V(G.bst),C.left=P,C.right=G,A[I]=P,A.push(G)}for(A.sort((B,I)=>I.bst.N-B.bst.N),U=0;U<A.length;U++)A[U].ind=U;return[R,A]}function b(y,v,T,x,R){if(y.left==null)return y.tdst=function(P,G,W,z,Y){const F=G-P[0],H=W-P[1],te=z-P[2],_e=Y-P[3];return F*F+H*H+te*te+_e*_e}(y.est.q,v,T,x,R),y;const A=S(y.est,v,T,x,R);let U=y.left,B=y.right;A>0&&(U=y.right,B=y.left);const I=b(U,v,T,x,R);if(I.tdst<=A*A)return I;const C=b(B,v,T,x,R);return C.tdst<I.tdst?C:I}function S(y,v,T,x,R){const{e:A}=y;return A[0]*v+A[1]*T+A[2]*x+A[3]*R-y.eMq}function N(y,v,T,x,R,A){for(x-=4;T<x;){for(;M(y,T,R)<=A;)T+=4;for(;M(y,x,R)>A;)x-=4;if(T>=x)break;const U=v[T>>2];v[T>>2]=v[x>>2],v[x>>2]=U,T+=4,x-=4}for(;M(y,T,R)>A;)T-=4;return T+4}function M(y,v,T){return y[v]*T[0]+y[v+1]*T[1]+y[v+2]*T[2]+y[v+3]*T[3]}function j(y,v,T){const x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R=[0,0,0,0],A=T-v>>2;for(let U=v;U<T;U+=4){const B=y[U]*.00392156862745098,I=y[U+1]*(1/255),C=y[U+2]*(1/255),q=y[U+3]*(1/255);R[0]+=B,R[1]+=I,R[2]+=C,R[3]+=q,x[0]+=B*B,x[1]+=B*I,x[2]+=B*C,x[3]+=B*q,x[5]+=I*I,x[6]+=I*C,x[7]+=I*q,x[10]+=C*C,x[11]+=C*q,x[15]+=q*q}return x[4]=x[1],x[8]=x[2],x[9]=x[6],x[12]=x[3],x[13]=x[7],x[14]=x[11],{R:x,m:R,N:A}}function V(y){const{R:v}=y,{m:T}=y,{N:x}=y,R=T[0],A=T[1],U=T[2],B=T[3],I=x==0?0:1/x,C=[v[0]-R*R*I,v[1]-R*A*I,v[2]-R*U*I,v[3]-R*B*I,v[4]-A*R*I,v[5]-A*A*I,v[6]-A*U*I,v[7]-A*B*I,v[8]-U*R*I,v[9]-U*A*I,v[10]-U*U*I,v[11]-U*B*I,v[12]-B*R*I,v[13]-B*A*I,v[14]-B*U*I,v[15]-B*B*I],q=C,P=w;let G=[Math.random(),Math.random(),Math.random(),Math.random()],W=0,z=0;if(x!=0)for(let F=0;F<16&&(G=P.multVec(q,G),z=Math.sqrt(P.dot(G,G)),G=P.sml(1/z,G),!(F!=0&&Math.abs(z-W)<1e-9));F++)W=z;const Y=[R*I,A*I,U*I,B*I];return{Cov:C,q:Y,e:G,L:W,eMq255:P.dot(P.sml(255,Y),G),eMq:P.dot(G,Y),rgba:(Math.round(255*Y[3])<<24|Math.round(255*Y[2])<<16|Math.round(255*Y[1])<<8|Math.round(255*Y[0])<<0)>>>0}}var w={multVec:(y,v)=>[y[0]*v[0]+y[1]*v[1]+y[2]*v[2]+y[3]*v[3],y[4]*v[0]+y[5]*v[1]+y[6]*v[2]+y[7]*v[3],y[8]*v[0]+y[9]*v[1]+y[10]*v[2]+y[11]*v[3],y[12]*v[0]+y[13]*v[1]+y[14]*v[2]+y[15]*v[3]],dot:(y,v)=>y[0]*v[0]+y[1]*v[1]+y[2]*v[2]+y[3]*v[3],sml:(y,v)=>[y*v[0],y*v[1],y*v[2],y*v[3]]};jn.encode=function(v,T,x,R,A,U,B){R==null&&(R=0),B==null&&(B=!1);const I=c(v,T,x,R,[!1,!1,!1,0,B,!1]);return h(I,-1),u(I,T,x,A,U)},jn.encodeLL=function(v,T,x,R,A,U,B,I){const C={ctype:0+(R==1?0:2)+(A==0?0:4),depth:U,frames:[]},q=(R+A)*U,P=q*T;for(let G=0;G<v.length;G++)C.frames.push({rect:{x:0,y:0,width:T,height:x},img:new Uint8Array(v[G]),blend:0,dispose:1,bpp:Math.ceil(q/8),bpl:Math.ceil(P/8)});return h(C,0,!0),u(C,T,x,B,I)},jn.encode.compress=c,jn.encode.dither=l,jn.quantize=O,jn.quantize.getKDtree=k,jn.quantize.getNearest=b})();const UE={toArrayBuffer(t,e){const n=t.width,i=t.height,r=n<<2,s=t.getContext("2d").getImageData(0,0,n,i),a=new Uint32Array(s.data.buffer),l=(32*n+31)/32<<2,u=l*i,h=122+u,c=new ArrayBuffer(h),d=new DataView(c),f=1<<20;let g,E,O,k,b=f,S=0,N=0,M=0;function j(y){d.setUint16(N,y,!0),N+=2}function V(y){d.setUint32(N,y,!0),N+=4}function w(y){N+=y}j(19778),V(h),w(4),V(122),V(108),V(n),V(-i>>>0),j(1),j(32),V(3),V(u),V(2835),V(2835),w(8),V(16711680),V(65280),V(255),V(4278190080),V(1466527264),function y(){for(;S<i&&b>0;){for(k=122+S*l,g=0;g<r;)b--,E=a[M++],O=E>>>24,d.setUint32(k+g,E<<8|O),g+=4;S++}M<a.length?(b=f,setTimeout(y,UE._dly)):e(c)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var Jt={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},bI={[Jt.CHROME]:16384,[Jt.FIREFOX]:11180,[Jt.DESKTOP_SAFARI]:16384,[Jt.IE]:8192,[Jt.IOS]:4096,[Jt.ETC]:8192};const jp=typeof window<"u",zE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Dc=jp&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),TI=(jp||zE)&&(Dc&&Dc.getOriginalSymbol(window,"File")||typeof File<"u"&&File),PE=(jp||zE)&&(Dc&&Dc.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Up(t,e,n=Date.now()){return new Promise(i=>{const r=t.split(","),s=r[0].match(/:(.*?);/)[1],a=globalThis.atob(r[1]);let l=a.length;const u=new Uint8Array(l);for(;l--;)u[l]=a.charCodeAt(l);const h=new Blob([u],{type:s});h.name=e,h.lastModified=n,i(h)})}function LE(t){return new Promise((e,n)=>{const i=new PE;i.onload=()=>e(i.result),i.onerror=r=>n(r),i.readAsDataURL(t)})}function BE(t){return new Promise((e,n)=>{const i=new Image;i.onload=()=>e(i),i.onerror=r=>n(r),i.src=t})}function Gr(){if(Gr.cachedResult!==void 0)return Gr.cachedResult;let t=Jt.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=Jt.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=Jt.IOS:/Safari/i.test(e)?t=Jt.DESKTOP_SAFARI:/Firefox/i.test(e)?t=Jt.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=Jt.IE),Gr.cachedResult=t,Gr.cachedResult}function FE(t,e){const n=Gr(),i=bI[n];let r=t,s=e,a=r*s;const l=r>s?s/r:r/s;for(;a>i*i;){const u=(i+r)/2,h=(i+s)/2;u<h?(s=h,r=h*l):(s=u*l,r=u),a=r*s}return{width:r,height:s}}function mh(t,e){let n,i;try{if(n=new OffscreenCanvas(t,e),i=n.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),i=n.getContext("2d")}return n.width=t,n.height=e,[n,i]}function qE(t,e){const{width:n,height:i}=FE(t.width,t.height),[r,s]=mh(n,i);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,r.width,r.height)),s.drawImage(t,0,0,r.width,r.height),r}function Du(){return Du.cachedResult!==void 0||(Du.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Du.cachedResult}function Oc(t,e={}){return new Promise(function(n,i){let r,s;var a=function(){try{return s=qE(r,e.fileType||t.type),n([r,s])}catch(u){return i(u)}},l=function(u){try{var h=function(c){try{throw c}catch(d){return i(d)}};try{let c;return LE(t).then(function(d){try{return c=d,BE(c).then(function(f){try{return r=f,function(){try{return a()}catch(g){return i(g)}}()}catch(g){return h(g)}},h)}catch(f){return h(f)}},h)}catch(c){h(c)}}catch(c){return i(c)}};try{if(Du()||[Jt.DESKTOP_SAFARI,Jt.MOBILE_SAFARI].includes(Gr()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(u){try{return r=u,a()}catch{return l()}},l)}catch{l()}})}function Mc(t,e,n,i,r=1){return new Promise(function(s,a){let l;if(e==="image/png"){let d,f,g;return d=t.getContext("2d"),{data:f}=d.getImageData(0,0,t.width,t.height),g=jn.encode([f.buffer],t.width,t.height,4096*r),l=new Blob([g],{type:e}),l.name=n,l.lastModified=i,u.call(this)}{let d=function(){return u.call(this)};var h=d;if(e==="image/bmp")return new Promise(f=>UE.toBlob(t,f)).then((function(f){try{return l=f,l.name=n,l.lastModified=i,d.call(this)}catch(g){return a(g)}}).bind(this),a);{let f=function(){return d.call(this)};var c=f;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:r}).then((function(g){try{return l=g,l.name=n,l.lastModified=i,f.call(this)}catch(E){return a(E)}}).bind(this),a);{let g;return g=t.toDataURL(e,r),Up(g,n,i).then((function(E){try{return l=E,f.call(this)}catch(O){return a(O)}}).bind(this),a)}}}function u(){return s(l)}})}function $n(t){t.width=0,t.height=0}function Qs(){return new Promise(function(t,e){let n,i,r,s;return Qs.cachedResult!==void 0?t(Qs.cachedResult):Up("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(a){try{return n=a,Oc(n).then(function(l){try{return i=l[1],Mc(i,n.type,n.name,n.lastModified).then(function(u){try{return r=u,$n(i),Oc(r).then(function(h){try{return s=h[0],Qs.cachedResult=s.width===1&&s.height===2,t(Qs.cachedResult)}catch(c){return e(c)}},e)}catch(h){return e(h)}},e)}catch(u){return e(u)}},e)}catch(l){return e(l)}},e)})}function HE(t){return new Promise((e,n)=>{const i=new PE;i.onload=r=>{const s=new DataView(r.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const a=s.byteLength;let l=2;for(;l<a;){if(s.getUint16(l+2,!1)<=8)return e(-1);const u=s.getUint16(l,!1);if(l+=2,u==65505){if(s.getUint32(l+=2,!1)!=1165519206)return e(-1);const h=s.getUint16(l+=6,!1)==18761;l+=s.getUint32(l+4,h);const c=s.getUint16(l,h);l+=2;for(let d=0;d<c;d++)if(s.getUint16(l+12*d,h)==274)return e(s.getUint16(l+12*d+8,h))}else{if((65280&u)!=65280)break;l+=s.getUint16(l,!1)}}return e(-1)},i.onerror=r=>n(r),i.readAsArrayBuffer(t)})}function GE(t,e){const{width:n}=t,{height:i}=t,{maxWidthOrHeight:r}=e;let s,a=t;return isFinite(r)&&(n>r||i>r)&&([a,s]=mh(n,i),n>i?(a.width=r,a.height=i/n*r):(a.width=n/i*r,a.height=r),s.drawImage(t,0,0,a.width,a.height),$n(t)),a}function QE(t,e){const{width:n}=t,{height:i}=t,[r,s]=mh(n,i);switch(e>4&&e<9?(r.width=i,r.height=n):(r.width=n,r.height=i),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,i);break;case 4:s.transform(1,0,0,-1,0,i);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,i,0);break;case 7:s.transform(0,-1,-1,0,i,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,i),$n(t),r}function xv(t,e,n=0){return new Promise(function(i,r){let s,a,l,u,h,c,d,f,g,E,O,k,b,S,N,M,j,V,w,y;function v(x=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=x,e.onProgress(Math.min(s,100))}function T(x){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(x,s),100),e.onProgress(s)}return s=n,a=e.maxIteration||10,l=1024*e.maxSizeMB*1024,v(),Oc(t,e).then((function(x){try{return[,u]=x,v(),h=GE(u,e),v(),new Promise(function(R,A){var U;if(!(U=e.exifOrientation))return HE(t).then((function(I){try{return U=I,B.call(this)}catch(C){return A(C)}}).bind(this),A);function B(){return R(U)}return B.call(this)}).then((function(R){try{return c=R,v(),Qs().then((function(A){try{return d=A?h:QE(h,c),v(),f=e.initialQuality||1,g=e.fileType||t.type,Mc(d,g,t.name,t.lastModified,f).then((function(U){try{{let q=function(){if(a--&&(N>l||N>b)){let G,W;return G=y?.95*w.width:w.width,W=y?.95*w.height:w.height,[j,V]=mh(G,W),V.drawImage(w,0,0,G,W),f*=g==="image/png"?.85:.95,Mc(j,g,t.name,t.lastModified,f).then(function(z){try{return M=z,$n(w),w=j,N=M.size,T(Math.min(99,Math.floor((S-N)/(S-l)*100))),q}catch(Y){return r(Y)}},r)}return[1]},P=function(){return $n(w),$n(j),$n(h),$n(d),$n(u),T(100),i(M)};var I=q,C=P;if(E=U,v(),O=E.size>l,k=E.size>t.size,!O&&!k)return T(100),i(E);var B;return b=t.size,S=E.size,N=S,w=d,y=!e.alwaysKeepResolution&&O,(B=(function(G){for(;G;){if(G.then)return void G.then(B,r);try{if(G.pop){if(G.length)return G.pop()?P.call(this):G;G=q}else G=G.call(this)}catch(W){return r(W)}}}).bind(this))(q)}}catch(q){return r(q)}}).bind(this),r)}catch(U){return r(U)}}).bind(this),r)}catch(A){return r(A)}}).bind(this),r)}catch(R){return r(R)}}).bind(this),r)})}const EI=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Af;function AI(t,e){return new Promise((n,i)=>{Af||(Af=function(a){const l=[];return l.push(a),URL.createObjectURL(new Blob(l))}(EI));const r=new Worker(Af);r.addEventListener("message",function(a){if(e.signal&&e.signal.aborted)r.terminate();else if(a.data.progress===void 0){if(a.data.error)return i(new Error(a.data.error)),void r.terminate();n(a.data.file),r.terminate()}else e.onProgress(a.data.progress)}),r.addEventListener("error",i),e.signal&&e.signal.addEventListener("abort",()=>{i(e.signal.reason),r.terminate()}),r.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function jt(t,e){return new Promise(function(n,i){let r,s,a,l,u,h;if(r={...e},a=0,{onProgress:l}=r,r.maxSizeMB=r.maxSizeMB||Number.POSITIVE_INFINITY,u=typeof r.useWebWorker!="boolean"||r.useWebWorker,delete r.useWebWorker,r.onProgress=g=>{a=g,typeof l=="function"&&l(a)},!(t instanceof Blob||t instanceof TI))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return i(new Error("The file given is not an image"));if(h=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!u||typeof Worker!="function"||h)return xv(t,r).then((function(g){try{return s=g,f.call(this)}catch(E){return i(E)}}).bind(this),i);var c=(function(){try{return f.call(this)}catch(g){return i(g)}}).bind(this),d=function(g){try{return xv(t,r).then(function(E){try{return s=E,c()}catch(O){return i(O)}},i)}catch(E){return i(E)}};try{return r.libURL=r.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",AI(t,r).then(function(g){try{return s=g,c()}catch{return d()}},d)}catch{d()}function f(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{r.preserveExif&&t.type==="image/jpeg"&&(!r.fileType||r.fileType&&r.fileType===t.type)&&(s=jE(t,s))}catch{}return n(s)}})}jt.getDataUrlFromFile=LE,jt.getFilefromDataUrl=Up,jt.loadImage=BE,jt.drawImageInCanvas=qE,jt.drawFileInCanvas=Oc,jt.canvasToFile=Mc,jt.getExifOrientation=HE,jt.handleMaxWidthOrHeight=GE,jt.followExifOrientation=QE,jt.cleanupCanvasMemory=$n,jt.isAutoOrientationInBrowser=Qs,jt.approximateBelowMaximumCanvasSizeOfBrowser=FE,jt.copyExifWithoutOrientation=jE,jt.getBrowserName=Gr,jt.version="2.0.2";const xI=t=>new Promise((e,n)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=()=>e(i.result),i.onerror=r=>n(r)}),wI=async(t,e)=>{if(!t)throw new Error("No file provided for upload.");const n={maxSizeMB:.75,maxWidthOrHeight:1024,useWebWorker:!0};try{console.log(`Original image size: ${(t.size/1024).toFixed(2)} KB`);const i=await jt(t,n);return console.log(`Compressed image size: ${(i.size/1024).toFixed(2)} KB`),xI(i)}catch(i){throw console.error("Error during image compression:",i),new Error("Failed to process the image. Please try again or select a different one.")}},SI={name:"",level:0,school:"Evocation",castingTime:"1 Action",range:"60 feet",components:"V, S",duration:"Instantaneous",description:""},RI=({initialData:t,onSave:e,onCancel:n})=>{const[i,r]=ne.useState(t),s=(h,c)=>{r(d=>({...d,[h]:c}))},a=h=>{h.preventDefault(),i.name.trim()&&e(i)},l=["Abjuration","Conjuration","Divination","Enchantment","Evocation","Illusion","Necromancy","Transmutation"],u="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return p.jsxs("form",{onSubmit:a,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-6",children:[p.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Spell":"Add New Spell"}),p.jsx("input",{type:"text",placeholder:"Spell Name",value:i.name,onChange:h=>s("name",h.target.value),required:!0,className:u}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsx("input",{type:"number",placeholder:"Level",value:i.level,onChange:h=>s("level",parseInt(h.target.value)),min:"0",max:"9",className:u}),p.jsx("select",{value:i.school,onChange:h=>s("school",h.target.value),className:u,children:l.map(h=>p.jsx("option",{value:h,children:h},h))})]}),p.jsx("textarea",{placeholder:"Description",value:i.description,onChange:h=>s("description",h.target.value),rows:4,className:`${u} resize-y`}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Spell"})]})]})},NI=({spell:t,onEdit:e,onDelete:n,onToggleExpand:i,isExpanded:r})=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg",children:[p.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-3",onClick:i,children:[p.jsx("h4",{className:"font-bold text-amber-300",children:t.name}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("span",{className:"text-sm text-zinc-400 capitalize",children:t.school}),p.jsx("button",{onClick:s=>{s.stopPropagation(),e()},className:"text-zinc-400 hover:text-amber-400 p-1",children:p.jsx(ys,{className:"w-4 h-4"})}),p.jsx("button",{onClick:s=>{s.stopPropagation(),n()},className:"text-zinc-500 hover:text-red-400 p-1",children:p.jsx(gs,{className:"w-4 h-4"})})]})]}),r&&p.jsxs("div",{className:"mt-2 pt-3 border-t border-zinc-600/50 space-y-2 text-sm p-3 bg-zinc-900/30",children:[p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Casting Time:"})," ",t.castingTime]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Range:"})," ",t.range]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Components:"})," ",t.components]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Duration:"})," ",t.duration]}),p.jsx("p",{className:"text-zinc-300 mt-2 whitespace-pre-wrap",children:t.description})]})]}),CI=({character:t,onUpdateCharacter:e})=>{const[n,i]=ne.useState(null),[r,s]=ne.useState({}),a=d=>{let f;if("id"in d)f=t.spells.map(g=>g.id===d.id?d:g);else{const g={...d,id:`spell_${Date.now()}`};f=[...t.spells,g]}e({...t,spells:f}),i(null)},l=d=>{if(window.confirm("Are you sure you want to delete this spell?")){const f=t.spells.filter(g=>g.id!==d);e({...t,spells:f})}},u=d=>{s(f=>({...f,[d]:!f[d]}))},h=ne.useMemo(()=>t.spells.reduce((d,f)=>(d[f.level]=[...d[f.level]||[],f],d[f.level].sort((g,E)=>g.name.localeCompare(E.name)),d),{}),[t.spells]),c=Object.keys(h).map(Number).sort((d,f)=>d-f);return p.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Spellbook"}),p.jsxs("button",{onClick:()=>i("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[p.jsx(So,{className:"w-5 h-5"})," Add Spell"]})]}),n&&p.jsx(RI,{initialData:n==="new"?SI:n,onSave:a,onCancel:()=>i(null)}),p.jsxs("div",{className:"space-y-6 overflow-y-auto pr-2 -mr-2",children:[t.spells.length===0&&!n&&p.jsx("p",{className:"text-center text-zinc-500 text-sm py-8",children:"This character knows no spells. Add one to get started!"}),c.map(d=>p.jsxs("div",{children:[p.jsx("h4",{className:"text-xl font-serif text-zinc-300 border-b border-zinc-600 pb-1 mb-3",children:d===0?"Cantrips":`Level ${d}`}),p.jsx("div",{className:"space-y-3",children:h[d].map(f=>p.jsx(NI,{spell:f,isExpanded:!!r[f.id],onToggleExpand:()=>u(f.id),onEdit:()=>i(f),onDelete:()=>l(f.id)},f.id))})]},d))]})]})},II={name:"",description:""},DI=({initialData:t,onSave:e,onCancel:n})=>{const[i,r]=ne.useState(t),s=(u,h)=>{r(c=>({...c,[u]:h}))},a=u=>{u.preventDefault(),i.name.trim()&&e(i)},l="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return p.jsxs("form",{onSubmit:a,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[p.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Feature":"Add New Feature"}),p.jsx("input",{type:"text",placeholder:"Feature or Trait Name",value:i.name,onChange:u=>s("name",u.target.value),required:!0,className:l}),p.jsx("textarea",{placeholder:"Description",value:i.description,onChange:u=>s("description",u.target.value),rows:4,className:`${l} resize-y`}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Feature"})]})]})},OI=({character:t,onUpdateCharacter:e})=>{const[n,i]=ne.useState(null),[r,s]=ne.useState({}),a=c=>{let d;if("id"in c)d=t.featuresAndTraits.map(f=>f.id===c.id?c:f);else{const f={...c,id:`feat_${Date.now()}`};d=[...t.featuresAndTraits,f]}e({...t,featuresAndTraits:d}),i(null)},l=c=>{if(window.confirm("Are you sure you want to delete this feature?")){const d=t.featuresAndTraits.filter(f=>f.id!==c);e({...t,featuresAndTraits:d})}},u=c=>{s(d=>({...d,[c]:!d[c]}))},h=ne.useMemo(()=>[...t.featuresAndTraits].sort((c,d)=>c.name.localeCompare(d.name)),[t.featuresAndTraits]);return p.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Features & Traits"}),p.jsxs("button",{onClick:()=>i("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[p.jsx(So,{className:"w-5 h-5"})," Add Feature"]})]}),n&&p.jsx(DI,{initialData:n==="new"?II:n,onSave:a,onCancel:()=>i(null)}),p.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[h.length===0&&!n&&p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"No features or traits have been added."})}),h.map(c=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:[p.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer",onClick:()=>u(c.id),children:[p.jsx("span",{className:"font-semibold text-amber-300",children:c.name}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:d=>{d.stopPropagation(),i(c)},className:"text-zinc-400 hover:text-amber-400 p-1",children:p.jsx(ys,{className:"w-4 h-4"})}),p.jsx("button",{onClick:d=>{d.stopPropagation(),l(c.id)},className:"text-zinc-500 hover:text-red-400 p-1",children:p.jsx(gs,{className:"w-4 h-4"})})]})]}),r[c.id]&&p.jsx("div",{className:"p-3 border-t border-zinc-600/50 bg-zinc-900/30",children:p.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:c.description})})]},c.id))]})]})},MI={name:"",quantity:1,description:"",equipped:!1},VI=({initialData:t,onSave:e,onCancel:n})=>{const[i,r]=ne.useState(t),s=(h,c)=>{r(d=>({...d,[h]:c}))},a=h=>{h.preventDefault(),i.name.trim()&&e(i)},l="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500",u=["light","medium","heavy","shield"];return p.jsxs("form",{onSubmit:a,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[p.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Item":"Add New Item"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsx("input",{type:"text",placeholder:"Item Name",value:i.name,onChange:h=>s("name",h.target.value),required:!0,className:`${l} sm:col-span-2`}),p.jsx("input",{type:"number",placeholder:"Qty",value:i.quantity,onChange:h=>s("quantity",parseInt(h.target.value)),min:"1",className:`${l} text-center`})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-zinc-400",children:"Armor Type"}),p.jsxs("select",{value:i.armorType||"",onChange:h=>s("armorType",h.target.value||void 0),className:l,children:[p.jsx("option",{value:"",children:"Not Armor"}),u.map(h=>p.jsx("option",{value:h,className:"capitalize",children:h},h))]})]}),i.armorType&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-zinc-400",children:i.armorType==="shield"?"AC Bonus":"Base AC"}),p.jsx("input",{type:"number",placeholder:"AC",value:i.armorClass||"",onChange:h=>s("armorClass",parseInt(h.target.value)||0),className:l})]})]}),p.jsx("textarea",{placeholder:"Description (optional)",value:i.description,onChange:h=>s("description",h.target.value),rows:3,className:`${l} resize-y`}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Item"})]})]})},kI=({character:t,onUpdateCharacter:e})=>{const[n,i]=ne.useState(null),[r,s]=ne.useState({}),a=c=>{let d;if("id"in c)d=t.equipment.map(f=>f.id===c.id?c:f);else{const f={...c,id:`item_${Date.now()}`};d=[...t.equipment,f]}e({...t,equipment:d}),i(null)},l=c=>{if(window.confirm("Are you sure you want to delete this item?")){const d=t.equipment.filter(f=>f.id!==c);e({...t,equipment:d})}},u=c=>{s(d=>({...d,[c]:!d[c]}))},h=ne.useMemo(()=>[...t.equipment||[]].sort((c,d)=>c.name.localeCompare(d.name)),[t.equipment]);return p.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Equipment"}),p.jsxs("button",{onClick:()=>i("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[p.jsx(So,{className:"w-5 h-5"})," Add Item"]})]}),n&&p.jsx(VI,{initialData:n==="new"?MI:n,onSave:a,onCancel:()=>i(null)}),p.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[h.length===0&&!n&&p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"Your backpack is empty."})}),h.map(c=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:[p.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer",onClick:()=>u(c.id),children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"font-semibold text-amber-300",children:c.name}),p.jsxs("span",{className:"text-zinc-400 text-xs",children:["(x",c.quantity,")"]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:d=>{d.stopPropagation(),i(c)},className:"text-zinc-400 hover:text-amber-400 p-1",children:p.jsx(ys,{className:"w-4 h-4"})}),p.jsx("button",{onClick:d=>{d.stopPropagation(),l(c.id)},className:"text-zinc-500 hover:text-red-400 p-1",children:p.jsx(gs,{className:"w-4 h-4"})})]})]}),r[c.id]&&(c.description||c.armorType)&&p.jsxs("div",{className:"p-3 border-t border-zinc-600/50 bg-zinc-900/30",children:[c.armorType&&p.jsxs("p",{className:"text-xs text-sky-300 capitalize mb-1",children:["Type: ",c.armorType," ",c.armorType!=="shield"?`(Base AC ${c.armorClass})`:`(AC Bonus +${c.armorClass})`]}),c.description&&p.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:c.description})]})]},c.id))]})]})},jI={name:"",bonus:"+0",damage:"1d4"},UI=({initialData:t,onSave:e,onCancel:n})=>{const[i,r]=ne.useState(t),s=(u,h)=>{r(c=>({...c,[u]:h}))},a=u=>{u.preventDefault(),i.name.trim()&&e(i)},l="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return p.jsxs("form",{onSubmit:a,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[p.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Attack":"Add New Attack"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsx("input",{type:"text",placeholder:"Attack Name",value:i.name,onChange:u=>s("name",u.target.value),required:!0,className:`${l} sm:col-span-1`}),p.jsx("input",{type:"text",placeholder:"e.g. +5",value:i.bonus,onChange:u=>s("bonus",u.target.value),required:!0,className:`${l} text-center`}),p.jsx("input",{type:"text",placeholder:"e.g. (2d6)+(1d4)+3",value:i.damage,onChange:u=>s("damage",u.target.value),required:!0,className:`${l} text-center`})]}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Attack"})]})]})},zI=({character:t,onUpdateCharacter:e})=>{const[n,i]=ne.useState(null),r=l=>{let u;if("id"in l)u=t.attacks.map(h=>h.id===l.id?l:h);else{const h={...l,id:`attack_${Date.now()}`};u=[...t.attacks,h]}e({...t,attacks:u}),i(null)},s=l=>{if(window.confirm("Are you sure you want to delete this attack?")){const u=t.attacks.filter(h=>h.id!==l);e({...t,attacks:u})}},a=ne.useMemo(()=>[...t.attacks||[]].sort((l,u)=>l.name.localeCompare(u.name)),[t.attacks]);return p.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Attacks & Cantrips"}),p.jsxs("button",{onClick:()=>i("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[p.jsx(So,{className:"w-5 h-5"})," Add Attack"]})]}),n&&p.jsx(UI,{initialData:n==="new"?jI:n,onSave:r,onCancel:()=>i(null)}),p.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[a.length===0&&!n&&p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"No attacks have been defined."})}),a.map(l=>p.jsx("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:p.jsxs("div",{className:"grid grid-cols-6 items-center p-3",children:[p.jsx("span",{className:"font-semibold text-amber-300 col-span-3",children:l.name}),p.jsx("span",{className:"font-mono text-zinc-300 col-span-1 text-center",children:l.bonus}),p.jsx("span",{className:"font-mono text-zinc-300 col-span-1 text-center",children:l.damage}),p.jsxs("div",{className:"flex items-center gap-2 justify-end col-span-1",children:[p.jsx("button",{onClick:()=>i(l),className:"text-zinc-400 hover:text-amber-400 p-1",children:p.jsx(ys,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>s(l.id),className:"text-zinc-500 hover:text-red-400 p-1",children:p.jsx(gs,{className:"w-4 h-4"})})]})]})},l.id))]})]})},PI={name:"",max:1},LI=({initialData:t,onSave:e,onCancel:n})=>{const[i,r]=ne.useState(t),s=(u,h)=>{r(c=>({...c,[u]:h}))},a=u=>{u.preventDefault(),i.name.trim()&&e(i)},l="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return p.jsxs("form",{onSubmit:a,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[p.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Resource":"Add New Resource"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsx("input",{type:"text",placeholder:"Resource Name",value:i.name,onChange:u=>s("name",u.target.value),required:!0,className:`${l} sm:col-span-2`}),p.jsx("input",{type:"number",placeholder:"Max",value:i.max,onChange:u=>s("max",parseInt(u.target.value)||1),min:"1",className:`${l} text-center`})]}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save"})]})]})},BI=({character:t,onUpdateCharacter:e})=>{const[n,i]=ne.useState(null),r=a=>{let l;if("id"in a)l=t.customResources.map(u=>u.id===a.id?{...u,name:a.name,max:a.max}:u);else{const u={...a,id:`resource_${Date.now()}`,used:0};l=[...t.customResources,u]}e({...t,customResources:l}),i(null)},s=a=>{if(window.confirm("Are you sure you want to delete this resource?")){const l=t.customResources.filter(u=>u.id!==a);e({...t,customResources:l})}};return p.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-lg",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Other Resources"}),p.jsxs("button",{onClick:()=>i("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[p.jsx(So,{className:"w-5 h-5"})," Add Resource"]})]}),n&&p.jsx(LI,{initialData:n==="new"?PI:n,onSave:r,onCancel:()=>i(null)}),p.jsxs("div",{className:"space-y-2",children:[(t.customResources||[]).length===0&&!n&&p.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"No custom resources defined."}),(t.customResources||[]).map(a=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm p-3 flex items-center justify-between",children:[p.jsx("span",{className:"font-semibold text-amber-300",children:a.name}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("span",{className:"text-zinc-400",children:["Max: ",a.max]}),p.jsx("button",{onClick:()=>i(a),className:"text-zinc-400 hover:text-amber-400 p-1",children:p.jsx(ys,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>s(a.id),className:"text-zinc-500 hover:text-red-400 p-1",children:p.jsx(gs,{className:"w-4 h-4"})})]})]},a.id))]})]})},xf=t=>Math.floor((t-10)/2),xs=t=>t>=0?`+${t}`:String(t),wv=["strength","dexterity","constitution","intelligence","wisdom","charisma"],FI=({label:t,isActive:e,onClick:n,controls:i,id:r})=>p.jsx("button",{id:r,role:"tab","aria-selected":e,"aria-controls":i,onClick:n,className:`px-3 py-2 text-sm font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-zinc-700 text-amber-400 border-b-2 border-amber-400":"text-zinc-400 hover:bg-zinc-800/60 border-b-2 border-transparent"}`,children:t}),kn=({label:t,name:e,type:n,value:i,onChange:r,placeholder:s,className:a})=>p.jsxs("div",{className:a,children:[p.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-zinc-400 capitalize",children:t}),p.jsx("input",{type:n,id:e,name:e,value:i,onChange:r,placeholder:s,className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md shadow-sm py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm"})]}),uu=({label:t,value:e,className:n})=>p.jsxs("div",{className:`flex flex-col items-center justify-center p-3 bg-zinc-700/50 rounded-lg text-center ${n}`,children:[p.jsx("span",{className:"text-3xl font-bold font-mono text-white",children:e}),p.jsx("span",{className:"text-xs uppercase tracking-wider text-zinc-400 mt-1",children:t})]}),ws=({label:t,name:e,value:n,onChange:i,placeholder:r})=>p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col flex-1 h-full",children:[p.jsx("h3",{className:"text-lg font-semibold text-amber-400 mb-2",children:t}),p.jsx("textarea",{name:e,value:n,onChange:i,className:"w-full bg-zinc-700 border border-zinc-600 rounded-md p-3 text-zinc-200 focus:ring-amber-500 focus:border-amber-500 resize-y flex-grow min-h-[100px]",placeholder:r||`Your character's ${t.toLowerCase()}...`})]}),qI=[{key:"main",label:"Main"},{key:"stats",label:"Stats & Skills"},{key:"combat",label:"Combat & Features"},{key:"bio",label:"Biography & Notes"},{key:"inventory",label:"Inventory"},{key:"spells",label:"Spells"}],HI=({characterId:t,onBack:e,onSaveComplete:n,onDelete:i})=>{const[r,s]=ne.useState(null),[a,l]=ne.useState(!0),[u,h]=ne.useState(!1),[c,d]=ne.useState(!1),[f,g]=ne.useState(""),[E,O]=ne.useState("main"),[k,b]=ne.useState(null),[S,N]=ne.useState(null),M=t==="new";ne.useEffect(()=>{(async()=>{l(!0);let Y;M?Y={...Mp(),id:"temp_new"}:Y=await CE(t),s(Y),Y!=null&&Y.imageUrl&&N(Y.imageUrl),l(!1)})()},[t,M]);const j=ne.useMemo(()=>r?Math.ceil(r.level/4)+1:0,[r==null?void 0:r.level]),V=async()=>{if(r){h(!0);try{const z=M?`char_${Date.now()}`:r.id;let Y=r.imageUrl||"";k&&(Y=await wI(k,z));const F={...r,id:z,imageUrl:Y,proficiencyBonus:j,lastUpdated:Date.now()},H=await IE(F);n(H.id)}catch(z){console.error("Failed to save character:",z),alert("An error occurred while saving. Please try again.")}finally{h(!1)}}},w=async()=>{r&&!M&&window.confirm(`Are you sure you want to permanently delete ${r.name}?`)&&i(r.id)},y=z=>{if(z.target.files&&z.target.files[0]){const Y=z.target.files[0];b(Y);const F=new FileReader;F.onloadend=()=>{N(F.result)},F.readAsDataURL(Y)}},v=z=>{if(!r)return;const{name:Y,value:F,type:H}=z.target;let te=F;H==="number"&&(te=parseInt(F)||0),s(_e=>({..._e,[Y]:te}))},T=(z,Y)=>{r&&s(F=>({...F,currency:{...F.currency,[z]:Y}}))},x=(z,Y)=>{r&&s(F=>({...F,hp:{...F.hp,[z]:Y}}))},R=z=>{if(!r)return;const{value:Y}=z.target;s(F=>({...F,hitDice:{...F.hitDice,total:Y}}))},A=(z,Y)=>{r&&s(F=>({...F,abilityScores:{...F.abilityScores,[z]:Y}}))},U=z=>{if(!r)return;const Y={...r.savingThrows};Y[z].proficient=!Y[z].proficient,s(F=>({...F,savingThrows:Y}))},B=z=>{if(!r)return;const Y=r.skills.map(F=>{if(F.name===z){const H=!F.proficient,te=H?F.expertise:!1;return{...F,proficient:H,expertise:te}}return F});s(F=>({...F,skills:Y}))},I=z=>{if(!r)return;const Y=r.skills.map(F=>{if(F.name===z){const H=!F.expertise,te=H||F.proficient;return{...F,proficient:te,expertise:H}}return F});s(F=>({...F,skills:Y}))},C=(z,Y)=>{if(!r)return;const F={...r.spellSlots};F[z]={...F[z],max:Y},s(H=>({...H,spellSlots:F}))},q=async()=>{if(!r)return;d(!0);const z=await pI(r,f);s(Y=>({...Y,...z})),d(!1)},P=ne.useMemo(()=>r?xf(r.abilityScores.dexterity):0,[r==null?void 0:r.abilityScores.dexterity]),{spellSaveDC:G,spellAttackBonus:W}=ne.useMemo(()=>{if(!r||!r.spellcastingAbility)return{spellSaveDC:"-",spellAttackBonus:"-"};const z=xf(r.abilityScores[r.spellcastingAbility]);return{spellSaveDC:8+j+z,spellAttackBonus:xs(j+z)}},[r==null?void 0:r.spellcastingAbility,r==null?void 0:r.abilityScores,j]);return a||!r?p.jsx("div",{className:"flex justify-center items-center h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})}):p.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:[p.jsxs("header",{className:"flex justify-between items-center mb-4 border-b border-zinc-700 pb-4",children:[p.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-zinc-300 hover:text-amber-400 transition-colors",children:[p.jsx(OE,{className:"w-5 h-5"}),M?"Cancel Creation":"Back to Play View"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[!M&&p.jsx("button",{onClick:w,className:"p-2 rounded-full bg-red-800/50 hover:bg-red-600 text-red-300 hover:text-white transition-colors","aria-label":"Delete Character",children:p.jsx(gs,{className:"w-5 h-5"})}),p.jsxs("button",{onClick:V,disabled:u,className:"flex items-center gap-2 px-4 py-2 bg-amber-600 text-white font-bold rounded-lg shadow-md hover:bg-amber-500 transition-colors disabled:bg-zinc-600",children:[p.jsx(L3,{className:"w-5 h-5"}),u?"Saving...":"Save Changes"]})]})]}),p.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 shadow-2xl shadow-amber-900/10 rounded-lg p-4 sm:p-6",children:[p.jsx("div",{role:"tablist","aria-label":"Character Sheet Sections",className:"flex space-x-1 mb-6 border-b border-zinc-700 overflow-x-auto",children:qI.map(z=>p.jsx(FI,{id:`tab-${z.key}`,label:z.label,isActive:E===z.key,onClick:()=>O(z.key),controls:`panel-${z.key}`},z.key))}),p.jsx("div",{id:"panel-main",role:"tabpanel","aria-labelledby":"tab-main",hidden:E!=="main",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"space-y-4 md:col-span-1",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-zinc-400",children:"Character Portrait"}),p.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[p.jsx("span",{className:"inline-block h-24 w-24 rounded-lg overflow-hidden bg-zinc-700",children:S?p.jsx("img",{src:S,alt:"Character portrait",className:"h-full w-full object-cover"}):p.jsx(ME,{className:"h-full w-full text-zinc-500 p-4"})}),p.jsx("input",{type:"file",id:"imageUpload",className:"hidden",accept:"image/png, image/jpeg, image/webp, image/gif",onChange:y}),p.jsx("label",{htmlFor:"imageUpload",className:"cursor-pointer rounded-md bg-zinc-700 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-zinc-600",children:"Change"})]})]}),p.jsx(kn,{label:"Character Name",name:"name",type:"text",value:r.name,onChange:v,placeholder:"e.g., Eldrin"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx(kn,{label:"Class",name:"class",type:"text",value:r.class,onChange:v,placeholder:"e.g., Wizard"}),p.jsx(kn,{label:"Subclass",name:"subclass",type:"text",value:r.subclass,onChange:v,placeholder:"e.g., School of Evocation"})]}),p.jsx(kn,{label:"Race",name:"race",type:"text",value:r.race,onChange:v,placeholder:"e.g., High-Elf"}),p.jsx(kn,{label:"Background",name:"background",type:"text",value:r.background,onChange:v,placeholder:"e.g., Sage"}),p.jsx(kn,{label:"Languages",name:"languages",type:"text",value:r.languages,onChange:v,placeholder:"e.g., Common, Elvish"})]}),p.jsxs("div",{className:"space-y-4 md:col-span-1",children:[p.jsx(kn,{label:"Level",name:"level",type:"number",value:r.level,onChange:v}),p.jsx(kn,{label:"Alignment",name:"alignment",type:"text",value:r.alignment,onChange:v,placeholder:"e.g., Chaotic Good"}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Hit Points"}),p.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"hp-current",className:"block text-xs font-medium text-zinc-500 text-center",children:"Current"}),p.jsx("input",{id:"hp-current",type:"number",value:r.hp.current,onChange:z=>x("current",parseInt(z.target.value)||0),className:"mt-1 w-full bg-zinc-700 border border-zinc-600 rounded-md py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"hp-max",className:"block text-xs font-medium text-zinc-500 text-center",children:"Max"}),p.jsx("input",{id:"hp-max",type:"number",value:r.hp.max,onChange:z=>x("max",parseInt(z.target.value)||0),className:"mt-1 w-full bg-zinc-700 border border-zinc-600 rounded-md py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"hp-temporary",className:"block text-xs font-medium text-zinc-500 text-center",children:"Temporary"}),p.jsx("input",{id:"hp-temporary",type:"number",value:r.hp.temporary,onChange:z=>x("temporary",parseInt(z.target.value)||0),className:"mt-1 w-full bg-zinc-700 border border-zinc-600 rounded-md py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]})]})]}),p.jsx(kn,{label:"Hit Dice",name:"hitDice",type:"text",value:r.hitDice.total,onChange:R,placeholder:"e.g. 1d8"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 md:col-span-1",children:[p.jsx(kn,{label:"Armor Class",name:"armorClass",type:"number",value:r.armorClass,onChange:v,className:"col-span-1"}),p.jsx(uu,{label:"Initiative",value:xs(P)}),p.jsx(kn,{label:"Speed",name:"speed",type:"number",value:r.speed,onChange:v,className:"col-span-1"}),p.jsx(uu,{label:"Proficiency",value:xs(j)}),p.jsxs("div",{className:"col-span-2",children:[p.jsx("label",{htmlFor:"spellcastingAbility",className:"block text-sm font-medium text-zinc-400",children:"Spellcasting Ability"}),p.jsxs("select",{id:"spellcastingAbility",name:"spellcastingAbility",value:r.spellcastingAbility,onChange:v,className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md shadow-sm py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm",children:[p.jsx("option",{value:"",children:"None"}),wv.map(z=>p.jsx("option",{value:z,className:"capitalize",children:z},z))]})]}),p.jsx(uu,{label:"Spell Save DC",value:String(G)}),p.jsx(uu,{label:"Spell Attack",value:String(W)})]})]})}),p.jsx("div",{id:"panel-stats",role:"tabpanel","aria-labelledby":"tab-stats",hidden:E!=="stats",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:wv.map(z=>{const Y=r.abilityScores[z],F=xf(Y),H=r.savingThrows[z],te=F+(H.proficient?j:0),_e=r.skills.filter(ae=>ae.ability===z);return p.jsxs("div",{className:"bg-zinc-700/50 p-3 rounded-lg flex flex-col gap-3",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"flex flex-col items-center justify-center bg-zinc-900/50 p-2 rounded-lg w-20",children:[p.jsx("span",{className:"text-3xl font-bold font-mono text-white",children:xs(F)}),p.jsx("span",{className:"text-xs uppercase tracking-wider text-zinc-400",children:z.substring(0,3)})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-xl font-cinzel text-amber-400 capitalize",children:z}),p.jsx("input",{type:"number",value:Y,onChange:ae=>A(z,parseInt(ae.target.value)||0),className:"w-full bg-zinc-800 text-center text-lg rounded border border-zinc-600 p-1 focus:ring-amber-500","aria-label":`${z} score`})]})]}),p.jsxs("div",{className:"bg-zinc-800/60 p-2 rounded-md space-y-2",children:[p.jsxs("label",{htmlFor:`saving-throw-${z}`,className:"flex items-center justify-between cursor-pointer text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",id:`saving-throw-${z}`,checked:H.proficient,onChange:()=>U(z),className:"w-4 h-4 rounded-full text-amber-600 bg-zinc-900 border-zinc-600 focus:ring-amber-500"}),p.jsx("span",{children:"Saving Throw"})]}),p.jsx("span",{className:"font-mono font-bold text-lg text-white",children:xs(te)})]}),_e.map(ae=>{const ge=F+(ae.proficient?j:0)+(ae.expertise?j:0);return p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",id:`skill-prof-${ae.name}`,checked:ae.proficient,onChange:()=>B(ae.name),className:"w-4 h-4 rounded-full text-amber-600 bg-zinc-900 border-zinc-600 focus:ring-amber-500 cursor-pointer"}),p.jsx("input",{type:"checkbox",id:`skill-exp-${ae.name}`,checked:ae.expertise,onChange:()=>I(ae.name),className:"w-4 h-4 rounded-sm text-yellow-300 bg-zinc-900 border-zinc-600 focus:ring-yellow-400 cursor-pointer",title:"Expertise"}),p.jsx("label",{htmlFor:`skill-prof-${ae.name}`,className:"cursor-pointer",children:ae.name})]}),p.jsx("span",{className:"font-mono font-bold text-lg text-white",children:xs(ge)})]},ae.name)})]})]},z)})})}),p.jsx("div",{id:"panel-combat",role:"tabpanel","aria-labelledby":"tab-combat",hidden:E!=="combat",className:"min-h-[60vh]",children:p.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-full",children:[p.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col",children:p.jsx(zI,{character:r,onUpdateCharacter:s})}),p.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col",children:p.jsx(OI,{character:r,onUpdateCharacter:z=>s(z)})})]})}),p.jsx("div",{id:"panel-bio",role:"tabpanel","aria-labelledby":"tab-bio",hidden:E!=="bio",className:"min-h-[60vh]",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsx(ws,{label:"Personality Traits",name:"personalityTraits",value:r.personalityTraits,onChange:v}),p.jsx(ws,{label:"Ideals",name:"ideals",value:r.ideals,onChange:v}),p.jsx(ws,{label:"Bonds",name:"bonds",value:r.bonds,onChange:v}),p.jsx(ws,{label:"Flaws",name:"flaws",value:r.flaws,onChange:v})]}),p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-amber-400 mb-2",children:"AI Personality Generator"}),p.jsxs("div",{className:"p-4 bg-zinc-800 border border-zinc-700 rounded-lg",children:[p.jsx("input",{type:"text",placeholder:"Optional: Add a keyword (e.g., 'tragic', 'grew up an orphan')",value:f,onChange:z=>g(z.target.value),className:"w-full bg-zinc-700 border border-zinc-600 rounded-md p-2 text-sm mb-2 focus:ring-amber-500 focus:border-amber-500"}),p.jsxs("button",{onClick:q,disabled:c,className:"flex w-full justify-center items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition disabled:bg-zinc-600",children:[p.jsx(P3,{className:"w-4 h-4"}),c?"Generating...":"Generate with AI"]})]})]}),p.jsx(ws,{label:"Notes",name:"notes",value:r.notes,onChange:v,placeholder:"Campaign notes, important NPCs, etc."}),p.jsx(ws,{label:"DM Notes",name:"dmNotes",value:r.dmNotes,onChange:v,placeholder:"Notes from your DM, or secrets your character knows."})]})]})}),p.jsx("div",{id:"panel-inventory",role:"tabpanel","aria-labelledby":"tab-inventory",hidden:E!=="inventory",className:"min-h-[60vh]",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"lg:col-span-1",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-4",children:"Currency"}),p.jsx("div",{className:"bg-zinc-900/50 p-4 rounded-lg grid grid-cols-3 sm:grid-cols-5 gap-3",children:Object.entries(r.currency).map(([z,Y])=>p.jsxs("div",{children:[p.jsx("label",{className:"block text-center text-sm font-medium text-zinc-400 uppercase",children:z}),p.jsx("input",{type:"number",value:Y,onChange:F=>T(z,parseInt(F.target.value,10)||0),className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md py-1 px-2 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]},z))})]}),p.jsx("div",{className:"lg:col-span-2",children:p.jsx(kI,{character:r,onUpdateCharacter:s})})]})}),p.jsxs("div",{id:"panel-spells",role:"tabpanel","aria-labelledby":"tab-spells",hidden:E!=="spells",className:"min-h-[60vh] space-y-6",children:[p.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-lg",children:[p.jsx("h4",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Maximum Spell Slots"}),p.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-5 md:grid-cols-9 gap-3",children:Array.from({length:9},(z,Y)=>Y+1).map(z=>{var Y;return p.jsxs("div",{children:[p.jsxs("label",{className:"block text-center text-sm font-medium text-zinc-400",children:["Lvl ",z]}),p.jsx("input",{type:"number",min:"0",value:((Y=r.spellSlots[z])==null?void 0:Y.max)??0,onChange:F=>C(z,parseInt(F.target.value,10)||0),className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md py-1 px-2 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]},z)})})]}),p.jsx(BI,{character:r,onUpdateCharacter:s}),p.jsx(CI,{character:r,onUpdateCharacter:z=>s(z)})]})]})]})},GI=t=>Math.floor((t-10)/2),wf=t=>t>=0?`+${t}`:String(t),QI=["strength","dexterity","constitution","intelligence","wisdom","charisma"],YI=({character:t})=>{const{proficiencyBonus:e,abilityScores:n,savingThrows:i,skills:r}=t;return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3 text-center",children:"Abilities"}),p.jsx("div",{className:"space-y-3",children:QI.map(s=>{const a=n[s],l=GI(a),u=i[s],h=l+(u.proficient?e:0),c=r.filter(d=>d.ability===s);return p.jsxs("div",{className:"bg-zinc-900/50 p-3 rounded-lg border border-zinc-700/50",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("h4",{className:"text-lg font-cinzel text-amber-400 capitalize",children:s}),p.jsxs("div",{className:"flex items-baseline gap-2",children:[p.jsx("span",{className:"text-3xl font-mono text-white font-bold",children:a}),p.jsxs("span",{className:"text-2xl font-mono text-amber-300 font-bold",children:["(",wf(l),")"]})]})]}),p.jsxs("div",{className:"bg-zinc-800/60 p-2 rounded-md space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:`w-3 h-3 rounded-full border-2 ${u.proficient?"bg-amber-400 border-amber-200":"border-zinc-500"}`}),p.jsx("span",{children:"Saving Throw"})]}),p.jsx("span",{className:"font-mono font-bold text-base text-white",children:wf(h)})]}),p.jsx("hr",{className:"border-zinc-700"}),c.map(d=>{const f=l+(d.proficient?e:0)+(d.expertise?e:0);let g="border-zinc-500";return d.expertise?g="bg-white border-white":d.proficient&&(g="bg-amber-400 border-amber-200"),p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:`w-3 h-3 rounded-full border-2 ${g}`}),p.jsx("span",{children:d.name})]}),p.jsx("span",{className:"font-mono font-bold text-base text-white",children:wf(f)})]},d.name)})]})]},s)})})]})},$I=({spell:t,onToggleExpand:e,isExpanded:n})=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg",children:[p.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-3",onClick:e,children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h4",{className:"font-bold text-amber-300 truncate",title:t.name,children:t.name}),p.jsxs("div",{className:"flex items-center gap-2 text-xs text-zinc-400 mt-1",children:[p.jsx("span",{className:"truncate",title:t.castingTime,children:t.castingTime}),p.jsx("span",{className:"opacity-50",children:"|"}),p.jsx("span",{className:"truncate",title:t.range,children:t.range})]})]}),p.jsx("div",{className:"flex items-center gap-2 pl-2 flex-shrink-0",children:p.jsx("span",{className:"text-xs text-zinc-400 capitalize",children:t.school})})]}),n&&p.jsxs("div",{className:"mt-2 pt-3 border-t border-zinc-600/50 space-y-2 text-sm p-3 bg-zinc-900/30",children:[p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Components:"})," ",t.components]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Duration:"})," ",t.duration]}),p.jsx("p",{className:"text-zinc-300 mt-2 whitespace-pre-wrap",children:t.description})]})]}),KI=({character:t})=>{const[e,n]=ne.useState({}),[i,r]=ne.useState(""),s=u=>{n(h=>({...h,[u]:!h[u]}))},a=ne.useMemo(()=>t.spells.filter(h=>h.name.toLowerCase().includes(i.toLowerCase())).reduce((h,c)=>(h[c.level]=[...h[c.level]||[],c],h[c.level].sort((d,f)=>d.name.localeCompare(f.name)),h),{}),[t.spells,i]),l=Object.keys(a).map(Number).sort((u,h)=>u-h);return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col h-auto max-h-[calc(100vh-10rem)]",children:[p.jsx("div",{className:"flex justify-between items-center mb-2",children:p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Spellbook"})}),p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"text",placeholder:"Search spells...",value:i,onChange:u=>r(u.target.value),className:"w-full bg-zinc-700 p-2 rounded-md border border-zinc-600 text-sm focus:ring-amber-500 focus:border-amber-500"})}),p.jsx("div",{className:"space-y-6 overflow-y-auto pr-2 -mr-2 flex-grow",children:t.spells.length===0?p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-center text-zinc-500 text-sm py-8",children:"This character knows no spells."})}):l.length===0?p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-center text-zinc-500 text-sm py-8",children:"No spells match your search."})}):l.map(u=>p.jsxs("div",{children:[p.jsx("h4",{className:"text-xl font-serif text-zinc-300 border-b border-zinc-600 pb-1 mb-3",children:u===0?"Cantrips":`Level ${u}`}),p.jsx("div",{className:"space-y-3",children:a[u].map(h=>p.jsx($I,{spell:h,isExpanded:!!e[h.id],onToggleExpand:()=>s(h.id)},h.id))})]},u))})]})},Ou=t=>Math.floor((t-10)/2),Kd=t=>t>=0?`+${t}`:String(t),XI=({label:t,isActive:e,onClick:n,id:i,controls:r})=>p.jsx("button",{id:i,role:"tab","aria-selected":e,"aria-controls":r,onClick:n,className:`px-4 py-2 text-sm sm:text-base font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-zinc-800 text-amber-400 border-b-2 border-amber-400":"text-zinc-400 hover:bg-zinc-800/60 border-b-2 border-transparent"}`,children:t}),Fr=({label:t,value:e,subValue:n,className:i})=>p.jsxs("div",{className:`flex flex-col items-center justify-center p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-center ${i}`,children:[p.jsx("span",{className:"text-2xl sm:text-3xl font-bold font-mono text-white",children:e}),p.jsx("span",{className:"text-xs uppercase tracking-wider text-zinc-400 mt-1",children:t}),n&&p.jsx("span",{className:"text-xs text-zinc-500",children:n})]}),ZI=t=>{if(!t||typeof t!="string")return{total:0,pretty:"Invalid"};const e=t.match(/(\d+)d(\d+)/);if(!e)return{total:0,pretty:"Invalid"};const n=parseInt(e[1],10),i=parseInt(e[2],10);let r=0;const s=[];for(let a=0;a<n;a++){const l=Math.floor(Math.random()*i)+1;s.push(l),r+=l}return{total:r,pretty:`[${s.join("+")}]`}},JI=({character:t,onUpdate:e})=>{const[n,i]=ne.useState(null),r=Ou(t.abilityScores.constitution),s=ne.useMemo(()=>{const h=Ou(t.abilityScores.wisdom),c=t.skills.find(f=>f.name==="Perception");let d=0;return c&&(c.expertise?d=t.proficiencyBonus*2:c.proficient&&(d=t.proficiencyBonus)),10+h+d},[t]),a=ne.useMemo(()=>{const h=Ou(t.abilityScores.dexterity);let c=10+h,d=0;const f=t.equipment.find(E=>E.equipped&&["light","medium","heavy"].includes(E.armorType||"")),g=t.equipment.find(E=>E.equipped&&E.armorType==="shield");if(g&&(d=g.armorClass||2),f){const E=f.armorClass||0;switch(f.armorType){case"light":c=E+h;break;case"medium":c=E+Math.min(h,2);break;case"heavy":c=E;break}}return c+d},[t.abilityScores,t.equipment]),l=()=>{if(t.hitDice.used>=t.level)return;const{total:h,pretty:c}=ZI(t.hitDice.total),d=Math.max(1,h+r),f=Math.min(t.hp.max,t.hp.current+d);i(`${c} + ${r} = ${d} HP`),e({hp:{...t.hp,current:f},hitDice:{...t.hitDice,used:t.hitDice.used+1}})},u=()=>{e({hitDice:{...t.hitDice,used:0}}),i(null)};return p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"md:col-span-2 lg:col-span-3 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:[p.jsx(Fr,{label:"Armor Class",value:a}),p.jsx(Fr,{label:"Initiative",value:Kd(t.initiative)}),p.jsx(Fr,{label:"Speed",value:`${t.speed}ft`,subValue:` ${Math.round(t.speed*.3)}m`}),p.jsx(Fr,{label:"Proficiency",value:Kd(t.proficiencyBonus)}),p.jsx(Fr,{label:"Passive Perception",value:s,className:"col-span-2 sm:col-span-1"})]}),p.jsx(s5,{hp:t.hp,onHpChange:h=>e({hp:h})}),p.jsx(a5,{saves:t.deathSaves,onSaveChange:h=>e({deathSaves:h})}),p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Hit Dice"}),p.jsxs("p",{className:"text-center text-3xl font-bold font-mono text-white mb-3",children:[t.level-t.hitDice.used," / ",t.level]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:l,disabled:t.hitDice.used>=t.level,className:"w-full bg-green-800/80 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md transition-colors disabled:bg-zinc-600 disabled:cursor-not-allowed",children:["Spend (",t.hitDice.total,")"]}),p.jsx("button",{onClick:u,className:"bg-sky-800/80 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-md transition-colors",children:"Reset"})]}),n&&p.jsx("p",{className:"text-center text-amber-300 font-mono mt-3 p-2 bg-zinc-900/50 rounded-md",children:n})]}),p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Languages"}),p.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:t.languages||"None"})]})]})},WI=({character:t})=>p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsx(l5,{items:t.attacks||[]}),p.jsx(o5,{title:"Features & Traits",items:t.featuresAndTraits||[]})]}),e5=({character:t,onUpdate:e})=>{const n=t.spellcastingAbility,i=n?Ou(t.abilityScores[n]):0,r=n?8+t.proficiencyBonus+i:"-",s=n?t.proficiencyBonus+i:0;return p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3 text-center",children:"Spellcasting"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx(Fr,{label:"Save DC",value:r}),p.jsx(Fr,{label:"Attack Bonus",value:Kd(s)}),p.jsxs("div",{className:"col-span-2 text-center",children:[p.jsx("p",{className:"text-xs uppercase tracking-wider text-zinc-400",children:"Ability"}),p.jsx("p",{className:"text-xl font-bold text-white capitalize",children:n||"None"})]})]})]}),p.jsx(Sv,{title:"Spell Slots",slots:t.spellSlots,onSlotChange:a=>e({spellSlots:a})}),t.customResources&&t.customResources.length>0&&p.jsx(Sv,{title:"Other Resources",slots:t.customResources,onSlotChange:a=>e({customResources:a}),isCustom:!0})]}),p.jsx("div",{className:"lg:col-span-2",children:p.jsx(KI,{character:t})})]})},t5=({character:t,onUpdate:e})=>{const n=l=>{const u=t.equipment.map(h=>{var c;return h.id===l?{...h,equipped:!h.equipped}:h.id!==l&&h.armorType&&h.armorType!=="shield"&&((c=t.equipment.find(d=>d.id===l))==null?void 0:c.armorType)!=="shield"?{...h,equipped:!1}:h});e({equipment:u})},i=t.equipment.filter(l=>l.armorType&&l.armorType!=="shield"),r=t.equipment.filter(l=>l.armorType==="shield"),s=t.equipment.filter(l=>!l.armorType),a=({title:l,items:u})=>p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:l}),u.length===0?p.jsx("p",{className:"text-zinc-500 text-sm text-center py-4",children:"None."}):p.jsx("div",{className:"space-y-2",children:u.map(h=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg p-3 text-sm flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsxs("p",{className:"font-semibold text-amber-300",children:[h.name," ",p.jsxs("span",{className:"text-xs text-zinc-400",children:["(x",h.quantity,")"]})]}),h.description&&p.jsx("p",{className:"text-xs text-zinc-300",children:h.description})]}),h.armorType&&p.jsx("button",{onClick:()=>n(h.id),className:`px-3 py-1 text-xs font-bold rounded ${h.equipped?"bg-amber-500 text-white":"bg-zinc-600 hover:bg-zinc-500"}`,children:h.equipped?"Equipped":"Equip"})]},h.id))})]});return p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Currency"}),p.jsx("div",{className:"grid grid-cols-3 gap-2 text-center",children:Object.keys(t.currency).map(l=>p.jsxs("div",{children:[p.jsx("p",{className:"text-xl font-mono text-white",children:t.currency[l]}),p.jsx("p",{className:"text-xs uppercase text-zinc-400",children:l})]},l))})]}),p.jsx(a,{title:"Armor",items:i}),p.jsx(a,{title:"Shields",items:r})]}),p.jsx("div",{className:"lg:col-span-2",children:p.jsx(a,{title:"Backpack",items:s})})]})},n5=({character:t})=>{const e=({title:n,content:i})=>p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex-grow",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-2",children:n}),p.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:i||"Not set."})]});return p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-6 flex flex-col",children:[p.jsx(e,{title:"Personality Traits",content:t.personalityTraits}),p.jsx(e,{title:"Ideals",content:t.ideals}),p.jsx(e,{title:"Bonds",content:t.bonds}),p.jsx(e,{title:"Flaws",content:t.flaws})]}),p.jsxs("div",{className:"space-y-6 flex flex-col",children:[p.jsx(e,{title:"Character Notes",content:t.notes}),p.jsx(e,{title:"Campaign Info",content:t.dmNotes})]})]})},i5=[{key:"main",label:"Main"},{key:"abilities",label:"Abilities"},{key:"combat",label:"Combat"},{key:"spells",label:"Spells"},{key:"inventory",label:"Inventory"},{key:"info",label:"Info"}],r5=({characterId:t,onGoToEdit:e,onBack:n})=>{const[i,r]=ne.useState(null),[s,a]=ne.useState(!0),[l,u]=ne.useState("main");ne.useEffect(()=>{(async()=>{a(!0);const d=await CE(t);r(d),a(!1)})()},[t]);const h=c=>{if(!i)return;const d={...i,...c};r(d),IE(d)};return s||!i?p.jsx("div",{className:"flex justify-center items-center h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})}):p.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:[p.jsxs("header",{className:"flex justify-between items-center mb-6 border-b border-zinc-700 pb-4",children:[p.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-zinc-300 hover:text-amber-400 transition-colors",children:[p.jsx(OE,{className:"w-5 h-5"})," Back to List"]}),p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-2xl sm:text-3xl font-cinzel text-amber-400",children:i.name}),p.jsxs("p",{className:"text-zinc-400 capitalize text-sm",children:[i.race," ",i.class," ",i.subclass&&`(${i.subclass})`,"  Level ",i.level,"  ",i.alignment]})]}),p.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-zinc-700 text-white font-bold rounded-lg shadow-md hover:bg-zinc-600 transition-colors",children:[p.jsx(ys,{className:"w-5 h-5"})," Edit Sheet"]})]}),p.jsx("div",{role:"tablist","aria-label":"Character View Sections",className:"flex space-x-1 mb-6 border-b border-zinc-700 overflow-x-auto",children:i5.map(c=>p.jsx(XI,{id:`play-tab-${c.key}`,controls:`play-panel-${c.key}`,label:c.label,isActive:l===c.key,onClick:()=>u(c.key)},c.key))}),p.jsxs("div",{className:"bg-zinc-900/50 p-4 sm:p-6 rounded-b-lg rounded-tr-lg",children:[p.jsx("div",{id:"play-panel-main",role:"tabpanel","aria-labelledby":"play-tab-main",hidden:l!=="main",children:p.jsx(JI,{character:i,onUpdate:h})}),p.jsx("div",{id:"play-panel-abilities",role:"tabpanel","aria-labelledby":"play-tab-abilities",hidden:l!=="abilities",children:p.jsx(YI,{character:i})}),p.jsx("div",{id:"play-panel-combat",role:"tabpanel","aria-labelledby":"play-tab-combat",hidden:l!=="combat",children:p.jsx(WI,{character:i})}),p.jsx("div",{id:"play-panel-spells",role:"tabpanel","aria-labelledby":"play-tab-spells",hidden:l!=="spells",children:p.jsx(e5,{character:i,onUpdate:h})}),p.jsx("div",{id:"play-panel-inventory",role:"tabpanel","aria-labelledby":"play-tab-inventory",hidden:l!=="inventory",children:p.jsx(t5,{character:i,onUpdate:h})}),p.jsx("div",{id:"play-panel-info",role:"tabpanel","aria-labelledby":"play-tab-info",hidden:l!=="info",children:p.jsx(n5,{character:i})})]})]})},s5=({hp:t,onHpChange:e})=>{const[n,i]=ne.useState(""),[r,s]=ne.useState(""),[a,l]=ne.useState(""),u=()=>{const d=parseInt(n,10);if(!isNaN(d)&&d>0){const f=Math.min(d,t.temporary),g=t.temporary-f,E=d-f,O=Math.max(0,t.current-E);e({...t,current:O,temporary:g}),i("")}},h=()=>{const d=parseInt(r,10);if(!isNaN(d)&&d>0){const f=Math.min(t.max,t.current+d);e({...t,current:f}),s("")}},c=()=>{const d=parseInt(a,10);!isNaN(d)&&d>=0&&(e({...t,temporary:d}),l(""))};return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3 text-center",children:"Hit Points"}),p.jsxs("div",{className:"text-center mb-4",children:[p.jsx("span",{className:"text-5xl font-bold text-red-400",children:t.current}),t.temporary>0&&p.jsxs("span",{className:"text-3xl font-bold text-sky-400",title:"Temporary HP",children:[" +",t.temporary]}),p.jsxs("span",{className:"text-2xl text-zinc-400",children:[" / ",t.max]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("input",{type:"number",value:n,onChange:d=>i(d.target.value),onKeyDown:d=>d.key==="Enter"&&u(),placeholder:"Damage",className:"bg-zinc-700 text-center rounded-md p-2 border border-zinc-600 focus:ring-red-500 focus:border-red-500"}),p.jsx("button",{onClick:u,className:"bg-red-800/80 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Apply"})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("input",{type:"number",value:r,onChange:d=>s(d.target.value),onKeyDown:d=>d.key==="Enter"&&h(),placeholder:"Healing",className:"bg-zinc-700 text-center rounded-md p-2 border border-zinc-600 focus:ring-green-500 focus:border-green-500"}),p.jsx("button",{onClick:h,className:"bg-green-800/80 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Apply"})]})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("input",{type:"number",value:a,onChange:d=>l(d.target.value),onKeyDown:d=>d.key==="Enter"&&c(),placeholder:"Set/Replace Temp HP",className:"bg-zinc-700 text-center rounded-md p-2 border border-zinc-600 focus:ring-sky-500 focus:border-sky-500"}),p.jsx("button",{onClick:c,className:"bg-sky-800/80 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Set Temp HP"})]})]})},Sv=({title:t,slots:e,onSlotChange:n,isCustom:i})=>{const r=(l,u)=>{if(i){const h=e,c=h.findIndex(E=>E.id===l);if(c===-1)return;const d=h[c],f=u<d.used?u:u+1,g=[...h];g[c]={...d,used:f},n(g)}else{const h=e,c=h[l],d=u<c.used?u:u+1;n({...h,[l]:{...c,used:d}})}},s=i?e:Object.entries(e),a=s.some(l=>i?l.max>0:l[1].max>0);return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:t}),!a&&p.jsx("p",{className:"text-zinc-500 text-sm text-center",children:"No resources available."}),p.jsx("div",{className:"space-y-3",children:s.map(l=>{const[u,h]=i?[l.id,l]:l,c=i?h.name:`Lvl ${u}`;return h.max===0?null:p.jsxs("div",{className:"flex items-center",children:[p.jsxs("span",{className:"font-bold text-zinc-400 w-24 truncate",title:c,children:[c,":"]}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:h.max}).map((d,f)=>p.jsx("button",{onClick:()=>r(u,f),className:`w-5 h-5 rounded-md border-2 transition-colors ${f<h.used?"bg-amber-500 border-amber-400":"bg-zinc-600 border-zinc-500 hover:border-amber-400"}`,"aria-label":`Slot ${f+1} for ${c}. ${f<h.used?"Used":"Available"}`},f))})]},u)})})]})},a5=({saves:t,onSaveChange:e})=>{const n=(i,r)=>{const s=t[i],a=r<s?r:r+1;e({...t,[i]:a})};return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Death Saves"}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"font-semibold text-zinc-300",children:"Successes"}),p.jsx("div",{className:"flex gap-2",children:Array.from({length:3}).map((i,r)=>p.jsx("input",{type:"checkbox",checked:r<t.successes,onChange:()=>n("successes",r),className:"w-5 h-5 rounded-full text-green-500 bg-zinc-600 border-zinc-500 focus:ring-green-500"},r))})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"font-semibold text-zinc-300",children:"Failures"}),p.jsx("div",{className:"flex gap-2",children:Array.from({length:3}).map((i,r)=>p.jsx("input",{type:"checkbox",checked:r<t.failures,onChange:()=>n("failures",r),className:"w-5 h-5 rounded-full text-red-500 bg-zinc-600 border-zinc-500 focus:ring-red-500"},r))})]})]})]})},l5=({items:t})=>{const[e,n]=ne.useState({}),i=a=>{if(!a||typeof a!="string")return{total:0,pretty:"Invalid input"};const l=a.replace(/[\s()]/g,"").split("+");let u=0;const h=[],c=/(\d+)d(\d+)/;for(const d of l){if(!d)continue;const f=d.match(c);if(f){const g=parseInt(f[1],10),E=parseInt(f[2],10);let O=0;const k=Array.from({length:g},()=>Math.floor(Math.random()*E)+1);O=k.reduce((b,S)=>b+S,0),u+=O,h.push(`[${k.join("+")}]`)}else{const g=parseInt(d,10);isNaN(g)||(u+=g,h.push(String(g)))}}return h.length===0?{total:0,pretty:"Invalid Format"}:{total:u,pretty:`${h.join(" + ")} = ${u}`}},r=a=>{const l=parseInt(a.bonus)||0,u=Math.floor(Math.random()*20)+1,h=u+l,c=`${u} ${l>=0?"+":"-"} ${Math.abs(l)} = ${h}`;n(d=>({...d,[a.id]:{...d[a.id],atk:c}}))},s=a=>{const{pretty:l}=i(a.damage);n(u=>({...u,[a.id]:{...u[a.id],dmg:l}}))};return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Attacks & Cantrips"}),p.jsxs("div",{className:"space-y-3 flex-grow overflow-y-auto pr-2 -mr-2 max-h-[calc(50vh-5rem)]",children:[t.length===0&&p.jsx("p",{className:"text-zinc-500 text-sm text-center py-4",children:"None."}),t.map(a=>{var l,u;return p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm p-3 space-y-2",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsx("span",{className:"font-semibold text-amber-300 text-base",children:a.name}),p.jsxs("div",{className:"flex gap-4 font-mono text-zinc-300 text-right",children:[p.jsx("span",{title:"Attack Bonus",children:a.bonus}),p.jsx("span",{title:"Damage",children:a.damage})]})]}),p.jsxs("div",{className:"flex justify-end items-center gap-2",children:[p.jsx("button",{onClick:()=>r(a),className:"text-xs bg-zinc-600 hover:bg-zinc-500 rounded px-3 py-1.5 transition-colors font-bold",children:"ATK"}),p.jsx("button",{onClick:()=>s(a),className:"text-xs bg-red-800/80 hover:bg-red-700 rounded px-3 py-1.5 transition-colors font-bold",children:"DMG"})]}),(((l=e[a.id])==null?void 0:l.atk)||((u=e[a.id])==null?void 0:u.dmg))&&p.jsxs("div",{className:"text-xs text-zinc-300 bg-zinc-900/50 p-2 rounded-md border-l-2 border-amber-500 space-y-1",children:[e[a.id].atk&&p.jsxs("div",{children:[p.jsx("strong",{children:"Attack:"})," ",p.jsx("span",{className:"font-mono text-amber-300",children:e[a.id].atk})]}),e[a.id].dmg&&p.jsxs("div",{children:[p.jsx("strong",{children:"Damage:"})," ",p.jsx("span",{className:"font-mono text-red-400",children:e[a.id].dmg})]})]})]},a.id)})]})]})},o5=({title:t,items:e})=>{const[n,i]=ne.useState({});return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:t}),p.jsxs("div",{className:"space-y-2 flex-grow overflow-y-auto pr-2 -mr-2 max-h-[calc(50vh-5rem)]",children:[e.length===0&&p.jsx("p",{className:"text-zinc-500 text-sm text-center py-4",children:"None."}),e.map(r=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:[p.jsx("div",{className:"flex items-center justify-between p-3 cursor-pointer w-full text-left",onClick:()=>r.description&&i(s=>({...s,[r.id]:!s[r.id]})),children:p.jsx("span",{className:"font-semibold text-amber-300",children:r.name})}),n[r.id]&&r.description&&p.jsx("div",{className:"p-3 border-t border-zinc-600/50 bg-zinc-900/30",children:p.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:r.description})})]},r.id))]})]})},u5=()=>{const[t,e]=ne.useState("list"),[n,i]=ne.useState(null),[r,s]=ne.useState(null),[a,l]=ne.useState(!1);ne.useEffect(()=>z3(k=>{s(k),k&&k3(),l(!0)}),[]);const u=O=>{i(O),e(O==="new"?"edit":"play")},h=()=>{n&&e("edit")},c=()=>{i(null),e("list")},d=()=>{n==="new"?c():e("play")},f=O=>{i(O),e("play")},g=async O=>{!O||O==="new"||O==="temp_new"||(await DE(O),c())};if(!a)return p.jsx("div",{className:"flex justify-center items-center h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})});const E=()=>{switch(t){case"edit":return p.jsx(HI,{characterId:n,onSaveComplete:f,onDelete:g,onBack:d});case"play":return p.jsx(r5,{characterId:n,onGoToEdit:h,onBack:c});case"list":default:return p.jsx(H3,{onSelectCharacter:u,currentUser:r})}};return p.jsx("main",{className:"min-h-screen",children:E()})},YE=document.getElementById("root");if(!YE)throw new Error("Could not find root element to mount to");const c5=mw.createRoot(YE);c5.render(p.jsx(V2.StrictMode,{children:p.jsx(u5,{})}));
