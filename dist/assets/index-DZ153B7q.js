function PE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function qg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var UE={exports:{}},Jf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VR=Symbol.for("react.transitional.element"),zR=Symbol.for("react.fragment");function LE(t,e,n){var r=null;if(n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:VR,type:t,key:r,ref:e!==void 0?e:null,props:n}}Jf.Fragment=zR;Jf.jsx=LE;Jf.jsxs=LE;UE.exports=Jf;var p=UE.exports,VE={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg=Symbol.for("react.transitional.element"),BR=Symbol.for("react.portal"),FR=Symbol.for("react.fragment"),HR=Symbol.for("react.strict_mode"),qR=Symbol.for("react.profiler"),GR=Symbol.for("react.consumer"),$R=Symbol.for("react.context"),YR=Symbol.for("react.forward_ref"),XR=Symbol.for("react.suspense"),QR=Symbol.for("react.memo"),zE=Symbol.for("react.lazy"),Vy=Symbol.iterator;function KR(t){return t===null||typeof t!="object"?null:(t=Vy&&t[Vy]||t["@@iterator"],typeof t=="function"?t:null)}var BE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},FE=Object.assign,HE={};function fl(t,e,n){this.props=t,this.context=e,this.refs=HE,this.updater=n||BE}fl.prototype.isReactComponent={};fl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qE(){}qE.prototype=fl.prototype;function $g(t,e,n){this.props=t,this.context=e,this.refs=HE,this.updater=n||BE}var Yg=$g.prototype=new qE;Yg.constructor=$g;FE(Yg,fl.prototype);Yg.isPureReactComponent=!0;var zy=Array.isArray,wt={H:null,A:null,T:null,S:null,V:null},GE=Object.prototype.hasOwnProperty;function Xg(t,e,n,r,i,a){return n=a.ref,{$$typeof:Gg,type:t,key:e,ref:n!==void 0?n:null,props:a}}function WR(t,e){return Xg(t.type,e,void 0,void 0,void 0,t.props)}function Qg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Gg}function ZR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var By=/\/+/g;function Wd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ZR(""+t.key):e.toString(36)}function Fy(){}function JR(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Fy,Fy):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function ao(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"bigint":case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Gg:case BR:s=!0;break;case zE:return s=t._init,ao(s(t._payload),e,n,r,i)}}if(s)return i=i(t),s=r===""?"."+Wd(t,0):r,zy(i)?(n="",s!=null&&(n=s.replace(By,"$&/")+"/"),ao(i,e,n,"",function(h){return h})):i!=null&&(Qg(i)&&(i=WR(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(By,"$&/")+"/")+s)),e.push(i)),1;s=0;var o=r===""?".":r+":";if(zy(t))for(var l=0;l<t.length;l++)r=t[l],a=o+Wd(r,l),s+=ao(r,e,n,a,i);else if(l=KR(t),typeof l=="function")for(t=l.call(t),l=0;!(r=t.next()).done;)r=r.value,a=o+Wd(r,l++),s+=ao(r,e,n,a,i);else if(a==="object"){if(typeof t.then=="function")return ao(JR(t),e,n,r,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return s}function Xu(t,e,n){if(t==null)return t;var r=[],i=0;return ao(t,r,"","",function(a){return e.call(n,a,i++)}),r}function eC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Hy=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function tC(){}we.Children={map:Xu,forEach:function(t,e,n){Xu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xu(t,function(){e++}),e},toArray:function(t){return Xu(t,function(e){return e})||[]},only:function(t){if(!Qg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=fl;we.Fragment=FR;we.Profiler=qR;we.PureComponent=$g;we.StrictMode=HR;we.Suspense=XR;we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=wt;we.__COMPILER_RUNTIME={__proto__:null,c:function(t){return wt.H.useMemoCache(t)}};we.cache=function(t){return function(){return t.apply(null,arguments)}};we.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var r=FE({},t.props),i=t.key,a=void 0;if(e!=null)for(s in e.ref!==void 0&&(a=void 0),e.key!==void 0&&(i=""+e.key),e)!GE.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(r[s]=e[s]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];r.children=o}return Xg(t.type,i,void 0,void 0,a,r)};we.createContext=function(t){return t={$$typeof:$R,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:GR,_context:t},t};we.createElement=function(t,e,n){var r,i={},a=null;if(e!=null)for(r in e.key!==void 0&&(a=""+e.key),e)GE.call(e,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];i.children=o}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return Xg(t,a,void 0,void 0,null,i)};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:YR,render:t}};we.isValidElement=Qg;we.lazy=function(t){return{$$typeof:zE,_payload:{_status:-1,_result:t},_init:eC}};we.memo=function(t,e){return{$$typeof:QR,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=wt.T,n={};wt.T=n;try{var r=t(),i=wt.S;i!==null&&i(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(tC,Hy)}catch(a){Hy(a)}finally{wt.T=e}};we.unstable_useCacheRefresh=function(){return wt.H.useCacheRefresh()};we.use=function(t){return wt.H.use(t)};we.useActionState=function(t,e,n){return wt.H.useActionState(t,e,n)};we.useCallback=function(t,e){return wt.H.useCallback(t,e)};we.useContext=function(t){return wt.H.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t,e){return wt.H.useDeferredValue(t,e)};we.useEffect=function(t,e,n){var r=wt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(t,e)};we.useId=function(){return wt.H.useId()};we.useImperativeHandle=function(t,e,n){return wt.H.useImperativeHandle(t,e,n)};we.useInsertionEffect=function(t,e){return wt.H.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return wt.H.useLayoutEffect(t,e)};we.useMemo=function(t,e){return wt.H.useMemo(t,e)};we.useOptimistic=function(t,e){return wt.H.useOptimistic(t,e)};we.useReducer=function(t,e,n){return wt.H.useReducer(t,e,n)};we.useRef=function(t){return wt.H.useRef(t)};we.useState=function(t){return wt.H.useState(t)};we.useSyncExternalStore=function(t,e,n){return wt.H.useSyncExternalStore(t,e,n)};we.useTransition=function(){return wt.H.useTransition()};we.version="19.1.0";VE.exports=we;var $=VE.exports;const mo=qg($),nC=PE({__proto__:null,default:mo},[$]);var $E={exports:{}},ed={},YE={exports:{}},XE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,k){var H=M.length;M.push(k);e:for(;0<H;){var B=H-1>>>1,P=M[B];if(0<i(P,k))M[B]=k,M[H]=P,H=B;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var k=M[0],H=M.pop();if(H!==k){M[0]=H;e:for(var B=0,P=M.length,K=P>>>1;B<K;){var G=2*(B+1)-1,J=M[G],W=G+1,Y=M[W];if(0>i(J,H))W<P&&0>i(Y,J)?(M[B]=Y,M[W]=H,B=W):(M[B]=J,M[G]=H,B=G);else if(W<P&&0>i(Y,H))M[B]=Y,M[W]=H,B=W;else break e}}return k}function i(M,k){var H=M.sortIndex-k.sortIndex;return H!==0?H:M.id-k.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],h=[],u=1,f=null,d=3,m=!1,b=!1,A=!1,D=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function O(M){for(var k=n(h);k!==null;){if(k.callback===null)r(h);else if(k.startTime<=M)r(h),k.sortIndex=k.expirationTime,e(l,k);else break;k=n(h)}}function U(M){if(A=!1,O(M),!b)if(n(l)!==null)b=!0,N||(N=!0,I());else{var k=n(h);k!==null&&z(U,k.startTime-M)}}var N=!1,_=-1,g=5,y=-1;function T(){return D?!0:!(t.unstable_now()-y<g)}function R(){if(D=!1,N){var M=t.unstable_now();y=M;var k=!0;try{e:{b=!1,A&&(A=!1,x(_),_=-1),m=!0;var H=d;try{t:{for(O(M),f=n(l);f!==null&&!(f.expirationTime>M&&T());){var B=f.callback;if(typeof B=="function"){f.callback=null,d=f.priorityLevel;var P=B(f.expirationTime<=M);if(M=t.unstable_now(),typeof P=="function"){f.callback=P,O(M),k=!0;break t}f===n(l)&&r(l),O(M)}else r(l);f=n(l)}if(f!==null)k=!0;else{var K=n(h);K!==null&&z(U,K.startTime-M),k=!1}}break e}finally{f=null,d=H,m=!1}k=void 0}}finally{k?I():N=!1}}}var I;if(typeof C=="function")I=function(){C(R)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,L=S.port2;S.port1.onmessage=R,I=function(){L.postMessage(null)}}else I=function(){w(R,0)};function z(M,k){_=w(function(){M(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_next=function(M){switch(d){case 1:case 2:case 3:var k=3;break;default:k=d}var H=d;d=k;try{return M()}finally{d=H}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(M,k){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var H=d;d=M;try{return k()}finally{d=H}},t.unstable_scheduleCallback=function(M,k,H){var B=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?B+H:B):H=B,M){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=H+P,M={id:u++,callback:k,priorityLevel:M,startTime:H,expirationTime:P,sortIndex:-1},H>B?(M.sortIndex=H,e(h,M),n(l)===null&&M===n(h)&&(A?(x(_),_=-1):A=!0,z(U,H-B))):(M.sortIndex=P,e(l,M),b||m||(b=!0,N||(N=!0,I()))),M},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(M){var k=d;return function(){var H=d;d=k;try{return M.apply(this,arguments)}finally{d=H}}}})(XE);YE.exports=XE;var rC=YE.exports,QE={exports:{}},Un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iC=$;function KE(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function na(){}var Pn={d:{f:na,r:function(){throw Error(KE(522))},D:na,C:na,L:na,m:na,X:na,S:na,M:na},p:0,findDOMNode:null},aC=Symbol.for("react.portal");function sC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:aC,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}var sc=iC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function td(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Pn;Un.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(KE(299));return sC(t,e,null,n)};Un.flushSync=function(t){var e=sc.T,n=Pn.p;try{if(sc.T=null,Pn.p=2,t)return t()}finally{sc.T=e,Pn.p=n,Pn.d.f()}};Un.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Pn.d.C(t,e))};Un.prefetchDNS=function(t){typeof t=="string"&&Pn.d.D(t)};Un.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,r=td(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,a=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Pn.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:a}):n==="script"&&Pn.d.X(t,{crossOrigin:r,integrity:i,fetchPriority:a,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Un.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=td(e.as,e.crossOrigin);Pn.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Pn.d.M(t)};Un.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,r=td(n,e.crossOrigin);Pn.d.L(t,n,{crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Un.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=td(e.as,e.crossOrigin);Pn.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Pn.d.m(t)};Un.requestFormReset=function(t){Pn.d.r(t)};Un.unstable_batchedUpdates=function(t,e){return t(e)};Un.useFormState=function(t,e,n){return sc.H.useFormState(t,e,n)};Un.useFormStatus=function(){return sc.H.useHostTransitionStatus()};Un.version="19.1.0";function WE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WE)}catch(t){console.error(t)}}WE(),QE.exports=Un;var Kg=QE.exports;const oC=qg(Kg),lC=PE({__proto__:null,default:oC},[Kg]);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jt=rC,ZE=$,cC=Kg;function te(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function JE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ew(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qy(t){if(nu(t)!==t)throw Error(te(188))}function uC(t){var e=t.alternate;if(!e){if(e=nu(t),e===null)throw Error(te(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qy(i),t;if(a===r)return qy(i),e;a=a.sibling}throw Error(te(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(te(189))}}if(n.alternate!==r)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?t:e}function tw(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=tw(t),e!==null)return e;t=t.sibling}return null}var pt=Object.assign,hC=Symbol.for("react.element"),Qu=Symbol.for("react.transitional.element"),Wl=Symbol.for("react.portal"),po=Symbol.for("react.fragment"),nw=Symbol.for("react.strict_mode"),rp=Symbol.for("react.profiler"),fC=Symbol.for("react.provider"),rw=Symbol.for("react.consumer"),Ri=Symbol.for("react.context"),Wg=Symbol.for("react.forward_ref"),ip=Symbol.for("react.suspense"),ap=Symbol.for("react.suspense_list"),Zg=Symbol.for("react.memo"),la=Symbol.for("react.lazy"),sp=Symbol.for("react.activity"),dC=Symbol.for("react.memo_cache_sentinel"),Gy=Symbol.iterator;function jl(t){return t===null||typeof t!="object"?null:(t=Gy&&t[Gy]||t["@@iterator"],typeof t=="function"?t:null)}var mC=Symbol.for("react.client.reference");function op(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===mC?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case po:return"Fragment";case rp:return"Profiler";case nw:return"StrictMode";case ip:return"Suspense";case ap:return"SuspenseList";case sp:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Wl:return"Portal";case Ri:return(t.displayName||"Context")+".Provider";case rw:return(t._context.displayName||"Context")+".Consumer";case Wg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zg:return e=t.displayName||null,e!==null?e:op(t.type)||"Memo";case la:e=t._payload,t=t._init;try{return op(t(e))}catch{}}return null}var Zl=Array.isArray,ge=ZE.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,He=cC.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vs={pending:!1,data:null,method:null,action:null},lp=[],go=-1;function pi(t){return{current:t}}function cn(t){0>go||(t.current=lp[go],lp[go]=null,go--)}function Tt(t,e){go++,lp[go]=t.current,t.current=e}var ri=pi(null),Nc=pi(null),Sa=pi(null),Gh=pi(null);function $h(t,e){switch(Tt(Sa,e),Tt(Nc,t),Tt(ri,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?K_(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=K_(e),t=bx(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}cn(ri),Tt(ri,t)}function $o(){cn(ri),cn(Nc),cn(Sa)}function cp(t){t.memoizedState!==null&&Tt(Gh,t);var e=ri.current,n=bx(e,t.type);e!==n&&(Tt(Nc,t),Tt(ri,n))}function Yh(t){Nc.current===t&&(cn(ri),cn(Nc)),Gh.current===t&&(cn(Gh),Vc._currentValue=vs)}var up=Object.prototype.hasOwnProperty,Jg=Jt.unstable_scheduleCallback,Zd=Jt.unstable_cancelCallback,pC=Jt.unstable_shouldYield,gC=Jt.unstable_requestPaint,ii=Jt.unstable_now,vC=Jt.unstable_getCurrentPriorityLevel,iw=Jt.unstable_ImmediatePriority,aw=Jt.unstable_UserBlockingPriority,Xh=Jt.unstable_NormalPriority,yC=Jt.unstable_LowPriority,sw=Jt.unstable_IdlePriority,_C=Jt.log,bC=Jt.unstable_setDisableYieldValue,ru=null,cr=null;function ya(t){if(typeof _C=="function"&&bC(t),cr&&typeof cr.setStrictMode=="function")try{cr.setStrictMode(ru,t)}catch{}}var ur=Math.clz32?Math.clz32:TC,EC=Math.log,wC=Math.LN2;function TC(t){return t>>>=0,t===0?32:31-(EC(t)/wC|0)|0}var Ku=256,Wu=4194304;function ss(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function nd(t,e,n){var r=t.pendingLanes;if(r===0)return 0;var i=0,a=t.suspendedLanes,s=t.pingedLanes;t=t.warmLanes;var o=r&134217727;return o!==0?(r=o&~a,r!==0?i=ss(r):(s&=o,s!==0?i=ss(s):n||(n=o&~t,n!==0&&(i=ss(n))))):(o=r&~a,o!==0?i=ss(o):s!==0?i=ss(s):n||(n=r&~t,n!==0&&(i=ss(n)))),i===0?0:e!==0&&e!==i&&!(e&a)&&(a=i&-i,n=e&-e,a>=n||a===32&&(n&4194048)!==0)?e:i}function iu(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function xC(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ow(){var t=Ku;return Ku<<=1,!(Ku&4194048)&&(Ku=256),t}function lw(){var t=Wu;return Wu<<=1,!(Wu&62914560)&&(Wu=4194304),t}function Jd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function au(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function AC(t,e,n,r,i,a){var s=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,h=t.hiddenUpdates;for(n=s&~n;0<n;){var u=31-ur(n),f=1<<u;o[u]=0,l[u]=-1;var d=h[u];if(d!==null)for(h[u]=null,u=0;u<d.length;u++){var m=d[u];m!==null&&(m.lane&=-536870913)}n&=~f}r!==0&&cw(t,r,0),a!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=a&~(s&~e))}function cw(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var r=31-ur(e);t.entangledLanes|=e,t.entanglements[r]=t.entanglements[r]|1073741824|n&4194090}function uw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ur(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}function e0(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function t0(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function hw(){var t=He.p;return t!==0?t:(t=window.event,t===void 0?32:Ix(t.type))}function SC(t,e){var n=He.p;try{return He.p=t,e()}finally{He.p=n}}var Ka=Math.random().toString(36).slice(2),Nn="__reactFiber$"+Ka,Wn="__reactProps$"+Ka,dl="__reactContainer$"+Ka,hp="__reactEvents$"+Ka,RC="__reactListeners$"+Ka,CC="__reactHandles$"+Ka,$y="__reactResources$"+Ka,su="__reactMarker$"+Ka;function n0(t){delete t[Nn],delete t[Wn],delete t[hp],delete t[RC],delete t[CC]}function vo(t){var e=t[Nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dl]||n[Nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=J_(t);t!==null;){if(n=t[Nn])return n;t=J_(t)}return e}t=n,n=t.parentNode}return null}function ml(t){if(t=t[Nn]||t[dl]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function Jl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(te(33))}function Do(t){var e=t[$y];return e||(e=t[$y]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function on(t){t[su]=!0}var fw=new Set,dw={};function Vs(t,e){Yo(t,e),Yo(t+"Capture",e)}function Yo(t,e){for(dw[t]=e,t=0;t<e.length;t++)fw.add(e[t])}var NC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yy={},Xy={};function IC(t){return up.call(Xy,t)?!0:up.call(Yy,t)?!1:NC.test(t)?Xy[t]=!0:(Yy[t]=!0,!1)}function bh(t,e,n){if(IC(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var r=e.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Zu(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function wi(t,e,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+r)}}var em,Qy;function so(t){if(em===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);em=e&&e[1]||"",Qy=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+em+t+Qy}var tm=!1;function nm(t,e){if(!t||tm)return"";tm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(e){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(m){var d=m}Reflect.construct(t,[],f)}else{try{f.call()}catch(m){d=m}t.call(f.prototype)}}else{try{throw Error()}catch(m){d=m}(f=t())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(m){if(m&&d&&typeof m.stack=="string")return[m.stack,d.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var l=s.split(`
`),h=o.split(`
`);for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<h.length&&!h[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===h.length)for(r=l.length-1,i=h.length-1;1<=r&&0<=i&&l[r]!==h[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==h[i]){if(r!==1||i!==1)do if(r--,i--,0>i||l[r]!==h[i]){var u=`
`+l[r].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=r&&0<=i);break}}}finally{tm=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?so(n):""}function DC(t){switch(t.tag){case 26:case 27:case 5:return so(t.type);case 16:return so("Lazy");case 13:return so("Suspense");case 19:return so("SuspenseList");case 0:case 15:return nm(t.type,!1);case 11:return nm(t.type.render,!1);case 1:return nm(t.type,!0);case 31:return so("Activity");default:return""}}function Ky(t){try{var e="";do e+=DC(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function yr(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function OC(t){var e=mw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qh(t){t._valueTracker||(t._valueTracker=OC(t))}function pw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=mw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Kh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var MC=/[\n"\\]/g;function Er(t){return t.replace(MC,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function fp(t,e,n,r,i,a,s,o){t.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?t.type=s:t.removeAttribute("type"),e!=null?s==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+yr(e)):t.value!==""+yr(e)&&(t.value=""+yr(e)):s!=="submit"&&s!=="reset"||t.removeAttribute("value"),e!=null?dp(t,s,yr(e)):n!=null?dp(t,s,yr(n)):r!=null&&t.removeAttribute("value"),i==null&&a!=null&&(t.defaultChecked=!!a),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+yr(o):t.removeAttribute("name")}function gw(t,e,n,r,i,a,s,o){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.type=a),e!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||e!=null))return;n=n!=null?""+yr(n):"",e=e!=null?""+yr(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}r=r??i,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=o?t.checked:!!r,t.defaultChecked=!!r,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.name=s)}function dp(t,e,n){e==="number"&&Kh(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Oo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function vw(t,e,n){if(e!=null&&(e=""+yr(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+yr(n):""}function yw(t,e,n,r){if(e==null){if(r!=null){if(n!=null)throw Error(te(92));if(Zl(r)){if(1<r.length)throw Error(te(93));r=r[0]}n=r}n==null&&(n=""),e=n}n=yr(e),t.defaultValue=n,r=t.textContent,r===n&&r!==""&&r!==null&&(t.value=r)}function Xo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var kC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wy(t,e,n){var r=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":r?t.setProperty(e,n):typeof n!="number"||n===0||kC.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function _w(t,e,n){if(e!=null&&typeof e!="object")throw Error(te(62));if(t=t.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||e!=null&&e.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var i in e)r=e[i],e.hasOwnProperty(i)&&n[i]!==r&&Wy(t,i,r)}else for(var a in e)e.hasOwnProperty(a)&&Wy(t,a,e[a])}function r0(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),PC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Eh(t){return PC.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var mp=null;function i0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yo=null,Mo=null;function Zy(t){var e=ml(t);if(e&&(t=e.stateNode)){var n=t[Wn]||null;e:switch(t=e.stateNode,e.type){case"input":if(fp(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Er(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=r[Wn]||null;if(!i)throw Error(te(90));fp(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)r=n[e],r.form===t.form&&pw(r)}break e;case"textarea":vw(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Oo(t,!!n.multiple,e,!1)}}}var rm=!1;function bw(t,e,n){if(rm)return t(e,n);rm=!0;try{var r=t(e);return r}finally{if(rm=!1,(yo!==null||Mo!==null)&&(fd(),yo&&(e=yo,t=Mo,Mo=yo=null,Zy(e),t)))for(e=0;e<t.length;e++)Zy(t[e])}}function Ic(t,e){var n=t.stateNode;if(n===null)return null;var r=n[Wn]||null;if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(te(231,e,typeof n));return n}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pp=!1;if(Li)try{var Pl={};Object.defineProperty(Pl,"passive",{get:function(){pp=!0}}),window.addEventListener("test",Pl,Pl),window.removeEventListener("test",Pl,Pl)}catch{pp=!1}var _a=null,a0=null,wh=null;function Ew(){if(wh)return wh;var t,e=a0,n=e.length,r,i="value"in _a?_a.value:_a.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[a-r];r++);return wh=i.slice(t,1<r?1-r:void 0)}function Th(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ju(){return!0}function Jy(){return!1}function Zn(t){function e(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ju:Jy,this.isPropagationStopped=Jy,this}return pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ju)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ju)},persist:function(){},isPersistent:Ju}),e}var zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rd=Zn(zs),ou=pt({},zs,{view:0,detail:0}),UC=Zn(ou),im,am,Ul,id=pt({},ou,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:s0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ul&&(Ul&&t.type==="mousemove"?(im=t.screenX-Ul.screenX,am=t.screenY-Ul.screenY):am=im=0,Ul=t),im)},movementY:function(t){return"movementY"in t?t.movementY:am}}),e_=Zn(id),LC=pt({},id,{dataTransfer:0}),VC=Zn(LC),zC=pt({},ou,{relatedTarget:0}),sm=Zn(zC),BC=pt({},zs,{animationName:0,elapsedTime:0,pseudoElement:0}),FC=Zn(BC),HC=pt({},zs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qC=Zn(HC),GC=pt({},zs,{data:0}),t_=Zn(GC),$C={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=XC[t])?!!e[t]:!1}function s0(){return QC}var KC=pt({},ou,{key:function(t){if(t.key){var e=$C[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Th(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?YC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:s0,charCode:function(t){return t.type==="keypress"?Th(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Th(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WC=Zn(KC),ZC=pt({},id,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),n_=Zn(ZC),JC=pt({},ou,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:s0}),eN=Zn(JC),tN=pt({},zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),nN=Zn(tN),rN=pt({},id,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iN=Zn(rN),aN=pt({},zs,{newState:0,oldState:0}),sN=Zn(aN),oN=[9,13,27,32],o0=Li&&"CompositionEvent"in window,oc=null;Li&&"documentMode"in document&&(oc=document.documentMode);var lN=Li&&"TextEvent"in window&&!oc,ww=Li&&(!o0||oc&&8<oc&&11>=oc),r_=" ",i_=!1;function Tw(t,e){switch(t){case"keyup":return oN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _o=!1;function cN(t,e){switch(t){case"compositionend":return xw(e);case"keypress":return e.which!==32?null:(i_=!0,r_);case"textInput":return t=e.data,t===r_&&i_?null:t;default:return null}}function uN(t,e){if(_o)return t==="compositionend"||!o0&&Tw(t,e)?(t=Ew(),wh=a0=_a=null,_o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ww&&e.locale!=="ko"?null:e.data;default:return null}}var hN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hN[t.type]:e==="textarea"}function Aw(t,e,n,r){yo?Mo?Mo.push(r):Mo=[r]:yo=r,e=pf(e,"onChange"),0<e.length&&(n=new rd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var lc=null,Dc=null;function fN(t){vx(t,0)}function ad(t){var e=Jl(t);if(pw(e))return t}function s_(t,e){if(t==="change")return e}var Sw=!1;if(Li){var om;if(Li){var lm="oninput"in document;if(!lm){var o_=document.createElement("div");o_.setAttribute("oninput","return;"),lm=typeof o_.oninput=="function"}om=lm}else om=!1;Sw=om&&(!document.documentMode||9<document.documentMode)}function l_(){lc&&(lc.detachEvent("onpropertychange",Rw),Dc=lc=null)}function Rw(t){if(t.propertyName==="value"&&ad(Dc)){var e=[];Aw(e,Dc,t,i0(t)),bw(fN,e)}}function dN(t,e,n){t==="focusin"?(l_(),lc=e,Dc=n,lc.attachEvent("onpropertychange",Rw)):t==="focusout"&&l_()}function mN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ad(Dc)}function pN(t,e){if(t==="click")return ad(e)}function gN(t,e){if(t==="input"||t==="change")return ad(e)}function vN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mr=typeof Object.is=="function"?Object.is:vN;function Oc(t,e){if(mr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!up.call(e,i)||!mr(t[i],e[i]))return!1}return!0}function c_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function u_(t,e){var n=c_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=c_(n)}}function Cw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Cw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Nw(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Kh(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Kh(t.document)}return e}function l0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var yN=Li&&"documentMode"in document&&11>=document.documentMode,bo=null,gp=null,cc=null,vp=!1;function h_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vp||bo==null||bo!==Kh(r)||(r=bo,"selectionStart"in r&&l0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cc&&Oc(cc,r)||(cc=r,r=pf(gp,"onSelect"),0<r.length&&(e=new rd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=bo)))}function rs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Eo={animationend:rs("Animation","AnimationEnd"),animationiteration:rs("Animation","AnimationIteration"),animationstart:rs("Animation","AnimationStart"),transitionrun:rs("Transition","TransitionRun"),transitionstart:rs("Transition","TransitionStart"),transitioncancel:rs("Transition","TransitionCancel"),transitionend:rs("Transition","TransitionEnd")},cm={},Iw={};Li&&(Iw=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function Bs(t){if(cm[t])return cm[t];if(!Eo[t])return t;var e=Eo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Iw)return cm[t]=e[n];return t}var Dw=Bs("animationend"),Ow=Bs("animationiteration"),Mw=Bs("animationstart"),_N=Bs("transitionrun"),bN=Bs("transitionstart"),EN=Bs("transitioncancel"),kw=Bs("transitionend"),jw=new Map,yp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yp.push("scrollEnd");function qr(t,e){jw.set(t,e),Vs(e,[t])}var f_=new WeakMap;function wr(t,e){if(typeof t=="object"&&t!==null){var n=f_.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Ky(e)},f_.set(t,e),e)}return{value:t,source:e,stack:Ky(e)}}var vr=[],wo=0,c0=0;function sd(){for(var t=wo,e=c0=wo=0;e<t;){var n=vr[e];vr[e++]=null;var r=vr[e];vr[e++]=null;var i=vr[e];vr[e++]=null;var a=vr[e];if(vr[e++]=null,r!==null&&i!==null){var s=r.pending;s===null?i.next=i:(i.next=s.next,s.next=i),r.pending=i}a!==0&&Pw(n,i,a)}}function od(t,e,n,r){vr[wo++]=t,vr[wo++]=e,vr[wo++]=n,vr[wo++]=r,c0|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function u0(t,e,n,r){return od(t,e,n,r),Wh(t)}function pl(t,e){return od(t,null,null,e),Wh(t)}function Pw(t,e,n){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=t.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(t=a.stateNode,t===null||t._visibility&1||(i=!0)),t=a,a=a.return;return t.tag===3?(a=t.stateNode,i&&e!==null&&(i=31-ur(n),t=a.hiddenUpdates,r=t[i],r===null?t[i]=[e]:r.push(e),e.lane=n|536870912),a):null}function Wh(t){if(50<_c)throw _c=0,Vp=null,Error(te(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var To={};function wN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(t,e,n,r){return new wN(t,e,n,r)}function h0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ki(t,e){var n=t.alternate;return n===null?(n=ar(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Uw(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function xh(t,e,n,r,i,a){var s=0;if(r=t,typeof t=="function")h0(t)&&(s=1);else if(typeof t=="string")s=xI(t,n,ri.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case sp:return t=ar(31,n,e,i),t.elementType=sp,t.lanes=a,t;case po:return ys(n.children,i,a,e);case nw:s=8,i|=24;break;case rp:return t=ar(12,n,e,i|2),t.elementType=rp,t.lanes=a,t;case ip:return t=ar(13,n,e,i),t.elementType=ip,t.lanes=a,t;case ap:return t=ar(19,n,e,i),t.elementType=ap,t.lanes=a,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fC:case Ri:s=10;break e;case rw:s=9;break e;case Wg:s=11;break e;case Zg:s=14;break e;case la:s=16,r=null;break e}s=29,n=Error(te(130,t===null?"null":typeof t,"")),r=null}return e=ar(s,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function ys(t,e,n,r){return t=ar(7,t,r,e),t.lanes=n,t}function um(t,e,n){return t=ar(6,t,null,e),t.lanes=n,t}function hm(t,e,n){return e=ar(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var xo=[],Ao=0,Zh=null,Jh=0,_r=[],br=0,_s=null,Ci=1,Ni="";function os(t,e){xo[Ao++]=Jh,xo[Ao++]=Zh,Zh=t,Jh=e}function Lw(t,e,n){_r[br++]=Ci,_r[br++]=Ni,_r[br++]=_s,_s=t;var r=Ci;t=Ni;var i=32-ur(r)-1;r&=~(1<<i),n+=1;var a=32-ur(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ci=1<<32-ur(e)+i|n<<i|r,Ni=a+t}else Ci=1<<a|n<<i|r,Ni=t}function f0(t){t.return!==null&&(os(t,1),Lw(t,1,0))}function d0(t){for(;t===Zh;)Zh=xo[--Ao],xo[Ao]=null,Jh=xo[--Ao],xo[Ao]=null;for(;t===_s;)_s=_r[--br],_r[br]=null,Ni=_r[--br],_r[br]=null,Ci=_r[--br],_r[br]=null}var jn=null,Nt=null,Fe=!1,bs=null,ei=!1,_p=Error(te(519));function Cs(t){var e=Error(te(418,""));throw Mc(wr(e,t)),_p}function d_(t){var e=t.stateNode,n=t.type,r=t.memoizedProps;switch(e[Nn]=t,e[Wn]=r,n){case"dialog":Ce("cancel",e),Ce("close",e);break;case"iframe":case"object":case"embed":Ce("load",e);break;case"video":case"audio":for(n=0;n<Pc.length;n++)Ce(Pc[n],e);break;case"source":Ce("error",e);break;case"img":case"image":case"link":Ce("error",e),Ce("load",e);break;case"details":Ce("toggle",e);break;case"input":Ce("invalid",e),gw(e,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),Qh(e);break;case"select":Ce("invalid",e);break;case"textarea":Ce("invalid",e),yw(e,r.value,r.defaultValue,r.children),Qh(e)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||r.suppressHydrationWarning===!0||_x(e.textContent,n)?(r.popover!=null&&(Ce("beforetoggle",e),Ce("toggle",e)),r.onScroll!=null&&Ce("scroll",e),r.onScrollEnd!=null&&Ce("scrollend",e),r.onClick!=null&&(e.onclick=pd),e=!0):e=!1,e||Cs(t)}function m_(t){for(jn=t.return;jn;)switch(jn.tag){case 5:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:jn=jn.return}}function Ll(t){if(t!==jn)return!1;if(!Fe)return m_(t),Fe=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Gp(t.type,t.memoizedProps)),n=!n),n&&Nt&&Cs(t),m_(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){Nt=Br(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}Nt=null}}else e===27?(e=Nt,Wa(t.type)?(t=Xp,Xp=null,Nt=t):Nt=e):Nt=jn?Br(t.stateNode.nextSibling):null;return!0}function lu(){Nt=jn=null,Fe=!1}function p_(){var t=bs;return t!==null&&(Gn===null?Gn=t:Gn.push.apply(Gn,t),bs=null),t}function Mc(t){bs===null?bs=[t]:bs.push(t)}var bp=pi(null),Fs=null,Ii=null;function ua(t,e,n){Tt(bp,e._currentValue),e._currentValue=n}function ji(t){t._currentValue=bp.current,cn(bp)}function Ep(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wp(t,e,n,r){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){var s=i.child;a=a.firstContext;e:for(;a!==null;){var o=a;a=i;for(var l=0;l<e.length;l++)if(o.context===e[l]){a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Ep(a.return,n,t),r||(s=null);break e}a=o.next}}else if(i.tag===18){if(s=i.return,s===null)throw Error(te(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ep(s,n,t),s=null}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}}function cu(t,e,n,r){t=null;for(var i=e,a=!1;i!==null;){if(!a){if(i.flags&524288)a=!0;else if(i.flags&262144)break}if(i.tag===10){var s=i.alternate;if(s===null)throw Error(te(387));if(s=s.memoizedProps,s!==null){var o=i.type;mr(i.pendingProps.value,s.value)||(t!==null?t.push(o):t=[o])}}else if(i===Gh.current){if(s=i.alternate,s===null)throw Error(te(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(Vc):t=[Vc])}i=i.return}t!==null&&wp(e,t,n,r),e.flags|=262144}function ef(t){for(t=t.firstContext;t!==null;){if(!mr(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ns(t){Fs=t,Ii=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function In(t){return Vw(Fs,t)}function eh(t,e){return Fs===null&&Ns(t),Vw(t,e)}function Vw(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Ii===null){if(t===null)throw Error(te(308));Ii=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Ii=Ii.next=e;return n}var TN=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,r){t.push(r)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},xN=Jt.unstable_scheduleCallback,AN=Jt.unstable_NormalPriority,Kt={$$typeof:Ri,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function m0(){return{controller:new TN,data:new Map,refCount:0}}function uu(t){t.refCount--,t.refCount===0&&xN(AN,function(){t.controller.abort()})}var uc=null,Tp=0,Qo=0,ko=null;function SN(t,e){if(uc===null){var n=uc=[];Tp=0,Qo=U0(),ko={status:"pending",value:void 0,then:function(r){n.push(r)}}}return Tp++,e.then(g_,g_),e}function g_(){if(--Tp===0&&uc!==null){ko!==null&&(ko.status="fulfilled");var t=uc;uc=null,Qo=0,ko=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function RN(t,e){var n=[],r={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){r.status="fulfilled",r.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(r.status="rejected",r.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),r}var v_=ge.S;ge.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&SN(t,e),v_!==null&&v_(t,e)};var Es=pi(null);function p0(){var t=Es.current;return t!==null?t:ct.pooledCache}function Ah(t,e){e===null?Tt(Es,Es.current):Tt(Es,e.pool)}function zw(){var t=p0();return t===null?null:{parent:Kt._currentValue,pool:t}}var hu=Error(te(460)),Bw=Error(te(474)),ld=Error(te(542)),xp={then:function(){}};function y_(t){return t=t.status,t==="fulfilled"||t==="rejected"}function th(){}function Fw(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(th,th),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,b_(t),t;default:if(typeof e.status=="string")e.then(th,th);else{if(t=ct,t!==null&&100<t.shellSuspendCounter)throw Error(te(482));t=e,t.status="pending",t.then(function(r){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=r}},function(r){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=r}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,b_(t),t}throw hc=e,hu}}var hc=null;function __(){if(hc===null)throw Error(te(459));var t=hc;return hc=null,t}function b_(t){if(t===hu||t===ld)throw Error(te(483))}var ca=!1;function g0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ap(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ra(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ca(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,e=Wh(t),Pw(t,null,n),e}return od(t,r,e,n),Wh(t)}function fc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uw(t,n)}}function fm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Sp=!1;function dc(){if(Sp){var t=ko;if(t!==null)throw t}}function mc(t,e,n,r){Sp=!1;var i=t.updateQueue;ca=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,h=l.next;l.next=null,s===null?a=h:s.next=h,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==s&&(o===null?u.firstBaseUpdate=h:o.next=h,u.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;s=0,u=h=l=null,o=a;do{var d=o.lane&-536870913,m=d!==o.lane;if(m?(Ve&d)===d:(r&d)===d){d!==0&&d===Qo&&(Sp=!0),u!==null&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var b=t,A=o;d=e;var D=n;switch(A.tag){case 1:if(b=A.payload,typeof b=="function"){f=b.call(D,f,d);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=A.payload,d=typeof b=="function"?b.call(D,f,d):b,d==null)break e;f=pt({},f,d);break e;case 2:ca=!0}}d=o.callback,d!==null&&(t.flags|=64,m&&(t.flags|=8192),m=i.callbacks,m===null?i.callbacks=[d]:m.push(d))}else m={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(h=u=m,l=f):u=u.next=m,s|=d;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=h,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),za|=s,t.lanes=s,t.memoizedState=f}}function Hw(t,e){if(typeof t!="function")throw Error(te(191,t));t.call(e)}function qw(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Hw(n[t],e)}var Ko=pi(null),tf=pi(0);function E_(t,e){t=Bi,Tt(tf,t),Tt(Ko,e),Bi=t|e.baseLanes}function Rp(){Tt(tf,Bi),Tt(Ko,Ko.current)}function v0(){Bi=tf.current,cn(Ko),cn(tf)}var La=0,Se=null,nt=null,Gt=null,nf=!1,jo=!1,Is=!1,rf=0,kc=0,Po=null,CN=0;function Pt(){throw Error(te(321))}function y0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mr(t[n],e[n]))return!1;return!0}function _0(t,e,n,r,i,a){return La=a,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ge.H=t===null||t.memoizedState===null?ET:wT,Is=!1,a=n(r,i),Is=!1,jo&&(a=$w(e,n,r,i)),Gw(t),a}function Gw(t){ge.H=af;var e=nt!==null&&nt.next!==null;if(La=0,Gt=nt=Se=null,nf=!1,kc=0,Po=null,e)throw Error(te(300));t===null||ln||(t=t.dependencies,t!==null&&ef(t)&&(ln=!0))}function $w(t,e,n,r){Se=t;var i=0;do{if(jo&&(Po=null),kc=0,jo=!1,25<=i)throw Error(te(301));if(i+=1,Gt=nt=null,t.updateQueue!=null){var a=t.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}ge.H=jN,a=e(n,r)}while(jo);return a}function NN(){var t=ge.H,e=t.useState()[0];return e=typeof e.then=="function"?fu(e):e,t=t.useState()[0],(nt!==null?nt.memoizedState:null)!==t&&(Se.flags|=1024),e}function b0(){var t=rf!==0;return rf=0,t}function E0(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function w0(t){if(nf){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}nf=!1}La=0,Gt=nt=Se=null,jo=!1,kc=rf=0,Po=null}function Bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Se.memoizedState=Gt=t:Gt=Gt.next=t,Gt}function Qt(){if(nt===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var e=Gt===null?Se.memoizedState:Gt.next;if(e!==null)Gt=e,nt=t;else{if(t===null)throw Se.alternate===null?Error(te(467)):Error(te(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Gt===null?Se.memoizedState=Gt=t:Gt=Gt.next=t}return Gt}function T0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fu(t){var e=kc;return kc+=1,Po===null&&(Po=[]),t=Fw(Po,t,e),e=Se,(Gt===null?e.memoizedState:Gt.next)===null&&(e=e.alternate,ge.H=e===null||e.memoizedState===null?ET:wT),t}function cd(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return fu(t);if(t.$$typeof===Ri)return In(t)}throw Error(te(438,String(t)))}function x0(t){var e=null,n=Se.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var r=Se.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(e={data:r.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=T0(),Se.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),r=0;r<t;r++)n[r]=dC;return e.index++,n}function Vi(t,e){return typeof e=="function"?e(t):e}function Sh(t){var e=Qt();return A0(e,nt,t)}function A0(t,e,n){var r=t.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=n;var i=t.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}e.baseQueue=i=a,r.pending=null}if(a=t.baseState,i===null)t.memoizedState=a;else{e=i.next;var o=s=null,l=null,h=e,u=!1;do{var f=h.lane&-536870913;if(f!==h.lane?(Ve&f)===f:(La&f)===f){var d=h.revertLane;if(d===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),f===Qo&&(u=!0);else if((La&d)===d){h=h.next,d===Qo&&(u=!0);continue}else f={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},l===null?(o=l=f,s=a):l=l.next=f,Se.lanes|=d,za|=d;f=h.action,Is&&n(a,f),a=h.hasEagerState?h.eagerState:n(a,f)}else d={lane:f,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},l===null?(o=l=d,s=a):l=l.next=d,Se.lanes|=f,za|=f;h=h.next}while(h!==null&&h!==e);if(l===null?s=a:l.next=o,!mr(a,t.memoizedState)&&(ln=!0,u&&(n=ko,n!==null)))throw n;t.memoizedState=a,t.baseState=s,t.baseQueue=l,r.lastRenderedState=a}return i===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function dm(t){var e=Qt(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);mr(a,e.memoizedState)||(ln=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Yw(t,e,n){var r=Se,i=Qt(),a=Fe;if(a){if(n===void 0)throw Error(te(407));n=n()}else n=e();var s=!mr((nt||i).memoizedState,n);s&&(i.memoizedState=n,ln=!0),i=i.queue;var o=Kw.bind(null,r,i,t);if(du(2048,8,o,[t]),i.getSnapshot!==e||s||Gt!==null&&Gt.memoizedState.tag&1){if(r.flags|=2048,Wo(9,ud(),Qw.bind(null,r,i,n,e),null),ct===null)throw Error(te(349));a||La&124||Xw(r,e,n)}return n}function Xw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e=T0(),Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Qw(t,e,n,r){e.value=n,e.getSnapshot=r,Ww(e)&&Zw(t)}function Kw(t,e,n){return n(function(){Ww(e)&&Zw(t)})}function Ww(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mr(t,n)}catch{return!0}}function Zw(t){var e=pl(t,2);e!==null&&fr(e,t,2)}function Cp(t){var e=Bn();if(typeof t=="function"){var n=t;if(t=n(),Is){ya(!0);try{n()}finally{ya(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:t},e}function Jw(t,e,n,r){return t.baseState=n,A0(t,nt,typeof r=="function"?r:Vi)}function IN(t,e,n,r,i){if(hd(t))throw Error(te(485));if(t=e.action,t!==null){var a={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){a.listeners.push(s)}};ge.T!==null?n(!0):a.isTransition=!1,r(a),n=e.pending,n===null?(a.next=e.pending=a,eT(e,a)):(a.next=n.next,e.pending=n.next=a)}}function eT(t,e){var n=e.action,r=e.payload,i=t.state;if(e.isTransition){var a=ge.T,s={};ge.T=s;try{var o=n(i,r),l=ge.S;l!==null&&l(s,o),w_(t,e,o)}catch(h){Np(t,e,h)}finally{ge.T=a}}else try{a=n(i,r),w_(t,e,a)}catch(h){Np(t,e,h)}}function w_(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){T_(t,e,r)},function(r){return Np(t,e,r)}):T_(t,e,n)}function T_(t,e,n){e.status="fulfilled",e.value=n,tT(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,eT(t,n)))}function Np(t,e,n){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do e.status="rejected",e.reason=n,tT(e),e=e.next;while(e!==r)}t.action=null}function tT(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function nT(t,e){return e}function x_(t,e){if(Fe){var n=ct.formState;if(n!==null){e:{var r=Se;if(Fe){if(Nt){t:{for(var i=Nt,a=ei;i.nodeType!==8;){if(!a){i=null;break t}if(i=Br(i.nextSibling),i===null){i=null;break t}}a=i.data,i=a==="F!"||a==="F"?i:null}if(i){Nt=Br(i.nextSibling),r=i.data==="F!";break e}}Cs(r)}r=!1}r&&(e=n[0])}}return n=Bn(),n.memoizedState=n.baseState=e,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nT,lastRenderedState:e},n.queue=r,n=yT.bind(null,Se,r),r.dispatch=n,r=Cp(!1),a=N0.bind(null,Se,!1,r.queue),r=Bn(),i={state:e,dispatch:null,action:t,pending:null},r.queue=i,n=IN.bind(null,Se,i,a,n),i.dispatch=n,r.memoizedState=t,[e,n,!1]}function A_(t){var e=Qt();return rT(e,nt,t)}function rT(t,e,n){if(e=A0(t,e,nT)[0],t=Sh(Vi)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var r=fu(e)}catch(s){throw s===hu?ld:s}else r=e;e=Qt();var i=e.queue,a=i.dispatch;return n!==e.memoizedState&&(Se.flags|=2048,Wo(9,ud(),DN.bind(null,i,n),null)),[r,a,t]}function DN(t,e){t.action=e}function S_(t){var e=Qt(),n=nt;if(n!==null)return rT(e,n,t);Qt(),e=e.memoizedState,n=Qt();var r=n.queue.dispatch;return n.memoizedState=t,[e,r,!1]}function Wo(t,e,n,r){return t={tag:t,create:n,deps:r,inst:e,next:null},e=Se.updateQueue,e===null&&(e=T0(),Se.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function ud(){return{destroy:void 0,resource:void 0}}function iT(){return Qt().memoizedState}function Rh(t,e,n,r){var i=Bn();r=r===void 0?null:r,Se.flags|=t,i.memoizedState=Wo(1|e,ud(),n,r)}function du(t,e,n,r){var i=Qt();r=r===void 0?null:r;var a=i.memoizedState.inst;nt!==null&&r!==null&&y0(r,nt.memoizedState.deps)?i.memoizedState=Wo(e,a,n,r):(Se.flags|=t,i.memoizedState=Wo(1|e,a,n,r))}function R_(t,e){Rh(8390656,8,t,e)}function aT(t,e){du(2048,8,t,e)}function sT(t,e){return du(4,2,t,e)}function oT(t,e){return du(4,4,t,e)}function lT(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cT(t,e,n){n=n!=null?n.concat([t]):null,du(4,4,lT.bind(null,e,t),n)}function S0(){}function uT(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return e!==null&&y0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function hT(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;if(e!==null&&y0(e,r[1]))return r[0];if(r=t(),Is){ya(!0);try{t()}finally{ya(!1)}}return n.memoizedState=[r,e],r}function R0(t,e,n){return n===void 0||La&1073741824?t.memoizedState=e:(t.memoizedState=n,t=tx(),Se.lanes|=t,za|=t,n)}function fT(t,e,n,r){return mr(n,e)?n:Ko.current!==null?(t=R0(t,n,r),mr(t,e)||(ln=!0),t):La&42?(t=tx(),Se.lanes|=t,za|=t,e):(ln=!0,t.memoizedState=n)}function dT(t,e,n,r,i){var a=He.p;He.p=a!==0&&8>a?a:8;var s=ge.T,o={};ge.T=o,N0(t,!1,e,n);try{var l=i(),h=ge.S;if(h!==null&&h(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=RN(l,r);pc(t,e,u,hr(t))}else pc(t,e,r,hr(t))}catch(f){pc(t,e,{then:function(){},status:"rejected",reason:f},hr())}finally{He.p=a,ge.T=s}}function ON(){}function Ip(t,e,n,r){if(t.tag!==5)throw Error(te(476));var i=mT(t).queue;dT(t,i,e,vs,n===null?ON:function(){return pT(t),n(r)})}function mT(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:vs,baseState:vs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:vs},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function pT(t){var e=mT(t).next.queue;pc(t,e,{},hr())}function C0(){return In(Vc)}function gT(){return Qt().memoizedState}function vT(){return Qt().memoizedState}function MN(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=hr();t=Ra(n);var r=Ca(e,t,n);r!==null&&(fr(r,e,n),fc(r,e,n)),e={cache:m0()},t.payload=e;return}e=e.return}}function kN(t,e,n){var r=hr();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},hd(t)?_T(e,n):(n=u0(t,e,n,r),n!==null&&(fr(n,t,r),bT(n,e,r)))}function yT(t,e,n){var r=hr();pc(t,e,n,r)}function pc(t,e,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(hd(t))_T(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,mr(o,s))return od(t,e,i,0),ct===null&&sd(),!1}catch{}finally{}if(n=u0(t,e,i,r),n!==null)return fr(n,t,r),bT(n,e,r),!0}return!1}function N0(t,e,n,r){if(r={lane:2,revertLane:U0(),action:r,hasEagerState:!1,eagerState:null,next:null},hd(t)){if(e)throw Error(te(479))}else e=u0(t,n,r,2),e!==null&&fr(e,t,2)}function hd(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function _T(t,e){jo=nf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function bT(t,e,n){if(n&4194048){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uw(t,n)}}var af={readContext:In,use:cd,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt},ET={readContext:In,use:cd,useCallback:function(t,e){return Bn().memoizedState=[t,e===void 0?null:e],t},useContext:In,useEffect:R_,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Rh(4194308,4,lT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rh(4194308,4,t,e)},useInsertionEffect:function(t,e){Rh(4,2,t,e)},useMemo:function(t,e){var n=Bn();e=e===void 0?null:e;var r=t();if(Is){ya(!0);try{t()}finally{ya(!1)}}return n.memoizedState=[r,e],r},useReducer:function(t,e,n){var r=Bn();if(n!==void 0){var i=n(e);if(Is){ya(!0);try{n(e)}finally{ya(!1)}}}else i=e;return r.memoizedState=r.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},r.queue=t,t=t.dispatch=kN.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=Bn();return t={current:t},e.memoizedState=t},useState:function(t){t=Cp(t);var e=t.queue,n=yT.bind(null,Se,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:S0,useDeferredValue:function(t,e){var n=Bn();return R0(n,t,e)},useTransition:function(){var t=Cp(!1);return t=dT.bind(null,Se,t.queue,!0,!1),Bn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var r=Se,i=Bn();if(Fe){if(n===void 0)throw Error(te(407));n=n()}else{if(n=e(),ct===null)throw Error(te(349));Ve&124||Xw(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,R_(Kw.bind(null,r,a,t),[t]),r.flags|=2048,Wo(9,ud(),Qw.bind(null,r,a,n,e),null),n},useId:function(){var t=Bn(),e=ct.identifierPrefix;if(Fe){var n=Ni,r=Ci;n=(r&~(1<<32-ur(r)-1)).toString(32)+n,e="«"+e+"R"+n,n=rf++,0<n&&(e+="H"+n.toString(32)),e+="»"}else n=CN++,e="«"+e+"r"+n.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:C0,useFormState:x_,useActionState:x_,useOptimistic:function(t){var e=Bn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=N0.bind(null,Se,!0,n),n.dispatch=e,[t,e]},useMemoCache:x0,useCacheRefresh:function(){return Bn().memoizedState=MN.bind(null,Se)}},wT={readContext:In,use:cd,useCallback:uT,useContext:In,useEffect:aT,useImperativeHandle:cT,useInsertionEffect:sT,useLayoutEffect:oT,useMemo:hT,useReducer:Sh,useRef:iT,useState:function(){return Sh(Vi)},useDebugValue:S0,useDeferredValue:function(t,e){var n=Qt();return fT(n,nt.memoizedState,t,e)},useTransition:function(){var t=Sh(Vi)[0],e=Qt().memoizedState;return[typeof t=="boolean"?t:fu(t),e]},useSyncExternalStore:Yw,useId:gT,useHostTransitionStatus:C0,useFormState:A_,useActionState:A_,useOptimistic:function(t,e){var n=Qt();return Jw(n,nt,t,e)},useMemoCache:x0,useCacheRefresh:vT},jN={readContext:In,use:cd,useCallback:uT,useContext:In,useEffect:aT,useImperativeHandle:cT,useInsertionEffect:sT,useLayoutEffect:oT,useMemo:hT,useReducer:dm,useRef:iT,useState:function(){return dm(Vi)},useDebugValue:S0,useDeferredValue:function(t,e){var n=Qt();return nt===null?R0(n,t,e):fT(n,nt.memoizedState,t,e)},useTransition:function(){var t=dm(Vi)[0],e=Qt().memoizedState;return[typeof t=="boolean"?t:fu(t),e]},useSyncExternalStore:Yw,useId:gT,useHostTransitionStatus:C0,useFormState:S_,useActionState:S_,useOptimistic:function(t,e){var n=Qt();return nt!==null?Jw(n,nt,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:x0,useCacheRefresh:vT},Uo=null,jc=0;function nh(t){var e=jc;return jc+=1,Uo===null&&(Uo=[]),Fw(Uo,t,e)}function Vl(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function rh(t,e){throw e.$$typeof===hC?Error(te(525)):(t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function C_(t){var e=t._init;return e(t._payload)}function TT(t){function e(w,x){if(t){var C=w.deletions;C===null?(w.deletions=[x],w.flags|=16):C.push(x)}}function n(w,x){if(!t)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function r(w){for(var x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function i(w,x){return w=ki(w,x),w.index=0,w.sibling=null,w}function a(w,x,C){return w.index=C,t?(C=w.alternate,C!==null?(C=C.index,C<x?(w.flags|=67108866,x):C):(w.flags|=67108866,x)):(w.flags|=1048576,x)}function s(w){return t&&w.alternate===null&&(w.flags|=67108866),w}function o(w,x,C,O){return x===null||x.tag!==6?(x=um(C,w.mode,O),x.return=w,x):(x=i(x,C),x.return=w,x)}function l(w,x,C,O){var U=C.type;return U===po?u(w,x,C.props.children,O,C.key):x!==null&&(x.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===la&&C_(U)===x.type)?(x=i(x,C.props),Vl(x,C),x.return=w,x):(x=xh(C.type,C.key,C.props,null,w.mode,O),Vl(x,C),x.return=w,x)}function h(w,x,C,O){return x===null||x.tag!==4||x.stateNode.containerInfo!==C.containerInfo||x.stateNode.implementation!==C.implementation?(x=hm(C,w.mode,O),x.return=w,x):(x=i(x,C.children||[]),x.return=w,x)}function u(w,x,C,O,U){return x===null||x.tag!==7?(x=ys(C,w.mode,O,U),x.return=w,x):(x=i(x,C),x.return=w,x)}function f(w,x,C){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=um(""+x,w.mode,C),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Qu:return C=xh(x.type,x.key,x.props,null,w.mode,C),Vl(C,x),C.return=w,C;case Wl:return x=hm(x,w.mode,C),x.return=w,x;case la:var O=x._init;return x=O(x._payload),f(w,x,C)}if(Zl(x)||jl(x))return x=ys(x,w.mode,C,null),x.return=w,x;if(typeof x.then=="function")return f(w,nh(x),C);if(x.$$typeof===Ri)return f(w,eh(w,x),C);rh(w,x)}return null}function d(w,x,C,O){var U=x!==null?x.key:null;if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return U!==null?null:o(w,x,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Qu:return C.key===U?l(w,x,C,O):null;case Wl:return C.key===U?h(w,x,C,O):null;case la:return U=C._init,C=U(C._payload),d(w,x,C,O)}if(Zl(C)||jl(C))return U!==null?null:u(w,x,C,O,null);if(typeof C.then=="function")return d(w,x,nh(C),O);if(C.$$typeof===Ri)return d(w,x,eh(w,C),O);rh(w,C)}return null}function m(w,x,C,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return w=w.get(C)||null,o(x,w,""+O,U);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Qu:return w=w.get(O.key===null?C:O.key)||null,l(x,w,O,U);case Wl:return w=w.get(O.key===null?C:O.key)||null,h(x,w,O,U);case la:var N=O._init;return O=N(O._payload),m(w,x,C,O,U)}if(Zl(O)||jl(O))return w=w.get(C)||null,u(x,w,O,U,null);if(typeof O.then=="function")return m(w,x,C,nh(O),U);if(O.$$typeof===Ri)return m(w,x,C,eh(x,O),U);rh(x,O)}return null}function b(w,x,C,O){for(var U=null,N=null,_=x,g=x=0,y=null;_!==null&&g<C.length;g++){_.index>g?(y=_,_=null):y=_.sibling;var T=d(w,_,C[g],O);if(T===null){_===null&&(_=y);break}t&&_&&T.alternate===null&&e(w,_),x=a(T,x,g),N===null?U=T:N.sibling=T,N=T,_=y}if(g===C.length)return n(w,_),Fe&&os(w,g),U;if(_===null){for(;g<C.length;g++)_=f(w,C[g],O),_!==null&&(x=a(_,x,g),N===null?U=_:N.sibling=_,N=_);return Fe&&os(w,g),U}for(_=r(_);g<C.length;g++)y=m(_,w,g,C[g],O),y!==null&&(t&&y.alternate!==null&&_.delete(y.key===null?g:y.key),x=a(y,x,g),N===null?U=y:N.sibling=y,N=y);return t&&_.forEach(function(R){return e(w,R)}),Fe&&os(w,g),U}function A(w,x,C,O){if(C==null)throw Error(te(151));for(var U=null,N=null,_=x,g=x=0,y=null,T=C.next();_!==null&&!T.done;g++,T=C.next()){_.index>g?(y=_,_=null):y=_.sibling;var R=d(w,_,T.value,O);if(R===null){_===null&&(_=y);break}t&&_&&R.alternate===null&&e(w,_),x=a(R,x,g),N===null?U=R:N.sibling=R,N=R,_=y}if(T.done)return n(w,_),Fe&&os(w,g),U;if(_===null){for(;!T.done;g++,T=C.next())T=f(w,T.value,O),T!==null&&(x=a(T,x,g),N===null?U=T:N.sibling=T,N=T);return Fe&&os(w,g),U}for(_=r(_);!T.done;g++,T=C.next())T=m(_,w,g,T.value,O),T!==null&&(t&&T.alternate!==null&&_.delete(T.key===null?g:T.key),x=a(T,x,g),N===null?U=T:N.sibling=T,N=T);return t&&_.forEach(function(I){return e(w,I)}),Fe&&os(w,g),U}function D(w,x,C,O){if(typeof C=="object"&&C!==null&&C.type===po&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Qu:e:{for(var U=C.key;x!==null;){if(x.key===U){if(U=C.type,U===po){if(x.tag===7){n(w,x.sibling),O=i(x,C.props.children),O.return=w,w=O;break e}}else if(x.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===la&&C_(U)===x.type){n(w,x.sibling),O=i(x,C.props),Vl(O,C),O.return=w,w=O;break e}n(w,x);break}else e(w,x);x=x.sibling}C.type===po?(O=ys(C.props.children,w.mode,O,C.key),O.return=w,w=O):(O=xh(C.type,C.key,C.props,null,w.mode,O),Vl(O,C),O.return=w,w=O)}return s(w);case Wl:e:{for(U=C.key;x!==null;){if(x.key===U)if(x.tag===4&&x.stateNode.containerInfo===C.containerInfo&&x.stateNode.implementation===C.implementation){n(w,x.sibling),O=i(x,C.children||[]),O.return=w,w=O;break e}else{n(w,x);break}else e(w,x);x=x.sibling}O=hm(C,w.mode,O),O.return=w,w=O}return s(w);case la:return U=C._init,C=U(C._payload),D(w,x,C,O)}if(Zl(C))return b(w,x,C,O);if(jl(C)){if(U=jl(C),typeof U!="function")throw Error(te(150));return C=U.call(C),A(w,x,C,O)}if(typeof C.then=="function")return D(w,x,nh(C),O);if(C.$$typeof===Ri)return D(w,x,eh(w,C),O);rh(w,C)}return typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint"?(C=""+C,x!==null&&x.tag===6?(n(w,x.sibling),O=i(x,C),O.return=w,w=O):(n(w,x),O=um(C,w.mode,O),O.return=w,w=O),s(w)):n(w,x)}return function(w,x,C,O){try{jc=0;var U=D(w,x,C,O);return Uo=null,U}catch(_){if(_===hu||_===ld)throw _;var N=ar(29,_,null,w.mode);return N.lanes=O,N.return=w,N}finally{}}}var Zo=TT(!0),xT=TT(!1),Cr=pi(null),ai=null;function ha(t){var e=t.alternate;Tt(Wt,Wt.current&1),Tt(Cr,t),ai===null&&(e===null||Ko.current!==null||e.memoizedState!==null)&&(ai=t)}function AT(t){if(t.tag===22){if(Tt(Wt,Wt.current),Tt(Cr,t),ai===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(ai=t)}}else fa()}function fa(){Tt(Wt,Wt.current),Tt(Cr,Cr.current)}function Di(t){cn(Cr),ai===t&&(ai=null),cn(Wt)}var Wt=pi(0);function sf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Yp(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function mm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Dp={enqueueSetState:function(t,e,n){t=t._reactInternals;var r=hr(),i=Ra(r);i.payload=e,n!=null&&(i.callback=n),e=Ca(t,i,r),e!==null&&(fr(e,t,r),fc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=hr(),i=Ra(r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ca(t,i,r),e!==null&&(fr(e,t,r),fc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hr(),r=Ra(n);r.tag=2,e!=null&&(r.callback=e),e=Ca(t,r,n),e!==null&&(fr(e,t,n),fc(e,t,n))}};function N_(t,e,n,r,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,s):e.prototype&&e.prototype.isPureReactComponent?!Oc(n,r)||!Oc(i,a):!0}function I_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Dp.enqueueReplaceState(e,e.state,null)}function Ds(t,e){var n=e;if("ref"in e){n={};for(var r in e)r!=="ref"&&(n[r]=e[r])}if(t=t.defaultProps){n===e&&(n=pt({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}var of=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function ST(t){of(t)}function RT(t){console.error(t)}function CT(t){of(t)}function lf(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(r){setTimeout(function(){throw r})}}function D_(t,e,n){try{var r=t.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Op(t,e,n){return n=Ra(n),n.tag=3,n.payload={element:null},n.callback=function(){lf(t,e)},n}function NT(t){return t=Ra(t),t.tag=3,t}function IT(t,e,n,r){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var a=r.value;t.payload=function(){return i(a)},t.callback=function(){D_(e,n,r)}}var s=n.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){D_(e,n,r),typeof i!="function"&&(Na===null?Na=new Set([this]):Na.add(this));var o=r.stack;this.componentDidCatch(r.value,{componentStack:o!==null?o:""})})}function PN(t,e,n,r,i){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(e=n.alternate,e!==null&&cu(e,n,i,!0),n=Cr.current,n!==null){switch(n.tag){case 13:return ai===null?zp():n.alternate===null&&It===0&&(It=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===xp?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([r]):e.add(r),Am(t,r,i)),!1;case 22:return n.flags|=65536,r===xp?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([r]):n.add(r)),Am(t,r,i)),!1}throw Error(te(435,n.tag))}return Am(t,r,i),zp(),!1}if(Fe)return e=Cr.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,r!==_p&&(t=Error(te(422),{cause:r}),Mc(wr(t,n)))):(r!==_p&&(e=Error(te(423),{cause:r}),Mc(wr(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,r=wr(r,n),i=Op(t.stateNode,r,i),fm(t,i),It!==4&&(It=2)),!1;var a=Error(te(520),{cause:r});if(a=wr(a,n),yc===null?yc=[a]:yc.push(a),It!==4&&(It=2),e===null)return!0;r=wr(r,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=Op(n.stateNode,r,t),fm(n,t),!1;case 1:if(e=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(Na===null||!Na.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,i=NT(i),IT(i,t,n,r),fm(n,i),!1}n=n.return}while(n!==null);return!1}var DT=Error(te(461)),ln=!1;function pn(t,e,n,r){e.child=t===null?xT(e,null,n,r):Zo(e,t.child,n,r)}function O_(t,e,n,r,i){n=n.render;var a=e.ref;if("ref"in r){var s={};for(var o in r)o!=="ref"&&(s[o]=r[o])}else s=r;return Ns(e),r=_0(t,e,n,s,a,i),o=b0(),t!==null&&!ln?(E0(t,e,i),zi(t,e,i)):(Fe&&o&&f0(e),e.flags|=1,pn(t,e,r,i),e.child)}function M_(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!h0(a)&&a.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=a,OT(t,e,a,r,i)):(t=xh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!I0(t,i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Oc,n(s,r)&&t.ref===e.ref)return zi(t,e,i)}return e.flags|=1,t=ki(a,r),t.ref=e.ref,t.return=e,e.child=t}function OT(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(Oc(a,r)&&t.ref===e.ref)if(ln=!1,e.pendingProps=r=a,I0(t,i))t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,zi(t,e,i)}return Mp(t,e,n,r,i)}function MT(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden"){if(e.flags&128){if(r=a!==null?a.baseLanes|n:n,t!==null){for(i=e.child=t.child,a=0;i!==null;)a=a|i.lanes|i.childLanes,i=i.sibling;e.childLanes=a&~r}else e.childLanes=0,e.child=null;return k_(t,e,r,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ah(e,a!==null?a.cachePool:null),a!==null?E_(e,a):Rp(),AT(e);else return e.lanes=e.childLanes=536870912,k_(t,e,a!==null?a.baseLanes|n:n,n)}else a!==null?(Ah(e,a.cachePool),E_(e,a),fa(),e.memoizedState=null):(t!==null&&Ah(e,null),Rp(),fa());return pn(t,e,i,n),e.child}function k_(t,e,n,r){var i=p0();return i=i===null?null:{parent:Kt._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},t!==null&&Ah(e,null),Rp(),AT(e),t!==null&&cu(t,e,r,!0),null}function Ch(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(te(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Mp(t,e,n,r,i){return Ns(e),n=_0(t,e,n,r,void 0,i),r=b0(),t!==null&&!ln?(E0(t,e,i),zi(t,e,i)):(Fe&&r&&f0(e),e.flags|=1,pn(t,e,n,i),e.child)}function j_(t,e,n,r,i,a){return Ns(e),e.updateQueue=null,n=$w(e,r,n,i),Gw(t),r=b0(),t!==null&&!ln?(E0(t,e,a),zi(t,e,a)):(Fe&&r&&f0(e),e.flags|=1,pn(t,e,n,a),e.child)}function P_(t,e,n,r,i){if(Ns(e),e.stateNode===null){var a=To,s=n.contextType;typeof s=="object"&&s!==null&&(a=In(s)),a=new n(r,a),e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Dp,e.stateNode=a,a._reactInternals=e,a=e.stateNode,a.props=r,a.state=e.memoizedState,a.refs={},g0(e),s=n.contextType,a.context=typeof s=="object"&&s!==null?In(s):To,a.state=e.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(mm(e,n,s,r),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&Dp.enqueueReplaceState(a,a.state,null),mc(e,r,a,i),dc(),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!0}else if(t===null){a=e.stateNode;var o=e.memoizedProps,l=Ds(n,o);a.props=l;var h=a.context,u=n.contextType;s=To,typeof u=="object"&&u!==null&&(s=In(u));var f=n.getDerivedStateFromProps;u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o||h!==s)&&I_(e,a,r,s),ca=!1;var d=e.memoizedState;a.state=d,mc(e,r,a,i),dc(),h=e.memoizedState,o||d!==h||ca?(typeof f=="function"&&(mm(e,n,f,r),h=e.memoizedState),(l=ca||N_(e,n,l,r,d,h,s))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),a.props=r,a.state=h,a.context=s,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Ap(t,e),s=e.memoizedProps,u=Ds(n,s),a.props=u,f=e.pendingProps,d=a.context,h=n.contextType,l=To,typeof h=="object"&&h!==null&&(l=In(h)),o=n.getDerivedStateFromProps,(h=typeof o=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==f||d!==l)&&I_(e,a,r,l),ca=!1,d=e.memoizedState,a.state=d,mc(e,r,a,i),dc();var m=e.memoizedState;s!==f||d!==m||ca||t!==null&&t.dependencies!==null&&ef(t.dependencies)?(typeof o=="function"&&(mm(e,n,o,r),m=e.memoizedState),(u=ca||N_(e,n,u,r,d,m,l)||t!==null&&t.dependencies!==null&&ef(t.dependencies))?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,m,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),a.props=r,a.state=m,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return a=r,Ch(t,e),r=(e.flags&128)!==0,a||r?(a=e.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:a.render(),e.flags|=1,t!==null&&r?(e.child=Zo(e,t.child,null,i),e.child=Zo(e,null,n,i)):pn(t,e,n,i),e.memoizedState=a.state,t=e.child):t=zi(t,e,i),t}function U_(t,e,n,r){return lu(),e.flags|=256,pn(t,e,n,r),e.child}var pm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gm(t){return{baseLanes:t,cachePool:zw()}}function vm(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=xr),t}function kT(t,e,n){var r=e.pendingProps,i=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(Wt.current&2)!==0),s&&(i=!0,e.flags&=-129),s=(e.flags&32)!==0,e.flags&=-33,t===null){if(Fe){if(i?ha(e):fa(),Fe){var o=Nt,l;if(l=o){e:{for(l=o,o=ei;l.nodeType!==8;){if(!o){o=null;break e}if(l=Br(l.nextSibling),l===null){o=null;break e}}o=l}o!==null?(e.memoizedState={dehydrated:o,treeContext:_s!==null?{id:Ci,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},l=ar(18,null,null,0),l.stateNode=o,l.return=e,e.child=l,jn=e,Nt=null,l=!0):l=!1}l||Cs(e)}if(o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return Yp(o)?e.lanes=32:e.lanes=536870912,null;Di(e)}return o=r.children,r=r.fallback,i?(fa(),i=e.mode,o=cf({mode:"hidden",children:o},i),r=ys(r,i,n,null),o.return=e,r.return=e,o.sibling=r,e.child=o,i=e.child,i.memoizedState=gm(n),i.childLanes=vm(t,s,n),e.memoizedState=pm,r):(ha(e),kp(e,o))}if(l=t.memoizedState,l!==null&&(o=l.dehydrated,o!==null)){if(a)e.flags&256?(ha(e),e.flags&=-257,e=ym(t,e,n)):e.memoizedState!==null?(fa(),e.child=t.child,e.flags|=128,e=null):(fa(),i=r.fallback,o=e.mode,r=cf({mode:"visible",children:r.children},o),i=ys(i,o,n,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,Zo(e,t.child,null,n),r=e.child,r.memoizedState=gm(n),r.childLanes=vm(t,s,n),e.memoizedState=pm,e=i);else if(ha(e),Yp(o)){if(s=o.nextSibling&&o.nextSibling.dataset,s)var h=s.dgst;s=h,r=Error(te(419)),r.stack="",r.digest=s,Mc({value:r,source:null,stack:null}),e=ym(t,e,n)}else if(ln||cu(t,e,n,!1),s=(n&t.childLanes)!==0,ln||s){if(s=ct,s!==null&&(r=n&-n,r=r&42?1:e0(r),r=r&(s.suspendedLanes|n)?0:r,r!==0&&r!==l.retryLane))throw l.retryLane=r,pl(t,r),fr(s,t,r),DT;o.data==="$?"||zp(),e=ym(t,e,n)}else o.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,Nt=Br(o.nextSibling),jn=e,Fe=!0,bs=null,ei=!1,t!==null&&(_r[br++]=Ci,_r[br++]=Ni,_r[br++]=_s,Ci=t.id,Ni=t.overflow,_s=e),e=kp(e,r.children),e.flags|=4096);return e}return i?(fa(),i=r.fallback,o=e.mode,l=t.child,h=l.sibling,r=ki(l,{mode:"hidden",children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,h!==null?i=ki(h,i):(i=ys(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o===null?o=gm(n):(l=o.cachePool,l!==null?(h=Kt._currentValue,l=l.parent!==h?{parent:h,pool:h}:l):l=zw(),o={baseLanes:o.baseLanes|n,cachePool:l}),i.memoizedState=o,i.childLanes=vm(t,s,n),e.memoizedState=pm,r):(ha(e),n=t.child,t=n.sibling,n=ki(n,{mode:"visible",children:r.children}),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n)}function kp(t,e){return e=cf({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function cf(t,e){return t=ar(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function ym(t,e,n){return Zo(e,t.child,null,n),t=kp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function L_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ep(t.return,e,n)}function _m(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function jT(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(pn(t,e,r.children,n),r=Wt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&L_(t,n,e);else if(t.tag===19)L_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}switch(Tt(Wt,r),i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&sf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),_m(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}_m(e,!0,n,null,a);break;case"together":_m(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),za|=e.lanes,!(n&e.childLanes))if(t!==null){if(cu(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,n=ki(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ki(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function I0(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&ef(t)))}function UN(t,e,n){switch(e.tag){case 3:$h(e,e.stateNode.containerInfo),ua(e,Kt,t.memoizedState.cache),lu();break;case 27:case 5:cp(e);break;case 4:$h(e,e.stateNode.containerInfo);break;case 10:ua(e,e.type,e.memoizedProps.value);break;case 13:var r=e.memoizedState;if(r!==null)return r.dehydrated!==null?(ha(e),e.flags|=128,null):n&e.child.childLanes?kT(t,e,n):(ha(e),t=zi(t,e,n),t!==null?t.sibling:null);ha(e);break;case 19:var i=(t.flags&128)!==0;if(r=(n&e.childLanes)!==0,r||(cu(t,e,n,!1),r=(n&e.childLanes)!==0),i){if(r)return jT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Tt(Wt,Wt.current),r)break;return null;case 22:case 23:return e.lanes=0,MT(t,e,n);case 24:ua(e,Kt,t.memoizedState.cache)}return zi(t,e,n)}function PT(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)ln=!0;else{if(!I0(t,n)&&!(e.flags&128))return ln=!1,UN(t,e,n);ln=!!(t.flags&131072)}else ln=!1,Fe&&e.flags&1048576&&Lw(e,Jh,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var r=e.elementType,i=r._init;if(r=i(r._payload),e.type=r,typeof r=="function")h0(r)?(t=Ds(r,t),e.tag=1,e=P_(null,e,r,t,n)):(e.tag=0,e=Mp(null,e,r,t,n));else{if(r!=null){if(i=r.$$typeof,i===Wg){e.tag=11,e=O_(null,e,r,t,n);break e}else if(i===Zg){e.tag=14,e=M_(null,e,r,t,n);break e}}throw e=op(r)||r,Error(te(306,e,""))}}return e;case 0:return Mp(t,e,e.type,e.pendingProps,n);case 1:return r=e.type,i=Ds(r,e.pendingProps),P_(t,e,r,i,n);case 3:e:{if($h(e,e.stateNode.containerInfo),t===null)throw Error(te(387));r=e.pendingProps;var a=e.memoizedState;i=a.element,Ap(t,e),mc(e,r,null,n);var s=e.memoizedState;if(r=s.cache,ua(e,Kt,r),r!==a.cache&&wp(e,[Kt],n,!0),dc(),r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){e=U_(t,e,r,n);break e}else if(r!==i){i=wr(Error(te(424)),e),Mc(i),e=U_(t,e,r,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Nt=Br(t.firstChild),jn=e,Fe=!0,bs=null,ei=!0,n=xT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(lu(),r===i){e=zi(t,e,n);break e}pn(t,e,r,n)}e=e.child}return e;case 26:return Ch(t,e),t===null?(n=tb(e.type,null,e.pendingProps,null))?e.memoizedState=n:Fe||(n=e.type,t=e.pendingProps,r=gf(Sa.current).createElement(n),r[Nn]=e,r[Wn]=t,_n(r,n,t),on(r),e.stateNode=r):e.memoizedState=tb(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return cp(e),t===null&&Fe&&(r=e.stateNode=wx(e.type,e.pendingProps,Sa.current),jn=e,ei=!0,i=Nt,Wa(e.type)?(Xp=i,Nt=Br(r.firstChild)):Nt=i),pn(t,e,e.pendingProps.children,n),Ch(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Fe&&((i=r=Nt)&&(r=hI(r,e.type,e.pendingProps,ei),r!==null?(e.stateNode=r,jn=e,Nt=Br(r.firstChild),ei=!1,i=!0):i=!1),i||Cs(e)),cp(e),i=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,r=a.children,Gp(i,a)?r=null:s!==null&&Gp(i,s)&&(e.flags|=32),e.memoizedState!==null&&(i=_0(t,e,NN,null,null,n),Vc._currentValue=i),Ch(t,e),pn(t,e,r,n),e.child;case 6:return t===null&&Fe&&((t=n=Nt)&&(n=fI(n,e.pendingProps,ei),n!==null?(e.stateNode=n,jn=e,Nt=null,t=!0):t=!1),t||Cs(e)),null;case 13:return kT(t,e,n);case 4:return $h(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zo(e,null,r,n):pn(t,e,r,n),e.child;case 11:return O_(t,e,e.type,e.pendingProps,n);case 7:return pn(t,e,e.pendingProps,n),e.child;case 8:return pn(t,e,e.pendingProps.children,n),e.child;case 12:return pn(t,e,e.pendingProps.children,n),e.child;case 10:return r=e.pendingProps,ua(e,e.type,r.value),pn(t,e,r.children,n),e.child;case 9:return i=e.type._context,r=e.pendingProps.children,Ns(e),i=In(i),r=r(i),e.flags|=1,pn(t,e,r,n),e.child;case 14:return M_(t,e,e.type,e.pendingProps,n);case 15:return OT(t,e,e.type,e.pendingProps,n);case 19:return jT(t,e,n);case 31:return r=e.pendingProps,n=e.mode,r={mode:r.mode,children:r.children},t===null?(n=cf(r,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=ki(t.child,r),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return MT(t,e,n);case 24:return Ns(e),r=In(Kt),t===null?(i=p0(),i===null&&(i=ct,a=m0(),i.pooledCache=a,a.refCount++,a!==null&&(i.pooledCacheLanes|=n),i=a),e.memoizedState={parent:r,cache:i},g0(e),ua(e,Kt,i)):(t.lanes&n&&(Ap(t,e),mc(e,null,null,n),dc()),i=t.memoizedState,a=e.memoizedState,i.parent!==r?(i={parent:r,cache:r},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),ua(e,Kt,r)):(r=a.cache,ua(e,Kt,r),r!==i.cache&&wp(e,[Kt],n,!0))),pn(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(te(156,e.tag))}function Ti(t){t.flags|=4}function V_(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!Ax(e)){if(e=Cr.current,e!==null&&((Ve&4194048)===Ve?ai!==null:(Ve&62914560)!==Ve&&!(Ve&536870912)||e!==ai))throw hc=xp,Bw;t.flags|=8192}}function ih(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?lw():536870912,t.lanes|=e,Jo|=e)}function zl(t,e){if(!Fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function LN(t,e,n){var r=e.pendingProps;switch(d0(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return At(e),null;case 3:return n=e.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),ji(Kt),$o(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ll(e)?Ti(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,p_())),At(e),null;case 26:return n=e.memoizedState,t===null?(Ti(e),n!==null?(At(e),V_(e,n)):(At(e),e.flags&=-16777217)):n?n!==t.memoizedState?(Ti(e),At(e),V_(e,n)):(At(e),e.flags&=-16777217):(t.memoizedProps!==r&&Ti(e),At(e),e.flags&=-16777217),null;case 27:Yh(e),n=Sa.current;var i=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==r&&Ti(e);else{if(!r){if(e.stateNode===null)throw Error(te(166));return At(e),null}t=ri.current,Ll(e)?d_(e):(t=wx(i,r,n),e.stateNode=t,Ti(e))}return At(e),null;case 5:if(Yh(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==r&&Ti(e);else{if(!r){if(e.stateNode===null)throw Error(te(166));return At(e),null}if(t=ri.current,Ll(e))d_(e);else{switch(i=gf(Sa.current),t){case 1:t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof r.is=="string"?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?t.multiple=!0:r.size&&(t.size=r.size);break;default:t=typeof r.is=="string"?i.createElement(n,{is:r.is}):i.createElement(n)}}t[Nn]=e,t[Wn]=r;e:for(i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}e.stateNode=t;e:switch(_n(t,n,r),n){case"button":case"input":case"select":case"textarea":t=!!r.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Ti(e)}}return At(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==r&&Ti(e);else{if(typeof r!="string"&&e.stateNode===null)throw Error(te(166));if(t=Sa.current,Ll(e)){if(t=e.stateNode,n=e.memoizedProps,r=null,i=jn,i!==null)switch(i.tag){case 27:case 5:r=i.memoizedProps}t[Nn]=e,t=!!(t.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||_x(t.nodeValue,n)),t||Cs(e)}else t=gf(t).createTextNode(r),t[Nn]=e,e.stateNode=t}return At(e),null;case 13:if(r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=Ll(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(te(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(te(317));i[Nn]=e}else lu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),i=!1}else i=p_(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(Di(e),e):(Di(e),null)}if(Di(e),e.flags&128)return e.lanes=n,e;if(n=r!==null,t=t!==null&&t.memoizedState!==null,n){r=e.child,i=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(i=r.alternate.memoizedState.cachePool.pool);var a=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),ih(e,e.updateQueue),At(e),null;case 4:return $o(),t===null&&L0(e.stateNode.containerInfo),At(e),null;case 10:return ji(e.type),At(e),null;case 19:if(cn(Wt),i=e.memoizedState,i===null)return At(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)zl(i,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=sf(t),a!==null){for(e.flags|=128,zl(i,!1),t=a.updateQueue,e.updateQueue=t,ih(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)Uw(n,t),n=n.sibling;return Tt(Wt,Wt.current&1|2),e.child}t=t.sibling}i.tail!==null&&ii()>hf&&(e.flags|=128,r=!0,zl(i,!1),e.lanes=4194304)}else{if(!r)if(t=sf(a),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,ih(e,t),zl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Fe)return At(e),null}else 2*ii()-i.renderingStartTime>hf&&n!==536870912&&(e.flags|=128,r=!0,zl(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(t=i.last,t!==null?t.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ii(),e.sibling=null,t=Wt.current,Tt(Wt,r?t&1|2:t&1),e):(At(e),null);case 22:case 23:return Di(e),v0(),r=e.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(e.flags|=8192):r&&(e.flags|=8192),r?n&536870912&&!(e.flags&128)&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),n=e.updateQueue,n!==null&&ih(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),r=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),r!==n&&(e.flags|=2048),t!==null&&cn(Es),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),ji(Kt),At(e),null;case 25:return null;case 30:return null}throw Error(te(156,e.tag))}function VN(t,e){switch(d0(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ji(Kt),$o(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Yh(e),null;case 13:if(Di(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));lu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return cn(Wt),null;case 4:return $o(),null;case 10:return ji(e.type),null;case 22:case 23:return Di(e),v0(),t!==null&&cn(Es),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return ji(Kt),null;case 25:return null;default:return null}}function UT(t,e){switch(d0(e),e.tag){case 3:ji(Kt),$o();break;case 26:case 27:case 5:Yh(e);break;case 4:$o();break;case 13:Di(e);break;case 19:cn(Wt);break;case 10:ji(e.type);break;case 22:case 23:Di(e),v0(),t!==null&&cn(Es);break;case 24:ji(Kt)}}function mu(t,e){try{var n=e.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var i=r.next;n=i;do{if((n.tag&t)===t){r=void 0;var a=n.create,s=n.inst;r=a(),s.destroy=r}n=n.next}while(n!==i)}}catch(o){at(e,e.return,o)}}function Va(t,e,n){try{var r=e.updateQueue,i=r!==null?r.lastEffect:null;if(i!==null){var a=i.next;r=a;do{if((r.tag&t)===t){var s=r.inst,o=s.destroy;if(o!==void 0){s.destroy=void 0,i=e;var l=n,h=o;try{h()}catch(u){at(i,l,u)}}}r=r.next}while(r!==a)}}catch(u){at(e,e.return,u)}}function LT(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{qw(e,n)}catch(r){at(t,t.return,r)}}}function VT(t,e,n){n.props=Ds(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(r){at(t,e,r)}}function gc(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof n=="function"?t.refCleanup=n(r):n.current=r}}catch(i){at(t,e,i)}}function ni(t,e){var n=t.ref,r=t.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(i){at(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){at(t,e,i)}else n.current=null}function zT(t){var e=t.type,n=t.memoizedProps,r=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){at(t,t.return,i)}}function bm(t,e,n){try{var r=t.stateNode;sI(r,t.type,n,e),r[Wn]=e}catch(i){at(t,t.return,i)}}function BT(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Wa(t.type)||t.tag===4}function Em(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||BT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Wa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=pd));else if(r!==4&&(r===27&&Wa(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(jp(t,e,n),t=t.sibling;t!==null;)jp(t,e,n),t=t.sibling}function uf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(r===27&&Wa(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(uf(t,e,n),t=t.sibling;t!==null;)uf(t,e,n),t=t.sibling}function FT(t){var e=t.stateNode,n=t.memoizedProps;try{for(var r=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);_n(e,r,n),e[Nn]=t,e[Wn]=n}catch(a){at(t,t.return,a)}}var Si=!1,Ut=!1,wm=!1,z_=typeof WeakSet=="function"?WeakSet:Set,sn=null;function zN(t,e){if(t=t.containerInfo,Hp=bf,t=Nw(t),l0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,l=-1,h=0,u=0,f=t,d=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(o=s+i),f!==a||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)d=f,f=m;for(;;){if(f===t)break t;if(d===n&&++h===i&&(o=s),d===a&&++u===r&&(l=s),(m=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(qp={focusedElem:t,selectionRange:n},bf=!1,sn=e;sn!==null;)if(e=sn,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,sn=t;else for(;sn!==null;){switch(e=sn,a=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&a!==null){t=void 0,n=e,i=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var b=Ds(n.type,i,n.elementType===n.type);t=r.getSnapshotBeforeUpdate(b,a),r.__reactInternalSnapshotBeforeUpdate=t}catch(A){at(n,n.return,A)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)$p(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":$p(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(te(163))}if(t=e.sibling,t!==null){t.return=e.return,sn=t;break}sn=e.return}}function HT(t,e,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:ra(t,n),r&4&&mu(5,n);break;case 1:if(ra(t,n),r&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(s){at(n,n.return,s)}else{var i=Ds(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(s){at(n,n.return,s)}}r&64&&LT(n),r&512&&gc(n,n.return);break;case 3:if(ra(t,n),r&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{qw(t,e)}catch(s){at(n,n.return,s)}}break;case 27:e===null&&r&4&&FT(n);case 26:case 5:ra(t,n),e===null&&r&4&&zT(n),r&512&&gc(n,n.return);break;case 12:ra(t,n);break;case 13:ra(t,n),r&4&&$T(t,n),r&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=QN.bind(null,n),dI(t,n))));break;case 22:if(r=n.memoizedState!==null||Si,!r){e=e!==null&&e.memoizedState!==null||Ut,i=Si;var a=Ut;Si=r,(Ut=e)&&!a?sa(t,n,(n.subtreeFlags&8772)!==0):ra(t,n),Si=i,Ut=a}break;case 30:break;default:ra(t,n)}}function qT(t){var e=t.alternate;e!==null&&(t.alternate=null,qT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&n0(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var yt=null,Fn=!1;function xi(t,e,n){for(n=n.child;n!==null;)GT(t,e,n),n=n.sibling}function GT(t,e,n){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(ru,n)}catch{}switch(n.tag){case 26:Ut||ni(n,e),xi(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ut||ni(n,e);var r=yt,i=Fn;Wa(n.type)&&(yt=n.stateNode,Fn=!1),xi(t,e,n),bc(n.stateNode),yt=r,Fn=i;break;case 5:Ut||ni(n,e);case 6:if(r=yt,i=Fn,yt=null,xi(t,e,n),yt=r,Fn=i,yt!==null)if(Fn)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(n.stateNode)}catch(a){at(n,e,a)}else try{yt.removeChild(n.stateNode)}catch(a){at(n,e,a)}break;case 18:yt!==null&&(Fn?(t=yt,Z_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Fc(t)):Z_(yt,n.stateNode));break;case 4:r=yt,i=Fn,yt=n.stateNode.containerInfo,Fn=!0,xi(t,e,n),yt=r,Fn=i;break;case 0:case 11:case 14:case 15:Ut||Va(2,n,e),Ut||Va(4,n,e),xi(t,e,n);break;case 1:Ut||(ni(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"&&VT(n,e,r)),xi(t,e,n);break;case 21:xi(t,e,n);break;case 22:Ut=(r=Ut)||n.memoizedState!==null,xi(t,e,n),Ut=r;break;default:xi(t,e,n)}}function $T(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Fc(t)}catch(n){at(e,e.return,n)}}function BN(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new z_),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new z_),e;default:throw Error(te(435,t.tag))}}function Tm(t,e){var n=BN(t);e.forEach(function(r){var i=KN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}function tr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r],a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 27:if(Wa(o.type)){yt=o.stateNode,Fn=!1;break e}break;case 5:yt=o.stateNode,Fn=!1;break e;case 3:case 4:yt=o.stateNode.containerInfo,Fn=!0;break e}o=o.return}if(yt===null)throw Error(te(160));GT(a,s,i),yt=null,Fn=!1,a=i.alternate,a!==null&&(a.return=null),i.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)YT(e,t),e=e.sibling}var Ur=null;function YT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:tr(e,t),nr(t),r&4&&(Va(3,t,t.return),mu(3,t),Va(5,t,t.return));break;case 1:tr(e,t),nr(t),r&512&&(Ut||n===null||ni(n,n.return)),r&64&&Si&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var i=Ur;if(tr(e,t),nr(t),r&512&&(Ut||n===null||ni(n,n.return)),r&4){var a=n!==null?n.memoizedState:null;if(r=t.memoizedState,n===null)if(r===null)if(t.stateNode===null){e:{r=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":a=i.getElementsByTagName("title")[0],(!a||a[su]||a[Nn]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector("head > title"))),_n(a,r,n),a[Nn]=t,on(a),r=a;break e;case"link":var s=rb("link","href",i).get(r+(n.href||""));if(s){for(var o=0;o<s.length;o++)if(a=s[o],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(o,1);break t}}a=i.createElement(r),_n(a,r,n),i.head.appendChild(a);break;case"meta":if(s=rb("meta","content",i).get(r+(n.content||""))){for(o=0;o<s.length;o++)if(a=s[o],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){s.splice(o,1);break t}}a=i.createElement(r),_n(a,r,n),i.head.appendChild(a);break;default:throw Error(te(468,r))}a[Nn]=t,on(a),r=a}t.stateNode=r}else ib(i,t.type,t.stateNode);else t.stateNode=nb(i,r,t.memoizedProps);else a!==r?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,r===null?ib(i,t.type,t.stateNode):nb(i,r,t.memoizedProps)):r===null&&t.stateNode!==null&&bm(t,t.memoizedProps,n.memoizedProps)}break;case 27:tr(e,t),nr(t),r&512&&(Ut||n===null||ni(n,n.return)),n!==null&&r&4&&bm(t,t.memoizedProps,n.memoizedProps);break;case 5:if(tr(e,t),nr(t),r&512&&(Ut||n===null||ni(n,n.return)),t.flags&32){i=t.stateNode;try{Xo(i,"")}catch(m){at(t,t.return,m)}}r&4&&t.stateNode!=null&&(i=t.memoizedProps,bm(t,i,n!==null?n.memoizedProps:i)),r&1024&&(wm=!0);break;case 6:if(tr(e,t),nr(t),r&4){if(t.stateNode===null)throw Error(te(162));r=t.memoizedProps,n=t.stateNode;try{n.nodeValue=r}catch(m){at(t,t.return,m)}}break;case 3:if(Dh=null,i=Ur,Ur=vf(e.containerInfo),tr(e,t),Ur=i,nr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fc(e.containerInfo)}catch(m){at(t,t.return,m)}wm&&(wm=!1,XT(t));break;case 4:r=Ur,Ur=vf(t.stateNode.containerInfo),tr(e,t),nr(t),Ur=r;break;case 12:tr(e,t),nr(t);break;case 13:tr(e,t),nr(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(j0=ii()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Tm(t,r)));break;case 22:i=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,h=Si,u=Ut;if(Si=h||i,Ut=u||l,tr(e,t),Ut=u,Si=h,nr(t),r&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||l||Si||Ut||ls(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(a=l.stateNode,i)s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=l.stateNode;var f=l.memoizedProps.style,d=f!=null&&f.hasOwnProperty("display")?f.display:null;o.style.display=d==null||typeof d=="boolean"?"":(""+d).trim()}}catch(m){at(l,l.return,m)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=i?"":l.memoizedProps}catch(m){at(l,l.return,m)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}r&4&&(r=t.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,Tm(t,n))));break;case 19:tr(e,t),nr(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Tm(t,r)));break;case 30:break;case 21:break;default:tr(e,t),nr(t)}}function nr(t){var e=t.flags;if(e&2){try{for(var n,r=t.return;r!==null;){if(BT(r)){n=r;break}r=r.return}if(n==null)throw Error(te(160));switch(n.tag){case 27:var i=n.stateNode,a=Em(t);uf(t,a,i);break;case 5:var s=n.stateNode;n.flags&32&&(Xo(s,""),n.flags&=-33);var o=Em(t);uf(t,o,s);break;case 3:case 4:var l=n.stateNode.containerInfo,h=Em(t);jp(t,h,l);break;default:throw Error(te(161))}}catch(u){at(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XT(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;XT(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ra(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)HT(t,e.alternate,e),e=e.sibling}function ls(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Va(4,e,e.return),ls(e);break;case 1:ni(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&VT(e,e.return,n),ls(e);break;case 27:bc(e.stateNode);case 26:case 5:ni(e,e.return),ls(e);break;case 22:e.memoizedState===null&&ls(e);break;case 30:ls(e);break;default:ls(e)}t=t.sibling}}function sa(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var r=e.alternate,i=t,a=e,s=a.flags;switch(a.tag){case 0:case 11:case 15:sa(i,a,n),mu(4,a);break;case 1:if(sa(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(h){at(r,r.return,h)}if(r=a,i=r.updateQueue,i!==null){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(l!==null)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)Hw(l[i],o)}catch(h){at(r,r.return,h)}}n&&s&64&&LT(a),gc(a,a.return);break;case 27:FT(a);case 26:case 5:sa(i,a,n),n&&r===null&&s&4&&zT(a),gc(a,a.return);break;case 12:sa(i,a,n);break;case 13:sa(i,a,n),n&&s&4&&$T(i,a);break;case 22:a.memoizedState===null&&sa(i,a,n),gc(a,a.return);break;case 30:break;default:sa(i,a,n)}e=e.sibling}}function D0(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&uu(n))}function O0(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&uu(t))}function Wr(t,e,n,r){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)QT(t,e,n,r),e=e.sibling}function QT(t,e,n,r){var i=e.flags;switch(e.tag){case 0:case 11:case 15:Wr(t,e,n,r),i&2048&&mu(9,e);break;case 1:Wr(t,e,n,r);break;case 3:Wr(t,e,n,r),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&uu(t)));break;case 12:if(i&2048){Wr(t,e,n,r),t=e.stateNode;try{var a=e.memoizedProps,s=a.id,o=a.onPostCommit;typeof o=="function"&&o(s,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){at(e,e.return,l)}}else Wr(t,e,n,r);break;case 13:Wr(t,e,n,r);break;case 23:break;case 22:a=e.stateNode,s=e.alternate,e.memoizedState!==null?a._visibility&2?Wr(t,e,n,r):vc(t,e):a._visibility&2?Wr(t,e,n,r):(a._visibility|=2,oo(t,e,n,r,(e.subtreeFlags&10256)!==0)),i&2048&&D0(s,e);break;case 24:Wr(t,e,n,r),i&2048&&O0(e.alternate,e);break;default:Wr(t,e,n,r)}}function oo(t,e,n,r,i){for(i=i&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var a=t,s=e,o=n,l=r,h=s.flags;switch(s.tag){case 0:case 11:case 15:oo(a,s,o,l,i),mu(8,s);break;case 23:break;case 22:var u=s.stateNode;s.memoizedState!==null?u._visibility&2?oo(a,s,o,l,i):vc(a,s):(u._visibility|=2,oo(a,s,o,l,i)),i&&h&2048&&D0(s.alternate,s);break;case 24:oo(a,s,o,l,i),i&&h&2048&&O0(s.alternate,s);break;default:oo(a,s,o,l,i)}e=e.sibling}}function vc(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,r=e,i=r.flags;switch(r.tag){case 22:vc(n,r),i&2048&&D0(r.alternate,r);break;case 24:vc(n,r),i&2048&&O0(r.alternate,r);break;default:vc(n,r)}e=e.sibling}}var ec=8192;function eo(t){if(t.subtreeFlags&ec)for(t=t.child;t!==null;)KT(t),t=t.sibling}function KT(t){switch(t.tag){case 26:eo(t),t.flags&ec&&t.memoizedState!==null&&SI(Ur,t.memoizedState,t.memoizedProps);break;case 5:eo(t);break;case 3:case 4:var e=Ur;Ur=vf(t.stateNode.containerInfo),eo(t),Ur=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=ec,ec=16777216,eo(t),ec=e):eo(t));break;default:eo(t)}}function WT(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Bl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];sn=r,JT(r,t)}WT(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ZT(t),t=t.sibling}function ZT(t){switch(t.tag){case 0:case 11:case 15:Bl(t),t.flags&2048&&Va(9,t,t.return);break;case 3:Bl(t);break;case 12:Bl(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Nh(t)):Bl(t);break;default:Bl(t)}}function Nh(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];sn=r,JT(r,t)}WT(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Va(8,e,e.return),Nh(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Nh(e));break;default:Nh(e)}t=t.sibling}}function JT(t,e){for(;sn!==null;){var n=sn;switch(n.tag){case 0:case 11:case 15:Va(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:uu(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,sn=r;else e:for(n=t;sn!==null;){r=sn;var i=r.sibling,a=r.return;if(qT(r),r===n){sn=null;break e}if(i!==null){i.return=a,sn=i;break e}sn=a}}}var FN={getCacheForType:function(t){var e=In(Kt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},HN=typeof WeakMap=="function"?WeakMap:Map,Ke=0,ct=null,Ne=null,Ve=0,Xe=0,rr=null,ba=!1,gl=!1,M0=!1,Bi=0,It=0,za=0,ws=0,k0=0,xr=0,Jo=0,yc=null,Gn=null,Pp=!1,j0=0,hf=1/0,ff=null,Na=null,vn=0,Ia=null,el=null,Lo=0,Up=0,Lp=null,ex=null,_c=0,Vp=null;function hr(){if(Ke&2&&Ve!==0)return Ve&-Ve;if(ge.T!==null){var t=Qo;return t!==0?t:U0()}return hw()}function tx(){xr===0&&(xr=!(Ve&536870912)||Fe?ow():536870912);var t=Cr.current;return t!==null&&(t.flags|=32),xr}function fr(t,e,n){(t===ct&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)&&(tl(t,0),Ea(t,Ve,xr,!1)),au(t,n),(!(Ke&2)||t!==ct)&&(t===ct&&(!(Ke&2)&&(ws|=n),It===4&&Ea(t,Ve,xr,!1)),gi(t))}function nx(t,e,n){if(Ke&6)throw Error(te(327));var r=!n&&(e&124)===0&&(e&t.expiredLanes)===0||iu(t,e),i=r?$N(t,e):xm(t,e,!0),a=r;do{if(i===0){gl&&!r&&Ea(t,e,0,!1);break}else{if(n=t.current.alternate,a&&!qN(n)){i=xm(t,e,!1),a=!1;continue}if(i===2){if(a=e,t.errorRecoveryDisabledLanes&a)var s=0;else s=t.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){e=s;e:{var o=t;i=yc;var l=o.current.memoizedState.isDehydrated;if(l&&(tl(o,s).flags|=256),s=xm(o,s,!1),s!==2){if(M0&&!l){o.errorRecoveryDisabledLanes|=a,ws|=a,i=4;break e}a=Gn,Gn=i,a!==null&&(Gn===null?Gn=a:Gn.push.apply(Gn,a))}i=s}if(a=!1,i!==2)continue}}if(i===1){tl(t,0),Ea(t,e,0,!0);break}e:{switch(r=t,a=i,a){case 0:case 1:throw Error(te(345));case 4:if((e&4194048)!==e)break;case 6:Ea(r,e,xr,!ba);break e;case 2:Gn=null;break;case 3:case 5:break;default:throw Error(te(329))}if((e&62914560)===e&&(i=j0+300-ii(),10<i)){if(Ea(r,e,xr,!ba),nd(r,0,!0)!==0)break e;r.timeoutHandle=Ex(B_.bind(null,r,n,Gn,ff,Pp,e,xr,ws,Jo,ba,a,2,-0,0),i);break e}B_(r,n,Gn,ff,Pp,e,xr,ws,Jo,ba,a,0,-0,0)}}break}while(!0);gi(t)}function B_(t,e,n,r,i,a,s,o,l,h,u,f,d,m){if(t.timeoutHandle=-1,f=e.subtreeFlags,(f&8192||(f&16785408)===16785408)&&(Lc={stylesheets:null,count:0,unsuspend:AI},KT(e),f=RI(),f!==null)){t.cancelPendingCommit=f(H_.bind(null,t,e,a,n,r,i,s,o,l,u,1,d,m)),Ea(t,a,s,!h);return}H_(t,e,a,n,r,i,s,o,l)}function qN(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!mr(a(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ea(t,e,n,r){e&=~k0,e&=~ws,t.suspendedLanes|=e,t.pingedLanes&=~e,r&&(t.warmLanes|=e),r=t.expirationTimes;for(var i=e;0<i;){var a=31-ur(i),s=1<<a;r[a]=-1,i&=~s}n!==0&&cw(t,n,e)}function fd(){return Ke&6?!0:(pu(0),!1)}function P0(){if(Ne!==null){if(Xe===0)var t=Ne.return;else t=Ne,Ii=Fs=null,w0(t),Uo=null,jc=0,t=Ne;for(;t!==null;)UT(t.alternate,t),t=t.return;Ne=null}}function tl(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,lI(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),P0(),ct=t,Ne=n=ki(t.current,null),Ve=e,Xe=0,rr=null,ba=!1,gl=iu(t,e),M0=!1,Jo=xr=k0=ws=za=It=0,Gn=yc=null,Pp=!1,e&8&&(e|=e&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=e;0<r;){var i=31-ur(r),a=1<<i;e|=t[i],r&=~a}return Bi=e,sd(),n}function rx(t,e){Se=null,ge.H=af,e===hu||e===ld?(e=__(),Xe=3):e===Bw?(e=__(),Xe=4):Xe=e===DT?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,rr=e,Ne===null&&(It=1,lf(t,wr(e,t.current)))}function ix(){var t=ge.H;return ge.H=af,t===null?af:t}function ax(){var t=ge.A;return ge.A=FN,t}function zp(){It=4,ba||(Ve&4194048)!==Ve&&Cr.current!==null||(gl=!0),!(za&134217727)&&!(ws&134217727)||ct===null||Ea(ct,Ve,xr,!1)}function xm(t,e,n){var r=Ke;Ke|=2;var i=ix(),a=ax();(ct!==t||Ve!==e)&&(ff=null,tl(t,e)),e=!1;var s=It;e:do try{if(Xe!==0&&Ne!==null){var o=Ne,l=rr;switch(Xe){case 8:P0(),s=6;break e;case 3:case 2:case 9:case 6:Cr.current===null&&(e=!0);var h=Xe;if(Xe=0,rr=null,So(t,o,l,h),n&&gl){s=0;break e}break;default:h=Xe,Xe=0,rr=null,So(t,o,l,h)}}GN(),s=It;break}catch(u){rx(t,u)}while(!0);return e&&t.shellSuspendCounter++,Ii=Fs=null,Ke=r,ge.H=i,ge.A=a,Ne===null&&(ct=null,Ve=0,sd()),s}function GN(){for(;Ne!==null;)sx(Ne)}function $N(t,e){var n=Ke;Ke|=2;var r=ix(),i=ax();ct!==t||Ve!==e?(ff=null,hf=ii()+500,tl(t,e)):gl=iu(t,e);e:do try{if(Xe!==0&&Ne!==null){e=Ne;var a=rr;t:switch(Xe){case 1:Xe=0,rr=null,So(t,e,a,1);break;case 2:case 9:if(y_(a)){Xe=0,rr=null,F_(e);break}e=function(){Xe!==2&&Xe!==9||ct!==t||(Xe=7),gi(t)},a.then(e,e);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:y_(a)?(Xe=0,rr=null,F_(e)):(Xe=0,rr=null,So(t,e,a,7));break;case 5:var s=null;switch(Ne.tag){case 26:s=Ne.memoizedState;case 5:case 27:var o=Ne;if(!s||Ax(s)){Xe=0,rr=null;var l=o.sibling;if(l!==null)Ne=l;else{var h=o.return;h!==null?(Ne=h,dd(h)):Ne=null}break t}}Xe=0,rr=null,So(t,e,a,5);break;case 6:Xe=0,rr=null,So(t,e,a,6);break;case 8:P0(),It=6;break e;default:throw Error(te(462))}}YN();break}catch(u){rx(t,u)}while(!0);return Ii=Fs=null,ge.H=r,ge.A=i,Ke=n,Ne!==null?0:(ct=null,Ve=0,sd(),It)}function YN(){for(;Ne!==null&&!pC();)sx(Ne)}function sx(t){var e=PT(t.alternate,t,Bi);t.memoizedProps=t.pendingProps,e===null?dd(t):Ne=e}function F_(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=j_(n,e,e.pendingProps,e.type,void 0,Ve);break;case 11:e=j_(n,e,e.pendingProps,e.type.render,e.ref,Ve);break;case 5:w0(e);default:UT(n,e),e=Ne=Uw(e,Bi),e=PT(n,e,Bi)}t.memoizedProps=t.pendingProps,e===null?dd(t):Ne=e}function So(t,e,n,r){Ii=Fs=null,w0(e),Uo=null,jc=0;var i=e.return;try{if(PN(t,i,e,n,Ve)){It=1,lf(t,wr(n,t.current)),Ne=null;return}}catch(a){if(i!==null)throw Ne=i,a;It=1,lf(t,wr(n,t.current)),Ne=null;return}e.flags&32768?(Fe||r===1?t=!0:gl||Ve&536870912?t=!1:(ba=t=!0,(r===2||r===9||r===3||r===6)&&(r=Cr.current,r!==null&&r.tag===13&&(r.flags|=16384))),ox(e,t)):dd(e)}function dd(t){var e=t;do{if(e.flags&32768){ox(e,ba);return}t=e.return;var n=LN(e.alternate,e,Bi);if(n!==null){Ne=n;return}if(e=e.sibling,e!==null){Ne=e;return}Ne=e=t}while(e!==null);It===0&&(It=5)}function ox(t,e){do{var n=VN(t.alternate,t);if(n!==null){n.flags&=32767,Ne=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Ne=t;return}Ne=t=n}while(t!==null);It=6,Ne=null}function H_(t,e,n,r,i,a,s,o,l){t.cancelPendingCommit=null;do md();while(vn!==0);if(Ke&6)throw Error(te(327));if(e!==null){if(e===t.current)throw Error(te(177));if(a=e.lanes|e.childLanes,a|=c0,AC(t,n,a,s,o,l),t===ct&&(Ne=ct=null,Ve=0),el=e,Ia=t,Lo=n,Up=a,Lp=i,ex=r,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,WN(Xh,function(){return fx(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(e.flags&13878)!==0,e.subtreeFlags&13878||r){r=ge.T,ge.T=null,i=He.p,He.p=2,s=Ke,Ke|=4;try{zN(t,e,n)}finally{Ke=s,He.p=i,ge.T=r}}vn=1,lx(),cx(),ux()}}function lx(){if(vn===1){vn=0;var t=Ia,e=el,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ge.T,ge.T=null;var r=He.p;He.p=2;var i=Ke;Ke|=4;try{YT(e,t);var a=qp,s=Nw(t.containerInfo),o=a.focusedElem,l=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&Cw(o.ownerDocument.documentElement,o)){if(l!==null&&l0(o)){var h=l.start,u=l.end;if(u===void 0&&(u=h),"selectionStart"in o)o.selectionStart=h,o.selectionEnd=Math.min(u,o.value.length);else{var f=o.ownerDocument||document,d=f&&f.defaultView||window;if(d.getSelection){var m=d.getSelection(),b=o.textContent.length,A=Math.min(l.start,b),D=l.end===void 0?A:Math.min(l.end,b);!m.extend&&A>D&&(s=D,D=A,A=s);var w=u_(o,A),x=u_(o,D);if(w&&x&&(m.rangeCount!==1||m.anchorNode!==w.node||m.anchorOffset!==w.offset||m.focusNode!==x.node||m.focusOffset!==x.offset)){var C=f.createRange();C.setStart(w.node,w.offset),m.removeAllRanges(),A>D?(m.addRange(C),m.extend(x.node,x.offset)):(C.setEnd(x.node,x.offset),m.addRange(C))}}}}for(f=[],m=o;m=m.parentNode;)m.nodeType===1&&f.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<f.length;o++){var O=f[o];O.element.scrollLeft=O.left,O.element.scrollTop=O.top}}bf=!!Hp,qp=Hp=null}finally{Ke=i,He.p=r,ge.T=n}}t.current=e,vn=2}}function cx(){if(vn===2){vn=0;var t=Ia,e=el,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ge.T,ge.T=null;var r=He.p;He.p=2;var i=Ke;Ke|=4;try{HT(t,e.alternate,e)}finally{Ke=i,He.p=r,ge.T=n}}vn=3}}function ux(){if(vn===4||vn===3){vn=0,gC();var t=Ia,e=el,n=Lo,r=ex;e.subtreeFlags&10256||e.flags&10256?vn=5:(vn=0,el=Ia=null,hx(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(Na=null),t0(n),e=e.stateNode,cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(ru,e,void 0,(e.current.flags&128)===128)}catch{}if(r!==null){e=ge.T,i=He.p,He.p=2,ge.T=null;try{for(var a=t.onRecoverableError,s=0;s<r.length;s++){var o=r[s];a(o.value,{componentStack:o.stack})}}finally{ge.T=e,He.p=i}}Lo&3&&md(),gi(t),i=t.pendingLanes,n&4194090&&i&42?t===Vp?_c++:(_c=0,Vp=t):_c=0,pu(0)}}function hx(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,uu(e)))}function md(t){return lx(),cx(),ux(),fx()}function fx(){if(vn!==5)return!1;var t=Ia,e=Up;Up=0;var n=t0(Lo),r=ge.T,i=He.p;try{He.p=32>n?32:n,ge.T=null,n=Lp,Lp=null;var a=Ia,s=Lo;if(vn=0,el=Ia=null,Lo=0,Ke&6)throw Error(te(331));var o=Ke;if(Ke|=4,ZT(a.current),QT(a,a.current,s,n),Ke=o,pu(0,!1),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(ru,a)}catch{}return!0}finally{He.p=i,ge.T=r,hx(t,e)}}function q_(t,e,n){e=wr(n,e),e=Op(t.stateNode,e,2),t=Ca(t,e,2),t!==null&&(au(t,2),gi(t))}function at(t,e,n){if(t.tag===3)q_(t,t,n);else for(;e!==null;){if(e.tag===3){q_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Na===null||!Na.has(r))){t=wr(n,t),n=NT(2),r=Ca(e,n,2),r!==null&&(IT(n,r,e,t),au(r,2),gi(r));break}}e=e.return}}function Am(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new HN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(M0=!0,i.add(n),t=XN.bind(null,t,e,n),e.then(t,t))}function XN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,ct===t&&(Ve&n)===n&&(It===4||It===3&&(Ve&62914560)===Ve&&300>ii()-j0?!(Ke&2)&&tl(t,0):k0|=n,Jo===Ve&&(Jo=0)),gi(t)}function dx(t,e){e===0&&(e=lw()),t=pl(t,e),t!==null&&(au(t,e),gi(t))}function QN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dx(t,n)}function KN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(te(314))}r!==null&&r.delete(e),dx(t,n)}function WN(t,e){return Jg(t,e)}var df=null,lo=null,Bp=!1,mf=!1,Sm=!1,Ts=0;function gi(t){t!==lo&&t.next===null&&(lo===null?df=lo=t:lo=lo.next=t),mf=!0,Bp||(Bp=!0,JN())}function pu(t,e){if(!Sm&&mf){Sm=!0;do for(var n=!1,r=df;r!==null;){if(t!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var s=r.suspendedLanes,o=r.pingedLanes;a=(1<<31-ur(42|t)+1)-1,a&=i&~(s&~o),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,G_(r,a))}else a=Ve,a=nd(r,r===ct?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||iu(r,a)||(n=!0,G_(r,a));r=r.next}while(n);Sm=!1}}function ZN(){mx()}function mx(){mf=Bp=!1;var t=0;Ts!==0&&(oI()&&(t=Ts),Ts=0);for(var e=ii(),n=null,r=df;r!==null;){var i=r.next,a=px(r,e);a===0?(r.next=null,n===null?df=i:n.next=i,i===null&&(lo=n)):(n=r,(t!==0||a&3)&&(mf=!0)),r=i}pu(t)}function px(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes&-62914561;0<a;){var s=31-ur(a),o=1<<s,l=i[s];l===-1?(!(o&n)||o&r)&&(i[s]=xC(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}if(e=ct,n=Ve,n=nd(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,n===0||t===e&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&Zd(r),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||iu(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(r!==null&&Zd(r),t0(n)){case 2:case 8:n=aw;break;case 32:n=Xh;break;case 268435456:n=sw;break;default:n=Xh}return r=gx.bind(null,t),n=Jg(n,r),t.callbackPriority=e,t.callbackNode=n,e}return r!==null&&r!==null&&Zd(r),t.callbackPriority=2,t.callbackNode=null,2}function gx(t,e){if(vn!==0&&vn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(md()&&t.callbackNode!==n)return null;var r=Ve;return r=nd(t,t===ct?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(nx(t,r,e),px(t,ii()),t.callbackNode!=null&&t.callbackNode===n?gx.bind(null,t):null)}function G_(t,e){if(md())return null;nx(t,e,!0)}function JN(){cI(function(){Ke&6?Jg(iw,ZN):mx()})}function U0(){return Ts===0&&(Ts=ow()),Ts}function $_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Eh(""+t)}function Y_(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function eI(t,e,n,r,i){if(e==="submit"&&n&&n.stateNode===i){var a=$_((i[Wn]||null).action),s=r.submitter;s&&(e=(e=s[Wn]||null)?$_(e.formAction):s.getAttribute("formAction"),e!==null&&(a=e,s=null));var o=new rd("action","action",null,r,i);t.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Ts!==0){var l=s?Y_(i,s):new FormData(i);Ip(n,{pending:!0,data:l,method:i.method,action:a},null,l)}}else typeof a=="function"&&(o.preventDefault(),l=s?Y_(i,s):new FormData(i),Ip(n,{pending:!0,data:l,method:i.method,action:a},a,l))},currentTarget:i}]})}}for(var Rm=0;Rm<yp.length;Rm++){var Cm=yp[Rm],tI=Cm.toLowerCase(),nI=Cm[0].toUpperCase()+Cm.slice(1);qr(tI,"on"+nI)}qr(Dw,"onAnimationEnd");qr(Ow,"onAnimationIteration");qr(Mw,"onAnimationStart");qr("dblclick","onDoubleClick");qr("focusin","onFocus");qr("focusout","onBlur");qr(_N,"onTransitionRun");qr(bN,"onTransitionStart");qr(EN,"onTransitionCancel");qr(kw,"onTransitionEnd");Yo("onMouseEnter",["mouseout","mouseover"]);Yo("onMouseLeave",["mouseout","mouseover"]);Yo("onPointerEnter",["pointerout","pointerover"]);Yo("onPointerLeave",["pointerout","pointerover"]);Vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pc));function vx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,h=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=h;try{a(i)}catch(u){of(u)}i.currentTarget=null,a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,h=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=h;try{a(i)}catch(u){of(u)}i.currentTarget=null,a=l}}}}function Ce(t,e){var n=e[hp];n===void 0&&(n=e[hp]=new Set);var r=t+"__bubble";n.has(r)||(yx(e,t,2,!1),n.add(r))}function Nm(t,e,n){var r=0;e&&(r|=4),yx(n,t,r,e)}var ah="_reactListening"+Math.random().toString(36).slice(2);function L0(t){if(!t[ah]){t[ah]=!0,fw.forEach(function(n){n!=="selectionchange"&&(rI.has(n)||Nm(n,!1,t),Nm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ah]||(e[ah]=!0,Nm("selectionchange",!1,e))}}function yx(t,e,n,r){switch(Ix(e)){case 2:var i=II;break;case 8:i=DI;break;default:i=F0}n=i.bind(null,e,n,t),i=void 0,!pp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Im(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;o!==null;){if(s=vo(o),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue e}o=o.parentNode}}r=r.return}bw(function(){var h=a,u=i0(n),f=[];e:{var d=jw.get(t);if(d!==void 0){var m=rd,b=t;switch(t){case"keypress":if(Th(n)===0)break e;case"keydown":case"keyup":m=WC;break;case"focusin":b="focus",m=sm;break;case"focusout":b="blur",m=sm;break;case"beforeblur":case"afterblur":m=sm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=e_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=VC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=eN;break;case Dw:case Ow:case Mw:m=FC;break;case kw:m=nN;break;case"scroll":case"scrollend":m=UC;break;case"wheel":m=iN;break;case"copy":case"cut":case"paste":m=qC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=n_;break;case"toggle":case"beforetoggle":m=sN}var A=(e&4)!==0,D=!A&&(t==="scroll"||t==="scrollend"),w=A?d!==null?d+"Capture":null:d;A=[];for(var x=h,C;x!==null;){var O=x;if(C=O.stateNode,O=O.tag,O!==5&&O!==26&&O!==27||C===null||w===null||(O=Ic(x,w),O!=null&&A.push(Uc(x,O,C))),D)break;x=x.return}0<A.length&&(d=new m(d,b,null,n,u),f.push({event:d,listeners:A}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",d&&n!==mp&&(b=n.relatedTarget||n.fromElement)&&(vo(b)||b[dl]))break e;if((m||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,m?(b=n.relatedTarget||n.toElement,m=h,b=b?vo(b):null,b!==null&&(D=nu(b),A=b.tag,b!==D||A!==5&&A!==27&&A!==6)&&(b=null)):(m=null,b=h),m!==b)){if(A=e_,O="onMouseLeave",w="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(A=n_,O="onPointerLeave",w="onPointerEnter",x="pointer"),D=m==null?d:Jl(m),C=b==null?d:Jl(b),d=new A(O,x+"leave",m,n,u),d.target=D,d.relatedTarget=C,O=null,vo(u)===h&&(A=new A(w,x+"enter",b,n,u),A.target=C,A.relatedTarget=D,O=A),D=O,m&&b)t:{for(A=m,w=b,x=0,C=A;C;C=to(C))x++;for(C=0,O=w;O;O=to(O))C++;for(;0<x-C;)A=to(A),x--;for(;0<C-x;)w=to(w),C--;for(;x--;){if(A===w||w!==null&&A===w.alternate)break t;A=to(A),w=to(w)}A=null}else A=null;m!==null&&X_(f,d,m,A,!1),b!==null&&D!==null&&X_(f,D,b,A,!0)}}e:{if(d=h?Jl(h):window,m=d.nodeName&&d.nodeName.toLowerCase(),m==="select"||m==="input"&&d.type==="file")var U=s_;else if(a_(d))if(Sw)U=gN;else{U=mN;var N=dN}else m=d.nodeName,!m||m.toLowerCase()!=="input"||d.type!=="checkbox"&&d.type!=="radio"?h&&r0(h.elementType)&&(U=s_):U=pN;if(U&&(U=U(t,h))){Aw(f,U,n,u);break e}N&&N(t,d,h),t==="focusout"&&h&&d.type==="number"&&h.memoizedProps.value!=null&&dp(d,"number",d.value)}switch(N=h?Jl(h):window,t){case"focusin":(a_(N)||N.contentEditable==="true")&&(bo=N,gp=h,cc=null);break;case"focusout":cc=gp=bo=null;break;case"mousedown":vp=!0;break;case"contextmenu":case"mouseup":case"dragend":vp=!1,h_(f,n,u);break;case"selectionchange":if(yN)break;case"keydown":case"keyup":h_(f,n,u)}var _;if(o0)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else _o?Tw(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(ww&&n.locale!=="ko"&&(_o||g!=="onCompositionStart"?g==="onCompositionEnd"&&_o&&(_=Ew()):(_a=u,a0="value"in _a?_a.value:_a.textContent,_o=!0)),N=pf(h,g),0<N.length&&(g=new t_(g,t,null,n,u),f.push({event:g,listeners:N}),_?g.data=_:(_=xw(n),_!==null&&(g.data=_)))),(_=lN?cN(t,n):uN(t,n))&&(g=pf(h,"onBeforeInput"),0<g.length&&(N=new t_("onBeforeInput","beforeinput",null,n,u),f.push({event:N,listeners:g}),N.data=_)),eI(f,t,h,n,u)}vx(f,e)})}function Uc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=Ic(t,n),i!=null&&r.unshift(Uc(t,i,a)),i=Ic(t,e),i!=null&&r.push(Uc(t,i,a))),t.tag===3)return r;t=t.return}return[]}function to(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function X_(t,e,n,r,i){for(var a=e._reactName,s=[];n!==null&&n!==r;){var o=n,l=o.alternate,h=o.stateNode;if(o=o.tag,l!==null&&l===r)break;o!==5&&o!==26&&o!==27||h===null||(l=h,i?(h=Ic(n,a),h!=null&&s.unshift(Uc(n,h,l))):i||(h=Ic(n,a),h!=null&&s.push(Uc(n,h,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var iI=/\r\n?/g,aI=/\u0000|\uFFFD/g;function Q_(t){return(typeof t=="string"?t:""+t).replace(iI,`
`).replace(aI,"")}function _x(t,e){return e=Q_(e),Q_(t)===e}function pd(){}function tt(t,e,n,r,i,a){switch(n){case"children":typeof r=="string"?e==="body"||e==="textarea"&&r===""||Xo(t,r):(typeof r=="number"||typeof r=="bigint")&&e!=="body"&&Xo(t,""+r);break;case"className":Zu(t,"class",r);break;case"tabIndex":Zu(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Zu(t,n,r);break;case"style":_w(t,r,a);break;case"data":if(e!=="object"){Zu(t,"data",r);break}case"src":case"href":if(r===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=Eh(""+r),t.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(e!=="input"&&tt(t,e,"name",i.name,i,null),tt(t,e,"formEncType",i.formEncType,i,null),tt(t,e,"formMethod",i.formMethod,i,null),tt(t,e,"formTarget",i.formTarget,i,null)):(tt(t,e,"encType",i.encType,i,null),tt(t,e,"method",i.method,i,null),tt(t,e,"target",i.target,i,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=Eh(""+r),t.setAttribute(n,r);break;case"onClick":r!=null&&(t.onclick=pd);break;case"onScroll":r!=null&&Ce("scroll",t);break;case"onScrollEnd":r!=null&&Ce("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(te(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(te(60));t.innerHTML=n}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}n=Eh(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""+r):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":r===!0?t.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,r):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(n,r):t.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(n):t.setAttribute(n,r);break;case"popover":Ce("beforetoggle",t),Ce("toggle",t),bh(t,"popover",r);break;case"xlinkActuate":wi(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":wi(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":wi(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":wi(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":wi(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":wi(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":wi(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":wi(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":wi(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":bh(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=jC.get(n)||n,bh(t,n,r))}}function Fp(t,e,n,r,i,a){switch(n){case"style":_w(t,r,a);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(te(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(te(60));t.innerHTML=n}}break;case"children":typeof r=="string"?Xo(t,r):(typeof r=="number"||typeof r=="bigint")&&Xo(t,""+r);break;case"onScroll":r!=null&&Ce("scroll",t);break;case"onScrollEnd":r!=null&&Ce("scrollend",t);break;case"onClick":r!=null&&(t.onclick=pd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!dw.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),a=t[Wn]||null,a=a!=null?a[n]:null,typeof a=="function"&&t.removeEventListener(e,a,i),typeof r=="function")){typeof a!="function"&&a!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,r,i);break e}n in t?t[n]=r:r===!0?t.setAttribute(n,""):bh(t,n,r)}}}function _n(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",t),Ce("load",t);var r=!1,i=!1,a;for(a in n)if(n.hasOwnProperty(a)){var s=n[a];if(s!=null)switch(a){case"src":r=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(te(137,e));default:tt(t,e,a,s,n,null)}}i&&tt(t,e,"srcSet",n.srcSet,n,null),r&&tt(t,e,"src",n.src,n,null);return;case"input":Ce("invalid",t);var o=a=s=i=null,l=null,h=null;for(r in n)if(n.hasOwnProperty(r)){var u=n[r];if(u!=null)switch(r){case"name":i=u;break;case"type":s=u;break;case"checked":l=u;break;case"defaultChecked":h=u;break;case"value":a=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(te(137,e));break;default:tt(t,e,r,u,n,null)}}gw(t,a,o,l,h,s,i,!1),Qh(t);return;case"select":Ce("invalid",t),r=s=a=null;for(i in n)if(n.hasOwnProperty(i)&&(o=n[i],o!=null))switch(i){case"value":a=o;break;case"defaultValue":s=o;break;case"multiple":r=o;default:tt(t,e,i,o,n,null)}e=a,n=s,t.multiple=!!r,e!=null?Oo(t,!!r,e,!1):n!=null&&Oo(t,!!r,n,!0);return;case"textarea":Ce("invalid",t),a=i=r=null;for(s in n)if(n.hasOwnProperty(s)&&(o=n[s],o!=null))switch(s){case"value":r=o;break;case"defaultValue":i=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(te(91));break;default:tt(t,e,s,o,n,null)}yw(t,r,i,a),Qh(t);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:tt(t,e,l,r,n,null)}return;case"dialog":Ce("beforetoggle",t),Ce("toggle",t),Ce("cancel",t),Ce("close",t);break;case"iframe":case"object":Ce("load",t);break;case"video":case"audio":for(r=0;r<Pc.length;r++)Ce(Pc[r],t);break;case"image":Ce("error",t),Ce("load",t);break;case"details":Ce("toggle",t);break;case"embed":case"source":case"link":Ce("error",t),Ce("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(r=n[h],r!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(te(137,e));default:tt(t,e,h,r,n,null)}return;default:if(r0(e)){for(u in n)n.hasOwnProperty(u)&&(r=n[u],r!==void 0&&Fp(t,e,u,r,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(r=n[o],r!=null&&tt(t,e,o,r,n,null))}function sI(t,e,n,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,s=null,o=null,l=null,h=null,u=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":l=f;default:r.hasOwnProperty(m)||tt(t,e,m,null,r,f)}}for(var d in r){var m=r[d];if(f=n[d],r.hasOwnProperty(d)&&(m!=null||f!=null))switch(d){case"type":a=m;break;case"name":i=m;break;case"checked":h=m;break;case"defaultChecked":u=m;break;case"value":s=m;break;case"defaultValue":o=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(te(137,e));break;default:m!==f&&tt(t,e,d,m,r,f)}}fp(t,s,o,l,h,u,a,i);return;case"select":m=s=o=d=null;for(a in n)if(l=n[a],n.hasOwnProperty(a)&&l!=null)switch(a){case"value":break;case"multiple":m=l;default:r.hasOwnProperty(a)||tt(t,e,a,null,r,l)}for(i in r)if(a=r[i],l=n[i],r.hasOwnProperty(i)&&(a!=null||l!=null))switch(i){case"value":d=a;break;case"defaultValue":o=a;break;case"multiple":s=a;default:a!==l&&tt(t,e,i,a,r,l)}e=o,n=s,r=m,d!=null?Oo(t,!!n,d,!1):!!r!=!!n&&(e!=null?Oo(t,!!n,e,!0):Oo(t,!!n,n?[]:"",!1));return;case"textarea":m=d=null;for(o in n)if(i=n[o],n.hasOwnProperty(o)&&i!=null&&!r.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:tt(t,e,o,null,r,i)}for(s in r)if(i=r[s],a=n[s],r.hasOwnProperty(s)&&(i!=null||a!=null))switch(s){case"value":d=i;break;case"defaultValue":m=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(te(91));break;default:i!==a&&tt(t,e,s,i,r,a)}vw(t,d,m);return;case"option":for(var b in n)if(d=n[b],n.hasOwnProperty(b)&&d!=null&&!r.hasOwnProperty(b))switch(b){case"selected":t.selected=!1;break;default:tt(t,e,b,null,r,d)}for(l in r)if(d=r[l],m=n[l],r.hasOwnProperty(l)&&d!==m&&(d!=null||m!=null))switch(l){case"selected":t.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:tt(t,e,l,d,r,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var A in n)d=n[A],n.hasOwnProperty(A)&&d!=null&&!r.hasOwnProperty(A)&&tt(t,e,A,null,r,d);for(h in r)if(d=r[h],m=n[h],r.hasOwnProperty(h)&&d!==m&&(d!=null||m!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(te(137,e));break;default:tt(t,e,h,d,r,m)}return;default:if(r0(e)){for(var D in n)d=n[D],n.hasOwnProperty(D)&&d!==void 0&&!r.hasOwnProperty(D)&&Fp(t,e,D,void 0,r,d);for(u in r)d=r[u],m=n[u],!r.hasOwnProperty(u)||d===m||d===void 0&&m===void 0||Fp(t,e,u,d,r,m);return}}for(var w in n)d=n[w],n.hasOwnProperty(w)&&d!=null&&!r.hasOwnProperty(w)&&tt(t,e,w,null,r,d);for(f in r)d=r[f],m=n[f],!r.hasOwnProperty(f)||d===m||d==null&&m==null||tt(t,e,f,d,r,m)}var Hp=null,qp=null;function gf(t){return t.nodeType===9?t:t.ownerDocument}function K_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bx(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Gp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dm=null;function oI(){var t=window.event;return t&&t.type==="popstate"?t===Dm?!1:(Dm=t,!0):(Dm=null,!1)}var Ex=typeof setTimeout=="function"?setTimeout:void 0,lI=typeof clearTimeout=="function"?clearTimeout:void 0,W_=typeof Promise=="function"?Promise:void 0,cI=typeof queueMicrotask=="function"?queueMicrotask:typeof W_<"u"?function(t){return W_.resolve(null).then(t).catch(uI)}:Ex;function uI(t){setTimeout(function(){throw t})}function Wa(t){return t==="head"}function Z_(t,e){var n=e,r=0,i=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(0<r&&8>r){n=r;var s=t.ownerDocument;if(n&1&&bc(s.documentElement),n&2&&bc(s.body),n&4)for(n=s.head,bc(n),s=n.firstChild;s;){var o=s.nextSibling,l=s.nodeName;s[su]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=o}}if(i===0){t.removeChild(a),Fc(e);return}i--}else n==="$"||n==="$?"||n==="$!"?i++:r=n.charCodeAt(0)-48;else r=0;n=a}while(n);Fc(e)}function $p(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":$p(n),n0(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function hI(t,e,n,r){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[su])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(a=t.getAttribute("rel"),a==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(a!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(a=t.getAttribute("src"),(a!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var a=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===a)return t}else return t;if(t=Br(t.nextSibling),t===null)break}return null}function fI(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Br(t.nextSibling),t===null))return null;return t}function Yp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function dI(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var r=function(){e(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function Br(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var Xp=null;function J_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function wx(t,e,n){switch(e=gf(n),t){case"html":if(t=e.documentElement,!t)throw Error(te(452));return t;case"head":if(t=e.head,!t)throw Error(te(453));return t;case"body":if(t=e.body,!t)throw Error(te(454));return t;default:throw Error(te(451))}}function bc(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);n0(t)}var Nr=new Map,eb=new Set;function vf(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Yi=He.d;He.d={f:mI,r:pI,D:gI,C:vI,L:yI,m:_I,X:EI,S:bI,M:wI};function mI(){var t=Yi.f(),e=fd();return t||e}function pI(t){var e=ml(t);e!==null&&e.tag===5&&e.type==="form"?pT(e):Yi.r(t)}var vl=typeof document>"u"?null:document;function Tx(t,e,n){var r=vl;if(r&&typeof e=="string"&&e){var i=Er(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),eb.has(i)||(eb.add(i),t={rel:t,crossOrigin:n,href:e},r.querySelector(i)===null&&(e=r.createElement("link"),_n(e,"link",t),on(e),r.head.appendChild(e)))}}function gI(t){Yi.D(t),Tx("dns-prefetch",t,null)}function vI(t,e){Yi.C(t,e),Tx("preconnect",t,e)}function yI(t,e,n){Yi.L(t,e,n);var r=vl;if(r&&t&&e){var i='link[rel="preload"][as="'+Er(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+Er(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+Er(n.imageSizes)+'"]')):i+='[href="'+Er(t)+'"]';var a=i;switch(e){case"style":a=nl(t);break;case"script":a=yl(t)}Nr.has(a)||(t=pt({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Nr.set(a,t),r.querySelector(i)!==null||e==="style"&&r.querySelector(gu(a))||e==="script"&&r.querySelector(vu(a))||(e=r.createElement("link"),_n(e,"link",t),on(e),r.head.appendChild(e)))}}function _I(t,e){Yi.m(t,e);var n=vl;if(n&&t){var r=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+Er(r)+'"][href="'+Er(t)+'"]',a=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=yl(t)}if(!Nr.has(a)&&(t=pt({rel:"modulepreload",href:t},e),Nr.set(a,t),n.querySelector(i)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(vu(a)))return}r=n.createElement("link"),_n(r,"link",t),on(r),n.head.appendChild(r)}}}function bI(t,e,n){Yi.S(t,e,n);var r=vl;if(r&&t){var i=Do(r).hoistableStyles,a=nl(t);e=e||"default";var s=i.get(a);if(!s){var o={loading:0,preload:null};if(s=r.querySelector(gu(a)))o.loading=5;else{t=pt({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Nr.get(a))&&V0(t,n);var l=s=r.createElement("link");on(l),_n(l,"link",t),l._p=new Promise(function(h,u){l.onload=h,l.onerror=u}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Ih(s,e,r)}s={type:"stylesheet",instance:s,count:1,state:o},i.set(a,s)}}}function EI(t,e){Yi.X(t,e);var n=vl;if(n&&t){var r=Do(n).hoistableScripts,i=yl(t),a=r.get(i);a||(a=n.querySelector(vu(i)),a||(t=pt({src:t,async:!0},e),(e=Nr.get(i))&&z0(t,e),a=n.createElement("script"),on(a),_n(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}function wI(t,e){Yi.M(t,e);var n=vl;if(n&&t){var r=Do(n).hoistableScripts,i=yl(t),a=r.get(i);a||(a=n.querySelector(vu(i)),a||(t=pt({src:t,async:!0,type:"module"},e),(e=Nr.get(i))&&z0(t,e),a=n.createElement("script"),on(a),_n(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}function tb(t,e,n,r){var i=(i=Sa.current)?vf(i):null;if(!i)throw Error(te(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=nl(n.href),n=Do(i).hoistableStyles,r=n.get(e),r||(r={type:"style",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=nl(n.href);var a=Do(i).hoistableStyles,s=a.get(t);if(s||(i=i.ownerDocument||i,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(t,s),(a=i.querySelector(gu(t)))&&!a._p&&(s.instance=a,s.state.loading=5),Nr.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Nr.set(t,n),a||TI(i,t,n,s.state))),e&&r===null)throw Error(te(528,""));return s}if(e&&r!==null)throw Error(te(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=yl(n),n=Do(i).hoistableScripts,r=n.get(e),r||(r={type:"script",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(te(444,t))}}function nl(t){return'href="'+Er(t)+'"'}function gu(t){return'link[rel="stylesheet"]['+t+"]"}function xx(t){return pt({},t,{"data-precedence":t.precedence,precedence:null})}function TI(t,e,n,r){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?r.loading=1:(e=t.createElement("link"),r.preload=e,e.addEventListener("load",function(){return r.loading|=1}),e.addEventListener("error",function(){return r.loading|=2}),_n(e,"link",n),on(e),t.head.appendChild(e))}function yl(t){return'[src="'+Er(t)+'"]'}function vu(t){return"script[async]"+t}function nb(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var r=t.querySelector('style[data-href~="'+Er(n.href)+'"]');if(r)return e.instance=r,on(r),r;var i=pt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),on(r),_n(r,"style",i),Ih(r,n.precedence,t),e.instance=r;case"stylesheet":i=nl(n.href);var a=t.querySelector(gu(i));if(a)return e.state.loading|=4,e.instance=a,on(a),a;r=xx(n),(i=Nr.get(i))&&V0(r,i),a=(t.ownerDocument||t).createElement("link"),on(a);var s=a;return s._p=new Promise(function(o,l){s.onload=o,s.onerror=l}),_n(a,"link",r),e.state.loading|=4,Ih(a,n.precedence,t),e.instance=a;case"script":return a=yl(n.src),(i=t.querySelector(vu(a)))?(e.instance=i,on(i),i):(r=n,(i=Nr.get(a))&&(r=pt({},n),z0(r,i)),t=t.ownerDocument||t,i=t.createElement("script"),on(i),_n(i,"link",r),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(te(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(r=e.instance,e.state.loading|=4,Ih(r,n.precedence,t));return e.instance}function Ih(t,e,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,a=i,s=0;s<r.length;s++){var o=r[s];if(o.dataset.precedence===e)a=o;else if(a!==i)break}a?a.parentNode.insertBefore(t,a.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function V0(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function z0(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Dh=null;function rb(t,e,n){if(Dh===null){var r=new Map,i=Dh=new Map;i.set(n,r)}else i=Dh,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(t))return r;for(r.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var a=n[i];if(!(a[su]||a[Nn]||t==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var s=a.getAttribute(e)||"";s=t+s;var o=r.get(s);o?o.push(a):r.set(s,[a])}}return r}function ib(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function xI(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Ax(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Lc=null;function AI(){}function SI(t,e,n){if(Lc===null)throw Error(te(475));var r=Lc;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var i=nl(n.href),a=t.querySelector(gu(i));if(a){t=a._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(r.count++,r=yf.bind(r),t.then(r,r)),e.state.loading|=4,e.instance=a,on(a);return}a=t.ownerDocument||t,n=xx(n),(i=Nr.get(i))&&V0(n,i),a=a.createElement("link"),on(a);var s=a;s._p=new Promise(function(o,l){s.onload=o,s.onerror=l}),_n(a,"link",n),e.instance=a}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(r.count++,e=yf.bind(r),t.addEventListener("load",e),t.addEventListener("error",e))}}function RI(){if(Lc===null)throw Error(te(475));var t=Lc;return t.stylesheets&&t.count===0&&Qp(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&Qp(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function yf(){if(this.count--,this.count===0){if(this.stylesheets)Qp(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var _f=null;function Qp(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,_f=new Map,e.forEach(CI,t),_f=null,yf.call(t))}function CI(t,e){if(!(e.state.loading&4)){var n=_f.get(t);if(n)var r=n.get(null);else{n=new Map,_f.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var s=i[a];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}i=e.instance,s=i.getAttribute("data-precedence"),a=n.get(s)||r,a===r&&n.set(null,i),n.set(s,i),this.count++,r=yf.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),a?a.parentNode.insertBefore(i,a.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var Vc={$$typeof:Ri,Provider:null,Consumer:null,_currentValue:vs,_currentValue2:vs,_threadCount:0};function NI(t,e,n,r,i,a,s,o){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jd(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jd(0),this.hiddenUpdates=Jd(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Sx(t,e,n,r,i,a,s,o,l,h,u,f){return t=new NI(t,e,n,s,o,l,h,f),e=1,a===!0&&(e|=24),a=ar(3,null,null,e),t.current=a,a.stateNode=t,e=m0(),e.refCount++,t.pooledCache=e,e.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:e},g0(a),t}function Rx(t){return t?(t=To,t):To}function Cx(t,e,n,r,i,a){i=Rx(i),r.context===null?r.context=i:r.pendingContext=i,r=Ra(e),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Ca(t,r,e),n!==null&&(fr(n,t,e),fc(n,t,e))}function ab(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function B0(t,e){ab(t,e),(t=t.alternate)&&ab(t,e)}function Nx(t){if(t.tag===13){var e=pl(t,67108864);e!==null&&fr(e,t,67108864),B0(t,67108864)}}var bf=!0;function II(t,e,n,r){var i=ge.T;ge.T=null;var a=He.p;try{He.p=2,F0(t,e,n,r)}finally{He.p=a,ge.T=i}}function DI(t,e,n,r){var i=ge.T;ge.T=null;var a=He.p;try{He.p=8,F0(t,e,n,r)}finally{He.p=a,ge.T=i}}function F0(t,e,n,r){if(bf){var i=Kp(r);if(i===null)Im(t,e,r,Ef,n),sb(t,r);else if(MI(i,t,e,n,r))r.stopPropagation();else if(sb(t,r),e&4&&-1<OI.indexOf(t)){for(;i!==null;){var a=ml(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var s=ss(a.pendingLanes);if(s!==0){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-ur(s);o.entanglements[1]|=l,s&=~l}gi(a),!(Ke&6)&&(hf=ii()+500,pu(0))}}break;case 13:o=pl(a,2),o!==null&&fr(o,a,2),fd(),B0(a,2)}if(a=Kp(r),a===null&&Im(t,e,r,Ef,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Im(t,e,r,null,n)}}function Kp(t){return t=i0(t),H0(t)}var Ef=null;function H0(t){if(Ef=null,t=vo(t),t!==null){var e=nu(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=ew(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Ef=t,null}function Ix(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vC()){case iw:return 2;case aw:return 8;case Xh:case yC:return 32;case sw:return 268435456;default:return 32}default:return 32}}var Wp=!1,Da=null,Oa=null,Ma=null,zc=new Map,Bc=new Map,da=[],OI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sb(t,e){switch(t){case"focusin":case"focusout":Da=null;break;case"dragenter":case"dragleave":Oa=null;break;case"mouseover":case"mouseout":Ma=null;break;case"pointerover":case"pointerout":zc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bc.delete(e.pointerId)}}function Fl(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=ml(e),e!==null&&Nx(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function MI(t,e,n,r,i){switch(e){case"focusin":return Da=Fl(Da,t,e,n,r,i),!0;case"dragenter":return Oa=Fl(Oa,t,e,n,r,i),!0;case"mouseover":return Ma=Fl(Ma,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return zc.set(a,Fl(zc.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Bc.set(a,Fl(Bc.get(a)||null,t,e,n,r,i)),!0}return!1}function Dx(t){var e=vo(t.target);if(e!==null){var n=nu(e);if(n!==null){if(e=n.tag,e===13){if(e=ew(n),e!==null){t.blockedOn=e,SC(t.priority,function(){if(n.tag===13){var r=hr();r=e0(r);var i=pl(n,r);i!==null&&fr(i,n,r),B0(n,r)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kp(t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mp=r,n.target.dispatchEvent(r),mp=null}else return e=ml(n),e!==null&&Nx(e),t.blockedOn=n,!1;e.shift()}return!0}function ob(t,e,n){Oh(t)&&n.delete(e)}function kI(){Wp=!1,Da!==null&&Oh(Da)&&(Da=null),Oa!==null&&Oh(Oa)&&(Oa=null),Ma!==null&&Oh(Ma)&&(Ma=null),zc.forEach(ob),Bc.forEach(ob)}function sh(t,e){t.blockedOn===e&&(t.blockedOn=null,Wp||(Wp=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,kI)))}var oh=null;function lb(t){oh!==t&&(oh=t,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,function(){oh===t&&(oh=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],i=t[e+2];if(typeof r!="function"){if(H0(r||n)===null)continue;break}var a=ml(n);a!==null&&(t.splice(e,3),e-=3,Ip(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Fc(t){function e(l){return sh(l,t)}Da!==null&&sh(Da,t),Oa!==null&&sh(Oa,t),Ma!==null&&sh(Ma,t),zc.forEach(e),Bc.forEach(e);for(var n=0;n<da.length;n++){var r=da[n];r.blockedOn===t&&(r.blockedOn=null)}for(;0<da.length&&(n=da[0],n.blockedOn===null);)Dx(n),n.blockedOn===null&&da.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],s=i[Wn]||null;if(typeof a=="function")s||lb(n);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(i=a,s=a[Wn]||null)o=s.formAction;else if(H0(i)!==null)continue}else o=s.action;typeof o=="function"?n[r+1]=o:(n.splice(r,3),r-=3),lb(n)}}}function q0(t){this._internalRoot=t}gd.prototype.render=q0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));var n=e.current,r=hr();Cx(n,r,t,e,null,null)};gd.prototype.unmount=q0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Cx(t.current,2,null,t,null,null),fd(),e[dl]=null}};function gd(t){this._internalRoot=t}gd.prototype.unstable_scheduleHydration=function(t){if(t){var e=hw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<da.length&&e!==0&&e<da[n].priority;n++);da.splice(n,0,t),n===0&&Dx(t)}};var cb=ZE.version;if(cb!=="19.1.0")throw Error(te(527,cb,"19.1.0"));He.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=uC(e),t=t!==null?tw(t):null,t=t===null?null:t.stateNode,t};var jI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ge,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lh.isDisabled&&lh.supportsFiber)try{ru=lh.inject(jI),cr=lh}catch{}}ed.createRoot=function(t,e){if(!JE(t))throw Error(te(299));var n=!1,r="",i=ST,a=RT,s=CT,o=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(a=e.onCaughtError),e.onRecoverableError!==void 0&&(s=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(o=e.unstable_transitionCallbacks)),e=Sx(t,1,!1,null,null,n,r,i,a,s,o,null),t[dl]=e.current,L0(t),new q0(e)};ed.hydrateRoot=function(t,e,n){if(!JE(t))throw Error(te(299));var r=!1,i="",a=ST,s=RT,o=CT,l=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(s=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),e=Sx(t,1,!0,e,n??null,r,i,a,s,o,l,h),e.context=Rx(null),n=e.current,r=hr(),r=e0(r),i=Ra(r),i.callback=null,Ca(n,i,r),n=r,e.current.lanes=n,au(e,n),gi(e),t[dl]=e.current,L0(t),new gd(e)};ed.version="19.1.0";function Ox(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ox)}catch(t){console.error(t)}}Ox(),$E.exports=ed;var PI=$E.exports;const UI=qg(PI);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bt(){return bt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bt.apply(this,arguments)}var qt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qt||(qt={}));const ub="popstate";function LI(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:s,hash:o}=r.location;return Hc("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Os(i)}return zI(e,n,null,t)}function Oe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VI(){return Math.random().toString(36).substr(2,8)}function hb(t,e){return{usr:t.state,key:t.key,idx:e}}function Hc(t,e,n,r){return n===void 0&&(n=null),bt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Za(e):e,{state:n,key:e&&e.key||r||VI()})}function Os(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Za(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function zI(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o=qt.Pop,l=null,h=u();h==null&&(h=0,s.replaceState(bt({},s.state,{idx:h}),""));function u(){return(s.state||{idx:null}).idx}function f(){o=qt.Pop;let D=u(),w=D==null?null:D-h;h=D,l&&l({action:o,location:A.location,delta:w})}function d(D,w){o=qt.Push;let x=Hc(A.location,D,w);h=u()+1;let C=hb(x,h),O=A.createHref(x);try{s.pushState(C,"",O)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(O)}a&&l&&l({action:o,location:A.location,delta:1})}function m(D,w){o=qt.Replace;let x=Hc(A.location,D,w);h=u();let C=hb(x,h),O=A.createHref(x);s.replaceState(C,"",O),a&&l&&l({action:o,location:A.location,delta:0})}function b(D){let w=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof D=="string"?D:Os(D);return x=x.replace(/ $/,"%20"),Oe(w,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,w)}let A={get action(){return o},get location(){return t(i,s)},listen(D){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ub,f),l=D,()=>{i.removeEventListener(ub,f),l=null}},createHref(D){return e(i,D)},createURL:b,encodeLocation(D){let w=b(D);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:d,replace:m,go(D){return s.go(D)}};return A}var Qe;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Qe||(Qe={}));const BI=new Set(["lazy","caseSensitive","path","id","index","children"]);function FI(t){return t.index===!0}function wf(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,a)=>{let s=[...n,String(a)],o=typeof i.id=="string"?i.id:s.join("-");if(Oe(i.index!==!0||!i.children,"Cannot specify children on an index route"),Oe(!r[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),FI(i)){let l=bt({},i,e(i),{id:o});return r[o]=l,l}else{let l=bt({},i,e(i),{id:o,children:void 0});return r[o]=l,i.children&&(l.children=wf(i.children,e,s,r)),l}})}function us(t,e,n){return n===void 0&&(n="/"),Mh(t,e,n,!1)}function Mh(t,e,n,r){let i=typeof e=="string"?Za(e):e,a=_l(i.pathname||"/",n);if(a==null)return null;let s=Mx(t);qI(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let h=t4(a);o=JI(s[l],h,r)}return o}function HI(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Mx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,s,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};l.relativePath.startsWith("/")&&(Oe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let h=Pi([r,l.relativePath]),u=n.concat(l);a.children&&a.children.length>0&&(Oe(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Mx(a.children,e,u,h)),!(a.path==null&&!a.index)&&e.push({path:h,score:WI(h,a.index),routesMeta:u})};return t.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let l of kx(a.path))i(a,s,l)}),e}function kx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=kx(r.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function qI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ZI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const GI=/^:[\w-]+$/,$I=3,YI=2,XI=1,QI=10,KI=-2,fb=t=>t==="*";function WI(t,e){let n=t.split("/"),r=n.length;return n.some(fb)&&(r+=KI),e&&(r+=YI),n.filter(i=>!fb(i)).reduce((i,a)=>i+(GI.test(a)?$I:a===""?XI:QI),r)}function ZI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function JI(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let l=r[o],h=o===r.length-1,u=a==="/"?e:e.slice(a.length)||"/",f=db({path:l.relativePath,caseSensitive:l.caseSensitive,end:h},u),d=l.route;if(!f&&h&&n&&!r[r.length-1].route.index&&(f=db({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:Pi([a,f.pathname]),pathnameBase:i4(Pi([a,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(a=Pi([a,f.pathnameBase]))}return s}function db(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=e4(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((h,u,f)=>{let{paramName:d,isOptional:m}=u;if(d==="*"){let A=o[f]||"";s=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const b=o[f];return m&&!b?h[d]=void 0:h[d]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:s,pattern:t}}function e4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),rl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function t4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rl(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _l(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function n4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Za(t):t;return{pathname:n?n.startsWith("/")?n:r4(n,e):e,search:a4(r),hash:s4(i)}}function r4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Om(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function G0(t,e){let n=jx(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function $0(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Za(t):(i=bt({},t),Oe(!i.pathname||!i.pathname.includes("?"),Om("?","pathname","search",i)),Oe(!i.pathname||!i.pathname.includes("#"),Om("#","pathname","hash",i)),Oe(!i.search||!i.search.includes("#"),Om("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let f=e.length-1;if(!r&&s.startsWith("..")){let d=s.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}o=f>=0?e[f]:"/"}let l=n4(i,o),h=s&&s!=="/"&&s.endsWith("/"),u=(a||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(h||u)&&(l.pathname+="/"),l}const Pi=t=>t.join("/").replace(/\/\/+/g,"/"),i4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),a4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,s4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Tf{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function il(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Px=["post","put","patch","delete"],o4=new Set(Px),l4=["get",...Px],c4=new Set(l4),u4=new Set([301,302,303,307,308]),h4=new Set([307,308]),Mm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},f4={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Hl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Y0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,d4=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Ux="remix-router-transitions";function m4(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Oe(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let V=t.detectErrorBoundary;i=F=>({hasErrorBoundary:V(F)})}else i=d4;let a={},s=wf(t.routes,i,void 0,a),o,l=t.basename||"/",h=t.dataStrategy||y4,u=t.patchRoutesOnNavigation,f=bt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),d=null,m=new Set,b=null,A=null,D=null,w=t.hydrationData!=null,x=us(s,t.history.location,l),C=!1,O=null;if(x==null&&!u){let V=Hn(404,{pathname:t.history.location.pathname}),{matches:F,route:X}=xb(s);x=F,O={[X.id]:V}}x&&!t.hydrationData&&On(x,s,t.history.location.pathname).active&&(x=null);let U;if(x)if(x.some(V=>V.route.lazy))U=!1;else if(!x.some(V=>V.route.loader))U=!0;else if(f.v7_partialHydration){let V=t.hydrationData?t.hydrationData.loaderData:null,F=t.hydrationData?t.hydrationData.errors:null;if(F){let X=x.findIndex(ne=>F[ne.route.id]!==void 0);U=x.slice(0,X+1).every(ne=>!Jp(ne.route,V,F))}else U=x.every(X=>!Jp(X.route,V,F))}else U=t.hydrationData!=null;else if(U=!1,x=[],f.v7_partialHydration){let V=On(null,s,t.history.location.pathname);V.active&&V.matches&&(C=!0,x=V.matches)}let N,_={historyAction:t.history.action,location:t.history.location,matches:x,initialized:U,navigation:Mm,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||O,fetchers:new Map,blockers:new Map},g=qt.Pop,y=!1,T,R=!1,I=new Map,S=null,L=!1,z=!1,M=[],k=new Set,H=new Map,B=0,P=-1,K=new Map,G=new Set,J=new Map,W=new Map,Y=new Set,se=new Map,Te=new Map,je;function Pe(){if(d=t.history.listen(V=>{let{action:F,location:X,delta:ne}=V;if(je){je(),je=void 0;return}rl(Te.size===0||ne!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ie=Ir({currentLocation:_.location,nextLocation:X,historyAction:F});if(ie&&ne!=null){let he=new Promise(pe=>{je=pe});t.history.go(ne*-1),Yr(ie,{state:"blocked",location:X,proceed(){Yr(ie,{state:"proceeding",proceed:void 0,reset:void 0,location:X}),he.then(()=>t.history.go(ne))},reset(){let pe=new Map(_.blockers);pe.set(ie,Hl),xe({blockers:pe})}});return}return rt(F,X)}),n){O4(e,I);let V=()=>M4(e,I);e.addEventListener("pagehide",V),S=()=>e.removeEventListener("pagehide",V)}return _.initialized||rt(qt.Pop,_.location,{initialHydration:!0}),N}function ze(){d&&d(),S&&S(),m.clear(),T&&T.abort(),_.fetchers.forEach((V,F)=>tn(F)),_.blockers.forEach((V,F)=>$r(F))}function We(V){return m.add(V),()=>m.delete(V)}function xe(V,F){F===void 0&&(F={}),_=bt({},_,V);let X=[],ne=[];f.v7_fetcherPersist&&_.fetchers.forEach((ie,he)=>{ie.state==="idle"&&(Y.has(he)?ne.push(he):X.push(he))}),Y.forEach(ie=>{!_.fetchers.has(ie)&&!H.has(ie)&&ne.push(ie)}),[...m].forEach(ie=>ie(_,{deletedFetchers:ne,viewTransitionOpts:F.viewTransitionOpts,flushSync:F.flushSync===!0})),f.v7_fetcherPersist?(X.forEach(ie=>_.fetchers.delete(ie)),ne.forEach(ie=>tn(ie))):ne.forEach(ie=>Y.delete(ie))}function en(V,F,X){var ne,ie;let{flushSync:he}=X===void 0?{}:X,pe=_.actionData!=null&&_.navigation.formMethod!=null&&Lr(_.navigation.formMethod)&&_.navigation.state==="loading"&&((ne=V.state)==null?void 0:ne._isRedirect)!==!0,ue;F.actionData?Object.keys(F.actionData).length>0?ue=F.actionData:ue=null:pe?ue=_.actionData:ue=null;let ce=F.loaderData?wb(_.loaderData,F.loaderData,F.matches||[],F.errors):_.loaderData,le=_.blockers;le.size>0&&(le=new Map(le),le.forEach((Ee,Ft)=>le.set(Ft,Hl)));let fe=y===!0||_.navigation.formMethod!=null&&Lr(_.navigation.formMethod)&&((ie=V.state)==null?void 0:ie._isRedirect)!==!0;o&&(s=o,o=void 0),L||g===qt.Pop||(g===qt.Push?t.history.push(V,V.state):g===qt.Replace&&t.history.replace(V,V.state));let ye;if(g===qt.Pop){let Ee=I.get(_.location.pathname);Ee&&Ee.has(V.pathname)?ye={currentLocation:_.location,nextLocation:V}:I.has(V.pathname)&&(ye={currentLocation:V,nextLocation:_.location})}else if(R){let Ee=I.get(_.location.pathname);Ee?Ee.add(V.pathname):(Ee=new Set([V.pathname]),I.set(_.location.pathname,Ee)),ye={currentLocation:_.location,nextLocation:V}}xe(bt({},F,{actionData:ue,loaderData:ce,historyAction:g,location:V,initialized:!0,navigation:Mm,revalidation:"idle",restoreScrollPosition:Qr(V,F.matches||_.matches),preventScrollReset:fe,blockers:le}),{viewTransitionOpts:ye,flushSync:he===!0}),g=qt.Pop,y=!1,R=!1,L=!1,z=!1,M=[]}async function un(V,F){if(typeof V=="number"){t.history.go(V);return}let X=Zp(_.location,_.matches,l,f.v7_prependBasename,V,f.v7_relativeSplatPath,F==null?void 0:F.fromRouteId,F==null?void 0:F.relative),{path:ne,submission:ie,error:he}=mb(f.v7_normalizeFormMethod,!1,X,F),pe=_.location,ue=Hc(_.location,ne,F&&F.state);ue=bt({},ue,t.history.encodeLocation(ue));let ce=F&&F.replace!=null?F.replace:void 0,le=qt.Push;ce===!0?le=qt.Replace:ce===!1||ie!=null&&Lr(ie.formMethod)&&ie.formAction===_.location.pathname+_.location.search&&(le=qt.Replace);let fe=F&&"preventScrollReset"in F?F.preventScrollReset===!0:void 0,ye=(F&&F.flushSync)===!0,Ee=Ir({currentLocation:pe,nextLocation:ue,historyAction:le});if(Ee){Yr(Ee,{state:"blocked",location:ue,proceed(){Yr(Ee,{state:"proceeding",proceed:void 0,reset:void 0,location:ue}),un(V,F)},reset(){let Ft=new Map(_.blockers);Ft.set(Ee,Hl),xe({blockers:Ft})}});return}return await rt(le,ue,{submission:ie,pendingError:he,preventScrollReset:fe,replace:F&&F.replace,enableViewTransition:F&&F.viewTransition,flushSync:ye})}function Ze(){if(gt(),xe({revalidation:"loading"}),_.navigation.state!=="submitting"){if(_.navigation.state==="idle"){rt(_.historyAction,_.location,{startUninterruptedRevalidation:!0});return}rt(g||_.historyAction,_.navigation.location,{overrideNavigation:_.navigation,enableViewTransition:R===!0})}}async function rt(V,F,X){T&&T.abort(),T=null,g=V,L=(X&&X.startUninterruptedRevalidation)===!0,Xr(_.location,_.matches),y=(X&&X.preventScrollReset)===!0,R=(X&&X.enableViewTransition)===!0;let ne=o||s,ie=X&&X.overrideNavigation,he=X!=null&&X.initialHydration&&_.matches&&_.matches.length>0&&!C?_.matches:us(ne,F,l),pe=(X&&X.flushSync)===!0;if(he&&_.initialized&&!z&&x4(_.location,F)&&!(X&&X.submission&&Lr(X.submission.formMethod))){en(F,{matches:he},{flushSync:pe});return}let ue=On(he,ne,F.pathname);if(ue.active&&ue.matches&&(he=ue.matches),!he){let{error:Ye,notFoundMatches:ke,route:ot}=Dr(F.pathname);en(F,{matches:ke,loaderData:{},errors:{[ot.id]:Ye}},{flushSync:pe});return}T=new AbortController;let ce=no(t.history,F,T.signal,X&&X.submission),le;if(X&&X.pendingError)le=[hs(he).route.id,{type:Qe.error,error:X.pendingError}];else if(X&&X.submission&&Lr(X.submission.formMethod)){let Ye=await Je(ce,F,X.submission,he,ue.active,{replace:X.replace,flushSync:pe});if(Ye.shortCircuited)return;if(Ye.pendingActionResult){let[ke,ot]=Ye.pendingActionResult;if(ir(ot)&&il(ot.error)&&ot.error.status===404){T=null,en(F,{matches:Ye.matches,loaderData:{},errors:{[ke]:ot.error}});return}}he=Ye.matches||he,le=Ye.pendingActionResult,ie=km(F,X.submission),pe=!1,ue.active=!1,ce=no(t.history,ce.url,ce.signal)}let{shortCircuited:fe,matches:ye,loaderData:Ee,errors:Ft}=await $e(ce,F,he,ue.active,ie,X&&X.submission,X&&X.fetcherSubmission,X&&X.replace,X&&X.initialHydration===!0,pe,le);fe||(T=null,en(F,bt({matches:ye||he},Tb(le),{loaderData:Ee,errors:Ft})))}async function Je(V,F,X,ne,ie,he){he===void 0&&(he={}),gt();let pe=I4(F,X);if(xe({navigation:pe},{flushSync:he.flushSync===!0}),ie){let le=await nn(ne,F.pathname,V.signal);if(le.type==="aborted")return{shortCircuited:!0};if(le.type==="error"){let fe=hs(le.partialMatches).route.id;return{matches:le.partialMatches,pendingActionResult:[fe,{type:Qe.error,error:le.error}]}}else if(le.matches)ne=le.matches;else{let{notFoundMatches:fe,error:ye,route:Ee}=Dr(F.pathname);return{matches:fe,pendingActionResult:[Ee.id,{type:Qe.error,error:ye}]}}}let ue,ce=tc(ne,F);if(!ce.route.action&&!ce.route.lazy)ue={type:Qe.error,error:Hn(405,{method:V.method,pathname:F.pathname,routeId:ce.route.id})};else if(ue=(await Rt("action",_,V,[ce],ne,null))[ce.route.id],V.signal.aborted)return{shortCircuited:!0};if(ds(ue)){let le;return he&&he.replace!=null?le=he.replace:le=_b(ue.response.headers.get("Location"),new URL(V.url),l)===_.location.pathname+_.location.search,await Re(V,ue,!0,{submission:X,replace:le}),{shortCircuited:!0}}if(wa(ue))throw Hn(400,{type:"defer-action"});if(ir(ue)){let le=hs(ne,ce.route.id);return(he&&he.replace)!==!0&&(g=qt.Push),{matches:ne,pendingActionResult:[le.route.id,ue]}}return{matches:ne,pendingActionResult:[ce.route.id,ue]}}async function $e(V,F,X,ne,ie,he,pe,ue,ce,le,fe){let ye=ie||km(F,he),Ee=he||pe||Sb(ye),Ft=!L&&(!f.v7_partialHydration||!ce);if(ne){if(Ft){let ft=xt(fe);xe(bt({navigation:ye},ft!==void 0?{actionData:ft}:{}),{flushSync:le})}let Ue=await nn(X,F.pathname,V.signal);if(Ue.type==="aborted")return{shortCircuited:!0};if(Ue.type==="error"){let ft=hs(Ue.partialMatches).route.id;return{matches:Ue.partialMatches,loaderData:{},errors:{[ft]:Ue.error}}}else if(Ue.matches)X=Ue.matches;else{let{error:ft,notFoundMatches:_i,route:Ji}=Dr(F.pathname);return{matches:_i,loaderData:{},errors:{[Ji.id]:ft}}}}let Ye=o||s,[ke,ot]=gb(t.history,_,X,Ee,F,f.v7_partialHydration&&ce===!0,f.v7_skipActionErrorRevalidation,z,M,k,Y,J,G,Ye,l,fe);if(wn(Ue=>!(X&&X.some(ft=>ft.route.id===Ue))||ke&&ke.some(ft=>ft.route.id===Ue)),P=++B,ke.length===0&&ot.length===0){let Ue=Vn();return en(F,bt({matches:X,loaderData:{},errors:fe&&ir(fe[1])?{[fe[0]]:fe[1].error}:null},Tb(fe),Ue?{fetchers:new Map(_.fetchers)}:{}),{flushSync:le}),{shortCircuited:!0}}if(Ft){let Ue={};if(!ne){Ue.navigation=ye;let ft=xt(fe);ft!==void 0&&(Ue.actionData=ft)}ot.length>0&&(Ue.fetchers=Mt(ot)),xe(Ue,{flushSync:le})}ot.forEach(Ue=>{jt(Ue.key),Ue.controller&&H.set(Ue.key,Ue.controller)});let vi=()=>ot.forEach(Ue=>jt(Ue.key));T&&T.signal.addEventListener("abort",vi);let{loaderResults:Wi,fetcherResults:Or}=await et(_,X,ke,ot,V);if(V.signal.aborted)return{shortCircuited:!0};T&&T.signal.removeEventListener("abort",vi),ot.forEach(Ue=>H.delete(Ue.key));let Mn=ch(Wi);if(Mn)return await Re(V,Mn.result,!0,{replace:ue}),{shortCircuited:!0};if(Mn=ch(Or),Mn)return G.add(Mn.key),await Re(V,Mn.result,!0,{replace:ue}),{shortCircuited:!0};let{loaderData:Ks,errors:yi}=Eb(_,X,Wi,fe,ot,Or,se);se.forEach((Ue,ft)=>{Ue.subscribe(_i=>{(_i||Ue.done)&&se.delete(ft)})}),f.v7_partialHydration&&ce&&_.errors&&(yi=bt({},_.errors,yi));let Jn=Vn(),pr=Ki(P),Zi=Jn||pr||ot.length>0;return bt({matches:X,loaderData:Ks,errors:yi},Zi?{fetchers:new Map(_.fetchers)}:{})}function xt(V){if(V&&!ir(V[1]))return{[V[0]]:V[1].data};if(_.actionData)return Object.keys(_.actionData).length===0?null:_.actionData}function Mt(V){return V.forEach(F=>{let X=_.fetchers.get(F.key),ne=ql(void 0,X?X.data:void 0);_.fetchers.set(F.key,ne)}),new Map(_.fetchers)}function ht(V,F,X,ne){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");jt(V);let ie=(ne&&ne.flushSync)===!0,he=o||s,pe=Zp(_.location,_.matches,l,f.v7_prependBasename,X,f.v7_relativeSplatPath,F,ne==null?void 0:ne.relative),ue=us(he,pe,l),ce=On(ue,he,pe);if(ce.active&&ce.matches&&(ue=ce.matches),!ue){zt(V,F,Hn(404,{pathname:pe}),{flushSync:ie});return}let{path:le,submission:fe,error:ye}=mb(f.v7_normalizeFormMethod,!0,pe,ne);if(ye){zt(V,F,ye,{flushSync:ie});return}let Ee=tc(ue,le),Ft=(ne&&ne.preventScrollReset)===!0;if(fe&&Lr(fe.formMethod)){hn(V,F,le,Ee,ue,ce.active,ie,Ft,fe);return}J.set(V,{routeId:F,path:le}),st(V,F,le,Ee,ue,ce.active,ie,Ft,fe)}async function hn(V,F,X,ne,ie,he,pe,ue,ce){gt(),J.delete(V);function le(vt){if(!vt.route.action&&!vt.route.lazy){let Kr=Hn(405,{method:ce.formMethod,pathname:X,routeId:F});return zt(V,F,Kr,{flushSync:pe}),!0}return!1}if(!he&&le(ne))return;let fe=_.fetchers.get(V);qe(V,D4(ce,fe),{flushSync:pe});let ye=new AbortController,Ee=no(t.history,X,ye.signal,ce);if(he){let vt=await nn(ie,new URL(Ee.url).pathname,Ee.signal,V);if(vt.type==="aborted")return;if(vt.type==="error"){zt(V,F,vt.error,{flushSync:pe});return}else if(vt.matches){if(ie=vt.matches,ne=tc(ie,X),le(ne))return}else{zt(V,F,Hn(404,{pathname:X}),{flushSync:pe});return}}H.set(V,ye);let Ft=B,ke=(await Rt("action",_,Ee,[ne],ie,V))[ne.route.id];if(Ee.signal.aborted){H.get(V)===ye&&H.delete(V);return}if(f.v7_fetcherPersist&&Y.has(V)){if(ds(ke)||ir(ke)){qe(V,oa(void 0));return}}else{if(ds(ke))if(H.delete(V),P>Ft){qe(V,oa(void 0));return}else return G.add(V),qe(V,ql(ce)),Re(Ee,ke,!1,{fetcherSubmission:ce,preventScrollReset:ue});if(ir(ke)){zt(V,F,ke.error);return}}if(wa(ke))throw Hn(400,{type:"defer-action"});let ot=_.navigation.location||_.location,vi=no(t.history,ot,ye.signal),Wi=o||s,Or=_.navigation.state!=="idle"?us(Wi,_.navigation.location,l):_.matches;Oe(Or,"Didn't find any matches after fetcher action");let Mn=++B;K.set(V,Mn);let Ks=ql(ce,ke.data);_.fetchers.set(V,Ks);let[yi,Jn]=gb(t.history,_,Or,ce,ot,!1,f.v7_skipActionErrorRevalidation,z,M,k,Y,J,G,Wi,l,[ne.route.id,ke]);Jn.filter(vt=>vt.key!==V).forEach(vt=>{let Kr=vt.key,Rl=_.fetchers.get(Kr),Pu=ql(void 0,Rl?Rl.data:void 0);_.fetchers.set(Kr,Pu),jt(Kr),vt.controller&&H.set(Kr,vt.controller)}),xe({fetchers:new Map(_.fetchers)});let pr=()=>Jn.forEach(vt=>jt(vt.key));ye.signal.addEventListener("abort",pr);let{loaderResults:Zi,fetcherResults:Ue}=await et(_,Or,yi,Jn,vi);if(ye.signal.aborted)return;ye.signal.removeEventListener("abort",pr),K.delete(V),H.delete(V),Jn.forEach(vt=>H.delete(vt.key));let ft=ch(Zi);if(ft)return Re(vi,ft.result,!1,{preventScrollReset:ue});if(ft=ch(Ue),ft)return G.add(ft.key),Re(vi,ft.result,!1,{preventScrollReset:ue});let{loaderData:_i,errors:Ji}=Eb(_,Or,Zi,void 0,Jn,Ue,se);if(_.fetchers.has(V)){let vt=oa(ke.data);_.fetchers.set(V,vt)}Ki(Mn),_.navigation.state==="loading"&&Mn>P?(Oe(g,"Expected pending action"),T&&T.abort(),en(_.navigation.location,{matches:Or,loaderData:_i,errors:Ji,fetchers:new Map(_.fetchers)})):(xe({errors:Ji,loaderData:wb(_.loaderData,_i,Or,Ji),fetchers:new Map(_.fetchers)}),z=!1)}async function st(V,F,X,ne,ie,he,pe,ue,ce){let le=_.fetchers.get(V);qe(V,ql(ce,le?le.data:void 0),{flushSync:pe});let fe=new AbortController,ye=no(t.history,X,fe.signal);if(he){let ke=await nn(ie,new URL(ye.url).pathname,ye.signal,V);if(ke.type==="aborted")return;if(ke.type==="error"){zt(V,F,ke.error,{flushSync:pe});return}else if(ke.matches)ie=ke.matches,ne=tc(ie,X);else{zt(V,F,Hn(404,{pathname:X}),{flushSync:pe});return}}H.set(V,fe);let Ee=B,Ye=(await Rt("loader",_,ye,[ne],ie,V))[ne.route.id];if(wa(Ye)&&(Ye=await X0(Ye,ye.signal,!0)||Ye),H.get(V)===fe&&H.delete(V),!ye.signal.aborted){if(Y.has(V)){qe(V,oa(void 0));return}if(ds(Ye))if(P>Ee){qe(V,oa(void 0));return}else{G.add(V),await Re(ye,Ye,!1,{preventScrollReset:ue});return}if(ir(Ye)){zt(V,F,Ye.error);return}Oe(!wa(Ye),"Unhandled fetcher deferred data"),qe(V,oa(Ye.data))}}async function Re(V,F,X,ne){let{submission:ie,fetcherSubmission:he,preventScrollReset:pe,replace:ue}=ne===void 0?{}:ne;F.response.headers.has("X-Remix-Revalidate")&&(z=!0);let ce=F.response.headers.get("Location");Oe(ce,"Expected a Location header on the redirect Response"),ce=_b(ce,new URL(V.url),l);let le=Hc(_.location,ce,{_isRedirect:!0});if(n){let ke=!1;if(F.response.headers.has("X-Remix-Reload-Document"))ke=!0;else if(Y0.test(ce)){const ot=t.history.createURL(ce);ke=ot.origin!==e.location.origin||_l(ot.pathname,l)==null}if(ke){ue?e.location.replace(ce):e.location.assign(ce);return}}T=null;let fe=ue===!0||F.response.headers.has("X-Remix-Replace")?qt.Replace:qt.Push,{formMethod:ye,formAction:Ee,formEncType:Ft}=_.navigation;!ie&&!he&&ye&&Ee&&Ft&&(ie=Sb(_.navigation));let Ye=ie||he;if(h4.has(F.response.status)&&Ye&&Lr(Ye.formMethod))await rt(fe,le,{submission:bt({},Ye,{formAction:ce}),preventScrollReset:pe||y,enableViewTransition:X?R:void 0});else{let ke=km(le,ie);await rt(fe,le,{overrideNavigation:ke,fetcherSubmission:he,preventScrollReset:pe||y,enableViewTransition:X?R:void 0})}}async function Rt(V,F,X,ne,ie,he){let pe,ue={};try{pe=await _4(h,V,F,X,ne,ie,he,a,i)}catch(ce){return ne.forEach(le=>{ue[le.route.id]={type:Qe.error,error:ce}}),ue}for(let[ce,le]of Object.entries(pe))if(A4(le)){let fe=le.result;ue[ce]={type:Qe.redirect,response:w4(fe,X,ce,ie,l,f.v7_relativeSplatPath)}}else ue[ce]=await E4(le);return ue}async function et(V,F,X,ne,ie){let he=V.matches,pe=Rt("loader",V,ie,X,F,null),ue=Promise.all(ne.map(async fe=>{if(fe.matches&&fe.match&&fe.controller){let Ee=(await Rt("loader",V,no(t.history,fe.path,fe.controller.signal),[fe.match],fe.matches,fe.key))[fe.match.route.id];return{[fe.key]:Ee}}else return Promise.resolve({[fe.key]:{type:Qe.error,error:Hn(404,{pathname:fe.path})}})})),ce=await pe,le=(await ue).reduce((fe,ye)=>Object.assign(fe,ye),{});return await Promise.all([C4(F,ce,ie.signal,he,V.loaderData),N4(F,le,ne)]),{loaderResults:ce,fetcherResults:le}}function gt(){z=!0,M.push(...wn()),J.forEach((V,F)=>{H.has(F)&&k.add(F),jt(F)})}function qe(V,F,X){X===void 0&&(X={}),_.fetchers.set(V,F),xe({fetchers:new Map(_.fetchers)},{flushSync:(X&&X.flushSync)===!0})}function zt(V,F,X,ne){ne===void 0&&(ne={});let ie=hs(_.matches,F);tn(V),xe({errors:{[ie.route.id]:X},fetchers:new Map(_.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function kt(V){return W.set(V,(W.get(V)||0)+1),Y.has(V)&&Y.delete(V),_.fetchers.get(V)||f4}function tn(V){let F=_.fetchers.get(V);H.has(V)&&!(F&&F.state==="loading"&&K.has(V))&&jt(V),J.delete(V),K.delete(V),G.delete(V),f.v7_fetcherPersist&&Y.delete(V),k.delete(V),_.fetchers.delete(V)}function Bt(V){let F=(W.get(V)||0)-1;F<=0?(W.delete(V),Y.add(V),f.v7_fetcherPersist||tn(V)):W.set(V,F),xe({fetchers:new Map(_.fetchers)})}function jt(V){let F=H.get(V);F&&(F.abort(),H.delete(V))}function En(V){for(let F of V){let X=kt(F),ne=oa(X.data);_.fetchers.set(F,ne)}}function Vn(){let V=[],F=!1;for(let X of G){let ne=_.fetchers.get(X);Oe(ne,"Expected fetcher: "+X),ne.state==="loading"&&(G.delete(X),V.push(X),F=!0)}return En(V),F}function Ki(V){let F=[];for(let[X,ne]of K)if(ne<V){let ie=_.fetchers.get(X);Oe(ie,"Expected fetcher: "+X),ie.state==="loading"&&(jt(X),K.delete(X),F.push(X))}return En(F),F.length>0}function Sl(V,F){let X=_.blockers.get(V)||Hl;return Te.get(V)!==F&&Te.set(V,F),X}function $r(V){_.blockers.delete(V),Te.delete(V)}function Yr(V,F){let X=_.blockers.get(V)||Hl;Oe(X.state==="unblocked"&&F.state==="blocked"||X.state==="blocked"&&F.state==="blocked"||X.state==="blocked"&&F.state==="proceeding"||X.state==="blocked"&&F.state==="unblocked"||X.state==="proceeding"&&F.state==="unblocked","Invalid blocker state transition: "+X.state+" -> "+F.state);let ne=new Map(_.blockers);ne.set(V,F),xe({blockers:ne})}function Ir(V){let{currentLocation:F,nextLocation:X,historyAction:ne}=V;if(Te.size===0)return;Te.size>1&&rl(!1,"A router only supports one blocker at a time");let ie=Array.from(Te.entries()),[he,pe]=ie[ie.length-1],ue=_.blockers.get(he);if(!(ue&&ue.state==="proceeding")&&pe({currentLocation:F,nextLocation:X,historyAction:ne}))return he}function Dr(V){let F=Hn(404,{pathname:V}),X=o||s,{matches:ne,route:ie}=xb(X);return wn(),{notFoundMatches:ne,route:ie,error:F}}function wn(V){let F=[];return se.forEach((X,ne)=>{(!V||V(ne))&&(X.cancel(),F.push(ne),se.delete(ne))}),F}function zn(V,F,X){if(b=V,D=F,A=X||null,!w&&_.navigation===Mm){w=!0;let ne=Qr(_.location,_.matches);ne!=null&&xe({restoreScrollPosition:ne})}return()=>{b=null,D=null,A=null}}function fn(V,F){return A&&A(V,F.map(ne=>HI(ne,_.loaderData)))||V.key}function Xr(V,F){if(b&&D){let X=fn(V,F);b[X]=D()}}function Qr(V,F){if(b){let X=fn(V,F),ne=b[X];if(typeof ne=="number")return ne}return null}function On(V,F,X){if(u)if(V){if(Object.keys(V[0].params).length>0)return{active:!0,matches:Mh(F,X,l,!0)}}else return{active:!0,matches:Mh(F,X,l,!0)||[]};return{active:!1,matches:null}}async function nn(V,F,X,ne){if(!u)return{type:"success",matches:V};let ie=V;for(;;){let he=o==null,pe=o||s,ue=a;try{await u({signal:X,path:F,matches:ie,fetcherKey:ne,patch:(fe,ye)=>{X.aborted||yb(fe,ye,pe,ue,i)}})}catch(fe){return{type:"error",error:fe,partialMatches:ie}}finally{he&&!X.aborted&&(s=[...s])}if(X.aborted)return{type:"aborted"};let ce=us(pe,F,l);if(ce)return{type:"success",matches:ce};let le=Mh(pe,F,l,!0);if(!le||ie.length===le.length&&ie.every((fe,ye)=>fe.route.id===le[ye].route.id))return{type:"success",matches:null};ie=le}}function ju(V){a={},o=wf(V,i,void 0,a)}function dn(V,F){let X=o==null;yb(V,F,o||s,a,i),X&&(s=[...s],xe({}))}return N={get basename(){return l},get future(){return f},get state(){return _},get routes(){return s},get window(){return e},initialize:Pe,subscribe:We,enableScrollRestoration:zn,navigate:un,fetch:ht,revalidate:Ze,createHref:V=>t.history.createHref(V),encodeLocation:V=>t.history.encodeLocation(V),getFetcher:kt,deleteFetcher:Bt,dispose:ze,getBlocker:Sl,deleteBlocker:$r,patchRoutes:dn,_internalFetchControllers:H,_internalActiveDeferreds:se,_internalSetRoutes:ju},N}function p4(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Zp(t,e,n,r,i,a,s,o){let l,h;if(s){l=[];for(let f of e)if(l.push(f),f.route.id===s){h=f;break}}else l=e,h=e[e.length-1];let u=$0(i||".",G0(l,a),_l(t.pathname,n)||t.pathname,o==="path");if(i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&h){let f=Q0(u.search);if(h.route.index&&!f)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&f){let d=new URLSearchParams(u.search),m=d.getAll("index");d.delete("index"),m.filter(A=>A).forEach(A=>d.append("index",A));let b=d.toString();u.search=b?"?"+b:""}}return r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Pi([n,u.pathname])),Os(u)}function mb(t,e,n,r){if(!r||!p4(r))return{path:n};if(r.formMethod&&!R4(r.formMethod))return{path:n,error:Hn(405,{method:r.formMethod})};let i=()=>({path:n,error:Hn(400,{type:"invalid-body"})}),a=r.formMethod||"get",s=t?a.toUpperCase():a.toLowerCase(),o=zx(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Lr(s))return i();let d=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((m,b)=>{let[A,D]=b;return""+m+A+"="+D+`
`},""):String(r.body);return{path:n,submission:{formMethod:s,formAction:o,formEncType:r.formEncType,formData:void 0,json:void 0,text:d}}}else if(r.formEncType==="application/json"){if(!Lr(s))return i();try{let d=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:o,formEncType:r.formEncType,formData:void 0,json:d,text:void 0}}}catch{return i()}}}Oe(typeof FormData=="function","FormData is not available in this environment");let l,h;if(r.formData)l=eg(r.formData),h=r.formData;else if(r.body instanceof FormData)l=eg(r.body),h=r.body;else if(r.body instanceof URLSearchParams)l=r.body,h=bb(l);else if(r.body==null)l=new URLSearchParams,h=new FormData;else try{l=new URLSearchParams(r.body),h=bb(l)}catch{return i()}let u={formMethod:s,formAction:o,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:h,json:void 0,text:void 0};if(Lr(u.formMethod))return{path:n,submission:u};let f=Za(n);return e&&f.search&&Q0(f.search)&&l.append("index",""),f.search="?"+l,{path:Os(f),submission:u}}function pb(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function gb(t,e,n,r,i,a,s,o,l,h,u,f,d,m,b,A){let D=A?ir(A[1])?A[1].error:A[1].data:void 0,w=t.createURL(e.location),x=t.createURL(i),C=n;a&&e.errors?C=pb(n,Object.keys(e.errors)[0],!0):A&&ir(A[1])&&(C=pb(n,A[0]));let O=A?A[1].statusCode:void 0,U=s&&O&&O>=400,N=C.filter((g,y)=>{let{route:T}=g;if(T.lazy)return!0;if(T.loader==null)return!1;if(a)return Jp(T,e.loaderData,e.errors);if(g4(e.loaderData,e.matches[y],g)||l.some(S=>S===g.route.id))return!0;let R=e.matches[y],I=g;return vb(g,bt({currentUrl:w,currentParams:R.params,nextUrl:x,nextParams:I.params},r,{actionResult:D,actionStatus:O,defaultShouldRevalidate:U?!1:o||w.pathname+w.search===x.pathname+x.search||w.search!==x.search||Lx(R,I)}))}),_=[];return f.forEach((g,y)=>{if(a||!n.some(L=>L.route.id===g.routeId)||u.has(y))return;let T=us(m,g.path,b);if(!T){_.push({key:y,routeId:g.routeId,path:g.path,matches:null,match:null,controller:null});return}let R=e.fetchers.get(y),I=tc(T,g.path),S=!1;d.has(y)?S=!1:h.has(y)?(h.delete(y),S=!0):R&&R.state!=="idle"&&R.data===void 0?S=o:S=vb(I,bt({currentUrl:w,currentParams:e.matches[e.matches.length-1].params,nextUrl:x,nextParams:n[n.length-1].params},r,{actionResult:D,actionStatus:O,defaultShouldRevalidate:U?!1:o})),S&&_.push({key:y,routeId:g.routeId,path:g.path,matches:T,match:I,controller:new AbortController})}),[N,_]}function Jp(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function g4(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function Lx(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function vb(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function yb(t,e,n,r,i){var a;let s;if(t){let h=r[t];Oe(h,"No route found to patch children into: routeId = "+t),h.children||(h.children=[]),s=h.children}else s=n;let o=e.filter(h=>!s.some(u=>Vx(h,u))),l=wf(o,i,[t||"_","patch",String(((a=s)==null?void 0:a.length)||"0")],r);s.push(...l)}function Vx(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(a=>Vx(n,a))}):!1}async function v4(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Oe(i,"No route found in manifest");let a={};for(let s in r){let l=i[s]!==void 0&&s!=="hasErrorBoundary";rl(!l,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!l&&!BI.has(s)&&(a[s]=r[s])}Object.assign(i,a),Object.assign(i,bt({},e(i),{lazy:void 0}))}async function y4(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,a,s)=>Object.assign(i,{[n[s].route.id]:a}),{})}async function _4(t,e,n,r,i,a,s,o,l,h){let u=a.map(m=>m.route.lazy?v4(m.route,l,o):void 0),f=a.map((m,b)=>{let A=u[b],D=i.some(x=>x.route.id===m.route.id);return bt({},m,{shouldLoad:D,resolve:async x=>(x&&r.method==="GET"&&(m.route.lazy||m.route.loader)&&(D=!0),D?b4(e,r,m,A,x,h):Promise.resolve({type:Qe.data,result:void 0}))})}),d=await t({matches:f,request:r,params:a[0].params,fetcherKey:s,context:h});try{await Promise.all(u)}catch{}return d}async function b4(t,e,n,r,i,a){let s,o,l=h=>{let u,f=new Promise((b,A)=>u=A);o=()=>u(),e.signal.addEventListener("abort",o);let d=b=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):h({request:e,params:n.params,context:a},...b!==void 0?[b]:[]),m=(async()=>{try{return{type:"data",result:await(i?i(A=>d(A)):d())}}catch(b){return{type:"error",result:b}}})();return Promise.race([m,f])};try{let h=n.route[t];if(r)if(h){let u,[f]=await Promise.all([l(h).catch(d=>{u=d}),r]);if(u!==void 0)throw u;s=f}else if(await r,h=n.route[t],h)s=await l(h);else if(t==="action"){let u=new URL(e.url),f=u.pathname+u.search;throw Hn(405,{method:e.method,pathname:f,routeId:n.route.id})}else return{type:Qe.data,result:void 0};else if(h)s=await l(h);else{let u=new URL(e.url),f=u.pathname+u.search;throw Hn(404,{pathname:f})}Oe(s.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:Qe.error,result:h}}finally{o&&e.signal.removeEventListener("abort",o)}return s}async function E4(t){let{result:e,type:n}=t;if(Bx(e)){let f;try{let d=e.headers.get("Content-Type");d&&/\bapplication\/json\b/.test(d)?e.body==null?f=null:f=await e.json():f=await e.text()}catch(d){return{type:Qe.error,error:d}}return n===Qe.error?{type:Qe.error,error:new Tf(e.status,e.statusText,f),statusCode:e.status,headers:e.headers}:{type:Qe.data,data:f,statusCode:e.status,headers:e.headers}}if(n===Qe.error){if(Ab(e)){var r,i;if(e.data instanceof Error){var a,s;return{type:Qe.error,error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:Qe.error,error:new Tf(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:il(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:Qe.error,error:e,statusCode:il(e)?e.status:void 0}}if(S4(e)){var o,l;return{type:Qe.deferred,deferredData:e,statusCode:(o=e.init)==null?void 0:o.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(Ab(e)){var h,u;return{type:Qe.data,data:e.data,statusCode:(h=e.init)==null?void 0:h.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}}return{type:Qe.data,data:e}}function w4(t,e,n,r,i,a){let s=t.headers.get("Location");if(Oe(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!Y0.test(s)){let o=r.slice(0,r.findIndex(l=>l.route.id===n)+1);s=Zp(new URL(e.url),o,i,!0,s,a),t.headers.set("Location",s)}return t}function _b(t,e,n){if(Y0.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),a=_l(i.pathname,n)!=null;if(i.origin===e.origin&&a)return i.pathname+i.search+i.hash}return t}function no(t,e,n,r){let i=t.createURL(zx(e)).toString(),a={signal:n};if(r&&Lr(r.formMethod)){let{formMethod:s,formEncType:o}=r;a.method=s.toUpperCase(),o==="application/json"?(a.headers=new Headers({"Content-Type":o}),a.body=JSON.stringify(r.json)):o==="text/plain"?a.body=r.text:o==="application/x-www-form-urlencoded"&&r.formData?a.body=eg(r.formData):a.body=r.formData}return new Request(i,a)}function eg(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function bb(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function T4(t,e,n,r,i){let a={},s=null,o,l=!1,h={},u=n&&ir(n[1])?n[1].error:void 0;return t.forEach(f=>{if(!(f.route.id in e))return;let d=f.route.id,m=e[d];if(Oe(!ds(m),"Cannot handle redirect results in processLoaderData"),ir(m)){let b=m.error;u!==void 0&&(b=u,u=void 0),s=s||{};{let A=hs(t,d);s[A.route.id]==null&&(s[A.route.id]=b)}a[d]=void 0,l||(l=!0,o=il(m.error)?m.error.status:500),m.headers&&(h[d]=m.headers)}else wa(m)?(r.set(d,m.deferredData),a[d]=m.deferredData.data,m.statusCode!=null&&m.statusCode!==200&&!l&&(o=m.statusCode),m.headers&&(h[d]=m.headers)):(a[d]=m.data,m.statusCode&&m.statusCode!==200&&!l&&(o=m.statusCode),m.headers&&(h[d]=m.headers))}),u!==void 0&&n&&(s={[n[0]]:u},a[n[0]]=void 0),{loaderData:a,errors:s,statusCode:o||200,loaderHeaders:h}}function Eb(t,e,n,r,i,a,s){let{loaderData:o,errors:l}=T4(e,n,r,s);return i.forEach(h=>{let{key:u,match:f,controller:d}=h,m=a[u];if(Oe(m,"Did not find corresponding fetcher result"),!(d&&d.signal.aborted))if(ir(m)){let b=hs(t.matches,f==null?void 0:f.route.id);l&&l[b.route.id]||(l=bt({},l,{[b.route.id]:m.error})),t.fetchers.delete(u)}else if(ds(m))Oe(!1,"Unhandled fetcher revalidation redirect");else if(wa(m))Oe(!1,"Unhandled fetcher deferred data");else{let b=oa(m.data);t.fetchers.set(u,b)}}),{loaderData:o,errors:l}}function wb(t,e,n,r){let i=bt({},e);for(let a of n){let s=a.route.id;if(e.hasOwnProperty(s)?e[s]!==void 0&&(i[s]=e[s]):t[s]!==void 0&&a.route.loader&&(i[s]=t[s]),r&&r.hasOwnProperty(s))break}return i}function Tb(t){return t?ir(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function hs(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function xb(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Hn(t,e){let{pathname:n,routeId:r,method:i,type:a,message:s}=e===void 0?{}:e,o="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":a==="defer-action"?l="defer() is not supported in actions":a==="invalid-body"&&(l="Unable to encode submission body")):t===403?(o="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",l='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new Tf(t||500,o,new Error(l),!0)}function ch(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(ds(i))return{key:r,result:i}}}function zx(t){let e=typeof t=="string"?Za(t):t;return Os(bt({},e,{hash:""}))}function x4(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function A4(t){return Bx(t.result)&&u4.has(t.result.status)}function wa(t){return t.type===Qe.deferred}function ir(t){return t.type===Qe.error}function ds(t){return(t&&t.type)===Qe.redirect}function Ab(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function S4(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Bx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function R4(t){return c4.has(t.toLowerCase())}function Lr(t){return o4.has(t.toLowerCase())}async function C4(t,e,n,r,i){let a=Object.entries(e);for(let s=0;s<a.length;s++){let[o,l]=a[s],h=t.find(d=>(d==null?void 0:d.route.id)===o);if(!h)continue;let u=r.find(d=>d.route.id===h.route.id),f=u!=null&&!Lx(u,h)&&(i&&i[h.route.id])!==void 0;wa(l)&&f&&await X0(l,n,!1).then(d=>{d&&(e[o]=d)})}}async function N4(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:a,controller:s}=n[r],o=e[i];t.find(h=>(h==null?void 0:h.route.id)===a)&&wa(o)&&(Oe(s,"Expected an AbortController for revalidating fetcher deferred result"),await X0(o,s.signal,!0).then(h=>{h&&(e[i]=h)}))}}async function X0(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Qe.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Qe.error,error:i}}return{type:Qe.data,data:t.deferredData.data}}}function Q0(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function tc(t,e){let n=typeof e=="string"?Za(e).search:e.search;if(t[t.length-1].route.index&&Q0(n||""))return t[t.length-1];let r=jx(t);return r[r.length-1]}function Sb(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:a,json:s}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(a!=null)return{formMethod:e,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function km(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function I4(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function ql(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function D4(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function oa(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function O4(t,e){try{let n=t.sessionStorage.getItem(Ux);if(n){let r=JSON.parse(n);for(let[i,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(i,new Set(a||[]))}}catch{}}function M4(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Ux,JSON.stringify(n))}catch(r){rl(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xf(){return xf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xf.apply(this,arguments)}const vd=$.createContext(null),Fx=$.createContext(null),Hs=$.createContext(null),K0=$.createContext(null),Xi=$.createContext({outlet:null,matches:[],isDataRoute:!1}),Hx=$.createContext(null);function k4(t,e){let{relative:n}=e===void 0?{}:e;yu()||Oe(!1);let{basename:r,navigator:i}=$.useContext(Hs),{hash:a,pathname:s,search:o}=$x(t,{relative:n}),l=s;return r!=="/"&&(l=s==="/"?r:Pi([r,s])),i.createHref({pathname:l,search:o,hash:a})}function yu(){return $.useContext(K0)!=null}function yd(){return yu()||Oe(!1),$.useContext(K0).location}function qx(t){$.useContext(Hs).static||$.useLayoutEffect(t)}function _d(){let{isDataRoute:t}=$.useContext(Xi);return t?Y4():j4()}function j4(){yu()||Oe(!1);let t=$.useContext(vd),{basename:e,future:n,navigator:r}=$.useContext(Hs),{matches:i}=$.useContext(Xi),{pathname:a}=yd(),s=JSON.stringify(G0(i,n.v7_relativeSplatPath)),o=$.useRef(!1);return qx(()=>{o.current=!0}),$.useCallback(function(h,u){if(u===void 0&&(u={}),!o.current)return;if(typeof h=="number"){r.go(h);return}let f=$0(h,JSON.parse(s),a,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Pi([e,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[e,r,s,a,t])}const P4=$.createContext(null);function U4(t){let e=$.useContext(Xi).outlet;return e&&$.createElement(P4.Provider,{value:t},e)}function Gx(){let{matches:t}=$.useContext(Xi),e=t[t.length-1];return e?e.params:{}}function $x(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=$.useContext(Hs),{matches:i}=$.useContext(Xi),{pathname:a}=yd(),s=JSON.stringify(G0(i,r.v7_relativeSplatPath));return $.useMemo(()=>$0(t,JSON.parse(s),a,n==="path"),[t,s,a,n])}function L4(t,e,n,r){yu()||Oe(!1);let{navigator:i}=$.useContext(Hs),{matches:a}=$.useContext(Xi),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let h=yd(),u;u=h;let f=u.pathname||"/",d=f;if(l!=="/"){let A=l.replace(/^\//,"").split("/");d="/"+f.replace(/^\//,"").split("/").slice(A.length).join("/")}let m=us(t,{pathname:d});return H4(m&&m.map(A=>Object.assign({},A,{params:Object.assign({},o,A.params),pathname:Pi([l,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?l:Pi([l,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),a,n,r)}function V4(){let t=Kx(),e=il(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),n?$.createElement("pre",{style:i},n):null,null)}const z4=$.createElement(V4,null);class B4 extends $.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?$.createElement(Xi.Provider,{value:this.props.routeContext},$.createElement(Hx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function F4(t){let{routeContext:e,match:n,children:r}=t,i=$.useContext(vd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),$.createElement(Xi.Provider,{value:e},r)}function H4(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let u=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);u>=0||Oe(!1),s=s.slice(0,Math.min(s.length,u+1))}let l=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<s.length;u++){let f=s[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(h=u),f.route.id){let{loaderData:d,errors:m}=n,b=f.route.loader&&d[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||b){l=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((u,f,d)=>{let m,b=!1,A=null,D=null;n&&(m=o&&f.route.id?o[f.route.id]:void 0,A=f.route.errorElement||z4,l&&(h<0&&d===0?(X4("route-fallback"),b=!0,D=null):h===d&&(b=!0,D=f.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,d+1)),x=()=>{let C;return m?C=A:b?C=D:f.route.Component?C=$.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=u,$.createElement(F4,{match:f,routeContext:{outlet:u,matches:w,isDataRoute:n!=null},children:C})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?$.createElement(B4,{location:n.location,revalidation:n.revalidation,component:A,error:m,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}var Yx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Yx||{}),Xx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Xx||{});function q4(t){let e=$.useContext(vd);return e||Oe(!1),e}function G4(t){let e=$.useContext(Fx);return e||Oe(!1),e}function $4(t){let e=$.useContext(Xi);return e||Oe(!1),e}function Qx(t){let e=$4(),n=e.matches[e.matches.length-1];return n.route.id||Oe(!1),n.route.id}function Kx(){var t;let e=$.useContext(Hx),n=G4(Xx.UseRouteError),r=Qx();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Y4(){let{router:t}=q4(Yx.UseNavigateStable),e=Qx(),n=$.useRef(!1);return qx(()=>{n.current=!0}),$.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,xf({fromRouteId:e},a)))},[t,e])}const Rb={};function X4(t,e,n){Rb[t]||(Rb[t]=!0)}function Q4(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function K4(t){return U4(t.context)}function W4(t){let{basename:e="/",children:n=null,location:r,navigationType:i=qt.Pop,navigator:a,static:s=!1,future:o}=t;yu()&&Oe(!1);let l=e.replace(/^\/*/,"/"),h=$.useMemo(()=>({basename:l,navigator:a,static:s,future:xf({v7_relativeSplatPath:!1},o)}),[l,o,a,s]);typeof r=="string"&&(r=Za(r));let{pathname:u="/",search:f="",hash:d="",state:m=null,key:b="default"}=r,A=$.useMemo(()=>{let D=_l(u,l);return D==null?null:{location:{pathname:D,search:f,hash:d,state:m,key:b},navigationType:i}},[l,u,f,d,m,b,i]);return A==null?null:$.createElement(Hs.Provider,{value:h},$.createElement(K0.Provider,{children:n,value:A}))}new Promise(()=>{});function Z4(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:$.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:$.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:$.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qc(){return qc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qc.apply(this,arguments)}function J4(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function eD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function tD(t,e){return t.button===0&&(!e||e==="_self")&&!eD(t)}const nD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rD="6";try{window.__reactRouterVersion=rD}catch{}function iD(t,e){return m4({basename:void 0,future:qc({},void 0,{v7_prependBasename:!0}),history:LI({window:void 0}),hydrationData:aD(),routes:t,mapRouteProperties:Z4,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function aD(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=qc({},e,{errors:sD(e.errors)})),e}function sD(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Tf(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let s=new a(i.message);s.stack="",n[r]=s}catch{}}if(n[r]==null){let a=new Error(i.message);a.stack="",n[r]=a}}else n[r]=i;return n}const oD=$.createContext({isTransitioning:!1}),lD=$.createContext(new Map),cD="startTransition",Cb=nC[cD],uD="flushSync",Nb=lC[uD];function hD(t){Cb?Cb(t):t()}function Gl(t){Nb?Nb(t):t()}let fD=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function dD(t){let{fallbackElement:e,router:n,future:r}=t,[i,a]=$.useState(n.state),[s,o]=$.useState(),[l,h]=$.useState({isTransitioning:!1}),[u,f]=$.useState(),[d,m]=$.useState(),[b,A]=$.useState(),D=$.useRef(new Map),{v7_startTransition:w}=r||{},x=$.useCallback(g=>{w?hD(g):g()},[w]),C=$.useCallback((g,y)=>{let{deletedFetchers:T,flushSync:R,viewTransitionOpts:I}=y;g.fetchers.forEach((L,z)=>{L.data!==void 0&&D.current.set(z,L.data)}),T.forEach(L=>D.current.delete(L));let S=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!I||S){R?Gl(()=>a(g)):x(()=>a(g));return}if(R){Gl(()=>{d&&(u&&u.resolve(),d.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:I.currentLocation,nextLocation:I.nextLocation})});let L=n.window.document.startViewTransition(()=>{Gl(()=>a(g))});L.finished.finally(()=>{Gl(()=>{f(void 0),m(void 0),o(void 0),h({isTransitioning:!1})})}),Gl(()=>m(L));return}d?(u&&u.resolve(),d.skipTransition(),A({state:g,currentLocation:I.currentLocation,nextLocation:I.nextLocation})):(o(g),h({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}))},[n.window,d,u,D,x]);$.useLayoutEffect(()=>n.subscribe(C),[n,C]),$.useEffect(()=>{l.isTransitioning&&!l.flushSync&&f(new fD)},[l]),$.useEffect(()=>{if(u&&s&&n.window){let g=s,y=u.promise,T=n.window.document.startViewTransition(async()=>{x(()=>a(g)),await y});T.finished.finally(()=>{f(void 0),m(void 0),o(void 0),h({isTransitioning:!1})}),m(T)}},[x,s,u,n.window]),$.useEffect(()=>{u&&s&&i.location.key===s.location.key&&u.resolve()},[u,d,i.location,s]),$.useEffect(()=>{!l.isTransitioning&&b&&(o(b.state),h({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}),A(void 0))},[l.isTransitioning,b]),$.useEffect(()=>{},[]);let O=$.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:g=>n.navigate(g),push:(g,y,T)=>n.navigate(g,{state:y,preventScrollReset:T==null?void 0:T.preventScrollReset}),replace:(g,y,T)=>n.navigate(g,{replace:!0,state:y,preventScrollReset:T==null?void 0:T.preventScrollReset})}),[n]),U=n.basename||"/",N=$.useMemo(()=>({router:n,navigator:O,static:!1,basename:U}),[n,O,U]),_=$.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return $.useEffect(()=>Q4(r,n.future),[r,n.future]),$.createElement($.Fragment,null,$.createElement(vd.Provider,{value:N},$.createElement(Fx.Provider,{value:i},$.createElement(lD.Provider,{value:D.current},$.createElement(oD.Provider,{value:l},$.createElement(W4,{basename:U,location:i.location,navigationType:i.historyAction,navigator:O,future:_},i.initialized||n.future.v7_partialHydration?$.createElement(mD,{routes:n.routes,future:n.future,state:i}):e))))),null)}const mD=$.memo(pD);function pD(t){let{routes:e,future:n,state:r}=t;return L4(e,void 0,r,n)}const gD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yD=$.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:s,state:o,target:l,to:h,preventScrollReset:u,viewTransition:f}=e,d=J4(e,nD),{basename:m}=$.useContext(Hs),b,A=!1;if(typeof h=="string"&&vD.test(h)&&(b=h,gD))try{let C=new URL(window.location.href),O=h.startsWith("//")?new URL(C.protocol+h):new URL(h),U=_l(O.pathname,m);O.origin===C.origin&&U!=null?h=U+O.search+O.hash:A=!0}catch{}let D=k4(h,{relative:i}),w=_D(h,{replace:s,state:o,target:l,preventScrollReset:u,relative:i,viewTransition:f});function x(C){r&&r(C),C.defaultPrevented||w(C)}return $.createElement("a",qc({},d,{href:b||D,onClick:A||a?r:x,ref:n,target:l}))});var Ib;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ib||(Ib={}));var Db;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Db||(Db={}));function _D(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:s,viewTransition:o}=e===void 0?{}:e,l=_d(),h=yd(),u=$x(t,{relative:s});return $.useCallback(f=>{if(tD(f,n)){f.preventDefault();let d=r!==void 0?r:Os(h)===Os(u);l(t,{replace:d,state:i,preventScrollReset:a,relative:s,viewTransition:o})}},[h,l,u,r,i,n,t,a,s,o])}const bD=()=>{};var Ob={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ED=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],l=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},Zx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,l=i+2<t.length,h=l?t[i+2]:0,u=a>>2,f=(a&3)<<4|o>>4;let d=(o&15)<<2|h>>6,m=h&63;l||(m=64,s||(d=64)),r.push(n[u],n[f],n[d],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Wx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ED(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||h==null||f==null)throw new wD;const d=a<<2|o>>4;if(r.push(d),h!==64){const m=o<<4&240|h>>2;if(r.push(m),f!==64){const b=h<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TD=function(t){const e=Wx(t);return Zx.encodeByteArray(e,!0)},Af=function(t){return TD(t).replace(/\./g,"")},Jx=function(t){try{return Zx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=()=>xD().__FIREBASE_DEFAULTS__,SD=()=>{if(typeof process>"u"||typeof Ob>"u")return;const t=Ob.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},RD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Jx(t[1]);return e&&JSON.parse(e)},bd=()=>{try{return bD()||AD()||SD()||RD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eA=t=>{var e,n;return(n=(e=bd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},W0=t=>{const e=eA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},tA=()=>{var t;return(t=bd())===null||t===void 0?void 0:t.config},nA=t=>{var e;return(e=bd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ed(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Af(JSON.stringify(n)),Af(JSON.stringify(s)),""].join(".")}const Ec={};function ND(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ec))Ec[e]?t.emulator.push(e):t.prod.push(e);return t}function ID(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Mb=!1;function wd(t,e){if(typeof window>"u"||typeof document>"u"||!Qi(window.location.host)||Ec[t]===e||Ec[t]||Mb)return;Ec[t]=e;function n(d){return`__firebase__banner__${d}`}const r="__firebase__banner",a=ND().prod.length>0;function s(){const d=document.getElementById(r);d&&d.remove()}function o(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function l(d,m){d.setAttribute("width","24"),d.setAttribute("id",m),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function h(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{Mb=!0,s()},d}function u(d,m){d.setAttribute("id",m),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function f(){const d=ID(r),m=n("text"),b=document.getElementById(m)||document.createElement("span"),A=n("learnmore"),D=document.getElementById(A)||document.createElement("a"),w=n("preprendIcon"),x=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const C=d.element;o(C),u(D,A);const O=h();l(x,w),C.append(x,b,D,O),document.body.appendChild(C)}a?(b.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dn())}function OD(){var t;const e=(t=bd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PD(){const t=Dn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function UD(){return!OD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LD(){try{return typeof indexedDB=="object"}catch{return!1}}function VD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD="FirebaseError";class Gr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=zD,Object.setPrototypeOf(this,Gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_u.prototype.create)}}class _u{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?BD(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Gr(i,o,r)}}function BD(t,e){return t.replace(FD,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const FD=/\{\$([^}]+)}/g;function HD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ms(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(kb(a)&&kb(s)){if(!Ms(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function kb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qD(t,e){const n=new GD(t,e);return n.subscribe.bind(n)}class GD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$D(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=jm),i.error===void 0&&(i.error=jm),i.complete===void 0&&(i.complete=jm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $D(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t){return t&&t._delegate?t._delegate:t}class Fi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new CD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QD(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XD(t){return t===cs?void 0:t}function QD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new YD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const WD={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},ZD=De.INFO,JD={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},e3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=JD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Z0{constructor(e){this.name=e,this._logLevel=ZD,this._logHandler=e3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const t3=(t,e)=>e.some(n=>t instanceof n);let jb,Pb;function n3(){return jb||(jb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r3(){return Pb||(Pb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iA=new WeakMap,tg=new WeakMap,aA=new WeakMap,Pm=new WeakMap,J0=new WeakMap;function i3(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(ka(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&iA.set(n,t)}).catch(()=>{}),J0.set(e,t),e}function a3(t){if(tg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});tg.set(t,e)}let ng={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||aA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ka(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function s3(t){ng=t(ng)}function o3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Um(this),e,...n);return aA.set(r,e.sort?e.sort():[e]),ka(r)}:r3().includes(t)?function(...e){return t.apply(Um(this),e),ka(iA.get(this))}:function(...e){return ka(t.apply(Um(this),e))}}function l3(t){return typeof t=="function"?o3(t):(t instanceof IDBTransaction&&a3(t),t3(t,n3())?new Proxy(t,ng):t)}function ka(t){if(t instanceof IDBRequest)return i3(t);if(Pm.has(t))return Pm.get(t);const e=l3(t);return e!==t&&(Pm.set(t,e),J0.set(e,t)),e}const Um=t=>J0.get(t);function c3(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=ka(s);return r&&s.addEventListener("upgradeneeded",l=>{r(ka(s.result),l.oldVersion,l.newVersion,ka(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),o}const u3=["get","getKey","getAll","getAllKeys","count"],h3=["put","add","delete","clear"],Lm=new Map;function Ub(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lm.get(e))return Lm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=h3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||u3.includes(n)))return;const a=async function(s,...o){const l=this.transaction(s,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(o.shift())),(await Promise.all([h[n](...o),i&&l.done]))[0]};return Lm.set(e,a),a}s3(t=>({...t,get:(e,n,r)=>Ub(e,n)||t.get(e,n,r),has:(e,n)=>!!Ub(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(d3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function d3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rg="@firebase/app",Lb="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=new Z0("@firebase/app"),m3="@firebase/app-compat",p3="@firebase/analytics-compat",g3="@firebase/analytics",v3="@firebase/app-check-compat",y3="@firebase/app-check",_3="@firebase/auth",b3="@firebase/auth-compat",E3="@firebase/database",w3="@firebase/data-connect",T3="@firebase/database-compat",x3="@firebase/functions",A3="@firebase/functions-compat",S3="@firebase/installations",R3="@firebase/installations-compat",C3="@firebase/messaging",N3="@firebase/messaging-compat",I3="@firebase/performance",D3="@firebase/performance-compat",O3="@firebase/remote-config",M3="@firebase/remote-config-compat",k3="@firebase/storage",j3="@firebase/storage-compat",P3="@firebase/firestore",U3="@firebase/ai",L3="@firebase/firestore-compat",V3="firebase",z3="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="[DEFAULT]",B3={[rg]:"fire-core",[m3]:"fire-core-compat",[g3]:"fire-analytics",[p3]:"fire-analytics-compat",[y3]:"fire-app-check",[v3]:"fire-app-check-compat",[_3]:"fire-auth",[b3]:"fire-auth-compat",[E3]:"fire-rtdb",[w3]:"fire-data-connect",[T3]:"fire-rtdb-compat",[x3]:"fire-fn",[A3]:"fire-fn-compat",[S3]:"fire-iid",[R3]:"fire-iid-compat",[C3]:"fire-fcm",[N3]:"fire-fcm-compat",[I3]:"fire-perf",[D3]:"fire-perf-compat",[O3]:"fire-rc",[M3]:"fire-rc-compat",[k3]:"fire-gcs",[j3]:"fire-gcs-compat",[P3]:"fire-fst",[L3]:"fire-fst-compat",[U3]:"fire-vertex","fire-js":"fire-js",[V3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=new Map,F3=new Map,ag=new Map;function Vb(t,e){try{t.container.addComponent(e)}catch(n){Hi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ba(t){const e=t.name;if(ag.has(e))return Hi.debug(`There were multiple attempts to register component ${e}.`),!1;ag.set(e,t);for(const n of Sf.values())Vb(n,t);for(const n of F3.values())Vb(n,t);return!0}function Eu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ja=new _u("app","Firebase",H3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ja.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=z3;function sA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ig,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ja.create("bad-app-name",{appName:String(i)});if(n||(n=tA()),!n)throw ja.create("no-options");const a=Sf.get(i);if(a){if(Ms(n,a.options)&&Ms(r,a.config))return a;throw ja.create("duplicate-app",{appName:i})}const s=new KD(i);for(const l of ag.values())s.addComponent(l);const o=new q3(n,r,s);return Sf.set(i,o),o}function Td(t=ig){const e=Sf.get(t);if(!e&&t===ig&&tA())return sA();if(!e)throw ja.create("no-app",{appName:t});return e}function Sr(t,e,n){var r;let i=(r=B3[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${i}" with version "${e}":`];a&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hi.warn(o.join(" "));return}Ba(new Fi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3="firebase-heartbeat-database",$3=1,Gc="firebase-heartbeat-store";let Vm=null;function oA(){return Vm||(Vm=c3(G3,$3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ja.create("idb-open",{originalErrorMessage:t.message})})),Vm}async function Y3(t){try{const n=(await oA()).transaction(Gc),r=await n.objectStore(Gc).get(lA(t));return await n.done,r}catch(e){if(e instanceof Gr)Hi.warn(e.message);else{const n=ja.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hi.warn(n.message)}}}async function zb(t,e){try{const r=(await oA()).transaction(Gc,"readwrite");await r.objectStore(Gc).put(e,lA(t)),await r.done}catch(n){if(n instanceof Gr)Hi.warn(n.message);else{const r=ja.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hi.warn(r.message)}}}function lA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3=1024,Q3=30;class K3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Z3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Bb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>Q3){const s=J3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Bb(),{heartbeatsToSend:r,unsentEntries:i}=W3(this._heartbeatsCache.heartbeats),a=Af(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Hi.warn(n),""}}}function Bb(){return new Date().toISOString().substring(0,10)}function W3(t,e=X3){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),Fb(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Fb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Z3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LD()?VD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Y3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Fb(t){return Af(JSON.stringify({version:2,heartbeats:t})).length}function J3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(t){Ba(new Fi("platform-logger",e=>new f3(e),"PRIVATE")),Ba(new Fi("heartbeat",e=>new K3(e),"PRIVATE")),Sr(rg,Lb,t),Sr(rg,Lb,"esm2017"),Sr("fire-js","")}e5("");function ev(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function cA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const t5=cA,uA=new _u("auth","Firebase",cA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf=new Z0("@firebase/auth");function n5(t,...e){Rf.logLevel<=De.WARN&&Rf.warn(`Auth (${qs}): ${t}`,...e)}function kh(t,...e){Rf.logLevel<=De.ERROR&&Rf.error(`Auth (${qs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t,...e){throw nv(t,...e)}function Fr(t,...e){return nv(t,...e)}function tv(t,e,n){const r=Object.assign(Object.assign({},t5()),{[e]:n});return new _u("auth","Firebase",r).create(e,{appName:t.name})}function xs(t){return tv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function r5(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&fi(t,"argument-error"),tv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return uA.create(t,...e)}function ve(t,e,...n){if(!t)throw nv(e,...n)}function Oi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw kh(e),new Error(e)}function qi(t,e){t||Oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function i5(){return Hb()==="http:"||Hb()==="https:"}function Hb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(i5()||kD()||"connection"in navigator)?navigator.onLine:!0}function s5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n){this.shortDelay=e,this.longDelay=n,qi(n>e,"Short delay should be less than long delay!"),this.isMobile=DD()||jD()}get(){return a5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t,e){qi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],c5=new wu(3e4,6e4);function iv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function bl(t,e,n,r,i={}){return fA(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=bu(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:l},a);return MD()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Qi(t.emulatorConfig.host)&&(h.credentials="include"),hA.fetch()(await dA(t,t.config.apiHost,n,o),h)})}async function fA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},o5),e);try{const i=new h5(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw uh(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[l,h]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw uh(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw uh(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw uh(t,"user-disabled",s);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw tv(t,u,h);fi(t,u)}}catch(i){if(i instanceof Gr)throw i;fi(t,"network-request-failed",{message:String(i)})}}async function u5(t,e,n,r,i={}){const a=await bl(t,e,n,r,i);return"mfaPendingCredential"in a&&fi(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function dA(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?rv(t.config,i):`${t.config.apiScheme}://${i}`;return l5.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}class h5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fr(this.auth,"network-request-failed")),c5.get())})}}function uh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Fr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(t,e){return bl(t,"POST","/v1/accounts:delete",e)}async function Cf(t,e){return bl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function d5(t,e=!1){const n=ut(t),r=await n.getIdToken(e),i=av(r);ve(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:wc(zm(i.auth_time)),issuedAtTime:wc(zm(i.iat)),expirationTime:wc(zm(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function zm(t){return Number(t)*1e3}function av(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return kh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Jx(n);return i?JSON.parse(i):(kh("Failed to decode base64 JWT payload"),null)}catch(i){return kh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function qb(t){const e=av(t);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Gr&&m5(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function m5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wc(this.lastLoginAt),this.creationTime=wc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await $c(t,Cf(n,{idToken:r}));ve(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?mA(a.providerUserInfo):[],o=v5(t.providerData,s),l=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(o!=null&&o.length),u=l?h:!1,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new og(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function g5(t){const e=ut(t);await Nf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function v5(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function mA(t){return t.map(e=>{var{providerId:n}=e,r=ev(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y5(t,e){const n=await fA(t,{},async()=>{const r=bu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await dA(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return t.emulatorConfig&&Qi(t.emulatorConfig.host)&&(l.credentials="include"),hA.fetch()(s,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _5(t,e){return bl(t,"POST","/v2/accounts:revokeToken",iv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=qb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await y5(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new Vo;return r&&(ve(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ve(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(ve(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vo,this.toJSON())}_performRefresh(){return Oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t,e){ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=ev(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new p5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new og(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await $c(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return d5(this,e)}reload(){return g5(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Nf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sr(this.auth.app))return Promise.reject(xs(this.auth));const e=await this.getIdToken();return await $c(this,f5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,s,o,l,h,u;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,m=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,b=(s=n.photoURL)!==null&&s!==void 0?s:void 0,A=(o=n.tenantId)!==null&&o!==void 0?o:void 0,D=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(h=n.createdAt)!==null&&h!==void 0?h:void 0,x=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:C,emailVerified:O,isAnonymous:U,providerData:N,stsTokenManager:_}=n;ve(C&&_,e,"internal-error");const g=Vo.fromJSON(this.name,_);ve(typeof C=="string",e,"internal-error"),ia(f,e.name),ia(d,e.name),ve(typeof O=="boolean",e,"internal-error"),ve(typeof U=="boolean",e,"internal-error"),ia(m,e.name),ia(b,e.name),ia(A,e.name),ia(D,e.name),ia(w,e.name),ia(x,e.name);const y=new zr({uid:C,auth:e,email:d,emailVerified:O,displayName:f,isAnonymous:U,photoURL:b,phoneNumber:m,tenantId:A,stsTokenManager:g,createdAt:w,lastLoginAt:x});return N&&Array.isArray(N)&&(y.providerData=N.map(T=>Object.assign({},T))),D&&(y._redirectEventId=D),y}static async _fromIdTokenResponse(e,n,r=!1){const i=new Vo;i.updateFromServerResponse(n);const a=new zr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Nf(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ve(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?mA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new Vo;o.updateFromIdToken(r);const l=new zr({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new og(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,h),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=new Map;function Mi(t){qi(t instanceof Function,"Expected a class definition");let e=Gb.get(t);return e?(qi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pA.type="NONE";const $b=pA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(t,e,n){return`firebase:${t}:${e}:${n}`}class zo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=jh(this.userKey,i.apiKey,a),this.fullPersistenceKey=jh("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Cf(this.auth,{idToken:e}).catch(()=>{});return n?zr._fromGetAccountInfoResponse(this.auth,n,e):null}return zr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new zo(Mi($b),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||Mi($b);const s=jh(r,e.config.apiKey,e.name);let o=null;for(const h of n)try{const u=await h._get(s);if(u){let f;if(typeof u=="string"){const d=await Cf(e,{idToken:u}).catch(()=>{});if(!d)break;f=await zr._fromGetAccountInfoResponse(e,d,u)}else f=zr._fromJSON(e,u);h!==a&&(o=f),a=h;break}}catch{}const l=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new zo(a,e,r):(a=l[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(s)}catch{}})),new zo(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_A(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(EA(e))return"Blackberry";if(wA(e))return"Webos";if(vA(e))return"Safari";if((e.includes("chrome/")||yA(e))&&!e.includes("edge/"))return"Chrome";if(bA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gA(t=Dn()){return/firefox\//i.test(t)}function vA(t=Dn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yA(t=Dn()){return/crios\//i.test(t)}function _A(t=Dn()){return/iemobile/i.test(t)}function bA(t=Dn()){return/android/i.test(t)}function EA(t=Dn()){return/blackberry/i.test(t)}function wA(t=Dn()){return/webos/i.test(t)}function sv(t=Dn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function b5(t=Dn()){var e;return sv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function E5(){return PD()&&document.documentMode===10}function TA(t=Dn()){return sv(t)||bA(t)||wA(t)||EA(t)||/windows phone/i.test(t)||_A(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t,e=[]){let n;switch(t){case"Browser":n=Yb(Dn());break;case"Worker":n=`${Yb(Dn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const l=e(a);s(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T5(t,e={}){return bl(t,"GET","/v2/passwordPolicy",iv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=6;class A5{constructor(e){var n,r,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:x5,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,s,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsUppercaseLetter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xb(this),this.idTokenSubscription=new Xb(this),this.beforeStateQueue=new w5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mi(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await zo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Cf(this,{idToken:e}),r=await zr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(sr(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===o)&&(l!=null&&l.user)&&(i=l.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=s5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sr(this.app))return Promise.reject(xs(this));const n=e?ut(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sr(this.app)?Promise.reject(xs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sr(this.app)?Promise.reject(xs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await T5(this),n=new A5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _u("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mi(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=await zo.create(this,[Mi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&n5(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function xd(t){return ut(t)}class Xb{constructor(e){this.auth=e,this.observer=null,this.addObserver=qD(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ov={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function R5(t){ov=t}function C5(t){return ov.loadJS(t)}function N5(){return ov.gapiScript}function I5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5(t,e){const n=Eu(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Ms(a,e??{}))return i;fi(i,"already-initialized")}return n.initialize({options:e})}function O5(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function M5(t,e,n){const r=xd(t);ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=AA(e),{host:s,port:o}=k5(e),l=o===null?"":`:${o}`,h={url:`${a}//${s}${l}/`},u=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ve(Ms(h,r.config.emulator)&&Ms(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Qi(s)?(Ed(`${a}//${s}${l}`),wd("Auth",!0)):j5()}function AA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function k5(t){const e=AA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Qb(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:Qb(s)}}}function Qb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function j5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Oi("not implemented")}_getIdTokenResponse(e){return Oi("not implemented")}_linkToIdToken(e,n){return Oi("not implemented")}_getReauthenticationResolver(e){return Oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(t,e){return u5(t,"POST","/v1/accounts:signInWithIdp",iv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5="http://localhost";class ks extends SA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=ev(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new ks(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Bo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Bo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bo(e,n)}buildRequest(){const e={requestUri:P5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends lv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma extends Tu{constructor(){super("facebook.com")}static credential(e){return ks._fromParams({providerId:ma.PROVIDER_ID,signInMethod:ma.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ma.credentialFromTaggedObject(e)}static credentialFromError(e){return ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ma.credential(e.oauthAccessToken)}catch{return null}}}ma.FACEBOOK_SIGN_IN_METHOD="facebook.com";ma.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends Tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ks._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ti.credential(n,r)}catch{return null}}}ti.GOOGLE_SIGN_IN_METHOD="google.com";ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa extends Tu{constructor(){super("github.com")}static credential(e){return ks._fromParams({providerId:pa.PROVIDER_ID,signInMethod:pa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pa.credentialFromTaggedObject(e)}static credentialFromError(e){return pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pa.credential(e.oauthAccessToken)}catch{return null}}}pa.GITHUB_SIGN_IN_METHOD="github.com";pa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga extends Tu{constructor(){super("twitter.com")}static credential(e,n){return ks._fromParams({providerId:ga.PROVIDER_ID,signInMethod:ga.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ga.credentialFromTaggedObject(e)}static credentialFromError(e){return ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ga.credential(n,r)}catch{return null}}}ga.TWITTER_SIGN_IN_METHOD="twitter.com";ga.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await zr._fromIdTokenResponse(e,r,i),s=Kb(r);return new al({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Kb(r);return new al({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Kb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends Gr{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,If.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new If(e,n,r,i)}}function RA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?If._fromErrorAndOperation(t,a,e,r):a})}async function U5(t,e,n=!1){const r=await $c(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return al._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L5(t,e,n=!1){const{auth:r}=t;if(sr(r.app))return Promise.reject(xs(r));const i="reauthenticate";try{const a=await $c(t,RA(r,i,e,t),n);ve(a.idToken,r,"internal-error");const s=av(a.idToken);ve(s,r,"internal-error");const{sub:o}=s;return ve(t.uid===o,r,"user-mismatch"),al._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&fi(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V5(t,e,n=!1){if(sr(t.app))return Promise.reject(xs(t));const r="signIn",i=await RA(t,r,e),a=await al._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}function z5(t,e,n,r){return ut(t).onIdTokenChanged(e,n,r)}function B5(t,e,n){return ut(t).beforeAuthStateChanged(e,n)}function F5(t,e,n,r){return ut(t).onAuthStateChanged(e,n,r)}function H5(t){return ut(t).signOut()}const Df="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Df,"1"),this.storage.removeItem(Df),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=1e3,G5=10;class NA extends CA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);E5()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,G5):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},q5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NA.type="LOCAL";const $5=NA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA extends CA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}IA.type="SESSION";const DA=IA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Ad(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async h=>h(n.origin,a)),l=await Y5(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ad.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,l)=>{const h=cv("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===h)switch(d.data.status){case"ack":clearTimeout(u),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(d.data.response);break;default:clearTimeout(u),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(){return window}function Q5(t){si().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(){return typeof si().WorkerGlobalScope<"u"&&typeof si().importScripts=="function"}async function K5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function W5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Z5(){return OA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="firebaseLocalStorageDb",J5=1,Of="firebaseLocalStorage",kA="fbase_key";class xu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sd(t,e){return t.transaction([Of],e?"readwrite":"readonly").objectStore(Of)}function eO(){const t=indexedDB.deleteDatabase(MA);return new xu(t).toPromise()}function lg(){const t=indexedDB.open(MA,J5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Of,{keyPath:kA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Of)?e(r):(r.close(),await eO(),e(await lg()))})})}async function Wb(t,e,n){const r=Sd(t,!0).put({[kA]:e,value:n});return new xu(r).toPromise()}async function tO(t,e){const n=Sd(t,!1).get(e),r=await new xu(n).toPromise();return r===void 0?null:r.value}function Zb(t,e){const n=Sd(t,!0).delete(e);return new xu(n).toPromise()}const nO=800,rO=3;class jA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>rO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ad._getInstance(Z5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await K5(),!this.activeServiceWorker)return;this.sender=new X5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||W5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lg();return await Wb(e,Df,"1"),await Zb(e,Df),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Wb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>tO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Sd(i,!1).getAll();return new xu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jA.type="LOCAL";const iO=jA;new wu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(t,e){return e?Mi(e):(ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends SA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function aO(t){return V5(t.auth,new uv(t),t.bypassAuthState)}function sO(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),L5(n,new uv(t),t.bypassAuthState)}async function oO(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),U5(n,new uv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aO;case"linkViaPopup":case"linkViaRedirect":return oO;case"reauthViaPopup":case"reauthViaRedirect":return sO;default:fi(this.auth,"internal-error")}}resolve(e){qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=new wu(2e3,1e4);async function cO(t,e,n){if(sr(t.app))return Promise.reject(Fr(t,"operation-not-supported-in-this-environment"));const r=xd(t);r5(t,e,lv);const i=PA(r,n);return new ms(r,"signInViaPopup",e,i).executeNotNull()}class ms extends UA{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,ms.currentPopupAction&&ms.currentPopupAction.cancel(),ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){qi(this.filter.length===1,"Popup operations only handle one event");const e=cv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lO.get())};e()}}ms.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO="pendingRedirect",Ph=new Map;class hO extends UA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ph.get(this.auth._key());if(!e){try{const r=await fO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ph.set(this.auth._key(),e)}return this.bypassAuthState||Ph.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fO(t,e){const n=pO(e),r=mO(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function dO(t,e){Ph.set(t._key(),e)}function mO(t){return Mi(t._redirectPersistence)}function pO(t){return jh(uO,t.config.apiKey,t.name)}async function gO(t,e,n=!1){if(sr(t.app))return Promise.reject(xs(t));const r=xd(t),i=PA(r,e),s=await new hO(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=10*60*1e3;class yO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_O(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!LA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Fr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jb(e))}saveEventToCache(e){this.cachedEventUids.add(Jb(e)),this.lastProcessedEventTime=Date.now()}}function Jb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _O(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(t,e={}){return bl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wO=/^https?/;async function TO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bO(t);for(const n of e)try{if(xO(n))return}catch{}fi(t,"unauthorized-domain")}function xO(t){const e=sg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!wO.test(n))return!1;if(EO.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=new wu(3e4,6e4);function e1(){const t=si().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function SO(t){return new Promise((e,n)=>{var r,i,a;function s(){e1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{e1(),n(Fr(t,"network-request-failed"))},timeout:AO.get()})}if(!((i=(r=si().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=si().gapi)===null||a===void 0)&&a.load)s();else{const o=I5("iframefcb");return si()[o]=()=>{gapi.load?s():n(Fr(t,"network-request-failed"))},C5(`${N5()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw Uh=null,e})}let Uh=null;function RO(t){return Uh=Uh||SO(t),Uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=new wu(5e3,15e3),NO="__/auth/iframe",IO="emulator/auth/iframe",DO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MO(t){const e=t.config;ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?rv(e,IO):`https://${t.config.authDomain}/${NO}`,r={apiKey:e.apiKey,appName:t.name,v:qs},i=OO.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${bu(r).slice(1)}`}async function kO(t){const e=await RO(t),n=si().gapi;return ve(n,t,"internal-error"),e.open({where:document.body,url:MO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DO,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=Fr(t,"network-request-failed"),o=si().setTimeout(()=>{a(s)},CO.get());function l(){si().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PO=500,UO=600,LO="_blank",VO="http://localhost";class t1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zO(t,e,n,r=PO,i=UO){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},jO),{width:r.toString(),height:i.toString(),top:a,left:s}),h=Dn().toLowerCase();n&&(o=yA(h)?LO:n),gA(h)&&(e=e||VO,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[m,b])=>`${d}${m}=${b},`,"");if(b5(h)&&o!=="_self")return BO(e||"",o),new t1(null);const f=window.open(e||"",o,u);ve(f,t,"popup-blocked");try{f.focus()}catch{}return new t1(f)}function BO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="__/auth/handler",HO="emulator/auth/handler",qO=encodeURIComponent("fac");async function n1(t,e,n,r,i,a){ve(t.config.authDomain,t,"auth-domain-config-required"),ve(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qs,eventId:i};if(e instanceof lv){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",HD(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))s[u]=f}if(e instanceof Tu){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await t._getAppCheckToken(),h=l?`#${qO}=${encodeURIComponent(l)}`:"";return`${GO(t)}?${bu(o).slice(1)}${h}`}function GO({config:t}){return t.emulator?rv(t,HO):`https://${t.authDomain}/${FO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="webStorageSupport";class $O{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DA,this._completeRedirectFn=gO,this._overrideRedirectResult=dO}async _openPopup(e,n,r,i){var a;qi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await n1(e,n,r,sg(),i);return zO(e,s,cv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await n1(e,n,r,sg(),i);return Q5(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(qi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await kO(e),r=new yO(e);return n.register("authEvent",i=>(ve(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bm,{type:Bm},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Bm];s!==void 0&&n(!!s),fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return TA()||vA()||sv()}}const YO=$O;var r1="@firebase/auth",i1="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KO(t){Ba(new Fi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;ve(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xA(t)},h=new S5(r,i,a,l);return O5(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ba(new Fi("auth-internal",e=>{const n=xd(e.getProvider("auth").getImmediate());return(r=>new XO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sr(r1,i1,QO(t)),Sr(r1,i1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=5*60,ZO=nA("authIdTokenMaxAge")||WO;let a1=null;const JO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ZO)return;const i=n==null?void 0:n.token;a1!==i&&(a1=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function eM(t=Td()){const e=Eu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=D5(t,{popupRedirectResolver:YO,persistence:[iO,$5,DA]}),r=nA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=JO(a.toString());B5(n,s,()=>s(n.currentUser)),z5(n,o=>s(o))}}const i=eA("auth");return i&&M5(n,`http://${i}`),n}function tM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}R5({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Fr("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",tM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KO("Browser");var nM="firebase",rM="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sr(nM,rM,"app");var s1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pa,VA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,g){function y(){}y.prototype=g.prototype,_.D=g.prototype,_.prototype=new y,_.prototype.constructor=_,_.C=function(T,R,I){for(var S=Array(arguments.length-2),L=2;L<arguments.length;L++)S[L-2]=arguments[L];return g.prototype[R].apply(T,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,g,y){y||(y=0);var T=Array(16);if(typeof g=="string")for(var R=0;16>R;++R)T[R]=g.charCodeAt(y++)|g.charCodeAt(y++)<<8|g.charCodeAt(y++)<<16|g.charCodeAt(y++)<<24;else for(R=0;16>R;++R)T[R]=g[y++]|g[y++]<<8|g[y++]<<16|g[y++]<<24;g=_.g[0],y=_.g[1],R=_.g[2];var I=_.g[3],S=g+(I^y&(R^I))+T[0]+3614090360&4294967295;g=y+(S<<7&4294967295|S>>>25),S=I+(R^g&(y^R))+T[1]+3905402710&4294967295,I=g+(S<<12&4294967295|S>>>20),S=R+(y^I&(g^y))+T[2]+606105819&4294967295,R=I+(S<<17&4294967295|S>>>15),S=y+(g^R&(I^g))+T[3]+3250441966&4294967295,y=R+(S<<22&4294967295|S>>>10),S=g+(I^y&(R^I))+T[4]+4118548399&4294967295,g=y+(S<<7&4294967295|S>>>25),S=I+(R^g&(y^R))+T[5]+1200080426&4294967295,I=g+(S<<12&4294967295|S>>>20),S=R+(y^I&(g^y))+T[6]+2821735955&4294967295,R=I+(S<<17&4294967295|S>>>15),S=y+(g^R&(I^g))+T[7]+4249261313&4294967295,y=R+(S<<22&4294967295|S>>>10),S=g+(I^y&(R^I))+T[8]+1770035416&4294967295,g=y+(S<<7&4294967295|S>>>25),S=I+(R^g&(y^R))+T[9]+2336552879&4294967295,I=g+(S<<12&4294967295|S>>>20),S=R+(y^I&(g^y))+T[10]+4294925233&4294967295,R=I+(S<<17&4294967295|S>>>15),S=y+(g^R&(I^g))+T[11]+2304563134&4294967295,y=R+(S<<22&4294967295|S>>>10),S=g+(I^y&(R^I))+T[12]+1804603682&4294967295,g=y+(S<<7&4294967295|S>>>25),S=I+(R^g&(y^R))+T[13]+4254626195&4294967295,I=g+(S<<12&4294967295|S>>>20),S=R+(y^I&(g^y))+T[14]+2792965006&4294967295,R=I+(S<<17&4294967295|S>>>15),S=y+(g^R&(I^g))+T[15]+1236535329&4294967295,y=R+(S<<22&4294967295|S>>>10),S=g+(R^I&(y^R))+T[1]+4129170786&4294967295,g=y+(S<<5&4294967295|S>>>27),S=I+(y^R&(g^y))+T[6]+3225465664&4294967295,I=g+(S<<9&4294967295|S>>>23),S=R+(g^y&(I^g))+T[11]+643717713&4294967295,R=I+(S<<14&4294967295|S>>>18),S=y+(I^g&(R^I))+T[0]+3921069994&4294967295,y=R+(S<<20&4294967295|S>>>12),S=g+(R^I&(y^R))+T[5]+3593408605&4294967295,g=y+(S<<5&4294967295|S>>>27),S=I+(y^R&(g^y))+T[10]+38016083&4294967295,I=g+(S<<9&4294967295|S>>>23),S=R+(g^y&(I^g))+T[15]+3634488961&4294967295,R=I+(S<<14&4294967295|S>>>18),S=y+(I^g&(R^I))+T[4]+3889429448&4294967295,y=R+(S<<20&4294967295|S>>>12),S=g+(R^I&(y^R))+T[9]+568446438&4294967295,g=y+(S<<5&4294967295|S>>>27),S=I+(y^R&(g^y))+T[14]+3275163606&4294967295,I=g+(S<<9&4294967295|S>>>23),S=R+(g^y&(I^g))+T[3]+4107603335&4294967295,R=I+(S<<14&4294967295|S>>>18),S=y+(I^g&(R^I))+T[8]+1163531501&4294967295,y=R+(S<<20&4294967295|S>>>12),S=g+(R^I&(y^R))+T[13]+2850285829&4294967295,g=y+(S<<5&4294967295|S>>>27),S=I+(y^R&(g^y))+T[2]+4243563512&4294967295,I=g+(S<<9&4294967295|S>>>23),S=R+(g^y&(I^g))+T[7]+1735328473&4294967295,R=I+(S<<14&4294967295|S>>>18),S=y+(I^g&(R^I))+T[12]+2368359562&4294967295,y=R+(S<<20&4294967295|S>>>12),S=g+(y^R^I)+T[5]+4294588738&4294967295,g=y+(S<<4&4294967295|S>>>28),S=I+(g^y^R)+T[8]+2272392833&4294967295,I=g+(S<<11&4294967295|S>>>21),S=R+(I^g^y)+T[11]+1839030562&4294967295,R=I+(S<<16&4294967295|S>>>16),S=y+(R^I^g)+T[14]+4259657740&4294967295,y=R+(S<<23&4294967295|S>>>9),S=g+(y^R^I)+T[1]+2763975236&4294967295,g=y+(S<<4&4294967295|S>>>28),S=I+(g^y^R)+T[4]+1272893353&4294967295,I=g+(S<<11&4294967295|S>>>21),S=R+(I^g^y)+T[7]+4139469664&4294967295,R=I+(S<<16&4294967295|S>>>16),S=y+(R^I^g)+T[10]+3200236656&4294967295,y=R+(S<<23&4294967295|S>>>9),S=g+(y^R^I)+T[13]+681279174&4294967295,g=y+(S<<4&4294967295|S>>>28),S=I+(g^y^R)+T[0]+3936430074&4294967295,I=g+(S<<11&4294967295|S>>>21),S=R+(I^g^y)+T[3]+3572445317&4294967295,R=I+(S<<16&4294967295|S>>>16),S=y+(R^I^g)+T[6]+76029189&4294967295,y=R+(S<<23&4294967295|S>>>9),S=g+(y^R^I)+T[9]+3654602809&4294967295,g=y+(S<<4&4294967295|S>>>28),S=I+(g^y^R)+T[12]+3873151461&4294967295,I=g+(S<<11&4294967295|S>>>21),S=R+(I^g^y)+T[15]+530742520&4294967295,R=I+(S<<16&4294967295|S>>>16),S=y+(R^I^g)+T[2]+3299628645&4294967295,y=R+(S<<23&4294967295|S>>>9),S=g+(R^(y|~I))+T[0]+4096336452&4294967295,g=y+(S<<6&4294967295|S>>>26),S=I+(y^(g|~R))+T[7]+1126891415&4294967295,I=g+(S<<10&4294967295|S>>>22),S=R+(g^(I|~y))+T[14]+2878612391&4294967295,R=I+(S<<15&4294967295|S>>>17),S=y+(I^(R|~g))+T[5]+4237533241&4294967295,y=R+(S<<21&4294967295|S>>>11),S=g+(R^(y|~I))+T[12]+1700485571&4294967295,g=y+(S<<6&4294967295|S>>>26),S=I+(y^(g|~R))+T[3]+2399980690&4294967295,I=g+(S<<10&4294967295|S>>>22),S=R+(g^(I|~y))+T[10]+4293915773&4294967295,R=I+(S<<15&4294967295|S>>>17),S=y+(I^(R|~g))+T[1]+2240044497&4294967295,y=R+(S<<21&4294967295|S>>>11),S=g+(R^(y|~I))+T[8]+1873313359&4294967295,g=y+(S<<6&4294967295|S>>>26),S=I+(y^(g|~R))+T[15]+4264355552&4294967295,I=g+(S<<10&4294967295|S>>>22),S=R+(g^(I|~y))+T[6]+2734768916&4294967295,R=I+(S<<15&4294967295|S>>>17),S=y+(I^(R|~g))+T[13]+1309151649&4294967295,y=R+(S<<21&4294967295|S>>>11),S=g+(R^(y|~I))+T[4]+4149444226&4294967295,g=y+(S<<6&4294967295|S>>>26),S=I+(y^(g|~R))+T[11]+3174756917&4294967295,I=g+(S<<10&4294967295|S>>>22),S=R+(g^(I|~y))+T[2]+718787259&4294967295,R=I+(S<<15&4294967295|S>>>17),S=y+(I^(R|~g))+T[9]+3951481745&4294967295,_.g[0]=_.g[0]+g&4294967295,_.g[1]=_.g[1]+(R+(S<<21&4294967295|S>>>11))&4294967295,_.g[2]=_.g[2]+R&4294967295,_.g[3]=_.g[3]+I&4294967295}r.prototype.u=function(_,g){g===void 0&&(g=_.length);for(var y=g-this.blockSize,T=this.B,R=this.h,I=0;I<g;){if(R==0)for(;I<=y;)i(this,_,I),I+=this.blockSize;if(typeof _=="string"){for(;I<g;)if(T[R++]=_.charCodeAt(I++),R==this.blockSize){i(this,T),R=0;break}}else for(;I<g;)if(T[R++]=_[I++],R==this.blockSize){i(this,T),R=0;break}}this.h=R,this.o+=g},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var g=1;g<_.length-8;++g)_[g]=0;var y=8*this.o;for(g=_.length-8;g<_.length;++g)_[g]=y&255,y/=256;for(this.u(_),_=Array(16),g=y=0;4>g;++g)for(var T=0;32>T;T+=8)_[y++]=this.g[g]>>>T&255;return _};function a(_,g){var y=o;return Object.prototype.hasOwnProperty.call(y,_)?y[_]:y[_]=g(_)}function s(_,g){this.h=g;for(var y=[],T=!0,R=_.length-1;0<=R;R--){var I=_[R]|0;T&&I==g||(y[R]=I,T=!1)}this.g=y}var o={};function l(_){return-128<=_&&128>_?a(_,function(g){return new s([g|0],0>g?-1:0)}):new s([_|0],0>_?-1:0)}function h(_){if(isNaN(_)||!isFinite(_))return f;if(0>_)return D(h(-_));for(var g=[],y=1,T=0;_>=y;T++)g[T]=_/y|0,y*=4294967296;return new s(g,0)}function u(_,g){if(_.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(_.charAt(0)=="-")return D(u(_.substring(1),g));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=h(Math.pow(g,8)),T=f,R=0;R<_.length;R+=8){var I=Math.min(8,_.length-R),S=parseInt(_.substring(R,R+I),g);8>I?(I=h(Math.pow(g,I)),T=T.j(I).add(h(S))):(T=T.j(y),T=T.add(h(S)))}return T}var f=l(0),d=l(1),m=l(16777216);t=s.prototype,t.m=function(){if(A(this))return-D(this).m();for(var _=0,g=1,y=0;y<this.g.length;y++){var T=this.i(y);_+=(0<=T?T:4294967296+T)*g,g*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b(this))return"0";if(A(this))return"-"+D(this).toString(_);for(var g=h(Math.pow(_,6)),y=this,T="";;){var R=O(y,g).g;y=w(y,R.j(g));var I=((0<y.g.length?y.g[0]:y.h)>>>0).toString(_);if(y=R,b(y))return I+T;for(;6>I.length;)I="0"+I;T=I+T}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function b(_){if(_.h!=0)return!1;for(var g=0;g<_.g.length;g++)if(_.g[g]!=0)return!1;return!0}function A(_){return _.h==-1}t.l=function(_){return _=w(this,_),A(_)?-1:b(_)?0:1};function D(_){for(var g=_.g.length,y=[],T=0;T<g;T++)y[T]=~_.g[T];return new s(y,~_.h).add(d)}t.abs=function(){return A(this)?D(this):this},t.add=function(_){for(var g=Math.max(this.g.length,_.g.length),y=[],T=0,R=0;R<=g;R++){var I=T+(this.i(R)&65535)+(_.i(R)&65535),S=(I>>>16)+(this.i(R)>>>16)+(_.i(R)>>>16);T=S>>>16,I&=65535,S&=65535,y[R]=S<<16|I}return new s(y,y[y.length-1]&-2147483648?-1:0)};function w(_,g){return _.add(D(g))}t.j=function(_){if(b(this)||b(_))return f;if(A(this))return A(_)?D(this).j(D(_)):D(D(this).j(_));if(A(_))return D(this.j(D(_)));if(0>this.l(m)&&0>_.l(m))return h(this.m()*_.m());for(var g=this.g.length+_.g.length,y=[],T=0;T<2*g;T++)y[T]=0;for(T=0;T<this.g.length;T++)for(var R=0;R<_.g.length;R++){var I=this.i(T)>>>16,S=this.i(T)&65535,L=_.i(R)>>>16,z=_.i(R)&65535;y[2*T+2*R]+=S*z,x(y,2*T+2*R),y[2*T+2*R+1]+=I*z,x(y,2*T+2*R+1),y[2*T+2*R+1]+=S*L,x(y,2*T+2*R+1),y[2*T+2*R+2]+=I*L,x(y,2*T+2*R+2)}for(T=0;T<g;T++)y[T]=y[2*T+1]<<16|y[2*T];for(T=g;T<2*g;T++)y[T]=0;return new s(y,0)};function x(_,g){for(;(_[g]&65535)!=_[g];)_[g+1]+=_[g]>>>16,_[g]&=65535,g++}function C(_,g){this.g=_,this.h=g}function O(_,g){if(b(g))throw Error("division by zero");if(b(_))return new C(f,f);if(A(_))return g=O(D(_),g),new C(D(g.g),D(g.h));if(A(g))return g=O(_,D(g)),new C(D(g.g),g.h);if(30<_.g.length){if(A(_)||A(g))throw Error("slowDivide_ only works with positive integers.");for(var y=d,T=g;0>=T.l(_);)y=U(y),T=U(T);var R=N(y,1),I=N(T,1);for(T=N(T,2),y=N(y,2);!b(T);){var S=I.add(T);0>=S.l(_)&&(R=R.add(y),I=S),T=N(T,1),y=N(y,1)}return g=w(_,R.j(g)),new C(R,g)}for(R=f;0<=_.l(g);){for(y=Math.max(1,Math.floor(_.m()/g.m())),T=Math.ceil(Math.log(y)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),I=h(y),S=I.j(g);A(S)||0<S.l(_);)y-=T,I=h(y),S=I.j(g);b(I)&&(I=d),R=R.add(I),_=w(_,S)}return new C(R,_)}t.A=function(_){return O(this,_).h},t.and=function(_){for(var g=Math.max(this.g.length,_.g.length),y=[],T=0;T<g;T++)y[T]=this.i(T)&_.i(T);return new s(y,this.h&_.h)},t.or=function(_){for(var g=Math.max(this.g.length,_.g.length),y=[],T=0;T<g;T++)y[T]=this.i(T)|_.i(T);return new s(y,this.h|_.h)},t.xor=function(_){for(var g=Math.max(this.g.length,_.g.length),y=[],T=0;T<g;T++)y[T]=this.i(T)^_.i(T);return new s(y,this.h^_.h)};function U(_){for(var g=_.g.length+1,y=[],T=0;T<g;T++)y[T]=_.i(T)<<1|_.i(T-1)>>>31;return new s(y,_.h)}function N(_,g){var y=g>>5;g%=32;for(var T=_.g.length-y,R=[],I=0;I<T;I++)R[I]=0<g?_.i(I+y)>>>g|_.i(I+y+1)<<32-g:_.i(I+y);return new s(R,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,VA=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=u,Pa=s}).apply(typeof s1<"u"?s1:typeof self<"u"?self:typeof window<"u"?window:{});var hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zA,nc,BA,Lh,cg,FA,HA,qA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,v,E){return c==Array.prototype||c==Object.prototype||(c[v]=E.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof hh=="object"&&hh];for(var v=0;v<c.length;++v){var E=c[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function i(c,v){if(v)e:{var E=r;c=c.split(".");for(var j=0;j<c.length-1;j++){var q=c[j];if(!(q in E))break e;E=E[q]}c=c[c.length-1],j=E[c],v=v(j),v!=j&&v!=null&&e(E,c,{configurable:!0,writable:!0,value:v})}}function a(c,v){c instanceof String&&(c+="");var E=0,j=!1,q={next:function(){if(!j&&E<c.length){var Q=E++;return{value:v(Q,c[Q]),done:!1}}return j=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}i("Array.prototype.values",function(c){return c||function(){return a(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(c){var v=typeof c;return v=v!="object"?v:c?Array.isArray(c)?"array":v:"null",v=="array"||v=="object"&&typeof c.length=="number"}function h(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function u(c,v,E){return c.call.apply(c.bind,arguments)}function f(c,v,E){if(!c)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,j),c.apply(v,q)}}return function(){return c.apply(v,arguments)}}function d(c,v,E){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,d.apply(null,arguments)}function m(c,v){var E=Array.prototype.slice.call(arguments,1);return function(){var j=E.slice();return j.push.apply(j,arguments),c.apply(this,j)}}function b(c,v){function E(){}E.prototype=v.prototype,c.aa=v.prototype,c.prototype=new E,c.prototype.constructor=c,c.Qb=function(j,q,Q){for(var re=Array(arguments.length-2),it=2;it<arguments.length;it++)re[it-2]=arguments[it];return v.prototype[q].apply(j,re)}}function A(c){const v=c.length;if(0<v){const E=Array(v);for(let j=0;j<v;j++)E[j]=c[j];return E}return[]}function D(c,v){for(let E=1;E<arguments.length;E++){const j=arguments[E];if(l(j)){const q=c.length||0,Q=j.length||0;c.length=q+Q;for(let re=0;re<Q;re++)c[q+re]=j[re]}else c.push(j)}}class w{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function x(c){return/^[\s\xa0]*$/.test(c)}function C(){var c=o.navigator;return c&&(c=c.userAgent)?c:""}function O(c){return O[" "](c),c}O[" "]=function(){};var U=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function N(c,v,E){for(const j in c)v.call(E,c[j],j,c)}function _(c,v){for(const E in c)v.call(void 0,c[E],E,c)}function g(c){const v={};for(const E in c)v[E]=c[E];return v}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,v){let E,j;for(let q=1;q<arguments.length;q++){j=arguments[q];for(E in j)c[E]=j[E];for(let Q=0;Q<y.length;Q++)E=y[Q],Object.prototype.hasOwnProperty.call(j,E)&&(c[E]=j[E])}}function R(c){var v=1;c=c.split(":");const E=[];for(;0<v&&c.length;)E.push(c.shift()),v--;return c.length&&E.push(c.join(":")),E}function I(c){o.setTimeout(()=>{throw c},0)}function S(){var c=B;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class L{constructor(){this.h=this.g=null}add(v,E){const j=z.get();j.set(v,E),this.h?this.h.next=j:this.g=j,this.h=j}}var z=new w(()=>new M,c=>c.reset());class M{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let k,H=!1,B=new L,P=()=>{const c=o.Promise.resolve(void 0);k=()=>{c.then(K)}};var K=()=>{for(var c;c=S();){try{c.h.call(c.g)}catch(E){I(E)}var v=z;v.j(c),100>v.h&&(v.h++,c.next=v.g,v.g=c)}H=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};o.addEventListener("test",E,v),o.removeEventListener("test",E,v)}catch{}return c}();function Y(c,v){if(J.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var E=this.type=c.type,j=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget){if(U){e:{try{O(v.nodeName);var q=!0;break e}catch{}q=!1}q||(v=null)}}else E=="mouseover"?v=c.fromElement:E=="mouseout"&&(v=c.toElement);this.relatedTarget=v,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:se[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Y.aa.h.call(this)}}b(Y,J);var se={2:"touch",3:"pen",4:"mouse"};Y.prototype.h=function(){Y.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),je=0;function Pe(c,v,E,j,q){this.listener=c,this.proxy=null,this.src=v,this.type=E,this.capture=!!j,this.ha=q,this.key=++je,this.da=this.fa=!1}function ze(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function We(c){this.src=c,this.g={},this.h=0}We.prototype.add=function(c,v,E,j,q){var Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);var re=en(c,v,j,q);return-1<re?(v=c[re],E||(v.fa=!1)):(v=new Pe(v,this.src,Q,!!j,q),v.fa=E,c.push(v)),v};function xe(c,v){var E=v.type;if(E in c.g){var j=c.g[E],q=Array.prototype.indexOf.call(j,v,void 0),Q;(Q=0<=q)&&Array.prototype.splice.call(j,q,1),Q&&(ze(v),c.g[E].length==0&&(delete c.g[E],c.h--))}}function en(c,v,E,j){for(var q=0;q<c.length;++q){var Q=c[q];if(!Q.da&&Q.listener==v&&Q.capture==!!E&&Q.ha==j)return q}return-1}var un="closure_lm_"+(1e6*Math.random()|0),Ze={};function rt(c,v,E,j,q){if(Array.isArray(v)){for(var Q=0;Q<v.length;Q++)rt(c,v[Q],E,j,q);return null}return E=Rt(E),c&&c[Te]?c.K(v,E,h(j)?!!j.capture:!1,q):Je(c,v,E,!1,j,q)}function Je(c,v,E,j,q,Q){if(!v)throw Error("Invalid event type");var re=h(q)?!!q.capture:!!q,it=st(c);if(it||(c[un]=it=new We(c)),E=it.add(v,E,j,re,Q),E.proxy)return E;if(j=$e(),E.proxy=j,j.src=c,j.listener=E,c.addEventListener)W||(q=re),q===void 0&&(q=!1),c.addEventListener(v.toString(),j,q);else if(c.attachEvent)c.attachEvent(ht(v.toString()),j);else if(c.addListener&&c.removeListener)c.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return E}function $e(){function c(E){return v.call(c.src,c.listener,E)}const v=hn;return c}function xt(c,v,E,j,q){if(Array.isArray(v))for(var Q=0;Q<v.length;Q++)xt(c,v[Q],E,j,q);else j=h(j)?!!j.capture:!!j,E=Rt(E),c&&c[Te]?(c=c.i,v=String(v).toString(),v in c.g&&(Q=c.g[v],E=en(Q,E,j,q),-1<E&&(ze(Q[E]),Array.prototype.splice.call(Q,E,1),Q.length==0&&(delete c.g[v],c.h--)))):c&&(c=st(c))&&(v=c.g[v.toString()],c=-1,v&&(c=en(v,E,j,q)),(E=-1<c?v[c]:null)&&Mt(E))}function Mt(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[Te])xe(v.i,c);else{var E=c.type,j=c.proxy;v.removeEventListener?v.removeEventListener(E,j,c.capture):v.detachEvent?v.detachEvent(ht(E),j):v.addListener&&v.removeListener&&v.removeListener(j),(E=st(v))?(xe(E,c),E.h==0&&(E.src=null,v[un]=null)):ze(c)}}}function ht(c){return c in Ze?Ze[c]:Ze[c]="on"+c}function hn(c,v){if(c.da)c=!0;else{v=new Y(v,this);var E=c.listener,j=c.ha||c.src;c.fa&&Mt(c),c=E.call(j,v)}return c}function st(c){return c=c[un],c instanceof We?c:null}var Re="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(c){return typeof c=="function"?c:(c[Re]||(c[Re]=function(v){return c.handleEvent(v)}),c[Re])}function et(){G.call(this),this.i=new We(this),this.M=this,this.F=null}b(et,G),et.prototype[Te]=!0,et.prototype.removeEventListener=function(c,v,E,j){xt(this,c,v,E,j)};function gt(c,v){var E,j=c.F;if(j)for(E=[];j;j=j.F)E.push(j);if(c=c.M,j=v.type||v,typeof v=="string")v=new J(v,c);else if(v instanceof J)v.target=v.target||c;else{var q=v;v=new J(j,c),T(v,q)}if(q=!0,E)for(var Q=E.length-1;0<=Q;Q--){var re=v.g=E[Q];q=qe(re,j,!0,v)&&q}if(re=v.g=c,q=qe(re,j,!0,v)&&q,q=qe(re,j,!1,v)&&q,E)for(Q=0;Q<E.length;Q++)re=v.g=E[Q],q=qe(re,j,!1,v)&&q}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var c=this.i,v;for(v in c.g){for(var E=c.g[v],j=0;j<E.length;j++)ze(E[j]);delete c.g[v],c.h--}}this.F=null},et.prototype.K=function(c,v,E,j){return this.i.add(String(c),v,!1,E,j)},et.prototype.L=function(c,v,E,j){return this.i.add(String(c),v,!0,E,j)};function qe(c,v,E,j){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();for(var q=!0,Q=0;Q<v.length;++Q){var re=v[Q];if(re&&!re.da&&re.capture==E){var it=re.listener,mn=re.ha||re.src;re.fa&&xe(c.i,re),q=it.call(mn,j)!==!1&&q}}return q&&!j.defaultPrevented}function zt(c,v,E){if(typeof c=="function")E&&(c=d(c,E));else if(c&&typeof c.handleEvent=="function")c=d(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:o.setTimeout(c,v||0)}function kt(c){c.g=zt(()=>{c.g=null,c.i&&(c.i=!1,kt(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class tn extends G{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:kt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bt(c){G.call(this),this.h=c,this.g={}}b(Bt,G);var jt=[];function En(c){N(c.g,function(v,E){this.g.hasOwnProperty(E)&&Mt(v)},c),c.g={}}Bt.prototype.N=function(){Bt.aa.N.call(this),En(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vn=o.JSON.stringify,Ki=o.JSON.parse,Sl=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function $r(){}$r.prototype.h=null;function Yr(c){return c.h||(c.h=c.i())}function Ir(){}var Dr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wn(){J.call(this,"d")}b(wn,J);function zn(){J.call(this,"c")}b(zn,J);var fn={},Xr=null;function Qr(){return Xr=Xr||new et}fn.La="serverreachability";function On(c){J.call(this,fn.La,c)}b(On,J);function nn(c){const v=Qr();gt(v,new On(v))}fn.STAT_EVENT="statevent";function ju(c,v){J.call(this,fn.STAT_EVENT,c),this.stat=v}b(ju,J);function dn(c){const v=Qr();gt(v,new ju(v,c))}fn.Ma="timingevent";function V(c,v){J.call(this,fn.Ma,c),this.size=v}b(V,J);function F(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},v)}function X(){this.g=!0}X.prototype.xa=function(){this.g=!1};function ne(c,v,E,j,q,Q){c.info(function(){if(c.g)if(Q)for(var re="",it=Q.split("&"),mn=0;mn<it.length;mn++){var Be=it[mn].split("=");if(1<Be.length){var Tn=Be[0];Be=Be[1];var xn=Tn.split("_");re=2<=xn.length&&xn[1]=="type"?re+(Tn+"="+Be+"&"):re+(Tn+"=redacted&")}}else re=null;else re=Q;return"XMLHTTP REQ ("+j+") [attempt "+q+"]: "+v+`
`+E+`
`+re})}function ie(c,v,E,j,q,Q,re){c.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+q+"]: "+v+`
`+E+`
`+Q+" "+re})}function he(c,v,E,j){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+ue(c,E)+(j?" "+j:"")})}function pe(c,v){c.info(function(){return"TIMEOUT: "+v})}X.prototype.info=function(){};function ue(c,v){if(!c.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(c=0;c<E.length;c++)if(Array.isArray(E[c])){var j=E[c];if(!(2>j.length)){var q=j[1];if(Array.isArray(q)&&!(1>q.length)){var Q=q[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var re=1;re<q.length;re++)q[re]=""}}}}return Vn(E)}catch{return v}}var ce={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},le={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fe;function ye(){}b(ye,$r),ye.prototype.g=function(){return new XMLHttpRequest},ye.prototype.i=function(){return{}},fe=new ye;function Ee(c,v,E,j){this.j=c,this.i=v,this.l=E,this.R=j||1,this.U=new Bt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ft}function Ft(){this.i=null,this.g="",this.h=!1}var Ye={},ke={};function ot(c,v,E){c.L=1,c.v=Vu(bi(v)),c.m=E,c.P=!0,vi(c,null)}function vi(c,v){c.F=Date.now(),Mn(c),c.A=bi(c.v);var E=c.A,j=c.R;Array.isArray(j)||(j=[String(j)]),vy(E.i,"t",j),c.C=0,E=c.j.J,c.h=new Ft,c.g=jy(c.j,E?v:null,!c.m),0<c.O&&(c.M=new tn(d(c.Y,c,c.g),c.O)),v=c.U,E=c.g,j=c.ca;var q="readystatechange";Array.isArray(q)||(q&&(jt[0]=q.toString()),q=jt);for(var Q=0;Q<q.length;Q++){var re=rt(E,q[Q],j||v.handleEvent,!1,v.h||v);if(!re)break;v.g[re.key]=re}v=c.H?g(c.H):{},c.m?(c.u||(c.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,v)):(c.u="GET",c.g.ea(c.A,c.u,null,v)),nn(),ne(c.i,c.u,c.A,c.l,c.R,c.m)}Ee.prototype.ca=function(c){c=c.target;const v=this.M;v&&Ei(c)==3?v.j():this.Y(c)},Ee.prototype.Y=function(c){try{if(c==this.g)e:{const xn=Ei(this.g);var v=this.g.Ba();const Js=this.g.Z();if(!(3>xn)&&(xn!=3||this.g&&(this.h.h||this.g.oa()||xy(this.g)))){this.J||xn!=4||v==7||(v==8||0>=Js?nn(3):nn(2)),yi(this);var E=this.g.Z();this.X=E;t:if(Wi(this)){var j=xy(this.g);c="";var q=j.length,Q=Ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pr(this),Jn(this);var re="";break t}this.h.i=new o.TextDecoder}for(v=0;v<q;v++)this.h.h=!0,c+=this.h.i.decode(j[v],{stream:!(Q&&v==q-1)});j.length=0,this.h.g+=c,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=E==200,ie(this.i,this.u,this.A,this.l,this.R,xn,E),this.o){if(this.T&&!this.K){t:{if(this.g){var it,mn=this.g;if((it=mn.g?mn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(it)){var Be=it;break t}}Be=null}if(E=Be)he(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zi(this,E);else{this.o=!1,this.s=3,dn(12),pr(this),Jn(this);break e}}if(this.P){E=!0;let Mr;for(;!this.J&&this.C<re.length;)if(Mr=Or(this,re),Mr==ke){xn==4&&(this.s=4,dn(14),E=!1),he(this.i,this.l,null,"[Incomplete Response]");break}else if(Mr==Ye){this.s=4,dn(15),he(this.i,this.l,re,"[Invalid Chunk]"),E=!1;break}else he(this.i,this.l,Mr,null),Zi(this,Mr);if(Wi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xn!=4||re.length!=0||this.h.h||(this.s=1,dn(16),E=!1),this.o=this.o&&E,!E)he(this.i,this.l,re,"[Invalid Chunked Response]"),pr(this),Jn(this);else if(0<re.length&&!this.W){this.W=!0;var Tn=this.j;Tn.g==this&&Tn.ba&&!Tn.M&&(Tn.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Qd(Tn),Tn.M=!0,dn(11))}}else he(this.i,this.l,re,null),Zi(this,re);xn==4&&pr(this),this.o&&!this.J&&(xn==4?Dy(this.j,this):(this.o=!1,Mn(this)))}else UR(this.g),E==400&&0<re.indexOf("Unknown SID")?(this.s=3,dn(12)):(this.s=0,dn(13)),pr(this),Jn(this)}}}catch{}finally{}};function Wi(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Or(c,v){var E=c.C,j=v.indexOf(`
`,E);return j==-1?ke:(E=Number(v.substring(E,j)),isNaN(E)?Ye:(j+=1,j+E>v.length?ke:(v=v.slice(j,j+E),c.C=j+E,v)))}Ee.prototype.cancel=function(){this.J=!0,pr(this)};function Mn(c){c.S=Date.now()+c.I,Ks(c,c.I)}function Ks(c,v){if(c.B!=null)throw Error("WatchDog timer not null");c.B=F(d(c.ba,c),v)}function yi(c){c.B&&(o.clearTimeout(c.B),c.B=null)}Ee.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(pe(this.i,this.A),this.L!=2&&(nn(),dn(17)),pr(this),this.s=2,Jn(this)):Ks(this,this.S-c)};function Jn(c){c.j.G==0||c.J||Dy(c.j,c)}function pr(c){yi(c);var v=c.M;v&&typeof v.ma=="function"&&v.ma(),c.M=null,En(c.U),c.g&&(v=c.g,c.g=null,v.abort(),v.ma())}function Zi(c,v){try{var E=c.j;if(E.G!=0&&(E.g==c||vt(E.h,c))){if(!c.K&&vt(E.h,c)&&E.G==3){try{var j=E.Da.g.parse(v)}catch{j=null}if(Array.isArray(j)&&j.length==3){var q=j;if(q[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<c.F)Gu(E),Hu(E);else break e;Xd(E),dn(18)}}else E.za=q[1],0<E.za-E.T&&37500>q[2]&&E.F&&E.v==0&&!E.C&&(E.C=F(d(E.Za,E),6e3));if(1>=Ji(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else ns(E,11)}else if((c.K||E.g==c)&&Gu(E),!x(v))for(q=E.Da.g.parse(v),v=0;v<q.length;v++){let Be=q[v];if(E.T=Be[0],Be=Be[1],E.G==2)if(Be[0]=="c"){E.K=Be[1],E.ia=Be[2];const Tn=Be[3];Tn!=null&&(E.la=Tn,E.j.info("VER="+E.la));const xn=Be[4];xn!=null&&(E.Aa=xn,E.j.info("SVER="+E.Aa));const Js=Be[5];Js!=null&&typeof Js=="number"&&0<Js&&(j=1.5*Js,E.L=j,E.j.info("backChannelRequestTimeoutMs_="+j)),j=E;const Mr=c.g;if(Mr){const Yu=Mr.g?Mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yu){var Q=j.h;Q.g||Yu.indexOf("spdy")==-1&&Yu.indexOf("quic")==-1&&Yu.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Kr(Q,Q.h),Q.h=null))}if(j.D){const Kd=Mr.g?Mr.g.getResponseHeader("X-HTTP-Session-Id"):null;Kd&&(j.ya=Kd,dt(j.I,j.D,Kd))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-c.F,E.j.info("Handshake RTT: "+E.R+"ms")),j=E;var re=c;if(j.qa=ky(j,j.J?j.ia:null,j.W),re.K){Rl(j.h,re);var it=re,mn=j.L;mn&&(it.I=mn),it.B&&(yi(it),Mn(it)),j.g=re}else Ny(j);0<E.i.length&&qu(E)}else Be[0]!="stop"&&Be[0]!="close"||ns(E,7);else E.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?ns(E,7):Yd(E):Be[0]!="noop"&&E.l&&E.l.ta(Be),E.v=0)}}nn(4)}catch{}}var Ue=class{constructor(c,v){this.g=c,this.map=v}};function ft(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _i(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ji(c){return c.h?1:c.g?c.g.size:0}function vt(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function Kr(c,v){c.g?c.g.add(v):c.h=v}function Rl(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}ft.prototype.cancel=function(){if(this.i=Pu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Pu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const E of c.g.values())v=v.concat(E.D);return v}return A(c.i)}function wR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var v=[],E=c.length,j=0;j<E;j++)v.push(c[j]);return v}v=[],E=0;for(j in c)v[E++]=c[j];return v}function TR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var v=[];c=c.length;for(var E=0;E<c;E++)v.push(E);return v}v=[],E=0;for(const j in c)v[E++]=j;return v}}}function hy(c,v){if(c.forEach&&typeof c.forEach=="function")c.forEach(v,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,v,void 0);else for(var E=TR(c),j=wR(c),q=j.length,Q=0;Q<q;Q++)v.call(void 0,j[Q],E&&E[Q],c)}var fy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xR(c,v){if(c){c=c.split("&");for(var E=0;E<c.length;E++){var j=c[E].indexOf("="),q=null;if(0<=j){var Q=c[E].substring(0,j);q=c[E].substring(j+1)}else Q=c[E];v(Q,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function ts(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ts){this.h=c.h,Uu(this,c.j),this.o=c.o,this.g=c.g,Lu(this,c.s),this.l=c.l;var v=c.i,E=new Il;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),dy(this,E),this.m=c.m}else c&&(v=String(c).match(fy))?(this.h=!1,Uu(this,v[1]||"",!0),this.o=Cl(v[2]||""),this.g=Cl(v[3]||"",!0),Lu(this,v[4]),this.l=Cl(v[5]||"",!0),dy(this,v[6]||"",!0),this.m=Cl(v[7]||"")):(this.h=!1,this.i=new Il(null,this.h))}ts.prototype.toString=function(){var c=[],v=this.j;v&&c.push(Nl(v,my,!0),":");var E=this.g;return(E||v=="file")&&(c.push("//"),(v=this.o)&&c.push(Nl(v,my,!0),"@"),c.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&c.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(Nl(E,E.charAt(0)=="/"?RR:SR,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",Nl(E,NR)),c.join("")};function bi(c){return new ts(c)}function Uu(c,v,E){c.j=E?Cl(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function Lu(c,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);c.s=v}else c.s=null}function dy(c,v,E){v instanceof Il?(c.i=v,IR(c.i,c.h)):(E||(v=Nl(v,CR)),c.i=new Il(v,c.h))}function dt(c,v,E){c.i.set(v,E)}function Vu(c){return dt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Cl(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Nl(c,v,E){return typeof c=="string"?(c=encodeURI(c).replace(v,AR),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function AR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var my=/[#\/\?@]/g,SR=/[#\?:]/g,RR=/[#\?]/g,CR=/[#\?@]/g,NR=/#/g;function Il(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function ea(c){c.g||(c.g=new Map,c.h=0,c.i&&xR(c.i,function(v,E){c.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}t=Il.prototype,t.add=function(c,v){ea(this),this.i=null,c=Ws(this,c);var E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(v),this.h+=1,this};function py(c,v){ea(c),v=Ws(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function gy(c,v){return ea(c),v=Ws(c,v),c.g.has(v)}t.forEach=function(c,v){ea(this),this.g.forEach(function(E,j){E.forEach(function(q){c.call(v,q,j,this)},this)},this)},t.na=function(){ea(this);const c=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let j=0;j<v.length;j++){const q=c[j];for(let Q=0;Q<q.length;Q++)E.push(v[j])}return E},t.V=function(c){ea(this);let v=[];if(typeof c=="string")gy(this,c)&&(v=v.concat(this.g.get(Ws(this,c))));else{c=Array.from(this.g.values());for(let E=0;E<c.length;E++)v=v.concat(c[E])}return v},t.set=function(c,v){return ea(this),this.i=null,c=Ws(this,c),gy(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},t.get=function(c,v){return c?(c=this.V(c),0<c.length?String(c[0]):v):v};function vy(c,v,E){py(c,v),0<E.length&&(c.i=null,c.g.set(Ws(c,v),A(E)),c.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var j=v[E];const Q=encodeURIComponent(String(j)),re=this.V(j);for(j=0;j<re.length;j++){var q=Q;re[j]!==""&&(q+="="+encodeURIComponent(String(re[j]))),c.push(q)}}return this.i=c.join("&")};function Ws(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function IR(c,v){v&&!c.j&&(ea(c),c.i=null,c.g.forEach(function(E,j){var q=j.toLowerCase();j!=q&&(py(this,j),vy(this,q,E))},c)),c.j=v}function DR(c,v){const E=new X;if(o.Image){const j=new Image;j.onload=m(ta,E,"TestLoadImage: loaded",!0,v,j),j.onerror=m(ta,E,"TestLoadImage: error",!1,v,j),j.onabort=m(ta,E,"TestLoadImage: abort",!1,v,j),j.ontimeout=m(ta,E,"TestLoadImage: timeout",!1,v,j),o.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=c}else v(!1)}function OR(c,v){const E=new X,j=new AbortController,q=setTimeout(()=>{j.abort(),ta(E,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:j.signal}).then(Q=>{clearTimeout(q),Q.ok?ta(E,"TestPingServer: ok",!0,v):ta(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),ta(E,"TestPingServer: error",!1,v)})}function ta(c,v,E,j,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),j(E)}catch{}}function MR(){this.g=new Sl}function kR(c,v,E){const j=E||"";try{hy(c,function(q,Q){let re=q;h(q)&&(re=Vn(q)),v.push(j+Q+"="+encodeURIComponent(re))})}catch(q){throw v.push(j+"type="+encodeURIComponent("_badmap")),q}}function zu(c){this.l=c.Ub||null,this.j=c.eb||!1}b(zu,$r),zu.prototype.g=function(){return new Bu(this.l,this.j)},zu.prototype.i=function(c){return function(){return c}}({});function Bu(c,v){et.call(this),this.D=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Bu,et),t=Bu.prototype,t.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=v,this.readyState=1,Ol(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(v.body=c),(this.D||o).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Dl(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ol(this)),this.g&&(this.readyState=3,Ol(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yy(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function yy(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?Dl(this):Ol(this),this.readyState==3&&yy(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Dl(this))},t.Qa=function(c){this.g&&(this.response=c,Dl(this))},t.ga=function(){this.g&&Dl(this)};function Dl(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ol(c)}t.setRequestHeader=function(c,v){this.u.append(c,v)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=v.next();return c.join(`\r
`)};function Ol(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Bu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function _y(c){let v="";return N(c,function(E,j){v+=j,v+=":",v+=E,v+=`\r
`}),v}function $d(c,v,E){e:{for(j in E){var j=!1;break e}j=!0}j||(E=_y(E),typeof c=="string"?E!=null&&encodeURIComponent(String(E)):dt(c,v,E))}function Ct(c){et.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ct,et);var jR=/^https?$/i,PR=["POST","PUT"];t=Ct.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,v,E,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fe.g(),this.v=this.o?Yr(this.o):Yr(fe),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(Q){by(this,Q);return}if(c=E||"",E=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var q in j)E.set(q,j[q]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const Q of j.keys())E.set(Q,j.get(Q));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=o.FormData&&c instanceof o.FormData,!(0<=Array.prototype.indexOf.call(PR,v,void 0))||j||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,re]of E)this.g.setRequestHeader(Q,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ty(this),this.u=!0,this.g.send(c),this.u=!1}catch(Q){by(this,Q)}};function by(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.m=5,Ey(c),Fu(c)}function Ey(c){c.A||(c.A=!0,gt(c,"complete"),gt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,gt(this,"complete"),gt(this,"abort"),Fu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fu(this,!0)),Ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wy(this):this.bb())},t.bb=function(){wy(this)};function wy(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Ei(c)!=4||c.Z()!=2)){if(c.u&&Ei(c)==4)zt(c.Ea,0,c);else if(gt(c,"readystatechange"),Ei(c)==4){c.h=!1;try{const re=c.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var j;if(j=re===0){var q=String(c.D).match(fy)[1]||null;!q&&o.self&&o.self.location&&(q=o.self.location.protocol.slice(0,-1)),j=!jR.test(q?q.toLowerCase():"")}E=j}if(E)gt(c,"complete"),gt(c,"success");else{c.m=6;try{var Q=2<Ei(c)?c.g.statusText:""}catch{Q=""}c.l=Q+" ["+c.Z()+"]",Ey(c)}}finally{Fu(c)}}}}function Fu(c,v){if(c.g){Ty(c);const E=c.g,j=c.v[0]?()=>{}:null;c.g=null,c.v=null,v||gt(c,"ready");try{E.onreadystatechange=j}catch{}}}function Ty(c){c.I&&(o.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Ei(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Ei(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),Ki(v)}};function xy(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function UR(c){const v={};c=(c.g&&2<=Ei(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<c.length;j++){if(x(c[j]))continue;var E=R(c[j]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=v[q]||[];v[q]=Q,Q.push(E)}_(v,function(j){return j.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ml(c,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||v}function Ay(c){this.Aa=0,this.i=[],this.j=new X,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ml("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ml("baseRetryDelayMs",5e3,c),this.cb=Ml("retryDelaySeedMs",1e4,c),this.Wa=Ml("forwardChannelMaxRetries",2,c),this.wa=Ml("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ft(c&&c.concurrentRequestLimit),this.Da=new MR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ay.prototype,t.la=8,t.G=1,t.connect=function(c,v,E,j){dn(0),this.W=c,this.H=v||{},E&&j!==void 0&&(this.H.OSID=E,this.H.OAID=j),this.F=this.X,this.I=ky(this,null,this.W),qu(this)};function Yd(c){if(Sy(c),c.G==3){var v=c.U++,E=bi(c.I);if(dt(E,"SID",c.K),dt(E,"RID",v),dt(E,"TYPE","terminate"),kl(c,E),v=new Ee(c,c.j,v),v.L=2,v.v=Vu(bi(E)),E=!1,o.navigator&&o.navigator.sendBeacon)try{E=o.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&o.Image&&(new Image().src=v.v,E=!0),E||(v.g=jy(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Mn(v)}My(c)}function Hu(c){c.g&&(Qd(c),c.g.cancel(),c.g=null)}function Sy(c){Hu(c),c.u&&(o.clearTimeout(c.u),c.u=null),Gu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&o.clearTimeout(c.s),c.s=null)}function qu(c){if(!_i(c.h)&&!c.s){c.s=!0;var v=c.Ga;k||P(),H||(k(),H=!0),B.add(v,c),c.B=0}}function LR(c,v){return Ji(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=v.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=F(d(c.Ga,c,v),Oy(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const q=new Ee(this,this.j,c);let Q=this.o;if(this.S&&(Q?(Q=g(Q),T(Q,this.S)):Q=this.S),this.m!==null||this.O||(q.H=Q,Q=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var j=this.i[E];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(v+=j,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=Cy(this,q,v),E=bi(this.I),dt(E,"RID",c),dt(E,"CVER",22),this.D&&dt(E,"X-HTTP-Session-Id",this.D),kl(this,E),Q&&(this.O?v="headers="+encodeURIComponent(String(_y(Q)))+"&"+v:this.m&&$d(E,this.m,Q)),Kr(this.h,q),this.Ua&&dt(E,"TYPE","init"),this.P?(dt(E,"$req",v),dt(E,"SID","null"),q.T=!0,ot(q,E,null)):ot(q,E,v),this.G=2}}else this.G==3&&(c?Ry(this,c):this.i.length==0||_i(this.h)||Ry(this))};function Ry(c,v){var E;v?E=v.l:E=c.U++;const j=bi(c.I);dt(j,"SID",c.K),dt(j,"RID",E),dt(j,"AID",c.T),kl(c,j),c.m&&c.o&&$d(j,c.m,c.o),E=new Ee(c,c.j,E,c.B+1),c.m===null&&(E.H=c.o),v&&(c.i=v.D.concat(c.i)),v=Cy(c,E,1e3),E.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Kr(c.h,E),ot(E,j,v)}function kl(c,v){c.H&&N(c.H,function(E,j){dt(v,j,E)}),c.l&&hy({},function(E,j){dt(v,j,E)})}function Cy(c,v,E){E=Math.min(c.i.length,E);var j=c.l?d(c.l.Na,c.l,c):null;e:{var q=c.i;let Q=-1;for(;;){const re=["count="+E];Q==-1?0<E?(Q=q[0].g,re.push("ofs="+Q)):Q=0:re.push("ofs="+Q);let it=!0;for(let mn=0;mn<E;mn++){let Be=q[mn].g;const Tn=q[mn].map;if(Be-=Q,0>Be)Q=Math.max(0,q[mn].g-100),it=!1;else try{kR(Tn,re,"req"+Be+"_")}catch{j&&j(Tn)}}if(it){j=re.join("&");break e}}}return c=c.i.splice(0,E),v.D=c,j}function Ny(c){if(!c.g&&!c.u){c.Y=1;var v=c.Fa;k||P(),H||(k(),H=!0),B.add(v,c),c.v=0}}function Xd(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=F(d(c.Fa,c),Oy(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Iy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=F(d(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dn(10),Hu(this),Iy(this))};function Qd(c){c.A!=null&&(o.clearTimeout(c.A),c.A=null)}function Iy(c){c.g=new Ee(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var v=bi(c.qa);dt(v,"RID","rpc"),dt(v,"SID",c.K),dt(v,"AID",c.T),dt(v,"CI",c.F?"0":"1"),!c.F&&c.ja&&dt(v,"TO",c.ja),dt(v,"TYPE","xmlhttp"),kl(c,v),c.m&&c.o&&$d(v,c.m,c.o),c.L&&(c.g.I=c.L);var E=c.g;c=c.ia,E.L=1,E.v=Vu(bi(v)),E.m=null,E.P=!0,vi(E,c)}t.Za=function(){this.C!=null&&(this.C=null,Hu(this),Xd(this),dn(19))};function Gu(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function Dy(c,v){var E=null;if(c.g==v){Gu(c),Qd(c),c.g=null;var j=2}else if(vt(c.h,v))E=v.D,Rl(c.h,v),j=1;else return;if(c.G!=0){if(v.o)if(j==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var q=c.B;j=Qr(),gt(j,new V(j,E)),qu(c)}else Ny(c);else if(q=v.s,q==3||q==0&&0<v.X||!(j==1&&LR(c,v)||j==2&&Xd(c)))switch(E&&0<E.length&&(v=c.h,v.i=v.i.concat(E)),q){case 1:ns(c,5);break;case 4:ns(c,10);break;case 3:ns(c,6);break;default:ns(c,2)}}}function Oy(c,v){let E=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(E*=2),E*v}function ns(c,v){if(c.j.info("Error code "+v),v==2){var E=d(c.fb,c),j=c.Xa;const q=!j;j=new ts(j||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Uu(j,"https"),Vu(j),q?DR(j.toString(),E):OR(j.toString(),E)}else dn(2);c.G=0,c.l&&c.l.sa(v),My(c),Sy(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),dn(2)):(this.j.info("Failed to ping google.com"),dn(1))};function My(c){if(c.G=0,c.ka=[],c.l){const v=Pu(c.h);(v.length!=0||c.i.length!=0)&&(D(c.ka,v),D(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function ky(c,v,E){var j=E instanceof ts?bi(E):new ts(E);if(j.g!="")v&&(j.g=v+"."+j.g),Lu(j,j.s);else{var q=o.location;j=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;var Q=new ts(null);j&&Uu(Q,j),v&&(Q.g=v),q&&Lu(Q,q),E&&(Q.l=E),j=Q}return E=c.D,v=c.ya,E&&v&&dt(j,E,v),dt(j,"VER",c.la),kl(c,j),j}function jy(c,v,E){if(v&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Ca&&!c.pa?new Ct(new zu({eb:E})):new Ct(c.pa),v.Ha(c.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Py(){}t=Py.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $u(){}$u.prototype.g=function(c,v){return new er(c,v)};function er(c,v){et.call(this),this.g=new Ay(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(c?c["X-WebChannel-Client-Profile"]=v.va:c={"X-WebChannel-Client-Profile":v.va}),this.g.S=c,(c=v&&v.Sb)&&!x(c)&&(this.g.m=c),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!x(v)&&(this.g.D=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new Zs(this)}b(er,et),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){Yd(this.g)},er.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.u&&(E={},E.__data__=Vn(c),c=E);v.i.push(new Ue(v.Ya++,c)),v.G==3&&qu(v)},er.prototype.N=function(){this.g.l=null,delete this.j,Yd(this.g),delete this.g,er.aa.N.call(this)};function Uy(c){wn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const E in v){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}b(Uy,wn);function Ly(){zn.call(this),this.status=1}b(Ly,zn);function Zs(c){this.g=c}b(Zs,Py),Zs.prototype.ua=function(){gt(this.g,"a")},Zs.prototype.ta=function(c){gt(this.g,new Uy(c))},Zs.prototype.sa=function(c){gt(this.g,new Ly)},Zs.prototype.ra=function(){gt(this.g,"b")},$u.prototype.createWebChannel=$u.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,qA=function(){return new $u},HA=function(){return Qr()},FA=fn,cg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ce.NO_ERROR=0,ce.TIMEOUT=8,ce.HTTP_ERROR=6,Lh=ce,le.COMPLETE="complete",BA=le,Ir.EventType=Dr,Dr.OPEN="a",Dr.CLOSE="b",Dr.ERROR="c",Dr.MESSAGE="d",et.prototype.listen=et.prototype.K,nc=Ir,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,zA=Ct}).apply(typeof hh<"u"?hh:typeof self<"u"?self:typeof window<"u"?window:{});const o1="@firebase/firestore",l1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new Z0("@firebase/firestore");function co(){return js.logLevel}function oe(t,...e){if(js.logLevel<=De.DEBUG){const n=e.map(hv);js.debug(`Firestore (${El}): ${t}`,...n)}}function Gi(t,...e){if(js.logLevel<=De.ERROR){const n=e.map(hv);js.error(`Firestore (${El}): ${t}`,...n)}}function Fa(t,...e){if(js.logLevel<=De.WARN){const n=e.map(hv);js.warn(`Firestore (${El}): ${t}`,...n)}}function hv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,GA(t,r,n)}function GA(t,e,n){let r=`FIRESTORE (${El}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Gi(r),new Error(r)}function Ge(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||GA(e,i,r)}function be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends Gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Rn.UNAUTHENTICATED))}shutdown(){}}class aM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class sM{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ge(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let a=new Ui;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ui,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ui)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string",31837,{l:r}),new $A(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new Rn(e)}}class oM{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lM{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new oM(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class c1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ge(this.o===void 0,3512);const r=a=>{a.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,oe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new c1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new c1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=uM(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function Ae(t,e){return t<e?-1:t>e?1:0}function ug(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Ae(r,i);{const a=YA(),s=hM(a.encode(u1(t,n)),a.encode(u1(e,n)));return s!==0?s:Ae(r,i)}}n+=r>65535?2:1}return Ae(t.length,e.length)}function u1(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function hM(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ae(t[n],e[n]);return Ae(t.length,e.length)}function sl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="__name__";class Zr{constructor(e,n,r){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&me(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=Zr.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return Ae(e.length,n.length)}static compareSegments(e,n){const r=Zr.isNumericId(e),i=Zr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Zr.extractNumericId(e).compare(Zr.extractNumericId(n)):ug(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pa.fromString(e.substring(4,e.length-2))}}class lt extends Zr{construct(e,n,r){return new lt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new lt(n)}static emptyPath(){return new lt([])}}const fM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends Zr{construct(e,n,r){return new yn(e,n,r)}static isValidIdentifier(e){return fM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===h1}static keyField(){return new yn([h1])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ae(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new ae(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ae(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new ae(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(n)}static emptyPath(){return new yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(lt.fromString(e))}static fromName(e){return new de(lt.fromString(e).popFirst(5))}static empty(){return new de(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t,e,n){if(!n)throw new ae(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dM(t,e,n,r){if(e===!0&&r===!0)throw new ae(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function f1(t){if(!de.isDocumentKey(t))throw new ae(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function d1(t){if(de.isDocumentKey(t))throw new ae(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function QA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Rd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function Rr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ae(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rd(t);throw new ae(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Au(t,e){if(!QA(t))throw new ae(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new ae(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=-62135596800,p1=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*p1);return new mt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<m1)throw new ae(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/p1}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Au(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-m1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:Xt("string",mt._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new mt(0,0))}static max(){return new _e(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=-1;function mM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=_e.fromTimestamp(r===1e9?new mt(n+1,0):new mt(n,r));return new Ha(i,de.empty(),e)}function pM(t){return new Ha(t.readTime,t.key,Yc)}class Ha{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ha(_e.min(),de.empty(),Yc)}static max(){return new Ha(_e.max(),de.empty(),Yc)}}function gM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==vM)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.reject(n)}static resolve(e){return new ee((n,r)=>{n(e)})}static reject(e){return new ee((n,r)=>{r(e)})}static waitFor(e){return new ee((n,r)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&n()},l=>r(l))}),s=!0,a===i&&n()})}static or(e){let n=ee.resolve(!1);for(const r of e)n=n.next(i=>i?ee.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new ee((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let l=0;l<a;l++){const h=l;n(e[h]).next(u=>{s[h]=u,++o,o===a&&r(s)},u=>i(u))}})}static doWhile(e,n){return new ee((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function _M(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Tl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Cd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=-1;function Nd(t){return t==null}function Mf(t){return t===0&&1/t==-1/0}function bM(t){return typeof t=="number"&&Number.isInteger(t)&&!Mf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="";function EM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=g1(e)),e=wM(t.get(n),e);return g1(e)}function wM(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case KA:n+="";break;default:n+=a}}return n}function g1(t){return t+KA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ja(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function WA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n){this.comparator=e,this.root=n||gn.EMPTY}insert(e,n){return new St(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fh(this.root,e,this.comparator,!0)}}class fh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??gn.RED,this.left=i??gn.EMPTY,this.right=a??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new gn(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return gn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new y1(this.data.getIterator())}getIteratorFrom(e){return new y1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zt(this.comparator);return n.data=e,n}}class y1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new or([])}unionWith(e){let n=new Zt(yn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new or(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return sl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new ZA("Invalid base64 string: "+a):a}}(e);return new bn(n)}static fromUint8Array(e){const n=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new bn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bn.EMPTY_BYTE_STRING=new bn("");const TM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qa(t){if(Ge(!!t,39018),typeof t=="string"){let e=0;const n=TM.exec(t);if(Ge(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Lt(t.seconds),nanos:Lt(t.nanos)}}function Lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ga(t){return typeof t=="string"?bn.fromBase64String(t):bn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="server_timestamp",e2="__type__",t2="__previous_value__",n2="__local_write_time__";function mv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[e2])===null||n===void 0?void 0:n.stringValue)===JA}function Id(t){const e=t.mapValue.fields[t2];return mv(e)?Id(e):e}function Xc(t){const e=qa(t.mapValue.fields[n2].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,n,r,i,a,s,o,l,h,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=h,this.isUsingEmulator=u}}const hg="(default)";class Qc{constructor(e,n){this.projectId=e,this.database=n||hg}static empty(){return new Qc("","")}get isDefaultDatabase(){return this.database===hg}isEqual(e){return e instanceof Qc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="__type__",AM="__max__",dh={mapValue:{}},i2="__vector__",kf="value";function $a(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mv(t)?4:RM(t)?9007199254740991:SM(t)?10:11:me(28295,{value:t})}function di(t,e){if(t===e)return!0;const n=$a(t);if(n!==$a(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xc(t).isEqual(Xc(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=qa(i.timestampValue),o=qa(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Ga(i.bytesValue).isEqual(Ga(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return Lt(i.geoPointValue.latitude)===Lt(a.geoPointValue.latitude)&&Lt(i.geoPointValue.longitude)===Lt(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Lt(i.integerValue)===Lt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=Lt(i.doubleValue),o=Lt(a.doubleValue);return s===o?Mf(s)===Mf(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return sl(t.arrayValue.values||[],e.arrayValue.values||[],di);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(v1(s)!==v1(o))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(o[l]===void 0||!di(s[l],o[l])))return!1;return!0}(t,e);default:return me(52216,{left:t})}}function Kc(t,e){return(t.values||[]).find(n=>di(n,e))!==void 0}function ol(t,e){if(t===e)return 0;const n=$a(t),r=$a(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(a,s){const o=Lt(a.integerValue||a.doubleValue),l=Lt(s.integerValue||s.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return _1(t.timestampValue,e.timestampValue);case 4:return _1(Xc(t),Xc(e));case 5:return ug(t.stringValue,e.stringValue);case 6:return function(a,s){const o=Ga(a),l=Ga(s);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),l=s.split("/");for(let h=0;h<o.length&&h<l.length;h++){const u=Ae(o[h],l[h]);if(u!==0)return u}return Ae(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,s){const o=Ae(Lt(a.latitude),Lt(s.latitude));return o!==0?o:Ae(Lt(a.longitude),Lt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return b1(t.arrayValue,e.arrayValue);case 10:return function(a,s){var o,l,h,u;const f=a.fields||{},d=s.fields||{},m=(o=f[kf])===null||o===void 0?void 0:o.arrayValue,b=(l=d[kf])===null||l===void 0?void 0:l.arrayValue,A=Ae(((h=m==null?void 0:m.values)===null||h===void 0?void 0:h.length)||0,((u=b==null?void 0:b.values)===null||u===void 0?void 0:u.length)||0);return A!==0?A:b1(m,b)}(t.mapValue,e.mapValue);case 11:return function(a,s){if(a===dh.mapValue&&s===dh.mapValue)return 0;if(a===dh.mapValue)return 1;if(s===dh.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),h=s.fields||{},u=Object.keys(h);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const d=ug(l[f],u[f]);if(d!==0)return d;const m=ol(o[l[f]],h[u[f]]);if(m!==0)return m}return Ae(l.length,u.length)}(t.mapValue,e.mapValue);default:throw me(23264,{le:n})}}function _1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=qa(t),r=qa(e),i=Ae(n.seconds,r.seconds);return i!==0?i:Ae(n.nanos,r.nanos)}function b1(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=ol(n[i],r[i]);if(a)return a}return Ae(n.length,r.length)}function ll(t){return fg(t)}function fg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ga(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=fg(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${fg(n.fields[s])}`;return i+"}"}(t.mapValue):me(61005,{value:t})}function Vh(t){switch($a(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Id(t);return e?16+Vh(e):16;case 5:return 2*t.stringValue.length;case 6:return Ga(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Vh(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ja(r.fields,(a,s)=>{i+=a.length+Vh(s)}),i}(t.mapValue);default:throw me(13486,{value:t})}}function E1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dg(t){return!!t&&"integerValue"in t}function pv(t){return!!t&&"arrayValue"in t}function w1(t){return!!t&&"nullValue"in t}function T1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zh(t){return!!t&&"mapValue"in t}function SM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[r2])===null||n===void 0?void 0:n.stringValue)===i2}function Tc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ja(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Tc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Tc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function RM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===AM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.value=e}static empty(){return new Qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tc(n)}setAll(e){let n=yn.emptyPath(),r={},i=[];e.forEach((s,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=Tc(s):i.push(o.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return di(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];zh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ja(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Qn(Tc(this.value))}}function a2(t){const e=[];return Ja(t.fields,(n,r)=>{const i=new yn([n]);if(zh(r)){const a=a2(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new or(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Cn(e,0,_e.min(),_e.min(),_e.min(),Qn.empty(),0)}static newFoundDocument(e,n,r,i){return new Cn(e,1,n,_e.min(),r,i,0)}static newNoDocument(e,n){return new Cn(e,2,n,_e.min(),_e.min(),Qn.empty(),0)}static newUnknownDocument(e,n){return new Cn(e,3,n,_e.min(),_e.min(),Qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n){this.position=e,this.inclusive=n}}function x1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=de.comparator(de.fromName(s.referenceValue),n.key):r=ol(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function A1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!di(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n="asc"){this.field=e,this.dir=n}}function CM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{}class $t extends s2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new IM(e,n,r):n==="array-contains"?new MM(e,r):n==="in"?new kM(e,r):n==="not-in"?new jM(e,r):n==="array-contains-any"?new PM(e,r):new $t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new DM(e,r):new OM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ol(n,this.value)):n!==null&&$a(this.value)===$a(n)&&this.matchesComparison(ol(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hr extends s2{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Hr(e,n)}matches(e){return o2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function o2(t){return t.op==="and"}function l2(t){return NM(t)&&o2(t)}function NM(t){for(const e of t.filters)if(e instanceof Hr)return!1;return!0}function mg(t){if(t instanceof $t)return t.field.canonicalString()+t.op.toString()+ll(t.value);if(l2(t))return t.filters.map(e=>mg(e)).join(",");{const e=t.filters.map(n=>mg(n)).join(",");return`${t.op}(${e})`}}function c2(t,e){return t instanceof $t?function(r,i){return i instanceof $t&&r.op===i.op&&r.field.isEqual(i.field)&&di(r.value,i.value)}(t,e):t instanceof Hr?function(r,i){return i instanceof Hr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,s,o)=>a&&c2(s,i.filters[o]),!0):!1}(t,e):void me(19439)}function u2(t){return t instanceof $t?function(n){return`${n.field.canonicalString()} ${n.op} ${ll(n.value)}`}(t):t instanceof Hr?function(n){return n.op.toString()+" {"+n.getFilters().map(u2).join(" ,")+"}"}(t):"Filter"}class IM extends $t{constructor(e,n,r){super(e,n,r),this.key=de.fromName(r.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class DM extends $t{constructor(e,n){super(e,"in",n),this.keys=h2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OM extends $t{constructor(e,n){super(e,"not-in",n),this.keys=h2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function h2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>de.fromName(r.referenceValue))}class MM extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pv(n)&&Kc(n.arrayValue,this.value)}}class kM extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Kc(this.value.arrayValue,n)}}class jM extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if(Kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Kc(this.value.arrayValue,n)}}class PM extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Kc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Pe=null}}function S1(t,e=null,n=[],r=[],i=null,a=null,s=null){return new UM(t,e,n,r,i,a,s)}function gv(t){const e=be(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>mg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Nd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ll(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ll(r)).join(",")),e.Pe=n}return e.Pe}function vv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!CM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!c2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!A1(t.startAt,e.startAt)&&A1(t.endAt,e.endAt)}function pg(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function LM(t,e,n,r,i,a,s,o){return new Su(t,e,n,r,i,a,s,o)}function Dd(t){return new Su(t)}function R1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function f2(t){return t.collectionGroup!==null}function xc(t){const e=be(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Zt(yn.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(o=o.add(h.field))})}),o})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Pf(a,r))}),n.has(yn.keyField().canonicalString())||e.Te.push(new Pf(yn.keyField(),r))}return e.Te}function oi(t){const e=be(t);return e.Ie||(e.Ie=VM(e,xc(t))),e.Ie}function VM(t,e){if(t.limitType==="F")return S1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Pf(i.field,a)});const n=t.endAt?new jf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new jf(t.startAt.position,t.startAt.inclusive):null;return S1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function gg(t,e){const n=t.filters.concat([e]);return new Su(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vg(t,e,n){return new Su(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Od(t,e){return vv(oi(t),oi(e))&&t.limitType===e.limitType}function d2(t){return`${gv(oi(t))}|lt:${t.limitType}`}function uo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>u2(i)).join(", ")}]`),Nd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ll(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ll(i)).join(",")),`Target(${r})`}(oi(t))}; limitType=${t.limitType})`}function Md(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):de.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of xc(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,o,l){const h=x1(s,o,l);return s.inclusive?h<=0:h<0}(r.startAt,xc(r),i)||r.endAt&&!function(s,o,l){const h=x1(s,o,l);return s.inclusive?h>=0:h>0}(r.endAt,xc(r),i))}(t,e)}function zM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function m2(t){return(e,n)=>{let r=!1;for(const i of xc(t)){const a=BM(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function BM(t,e,n){const r=t.field.isKeyField()?de.comparator(e.key,n.key):function(a,s,o){const l=s.data.field(a),h=o.data.field(a);return l!==null&&h!==null?ol(l,h):me(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ja(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return WA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=new St(de.comparator);function $i(){return FM}const p2=new St(de.comparator);function rc(...t){let e=p2;for(const n of t)e=e.insert(n.key,n);return e}function g2(t){let e=p2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ps(){return Ac()}function v2(){return Ac()}function Ac(){return new Gs(t=>t.toString(),(t,e)=>t.isEqual(e))}const HM=new St(de.comparator),qM=new Zt(de.comparator);function Me(...t){let e=qM;for(const n of t)e=e.add(n);return e}const GM=new Zt(Ae);function $M(){return GM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mf(e)?"-0":e}}function y2(t){return{integerValue:""+t}}function YM(t,e){return bM(e)?y2(e):yv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(){this._=void 0}}function XM(t,e,n){return t instanceof Uf?function(i,a){const s={fields:{[e2]:{stringValue:JA},[n2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&mv(a)&&(a=Id(a)),a&&(s.fields[t2]=a),{mapValue:s}}(n,e):t instanceof Wc?b2(t,e):t instanceof Zc?E2(t,e):function(i,a){const s=_2(i,a),o=C1(s)+C1(i.Ee);return dg(s)&&dg(i.Ee)?y2(o):yv(i.serializer,o)}(t,e)}function QM(t,e,n){return t instanceof Wc?b2(t,e):t instanceof Zc?E2(t,e):n}function _2(t,e){return t instanceof Lf?function(r){return dg(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Uf extends kd{}class Wc extends kd{constructor(e){super(),this.elements=e}}function b2(t,e){const n=w2(e);for(const r of t.elements)n.some(i=>di(i,r))||n.push(r);return{arrayValue:{values:n}}}class Zc extends kd{constructor(e){super(),this.elements=e}}function E2(t,e){let n=w2(e);for(const r of t.elements)n=n.filter(i=>!di(i,r));return{arrayValue:{values:n}}}class Lf extends kd{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function C1(t){return Lt(t.integerValue||t.doubleValue)}function w2(t){return pv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function KM(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Wc&&i instanceof Wc||r instanceof Zc&&i instanceof Zc?sl(r.elements,i.elements,di):r instanceof Lf&&i instanceof Lf?di(r.Ee,i.Ee):r instanceof Uf&&i instanceof Uf}(t.transform,e.transform)}class WM{constructor(e,n){this.version=e,this.transformResults=n}}class dr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class jd{}function T2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Pd(t.key,dr.none()):new Ru(t.key,t.data,dr.none());{const n=t.data,r=Qn.empty();let i=new Zt(yn.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new es(t.key,r,new or(i.toArray()),dr.none())}}function ZM(t,e,n){t instanceof Ru?function(i,a,s){const o=i.value.clone(),l=I1(i.fieldTransforms,a,s.transformResults);o.setAll(l),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof es?function(i,a,s){if(!Bh(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=I1(i.fieldTransforms,a,s.transformResults),l=a.data;l.setAll(x2(i)),l.setAll(o),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Sc(t,e,n,r){return t instanceof Ru?function(a,s,o,l){if(!Bh(a.precondition,s))return o;const h=a.value.clone(),u=D1(a.fieldTransforms,l,s);return h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof es?function(a,s,o,l){if(!Bh(a.precondition,s))return o;const h=D1(a.fieldTransforms,l,s),u=s.data;return u.setAll(x2(a)),u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(a,s,o){return Bh(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function JM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=_2(r.transform,i||null);a!=null&&(n===null&&(n=Qn.empty()),n.set(r.field,a))}return n||null}function N1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&sl(r,i,(a,s)=>KM(a,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ru extends jd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class es extends jd{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function x2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function I1(t,e,n){const r=new Map;Ge(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,QM(s,o,n[i]))}return r}function D1(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,XM(a,s,e))}return r}class Pd extends jd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e6 extends jd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&ZM(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Sc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Sc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=v2();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const l=T2(s,o);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(_e.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Me())}isEqual(e){return this.batchId===e.batchId&&sl(this.mutations,e.mutations,(n,r)=>N1(n,r))&&sl(this.baseMutations,e.baseMutations,(n,r)=>N1(n,r))}}class _v{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ge(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return HM}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new _v(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,Le;function i6(t){switch(t){case Z.OK:return me(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function A2(t){if(t===void 0)return Gi("GRPC error has no .code"),Z.UNKNOWN;switch(t){case Ht.OK:return Z.OK;case Ht.CANCELLED:return Z.CANCELLED;case Ht.UNKNOWN:return Z.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return Z.INTERNAL;case Ht.UNAVAILABLE:return Z.UNAVAILABLE;case Ht.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Ht.NOT_FOUND:return Z.NOT_FOUND;case Ht.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Ht.ABORTED:return Z.ABORTED;case Ht.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Ht.DATA_LOSS:return Z.DATA_LOSS;default:return me(39323,{code:t})}}(Le=Ht||(Ht={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6=new Pa([4294967295,4294967295],0);function O1(t){const e=YA().encode(t),n=new VA;return n.update(e),new Uint8Array(n.digest())}function M1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Pa([n,r],0),new Pa([i,a],0)]}class bv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ic(`Invalid padding: ${n}`);if(r<0)throw new ic(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ic(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ic(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Pa.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Pa.fromNumber(r)));return i.compare(a6)===1&&(i=new Pa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=O1(e),[r,i]=M1(n);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);if(!this.ye(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new bv(a,i,n);return r.forEach(o=>s.insert(o)),s}insert(e){if(this.fe===0)return;const n=O1(e),[r,i]=M1(n);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);this.we(s)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Cu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ud(_e.min(),i,new St(Ae),$i(),Me())}}class Cu{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Cu(r,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class S2{constructor(e,n){this.targetId=e,this.De=n}}class R2{constructor(e,n,r=bn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class k1{constructor(){this.ve=0,this.Ce=j1(),this.Fe=bn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Me(),n=Me(),r=Me();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:me(38017,{changeType:a})}}),new Cu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=j1()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ge(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class s6{constructor(e){this.We=e,this.Ge=new Map,this.ze=$i(),this.je=mh(),this.Je=mh(),this.He=new St(Ae)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const a=i.target;if(pg(a))if(r===0){const s=new de(a.path);this.Xe(n,s,Cn.newNoDocument(s,_e.min()))}else Ge(r===1,20013,{expectedCount:r});else{const s=this.ot(n);if(s!==r){const o=this._t(e),l=o?this.ut(o,e,s):1;if(l!==0){this.rt(n);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=Ga(r).toUint8Array()}catch(l){if(l instanceof ZA)return Fa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new bv(s,i,a)}catch(l){return Fa(l instanceof ic?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.fe===0?null:o}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const s=this.We.lt(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.Xe(n,a,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((a,s)=>{const o=this.st(s);if(o){if(a.current&&pg(o.target)){const l=new de(o.target.path);this.Tt(l).has(s)||this.It(s,l)||this.Xe(s,l,Cn.newNoDocument(l,e))}a.Ne&&(n.set(s,a.Le()),a.ke())}});let r=Me();this.Je.forEach((a,s)=>{let o=!0;s.forEachWhile(l=>{const h=this.st(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.ze.forEach((a,s)=>s.setReadTime(e));const i=new Ud(e,n,this.He,this.ze,r);return this.ze=$i(),this.je=mh(),this.Je=mh(),this.He=new St(Ae),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new k1,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Zt(Ae),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Zt(Ae),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new k1),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function mh(){return new St(de.comparator)}function j1(){return new St(de.comparator)}const o6={asc:"ASCENDING",desc:"DESCENDING"},l6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},c6={and:"AND",or:"OR"};class u6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yg(t,e){return t.useProto3Json||Nd(e)?e:{value:e}}function Vf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function C2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function h6(t,e){return Vf(t,e.toTimestamp())}function li(t){return Ge(!!t,49232),_e.fromTimestamp(function(n){const r=qa(n);return new mt(r.seconds,r.nanos)}(t))}function Ev(t,e){return _g(t,e).canonicalString()}function _g(t,e){const n=function(i){return new lt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function N2(t){const e=lt.fromString(t);return Ge(k2(e),10190,{key:e.toString()}),e}function bg(t,e){return Ev(t.databaseId,e.path)}function Fm(t,e){const n=N2(e);if(n.get(1)!==t.databaseId.projectId)throw new ae(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ae(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(D2(n))}function I2(t,e){return Ev(t.databaseId,e)}function f6(t){const e=N2(t);return e.length===4?lt.emptyPath():D2(e)}function Eg(t){return new lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function D2(t){return Ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function P1(t,e,n){return{name:bg(t,e),fields:n.value.mapValue.fields}}function d6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:me(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(h,u){return h.useProto3Json?(Ge(u===void 0||typeof u=="string",58123),bn.fromBase64String(u||"")):(Ge(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),bn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(h){const u=h.code===void 0?Z.UNKNOWN:A2(h.code);return new ae(u,h.message||"")}(s);n=new R2(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Fm(t,r.document.name),a=li(r.document.updateTime),s=r.document.createTime?li(r.document.createTime):_e.min(),o=new Qn({mapValue:{fields:r.document.fields}}),l=Cn.newFoundDocument(i,a,s,o),h=r.targetIds||[],u=r.removedTargetIds||[];n=new Fh(h,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Fm(t,r.document),a=r.readTime?li(r.readTime):_e.min(),s=Cn.newNoDocument(i,a),o=r.removedTargetIds||[];n=new Fh([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Fm(t,r.document),a=r.removedTargetIds||[];n=new Fh([],a,i,null)}else{if(!("filter"in e))return me(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new r6(i,a),o=r.targetId;n=new S2(o,s)}}return n}function m6(t,e){let n;if(e instanceof Ru)n={update:P1(t,e.key,e.value)};else if(e instanceof Pd)n={delete:bg(t,e.key)};else if(e instanceof es)n={update:P1(t,e.key,e.data),updateMask:T6(e.fieldMask)};else{if(!(e instanceof e6))return me(16599,{Rt:e.type});n={verify:bg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,s){const o=s.transform;if(o instanceof Uf)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Wc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Zc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Lf)return{fieldPath:s.field.canonicalString(),increment:o.Ee};throw me(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:h6(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:me(27497)}(t,e.precondition)),n}function p6(t,e){return t&&t.length>0?(Ge(e!==void 0,14353),t.map(n=>function(i,a){let s=i.updateTime?li(i.updateTime):li(a);return s.isEqual(_e.min())&&(s=li(a)),new WM(s,i.transformResults||[])}(n,e))):[]}function g6(t,e){return{documents:[I2(t,e.path)]}}function v6(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=I2(t,i);const a=function(h){if(h.length!==0)return M2(Hr.create(h,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const s=function(h){if(h.length!==0)return h.map(u=>function(d){return{field:ho(d.field),direction:b6(d.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=yg(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{Vt:n,parent:i}}function y6(t){let e=f6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ge(r===1,65062);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let a=[];n.where&&(a=function(f){const d=O2(f);return d instanceof Hr&&l2(d)?d.getFilters():[d]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(d=>function(b){return new Pf(fo(b.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(d))}(n.orderBy));let o=null;n.limit&&(o=function(f){let d;return d=typeof f=="object"?f.value:f,Nd(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(f){const d=!!f.before,m=f.values||[];return new jf(m,d)}(n.startAt));let h=null;return n.endAt&&(h=function(f){const d=!f.before,m=f.values||[];return new jf(m,d)}(n.endAt)),LM(e,i,s,a,o,"F",l,h)}function _6(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function O2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fo(n.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=fo(n.unaryFilter.field);return $t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=fo(n.unaryFilter.field);return $t.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=fo(n.unaryFilter.field);return $t.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}}(t):t.fieldFilter!==void 0?function(n){return $t.create(fo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Hr.create(n.compositeFilter.filters.map(r=>O2(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me(1026)}}(n.compositeFilter.op))}(t):me(30097,{filter:t})}function b6(t){return o6[t]}function E6(t){return l6[t]}function w6(t){return c6[t]}function ho(t){return{fieldPath:t.canonicalString()}}function fo(t){return yn.fromServerFormat(t.fieldPath)}function M2(t){return t instanceof $t?function(n){if(n.op==="=="){if(T1(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NAN"}};if(w1(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(T1(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NAN"}};if(w1(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(n.field),op:E6(n.op),value:n.value}}}(t):t instanceof Hr?function(n){const r=n.getFilters().map(i=>M2(i));return r.length===1?r[0]:{compositeFilter:{op:w6(n.op),filters:r}}}(t):me(54877,{filter:t})}function T6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function k2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n,r,i,a=_e.min(),s=_e.min(),o=bn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Ta(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ta(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e){this.gt=e}}function A6(t){const e=y6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(){this.Dn=new R6}addToCollectionParentIndex(e,n){return this.Dn.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(Ha.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(Ha.min())}updateCollectionGroup(e,n,r){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class R6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Zt(lt.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},j2=41943040;class $n{static withCacheSize(e){return new $n(e,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n.DEFAULT_COLLECTION_PERCENTILE=10,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$n.DEFAULT=new $n(j2,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$n.DISABLED=new $n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new cl(0)}static ur(){return new cl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="LruGarbageCollector",C6=1048576;function V1([t,e],[n,r]){const i=Ae(t,n);return i===0?Ae(e,r):i}class N6{constructor(e){this.Tr=e,this.buffer=new Zt(V1),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();V1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class I6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){oe(L1,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Tl(n)?oe(L1,"Ignoring IndexedDB error during garbage collection: ",n):await wl(n)}await this.Rr(3e5)})}}class D6{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ee.resolve(Cd.ue);const r=new N6(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(U1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),U1):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,a,s,o,l,h;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,o=Date.now(),this.removeTargets(e,r,n))).next(f=>(a=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(h=Date.now(),co()<=De.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(l-o)+`ms
	Removed ${f} documents in `+(h-l)+`ms
Total Duration: ${h-u}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:f})))}}function O6(t,e){return new D6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(){this.changes=new Gs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ee.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Sc(r.mutation,i,or.empty(),mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Me()){const i=ps();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let s=rc();return a.forEach((o,l)=>{s=s.insert(o,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=ps();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Me()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{n.set(s,o)})})}computeViews(e,n,r,i){let a=$i();const s=Ac(),o=function(){return Ac()}();return n.forEach((l,h)=>{const u=r.get(h.key);i.has(h.key)&&(u===void 0||u.mutation instanceof es)?a=a.insert(h.key,h):u!==void 0?(s.set(h.key,u.mutation.getFieldMask()),Sc(u.mutation,h,u.mutation.getFieldMask(),mt.now())):s.set(h.key,or.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((h,u)=>s.set(h,u)),n.forEach((h,u)=>{var f;return o.set(h,new k6(u,(f=s.get(h))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,n){const r=Ac();let i=new St((s,o)=>s-o),a=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const o of s)o.keys().forEach(l=>{const h=n.get(l);if(h===null)return;let u=r.get(l)||or.empty();u=o.applyToLocalView(h,u),r.set(l,u);const f=(i.get(o.batchId)||Me()).add(l);i=i.insert(o.batchId,f)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),h=l.key,u=l.value,f=v2();u.forEach(d=>{if(!a.has(d)){const m=T2(n.get(d),r.get(d));m!==null&&f.set(d,m),a=a.add(d)}}),s.push(this.documentOverlayCache.saveOverlays(e,h,f))}return ee.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return de.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):f2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):ee.resolve(ps());let o=Yc,l=a;return s.next(h=>ee.forEach(h,(u,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),a.get(u)?ee.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,h,a)).next(()=>this.computeViews(e,l,h,Me())).next(u=>({batchId:o,changes:g2(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(r=>{let i=rc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=rc();return this.indexManager.getCollectionParents(e,a).next(o=>ee.forEach(o,l=>{const h=function(f,d){return new Su(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(u=>{u.forEach((f,d)=>{s=s.insert(f,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(s=>{a.forEach((l,h)=>{const u=h.getKey();s.get(u)===null&&(s=s.insert(u,Cn.newInvalidDocument(u)))});let o=rc();return s.forEach((l,h)=>{const u=a.get(l);u!==void 0&&Sc(u.mutation,h,or.empty(),mt.now()),Md(n,h)&&(o=o.insert(l,h))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return ee.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:li(i.createTime)}}(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:A6(i.bundledQuery),readTime:li(i.readTime)}}(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(){this.overlays=new St(de.comparator),this.kr=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ps();return ee.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.wt(e,n,a)}),ee.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),ee.resolve()}getOverlaysForCollection(e,n,r){const i=ps(),a=n.length+1,s=new de(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const l=o.getNext().value,h=l.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ee.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new St((h,u)=>h-u);const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let u=a.get(h.largestBatchId);u===null&&(u=ps(),a=a.insert(h.largestBatchId,u)),u.set(h.getKey(),h)}}const o=ps(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,u)=>o.set(h,u)),!(o.size()>=i)););return ee.resolve(o)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new n6(n,r));let a=this.kr.get(n);a===void 0&&(a=Me(),this.kr.set(n,a)),this.kr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(){this.sessionToken=bn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(){this.qr=new Zt(an.Qr),this.$r=new Zt(an.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new an(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new an(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new de(new lt([])),r=new an(n,e),i=new an(n,e+1),a=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),a.push(s.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new de(new lt([])),r=new an(n,e),i=new an(n,e+1);let a=Me();return this.$r.forEachInRange([r,i],s=>{a=a.add(s.key)}),a}containsKey(e){const n=new an(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class an{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return de.comparator(e.key,n.key)||Ae(e.Hr,n.Hr)}static Ur(e,n){return Ae(e.Hr,n.Hr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Zt(an.Qr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new t6(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.Yr=this.Yr.add(new an(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ee.resolve(s)}lookupMutationBatch(e,n){return ee.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return ee.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?dv:this.er-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new an(n,0),i=new an(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],s=>{const o=this.Zr(s.Hr);a.push(o)}),ee.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Zt(Ae);return n.forEach(i=>{const a=new an(i,0),s=new an(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,s],o=>{r=r.add(o.Hr)})}),ee.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;de.isDocumentKey(a)||(a=a.child(""));const s=new an(new de(a),0);let o=new Zt(Ae);return this.Yr.forEachWhile(l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(o=o.add(l.Hr)),!0)},s),ee.resolve(this.ei(o))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ge(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ee.forEach(n.mutations,i=>{const a=new an(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new an(n,0),i=this.Yr.firstAfterOrEqual(r);return ee.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.ni=e,this.docs=function(){return new St(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ee.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(n))}getEntries(e,n){let r=$i();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Cn.newInvalidDocument(i))}),ee.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=$i();const s=n.path,o=new de(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:h,value:{document:u}}=l.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||gM(pM(u),r)<=0||(i.has(u.key)||Md(n,u))&&(a=a.insert(u.key,u.mutableCopy()))}return ee.resolve(a)}getAllFromCollectionGroup(e,n,r,i){me(9500)}ri(e,n){return ee.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new B6(this)}getSize(e){return ee.resolve(this.size)}}class B6 extends M6{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),ee.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e){this.persistence=e,this.ii=new Gs(n=>gv(n),vv),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.si=0,this.oi=new wv,this.targetCount=0,this._i=cl.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),ee.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new cl(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.hr(n),ee.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ii.forEach((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.ii.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),ee.waitFor(a).next(()=>i)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return ee.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),ee.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),ee.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return ee.resolve(r)}containsKey(e,n){return ee.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n){this.ai={},this.overlays={},this.ui=new Cd(0),this.ci=!1,this.ci=!0,this.li=new L6,this.referenceDelegate=e(this),this.hi=new F6(this),this.indexManager=new S6,this.remoteDocumentCache=function(i){return new z6(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new x6(n),this.Ti=new P6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new U6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new V6(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const i=new H6(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,n){return ee.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class H6 extends yM{constructor(e){super(),this.currentSequenceNumber=e}}class Tv{constructor(e){this.persistence=e,this.Ai=new wv,this.Ri=null}static Vi(e){return new Tv(e)}get mi(){if(this.Ri)return this.Ri;throw me(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),ee.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.mi,r=>{const i=de.fromPath(r);return this.fi(e,i).next(a=>{a||n.removeEntry(i,_e.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return ee.or([()=>ee.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class zf{constructor(e,n){this.persistence=e,this.gi=new Gs(r=>EM(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=O6(this,n)}static Vi(e,n){return new zf(e,n)}Ii(){}di(e){return ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return ee.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?ee.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(o=>{o||(r++,a.removeEntry(s,_e.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),ee.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),ee.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vh(e.data.value)),n}Sr(e,n,r){return ee.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return ee.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Me(),i=Me();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new xv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return UD()?8:_M(Dn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ps(e,n).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.ys(e,n,i,r).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new q6;return this.ws(e,n,s).next(o=>{if(a.result=o,this.Rs)return this.Ss(e,n,s,o.size)})}).next(()=>a.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(co()<=De.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(co()<=De.DEBUG&&oe("QueryEngine","Query:",uo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(co()<=De.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oi(n))):ee.resolve())}ps(e,n){if(R1(n))return ee.resolve(null);let r=oi(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=vg(n,null,"F"),r=oi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const s=Me(...a);return this.gs.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const h=this.bs(n,o);return this.Ds(n,h,s,l.readTime)?this.ps(e,vg(n,null,"F")):this.vs(e,h,n,l)}))})))}ys(e,n,r,i){return R1(n)||i.isEqual(_e.min())?ee.resolve(null):this.gs.getDocuments(e,r).next(a=>{const s=this.bs(n,a);return this.Ds(n,s,r,i)?ee.resolve(null):(co()<=De.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),uo(n)),this.vs(e,s,n,mM(i,Yc)).next(o=>o))})}bs(e,n){let r=new Zt(m2(e));return n.forEach((i,a)=>{Md(e,a)&&(r=r.add(a))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,n,r){return co()<=De.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",uo(n)),this.gs.getDocumentsMatchingQuery(e,n,Ha.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="LocalStore",$6=3e8;class Y6{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new St(Ae),this.Ms=new Gs(a=>gv(a),vv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j6(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function X6(t,e,n,r){return new Y6(t,e,n,r)}async function U2(t,e){const n=be(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const s=[],o=[];let l=Me();for(const h of i){s.push(h.batchId);for(const u of h.mutations)l=l.add(u.key)}for(const h of a){o.push(h.batchId);for(const u of h.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(h=>({Bs:h,removedBatchIds:s,addedBatchIds:o}))})})}function Q6(t,e){const n=be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return function(o,l,h,u){const f=h.batch,d=f.keys();let m=ee.resolve();return d.forEach(b=>{m=m.next(()=>u.getEntry(l,b)).next(A=>{const D=h.docVersions.get(b);Ge(D!==null,48541),A.version.compareTo(D)<0&&(f.applyToRemoteDocument(A,h),A.isValidDocument()&&(A.setReadTime(h.commitVersion),u.addEntry(A)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=Me();for(let h=0;h<o.mutationResults.length;++h)o.mutationResults[h].transformResults.length>0&&(l=l.add(o.batch.mutations[h].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function L2(t){const e=be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function K6(t,e){const n=be(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const o=[];e.targetChanges.forEach((u,f)=>{const d=i.get(f);if(!d)return;o.push(n.hi.removeMatchingKeys(a,u.removedDocuments,f).next(()=>n.hi.addMatchingKeys(a,u.addedDocuments,f)));let m=d.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(bn.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(f,m),function(A,D,w){return A.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=$6?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(d,m,u)&&o.push(n.hi.updateTargetData(a,m))});let l=$i(),h=Me();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,u))}),o.push(W6(a,s,e.documentUpdates).next(u=>{l=u.Ls,h=u.ks})),!r.isEqual(_e.min())){const u=n.hi.getLastRemoteSnapshotVersion(a).next(f=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(u)}return ee.waitFor(o).next(()=>s.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,l,h)).next(()=>l)}).then(a=>(n.Fs=i,a))}function W6(t,e,n){let r=Me(),i=Me();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let s=$i();return n.forEach((o,l)=>{const h=a.get(o);l.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(_e.min())?(e.removeEntry(o,l.readTime),s=s.insert(o,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),s=s.insert(o,l)):oe(Av,"Ignoring outdated watch update for ",o,". Current version:",h.version," Watch version:",l.version)}),{Ls:s,ks:i}})}function Z6(t,e){const n=be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=dv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function J6(t,e){const n=be(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(a=>a?(i=a,ee.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Ta(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function wg(t,e,n){const r=be(t),i=r.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Tl(s))throw s;oe(Av,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function z1(t,e,n){const r=be(t);let i=_e.min(),a=Me();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,h,u){const f=be(l),d=f.Ms.get(u);return d!==void 0?ee.resolve(f.Fs.get(d)):f.hi.getTargetData(h,u)}(r,s,oi(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,o.targetId).next(l=>{a=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:_e.min(),n?a:Me())).next(o=>(ek(r,zM(e),o),{documents:o,qs:a})))}function ek(t,e,n){let r=t.xs.get(e)||_e.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.xs.set(e,r)}class B1{constructor(){this.activeTargetIds=$M()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tk{constructor(){this.Fo=new B1,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new B1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="ConnectivityMonitor";class H1{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){oe(F1,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){oe(F1,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph=null;function Tg(){return ph===null?ph=function(){return 268435456+Math.round(2147483648*Math.random())}():ph++,"0x"+ph.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="RestConnection",rk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ik{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===hg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const s=Tg(),o=this.Go(e,n.toUriEncodedString());oe(Hm,`Sending RPC '${e}' ${s}:`,o,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,a);const{host:h}=new URL(o),u=Qi(h);return this.jo(e,o,l,r,u).then(f=>(oe(Hm,`Received RPC '${e}' ${s}: `,f),f),f=>{throw Fa(Hm,`RPC '${e}' ${s} failed with error: `,f,"url: ",o,"request:",r),f})}Jo(e,n,r,i,a,s){return this.Wo(e,n,r,i,a)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+El}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,n){const r=rk[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An="WebChannelConnection";class sk extends ik{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,a){const s=Tg();return new Promise((o,l)=>{const h=new zA;h.setWithCredentials(!0),h.listenOnce(BA.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Lh.NO_ERROR:const f=h.getResponseJson();oe(An,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Lh.TIMEOUT:oe(An,`RPC '${e}' ${s} timed out`),l(new ae(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Lh.HTTP_ERROR:const d=h.getStatus();if(oe(An,`RPC '${e}' ${s} failed with status:`,d,"response text:",h.getResponseText()),d>0){let m=h.getResponseJson();Array.isArray(m)&&(m=m[0]);const b=m==null?void 0:m.error;if(b&&b.status&&b.message){const A=function(w){const x=w.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(x)>=0?x:Z.UNKNOWN}(b.status);l(new ae(A,b.message))}else l(new ae(Z.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new ae(Z.UNAVAILABLE,"Connection failed."));break;default:me(9055,{c_:e,streamId:s,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{oe(An,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);oe(An,`RPC '${e}' ${s} sending request:`,i),h.send(n,"POST",u,r,15)})}P_(e,n,r){const i=Tg(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=qA(),o=HA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=a.join("");oe(An,`Creating RPC '${e}' stream ${i}: ${u}`,l);const f=s.createWebChannel(u,l);this.T_(f);let d=!1,m=!1;const b=new ak({Ho:D=>{m?oe(An,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(d||(oe(An,`Opening RPC '${e}' stream ${i} transport.`),f.open(),d=!0),oe(An,`RPC '${e}' stream ${i} sending:`,D),f.send(D))},Yo:()=>f.close()}),A=(D,w,x)=>{D.listen(w,C=>{try{x(C)}catch(O){setTimeout(()=>{throw O},0)}})};return A(f,nc.EventType.OPEN,()=>{m||(oe(An,`RPC '${e}' stream ${i} transport opened.`),b.s_())}),A(f,nc.EventType.CLOSE,()=>{m||(m=!0,oe(An,`RPC '${e}' stream ${i} transport closed`),b.__(),this.I_(f))}),A(f,nc.EventType.ERROR,D=>{m||(m=!0,Fa(An,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),b.__(new ae(Z.UNAVAILABLE,"The operation could not be completed")))}),A(f,nc.EventType.MESSAGE,D=>{var w;if(!m){const x=D.data[0];Ge(!!x,16349);const C=x,O=(C==null?void 0:C.error)||((w=C[0])===null||w===void 0?void 0:w.error);if(O){oe(An,`RPC '${e}' stream ${i} received error:`,O);const U=O.status;let N=function(y){const T=Ht[y];if(T!==void 0)return A2(T)}(U),_=O.message;N===void 0&&(N=Z.INTERNAL,_="Unknown error status: "+U+" with message "+O.message),m=!0,b.__(new ae(N,_)),f.close()}else oe(An,`RPC '${e}' stream ${i} received:`,x),b.a_(x)}}),A(o,FA.STAT_EVENT,D=>{D.stat===cg.PROXY?oe(An,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===cg.NOPROXY&&oe(An,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.o_()},0),b}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function qm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t){return new u6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="PersistentStream";class z2{constructor(e,n,r,i,a,s,o,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new V2(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Gi(n.toString()),Gi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new ae(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return oe(q1,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(oe(q1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ok extends z2{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=d6(this.serializer,e),r=function(a){if(!("targetChange"in a))return _e.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?_e.min():s.readTime?li(s.readTime):_e.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Eg(this.serializer),n.addTarget=function(a,s){let o;const l=s.target;if(o=pg(l)?{documents:g6(a,l)}:{query:v6(a,l).Vt},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=C2(a,s.resumeToken);const h=yg(a,s.expectedCount);h!==null&&(o.expectedCount=h)}else if(s.snapshotVersion.compareTo(_e.min())>0){o.readTime=Vf(a,s.snapshotVersion.toTimestamp());const h=yg(a,s.expectedCount);h!==null&&(o.expectedCount=h)}return o}(this.serializer,e);const r=_6(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Eg(this.serializer),n.removeTarget=e,this.k_(n)}}class lk extends z2{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=p6(e.writeResults,e.commitTime),r=li(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Eg(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>m6(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{}class uk extends ck{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ae(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Wo(e,_g(n,r),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ae(Z.UNKNOWN,a.toString())})}Jo(e,n,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Jo(e,_g(n,r),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ae(Z.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class hk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Gi(n),this._a=!1):oe("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="RemoteStore";class fk{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{$s(this)&&(oe(Ps,"Restarting streams for network reachability change."),await async function(l){const h=be(l);h.Ia.add(4),await Nu(h),h.Aa.set("Unknown"),h.Ia.delete(4),await Vd(h)}(this))})}),this.Aa=new hk(r,i)}}async function Vd(t){if($s(t))for(const e of t.da)await e(!0)}async function Nu(t){for(const e of t.da)await e(!1)}function B2(t,e){const n=be(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Nv(n)?Cv(n):xl(n).x_()&&Rv(n,e))}function Sv(t,e){const n=be(t),r=xl(n);n.Ta.delete(e),r.x_()&&F2(n,e),n.Ta.size===0&&(r.x_()?r.B_():$s(n)&&n.Aa.set("Unknown"))}function Rv(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xl(t).H_(e)}function F2(t,e){t.Ra.$e(e),xl(t).Y_(e)}function Cv(t){t.Ra=new s6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),xl(t).start(),t.Aa.aa()}function Nv(t){return $s(t)&&!xl(t).M_()&&t.Ta.size>0}function $s(t){return be(t).Ia.size===0}function H2(t){t.Ra=void 0}async function dk(t){t.Aa.set("Online")}async function mk(t){t.Ta.forEach((e,n)=>{Rv(t,e)})}async function pk(t,e){H2(t),Nv(t)?(t.Aa.la(e),Cv(t)):t.Aa.set("Unknown")}async function gk(t,e,n){if(t.Aa.set("Online"),e instanceof R2&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ta.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ta.delete(o),i.Ra.removeTarget(o))}(t,e)}catch(r){oe(Ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bf(t,r)}else if(e instanceof Fh?t.Ra.Ye(e):e instanceof S2?t.Ra.it(e):t.Ra.et(e),!n.isEqual(_e.min()))try{const r=await L2(t.localStore);n.compareTo(r)>=0&&await function(a,s){const o=a.Ra.Pt(s);return o.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const u=a.Ta.get(h);u&&a.Ta.set(h,u.withResumeToken(l.resumeToken,s))}}),o.targetMismatches.forEach((l,h)=>{const u=a.Ta.get(l);if(!u)return;a.Ta.set(l,u.withResumeToken(bn.EMPTY_BYTE_STRING,u.snapshotVersion)),F2(a,l);const f=new Ta(u.target,l,h,u.sequenceNumber);Rv(a,f)}),a.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){oe(Ps,"Failed to raise snapshot:",r),await Bf(t,r)}}async function Bf(t,e,n){if(!Tl(e))throw e;t.Ia.add(1),await Nu(t),t.Aa.set("Offline"),n||(n=()=>L2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(Ps,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Vd(t)})}function q2(t,e){return e().catch(n=>Bf(t,n,e))}async function zd(t){const e=be(t),n=Ya(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:dv;for(;vk(e);)try{const i=await Z6(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,yk(e,i)}catch(i){await Bf(e,i)}G2(e)&&$2(e)}function vk(t){return $s(t)&&t.Pa.length<10}function yk(t,e){t.Pa.push(e);const n=Ya(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function G2(t){return $s(t)&&!Ya(t).M_()&&t.Pa.length>0}function $2(t){Ya(t).start()}async function _k(t){Ya(t).na()}async function bk(t){const e=Ya(t);for(const n of t.Pa)e.X_(n.mutations)}async function Ek(t,e,n){const r=t.Pa.shift(),i=_v.from(r,e,n);await q2(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await zd(t)}async function wk(t,e){e&&Ya(t).Z_&&await async function(r,i){if(function(s){return i6(s)&&s!==Z.ABORTED}(i.code)){const a=r.Pa.shift();Ya(r).N_(),await q2(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await zd(r)}}(t,e),G2(t)&&$2(t)}async function G1(t,e){const n=be(t);n.asyncQueue.verifyOperationInProgress(),oe(Ps,"RemoteStore received new credentials");const r=$s(n);n.Ia.add(3),await Nu(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Vd(n)}async function Tk(t,e){const n=be(t);e?(n.Ia.delete(2),await Vd(n)):e||(n.Ia.add(2),await Nu(n),n.Aa.set("Unknown"))}function xl(t){return t.Va||(t.Va=function(n,r,i){const a=be(n);return a.ia(),new ok(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:dk.bind(null,t),e_:mk.bind(null,t),n_:pk.bind(null,t),J_:gk.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Nv(t)?Cv(t):t.Aa.set("Unknown")):(await t.Va.stop(),H2(t))})),t.Va}function Ya(t){return t.ma||(t.ma=function(n,r,i){const a=be(n);return a.ia(),new lk(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:_k.bind(null,t),n_:wk.bind(null,t),ea:bk.bind(null,t),ta:Ek.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await zd(t)):(await t.ma.stop(),t.Pa.length>0&&(oe(Ps,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new Iv(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dv(t,e){if(Gi("AsyncQueue",`${e}: ${t}`),Tl(t))return new ae(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{static emptySet(e){return new Fo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||de.comparator(n.key,r.key):(n,r)=>de.comparator(n.key,r.key),this.keyedMap=rc(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Fo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this.fa=new St(de.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):me(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class ul{constructor(e,n,r,i,a,s,o,l,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new ul(e,n,Fo.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Ak{constructor(){this.queries=Y1(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=be(n),a=i.queries;i.queries=Y1(),a.forEach((s,o)=>{for(const l of o.wa)l.onError(r)})})(this,new ae(Z.ABORTED,"Firestore shutting down"))}}function Y1(){return new Gs(t=>d2(t),Od)}async function Ov(t,e){const n=be(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new xk,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await n.onListen(i,!0);break;case 1:a.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=Dv(s,`Initialization of query '${uo(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&kv(n)}async function Mv(t,e){const n=be(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.wa.indexOf(e);s>=0&&(a.wa.splice(s,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Sk(t,e){const n=be(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.wa)o.Ca(i)&&(r=!0);s.ya=i}}r&&kv(n)}function Rk(t,e,n){const r=be(t),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(n);r.queries.delete(e)}function kv(t){t.Da.forEach(e=>{e.next()})}var xg,X1;(X1=xg||(xg={})).Fa="default",X1.Cache="cache";class jv{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ul(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==xg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.key=e}}class X2{constructor(e){this.key=e}}class Ck{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Me(),this.mutatedKeys=Me(),this.Xa=m2(e),this.eu=new Fo(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new $1,i=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{const d=i.get(u),m=Md(this.query,f)?f:null,b=!!d&&this.mutatedKeys.has(d.key),A=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let D=!1;d&&m?d.data.isEqual(m.data)?b!==A&&(r.track({type:3,doc:m}),D=!0):this.iu(d,m)||(r.track({type:2,doc:m}),D=!0,(l&&this.Xa(m,l)>0||h&&this.Xa(m,h)<0)&&(o=!0)):!d&&m?(r.track({type:0,doc:m}),D=!0):d&&!m&&(r.track({type:1,doc:d}),D=!0,(l||h)&&(o=!0)),D&&(m?(s=s.add(m),a=A?a.add(u):a.delete(u)):(s=s.delete(u),a=a.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),a=a.delete(u.key),r.track({type:1,doc:u})}return{eu:s,ru:r,Ds:o,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((u,f)=>function(m,b){const A=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{At:D})}};return A(m)-A(b)}(u.type,f.type)||this.Xa(u.doc,f.doc)),this.su(r),i=i!=null&&i;const o=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,h=l!==this.Ya;return this.Ya=l,s.length!==0||h?{snapshot:new ul(this.query,e.eu,a,s,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new $1,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Me(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new X2(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Y2(r))}),n}uu(e){this.Ha=e.qs,this.Za=Me();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return ul.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Pv="SyncEngine";class Nk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Ik{constructor(e){this.key=e,this.lu=!1}}class Dk{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Gs(o=>d2(o),Od),this.Tu=new Map,this.Iu=new Set,this.du=new St(de.comparator),this.Eu=new Map,this.Au=new wv,this.Ru={},this.Vu=new Map,this.mu=cl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Ok(t,e,n=!0){const r=eS(t);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await Q2(r,e,n,!0),i}async function Mk(t,e){const n=eS(t);await Q2(n,e,!0,!1)}async function Q2(t,e,n,r){const i=await J6(t.localStore,oi(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await kk(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&B2(t.remoteStore,i),o}async function kk(t,e,n,r,i){t.gu=(f,d,m)=>async function(A,D,w,x){let C=D.view.nu(w);C.Ds&&(C=await z1(A.localStore,D.query,!1).then(({documents:_})=>D.view.nu(_,C)));const O=x&&x.targetChanges.get(D.targetId),U=x&&x.targetMismatches.get(D.targetId)!=null,N=D.view.applyChanges(C,A.isPrimaryClient,O,U);return K1(A,D.targetId,N._u),N.snapshot}(t,f,d,m);const a=await z1(t.localStore,e,!0),s=new Ck(e,a.qs),o=s.nu(a.documents),l=Cu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=s.applyChanges(o,t.isPrimaryClient,l);K1(t,n,h._u);const u=new Nk(e,n,s);return t.Pu.set(e,u),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function jk(t,e,n){const r=be(t),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(s=>!Od(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await wg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Sv(r.remoteStore,i.targetId),Ag(r,i.targetId)}).catch(wl)):(Ag(r,i.targetId),await wg(r.localStore,i.targetId,!0))}async function Pk(t,e){const n=be(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Sv(n.remoteStore,r.targetId))}async function Uk(t,e,n){const r=qk(t);try{const i=await function(s,o){const l=be(s),h=mt.now(),u=o.reduce((m,b)=>m.add(b.key),Me());let f,d;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let b=$i(),A=Me();return l.Os.getEntries(m,u).next(D=>{b=D,b.forEach((w,x)=>{x.isValidDocument()||(A=A.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,b)).next(D=>{f=D;const w=[];for(const x of o){const C=JM(x,f.get(x.key).overlayedDocument);C!=null&&w.push(new es(x.key,C,a2(C.value.mapValue),dr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,h,w,o)}).next(D=>{d=D;const w=D.applyToLocalDocumentSet(f,A);return l.documentOverlayCache.saveOverlays(m,D.batchId,w)})}).then(()=>({batchId:d.batchId,changes:g2(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,l){let h=s.Ru[s.currentUser.toKey()];h||(h=new St(Ae)),h=h.insert(o,l),s.Ru[s.currentUser.toKey()]=h}(r,i.batchId,n),await Iu(r,i.changes),await zd(r.remoteStore)}catch(i){const a=Dv(i,"Failed to persist write");n.reject(a)}}async function K2(t,e){const n=be(t);try{const r=await K6(n.localStore,e);e.targetChanges.forEach((i,a)=>{const s=n.Eu.get(a);s&&(Ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ge(s.lu,14607):i.removedDocuments.size>0&&(Ge(s.lu,42227),s.lu=!1))}),await Iu(n,r,e)}catch(r){await wl(r)}}function Q1(t,e,n){const r=be(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const l=be(s);l.onlineState=o;let h=!1;l.queries.forEach((u,f)=>{for(const d of f.wa)d.va(o)&&(h=!0)}),h&&kv(l)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Lk(t,e,n){const r=be(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),a=i&&i.key;if(a){let s=new St(de.comparator);s=s.insert(a,Cn.newNoDocument(a,_e.min()));const o=Me().add(a),l=new Ud(_e.min(),new Map,new St(Ae),s,o);await K2(r,l),r.du=r.du.remove(a),r.Eu.delete(e),Uv(r)}else await wg(r.localStore,e,!1).then(()=>Ag(r,e,n)).catch(wl)}async function Vk(t,e){const n=be(t),r=e.batch.batchId;try{const i=await Q6(n.localStore,e);Z2(n,r,null),W2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Iu(n,i)}catch(i){await wl(i)}}async function zk(t,e,n){const r=be(t);try{const i=await function(s,o){const l=be(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let u;return l.mutationQueue.lookupMutationBatch(h,o).next(f=>(Ge(f!==null,37113),u=f.keys(),l.mutationQueue.removeMutationBatch(h,f))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,u)).next(()=>l.localDocuments.getDocuments(h,u))})}(r.localStore,e);Z2(r,e,n),W2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Iu(r,i)}catch(i){await wl(i)}}function W2(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function Z2(t,e,n){const r=be(t);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Ag(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||J2(t,r)})}function J2(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Sv(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Uv(t))}function K1(t,e,n){for(const r of n)r instanceof Y2?(t.Au.addReference(r.key,e),Bk(t,r)):r instanceof X2?(oe(Pv,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||J2(t,r.key)):me(19791,{yu:r})}function Bk(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(oe(Pv,"New document in limbo: "+n),t.Iu.add(r),Uv(t))}function Uv(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new de(lt.fromString(e)),r=t.mu.next();t.Eu.set(r,new Ik(n)),t.du=t.du.insert(n,r),B2(t.remoteStore,new Ta(oi(Dd(n.path)),r,"TargetPurposeLimboResolution",Cd.ue))}}async function Iu(t,e,n){const r=be(t),i=[],a=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((o,l)=>{s.push(r.gu(l,e,n).then(h=>{var u;if((h||n)&&r.isPrimaryClient){const f=h?!h.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(h){i.push(h);const f=xv.Es(l.targetId,h);a.push(f)}}))}),await Promise.all(s),r.hu.J_(i),await async function(l,h){const u=be(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ee.forEach(h,d=>ee.forEach(d.Is,m=>u.persistence.referenceDelegate.addReference(f,d.targetId,m)).next(()=>ee.forEach(d.ds,m=>u.persistence.referenceDelegate.removeReference(f,d.targetId,m)))))}catch(f){if(!Tl(f))throw f;oe(Av,"Failed to update sequence numbers: "+f)}for(const f of h){const d=f.targetId;if(!f.fromCache){const m=u.Fs.get(d),b=m.snapshotVersion,A=m.withLastLimboFreeSnapshotVersion(b);u.Fs=u.Fs.insert(d,A)}}}(r.localStore,a))}async function Fk(t,e){const n=be(t);if(!n.currentUser.isEqual(e)){oe(Pv,"User change. New user:",e.toKey());const r=await U2(n.localStore,e);n.currentUser=e,function(a,s){a.Vu.forEach(o=>{o.forEach(l=>{l.reject(new ae(Z.CANCELLED,s))})}),a.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Iu(n,r.Bs)}}function Hk(t,e){const n=be(t),r=n.Eu.get(e);if(r&&r.lu)return Me().add(r.key);{let i=Me();const a=n.Tu.get(e);if(!a)return i;for(const s of a){const o=n.Pu.get(s);i=i.unionWith(o.view.tu)}return i}}function eS(t){const e=be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=K2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lk.bind(null,e),e.hu.J_=Sk.bind(null,e.eventManager),e.hu.pu=Rk.bind(null,e.eventManager),e}function qk(t){const e=be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zk.bind(null,e),e}class Ff{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ld(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return X6(this.persistence,new G6,e.initialUser,this.serializer)}Du(e){return new P2(Tv.Vi,this.serializer)}bu(e){return new tk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ff.provider={build:()=>new Ff};class Gk extends Ff{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ge(this.persistence.referenceDelegate instanceof zf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new I6(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new P2(r=>zf.Vi(r,n),this.serializer)}}class Sg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Q1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fk.bind(null,this.syncEngine),await Tk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ak}()}createDatastore(e){const n=Ld(e.databaseInfo.databaseId),r=function(a){return new sk(a)}(e.databaseInfo);return function(a,s,o,l){return new uk(a,s,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,s,o){return new fk(r,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,n=>Q1(this.syncEngine,n,0),function(){return H1.C()?new H1:new nk}())}createSyncEngine(e,n){return function(i,a,s,o,l,h,u){const f=new Dk(i,a,s,o,l,h);return u&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=be(i);oe(Ps,"RemoteStore shutting down."),a.Ia.add(5),await Nu(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Sg.provider={build:()=>new Sg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Gi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="FirestoreClient";class $k{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Rn.UNAUTHENTICATED,this.clientId=fv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async s=>{oe(Xa,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(oe(Xa,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Dv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gm(t,e){t.asyncQueue.verifyOperationInProgress(),oe(Xa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await U2(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Fa("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{oe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Fa("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function W1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Yk(t);oe(Xa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>G1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>G1(e.remoteStore,i)),t._onlineComponents=e}async function Yk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(Xa,"Using user provided OfflineComponentProvider");try{await Gm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Fa("Error using user provided cache. Falling back to memory cache: "+n),await Gm(t,new Ff)}}else oe(Xa,"Using default OfflineComponentProvider"),await Gm(t,new Gk(void 0));return t._offlineComponents}async function tS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(Xa,"Using user provided OnlineComponentProvider"),await W1(t,t._uninitializedComponentsProvider._online)):(oe(Xa,"Using default OnlineComponentProvider"),await W1(t,new Sg))),t._onlineComponents}function Xk(t){return tS(t).then(e=>e.syncEngine)}async function Hf(t){const e=await tS(t),n=e.eventManager;return n.onListen=Ok.bind(null,e.syncEngine),n.onUnlisten=jk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Mk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Pk.bind(null,e.syncEngine),n}function Qk(t,e,n={}){const r=new Ui;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,l,h){const u=new Lv({next:d=>{u.Ou(),s.enqueueAndForget(()=>Mv(a,f));const m=d.docs.has(o);!m&&d.fromCache?h.reject(new ae(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&d.fromCache&&l&&l.source==="server"?h.reject(new ae(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(d)},error:d=>h.reject(d)}),f=new jv(Dd(o.path),u,{includeMetadataChanges:!0,ka:!0});return Ov(a,f)}(await Hf(t),t.asyncQueue,e,n,r)),r.promise}function Kk(t,e,n={}){const r=new Ui;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,l,h){const u=new Lv({next:d=>{u.Ou(),s.enqueueAndForget(()=>Mv(a,f)),d.fromCache&&l.source==="server"?h.reject(new ae(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(d)},error:d=>h.reject(d)}),f=new jv(o,u,{includeMetadataChanges:!0,ka:!0});return Ov(a,f)}(await Hf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="firestore.googleapis.com",J1=!0;class eE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rS,this.ssl=J1}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:J1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=j2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<C6)throw new ae(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new iM;switch(r.type){case"firstParty":return new lM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Z1.get(n);r&&(oe("ComponentProvider","Removing Datastore"),Z1.delete(n),r.terminate())}(this),Promise.resolve()}}function Wk(t,e,n,r={}){var i;t=Rr(t,Bd);const a=Qi(e),s=t._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;a&&(Ed(`https://${l}`),wd("Firestore",!0)),s.host!==rS&&s.host!==l&&Fa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},s),{host:l,ssl:a,emulatorOptions:r});if(!Ms(h,o)&&(t._setSettings(h),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=Rn.MOCK_USER;else{u=rA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ae(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Rn(d)}t._authCredentials=new aM(new $A(u,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ys(this.firestore,e,this._query)}}class Vt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Au(n,Vt._jsonSchema))return new Vt(e,r||null,new de(lt.fromString(n.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:Xt("string",Vt._jsonSchemaVersion),referencePath:Xt("string")};class Ua extends Ys{constructor(e,n,r){super(e,n,Dd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new de(e))}withConverter(e){return new Ua(this.firestore,e,this._path)}}function Zk(t,e,...n){if(t=ut(t),XA("collection","path",e),t instanceof Bd){const r=lt.fromString(e,...n);return d1(r),new Ua(t,null,r)}{if(!(t instanceof Vt||t instanceof Ua))throw new ae(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(lt.fromString(e,...n));return d1(r),new Ua(t.firestore,null,r)}}function iS(t,e,...n){if(t=ut(t),arguments.length===1&&(e=fv.newId()),XA("doc","path",e),t instanceof Bd){const r=lt.fromString(e,...n);return f1(r),new Vt(t,null,new de(r))}{if(!(t instanceof Vt||t instanceof Ua))throw new ae(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(lt.fromString(e,...n));return f1(r),new Vt(t.firestore,t instanceof Ua?t.converter:null,new de(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="AsyncQueue";class nE{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new V2(this,"async_queue_retry"),this.oc=()=>{const r=qm();r&&oe(tE,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=qm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=qm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Ui;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Tl(e))throw e;oe(tE,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Gi("INTERNAL UNHANDLED ERROR: ",rE(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Iv.createAndSchedule(this,e,n,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&me(47125,{hc:rE(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function rE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Qa extends Bd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new nE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nE(e),this._firestoreClient=void 0,await e}}}function Jk(t,e){const n=typeof t=="object"?t:Td(),r=typeof t=="string"?t:e,i=Eu(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=W0("firestore");a&&Wk(i,...a)}return i}function Du(t){if(t._terminated)throw new ae(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ej(t),t._firestoreClient}function ej(t){var e,n,r;const i=t._freezeSettings(),a=function(o,l,h,u){return new xM(o,l,h,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,nS(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new $k(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tr(bn.fromBase64String(e))}catch(n){throw new ae(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Tr(bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Au(e,Tr._jsonSchema))return Tr.fromBase64String(e.bytes)}}Tr._jsonSchemaVersion="firestore/bytes/1.0",Tr._jsonSchema={type:Xt("string",Tr._jsonSchemaVersion),bytes:Xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ci._jsonSchemaVersion}}static fromJSON(e){if(Au(e,ci._jsonSchema))return new ci(e.latitude,e.longitude)}}ci._jsonSchemaVersion="firestore/geoPoint/1.0",ci._jsonSchema={type:Xt("string",ci._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Au(e,ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ui(e.vectorValues);throw new ae(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ui._jsonSchemaVersion="firestore/vectorValue/1.0",ui._jsonSchema={type:Xt("string",ui._jsonSchemaVersion),vectorValues:Xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=/^__.*__$/;class nj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new es(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ru(e,this.data,n,this.fieldTransforms)}}class aS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new es(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ec:t})}}class zv{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new zv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return qf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(sS(this.Ec)&&tj.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class rj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ld(e)}Dc(e,n,r,i=!1){return new zv({Ec:e,methodName:n,bc:r,path:yn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bv(t){const e=t._freezeSettings(),n=Ld(t._databaseId);return new rj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oS(t,e,n,r,i,a={}){const s=t.Dc(a.merge||a.mergeFields?2:0,e,n,i);Fv("Data must be an object, but it was:",s,r);const o=lS(r,s);let l,h;if(a.merge)l=new or(s.fieldMask),h=s.fieldTransforms;else if(a.mergeFields){const u=[];for(const f of a.mergeFields){const d=Rg(e,f,n);if(!s.contains(d))throw new ae(Z.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);uS(u,d)||u.push(d)}l=new or(u),h=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,h=s.fieldTransforms;return new nj(new Qn(o),l,h)}class Hd extends Vv{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hd}}function ij(t,e,n,r){const i=t.Dc(1,e,n);Fv("Data must be an object, but it was:",i,r);const a=[],s=Qn.empty();Ja(r,(l,h)=>{const u=Hv(e,l,n);h=ut(h);const f=i.gc(u);if(h instanceof Hd)a.push(u);else{const d=Ou(h,f);d!=null&&(a.push(u),s.set(u,d))}});const o=new or(a);return new aS(s,o,i.fieldTransforms)}function aj(t,e,n,r,i,a){const s=t.Dc(1,e,n),o=[Rg(e,r,n)],l=[i];if(a.length%2!=0)throw new ae(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<a.length;d+=2)o.push(Rg(e,a[d])),l.push(a[d+1]);const h=[],u=Qn.empty();for(let d=o.length-1;d>=0;--d)if(!uS(h,o[d])){const m=o[d];let b=l[d];b=ut(b);const A=s.gc(m);if(b instanceof Hd)h.push(m);else{const D=Ou(b,A);D!=null&&(h.push(m),u.set(m,D))}}const f=new or(h);return new aS(u,f,s.fieldTransforms)}function sj(t,e,n,r=!1){return Ou(n,t.Dc(r?4:3,e))}function Ou(t,e){if(cS(t=ut(t)))return Fv("Unsupported field value:",e,t),lS(t,e);if(t instanceof Vv)return function(r,i){if(!sS(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let s=0;for(const o of r){let l=Ou(o,i.yc(s));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),s++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=mt.fromDate(r);return{timestampValue:Vf(i.serializer,a)}}if(r instanceof mt){const a=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vf(i.serializer,a)}}if(r instanceof ci)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tr)return{bytesValue:C2(i.serializer,r._byteString)};if(r instanceof Vt){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Ev(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ui)return function(s,o){return{mapValue:{fields:{[r2]:{stringValue:i2},[kf]:{arrayValue:{values:s.toArray().map(h=>{if(typeof h!="number")throw o.wc("VectorValues must only contain numeric values.");return yv(o.serializer,h)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Rd(r)}`)}(t,e)}function lS(t,e){const n={};return WA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ja(t,(r,i)=>{const a=Ou(i,e.Vc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function cS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof ci||t instanceof Tr||t instanceof Vt||t instanceof Vv||t instanceof ui)}function Fv(t,e,n){if(!cS(n)||!QA(n)){const r=Rd(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Rg(t,e,n){if((e=ut(e))instanceof Fd)return e._internalPath;if(typeof e=="string")return Hv(t,e);throw qf("Field path arguments must be of type string or ",t,!1,void 0,n)}const oj=new RegExp("[~\\*/\\[\\]]");function Hv(t,e,n){if(e.search(oj)>=0)throw qf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fd(...e.split("."))._internalPath}catch{throw qf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qf(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new ae(Z.INVALID_ARGUMENT,o+t+l)}function uS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lj extends hS{data(){return super.data()}}function fS(t,e){return typeof e=="string"?Hv(t,e):e instanceof Fd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ae(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qv{}class cj extends qv{}function uj(t,e,...n){let r=[];e instanceof qv&&r.push(e),r=r.concat(n),function(a){const s=a.filter(l=>l instanceof $v).length,o=a.filter(l=>l instanceof Gv).length;if(s>1||s>0&&o>0)throw new ae(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Gv extends cj{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Gv(e,n,r)}_apply(e){const n=this._parse(e);return mS(e._query,n),new Ys(e.firestore,e.converter,gg(e._query,n))}_parse(e){const n=Bv(e.firestore);return function(a,s,o,l,h,u,f){let d;if(h.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ae(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){sE(f,u);const b=[];for(const A of f)b.push(aE(l,a,A));d={arrayValue:{values:b}}}else d=aE(l,a,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||sE(f,u),d=sj(o,s,f,u==="in"||u==="not-in");return $t.create(h,u,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class $v extends qv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $v(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Hr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const l of o)mS(s,l),s=gg(s,l)}(e._query,n),new Ys(e.firestore,e.converter,gg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function aE(t,e,n){if(typeof(n=ut(n))=="string"){if(n==="")throw new ae(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!f2(e)&&n.indexOf("/")!==-1)throw new ae(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(lt.fromString(n));if(!de.isDocumentKey(r))throw new ae(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return E1(t,new de(r))}if(n instanceof Vt)return E1(t,n._key);throw new ae(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rd(n)}.`)}function sE(t,e){if(!Array.isArray(t)||t.length===0)throw new ae(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mS(t,e){const n=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ae(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class hj{convertValue(e,n="none"){switch($a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ga(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ja(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[kf].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Lt(s.doubleValue));return new ui(a)}convertGeoPoint(e){return new ci(Lt(e.latitude),Lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Id(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xc(e));default:return null}}convertTimestamp(e){const n=qa(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=lt.fromString(e);Ge(k2(r),9688,{name:e});const i=new Qc(r.get(1),r.get(3)),a=new de(r.popFirst(5));return i.isEqual(n)||Gi(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ac{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class As extends hS{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(fS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=As._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}As._jsonSchemaVersion="firestore/documentSnapshot/1.0",As._jsonSchema={type:Xt("string",As._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Hh extends As{data(e={}){return super.data(e)}}class Ss{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ac(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Hh(this._firestore,this._userDataWriter,r.key,r,new ac(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const l=new Hh(i._firestore,i._userDataWriter,o.doc.key,o.doc,new ac(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new Hh(i._firestore,i._userDataWriter,o.doc.key,o.doc,new ac(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,u=-1;return o.type!==0&&(h=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:fj(o.type),doc:l,oldIndex:h,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ss._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=fv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(t){t=Rr(t,Vt);const e=Rr(t.firestore,Qa);return Qk(Du(e),t._key).then(n=>gS(e,t,n))}Ss._jsonSchemaVersion="firestore/querySnapshot/1.0",Ss._jsonSchema={type:Xt("string",Ss._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Yv extends hj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function mj(t){t=Rr(t,Ys);const e=Rr(t.firestore,Qa),n=Du(e),r=new Yv(e);return dS(t._query),Kk(n,t._query).then(i=>new Ss(e,r,t,i))}function pj(t,e,n){t=Rr(t,Vt);const r=Rr(t.firestore,Qa),i=pS(t.converter,e,n);return Xv(r,[oS(Bv(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,dr.none())])}function gj(t){return Xv(Rr(t.firestore,Qa),[new Pd(t._key,dr.none())])}function vj(t,...e){var n,r,i;t=ut(t);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||iE(e[s])||(a=e[s++]);const o={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(iE(e[s])){const f=e[s];e[s]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let l,h,u;if(t instanceof Vt)h=Rr(t.firestore,Qa),u=Dd(t._key.path),l={next:f=>{e[s]&&e[s](gS(h,t,f))},error:e[s+1],complete:e[s+2]};else{const f=Rr(t,Ys);h=Rr(f.firestore,Qa),u=f._query;const d=new Yv(h);l={next:m=>{e[s]&&e[s](new Ss(h,d,f,m))},error:e[s+1],complete:e[s+2]},dS(t._query)}return function(d,m,b,A){const D=new Lv(A),w=new jv(m,D,b);return d.asyncQueue.enqueueAndForget(async()=>Ov(await Hf(d),w)),()=>{D.Ou(),d.asyncQueue.enqueueAndForget(async()=>Mv(await Hf(d),w))}}(Du(h),u,o,l)}function Xv(t,e){return function(r,i){const a=new Ui;return r.asyncQueue.enqueueAndForget(async()=>Uk(await Xk(r),i,a)),a.promise}(Du(t),e)}function gS(t,e,n){const r=n.docs.get(e._key),i=new Yv(t);return new As(t,i,e._key,r,new ac(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Bv(e)}set(e,n,r){this._verifyNotCommitted();const i=$m(e,this._firestore),a=pS(i.converter,n,r),s=oS(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,dr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=$m(e,this._firestore);let s;return s=typeof(n=ut(n))=="string"||n instanceof Fd?aj(this._dataReader,"WriteBatch.update",a._key,n,r,i):ij(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=$m(e,this._firestore);return this._mutations=this._mutations.concat(new Pd(n._key,dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ae(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $m(t,e){if((t=ut(t)).firestore!==e)throw new ae(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(t){return Du(t=Rr(t,Qa)),new yj(t,e=>Xv(t,e))}(function(e,n=!0){(function(i){El=i})(qs),Ba(new Fi("firestore",(r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new Qa(new sM(r.getProvider("auth-internal")),new cM(s,r.getProvider("app-check-internal")),function(h,u){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ae(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qc(h.options.projectId,u)}(s,i),s);return a=Object.assign({useFetchStreams:n},a),o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),Sr(o1,l1,e),Sr(o1,l1,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="firebasestorage.googleapis.com",yS="storageBucket",bj=2*60*1e3,Ej=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot extends Gr{constructor(e,n,r=0){super(Ym(e),`Firebase Storage: ${n} (${Ym(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ym(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Dt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Dt||(Dt={}));function Ym(t){return"storage/"+t}function Qv(){const t="An unknown error occurred, please check the error payload for server response.";return new Ot(Dt.UNKNOWN,t)}function wj(t){return new Ot(Dt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Tj(t){return new Ot(Dt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function xj(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ot(Dt.UNAUTHENTICATED,t)}function Aj(){return new Ot(Dt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Sj(t){return new Ot(Dt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Rj(){return new Ot(Dt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Cj(){return new Ot(Dt.CANCELED,"User canceled the upload/download.")}function Nj(t){return new Ot(Dt.INVALID_URL,"Invalid URL '"+t+"'.")}function Ij(t){return new Ot(Dt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Dj(){return new Ot(Dt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yS+"' property when initializing the app?")}function Oj(){return new Ot(Dt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Mj(){return new Ot(Dt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function kj(t){return new Ot(Dt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Cg(t){return new Ot(Dt.INVALID_ARGUMENT,t)}function _S(){return new Ot(Dt.APP_DELETED,"The Firebase app was deleted.")}function jj(t){return new Ot(Dt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rc(t,e){return new Ot(Dt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function $l(t){throw new Ot(Dt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=lr.makeFromUrl(e,n)}catch{return new lr(e,"")}if(r.path==="")return r;throw Ij(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const s="(/(.*))?$",o=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function h(O){O.path_=decodeURIComponent(O.path)}const u="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${u}/b/${i}/o${d}`,"i"),b={bucket:1,path:3},A=n===vS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",w=new RegExp(`^https?://${A}/${i}/${D}`,"i"),C=[{regex:o,indices:l,postModify:a},{regex:m,indices:b,postModify:h},{regex:w,indices:{bucket:1,path:2},postModify:h}];for(let O=0;O<C.length;O++){const U=C[O],N=U.regex.exec(e);if(N){const _=N[U.indices.bucket];let g=N[U.indices.path];g||(g=""),r=new lr(_,g),U.postModify(r);break}}if(r==null)throw Nj(e);return r}}class Pj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(t,e,n){let r=1,i=null,a=null,s=!1,o=0;function l(){return o===2}let h=!1;function u(...D){h||(h=!0,e.apply(null,D))}function f(D){i=setTimeout(()=>{i=null,t(m,l())},D)}function d(){a&&clearTimeout(a)}function m(D,...w){if(h){d();return}if(D){d(),u.call(null,D,...w);return}if(l()||s){d(),u.call(null,D,...w);return}r<64&&(r*=2);let C;o===1?(o=2,C=0):C=(r+Math.random())*1e3,f(C)}let b=!1;function A(D){b||(b=!0,d(),!h&&(i!==null?(D||(o=2),clearTimeout(i),f(0)):D||(o=1)))}return f(0),a=setTimeout(()=>{s=!0,A(!0)},n),A}function Lj(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(t){return t!==void 0}function zj(t){return typeof t=="object"&&!Array.isArray(t)}function Kv(t){return typeof t=="string"||t instanceof String}function oE(t){return Wv()&&t instanceof Blob}function Wv(){return typeof Blob<"u"}function lE(t,e,n,r){if(r<e)throw Cg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Cg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function bS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Rs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Rs||(Rs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,n,r,i,a,s,o,l,h,u,f,d=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=u,this.connectionFactory_=f,this.retry=d,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,A)=>{this.resolve_=b,this.reject_=A,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new gh(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const s=o=>{const l=o.loaded,h=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,h)};this.progressCallback_!==null&&a.addUploadProgressListener(s),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(s),this.pendingConnection_=null;const o=a.getErrorCode()===Rs.NO_ERROR,l=a.getStatus();if(!o||Bj(l,this.additionalRetryCodes_)&&this.retry){const u=a.getErrorCode()===Rs.ABORT;r(!1,new gh(!1,null,u));return}const h=this.successCodes_.indexOf(l)!==-1;r(!0,new gh(h,a))})},n=(r,i)=>{const a=this.resolve_,s=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());Vj(l)?a(l):a()}catch(l){s(l)}else if(o!==null){const l=Qv();l.serverResponse=o.getErrorText(),this.errorCallback_?s(this.errorCallback_(o,l)):s(l)}else if(i.canceled){const l=this.appDelete_?_S():Cj();s(l)}else{const l=Rj();s(l)}};this.canceled_?n(!1,new gh(!1,null,!0)):this.backoffId_=Uj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Lj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Hj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function qj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Gj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function $j(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Yj(t,e,n,r,i,a,s=!0,o=!1){const l=bS(t.urlParams),h=t.url+l,u=Object.assign({},t.headers);return Gj(u,e),Hj(u,n),qj(u,a),$j(u,r),new Fj(h,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Qj(...t){const e=Xj();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Wv())return new Blob(t);throw new Ot(Dt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Kj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(t){if(typeof atob>"u")throw kj("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Xm{constructor(e,n){this.data=e,this.contentType=n||null}}function ES(t,e){switch(t){case Ar.RAW:return new Xm(wS(e));case Ar.BASE64:case Ar.BASE64URL:return new Xm(TS(t,e));case Ar.DATA_URL:return new Xm(Jj(e),eP(e))}throw Qv()}function wS(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,s=t.charCodeAt(++n);r=65536|(a&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Zj(t){let e;try{e=decodeURIComponent(t)}catch{throw Rc(Ar.DATA_URL,"Malformed data URL.")}return wS(e)}function TS(t,e){switch(t){case Ar.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Rc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ar.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Rc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Wj(e)}catch(i){throw i.message.includes("polyfill")?i:Rc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class xS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Rc(Ar.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=tP(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Jj(t){const e=new xS(t);return e.base64?TS(Ar.BASE64,e.rest):Zj(e.rest)}function eP(t){return new xS(t).contentType}function tP(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n){let r=0,i="";oE(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(oE(this.data_)){const r=this.data_,i=Kj(r,e,n);return i===null?null:new va(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new va(r,!0)}}static getBlob(...e){if(Wv()){const n=e.map(r=>r instanceof va?r.data_:r);return new va(Qj.apply(null,n))}else{const n=e.map(s=>Kv(s)?ES(Ar.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(s=>{for(let o=0;o<s.length;o++)i[a++]=s[o]}),new va(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t){let e;try{e=JSON.parse(t)}catch{return null}return zj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function rP(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function SS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(t,e){return e}class kn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||iP}}let vh=null;function aP(t){return!Kv(t)||t.length<2?t:SS(t)}function RS(){if(vh)return vh;const t=[];t.push(new kn("bucket")),t.push(new kn("generation")),t.push(new kn("metageneration")),t.push(new kn("name","fullPath",!0));function e(a,s){return aP(s)}const n=new kn("name");n.xform=e,t.push(n);function r(a,s){return s!==void 0?Number(s):s}const i=new kn("size");return i.xform=r,t.push(i),t.push(new kn("timeCreated")),t.push(new kn("updated")),t.push(new kn("md5Hash",null,!0)),t.push(new kn("cacheControl",null,!0)),t.push(new kn("contentDisposition",null,!0)),t.push(new kn("contentEncoding",null,!0)),t.push(new kn("contentLanguage",null,!0)),t.push(new kn("contentType",null,!0)),t.push(new kn("metadata","customMetadata",!0)),vh=t,vh}function sP(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new lr(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function oP(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const s=n[a];r[s.local]=s.xform(r,e[s.server])}return sP(r,t),r}function CS(t,e,n){const r=AS(e);return r===null?null:oP(t,r,n)}function lP(t,e,n,r){const i=AS(e);if(i===null||!Kv(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const s=encodeURIComponent;return a.split(",").map(h=>{const u=t.bucket,f=t.fullPath,d="/b/"+s(u)+"/o/"+s(f),m=Zv(d,n,r),b=bS({alt:"media",token:h});return m+b})[0]}function cP(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class NS{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(t){if(!t)throw Qv()}function uP(t,e){function n(r,i){const a=CS(t,i,e);return IS(a!==null),a}return n}function hP(t,e){function n(r,i){const a=CS(t,i,e);return IS(a!==null),lP(a,i,t.host,t._protocol)}return n}function DS(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Aj():i=xj():n.getStatus()===402?i=Tj(t.bucket):n.getStatus()===403?i=Sj(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function fP(t){const e=DS(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=wj(t.path)),a.serverResponse=i.serverResponse,a}return n}function dP(t,e,n){const r=e.fullServerUrl(),i=Zv(r,t.host,t._protocol),a="GET",s=t.maxOperationRetryTime,o=new NS(i,a,hP(t,n),s);return o.errorHandler=fP(e),o}function mP(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function pP(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=mP(null,e)),r}function gP(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function o(){let C="";for(let O=0;O<2;O++)C=C+Math.random().toString().slice(2);return C}const l=o();s["Content-Type"]="multipart/related; boundary="+l;const h=pP(e,r,i),u=cP(h,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,d=`\r
--`+l+"--",m=va.getBlob(f,r,d);if(m===null)throw Oj();const b={name:h.fullPath},A=Zv(a,t.host,t._protocol),D="POST",w=t.maxUploadRetryTime,x=new NS(A,D,uP(t,n),w);return x.urlParams=b,x.headers=s,x.body=m.uploadData(),x.errorHandler=DS(e),x}class vP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Rs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Rs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Rs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,a){if(this.sent_)throw $l("cannot .send() more than once");if(Qi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const s in a)a.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,a[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $l("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $l("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $l("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $l("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class yP extends vP{initXhr(){this.xhr_.responseType="text"}}function OS(){return new yP}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n){this._service=e,n instanceof lr?this._location=n:this._location=lr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Us(e,n)}get root(){const e=new lr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return SS(this._location.path)}get storage(){return this._service}get parent(){const e=nP(this._location.path);if(e===null)return null;const n=new lr(this._location.bucket,e);return new Us(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw jj(e)}}function _P(t,e,n){t._throwIfRoot("uploadBytes");const r=gP(t.storage,t._location,RS(),new va(e,!0),n);return t.storage.makeRequestWithTokens(r,OS).then(i=>({metadata:i,ref:t}))}function bP(t,e,n=Ar.RAW,r){t._throwIfRoot("uploadString");const i=ES(n,e),a=Object.assign({},r);return a.contentType==null&&i.contentType!=null&&(a.contentType=i.contentType),_P(t,i.data,a)}function EP(t){t._throwIfRoot("getDownloadURL");const e=dP(t.storage,t._location,RS());return t.storage.makeRequestWithTokens(e,OS).then(n=>{if(n===null)throw Mj();return n})}function wP(t,e){const n=rP(t._location.path,e),r=new lr(t._location.bucket,n);return new Us(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t){return/^[A-Za-z]+:\/\//.test(t)}function xP(t,e){return new Us(t,e)}function MS(t,e){if(t instanceof Jv){const n=t;if(n._bucket==null)throw Dj();const r=new Us(n,n._bucket);return e!=null?MS(r,e):r}else return e!==void 0?wP(t,e):t}function AP(t,e){if(e&&TP(e)){if(t instanceof Jv)return xP(t,e);throw Cg("To use ref(service, url), the first argument must be a Storage instance.")}else return MS(t,e)}function cE(t,e){const n=e==null?void 0:e[yS];return n==null?null:lr.makeFromBucketSpec(n,t)}function SP(t,e,n,r={}){t.host=`${e}:${n}`;const i=Qi(e);i&&(Ed(`https://${t.host}/b`),wd("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:rA(a,t.app.options.projectId))}class Jv{constructor(e,n,r,i,a,s=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=s,this._bucket=null,this._host=vS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=bj,this._maxUploadRetryTime=Ej,this._requests=new Set,i!=null?this._bucket=lr.makeFromBucketSpec(i,this._host):this._bucket=cE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=lr.makeFromBucketSpec(this._url,e):this._bucket=cE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){lE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){lE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Us(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new Pj(_S());{const s=Yj(e,this._appId,r,i,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const uE="@firebase/storage",hE="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="storage";function RP(t,e,n,r){return t=ut(t),bP(t,e,n,r)}function CP(t){return t=ut(t),EP(t)}function NP(t,e){return t=ut(t),AP(t,e)}function IP(t=Td(),e){t=ut(t);const r=Eu(t,kS).getImmediate({identifier:e}),i=W0("storage");return i&&DP(r,...i),r}function DP(t,e,n,r={}){SP(t,e,n,r)}function OP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Jv(n,r,i,e,qs)}function MP(){Ba(new Fi(kS,OP,"PUBLIC").setMultipleInstances(!0)),Sr(uE,hE,""),Sr(uE,hE,"esm2017")}MP();const Qm={apiKey:"AIzaSyBivqXghVKoxfSsJVXxmNi3n2yO1l2U9zU",authDomain:"runica-heros-folio.firebaseapp.com",projectId:"runica-heros-folio",storageBucket:"runica-heros-folio.firebasestorage.app",messagingSenderId:"1092943227692",appId:"1:1092943227692:web:342ed3d5e7c682b7eb9a89",measurementId:"G-GKS7XV7YEW"};let Ro,Ng,Ig,Dg;if(Qm.apiKey&&Qm.projectId)try{Ro=sA(Qm),Ng=eM(Ro),Ig=Jk(Ro,"runica-db"),Dg=IP(Ro),console.log("Firebase initialized successfully.")}catch(t){console.error("Error initializing Firebase. Please check your configuration.",t)}else console.warn("Firebase configuration environment variables are not set. Cloud features are disabled.");const Al=()=>{if(!Ro||!Ng||!Ig||!Dg)throw new Error("Firebase is not initialized. Make sure your environment variables are set.");return{app:Ro,auth:Ng,db:Ig,storage:Dg}};new ti;const kP=t=>{try{const{auth:e}=Al();return F5(e,t)}catch{return t(null),()=>{}}};function jP(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function jS(t,e){return new Promise(function(n,r){let i;return PP(t).then(function(a){try{return i=a,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(s){return r(s)}},r)})}const PP=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const a=new DataView(i);let s=0;if(a.getUint16(s)!==65496)return n("not a valid JPEG");for(s+=2;;){const o=a.getUint16(s);if(o===65498)break;const l=a.getUint16(s+2);if(o===65505&&a.getUint32(s+4)===1165519206){const h=s+10;let u;switch(a.getUint16(h)){case 18761:u=!0;break;case 19789:u=!1;break;default:return n("TIFF header contains invalid endian")}if(a.getUint16(h+2,u)!==42)return n("TIFF header contains invalid version");const f=a.getUint32(h+4,u),d=h+f+2+12*a.getUint16(h+f,u);for(let m=h+f+2;m<d;m+=12)if(a.getUint16(m,u)==274){if(a.getUint16(m+2,u)!==3)return n("Orientation data type is invalid");if(a.getUint32(m+4,u)!==1)return n("Orientation data count is invalid");a.setUint16(m+8,1,u);break}return e(i.slice(s,s+2+l))}s+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var Gf={},UP={get exports(){return Gf},set exports(t){Gf=t}};(function(t){var e,n,r={};UP.exports=r,r.parse=function(i,a){for(var s=r.bin.readUshort,o=r.bin.readUint,l=0,h={},u=new Uint8Array(i),f=u.length-4;o(u,f)!=101010256;)f--;l=f,l+=4;var d=s(u,l+=4);s(u,l+=2);var m=o(u,l+=2),b=o(u,l+=4);l+=4,l=b;for(var A=0;A<d;A++){o(u,l),l+=4,l+=4,l+=4,o(u,l+=4),m=o(u,l+=4);var D=o(u,l+=4),w=s(u,l+=4),x=s(u,l+2),C=s(u,l+4);l+=6;var O=o(u,l+=8);l+=4,l+=w+x+C,r._readLocal(u,O,h,m,D,a)}return h},r._readLocal=function(i,a,s,o,l,h){var u=r.bin.readUshort,f=r.bin.readUint;f(i,a),u(i,a+=4),u(i,a+=2);var d=u(i,a+=2);f(i,a+=2),f(i,a+=4),a+=4;var m=u(i,a+=8),b=u(i,a+=2);a+=2;var A=r.bin.readUTF8(i,a,m);if(a+=m,a+=b,h)s[A]={size:l,csize:o};else{var D=new Uint8Array(i.buffer,a);if(d==0)s[A]=new Uint8Array(D.buffer.slice(a,a+o));else{if(d!=8)throw"unknown compression method: "+d;var w=new Uint8Array(l);r.inflateRaw(D,w),s[A]=w}}},r.inflateRaw=function(i,a){return r.F.inflate(i,a)},r.inflate=function(i,a){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),a)},r.deflate=function(i,a){a==null&&(a={level:6});var s=0,o=new Uint8Array(50+Math.floor(1.1*i.length));o[s]=120,o[s+1]=156,s+=2,s=r.F.deflateRaw(i,o,s,a.level);var l=r.adler(i,0,i.length);return o[s+0]=l>>>24&255,o[s+1]=l>>>16&255,o[s+2]=l>>>8&255,o[s+3]=l>>>0&255,new Uint8Array(o.buffer,0,s+4)},r.deflateRaw=function(i,a){a==null&&(a={level:6});var s=new Uint8Array(50+Math.floor(1.1*i.length)),o=r.F.deflateRaw(i,s,o,a.level);return new Uint8Array(s.buffer,0,o)},r.encode=function(i,a){a==null&&(a=!1);var s=0,o=r.bin.writeUint,l=r.bin.writeUshort,h={};for(var u in i){var f=!r._noNeed(u)&&!a,d=i[u],m=r.crc.crc(d,0,d.length);h[u]={cpr:f,usize:d.length,crc:m,file:f?r.deflateRaw(d):d}}for(var u in h)s+=h[u].file.length+30+46+2*r.bin.sizeUTF8(u);s+=22;var b=new Uint8Array(s),A=0,D=[];for(var u in h){var w=h[u];D.push(A),A=r._writeHeader(b,A,u,w,0)}var x=0,C=A;for(var u in h)w=h[u],D.push(A),A=r._writeHeader(b,A,u,w,1,D[x++]);var O=A-C;return o(b,A,101010256),A+=4,l(b,A+=4,x),l(b,A+=2,x),o(b,A+=2,O),o(b,A+=4,C),A+=4,A+=2,b.buffer},r._noNeed=function(i){var a=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},r._writeHeader=function(i,a,s,o,l,h){var u=r.bin.writeUint,f=r.bin.writeUshort,d=o.file;return u(i,a,l==0?67324752:33639248),a+=4,l==1&&(a+=2),f(i,a,20),f(i,a+=2,0),f(i,a+=2,o.cpr?8:0),u(i,a+=2,0),u(i,a+=4,o.crc),u(i,a+=4,d.length),u(i,a+=4,o.usize),f(i,a+=4,r.bin.sizeUTF8(s)),f(i,a+=2,0),a+=2,l==1&&(a+=2,a+=2,u(i,a+=6,h),a+=4),a+=r.bin.writeUTF8(i,a,s),l==0&&(i.set(d,a),a+=d.length),a},r.crc={table:function(){for(var i=new Uint32Array(256),a=0;a<256;a++){for(var s=a,o=0;o<8;o++)1&s?s=3988292384^s>>>1:s>>>=1;i[a]=s}return i}(),update:function(i,a,s,o){for(var l=0;l<o;l++)i=r.crc.table[255&(i^a[s+l])]^i>>>8;return i},crc:function(i,a,s){return 4294967295^r.crc.update(4294967295,i,a,s)}},r.adler=function(i,a,s){for(var o=1,l=0,h=a,u=a+s;h<u;){for(var f=Math.min(h+5552,u);h<f;)l+=o+=i[h++];o%=65521,l%=65521}return l<<16|o},r.bin={readUshort:function(i,a){return i[a]|i[a+1]<<8},writeUshort:function(i,a,s){i[a]=255&s,i[a+1]=s>>8&255},readUint:function(i,a){return 16777216*i[a+3]+(i[a+2]<<16|i[a+1]<<8|i[a])},writeUint:function(i,a,s){i[a]=255&s,i[a+1]=s>>8&255,i[a+2]=s>>16&255,i[a+3]=s>>24&255},readASCII:function(i,a,s){for(var o="",l=0;l<s;l++)o+=String.fromCharCode(i[a+l]);return o},writeASCII:function(i,a,s){for(var o=0;o<s.length;o++)i[a+o]=s.charCodeAt(o)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,a,s){for(var o,l="",h=0;h<s;h++)l+="%"+r.bin.pad(i[a+h].toString(16));try{o=decodeURIComponent(l)}catch{return r.bin.readASCII(i,a,s)}return o},writeUTF8:function(i,a,s){for(var o=s.length,l=0,h=0;h<o;h++){var u=s.charCodeAt(h);if(!(4294967168&u))i[a+l]=u,l++;else if(!(4294965248&u))i[a+l]=192|u>>6,i[a+l+1]=128|u>>0&63,l+=2;else if(!(4294901760&u))i[a+l]=224|u>>12,i[a+l+1]=128|u>>6&63,i[a+l+2]=128|u>>0&63,l+=3;else{if(4292870144&u)throw"e";i[a+l]=240|u>>18,i[a+l+1]=128|u>>12&63,i[a+l+2]=128|u>>6&63,i[a+l+3]=128|u>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var a=i.length,s=0,o=0;o<a;o++){var l=i.charCodeAt(o);if(!(4294967168&l))s++;else if(!(4294965248&l))s+=2;else if(!(4294901760&l))s+=3;else{if(4292870144&l)throw"e";s+=4}}return s}},r.F={},r.F.deflateRaw=function(i,a,s,o){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],h=r.F.U,u=r.F._goodIndex;r.F._hash;var f=r.F._putsE,d=0,m=s<<3,b=0,A=i.length;if(o==0){for(;d<A;)f(a,m,d+(R=Math.min(65535,A-d))==A?1:0),m=r.F._copyExact(i,d,R,a,m+8),d+=R;return m>>>3}var D=h.lits,w=h.strt,x=h.prev,C=0,O=0,U=0,N=0,_=0,g=0;for(A>2&&(w[g=r.F._hash(i,0)]=0),d=0;d<A;d++){if(_=g,d+1<A-2){g=r.F._hash(i,d+1);var y=d+1&32767;x[y]=w[g],w[g]=y}if(b<=d){(C>14e3||O>26697)&&A-d>100&&(b<d&&(D[C]=d-b,C+=2,b=d),m=r.F._writeBlock(d==A-1||b==A?1:0,D,C,N,i,U,d-U,a,m),C=O=N=0,U=d);var T=0;d<A-2&&(T=r.F._bestMatch(i,d,x,_,Math.min(l[2],A-d),l[3]));var R=T>>>16,I=65535&T;if(T!=0){I=65535&T;var S=u(R=T>>>16,h.of0);h.lhst[257+S]++;var L=u(I,h.df0);h.dhst[L]++,N+=h.exb[S]+h.dxb[L],D[C]=R<<23|d-b,D[C+1]=I<<16|S<<8|L,C+=2,b=d+R}else h.lhst[i[d]]++;O++}}for(U==d&&i.length!=0||(b<d&&(D[C]=d-b,C+=2,b=d),m=r.F._writeBlock(1,D,C,N,i,U,d-U,a,m),C=0,O=0,C=O=N=0,U=d);7&m;)m++;return m>>>3},r.F._bestMatch=function(i,a,s,o,l,h){var u=32767&a,f=s[u],d=u-f+32768&32767;if(f==u||o!=r.F._hash(i,a-d))return 0;for(var m=0,b=0,A=Math.min(32767,a);d<=A&&--h!=0&&f!=u;){if(m==0||i[a+m]==i[a+m-d]){var D=r.F._howLong(i,a,d);if(D>m){if(b=d,(m=D)>=l)break;d+2<D&&(D=d+2);for(var w=0,x=0;x<D-2;x++){var C=a-d+x+32768&32767,O=C-s[C]+32768&32767;O>w&&(w=O,f=C)}}}d+=(u=f)-(f=s[u])+32768&32767}return m<<16|b},r.F._howLong=function(i,a,s){if(i[a]!=i[a-s]||i[a+1]!=i[a+1-s]||i[a+2]!=i[a+2-s])return 0;var o=a,l=Math.min(i.length,a+258);for(a+=3;a<l&&i[a]==i[a-s];)a++;return a-o},r.F._hash=function(i,a){return(i[a]<<8|i[a+1])+(i[a+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,a,s,o,l,h,u,f,d){var m,b,A,D,w,x,C,O,U,N=r.F.U,_=r.F._putsF,g=r.F._putsE;N.lhst[256]++,b=(m=r.F.getTrees())[0],A=m[1],D=m[2],w=m[3],x=m[4],C=m[5],O=m[6],U=m[7];var y=32+(d+3&7?8-(d+3&7):0)+(u<<3),T=o+r.F.contSize(N.fltree,N.lhst)+r.F.contSize(N.fdtree,N.dhst),R=o+r.F.contSize(N.ltree,N.lhst)+r.F.contSize(N.dtree,N.dhst);R+=14+3*C+r.F.contSize(N.itree,N.ihst)+(2*N.ihst[16]+3*N.ihst[17]+7*N.ihst[18]);for(var I=0;I<286;I++)N.lhst[I]=0;for(I=0;I<30;I++)N.dhst[I]=0;for(I=0;I<19;I++)N.ihst[I]=0;var S=y<T&&y<R?0:T<R?1:2;if(_(f,d,i),_(f,d+1,S),d+=3,S==0){for(;7&d;)d++;d=r.F._copyExact(l,h,u,f,d)}else{var L,z;if(S==1&&(L=N.fltree,z=N.fdtree),S==2){r.F.makeCodes(N.ltree,b),r.F.revCodes(N.ltree,b),r.F.makeCodes(N.dtree,A),r.F.revCodes(N.dtree,A),r.F.makeCodes(N.itree,D),r.F.revCodes(N.itree,D),L=N.ltree,z=N.dtree,g(f,d,w-257),g(f,d+=5,x-1),g(f,d+=5,C-4),d+=4;for(var M=0;M<C;M++)g(f,d+3*M,N.itree[1+(N.ordr[M]<<1)]);d+=3*C,d=r.F._codeTiny(O,N.itree,f,d),d=r.F._codeTiny(U,N.itree,f,d)}for(var k=h,H=0;H<s;H+=2){for(var B=a[H],P=B>>>23,K=k+(8388607&B);k<K;)d=r.F._writeLit(l[k++],L,f,d);if(P!=0){var G=a[H+1],J=G>>16,W=G>>8&255,Y=255&G;g(f,d=r.F._writeLit(257+W,L,f,d),P-N.of0[W]),d+=N.exb[W],_(f,d=r.F._writeLit(Y,z,f,d),J-N.df0[Y]),d+=N.dxb[Y],k+=P}}d=r.F._writeLit(256,L,f,d)}return d},r.F._copyExact=function(i,a,s,o,l){var h=l>>>3;return o[h]=s,o[h+1]=s>>>8,o[h+2]=255-o[h],o[h+3]=255-o[h+1],h+=4,o.set(new Uint8Array(i.buffer,a,s),h),l+(s+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,a=r.F._hufTree(i.lhst,i.ltree,15),s=r.F._hufTree(i.dhst,i.dtree,15),o=[],l=r.F._lenCodes(i.ltree,o),h=[],u=r.F._lenCodes(i.dtree,h),f=0;f<o.length;f+=2)i.ihst[o[f]]++;for(f=0;f<h.length;f+=2)i.ihst[h[f]]++;for(var d=r.F._hufTree(i.ihst,i.itree,7),m=19;m>4&&i.itree[1+(i.ordr[m-1]<<1)]==0;)m--;return[a,s,d,l,u,m,o,h]},r.F.getSecond=function(i){for(var a=[],s=0;s<i.length;s+=2)a.push(i[s+1]);return a},r.F.nonZero=function(i){for(var a="",s=0;s<i.length;s+=2)i[s+1]!=0&&(a+=(s>>1)+",");return a},r.F.contSize=function(i,a){for(var s=0,o=0;o<a.length;o++)s+=a[o]*i[1+(o<<1)];return s},r.F._codeTiny=function(i,a,s,o){for(var l=0;l<i.length;l+=2){var h=i[l],u=i[l+1];o=r.F._writeLit(h,a,s,o);var f=h==16?2:h==17?3:7;h>15&&(r.F._putsE(s,o,u,f),o+=f)}return o},r.F._lenCodes=function(i,a){for(var s=i.length;s!=2&&i[s-1]==0;)s-=2;for(var o=0;o<s;o+=2){var l=i[o+1],h=o+3<s?i[o+3]:-1,u=o+5<s?i[o+5]:-1,f=o==0?-1:i[o-1];if(l==0&&h==l&&u==l){for(var d=o+5;d+2<s&&i[d+2]==l;)d+=2;(m=Math.min(d+1-o>>>1,138))<11?a.push(17,m-3):a.push(18,m-11),o+=2*m-2}else if(l==f&&h==l&&u==l){for(d=o+5;d+2<s&&i[d+2]==l;)d+=2;var m=Math.min(d+1-o>>>1,6);a.push(16,m-3),o+=2*m-2}else a.push(l,0)}return s>>>1},r.F._hufTree=function(i,a,s){var o=[],l=i.length,h=a.length,u=0;for(u=0;u<h;u+=2)a[u]=0,a[u+1]=0;for(u=0;u<l;u++)i[u]!=0&&o.push({lit:u,f:i[u]});var f=o.length,d=o.slice(0);if(f==0)return 0;if(f==1){var m=o[0].lit;return d=m==0?1:0,a[1+(m<<1)]=1,a[1+(d<<1)]=1,1}o.sort(function(O,U){return O.f-U.f});var b=o[0],A=o[1],D=0,w=1,x=2;for(o[0]={lit:-1,f:b.f+A.f,l:b,r:A,d:0};w!=f-1;)b=D!=w&&(x==f||o[D].f<o[x].f)?o[D++]:o[x++],A=D!=w&&(x==f||o[D].f<o[x].f)?o[D++]:o[x++],o[w++]={lit:-1,f:b.f+A.f,l:b,r:A};var C=r.F.setDepth(o[w-1],0);for(C>s&&(r.F.restrictDepth(d,s,C),C=s),u=0;u<f;u++)a[1+(d[u].lit<<1)]=d[u].d;return C},r.F.setDepth=function(i,a){return i.lit!=-1?(i.d=a,a):Math.max(r.F.setDepth(i.l,a+1),r.F.setDepth(i.r,a+1))},r.F.restrictDepth=function(i,a,s){var o=0,l=1<<s-a,h=0;for(i.sort(function(f,d){return d.d==f.d?f.f-d.f:d.d-f.d}),o=0;o<i.length&&i[o].d>a;o++){var u=i[o].d;i[o].d=a,h+=l-(1<<s-u)}for(h>>>=s-a;h>0;)(u=i[o].d)<a?(i[o].d++,h-=1<<a-u-1):o++;for(;o>=0;o--)i[o].d==a&&h<0&&(i[o].d--,h++);h!=0&&console.log("debt left")},r.F._goodIndex=function(i,a){var s=0;return a[16|s]<=i&&(s|=16),a[8|s]<=i&&(s|=8),a[4|s]<=i&&(s|=4),a[2|s]<=i&&(s|=2),a[1|s]<=i&&(s|=1),s},r.F._writeLit=function(i,a,s,o){return r.F._putsF(s,o,a[i<<1]),o+a[1+(i<<1)]},r.F.inflate=function(i,a){var s=Uint8Array;if(i[0]==3&&i[1]==0)return a||new s(0);var o=r.F,l=o._bitsF,h=o._bitsE,u=o._decodeTiny,f=o.makeCodes,d=o.codes2map,m=o._get17,b=o.U,A=a==null;A&&(a=new s(i.length>>>2<<3));for(var D,w,x=0,C=0,O=0,U=0,N=0,_=0,g=0,y=0,T=0;x==0;)if(x=l(i,T,1),C=l(i,T+1,2),T+=3,C!=0){if(A&&(a=r.F._check(a,y+(1<<17))),C==1&&(D=b.flmap,w=b.fdmap,_=511,g=31),C==2){O=h(i,T,5)+257,U=h(i,T+5,5)+1,N=h(i,T+10,4)+4,T+=14;for(var R=0;R<38;R+=2)b.itree[R]=0,b.itree[R+1]=0;var I=1;for(R=0;R<N;R++){var S=h(i,T+3*R,3);b.itree[1+(b.ordr[R]<<1)]=S,S>I&&(I=S)}T+=3*N,f(b.itree,I),d(b.itree,I,b.imap),D=b.lmap,w=b.dmap,T=u(b.imap,(1<<I)-1,O+U,i,T,b.ttree);var L=o._copyOut(b.ttree,0,O,b.ltree);_=(1<<L)-1;var z=o._copyOut(b.ttree,O,U,b.dtree);g=(1<<z)-1,f(b.ltree,L),d(b.ltree,L,D),f(b.dtree,z),d(b.dtree,z,w)}for(;;){var M=D[m(i,T)&_];T+=15&M;var k=M>>>4;if(!(k>>>8))a[y++]=k;else{if(k==256)break;var H=y+k-254;if(k>264){var B=b.ldef[k-257];H=y+(B>>>3)+h(i,T,7&B),T+=7&B}var P=w[m(i,T)&g];T+=15&P;var K=P>>>4,G=b.ddef[K],J=(G>>>4)+l(i,T,15&G);for(T+=15&G,A&&(a=r.F._check(a,y+(1<<17)));y<H;)a[y]=a[y++-J],a[y]=a[y++-J],a[y]=a[y++-J],a[y]=a[y++-J];y=H}}}else{7&T&&(T+=8-(7&T));var W=4+(T>>>3),Y=i[W-4]|i[W-3]<<8;A&&(a=r.F._check(a,y+Y)),a.set(new s(i.buffer,i.byteOffset+W,Y),y),T=W+Y<<3,y+=Y}return a.length==y?a:a.slice(0,y)},r.F._check=function(i,a){var s=i.length;if(a<=s)return i;var o=new Uint8Array(Math.max(s<<1,a));return o.set(i,0),o},r.F._decodeTiny=function(i,a,s,o,l,h){for(var u=r.F._bitsE,f=r.F._get17,d=0;d<s;){var m=i[f(o,l)&a];l+=15&m;var b=m>>>4;if(b<=15)h[d]=b,d++;else{var A=0,D=0;b==16?(D=3+u(o,l,2),l+=2,A=h[d-1]):b==17?(D=3+u(o,l,3),l+=3):b==18&&(D=11+u(o,l,7),l+=7);for(var w=d+D;d<w;)h[d]=A,d++}}return l},r.F._copyOut=function(i,a,s,o){for(var l=0,h=0,u=o.length>>>1;h<s;){var f=i[h+a];o[h<<1]=0,o[1+(h<<1)]=f,f>l&&(l=f),h++}for(;h<u;)o[h<<1]=0,o[1+(h<<1)]=0,h++;return l},r.F.makeCodes=function(i,a){for(var s,o,l,h,u=r.F.U,f=i.length,d=u.bl_count,m=0;m<=a;m++)d[m]=0;for(m=1;m<f;m+=2)d[i[m]]++;var b=u.next_code;for(s=0,d[0]=0,o=1;o<=a;o++)s=s+d[o-1]<<1,b[o]=s;for(l=0;l<f;l+=2)(h=i[l+1])!=0&&(i[l]=b[h],b[h]++)},r.F.codes2map=function(i,a,s){for(var o=i.length,l=r.F.U.rev15,h=0;h<o;h+=2)if(i[h+1]!=0)for(var u=h>>1,f=i[h+1],d=u<<4|f,m=a-f,b=i[h]<<m,A=b+(1<<m);b!=A;)s[l[b]>>>15-a]=d,b++},r.F.revCodes=function(i,a){for(var s=r.F.U.rev15,o=15-a,l=0;l<i.length;l+=2){var h=i[l]<<a-i[l+1];i[l]=s[h]>>>o}},r.F._putsE=function(i,a,s){s<<=7&a;var o=a>>>3;i[o]|=s,i[o+1]|=s>>>8},r.F._putsF=function(i,a,s){s<<=7&a;var o=a>>>3;i[o]|=s,i[o+1]|=s>>>8,i[o+2]|=s>>>16},r.F._bitsE=function(i,a,s){return(i[a>>>3]|i[1+(a>>>3)]<<8)>>>(7&a)&(1<<s)-1},r.F._bitsF=function(i,a,s){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)&(1<<s)-1},r.F._get17=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)},r.F._get25=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16|i[3+(a>>>3)]<<24)>>>(7&a)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,a=0;a<32768;a++){var s=a;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,i.rev15[a]=(s>>>16|s<<16)>>>17}function o(l,h,u){for(;h--!=0;)l.push(0,u)}for(a=0;a<32;a++)i.ldef[a]=i.of0[a]<<3|i.exb[a],i.ddef[a]=i.df0[a]<<4|i.dxb[a];o(i.fltree,144,8),o(i.fltree,112,9),o(i.fltree,24,7),o(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),o(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),o(i.itree,19,0),o(i.ltree,286,0),o(i.dtree,30,0),o(i.ttree,320,0)}()})();var LP=jP({__proto__:null,default:Gf},[Gf]);const Pr=function(){var t={nextZero(u,f){for(;u[f]!=0;)f++;return f},readUshort:(u,f)=>u[f]<<8|u[f+1],writeUshort(u,f,d){u[f]=d>>8&255,u[f+1]=255&d},readUint:(u,f)=>16777216*u[f]+(u[f+1]<<16|u[f+2]<<8|u[f+3]),writeUint(u,f,d){u[f]=d>>24&255,u[f+1]=d>>16&255,u[f+2]=d>>8&255,u[f+3]=255&d},readASCII(u,f,d){let m="";for(let b=0;b<d;b++)m+=String.fromCharCode(u[f+b]);return m},writeASCII(u,f,d){for(let m=0;m<d.length;m++)u[f+m]=d.charCodeAt(m)},readBytes(u,f,d){const m=[];for(let b=0;b<d;b++)m.push(u[f+b]);return m},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,f,d){let m,b="";for(let A=0;A<d;A++)b+=`%${t.pad(u[f+A].toString(16))}`;try{m=decodeURIComponent(b)}catch{return t.readASCII(u,f,d)}return m}};function e(u,f,d,m){const b=f*d,A=a(m),D=Math.ceil(f*A/8),w=new Uint8Array(4*b),x=new Uint32Array(w.buffer),{ctype:C}=m,{depth:O}=m,U=t.readUshort;if(C==6){const B=b<<2;if(O==8)for(var N=0;N<B;N+=4)w[N]=u[N],w[N+1]=u[N+1],w[N+2]=u[N+2],w[N+3]=u[N+3];if(O==16)for(N=0;N<B;N++)w[N]=u[N<<1]}else if(C==2){const B=m.tabs.tRNS;if(B==null){if(O==8)for(N=0;N<b;N++){var _=3*N;x[N]=255<<24|u[_+2]<<16|u[_+1]<<8|u[_]}if(O==16)for(N=0;N<b;N++)_=6*N,x[N]=255<<24|u[_+4]<<16|u[_+2]<<8|u[_]}else{var g=B[0];const P=B[1],K=B[2];if(O==8)for(N=0;N<b;N++){var y=N<<2;_=3*N,x[N]=255<<24|u[_+2]<<16|u[_+1]<<8|u[_],u[_]==g&&u[_+1]==P&&u[_+2]==K&&(w[y+3]=0)}if(O==16)for(N=0;N<b;N++)y=N<<2,_=6*N,x[N]=255<<24|u[_+4]<<16|u[_+2]<<8|u[_],U(u,_)==g&&U(u,_+2)==P&&U(u,_+4)==K&&(w[y+3]=0)}}else if(C==3){const B=m.tabs.PLTE,P=m.tabs.tRNS,K=P?P.length:0;if(O==1)for(var T=0;T<d;T++){var R=T*D,I=T*f;for(N=0;N<f;N++){y=I+N<<2;var S=3*(L=u[R+(N>>3)]>>7-((7&N)<<0)&1);w[y]=B[S],w[y+1]=B[S+1],w[y+2]=B[S+2],w[y+3]=L<K?P[L]:255}}if(O==2)for(T=0;T<d;T++)for(R=T*D,I=T*f,N=0;N<f;N++)y=I+N<<2,S=3*(L=u[R+(N>>2)]>>6-((3&N)<<1)&3),w[y]=B[S],w[y+1]=B[S+1],w[y+2]=B[S+2],w[y+3]=L<K?P[L]:255;if(O==4)for(T=0;T<d;T++)for(R=T*D,I=T*f,N=0;N<f;N++)y=I+N<<2,S=3*(L=u[R+(N>>1)]>>4-((1&N)<<2)&15),w[y]=B[S],w[y+1]=B[S+1],w[y+2]=B[S+2],w[y+3]=L<K?P[L]:255;if(O==8)for(N=0;N<b;N++){var L;y=N<<2,S=3*(L=u[N]),w[y]=B[S],w[y+1]=B[S+1],w[y+2]=B[S+2],w[y+3]=L<K?P[L]:255}}else if(C==4){if(O==8)for(N=0;N<b;N++){y=N<<2;var z=u[M=N<<1];w[y]=z,w[y+1]=z,w[y+2]=z,w[y+3]=u[M+1]}if(O==16)for(N=0;N<b;N++){var M;y=N<<2,z=u[M=N<<2],w[y]=z,w[y+1]=z,w[y+2]=z,w[y+3]=u[M+2]}}else if(C==0)for(g=m.tabs.tRNS?m.tabs.tRNS:-1,T=0;T<d;T++){const B=T*D,P=T*f;if(O==1)for(var k=0;k<f;k++){var H=(z=255*(u[B+(k>>>3)]>>>7-(7&k)&1))==255*g?0:255;x[P+k]=H<<24|z<<16|z<<8|z}else if(O==2)for(k=0;k<f;k++)H=(z=85*(u[B+(k>>>2)]>>>6-((3&k)<<1)&3))==85*g?0:255,x[P+k]=H<<24|z<<16|z<<8|z;else if(O==4)for(k=0;k<f;k++)H=(z=17*(u[B+(k>>>1)]>>>4-((1&k)<<2)&15))==17*g?0:255,x[P+k]=H<<24|z<<16|z<<8|z;else if(O==8)for(k=0;k<f;k++)H=(z=u[B+k])==g?0:255,x[P+k]=H<<24|z<<16|z<<8|z;else if(O==16)for(k=0;k<f;k++)z=u[B+(k<<1)],H=U(u,B+(k<<1))==g?0:255,x[P+k]=H<<24|z<<16|z<<8|z}return w}function n(u,f,d,m){const b=a(u),A=Math.ceil(d*b/8),D=new Uint8Array((A+1+u.interlace)*m);return f=u.tabs.CgBI?i(f,D):r(f,D),u.interlace==0?f=s(f,u,0,d,m):u.interlace==1&&(f=function(x,C){const O=C.width,U=C.height,N=a(C),_=N>>3,g=Math.ceil(O*N/8),y=new Uint8Array(U*g);let T=0;const R=[0,0,4,0,2,0,1],I=[0,4,0,2,0,1,0],S=[8,8,8,4,4,2,2],L=[8,8,4,4,2,2,1];let z=0;for(;z<7;){const k=S[z],H=L[z];let B=0,P=0,K=R[z];for(;K<U;)K+=k,P++;let G=I[z];for(;G<O;)G+=H,B++;const J=Math.ceil(B*N/8);s(x,C,T,B,P);let W=0,Y=R[z];for(;Y<U;){let se=I[z],Te=T+W*J<<3;for(;se<O;){var M;if(N==1&&(M=(M=x[Te>>3])>>7-(7&Te)&1,y[Y*g+(se>>3)]|=M<<7-((7&se)<<0)),N==2&&(M=(M=x[Te>>3])>>6-(7&Te)&3,y[Y*g+(se>>2)]|=M<<6-((3&se)<<1)),N==4&&(M=(M=x[Te>>3])>>4-(7&Te)&15,y[Y*g+(se>>1)]|=M<<4-((1&se)<<2)),N>=8){const je=Y*g+se*_;for(let Pe=0;Pe<_;Pe++)y[je+Pe]=x[(Te>>3)+Pe]}Te+=N,se+=H}W++,Y+=k}B*P!=0&&(T+=P*(1+J)),z+=1}return y}(f,u)),f}function r(u,f){return i(new Uint8Array(u.buffer,2,u.length-6),f)}var i=function(){const u={H:{}};return u.H.N=function(f,d){const m=Uint8Array;let b,A,D=0,w=0,x=0,C=0,O=0,U=0,N=0,_=0,g=0;if(f[0]==3&&f[1]==0)return d||new m(0);const y=u.H,T=y.b,R=y.e,I=y.R,S=y.n,L=y.A,z=y.Z,M=y.m,k=d==null;for(k&&(d=new m(f.length>>>2<<5));D==0;)if(D=T(f,g,1),w=T(f,g+1,2),g+=3,w!=0){if(k&&(d=u.H.W(d,_+(1<<17))),w==1&&(b=M.J,A=M.h,U=511,N=31),w==2){x=R(f,g,5)+257,C=R(f,g+5,5)+1,O=R(f,g+10,4)+4,g+=14;let B=1;for(var H=0;H<38;H+=2)M.Q[H]=0,M.Q[H+1]=0;for(H=0;H<O;H++){const G=R(f,g+3*H,3);M.Q[1+(M.X[H]<<1)]=G,G>B&&(B=G)}g+=3*O,S(M.Q,B),L(M.Q,B,M.u),b=M.w,A=M.d,g=I(M.u,(1<<B)-1,x+C,f,g,M.v);const P=y.V(M.v,0,x,M.C);U=(1<<P)-1;const K=y.V(M.v,x,C,M.D);N=(1<<K)-1,S(M.C,P),L(M.C,P,b),S(M.D,K),L(M.D,K,A)}for(;;){const B=b[z(f,g)&U];g+=15&B;const P=B>>>4;if(!(P>>>8))d[_++]=P;else{if(P==256)break;{let K=_+P-254;if(P>264){const se=M.q[P-257];K=_+(se>>>3)+R(f,g,7&se),g+=7&se}const G=A[z(f,g)&N];g+=15&G;const J=G>>>4,W=M.c[J],Y=(W>>>4)+T(f,g,15&W);for(g+=15&W;_<K;)d[_]=d[_++-Y],d[_]=d[_++-Y],d[_]=d[_++-Y],d[_]=d[_++-Y];_=K}}}}else{7&g&&(g+=8-(7&g));const B=4+(g>>>3),P=f[B-4]|f[B-3]<<8;k&&(d=u.H.W(d,_+P)),d.set(new m(f.buffer,f.byteOffset+B,P),_),g=B+P<<3,_+=P}return d.length==_?d:d.slice(0,_)},u.H.W=function(f,d){const m=f.length;if(d<=m)return f;const b=new Uint8Array(m<<1);return b.set(f,0),b},u.H.R=function(f,d,m,b,A,D){const w=u.H.e,x=u.H.Z;let C=0;for(;C<m;){const O=f[x(b,A)&d];A+=15&O;const U=O>>>4;if(U<=15)D[C]=U,C++;else{let N=0,_=0;U==16?(_=3+w(b,A,2),A+=2,N=D[C-1]):U==17?(_=3+w(b,A,3),A+=3):U==18&&(_=11+w(b,A,7),A+=7);const g=C+_;for(;C<g;)D[C]=N,C++}}return A},u.H.V=function(f,d,m,b){let A=0,D=0;const w=b.length>>>1;for(;D<m;){const x=f[D+d];b[D<<1]=0,b[1+(D<<1)]=x,x>A&&(A=x),D++}for(;D<w;)b[D<<1]=0,b[1+(D<<1)]=0,D++;return A},u.H.n=function(f,d){const m=u.H.m,b=f.length;let A,D,w,x;const C=m.j;for(var O=0;O<=d;O++)C[O]=0;for(O=1;O<b;O+=2)C[f[O]]++;const U=m.K;for(A=0,C[0]=0,D=1;D<=d;D++)A=A+C[D-1]<<1,U[D]=A;for(w=0;w<b;w+=2)x=f[w+1],x!=0&&(f[w]=U[x],U[x]++)},u.H.A=function(f,d,m){const b=f.length,A=u.H.m.r;for(let D=0;D<b;D+=2)if(f[D+1]!=0){const w=D>>1,x=f[D+1],C=w<<4|x,O=d-x;let U=f[D]<<O;const N=U+(1<<O);for(;U!=N;)m[A[U]>>>15-d]=C,U++}},u.H.l=function(f,d){const m=u.H.m.r,b=15-d;for(let A=0;A<f.length;A+=2){const D=f[A]<<d-f[A+1];f[A]=m[D]>>>b}},u.H.M=function(f,d,m){m<<=7&d;const b=d>>>3;f[b]|=m,f[b+1]|=m>>>8},u.H.I=function(f,d,m){m<<=7&d;const b=d>>>3;f[b]|=m,f[b+1]|=m>>>8,f[b+2]|=m>>>16},u.H.e=function(f,d,m){return(f[d>>>3]|f[1+(d>>>3)]<<8)>>>(7&d)&(1<<m)-1},u.H.b=function(f,d,m){return(f[d>>>3]|f[1+(d>>>3)]<<8|f[2+(d>>>3)]<<16)>>>(7&d)&(1<<m)-1},u.H.Z=function(f,d){return(f[d>>>3]|f[1+(d>>>3)]<<8|f[2+(d>>>3)]<<16)>>>(7&d)},u.H.i=function(f,d){return(f[d>>>3]|f[1+(d>>>3)]<<8|f[2+(d>>>3)]<<16|f[3+(d>>>3)]<<24)>>>(7&d)},u.H.m=function(){const f=Uint16Array,d=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new d(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new d(286),Y:new d(30),a:new d(19),t:new d(15e3),k:new f(65536),g:new f(32768)}}(),function(){const f=u.H.m;for(var d=0;d<32768;d++){let b=d;b=(2863311530&b)>>>1|(1431655765&b)<<1,b=(3435973836&b)>>>2|(858993459&b)<<2,b=(4042322160&b)>>>4|(252645135&b)<<4,b=(4278255360&b)>>>8|(16711935&b)<<8,f.r[d]=(b>>>16|b<<16)>>>17}function m(b,A,D){for(;A--!=0;)b.push(0,D)}for(d=0;d<32;d++)f.q[d]=f.S[d]<<3|f.T[d],f.c[d]=f.p[d]<<4|f.z[d];m(f._,144,8),m(f._,112,9),m(f._,24,7),m(f._,8,8),u.H.n(f._,9),u.H.A(f._,9,f.J),u.H.l(f._,9),m(f.$,32,5),u.H.n(f.$,5),u.H.A(f.$,5,f.h),u.H.l(f.$,5),m(f.Q,19,0),m(f.C,286,0),m(f.D,30,0),m(f.v,320,0)}(),u.H.N}();function a(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function s(u,f,d,m,b){let A=a(f);const D=Math.ceil(m*A/8);let w,x;A=Math.ceil(A/8);let C=u[d],O=0;if(C>1&&(u[d]=[0,0,1][C-2]),C==3)for(O=A;O<D;O++)u[O+1]=u[O+1]+(u[O+1-A]>>>1)&255;for(let U=0;U<b;U++)if(w=d+U*D,x=w+U+1,C=u[x-1],O=0,C==0)for(;O<D;O++)u[w+O]=u[x+O];else if(C==1){for(;O<A;O++)u[w+O]=u[x+O];for(;O<D;O++)u[w+O]=u[x+O]+u[w+O-A]}else if(C==2)for(;O<D;O++)u[w+O]=u[x+O]+u[w+O-D];else if(C==3){for(;O<A;O++)u[w+O]=u[x+O]+(u[w+O-D]>>>1);for(;O<D;O++)u[w+O]=u[x+O]+(u[w+O-D]+u[w+O-A]>>>1)}else{for(;O<A;O++)u[w+O]=u[x+O]+o(0,u[w+O-D],0);for(;O<D;O++)u[w+O]=u[x+O]+o(u[w+O-A],u[w+O-D],u[w+O-A-D])}return u}function o(u,f,d){const m=u+f-d,b=m-u,A=m-f,D=m-d;return b*b<=A*A&&b*b<=D*D?u:A*A<=D*D?f:d}function l(u,f,d){d.width=t.readUint(u,f),f+=4,d.height=t.readUint(u,f),f+=4,d.depth=u[f],f++,d.ctype=u[f],f++,d.compress=u[f],f++,d.filter=u[f],f++,d.interlace=u[f],f++}function h(u,f,d,m,b,A,D,w,x){const C=Math.min(f,b),O=Math.min(d,A);let U=0,N=0;for(let z=0;z<O;z++)for(let M=0;M<C;M++)if(D>=0&&w>=0?(U=z*f+M<<2,N=(w+z)*b+D+M<<2):(U=(-w+z)*f-D+M<<2,N=z*b+M<<2),x==0)m[N]=u[U],m[N+1]=u[U+1],m[N+2]=u[U+2],m[N+3]=u[U+3];else if(x==1){var _=u[U+3]*.00392156862745098,g=u[U]*_,y=u[U+1]*_,T=u[U+2]*_,R=m[N+3]*(1/255),I=m[N]*R,S=m[N+1]*R,L=m[N+2]*R;const k=1-_,H=_+R*k,B=H==0?0:1/H;m[N+3]=255*H,m[N+0]=(g+I*k)*B,m[N+1]=(y+S*k)*B,m[N+2]=(T+L*k)*B}else if(x==2)_=u[U+3],g=u[U],y=u[U+1],T=u[U+2],R=m[N+3],I=m[N],S=m[N+1],L=m[N+2],_==R&&g==I&&y==S&&T==L?(m[N]=0,m[N+1]=0,m[N+2]=0,m[N+3]=0):(m[N]=g,m[N+1]=y,m[N+2]=T,m[N+3]=_);else if(x==3){if(_=u[U+3],g=u[U],y=u[U+1],T=u[U+2],R=m[N+3],I=m[N],S=m[N+1],L=m[N+2],_==R&&g==I&&y==S&&T==L)continue;if(_<220&&R>20)return!1}return!0}return{decode:function(f){const d=new Uint8Array(f);let m=8;const b=t,A=b.readUshort,D=b.readUint,w={tabs:{},frames:[]},x=new Uint8Array(d.length);let C,O=0,U=0;const N=[137,80,78,71,13,10,26,10];for(var _=0;_<8;_++)if(d[_]!=N[_])throw"The input is not a PNG file!";for(;m<d.length;){const z=b.readUint(d,m);m+=4;const M=b.readASCII(d,m,4);if(m+=4,M=="IHDR")l(d,m,w);else if(M=="iCCP"){for(var g=m;d[g]!=0;)g++;b.readASCII(d,m,g-m),d[g+1];const k=d.slice(g+2,m+z);let H=null;try{H=r(k)}catch{H=i(k)}w.tabs[M]=H}else if(M=="CgBI")w.tabs[M]=d.slice(m,m+4);else if(M=="IDAT"){for(_=0;_<z;_++)x[O+_]=d[m+_];O+=z}else if(M=="acTL")w.tabs[M]={num_frames:D(d,m),num_plays:D(d,m+4)},C=new Uint8Array(d.length);else if(M=="fcTL"){U!=0&&((L=w.frames[w.frames.length-1]).data=n(w,C.slice(0,U),L.rect.width,L.rect.height),U=0);const k={x:D(d,m+12),y:D(d,m+16),width:D(d,m+4),height:D(d,m+8)};let H=A(d,m+22);H=A(d,m+20)/(H==0?100:H);const B={rect:k,delay:Math.round(1e3*H),dispose:d[m+24],blend:d[m+25]};w.frames.push(B)}else if(M=="fdAT"){for(_=0;_<z-4;_++)C[U+_]=d[m+_+4];U+=z-4}else if(M=="pHYs")w.tabs[M]=[b.readUint(d,m),b.readUint(d,m+4),d[m+8]];else if(M=="cHRM")for(w.tabs[M]=[],_=0;_<8;_++)w.tabs[M].push(b.readUint(d,m+4*_));else if(M=="tEXt"||M=="zTXt"){w.tabs[M]==null&&(w.tabs[M]={});var y=b.nextZero(d,m),T=b.readASCII(d,m,y-m),R=m+z-y-1;if(M=="tEXt")S=b.readASCII(d,y+1,R);else{var I=r(d.slice(y+2,y+2+R));S=b.readUTF8(I,0,I.length)}w.tabs[M][T]=S}else if(M=="iTXt"){w.tabs[M]==null&&(w.tabs[M]={}),y=0,g=m,y=b.nextZero(d,g),T=b.readASCII(d,g,y-g);const k=d[g=y+1];var S;d[g+1],g+=2,y=b.nextZero(d,g),b.readASCII(d,g,y-g),g=y+1,y=b.nextZero(d,g),b.readUTF8(d,g,y-g),R=z-((g=y+1)-m),k==0?S=b.readUTF8(d,g,R):(I=r(d.slice(g,g+R)),S=b.readUTF8(I,0,I.length)),w.tabs[M][T]=S}else if(M=="PLTE")w.tabs[M]=b.readBytes(d,m,z);else if(M=="hIST"){const k=w.tabs.PLTE.length/3;for(w.tabs[M]=[],_=0;_<k;_++)w.tabs[M].push(A(d,m+2*_))}else if(M=="tRNS")w.ctype==3?w.tabs[M]=b.readBytes(d,m,z):w.ctype==0?w.tabs[M]=A(d,m):w.ctype==2&&(w.tabs[M]=[A(d,m),A(d,m+2),A(d,m+4)]);else if(M=="gAMA")w.tabs[M]=b.readUint(d,m)/1e5;else if(M=="sRGB")w.tabs[M]=d[m];else if(M=="bKGD")w.ctype==0||w.ctype==4?w.tabs[M]=[A(d,m)]:w.ctype==2||w.ctype==6?w.tabs[M]=[A(d,m),A(d,m+2),A(d,m+4)]:w.ctype==3&&(w.tabs[M]=d[m]);else if(M=="IEND")break;m+=z,b.readUint(d,m),m+=4}var L;return U!=0&&((L=w.frames[w.frames.length-1]).data=n(w,C.slice(0,U),L.rect.width,L.rect.height)),w.data=n(w,x,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(f){const d=f.width,m=f.height;if(f.tabs.acTL==null)return[e(f.data,d,m,f).buffer];const b=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const A=d*m*4,D=new Uint8Array(A),w=new Uint8Array(A),x=new Uint8Array(A);for(let O=0;O<f.frames.length;O++){const U=f.frames[O],N=U.rect.x,_=U.rect.y,g=U.rect.width,y=U.rect.height,T=e(U.data,g,y,f);if(O!=0)for(var C=0;C<A;C++)x[C]=D[C];if(U.blend==0?h(T,g,y,D,d,m,N,_,0):U.blend==1&&h(T,g,y,D,d,m,N,_,1),b.push(D.buffer.slice(0)),U.dispose!=0){if(U.dispose==1)h(w,g,y,D,d,m,N,_,0);else if(U.dispose==2)for(C=0;C<A;C++)D[C]=x[C]}}return b},_paeth:o,_copyTile:h,_bin:t}}();(function(){const{_copyTile:t}=Pr,{_bin:e}=Pr,n=Pr._paeth;var r={table:function(){const g=new Uint32Array(256);for(let y=0;y<256;y++){let T=y;for(let R=0;R<8;R++)1&T?T=3988292384^T>>>1:T>>>=1;g[y]=T}return g}(),update(g,y,T,R){for(let I=0;I<R;I++)g=r.table[255&(g^y[T+I])]^g>>>8;return g},crc:(g,y,T)=>4294967295^r.update(4294967295,g,y,T)};function i(g,y,T,R){y[T]+=g[0]*R>>4,y[T+1]+=g[1]*R>>4,y[T+2]+=g[2]*R>>4,y[T+3]+=g[3]*R>>4}function a(g){return Math.max(0,Math.min(255,g))}function s(g,y){const T=g[0]-y[0],R=g[1]-y[1],I=g[2]-y[2],S=g[3]-y[3];return T*T+R*R+I*I+S*S}function o(g,y,T,R,I,S,L){L==null&&(L=1);const z=R.length,M=[];for(var k=0;k<z;k++){const Y=R[k];M.push([Y>>>0&255,Y>>>8&255,Y>>>16&255,Y>>>24&255])}for(k=0;k<z;k++){let Y=4294967295;for(var H=0,B=0;B<z;B++){var P=s(M[k],M[B]);B!=k&&P<Y&&(Y=P,H=B)}}const K=new Uint32Array(I.buffer),G=new Int16Array(y*T*4),J=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(k=0;k<J.length;k++)J[k]=255*((J[k]+.5)/16-.5);for(let Y=0;Y<T;Y++)for(let se=0;se<y;se++){var W;k=4*(Y*y+se),L!=2?W=[a(g[k]+G[k]),a(g[k+1]+G[k+1]),a(g[k+2]+G[k+2]),a(g[k+3]+G[k+3])]:(P=J[4*(3&Y)+(3&se)],W=[a(g[k]+P),a(g[k+1]+P),a(g[k+2]+P),a(g[k+3]+P)]),H=0;let Te=16777215;for(B=0;B<z;B++){const ze=s(W,M[B]);ze<Te&&(Te=ze,H=B)}const je=M[H],Pe=[W[0]-je[0],W[1]-je[1],W[2]-je[2],W[3]-je[3]];L==1&&(se!=y-1&&i(Pe,G,k+4,7),Y!=T-1&&(se!=0&&i(Pe,G,k+4*y-4,3),i(Pe,G,k+4*y,5),se!=y-1&&i(Pe,G,k+4*y+4,1))),S[k>>2]=H,K[k>>2]=R[H]}}function l(g,y,T,R,I){I==null&&(I={});const{crc:S}=r,L=e.writeUint,z=e.writeUshort,M=e.writeASCII;let k=8;const H=g.frames.length>1;let B,P=!1,K=33+(H?20:0);if(I.sRGB!=null&&(K+=13),I.pHYs!=null&&(K+=21),I.iCCP!=null&&(B=pako.deflate(I.iCCP),K+=21+B.length+4),g.ctype==3){for(var G=g.plte.length,J=0;J<G;J++)g.plte[J]>>>24!=255&&(P=!0);K+=8+3*G+4+(P?8+1*G+4:0)}for(var W=0;W<g.frames.length;W++)H&&(K+=38),K+=(je=g.frames[W]).cimg.length+12,W!=0&&(K+=4);K+=12;const Y=new Uint8Array(K),se=[137,80,78,71,13,10,26,10];for(J=0;J<8;J++)Y[J]=se[J];if(L(Y,k,13),k+=4,M(Y,k,"IHDR"),k+=4,L(Y,k,y),k+=4,L(Y,k,T),k+=4,Y[k]=g.depth,k++,Y[k]=g.ctype,k++,Y[k]=0,k++,Y[k]=0,k++,Y[k]=0,k++,L(Y,k,S(Y,k-17,17)),k+=4,I.sRGB!=null&&(L(Y,k,1),k+=4,M(Y,k,"sRGB"),k+=4,Y[k]=I.sRGB,k++,L(Y,k,S(Y,k-5,5)),k+=4),I.iCCP!=null){const Pe=13+B.length;L(Y,k,Pe),k+=4,M(Y,k,"iCCP"),k+=4,M(Y,k,"ICC profile"),k+=11,k+=2,Y.set(B,k),k+=B.length,L(Y,k,S(Y,k-(Pe+4),Pe+4)),k+=4}if(I.pHYs!=null&&(L(Y,k,9),k+=4,M(Y,k,"pHYs"),k+=4,L(Y,k,I.pHYs[0]),k+=4,L(Y,k,I.pHYs[1]),k+=4,Y[k]=I.pHYs[2],k++,L(Y,k,S(Y,k-13,13)),k+=4),H&&(L(Y,k,8),k+=4,M(Y,k,"acTL"),k+=4,L(Y,k,g.frames.length),k+=4,L(Y,k,I.loop!=null?I.loop:0),k+=4,L(Y,k,S(Y,k-12,12)),k+=4),g.ctype==3){for(L(Y,k,3*(G=g.plte.length)),k+=4,M(Y,k,"PLTE"),k+=4,J=0;J<G;J++){const Pe=3*J,ze=g.plte[J],We=255&ze,xe=ze>>>8&255,en=ze>>>16&255;Y[k+Pe+0]=We,Y[k+Pe+1]=xe,Y[k+Pe+2]=en}if(k+=3*G,L(Y,k,S(Y,k-3*G-4,3*G+4)),k+=4,P){for(L(Y,k,G),k+=4,M(Y,k,"tRNS"),k+=4,J=0;J<G;J++)Y[k+J]=g.plte[J]>>>24&255;k+=G,L(Y,k,S(Y,k-G-4,G+4)),k+=4}}let Te=0;for(W=0;W<g.frames.length;W++){var je=g.frames[W];H&&(L(Y,k,26),k+=4,M(Y,k,"fcTL"),k+=4,L(Y,k,Te++),k+=4,L(Y,k,je.rect.width),k+=4,L(Y,k,je.rect.height),k+=4,L(Y,k,je.rect.x),k+=4,L(Y,k,je.rect.y),k+=4,z(Y,k,R[W]),k+=2,z(Y,k,1e3),k+=2,Y[k]=je.dispose,k++,Y[k]=je.blend,k++,L(Y,k,S(Y,k-30,30)),k+=4);const Pe=je.cimg;L(Y,k,(G=Pe.length)+(W==0?0:4)),k+=4;const ze=k;M(Y,k,W==0?"IDAT":"fdAT"),k+=4,W!=0&&(L(Y,k,Te++),k+=4),Y.set(Pe,k),k+=G,L(Y,k,S(Y,ze,k-ze)),k+=4}return L(Y,k,0),k+=4,M(Y,k,"IEND"),k+=4,L(Y,k,S(Y,k-4,4)),k+=4,Y.buffer}function h(g,y,T){for(let R=0;R<g.frames.length;R++){const I=g.frames[R];I.rect.width;const S=I.rect.height,L=new Uint8Array(S*I.bpl+S);I.cimg=m(I.img,S,I.bpp,I.bpl,L,y,T)}}function u(g,y,T,R,I){const S=I[0],L=I[1],z=I[2],M=I[3],k=I[4],H=I[5];let B=6,P=8,K=255;for(var G=0;G<g.length;G++){const rt=new Uint8Array(g[G]);for(var J=rt.length,W=0;W<J;W+=4)K&=rt[W+3]}const Y=K!=255,se=function(Je,$e,xt,Mt,ht,hn){const st=[];for(var Re=0;Re<Je.length;Re++){const kt=new Uint8Array(Je[Re]),tn=new Uint32Array(kt.buffer);var Rt;let Bt=0,jt=0,En=$e,Vn=xt,Ki=Mt?1:0;if(Re!=0){const Sl=hn||Mt||Re==1||st[Re-2].dispose!=0?1:2;let $r=0,Yr=1e9;for(let Ir=0;Ir<Sl;Ir++){var et=new Uint8Array(Je[Re-1-Ir]);const Dr=new Uint32Array(Je[Re-1-Ir]);let wn=$e,zn=xt,fn=-1,Xr=-1;for(let On=0;On<xt;On++)for(let nn=0;nn<$e;nn++)tn[qe=On*$e+nn]!=Dr[qe]&&(nn<wn&&(wn=nn),nn>fn&&(fn=nn),On<zn&&(zn=On),On>Xr&&(Xr=On));fn==-1&&(wn=zn=fn=Xr=0),ht&&((1&wn)==1&&wn--,(1&zn)==1&&zn--);const Qr=(fn-wn+1)*(Xr-zn+1);Qr<Yr&&(Yr=Qr,$r=Ir,Bt=wn,jt=zn,En=fn-wn+1,Vn=Xr-zn+1)}et=new Uint8Array(Je[Re-1-$r]),$r==1&&(st[Re-1].dispose=2),Rt=new Uint8Array(En*Vn*4),t(et,$e,xt,Rt,En,Vn,-Bt,-jt,0),Ki=t(kt,$e,xt,Rt,En,Vn,-Bt,-jt,3)?1:0,Ki==1?d(kt,$e,xt,Rt,{x:Bt,y:jt,width:En,height:Vn}):t(kt,$e,xt,Rt,En,Vn,-Bt,-jt,0)}else Rt=kt.slice(0);st.push({rect:{x:Bt,y:jt,width:En,height:Vn},img:Rt,blend:Ki,dispose:0})}if(Mt)for(Re=0;Re<st.length;Re++){if((zt=st[Re]).blend==1)continue;const kt=zt.rect,tn=st[Re-1].rect,Bt=Math.min(kt.x,tn.x),jt=Math.min(kt.y,tn.y),En={x:Bt,y:jt,width:Math.max(kt.x+kt.width,tn.x+tn.width)-Bt,height:Math.max(kt.y+kt.height,tn.y+tn.height)-jt};st[Re-1].dispose=1,Re-1!=0&&f(Je,$e,xt,st,Re-1,En,ht),f(Je,$e,xt,st,Re,En,ht)}let gt=0;if(Je.length!=1)for(var qe=0;qe<st.length;qe++){var zt;gt+=(zt=st[qe]).rect.width*zt.rect.height}return st}(g,y,T,S,L,z),Te={},je=[],Pe=[];if(R!=0){const rt=[];for(W=0;W<se.length;W++)rt.push(se[W].img.buffer);const Je=function(ht){let hn=0;for(var st=0;st<ht.length;st++)hn+=ht[st].byteLength;const Re=new Uint8Array(hn);let Rt=0;for(st=0;st<ht.length;st++){const et=new Uint8Array(ht[st]),gt=et.length;for(let qe=0;qe<gt;qe+=4){let zt=et[qe],kt=et[qe+1],tn=et[qe+2];const Bt=et[qe+3];Bt==0&&(zt=kt=tn=0),Re[Rt+qe]=zt,Re[Rt+qe+1]=kt,Re[Rt+qe+2]=tn,Re[Rt+qe+3]=Bt}Rt+=gt}return Re.buffer}(rt),$e=A(Je,R);for(W=0;W<$e.plte.length;W++)je.push($e.plte[W].est.rgba);let xt=0;for(W=0;W<se.length;W++){const Mt=(We=se[W]).img.length;var ze=new Uint8Array($e.inds.buffer,xt>>2,Mt>>2);Pe.push(ze);const ht=new Uint8Array($e.abuf,xt,Mt);H&&o(We.img,We.rect.width,We.rect.height,je,ht,ze),We.img.set(ht),xt+=Mt}}else for(G=0;G<se.length;G++){var We=se[G];const rt=new Uint32Array(We.img.buffer);var xe=We.rect.width;for(J=rt.length,ze=new Uint8Array(J),Pe.push(ze),W=0;W<J;W++){const Je=rt[W];if(W!=0&&Je==rt[W-1])ze[W]=ze[W-1];else if(W>xe&&Je==rt[W-xe])ze[W]=ze[W-xe];else{let $e=Te[Je];if($e==null&&(Te[Je]=$e=je.length,je.push(Je),je.length>=300))break;ze[W]=$e}}}const en=je.length;for(en<=256&&k==0&&(P=en<=2?1:en<=4?2:en<=16?4:8,P=Math.max(P,M)),G=0;G<se.length;G++){(We=se[G]).rect.x,We.rect.y,xe=We.rect.width;const rt=We.rect.height;let Je=We.img;new Uint32Array(Je.buffer);let $e=4*xe,xt=4;if(en<=256&&k==0){$e=Math.ceil(P*xe/8);var un=new Uint8Array($e*rt);const Mt=Pe[G];for(let ht=0;ht<rt;ht++){W=ht*$e;const hn=ht*xe;if(P==8)for(var Ze=0;Ze<xe;Ze++)un[W+Ze]=Mt[hn+Ze];else if(P==4)for(Ze=0;Ze<xe;Ze++)un[W+(Ze>>1)]|=Mt[hn+Ze]<<4-4*(1&Ze);else if(P==2)for(Ze=0;Ze<xe;Ze++)un[W+(Ze>>2)]|=Mt[hn+Ze]<<6-2*(3&Ze);else if(P==1)for(Ze=0;Ze<xe;Ze++)un[W+(Ze>>3)]|=Mt[hn+Ze]<<7-1*(7&Ze)}Je=un,B=3,xt=1}else if(Y==0&&se.length==1){un=new Uint8Array(xe*rt*3);const Mt=xe*rt;for(W=0;W<Mt;W++){const ht=3*W,hn=4*W;un[ht]=Je[hn],un[ht+1]=Je[hn+1],un[ht+2]=Je[hn+2]}Je=un,B=2,xt=3,$e=3*xe}We.img=Je,We.bpl=$e,We.bpp=xt}return{ctype:B,depth:P,plte:je,frames:se}}function f(g,y,T,R,I,S,L){const z=Uint8Array,M=Uint32Array,k=new z(g[I-1]),H=new M(g[I-1]),B=I+1<g.length?new z(g[I+1]):null,P=new z(g[I]),K=new M(P.buffer);let G=y,J=T,W=-1,Y=-1;for(let Te=0;Te<S.height;Te++)for(let je=0;je<S.width;je++){const Pe=S.x+je,ze=S.y+Te,We=ze*y+Pe,xe=K[We];xe==0||R[I-1].dispose==0&&H[We]==xe&&(B==null||B[4*We+3]!=0)||(Pe<G&&(G=Pe),Pe>W&&(W=Pe),ze<J&&(J=ze),ze>Y&&(Y=ze))}W==-1&&(G=J=W=Y=0),L&&((1&G)==1&&G--,(1&J)==1&&J--),S={x:G,y:J,width:W-G+1,height:Y-J+1};const se=R[I];se.rect=S,se.blend=1,se.img=new Uint8Array(S.width*S.height*4),R[I-1].dispose==0?(t(k,y,T,se.img,S.width,S.height,-S.x,-S.y,0),d(P,y,T,se.img,S)):t(P,y,T,se.img,S.width,S.height,-S.x,-S.y,0)}function d(g,y,T,R,I){t(g,y,T,R,I.width,I.height,-I.x,-I.y,2)}function m(g,y,T,R,I,S,L){const z=[];let M,k=[0,1,2,3,4];S!=-1?k=[S]:(y*R>5e5||T==1)&&(k=[0]),L&&(M={level:0});const H=LP;for(var B=0;B<k.length;B++){for(let G=0;G<y;G++)b(I,g,G,R,T,k[B]);z.push(H.deflate(I,M))}let P,K=1e9;for(B=0;B<z.length;B++)z[B].length<K&&(P=B,K=z[B].length);return z[P]}function b(g,y,T,R,I,S){const L=T*R;let z=L+T;if(g[z]=S,z++,S==0)if(R<500)for(var M=0;M<R;M++)g[z+M]=y[L+M];else g.set(new Uint8Array(y.buffer,L,R),z);else if(S==1){for(M=0;M<I;M++)g[z+M]=y[L+M];for(M=I;M<R;M++)g[z+M]=y[L+M]-y[L+M-I]+256&255}else if(T==0){for(M=0;M<I;M++)g[z+M]=y[L+M];if(S==2)for(M=I;M<R;M++)g[z+M]=y[L+M];if(S==3)for(M=I;M<R;M++)g[z+M]=y[L+M]-(y[L+M-I]>>1)+256&255;if(S==4)for(M=I;M<R;M++)g[z+M]=y[L+M]-n(y[L+M-I],0,0)+256&255}else{if(S==2)for(M=0;M<R;M++)g[z+M]=y[L+M]+256-y[L+M-R]&255;if(S==3){for(M=0;M<I;M++)g[z+M]=y[L+M]+256-(y[L+M-R]>>1)&255;for(M=I;M<R;M++)g[z+M]=y[L+M]+256-(y[L+M-R]+y[L+M-I]>>1)&255}if(S==4){for(M=0;M<I;M++)g[z+M]=y[L+M]+256-n(0,y[L+M-R],0)&255;for(M=I;M<R;M++)g[z+M]=y[L+M]+256-n(y[L+M-I],y[L+M-R],y[L+M-I-R])&255}}}function A(g,y){const T=new Uint8Array(g),R=T.slice(0),I=new Uint32Array(R.buffer),S=D(R,y),L=S[0],z=S[1],M=T.length,k=new Uint8Array(M>>2);let H;if(T.length<2e7)for(var B=0;B<M;B+=4)H=w(L,P=T[B]*(1/255),K=T[B+1]*(1/255),G=T[B+2]*(1/255),J=T[B+3]*(1/255)),k[B>>2]=H.ind,I[B>>2]=H.est.rgba;else for(B=0;B<M;B+=4){var P=T[B]*.00392156862745098,K=T[B+1]*(1/255),G=T[B+2]*(1/255),J=T[B+3]*(1/255);for(H=L;H.left;)H=x(H.est,P,K,G,J)<=0?H.left:H.right;k[B>>2]=H.ind,I[B>>2]=H.est.rgba}return{abuf:R.buffer,inds:k,plte:z}}function D(g,y,T){T==null&&(T=1e-4);const R=new Uint32Array(g.buffer),I={i0:0,i1:g.length,bst:null,est:null,tdst:0,left:null,right:null};I.bst=U(g,I.i0,I.i1),I.est=N(I.bst);const S=[I];for(;S.length<y;){let z=0,M=0;for(var L=0;L<S.length;L++)S[L].est.L>z&&(z=S[L].est.L,M=L);if(z<T)break;const k=S[M],H=C(g,R,k.i0,k.i1,k.est.e,k.est.eMq255);if(k.i0>=H||k.i1<=H){k.est.L=0;continue}const B={i0:k.i0,i1:H,bst:null,est:null,tdst:0,left:null,right:null};B.bst=U(g,B.i0,B.i1),B.est=N(B.bst);const P={i0:H,i1:k.i1,bst:null,est:null,tdst:0,left:null,right:null};for(P.bst={R:[],m:[],N:k.bst.N-B.bst.N},L=0;L<16;L++)P.bst.R[L]=k.bst.R[L]-B.bst.R[L];for(L=0;L<4;L++)P.bst.m[L]=k.bst.m[L]-B.bst.m[L];P.est=N(P.bst),k.left=B,k.right=P,S[M]=B,S.push(P)}for(S.sort((z,M)=>M.bst.N-z.bst.N),L=0;L<S.length;L++)S[L].ind=L;return[I,S]}function w(g,y,T,R,I){if(g.left==null)return g.tdst=function(B,P,K,G,J){const W=P-B[0],Y=K-B[1],se=G-B[2],Te=J-B[3];return W*W+Y*Y+se*se+Te*Te}(g.est.q,y,T,R,I),g;const S=x(g.est,y,T,R,I);let L=g.left,z=g.right;S>0&&(L=g.right,z=g.left);const M=w(L,y,T,R,I);if(M.tdst<=S*S)return M;const k=w(z,y,T,R,I);return k.tdst<M.tdst?k:M}function x(g,y,T,R,I){const{e:S}=g;return S[0]*y+S[1]*T+S[2]*R+S[3]*I-g.eMq}function C(g,y,T,R,I,S){for(R-=4;T<R;){for(;O(g,T,I)<=S;)T+=4;for(;O(g,R,I)>S;)R-=4;if(T>=R)break;const L=y[T>>2];y[T>>2]=y[R>>2],y[R>>2]=L,T+=4,R-=4}for(;O(g,T,I)>S;)T-=4;return T+4}function O(g,y,T){return g[y]*T[0]+g[y+1]*T[1]+g[y+2]*T[2]+g[y+3]*T[3]}function U(g,y,T){const R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=[0,0,0,0],S=T-y>>2;for(let L=y;L<T;L+=4){const z=g[L]*.00392156862745098,M=g[L+1]*(1/255),k=g[L+2]*(1/255),H=g[L+3]*(1/255);I[0]+=z,I[1]+=M,I[2]+=k,I[3]+=H,R[0]+=z*z,R[1]+=z*M,R[2]+=z*k,R[3]+=z*H,R[5]+=M*M,R[6]+=M*k,R[7]+=M*H,R[10]+=k*k,R[11]+=k*H,R[15]+=H*H}return R[4]=R[1],R[8]=R[2],R[9]=R[6],R[12]=R[3],R[13]=R[7],R[14]=R[11],{R,m:I,N:S}}function N(g){const{R:y}=g,{m:T}=g,{N:R}=g,I=T[0],S=T[1],L=T[2],z=T[3],M=R==0?0:1/R,k=[y[0]-I*I*M,y[1]-I*S*M,y[2]-I*L*M,y[3]-I*z*M,y[4]-S*I*M,y[5]-S*S*M,y[6]-S*L*M,y[7]-S*z*M,y[8]-L*I*M,y[9]-L*S*M,y[10]-L*L*M,y[11]-L*z*M,y[12]-z*I*M,y[13]-z*S*M,y[14]-z*L*M,y[15]-z*z*M],H=k,B=_;let P=[Math.random(),Math.random(),Math.random(),Math.random()],K=0,G=0;if(R!=0)for(let W=0;W<16&&(P=B.multVec(H,P),G=Math.sqrt(B.dot(P,P)),P=B.sml(1/G,P),!(W!=0&&Math.abs(G-K)<1e-9));W++)K=G;const J=[I*M,S*M,L*M,z*M];return{Cov:k,q:J,e:P,L:K,eMq255:B.dot(B.sml(255,J),P),eMq:B.dot(P,J),rgba:(Math.round(255*J[3])<<24|Math.round(255*J[2])<<16|Math.round(255*J[1])<<8|Math.round(255*J[0])<<0)>>>0}}var _={multVec:(g,y)=>[g[0]*y[0]+g[1]*y[1]+g[2]*y[2]+g[3]*y[3],g[4]*y[0]+g[5]*y[1]+g[6]*y[2]+g[7]*y[3],g[8]*y[0]+g[9]*y[1]+g[10]*y[2]+g[11]*y[3],g[12]*y[0]+g[13]*y[1]+g[14]*y[2]+g[15]*y[3]],dot:(g,y)=>g[0]*y[0]+g[1]*y[1]+g[2]*y[2]+g[3]*y[3],sml:(g,y)=>[g*y[0],g*y[1],g*y[2],g*y[3]]};Pr.encode=function(y,T,R,I,S,L,z){I==null&&(I=0),z==null&&(z=!1);const M=u(y,T,R,I,[!1,!1,!1,0,z,!1]);return h(M,-1),l(M,T,R,S,L)},Pr.encodeLL=function(y,T,R,I,S,L,z,M){const k={ctype:0+(I==1?0:2)+(S==0?0:4),depth:L,frames:[]},H=(I+S)*L,B=H*T;for(let P=0;P<y.length;P++)k.frames.push({rect:{x:0,y:0,width:T,height:R},img:new Uint8Array(y[P]),blend:0,dispose:1,bpp:Math.ceil(H/8),bpl:Math.ceil(B/8)});return h(k,0,!0),l(k,T,R,z,M)},Pr.encode.compress=u,Pr.encode.dither=o,Pr.quantize=A,Pr.quantize.getKDtree=D,Pr.quantize.getNearest=w})();const PS={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,a=t.getContext("2d").getImageData(0,0,n,r),s=new Uint32Array(a.data.buffer),o=(32*n+31)/32<<2,l=o*r,h=122+l,u=new ArrayBuffer(h),f=new DataView(u),d=1<<20;let m,b,A,D,w=d,x=0,C=0,O=0;function U(g){f.setUint16(C,g,!0),C+=2}function N(g){f.setUint32(C,g,!0),C+=4}function _(g){C+=g}U(19778),N(h),_(4),N(122),N(108),N(n),N(-r>>>0),U(1),U(32),N(3),N(l),N(2835),N(2835),_(8),N(16711680),N(65280),N(255),N(4278190080),N(1466527264),function g(){for(;x<r&&w>0;){for(D=122+x*o,m=0;m<i;)w--,b=s[O++],A=b>>>24,f.setUint32(D+m,b<<8|A),m+=4;x++}O<s.length?(w=d,setTimeout(g,PS._dly)):e(u)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var Xn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},VP={[Xn.CHROME]:16384,[Xn.FIREFOX]:11180,[Xn.DESKTOP_SAFARI]:16384,[Xn.IE]:8192,[Xn.IOS]:4096,[Xn.ETC]:8192};const ey=typeof window<"u",US=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,$f=ey&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),zP=(ey||US)&&($f&&$f.getOriginalSymbol(window,"File")||typeof File<"u"&&File),LS=(ey||US)&&($f&&$f.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function ty(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),a=i[0].match(/:(.*?);/)[1],s=globalThis.atob(i[1]);let o=s.length;const l=new Uint8Array(o);for(;o--;)l[o]=s.charCodeAt(o);const h=new Blob([l],{type:a});h.name=e,h.lastModified=n,r(h)})}function VS(t){return new Promise((e,n)=>{const r=new LS;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function zS(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function gs(){if(gs.cachedResult!==void 0)return gs.cachedResult;let t=Xn.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=Xn.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=Xn.IOS:/Safari/i.test(e)?t=Xn.DESKTOP_SAFARI:/Firefox/i.test(e)?t=Xn.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=Xn.IE),gs.cachedResult=t,gs.cachedResult}function BS(t,e){const n=gs(),r=VP[n];let i=t,a=e,s=i*a;const o=i>a?a/i:i/a;for(;s>r*r;){const l=(r+i)/2,h=(r+a)/2;l<h?(a=h,i=h*o):(a=l*o,i=l),s=i*a}return{width:i,height:a}}function qd(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function FS(t,e){const{width:n,height:r}=BS(t.width,t.height),[i,a]=qd(n,r);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,i.width,i.height)),a.drawImage(t,0,0,i.width,i.height),i}function qh(){return qh.cachedResult!==void 0||(qh.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),qh.cachedResult}function Yf(t,e={}){return new Promise(function(n,r){let i,a;var s=function(){try{return a=FS(i,e.fileType||t.type),n([i,a])}catch(l){return r(l)}},o=function(l){try{var h=function(u){try{throw u}catch(f){return r(f)}};try{let u;return VS(t).then(function(f){try{return u=f,zS(u).then(function(d){try{return i=d,function(){try{return s()}catch(m){return r(m)}}()}catch(m){return h(m)}},h)}catch(d){return h(d)}},h)}catch(u){h(u)}}catch(u){return r(u)}};try{if(qh()||[Xn.DESKTOP_SAFARI,Xn.MOBILE_SAFARI].includes(gs()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return i=l,s()}catch{return o()}},o)}catch{o()}})}function Xf(t,e,n,r,i=1){return new Promise(function(a,s){let o;if(e==="image/png"){let f,d,m;return f=t.getContext("2d"),{data:d}=f.getImageData(0,0,t.width,t.height),m=Pr.encode([d.buffer],t.width,t.height,4096*i),o=new Blob([m],{type:e}),o.name=n,o.lastModified=r,l.call(this)}{let f=function(){return l.call(this)};var h=f;if(e==="image/bmp")return new Promise(d=>PS.toBlob(t,d)).then((function(d){try{return o=d,o.name=n,o.lastModified=r,f.call(this)}catch(m){return s(m)}}).bind(this),s);{let d=function(){return f.call(this)};var u=d;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(m){try{return o=m,o.name=n,o.lastModified=r,d.call(this)}catch(b){return s(b)}}).bind(this),s);{let m;return m=t.toDataURL(e,i),ty(m,n,r).then((function(b){try{return o=b,d.call(this)}catch(A){return s(A)}}).bind(this),s)}}}function l(){return a(o)}})}function Jr(t){t.width=0,t.height=0}function Co(){return new Promise(function(t,e){let n,r,i,a;return Co.cachedResult!==void 0?t(Co.cachedResult):ty("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return n=s,Yf(n).then(function(o){try{return r=o[1],Xf(r,n.type,n.name,n.lastModified).then(function(l){try{return i=l,Jr(r),Yf(i).then(function(h){try{return a=h[0],Co.cachedResult=a.width===1&&a.height===2,t(Co.cachedResult)}catch(u){return e(u)}},e)}catch(h){return e(h)}},e)}catch(l){return e(l)}},e)}catch(o){return e(o)}},e)})}function HS(t){return new Promise((e,n)=>{const r=new LS;r.onload=i=>{const a=new DataView(i.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const s=a.byteLength;let o=2;for(;o<s;){if(a.getUint16(o+2,!1)<=8)return e(-1);const l=a.getUint16(o,!1);if(o+=2,l==65505){if(a.getUint32(o+=2,!1)!=1165519206)return e(-1);const h=a.getUint16(o+=6,!1)==18761;o+=a.getUint32(o+4,h);const u=a.getUint16(o,h);o+=2;for(let f=0;f<u;f++)if(a.getUint16(o+12*f,h)==274)return e(a.getUint16(o+12*f+8,h))}else{if((65280&l)!=65280)break;o+=a.getUint16(o,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function qS(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let a,s=t;return isFinite(i)&&(n>i||r>i)&&([s,a]=qd(n,r),n>r?(s.width=i,s.height=r/n*i):(s.width=n/r*i,s.height=i),a.drawImage(t,0,0,s.width,s.height),Jr(t)),s}function GS(t,e){const{width:n}=t,{height:r}=t,[i,a]=qd(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:a.transform(-1,0,0,1,n,0);break;case 3:a.transform(-1,0,0,-1,n,r);break;case 4:a.transform(1,0,0,-1,0,r);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,r,0);break;case 7:a.transform(0,-1,-1,0,r,n);break;case 8:a.transform(0,-1,1,0,0,n)}return a.drawImage(t,0,0,n,r),Jr(t),i}function fE(t,e,n=0){return new Promise(function(r,i){let a,s,o,l,h,u,f,d,m,b,A,D,w,x,C,O,U,N,_,g;function y(R=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=R,e.onProgress(Math.min(a,100))}function T(R){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(R,a),100),e.onProgress(a)}return a=n,s=e.maxIteration||10,o=1024*e.maxSizeMB*1024,y(),Yf(t,e).then((function(R){try{return[,l]=R,y(),h=qS(l,e),y(),new Promise(function(I,S){var L;if(!(L=e.exifOrientation))return HS(t).then((function(M){try{return L=M,z.call(this)}catch(k){return S(k)}}).bind(this),S);function z(){return I(L)}return z.call(this)}).then((function(I){try{return u=I,y(),Co().then((function(S){try{return f=S?h:GS(h,u),y(),d=e.initialQuality||1,m=e.fileType||t.type,Xf(f,m,t.name,t.lastModified,d).then((function(L){try{{let H=function(){if(s--&&(C>o||C>w)){let P,K;return P=g?.95*_.width:_.width,K=g?.95*_.height:_.height,[U,N]=qd(P,K),N.drawImage(_,0,0,P,K),d*=m==="image/png"?.85:.95,Xf(U,m,t.name,t.lastModified,d).then(function(G){try{return O=G,Jr(_),_=U,C=O.size,T(Math.min(99,Math.floor((x-C)/(x-o)*100))),H}catch(J){return i(J)}},i)}return[1]},B=function(){return Jr(_),Jr(U),Jr(h),Jr(f),Jr(l),T(100),r(O)};var M=H,k=B;if(b=L,y(),A=b.size>o,D=b.size>t.size,!A&&!D)return T(100),r(b);var z;return w=t.size,x=b.size,C=x,_=f,g=!e.alwaysKeepResolution&&A,(z=(function(P){for(;P;){if(P.then)return void P.then(z,i);try{if(P.pop){if(P.length)return P.pop()?B.call(this):P;P=H}else P=P.call(this)}catch(K){return i(K)}}}).bind(this))(H)}}catch(H){return i(H)}}).bind(this),i)}catch(L){return i(L)}}).bind(this),i)}catch(S){return i(S)}}).bind(this),i)}catch(I){return i(I)}}).bind(this),i)})}const BP=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Km;function FP(t,e){return new Promise((n,r)=>{Km||(Km=function(s){const o=[];return o.push(s),URL.createObjectURL(new Blob(o))}(BP));const i=new Worker(Km);i.addEventListener("message",function(s){if(e.signal&&e.signal.aborted)i.terminate();else if(s.data.progress===void 0){if(s.data.error)return r(new Error(s.data.error)),void i.terminate();n(s.data.file),i.terminate()}else e.onProgress(s.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function Sn(t,e){return new Promise(function(n,r){let i,a,s,o,l,h;if(i={...e},s=0,{onProgress:o}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=m=>{s=m,typeof o=="function"&&o(s)},!(t instanceof Blob||t instanceof zP))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(h=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||h)return fE(t,i).then((function(m){try{return a=m,d.call(this)}catch(b){return r(b)}}).bind(this),r);var u=(function(){try{return d.call(this)}catch(m){return r(m)}}).bind(this),f=function(m){try{return fE(t,i).then(function(b){try{return a=b,u()}catch(A){return r(A)}},r)}catch(b){return r(b)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",FP(t,i).then(function(m){try{return a=m,u()}catch{return f()}},f)}catch{f()}function d(){try{a.name=t.name,a.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(a=jS(t,a))}catch{}return n(a)}})}Sn.getDataUrlFromFile=VS,Sn.getFilefromDataUrl=ty,Sn.loadImage=zS,Sn.drawImageInCanvas=FS,Sn.drawFileInCanvas=Yf,Sn.canvasToFile=Xf,Sn.getExifOrientation=HS,Sn.handleMaxWidthOrHeight=qS,Sn.followExifOrientation=GS,Sn.cleanupCanvasMemory=Jr,Sn.isAutoOrientationInBrowser=Co,Sn.approximateBelowMaximumCanvasSizeOfBrowser=BS,Sn.copyExifWithoutOrientation=jS,Sn.getBrowserName=gs,Sn.version="2.0.2";const dE=async(t,e,n)=>{const{storage:r}=Al(),i=NP(r,`users/${e}/character-portraits/${n}`);return await RP(i,t,Ar.DATA_URL),CP(i)},HP=t=>Math.ceil(t/4)+1,Og=t=>Math.floor((t-10)/2),qP=t=>[{name:"Acrobatics",ability:"dexterity",proficient:!1,expertise:!1},{name:"Animal Handling",ability:"wisdom",proficient:!1,expertise:!1},{name:"Arcana",ability:"intelligence",proficient:!1,expertise:!1},{name:"Athletics",ability:"strength",proficient:!1,expertise:!1},{name:"Deception",ability:"charisma",proficient:!1,expertise:!1},{name:"History",ability:"intelligence",proficient:!1,expertise:!1},{name:"Insight",ability:"wisdom",proficient:!1,expertise:!1},{name:"Intimidation",ability:"charisma",proficient:!1,expertise:!1},{name:"Investigation",ability:"intelligence",proficient:!1,expertise:!1},{name:"Medicine",ability:"wisdom",proficient:!1,expertise:!1},{name:"Nature",ability:"intelligence",proficient:!1,expertise:!1},{name:"Perception",ability:"wisdom",proficient:!1,expertise:!1},{name:"Performance",ability:"charisma",proficient:!1,expertise:!1},{name:"Persuasion",ability:"charisma",proficient:!1,expertise:!1},{name:"Religion",ability:"intelligence",proficient:!1,expertise:!1},{name:"Sleight of Hand",ability:"dexterity",proficient:!1,expertise:!1},{name:"Stealth",ability:"dexterity",proficient:!1,expertise:!1},{name:"Survival",ability:"wisdom",proficient:!1,expertise:!1}],Jc=()=>{const t={strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10};return{id:`new_${Date.now()}`,lastUpdated:Date.now(),name:"",class:"",subclass:"",level:1,race:"",alignment:"",background:"",playerName:"",experiencePoints:0,abilityScores:t,inspiration:0,proficiencyBonus:HP(1),savingThrows:{strength:{proficient:!1},dexterity:{proficient:!1},constitution:{proficient:!1},intelligence:{proficient:!1},wisdom:{proficient:!1},charisma:{proficient:!1}},skills:qP(),unarmoredDefense:{base:10,abilities:["dexterity"]},initiative:Og(t.dexterity),speed:30,hp:{max:10,current:10,temporary:0},hitDice:{total:"1d8",used:0},deathSaves:{successes:0,failures:0},personalityTraits:"",ideals:"",bonds:"",flaws:"",languages:"Common",attacks:[],currency:{cp:0,sp:0,ep:0,gp:0,pp:0},equipment:[],featuresAndTraits:[],notes:"",dmNotes:"",spellcastingAbility:"",spells:[],spellSlots:{1:{max:0,used:0},2:{max:0,used:0},3:{max:0,used:0},4:{max:0,used:0},5:{max:0,used:0},6:{max:0,used:0},7:{max:0,used:0},8:{max:0,used:0},9:{max:0,used:0}},customResources:[],imageUrl:""}},$S=t=>{var a,s;if(!t)return 10;const e=Og(t.abilityScores.dexterity);let n=0;const r=(a=t.equipment)==null?void 0:a.find(o=>o.equipped&&["light","medium","heavy"].includes(o.armorType||"")),i=(s=t.equipment)==null?void 0:s.find(o=>o.equipped&&o.armorType==="shield");if(r){const o=r.armorClass||0;switch(r.armorType){case"light":n=o+e;break;case"medium":n=o+Math.min(2,e);break;case"heavy":n=o;break}}else{const o=t.unarmoredDefense||{base:10,abilities:[]};let l=o.base;o.abilities.forEach(h=>{l+=Og(t.abilityScores[h])}),n=l}return i&&(n+=i.armorClass||2),n},YS="runica-characters",Mu=()=>{try{const t=localStorage.getItem(YS);return t?JSON.parse(t).map(e=>({...Jc(),...e})):[]}catch(t){return console.error("Error reading from local storage",t),[]}},Qf=t=>{try{localStorage.setItem(YS,JSON.stringify(t))}catch(e){console.error("Error saving to local storage",e)}},ny=()=>{try{const{db:t,auth:e}=Al();return e.currentUser?Zk(t,"users",e.currentUser.uid,"characters"):null}catch{return null}},ry=t=>{const e=ny();return e?iS(e,t):null},GP=t=>{const e=ny();return e?vj(uj(e),n=>{const r=n.docs.map(i=>i.data());t(r)}):(t(Mu()),()=>{})},XS=async t=>{if(t==="new")return Jc();const e=ry(t);if(e){const n=await dj(e);return n.exists()?n.data():null}else return Mu().find(n=>n.id===t)||null},QS=async t=>{const e={...t,lastUpdated:Date.now()},n=ry(e.id);if(n)await pj(n,e);else{const r=Mu(),i=r.findIndex(a=>a.id===e.id);i>-1?r[i]=e:r.push(e),Qf(r)}return e},KS=async t=>{const e=ry(t);if(e)await gj(e);else{const n=Mu();Qf(n.filter(r=>r.id!==t))}},$P=async()=>{let t,e;try{({db:t,auth:e}=Al())}catch{return}if(!e.currentUser||!dE)return;const n=Mu();if(n.length===0||!window.confirm("You have local characters saved on this device. Do you want to move them to your account? This will merge them with any existing characters on your account."))return;const r=ny();if(!r)return;const i=_j(t),s=(await mj(r)).docs.map(l=>l.data());let o=0;for(const l of n){const h=s.find(u=>u.id===l.id);if(!h||l.lastUpdated>(h.lastUpdated||0)){const u={...l};if(u.imageUrl&&u.imageUrl.startsWith("data:image"))try{const d=e.currentUser.uid;u.imageUrl=await dE(u.imageUrl,d,u.id)}catch(d){console.error(`Failed to upload image for character ${u.name}. It will be saved with the local data URL.`,d),u.imageUrl=""}const f=iS(r,l.id);i.set(f,u),o++}}if(o>0)try{await i.commit(),alert(`${o} character(s) migrated to your account.`),Qf([])}catch(l){console.error("Failed to migrate characters:",l),alert("There was an error migrating your characters. They remain on this device for now.")}else alert("No characters needed to be migrated. Your cloud data is up to date."),Qf([])},WS=$.createContext({currentUser:null,loading:!0}),ZS=()=>$.useContext(WS),YP=({children:t})=>{const[e,n]=$.useState(null),[r,i]=$.useState(!0);$.useEffect(()=>kP(async l=>{n(l),l&&(await l.getIdToken(),await $P()),i(!1)}),[]);const a={currentUser:e,loading:r};return p.jsx(WS.Provider,{value:a,children:t})},XP=()=>Al(),QP=()=>{const{currentUser:t}=ZS(),e=$.useMemo(()=>{try{return XP()}catch(i){return console.warn("Firebase non disponibile, le funzionalità di autenticazione sono disabilitate.",i),null}},[]),n=async()=>{if(!e)return;const i=new ti;try{await cO(e.auth,i)}catch(a){console.error("Errore durante il sign-in:",a)}},r=async()=>{if(e)try{await H5(e.auth)}catch(i){console.error("Errore durante il sign-out:",i)}};return t?p.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("img",{src:t.photoURL||"",alt:"User",className:"w-9 h-9 rounded-full"}),p.jsx("span",{className:"text-zinc-300 hidden sm:inline",children:t.displayName||t.email})]}),p.jsxs("button",{onClick:r,className:"flex items-center justify-center bg-zinc-700 hover:bg-zinc-600 rounded-md text-white transition-colors h-9 w-9 sm:w-auto sm:px-4 disabled:bg-zinc-600 disabled:cursor-not-allowed",title:"Sign Out",disabled:!e,children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),p.jsx("span",{className:"hidden sm:inline sm:ml-2",children:"Sign Out"})]})]}):p.jsxs("button",{onClick:n,className:"flex items-center justify-center bg-amber-600 hover:bg-amber-500 rounded-md text-white font-bold transition-colors h-9 w-9 sm:w-auto sm:px-4 sm:gap-2 disabled:bg-zinc-600 disabled:cursor-not-allowed",title:"Sign in",disabled:!e,children:[p.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M22.56,12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26,1.37-1.04,2.53-2.21,3.31v2.77h3.57c2.08-1.92,3.28-4.74,3.28-8.09Z"}),p.jsx("path",{d:"M12,23c2.97,0,5.46-.98,7.28-2.66l-3.57-2.77c-.98.66-2.23,1.06-3.71,1.06-2.86,0-5.29-1.93-6.16-4.53H2.18v2.84C3.99,20.53,7.7,23,12,23Z"}),p.jsx("path",{d:"M5.84,14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43,8.55,1,10.22,1,12s.43,3.45,1.18,4.93l3.66-2.84Z"}),p.jsx("path",{d:"M12,5.38c1.62,0,3.06.56,4.21,1.64l3.15-3.15C17.45,2.09,14.97,1,12,1,7.7,1,3.99,3.47,2.18,7.07l3.66,2.84c.87-2.6,3.3-4.53,6.16-4.53Z"})]}),p.jsx("span",{className:"hidden sm:inline",children:"Sign in"})]})},KP=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),iy=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),WP=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),ZP=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.5 21.75l-.398-1.188a3.375 3.375 0 00-2.924-2.924l-1.188-.398 1.188-.398a3.375 3.375 0 002.924-2.924l.398-1.188.398 1.188a3.375 3.375 0 002.924 2.924l1.188.398-1.188.398a3.375 3.375 0 00-2.924 2.924z"})}),JS=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})}),JP=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),Xs=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.134H8.09a2.09 2.09 0 00-2.09 2.134v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),Qs=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),eR=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),eU=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),tU=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),nU=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14.25a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5zM12 18a6.75 6.75 0 00-6.75-6.75H4.5A2.25 2.25 0 002.25 14.25v4.5A2.25 2.25 0 004.5 21h15A2.25 2.25 0 0021.75 18v-4.5A6.75 6.75 0 0012 18zm9-7.5h-3m1.5-1.5v3m0-3v3"})}),ku=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m6-6H6"})}),rU=()=>{const[t,e]=$.useState(null),[n,r]=$.useState(!1);$.useEffect(()=>{const a=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s="standalone"in window.navigator&&window.navigator.standalone;r(a&&!s);const o=l=>{l.preventDefault(),e(l)};return window.addEventListener("beforeinstallprompt",o),()=>{window.removeEventListener("beforeinstallprompt",o)}},[]);const i=async()=>{t&&(await t.prompt(),e(null))};return p.jsx("header",{className:"group bg-zinc-900/80 backdrop-blur-sm sticky top-0 z-50 border-b border-zinc-700/50",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-8",children:p.jsxs("div",{className:"flex justify-between items-center h-12 group-hover:h-16 transition-all duration-300 ease-in-out",children:[p.jsx(yD,{to:"/",className:"text-5xl font-bold text-amber-400 font-norse tracking-wider [text-shadow:0_0_8px_theme(colors.amber.300)]",children:"RUNICA"}),p.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[t&&!n&&p.jsxs("button",{onClick:i,className:"flex items-center justify-center text-sm bg-amber-600 hover:bg-amber-500 h-9 w-9 sm:w-auto sm:px-3 sm:py-2 sm:gap-2 rounded-md text-white transition",title:"Installa Runica sul tuo dispositivo",children:[p.jsx(eU,{className:"w-5 h-5"}),p.jsx("span",{className:"hidden sm:inline",children:"Installa App"})]}),n&&!t&&p.jsxs("div",{className:"flex items-center justify-center text-sm bg-sky-600 h-9 w-9 sm:w-auto sm:px-3 sm:py-2 sm:gap-2 rounded-md text-white",title:"Per installare: tocca l'icona Condividi e poi 'Aggiungi a Home'",children:[p.jsx(tU,{className:"w-5 h-5"}),p.jsx("span",{className:"hidden sm:inline",children:"Installa App"})]}),p.jsx(QP,{})]})]})})})},iU=()=>p.jsxs("div",{className:"min-h-screen bg-zinc-900 text-zinc-200",children:[p.jsx(rU,{}),p.jsx("main",{children:p.jsx(K4,{})}),p.jsx("footer",{className:"text-center text-sm text-zinc-500 py-4",children:p.jsxs("p",{children:["© ",new Date().getFullYear()," RUNICA. All rights reserved."]})})]}),tR=$.createContext(void 0),Ln=()=>{const t=$.useContext(tR);if(!t)throw new Error("useCharacter must be used within a CharacterProvider");return t},Wm=({children:t})=>{const[e,n]=$.useState(null),i={character:e,setCharacter:n,updateCharacter:a=>{n(s=>s?{...s,...a}:null)}};return p.jsx(tR.Provider,{value:i,children:t})},aU=({character:t,onSelect:e,onDelete:n,onEdit:r})=>p.jsxs("div",{onClick:e,className:"bg-zinc-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 hover:shadow-amber-500/20 hover:scale-105 group relative cursor-pointer",role:"button",tabIndex:0,children:[p.jsx("div",{className:"h-32 bg-zinc-700/50 relative",children:t.imageUrl?p.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-600",children:p.jsx(iy,{className:"w-16 h-16"})})}),p.jsxs("div",{className:"p-5",children:[p.jsx("h3",{className:"text-xl font-bold font-cinzel text-amber-400 truncate",children:t.name||"Unnamed Adventurer"}),p.jsxs("p",{className:"text-zinc-400 capitalize text-sm",children:[t.race||"Race"," ",t.class||"Class"," • Level ",t.level]}),p.jsxs("div",{className:"mt-4 flex items-center gap-4 text-sm text-zinc-300 border-t border-zinc-700 pt-4",children:[p.jsxs("div",{className:"flex items-center gap-1.5",title:"Hit Points",children:[p.jsx("span",{className:"font-bold text-red-400",children:"HP"}),p.jsxs("span",{children:[t.hp.current,"/",t.hp.max]})]}),p.jsxs("div",{className:"flex items-center gap-1.5",title:"Armor Class",children:[p.jsx("span",{className:"font-bold text-sky-400",children:"AC"}),p.jsx("span",{children:$S(t)})]})]})]}),p.jsxs("div",{className:"absolute top-3 right-3 flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsx("button",{onClick:r,className:"p-2 rounded-full bg-zinc-700 hover:bg-amber-500 text-zinc-300 hover:text-white transition-colors","aria-label":`Edit ${t.name}`,children:p.jsx(Qs,{className:"w-4 h-4"})}),p.jsx("button",{onClick:n,className:"p-2 rounded-full bg-zinc-700 hover:bg-red-600 text-zinc-300 hover:text-white transition-colors","aria-label":`Delete ${t.name}`,children:p.jsx(Xs,{className:"w-4 h-4"})})]})]}),sU=()=>{const[t,e]=$.useState([]),[n,r]=$.useState(!0),{currentUser:i}=ZS(),a=_d();$.useEffect(()=>{r(!0);const h=GP(u=>{const f=u.map(d=>({...Jc(),...d}));e(f.sort((d,m)=>d.name.localeCompare(m.name))),r(!1)});return()=>h()},[i]);const s=h=>{a(h==="new"?"/character/new":`/character/${h}`)},o=h=>{a(`/character/${h}/edit`)},l=async(h,u)=>{window.confirm(`Are you sure you want to delete ${u}? This cannot be undone.`)&&await KS(h)};return n?p.jsx("div",{className:"flex justify-center items-center h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})}):p.jsxs("div",{className:"p-4 sm:p-8 max-w-7xl mx-auto pt-12",children:[p.jsx("h2",{className:"text-3xl font-cinzel text-center text-zinc-300 mb-8",children:"Your Characters"}),p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsxs("button",{onClick:()=>s("new"),className:"mb-10 flex items-center gap-2 px-6 py-3 bg-amber-600 text-white font-bold rounded-lg shadow-md hover:bg-amber-500 transition-all duration-300 transform hover:scale-105",children:[p.jsx(nU,{className:"w-5 h-5"}),"Create New Character"]}),t.length>0?p.jsx("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(h=>p.jsx(aU,{character:h,onSelect:()=>s(h.id),onDelete:u=>{u.stopPropagation(),l(h.id,h.name)},onEdit:u=>{u.stopPropagation(),o(h.id)}},h.id))}):p.jsxs("div",{className:"text-center w-full max-w-2xl mt-8 py-16 px-6 bg-zinc-800/50 rounded-lg",children:[p.jsx("h2",{className:"text-2xl font-semibold text-zinc-300 font-cinzel",children:"Your adventure awaits!"}),p.jsxs("p",{className:"text-zinc-400 mt-2",children:[i?"You have no characters synced to this account.":"You have no local characters.",p.jsx("br",{}),"Click the button above to forge your first hero."]})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU="type.googleapis.com/google.protobuf.Int64Value",lU="type.googleapis.com/google.protobuf.UInt64Value";function nR(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Kf(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Kf(e));if(typeof t=="function"||typeof t=="object")return nR(t,e=>Kf(e));throw new Error("Data cannot be encoded in JSON: "+t)}function hl(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case oU:case lU:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>hl(e)):typeof t=="function"||typeof t=="object"?nR(t,e=>hl(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Kn extends Gr{constructor(e,n,r){super(`${ay}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Kn.prototype)}}function cU(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Wf(t,e){let n=cU(t),r=n,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!mE[s])return new Kn("internal","internal");n=mE[s],r=s}const o=a.message;typeof o=="string"&&(r=o),i=a.details,i!==void 0&&(i=hl(i))}}catch{}return n==="ok"?null:new Kn(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,sr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i==null||i.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="us-central1",hU=/^data: (.*?)(?:\n|$)/;function fU(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Kn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class dU{constructor(e,n,r,i,a=Mg,s=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new uU(e,n,r,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=Mg}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function mU(t,e,n){const r=Qi(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Ed(t.emulatorOrigin),wd("Functions",!0))}function pU(t,e,n){const r=i=>vU(t,e,i,{});return r.stream=(i,a)=>_U(t,e,i,a),r}async function gU(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let a=null;try{a=await i.json()}catch{}return{status:i.status,json:a}}async function rR(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function vU(t,e,n,r){const i=t._url(e);return yU(t,i,n,r)}async function yU(t,e,n,r){n=Kf(n);const i={data:n},a=await rR(t,r),s=r.timeout||7e4,o=fU(s),l=await Promise.race([gU(e,i,a,t.fetchImpl),o.promise,t.cancelAllRequests]);if(o.cancel(),!l)throw new Kn("cancelled","Firebase Functions instance was deleted.");const h=Wf(l.status,l.json);if(h)throw h;if(!l.json)throw new Kn("internal","Response is not valid JSON object.");let u=l.json.data;if(typeof u>"u"&&(u=l.json.result),typeof u>"u")throw new Kn("internal","Response is missing data field.");return{data:hl(u)}}function _U(t,e,n,r){const i=t._url(e);return bU(t,i,n,r||{})}async function bU(t,e,n,r){var i;n=Kf(n);const a={data:n},s=await rR(t,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:s,signal:r==null?void 0:r.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const A=new Kn("cancelled","Request was cancelled.");return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}const b=Wf(0,null);return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}let l,h;const u=new Promise((m,b)=>{l=m,h=b});(i=r==null?void 0:r.signal)===null||i===void 0||i.addEventListener("abort",()=>{const m=new Kn("cancelled","Request was cancelled.");h(m)});const f=o.body.getReader(),d=EU(f,l,h,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=d.getReader();return{async next(){const{value:b,done:A}=await m.read();return{value:b,done:A}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function EU(t,e,n,r){const i=(s,o)=>{const l=s.match(hU);if(!l)return;const h=l[1];try{const u=JSON.parse(h);if("result"in u){e(hl(u.result));return}if("message"in u){o.enqueue(hl(u.message));return}if("error"in u){const f=Wf(0,u);o.error(f),n(f);return}}catch(u){if(u instanceof Kn){o.error(u),n(u);return}}},a=new TextDecoder;return new ReadableStream({start(s){let o="";return l();async function l(){if(r!=null&&r.aborted){const h=new Kn("cancelled","Request was cancelled");return s.error(h),n(h),Promise.resolve()}try{const{value:h,done:u}=await t.read();if(u){o.trim()&&i(o.trim(),s),s.close();return}if(r!=null&&r.aborted){const d=new Kn("cancelled","Request was cancelled");s.error(d),n(d),await t.cancel();return}o+=a.decode(h,{stream:!0});const f=o.split(`
`);o=f.pop()||"";for(const d of f)d.trim()&&i(d.trim(),s);return l()}catch(h){const u=h instanceof Kn?h:Wf(0,null);s.error(u),n(u)}}},cancel(){return t.cancel()}})}const pE="@firebase/functions",gE="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU="auth-internal",TU="app-check-internal",xU="messaging-internal";function AU(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(wU),s=n.getProvider(xU),o=n.getProvider(TU);return new dU(i,a,s,o,r)};Ba(new Fi(ay,e,"PUBLIC").setMultipleInstances(!0)),Sr(pE,gE,t),Sr(pE,gE,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SU(t=Td(),e=Mg){const r=Eu(ut(t),ay).getImmediate({identifier:e}),i=W0("functions");return i&&RU(r,...i),r}function RU(t,e,n){mU(ut(t),e,n)}function CU(t,e,n){return pU(ut(t),e)}AU();const NU={personalityTraits:"Generazione AI fallita. Impossibile contattare il servizio.",ideals:"Errore.",bonds:"Errore.",flaws:"Errore."},IU=()=>{const{app:t}=Al(),e=SU(t,"europe-west1");return CU(e,"callGemini")},DU=async(t,e)=>{const{name:n,race:r,class:i,background:a,alignment:s}=t,o=`
     Generate personality aspects for a Dungeons & Dragons character.
     Based on the following details:
     - Name: ${n}
     - Race: ${r}
     - Class: ${i}
     - Background: ${a}
     - Alignment: ${s}
     ${e?`
- Additional Theme: "${e}"`:""}

     Return a JSON object with four keys: "personalityTraits", "ideals", "bonds", and "flaws".
     - "personalityTraits": A short paragraph describing the character's general demeanor.
     - "ideals": A sentence describing a core belief.
     - "bonds": A sentence about something or someone the character cares deeply about.
     - "flaws": A sentence describing a significant weakness or fear.
   `;try{console.log("Calling Cloud Function 'callGemini'...");const h=await IU()(o);if(!h.data.success||!h.data.response)throw new Error("La Cloud Function ha riportato un errore: "+h.data.response);const u=h.data.response.trim(),f=JSON.parse(u);return{personalityTraits:f.personalityTraits||"",ideals:f.ideals||"",bonds:f.bonds||"",flaws:f.flaws||""}}catch(l){return console.error("Errore durante la chiamata alla Cloud Function 'callGemini':",l),NU}};/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function vE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vE(Object(n),!0).forEach(function(r){jU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OU(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function aR(t){var e=OU(t,"string");return typeof e=="symbol"?e:e+""}function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function MU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aR(r.key),r)}}function kU(t,e,n){return e&&yE(t.prototype,e),n&&yE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jU(t,e,n){return e=aR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sR(t){return PU(t)||UU(t)||LU(t)||VU()}function PU(t){if(Array.isArray(t))return jg(t)}function UU(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LU(t,e){if(t){if(typeof t=="string")return jg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jg(t,e)}}function jg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function VU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Gd=typeof window<"u"&&typeof window.document<"u",mi=Gd?window:{},sy=Gd&&mi.document.documentElement?"ontouchstart"in mi.document.documentElement:!1,oy=Gd?"PointerEvent"in mi:!1,_t="cropper",ly="all",oR="crop",lR="move",cR="zoom",is="e",as="w",ro="s",aa="n",Yl="ne",Xl="nw",Ql="se",Kl="sw",Pg="".concat(_t,"-crop"),_E="".concat(_t,"-disabled"),Yn="".concat(_t,"-hidden"),bE="".concat(_t,"-hide"),zU="".concat(_t,"-invisible"),Zf="".concat(_t,"-modal"),Ug="".concat(_t,"-move"),eu="".concat(_t,"Action"),yh="".concat(_t,"Preview"),cy="crop",uR="move",hR="none",Lg="crop",Vg="cropend",zg="cropmove",Bg="cropstart",EE="dblclick",BU=sy?"touchstart":"mousedown",FU=sy?"touchmove":"mousemove",HU=sy?"touchend touchcancel":"mouseup",wE=oy?"pointerdown":BU,TE=oy?"pointermove":FU,xE=oy?"pointerup pointercancel":HU,AE="ready",SE="resize",RE="wheel",Fg="zoom",CE="image/jpeg",qU=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,GU=/^data:/,$U=/^data:image\/jpeg;base64,/,YU=/^img|canvas$/i,fR=200,dR=100,NE={viewMode:0,dragMode:cy,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:fR,minContainerHeight:dR,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},XU='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',QU=Number.isNaN||mi.isNaN;function Ie(t){return typeof t=="number"&&!QU(t)}var IE=function(e){return e>0&&e<1/0};function Zm(t){return typeof t>"u"}function Ls(t){return kg(t)==="object"&&t!==null}var KU=Object.prototype.hasOwnProperty;function No(t){if(!Ls(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&KU.call(n,"isPrototypeOf")}catch{return!1}}function qn(t){return typeof t=="function"}var WU=Array.prototype.slice;function mR(t){return Array.from?Array.from(t):WU.call(t)}function Yt(t,e){return t&&qn(e)&&(Array.isArray(t)||Ie(t.length)?mR(t).forEach(function(n,r){e.call(t,n,r,t)}):Ls(t)&&Object.keys(t).forEach(function(n){e.call(t,t[n],n,t)})),t}var Et=Object.assign||function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Ls(e)&&r.length>0&&r.forEach(function(a){Ls(a)&&Object.keys(a).forEach(function(s){e[s]=a[s]})}),e},ZU=/\.\d*(?:0|9){12}\d*$/;function Ho(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return ZU.test(t)?Math.round(t*e)/e:t}var JU=/^width|height|left|top|marginLeft|marginTop$/;function xa(t,e){var n=t.style;Yt(e,function(r,i){JU.test(i)&&Ie(r)&&(r="".concat(r,"px")),n[i]=r})}function eL(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function rn(t,e){if(e){if(Ie(t.length)){Yt(t,function(r){rn(r,e)});return}if(t.classList){t.classList.add(e);return}var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function hi(t,e){if(e){if(Ie(t.length)){Yt(t,function(n){hi(n,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function Io(t,e,n){if(e){if(Ie(t.length)){Yt(t,function(r){Io(r,e,n)});return}n?rn(t,e):hi(t,e)}}var tL=/([a-z\d])([A-Z])/g;function uy(t){return t.replace(tL,"$1-$2").toLowerCase()}function Hg(t,e){return Ls(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(uy(e)))}function tu(t,e,n){Ls(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(uy(e)),n)}function nL(t,e){if(Ls(t[e]))try{delete t[e]}catch{t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch{t.dataset[e]=void 0}else t.removeAttribute("data-".concat(uy(e)))}var pR=/\s\s*/,gR=function(){var t=!1;if(Gd){var e=!1,n=function(){},r=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(a){e=a}});mi.addEventListener("test",n,r),mi.removeEventListener("test",n,r)}return t}();function kr(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=n;e.trim().split(pR).forEach(function(a){if(!gR){var s=t.listeners;s&&s[a]&&s[a][n]&&(i=s[a][n],delete s[a][n],Object.keys(s[a]).length===0&&delete s[a],Object.keys(s).length===0&&delete t.listeners)}t.removeEventListener(a,i,r)})}function gr(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=n;e.trim().split(pR).forEach(function(a){if(r.once&&!gR){var s=t.listeners,o=s===void 0?{}:s;i=function(){delete o[a][n],t.removeEventListener(a,i,r);for(var h=arguments.length,u=new Array(h),f=0;f<h;f++)u[f]=arguments[f];n.apply(t,u)},o[a]||(o[a]={}),o[a][n]&&t.removeEventListener(a,o[a][n],r),o[a][n]=i,t.listeners=o}t.addEventListener(a,i,r)})}function qo(t,e,n){var r;return qn(Event)&&qn(CustomEvent)?r=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(r)}function vR(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Jm=mi.location,rL=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function DE(t){var e=t.match(rL);return e!==null&&(e[1]!==Jm.protocol||e[2]!==Jm.hostname||e[3]!==Jm.port)}function OE(t){var e="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+e}function Cc(t){var e=t.rotate,n=t.scaleX,r=t.scaleY,i=t.translateX,a=t.translateY,s=[];Ie(i)&&i!==0&&s.push("translateX(".concat(i,"px)")),Ie(a)&&a!==0&&s.push("translateY(".concat(a,"px)")),Ie(e)&&e!==0&&s.push("rotate(".concat(e,"deg)")),Ie(n)&&n!==1&&s.push("scaleX(".concat(n,")")),Ie(r)&&r!==1&&s.push("scaleY(".concat(r,")"));var o=s.length?s.join(" "):"none";return{WebkitTransform:o,msTransform:o,transform:o}}function iL(t){var e=iR({},t),n=0;return Yt(t,function(r,i){delete e[i],Yt(e,function(a){var s=Math.abs(r.startX-a.startX),o=Math.abs(r.startY-a.startY),l=Math.abs(r.endX-a.endX),h=Math.abs(r.endY-a.endY),u=Math.sqrt(s*s+o*o),f=Math.sqrt(l*l+h*h),d=(f-u)/u;Math.abs(d)>Math.abs(n)&&(n=d)})}),n}function _h(t,e){var n=t.pageX,r=t.pageY,i={endX:n,endY:r};return e?i:iR({startX:n,startY:r},i)}function aL(t){var e=0,n=0,r=0;return Yt(t,function(i){var a=i.startX,s=i.startY;e+=a,n+=s,r+=1}),e/=r,n/=r,{pageX:e,pageY:n}}function Aa(t){var e=t.aspectRatio,n=t.height,r=t.width,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",a=IE(r),s=IE(n);if(a&&s){var o=n*e;i==="contain"&&o>r||i==="cover"&&o<r?n=r/e:r=n*e}else a?n=r/e:s&&(r=n*e);return{width:r,height:n}}function sL(t){var e=t.width,n=t.height,r=t.degree;if(r=Math.abs(r)%180,r===90)return{width:n,height:e};var i=r%90*Math.PI/180,a=Math.sin(i),s=Math.cos(i),o=e*s+n*a,l=e*a+n*s;return r>90?{width:l,height:o}:{width:o,height:l}}function oL(t,e,n,r){var i=e.aspectRatio,a=e.naturalWidth,s=e.naturalHeight,o=e.rotate,l=o===void 0?0:o,h=e.scaleX,u=h===void 0?1:h,f=e.scaleY,d=f===void 0?1:f,m=n.aspectRatio,b=n.naturalWidth,A=n.naturalHeight,D=r.fillColor,w=D===void 0?"transparent":D,x=r.imageSmoothingEnabled,C=x===void 0?!0:x,O=r.imageSmoothingQuality,U=O===void 0?"low":O,N=r.maxWidth,_=N===void 0?1/0:N,g=r.maxHeight,y=g===void 0?1/0:g,T=r.minWidth,R=T===void 0?0:T,I=r.minHeight,S=I===void 0?0:I,L=document.createElement("canvas"),z=L.getContext("2d"),M=Aa({aspectRatio:m,width:_,height:y}),k=Aa({aspectRatio:m,width:R,height:S},"cover"),H=Math.min(M.width,Math.max(k.width,b)),B=Math.min(M.height,Math.max(k.height,A)),P=Aa({aspectRatio:i,width:_,height:y}),K=Aa({aspectRatio:i,width:R,height:S},"cover"),G=Math.min(P.width,Math.max(K.width,a)),J=Math.min(P.height,Math.max(K.height,s)),W=[-G/2,-J/2,G,J];return L.width=Ho(H),L.height=Ho(B),z.fillStyle=w,z.fillRect(0,0,H,B),z.save(),z.translate(H/2,B/2),z.rotate(l*Math.PI/180),z.scale(u,d),z.imageSmoothingEnabled=C,z.imageSmoothingQuality=U,z.drawImage.apply(z,[t].concat(sR(W.map(function(Y){return Math.floor(Ho(Y))})))),z.restore(),L}var yR=String.fromCharCode;function lL(t,e,n){var r="";n+=e;for(var i=e;i<n;i+=1)r+=yR(t.getUint8(i));return r}var cL=/^data:.*,/;function uL(t){var e=t.replace(cL,""),n=atob(e),r=new ArrayBuffer(n.length),i=new Uint8Array(r);return Yt(i,function(a,s){i[s]=n.charCodeAt(s)}),r}function hL(t,e){for(var n=[],r=8192,i=new Uint8Array(t);i.length>0;)n.push(yR.apply(null,mR(i.subarray(0,r)))),i=i.subarray(r);return"data:".concat(e,";base64,").concat(btoa(n.join("")))}function fL(t){var e=new DataView(t),n;try{var r,i,a;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var s=e.byteLength,o=2;o+1<s;){if(e.getUint8(o)===255&&e.getUint8(o+1)===225){i=o;break}o+=1}if(i){var l=i+4,h=i+10;if(lL(e,l,4)==="Exif"){var u=e.getUint16(h);if(r=u===18761,(r||u===19789)&&e.getUint16(h+2,r)===42){var f=e.getUint32(h+4,r);f>=8&&(a=h+f)}}}if(a){var d=e.getUint16(a,r),m,b;for(b=0;b<d;b+=1)if(m=a+b*12+2,e.getUint16(m,r)===274){m+=8,n=e.getUint16(m,r),e.setUint16(m,1,r);break}}}catch{n=1}return n}function dL(t){var e=0,n=1,r=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:r=-1;break;case 5:e=90,r=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:n,scaleY:r}}var mL={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,n=this.options,r=this.container,i=this.cropper,a=Number(n.minContainerWidth),s=Number(n.minContainerHeight);rn(i,Yn),hi(e,Yn);var o={width:Math.max(r.offsetWidth,a>=0?a:fR),height:Math.max(r.offsetHeight,s>=0?s:dR)};this.containerData=o,xa(i,{width:o.width,height:o.height}),rn(e,Yn),hi(i,Yn)},initCanvas:function(){var e=this.containerData,n=this.imageData,r=this.options.viewMode,i=Math.abs(n.rotate)%180===90,a=i?n.naturalHeight:n.naturalWidth,s=i?n.naturalWidth:n.naturalHeight,o=a/s,l=e.width,h=e.height;e.height*o>e.width?r===3?l=e.height*o:h=e.width/o:r===3?h=e.width/o:l=e.height*o;var u={aspectRatio:o,naturalWidth:a,naturalHeight:s,width:l,height:h};this.canvasData=u,this.limited=r===1||r===2,this.limitCanvas(!0,!0),u.width=Math.min(Math.max(u.width,u.minWidth),u.maxWidth),u.height=Math.min(Math.max(u.height,u.minHeight),u.maxHeight),u.left=(e.width-u.width)/2,u.top=(e.height-u.height)/2,u.oldLeft=u.left,u.oldTop=u.top,this.initialCanvasData=Et({},u)},limitCanvas:function(e,n){var r=this.options,i=this.containerData,a=this.canvasData,s=this.cropBoxData,o=r.viewMode,l=a.aspectRatio,h=this.cropped&&s;if(e){var u=Number(r.minCanvasWidth)||0,f=Number(r.minCanvasHeight)||0;o>1?(u=Math.max(u,i.width),f=Math.max(f,i.height),o===3&&(f*l>u?u=f*l:f=u/l)):o>0&&(u?u=Math.max(u,h?s.width:0):f?f=Math.max(f,h?s.height:0):h&&(u=s.width,f=s.height,f*l>u?u=f*l:f=u/l));var d=Aa({aspectRatio:l,width:u,height:f});u=d.width,f=d.height,a.minWidth=u,a.minHeight=f,a.maxWidth=1/0,a.maxHeight=1/0}if(n)if(o>(h?0:1)){var m=i.width-a.width,b=i.height-a.height;a.minLeft=Math.min(0,m),a.minTop=Math.min(0,b),a.maxLeft=Math.max(0,m),a.maxTop=Math.max(0,b),h&&this.limited&&(a.minLeft=Math.min(s.left,s.left+(s.width-a.width)),a.minTop=Math.min(s.top,s.top+(s.height-a.height)),a.maxLeft=s.left,a.maxTop=s.top,o===2&&(a.width>=i.width&&(a.minLeft=Math.min(0,m),a.maxLeft=Math.max(0,m)),a.height>=i.height&&(a.minTop=Math.min(0,b),a.maxTop=Math.max(0,b))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=i.width,a.maxTop=i.height},renderCanvas:function(e,n){var r=this.canvasData,i=this.imageData;if(n){var a=sL({width:i.naturalWidth*Math.abs(i.scaleX||1),height:i.naturalHeight*Math.abs(i.scaleY||1),degree:i.rotate||0}),s=a.width,o=a.height,l=r.width*(s/r.naturalWidth),h=r.height*(o/r.naturalHeight);r.left-=(l-r.width)/2,r.top-=(h-r.height)/2,r.width=l,r.height=h,r.aspectRatio=s/o,r.naturalWidth=s,r.naturalHeight=o,this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCanvas(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,xa(this.canvas,Et({width:r.width,height:r.height},Cc({translateX:r.left,translateY:r.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var n=this.canvasData,r=this.imageData,i=r.naturalWidth*(n.width/n.naturalWidth),a=r.naturalHeight*(n.height/n.naturalHeight);Et(r,{width:i,height:a,left:(n.width-i)/2,top:(n.height-a)/2}),xa(this.image,Et({width:r.width,height:r.height},Cc(Et({translateX:r.left,translateY:r.top},r)))),e&&this.output()},initCropBox:function(){var e=this.options,n=this.canvasData,r=e.aspectRatio||e.initialAspectRatio,i=Number(e.autoCropArea)||.8,a={width:n.width,height:n.height};r&&(n.height*r>n.width?a.height=a.width/r:a.width=a.height*r),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*i),a.height=Math.max(a.minHeight,a.height*i),a.left=n.left+(n.width-a.width)/2,a.top=n.top+(n.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=Et({},a)},limitCropBox:function(e,n){var r=this.options,i=this.containerData,a=this.canvasData,s=this.cropBoxData,o=this.limited,l=r.aspectRatio;if(e){var h=Number(r.minCropBoxWidth)||0,u=Number(r.minCropBoxHeight)||0,f=o?Math.min(i.width,a.width,a.width+a.left,i.width-a.left):i.width,d=o?Math.min(i.height,a.height,a.height+a.top,i.height-a.top):i.height;h=Math.min(h,i.width),u=Math.min(u,i.height),l&&(h&&u?u*l>h?u=h/l:h=u*l:h?u=h/l:u&&(h=u*l),d*l>f?d=f/l:f=d*l),s.minWidth=Math.min(h,f),s.minHeight=Math.min(u,d),s.maxWidth=f,s.maxHeight=d}n&&(o?(s.minLeft=Math.max(0,a.left),s.minTop=Math.max(0,a.top),s.maxLeft=Math.min(i.width,a.left+a.width)-s.width,s.maxTop=Math.min(i.height,a.top+a.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=i.width-s.width,s.maxTop=i.height-s.height))},renderCropBox:function(){var e=this.options,n=this.containerData,r=this.cropBoxData;(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCropBox(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,e.movable&&e.cropBoxMovable&&tu(this.face,eu,r.width>=n.width&&r.height>=n.height?lR:ly),xa(this.cropBox,Et({width:r.width,height:r.height},Cc({translateX:r.left,translateY:r.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),qo(this.element,Lg,this.getData())}},pL={initPreview:function(){var e=this.element,n=this.crossOrigin,r=this.options.preview,i=n?this.crossOriginUrl:this.url,a=e.alt||"The image to preview",s=document.createElement("img");if(n&&(s.crossOrigin=n),s.src=i,s.alt=a,this.viewBox.appendChild(s),this.viewBoxImage=s,!!r){var o=r;typeof r=="string"?o=e.ownerDocument.querySelectorAll(r):r.querySelector&&(o=[r]),this.previews=o,Yt(o,function(l){var h=document.createElement("img");tu(l,yh,{width:l.offsetWidth,height:l.offsetHeight,html:l.innerHTML}),n&&(h.crossOrigin=n),h.src=i,h.alt=a,h.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',l.innerHTML="",l.appendChild(h)})}},resetPreview:function(){Yt(this.previews,function(e){var n=Hg(e,yh);xa(e,{width:n.width,height:n.height}),e.innerHTML=n.html,nL(e,yh)})},preview:function(){var e=this.imageData,n=this.canvasData,r=this.cropBoxData,i=r.width,a=r.height,s=e.width,o=e.height,l=r.left-n.left-e.left,h=r.top-n.top-e.top;!this.cropped||this.disabled||(xa(this.viewBoxImage,Et({width:s,height:o},Cc(Et({translateX:-l,translateY:-h},e)))),Yt(this.previews,function(u){var f=Hg(u,yh),d=f.width,m=f.height,b=d,A=m,D=1;i&&(D=d/i,A=a*D),a&&A>m&&(D=m/a,b=i*D,A=m),xa(u,{width:b,height:A}),xa(u.getElementsByTagName("img")[0],Et({width:s*D,height:o*D},Cc(Et({translateX:-l*D,translateY:-h*D},e))))}))}},gL={bind:function(){var e=this.element,n=this.options,r=this.cropper;qn(n.cropstart)&&gr(e,Bg,n.cropstart),qn(n.cropmove)&&gr(e,zg,n.cropmove),qn(n.cropend)&&gr(e,Vg,n.cropend),qn(n.crop)&&gr(e,Lg,n.crop),qn(n.zoom)&&gr(e,Fg,n.zoom),gr(r,wE,this.onCropStart=this.cropStart.bind(this)),n.zoomable&&n.zoomOnWheel&&gr(r,RE,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&gr(r,EE,this.onDblclick=this.dblclick.bind(this)),gr(e.ownerDocument,TE,this.onCropMove=this.cropMove.bind(this)),gr(e.ownerDocument,xE,this.onCropEnd=this.cropEnd.bind(this)),n.responsive&&gr(window,SE,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,n=this.options,r=this.cropper;qn(n.cropstart)&&kr(e,Bg,n.cropstart),qn(n.cropmove)&&kr(e,zg,n.cropmove),qn(n.cropend)&&kr(e,Vg,n.cropend),qn(n.crop)&&kr(e,Lg,n.crop),qn(n.zoom)&&kr(e,Fg,n.zoom),kr(r,wE,this.onCropStart),n.zoomable&&n.zoomOnWheel&&kr(r,RE,this.onWheel,{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&kr(r,EE,this.onDblclick),kr(e.ownerDocument,TE,this.onCropMove),kr(e.ownerDocument,xE,this.onCropEnd),n.responsive&&kr(window,SE,this.onResize)}},vL={resize:function(){if(!this.disabled){var e=this.options,n=this.container,r=this.containerData,i=n.offsetWidth/r.width,a=n.offsetHeight/r.height,s=Math.abs(i-1)>Math.abs(a-1)?i:a;if(s!==1){var o,l;e.restore&&(o=this.getCanvasData(),l=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(Yt(o,function(h,u){o[u]=h*s})),this.setCropBoxData(Yt(l,function(h,u){l[u]=h*s})))}}},dblclick:function(){this.disabled||this.options.dragMode===hR||this.setDragMode(eL(this.dragBox,Pg)?uR:cy)},wheel:function(e){var n=this,r=Number(this.options.wheelZoomRatio)||.1,i=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50),e.deltaY?i=e.deltaY>0?1:-1:e.wheelDelta?i=-e.wheelDelta/120:e.detail&&(i=e.detail>0?1:-1),this.zoom(-i*r,e)))},cropStart:function(e){var n=e.buttons,r=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(Ie(n)&&n!==1||Ie(r)&&r!==0||e.ctrlKey))){var i=this.options,a=this.pointers,s;e.changedTouches?Yt(e.changedTouches,function(o){a[o.identifier]=_h(o)}):a[e.pointerId||0]=_h(e),Object.keys(a).length>1&&i.zoomable&&i.zoomOnTouch?s=cR:s=Hg(e.target,eu),qU.test(s)&&qo(this.element,Bg,{originalEvent:e,action:s})!==!1&&(e.preventDefault(),this.action=s,this.cropping=!1,s===oR&&(this.cropping=!0,rn(this.dragBox,Zf)))}},cropMove:function(e){var n=this.action;if(!(this.disabled||!n)){var r=this.pointers;e.preventDefault(),qo(this.element,zg,{originalEvent:e,action:n})!==!1&&(e.changedTouches?Yt(e.changedTouches,function(i){Et(r[i.identifier]||{},_h(i,!0))}):Et(r[e.pointerId||0]||{},_h(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var n=this.action,r=this.pointers;e.changedTouches?Yt(e.changedTouches,function(i){delete r[i.identifier]}):delete r[e.pointerId||0],n&&(e.preventDefault(),Object.keys(r).length||(this.action=""),this.cropping&&(this.cropping=!1,Io(this.dragBox,Zf,this.cropped&&this.options.modal)),qo(this.element,Vg,{originalEvent:e,action:n}))}}},yL={change:function(e){var n=this.options,r=this.canvasData,i=this.containerData,a=this.cropBoxData,s=this.pointers,o=this.action,l=n.aspectRatio,h=a.left,u=a.top,f=a.width,d=a.height,m=h+f,b=u+d,A=0,D=0,w=i.width,x=i.height,C=!0,O;!l&&e.shiftKey&&(l=f&&d?f/d:1),this.limited&&(A=a.minLeft,D=a.minTop,w=A+Math.min(i.width,r.width,r.left+r.width),x=D+Math.min(i.height,r.height,r.top+r.height));var U=s[Object.keys(s)[0]],N={x:U.endX-U.startX,y:U.endY-U.startY},_=function(y){switch(y){case is:m+N.x>w&&(N.x=w-m);break;case as:h+N.x<A&&(N.x=A-h);break;case aa:u+N.y<D&&(N.y=D-u);break;case ro:b+N.y>x&&(N.y=x-b);break}};switch(o){case ly:h+=N.x,u+=N.y;break;case is:if(N.x>=0&&(m>=w||l&&(u<=D||b>=x))){C=!1;break}_(is),f+=N.x,f<0&&(o=as,f=-f,h-=f),l&&(d=f/l,u+=(a.height-d)/2);break;case aa:if(N.y<=0&&(u<=D||l&&(h<=A||m>=w))){C=!1;break}_(aa),d-=N.y,u+=N.y,d<0&&(o=ro,d=-d,u-=d),l&&(f=d*l,h+=(a.width-f)/2);break;case as:if(N.x<=0&&(h<=A||l&&(u<=D||b>=x))){C=!1;break}_(as),f-=N.x,h+=N.x,f<0&&(o=is,f=-f,h-=f),l&&(d=f/l,u+=(a.height-d)/2);break;case ro:if(N.y>=0&&(b>=x||l&&(h<=A||m>=w))){C=!1;break}_(ro),d+=N.y,d<0&&(o=aa,d=-d,u-=d),l&&(f=d*l,h+=(a.width-f)/2);break;case Yl:if(l){if(N.y<=0&&(u<=D||m>=w)){C=!1;break}_(aa),d-=N.y,u+=N.y,f=d*l}else _(aa),_(is),N.x>=0?m<w?f+=N.x:N.y<=0&&u<=D&&(C=!1):f+=N.x,N.y<=0?u>D&&(d-=N.y,u+=N.y):(d-=N.y,u+=N.y);f<0&&d<0?(o=Kl,d=-d,f=-f,u-=d,h-=f):f<0?(o=Xl,f=-f,h-=f):d<0&&(o=Ql,d=-d,u-=d);break;case Xl:if(l){if(N.y<=0&&(u<=D||h<=A)){C=!1;break}_(aa),d-=N.y,u+=N.y,f=d*l,h+=a.width-f}else _(aa),_(as),N.x<=0?h>A?(f-=N.x,h+=N.x):N.y<=0&&u<=D&&(C=!1):(f-=N.x,h+=N.x),N.y<=0?u>D&&(d-=N.y,u+=N.y):(d-=N.y,u+=N.y);f<0&&d<0?(o=Ql,d=-d,f=-f,u-=d,h-=f):f<0?(o=Yl,f=-f,h-=f):d<0&&(o=Kl,d=-d,u-=d);break;case Kl:if(l){if(N.x<=0&&(h<=A||b>=x)){C=!1;break}_(as),f-=N.x,h+=N.x,d=f/l}else _(ro),_(as),N.x<=0?h>A?(f-=N.x,h+=N.x):N.y>=0&&b>=x&&(C=!1):(f-=N.x,h+=N.x),N.y>=0?b<x&&(d+=N.y):d+=N.y;f<0&&d<0?(o=Yl,d=-d,f=-f,u-=d,h-=f):f<0?(o=Ql,f=-f,h-=f):d<0&&(o=Xl,d=-d,u-=d);break;case Ql:if(l){if(N.x>=0&&(m>=w||b>=x)){C=!1;break}_(is),f+=N.x,d=f/l}else _(ro),_(is),N.x>=0?m<w?f+=N.x:N.y>=0&&b>=x&&(C=!1):f+=N.x,N.y>=0?b<x&&(d+=N.y):d+=N.y;f<0&&d<0?(o=Xl,d=-d,f=-f,u-=d,h-=f):f<0?(o=Kl,f=-f,h-=f):d<0&&(o=Yl,d=-d,u-=d);break;case lR:this.move(N.x,N.y),C=!1;break;case cR:this.zoom(iL(s),e),C=!1;break;case oR:if(!N.x||!N.y){C=!1;break}O=vR(this.cropper),h=U.startX-O.left,u=U.startY-O.top,f=a.minWidth,d=a.minHeight,N.x>0?o=N.y>0?Ql:Yl:N.x<0&&(h-=f,o=N.y>0?Kl:Xl),N.y<0&&(u-=d),this.cropped||(hi(this.cropBox,Yn),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}C&&(a.width=f,a.height=d,a.left=h,a.top=u,this.action=o,this.renderCropBox()),Yt(s,function(g){g.startX=g.endX,g.startY=g.endY})}},_L={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&rn(this.dragBox,Zf),hi(this.cropBox,Yn),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Et({},this.initialImageData),this.canvasData=Et({},this.initialCanvasData),this.cropBoxData=Et({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Et(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),hi(this.dragBox,Zf),rn(this.cropBox,Yn)),this},replace:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),n?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,Yt(this.previews,function(r){r.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,hi(this.cropper,_E)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,rn(this.cropper,_E)),this},destroy:function(){var e=this.element;return e[_t]?(e[_t]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.canvasData,i=r.left,a=r.top;return this.moveTo(Zm(e)?e:i+Number(e),Zm(n)?n:a+Number(n))},moveTo:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.canvasData,i=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.movable&&(Ie(e)&&(r.left=e,i=!0),Ie(n)&&(r.top=n,i=!0),i&&this.renderCanvas(!0)),this},zoom:function(e,n){var r=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(r.width*e/r.naturalWidth,null,n)},zoomTo:function(e,n,r){var i=this.options,a=this.canvasData,s=a.width,o=a.height,l=a.naturalWidth,h=a.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&i.zoomable){var u=l*e,f=h*e;if(qo(this.element,Fg,{ratio:e,oldRatio:s/l,originalEvent:r})===!1)return this;if(r){var d=this.pointers,m=vR(this.cropper),b=d&&Object.keys(d).length?aL(d):{pageX:r.pageX,pageY:r.pageY};a.left-=(u-s)*((b.pageX-m.left-a.left)/s),a.top-=(f-o)*((b.pageY-m.top-a.top)/o)}else No(n)&&Ie(n.x)&&Ie(n.y)?(a.left-=(u-s)*((n.x-a.left)/s),a.top-=(f-o)*((n.y-a.top)/o)):(a.left-=(u-s)/2,a.top-=(f-o)/2);a.width=u,a.height=f,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),Ie(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var n=this.imageData.scaleY;return this.scale(e,Ie(n)?n:1)},scaleY:function(e){var n=this.imageData.scaleX;return this.scale(Ie(n)?n:1,e)},scale:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.imageData,i=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.scalable&&(Ie(e)&&(r.scaleX=e,i=!0),Ie(n)&&(r.scaleY=n,i=!0),i&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.options,r=this.imageData,i=this.canvasData,a=this.cropBoxData,s;if(this.ready&&this.cropped){s={x:a.left-i.left,y:a.top-i.top,width:a.width,height:a.height};var o=r.width/r.naturalWidth;if(Yt(s,function(u,f){s[f]=u/o}),e){var l=Math.round(s.y+s.height),h=Math.round(s.x+s.width);s.x=Math.round(s.x),s.y=Math.round(s.y),s.width=h-s.x,s.height=l-s.y}}else s={x:0,y:0,width:0,height:0};return n.rotatable&&(s.rotate=r.rotate||0),n.scalable&&(s.scaleX=r.scaleX||1,s.scaleY=r.scaleY||1),s},setData:function(e){var n=this.options,r=this.imageData,i=this.canvasData,a={};if(this.ready&&!this.disabled&&No(e)){var s=!1;n.rotatable&&Ie(e.rotate)&&e.rotate!==r.rotate&&(r.rotate=e.rotate,s=!0),n.scalable&&(Ie(e.scaleX)&&e.scaleX!==r.scaleX&&(r.scaleX=e.scaleX,s=!0),Ie(e.scaleY)&&e.scaleY!==r.scaleY&&(r.scaleY=e.scaleY,s=!0)),s&&this.renderCanvas(!0,!0);var o=r.width/r.naturalWidth;Ie(e.x)&&(a.left=e.x*o+i.left),Ie(e.y)&&(a.top=e.y*o+i.top),Ie(e.width)&&(a.width=e.width*o),Ie(e.height)&&(a.height=e.height*o),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?Et({},this.containerData):{}},getImageData:function(){return this.sized?Et({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,n={};return this.ready&&Yt(["left","top","width","height","naturalWidth","naturalHeight"],function(r){n[r]=e[r]}),n},setCanvasData:function(e){var n=this.canvasData,r=n.aspectRatio;return this.ready&&!this.disabled&&No(e)&&(Ie(e.left)&&(n.left=e.left),Ie(e.top)&&(n.top=e.top),Ie(e.width)?(n.width=e.width,n.height=e.width/r):Ie(e.height)&&(n.height=e.height,n.width=e.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,n;return this.ready&&this.cropped&&(n={left:e.left,top:e.top,width:e.width,height:e.height}),n||{}},setCropBoxData:function(e){var n=this.cropBoxData,r=this.options.aspectRatio,i,a;return this.ready&&this.cropped&&!this.disabled&&No(e)&&(Ie(e.left)&&(n.left=e.left),Ie(e.top)&&(n.top=e.top),Ie(e.width)&&e.width!==n.width&&(i=!0,n.width=e.width),Ie(e.height)&&e.height!==n.height&&(a=!0,n.height=e.height),r&&(i?n.height=n.width/r:a&&(n.width=n.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var n=this.canvasData,r=oL(this.image,this.imageData,n,e);if(!this.cropped)return r;var i=this.getData(e.rounded),a=i.x,s=i.y,o=i.width,l=i.height,h=r.width/Math.floor(n.naturalWidth);h!==1&&(a*=h,s*=h,o*=h,l*=h);var u=o/l,f=Aa({aspectRatio:u,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),d=Aa({aspectRatio:u,width:e.minWidth||0,height:e.minHeight||0},"cover"),m=Aa({aspectRatio:u,width:e.width||(h!==1?r.width:o),height:e.height||(h!==1?r.height:l)}),b=m.width,A=m.height;b=Math.min(f.width,Math.max(d.width,b)),A=Math.min(f.height,Math.max(d.height,A));var D=document.createElement("canvas"),w=D.getContext("2d");D.width=Ho(b),D.height=Ho(A),w.fillStyle=e.fillColor||"transparent",w.fillRect(0,0,b,A);var x=e.imageSmoothingEnabled,C=x===void 0?!0:x,O=e.imageSmoothingQuality;w.imageSmoothingEnabled=C,O&&(w.imageSmoothingQuality=O);var U=r.width,N=r.height,_=a,g=s,y,T,R,I,S,L;_<=-o||_>U?(_=0,y=0,R=0,S=0):_<=0?(R=-_,_=0,y=Math.min(U,o+_),S=y):_<=U&&(R=0,y=Math.min(o,U-_),S=y),y<=0||g<=-l||g>N?(g=0,T=0,I=0,L=0):g<=0?(I=-g,g=0,T=Math.min(N,l+g),L=T):g<=N&&(I=0,T=Math.min(l,N-g),L=T);var z=[_,g,y,T];if(S>0&&L>0){var M=b/o;z.push(R*M,I*M,S*M,L*M)}return w.drawImage.apply(w,[r].concat(sR(z.map(function(k){return Math.floor(Ho(k))})))),D},setAspectRatio:function(e){var n=this.options;return!this.disabled&&!Zm(e)&&(n.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var n=this.options,r=this.dragBox,i=this.face;if(this.ready&&!this.disabled){var a=e===cy,s=n.movable&&e===uR;e=a||s?e:hR,n.dragMode=e,tu(r,eu,e),Io(r,Pg,a),Io(r,Ug,s),n.cropBoxMovable||(tu(i,eu,e),Io(i,Pg,a),Io(i,Ug,s))}return this}},bL=mi.Cropper,_R=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(MU(this,t),!e||!YU.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=Et({},NE,No(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return kU(t,[{key:"init",value:function(){var n=this.element,r=n.tagName.toLowerCase(),i;if(!n[_t]){if(n[_t]=this,r==="img"){if(this.isImg=!0,i=n.getAttribute("src")||"",this.originalUrl=i,!i)return;i=n.src}else r==="canvas"&&window.HTMLCanvasElement&&(i=n.toDataURL());this.load(i)}}},{key:"load",value:function(n){var r=this;if(n){this.url=n,this.imageData={};var i=this.element,a=this.options;if(!a.rotatable&&!a.scalable&&(a.checkOrientation=!1),!a.checkOrientation||!window.ArrayBuffer){this.clone();return}if(GU.test(n)){$U.test(n)?this.read(uL(n)):this.clone();return}var s=new XMLHttpRequest,o=this.clone.bind(this);this.reloading=!0,this.xhr=s,s.onabort=o,s.onerror=o,s.ontimeout=o,s.onprogress=function(){s.getResponseHeader("content-type")!==CE&&s.abort()},s.onload=function(){r.read(s.response)},s.onloadend=function(){r.reloading=!1,r.xhr=null},a.checkCrossOrigin&&DE(n)&&i.crossOrigin&&(n=OE(n)),s.open("GET",n,!0),s.responseType="arraybuffer",s.withCredentials=i.crossOrigin==="use-credentials",s.send()}}},{key:"read",value:function(n){var r=this.options,i=this.imageData,a=fL(n),s=0,o=1,l=1;if(a>1){this.url=hL(n,CE);var h=dL(a);s=h.rotate,o=h.scaleX,l=h.scaleY}r.rotatable&&(i.rotate=s),r.scalable&&(i.scaleX=o,i.scaleY=l),this.clone()}},{key:"clone",value:function(){var n=this.element,r=this.url,i=n.crossOrigin,a=r;this.options.checkCrossOrigin&&DE(r)&&(i||(i="anonymous"),a=OE(r)),this.crossOrigin=i,this.crossOriginUrl=a;var s=document.createElement("img");i&&(s.crossOrigin=i),s.src=a||r,s.alt=n.alt||"The image to crop",this.image=s,s.onload=this.start.bind(this),s.onerror=this.stop.bind(this),rn(s,bE),n.parentNode.insertBefore(s,n.nextSibling)}},{key:"start",value:function(){var n=this,r=this.image;r.onload=null,r.onerror=null,this.sizing=!0;var i=mi.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(mi.navigator.userAgent),a=function(h,u){Et(n.imageData,{naturalWidth:h,naturalHeight:u,aspectRatio:h/u}),n.initialImageData=Et({},n.imageData),n.sizing=!1,n.sized=!0,n.build()};if(r.naturalWidth&&!i){a(r.naturalWidth,r.naturalHeight);return}var s=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=s,s.onload=function(){a(s.width,s.height),i||o.removeChild(s)},s.src=r.src,i||(s.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(s))}},{key:"stop",value:function(){var n=this.image;n.onload=null,n.onerror=null,n.parentNode.removeChild(n),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var n=this.element,r=this.options,i=this.image,a=n.parentNode,s=document.createElement("div");s.innerHTML=XU;var o=s.querySelector(".".concat(_t,"-container")),l=o.querySelector(".".concat(_t,"-canvas")),h=o.querySelector(".".concat(_t,"-drag-box")),u=o.querySelector(".".concat(_t,"-crop-box")),f=u.querySelector(".".concat(_t,"-face"));this.container=a,this.cropper=o,this.canvas=l,this.dragBox=h,this.cropBox=u,this.viewBox=o.querySelector(".".concat(_t,"-view-box")),this.face=f,l.appendChild(i),rn(n,Yn),a.insertBefore(o,n.nextSibling),hi(i,bE),this.initPreview(),this.bind(),r.initialAspectRatio=Math.max(0,r.initialAspectRatio)||NaN,r.aspectRatio=Math.max(0,r.aspectRatio)||NaN,r.viewMode=Math.max(0,Math.min(3,Math.round(r.viewMode)))||0,rn(u,Yn),r.guides||rn(u.getElementsByClassName("".concat(_t,"-dashed")),Yn),r.center||rn(u.getElementsByClassName("".concat(_t,"-center")),Yn),r.background&&rn(o,"".concat(_t,"-bg")),r.highlight||rn(f,zU),r.cropBoxMovable&&(rn(f,Ug),tu(f,eu,ly)),r.cropBoxResizable||(rn(u.getElementsByClassName("".concat(_t,"-line")),Yn),rn(u.getElementsByClassName("".concat(_t,"-point")),Yn)),this.render(),this.ready=!0,this.setDragMode(r.dragMode),r.autoCrop&&this.crop(),this.setData(r.data),qn(r.ready)&&gr(n,AE,r.ready,{once:!0}),qo(n,AE)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var n=this.cropper.parentNode;n&&n.removeChild(this.cropper),hi(this.element,Yn)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=bL,t}},{key:"setDefaults",value:function(n){Et(NE,No(n)&&n)}}])}();Et(_R.prototype,mL,pL,gL,vL,yL,_L);var fs=function(){return fs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},fs.apply(this,arguments)};function ep(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}var EL=["aspectRatio","autoCrop","autoCropArea","background","center","checkCrossOrigin","checkOrientation","cropBoxMovable","cropBoxResizable","data","dragMode","guides","highlight","initialAspectRatio","minCanvasHeight","minCanvasWidth","minContainerHeight","minContainerWidth","minCropBoxHeight","minCropBoxWidth","modal","movable","preview","responsive","restore","rotatable","scalable","toggleDragModeOnDblclick","viewMode","wheelZoomRatio","zoomOnTouch","zoomOnWheel","zoomable","cropstart","cropmove","cropend","crop","zoom","ready"],wL={opacity:0,maxWidth:"100%"},TL=mo.forwardRef(function(t,e){var n=ep(t,[]),r=n.dragMode,i=r===void 0?"crop":r,a=n.src,s=n.style,o=n.className,l=n.crossOrigin,h=n.scaleX,u=n.scaleY,f=n.enable,d=n.zoomTo,m=n.rotateTo,b=n.alt,A=b===void 0?"picture":b,D=n.ready,w=n.onInitialized,x=ep(n,["dragMode","src","style","className","crossOrigin","scaleX","scaleY","enable","zoomTo","rotateTo","alt","ready","onInitialized"]),C={scaleY:u,scaleX:h,enable:f,zoomTo:d,rotateTo:m},O=function(){for(var N=[],_=0;_<arguments.length;_++)N[_]=arguments[_];var g=$.useRef(null);return mo.useEffect(function(){N.forEach(function(y){y&&(typeof y=="function"?y(g.current):y.current=g.current)})},[N]),g}(e,$.useRef(null));$.useEffect(function(){var N;!((N=O.current)===null||N===void 0)&&N.cropper&&typeof d=="number"&&O.current.cropper.zoomTo(d)},[n.zoomTo]),$.useEffect(function(){var N;!((N=O.current)===null||N===void 0)&&N.cropper&&a!==void 0&&O.current.cropper.reset().clear().replace(a)},[a]),$.useEffect(function(){if(O.current!==null){var N=new _R(O.current,fs(fs({dragMode:i},x),{ready:function(_){_.currentTarget!==null&&function(g,y){y===void 0&&(y={});var T=y.enable,R=T===void 0||T,I=y.scaleX,S=I===void 0?1:I,L=y.scaleY,z=L===void 0?1:L,M=y.zoomTo,k=M===void 0?0:M,H=y.rotateTo;R?g.enable():g.disable(),g.scaleX(S),g.scaleY(z),H!==void 0&&g.rotateTo(H),k>0&&g.zoomTo(k)}(_.currentTarget.cropper,C),D&&D(_)}}));w&&w(N)}return function(){var _,g;(g=(_=O.current)===null||_===void 0?void 0:_.cropper)===null||g===void 0||g.destroy()}},[O]);var U=function(N){return EL.reduce(function(_,g){var y=_,T=g;return y[T],ep(y,[typeof T=="symbol"?T:T+""])},N)}(fs(fs({},x),{crossOrigin:l,src:a,alt:A}));return mo.createElement("div",{style:s,className:o},mo.createElement("img",fs({},U,{style:wL,ref:O})))});const xL=({isOpen:t,onClose:e,onImageReady:n})=>{const[r,i]=$.useState(null),[a,s]=$.useState(!1),[o,l]=$.useState(null),h=$.useRef(null),u=$.useRef(null);$.useEffect(()=>{const A=u.current;A&&(t?A.showModal():A.close())},[t]);const f=()=>{i(null),s(!1),l(null)},d=()=>{f(),e()},m=async A=>{if(l(null),A.target.files&&A.target.files.length>0){const D=A.target.files[0];s(!0);try{const w=await Sn(D,{maxSizeMB:1,maxWidthOrHeight:1024,useWebWorker:!0}),x=new FileReader;x.onload=()=>{i(x.result),s(!1)},x.readAsDataURL(w)}catch(w){l(w instanceof Error?w.message:"Image processing failed"),s(!1)}}},b=()=>{var D;if(!((D=h.current)!=null&&D.cropper)){l("Cropper not available.");return}s(!0);const A=h.current.cropper.getCroppedCanvas({width:256,height:256,imageSmoothingQuality:"high"}).toDataURL("image/jpeg",.9);n(A),d()};return p.jsxs("dialog",{ref:u,onClose:d,className:"bg-zinc-800 text-zinc-200 p-0 rounded-lg shadow-2xl w-full max-w-md border border-zinc-700 backdrop:bg-black/50",children:[p.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Upload Portrait"}),p.jsx("button",{onClick:d,className:"p-1 rounded-full hover:bg-zinc-700 transition-colors",children:p.jsx(KP,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"p-6",children:[r?p.jsx("div",{children:p.jsx(TL,{ref:h,src:r,style:{height:400,width:"100%"},aspectRatio:1/1,guides:!1,viewMode:1,autoCropArea:.8,movable:!0,zoomable:!0,background:!1,className:"bg-zinc-900 rounded-md"})}):p.jsxs("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-zinc-600 rounded-lg p-8 text-center",children:[p.jsx(iy,{className:"w-12 h-12 text-zinc-500 mb-2"}),p.jsx("label",{htmlFor:"image-upload-input",className:"cursor-pointer bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition-colors duration-200",children:"Select an Image"}),p.jsx("input",{id:"image-upload-input",type:"file",accept:"image/*",onChange:m,className:"hidden"}),p.jsx("p",{className:"text-xs text-zinc-400 mt-2",children:"PNG, JPG, WEBP up to 1MB."}),a&&p.jsx("p",{className:"mt-2 text-zinc-400 animate-pulse",children:"Processing..."})]}),o&&p.jsx("p",{className:"text-red-400 text-sm mt-4",children:o})]}),p.jsxs("footer",{className:"flex justify-end gap-2 p-4 bg-zinc-900/50 border-t border-zinc-700",children:[p.jsx("button",{onClick:d,disabled:a,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition-colors disabled:bg-zinc-500 disabled:cursor-not-allowed",children:"Cancel"}),p.jsxs("button",{onClick:b,disabled:a||!r,className:"flex items-center gap-2 bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded transition-colors disabled:bg-zinc-600 disabled:cursor-not-allowed",children:[p.jsx(WP,{className:"w-5 h-5"}),a?"Saving...":"Save Cropped Image"]})]})]})},AL={name:"",level:0,school:"Evocation",castingTime:"1 Action",range:"60 feet",components:"V, S",duration:"Instantaneous",description:""},SL=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=$.useState(t),a=(h,u)=>{i(f=>({...f,[h]:u}))},s=h=>{h.preventDefault(),r.name.trim()&&e(r)},o=["Abjuration","Conjuration","Divination","Enchantment","Evocation","Illusion","Necromancy","Transmutation"],l="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return p.jsxs("form",{onSubmit:s,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-6",children:[p.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Spell":"Add New Spell"}),p.jsx("input",{type:"text",placeholder:"Spell Name",value:r.name,onChange:h=>a("name",h.target.value),required:!0,className:l}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsx("input",{type:"number",placeholder:"Level",value:r.level,onChange:h=>a("level",parseInt(h.target.value)),min:"0",max:"9",className:l}),p.jsx("select",{value:r.school,onChange:h=>a("school",h.target.value),className:l,children:o.map(h=>p.jsx("option",{value:h,children:h},h))})]}),p.jsx("textarea",{placeholder:"Description",value:r.description,onChange:h=>a("description",h.target.value),rows:4,className:`${l} resize-y`}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Spell"})]})]})},RL=({spell:t,onEdit:e,onDelete:n,onToggleExpand:r,isExpanded:i})=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg",children:[p.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-3",onClick:r,children:[p.jsx("h4",{className:"font-bold text-amber-300",children:t.name}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("span",{className:"text-sm text-zinc-400 capitalize",children:t.school}),p.jsx("button",{onClick:a=>{a.stopPropagation(),e()},className:"text-zinc-400 hover:text-amber-400 p-1",children:p.jsx(Qs,{className:"w-4 h-4"})}),p.jsx("button",{onClick:a=>{a.stopPropagation(),n()},className:"text-zinc-500 hover:text-red-400 p-1",children:p.jsx(Xs,{className:"w-4 h-4"})})]})]}),i&&p.jsxs("div",{className:"mt-2 pt-3 border-t border-zinc-600/50 space-y-2 text-sm p-3 bg-zinc-900/30",children:[p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Casting Time:"})," ",t.castingTime]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Range:"})," ",t.range]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Components:"})," ",t.components]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Duration:"})," ",t.duration]}),p.jsx("p",{className:"text-zinc-300 mt-2 whitespace-pre-wrap",children:t.description})]})]}),CL=()=>{const{character:t,updateCharacter:e}=Ln(),[n,r]=$.useState(null),[i,a]=$.useState({});if(!t)return null;const s=f=>{let d;if("id"in f)d=t.spells.map(m=>m.id===f.id?f:m);else{const m={...f,id:`spell_${Date.now()}`};d=[...t.spells,m]}e({spells:d}),r(null)},o=f=>{if(window.confirm("Are you sure you want to delete this spell?")){const d=t.spells.filter(m=>m.id!==f);e({spells:d})}},l=f=>{a(d=>({...d,[f]:!d[f]}))},h=$.useMemo(()=>t.spells.reduce((f,d)=>(f[d.level]=[...f[d.level]||[],d],f[d.level].sort((m,b)=>m.name.localeCompare(b.name)),f),{}),[t.spells]),u=Object.keys(h).map(Number).sort((f,d)=>f-d);return p.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Spellbook"}),p.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[p.jsx(ku,{className:"w-5 h-5"})," Add Spell"]})]}),n&&p.jsx(SL,{initialData:n==="new"?AL:n,onSave:s,onCancel:()=>r(null)}),p.jsxs("div",{className:"space-y-6 overflow-y-auto pr-2 -mr-2",children:[t.spells.length===0&&!n&&p.jsx("p",{className:"text-center text-zinc-500 text-sm py-8",children:"This character knows no spells. Add one to get started!"}),u.map(f=>p.jsxs("div",{children:[p.jsx("h4",{className:"text-xl font-serif text-zinc-300 border-b border-zinc-600 pb-1 mb-3",children:f===0?"Cantrips":`Level ${f}`}),p.jsx("div",{className:"space-y-3",children:h[f].map(d=>p.jsx(RL,{spell:d,isExpanded:!!i[d.id],onToggleExpand:()=>l(d.id),onEdit:()=>r(d),onDelete:()=>o(d.id)},d.id))})]},f))]})]})},NL={name:"",description:""},IL=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=$.useState(t),a=(l,h)=>{i(u=>({...u,[l]:h}))},s=l=>{l.preventDefault(),r.name.trim()&&e(r)},o="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return p.jsxs("form",{onSubmit:s,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[p.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Feature":"Add New Feature"}),p.jsx("input",{type:"text",placeholder:"Feature or Trait Name",value:r.name,onChange:l=>a("name",l.target.value),required:!0,className:o}),p.jsx("textarea",{placeholder:"Description",value:r.description,onChange:l=>a("description",l.target.value),rows:4,className:`${o} resize-y`}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Feature"})]})]})},DL=()=>{const{character:t,updateCharacter:e}=Ln(),[n,r]=$.useState(null),[i,a]=$.useState({});if(!t)return null;const s=u=>{let f;if("id"in u)f=t.featuresAndTraits.map(d=>d.id===u.id?u:d);else{const d={...u,id:`feat_${Date.now()}`};f=[...t.featuresAndTraits,d]}e({featuresAndTraits:f}),r(null)},o=u=>{if(window.confirm("Are you sure you want to delete this feature?")){const f=t.featuresAndTraits.filter(d=>d.id!==u);e({featuresAndTraits:f})}},l=u=>{a(f=>({...f,[u]:!f[u]}))},h=$.useMemo(()=>[...t.featuresAndTraits].sort((u,f)=>u.name.localeCompare(f.name)),[t.featuresAndTraits]);return p.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Features & Traits"}),p.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[p.jsx(ku,{className:"w-5 h-5"})," Add Feature"]})]}),n&&p.jsx(IL,{initialData:n==="new"?NL:n,onSave:s,onCancel:()=>r(null)}),p.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[h.length===0&&!n&&p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"No features or traits have been added."})}),h.map(u=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:[p.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer",onClick:()=>l(u.id),children:[p.jsx("span",{className:"font-semibold text-amber-300",children:u.name}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:f=>{f.stopPropagation(),r(u)},className:"text-zinc-400 hover:text-amber-400 p-1",children:p.jsx(Qs,{className:"w-4 h-4"})}),p.jsx("button",{onClick:f=>{f.stopPropagation(),o(u.id)},className:"text-zinc-500 hover:text-red-400 p-1",children:p.jsx(Xs,{className:"w-4 h-4"})})]})]}),i[u.id]&&p.jsx("div",{className:"p-3 border-t border-zinc-600/50 bg-zinc-900/30",children:p.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:u.description})})]},u.id))]})]})},OL={name:"",quantity:1,description:"",equipped:!1},ML=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=$.useState(t),a=(h,u)=>{i(f=>({...f,[h]:u}))},s=h=>{h.preventDefault(),r.name.trim()&&e(r)},o="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500 text-sm",l="block text-xs font-medium text-zinc-400 mb-1";return p.jsxs("form",{onSubmit:s,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[p.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Item":"Add New Item"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"md:col-span-2",children:[p.jsx("label",{htmlFor:"name",className:l,children:"Item Name"}),p.jsx("input",{id:"name",type:"text",placeholder:"e.g., Longsword",value:r.name,onChange:h=>a("name",h.target.value),required:!0,className:o})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"quantity",className:l,children:"Quantity"}),p.jsx("input",{id:"quantity",type:"number",value:r.quantity,onChange:h=>a("quantity",parseInt(h.target.value)||1),min:"1",className:`${o} text-center`})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"description",className:l,children:"Description"}),p.jsx("textarea",{id:"description",value:r.description,onChange:h=>a("description",h.target.value),className:o,rows:3})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"armorType",className:l,children:"Armor Type"}),p.jsxs("select",{id:"armorType",value:r.armorType||"",onChange:h=>a("armorType",h.target.value||void 0),className:o,children:[p.jsx("option",{value:"",children:"Not Armor"}),p.jsx("option",{value:"light",children:"Light Armor"}),p.jsx("option",{value:"medium",children:"Medium Armor"}),p.jsx("option",{value:"heavy",children:"Heavy Armor"}),p.jsx("option",{value:"shield",children:"Shield"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"armorClass",className:l,children:"Armor Class (AC)"}),p.jsx("input",{id:"armorClass",type:"number",placeholder:"e.g., 14",value:r.armorClass||"",onChange:h=>a("armorClass",parseInt(h.target.value)||void 0),className:o})]})]}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition text-sm",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition text-sm",children:"Save Item"})]})]})},ME=({title:t,items:e,expandedItem:n,onToggleExpand:r,onEdit:i,onDelete:a})=>p.jsxs("div",{children:[p.jsx("h4",{className:"text-base font-semibold text-zinc-300 border-b border-zinc-700 pb-2 mb-3",children:t}),p.jsxs("div",{className:"space-y-2",children:[e.length===0&&p.jsx("p",{className:"text-center text-zinc-500 text-xs py-2",children:"Empty"}),e.map(s=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:[p.jsxs("div",{className:"p-3 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[p.jsx("button",{onClick:()=>r(s.id),className:"flex-shrink-0 text-zinc-400 hover:text-white",children:p.jsx(eR,{className:`w-5 h-5 transition-transform ${n===s.id?"rotate-180":""}`})}),p.jsxs("p",{className:"font-semibold text-amber-300 truncate",title:s.name,children:[s.name," ",p.jsxs("span",{className:"text-xs text-zinc-400",children:["(x",s.quantity,")"]})]})]}),p.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[p.jsx("button",{onClick:()=>i(s),className:"text-zinc-400 hover:text-amber-400 p-1",children:p.jsx(Qs,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>a(s.id),className:"text-zinc-500 hover:text-red-400 p-1",children:p.jsx(Xs,{className:"w-4 h-4"})})]})]}),n===s.id&&p.jsxs("div",{className:"p-3 border-t border-zinc-600/50 bg-zinc-900/30 space-y-2",children:[s.armorType&&p.jsxs("p",{children:[p.jsxs("strong",{className:"text-zinc-400 capitalize",children:[s.armorType," Armor"]}),s.armorClass?p.jsxs("span",{className:"text-zinc-300",children:[" (AC: ",s.armorClass,")"]}):""]}),p.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:s.description||"No description."})]})]},s.id))]})]}),kL=()=>{const{character:t,updateCharacter:e}=Ln(),[n,r]=$.useState(null),[i,a]=$.useState(null),s=f=>{let d;if("id"in f)d=(t.equipment||[]).map(m=>m.id===f.id?f:m);else{const m={...f,id:`item_${Date.now()}`};d=[...t.equipment||[],m]}e({equipment:d}),r(null)},o=f=>{if(window.confirm("Are you sure you want to delete this item?")){const d=(t.equipment||[]).filter(m=>m.id!==f);e({equipment:d})}},l=f=>{a(d=>d===f?null:f)},{equippableItems:h,backpackItems:u}=$.useMemo(()=>{const f=[],d=[];return(t.equipment||[]).forEach(m=>{m.armorType?f.push(m):d.push(m)}),{equippableItems:f.sort((m,b)=>m.name.localeCompare(b.name)),backpackItems:d.sort((m,b)=>m.name.localeCompare(b.name))}},[t.equipment]);return p.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-lg",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Inventory"}),p.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[p.jsx(ku,{className:"w-5 h-5"})," Add Item"]})]}),n&&p.jsx(ML,{initialData:n==="new"?OL:n,onSave:s,onCancel:()=>r(null)}),p.jsxs("div",{className:"space-y-6",children:[p.jsx(ME,{title:"Equippable Gear",items:h,expandedItem:i,onToggleExpand:l,onEdit:r,onDelete:o}),p.jsx(ME,{title:"Backpack",items:u,expandedItem:i,onToggleExpand:l,onEdit:r,onDelete:o})]})]})},jL={name:"",bonus:"+0",damage:"1d4"},PL=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=$.useState(t),a=(l,h)=>{i(u=>({...u,[l]:h}))},s=l=>{l.preventDefault(),r.name.trim()&&e(r)},o="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return p.jsxs("form",{onSubmit:s,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[p.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Attack":"Add New Attack"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsx("input",{type:"text",placeholder:"Attack Name",value:r.name,onChange:l=>a("name",l.target.value),required:!0,className:`${o} sm:col-span-1`}),p.jsx("input",{type:"text",placeholder:"e.g. +5",value:r.bonus,onChange:l=>a("bonus",l.target.value),required:!0,className:`${o} text-center`}),p.jsx("input",{type:"text",placeholder:"e.g. (2d6)+(1d4)+3",value:r.damage,onChange:l=>a("damage",l.target.value),required:!0,className:`${o} text-center`})]}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Attack"})]})]})},UL=()=>{const{character:t,updateCharacter:e}=Ln(),[n,r]=$.useState(null);if(!t)return null;const i=o=>{let l;if("id"in o)l=t.attacks.map(h=>h.id===o.id?o:h);else{const h={...o,id:`attack_${Date.now()}`};l=[...t.attacks,h]}e({attacks:l}),r(null)},a=o=>{if(window.confirm("Are you sure you want to delete this attack?")){const l=t.attacks.filter(h=>h.id!==o);e({attacks:l})}},s=$.useMemo(()=>[...t.attacks||[]].sort((o,l)=>o.name.localeCompare(l.name)),[t.attacks]);return p.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Attacks & Cantrips"}),p.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[p.jsx(ku,{className:"w-5 h-5"})," Add Attack"]})]}),n&&p.jsx(PL,{initialData:n==="new"?jL:n,onSave:i,onCancel:()=>r(null)}),p.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[s.length===0&&!n&&p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"No attacks have been defined."})}),s.map(o=>p.jsx("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:p.jsxs("div",{className:"grid grid-cols-6 items-center p-3",children:[p.jsx("span",{className:"font-semibold text-amber-300 col-span-3",children:o.name}),p.jsx("span",{className:"font-mono text-zinc-300 col-span-1 text-center",children:o.bonus}),p.jsx("span",{className:"font-mono text-zinc-300 col-span-1 text-center",children:o.damage}),p.jsxs("div",{className:"flex items-center gap-2 justify-end col-span-1",children:[p.jsx("button",{onClick:()=>r(o),className:"text-zinc-400 hover:text-amber-400 p-1",children:p.jsx(Qs,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>a(o.id),className:"text-zinc-500 hover:text-red-400 p-1",children:p.jsx(Xs,{className:"w-4 h-4"})})]})]})},o.id))]})]})},LL={name:"",max:1},VL=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=$.useState(t),a=(l,h)=>{i(u=>({...u,[l]:h}))},s=l=>{l.preventDefault(),r.name.trim()&&e(r)},o="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return p.jsxs("form",{onSubmit:s,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[p.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Resource":"Add New Resource"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsx("input",{type:"text",placeholder:"Resource Name",value:r.name,onChange:l=>a("name",l.target.value),required:!0,className:`${o} sm:col-span-2`}),p.jsx("input",{type:"number",placeholder:"Max",value:r.max,onChange:l=>a("max",parseInt(l.target.value)||1),min:"1",className:`${o} text-center`})]}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save"})]})]})},zL=({character:t,onUpdateCharacter:e})=>{const[n,r]=$.useState(null),i=s=>{let o;if("id"in s)o=(t.customResources||[]).map(l=>l.id===s.id?{...l,name:s.name,max:s.max}:l);else{const l={...s,id:`resource_${Date.now()}`,used:0};o=[...t.customResources||[],l]}e({customResources:o}),r(null)},a=s=>{if(window.confirm("Are you sure you want to delete this resource?")){const o=(t.customResources||[]).filter(l=>l.id!==s);e({customResources:o})}};return p.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-lg",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Other Resources"}),p.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[p.jsx(ku,{className:"w-5 h-5"})," Add Resource"]})]}),n&&p.jsx(VL,{initialData:n==="new"?LL:n,onSave:i,onCancel:()=>r(null)}),p.jsxs("div",{className:"space-y-2",children:[(t.customResources||[]).length===0&&!n&&p.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"No custom resources defined."}),(t.customResources||[]).map(s=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm p-3 flex items-center justify-between",children:[p.jsx("span",{className:"font-semibold text-amber-300",children:s.name}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("span",{className:"text-zinc-400",children:["Max: ",s.max]}),p.jsx("button",{onClick:()=>r(s),className:"text-zinc-400 hover:text-amber-400 p-1",children:p.jsx(Qs,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>a(s.id),className:"text-zinc-500 hover:text-red-400 p-1",children:p.jsx(Xs,{className:"w-4 h-4"})})]})]},s.id))]})]})},Vr=({label:t,value:e,subValue:n,className:r})=>p.jsxs("div",{className:`flex flex-col items-center justify-center p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-center ${r}`,children:[p.jsx("span",{className:"text-2xl sm:text-3xl font-bold font-mono text-white",children:e}),p.jsx("span",{className:"text-xs uppercase tracking-wider text-zinc-400 mt-1",children:t}),n&&p.jsx("span",{className:"text-xs text-zinc-500",children:n})]}),Go=t=>Math.floor((t-10)/2),Ai=t=>t>=0?`+${t}`:String(t),tp=["strength","dexterity","constitution","intelligence","wisdom","charisma"],BL=({label:t,isActive:e,onClick:n,controls:r,id:i})=>p.jsx("button",{id:i,role:"tab","aria-selected":e,"aria-controls":r,onClick:n,className:`px-3 py-2 text-sm font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-zinc-700 text-amber-400 border-b-2 border-amber-400":"text-zinc-400 hover:bg-zinc-800/60 border-b-2 border-transparent"}`,children:t}),jr=({label:t,name:e,type:n,value:r,onChange:i,placeholder:a,className:s})=>p.jsxs("div",{className:s,children:[p.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-zinc-400 capitalize",children:t}),p.jsx("input",{type:n,id:e,name:e,value:r,onChange:i,placeholder:a,className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md shadow-sm py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm"})]}),io=({label:t,name:e,value:n,onChange:r,placeholder:i})=>p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col flex-1 h-full",children:[p.jsx("h3",{className:"text-lg font-semibold text-amber-400 mb-2",children:t}),p.jsx("textarea",{name:e,value:n,onChange:r,className:"w-full bg-zinc-700 border border-zinc-600 rounded-md p-3 text-zinc-200 focus:ring-amber-500 focus:border-amber-500 resize-y flex-grow min-h-[100px]",placeholder:i||`Your character's ${t.toLowerCase()}...`})]}),FL=[{key:"main",label:"Main"},{key:"stats",label:"Stats & Skills"},{key:"combat",label:"Combat & Features"},{key:"bio",label:"Biography & Notes"},{key:"inventory",label:"Inventory"},{key:"spells",label:"Spells"}],kE=()=>{var B;const{characterId:t}=Gx(),e=_d(),{character:n,setCharacter:r,updateCharacter:i}=Ln(),[a,s]=$.useState(!1),[o,l]=$.useState(!1),[h,u]=$.useState(""),[f,d]=$.useState("main"),[m,b]=$.useState(!1),A=window.location.pathname.endsWith("/character/new");$.useEffect(()=>{let P=!0;return(async()=>{let G;t?G=await XS(t):G={...Jc(),id:"temp_new"};const J={...Jc(),...G};P&&r(J)})(),()=>{P=!1}},[t,r]);const D=$.useMemo(()=>n?Math.ceil(n.level/4)+1:0,[n==null?void 0:n.level]),w=async()=>{if(n){s(!0);try{const P=A?`char_${Date.now()}`:n.id,K={...n,id:P,proficiencyBonus:D,initiative:M,lastUpdated:Date.now()},G=await QS(K);A?e(`/character/${G.id}/edit`,{replace:!0}):e(`/character/${G.id}`)}catch(P){console.error("Failed to save character:",P),alert("An error occurred while saving. Please try again.")}finally{s(!1)}}},x=async()=>{n&&!A&&window.confirm(`Are you sure you want to permanently delete ${n.name}?`)&&(await KS(n.id),e("/"))},C=()=>{e(A?"/":n?`/character/${n.id}`:-1)},O=P=>{if(!n)return;const{name:K,value:G,type:J}=P.target;let W=G;J==="number"&&(W=parseInt(G)||0),i({[K]:W})},U=(P,K)=>{n&&r(G=>({...G,currency:{...G.currency,[P]:K}}))},N=(P,K)=>{n&&r(G=>({...G,hp:{...G.hp,[P]:K}}))},_=P=>{if(!n)return;const{value:K}=P.target;r(G=>({...G,hitDice:{...G.hitDice,total:K}}))},g=(P,K)=>{n&&r(G=>({...G,abilityScores:{...G.abilityScores,[P]:K}}))},y=P=>{if(!n)return;const K={...n.savingThrows};K[P].proficient=!K[P].proficient,r(G=>({...G,savingThrows:K}))},T=P=>{if(!n)return;const K=n.skills.map(G=>{if(G.name===P){const J=!G.proficient,W=J?G.expertise:!1;return{...G,proficient:J,expertise:W}}return G});r(G=>({...G,skills:K}))},R=P=>{if(!n)return;const K=n.skills.map(G=>{if(G.name===P){const J=!G.expertise,W=J||G.proficient;return{...G,proficient:W,expertise:J}}return G});r(G=>({...G,skills:K}))},I=P=>{var G;if(!n)return;const K=parseInt(P.target.value,10)||0;i({unarmoredDefense:{base:K,abilities:((G=n.unarmoredDefense)==null?void 0:G.abilities)||[]}})},S=P=>{var J,W;if(!n)return;const K=((J=n.unarmoredDefense)==null?void 0:J.abilities)||[],G=K.includes(P)?K.filter(Y=>Y!==P):[...K,P];i({unarmoredDefense:{base:((W=n.unarmoredDefense)==null?void 0:W.base)??10,abilities:G}})},L=(P,K)=>{if(!n)return;const G={...n.spellSlots};G[P]={...G[P],max:K},r(J=>({...J,spellSlots:G}))},z=async()=>{if(!n)return;l(!0);const P=await DU(n,h);r(K=>({...K,...P})),l(!1)},M=$.useMemo(()=>n?Go(n.abilityScores.dexterity):0,[n==null?void 0:n.abilityScores.dexterity]),{spellSaveDC:k,spellAttackBonus:H}=$.useMemo(()=>{if(!n||!n.spellcastingAbility)return{spellSaveDC:"-",spellAttackBonus:"-"};const P=Go(n.abilityScores[n.spellcastingAbility]);return{spellSaveDC:8+D+P,spellAttackBonus:Ai(D+P)}},[n==null?void 0:n.spellcastingAbility,n==null?void 0:n.abilityScores,D]);return n?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:pt-8",children:[p.jsxs("header",{className:"flex justify-between items-center mb-4 border-b border-zinc-700 pb-4",children:[p.jsxs("button",{onClick:C,className:"flex items-center gap-2 text-zinc-300 hover:text-amber-400 transition-colors",children:[p.jsx(JS,{className:"w-5 h-5"}),A?"Cancel Creation":"Back to Play"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[!A&&p.jsx("button",{onClick:x,className:"p-2 rounded-full bg-red-800/50 hover:bg-red-600 text-red-300 hover:text-white transition-colors","aria-label":"Delete Character",children:p.jsx(Xs,{className:"w-5 h-5"})}),p.jsxs("button",{onClick:w,disabled:a,className:"flex items-center gap-2 px-4 py-2 bg-amber-600 text-white font-bold rounded-lg shadow-md hover:bg-amber-500 transition-colors disabled:bg-zinc-600",children:[p.jsx(JP,{className:"w-5 h-5"}),a?"Saving...":"Save Changes"]})]})]}),p.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 shadow-2xl shadow-amber-900/10 rounded-lg p-4 sm:p-6",children:[p.jsx("div",{role:"tablist","aria-label":"Character Sheet Sections",className:"flex space-x-1 mb-6 border-b border-zinc-700 overflow-x-auto",children:FL.map(P=>p.jsx(BL,{id:`tab-${P.key}`,label:P.label,isActive:f===P.key,onClick:()=>d(P.key),controls:`panel-${P.key}`},P.key))}),p.jsxs("div",{id:"panel-main",role:"tabpanel","aria-labelledby":"tab-main",hidden:f!=="main",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsx("div",{className:"space-y-4 md:col-span-1",children:p.jsxs("div",{className:"space-y-4",children:[p.jsx("label",{className:"block text-sm font-medium text-zinc-400",children:"Character Portrait"}),p.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[p.jsx("span",{className:"inline-block h-24 w-24 rounded-lg overflow-hidden bg-zinc-700",children:n.imageUrl?p.jsx("img",{src:n.imageUrl,alt:"Character portrait",className:"h-full w-full object-cover"}):p.jsx(iy,{className:"h-full w-full text-zinc-500 p-4"})}),p.jsx("button",{type:"button",onClick:()=>b(!0),disabled:A,className:"cursor-pointer rounded-md bg-zinc-700 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-zinc-600 transition-colors disabled:bg-zinc-800 disabled:text-zinc-500 disabled:cursor-not-allowed",children:"Change Portrait"})]}),A&&p.jsx("p",{className:"text-xs text-zinc-400",children:"Save the character to enable the image uploader."})]})}),p.jsx(jr,{label:"Character Name",name:"name",type:"text",value:n.name,onChange:O,placeholder:"e.g., Eldrin"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx(jr,{label:"Class",name:"class",type:"text",value:n.class,onChange:O,placeholder:"e.g., Wizard"}),p.jsx(jr,{label:"Subclass",name:"subclass",type:"text",value:n.subclass,onChange:O,placeholder:"e.g., School of Evocation"})]}),p.jsx(jr,{label:"Race",name:"race",type:"text",value:n.race,onChange:O,placeholder:"e.g., High-Elf"}),p.jsx(jr,{label:"Background",name:"background",type:"text",value:n.background,onChange:O,placeholder:"e.g., Sage"}),p.jsx(jr,{label:"Languages",name:"languages",type:"text",value:n.languages,onChange:O,placeholder:"e.g., Common, Elvish"})]}),p.jsxs("div",{className:"space-y-4 md:col-span-1",children:[p.jsx(jr,{label:"Level",name:"level",type:"number",value:n.level,onChange:O}),p.jsx(jr,{label:"Alignment",name:"alignment",type:"text",value:n.alignment,onChange:O,placeholder:"e.g., Chaotic Good"}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Hit Points"}),p.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"hp-current",className:"block text-xs font-medium text-zinc-500 text-center",children:"Current"}),p.jsx("input",{id:"hp-current",type:"number",value:n.hp.current,onChange:P=>N("current",parseInt(P.target.value)||0),className:"mt-1 w-full bg-zinc-700 border border-zinc-600 rounded-md py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"hp-max",className:"block text-xs font-medium text-zinc-500 text-center",children:"Max"}),p.jsx("input",{id:"hp-max",type:"number",value:n.hp.max,onChange:P=>N("max",parseInt(P.target.value)||0),className:"mt-1 w-full bg-zinc-700 border border-zinc-600 rounded-md py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"hp-temporary",className:"block text-xs font-medium text-zinc-500 text-center",children:"Temporary"}),p.jsx("input",{id:"hp-temporary",type:"number",value:n.hp.temporary,onChange:P=>N("temporary",parseInt(P.target.value)||0),className:"mt-1 w-full bg-zinc-700 border border-zinc-600 rounded-md py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]})]})]}),p.jsx(jr,{label:"Hit Dice",name:"hitDice",type:"text",value:n.hitDice.total,onChange:_,placeholder:"e.g. 1d8"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 md:col-span-1",children:[p.jsxs("div",{className:"col-span-2 bg-zinc-900/50 p-3 rounded-lg",children:[p.jsx("h4",{className:"text-sm font-medium text-zinc-400 mb-2",children:"Unarmored Defense"}),p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(jr,{label:"Base AC",name:"unarmoredBase",type:"number",value:((B=n.unarmoredDefense)==null?void 0:B.base)??10,onChange:I,className:"flex-1"}),p.jsx("span",{className:"pt-6 text-xl text-zinc-400",children:"+"}),p.jsx("div",{className:"flex-1 pt-6 text-center text-zinc-200",children:"Modifiers"})]}),p.jsx("div",{className:"grid grid-cols-3 gap-x-2 gap-y-1",children:tp.map(P=>{var K;return p.jsxs("label",{className:"flex items-center gap-1.5 text-xs cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:((K=n.unarmoredDefense)==null?void 0:K.abilities.includes(P))??!1,onChange:()=>S(P),className:"w-4 h-4 rounded text-amber-600 bg-zinc-800 border-zinc-600 focus:ring-amber-500"}),p.jsx("span",{className:"text-zinc-300 uppercase",children:P.substring(0,3)})]},P)})})]}),p.jsx(Vr,{label:"Initiative",value:Ai(M)}),p.jsx(jr,{label:"Speed",name:"speed",type:"number",value:n.speed,onChange:O,className:"col-span-1"}),p.jsx(Vr,{label:"Proficiency",value:Ai(D)}),p.jsxs("div",{className:"col-span-2",children:[p.jsx("label",{htmlFor:"spellcastingAbility",className:"block text-sm font-medium text-zinc-400",children:"Spellcasting Ability"}),p.jsxs("select",{id:"spellcastingAbility",name:"spellcastingAbility",value:n.spellcastingAbility,onChange:O,className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md shadow-sm py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm",children:[p.jsx("option",{value:"",children:"None"}),tp.map(P=>p.jsx("option",{value:P,className:"capitalize",children:P},P))]})]}),p.jsx(Vr,{label:"Spell Save DC",value:String(k)}),p.jsx(Vr,{label:"Spell Attack",value:String(H)})]})]})]}),p.jsx("div",{id:"panel-stats",role:"tabpanel","aria-labelledby":"tab-stats",hidden:f!=="stats",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:tp.map(P=>{const K=n.abilityScores[P],G=Go(K),J=n.savingThrows[P],W=G+(J.proficient?D:0),Y=n.skills.filter(se=>se.ability===P);return p.jsxs("div",{className:"bg-zinc-700/50 p-3 rounded-lg flex flex-col gap-3",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"flex flex-col items-center justify-center bg-zinc-900/50 p-2 rounded-lg w-20",children:[p.jsx("span",{className:"text-3xl font-bold font-mono text-white",children:Ai(G)}),p.jsx("span",{className:"text-xs uppercase tracking-wider text-zinc-400",children:P.substring(0,3)})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-xl font-cinzel text-amber-400 capitalize",children:P}),p.jsx("input",{type:"number",value:K,onChange:se=>g(P,parseInt(se.target.value)||0),className:"w-full bg-zinc-800 text-center text-lg rounded border border-zinc-600 p-1 focus:ring-amber-500","aria-label":`${P} score`})]})]}),p.jsxs("div",{className:"bg-zinc-800/60 p-2 rounded-md space-y-2",children:[p.jsxs("label",{htmlFor:`saving-throw-${P}`,className:"flex items-center justify-between cursor-pointer text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",id:`saving-throw-${P}`,checked:J.proficient,onChange:()=>y(P),className:"w-4 h-4 rounded-full text-amber-600 bg-zinc-900 border-zinc-600 focus:ring-amber-500"}),p.jsx("span",{children:"Saving Throw"})]}),p.jsx("span",{className:"font-mono font-bold text-lg text-white",children:Ai(W)})]}),Y.map(se=>{const Te=G+(se.proficient?D:0)+(se.expertise?D:0);return p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",id:`skill-prof-${se.name}`,checked:se.proficient,onChange:()=>T(se.name),className:"w-4 h-4 rounded-full text-amber-600 bg-zinc-900 border-zinc-600 focus:ring-amber-500 cursor-pointer"}),p.jsx("input",{type:"checkbox",id:`skill-exp-${se.name}`,checked:se.expertise,onChange:()=>R(se.name),className:"w-4 h-4 rounded-sm text-yellow-300 bg-zinc-900 border-zinc-600 focus:ring-yellow-400 cursor-pointer",title:"Expertise"}),p.jsx("label",{htmlFor:`skill-prof-${se.name}`,className:"cursor-pointer",children:se.name})]}),p.jsx("span",{className:"font-mono font-bold text-lg text-white",children:Ai(Te)})]},se.name)})]})]},P)})})}),p.jsx("div",{id:"panel-combat",role:"tabpanel","aria-labelledby":"tab-combat",hidden:f!=="combat",className:"min-h-[60vh]",children:p.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-full",children:[p.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col",children:p.jsx(UL,{})}),p.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col",children:p.jsx(DL,{})})]})}),p.jsx("div",{id:"panel-bio",role:"tabpanel","aria-labelledby":"tab-bio",hidden:f!=="bio",className:"min-h-[60vh]",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsx(io,{label:"Personality Traits",name:"personalityTraits",value:n.personalityTraits,onChange:O}),p.jsx(io,{label:"Ideals",name:"ideals",value:n.ideals,onChange:O}),p.jsx(io,{label:"Bonds",name:"bonds",value:n.bonds,onChange:O}),p.jsx(io,{label:"Flaws",name:"flaws",value:n.flaws,onChange:O})]}),p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-amber-400 mb-2",children:"AI Personality Generator"}),p.jsxs("div",{className:"p-4 bg-zinc-800 border border-zinc-700 rounded-lg",children:[p.jsx("input",{type:"text",placeholder:"Optional: Add a keyword (e.g., 'tragic', 'grew up an orphan')",value:h,onChange:P=>u(P.target.value),className:"w-full bg-zinc-700 border border-zinc-600 rounded-md p-2 text-sm mb-2 focus:ring-amber-500 focus:border-amber-500"}),p.jsxs("button",{onClick:z,disabled:o,className:"flex w-full justify-center items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition disabled:bg-zinc-600",children:[p.jsx(ZP,{className:"w-4 h-4"}),o?"Generating...":"Generate with AI"]})]})]}),p.jsx(io,{label:"Notes",name:"notes",value:n.notes,onChange:O,placeholder:"Campaign notes, important NPCs, etc."}),p.jsx(io,{label:"DM Notes",name:"dmNotes",value:n.dmNotes,onChange:O,placeholder:"Notes from your DM, or secrets your character knows."})]})]})}),p.jsx("div",{id:"panel-inventory",role:"tabpanel","aria-labelledby":"tab-inventory",hidden:f!=="inventory",className:"min-h-[60vh]",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"lg:col-span-1",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-4",children:"Currency"}),p.jsx("div",{className:"bg-zinc-900/50 p-4 rounded-lg grid grid-cols-3 sm:grid-cols-5 gap-3",children:Object.entries(n.currency).map(([P,K])=>p.jsxs("div",{children:[p.jsx("label",{className:"block text-center text-sm font-medium text-zinc-400 uppercase",children:P}),p.jsx("input",{type:"number",value:K,onChange:G=>U(P,parseInt(G.target.value,10)||0),className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md py-1 px-2 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]},P))})]}),p.jsx("div",{className:"lg:col-span-2",children:p.jsx(kL,{})})]})}),p.jsxs("div",{id:"panel-spells",role:"tabpanel","aria-labelledby":"tab-spells",hidden:f!=="spells",className:"min-h-[60vh] space-y-6",children:[p.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-lg",children:[p.jsx("h4",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Maximum Spell Slots"}),p.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-5 md:grid-cols-9 gap-3",children:Array.from({length:9},(P,K)=>K+1).map(P=>{var K;return p.jsxs("div",{children:[p.jsxs("label",{className:"block text-center text-sm font-medium text-zinc-400",children:["Lvl ",P]}),p.jsx("input",{type:"number",min:"0",value:((K=n.spellSlots[P])==null?void 0:K.max)??0,onChange:G=>L(P,parseInt(G.target.value,10)||0),className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md py-1 px-2 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]},P)})})]}),p.jsx(zL,{character:n,onUpdateCharacter:i}),p.jsx(CL,{})]})]}),p.jsx(xL,{isOpen:m,onClose:()=>b(!1),onImageReady:P=>i({imageUrl:P})})]}):p.jsx("div",{className:"flex justify-center items-center h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})})},HL=t=>Math.floor((t-10)/2),np=t=>t>=0?`+${t}`:String(t),qL=["strength","dexterity","constitution","intelligence","wisdom","charisma"],GL=()=>{const{character:t}=Ln();if(!t)return null;const{proficiencyBonus:e,abilityScores:n,savingThrows:r,skills:i}=t;return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3 text-center",children:"Abilities"}),p.jsx("div",{className:"space-y-3",children:qL.map(a=>{const s=n[a],o=HL(s),l=r[a],h=o+(l.proficient?e:0),u=i.filter(f=>f.ability===a);return p.jsxs("div",{className:"bg-zinc-900/50 p-3 rounded-lg border border-zinc-700/50",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("h4",{className:"text-lg font-cinzel text-amber-400 capitalize",children:a}),p.jsxs("div",{className:"flex items-baseline gap-2",children:[p.jsx("span",{className:"text-3xl font-mono text-white font-bold",children:s}),p.jsxs("span",{className:"text-2xl font-mono text-amber-300 font-bold",children:["(",np(o),")"]})]})]}),p.jsxs("div",{className:"bg-zinc-800/60 p-2 rounded-md space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:`w-3 h-3 rounded-full border-2 ${l.proficient?"bg-amber-400 border-amber-200":"border-zinc-500"}`}),p.jsx("span",{children:"Saving Throw"})]}),p.jsx("span",{className:"font-mono font-bold text-base text-white",children:np(h)})]}),p.jsx("hr",{className:"border-zinc-700"}),u.map(f=>{const d=o+(f.proficient?e:0)+(f.expertise?e:0);let m="border-zinc-500";return f.expertise?m="bg-white border-white":f.proficient&&(m="bg-amber-400 border-amber-200"),p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:`w-3 h-3 rounded-full border-2 ${m}`}),p.jsx("span",{children:f.name})]}),p.jsx("span",{className:"font-mono font-bold text-base text-white",children:np(d)})]},f.name)})]})]},a)})})]})},$L=({spell:t,onToggleExpand:e,isExpanded:n})=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg",children:[p.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-3",onClick:e,children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h4",{className:"font-bold text-amber-300 truncate",title:t.name,children:t.name}),p.jsxs("div",{className:"flex items-center gap-2 text-xs text-zinc-400 mt-1",children:[p.jsx("span",{className:"truncate",title:t.castingTime,children:t.castingTime}),p.jsx("span",{className:"opacity-50",children:"|"}),p.jsx("span",{className:"truncate",title:t.range,children:t.range})]})]}),p.jsx("div",{className:"flex items-center gap-2 pl-2 flex-shrink-0",children:p.jsx("span",{className:"text-xs text-zinc-400 capitalize",children:t.school})})]}),n&&p.jsxs("div",{className:"mt-2 pt-3 border-t border-zinc-600/50 space-y-2 text-sm p-3 bg-zinc-900/30",children:[p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Components:"})," ",t.components]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Duration:"})," ",t.duration]}),p.jsx("p",{className:"text-zinc-300 mt-2 whitespace-pre-wrap",children:t.description})]})]}),YL=()=>{const{character:t}=Ln(),[e,n]=$.useState({}),[r,i]=$.useState(""),a=l=>{n(h=>({...h,[l]:!h[l]}))},s=$.useMemo(()=>t?t.spells.filter(h=>h.name.toLowerCase().includes(r.toLowerCase())).reduce((h,u)=>(h[u.level]=[...h[u.level]||[],u],h[u.level].sort((f,d)=>f.name.localeCompare(d.name)),h),{}):{},[t,r]),o=Object.keys(s).map(Number).sort((l,h)=>l-h);return t?p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col h-auto max-h-[calc(100vh-10rem)]",children:[p.jsx("div",{className:"flex justify-between items-center mb-2",children:p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Spellbook"})}),p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"text",placeholder:"Search spells...",value:r,onChange:l=>i(l.target.value),className:"w-full bg-zinc-700 p-2 rounded-md border border-zinc-600 text-sm focus:ring-amber-500 focus:border-amber-500"})}),p.jsx("div",{className:"space-y-6 overflow-y-auto pr-2 -mr-2 flex-grow",children:t.spells.length===0?p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-center text-zinc-500 text-sm py-8",children:"This character knows no spells."})}):o.length===0?p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-center text-zinc-500 text-sm py-8",children:"No spells match your search."})}):o.map(l=>p.jsxs("div",{children:[p.jsx("h4",{className:"text-xl font-serif text-zinc-300 border-b border-zinc-600 pb-1 mb-3",children:l===0?"Cantrips":`Level ${l}`}),p.jsx("div",{className:"space-y-3",children:s[l].map(h=>p.jsx($L,{spell:h,isExpanded:!!e[h.id],onToggleExpand:()=>a(h.id)},h.id))})]},l))})]}):null},XL=({label:t,isActive:e,onClick:n,id:r,controls:i})=>p.jsx("button",{id:r,role:"tab","aria-selected":e,"aria-controls":i,onClick:n,className:`px-4 py-2 text-sm sm:text-base font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-zinc-800 text-amber-400 border-b-2 border-amber-400":"text-zinc-400 hover:bg-zinc-800/60 border-b-2 border-transparent"}`,children:t}),bR=t=>{if(!t||typeof t!="string")return{total:0,pretty:"Invalid input"};const e=t.replace(/[\s()]/g,"").split("+");let n=0;const r=[],i=/(\d+)d(\d+)/i;for(const a of e){if(!a)continue;const s=a.match(i);if(s){const o=parseInt(s[1],10),l=parseInt(s[2],10);if(isNaN(o)||isNaN(l))continue;const h=Array.from({length:o},()=>Math.floor(Math.random()*l)+1),u=h.reduce((f,d)=>f+d,0);n+=u,r.push(`[${h.join("+")}]`)}else{const o=parseInt(a,10);isNaN(o)||(n+=o,r.push(String(o)))}}return r.length===0?{total:0,pretty:"Invalid Format"}:{total:n,pretty:`${r.join(" + ")} = ${n}`}},QL=()=>{const[t,e]=$.useState(null),{character:n,updateCharacter:r}=Ln(),i=Go(n.abilityScores.constitution),a=$.useMemo(()=>{const l=Go(n.abilityScores.wisdom),h=n.skills.find(f=>f.name==="Perception");let u=0;return h&&(h.expertise?u=n.proficiencyBonus*2:h.proficient&&(u=n.proficiencyBonus)),10+l+u},[n]),s=()=>{if(n.hitDice.used>=n.level)return;const{total:l,pretty:h}=bR(`${n.hitDice.total}+${i}`),u=Math.min(n.hp.max,n.hp.current+Math.max(1,l));e(`${h} HP`),r({hp:{...n.hp,current:u},hitDice:{...n.hitDice,used:n.hitDice.used+1}})},o=()=>{r({hitDice:{...n.hitDice,used:0}}),e(null)};return p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"md:col-span-2 lg:col-span-3 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:[p.jsx(Vr,{label:"Armor Class",value:$.useMemo(()=>$S(n),[n])}),p.jsx(Vr,{label:"Initiative",value:Ai(n.initiative)}),p.jsx(Vr,{label:"Speed",value:`${n.speed}ft`,subValue:`≈ ${Math.round(n.speed*.3)}m`}),p.jsx(Vr,{label:"Proficiency",value:Ai(n.proficiencyBonus)}),p.jsx(Vr,{label:"Passive Perception",value:a,className:"col-span-2 sm:col-span-1"})]}),p.jsx(nV,{}),p.jsx(rV,{}),p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Hit Dice"}),p.jsxs("p",{className:"text-center text-3xl font-bold font-mono text-white mb-3",children:[n.level-n.hitDice.used," / ",n.level]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:s,disabled:n.hitDice.used>=n.level,className:"w-full bg-green-800/80 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md transition-colors disabled:bg-zinc-600 disabled:cursor-not-allowed",children:["Spend (",n.hitDice.total,")"]}),p.jsx("button",{onClick:o,className:"bg-sky-800/80 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-md transition-colors",children:"Reset"})]}),t&&p.jsx("p",{className:"text-center text-amber-300 font-mono mt-3 p-2 bg-zinc-900/50 rounded-md",children:t})]}),p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Languages"}),p.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:n.languages||"None"})]})]})},KL=()=>{const{character:t}=Ln();return p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsx(iV,{items:t.attacks||[]}),p.jsx(aV,{title:"Features & Traits",items:t.featuresAndTraits||[]})]})},WL=()=>{const{character:t,updateCharacter:e}=Ln(),n=t.spellcastingAbility,r=n?Go(t.abilityScores[n]):0,i=n?8+t.proficiencyBonus+r:"-",a=n?t.proficiencyBonus+r:0;return p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3 text-center",children:"Spellcasting"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx(Vr,{label:"Save DC",value:i}),p.jsx(Vr,{label:"Attack Bonus",value:Ai(a)}),p.jsxs("div",{className:"col-span-2 text-center",children:[p.jsx("p",{className:"text-xs uppercase tracking-wider text-zinc-400",children:"Ability"}),p.jsx("p",{className:"text-xl font-bold text-white capitalize",children:n||"None"})]})]})]}),p.jsx(jE,{title:"Spell Slots",slots:t.spellSlots,onSlotChange:s=>e({spellSlots:s})}),t.customResources&&t.customResources.length>0&&p.jsx(jE,{title:"Other Resources",slots:t.customResources,onSlotChange:s=>e({customResources:s}),isCustom:!0})]}),p.jsx("div",{className:"lg:col-span-2",children:p.jsx(YL,{})})]})},ZL=()=>{const{character:t,updateCharacter:e}=Ln(),[n,r]=$.useState(null),i=h=>{const u=t.equipment.find(m=>m.id===h);if(!u)return;const f=!u.equipped,d=t.equipment.map(m=>{if(m.id===h)return{...m,equipped:f};if(f){const b=u.armorType&&u.armorType!=="shield",A=m.equipped&&m.armorType&&m.armorType!=="shield";if(b&&A)return{...m,equipped:!1};if(u.armorType==="shield"&&m.equipped&&m.armorType==="shield")return{...m,equipped:!1}}return m});e({equipment:d})},a=h=>{r(u=>u===h?null:h)},{equippableItems:s,backpackItems:o}=$.useMemo(()=>{const h=[],u=[];return(t.equipment||[]).forEach(f=>{f.armorType?h.push(f):u.push(f)}),{equippableItems:h.sort((f,d)=>f.name.localeCompare(d.name)),backpackItems:u.sort((f,d)=>f.name.localeCompare(d.name))}},[t.equipment]),l=({title:h,items:u})=>p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:h}),u.length===0?p.jsx("p",{className:"text-zinc-500 text-sm text-center py-4",children:"None."}):p.jsx("div",{className:"space-y-2",children:u.map(f=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:[p.jsxs("div",{className:"p-3 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[p.jsx("button",{onClick:()=>a(f.id),className:"flex-shrink-0 text-zinc-400 hover:text-white",children:p.jsx(eR,{className:`w-5 h-5 transition-transform ${n===f.id?"rotate-180":""}`})}),p.jsxs("p",{className:"font-semibold text-amber-300 truncate",title:f.name,children:[f.name," ",p.jsxs("span",{className:"text-xs text-zinc-400",children:["(x",f.quantity,")"]})]})]}),f.armorType&&p.jsx("button",{onClick:()=>i(f.id),className:`px-3 py-1 text-xs font-bold rounded ${f.equipped?"bg-amber-500 text-white":"bg-zinc-600 hover:bg-zinc-500"}`,children:f.equipped?"Equipped":"Equip"})]}),n===f.id&&p.jsxs("div",{className:"p-3 border-t border-zinc-600/50 bg-zinc-900/30 space-y-2",children:[f.armorType&&p.jsxs("p",{children:[p.jsxs("strong",{className:"text-zinc-400 capitalize",children:[f.armorType," Armor"]}),f.armorClass?p.jsxs("span",{className:"text-zinc-300",children:[" (AC: ",f.armorClass,")"]}):""]}),p.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:f.description||"No description."})]})]},f.id))})]});return p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Currency"}),p.jsx("div",{className:"grid grid-cols-3 gap-2 text-center",children:Object.keys(t.currency).map(h=>p.jsxs("div",{children:[p.jsx("p",{className:"text-xl font-mono text-white",children:t.currency[h]}),p.jsx("p",{className:"text-xs uppercase text-zinc-400",children:h})]},h))})]}),p.jsx(l,{title:"Equippable Gear",items:s})]}),p.jsx("div",{className:"lg:col-span-2",children:p.jsx(l,{title:"Backpack",items:o})})]})},JL=()=>{const{character:t}=Ln(),e=({title:n,content:r})=>p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex-grow",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-2",children:n}),p.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:r||"Not set."})]});return p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-6 flex flex-col",children:[p.jsx(e,{title:"Personality Traits",content:t.personalityTraits}),p.jsx(e,{title:"Ideals",content:t.ideals}),p.jsx(e,{title:"Bonds",content:t.bonds}),p.jsx(e,{title:"Flaws",content:t.flaws})]}),p.jsxs("div",{className:"space-y-6 flex flex-col",children:[p.jsx(e,{title:"Character Notes",content:t.notes}),p.jsx(e,{title:"Campaign Info",content:t.dmNotes})]})]})},eV=[{key:"main",label:"Main"},{key:"abilities",label:"Abilities"},{key:"combat",label:"Combat"},{key:"spells",label:"Spells"},{key:"inventory",label:"Inventory"},{key:"info",label:"Info"}],tV=()=>{const{characterId:t}=Gx(),e=_d(),{character:n,setCharacter:r,updateCharacter:i}=Ln(),[a,s]=$.useState("main"),o=$.useRef(!0);return $.useEffect(()=>{if(!t)return;(async()=>{const h=await XS(t);r(h)})()},[t,r]),$.useEffect(()=>{if(o.current){o.current=!1;return}if(n){const l=setTimeout(()=>{QS(n)},1500);return()=>{clearTimeout(l)}}},[n]),n?p.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:pt-8",children:[p.jsxs("header",{className:"flex justify-between items-center mb-6 border-b border-zinc-700 pb-4",children:[p.jsxs("button",{onClick:()=>e("/"),className:"flex items-center gap-2 text-zinc-300 hover:text-amber-400 transition-colors",children:[p.jsx(JS,{className:"w-5 h-5"})," Back to List"]}),p.jsxs("div",{className:"flex items-center gap-4 text-center",children:[n.imageUrl&&p.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border-2 border-zinc-600 shadow-md"}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl sm:text-3xl font-cinzel text-amber-400",children:n.name}),p.jsxs("p",{className:"text-zinc-400 capitalize text-sm",children:[n.race," ",n.class," ",n.subclass&&`(${n.subclass})`," • Level ",n.level," • ",n.alignment]})]})]}),p.jsxs("button",{onClick:()=>e(`/character/${t}/edit`),className:"flex items-center gap-2 px-4 py-2 bg-zinc-700 text-white font-bold rounded-lg shadow-md hover:bg-zinc-600 transition-colors",children:[p.jsx(Qs,{className:"w-5 h-5"})," Edit Sheet"]})]}),p.jsx("div",{role:"tablist","aria-label":"Character View Sections",className:"flex space-x-1 mb-6 border-b border-zinc-700 overflow-x-auto",children:eV.map(l=>p.jsx(XL,{id:`play-tab-${l.key}`,controls:`play-panel-${l.key}`,label:l.label,isActive:a===l.key,onClick:()=>s(l.key)},l.key))}),p.jsxs("div",{className:"bg-zinc-900/50 p-4 sm:p-6 rounded-b-lg rounded-tr-lg",children:[p.jsx("div",{id:"play-panel-main",role:"tabpanel","aria-labelledby":"play-tab-main",style:{display:a==="main"?"block":"none"},children:p.jsx(QL,{})}),p.jsx("div",{id:"play-panel-abilities",role:"tabpanel","aria-labelledby":"play-tab-abilities",style:{display:a==="abilities"?"block":"none"},children:p.jsx(GL,{})}),p.jsx("div",{id:"play-panel-combat",role:"tabpanel","aria-labelledby":"play-tab-combat",style:{display:a==="combat"?"block":"none"},children:p.jsx(KL,{})}),p.jsx("div",{id:"play-panel-spells",role:"tabpanel","aria-labelledby":"play-tab-spells",style:{display:a==="spells"?"block":"none"},children:p.jsx(WL,{})}),p.jsx("div",{id:"play-panel-inventory",role:"tabpanel","aria-labelledby":"play-tab-inventory",style:{display:a==="inventory"?"block":"none"},children:p.jsx(ZL,{})}),p.jsx("div",{id:"play-panel-info",role:"tabpanel","aria-labelledby":"play-tab-info",style:{display:a==="info"?"block":"none"},children:p.jsx(JL,{})})]})]}):p.jsx("div",{className:"flex justify-center items-center h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})})},nV=()=>{const{character:t,updateCharacter:e}=Ln(),{hp:n}=t,[r,i]=$.useState(""),[a,s]=$.useState(""),[o,l]=$.useState(""),h=()=>{const d=parseInt(r,10);if(!isNaN(d)&&d>0){const m=Math.min(d,n.temporary),b=n.temporary-m,A=d-m,D=Math.max(0,n.current-A);e({hp:{...n,current:D,temporary:b}}),i("")}},u=()=>{const d=parseInt(a,10);if(!isNaN(d)&&d>0){const m=Math.min(n.max,n.current+d);e({hp:{...n,current:m}}),s("")}},f=()=>{const d=parseInt(o,10);!isNaN(d)&&d>=0&&(e({hp:{...n,temporary:d}}),l(""))};return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3 text-center",children:"Hit Points"}),p.jsxs("div",{className:"text-center mb-4",children:[p.jsx("span",{className:"text-5xl font-bold text-red-400",children:n.current}),n.temporary>0&&p.jsxs("span",{className:"text-3xl font-bold text-sky-400",title:"Temporary HP",children:[" +",n.temporary]}),p.jsxs("span",{className:"text-2xl text-zinc-400",children:[" / ",n.max]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("input",{type:"number",value:r,onChange:d=>i(d.target.value),onKeyDown:d=>d.key==="Enter"&&h(),placeholder:"Damage",className:"bg-zinc-700 text-center rounded-md p-2 border border-zinc-600 focus:ring-red-500 focus:border-red-500"}),p.jsx("button",{onClick:h,className:"bg-red-800/80 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Apply"})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("input",{type:"number",value:a,onChange:d=>s(d.target.value),onKeyDown:d=>d.key==="Enter"&&u(),placeholder:"Healing",className:"bg-zinc-700 text-center rounded-md p-2 border border-zinc-600 focus:ring-green-500 focus:border-green-500"}),p.jsx("button",{onClick:u,className:"bg-green-800/80 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Apply"})]})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("input",{type:"number",value:o,onChange:d=>l(d.target.value),onKeyDown:d=>d.key==="Enter"&&f(),placeholder:"Set/Replace Temp HP",className:"bg-zinc-700 text-center rounded-md p-2 border border-zinc-600 focus:ring-sky-500 focus:border-sky-500"}),p.jsx("button",{onClick:f,className:"bg-sky-800/80 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Set Temp HP"})]})]})},jE=({title:t,slots:e,onSlotChange:n,isCustom:r})=>{const i=(o,l)=>{if(r){const h=e,u=h.findIndex(b=>b.id===o);if(u===-1)return;const f=h[u],d=l<f.used?l:l+1,m=[...h];m[u]={...f,used:d},n(m)}else{const h=e,u=h[o],f=l<u.used?l:l+1;n({...h,[o]:{...u,used:f}})}},a=r?e:Object.entries(e),s=a.some(o=>r?o.max>0:o[1].max>0);return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:t}),!s&&p.jsx("p",{className:"text-zinc-500 text-sm text-center",children:"No resources available."}),p.jsx("div",{className:"space-y-3",children:a.map(o=>{const[l,h]=r?[o.id,o]:o,u=r?h.name:`Lvl ${l}`;return h.max===0?null:p.jsxs("div",{className:"flex items-center",children:[p.jsxs("span",{className:"font-bold text-zinc-400 w-24 truncate",title:u,children:[u,":"]}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:h.max}).map((f,d)=>p.jsx("button",{onClick:()=>i(l,d),className:`w-5 h-5 rounded-md border-2 transition-colors ${d<h.used?"bg-amber-500 border-amber-400":"bg-zinc-600 border-zinc-500 hover:border-amber-400"}`,"aria-label":`Slot ${d+1} for ${u}. ${d<h.used?"Used":"Available"}`},d))})]},l)})})]})},rV=()=>{const{character:t,updateCharacter:e}=Ln(),{deathSaves:n}=t,r=(i,a)=>{const s=n[i],o=a<s?a:a+1;e({deathSaves:{...n,[i]:o}})};return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Death Saves"}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"font-semibold text-zinc-300",children:"Successes"}),p.jsx("div",{className:"flex gap-2",children:Array.from({length:3}).map((i,a)=>p.jsx("input",{type:"checkbox",checked:a<n.successes,onChange:()=>r("successes",a),className:"w-5 h-5 rounded-full text-green-500 bg-zinc-600 border-zinc-500 focus:ring-green-500"},a))})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"font-semibold text-zinc-300",children:"Failures"}),p.jsx("div",{className:"flex gap-2",children:Array.from({length:3}).map((i,a)=>p.jsx("input",{type:"checkbox",checked:a<n.failures,onChange:()=>r("failures",a),className:"w-5 h-5 rounded-full text-red-500 bg-zinc-600 border-zinc-500 focus:ring-red-500"},a))})]})]})]})},iV=({items:t})=>{const[e,n]=$.useState({}),r=a=>{const s=parseInt(a.bonus)||0,o=Math.floor(Math.random()*20)+1,l=o+s,h=`${o} ${s>=0?"+":"-"} ${Math.abs(s)} = ${l}`;n(u=>({...u,[a.id]:{...u[a.id],atk:h}}))},i=a=>{const{pretty:s}=bR(a.damage);n(o=>({...o,[a.id]:{...o[a.id],dmg:s}}))};return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Attacks & Cantrips"}),p.jsxs("div",{className:"space-y-3 flex-grow overflow-y-auto pr-2 -mr-2 max-h-[calc(50vh-5rem)]",children:[t.length===0&&p.jsx("p",{className:"text-zinc-500 text-sm text-center py-4",children:"None."}),t.map(a=>{var s,o;return p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm p-3 space-y-2",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsx("span",{className:"font-semibold text-amber-300 text-base",children:a.name}),p.jsxs("div",{className:"flex gap-4 font-mono text-zinc-300 text-right",children:[p.jsx("span",{title:"Attack Bonus",children:a.bonus}),p.jsx("span",{title:"Damage",children:a.damage})]})]}),p.jsxs("div",{className:"flex justify-end items-center gap-2",children:[p.jsx("button",{onClick:()=>r(a),className:"text-xs bg-zinc-600 hover:bg-zinc-500 rounded px-3 py-1.5 transition-colors font-bold",children:"ATK"}),p.jsx("button",{onClick:()=>i(a),className:"text-xs bg-red-800/80 hover:bg-red-700 rounded px-3 py-1.5 transition-colors font-bold",children:"DMG"})]}),(((s=e[a.id])==null?void 0:s.atk)||((o=e[a.id])==null?void 0:o.dmg))&&p.jsxs("div",{className:"text-xs text-zinc-300 bg-zinc-900/50 p-2 rounded-md border-l-2 border-amber-500 space-y-1",children:[e[a.id].atk&&p.jsxs("div",{children:[p.jsx("strong",{children:"Attack:"})," ",p.jsx("span",{className:"font-mono text-amber-300",children:e[a.id].atk})]}),e[a.id].dmg&&p.jsxs("div",{children:[p.jsx("strong",{children:"Damage:"})," ",p.jsx("span",{className:"font-mono text-red-400",children:e[a.id].dmg})]})]})]},a.id)})]})]})},aV=({title:t,items:e})=>{const[n,r]=$.useState({});return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:t}),p.jsxs("div",{className:"space-y-2 flex-grow overflow-y-auto pr-2 -mr-2 max-h-[calc(50vh-5rem)]",children:[e.length===0&&p.jsx("p",{className:"text-zinc-500 text-sm text-center py-4",children:"None."}),e.map(i=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:[p.jsx("div",{className:"flex items-center justify-between p-3 cursor-pointer w-full text-left",onClick:()=>i.description&&r(a=>({...a,[i.id]:!a[i.id]})),children:p.jsx("span",{className:"font-semibold text-amber-300",children:i.name})}),n[i.id]&&i.description&&p.jsx("div",{className:"p-3 border-t border-zinc-600/50 bg-zinc-900/30",children:p.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:i.description})})]},i.id))]})]})};function sV(){const t=Kx();if(il(t))return p.jsxs("div",{className:"text-center p-8",children:[p.jsxs("h1",{className:"text-2xl font-bold text-red-500",children:[t.status," ",t.statusText]}),p.jsx("p",{className:"text-zinc-400",children:t.data})]});const e=t instanceof Error?t.message:"Unknown error";return p.jsxs("div",{className:"text-center p-8",children:[p.jsx("h1",{className:"text-2xl font-bold text-red-500",children:"Something went wrong"}),p.jsx("p",{className:"text-zinc-400",children:e})]})}function oV(){return p.jsxs("div",{className:"text-center p-8",children:[p.jsx("h1",{className:"text-2xl font-bold text-red-500",children:"404 Not Found"}),p.jsx("p",{className:"text-zinc-400",children:"The page you are looking for does not exist."})]})}const lV=iD([{path:"/",element:p.jsx(iU,{}),errorElement:p.jsx(sV,{}),children:[{index:!0,element:p.jsx(sU,{})},{path:"character/new",element:p.jsx(Wm,{children:p.jsx(kE,{})})},{path:"character/:characterId/edit",element:p.jsx(Wm,{children:p.jsx(kE,{})})},{path:"character/:characterId",element:p.jsx(Wm,{children:p.jsx(tV,{})})},{path:"*",element:p.jsx(oV,{})}]}]),ER=document.getElementById("root");if(!ER)throw new Error("Could not find root element to mount to");UI.createRoot(ER).render(p.jsx(mo.StrictMode,{children:p.jsx(YP,{children:p.jsx(dD,{router:lV})})}));
