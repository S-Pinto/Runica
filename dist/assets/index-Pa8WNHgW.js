(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function LE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var OE={exports:{}},Mf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eb=Symbol.for("react.transitional.element"),Cb=Symbol.for("react.fragment");function FE(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:Eb,type:t,key:i,ref:e!==void 0?e:null,props:n}}Mf.Fragment=Cb;Mf.jsx=FE;Mf.jsxs=FE;OE.exports=Mf;var v=OE.exports,zE={exports:{}},he={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dp=Symbol.for("react.transitional.element"),Ab=Symbol.for("react.portal"),Sb=Symbol.for("react.fragment"),wb=Symbol.for("react.strict_mode"),xb=Symbol.for("react.profiler"),bb=Symbol.for("react.consumer"),Ib=Symbol.for("react.context"),Rb=Symbol.for("react.forward_ref"),Nb=Symbol.for("react.suspense"),Mb=Symbol.for("react.memo"),BE=Symbol.for("react.lazy"),cv=Symbol.iterator;function Db(t){return t===null||typeof t!="object"?null:(t=cv&&t[cv]||t["@@iterator"],typeof t=="function"?t:null)}var qE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GE=Object.assign,HE={};function jo(t,e,n){this.props=t,this.context=e,this.refs=HE,this.updater=n||qE}jo.prototype.isReactComponent={};jo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $E(){}$E.prototype=jo.prototype;function hp(t,e,n){this.props=t,this.context=e,this.refs=HE,this.updater=n||qE}var mp=hp.prototype=new $E;mp.constructor=hp;GE(mp,jo.prototype);mp.isPureReactComponent=!0;var fv=Array.isArray,Xe={H:null,A:null,T:null,S:null,V:null},YE=Object.prototype.hasOwnProperty;function pp(t,e,n,i,r,s){return n=s.ref,{$$typeof:dp,type:t,key:e,ref:n!==void 0?n:null,props:s}}function Pb(t,e){return pp(t.type,e,void 0,void 0,void 0,t.props)}function gp(t){return typeof t=="object"&&t!==null&&t.$$typeof===dp}function Vb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var dv=/\/+/g;function Vd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Vb(""+t.key):e.toString(36)}function hv(){}function kb(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(hv,hv):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function js(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"bigint":case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case dp:case Ab:o=!0;break;case BE:return o=t._init,js(o(t._payload),e,n,i,r)}}if(o)return r=r(t),o=i===""?"."+Vd(t,0):i,fv(r)?(n="",o!=null&&(n=o.replace(dv,"$&/")+"/"),js(r,e,n,"",function(f){return f})):r!=null&&(gp(r)&&(r=Pb(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(dv,"$&/")+"/")+o)),e.push(r)),1;o=0;var a=i===""?".":i+":";if(fv(t))for(var c=0;c<t.length;c++)i=t[c],s=a+Vd(i,c),o+=js(i,e,n,s,r);else if(c=Db(t),typeof c=="function")for(t=c.call(t),c=0;!(i=t.next()).done;)i=i.value,s=a+Vd(i,c++),o+=js(i,e,n,s,r);else if(s==="object"){if(typeof t.then=="function")return js(kb(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return o}function wu(t,e,n){if(t==null)return t;var i=[],r=0;return js(t,i,"","",function(s){return e.call(n,s,r++)}),i}function Ub(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mv=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Lb(){}he.Children={map:wu,forEach:function(t,e,n){wu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wu(t,function(){e++}),e},toArray:function(t){return wu(t,function(e){return e})||[]},only:function(t){if(!gp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=jo;he.Fragment=Sb;he.Profiler=xb;he.PureComponent=hp;he.StrictMode=wb;he.Suspense=Nb;he.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Xe;he.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Xe.H.useMemoCache(t)}};he.cache=function(t){return function(){return t.apply(null,arguments)}};he.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=GE({},t.props),r=t.key,s=void 0;if(e!=null)for(o in e.ref!==void 0&&(s=void 0),e.key!==void 0&&(r=""+e.key),e)!YE.call(e,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&e.ref===void 0||(i[o]=e[o]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),c=0;c<o;c++)a[c]=arguments[c+2];i.children=a}return pp(t.type,r,void 0,void 0,s,i)};he.createContext=function(t){return t={$$typeof:Ib,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:bb,_context:t},t};he.createElement=function(t,e,n){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)YE.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var a=Array(o),c=0;c<o;c++)a[c]=arguments[c+2];r.children=a}if(t&&t.defaultProps)for(i in o=t.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return pp(t,s,void 0,void 0,null,r)};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:Rb,render:t}};he.isValidElement=gp;he.lazy=function(t){return{$$typeof:BE,_payload:{_status:-1,_result:t},_init:Ub}};he.memo=function(t,e){return{$$typeof:Mb,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=Xe.T,n={};Xe.T=n;try{var i=t(),r=Xe.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Lb,mv)}catch(s){mv(s)}finally{Xe.T=e}};he.unstable_useCacheRefresh=function(){return Xe.H.useCacheRefresh()};he.use=function(t){return Xe.H.use(t)};he.useActionState=function(t,e,n){return Xe.H.useActionState(t,e,n)};he.useCallback=function(t,e){return Xe.H.useCallback(t,e)};he.useContext=function(t){return Xe.H.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t,e){return Xe.H.useDeferredValue(t,e)};he.useEffect=function(t,e,n){var i=Xe.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(t,e)};he.useId=function(){return Xe.H.useId()};he.useImperativeHandle=function(t,e,n){return Xe.H.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return Xe.H.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return Xe.H.useLayoutEffect(t,e)};he.useMemo=function(t,e){return Xe.H.useMemo(t,e)};he.useOptimistic=function(t,e){return Xe.H.useOptimistic(t,e)};he.useReducer=function(t,e,n){return Xe.H.useReducer(t,e,n)};he.useRef=function(t){return Xe.H.useRef(t)};he.useState=function(t){return Xe.H.useState(t)};he.useSyncExternalStore=function(t,e,n){return Xe.H.useSyncExternalStore(t,e,n)};he.useTransition=function(){return Xe.H.useTransition()};he.version="19.1.0";zE.exports=he;var se=zE.exports;const Ob=LE(se);var KE={exports:{}},Df={},JE={exports:{}},QE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,k){var $=V.length;V.push(k);e:for(;0<$;){var B=$-1>>>1,K=V[B];if(0<r(K,k))V[B]=k,V[$]=K,$=B;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var k=V[0],$=V.pop();if($!==k){V[0]=$;e:for(var B=0,K=V.length,ne=K>>>1;B<ne;){var z=2*(B+1)-1,Q=V[z],H=z+1,Y=V[H];if(0>r(Q,$))H<K&&0>r(Y,Q)?(V[B]=Y,V[H]=$,B=H):(V[B]=Q,V[z]=$,B=z);else if(H<K&&0>r(Y,$))V[B]=Y,V[H]=$,B=H;else break e}}return k}function r(V,k){var $=V.sortIndex-k.sortIndex;return $!==0?$:V.id-k.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],f=[],d=1,m=null,p=3,g=!1,E=!1,x=!1,P=!1,A=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function D(V){for(var k=n(f);k!==null;){if(k.callback===null)i(f);else if(k.startTime<=V)i(f),k.sortIndex=k.expirationTime,e(c,k);else break;k=n(f)}}function O(V){if(x=!1,D(V),!E)if(n(c)!==null)E=!0,L||(L=!0,M());else{var k=n(f);k!==null&&G(O,k.startTime-V)}}var L=!1,b=-1,_=5,T=-1;function S(){return P?!0:!(t.unstable_now()-T<_)}function I(){if(P=!1,L){var V=t.unstable_now();T=V;var k=!0;try{e:{E=!1,x&&(x=!1,w(b),b=-1),g=!0;var $=p;try{t:{for(D(V),m=n(c);m!==null&&!(m.expirationTime>V&&S());){var B=m.callback;if(typeof B=="function"){m.callback=null,p=m.priorityLevel;var K=B(m.expirationTime<=V);if(V=t.unstable_now(),typeof K=="function"){m.callback=K,D(V),k=!0;break t}m===n(c)&&i(c),D(V)}else i(c);m=n(c)}if(m!==null)k=!0;else{var ne=n(f);ne!==null&&G(O,ne.startTime-V),k=!1}}break e}finally{m=null,p=$,g=!1}k=void 0}}finally{k?M():L=!1}}}var M;if(typeof N=="function")M=function(){N(I)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,F=R.port2;R.port1.onmessage=I,M=function(){F.postMessage(null)}}else M=function(){A(I,0)};function G(V,k){b=A(function(){V(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(V){switch(p){case 1:case 2:case 3:var k=3;break;default:k=p}var $=p;p=k;try{return V()}finally{p=$}},t.unstable_requestPaint=function(){P=!0},t.unstable_runWithPriority=function(V,k){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var $=p;p=V;try{return k()}finally{p=$}},t.unstable_scheduleCallback=function(V,k,$){var B=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?B+$:B):$=B,V){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=$+K,V={id:d++,callback:k,priorityLevel:V,startTime:$,expirationTime:K,sortIndex:-1},$>B?(V.sortIndex=$,e(f,V),n(c)===null&&V===n(f)&&(x?(w(b),b=-1):x=!0,G(O,$-B))):(V.sortIndex=K,e(c,V),E||g||(E=!0,L||(L=!0,M()))),V},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(V){var k=p;return function(){var $=p;p=k;try{return V.apply(this,arguments)}finally{p=$}}}})(QE);JE.exports=QE;var Fb=JE.exports,XE={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb=se;function jE(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function rr(){}var Wt={d:{f:rr,r:function(){throw Error(jE(522))},D:rr,C:rr,L:rr,m:rr,X:rr,S:rr,M:rr},p:0,findDOMNode:null},Bb=Symbol.for("react.portal");function qb(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bb,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var qa=zb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Pf(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Wt;Zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(jE(299));return qb(t,e,null,n)};Zt.flushSync=function(t){var e=qa.T,n=Wt.p;try{if(qa.T=null,Wt.p=2,t)return t()}finally{qa.T=e,Wt.p=n,Wt.d.f()}};Zt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Wt.d.C(t,e))};Zt.prefetchDNS=function(t){typeof t=="string"&&Wt.d.D(t)};Zt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Pf(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Wt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&Wt.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Zt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Pf(e.as,e.crossOrigin);Wt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Wt.d.M(t)};Zt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Pf(n,e.crossOrigin);Wt.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Zt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Pf(e.as,e.crossOrigin);Wt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Wt.d.m(t)};Zt.requestFormReset=function(t){Wt.d.r(t)};Zt.unstable_batchedUpdates=function(t,e){return t(e)};Zt.useFormState=function(t,e,n){return qa.H.useFormState(t,e,n)};Zt.useFormStatus=function(){return qa.H.useHostTransitionStatus()};Zt.version="19.1.0";function WE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WE)}catch(t){console.error(t)}}WE(),XE.exports=Zt;var Gb=XE.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var At=Fb,ZE=se,Hb=Gb;function W(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function eC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pv(t){if(Pl(t)!==t)throw Error(W(188))}function $b(t){var e=t.alternate;if(!e){if(e=Pl(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return pv(r),t;if(s===i)return pv(r),e;s=s.sibling}throw Error(W(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==i)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function nC(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=nC(t),e!==null)return e;t=t.sibling}return null}var Ke=Object.assign,Yb=Symbol.for("react.element"),xu=Symbol.for("react.transitional.element"),Va=Symbol.for("react.portal"),so=Symbol.for("react.fragment"),iC=Symbol.for("react.strict_mode"),Ph=Symbol.for("react.profiler"),Kb=Symbol.for("react.provider"),rC=Symbol.for("react.consumer"),Di=Symbol.for("react.context"),yp=Symbol.for("react.forward_ref"),Vh=Symbol.for("react.suspense"),kh=Symbol.for("react.suspense_list"),vp=Symbol.for("react.memo"),lr=Symbol.for("react.lazy"),Uh=Symbol.for("react.activity"),Jb=Symbol.for("react.memo_cache_sentinel"),gv=Symbol.iterator;function wa(t){return t===null||typeof t!="object"?null:(t=gv&&t[gv]||t["@@iterator"],typeof t=="function"?t:null)}var Qb=Symbol.for("react.client.reference");function Lh(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Qb?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case so:return"Fragment";case Ph:return"Profiler";case iC:return"StrictMode";case Vh:return"Suspense";case kh:return"SuspenseList";case Uh:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Va:return"Portal";case Di:return(t.displayName||"Context")+".Provider";case rC:return(t._context.displayName||"Context")+".Consumer";case yp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vp:return e=t.displayName||null,e!==null?e:Lh(t.type)||"Memo";case lr:e=t._payload,t=t._init;try{return Lh(t(e))}catch{}}return null}var ka=Array.isArray,le=ZE.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe=Hb.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fs={pending:!1,data:null,method:null,action:null},Oh=[],oo=-1;function Ei(t){return{current:t}}function Nt(t){0>oo||(t.current=Oh[oo],Oh[oo]=null,oo--)}function je(t,e){oo++,Oh[oo]=t.current,t.current=e}var ui=Ei(null),cl=Ei(null),Cr=Ei(null),wc=Ei(null);function xc(t,e){switch(je(Cr,e),je(cl,t),je(ui,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?E0(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=E0(e),t=ES(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Nt(ui),je(ui,t)}function Vo(){Nt(ui),Nt(cl),Nt(Cr)}function Fh(t){t.memoizedState!==null&&je(wc,t);var e=ui.current,n=ES(e,t.type);e!==n&&(je(cl,t),je(ui,n))}function bc(t){cl.current===t&&(Nt(ui),Nt(cl)),wc.current===t&&(Nt(wc),Tl._currentValue=fs)}var zh=Object.prototype.hasOwnProperty,_p=At.unstable_scheduleCallback,kd=At.unstable_cancelCallback,Xb=At.unstable_shouldYield,jb=At.unstable_requestPaint,ci=At.unstable_now,Wb=At.unstable_getCurrentPriorityLevel,sC=At.unstable_ImmediatePriority,oC=At.unstable_UserBlockingPriority,Ic=At.unstable_NormalPriority,Zb=At.unstable_LowPriority,aC=At.unstable_IdlePriority,eI=At.log,tI=At.unstable_setDisableYieldValue,Vl=null,Cn=null;function yr(t){if(typeof eI=="function"&&tI(t),Cn&&typeof Cn.setStrictMode=="function")try{Cn.setStrictMode(Vl,t)}catch{}}var An=Math.clz32?Math.clz32:rI,nI=Math.log,iI=Math.LN2;function rI(t){return t>>>=0,t===0?32:31-(nI(t)/iI|0)|0}var bu=256,Iu=4194304;function is(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Vf(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes;t=t.warmLanes;var a=i&134217727;return a!==0?(i=a&~s,i!==0?r=is(i):(o&=a,o!==0?r=is(o):n||(n=a&~t,n!==0&&(r=is(n))))):(a=i&~s,a!==0?r=is(a):o!==0?r=is(o):n||(n=i&~t,n!==0&&(r=is(n)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:r}function kl(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function sI(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lC(){var t=bu;return bu<<=1,!(bu&4194048)&&(bu=256),t}function uC(){var t=Iu;return Iu<<=1,!(Iu&62914560)&&(Iu=4194304),t}function Ud(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ul(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function oI(t,e,n,i,r,s){var o=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var a=t.entanglements,c=t.expirationTimes,f=t.hiddenUpdates;for(n=o&~n;0<n;){var d=31-An(n),m=1<<d;a[d]=0,c[d]=-1;var p=f[d];if(p!==null)for(f[d]=null,d=0;d<p.length;d++){var g=p[d];g!==null&&(g.lane&=-536870913)}n&=~m}i!==0&&cC(t,i,0),s!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=s&~(o&~e))}function cC(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-An(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&4194090}function fC(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-An(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function Tp(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ep(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function dC(){var t=xe.p;return t!==0?t:(t=window.event,t===void 0?32:MS(t.type))}function aI(t,e){var n=xe.p;try{return xe.p=t,e()}finally{xe.p=n}}var Yr=Math.random().toString(36).slice(2),$t="__reactFiber$"+Yr,cn="__reactProps$"+Yr,Wo="__reactContainer$"+Yr,Bh="__reactEvents$"+Yr,lI="__reactListeners$"+Yr,uI="__reactHandles$"+Yr,yv="__reactResources$"+Yr,Ll="__reactMarker$"+Yr;function Cp(t){delete t[$t],delete t[cn],delete t[Bh],delete t[lI],delete t[uI]}function ao(t){var e=t[$t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wo]||n[$t]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=S0(t);t!==null;){if(n=t[$t])return n;t=S0(t)}return e}t=n,n=t.parentNode}return null}function Zo(t){if(t=t[$t]||t[Wo]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function Ua(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(W(33))}function To(t){var e=t[yv];return e||(e=t[yv]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function It(t){t[Ll]=!0}var hC=new Set,mC={};function Ms(t,e){ko(t,e),ko(t+"Capture",e)}function ko(t,e){for(mC[t]=e,t=0;t<e.length;t++)hC.add(e[t])}var cI=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vv={},_v={};function fI(t){return zh.call(_v,t)?!0:zh.call(vv,t)?!1:cI.test(t)?_v[t]=!0:(vv[t]=!0,!1)}function ju(t,e,n){if(fI(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Ru(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function bi(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}var Ld,Tv;function Ws(t){if(Ld===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ld=e&&e[1]||"",Tv=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ld+t+Tv}var Od=!1;function Fd(t,e){if(!t||Od)return"";Od=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(g){var p=g}Reflect.construct(t,[],m)}else{try{m.call()}catch(g){p=g}t.call(m.prototype)}}else{try{throw Error()}catch(g){p=g}(m=t())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(g){if(g&&p&&typeof g.stack=="string")return[g.stack,p.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var c=o.split(`
`),f=a.split(`
`);for(r=i=0;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;for(;r<f.length&&!f[r].includes("DetermineComponentFrameRoot");)r++;if(i===c.length||r===f.length)for(i=c.length-1,r=f.length-1;1<=i&&0<=r&&c[i]!==f[r];)r--;for(;1<=i&&0<=r;i--,r--)if(c[i]!==f[r]){if(i!==1||r!==1)do if(i--,r--,0>r||c[i]!==f[r]){var d=`
`+c[i].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=i&&0<=r);break}}}finally{Od=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Ws(n):""}function dI(t){switch(t.tag){case 26:case 27:case 5:return Ws(t.type);case 16:return Ws("Lazy");case 13:return Ws("Suspense");case 19:return Ws("SuspenseList");case 0:case 15:return Fd(t.type,!1);case 11:return Fd(t.type.render,!1);case 1:return Fd(t.type,!0);case 31:return Ws("Activity");default:return""}}function Ev(t){try{var e="";do e+=dI(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Dn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hI(t){var e=pC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rc(t){t._valueTracker||(t._valueTracker=hI(t))}function gC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=pC(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Nc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var mI=/[\n"\\]/g;function kn(t){return t.replace(mI,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function qh(t,e,n,i,r,s,o,a){t.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.type=o:t.removeAttribute("type"),e!=null?o==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Dn(e)):t.value!==""+Dn(e)&&(t.value=""+Dn(e)):o!=="submit"&&o!=="reset"||t.removeAttribute("value"),e!=null?Gh(t,o,Dn(e)):n!=null?Gh(t,o,Dn(n)):i!=null&&t.removeAttribute("value"),r==null&&s!=null&&(t.defaultChecked=!!s),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.name=""+Dn(a):t.removeAttribute("name")}function yC(t,e,n,i,r,s,o,a){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null))return;n=n!=null?""+Dn(n):"",e=e!=null?""+Dn(e):n,a||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=a?t.checked:!!i,t.defaultChecked=!!i,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.name=o)}function Gh(t,e,n){e==="number"&&Nc(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Eo(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Dn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function vC(t,e,n){if(e!=null&&(e=""+Dn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Dn(n):""}function _C(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(W(92));if(ka(i)){if(1<i.length)throw Error(W(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Dn(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i)}function Uo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pI=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cv(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||pI.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function TC(t,e,n){if(e!=null&&typeof e!="object")throw Error(W(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&Cv(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&Cv(t,s,e[s])}function Ap(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gI=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yI=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wu(t){return yI.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Hh=null;function Sp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lo=null,Co=null;function Av(t){var e=Zo(t);if(e&&(t=e.stateNode)){var n=t[cn]||null;e:switch(t=e.stateNode,e.type){case"input":if(qh(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+kn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[cn]||null;if(!r)throw Error(W(90));qh(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&gC(i)}break e;case"textarea":vC(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Eo(t,!!n.multiple,e,!1)}}}var zd=!1;function EC(t,e,n){if(zd)return t(e,n);zd=!0;try{var i=t(e);return i}finally{if(zd=!1,(lo!==null||Co!==null)&&(Hf(),lo&&(e=lo,t=Co,Co=lo=null,Av(e),t)))for(e=0;e<t.length;e++)Av(t[e])}}function fl(t,e){var n=t.stateNode;if(n===null)return null;var i=n[cn]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$h=!1;if(qi)try{var xa={};Object.defineProperty(xa,"passive",{get:function(){$h=!0}}),window.addEventListener("test",xa,xa),window.removeEventListener("test",xa,xa)}catch{$h=!1}var vr=null,wp=null,Zu=null;function CC(){if(Zu)return Zu;var t,e=wp,n=e.length,i,r="value"in vr?vr.value:vr.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Zu=r.slice(t,1<i?1-i:void 0)}function ec(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nu(){return!0}function Sv(){return!1}function fn(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Nu:Sv,this.isPropagationStopped=Sv,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nu)},persist:function(){},isPersistent:Nu}),e}var Ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kf=fn(Ds),Ol=Ke({},Ds,{view:0,detail:0}),vI=fn(Ol),Bd,qd,ba,Uf=Ke({},Ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ba&&(ba&&t.type==="mousemove"?(Bd=t.screenX-ba.screenX,qd=t.screenY-ba.screenY):qd=Bd=0,ba=t),Bd)},movementY:function(t){return"movementY"in t?t.movementY:qd}}),wv=fn(Uf),_I=Ke({},Uf,{dataTransfer:0}),TI=fn(_I),EI=Ke({},Ol,{relatedTarget:0}),Gd=fn(EI),CI=Ke({},Ds,{animationName:0,elapsedTime:0,pseudoElement:0}),AI=fn(CI),SI=Ke({},Ds,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wI=fn(SI),xI=Ke({},Ds,{data:0}),xv=fn(xI),bI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},II={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=RI[t])?!!e[t]:!1}function xp(){return NI}var MI=Ke({},Ol,{key:function(t){if(t.key){var e=bI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ec(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?II[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xp,charCode:function(t){return t.type==="keypress"?ec(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ec(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),DI=fn(MI),PI=Ke({},Uf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bv=fn(PI),VI=Ke({},Ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xp}),kI=fn(VI),UI=Ke({},Ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),LI=fn(UI),OI=Ke({},Uf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FI=fn(OI),zI=Ke({},Ds,{newState:0,oldState:0}),BI=fn(zI),qI=[9,13,27,32],bp=qi&&"CompositionEvent"in window,Ga=null;qi&&"documentMode"in document&&(Ga=document.documentMode);var GI=qi&&"TextEvent"in window&&!Ga,AC=qi&&(!bp||Ga&&8<Ga&&11>=Ga),Iv=" ",Rv=!1;function SC(t,e){switch(t){case"keyup":return qI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var uo=!1;function HI(t,e){switch(t){case"compositionend":return wC(e);case"keypress":return e.which!==32?null:(Rv=!0,Iv);case"textInput":return t=e.data,t===Iv&&Rv?null:t;default:return null}}function $I(t,e){if(uo)return t==="compositionend"||!bp&&SC(t,e)?(t=CC(),Zu=wp=vr=null,uo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return AC&&e.locale!=="ko"?null:e.data;default:return null}}var YI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YI[t.type]:e==="textarea"}function xC(t,e,n,i){lo?Co?Co.push(i):Co=[i]:lo=i,e=Jc(e,"onChange"),0<e.length&&(n=new kf("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ha=null,dl=null;function KI(t){vS(t,0)}function Lf(t){var e=Ua(t);if(gC(e))return t}function Mv(t,e){if(t==="change")return e}var bC=!1;if(qi){var Hd;if(qi){var $d="oninput"in document;if(!$d){var Dv=document.createElement("div");Dv.setAttribute("oninput","return;"),$d=typeof Dv.oninput=="function"}Hd=$d}else Hd=!1;bC=Hd&&(!document.documentMode||9<document.documentMode)}function Pv(){Ha&&(Ha.detachEvent("onpropertychange",IC),dl=Ha=null)}function IC(t){if(t.propertyName==="value"&&Lf(dl)){var e=[];xC(e,dl,t,Sp(t)),EC(KI,e)}}function JI(t,e,n){t==="focusin"?(Pv(),Ha=e,dl=n,Ha.attachEvent("onpropertychange",IC)):t==="focusout"&&Pv()}function QI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lf(dl)}function XI(t,e){if(t==="click")return Lf(e)}function jI(t,e){if(t==="input"||t==="change")return Lf(e)}function WI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bn=typeof Object.is=="function"?Object.is:WI;function hl(t,e){if(bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!zh.call(e,r)||!bn(t[r],e[r]))return!1}return!0}function Vv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kv(t,e){var n=Vv(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vv(n)}}function RC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?RC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function NC(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Nc(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nc(t.document)}return e}function Ip(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var ZI=qi&&"documentMode"in document&&11>=document.documentMode,co=null,Yh=null,$a=null,Kh=!1;function Uv(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kh||co==null||co!==Nc(i)||(i=co,"selectionStart"in i&&Ip(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),$a&&hl($a,i)||($a=i,i=Jc(Yh,"onSelect"),0<i.length&&(e=new kf("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=co)))}function ns(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fo={animationend:ns("Animation","AnimationEnd"),animationiteration:ns("Animation","AnimationIteration"),animationstart:ns("Animation","AnimationStart"),transitionrun:ns("Transition","TransitionRun"),transitionstart:ns("Transition","TransitionStart"),transitioncancel:ns("Transition","TransitionCancel"),transitionend:ns("Transition","TransitionEnd")},Yd={},MC={};qi&&(MC=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function Ps(t){if(Yd[t])return Yd[t];if(!fo[t])return t;var e=fo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in MC)return Yd[t]=e[n];return t}var DC=Ps("animationend"),PC=Ps("animationiteration"),VC=Ps("animationstart"),eR=Ps("transitionrun"),tR=Ps("transitionstart"),nR=Ps("transitioncancel"),kC=Ps("transitionend"),UC=new Map,Jh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jh.push("scrollEnd");function ti(t,e){UC.set(t,e),Ms(e,[t])}var Lv=new WeakMap;function Un(t,e){if(typeof t=="object"&&t!==null){var n=Lv.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Ev(e)},Lv.set(t,e),e)}return{value:t,source:e,stack:Ev(e)}}var Mn=[],ho=0,Rp=0;function Of(){for(var t=ho,e=Rp=ho=0;e<t;){var n=Mn[e];Mn[e++]=null;var i=Mn[e];Mn[e++]=null;var r=Mn[e];Mn[e++]=null;var s=Mn[e];if(Mn[e++]=null,i!==null&&r!==null){var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}s!==0&&LC(n,r,s)}}function Ff(t,e,n,i){Mn[ho++]=t,Mn[ho++]=e,Mn[ho++]=n,Mn[ho++]=i,Rp|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Np(t,e,n,i){return Ff(t,e,n,i),Mc(t)}function ea(t,e){return Ff(t,null,null,e),Mc(t)}function LC(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(r=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,r&&e!==null&&(r=31-An(n),t=s.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),s):null}function Mc(t){if(50<tl)throw tl=0,pm=null,Error(W(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var mo={};function iR(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,e,n,i){return new iR(t,e,n,i)}function Mp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fi(t,e){var n=t.alternate;return n===null?(n=_n(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function OC(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function tc(t,e,n,i,r,s){var o=0;if(i=t,typeof t=="function")Mp(t)&&(o=1);else if(typeof t=="string")o=s2(t,n,ui.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Uh:return t=_n(31,n,e,r),t.elementType=Uh,t.lanes=s,t;case so:return ds(n.children,r,s,e);case iC:o=8,r|=24;break;case Ph:return t=_n(12,n,e,r|2),t.elementType=Ph,t.lanes=s,t;case Vh:return t=_n(13,n,e,r),t.elementType=Vh,t.lanes=s,t;case kh:return t=_n(19,n,e,r),t.elementType=kh,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Kb:case Di:o=10;break e;case rC:o=9;break e;case yp:o=11;break e;case vp:o=14;break e;case lr:o=16,i=null;break e}o=29,n=Error(W(130,t===null?"null":typeof t,"")),i=null}return e=_n(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function ds(t,e,n,i){return t=_n(7,t,i,e),t.lanes=n,t}function Kd(t,e,n){return t=_n(6,t,null,e),t.lanes=n,t}function Jd(t,e,n){return e=_n(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var po=[],go=0,Dc=null,Pc=0,Pn=[],Vn=0,hs=null,Pi=1,Vi="";function rs(t,e){po[go++]=Pc,po[go++]=Dc,Dc=t,Pc=e}function FC(t,e,n){Pn[Vn++]=Pi,Pn[Vn++]=Vi,Pn[Vn++]=hs,hs=t;var i=Pi;t=Vi;var r=32-An(i)-1;i&=~(1<<r),n+=1;var s=32-An(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Pi=1<<32-An(e)+r|n<<r|i,Vi=s+t}else Pi=1<<s|n<<r|i,Vi=t}function Dp(t){t.return!==null&&(rs(t,1),FC(t,1,0))}function Pp(t){for(;t===Dc;)Dc=po[--go],po[go]=null,Pc=po[--go],po[go]=null;for(;t===hs;)hs=Pn[--Vn],Pn[Vn]=null,Vi=Pn[--Vn],Pn[Vn]=null,Pi=Pn[--Vn],Pn[Vn]=null}var jt=null,it=null,we=!1,ms=null,ai=!1,Qh=Error(W(519));function Es(t){var e=Error(W(418,""));throw ml(Un(e,t)),Qh}function Ov(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[$t]=t,e[cn]=i,n){case"dialog":ge("cancel",e),ge("close",e);break;case"iframe":case"object":case"embed":ge("load",e);break;case"video":case"audio":for(n=0;n<yl.length;n++)ge(yl[n],e);break;case"source":ge("error",e);break;case"img":case"image":case"link":ge("error",e),ge("load",e);break;case"details":ge("toggle",e);break;case"input":ge("invalid",e),yC(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Rc(e);break;case"select":ge("invalid",e);break;case"textarea":ge("invalid",e),_C(e,i.value,i.defaultValue,i.children),Rc(e)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||TS(e.textContent,n)?(i.popover!=null&&(ge("beforetoggle",e),ge("toggle",e)),i.onScroll!=null&&ge("scroll",e),i.onScrollEnd!=null&&ge("scrollend",e),i.onClick!=null&&(e.onclick=Kf),e=!0):e=!1,e||Es(t)}function Fv(t){for(jt=t.return;jt;)switch(jt.tag){case 5:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:jt=jt.return}}function Ia(t){if(t!==jt)return!1;if(!we)return Fv(t),we=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Em(t.type,t.memoizedProps)),n=!n),n&&it&&Es(t),Fv(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){it=Wn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}it=null}}else e===27?(e=it,Kr(t.type)?(t=Sm,Sm=null,it=t):it=e):it=jt?Wn(t.stateNode.nextSibling):null;return!0}function Fl(){it=jt=null,we=!1}function zv(){var t=ms;return t!==null&&(sn===null?sn=t:sn.push.apply(sn,t),ms=null),t}function ml(t){ms===null?ms=[t]:ms.push(t)}var Xh=Ei(null),Vs=null,ki=null;function cr(t,e,n){je(Xh,e._currentValue),e._currentValue=n}function zi(t){t._currentValue=Xh.current,Nt(Xh)}function jh(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Wh(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){var o=r.child;s=s.firstContext;e:for(;s!==null;){var a=s;s=r;for(var c=0;c<e.length;c++)if(a.context===e[c]){s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),jh(s.return,n,t),i||(o=null);break e}s=a.next}}else if(r.tag===18){if(o=r.return,o===null)throw Error(W(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),jh(o,n,t),o=null}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}}function zl(t,e,n,i){t=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var o=r.alternate;if(o===null)throw Error(W(387));if(o=o.memoizedProps,o!==null){var a=r.type;bn(r.pendingProps.value,o.value)||(t!==null?t.push(a):t=[a])}}else if(r===wc.current){if(o=r.alternate,o===null)throw Error(W(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(Tl):t=[Tl])}r=r.return}t!==null&&Wh(e,t,n,i),e.flags|=262144}function Vc(t){for(t=t.firstContext;t!==null;){if(!bn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Cs(t){Vs=t,ki=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Yt(t){return zC(Vs,t)}function Mu(t,e){return Vs===null&&Cs(t),zC(t,e)}function zC(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},ki===null){if(t===null)throw Error(W(308));ki=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ki=ki.next=e;return n}var rR=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},sR=At.unstable_scheduleCallback,oR=At.unstable_NormalPriority,Tt={$$typeof:Di,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vp(){return{controller:new rR,data:new Map,refCount:0}}function Bl(t){t.refCount--,t.refCount===0&&sR(oR,function(){t.controller.abort()})}var Ya=null,Zh=0,Lo=0,Ao=null;function aR(t,e){if(Ya===null){var n=Ya=[];Zh=0,Lo=ig(),Ao={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Zh++,e.then(Bv,Bv),e}function Bv(){if(--Zh===0&&Ya!==null){Ao!==null&&(Ao.status="fulfilled");var t=Ya;Ya=null,Lo=0,Ao=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function lR(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var qv=le.S;le.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&aR(t,e),qv!==null&&qv(t,e)};var ps=Ei(null);function kp(){var t=ps.current;return t!==null?t:qe.pooledCache}function nc(t,e){e===null?je(ps,ps.current):je(ps,e.pool)}function BC(){var t=kp();return t===null?null:{parent:Tt._currentValue,pool:t}}var ql=Error(W(460)),qC=Error(W(474)),zf=Error(W(542)),em={then:function(){}};function Gv(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Du(){}function GC(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Du,Du),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,$v(t),t;default:if(typeof e.status=="string")e.then(Du,Du);else{if(t=qe,t!==null&&100<t.shellSuspendCounter)throw Error(W(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,$v(t),t}throw Ka=e,ql}}var Ka=null;function Hv(){if(Ka===null)throw Error(W(459));var t=Ka;return Ka=null,t}function $v(t){if(t===ql||t===zf)throw Error(W(483))}var ur=!1;function Up(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ar(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Sr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Me&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=Mc(t),LC(t,null,n),e}return Ff(t,i,e,n),Mc(t)}function Ja(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,fC(t,n)}}function Qd(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var nm=!1;function Qa(){if(nm){var t=Ao;if(t!==null)throw t}}function Xa(t,e,n,i){nm=!1;var r=t.updateQueue;ur=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var c=a,f=c.next;c.next=null,o===null?s=f:o.next=f,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=f:a.next=f,d.lastBaseUpdate=c))}if(s!==null){var m=r.baseState;o=0,d=f=c=null,a=s;do{var p=a.lane&-536870913,g=p!==a.lane;if(g?(Ce&p)===p:(i&p)===p){p!==0&&p===Lo&&(nm=!0),d!==null&&(d=d.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var E=t,x=a;p=e;var P=n;switch(x.tag){case 1:if(E=x.payload,typeof E=="function"){m=E.call(P,m,p);break e}m=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=x.payload,p=typeof E=="function"?E.call(P,m,p):E,p==null)break e;m=Ke({},m,p);break e;case 2:ur=!0}}p=a.callback,p!==null&&(t.flags|=64,g&&(t.flags|=8192),g=r.callbacks,g===null?r.callbacks=[p]:g.push(p))}else g={lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(f=d=g,c=m):d=d.next=g,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;g=a,a=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);d===null&&(c=m),r.baseState=c,r.firstBaseUpdate=f,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),Ur|=o,t.lanes=o,t.memoizedState=m}}function HC(t,e){if(typeof t!="function")throw Error(W(191,t));t.call(e)}function $C(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)HC(n[t],e)}var Oo=Ei(null),kc=Ei(0);function Yv(t,e){t=$i,je(kc,t),je(Oo,e),$i=t|e.baseLanes}function im(){je(kc,$i),je(Oo,Oo.current)}function Lp(){$i=kc.current,Nt(Oo),Nt(kc)}var Vr=0,pe=null,Ve=null,ht=null,Uc=!1,So=!1,As=!1,Lc=0,pl=0,wo=null,uR=0;function ot(){throw Error(W(321))}function Op(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bn(t[n],e[n]))return!1;return!0}function Fp(t,e,n,i,r,s){return Vr=s,pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,le.H=t===null||t.memoizedState===null?CA:AA,As=!1,s=n(i,r),As=!1,So&&(s=KC(e,n,i,r)),YC(t),s}function YC(t){le.H=Oc;var e=Ve!==null&&Ve.next!==null;if(Vr=0,ht=Ve=pe=null,Uc=!1,pl=0,wo=null,e)throw Error(W(300));t===null||Rt||(t=t.dependencies,t!==null&&Vc(t)&&(Rt=!0))}function KC(t,e,n,i){pe=t;var r=0;do{if(So&&(wo=null),pl=0,So=!1,25<=r)throw Error(W(301));if(r+=1,ht=Ve=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}le.H=gR,s=e(n,i)}while(So);return s}function cR(){var t=le.H,e=t.useState()[0];return e=typeof e.then=="function"?Gl(e):e,t=t.useState()[0],(Ve!==null?Ve.memoizedState:null)!==t&&(pe.flags|=1024),e}function zp(){var t=Lc!==0;return Lc=0,t}function Bp(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function qp(t){if(Uc){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Uc=!1}Vr=0,ht=Ve=pe=null,So=!1,pl=Lc=0,wo=null}function nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?pe.memoizedState=ht=t:ht=ht.next=t,ht}function gt(){if(Ve===null){var t=pe.alternate;t=t!==null?t.memoizedState:null}else t=Ve.next;var e=ht===null?pe.memoizedState:ht.next;if(e!==null)ht=e,Ve=t;else{if(t===null)throw pe.alternate===null?Error(W(467)):Error(W(310));Ve=t,t={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},ht===null?pe.memoizedState=ht=t:ht=ht.next=t}return ht}function Gp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gl(t){var e=pl;return pl+=1,wo===null&&(wo=[]),t=GC(wo,t,e),e=pe,(ht===null?e.memoizedState:ht.next)===null&&(e=e.alternate,le.H=e===null||e.memoizedState===null?CA:AA),t}function Bf(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Gl(t);if(t.$$typeof===Di)return Yt(t)}throw Error(W(438,String(t)))}function Hp(t){var e=null,n=pe.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=pe.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Gp(),pe.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=Jb;return e.index++,n}function Gi(t,e){return typeof e=="function"?e(t):e}function ic(t){var e=gt();return $p(e,Ve,t)}function $p(t,e,n){var i=t.queue;if(i===null)throw Error(W(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,r===null)t.memoizedState=s;else{e=r.next;var a=o=null,c=null,f=e,d=!1;do{var m=f.lane&-536870913;if(m!==f.lane?(Ce&m)===m:(Vr&m)===m){var p=f.revertLane;if(p===0)c!==null&&(c=c.next={lane:0,revertLane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),m===Lo&&(d=!0);else if((Vr&p)===p){f=f.next,p===Lo&&(d=!0);continue}else m={lane:0,revertLane:f.revertLane,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},c===null?(a=c=m,o=s):c=c.next=m,pe.lanes|=p,Ur|=p;m=f.action,As&&n(s,m),s=f.hasEagerState?f.eagerState:n(s,m)}else p={lane:m,revertLane:f.revertLane,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},c===null?(a=c=p,o=s):c=c.next=p,pe.lanes|=m,Ur|=m;f=f.next}while(f!==null&&f!==e);if(c===null?o=s:c.next=a,!bn(s,t.memoizedState)&&(Rt=!0,d&&(n=Ao,n!==null)))throw n;t.memoizedState=s,t.baseState=o,t.baseQueue=c,i.lastRenderedState=s}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Xd(t){var e=gt(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);bn(s,e.memoizedState)||(Rt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function JC(t,e,n){var i=pe,r=gt(),s=we;if(s){if(n===void 0)throw Error(W(407));n=n()}else n=e();var o=!bn((Ve||r).memoizedState,n);o&&(r.memoizedState=n,Rt=!0),r=r.queue;var a=jC.bind(null,i,r,t);if(Hl(2048,8,a,[t]),r.getSnapshot!==e||o||ht!==null&&ht.memoizedState.tag&1){if(i.flags|=2048,Fo(9,qf(),XC.bind(null,i,r,n,e),null),qe===null)throw Error(W(349));s||Vr&124||QC(i,e,n)}return n}function QC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pe.updateQueue,e===null?(e=Gp(),pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function XC(t,e,n,i){e.value=n,e.getSnapshot=i,WC(e)&&ZC(t)}function jC(t,e,n){return n(function(){WC(e)&&ZC(t)})}function WC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bn(t,n)}catch{return!0}}function ZC(t){var e=ea(t,2);e!==null&&wn(e,t,2)}function rm(t){var e=nn();if(typeof t=="function"){var n=t;if(t=n(),As){yr(!0);try{n()}finally{yr(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:t},e}function eA(t,e,n,i){return t.baseState=n,$p(t,Ve,typeof i=="function"?i:Gi)}function fR(t,e,n,i,r){if(Gf(t))throw Error(W(485));if(t=e.action,t!==null){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){s.listeners.push(o)}};le.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,tA(e,s)):(s.next=n.next,e.pending=n.next=s)}}function tA(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=le.T,o={};le.T=o;try{var a=n(r,i),c=le.S;c!==null&&c(o,a),Kv(t,e,a)}catch(f){sm(t,e,f)}finally{le.T=s}}else try{s=n(r,i),Kv(t,e,s)}catch(f){sm(t,e,f)}}function Kv(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Jv(t,e,i)},function(i){return sm(t,e,i)}):Jv(t,e,n)}function Jv(t,e,n){e.status="fulfilled",e.value=n,nA(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,tA(t,n)))}function sm(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,nA(e),e=e.next;while(e!==i)}t.action=null}function nA(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function iA(t,e){return e}function Qv(t,e){if(we){var n=qe.formState;if(n!==null){e:{var i=pe;if(we){if(it){t:{for(var r=it,s=ai;r.nodeType!==8;){if(!s){r=null;break t}if(r=Wn(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){it=Wn(r.nextSibling),i=r.data==="F!";break e}}Es(i)}i=!1}i&&(e=n[0])}}return n=nn(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iA,lastRenderedState:e},n.queue=i,n=_A.bind(null,pe,i),i.dispatch=n,i=rm(!1),s=Qp.bind(null,pe,!1,i.queue),i=nn(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=fR.bind(null,pe,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function Xv(t){var e=gt();return rA(e,Ve,t)}function rA(t,e,n){if(e=$p(t,e,iA)[0],t=ic(Gi)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=Gl(e)}catch(o){throw o===ql?zf:o}else i=e;e=gt();var r=e.queue,s=r.dispatch;return n!==e.memoizedState&&(pe.flags|=2048,Fo(9,qf(),dR.bind(null,r,n),null)),[i,s,t]}function dR(t,e){t.action=e}function jv(t){var e=gt(),n=Ve;if(n!==null)return rA(e,n,t);gt(),e=e.memoizedState,n=gt();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Fo(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=pe.updateQueue,e===null&&(e=Gp(),pe.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function qf(){return{destroy:void 0,resource:void 0}}function sA(){return gt().memoizedState}function rc(t,e,n,i){var r=nn();i=i===void 0?null:i,pe.flags|=t,r.memoizedState=Fo(1|e,qf(),n,i)}function Hl(t,e,n,i){var r=gt();i=i===void 0?null:i;var s=r.memoizedState.inst;Ve!==null&&i!==null&&Op(i,Ve.memoizedState.deps)?r.memoizedState=Fo(e,s,n,i):(pe.flags|=t,r.memoizedState=Fo(1|e,s,n,i))}function Wv(t,e){rc(8390656,8,t,e)}function oA(t,e){Hl(2048,8,t,e)}function aA(t,e){return Hl(4,2,t,e)}function lA(t,e){return Hl(4,4,t,e)}function uA(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cA(t,e,n){n=n!=null?n.concat([t]):null,Hl(4,4,uA.bind(null,e,t),n)}function Yp(){}function fA(t,e){var n=gt();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Op(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function dA(t,e){var n=gt();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Op(e,i[1]))return i[0];if(i=t(),As){yr(!0);try{t()}finally{yr(!1)}}return n.memoizedState=[i,e],i}function Kp(t,e,n){return n===void 0||Vr&1073741824?t.memoizedState=e:(t.memoizedState=n,t=nS(),pe.lanes|=t,Ur|=t,n)}function hA(t,e,n,i){return bn(n,e)?n:Oo.current!==null?(t=Kp(t,n,i),bn(t,e)||(Rt=!0),t):Vr&42?(t=nS(),pe.lanes|=t,Ur|=t,e):(Rt=!0,t.memoizedState=n)}function mA(t,e,n,i,r){var s=xe.p;xe.p=s!==0&&8>s?s:8;var o=le.T,a={};le.T=a,Qp(t,!1,e,n);try{var c=r(),f=le.S;if(f!==null&&f(a,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=lR(c,i);ja(t,e,d,Sn(t))}else ja(t,e,i,Sn(t))}catch(m){ja(t,e,{then:function(){},status:"rejected",reason:m},Sn())}finally{xe.p=s,le.T=o}}function hR(){}function om(t,e,n,i){if(t.tag!==5)throw Error(W(476));var r=pA(t).queue;mA(t,r,e,fs,n===null?hR:function(){return gA(t),n(i)})}function pA(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:fs,baseState:fs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:fs},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function gA(t){var e=pA(t).next.queue;ja(t,e,{},Sn())}function Jp(){return Yt(Tl)}function yA(){return gt().memoizedState}function vA(){return gt().memoizedState}function mR(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Sn();t=Ar(n);var i=Sr(e,t,n);i!==null&&(wn(i,e,n),Ja(i,e,n)),e={cache:Vp()},t.payload=e;return}e=e.return}}function pR(t,e,n){var i=Sn();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Gf(t)?TA(e,n):(n=Np(t,e,n,i),n!==null&&(wn(n,t,i),EA(n,e,i)))}function _A(t,e,n){var i=Sn();ja(t,e,n,i)}function ja(t,e,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gf(t))TA(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,bn(a,o))return Ff(t,e,r,0),qe===null&&Of(),!1}catch{}finally{}if(n=Np(t,e,r,i),n!==null)return wn(n,t,i),EA(n,e,i),!0}return!1}function Qp(t,e,n,i){if(i={lane:2,revertLane:ig(),action:i,hasEagerState:!1,eagerState:null,next:null},Gf(t)){if(e)throw Error(W(479))}else e=Np(t,n,i,2),e!==null&&wn(e,t,2)}function Gf(t){var e=t.alternate;return t===pe||e!==null&&e===pe}function TA(t,e){So=Uc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function EA(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,fC(t,n)}}var Oc={readContext:Yt,use:Bf,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useLayoutEffect:ot,useInsertionEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useSyncExternalStore:ot,useId:ot,useHostTransitionStatus:ot,useFormState:ot,useActionState:ot,useOptimistic:ot,useMemoCache:ot,useCacheRefresh:ot},CA={readContext:Yt,use:Bf,useCallback:function(t,e){return nn().memoizedState=[t,e===void 0?null:e],t},useContext:Yt,useEffect:Wv,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,rc(4194308,4,uA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rc(4194308,4,t,e)},useInsertionEffect:function(t,e){rc(4,2,t,e)},useMemo:function(t,e){var n=nn();e=e===void 0?null:e;var i=t();if(As){yr(!0);try{t()}finally{yr(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=nn();if(n!==void 0){var r=n(e);if(As){yr(!0);try{n(e)}finally{yr(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=pR.bind(null,pe,t),[i.memoizedState,t]},useRef:function(t){var e=nn();return t={current:t},e.memoizedState=t},useState:function(t){t=rm(t);var e=t.queue,n=_A.bind(null,pe,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Yp,useDeferredValue:function(t,e){var n=nn();return Kp(n,t,e)},useTransition:function(){var t=rm(!1);return t=mA.bind(null,pe,t.queue,!0,!1),nn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=pe,r=nn();if(we){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),qe===null)throw Error(W(349));Ce&124||QC(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Wv(jC.bind(null,i,s,t),[t]),i.flags|=2048,Fo(9,qf(),XC.bind(null,i,s,n,e),null),n},useId:function(){var t=nn(),e=qe.identifierPrefix;if(we){var n=Vi,i=Pi;n=(i&~(1<<32-An(i)-1)).toString(32)+n,e=""+e+"R"+n,n=Lc++,0<n&&(e+="H"+n.toString(32)),e+=""}else n=uR++,e=""+e+"r"+n.toString(32)+"";return t.memoizedState=e},useHostTransitionStatus:Jp,useFormState:Qv,useActionState:Qv,useOptimistic:function(t){var e=nn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Qp.bind(null,pe,!0,n),n.dispatch=e,[t,e]},useMemoCache:Hp,useCacheRefresh:function(){return nn().memoizedState=mR.bind(null,pe)}},AA={readContext:Yt,use:Bf,useCallback:fA,useContext:Yt,useEffect:oA,useImperativeHandle:cA,useInsertionEffect:aA,useLayoutEffect:lA,useMemo:dA,useReducer:ic,useRef:sA,useState:function(){return ic(Gi)},useDebugValue:Yp,useDeferredValue:function(t,e){var n=gt();return hA(n,Ve.memoizedState,t,e)},useTransition:function(){var t=ic(Gi)[0],e=gt().memoizedState;return[typeof t=="boolean"?t:Gl(t),e]},useSyncExternalStore:JC,useId:yA,useHostTransitionStatus:Jp,useFormState:Xv,useActionState:Xv,useOptimistic:function(t,e){var n=gt();return eA(n,Ve,t,e)},useMemoCache:Hp,useCacheRefresh:vA},gR={readContext:Yt,use:Bf,useCallback:fA,useContext:Yt,useEffect:oA,useImperativeHandle:cA,useInsertionEffect:aA,useLayoutEffect:lA,useMemo:dA,useReducer:Xd,useRef:sA,useState:function(){return Xd(Gi)},useDebugValue:Yp,useDeferredValue:function(t,e){var n=gt();return Ve===null?Kp(n,t,e):hA(n,Ve.memoizedState,t,e)},useTransition:function(){var t=Xd(Gi)[0],e=gt().memoizedState;return[typeof t=="boolean"?t:Gl(t),e]},useSyncExternalStore:JC,useId:yA,useHostTransitionStatus:Jp,useFormState:jv,useActionState:jv,useOptimistic:function(t,e){var n=gt();return Ve!==null?eA(n,Ve,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Hp,useCacheRefresh:vA},xo=null,gl=0;function Pu(t){var e=gl;return gl+=1,xo===null&&(xo=[]),GC(xo,t,e)}function Ra(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Vu(t,e){throw e.$$typeof===Yb?Error(W(525)):(t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Zv(t){var e=t._init;return e(t._payload)}function SA(t){function e(A,w){if(t){var N=A.deletions;N===null?(A.deletions=[w],A.flags|=16):N.push(w)}}function n(A,w){if(!t)return null;for(;w!==null;)e(A,w),w=w.sibling;return null}function i(A){for(var w=new Map;A!==null;)A.key!==null?w.set(A.key,A):w.set(A.index,A),A=A.sibling;return w}function r(A,w){return A=Fi(A,w),A.index=0,A.sibling=null,A}function s(A,w,N){return A.index=N,t?(N=A.alternate,N!==null?(N=N.index,N<w?(A.flags|=67108866,w):N):(A.flags|=67108866,w)):(A.flags|=1048576,w)}function o(A){return t&&A.alternate===null&&(A.flags|=67108866),A}function a(A,w,N,D){return w===null||w.tag!==6?(w=Kd(N,A.mode,D),w.return=A,w):(w=r(w,N),w.return=A,w)}function c(A,w,N,D){var O=N.type;return O===so?d(A,w,N.props.children,D,N.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===lr&&Zv(O)===w.type)?(w=r(w,N.props),Ra(w,N),w.return=A,w):(w=tc(N.type,N.key,N.props,null,A.mode,D),Ra(w,N),w.return=A,w)}function f(A,w,N,D){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=Jd(N,A.mode,D),w.return=A,w):(w=r(w,N.children||[]),w.return=A,w)}function d(A,w,N,D,O){return w===null||w.tag!==7?(w=ds(N,A.mode,D,O),w.return=A,w):(w=r(w,N),w.return=A,w)}function m(A,w,N){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=Kd(""+w,A.mode,N),w.return=A,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case xu:return N=tc(w.type,w.key,w.props,null,A.mode,N),Ra(N,w),N.return=A,N;case Va:return w=Jd(w,A.mode,N),w.return=A,w;case lr:var D=w._init;return w=D(w._payload),m(A,w,N)}if(ka(w)||wa(w))return w=ds(w,A.mode,N,null),w.return=A,w;if(typeof w.then=="function")return m(A,Pu(w),N);if(w.$$typeof===Di)return m(A,Mu(A,w),N);Vu(A,w)}return null}function p(A,w,N,D){var O=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return O!==null?null:a(A,w,""+N,D);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case xu:return N.key===O?c(A,w,N,D):null;case Va:return N.key===O?f(A,w,N,D):null;case lr:return O=N._init,N=O(N._payload),p(A,w,N,D)}if(ka(N)||wa(N))return O!==null?null:d(A,w,N,D,null);if(typeof N.then=="function")return p(A,w,Pu(N),D);if(N.$$typeof===Di)return p(A,w,Mu(A,N),D);Vu(A,N)}return null}function g(A,w,N,D,O){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return A=A.get(N)||null,a(w,A,""+D,O);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case xu:return A=A.get(D.key===null?N:D.key)||null,c(w,A,D,O);case Va:return A=A.get(D.key===null?N:D.key)||null,f(w,A,D,O);case lr:var L=D._init;return D=L(D._payload),g(A,w,N,D,O)}if(ka(D)||wa(D))return A=A.get(N)||null,d(w,A,D,O,null);if(typeof D.then=="function")return g(A,w,N,Pu(D),O);if(D.$$typeof===Di)return g(A,w,N,Mu(w,D),O);Vu(w,D)}return null}function E(A,w,N,D){for(var O=null,L=null,b=w,_=w=0,T=null;b!==null&&_<N.length;_++){b.index>_?(T=b,b=null):T=b.sibling;var S=p(A,b,N[_],D);if(S===null){b===null&&(b=T);break}t&&b&&S.alternate===null&&e(A,b),w=s(S,w,_),L===null?O=S:L.sibling=S,L=S,b=T}if(_===N.length)return n(A,b),we&&rs(A,_),O;if(b===null){for(;_<N.length;_++)b=m(A,N[_],D),b!==null&&(w=s(b,w,_),L===null?O=b:L.sibling=b,L=b);return we&&rs(A,_),O}for(b=i(b);_<N.length;_++)T=g(b,A,_,N[_],D),T!==null&&(t&&T.alternate!==null&&b.delete(T.key===null?_:T.key),w=s(T,w,_),L===null?O=T:L.sibling=T,L=T);return t&&b.forEach(function(I){return e(A,I)}),we&&rs(A,_),O}function x(A,w,N,D){if(N==null)throw Error(W(151));for(var O=null,L=null,b=w,_=w=0,T=null,S=N.next();b!==null&&!S.done;_++,S=N.next()){b.index>_?(T=b,b=null):T=b.sibling;var I=p(A,b,S.value,D);if(I===null){b===null&&(b=T);break}t&&b&&I.alternate===null&&e(A,b),w=s(I,w,_),L===null?O=I:L.sibling=I,L=I,b=T}if(S.done)return n(A,b),we&&rs(A,_),O;if(b===null){for(;!S.done;_++,S=N.next())S=m(A,S.value,D),S!==null&&(w=s(S,w,_),L===null?O=S:L.sibling=S,L=S);return we&&rs(A,_),O}for(b=i(b);!S.done;_++,S=N.next())S=g(b,A,_,S.value,D),S!==null&&(t&&S.alternate!==null&&b.delete(S.key===null?_:S.key),w=s(S,w,_),L===null?O=S:L.sibling=S,L=S);return t&&b.forEach(function(M){return e(A,M)}),we&&rs(A,_),O}function P(A,w,N,D){if(typeof N=="object"&&N!==null&&N.type===so&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case xu:e:{for(var O=N.key;w!==null;){if(w.key===O){if(O=N.type,O===so){if(w.tag===7){n(A,w.sibling),D=r(w,N.props.children),D.return=A,A=D;break e}}else if(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===lr&&Zv(O)===w.type){n(A,w.sibling),D=r(w,N.props),Ra(D,N),D.return=A,A=D;break e}n(A,w);break}else e(A,w);w=w.sibling}N.type===so?(D=ds(N.props.children,A.mode,D,N.key),D.return=A,A=D):(D=tc(N.type,N.key,N.props,null,A.mode,D),Ra(D,N),D.return=A,A=D)}return o(A);case Va:e:{for(O=N.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){n(A,w.sibling),D=r(w,N.children||[]),D.return=A,A=D;break e}else{n(A,w);break}else e(A,w);w=w.sibling}D=Jd(N,A.mode,D),D.return=A,A=D}return o(A);case lr:return O=N._init,N=O(N._payload),P(A,w,N,D)}if(ka(N))return E(A,w,N,D);if(wa(N)){if(O=wa(N),typeof O!="function")throw Error(W(150));return N=O.call(N),x(A,w,N,D)}if(typeof N.then=="function")return P(A,w,Pu(N),D);if(N.$$typeof===Di)return P(A,w,Mu(A,N),D);Vu(A,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,w!==null&&w.tag===6?(n(A,w.sibling),D=r(w,N),D.return=A,A=D):(n(A,w),D=Kd(N,A.mode,D),D.return=A,A=D),o(A)):n(A,w)}return function(A,w,N,D){try{gl=0;var O=P(A,w,N,D);return xo=null,O}catch(b){if(b===ql||b===zf)throw b;var L=_n(29,b,null,A.mode);return L.lanes=D,L.return=A,L}finally{}}}var zo=SA(!0),wA=SA(!1),qn=Ei(null),fi=null;function fr(t){var e=t.alternate;je(Et,Et.current&1),je(qn,t),fi===null&&(e===null||Oo.current!==null||e.memoizedState!==null)&&(fi=t)}function xA(t){if(t.tag===22){if(je(Et,Et.current),je(qn,t),fi===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(fi=t)}}else dr()}function dr(){je(Et,Et.current),je(qn,qn.current)}function Ui(t){Nt(qn),fi===t&&(fi=null),Nt(Et)}var Et=Ei(0);function Fc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Am(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function jd(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var am={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Sn(),r=Ar(i);r.payload=e,n!=null&&(r.callback=n),e=Sr(t,r,i),e!==null&&(wn(e,t,i),Ja(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Sn(),r=Ar(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Sr(t,r,i),e!==null&&(wn(e,t,i),Ja(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Sn(),i=Ar(n);i.tag=2,e!=null&&(i.callback=e),e=Sr(t,i,n),e!==null&&(wn(e,t,n),Ja(e,t,n))}};function e0(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!hl(n,i)||!hl(r,s):!0}function t0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&am.enqueueReplaceState(e,e.state,null)}function Ss(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Ke({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}var zc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function bA(t){zc(t)}function IA(t){console.error(t)}function RA(t){zc(t)}function Bc(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function n0(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function lm(t,e,n){return n=Ar(n),n.tag=3,n.payload={element:null},n.callback=function(){Bc(t,e)},n}function NA(t){return t=Ar(t),t.tag=3,t}function MA(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){n0(e,n,i)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){n0(e,n,i),typeof r!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function yR(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&zl(e,n,r,!0),n=qn.current,n!==null){switch(n.tag){case 13:return fi===null?gm():n.alternate===null&&rt===0&&(rt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===em?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),lh(t,i,r)),!1;case 22:return n.flags|=65536,i===em?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),lh(t,i,r)),!1}throw Error(W(435,n.tag))}return lh(t,i,r),gm(),!1}if(we)return e=qn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==Qh&&(t=Error(W(422),{cause:i}),ml(Un(t,n)))):(i!==Qh&&(e=Error(W(423),{cause:i}),ml(Un(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=Un(i,n),r=lm(t.stateNode,i,r),Qd(t,r),rt!==4&&(rt=2)),!1;var s=Error(W(520),{cause:i});if(s=Un(s,n),el===null?el=[s]:el.push(s),rt!==4&&(rt=2),e===null)return!0;i=Un(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=lm(n.stateNode,i,t),Qd(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(wr===null||!wr.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=NA(r),MA(r,t,n,i),Qd(n,r),!1}n=n.return}while(n!==null);return!1}var DA=Error(W(461)),Rt=!1;function Dt(t,e,n,i){e.child=t===null?wA(e,null,n,i):zo(e,t.child,n,i)}function i0(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var o={};for(var a in i)a!=="ref"&&(o[a]=i[a])}else o=i;return Cs(e),i=Fp(t,e,n,o,s,r),a=zp(),t!==null&&!Rt?(Bp(t,e,r),Hi(t,e,r)):(we&&a&&Dp(e),e.flags|=1,Dt(t,e,i,r),e.child)}function r0(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Mp(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,PA(t,e,s,i,r)):(t=tc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!Xp(t,r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:hl,n(o,i)&&t.ref===e.ref)return Hi(t,e,r)}return e.flags|=1,t=Fi(s,i),t.ref=e.ref,t.return=e,e.child=t}function PA(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(hl(s,i)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=i=s,Xp(t,r))t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,Hi(t,e,r)}return um(t,e,n,i,r)}function VA(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden"){if(e.flags&128){if(i=s!==null?s.baseLanes|n:n,t!==null){for(r=e.child=t.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;e.childLanes=s&~i}else e.childLanes=0,e.child=null;return s0(t,e,i,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&nc(e,s!==null?s.cachePool:null),s!==null?Yv(e,s):im(),xA(e);else return e.lanes=e.childLanes=536870912,s0(t,e,s!==null?s.baseLanes|n:n,n)}else s!==null?(nc(e,s.cachePool),Yv(e,s),dr(),e.memoizedState=null):(t!==null&&nc(e,null),im(),dr());return Dt(t,e,r,n),e.child}function s0(t,e,n,i){var r=kp();return r=r===null?null:{parent:Tt._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&nc(e,null),im(),xA(e),t!==null&&zl(t,e,i,!0),null}function sc(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(W(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function um(t,e,n,i,r){return Cs(e),n=Fp(t,e,n,i,void 0,r),i=zp(),t!==null&&!Rt?(Bp(t,e,r),Hi(t,e,r)):(we&&i&&Dp(e),e.flags|=1,Dt(t,e,n,r),e.child)}function o0(t,e,n,i,r,s){return Cs(e),e.updateQueue=null,n=KC(e,i,n,r),YC(t),i=zp(),t!==null&&!Rt?(Bp(t,e,s),Hi(t,e,s)):(we&&i&&Dp(e),e.flags|=1,Dt(t,e,n,s),e.child)}function a0(t,e,n,i,r){if(Cs(e),e.stateNode===null){var s=mo,o=n.contextType;typeof o=="object"&&o!==null&&(s=Yt(o)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=am,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},Up(e),o=n.contextType,s.context=typeof o=="object"&&o!==null?Yt(o):mo,s.state=e.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(jd(e,n,o,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(o=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),o!==s.state&&am.enqueueReplaceState(s,s.state,null),Xa(e,i,s,r),Qa(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var a=e.memoizedProps,c=Ss(n,a);s.props=c;var f=s.context,d=n.contextType;o=mo,typeof d=="object"&&d!==null&&(o=Yt(d));var m=n.getDerivedStateFromProps;d=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function",a=e.pendingProps!==a,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a||f!==o)&&t0(e,s,i,o),ur=!1;var p=e.memoizedState;s.state=p,Xa(e,i,s,r),Qa(),f=e.memoizedState,a||p!==f||ur?(typeof m=="function"&&(jd(e,n,m,i),f=e.memoizedState),(c=ur||e0(e,n,c,i,p,f,o))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=f),s.props=i,s.state=f,s.context=o,i=c):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,tm(t,e),o=e.memoizedProps,d=Ss(n,o),s.props=d,m=e.pendingProps,p=s.context,f=n.contextType,c=mo,typeof f=="object"&&f!==null&&(c=Yt(f)),a=n.getDerivedStateFromProps,(f=typeof a=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==m||p!==c)&&t0(e,s,i,c),ur=!1,p=e.memoizedState,s.state=p,Xa(e,i,s,r),Qa();var g=e.memoizedState;o!==m||p!==g||ur||t!==null&&t.dependencies!==null&&Vc(t.dependencies)?(typeof a=="function"&&(jd(e,n,a,i),g=e.memoizedState),(d=ur||e0(e,n,d,i,p,g,c)||t!==null&&t.dependencies!==null&&Vc(t.dependencies))?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,g,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,g,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),s.props=i,s.state=g,s.context=c,i=d):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,sc(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=zo(e,t.child,null,r),e.child=zo(e,null,n,r)):Dt(t,e,n,r),e.memoizedState=s.state,t=e.child):t=Hi(t,e,r),t}function l0(t,e,n,i){return Fl(),e.flags|=256,Dt(t,e,n,i),e.child}var Wd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zd(t){return{baseLanes:t,cachePool:BC()}}function eh(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Fn),t}function kA(t,e,n){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(Et.current&2)!==0),o&&(r=!0,e.flags&=-129),o=(e.flags&32)!==0,e.flags&=-33,t===null){if(we){if(r?fr(e):dr(),we){var a=it,c;if(c=a){e:{for(c=a,a=ai;c.nodeType!==8;){if(!a){a=null;break e}if(c=Wn(c.nextSibling),c===null){a=null;break e}}a=c}a!==null?(e.memoizedState={dehydrated:a,treeContext:hs!==null?{id:Pi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},c=_n(18,null,null,0),c.stateNode=a,c.return=e,e.child=c,jt=e,it=null,c=!0):c=!1}c||Es(e)}if(a=e.memoizedState,a!==null&&(a=a.dehydrated,a!==null))return Am(a)?e.lanes=32:e.lanes=536870912,null;Ui(e)}return a=i.children,i=i.fallback,r?(dr(),r=e.mode,a=qc({mode:"hidden",children:a},r),i=ds(i,r,n,null),a.return=e,i.return=e,a.sibling=i,e.child=a,r=e.child,r.memoizedState=Zd(n),r.childLanes=eh(t,o,n),e.memoizedState=Wd,i):(fr(e),cm(e,a))}if(c=t.memoizedState,c!==null&&(a=c.dehydrated,a!==null)){if(s)e.flags&256?(fr(e),e.flags&=-257,e=th(t,e,n)):e.memoizedState!==null?(dr(),e.child=t.child,e.flags|=128,e=null):(dr(),r=i.fallback,a=e.mode,i=qc({mode:"visible",children:i.children},a),r=ds(r,a,n,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,zo(e,t.child,null,n),i=e.child,i.memoizedState=Zd(n),i.childLanes=eh(t,o,n),e.memoizedState=Wd,e=r);else if(fr(e),Am(a)){if(o=a.nextSibling&&a.nextSibling.dataset,o)var f=o.dgst;o=f,i=Error(W(419)),i.stack="",i.digest=o,ml({value:i,source:null,stack:null}),e=th(t,e,n)}else if(Rt||zl(t,e,n,!1),o=(n&t.childLanes)!==0,Rt||o){if(o=qe,o!==null&&(i=n&-n,i=i&42?1:Tp(i),i=i&(o.suspendedLanes|n)?0:i,i!==0&&i!==c.retryLane))throw c.retryLane=i,ea(t,i),wn(o,t,i),DA;a.data==="$?"||gm(),e=th(t,e,n)}else a.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,it=Wn(a.nextSibling),jt=e,we=!0,ms=null,ai=!1,t!==null&&(Pn[Vn++]=Pi,Pn[Vn++]=Vi,Pn[Vn++]=hs,Pi=t.id,Vi=t.overflow,hs=e),e=cm(e,i.children),e.flags|=4096);return e}return r?(dr(),r=i.fallback,a=e.mode,c=t.child,f=c.sibling,i=Fi(c,{mode:"hidden",children:i.children}),i.subtreeFlags=c.subtreeFlags&65011712,f!==null?r=Fi(f,r):(r=ds(r,a,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,a=t.child.memoizedState,a===null?a=Zd(n):(c=a.cachePool,c!==null?(f=Tt._currentValue,c=c.parent!==f?{parent:f,pool:f}:c):c=BC(),a={baseLanes:a.baseLanes|n,cachePool:c}),r.memoizedState=a,r.childLanes=eh(t,o,n),e.memoizedState=Wd,i):(fr(e),n=t.child,t=n.sibling,n=Fi(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(o=e.deletions,o===null?(e.deletions=[t],e.flags|=16):o.push(t)),e.child=n,e.memoizedState=null,n)}function cm(t,e){return e=qc({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function qc(t,e){return t=_n(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function th(t,e,n){return zo(e,t.child,null,n),t=cm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function u0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),jh(t.return,e,n)}function nh(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function UA(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Dt(t,e,i.children,n),i=Et.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&u0(t,n,e);else if(t.tag===19)u0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}switch(je(Et,i),r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Fc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),nh(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Fc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}nh(e,!0,n,null,s);break;case"together":nh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ur|=e.lanes,!(n&e.childLanes))if(t!==null){if(zl(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Fi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Xp(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Vc(t)))}function vR(t,e,n){switch(e.tag){case 3:xc(e,e.stateNode.containerInfo),cr(e,Tt,t.memoizedState.cache),Fl();break;case 27:case 5:Fh(e);break;case 4:xc(e,e.stateNode.containerInfo);break;case 10:cr(e,e.type,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(fr(e),e.flags|=128,null):n&e.child.childLanes?kA(t,e,n):(fr(e),t=Hi(t,e,n),t!==null?t.sibling:null);fr(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(zl(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return UA(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),je(Et,Et.current),i)break;return null;case 22:case 23:return e.lanes=0,VA(t,e,n);case 24:cr(e,Tt,t.memoizedState.cache)}return Hi(t,e,n)}function LA(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Rt=!0;else{if(!Xp(t,n)&&!(e.flags&128))return Rt=!1,vR(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,we&&e.flags&1048576&&FC(e,Pc,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var i=e.elementType,r=i._init;if(i=r(i._payload),e.type=i,typeof i=="function")Mp(i)?(t=Ss(i,t),e.tag=1,e=a0(null,e,i,t,n)):(e.tag=0,e=um(null,e,i,t,n));else{if(i!=null){if(r=i.$$typeof,r===yp){e.tag=11,e=i0(null,e,i,t,n);break e}else if(r===vp){e.tag=14,e=r0(null,e,i,t,n);break e}}throw e=Lh(i)||i,Error(W(306,e,""))}}return e;case 0:return um(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=Ss(i,e.pendingProps),a0(t,e,i,r,n);case 3:e:{if(xc(e,e.stateNode.containerInfo),t===null)throw Error(W(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,tm(t,e),Xa(e,i,null,n);var o=e.memoizedState;if(i=o.cache,cr(e,Tt,i),i!==s.cache&&Wh(e,[Tt],n,!0),Qa(),i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=l0(t,e,i,n);break e}else if(i!==r){r=Un(Error(W(424)),e),ml(r),e=l0(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(it=Wn(t.firstChild),jt=e,we=!0,ms=null,ai=!0,n=wA(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Fl(),i===r){e=Hi(t,e,n);break e}Dt(t,e,i,n)}e=e.child}return e;case 26:return sc(t,e),t===null?(n=x0(e.type,null,e.pendingProps,null))?e.memoizedState=n:we||(n=e.type,t=e.pendingProps,i=Qc(Cr.current).createElement(n),i[$t]=e,i[cn]=t,Ut(i,n,t),It(i),e.stateNode=i):e.memoizedState=x0(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Fh(e),t===null&&we&&(i=e.stateNode=AS(e.type,e.pendingProps,Cr.current),jt=e,ai=!0,r=it,Kr(e.type)?(Sm=r,it=Wn(i.firstChild)):it=r),Dt(t,e,e.pendingProps.children,n),sc(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&we&&((r=i=it)&&(i=YR(i,e.type,e.pendingProps,ai),i!==null?(e.stateNode=i,jt=e,it=Wn(i.firstChild),ai=!1,r=!0):r=!1),r||Es(e)),Fh(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,i=s.children,Em(r,s)?i=null:o!==null&&Em(r,o)&&(e.flags|=32),e.memoizedState!==null&&(r=Fp(t,e,cR,null,null,n),Tl._currentValue=r),sc(t,e),Dt(t,e,i,n),e.child;case 6:return t===null&&we&&((t=n=it)&&(n=KR(n,e.pendingProps,ai),n!==null?(e.stateNode=n,jt=e,it=null,t=!0):t=!1),t||Es(e)),null;case 13:return kA(t,e,n);case 4:return xc(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=zo(e,null,i,n):Dt(t,e,i,n),e.child;case 11:return i0(t,e,e.type,e.pendingProps,n);case 7:return Dt(t,e,e.pendingProps,n),e.child;case 8:return Dt(t,e,e.pendingProps.children,n),e.child;case 12:return Dt(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,cr(e,e.type,i.value),Dt(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,Cs(e),r=Yt(r),i=i(r),e.flags|=1,Dt(t,e,i,n),e.child;case 14:return r0(t,e,e.type,e.pendingProps,n);case 15:return PA(t,e,e.type,e.pendingProps,n);case 19:return UA(t,e,n);case 31:return i=e.pendingProps,n=e.mode,i={mode:i.mode,children:i.children},t===null?(n=qc(i,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=Fi(t.child,i),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return VA(t,e,n);case 24:return Cs(e),i=Yt(Tt),t===null?(r=kp(),r===null&&(r=qe,s=Vp(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},Up(e),cr(e,Tt,r)):(t.lanes&n&&(tm(t,e),Xa(e,null,null,n),Qa()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),cr(e,Tt,i)):(i=s.cache,cr(e,Tt,i),i!==r.cache&&Wh(e,[Tt],n,!0))),Dt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(W(156,e.tag))}function Ii(t){t.flags|=4}function c0(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!xS(e)){if(e=qn.current,e!==null&&((Ce&4194048)===Ce?fi!==null:(Ce&62914560)!==Ce&&!(Ce&536870912)||e!==fi))throw Ka=em,qC;t.flags|=8192}}function ku(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?uC():536870912,t.lanes|=e,Bo|=e)}function Na(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function _R(t,e,n){var i=e.pendingProps;switch(Pp(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(e),null;case 1:return et(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),zi(Tt),Vo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ia(e)?Ii(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zv())),et(e),null;case 26:return n=e.memoizedState,t===null?(Ii(e),n!==null?(et(e),c0(e,n)):(et(e),e.flags&=-16777217)):n?n!==t.memoizedState?(Ii(e),et(e),c0(e,n)):(et(e),e.flags&=-16777217):(t.memoizedProps!==i&&Ii(e),et(e),e.flags&=-16777217),null;case 27:bc(e),n=Cr.current;var r=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Ii(e);else{if(!i){if(e.stateNode===null)throw Error(W(166));return et(e),null}t=ui.current,Ia(e)?Ov(e):(t=AS(r,i,n),e.stateNode=t,Ii(e))}return et(e),null;case 5:if(bc(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Ii(e);else{if(!i){if(e.stateNode===null)throw Error(W(166));return et(e),null}if(t=ui.current,Ia(e))Ov(e);else{switch(r=Qc(Cr.current),t){case 1:t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=r.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?t.multiple=!0:i.size&&(t.size=i.size);break;default:t=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}t[$t]=e,t[cn]=i;e:for(r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=t;e:switch(Ut(t,n,i),n){case"button":case"input":case"select":case"textarea":t=!!i.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Ii(e)}}return et(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&Ii(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(W(166));if(t=Cr.current,Ia(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=jt,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[$t]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||TS(t.nodeValue,n)),t||Es(e)}else t=Qc(t).createTextNode(i),t[$t]=e,e.stateNode=t}return et(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=Ia(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(W(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(W(317));r[$t]=e}else Fl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;et(e),r=!1}else r=zv(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(Ui(e),e):(Ui(e),null)}if(Ui(e),e.flags&128)return e.lanes=n,e;if(n=i!==null,t=t!==null&&t.memoizedState!==null,n){i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),ku(e,e.updateQueue),et(e),null;case 4:return Vo(),t===null&&rg(e.stateNode.containerInfo),et(e),null;case 10:return zi(e.type),et(e),null;case 19:if(Nt(Et),r=e.memoizedState,r===null)return et(e),null;if(i=(e.flags&128)!==0,s=r.rendering,s===null)if(i)Na(r,!1);else{if(rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Fc(t),s!==null){for(e.flags|=128,Na(r,!1),t=s.updateQueue,e.updateQueue=t,ku(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)OC(n,t),n=n.sibling;return je(Et,Et.current&1|2),e.child}t=t.sibling}r.tail!==null&&ci()>Hc&&(e.flags|=128,i=!0,Na(r,!1),e.lanes=4194304)}else{if(!i)if(t=Fc(s),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,ku(e,t),Na(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!we)return et(e),null}else 2*ci()-r.renderingStartTime>Hc&&n!==536870912&&(e.flags|=128,i=!0,Na(r,!1),e.lanes=4194304);r.isBackwards?(s.sibling=e.child,e.child=s):(t=r.last,t!==null?t.sibling=s:e.child=s,r.last=s)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=ci(),e.sibling=null,t=Et.current,je(Et,i?t&1|2:t&1),e):(et(e),null);case 22:case 23:return Ui(e),Lp(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(et(e),e.subtreeFlags&6&&(e.flags|=8192)):et(e),n=e.updateQueue,n!==null&&ku(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Nt(ps),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),zi(Tt),et(e),null;case 25:return null;case 30:return null}throw Error(W(156,e.tag))}function TR(t,e){switch(Pp(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zi(Tt),Vo(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return bc(e),null;case 13:if(Ui(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Fl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Nt(Et),null;case 4:return Vo(),null;case 10:return zi(e.type),null;case 22:case 23:return Ui(e),Lp(),t!==null&&Nt(ps),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return zi(Tt),null;case 25:return null;default:return null}}function OA(t,e){switch(Pp(e),e.tag){case 3:zi(Tt),Vo();break;case 26:case 27:case 5:bc(e);break;case 4:Vo();break;case 13:Ui(e);break;case 19:Nt(Et);break;case 10:zi(e.type);break;case 22:case 23:Ui(e),Lp(),t!==null&&Nt(ps);break;case 24:zi(Tt)}}function $l(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,o=n.inst;i=s(),o.destroy=i}n=n.next}while(n!==r)}}catch(a){Le(e,e.return,a)}}function kr(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&t)===t){var o=i.inst,a=o.destroy;if(a!==void 0){o.destroy=void 0,r=e;var c=n,f=a;try{f()}catch(d){Le(r,c,d)}}}i=i.next}while(i!==s)}}catch(d){Le(e,e.return,d)}}function FA(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{$C(e,n)}catch(i){Le(t,t.return,i)}}}function zA(t,e,n){n.props=Ss(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Le(t,e,i)}}function Wa(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){Le(t,e,r)}}function li(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Le(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function BA(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Le(t,t.return,r)}}function ih(t,e,n){try{var i=t.stateNode;BR(i,t.type,n,e),i[cn]=e}catch(r){Le(t,t.return,r)}}function qA(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Kr(t.type)||t.tag===4}function rh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Kr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Kf));else if(i!==4&&(i===27&&Kr(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(fm(t,e,n),t=t.sibling;t!==null;)fm(t,e,n),t=t.sibling}function Gc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Kr(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Gc(t,e,n),t=t.sibling;t!==null;)Gc(t,e,n),t=t.sibling}function GA(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Ut(e,i,n),e[$t]=t,e[cn]=n}catch(s){Le(t,t.return,s)}}var Ni=!1,at=!1,sh=!1,f0=typeof WeakSet=="function"?WeakSet:Set,bt=null;function ER(t,e){if(t=t.containerInfo,_m=Zc,t=NC(t),Ip(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,f=0,d=0,m=t,p=null;t:for(;;){for(var g;m!==n||r!==0&&m.nodeType!==3||(a=o+r),m!==s||i!==0&&m.nodeType!==3||(c=o+i),m.nodeType===3&&(o+=m.nodeValue.length),(g=m.firstChild)!==null;)p=m,m=g;for(;;){if(m===t)break t;if(p===n&&++f===r&&(a=o),p===s&&++d===i&&(c=o),(g=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tm={focusedElem:t,selectionRange:n},Zc=!1,bt=e;bt!==null;)if(e=bt,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,bt=t;else for(;bt!==null;){switch(e=bt,s=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var E=Ss(n.type,r,n.elementType===n.type);t=i.getSnapshotBeforeUpdate(E,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(x){Le(n,n.return,x)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Cm(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Cm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(W(163))}if(t=e.sibling,t!==null){t.return=e.return,bt=t;break}bt=e.return}}function HA(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:sr(t,n),i&4&&$l(5,n);break;case 1:if(sr(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(o){Le(n,n.return,o)}else{var r=Ss(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(o){Le(n,n.return,o)}}i&64&&FA(n),i&512&&Wa(n,n.return);break;case 3:if(sr(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{$C(t,e)}catch(o){Le(n,n.return,o)}}break;case 27:e===null&&i&4&&GA(n);case 26:case 5:sr(t,n),e===null&&i&4&&BA(n),i&512&&Wa(n,n.return);break;case 12:sr(t,n);break;case 13:sr(t,n),i&4&&KA(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=NR.bind(null,n),JR(t,n))));break;case 22:if(i=n.memoizedState!==null||Ni,!i){e=e!==null&&e.memoizedState!==null||at,r=Ni;var s=at;Ni=i,(at=e)&&!s?ar(t,n,(n.subtreeFlags&8772)!==0):sr(t,n),Ni=r,at=s}break;case 30:break;default:sr(t,n)}}function $A(t){var e=t.alternate;e!==null&&(t.alternate=null,$A(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Cp(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Qe=null,rn=!1;function Ri(t,e,n){for(n=n.child;n!==null;)YA(t,e,n),n=n.sibling}function YA(t,e,n){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(Vl,n)}catch{}switch(n.tag){case 26:at||li(n,e),Ri(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:at||li(n,e);var i=Qe,r=rn;Kr(n.type)&&(Qe=n.stateNode,rn=!1),Ri(t,e,n),nl(n.stateNode),Qe=i,rn=r;break;case 5:at||li(n,e);case 6:if(i=Qe,r=rn,Qe=null,Ri(t,e,n),Qe=i,rn=r,Qe!==null)if(rn)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(n.stateNode)}catch(s){Le(n,e,s)}else try{Qe.removeChild(n.stateNode)}catch(s){Le(n,e,s)}break;case 18:Qe!==null&&(rn?(t=Qe,A0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Al(t)):A0(Qe,n.stateNode));break;case 4:i=Qe,r=rn,Qe=n.stateNode.containerInfo,rn=!0,Ri(t,e,n),Qe=i,rn=r;break;case 0:case 11:case 14:case 15:at||kr(2,n,e),at||kr(4,n,e),Ri(t,e,n);break;case 1:at||(li(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&zA(n,e,i)),Ri(t,e,n);break;case 21:Ri(t,e,n);break;case 22:at=(i=at)||n.memoizedState!==null,Ri(t,e,n),at=i;break;default:Ri(t,e,n)}}function KA(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Al(t)}catch(n){Le(e,e.return,n)}}function CR(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new f0),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new f0),e;default:throw Error(W(435,t.tag))}}function oh(t,e){var n=CR(t);e.forEach(function(i){var r=MR.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}function gn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 27:if(Kr(a.type)){Qe=a.stateNode,rn=!1;break e}break;case 5:Qe=a.stateNode,rn=!1;break e;case 3:case 4:Qe=a.stateNode.containerInfo,rn=!0;break e}a=a.return}if(Qe===null)throw Error(W(160));YA(s,o,r),Qe=null,rn=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)JA(e,t),e=e.sibling}var Qn=null;function JA(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:gn(e,t),yn(t),i&4&&(kr(3,t,t.return),$l(3,t),kr(5,t,t.return));break;case 1:gn(e,t),yn(t),i&512&&(at||n===null||li(n,n.return)),i&64&&Ni&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=Qn;if(gn(e,t),yn(t),i&512&&(at||n===null||li(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[Ll]||s[$t]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Ut(s,i,n),s[$t]=t,It(s),i=s;break e;case"link":var o=I0("link","href",r).get(i+(n.href||""));if(o){for(var a=0;a<o.length;a++)if(s=o[a],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(a,1);break t}}s=r.createElement(i),Ut(s,i,n),r.head.appendChild(s);break;case"meta":if(o=I0("meta","content",r).get(i+(n.content||""))){for(a=0;a<o.length;a++)if(s=o[a],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(a,1);break t}}s=r.createElement(i),Ut(s,i,n),r.head.appendChild(s);break;default:throw Error(W(468,i))}s[$t]=t,It(s),i=s}t.stateNode=i}else R0(r,t.type,t.stateNode);else t.stateNode=b0(r,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?R0(r,t.type,t.stateNode):b0(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&ih(t,t.memoizedProps,n.memoizedProps)}break;case 27:gn(e,t),yn(t),i&512&&(at||n===null||li(n,n.return)),n!==null&&i&4&&ih(t,t.memoizedProps,n.memoizedProps);break;case 5:if(gn(e,t),yn(t),i&512&&(at||n===null||li(n,n.return)),t.flags&32){r=t.stateNode;try{Uo(r,"")}catch(g){Le(t,t.return,g)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,ih(t,r,n!==null?n.memoizedProps:r)),i&1024&&(sh=!0);break;case 6:if(gn(e,t),yn(t),i&4){if(t.stateNode===null)throw Error(W(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(g){Le(t,t.return,g)}}break;case 3:if(lc=null,r=Qn,Qn=Xc(e.containerInfo),gn(e,t),Qn=r,yn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Al(e.containerInfo)}catch(g){Le(t,t.return,g)}sh&&(sh=!1,QA(t));break;case 4:i=Qn,Qn=Xc(t.stateNode.containerInfo),gn(e,t),yn(t),Qn=i;break;case 12:gn(e,t),yn(t);break;case 13:gn(e,t),yn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(tg=ci()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,oh(t,i)));break;case 22:r=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,f=Ni,d=at;if(Ni=f||r,at=d||c,gn(e,t),at=d,Ni=f,yn(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||c||Ni||at||ss(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(s=c.stateNode,r)o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{a=c.stateNode;var m=c.memoizedProps.style,p=m!=null&&m.hasOwnProperty("display")?m.display:null;a.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(g){Le(c,c.return,g)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(g){Le(c,c.return,g)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,oh(t,n))));break;case 19:gn(e,t),yn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,oh(t,i)));break;case 30:break;case 21:break;default:gn(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(qA(i)){n=i;break}i=i.return}if(n==null)throw Error(W(160));switch(n.tag){case 27:var r=n.stateNode,s=rh(t);Gc(t,s,r);break;case 5:var o=n.stateNode;n.flags&32&&(Uo(o,""),n.flags&=-33);var a=rh(t);Gc(t,a,o);break;case 3:case 4:var c=n.stateNode.containerInfo,f=rh(t);fm(t,f,c);break;default:throw Error(W(161))}}catch(d){Le(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QA(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;QA(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function sr(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)HA(t,e.alternate,e),e=e.sibling}function ss(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:kr(4,e,e.return),ss(e);break;case 1:li(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&zA(e,e.return,n),ss(e);break;case 27:nl(e.stateNode);case 26:case 5:li(e,e.return),ss(e);break;case 22:e.memoizedState===null&&ss(e);break;case 30:ss(e);break;default:ss(e)}t=t.sibling}}function ar(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,s=e,o=s.flags;switch(s.tag){case 0:case 11:case 15:ar(r,s,n),$l(4,s);break;case 1:if(ar(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(f){Le(i,i.return,f)}if(i=s,r=i.updateQueue,r!==null){var a=i.stateNode;try{var c=r.shared.hiddenCallbacks;if(c!==null)for(r.shared.hiddenCallbacks=null,r=0;r<c.length;r++)HC(c[r],a)}catch(f){Le(i,i.return,f)}}n&&o&64&&FA(s),Wa(s,s.return);break;case 27:GA(s);case 26:case 5:ar(r,s,n),n&&i===null&&o&4&&BA(s),Wa(s,s.return);break;case 12:ar(r,s,n);break;case 13:ar(r,s,n),n&&o&4&&KA(r,s);break;case 22:s.memoizedState===null&&ar(r,s,n),Wa(s,s.return);break;case 30:break;default:ar(r,s,n)}e=e.sibling}}function jp(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Bl(n))}function Wp(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Bl(t))}function ri(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)XA(t,e,n,i),e=e.sibling}function XA(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:ri(t,e,n,i),r&2048&&$l(9,e);break;case 1:ri(t,e,n,i);break;case 3:ri(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Bl(t)));break;case 12:if(r&2048){ri(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,o=s.id,a=s.onPostCommit;typeof a=="function"&&a(o,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){Le(e,e.return,c)}}else ri(t,e,n,i);break;case 13:ri(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,o=e.alternate,e.memoizedState!==null?s._visibility&2?ri(t,e,n,i):Za(t,e):s._visibility&2?ri(t,e,n,i):(s._visibility|=2,Zs(t,e,n,i,(e.subtreeFlags&10256)!==0)),r&2048&&jp(o,e);break;case 24:ri(t,e,n,i),r&2048&&Wp(e.alternate,e);break;default:ri(t,e,n,i)}}function Zs(t,e,n,i,r){for(r=r&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var s=t,o=e,a=n,c=i,f=o.flags;switch(o.tag){case 0:case 11:case 15:Zs(s,o,a,c,r),$l(8,o);break;case 23:break;case 22:var d=o.stateNode;o.memoizedState!==null?d._visibility&2?Zs(s,o,a,c,r):Za(s,o):(d._visibility|=2,Zs(s,o,a,c,r)),r&&f&2048&&jp(o.alternate,o);break;case 24:Zs(s,o,a,c,r),r&&f&2048&&Wp(o.alternate,o);break;default:Zs(s,o,a,c,r)}e=e.sibling}}function Za(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:Za(n,i),r&2048&&jp(i.alternate,i);break;case 24:Za(n,i),r&2048&&Wp(i.alternate,i);break;default:Za(n,i)}e=e.sibling}}var La=8192;function Ks(t){if(t.subtreeFlags&La)for(t=t.child;t!==null;)jA(t),t=t.sibling}function jA(t){switch(t.tag){case 26:Ks(t),t.flags&La&&t.memoizedState!==null&&a2(Qn,t.memoizedState,t.memoizedProps);break;case 5:Ks(t);break;case 3:case 4:var e=Qn;Qn=Xc(t.stateNode.containerInfo),Ks(t),Qn=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=La,La=16777216,Ks(t),La=e):Ks(t));break;default:Ks(t)}}function WA(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Ma(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];bt=i,eS(i,t)}WA(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ZA(t),t=t.sibling}function ZA(t){switch(t.tag){case 0:case 11:case 15:Ma(t),t.flags&2048&&kr(9,t,t.return);break;case 3:Ma(t);break;case 12:Ma(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,oc(t)):Ma(t);break;default:Ma(t)}}function oc(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];bt=i,eS(i,t)}WA(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:kr(8,e,e.return),oc(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,oc(e));break;default:oc(e)}t=t.sibling}}function eS(t,e){for(;bt!==null;){var n=bt;switch(n.tag){case 0:case 11:case 15:kr(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Bl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,bt=i;else e:for(n=t;bt!==null;){i=bt;var r=i.sibling,s=i.return;if($A(i),i===n){bt=null;break e}if(r!==null){r.return=s,bt=r;break e}bt=s}}}var AR={getCacheForType:function(t){var e=Yt(Tt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},SR=typeof WeakMap=="function"?WeakMap:Map,Me=0,qe=null,ye=null,Ce=0,Ne=0,vn=null,_r=!1,ta=!1,Zp=!1,$i=0,rt=0,Ur=0,gs=0,eg=0,Fn=0,Bo=0,el=null,sn=null,dm=!1,tg=0,Hc=1/0,$c=null,wr=null,Vt=0,xr=null,qo=null,bo=0,hm=0,mm=null,tS=null,tl=0,pm=null;function Sn(){if(Me&2&&Ce!==0)return Ce&-Ce;if(le.T!==null){var t=Lo;return t!==0?t:ig()}return dC()}function nS(){Fn===0&&(Fn=!(Ce&536870912)||we?lC():536870912);var t=qn.current;return t!==null&&(t.flags|=32),Fn}function wn(t,e,n){(t===qe&&(Ne===2||Ne===9)||t.cancelPendingCommit!==null)&&(Go(t,0),Tr(t,Ce,Fn,!1)),Ul(t,n),(!(Me&2)||t!==qe)&&(t===qe&&(!(Me&2)&&(gs|=n),rt===4&&Tr(t,Ce,Fn,!1)),Ci(t))}function iS(t,e,n){if(Me&6)throw Error(W(327));var i=!n&&(e&124)===0&&(e&t.expiredLanes)===0||kl(t,e),r=i?bR(t,e):ah(t,e,!0),s=i;do{if(r===0){ta&&!i&&Tr(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!wR(n)){r=ah(t,e,!1),s=!1;continue}if(r===2){if(s=e,t.errorRecoveryDisabledLanes&s)var o=0;else o=t.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){e=o;e:{var a=t;r=el;var c=a.current.memoizedState.isDehydrated;if(c&&(Go(a,o).flags|=256),o=ah(a,o,!1),o!==2){if(Zp&&!c){a.errorRecoveryDisabledLanes|=s,gs|=s,r=4;break e}s=sn,sn=r,s!==null&&(sn===null?sn=s:sn.push.apply(sn,s))}r=o}if(s=!1,r!==2)continue}}if(r===1){Go(t,0),Tr(t,e,0,!0);break}e:{switch(i=t,s=r,s){case 0:case 1:throw Error(W(345));case 4:if((e&4194048)!==e)break;case 6:Tr(i,e,Fn,!_r);break e;case 2:sn=null;break;case 3:case 5:break;default:throw Error(W(329))}if((e&62914560)===e&&(r=tg+300-ci(),10<r)){if(Tr(i,e,Fn,!_r),Vf(i,0,!0)!==0)break e;i.timeoutHandle=CS(d0.bind(null,i,n,sn,$c,dm,e,Fn,gs,Bo,_r,s,2,-0,0),r);break e}d0(i,n,sn,$c,dm,e,Fn,gs,Bo,_r,s,0,-0,0)}}break}while(!0);Ci(t)}function d0(t,e,n,i,r,s,o,a,c,f,d,m,p,g){if(t.timeoutHandle=-1,m=e.subtreeFlags,(m&8192||(m&16785408)===16785408)&&(_l={stylesheets:null,count:0,unsuspend:o2},jA(e),m=l2(),m!==null)){t.cancelPendingCommit=m(m0.bind(null,t,e,s,n,i,r,o,a,c,d,1,p,g)),Tr(t,s,o,!f);return}m0(t,e,s,n,i,r,o,a,c)}function wR(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!bn(s(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Tr(t,e,n,i){e&=~eg,e&=~gs,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-An(r),o=1<<s;i[s]=-1,r&=~o}n!==0&&cC(t,n,e)}function Hf(){return Me&6?!0:(Yl(0),!1)}function ng(){if(ye!==null){if(Ne===0)var t=ye.return;else t=ye,ki=Vs=null,qp(t),xo=null,gl=0,t=ye;for(;t!==null;)OA(t.alternate,t),t=t.return;ye=null}}function Go(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,GR(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),ng(),qe=t,ye=n=Fi(t.current,null),Ce=e,Ne=0,vn=null,_r=!1,ta=kl(t,e),Zp=!1,Bo=Fn=eg=gs=Ur=rt=0,sn=el=null,dm=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-An(i),s=1<<r;e|=t[r],i&=~s}return $i=e,Of(),n}function rS(t,e){pe=null,le.H=Oc,e===ql||e===zf?(e=Hv(),Ne=3):e===qC?(e=Hv(),Ne=4):Ne=e===DA?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,vn=e,ye===null&&(rt=1,Bc(t,Un(e,t.current)))}function sS(){var t=le.H;return le.H=Oc,t===null?Oc:t}function oS(){var t=le.A;return le.A=AR,t}function gm(){rt=4,_r||(Ce&4194048)!==Ce&&qn.current!==null||(ta=!0),!(Ur&134217727)&&!(gs&134217727)||qe===null||Tr(qe,Ce,Fn,!1)}function ah(t,e,n){var i=Me;Me|=2;var r=sS(),s=oS();(qe!==t||Ce!==e)&&($c=null,Go(t,e)),e=!1;var o=rt;e:do try{if(Ne!==0&&ye!==null){var a=ye,c=vn;switch(Ne){case 8:ng(),o=6;break e;case 3:case 2:case 9:case 6:qn.current===null&&(e=!0);var f=Ne;if(Ne=0,vn=null,yo(t,a,c,f),n&&ta){o=0;break e}break;default:f=Ne,Ne=0,vn=null,yo(t,a,c,f)}}xR(),o=rt;break}catch(d){rS(t,d)}while(!0);return e&&t.shellSuspendCounter++,ki=Vs=null,Me=i,le.H=r,le.A=s,ye===null&&(qe=null,Ce=0,Of()),o}function xR(){for(;ye!==null;)aS(ye)}function bR(t,e){var n=Me;Me|=2;var i=sS(),r=oS();qe!==t||Ce!==e?($c=null,Hc=ci()+500,Go(t,e)):ta=kl(t,e);e:do try{if(Ne!==0&&ye!==null){e=ye;var s=vn;t:switch(Ne){case 1:Ne=0,vn=null,yo(t,e,s,1);break;case 2:case 9:if(Gv(s)){Ne=0,vn=null,h0(e);break}e=function(){Ne!==2&&Ne!==9||qe!==t||(Ne=7),Ci(t)},s.then(e,e);break e;case 3:Ne=7;break e;case 4:Ne=5;break e;case 7:Gv(s)?(Ne=0,vn=null,h0(e)):(Ne=0,vn=null,yo(t,e,s,7));break;case 5:var o=null;switch(ye.tag){case 26:o=ye.memoizedState;case 5:case 27:var a=ye;if(!o||xS(o)){Ne=0,vn=null;var c=a.sibling;if(c!==null)ye=c;else{var f=a.return;f!==null?(ye=f,$f(f)):ye=null}break t}}Ne=0,vn=null,yo(t,e,s,5);break;case 6:Ne=0,vn=null,yo(t,e,s,6);break;case 8:ng(),rt=6;break e;default:throw Error(W(462))}}IR();break}catch(d){rS(t,d)}while(!0);return ki=Vs=null,le.H=i,le.A=r,Me=n,ye!==null?0:(qe=null,Ce=0,Of(),rt)}function IR(){for(;ye!==null&&!Xb();)aS(ye)}function aS(t){var e=LA(t.alternate,t,$i);t.memoizedProps=t.pendingProps,e===null?$f(t):ye=e}function h0(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=o0(n,e,e.pendingProps,e.type,void 0,Ce);break;case 11:e=o0(n,e,e.pendingProps,e.type.render,e.ref,Ce);break;case 5:qp(e);default:OA(n,e),e=ye=OC(e,$i),e=LA(n,e,$i)}t.memoizedProps=t.pendingProps,e===null?$f(t):ye=e}function yo(t,e,n,i){ki=Vs=null,qp(e),xo=null,gl=0;var r=e.return;try{if(yR(t,r,e,n,Ce)){rt=1,Bc(t,Un(n,t.current)),ye=null;return}}catch(s){if(r!==null)throw ye=r,s;rt=1,Bc(t,Un(n,t.current)),ye=null;return}e.flags&32768?(we||i===1?t=!0:ta||Ce&536870912?t=!1:(_r=t=!0,(i===2||i===9||i===3||i===6)&&(i=qn.current,i!==null&&i.tag===13&&(i.flags|=16384))),lS(e,t)):$f(e)}function $f(t){var e=t;do{if(e.flags&32768){lS(e,_r);return}t=e.return;var n=_R(e.alternate,e,$i);if(n!==null){ye=n;return}if(e=e.sibling,e!==null){ye=e;return}ye=e=t}while(e!==null);rt===0&&(rt=5)}function lS(t,e){do{var n=TR(t.alternate,t);if(n!==null){n.flags&=32767,ye=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ye=t;return}ye=t=n}while(t!==null);rt=6,ye=null}function m0(t,e,n,i,r,s,o,a,c){t.cancelPendingCommit=null;do Yf();while(Vt!==0);if(Me&6)throw Error(W(327));if(e!==null){if(e===t.current)throw Error(W(177));if(s=e.lanes|e.childLanes,s|=Rp,oI(t,n,s,o,a,c),t===qe&&(ye=qe=null,Ce=0),qo=e,xr=t,bo=n,hm=s,mm=r,tS=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,DR(Ic,function(){return hS(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=le.T,le.T=null,r=xe.p,xe.p=2,o=Me,Me|=4;try{ER(t,e,n)}finally{Me=o,xe.p=r,le.T=i}}Vt=1,uS(),cS(),fS()}}function uS(){if(Vt===1){Vt=0;var t=xr,e=qo,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=le.T,le.T=null;var i=xe.p;xe.p=2;var r=Me;Me|=4;try{JA(e,t);var s=Tm,o=NC(t.containerInfo),a=s.focusedElem,c=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&RC(a.ownerDocument.documentElement,a)){if(c!==null&&Ip(a)){var f=c.start,d=c.end;if(d===void 0&&(d=f),"selectionStart"in a)a.selectionStart=f,a.selectionEnd=Math.min(d,a.value.length);else{var m=a.ownerDocument||document,p=m&&m.defaultView||window;if(p.getSelection){var g=p.getSelection(),E=a.textContent.length,x=Math.min(c.start,E),P=c.end===void 0?x:Math.min(c.end,E);!g.extend&&x>P&&(o=P,P=x,x=o);var A=kv(a,x),w=kv(a,P);if(A&&w&&(g.rangeCount!==1||g.anchorNode!==A.node||g.anchorOffset!==A.offset||g.focusNode!==w.node||g.focusOffset!==w.offset)){var N=m.createRange();N.setStart(A.node,A.offset),g.removeAllRanges(),x>P?(g.addRange(N),g.extend(w.node,w.offset)):(N.setEnd(w.node,w.offset),g.addRange(N))}}}}for(m=[],g=a;g=g.parentNode;)g.nodeType===1&&m.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<m.length;a++){var D=m[a];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}Zc=!!_m,Tm=_m=null}finally{Me=r,xe.p=i,le.T=n}}t.current=e,Vt=2}}function cS(){if(Vt===2){Vt=0;var t=xr,e=qo,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=le.T,le.T=null;var i=xe.p;xe.p=2;var r=Me;Me|=4;try{HA(t,e.alternate,e)}finally{Me=r,xe.p=i,le.T=n}}Vt=3}}function fS(){if(Vt===4||Vt===3){Vt=0,jb();var t=xr,e=qo,n=bo,i=tS;e.subtreeFlags&10256||e.flags&10256?Vt=5:(Vt=0,qo=xr=null,dS(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(wr=null),Ep(n),e=e.stateNode,Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(Vl,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=le.T,r=xe.p,xe.p=2,le.T=null;try{for(var s=t.onRecoverableError,o=0;o<i.length;o++){var a=i[o];s(a.value,{componentStack:a.stack})}}finally{le.T=e,xe.p=r}}bo&3&&Yf(),Ci(t),r=t.pendingLanes,n&4194090&&r&42?t===pm?tl++:(tl=0,pm=t):tl=0,Yl(0)}}function dS(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Bl(e)))}function Yf(t){return uS(),cS(),fS(),hS()}function hS(){if(Vt!==5)return!1;var t=xr,e=hm;hm=0;var n=Ep(bo),i=le.T,r=xe.p;try{xe.p=32>n?32:n,le.T=null,n=mm,mm=null;var s=xr,o=bo;if(Vt=0,qo=xr=null,bo=0,Me&6)throw Error(W(331));var a=Me;if(Me|=4,ZA(s.current),XA(s,s.current,o,n),Me=a,Yl(0,!1),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(Vl,s)}catch{}return!0}finally{xe.p=r,le.T=i,dS(t,e)}}function p0(t,e,n){e=Un(n,e),e=lm(t.stateNode,e,2),t=Sr(t,e,2),t!==null&&(Ul(t,2),Ci(t))}function Le(t,e,n){if(t.tag===3)p0(t,t,n);else for(;e!==null;){if(e.tag===3){p0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(wr===null||!wr.has(i))){t=Un(n,t),n=NA(2),i=Sr(e,n,2),i!==null&&(MA(n,i,e,t),Ul(i,2),Ci(i));break}}e=e.return}}function lh(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new SR;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(Zp=!0,r.add(n),t=RR.bind(null,t,e,n),e.then(t,t))}function RR(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,qe===t&&(Ce&n)===n&&(rt===4||rt===3&&(Ce&62914560)===Ce&&300>ci()-tg?!(Me&2)&&Go(t,0):eg|=n,Bo===Ce&&(Bo=0)),Ci(t)}function mS(t,e){e===0&&(e=uC()),t=ea(t,e),t!==null&&(Ul(t,e),Ci(t))}function NR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mS(t,n)}function MR(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(W(314))}i!==null&&i.delete(e),mS(t,n)}function DR(t,e){return _p(t,e)}var Yc=null,eo=null,ym=!1,Kc=!1,uh=!1,ys=0;function Ci(t){t!==eo&&t.next===null&&(eo===null?Yc=eo=t:eo=eo.next=t),Kc=!0,ym||(ym=!0,VR())}function Yl(t,e){if(!uh&&Kc){uh=!0;do for(var n=!1,i=Yc;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var o=i.suspendedLanes,a=i.pingedLanes;s=(1<<31-An(42|t)+1)-1,s&=r&~(o&~a),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,g0(i,s))}else s=Ce,s=Vf(i,i===qe?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||kl(i,s)||(n=!0,g0(i,s));i=i.next}while(n);uh=!1}}function PR(){pS()}function pS(){Kc=ym=!1;var t=0;ys!==0&&(qR()&&(t=ys),ys=0);for(var e=ci(),n=null,i=Yc;i!==null;){var r=i.next,s=gS(i,e);s===0?(i.next=null,n===null?Yc=r:n.next=r,r===null&&(eo=n)):(n=i,(t!==0||s&3)&&(Kc=!0)),i=r}Yl(t)}function gS(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var o=31-An(s),a=1<<o,c=r[o];c===-1?(!(a&n)||a&i)&&(r[o]=sI(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}if(e=qe,n=Ce,n=Vf(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(Ne===2||Ne===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&kd(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||kl(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&kd(i),Ep(n)){case 2:case 8:n=oC;break;case 32:n=Ic;break;case 268435456:n=aC;break;default:n=Ic}return i=yS.bind(null,t),n=_p(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&kd(i),t.callbackPriority=2,t.callbackNode=null,2}function yS(t,e){if(Vt!==0&&Vt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Yf()&&t.callbackNode!==n)return null;var i=Ce;return i=Vf(t,t===qe?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(iS(t,i,e),gS(t,ci()),t.callbackNode!=null&&t.callbackNode===n?yS.bind(null,t):null)}function g0(t,e){if(Yf())return null;iS(t,e,!0)}function VR(){HR(function(){Me&6?_p(sC,PR):pS()})}function ig(){return ys===0&&(ys=lC()),ys}function y0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Wu(""+t)}function v0(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function kR(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var s=y0((r[cn]||null).action),o=i.submitter;o&&(e=(e=o[cn]||null)?y0(e.formAction):o.getAttribute("formAction"),e!==null&&(s=e,o=null));var a=new kf("action","action",null,i,r);t.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(ys!==0){var c=o?v0(r,o):new FormData(r);om(n,{pending:!0,data:c,method:r.method,action:s},null,c)}}else typeof s=="function"&&(a.preventDefault(),c=o?v0(r,o):new FormData(r),om(n,{pending:!0,data:c,method:r.method,action:s},s,c))},currentTarget:r}]})}}for(var ch=0;ch<Jh.length;ch++){var fh=Jh[ch],UR=fh.toLowerCase(),LR=fh[0].toUpperCase()+fh.slice(1);ti(UR,"on"+LR)}ti(DC,"onAnimationEnd");ti(PC,"onAnimationIteration");ti(VC,"onAnimationStart");ti("dblclick","onDoubleClick");ti("focusin","onFocus");ti("focusout","onBlur");ti(eR,"onTransitionRun");ti(tR,"onTransitionStart");ti(nR,"onTransitionCancel");ti(kC,"onTransitionEnd");ko("onMouseEnter",["mouseout","mouseover"]);ko("onMouseLeave",["mouseout","mouseover"]);ko("onPointerEnter",["pointerout","pointerover"]);ko("onPointerLeave",["pointerout","pointerover"]);Ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ms("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yl));function vS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],c=a.instance,f=a.currentTarget;if(a=a.listener,c!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=f;try{s(r)}catch(d){zc(d)}r.currentTarget=null,s=c}else for(o=0;o<i.length;o++){if(a=i[o],c=a.instance,f=a.currentTarget,a=a.listener,c!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=f;try{s(r)}catch(d){zc(d)}r.currentTarget=null,s=c}}}}function ge(t,e){var n=e[Bh];n===void 0&&(n=e[Bh]=new Set);var i=t+"__bubble";n.has(i)||(_S(e,t,2,!1),n.add(i))}function dh(t,e,n){var i=0;e&&(i|=4),_S(n,t,i,e)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function rg(t){if(!t[Uu]){t[Uu]=!0,hC.forEach(function(n){n!=="selectionchange"&&(OR.has(n)||dh(n,!1,t),dh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uu]||(e[Uu]=!0,dh("selectionchange",!1,e))}}function _S(t,e,n,i){switch(MS(e)){case 2:var r=f2;break;case 8:r=d2;break;default:r=lg}n=r.bind(null,e,n,t),r=void 0,!$h||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function hh(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===r)return;o=o.return}for(;a!==null;){if(o=ao(a),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){i=s=o;continue e}a=a.parentNode}}i=i.return}EC(function(){var f=s,d=Sp(n),m=[];e:{var p=UC.get(t);if(p!==void 0){var g=kf,E=t;switch(t){case"keypress":if(ec(n)===0)break e;case"keydown":case"keyup":g=DI;break;case"focusin":E="focus",g=Gd;break;case"focusout":E="blur",g=Gd;break;case"beforeblur":case"afterblur":g=Gd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=wv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=TI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=kI;break;case DC:case PC:case VC:g=AI;break;case kC:g=LI;break;case"scroll":case"scrollend":g=vI;break;case"wheel":g=FI;break;case"copy":case"cut":case"paste":g=wI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=bv;break;case"toggle":case"beforetoggle":g=BI}var x=(e&4)!==0,P=!x&&(t==="scroll"||t==="scrollend"),A=x?p!==null?p+"Capture":null:p;x=[];for(var w=f,N;w!==null;){var D=w;if(N=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||N===null||A===null||(D=fl(w,A),D!=null&&x.push(vl(w,D,N))),P)break;w=w.return}0<x.length&&(p=new g(p,E,null,n,d),m.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Hh&&(E=n.relatedTarget||n.fromElement)&&(ao(E)||E[Wo]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(E=n.relatedTarget||n.toElement,g=f,E=E?ao(E):null,E!==null&&(P=Pl(E),x=E.tag,E!==P||x!==5&&x!==27&&x!==6)&&(E=null)):(g=null,E=f),g!==E)){if(x=wv,D="onMouseLeave",A="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(x=bv,D="onPointerLeave",A="onPointerEnter",w="pointer"),P=g==null?p:Ua(g),N=E==null?p:Ua(E),p=new x(D,w+"leave",g,n,d),p.target=P,p.relatedTarget=N,D=null,ao(d)===f&&(x=new x(A,w+"enter",E,n,d),x.target=N,x.relatedTarget=P,D=x),P=D,g&&E)t:{for(x=g,A=E,w=0,N=x;N;N=Js(N))w++;for(N=0,D=A;D;D=Js(D))N++;for(;0<w-N;)x=Js(x),w--;for(;0<N-w;)A=Js(A),N--;for(;w--;){if(x===A||A!==null&&x===A.alternate)break t;x=Js(x),A=Js(A)}x=null}else x=null;g!==null&&_0(m,p,g,x,!1),E!==null&&P!==null&&_0(m,P,E,x,!0)}}e:{if(p=f?Ua(f):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var O=Mv;else if(Nv(p))if(bC)O=jI;else{O=QI;var L=JI}else g=p.nodeName,!g||g.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?f&&Ap(f.elementType)&&(O=Mv):O=XI;if(O&&(O=O(t,f))){xC(m,O,n,d);break e}L&&L(t,p,f),t==="focusout"&&f&&p.type==="number"&&f.memoizedProps.value!=null&&Gh(p,"number",p.value)}switch(L=f?Ua(f):window,t){case"focusin":(Nv(L)||L.contentEditable==="true")&&(co=L,Yh=f,$a=null);break;case"focusout":$a=Yh=co=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,Uv(m,n,d);break;case"selectionchange":if(ZI)break;case"keydown":case"keyup":Uv(m,n,d)}var b;if(bp)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else uo?SC(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(AC&&n.locale!=="ko"&&(uo||_!=="onCompositionStart"?_==="onCompositionEnd"&&uo&&(b=CC()):(vr=d,wp="value"in vr?vr.value:vr.textContent,uo=!0)),L=Jc(f,_),0<L.length&&(_=new xv(_,t,null,n,d),m.push({event:_,listeners:L}),b?_.data=b:(b=wC(n),b!==null&&(_.data=b)))),(b=GI?HI(t,n):$I(t,n))&&(_=Jc(f,"onBeforeInput"),0<_.length&&(L=new xv("onBeforeInput","beforeinput",null,n,d),m.push({event:L,listeners:_}),L.data=b)),kR(m,t,f,n,d)}vS(m,e)})}function vl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=fl(t,n),r!=null&&i.unshift(vl(t,r,s)),r=fl(t,e),r!=null&&i.push(vl(t,r,s))),t.tag===3)return i;t=t.return}return[]}function Js(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function _0(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,c=a.alternate,f=a.stateNode;if(a=a.tag,c!==null&&c===i)break;a!==5&&a!==26&&a!==27||f===null||(c=f,r?(f=fl(n,s),f!=null&&o.unshift(vl(n,f,c))):r||(f=fl(n,s),f!=null&&o.push(vl(n,f,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var FR=/\r\n?/g,zR=/\u0000|\uFFFD/g;function T0(t){return(typeof t=="string"?t:""+t).replace(FR,`
`).replace(zR,"")}function TS(t,e){return e=T0(e),T0(t)===e}function Kf(){}function Pe(t,e,n,i,r,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Uo(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Uo(t,""+i);break;case"className":Ru(t,"class",i);break;case"tabIndex":Ru(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Ru(t,n,i);break;case"style":TC(t,i,s);break;case"data":if(e!=="object"){Ru(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Wu(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&Pe(t,e,"name",r.name,r,null),Pe(t,e,"formEncType",r.formEncType,r,null),Pe(t,e,"formMethod",r.formMethod,r,null),Pe(t,e,"formTarget",r.formTarget,r,null)):(Pe(t,e,"encType",r.encType,r,null),Pe(t,e,"method",r.method,r,null),Pe(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Wu(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Kf);break;case"onScroll":i!=null&&ge("scroll",t);break;case"onScrollEnd":i!=null&&ge("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(W(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(W(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Wu(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":ge("beforetoggle",t),ge("toggle",t),ju(t,"popover",i);break;case"xlinkActuate":bi(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":bi(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":bi(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":bi(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":bi(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":bi(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":bi(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":bi(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":bi(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":ju(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=gI.get(n)||n,ju(t,n,i))}}function vm(t,e,n,i,r,s){switch(n){case"style":TC(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(W(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(W(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Uo(t,i):(typeof i=="number"||typeof i=="bigint")&&Uo(t,""+i);break;case"onScroll":i!=null&&ge("scroll",t);break;case"onScrollEnd":i!=null&&ge("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Kf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mC.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),s=t[cn]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):ju(t,n,i)}}}function Ut(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ge("error",t),ge("load",t);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var o=n[s];if(o!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(W(137,e));default:Pe(t,e,s,o,n,null)}}r&&Pe(t,e,"srcSet",n.srcSet,n,null),i&&Pe(t,e,"src",n.src,n,null);return;case"input":ge("invalid",t);var a=s=o=r=null,c=null,f=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":f=d;break;case"value":s=d;break;case"defaultValue":a=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(W(137,e));break;default:Pe(t,e,i,d,n,null)}}yC(t,s,a,c,f,o,r,!1),Rc(t);return;case"select":ge("invalid",t),i=o=s=null;for(r in n)if(n.hasOwnProperty(r)&&(a=n[r],a!=null))switch(r){case"value":s=a;break;case"defaultValue":o=a;break;case"multiple":i=a;default:Pe(t,e,r,a,n,null)}e=s,n=o,t.multiple=!!i,e!=null?Eo(t,!!i,e,!1):n!=null&&Eo(t,!!i,n,!0);return;case"textarea":ge("invalid",t),s=r=i=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":i=a;break;case"defaultValue":r=a;break;case"children":s=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(W(91));break;default:Pe(t,e,o,a,n,null)}_C(t,i,r,s),Rc(t);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Pe(t,e,c,i,n,null)}return;case"dialog":ge("beforetoggle",t),ge("toggle",t),ge("cancel",t),ge("close",t);break;case"iframe":case"object":ge("load",t);break;case"video":case"audio":for(i=0;i<yl.length;i++)ge(yl[i],t);break;case"image":ge("error",t),ge("load",t);break;case"details":ge("toggle",t);break;case"embed":case"source":case"link":ge("error",t),ge("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(f in n)if(n.hasOwnProperty(f)&&(i=n[f],i!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(W(137,e));default:Pe(t,e,f,i,n,null)}return;default:if(Ap(e)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&vm(t,e,d,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&Pe(t,e,a,i,n,null))}function BR(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,o=null,a=null,c=null,f=null,d=null;for(g in n){var m=n[g];if(n.hasOwnProperty(g)&&m!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":c=m;default:i.hasOwnProperty(g)||Pe(t,e,g,null,i,m)}}for(var p in i){var g=i[p];if(m=n[p],i.hasOwnProperty(p)&&(g!=null||m!=null))switch(p){case"type":s=g;break;case"name":r=g;break;case"checked":f=g;break;case"defaultChecked":d=g;break;case"value":o=g;break;case"defaultValue":a=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(W(137,e));break;default:g!==m&&Pe(t,e,p,g,i,m)}}qh(t,o,a,c,f,d,s,r);return;case"select":g=o=a=p=null;for(s in n)if(c=n[s],n.hasOwnProperty(s)&&c!=null)switch(s){case"value":break;case"multiple":g=c;default:i.hasOwnProperty(s)||Pe(t,e,s,null,i,c)}for(r in i)if(s=i[r],c=n[r],i.hasOwnProperty(r)&&(s!=null||c!=null))switch(r){case"value":p=s;break;case"defaultValue":a=s;break;case"multiple":o=s;default:s!==c&&Pe(t,e,r,s,i,c)}e=a,n=o,i=g,p!=null?Eo(t,!!n,p,!1):!!i!=!!n&&(e!=null?Eo(t,!!n,e,!0):Eo(t,!!n,n?[]:"",!1));return;case"textarea":g=p=null;for(a in n)if(r=n[a],n.hasOwnProperty(a)&&r!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:Pe(t,e,a,null,i,r)}for(o in i)if(r=i[o],s=n[o],i.hasOwnProperty(o)&&(r!=null||s!=null))switch(o){case"value":p=r;break;case"defaultValue":g=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(W(91));break;default:r!==s&&Pe(t,e,o,r,i,s)}vC(t,p,g);return;case"option":for(var E in n)if(p=n[E],n.hasOwnProperty(E)&&p!=null&&!i.hasOwnProperty(E))switch(E){case"selected":t.selected=!1;break;default:Pe(t,e,E,null,i,p)}for(c in i)if(p=i[c],g=n[c],i.hasOwnProperty(c)&&p!==g&&(p!=null||g!=null))switch(c){case"selected":t.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Pe(t,e,c,p,i,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var x in n)p=n[x],n.hasOwnProperty(x)&&p!=null&&!i.hasOwnProperty(x)&&Pe(t,e,x,null,i,p);for(f in i)if(p=i[f],g=n[f],i.hasOwnProperty(f)&&p!==g&&(p!=null||g!=null))switch(f){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(W(137,e));break;default:Pe(t,e,f,p,i,g)}return;default:if(Ap(e)){for(var P in n)p=n[P],n.hasOwnProperty(P)&&p!==void 0&&!i.hasOwnProperty(P)&&vm(t,e,P,void 0,i,p);for(d in i)p=i[d],g=n[d],!i.hasOwnProperty(d)||p===g||p===void 0&&g===void 0||vm(t,e,d,p,i,g);return}}for(var A in n)p=n[A],n.hasOwnProperty(A)&&p!=null&&!i.hasOwnProperty(A)&&Pe(t,e,A,null,i,p);for(m in i)p=i[m],g=n[m],!i.hasOwnProperty(m)||p===g||p==null&&g==null||Pe(t,e,m,p,i,g)}var _m=null,Tm=null;function Qc(t){return t.nodeType===9?t:t.ownerDocument}function E0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ES(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Em(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mh=null;function qR(){var t=window.event;return t&&t.type==="popstate"?t===mh?!1:(mh=t,!0):(mh=null,!1)}var CS=typeof setTimeout=="function"?setTimeout:void 0,GR=typeof clearTimeout=="function"?clearTimeout:void 0,C0=typeof Promise=="function"?Promise:void 0,HR=typeof queueMicrotask=="function"?queueMicrotask:typeof C0<"u"?function(t){return C0.resolve(null).then(t).catch($R)}:CS;function $R(t){setTimeout(function(){throw t})}function Kr(t){return t==="head"}function A0(t,e){var n=e,i=0,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var o=t.ownerDocument;if(n&1&&nl(o.documentElement),n&2&&nl(o.body),n&4)for(n=o.head,nl(n),o=n.firstChild;o;){var a=o.nextSibling,c=o.nodeName;o[Ll]||c==="SCRIPT"||c==="STYLE"||c==="LINK"&&o.rel.toLowerCase()==="stylesheet"||n.removeChild(o),o=a}}if(r===0){t.removeChild(s),Al(e);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);Al(e)}function Cm(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Cm(n),Cp(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function YR(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[Ll])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=Wn(t.nextSibling),t===null)break}return null}function KR(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Wn(t.nextSibling),t===null))return null;return t}function Am(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function JR(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function Wn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var Sm=null;function S0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function AS(t,e,n){switch(e=Qc(n),t){case"html":if(t=e.documentElement,!t)throw Error(W(452));return t;case"head":if(t=e.head,!t)throw Error(W(453));return t;case"body":if(t=e.body,!t)throw Error(W(454));return t;default:throw Error(W(451))}}function nl(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Cp(t)}var Gn=new Map,w0=new Set;function Xc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Xi=xe.d;xe.d={f:QR,r:XR,D:jR,C:WR,L:ZR,m:e2,X:n2,S:t2,M:i2};function QR(){var t=Xi.f(),e=Hf();return t||e}function XR(t){var e=Zo(t);e!==null&&e.tag===5&&e.type==="form"?gA(e):Xi.r(t)}var na=typeof document>"u"?null:document;function SS(t,e,n){var i=na;if(i&&typeof e=="string"&&e){var r=kn(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),w0.has(r)||(w0.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),Ut(e,"link",t),It(e),i.head.appendChild(e)))}}function jR(t){Xi.D(t),SS("dns-prefetch",t,null)}function WR(t,e){Xi.C(t,e),SS("preconnect",t,e)}function ZR(t,e,n){Xi.L(t,e,n);var i=na;if(i&&t&&e){var r='link[rel="preload"][as="'+kn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+kn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+kn(n.imageSizes)+'"]')):r+='[href="'+kn(t)+'"]';var s=r;switch(e){case"style":s=Ho(t);break;case"script":s=ia(t)}Gn.has(s)||(t=Ke({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Gn.set(s,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(Kl(s))||e==="script"&&i.querySelector(Jl(s))||(e=i.createElement("link"),Ut(e,"link",t),It(e),i.head.appendChild(e)))}}function e2(t,e){Xi.m(t,e);var n=na;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+kn(i)+'"][href="'+kn(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=ia(t)}if(!Gn.has(s)&&(t=Ke({rel:"modulepreload",href:t},e),Gn.set(s,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Jl(s)))return}i=n.createElement("link"),Ut(i,"link",t),It(i),n.head.appendChild(i)}}}function t2(t,e,n){Xi.S(t,e,n);var i=na;if(i&&t){var r=To(i).hoistableStyles,s=Ho(t);e=e||"default";var o=r.get(s);if(!o){var a={loading:0,preload:null};if(o=i.querySelector(Kl(s)))a.loading=5;else{t=Ke({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Gn.get(s))&&sg(t,n);var c=o=i.createElement("link");It(c),Ut(c,"link",t),c._p=new Promise(function(f,d){c.onload=f,c.onerror=d}),c.addEventListener("load",function(){a.loading|=1}),c.addEventListener("error",function(){a.loading|=2}),a.loading|=4,ac(o,e,i)}o={type:"stylesheet",instance:o,count:1,state:a},r.set(s,o)}}}function n2(t,e){Xi.X(t,e);var n=na;if(n&&t){var i=To(n).hoistableScripts,r=ia(t),s=i.get(r);s||(s=n.querySelector(Jl(r)),s||(t=Ke({src:t,async:!0},e),(e=Gn.get(r))&&og(t,e),s=n.createElement("script"),It(s),Ut(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function i2(t,e){Xi.M(t,e);var n=na;if(n&&t){var i=To(n).hoistableScripts,r=ia(t),s=i.get(r);s||(s=n.querySelector(Jl(r)),s||(t=Ke({src:t,async:!0,type:"module"},e),(e=Gn.get(r))&&og(t,e),s=n.createElement("script"),It(s),Ut(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function x0(t,e,n,i){var r=(r=Cr.current)?Xc(r):null;if(!r)throw Error(W(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Ho(n.href),n=To(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Ho(n.href);var s=To(r).hoistableStyles,o=s.get(t);if(o||(r=r.ownerDocument||r,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,o),(s=r.querySelector(Kl(t)))&&!s._p&&(o.instance=s,o.state.loading=5),Gn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Gn.set(t,n),s||r2(r,t,n,o.state))),e&&i===null)throw Error(W(528,""));return o}if(e&&i!==null)throw Error(W(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=ia(n),n=To(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(W(444,t))}}function Ho(t){return'href="'+kn(t)+'"'}function Kl(t){return'link[rel="stylesheet"]['+t+"]"}function wS(t){return Ke({},t,{"data-precedence":t.precedence,precedence:null})}function r2(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Ut(e,"link",n),It(e),t.head.appendChild(e))}function ia(t){return'[src="'+kn(t)+'"]'}function Jl(t){return"script[async]"+t}function b0(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+kn(n.href)+'"]');if(i)return e.instance=i,It(i),i;var r=Ke({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),It(i),Ut(i,"style",r),ac(i,n.precedence,t),e.instance=i;case"stylesheet":r=Ho(n.href);var s=t.querySelector(Kl(r));if(s)return e.state.loading|=4,e.instance=s,It(s),s;i=wS(n),(r=Gn.get(r))&&sg(i,r),s=(t.ownerDocument||t).createElement("link"),It(s);var o=s;return o._p=new Promise(function(a,c){o.onload=a,o.onerror=c}),Ut(s,"link",i),e.state.loading|=4,ac(s,n.precedence,t),e.instance=s;case"script":return s=ia(n.src),(r=t.querySelector(Jl(s)))?(e.instance=r,It(r),r):(i=n,(r=Gn.get(s))&&(i=Ke({},n),og(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),It(r),Ut(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(W(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,ac(i,n.precedence,t));return e.instance}function ac(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,o=0;o<i.length;o++){var a=i[o];if(a.dataset.precedence===e)s=a;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function sg(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function og(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var lc=null;function I0(t,e,n){if(lc===null){var i=new Map,r=lc=new Map;r.set(n,i)}else r=lc,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[Ll]||s[$t]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var o=s.getAttribute(e)||"";o=t+o;var a=i.get(o);a?a.push(s):i.set(o,[s])}}return i}function R0(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function s2(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function xS(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var _l=null;function o2(){}function a2(t,e,n){if(_l===null)throw Error(W(475));var i=_l;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var r=Ho(n.href),s=t.querySelector(Kl(r));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(i.count++,i=jc.bind(i),t.then(i,i)),e.state.loading|=4,e.instance=s,It(s);return}s=t.ownerDocument||t,n=wS(n),(r=Gn.get(r))&&sg(n,r),s=s.createElement("link"),It(s);var o=s;o._p=new Promise(function(a,c){o.onload=a,o.onerror=c}),Ut(s,"link",n),e.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(i.count++,e=jc.bind(i),t.addEventListener("load",e),t.addEventListener("error",e))}}function l2(){if(_l===null)throw Error(W(475));var t=_l;return t.stylesheets&&t.count===0&&wm(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&wm(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function jc(){if(this.count--,this.count===0){if(this.stylesheets)wm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Wc=null;function wm(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Wc=new Map,e.forEach(u2,t),Wc=null,jc.call(t))}function u2(t,e){if(!(e.state.loading&4)){var n=Wc.get(t);if(n)var i=n.get(null);else{n=new Map,Wc.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var o=r[s];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),i=o)}i&&n.set(null,i)}r=e.instance,o=r.getAttribute("data-precedence"),s=n.get(o)||i,s===i&&n.set(null,r),n.set(o,r),this.count++,i=jc.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var Tl={$$typeof:Di,Provider:null,Consumer:null,_currentValue:fs,_currentValue2:fs,_threadCount:0};function c2(t,e,n,i,r,s,o,a){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ud(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ud(0),this.hiddenUpdates=Ud(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function bS(t,e,n,i,r,s,o,a,c,f,d,m){return t=new c2(t,e,n,o,a,c,f,m),e=1,s===!0&&(e|=24),s=_n(3,null,null,e),t.current=s,s.stateNode=t,e=Vp(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},Up(s),t}function IS(t){return t?(t=mo,t):mo}function RS(t,e,n,i,r,s){r=IS(r),i.context===null?i.context=r:i.pendingContext=r,i=Ar(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Sr(t,i,e),n!==null&&(wn(n,t,e),Ja(n,t,e))}function N0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ag(t,e){N0(t,e),(t=t.alternate)&&N0(t,e)}function NS(t){if(t.tag===13){var e=ea(t,67108864);e!==null&&wn(e,t,67108864),ag(t,67108864)}}var Zc=!0;function f2(t,e,n,i){var r=le.T;le.T=null;var s=xe.p;try{xe.p=2,lg(t,e,n,i)}finally{xe.p=s,le.T=r}}function d2(t,e,n,i){var r=le.T;le.T=null;var s=xe.p;try{xe.p=8,lg(t,e,n,i)}finally{xe.p=s,le.T=r}}function lg(t,e,n,i){if(Zc){var r=xm(i);if(r===null)hh(t,e,i,ef,n),M0(t,i);else if(m2(r,t,e,n,i))i.stopPropagation();else if(M0(t,i),e&4&&-1<h2.indexOf(t)){for(;r!==null;){var s=Zo(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var o=is(s.pendingLanes);if(o!==0){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var c=1<<31-An(o);a.entanglements[1]|=c,o&=~c}Ci(s),!(Me&6)&&(Hc=ci()+500,Yl(0))}}break;case 13:a=ea(s,2),a!==null&&wn(a,s,2),Hf(),ag(s,2)}if(s=xm(i),s===null&&hh(t,e,i,ef,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else hh(t,e,i,null,n)}}function xm(t){return t=Sp(t),ug(t)}var ef=null;function ug(t){if(ef=null,t=ao(t),t!==null){var e=Pl(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=tC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return ef=t,null}function MS(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wb()){case sC:return 2;case oC:return 8;case Ic:case Zb:return 32;case aC:return 268435456;default:return 32}default:return 32}}var bm=!1,br=null,Ir=null,Rr=null,El=new Map,Cl=new Map,hr=[],h2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function M0(t,e){switch(t){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Ir=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":El.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cl.delete(e.pointerId)}}function Da(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Zo(e),e!==null&&NS(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function m2(t,e,n,i,r){switch(e){case"focusin":return br=Da(br,t,e,n,i,r),!0;case"dragenter":return Ir=Da(Ir,t,e,n,i,r),!0;case"mouseover":return Rr=Da(Rr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return El.set(s,Da(El.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Cl.set(s,Da(Cl.get(s)||null,t,e,n,i,r)),!0}return!1}function DS(t){var e=ao(t.target);if(e!==null){var n=Pl(e);if(n!==null){if(e=n.tag,e===13){if(e=tC(n),e!==null){t.blockedOn=e,aI(t.priority,function(){if(n.tag===13){var i=Sn();i=Tp(i);var r=ea(n,i);r!==null&&wn(r,n,i),ag(n,i)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function uc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xm(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Hh=i,n.target.dispatchEvent(i),Hh=null}else return e=Zo(n),e!==null&&NS(e),t.blockedOn=n,!1;e.shift()}return!0}function D0(t,e,n){uc(t)&&n.delete(e)}function p2(){bm=!1,br!==null&&uc(br)&&(br=null),Ir!==null&&uc(Ir)&&(Ir=null),Rr!==null&&uc(Rr)&&(Rr=null),El.forEach(D0),Cl.forEach(D0)}function Lu(t,e){t.blockedOn===e&&(t.blockedOn=null,bm||(bm=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,p2)))}var Ou=null;function P0(t){Ou!==t&&(Ou=t,At.unstable_scheduleCallback(At.unstable_NormalPriority,function(){Ou===t&&(Ou=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(ug(i||n)===null)continue;break}var s=Zo(n);s!==null&&(t.splice(e,3),e-=3,om(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Al(t){function e(c){return Lu(c,t)}br!==null&&Lu(br,t),Ir!==null&&Lu(Ir,t),Rr!==null&&Lu(Rr,t),El.forEach(e),Cl.forEach(e);for(var n=0;n<hr.length;n++){var i=hr[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<hr.length&&(n=hr[0],n.blockedOn===null);)DS(n),n.blockedOn===null&&hr.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],o=r[cn]||null;if(typeof s=="function")o||P0(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(r=s,o=s[cn]||null)a=o.formAction;else if(ug(r)!==null)continue}else a=o.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),P0(n)}}}function cg(t){this._internalRoot=t}Jf.prototype.render=cg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));var n=e.current,i=Sn();RS(n,i,t,e,null,null)};Jf.prototype.unmount=cg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;RS(t.current,2,null,t,null,null),Hf(),e[Wo]=null}};function Jf(t){this._internalRoot=t}Jf.prototype.unstable_scheduleHydration=function(t){if(t){var e=dC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<hr.length&&e!==0&&e<hr[n].priority;n++);hr.splice(n,0,t),n===0&&DS(t)}};var V0=ZE.version;if(V0!=="19.1.0")throw Error(W(527,V0,"19.1.0"));xe.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=$b(e),t=t!==null?nC(t):null,t=t===null?null:t.stateNode,t};var g2={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:le,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fu.isDisabled&&Fu.supportsFiber)try{Vl=Fu.inject(g2),Cn=Fu}catch{}}Df.createRoot=function(t,e){if(!eC(t))throw Error(W(299));var n=!1,i="",r=bA,s=IA,o=RA,a=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(a=e.unstable_transitionCallbacks)),e=bS(t,1,!1,null,null,n,i,r,s,o,a,null),t[Wo]=e.current,rg(t),new cg(e)};Df.hydrateRoot=function(t,e,n){if(!eC(t))throw Error(W(299));var i=!1,r="",s=bA,o=IA,a=RA,c=null,f=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(c=n.unstable_transitionCallbacks),n.formState!==void 0&&(f=n.formState)),e=bS(t,1,!0,e,n??null,i,r,s,o,a,c,f),e.context=IS(null),n=e.current,i=Sn(),i=Tp(i),r=Ar(i),r.callback=null,Sr(n,r,i),n=i,e.current.lanes=n,Ul(e,n),Ci(e),t[Wo]=e.current,rg(t),new Jf(e)};Df.version="19.1.0";function PS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PS)}catch(t){console.error(t)}}PS(),KE.exports=Df;var y2=KE.exports;const v2=LE(y2),_2=()=>{};var k0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},T2=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},kS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,f=c?t[r+2]:0,d=s>>2,m=(s&3)<<4|a>>4;let p=(a&15)<<2|f>>6,g=f&63;c||(g=64,o||(p=64)),i.push(n[d],n[m],n[p],n[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):T2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const m=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||f==null||m==null)throw new E2;const p=s<<2|a>>4;if(i.push(p),f!==64){const g=a<<4&240|f>>2;if(i.push(g),m!==64){const E=f<<6&192|m;i.push(E)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class E2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const C2=function(t){const e=VS(t);return kS.encodeByteArray(e,!0)},tf=function(t){return C2(t).replace(/\./g,"")},US=function(t){try{return kS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=()=>A2().__FIREBASE_DEFAULTS__,w2=()=>{if(typeof process>"u"||typeof k0>"u")return;const t=k0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},x2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&US(t[1]);return e&&JSON.parse(e)},Qf=()=>{try{return _2()||S2()||w2()||x2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},LS=t=>{var e,n;return(n=(e=Qf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},OS=t=>{const e=LS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},FS=()=>{var t;return(t=Qf())===null||t===void 0?void 0:t.config},zS=t=>{var e;return(e=Qf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[tf(JSON.stringify(n)),tf(JSON.stringify(o)),""].join(".")}const il={};function I2(){const t={prod:[],emulator:[]};for(const e of Object.keys(il))il[e]?t.emulator.push(e):t.prod.push(e);return t}function R2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let U0=!1;function dg(t,e){if(typeof window>"u"||typeof document>"u"||!ks(window.location.host)||il[t]===e||il[t]||U0)return;il[t]=e;function n(p){return`__firebase__banner__${p}`}const i="__firebase__banner",s=I2().prod.length>0;function o(){const p=document.getElementById(i);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function f(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{U0=!0,o()},p}function d(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=R2(i),g=n("text"),E=document.getElementById(g)||document.createElement("span"),x=n("learnmore"),P=document.getElementById(x)||document.createElement("a"),A=n("preprendIcon"),w=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const N=p.element;a(N),d(P,x);const D=f();c(w,A),N.append(w,E,P,D),document.body.appendChild(N)}s?(E.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function N2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function M2(){var t;const e=(t=Qf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function D2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function P2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function V2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function k2(){const t=Jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function U2(){return!M2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L2(){try{return typeof indexedDB=="object"}catch{return!1}}function O2(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="FirebaseError";class Ai extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=F2,Object.setPrototypeOf(this,Ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ql.prototype.create)}}class Ql{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?z2(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Ai(r,a,i)}}function z2(t,e){return t.replace(B2,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const B2=/\{\$([^}]+)}/g;function q2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ws(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(L0(s)&&L0(o)){if(!ws(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function L0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function G2(t,e){const n=new H2(t,e);return n.subscribe.bind(n)}class H2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");$2(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=ph),r.error===void 0&&(r.error=ph),r.complete===void 0&&(r.complete=ph);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ph(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){return t&&t._delegate?t._delegate:t}class Lr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new b2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(J2(e))try{this.getOrInitializeService({instanceIdentifier:os})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=os){return this.instances.has(e)}getOptions(e=os){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:K2(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=os){return this.component?this.component.multipleInstances?e:os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K2(t){return t===os?void 0:t}function J2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Y2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const X2={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},j2=ve.INFO,W2={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},Z2=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=W2[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hg{constructor(e){this.name=e,this._logLevel=j2,this._logHandler=Z2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?X2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const eN=(t,e)=>e.some(n=>t instanceof n);let O0,F0;function tN(){return O0||(O0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nN(){return F0||(F0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qS=new WeakMap,Im=new WeakMap,GS=new WeakMap,gh=new WeakMap,mg=new WeakMap;function iN(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Nr(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&qS.set(n,t)}).catch(()=>{}),mg.set(e,t),e}function rN(t){if(Im.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Im.set(t,e)}let Rm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Im.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sN(t){Rm=t(Rm)}function oN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(yh(this),e,...n);return GS.set(i,e.sort?e.sort():[e]),Nr(i)}:nN().includes(t)?function(...e){return t.apply(yh(this),e),Nr(qS.get(this))}:function(...e){return Nr(t.apply(yh(this),e))}}function aN(t){return typeof t=="function"?oN(t):(t instanceof IDBTransaction&&rN(t),eN(t,tN())?new Proxy(t,Rm):t)}function Nr(t){if(t instanceof IDBRequest)return iN(t);if(gh.has(t))return gh.get(t);const e=aN(t);return e!==t&&(gh.set(t,e),mg.set(e,t)),e}const yh=t=>mg.get(t);function lN(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Nr(o);return i&&o.addEventListener("upgradeneeded",c=>{i(Nr(o.result),c.oldVersion,c.newVersion,Nr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),a}const uN=["get","getKey","getAll","getAllKeys","count"],cN=["put","add","delete","clear"],vh=new Map;function z0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vh.get(e))return vh.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=cN.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||uN.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,r?"readwrite":"readonly");let f=c.store;return i&&(f=f.index(a.shift())),(await Promise.all([f[n](...a),r&&c.done]))[0]};return vh.set(e,s),s}sN(t=>({...t,get:(e,n,i)=>z0(e,n)||t.get(e,n,i),has:(e,n)=>!!z0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dN(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function dN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nm="@firebase/app",B0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new hg("@firebase/app"),hN="@firebase/app-compat",mN="@firebase/analytics-compat",pN="@firebase/analytics",gN="@firebase/app-check-compat",yN="@firebase/app-check",vN="@firebase/auth",_N="@firebase/auth-compat",TN="@firebase/database",EN="@firebase/data-connect",CN="@firebase/database-compat",AN="@firebase/functions",SN="@firebase/functions-compat",wN="@firebase/installations",xN="@firebase/installations-compat",bN="@firebase/messaging",IN="@firebase/messaging-compat",RN="@firebase/performance",NN="@firebase/performance-compat",MN="@firebase/remote-config",DN="@firebase/remote-config-compat",PN="@firebase/storage",VN="@firebase/storage-compat",kN="@firebase/firestore",UN="@firebase/ai",LN="@firebase/firestore-compat",ON="firebase",FN="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="[DEFAULT]",zN={[Nm]:"fire-core",[hN]:"fire-core-compat",[pN]:"fire-analytics",[mN]:"fire-analytics-compat",[yN]:"fire-app-check",[gN]:"fire-app-check-compat",[vN]:"fire-auth",[_N]:"fire-auth-compat",[TN]:"fire-rtdb",[EN]:"fire-data-connect",[CN]:"fire-rtdb-compat",[AN]:"fire-fn",[SN]:"fire-fn-compat",[wN]:"fire-iid",[xN]:"fire-iid-compat",[bN]:"fire-fcm",[IN]:"fire-fcm-compat",[RN]:"fire-perf",[NN]:"fire-perf-compat",[MN]:"fire-rc",[DN]:"fire-rc-compat",[PN]:"fire-gcs",[VN]:"fire-gcs-compat",[kN]:"fire-fst",[LN]:"fire-fst-compat",[UN]:"fire-vertex","fire-js":"fire-js",[ON]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf=new Map,BN=new Map,Dm=new Map;function q0(t,e){try{t.container.addComponent(e)}catch(n){Yi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xs(t){const e=t.name;if(Dm.has(e))return Yi.debug(`There were multiple attempts to register component ${e}.`),!1;Dm.set(e,t);for(const n of nf.values())q0(n,t);for(const n of BN.values())q0(n,t);return!0}function Xf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ln(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new Ql("app","Firebase",qN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=FN;function HS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Mm,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw Mr.create("bad-app-name",{appName:String(r)});if(n||(n=FS()),!n)throw Mr.create("no-options");const s=nf.get(r);if(s){if(ws(n,s.options)&&ws(i,s.config))return s;throw Mr.create("duplicate-app",{appName:r})}const o=new Q2(r);for(const c of Dm.values())o.addComponent(c);const a=new GN(n,i,o);return nf.set(r,a),a}function pg(t=Mm){const e=nf.get(t);if(!e&&t===Mm&&FS())return HS();if(!e)throw Mr.create("no-app",{appName:t});return e}function di(t,e,n){var i;let r=(i=zN[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yi.warn(a.join(" "));return}xs(new Lr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="firebase-heartbeat-database",$N=1,Sl="firebase-heartbeat-store";let _h=null;function $S(){return _h||(_h=lN(HN,$N,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Mr.create("idb-open",{originalErrorMessage:t.message})})),_h}async function YN(t){try{const n=(await $S()).transaction(Sl),i=await n.objectStore(Sl).get(YS(t));return await n.done,i}catch(e){if(e instanceof Ai)Yi.warn(e.message);else{const n=Mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yi.warn(n.message)}}}async function G0(t,e){try{const i=(await $S()).transaction(Sl,"readwrite");await i.objectStore(Sl).put(e,YS(t)),await i.done}catch(n){if(n instanceof Ai)Yi.warn(n.message);else{const i=Mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yi.warn(i.message)}}}function YS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=1024,JN=30;class QN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=H0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>JN){const o=WN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Yi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=H0(),{heartbeatsToSend:i,unsentEntries:r}=XN(this._heartbeatsCache.heartbeats),s=tf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Yi.warn(n),""}}}function H0(){return new Date().toISOString().substring(0,10)}function XN(t,e=KN){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),$0(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),$0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class jN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return L2()?O2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return G0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return G0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function $0(t){return tf(JSON.stringify({version:2,heartbeats:t})).length}function WN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t){xs(new Lr("platform-logger",e=>new fN(e),"PRIVATE")),xs(new Lr("heartbeat",e=>new QN(e),"PRIVATE")),di(Nm,B0,t),di(Nm,B0,"esm2017"),di("fire-js","")}ZN("");var eM="firebase",tM="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */di(eM,tM,"app");function gg(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function KS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nM=KS,JS=new Ql("auth","Firebase",KS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new hg("@firebase/auth");function iM(t,...e){rf.logLevel<=ve.WARN&&rf.warn(`Auth (${Us}): ${t}`,...e)}function cc(t,...e){rf.logLevel<=ve.ERROR&&rf.error(`Auth (${Us}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t,...e){throw vg(t,...e)}function Zn(t,...e){return vg(t,...e)}function yg(t,e,n){const i=Object.assign(Object.assign({},nM()),{[e]:n});return new Ql("auth","Firebase",i).create(e,{appName:t.name})}function vs(t){return yg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rM(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&vi(t,"argument-error"),yg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return JS.create(t,...e)}function ue(t,e,...n){if(!t)throw vg(e,...n)}function Li(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cc(e),new Error(e)}function Ki(t,e){t||Li(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function sM(){return Y0()==="http:"||Y0()==="https:"}function Y0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sM()||P2()||"connection"in navigator)?navigator.onLine:!0}function aM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ki(n>e,"Short delay should be less than long delay!"),this.isMobile=N2()||V2()}get(){return oM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t,e){Ki(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cM=new jl(3e4,6e4);function Tg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ra(t,e,n,i,r={}){return XS(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Xl(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:c},s);return D2()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&ks(t.emulatorConfig.host)&&(f.credentials="include"),QS.fetch()(await jS(t,t.config.apiHost,n,a),f)})}async function XS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},lM),e);try{const r=new dM(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw zu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,f]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw zu(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw zu(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw zu(t,"user-disabled",o);const d=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw yg(t,d,f);vi(t,d)}}catch(r){if(r instanceof Ai)throw r;vi(t,"network-request-failed",{message:String(r)})}}async function fM(t,e,n,i,r={}){const s=await ra(t,e,n,i,r);return"mfaPendingCredential"in s&&vi(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function jS(t,e,n,i){const r=`${e}${n}?${i}`,s=t,o=s.config.emulator?_g(t.config,r):`${t.config.apiScheme}://${r}`;return uM.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class dM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Zn(this.auth,"network-request-failed")),cM.get())})}}function zu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Zn(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hM(t,e){return ra(t,"POST","/v1/accounts:delete",e)}async function sf(t,e){return ra(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mM(t,e=!1){const n=yt(t),i=await n.getIdToken(e),r=Eg(i);ue(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:rl(Th(r.auth_time)),issuedAtTime:rl(Th(r.iat)),expirationTime:rl(Th(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Th(t){return Number(t)*1e3}function Eg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return cc("JWT malformed, contained fewer than 3 sections"),null;try{const r=US(n);return r?JSON.parse(r):(cc("Failed to decode base64 JWT payload"),null)}catch(r){return cc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function K0(t){const e=Eg(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ai&&pM(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function pM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rl(this.lastLoginAt),this.creationTime=rl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function of(t){var e;const n=t.auth,i=await t.getIdToken(),r=await wl(t,sf(n,{idToken:i}));ue(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?WS(s.providerUserInfo):[],a=vM(t.providerData,o),c=t.isAnonymous,f=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=c?f:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Vm(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function yM(t){const e=yt(t);await of(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vM(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function WS(t){return t.map(e=>{var{providerId:n}=e,i=gg(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(t,e){const n=await XS(t,{},async()=>{const i=Xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=await jS(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:i};return t.emulatorConfig&&ks(t.emulatorConfig.host)&&(c.credentials="include"),QS.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TM(t,e){return ra(t,"POST","/v2/accounts:revokeToken",Tg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=K0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await _M(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Io;return i&&(ue(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ue(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ue(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return Li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xn{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=gg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Vm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await wl(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mM(this,e)}reload(){return yM(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await of(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ln(this.auth.app))return Promise.reject(vs(this.auth));const e=await this.getIdToken();return await wl(this,hM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,c,f,d;const m=(i=n.displayName)!==null&&i!==void 0?i:void 0,p=(r=n.email)!==null&&r!==void 0?r:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,A=(f=n.createdAt)!==null&&f!==void 0?f:void 0,w=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:N,emailVerified:D,isAnonymous:O,providerData:L,stsTokenManager:b}=n;ue(N&&b,e,"internal-error");const _=Io.fromJSON(this.name,b);ue(typeof N=="string",e,"internal-error"),or(m,e.name),or(p,e.name),ue(typeof D=="boolean",e,"internal-error"),ue(typeof O=="boolean",e,"internal-error"),or(g,e.name),or(E,e.name),or(x,e.name),or(P,e.name),or(A,e.name),or(w,e.name);const T=new Xn({uid:N,auth:e,email:p,emailVerified:D,displayName:m,isAnonymous:O,photoURL:E,phoneNumber:g,tenantId:x,stsTokenManager:_,createdAt:A,lastLoginAt:w});return L&&Array.isArray(L)&&(T.providerData=L.map(S=>Object.assign({},S))),P&&(T._redirectEventId=P),T}static async _fromIdTokenResponse(e,n,i=!1){const r=new Io;r.updateFromServerResponse(n);const s=new Xn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await of(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ue(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?WS(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new Io;a.updateFromIdToken(i);const c=new Xn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Vm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0=new Map;function Oi(t){Ki(t instanceof Function,"Expected a class definition");let e=J0.get(t);return e?(Ki(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,J0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ZS.type="NONE";const Q0=ZS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ro{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=fc(this.userKey,r.apiKey,s),this.fullPersistenceKey=fc("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await sf(this.auth,{idToken:e}).catch(()=>{});return n?Xn._fromGetAccountInfoResponse(this.auth,n,e):null}return Xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ro(Oi(Q0),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let s=r[0]||Oi(Q0);const o=fc(i,e.config.apiKey,e.name);let a=null;for(const f of n)try{const d=await f._get(o);if(d){let m;if(typeof d=="string"){const p=await sf(e,{idToken:d}).catch(()=>{});if(!p)break;m=await Xn._fromGetAccountInfoResponse(e,p,d)}else m=Xn._fromJSON(e,d);f!==s&&(a=m),s=f;break}}catch{}const c=r.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Ro(s,e,i):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async f=>{if(f!==s)try{await f._remove(o)}catch{}})),new Ro(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(i1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(e1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(s1(e))return"Blackberry";if(o1(e))return"Webos";if(t1(e))return"Safari";if((e.includes("chrome/")||n1(e))&&!e.includes("edge/"))return"Chrome";if(r1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function e1(t=Jt()){return/firefox\//i.test(t)}function t1(t=Jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function n1(t=Jt()){return/crios\//i.test(t)}function i1(t=Jt()){return/iemobile/i.test(t)}function r1(t=Jt()){return/android/i.test(t)}function s1(t=Jt()){return/blackberry/i.test(t)}function o1(t=Jt()){return/webos/i.test(t)}function Cg(t=Jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function EM(t=Jt()){var e;return Cg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function CM(){return k2()&&document.documentMode===10}function a1(t=Jt()){return Cg(t)||r1(t)||o1(t)||s1(t)||/windows phone/i.test(t)||i1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t,e=[]){let n;switch(t){case"Browser":n=X0(Jt());break;case"Worker":n=`${X0(Jt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Us}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SM(t,e={}){return ra(t,"GET","/v2/passwordPolicy",Tg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=6;class xM{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:wM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j0(this),this.idTokenSubscription=new j0(this),this.beforeStateQueue=new AM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Oi(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Ro.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sf(this,{idToken:e}),i=await Xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ln(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await of(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ln(this.app))return Promise.reject(vs(this));const n=e?yt(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ln(this.app)?Promise.reject(vs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ln(this.app)?Promise.reject(vs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Oi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SM(this),n=new xM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ql("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await TM(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Oi(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[Oi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=l1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(Ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&iM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function jf(t){return yt(t)}class j0{constructor(e){this.auth=e,this.observer=null,this.addObserver=G2(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ag={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IM(t){Ag=t}function RM(t){return Ag.loadJS(t)}function NM(){return Ag.gapiScript}function MM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(t,e){const n=Xf(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(ws(s,e??{}))return r;vi(r,"already-initialized")}return n.initialize({options:e})}function PM(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Oi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function VM(t,e,n){const i=jf(t);ue(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=u1(e),{host:o,port:a}=kM(e),c=a===null?"":`:${a}`,f={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){ue(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ue(ws(f,i.config.emulator)&&ws(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,ks(o)?(fg(`${s}//${o}${c}`),dg("Auth",!0)):UM()}function u1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kM(t){const e=u1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:W0(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:W0(o)}}}function W0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function UM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Li("not implemented")}_getIdTokenResponse(e){return Li("not implemented")}_linkToIdToken(e,n){return Li("not implemented")}_getReauthenticationResolver(e){return Li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(t,e){return fM(t,"POST","/v1/accounts:signInWithIdp",Tg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM="http://localhost";class bs extends c1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=gg(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new bs(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return No(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,No(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,No(e,n)}buildRequest(){const e={requestUri:LM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends Sg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Wl{constructor(){super("facebook.com")}static credential(e){return bs._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bs._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Mi.credential(n,i)}catch{return null}}}Mi.GOOGLE_SIGN_IN_METHOD="google.com";Mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Wl{constructor(){super("github.com")}static credential(e){return bs._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com";pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Wl{constructor(){super("twitter.com")}static credential(e,n){return bs._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return gr.credential(n,i)}catch{return null}}}gr.TWITTER_SIGN_IN_METHOD="twitter.com";gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Xn._fromIdTokenResponse(e,i,r),o=Z0(i);return new $o({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Z0(i);return new $o({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Z0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af extends Ai{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,af.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new af(e,n,i,r)}}function f1(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?af._fromErrorAndOperation(t,s,e,i):s})}async function OM(t,e,n=!1){const i=await wl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return $o._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FM(t,e,n=!1){const{auth:i}=t;if(Ln(i.app))return Promise.reject(vs(i));const r="reauthenticate";try{const s=await wl(t,f1(i,r,e,t),n);ue(s.idToken,i,"internal-error");const o=Eg(s.idToken);ue(o,i,"internal-error");const{sub:a}=o;return ue(t.uid===a,i,"user-mismatch"),$o._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&vi(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(t,e,n=!1){if(Ln(t.app))return Promise.reject(vs(t));const i="signIn",r=await f1(t,i,e),s=await $o._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}function BM(t,e,n,i){return yt(t).onIdTokenChanged(e,n,i)}function qM(t,e,n){return yt(t).beforeAuthStateChanged(e,n)}function GM(t,e,n,i){return yt(t).onAuthStateChanged(e,n,i)}function HM(t){return yt(t).signOut()}const lf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lf,"1"),this.storage.removeItem(lf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=1e3,YM=10;class h1 extends d1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);CM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,YM):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},$M)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}h1.type="LOCAL";const KM=h1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1 extends d1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}m1.type="SESSION";const p1=m1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Wf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async f=>f(n.origin,s)),c=await JM(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const f=wg("",20);r.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(m){const p=m;if(p.data.eventId===f)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return window}function XM(t){hi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(){return typeof hi().WorkerGlobalScope<"u"&&typeof hi().importScripts=="function"}async function jM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ZM(){return g1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="firebaseLocalStorageDb",eD=1,uf="firebaseLocalStorage",v1="fbase_key";class Zl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zf(t,e){return t.transaction([uf],e?"readwrite":"readonly").objectStore(uf)}function tD(){const t=indexedDB.deleteDatabase(y1);return new Zl(t).toPromise()}function km(){const t=indexedDB.open(y1,eD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(uf,{keyPath:v1})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(uf)?e(i):(i.close(),await tD(),e(await km()))})})}async function e_(t,e,n){const i=Zf(t,!0).put({[v1]:e,value:n});return new Zl(i).toPromise()}async function nD(t,e){const n=Zf(t,!1).get(e),i=await new Zl(n).toPromise();return i===void 0?null:i.value}function t_(t,e){const n=Zf(t,!0).delete(e);return new Zl(n).toPromise()}const iD=800,rD=3;class _1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await km(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>rD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return g1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wf._getInstance(ZM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await jM(),!this.activeServiceWorker)return;this.sender=new QM(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await km();return await e_(e,lf,"1"),await t_(e,lf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>e_(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>nD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>t_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Zf(r,!1).getAll();return new Zl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_1.type="LOCAL";const sD=_1;new jl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(t,e){return e?Oi(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg extends c1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return No(e,this._buildIdpRequest())}_linkToIdToken(e,n){return No(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return No(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oD(t){return zM(t.auth,new xg(t),t.bypassAuthState)}function aD(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),FM(n,new xg(t),t.bypassAuthState)}async function lD(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),OM(n,new xg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oD;case"linkViaPopup":case"linkViaRedirect":return lD;case"reauthViaPopup":case"reauthViaRedirect":return aD;default:vi(this.auth,"internal-error")}}resolve(e){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=new jl(2e3,1e4);async function cD(t,e,n){if(Ln(t.app))return Promise.reject(Zn(t,"operation-not-supported-in-this-environment"));const i=jf(t);rM(t,e,Sg);const r=T1(i,n);return new ls(i,"signInViaPopup",e,r).executeNotNull()}class ls extends E1{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,ls.currentPopupAction&&ls.currentPopupAction.cancel(),ls.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){Ki(this.filter.length===1,"Popup operations only handle one event");const e=wg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ls.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uD.get())};e()}}ls.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="pendingRedirect",dc=new Map;class dD extends E1{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=dc.get(this.auth._key());if(!e){try{const i=await hD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}dc.set(this.auth._key(),e)}return this.bypassAuthState||dc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hD(t,e){const n=gD(e),i=pD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function mD(t,e){dc.set(t._key(),e)}function pD(t){return Oi(t._redirectPersistence)}function gD(t){return fc(fD,t.config.apiKey,t.name)}async function yD(t,e,n=!1){if(Ln(t.app))return Promise.reject(vs(t));const i=jf(t),r=T1(i,e),o=await new dD(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=10*60*1e3;class _D{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!C1(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Zn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vD&&this.cachedEventUids.clear(),this.cachedEventUids.has(n_(e))}saveEventToCache(e){this.cachedEventUids.add(n_(e)),this.lastProcessedEventTime=Date.now()}}function n_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function C1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return C1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED(t,e={}){return ra(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AD=/^https?/;async function SD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ED(t);for(const n of e)try{if(wD(n))return}catch{}vi(t,"unauthorized-domain")}function wD(t){const e=Pm(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!AD.test(n))return!1;if(CD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=new jl(3e4,6e4);function i_(){const t=hi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bD(t){return new Promise((e,n)=>{var i,r,s;function o(){i_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{i_(),n(Zn(t,"network-request-failed"))},timeout:xD.get()})}if(!((r=(i=hi().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=hi().gapi)===null||s===void 0)&&s.load)o();else{const a=MM("iframefcb");return hi()[a]=()=>{gapi.load?o():n(Zn(t,"network-request-failed"))},RM(`${NM()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw hc=null,e})}let hc=null;function ID(t){return hc=hc||bD(t),hc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=new jl(5e3,15e3),ND="__/auth/iframe",MD="emulator/auth/iframe",DD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VD(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_g(e,MD):`https://${t.config.authDomain}/${ND}`,i={apiKey:e.apiKey,appName:t.name,v:Us},r=PD.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Xl(i).slice(1)}`}async function kD(t){const e=await ID(t),n=hi().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:VD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DD,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Zn(t,"network-request-failed"),a=hi().setTimeout(()=>{s(o)},RD.get());function c(){hi().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LD=500,OD=600,FD="_blank",zD="http://localhost";class r_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BD(t,e,n,i=LD,r=OD){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},UD),{width:i.toString(),height:r.toString(),top:s,left:o}),f=Jt().toLowerCase();n&&(a=n1(f)?FD:n),e1(f)&&(e=e||zD,c.scrollbars="yes");const d=Object.entries(c).reduce((p,[g,E])=>`${p}${g}=${E},`,"");if(EM(f)&&a!=="_self")return qD(e||"",a),new r_(null);const m=window.open(e||"",a,d);ue(m,t,"popup-blocked");try{m.focus()}catch{}return new r_(m)}function qD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="__/auth/handler",HD="emulator/auth/handler",$D=encodeURIComponent("fac");async function s_(t,e,n,i,r,s){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Us,eventId:r};if(e instanceof Sg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",q2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))o[d]=m}if(e instanceof Wl){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const c=await t._getAppCheckToken(),f=c?`#${$D}=${encodeURIComponent(c)}`:"";return`${YD(t)}?${Xl(a).slice(1)}${f}`}function YD({config:t}){return t.emulator?_g(t,HD):`https://${t.authDomain}/${GD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh="webStorageSupport";class KD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=p1,this._completeRedirectFn=yD,this._overrideRedirectResult=mD}async _openPopup(e,n,i,r){var s;Ki((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await s_(e,n,i,Pm(),r);return BD(e,o,wg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await s_(e,n,i,Pm(),r);return XM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ki(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await kD(e),i=new _D(e);return n.register("authEvent",r=>(ue(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Eh,{type:Eh},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Eh];o!==void 0&&n(!!o),vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=SD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return a1()||t1()||Cg()}}const JD=KD;var o_="@firebase/auth",a_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jD(t){xs(new Lr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:l1(t)},f=new bM(i,r,s,c);return PM(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),xs(new Lr("auth-internal",e=>{const n=jf(e.getProvider("auth").getImmediate());return(i=>new QD(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),di(o_,a_,XD(t)),di(o_,a_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=5*60,ZD=zS("authIdTokenMaxAge")||WD;let l_=null;const eP=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>ZD)return;const r=n==null?void 0:n.token;l_!==r&&(l_=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function tP(t=pg()){const e=Xf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=DM(t,{popupRedirectResolver:JD,persistence:[sD,KM,p1]}),i=zS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=eP(s.toString());qM(n,o,()=>o(n.currentUser)),BM(n,a=>o(a))}}const r=LS("auth");return r&&VM(n,`http://${r}`),n}function nP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}IM({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Zn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",nP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jD("Browser");var u_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dr,A1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,_){function T(){}T.prototype=_.prototype,b.D=_.prototype,b.prototype=new T,b.prototype.constructor=b,b.C=function(S,I,M){for(var R=Array(arguments.length-2),F=2;F<arguments.length;F++)R[F-2]=arguments[F];return _.prototype[I].apply(S,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(b,_,T){T||(T=0);var S=Array(16);if(typeof _=="string")for(var I=0;16>I;++I)S[I]=_.charCodeAt(T++)|_.charCodeAt(T++)<<8|_.charCodeAt(T++)<<16|_.charCodeAt(T++)<<24;else for(I=0;16>I;++I)S[I]=_[T++]|_[T++]<<8|_[T++]<<16|_[T++]<<24;_=b.g[0],T=b.g[1],I=b.g[2];var M=b.g[3],R=_+(M^T&(I^M))+S[0]+3614090360&4294967295;_=T+(R<<7&4294967295|R>>>25),R=M+(I^_&(T^I))+S[1]+3905402710&4294967295,M=_+(R<<12&4294967295|R>>>20),R=I+(T^M&(_^T))+S[2]+606105819&4294967295,I=M+(R<<17&4294967295|R>>>15),R=T+(_^I&(M^_))+S[3]+3250441966&4294967295,T=I+(R<<22&4294967295|R>>>10),R=_+(M^T&(I^M))+S[4]+4118548399&4294967295,_=T+(R<<7&4294967295|R>>>25),R=M+(I^_&(T^I))+S[5]+1200080426&4294967295,M=_+(R<<12&4294967295|R>>>20),R=I+(T^M&(_^T))+S[6]+2821735955&4294967295,I=M+(R<<17&4294967295|R>>>15),R=T+(_^I&(M^_))+S[7]+4249261313&4294967295,T=I+(R<<22&4294967295|R>>>10),R=_+(M^T&(I^M))+S[8]+1770035416&4294967295,_=T+(R<<7&4294967295|R>>>25),R=M+(I^_&(T^I))+S[9]+2336552879&4294967295,M=_+(R<<12&4294967295|R>>>20),R=I+(T^M&(_^T))+S[10]+4294925233&4294967295,I=M+(R<<17&4294967295|R>>>15),R=T+(_^I&(M^_))+S[11]+2304563134&4294967295,T=I+(R<<22&4294967295|R>>>10),R=_+(M^T&(I^M))+S[12]+1804603682&4294967295,_=T+(R<<7&4294967295|R>>>25),R=M+(I^_&(T^I))+S[13]+4254626195&4294967295,M=_+(R<<12&4294967295|R>>>20),R=I+(T^M&(_^T))+S[14]+2792965006&4294967295,I=M+(R<<17&4294967295|R>>>15),R=T+(_^I&(M^_))+S[15]+1236535329&4294967295,T=I+(R<<22&4294967295|R>>>10),R=_+(I^M&(T^I))+S[1]+4129170786&4294967295,_=T+(R<<5&4294967295|R>>>27),R=M+(T^I&(_^T))+S[6]+3225465664&4294967295,M=_+(R<<9&4294967295|R>>>23),R=I+(_^T&(M^_))+S[11]+643717713&4294967295,I=M+(R<<14&4294967295|R>>>18),R=T+(M^_&(I^M))+S[0]+3921069994&4294967295,T=I+(R<<20&4294967295|R>>>12),R=_+(I^M&(T^I))+S[5]+3593408605&4294967295,_=T+(R<<5&4294967295|R>>>27),R=M+(T^I&(_^T))+S[10]+38016083&4294967295,M=_+(R<<9&4294967295|R>>>23),R=I+(_^T&(M^_))+S[15]+3634488961&4294967295,I=M+(R<<14&4294967295|R>>>18),R=T+(M^_&(I^M))+S[4]+3889429448&4294967295,T=I+(R<<20&4294967295|R>>>12),R=_+(I^M&(T^I))+S[9]+568446438&4294967295,_=T+(R<<5&4294967295|R>>>27),R=M+(T^I&(_^T))+S[14]+3275163606&4294967295,M=_+(R<<9&4294967295|R>>>23),R=I+(_^T&(M^_))+S[3]+4107603335&4294967295,I=M+(R<<14&4294967295|R>>>18),R=T+(M^_&(I^M))+S[8]+1163531501&4294967295,T=I+(R<<20&4294967295|R>>>12),R=_+(I^M&(T^I))+S[13]+2850285829&4294967295,_=T+(R<<5&4294967295|R>>>27),R=M+(T^I&(_^T))+S[2]+4243563512&4294967295,M=_+(R<<9&4294967295|R>>>23),R=I+(_^T&(M^_))+S[7]+1735328473&4294967295,I=M+(R<<14&4294967295|R>>>18),R=T+(M^_&(I^M))+S[12]+2368359562&4294967295,T=I+(R<<20&4294967295|R>>>12),R=_+(T^I^M)+S[5]+4294588738&4294967295,_=T+(R<<4&4294967295|R>>>28),R=M+(_^T^I)+S[8]+2272392833&4294967295,M=_+(R<<11&4294967295|R>>>21),R=I+(M^_^T)+S[11]+1839030562&4294967295,I=M+(R<<16&4294967295|R>>>16),R=T+(I^M^_)+S[14]+4259657740&4294967295,T=I+(R<<23&4294967295|R>>>9),R=_+(T^I^M)+S[1]+2763975236&4294967295,_=T+(R<<4&4294967295|R>>>28),R=M+(_^T^I)+S[4]+1272893353&4294967295,M=_+(R<<11&4294967295|R>>>21),R=I+(M^_^T)+S[7]+4139469664&4294967295,I=M+(R<<16&4294967295|R>>>16),R=T+(I^M^_)+S[10]+3200236656&4294967295,T=I+(R<<23&4294967295|R>>>9),R=_+(T^I^M)+S[13]+681279174&4294967295,_=T+(R<<4&4294967295|R>>>28),R=M+(_^T^I)+S[0]+3936430074&4294967295,M=_+(R<<11&4294967295|R>>>21),R=I+(M^_^T)+S[3]+3572445317&4294967295,I=M+(R<<16&4294967295|R>>>16),R=T+(I^M^_)+S[6]+76029189&4294967295,T=I+(R<<23&4294967295|R>>>9),R=_+(T^I^M)+S[9]+3654602809&4294967295,_=T+(R<<4&4294967295|R>>>28),R=M+(_^T^I)+S[12]+3873151461&4294967295,M=_+(R<<11&4294967295|R>>>21),R=I+(M^_^T)+S[15]+530742520&4294967295,I=M+(R<<16&4294967295|R>>>16),R=T+(I^M^_)+S[2]+3299628645&4294967295,T=I+(R<<23&4294967295|R>>>9),R=_+(I^(T|~M))+S[0]+4096336452&4294967295,_=T+(R<<6&4294967295|R>>>26),R=M+(T^(_|~I))+S[7]+1126891415&4294967295,M=_+(R<<10&4294967295|R>>>22),R=I+(_^(M|~T))+S[14]+2878612391&4294967295,I=M+(R<<15&4294967295|R>>>17),R=T+(M^(I|~_))+S[5]+4237533241&4294967295,T=I+(R<<21&4294967295|R>>>11),R=_+(I^(T|~M))+S[12]+1700485571&4294967295,_=T+(R<<6&4294967295|R>>>26),R=M+(T^(_|~I))+S[3]+2399980690&4294967295,M=_+(R<<10&4294967295|R>>>22),R=I+(_^(M|~T))+S[10]+4293915773&4294967295,I=M+(R<<15&4294967295|R>>>17),R=T+(M^(I|~_))+S[1]+2240044497&4294967295,T=I+(R<<21&4294967295|R>>>11),R=_+(I^(T|~M))+S[8]+1873313359&4294967295,_=T+(R<<6&4294967295|R>>>26),R=M+(T^(_|~I))+S[15]+4264355552&4294967295,M=_+(R<<10&4294967295|R>>>22),R=I+(_^(M|~T))+S[6]+2734768916&4294967295,I=M+(R<<15&4294967295|R>>>17),R=T+(M^(I|~_))+S[13]+1309151649&4294967295,T=I+(R<<21&4294967295|R>>>11),R=_+(I^(T|~M))+S[4]+4149444226&4294967295,_=T+(R<<6&4294967295|R>>>26),R=M+(T^(_|~I))+S[11]+3174756917&4294967295,M=_+(R<<10&4294967295|R>>>22),R=I+(_^(M|~T))+S[2]+718787259&4294967295,I=M+(R<<15&4294967295|R>>>17),R=T+(M^(I|~_))+S[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(I+(R<<21&4294967295|R>>>11))&4294967295,b.g[2]=b.g[2]+I&4294967295,b.g[3]=b.g[3]+M&4294967295}i.prototype.u=function(b,_){_===void 0&&(_=b.length);for(var T=_-this.blockSize,S=this.B,I=this.h,M=0;M<_;){if(I==0)for(;M<=T;)r(this,b,M),M+=this.blockSize;if(typeof b=="string"){for(;M<_;)if(S[I++]=b.charCodeAt(M++),I==this.blockSize){r(this,S),I=0;break}}else for(;M<_;)if(S[I++]=b[M++],I==this.blockSize){r(this,S),I=0;break}}this.h=I,this.o+=_},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;var T=8*this.o;for(_=b.length-8;_<b.length;++_)b[_]=T&255,T/=256;for(this.u(b),b=Array(16),_=T=0;4>_;++_)for(var S=0;32>S;S+=8)b[T++]=this.g[_]>>>S&255;return b};function s(b,_){var T=a;return Object.prototype.hasOwnProperty.call(T,b)?T[b]:T[b]=_(b)}function o(b,_){this.h=_;for(var T=[],S=!0,I=b.length-1;0<=I;I--){var M=b[I]|0;S&&M==_||(T[I]=M,S=!1)}this.g=T}var a={};function c(b){return-128<=b&&128>b?s(b,function(_){return new o([_|0],0>_?-1:0)}):new o([b|0],0>b?-1:0)}function f(b){if(isNaN(b)||!isFinite(b))return m;if(0>b)return P(f(-b));for(var _=[],T=1,S=0;b>=T;S++)_[S]=b/T|0,T*=4294967296;return new o(_,0)}function d(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return P(d(b.substring(1),_));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=f(Math.pow(_,8)),S=m,I=0;I<b.length;I+=8){var M=Math.min(8,b.length-I),R=parseInt(b.substring(I,I+M),_);8>M?(M=f(Math.pow(_,M)),S=S.j(M).add(f(R))):(S=S.j(T),S=S.add(f(R)))}return S}var m=c(0),p=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-P(this).m();for(var b=0,_=1,T=0;T<this.g.length;T++){var S=this.i(T);b+=(0<=S?S:4294967296+S)*_,_*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(E(this))return"0";if(x(this))return"-"+P(this).toString(b);for(var _=f(Math.pow(b,6)),T=this,S="";;){var I=D(T,_).g;T=A(T,I.j(_));var M=((0<T.g.length?T.g[0]:T.h)>>>0).toString(b);if(T=I,E(T))return M+S;for(;6>M.length;)M="0"+M;S=M+S}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function E(b){if(b.h!=0)return!1;for(var _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function x(b){return b.h==-1}t.l=function(b){return b=A(this,b),x(b)?-1:E(b)?0:1};function P(b){for(var _=b.g.length,T=[],S=0;S<_;S++)T[S]=~b.g[S];return new o(T,~b.h).add(p)}t.abs=function(){return x(this)?P(this):this},t.add=function(b){for(var _=Math.max(this.g.length,b.g.length),T=[],S=0,I=0;I<=_;I++){var M=S+(this.i(I)&65535)+(b.i(I)&65535),R=(M>>>16)+(this.i(I)>>>16)+(b.i(I)>>>16);S=R>>>16,M&=65535,R&=65535,T[I]=R<<16|M}return new o(T,T[T.length-1]&-2147483648?-1:0)};function A(b,_){return b.add(P(_))}t.j=function(b){if(E(this)||E(b))return m;if(x(this))return x(b)?P(this).j(P(b)):P(P(this).j(b));if(x(b))return P(this.j(P(b)));if(0>this.l(g)&&0>b.l(g))return f(this.m()*b.m());for(var _=this.g.length+b.g.length,T=[],S=0;S<2*_;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var I=0;I<b.g.length;I++){var M=this.i(S)>>>16,R=this.i(S)&65535,F=b.i(I)>>>16,G=b.i(I)&65535;T[2*S+2*I]+=R*G,w(T,2*S+2*I),T[2*S+2*I+1]+=M*G,w(T,2*S+2*I+1),T[2*S+2*I+1]+=R*F,w(T,2*S+2*I+1),T[2*S+2*I+2]+=M*F,w(T,2*S+2*I+2)}for(S=0;S<_;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=_;S<2*_;S++)T[S]=0;return new o(T,0)};function w(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function N(b,_){this.g=b,this.h=_}function D(b,_){if(E(_))throw Error("division by zero");if(E(b))return new N(m,m);if(x(b))return _=D(P(b),_),new N(P(_.g),P(_.h));if(x(_))return _=D(b,P(_)),new N(P(_.g),_.h);if(30<b.g.length){if(x(b)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var T=p,S=_;0>=S.l(b);)T=O(T),S=O(S);var I=L(T,1),M=L(S,1);for(S=L(S,2),T=L(T,2);!E(S);){var R=M.add(S);0>=R.l(b)&&(I=I.add(T),M=R),S=L(S,1),T=L(T,1)}return _=A(b,I.j(_)),new N(I,_)}for(I=m;0<=b.l(_);){for(T=Math.max(1,Math.floor(b.m()/_.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),M=f(T),R=M.j(_);x(R)||0<R.l(b);)T-=S,M=f(T),R=M.j(_);E(M)&&(M=p),I=I.add(M),b=A(b,R)}return new N(I,b)}t.A=function(b){return D(this,b).h},t.and=function(b){for(var _=Math.max(this.g.length,b.g.length),T=[],S=0;S<_;S++)T[S]=this.i(S)&b.i(S);return new o(T,this.h&b.h)},t.or=function(b){for(var _=Math.max(this.g.length,b.g.length),T=[],S=0;S<_;S++)T[S]=this.i(S)|b.i(S);return new o(T,this.h|b.h)},t.xor=function(b){for(var _=Math.max(this.g.length,b.g.length),T=[],S=0;S<_;S++)T[S]=this.i(S)^b.i(S);return new o(T,this.h^b.h)};function O(b){for(var _=b.g.length+1,T=[],S=0;S<_;S++)T[S]=b.i(S)<<1|b.i(S-1)>>>31;return new o(T,b.h)}function L(b,_){var T=_>>5;_%=32;for(var S=b.g.length-T,I=[],M=0;M<S;M++)I[M]=0<_?b.i(M+T)>>>_|b.i(M+T+1)<<32-_:b.i(M+T);return new o(I,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,A1=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=d,Dr=o}).apply(typeof u_<"u"?u_:typeof self<"u"?self:typeof window<"u"?window:{});var Bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var S1,Oa,w1,mc,Um,x1,b1,I1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,C){return h==Array.prototype||h==Object.prototype||(h[y]=C.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bu=="object"&&Bu];for(var y=0;y<h.length;++y){var C=h[y];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=n(this);function r(h,y){if(y)e:{var C=i;h=h.split(".");for(var U=0;U<h.length-1;U++){var q=h[U];if(!(q in C))break e;C=C[q]}h=h[h.length-1],U=C[h],y=y(U),y!=U&&y!=null&&e(C,h,{configurable:!0,writable:!0,value:y})}}function s(h,y){h instanceof String&&(h+="");var C=0,U=!1,q={next:function(){if(!U&&C<h.length){var J=C++;return{value:y(J,h[J]),done:!1}}return U=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}r("Array.prototype.values",function(h){return h||function(){return s(this,function(y,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function d(h,y,C){return h.call.apply(h.bind,arguments)}function m(h,y,C){if(!h)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,U),h.apply(y,q)}}return function(){return h.apply(y,arguments)}}function p(h,y,C){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,p.apply(null,arguments)}function g(h,y){var C=Array.prototype.slice.call(arguments,1);return function(){var U=C.slice();return U.push.apply(U,arguments),h.apply(this,U)}}function E(h,y){function C(){}C.prototype=y.prototype,h.aa=y.prototype,h.prototype=new C,h.prototype.constructor=h,h.Qb=function(U,q,J){for(var Z=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)Z[Ue-2]=arguments[Ue];return y.prototype[q].apply(U,Z)}}function x(h){const y=h.length;if(0<y){const C=Array(y);for(let U=0;U<y;U++)C[U]=h[U];return C}return[]}function P(h,y){for(let C=1;C<arguments.length;C++){const U=arguments[C];if(c(U)){const q=h.length||0,J=U.length||0;h.length=q+J;for(let Z=0;Z<J;Z++)h[q+Z]=U[Z]}else h.push(U)}}class A{constructor(y,C){this.i=y,this.j=C,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function w(h){return/^[\s\xa0]*$/.test(h)}function N(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function D(h){return D[" "](h),h}D[" "]=function(){};var O=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function L(h,y,C){for(const U in h)y.call(C,h[U],U,h)}function b(h,y){for(const C in h)y.call(void 0,h[C],C,h)}function _(h){const y={};for(const C in h)y[C]=h[C];return y}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(h,y){let C,U;for(let q=1;q<arguments.length;q++){U=arguments[q];for(C in U)h[C]=U[C];for(let J=0;J<T.length;J++)C=T[J],Object.prototype.hasOwnProperty.call(U,C)&&(h[C]=U[C])}}function I(h){var y=1;h=h.split(":");const C=[];for(;0<y&&h.length;)C.push(h.shift()),y--;return h.length&&C.push(h.join(":")),C}function M(h){a.setTimeout(()=>{throw h},0)}function R(){var h=B;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class F{constructor(){this.h=this.g=null}add(y,C){const U=G.get();U.set(y,C),this.h?this.h.next=U:this.g=U,this.h=U}}var G=new A(()=>new V,h=>h.reset());class V{constructor(){this.next=this.g=this.h=null}set(y,C){this.h=y,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let k,$=!1,B=new F,K=()=>{const h=a.Promise.resolve(void 0);k=()=>{h.then(ne)}};var ne=()=>{for(var h;h=R();){try{h.h.call(h.g)}catch(C){M(C)}var y=G;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}$=!1};function z(){this.s=this.s,this.C=this.C}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const C=()=>{};a.addEventListener("test",C,y),a.removeEventListener("test",C,y)}catch{}return h}();function Y(h,y){if(Q.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var C=this.type=h.type,U=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(O){e:{try{D(y.nodeName);var q=!0;break e}catch{}q=!1}q||(y=null)}}else C=="mouseover"?y=h.fromElement:C=="mouseout"&&(y=h.toElement);this.relatedTarget=y,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:re[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Y.aa.h.call(this)}}E(Y,Q);var re={2:"touch",3:"pen",4:"mouse"};Y.prototype.h=function(){Y.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),ce=0;function Te(h,y,C,U,q){this.listener=h,this.proxy=null,this.src=y,this.type=C,this.capture=!!U,this.ha=q,this.key=++ce,this.da=this.fa=!1}function be(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Oe(h){this.src=h,this.g={},this.h=0}Oe.prototype.add=function(h,y,C,U,q){var J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);var Z=Hn(h,y,U,q);return-1<Z?(y=h[Z],C||(y.fa=!1)):(y=new Te(y,this.src,J,!!U,q),y.fa=C,h.push(y)),y};function We(h,y){var C=y.type;if(C in h.g){var U=h.g[C],q=Array.prototype.indexOf.call(U,y,void 0),J;(J=0<=q)&&Array.prototype.splice.call(U,q,1),J&&(be(y),h.g[C].length==0&&(delete h.g[C],h.h--))}}function Hn(h,y,C,U){for(var q=0;q<h.length;++q){var J=h[q];if(!J.da&&J.listener==y&&J.capture==!!C&&J.ha==U)return q}return-1}var en="closure_lm_"+(1e6*Math.random()|0),Fe={};function vt(h,y,C,U,q){if(Array.isArray(y)){for(var J=0;J<y.length;J++)vt(h,y[J],C,U,q);return null}return C=Ot(C),h&&h[Ae]?h.K(y,C,f(U)?!!U.capture:!1,q):ze(h,y,C,!1,U,q)}function ze(h,y,C,U,q,J){if(!y)throw Error("Invalid event type");var Z=f(q)?!!q.capture:!!q,Ue=Je(h);if(Ue||(h[en]=Ue=new Oe(h)),C=Ue.add(y,C,U,Z,J),C.proxy)return C;if(U=ke(),C.proxy=U,U.src=h,U.listener=C,h.addEventListener)H||(q=Z),q===void 0&&(q=!1),h.addEventListener(y.toString(),U,q);else if(h.attachEvent)h.attachEvent(Ze(y.toString()),U);else if(h.addListener&&h.removeListener)h.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return C}function ke(){function h(C){return y.call(h.src,h.listener,C)}const y=Qt;return h}function ct(h,y,C,U,q){if(Array.isArray(y))for(var J=0;J<y.length;J++)ct(h,y[J],C,U,q);else U=f(U)?!!U.capture:!!U,C=Ot(C),h&&h[Ae]?(h=h.i,y=String(y).toString(),y in h.g&&(J=h.g[y],C=Hn(J,C,U,q),-1<C&&(be(J[C]),Array.prototype.splice.call(J,C,1),J.length==0&&(delete h.g[y],h.h--)))):h&&(h=Je(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Hn(y,C,U,q)),(C=-1<h?y[h]:null)&&_t(C))}function _t(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ae])We(y.i,h);else{var C=h.type,U=h.proxy;y.removeEventListener?y.removeEventListener(C,U,h.capture):y.detachEvent?y.detachEvent(Ze(C),U):y.addListener&&y.removeListener&&y.removeListener(U),(C=Je(y))?(We(C,h),C.h==0&&(C.src=null,y[en]=null)):be(h)}}}function Ze(h){return h in Fe?Fe[h]:Fe[h]="on"+h}function Qt(h,y){if(h.da)h=!0;else{y=new Y(y,this);var C=h.listener,U=h.ha||h.src;h.fa&&_t(h),h=C.call(U,y)}return h}function Je(h){return h=h[en],h instanceof Oe?h:null}var Re="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ot(h){return typeof h=="function"?h:(h[Re]||(h[Re]=function(y){return h.handleEvent(y)}),h[Re])}function Ge(){z.call(this),this.i=new Oe(this),this.M=this,this.F=null}E(Ge,z),Ge.prototype[Ae]=!0,Ge.prototype.removeEventListener=function(h,y,C,U){ct(this,h,y,C,U)};function ft(h,y){var C,U=h.F;if(U)for(C=[];U;U=U.F)C.push(U);if(h=h.M,U=y.type||y,typeof y=="string")y=new Q(y,h);else if(y instanceof Q)y.target=y.target||h;else{var q=y;y=new Q(U,h),S(y,q)}if(q=!0,C)for(var J=C.length-1;0<=J;J--){var Z=y.g=C[J];q=st(Z,U,!0,y)&&q}if(Z=y.g=h,q=st(Z,U,!0,y)&&q,q=st(Z,U,!1,y)&&q,C)for(J=0;J<C.length;J++)Z=y.g=C[J],q=st(Z,U,!1,y)&&q}Ge.prototype.N=function(){if(Ge.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var C=h.g[y],U=0;U<C.length;U++)be(C[U]);delete h.g[y],h.h--}}this.F=null},Ge.prototype.K=function(h,y,C,U){return this.i.add(String(h),y,!1,C,U)},Ge.prototype.L=function(h,y,C,U){return this.i.add(String(h),y,!0,C,U)};function st(h,y,C,U){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var q=!0,J=0;J<y.length;++J){var Z=y[J];if(Z&&!Z.da&&Z.capture==C){var Ue=Z.listener,Mt=Z.ha||Z.src;Z.fa&&We(h.i,Z),q=Ue.call(Mt,U)!==!1&&q}}return q&&!U.defaultPrevented}function ni(h,y,C){if(typeof h=="function")C&&(h=p(h,C));else if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:a.setTimeout(h,y||0)}function St(h){h.g=ni(()=>{h.g=null,h.i&&(h.i=!1,St(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class dn extends z{constructor(y,C){super(),this.m=y,this.l=C,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:St(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wt(h){z.call(this),this.h=h,this.g={}}E(wt,z);var In=[];function hn(h){L(h.g,function(y,C){this.g.hasOwnProperty(C)&&_t(y)},h),h.g={}}wt.prototype.N=function(){wt.aa.N.call(this),hn(this)},wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $n=a.JSON.stringify,ha=a.JSON.parse,Ed=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function Xr(){}Xr.prototype.h=null;function ma(h){return h.h||(h.h=h.i())}function Zi(){}var jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rn(){Q.call(this,"d")}E(Rn,Q);function Nn(){Q.call(this,"c")}E(Nn,Q);var tn={},er=null;function Wr(){return er=er||new Ge}tn.La="serverreachability";function ii(h){Q.call(this,tn.La,h)}E(ii,Q);function mn(h){const y=Wr();ft(y,new ii(y))}tn.STAT_EVENT="statevent";function Ay(h,y){Q.call(this,tn.STAT_EVENT,h),this.stat=y}E(Ay,Q);function Xt(h){const y=Wr();ft(y,new Ay(y,h))}tn.Ma="timingevent";function Sy(h,y){Q.call(this,tn.Ma,h),this.size=y}E(Sy,Q);function pa(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},y)}function ga(){this.g=!0}ga.prototype.xa=function(){this.g=!1};function Wx(h,y,C,U,q,J){h.info(function(){if(h.g)if(J)for(var Z="",Ue=J.split("&"),Mt=0;Mt<Ue.length;Mt++){var Se=Ue[Mt].split("=");if(1<Se.length){var Ft=Se[0];Se=Se[1];var zt=Ft.split("_");Z=2<=zt.length&&zt[1]=="type"?Z+(Ft+"="+Se+"&"):Z+(Ft+"=redacted&")}}else Z=null;else Z=J;return"XMLHTTP REQ ("+U+") [attempt "+q+"]: "+y+`
`+C+`
`+Z})}function Zx(h,y,C,U,q,J,Z){h.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+q+"]: "+y+`
`+C+`
`+J+" "+Z})}function Gs(h,y,C,U){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+tb(h,C)+(U?" "+U:"")})}function eb(h,y){h.info(function(){return"TIMEOUT: "+y})}ga.prototype.info=function(){};function tb(h,y){if(!h.g)return y;if(!y)return null;try{var C=JSON.parse(y);if(C){for(h=0;h<C.length;h++)if(Array.isArray(C[h])){var U=C[h];if(!(2>U.length)){var q=U[1];if(Array.isArray(q)&&!(1>q.length)){var J=q[0];if(J!="noop"&&J!="stop"&&J!="close")for(var Z=1;Z<q.length;Z++)q[Z]=""}}}}return $n(C)}catch{return y}}var fu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cd;function du(){}E(du,Xr),du.prototype.g=function(){return new XMLHttpRequest},du.prototype.i=function(){return{}},Cd=new du;function tr(h,y,C,U){this.j=h,this.i=y,this.l=C,this.R=U||1,this.U=new wt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xy}function xy(){this.i=null,this.g="",this.h=!1}var by={},Ad={};function Sd(h,y,C){h.L=1,h.v=gu(wi(y)),h.m=C,h.P=!0,Iy(h,null)}function Iy(h,y){h.F=Date.now(),hu(h),h.A=wi(h.v);var C=h.A,U=h.R;Array.isArray(U)||(U=[String(U)]),qy(C.i,"t",U),h.C=0,C=h.j.J,h.h=new xy,h.g=ov(h.j,C?y:null,!h.m),0<h.O&&(h.M=new dn(p(h.Y,h,h.g),h.O)),y=h.U,C=h.g,U=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(In[0]=q.toString()),q=In);for(var J=0;J<q.length;J++){var Z=vt(C,q[J],U||y.handleEvent,!1,y.h||y);if(!Z)break;y.g[Z.key]=Z}y=h.H?_(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),mn(),Wx(h.i,h.u,h.A,h.l,h.R,h.m)}tr.prototype.ca=function(h){h=h.target;const y=this.M;y&&xi(h)==3?y.j():this.Y(h)},tr.prototype.Y=function(h){try{if(h==this.g)e:{const zt=xi(this.g);var y=this.g.Ba();const Ys=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||Qy(this.g)))){this.J||zt!=4||y==7||(y==8||0>=Ys?mn(3):mn(2)),wd(this);var C=this.g.Z();this.X=C;t:if(Ry(this)){var U=Qy(this.g);h="";var q=U.length,J=xi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zr(this),ya(this);var Z="";break t}this.h.i=new a.TextDecoder}for(y=0;y<q;y++)this.h.h=!0,h+=this.h.i.decode(U[y],{stream:!(J&&y==q-1)});U.length=0,this.h.g+=h,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=C==200,Zx(this.i,this.u,this.A,this.l,this.R,zt,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,Mt=this.g;if((Ue=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ue)){var Se=Ue;break t}}Se=null}if(C=Se)Gs(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xd(this,C);else{this.o=!1,this.s=3,Xt(12),Zr(this),ya(this);break e}}if(this.P){C=!0;let Yn;for(;!this.J&&this.C<Z.length;)if(Yn=nb(this,Z),Yn==Ad){zt==4&&(this.s=4,Xt(14),C=!1),Gs(this.i,this.l,null,"[Incomplete Response]");break}else if(Yn==by){this.s=4,Xt(15),Gs(this.i,this.l,Z,"[Invalid Chunk]"),C=!1;break}else Gs(this.i,this.l,Yn,null),xd(this,Yn);if(Ry(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||Z.length!=0||this.h.h||(this.s=1,Xt(16),C=!1),this.o=this.o&&C,!C)Gs(this.i,this.l,Z,"[Invalid Chunked Response]"),Zr(this),ya(this);else if(0<Z.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Dd(Ft),Ft.M=!0,Xt(11))}}else Gs(this.i,this.l,Z,null),xd(this,Z);zt==4&&Zr(this),this.o&&!this.J&&(zt==4?nv(this.j,this):(this.o=!1,hu(this)))}else _b(this.g),C==400&&0<Z.indexOf("Unknown SID")?(this.s=3,Xt(12)):(this.s=0,Xt(13)),Zr(this),ya(this)}}}catch{}finally{}};function Ry(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function nb(h,y){var C=h.C,U=y.indexOf(`
`,C);return U==-1?Ad:(C=Number(y.substring(C,U)),isNaN(C)?by:(U+=1,U+C>y.length?Ad:(y=y.slice(U,U+C),h.C=U+C,y)))}tr.prototype.cancel=function(){this.J=!0,Zr(this)};function hu(h){h.S=Date.now()+h.I,Ny(h,h.I)}function Ny(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=pa(p(h.ba,h),y)}function wd(h){h.B&&(a.clearTimeout(h.B),h.B=null)}tr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(eb(this.i,this.A),this.L!=2&&(mn(),Xt(17)),Zr(this),this.s=2,ya(this)):Ny(this,this.S-h)};function ya(h){h.j.G==0||h.J||nv(h.j,h)}function Zr(h){wd(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,hn(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function xd(h,y){try{var C=h.j;if(C.G!=0&&(C.g==h||bd(C.h,h))){if(!h.K&&bd(C.h,h)&&C.G==3){try{var U=C.Da.g.parse(y)}catch{U=null}if(Array.isArray(U)&&U.length==3){var q=U;if(q[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<h.F)Cu(C),Tu(C);else break e;Md(C),Xt(18)}}else C.za=q[1],0<C.za-C.T&&37500>q[2]&&C.F&&C.v==0&&!C.C&&(C.C=pa(p(C.Za,C),6e3));if(1>=Py(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else ts(C,11)}else if((h.K||C.g==h)&&Cu(C),!w(y))for(q=C.Da.g.parse(y),y=0;y<q.length;y++){let Se=q[y];if(C.T=Se[0],Se=Se[1],C.G==2)if(Se[0]=="c"){C.K=Se[1],C.ia=Se[2];const Ft=Se[3];Ft!=null&&(C.la=Ft,C.j.info("VER="+C.la));const zt=Se[4];zt!=null&&(C.Aa=zt,C.j.info("SVER="+C.Aa));const Ys=Se[5];Ys!=null&&typeof Ys=="number"&&0<Ys&&(U=1.5*Ys,C.L=U,C.j.info("backChannelRequestTimeoutMs_="+U)),U=C;const Yn=h.g;if(Yn){const Su=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Su){var J=U.h;J.g||Su.indexOf("spdy")==-1&&Su.indexOf("quic")==-1&&Su.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Id(J,J.h),J.h=null))}if(U.D){const Pd=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;Pd&&(U.ya=Pd,He(U.I,U.D,Pd))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-h.F,C.j.info("Handshake RTT: "+C.R+"ms")),U=C;var Z=h;if(U.qa=sv(U,U.J?U.ia:null,U.W),Z.K){Vy(U.h,Z);var Ue=Z,Mt=U.L;Mt&&(Ue.I=Mt),Ue.B&&(wd(Ue),hu(Ue)),U.g=Z}else ev(U);0<C.i.length&&Eu(C)}else Se[0]!="stop"&&Se[0]!="close"||ts(C,7);else C.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?ts(C,7):Nd(C):Se[0]!="noop"&&C.l&&C.l.ta(Se),C.v=0)}}mn(4)}catch{}}var ib=class{constructor(h,y){this.g=h,this.map=y}};function My(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Dy(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Py(h){return h.h?1:h.g?h.g.size:0}function bd(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Id(h,y){h.g?h.g.add(y):h.h=y}function Vy(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}My.prototype.cancel=function(){if(this.i=ky(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ky(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const C of h.g.values())y=y.concat(C.D);return y}return x(h.i)}function rb(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var y=[],C=h.length,U=0;U<C;U++)y.push(h[U]);return y}y=[],C=0;for(U in h)y[C++]=h[U];return y}function sb(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var y=[];h=h.length;for(var C=0;C<h;C++)y.push(C);return y}y=[],C=0;for(const U in h)y[C++]=U;return y}}}function Uy(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var C=sb(h),U=rb(h),q=U.length,J=0;J<q;J++)y.call(void 0,U[J],C&&C[J],h)}var Ly=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ob(h,y){if(h){h=h.split("&");for(var C=0;C<h.length;C++){var U=h[C].indexOf("="),q=null;if(0<=U){var J=h[C].substring(0,U);q=h[C].substring(U+1)}else J=h[C];y(J,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function es(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof es){this.h=h.h,mu(this,h.j),this.o=h.o,this.g=h.g,pu(this,h.s),this.l=h.l;var y=h.i,C=new Ta;C.i=y.i,y.g&&(C.g=new Map(y.g),C.h=y.h),Oy(this,C),this.m=h.m}else h&&(y=String(h).match(Ly))?(this.h=!1,mu(this,y[1]||"",!0),this.o=va(y[2]||""),this.g=va(y[3]||"",!0),pu(this,y[4]),this.l=va(y[5]||"",!0),Oy(this,y[6]||"",!0),this.m=va(y[7]||"")):(this.h=!1,this.i=new Ta(null,this.h))}es.prototype.toString=function(){var h=[],y=this.j;y&&h.push(_a(y,Fy,!0),":");var C=this.g;return(C||y=="file")&&(h.push("//"),(y=this.o)&&h.push(_a(y,Fy,!0),"@"),h.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&h.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&h.push("/"),h.push(_a(C,C.charAt(0)=="/"?ub:lb,!0))),(C=this.i.toString())&&h.push("?",C),(C=this.m)&&h.push("#",_a(C,fb)),h.join("")};function wi(h){return new es(h)}function mu(h,y,C){h.j=C?va(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function pu(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function Oy(h,y,C){y instanceof Ta?(h.i=y,db(h.i,h.h)):(C||(y=_a(y,cb)),h.i=new Ta(y,h.h))}function He(h,y,C){h.i.set(y,C)}function gu(h){return He(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function va(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function _a(h,y,C){return typeof h=="string"?(h=encodeURI(h).replace(y,ab),C&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ab(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Fy=/[#\/\?@]/g,lb=/[#\?:]/g,ub=/[#\?]/g,cb=/[#\?@]/g,fb=/#/g;function Ta(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function nr(h){h.g||(h.g=new Map,h.h=0,h.i&&ob(h.i,function(y,C){h.add(decodeURIComponent(y.replace(/\+/g," ")),C)}))}t=Ta.prototype,t.add=function(h,y){nr(this),this.i=null,h=Hs(this,h);var C=this.g.get(h);return C||this.g.set(h,C=[]),C.push(y),this.h+=1,this};function zy(h,y){nr(h),y=Hs(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function By(h,y){return nr(h),y=Hs(h,y),h.g.has(y)}t.forEach=function(h,y){nr(this),this.g.forEach(function(C,U){C.forEach(function(q){h.call(y,q,U,this)},this)},this)},t.na=function(){nr(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),C=[];for(let U=0;U<y.length;U++){const q=h[U];for(let J=0;J<q.length;J++)C.push(y[U])}return C},t.V=function(h){nr(this);let y=[];if(typeof h=="string")By(this,h)&&(y=y.concat(this.g.get(Hs(this,h))));else{h=Array.from(this.g.values());for(let C=0;C<h.length;C++)y=y.concat(h[C])}return y},t.set=function(h,y){return nr(this),this.i=null,h=Hs(this,h),By(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},t.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function qy(h,y,C){zy(h,y),0<C.length&&(h.i=null,h.g.set(Hs(h,y),x(C)),h.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var C=0;C<y.length;C++){var U=y[C];const J=encodeURIComponent(String(U)),Z=this.V(U);for(U=0;U<Z.length;U++){var q=J;Z[U]!==""&&(q+="="+encodeURIComponent(String(Z[U]))),h.push(q)}}return this.i=h.join("&")};function Hs(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function db(h,y){y&&!h.j&&(nr(h),h.i=null,h.g.forEach(function(C,U){var q=U.toLowerCase();U!=q&&(zy(this,U),qy(this,q,C))},h)),h.j=y}function hb(h,y){const C=new ga;if(a.Image){const U=new Image;U.onload=g(ir,C,"TestLoadImage: loaded",!0,y,U),U.onerror=g(ir,C,"TestLoadImage: error",!1,y,U),U.onabort=g(ir,C,"TestLoadImage: abort",!1,y,U),U.ontimeout=g(ir,C,"TestLoadImage: timeout",!1,y,U),a.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=h}else y(!1)}function mb(h,y){const C=new ga,U=new AbortController,q=setTimeout(()=>{U.abort(),ir(C,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:U.signal}).then(J=>{clearTimeout(q),J.ok?ir(C,"TestPingServer: ok",!0,y):ir(C,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),ir(C,"TestPingServer: error",!1,y)})}function ir(h,y,C,U,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),U(C)}catch{}}function pb(){this.g=new Ed}function gb(h,y,C){const U=C||"";try{Uy(h,function(q,J){let Z=q;f(q)&&(Z=$n(q)),y.push(U+J+"="+encodeURIComponent(Z))})}catch(q){throw y.push(U+"type="+encodeURIComponent("_badmap")),q}}function yu(h){this.l=h.Ub||null,this.j=h.eb||!1}E(yu,Xr),yu.prototype.g=function(){return new vu(this.l,this.j)},yu.prototype.i=function(h){return function(){return h}}({});function vu(h,y){Ge.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(vu,Ge),t=vu.prototype,t.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Ca(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ea(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ca(this)),this.g&&(this.readyState=3,Ca(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gy(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gy(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ea(this):Ca(this),this.readyState==3&&Gy(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Ea(this))},t.Qa=function(h){this.g&&(this.response=h,Ea(this))},t.ga=function(){this.g&&Ea(this)};function Ea(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ca(h)}t.setRequestHeader=function(h,y){this.u.append(h,y)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var C=y.next();!C.done;)C=C.value,h.push(C[0]+": "+C[1]),C=y.next();return h.join(`\r
`)};function Ca(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(vu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Hy(h){let y="";return L(h,function(C,U){y+=U,y+=":",y+=C,y+=`\r
`}),y}function Rd(h,y,C){e:{for(U in C){var U=!1;break e}U=!0}U||(C=Hy(C),typeof h=="string"?C!=null&&encodeURIComponent(String(C)):He(h,y,C))}function nt(h){Ge.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(nt,Ge);var yb=/^https?$/i,vb=["POST","PUT"];t=nt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,y,C,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cd.g(),this.v=this.o?ma(this.o):ma(Cd),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(J){$y(this,J);return}if(h=C||"",C=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var q in U)C.set(q,U[q]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const J of U.keys())C.set(J,U.get(J));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(C.keys()).find(J=>J.toLowerCase()=="content-type"),q=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(vb,y,void 0))||U||q||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,Z]of C)this.g.setRequestHeader(J,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jy(this),this.u=!0,this.g.send(h),this.u=!1}catch(J){$y(this,J)}};function $y(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,Yy(h),_u(h)}function Yy(h){h.A||(h.A=!0,ft(h,"complete"),ft(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,ft(this,"complete"),ft(this,"abort"),_u(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_u(this,!0)),nt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ky(this):this.bb())},t.bb=function(){Ky(this)};function Ky(h){if(h.h&&typeof o<"u"&&(!h.v[1]||xi(h)!=4||h.Z()!=2)){if(h.u&&xi(h)==4)ni(h.Ea,0,h);else if(ft(h,"readystatechange"),xi(h)==4){h.h=!1;try{const Z=h.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var C;if(!(C=y)){var U;if(U=Z===0){var q=String(h.D).match(Ly)[1]||null;!q&&a.self&&a.self.location&&(q=a.self.location.protocol.slice(0,-1)),U=!yb.test(q?q.toLowerCase():"")}C=U}if(C)ft(h,"complete"),ft(h,"success");else{h.m=6;try{var J=2<xi(h)?h.g.statusText:""}catch{J=""}h.l=J+" ["+h.Z()+"]",Yy(h)}}finally{_u(h)}}}}function _u(h,y){if(h.g){Jy(h);const C=h.g,U=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||ft(h,"ready");try{C.onreadystatechange=U}catch{}}}function Jy(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function xi(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<xi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),ha(y)}};function Qy(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function _b(h){const y={};h=(h.g&&2<=xi(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<h.length;U++){if(w(h[U]))continue;var C=I(h[U]);const q=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const J=y[q]||[];y[q]=J,J.push(C)}b(y,function(U){return U.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Aa(h,y,C){return C&&C.internalChannelParams&&C.internalChannelParams[h]||y}function Xy(h){this.Aa=0,this.i=[],this.j=new ga,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Aa("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Aa("baseRetryDelayMs",5e3,h),this.cb=Aa("retryDelaySeedMs",1e4,h),this.Wa=Aa("forwardChannelMaxRetries",2,h),this.wa=Aa("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new My(h&&h.concurrentRequestLimit),this.Da=new pb,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Xy.prototype,t.la=8,t.G=1,t.connect=function(h,y,C,U){Xt(0),this.W=h,this.H=y||{},C&&U!==void 0&&(this.H.OSID=C,this.H.OAID=U),this.F=this.X,this.I=sv(this,null,this.W),Eu(this)};function Nd(h){if(jy(h),h.G==3){var y=h.U++,C=wi(h.I);if(He(C,"SID",h.K),He(C,"RID",y),He(C,"TYPE","terminate"),Sa(h,C),y=new tr(h,h.j,y),y.L=2,y.v=gu(wi(C)),C=!1,a.navigator&&a.navigator.sendBeacon)try{C=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!C&&a.Image&&(new Image().src=y.v,C=!0),C||(y.g=ov(y.j,null),y.g.ea(y.v)),y.F=Date.now(),hu(y)}rv(h)}function Tu(h){h.g&&(Dd(h),h.g.cancel(),h.g=null)}function jy(h){Tu(h),h.u&&(a.clearTimeout(h.u),h.u=null),Cu(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function Eu(h){if(!Dy(h.h)&&!h.s){h.s=!0;var y=h.Ga;k||K(),$||(k(),$=!0),B.add(y,h),h.B=0}}function Tb(h,y){return Py(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=pa(p(h.Ga,h,y),iv(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new tr(this,this.j,h);let J=this.o;if(this.S&&(J?(J=_(J),S(J,this.S)):J=this.S),this.m!==null||this.O||(q.H=J,J=null),this.P)e:{for(var y=0,C=0;C<this.i.length;C++){t:{var U=this.i[C];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(y+=U,4096<y){y=C;break e}if(y===4096||C===this.i.length-1){y=C+1;break e}}y=1e3}else y=1e3;y=Zy(this,q,y),C=wi(this.I),He(C,"RID",h),He(C,"CVER",22),this.D&&He(C,"X-HTTP-Session-Id",this.D),Sa(this,C),J&&(this.O?y="headers="+encodeURIComponent(String(Hy(J)))+"&"+y:this.m&&Rd(C,this.m,J)),Id(this.h,q),this.Ua&&He(C,"TYPE","init"),this.P?(He(C,"$req",y),He(C,"SID","null"),q.T=!0,Sd(q,C,null)):Sd(q,C,y),this.G=2}}else this.G==3&&(h?Wy(this,h):this.i.length==0||Dy(this.h)||Wy(this))};function Wy(h,y){var C;y?C=y.l:C=h.U++;const U=wi(h.I);He(U,"SID",h.K),He(U,"RID",C),He(U,"AID",h.T),Sa(h,U),h.m&&h.o&&Rd(U,h.m,h.o),C=new tr(h,h.j,C,h.B+1),h.m===null&&(C.H=h.o),y&&(h.i=y.D.concat(h.i)),y=Zy(h,C,1e3),C.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Id(h.h,C),Sd(C,U,y)}function Sa(h,y){h.H&&L(h.H,function(C,U){He(y,U,C)}),h.l&&Uy({},function(C,U){He(y,U,C)})}function Zy(h,y,C){C=Math.min(h.i.length,C);var U=h.l?p(h.l.Na,h.l,h):null;e:{var q=h.i;let J=-1;for(;;){const Z=["count="+C];J==-1?0<C?(J=q[0].g,Z.push("ofs="+J)):J=0:Z.push("ofs="+J);let Ue=!0;for(let Mt=0;Mt<C;Mt++){let Se=q[Mt].g;const Ft=q[Mt].map;if(Se-=J,0>Se)J=Math.max(0,q[Mt].g-100),Ue=!1;else try{gb(Ft,Z,"req"+Se+"_")}catch{U&&U(Ft)}}if(Ue){U=Z.join("&");break e}}}return h=h.i.splice(0,C),y.D=h,U}function ev(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;k||K(),$||(k(),$=!0),B.add(y,h),h.v=0}}function Md(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=pa(p(h.Fa,h),iv(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,tv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=pa(p(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xt(10),Tu(this),tv(this))};function Dd(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function tv(h){h.g=new tr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=wi(h.qa);He(y,"RID","rpc"),He(y,"SID",h.K),He(y,"AID",h.T),He(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&He(y,"TO",h.ja),He(y,"TYPE","xmlhttp"),Sa(h,y),h.m&&h.o&&Rd(y,h.m,h.o),h.L&&(h.g.I=h.L);var C=h.g;h=h.ia,C.L=1,C.v=gu(wi(y)),C.m=null,C.P=!0,Iy(C,h)}t.Za=function(){this.C!=null&&(this.C=null,Tu(this),Md(this),Xt(19))};function Cu(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function nv(h,y){var C=null;if(h.g==y){Cu(h),Dd(h),h.g=null;var U=2}else if(bd(h.h,y))C=y.D,Vy(h.h,y),U=1;else return;if(h.G!=0){if(y.o)if(U==1){C=y.m?y.m.length:0,y=Date.now()-y.F;var q=h.B;U=Wr(),ft(U,new Sy(U,C)),Eu(h)}else ev(h);else if(q=y.s,q==3||q==0&&0<y.X||!(U==1&&Tb(h,y)||U==2&&Md(h)))switch(C&&0<C.length&&(y=h.h,y.i=y.i.concat(C)),q){case 1:ts(h,5);break;case 4:ts(h,10);break;case 3:ts(h,6);break;default:ts(h,2)}}}function iv(h,y){let C=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(C*=2),C*y}function ts(h,y){if(h.j.info("Error code "+y),y==2){var C=p(h.fb,h),U=h.Xa;const q=!U;U=new es(U||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||mu(U,"https"),gu(U),q?hb(U.toString(),C):mb(U.toString(),C)}else Xt(2);h.G=0,h.l&&h.l.sa(y),rv(h),jy(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function rv(h){if(h.G=0,h.ka=[],h.l){const y=ky(h.h);(y.length!=0||h.i.length!=0)&&(P(h.ka,y),P(h.ka,h.i),h.h.i.length=0,x(h.i),h.i.length=0),h.l.ra()}}function sv(h,y,C){var U=C instanceof es?wi(C):new es(C);if(U.g!="")y&&(U.g=y+"."+U.g),pu(U,U.s);else{var q=a.location;U=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;var J=new es(null);U&&mu(J,U),y&&(J.g=y),q&&pu(J,q),C&&(J.l=C),U=J}return C=h.D,y=h.ya,C&&y&&He(U,C,y),He(U,"VER",h.la),Sa(h,U),U}function ov(h,y,C){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new nt(new yu({eb:C})):new nt(h.pa),y.Ha(h.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function av(){}t=av.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Au(){}Au.prototype.g=function(h,y){return new pn(h,y)};function pn(h,y){Ge.call(this),this.g=new Xy(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!w(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!w(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new $s(this)}E(pn,Ge),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Nd(this.g)},pn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var C={};C.__data__=h,h=C}else this.u&&(C={},C.__data__=$n(h),h=C);y.i.push(new ib(y.Ya++,h)),y.G==3&&Eu(y)},pn.prototype.N=function(){this.g.l=null,delete this.j,Nd(this.g),delete this.g,pn.aa.N.call(this)};function lv(h){Rn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const C in y){h=C;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(lv,Rn);function uv(){Nn.call(this),this.status=1}E(uv,Nn);function $s(h){this.g=h}E($s,av),$s.prototype.ua=function(){ft(this.g,"a")},$s.prototype.ta=function(h){ft(this.g,new lv(h))},$s.prototype.sa=function(h){ft(this.g,new uv)},$s.prototype.ra=function(){ft(this.g,"b")},Au.prototype.createWebChannel=Au.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,I1=function(){return new Au},b1=function(){return Wr()},x1=tn,Um={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fu.NO_ERROR=0,fu.TIMEOUT=8,fu.HTTP_ERROR=6,mc=fu,wy.COMPLETE="complete",w1=wy,Zi.EventType=jr,jr.OPEN="a",jr.CLOSE="b",jr.ERROR="c",jr.MESSAGE="d",Ge.prototype.listen=Ge.prototype.K,Oa=Zi,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,S1=nt}).apply(typeof Bu<"u"?Bu:typeof self<"u"?self:typeof window<"u"?window:{});const c_="@firebase/firestore",f_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new hg("@firebase/firestore");function to(){return Is.logLevel}function te(t,...e){if(Is.logLevel<=ve.DEBUG){const n=e.map(bg);Is.debug(`Firestore (${sa}): ${t}`,...n)}}function Ji(t,...e){if(Is.logLevel<=ve.ERROR){const n=e.map(bg);Is.error(`Firestore (${sa}): ${t}`,...n)}}function Or(t,...e){if(Is.logLevel<=ve.WARN){const n=e.map(bg);Is.warn(`Firestore (${sa}): ${t}`,...n)}}function bg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,R1(t,i,n)}function R1(t,e,n){let i=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ji(i),new Error(i)}function Ie(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||R1(e,r,i)}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Ai{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Gt.UNAUTHENTICATED))}shutdown(){}}class rP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class sP{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0,42304);let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let s=new Bi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Bi,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Bi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ie(typeof i.accessToken=="string",31837,{l:i}),new N1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new Gt(e)}}class oP{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aP{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new oP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class d_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ie(this.o===void 0,3512);const i=s=>{s.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new d_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new d_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=uP(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function me(t,e){return t<e?-1:t>e?1:0}function Lm(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return me(i,r);{const s=M1(),o=cP(s.encode(h_(t,n)),s.encode(h_(e,n)));return o!==0?o:me(i,r)}}n+=i>65535?2:1}return me(t.length,e.length)}function h_(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function cP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return me(t[n],e[n]);return me(t.length,e.length)}function Yo(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="__name__";class si{constructor(e,n,i){n===void 0?n=0:n>e.length&&ae(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&ae(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return si.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof si?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=si.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return me(e.length,n.length)}static compareSegments(e,n){const i=si.isNumericId(e),r=si.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?si.extractNumericId(e).compare(si.extractNumericId(n)):Lm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Dr.fromString(e.substring(4,e.length-2))}}class Be extends si{construct(e,n,i){return new Be(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ee(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const fP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends si{construct(e,n,i){return new kt(e,n,i)}static isValidIdentifier(e){return fP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===m_}static keyField(){return new kt([m_])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new ee(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new ee(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ee(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new ee(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Be.fromString(e))}static fromName(e){return new oe(Be.fromString(e).popFirst(5))}static empty(){return new oe(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(t,e,n){if(!n)throw new ee(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dP(t,e,n,i){if(e===!0&&i===!0)throw new ee(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function p_(t){if(!oe.isDocumentKey(t))throw new ee(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function g_(t){if(oe.isDocumentKey(t))throw new ee(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function P1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ed(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae(12329,{type:typeof t})}function zn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ed(t);throw new ee(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t,e){const n={typeString:t};return e&&(n.value=e),n}function eu(t,e){if(!P1(t))throw new ee(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const o=t[i];if(r&&typeof o!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new ee(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=-62135596800,v_=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*v_);return new Ye(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<y_)throw new ee(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/v_}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(eu(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-y_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:pt("string",Ye._jsonSchemaVersion),seconds:pt("number"),nanoseconds:pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{static fromTimestamp(e){return new fe(e)}static min(){return new fe(new Ye(0,0))}static max(){return new fe(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=-1;function hP(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=fe.fromTimestamp(i===1e9?new Ye(n+1,0):new Ye(n,i));return new Fr(r,oe.empty(),e)}function mP(t){return new Fr(t.readTime,t.key,xl)}class Fr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Fr(fe.min(),oe.empty(),xl)}static max(){return new Fr(fe.max(),oe.empty(),xl)}}function pP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oa(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==gP)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,i)=>{n(e)})}static reject(e){return new j((n,i)=>{i(e)})}static waitFor(e){return new j((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},c=>i(c))}),o=!0,s===r&&n()})}static or(e){let n=j.resolve(!1);for(const i of e)n=n.next(r=>r?j.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new j((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const f=c;n(e[f]).next(d=>{o[f]=d,++a,a===s&&i(o)},d=>r(d))}})}static doWhile(e,n){return new j((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function vP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function aa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}td.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg=-1;function nd(t){return t==null}function cf(t){return t===0&&1/t==-1/0}function _P(t){return typeof t=="number"&&Number.isInteger(t)&&!cf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="";function TP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=__(e)),e=EP(t.get(n),e);return __(e)}function EP(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case V1:n+="";break;default:n+=s}}return n}function __(t){return t+V1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function k1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){this.comparator=e,this.root=n||Pt.EMPTY}insert(e,n){return new tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qu(this.root,e,this.comparator,!0)}}class qu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??Pt.RED,this.left=r??Pt.EMPTY,this.right=s??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new Pt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Pt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ae(27949);return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae(57766)}get value(){throw ae(16141)}get color(){throw ae(16727)}get left(){throw ae(29726)}get right(){throw ae(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new Pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new E_(this.data.getIterator())}getIteratorFrom(e){return new E_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ct(this.comparator);return n.data=e,n}}class E_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new En([])}unionWith(e){let n=new Ct(kt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new En(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new U1("Invalid base64 string: "+s):s}}(e);return new Lt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new Lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const CP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(t){if(Ie(!!t,39018),typeof t=="string"){let e=0;const n=CP.exec(t);if(Ie(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Br(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="server_timestamp",O1="__type__",F1="__previous_value__",z1="__local_write_time__";function Ng(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[O1])===null||n===void 0?void 0:n.stringValue)===L1}function id(t){const e=t.mapValue.fields[F1];return Ng(e)?id(e):e}function bl(t){const e=zr(t.mapValue.fields[z1].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,n,i,r,s,o,a,c,f,d){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const ff="(default)";class Il{constructor(e,n){this.projectId=e,this.database=n||ff}static empty(){return new Il("","")}get isDefaultDatabase(){return this.database===ff}isEqual(e){return e instanceof Il&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="__type__",SP="__max__",Gu={mapValue:{}},q1="__vector__",df="value";function qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ng(t)?4:xP(t)?9007199254740991:wP(t)?10:11:ae(28295,{value:t})}function _i(t,e){if(t===e)return!0;const n=qr(t);if(n!==qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bl(t).isEqual(bl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=zr(r.timestampValue),a=zr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Br(r.bytesValue).isEqual(Br(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return lt(r.geoPointValue.latitude)===lt(s.geoPointValue.latitude)&&lt(r.geoPointValue.longitude)===lt(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return lt(r.integerValue)===lt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=lt(r.doubleValue),a=lt(s.doubleValue);return o===a?cf(o)===cf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Yo(t.arrayValue.values||[],e.arrayValue.values||[],_i);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(T_(o)!==T_(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!_i(o[c],a[c])))return!1;return!0}(t,e);default:return ae(52216,{left:t})}}function Rl(t,e){return(t.values||[]).find(n=>_i(n,e))!==void 0}function Ko(t,e){if(t===e)return 0;const n=qr(t),i=qr(e);if(n!==i)return me(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=lt(s.integerValue||s.doubleValue),c=lt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return C_(t.timestampValue,e.timestampValue);case 4:return C_(bl(t),bl(e));case 5:return Lm(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Br(s),c=Br(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let f=0;f<a.length&&f<c.length;f++){const d=me(a[f],c[f]);if(d!==0)return d}return me(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=me(lt(s.latitude),lt(o.latitude));return a!==0?a:me(lt(s.longitude),lt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return A_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,f,d;const m=s.fields||{},p=o.fields||{},g=(a=m[df])===null||a===void 0?void 0:a.arrayValue,E=(c=p[df])===null||c===void 0?void 0:c.arrayValue,x=me(((f=g==null?void 0:g.values)===null||f===void 0?void 0:f.length)||0,((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:A_(g,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Gu.mapValue&&o===Gu.mapValue)return 0;if(s===Gu.mapValue)return 1;if(o===Gu.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),f=o.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let m=0;m<c.length&&m<d.length;++m){const p=Lm(c[m],d[m]);if(p!==0)return p;const g=Ko(a[c[m]],f[d[m]]);if(g!==0)return g}return me(c.length,d.length)}(t.mapValue,e.mapValue);default:throw ae(23264,{le:n})}}function C_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=zr(t),i=zr(e),r=me(n.seconds,i.seconds);return r!==0?r:me(n.nanos,i.nanos)}function A_(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Ko(n[r],i[r]);if(s)return s}return me(n.length,i.length)}function Jo(t){return Om(t)}function Om(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=zr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Br(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Om(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Om(n.fields[o])}`;return r+"}"}(t.mapValue):ae(61005,{value:t})}function pc(t){switch(qr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=id(t);return e?16+pc(e):16;case 5:return 2*t.stringValue.length;case 6:return Br(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+pc(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Jr(i.fields,(s,o)=>{r+=s.length+pc(o)}),r}(t.mapValue);default:throw ae(13486,{value:t})}}function S_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Fm(t){return!!t&&"integerValue"in t}function Mg(t){return!!t&&"arrayValue"in t}function w_(t){return!!t&&"nullValue"in t}function x_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gc(t){return!!t&&"mapValue"in t}function wP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[B1])===null||n===void 0?void 0:n.stringValue)===q1}function sl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Jr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=sl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===SP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!gc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sl(n)}setAll(e){let n=kt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=sl(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());gc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _i(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];gc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Jr(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new ln(sl(this.value))}}function G1(t){const e=[];return Jr(t.fields,(n,i)=>{const r=new kt([n]);if(gc(i)){const s=G1(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ht(e,0,fe.min(),fe.min(),fe.min(),ln.empty(),0)}static newFoundDocument(e,n,i,r){return new Ht(e,1,n,fe.min(),i,r,0)}static newNoDocument(e,n){return new Ht(e,2,n,fe.min(),fe.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new Ht(e,3,n,fe.min(),fe.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,n){this.position=e,this.inclusive=n}}function b_(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=oe.comparator(oe.fromName(o.referenceValue),n.key):i=Ko(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function I_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_i(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n="asc"){this.field=e,this.dir=n}}function bP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{}class mt extends H1{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new RP(e,n,i):n==="array-contains"?new DP(e,i):n==="in"?new PP(e,i):n==="not-in"?new VP(e,i):n==="array-contains-any"?new kP(e,i):new mt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new NP(e,i):new MP(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ko(n,this.value)):n!==null&&qr(this.value)===qr(n)&&this.matchesComparison(Ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ei extends H1{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new ei(e,n)}matches(e){return $1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function $1(t){return t.op==="and"}function Y1(t){return IP(t)&&$1(t)}function IP(t){for(const e of t.filters)if(e instanceof ei)return!1;return!0}function zm(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+Jo(t.value);if(Y1(t))return t.filters.map(e=>zm(e)).join(",");{const e=t.filters.map(n=>zm(n)).join(",");return`${t.op}(${e})`}}function K1(t,e){return t instanceof mt?function(i,r){return r instanceof mt&&i.op===r.op&&i.field.isEqual(r.field)&&_i(i.value,r.value)}(t,e):t instanceof ei?function(i,r){return r instanceof ei&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&K1(o,r.filters[a]),!0):!1}(t,e):void ae(19439)}function J1(t){return t instanceof mt?function(n){return`${n.field.canonicalString()} ${n.op} ${Jo(n.value)}`}(t):t instanceof ei?function(n){return n.op.toString()+" {"+n.getFilters().map(J1).join(" ,")+"}"}(t):"Filter"}class RP extends mt{constructor(e,n,i){super(e,n,i),this.key=oe.fromName(i.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class NP extends mt{constructor(e,n){super(e,"in",n),this.keys=Q1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class MP extends mt{constructor(e,n){super(e,"not-in",n),this.keys=Q1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Q1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>oe.fromName(i.referenceValue))}class DP extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Mg(n)&&Rl(n.arrayValue,this.value)}}class PP extends mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Rl(this.value.arrayValue,n)}}class VP extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Rl(this.value.arrayValue,n)}}class kP extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Mg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Rl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}}function R_(t,e=null,n=[],i=[],r=null,s=null,o=null){return new UP(t,e,n,i,r,s,o)}function Dg(t){const e=de(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>zm(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),nd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Jo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Jo(i)).join(",")),e.Pe=n}return e.Pe}function Pg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!K1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!I_(t.startAt,e.startAt)&&I_(t.endAt,e.endAt)}function Bm(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function LP(t,e,n,i,r,s,o,a){return new tu(t,e,n,i,r,s,o,a)}function rd(t){return new tu(t)}function N_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function X1(t){return t.collectionGroup!==null}function ol(t){const e=de(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ct(kt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(a=a.add(f.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new mf(s,i))}),n.has(kt.keyField().canonicalString())||e.Te.push(new mf(kt.keyField(),i))}return e.Te}function mi(t){const e=de(t);return e.Ie||(e.Ie=OP(e,ol(t))),e.Ie}function OP(t,e){if(t.limitType==="F")return R_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new mf(r.field,s)});const n=t.endAt?new hf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new hf(t.startAt.position,t.startAt.inclusive):null;return R_(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function qm(t,e){const n=t.filters.concat([e]);return new tu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gm(t,e,n){return new tu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sd(t,e){return Pg(mi(t),mi(e))&&t.limitType===e.limitType}function j1(t){return`${Dg(mi(t))}|lt:${t.limitType}`}function no(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>J1(r)).join(", ")}]`),nd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Jo(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Jo(r)).join(",")),`Target(${i})`}(mi(t))}; limitType=${t.limitType})`}function od(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):oe.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of ol(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,c){const f=b_(o,a,c);return o.inclusive?f<=0:f<0}(i.startAt,ol(i),r)||i.endAt&&!function(o,a,c){const f=b_(o,a,c);return o.inclusive?f>=0:f>0}(i.endAt,ol(i),r))}(t,e)}function FP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function W1(t){return(e,n)=>{let i=!1;for(const r of ol(t)){const s=zP(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function zP(t,e,n){const i=t.field.isKeyField()?oe.comparator(e.key,n.key):function(s,o,a){const c=o.data.field(s),f=a.data.field(s);return c!==null&&f!==null?Ko(c,f):ae(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ae(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Jr(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return k1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=new tt(oe.comparator);function Qi(){return BP}const Z1=new tt(oe.comparator);function Fa(...t){let e=Z1;for(const n of t)e=e.insert(n.key,n);return e}function ew(t){let e=Z1;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function us(){return al()}function tw(){return al()}function al(){return new Ls(t=>t.toString(),(t,e)=>t.isEqual(e))}const qP=new tt(oe.comparator),GP=new Ct(oe.comparator);function _e(...t){let e=GP;for(const n of t)e=e.add(n);return e}const HP=new Ct(me);function $P(){return HP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cf(e)?"-0":e}}function nw(t){return{integerValue:""+t}}function YP(t,e){return _P(e)?nw(e):Vg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(){this._=void 0}}function KP(t,e,n){return t instanceof pf?function(r,s){const o={fields:{[O1]:{stringValue:L1},[z1]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Ng(s)&&(s=id(s)),s&&(o.fields[F1]=s),{mapValue:o}}(n,e):t instanceof Nl?rw(t,e):t instanceof Ml?sw(t,e):function(r,s){const o=iw(r,s),a=M_(o)+M_(r.Ee);return Fm(o)&&Fm(r.Ee)?nw(a):Vg(r.serializer,a)}(t,e)}function JP(t,e,n){return t instanceof Nl?rw(t,e):t instanceof Ml?sw(t,e):n}function iw(t,e){return t instanceof gf?function(i){return Fm(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class pf extends ad{}class Nl extends ad{constructor(e){super(),this.elements=e}}function rw(t,e){const n=ow(e);for(const i of t.elements)n.some(r=>_i(r,i))||n.push(i);return{arrayValue:{values:n}}}class Ml extends ad{constructor(e){super(),this.elements=e}}function sw(t,e){let n=ow(e);for(const i of t.elements)n=n.filter(r=>!_i(r,i));return{arrayValue:{values:n}}}class gf extends ad{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function M_(t){return lt(t.integerValue||t.doubleValue)}function ow(t){return Mg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function QP(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Nl&&r instanceof Nl||i instanceof Ml&&r instanceof Ml?Yo(i.elements,r.elements,_i):i instanceof gf&&r instanceof gf?_i(i.Ee,r.Ee):i instanceof pf&&r instanceof pf}(t.transform,e.transform)}class XP{constructor(e,n){this.version=e,this.transformResults=n}}class xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ld{}function aw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ud(t.key,xn.none()):new nu(t.key,t.data,xn.none());{const n=t.data,i=ln.empty();let r=new Ct(kt.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Qr(t.key,i,new En(r.toArray()),xn.none())}}function jP(t,e,n){t instanceof nu?function(r,s,o){const a=r.value.clone(),c=P_(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Qr?function(r,s,o){if(!yc(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=P_(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(lw(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ll(t,e,n,i){return t instanceof nu?function(s,o,a,c){if(!yc(s.precondition,o))return a;const f=s.value.clone(),d=V_(s.fieldTransforms,c,o);return f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof Qr?function(s,o,a,c){if(!yc(s.precondition,o))return a;const f=V_(s.fieldTransforms,c,o),d=o.data;return d.setAll(lw(s)),d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,i):function(s,o,a){return yc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function WP(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=iw(i.transform,r||null);s!=null&&(n===null&&(n=ln.empty()),n.set(i.field,s))}return n||null}function D_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Yo(i,r,(s,o)=>QP(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nu extends ld{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Qr extends ld{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function lw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function P_(t,e,n){const i=new Map;Ie(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,JP(o,a,n[r]))}return i}function V_(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,KP(s,o,e))}return i}class ud extends ld{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZP extends ld{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&jP(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ll(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ll(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=tw();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const c=aw(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(fe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,(n,i)=>D_(n,i))&&Yo(this.baseMutations,e.baseMutations,(n,i)=>D_(n,i))}}class kg{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ie(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=function(){return qP}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new kg(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,Ee;function i4(t){switch(t){case X.OK:return ae(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return ae(15467,{code:t})}}function uw(t){if(t===void 0)return Ji("GRPC error has no .code"),X.UNKNOWN;switch(t){case dt.OK:return X.OK;case dt.CANCELLED:return X.CANCELLED;case dt.UNKNOWN:return X.UNKNOWN;case dt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case dt.INTERNAL:return X.INTERNAL;case dt.UNAVAILABLE:return X.UNAVAILABLE;case dt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case dt.NOT_FOUND:return X.NOT_FOUND;case dt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case dt.ABORTED:return X.ABORTED;case dt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case dt.DATA_LOSS:return X.DATA_LOSS;default:return ae(39323,{code:t})}}(Ee=dt||(dt={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=new Dr([4294967295,4294967295],0);function k_(t){const e=M1().encode(t),n=new A1;return n.update(e),new Uint8Array(n.digest())}function U_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Dr([n,i],0),new Dr([r,s],0)]}class Ug{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new za(`Invalid padding: ${n}`);if(i<0)throw new za(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new za(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new za(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Dr.fromNumber(this.fe)}pe(e,n,i){let r=e.add(n.multiply(Dr.fromNumber(i)));return r.compare(r4)===1&&(r=new Dr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=k_(e),[i,r]=U_(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(i,r,s);if(!this.ye(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Ug(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=k_(e),[i,r]=U_(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(i,r,s);this.we(o)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class za extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,iu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new cd(fe.min(),r,new tt(me),Qi(),_e())}}class iu{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new iu(i,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n,i,r){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=r}}class cw{constructor(e,n){this.targetId=e,this.De=n}}class fw{constructor(e,n,i=Lt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class L_{constructor(){this.ve=0,this.Ce=O_(),this.Fe=Lt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=_e(),n=_e(),i=_e();return this.Ce.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ae(38017,{changeType:s})}}),new iu(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=O_()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ie(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class s4{constructor(e){this.We=e,this.Ge=new Map,this.ze=Qi(),this.je=Hu(),this.Je=Hu(),this.He=new tt(me)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:ae(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((i,r)=>{this.nt(r)&&n(r)})}it(e){const n=e.targetId,i=e.De.count,r=this.st(n);if(r){const s=r.target;if(Bm(s))if(i===0){const o=new oe(s.path);this.Xe(n,o,Ht.newNoDocument(o,fe.min()))}else Ie(i===1,20013,{expectedCount:i});else{const o=this.ot(n);if(o!==i){const a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=Br(i).toUint8Array()}catch(c){if(c instanceof U1)return Or("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Ug(o,r,s)}catch(c){return Or(c instanceof za?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,s,null),r++)}),r}Pt(e){const n=new Map;this.Ge.forEach((s,o)=>{const a=this.st(o);if(a){if(s.current&&Bm(a.target)){const c=new oe(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,Ht.newNoDocument(c,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let i=_e();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const f=this.st(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));const r=new cd(e,n,this.He,this.ze,i);return this.ze=Qi(),this.je=Hu(),this.Je=Hu(),this.He=new tt(me),r}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const r=this.tt(e);this.It(e,n)?r.qe(n,1):r.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new L_,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Ct(me),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Ct(me),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new L_),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Hu(){return new tt(oe.comparator)}function O_(){return new tt(oe.comparator)}const o4={asc:"ASCENDING",desc:"DESCENDING"},a4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l4={and:"AND",or:"OR"};class u4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hm(t,e){return t.useProto3Json||nd(e)?e:{value:e}}function yf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function c4(t,e){return yf(t,e.toTimestamp())}function pi(t){return Ie(!!t,49232),fe.fromTimestamp(function(n){const i=zr(n);return new Ye(i.seconds,i.nanos)}(t))}function Lg(t,e){return $m(t,e).canonicalString()}function $m(t,e){const n=function(r){return new Be(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function hw(t){const e=Be.fromString(t);return Ie(vw(e),10190,{key:e.toString()}),e}function Ym(t,e){return Lg(t.databaseId,e.path)}function Ch(t,e){const n=hw(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(pw(n))}function mw(t,e){return Lg(t.databaseId,e)}function f4(t){const e=hw(t);return e.length===4?Be.emptyPath():pw(e)}function Km(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pw(t){return Ie(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function F_(t,e,n){return{name:Ym(t,e),fields:n.value.mapValue.fields}}function d4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ae(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(f,d){return f.useProto3Json?(Ie(d===void 0||typeof d=="string",58123),Lt.fromBase64String(d||"")):(Ie(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Lt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(f){const d=f.code===void 0?X.UNKNOWN:uw(f.code);return new ee(d,f.message||"")}(o);n=new fw(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Ch(t,i.document.name),s=pi(i.document.updateTime),o=i.document.createTime?pi(i.document.createTime):fe.min(),a=new ln({mapValue:{fields:i.document.fields}}),c=Ht.newFoundDocument(r,s,o,a),f=i.targetIds||[],d=i.removedTargetIds||[];n=new vc(f,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Ch(t,i.document),s=i.readTime?pi(i.readTime):fe.min(),o=Ht.newNoDocument(r,s),a=i.removedTargetIds||[];n=new vc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Ch(t,i.document),s=i.removedTargetIds||[];n=new vc([],s,r,null)}else{if(!("filter"in e))return ae(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new n4(r,s),a=i.targetId;n=new cw(a,o)}}return n}function h4(t,e){let n;if(e instanceof nu)n={update:F_(t,e.key,e.value)};else if(e instanceof ud)n={delete:Ym(t,e.key)};else if(e instanceof Qr)n={update:F_(t,e.key,e.data),updateMask:C4(e.fieldMask)};else{if(!(e instanceof ZP))return ae(16599,{Rt:e.type});n={verify:Ym(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof pf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Nl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ml)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gf)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ae(20930,{transform:o.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:c4(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae(27497)}(t,e.precondition)),n}function m4(t,e){return t&&t.length>0?(Ie(e!==void 0,14353),t.map(n=>function(r,s){let o=r.updateTime?pi(r.updateTime):pi(s);return o.isEqual(fe.min())&&(o=pi(s)),new XP(o,r.transformResults||[])}(n,e))):[]}function p4(t,e){return{documents:[mw(t,e.path)]}}function g4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=mw(t,r);const s=function(f){if(f.length!==0)return yw(ei.create(f,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(f){if(f.length!==0)return f.map(d=>function(p){return{field:io(p.field),direction:_4(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Hm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{Vt:n,parent:r}}function y4(t){let e=f4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ie(i===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(m){const p=gw(m);return p instanceof ei&&Y1(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(p=>function(E){return new mf(ro(E.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(m){let p;return p=typeof m=="object"?m.value:m,nd(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(m){const p=!!m.before,g=m.values||[];return new hf(g,p)}(n.startAt));let f=null;return n.endAt&&(f=function(m){const p=!m.before,g=m.values||[];return new hf(g,p)}(n.endAt)),LP(e,r,o,s,a,"F",c,f)}function v4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ro(n.unaryFilter.field);return mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ro(n.unaryFilter.field);return mt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ro(n.unaryFilter.field);return mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ro(n.unaryFilter.field);return mt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ae(61313);default:return ae(60726)}}(t):t.fieldFilter!==void 0?function(n){return mt.create(ro(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ae(58110);default:return ae(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ei.create(n.compositeFilter.filters.map(i=>gw(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ae(1026)}}(n.compositeFilter.op))}(t):ae(30097,{filter:t})}function _4(t){return o4[t]}function T4(t){return a4[t]}function E4(t){return l4[t]}function io(t){return{fieldPath:t.canonicalString()}}function ro(t){return kt.fromServerFormat(t.fieldPath)}function yw(t){return t instanceof mt?function(n){if(n.op==="=="){if(x_(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NAN"}};if(w_(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(x_(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NOT_NAN"}};if(w_(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:io(n.field),op:T4(n.op),value:n.value}}}(t):t instanceof ei?function(n){const i=n.getFilters().map(r=>yw(r));return i.length===1?i[0]:{compositeFilter:{op:E4(n.op),filters:i}}}(t):ae(54877,{filter:t})}function C4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n,i,r,s=fe.min(),o=fe.min(),a=Lt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e){this.gt=e}}function S4(t){const e=y4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(){this.Dn=new x4}addToCollectionParentIndex(e,n){return this.Dn.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Fr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Fr.min())}updateCollectionGroup(e,n,i){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class x4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ct(Be.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ct(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_w=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(_w,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Qo(0)}static ur(){return new Qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="LruGarbageCollector",b4=1048576;function q_([t,e],[n,i]){const r=me(t,n);return r===0?me(e,i):r}class I4{constructor(e){this.Tr=e,this.buffer=new Ct(q_),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();q_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class R4{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){te(B_,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){aa(n)?te(B_,"Ignoring IndexedDB error during garbage collection: ",n):await oa(n)}await this.Rr(3e5)})}}class N4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return j.resolve(td.ue);const i=new I4(n);return this.Vr.forEachTarget(e,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(z_)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z_):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,r,s,o,a,c,f;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,o=Date.now(),this.nthSequenceNumber(e,r))).next(m=>(i=m,a=Date.now(),this.removeTargets(e,i,n))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(m=>(f=Date.now(),to()<=ve.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${m} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:m})))}}function M4(t,e){return new N4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(){this.changes=new Ls(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?j.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&ll(i.mutation,r,En.empty(),Ye.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,_e()).next(()=>i))}getLocalViewOfDocuments(e,n,i=_e()){const r=us();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=Fa();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=us();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,_e()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=Qi();const o=al(),a=function(){return al()}();return n.forEach((c,f)=>{const d=i.get(f.key);r.has(f.key)&&(d===void 0||d.mutation instanceof Qr)?s=s.insert(f.key,f):d!==void 0?(o.set(f.key,d.mutation.getFieldMask()),ll(d.mutation,f,d.mutation.getFieldMask(),Ye.now())):o.set(f.key,En.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((f,d)=>o.set(f,d)),n.forEach((f,d)=>{var m;return a.set(f,new P4(d,(m=o.get(f))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){const i=al();let r=new tt((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let d=i.get(c)||En.empty();d=a.applyToLocalView(f,d),i.set(c,d);const m=(r.get(a.batchId)||_e()).add(c);r=r.insert(a.batchId,m)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),f=c.key,d=c.value,m=tw();d.forEach(p=>{if(!s.has(p)){const g=aw(n.get(p),i.get(p));g!==null&&m.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,f,m))}return j.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return oe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):X1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):j.resolve(us());let a=xl,c=s;return o.next(f=>j.forEach(f,(d,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,f,s)).next(()=>this.computeViews(e,c,f,_e())).next(d=>({batchId:a,changes:ew(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(i=>{let r=Fa();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=Fa();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,c=>{const f=function(m,p){return new tu(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(d=>{d.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((c,f)=>{const d=f.getKey();o.get(d)===null&&(o=o.insert(d,Ht.newInvalidDocument(d)))});let a=Fa();return o.forEach((c,f)=>{const d=s.get(c);d!==void 0&&ll(d.mutation,f,En.empty(),Ye.now()),od(n,f)&&(a=a.insert(c,f))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return j.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(r){return{id:r.id,version:r.version,createTime:pi(r.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(r){return{name:r.name,query:S4(r.bundledQuery),readTime:pi(r.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this.overlays=new tt(oe.comparator),this.kr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const i=us();return j.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.wt(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(i)),j.resolve()}getOverlaysForCollection(e,n,i){const r=us(),s=n.length+1,o=new oe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return j.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new tt((f,d)=>f-d);const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let d=s.get(f.largestBatchId);d===null&&(d=us(),s=s.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const a=us(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,d)=>a.set(f,d)),!(a.size()>=r)););return j.resolve(a)}wt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new t4(n,i));let s=this.kr.get(n);s===void 0&&(s=_e(),this.kr.set(n,s)),this.kr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.qr=new Ct(xt.Qr),this.$r=new Ct(xt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new xt(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Wr(new xt(e,n))}Gr(e,n){e.forEach(i=>this.removeReference(i,n))}zr(e){const n=new oe(new Be([])),i=new xt(n,e),r=new xt(n,e+1),s=[];return this.$r.forEachInRange([i,r],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new oe(new Be([])),i=new xt(n,e),r=new xt(n,e+1);let s=_e();return this.$r.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new xt(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class xt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return oe.comparator(e.key,n.key)||me(e.Hr,n.Hr)}static Ur(e,n){return me(e.Hr,n.Hr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ct(xt.Qr)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new e4(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.Yr=this.Yr.add(new xt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Xr(i),s=r<0?0:r;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Rg:this.er-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new xt(n,0),r=new xt(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([i,r],o=>{const a=this.Zr(o.Hr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ct(me);return n.forEach(r=>{const s=new xt(r,0),o=new xt(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{i=i.add(a.Hr)})}),j.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;oe.isDocumentKey(s)||(s=s.child(""));const o=new xt(new oe(s),0);let a=new Ct(me);return this.Yr.forEachWhile(c=>{const f=c.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(a=a.add(c.Hr)),!0)},o),j.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(i=>{const r=this.Zr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ie(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return j.forEach(n.mutations,r=>{const s=new xt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,n){const i=new xt(n,0),r=this.Yr.firstAfterOrEqual(i);return j.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e){this.ni=e,this.docs=function(){return new tt(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return j.resolve(i?i.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let i=Qi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ht.newInvalidDocument(r))}),j.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Qi();const o=n.path,a=new oe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||pP(mP(d),i)<=0||(r.has(d.key)||od(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,i,r){ae(9500)}ri(e,n){return j.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new z4(this)}getSize(e){return j.resolve(this.size)}}class z4 extends D4{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)}),j.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.persistence=e,this.ii=new Ls(n=>Dg(n),Pg),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.si=0,this.oi=new Og,this.targetCount=0,this._i=Qo.ar()}forEachTarget(e,n){return this.ii.forEach((i,r)=>n(r)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),j.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Qo(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.hr(n),j.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),j.waitFor(s).next(()=>r)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return j.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),j.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return j.resolve(i)}containsKey(e,n){return j.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n){this.ai={},this.overlays={},this.ui=new td(0),this.ci=!1,this.ci=!0,this.li=new L4,this.referenceDelegate=e(this),this.hi=new B4(this),this.indexManager=new w4,this.remoteDocumentCache=function(r){return new F4(r)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new A4(n),this.Ti=new k4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new U4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new O4(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){te("MemoryPersistence","Starting transaction:",e);const r=new q4(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ei(e,n){return j.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,n)))}}class q4 extends yP{constructor(e){super(),this.currentSequenceNumber=e}}class Fg{constructor(e){this.persistence=e,this.Ai=new Og,this.Ri=null}static Vi(e){return new Fg(e)}get mi(){if(this.Ri)return this.Ri;throw ae(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),j.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),j.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(r=>this.mi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.mi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.mi,i=>{const r=oe.fromPath(i);return this.fi(e,r).next(s=>{s||n.removeEntry(r,fe.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return j.or([()=>j.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class vf{constructor(e,n){this.persistence=e,this.gi=new Ls(i=>TP(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=M4(this,n)}static Vi(e,n){return new vf(e,n)}Ii(){}di(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}yr(e){let n=0;return this.gr(e,i=>{n++}).next(()=>n)}gr(e,n){return j.forEach(this.gi,(i,r)=>this.Sr(e,i,r).next(s=>s?j.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(i++,s.removeEntry(o,fe.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),j.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),j.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pc(e.data.value)),n}Sr(e,n,i){return j.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.gi.get(n);return j.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=r}static Es(e,n){let i=_e(),r=_e();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new zg(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return U2()?8:vP(Jt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new G4;return this.ws(e,n,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>s.result)}Ss(e,n,i,r){return i.documentReadCount<this.Vs?(to()<=ve.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",no(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),j.resolve()):(to()<=ve.DEBUG&&te("QueryEngine","Query:",no(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(to()<=ve.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",no(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mi(n))):j.resolve())}ps(e,n){if(N_(n))return j.resolve(null);let i=mi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Gm(n,null,"F"),i=mi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=_e(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{const f=this.bs(n,a);return this.Ds(n,f,o,c.readTime)?this.ps(e,Gm(n,null,"F")):this.vs(e,f,n,c)}))})))}ys(e,n,i,r){return N_(n)||r.isEqual(fe.min())?j.resolve(null):this.gs.getDocuments(e,i).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,i,r)?j.resolve(null):(to()<=ve.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),no(n)),this.vs(e,o,n,hP(r,xl)).next(a=>a))})}bs(e,n){let i=new Ct(W1(e));return n.forEach((r,s)=>{od(e,s)&&(i=i.add(s))}),i}Ds(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ws(e,n,i){return to()<=ve.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",no(n)),this.gs.getDocumentsMatchingQuery(e,n,Fr.min(),i)}vs(e,n,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg="LocalStore",$4=3e8;class Y4{constructor(e,n,i,r){this.persistence=e,this.Cs=n,this.serializer=r,this.Fs=new tt(me),this.Ms=new Ls(s=>Dg(s),Pg),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V4(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function K4(t,e,n,i){return new Y4(t,e,n,i)}async function Ew(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let c=_e();for(const f of r){o.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of s){a.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(i,c).next(f=>({Bs:f,removedBatchIds:o,addedBatchIds:a}))})})}function J4(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,f,d){const m=f.batch,p=m.keys();let g=j.resolve();return p.forEach(E=>{g=g.next(()=>d.getEntry(c,E)).next(x=>{const P=f.docVersions.get(E);Ie(P!==null,48541),x.version.compareTo(P)<0&&(m.applyToRemoteDocument(x,f),x.isValidDocument()&&(x.setReadTime(f.commitVersion),d.addEntry(x)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=_e();for(let f=0;f<a.mutationResults.length;++f)a.mutationResults[f].transformResults.length>0&&(c=c.add(a.batch.mutations[f].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function Cw(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Q4(t,e){const n=de(t),i=e.snapshotVersion;let r=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});r=n.Fs;const a=[];e.targetChanges.forEach((d,m)=>{const p=r.get(m);if(!p)return;a.push(n.hi.removeMatchingKeys(s,d.removedDocuments,m).next(()=>n.hi.addMatchingKeys(s,d.addedDocuments,m)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?g=g.withResumeToken(Lt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,i)),r=r.insert(m,g),function(x,P,A){return x.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=$4?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(p,g,d)&&a.push(n.hi.updateTargetData(s,g))});let c=Qi(),f=_e();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(X4(s,o,e.documentUpdates).next(d=>{c=d.Ls,f=d.ks})),!i.isEqual(fe.min())){const d=n.hi.getLastRemoteSnapshotVersion(s).next(m=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(d)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,f)).next(()=>c)}).then(s=>(n.Fs=r,s))}function X4(t,e,n){let i=_e(),r=_e();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=Qi();return n.forEach((a,c)=>{const f=s.get(a);c.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(fe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):te(Bg,"Ignoring outdated watch update for ",a,". Current version:",f.version," Watch version:",c.version)}),{Ls:o,ks:r}})}function j4(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Rg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function W4(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.hi.getTargetData(i,e).next(s=>s?(r=s,j.resolve(r)):n.hi.allocateTargetId(i).next(o=>(r=new Er(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i})}async function Jm(t,e,n){const i=de(t),r=i.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!aa(o))throw o;te(Bg,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function G_(t,e,n){const i=de(t);let r=fe.min(),s=_e();return i.persistence.runTransaction("Execute query","readwrite",o=>function(c,f,d){const m=de(c),p=m.Ms.get(d);return p!==void 0?j.resolve(m.Fs.get(p)):m.hi.getTargetData(f,d)}(i,o,mi(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.Cs.getDocumentsMatchingQuery(o,e,n?r:fe.min(),n?s:_e())).next(a=>(Z4(i,FP(e),a),{documents:a,qs:s})))}function Z4(t,e,n){let i=t.xs.get(e)||fe.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.xs.set(e,i)}class H_{constructor(){this.activeTargetIds=$P()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eV{constructor(){this.Fo=new H_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new H_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="ConnectivityMonitor";class Y_{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){te($_,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){te($_,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u=null;function Qm(){return $u===null?$u=function(){return 268435456+Math.round(2147483648*Math.random())}():$u++,"0x"+$u.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah="RestConnection",nV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iV{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===ff?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,n,i,r,s){const o=Qm(),a=this.Go(e,n.toUriEncodedString());te(Ah,`Sending RPC '${e}' ${o}:`,a,i);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,r,s);const{host:f}=new URL(a),d=ks(f);return this.jo(e,a,c,i,d).then(m=>(te(Ah,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Or(Ah,`RPC '${e}' ${o} failed with error: `,m,"url: ",a,"request:",i),m})}Jo(e,n,i,r,s,o){return this.Wo(e,n,i,r,s)}zo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}Go(e,n){const i=nV[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class sV extends iV{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,r,s){const o=Qm();return new Promise((a,c)=>{const f=new S1;f.setWithCredentials(!0),f.listenOnce(w1.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case mc.NO_ERROR:const m=f.getResponseJson();te(Bt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case mc.TIMEOUT:te(Bt,`RPC '${e}' ${o} timed out`),c(new ee(X.DEADLINE_EXCEEDED,"Request time out"));break;case mc.HTTP_ERROR:const p=f.getStatus();if(te(Bt,`RPC '${e}' ${o} failed with status:`,p,"response text:",f.getResponseText()),p>0){let g=f.getResponseJson();Array.isArray(g)&&(g=g[0]);const E=g==null?void 0:g.error;if(E&&E.status&&E.message){const x=function(A){const w=A.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(w)>=0?w:X.UNKNOWN}(E.status);c(new ee(x,E.message))}else c(new ee(X.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new ee(X.UNAVAILABLE,"Connection failed."));break;default:ae(9055,{c_:e,streamId:o,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{te(Bt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(r);te(Bt,`RPC '${e}' ${o} sending request:`,r),f.send(n,"POST",d,i,15)})}P_(e,n,i){const r=Qm(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=I1(),a=b1(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const d=s.join("");te(Bt,`Creating RPC '${e}' stream ${r}: ${d}`,c);const m=o.createWebChannel(d,c);this.T_(m);let p=!1,g=!1;const E=new rV({Ho:P=>{g?te(Bt,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(p||(te(Bt,`Opening RPC '${e}' stream ${r} transport.`),m.open(),p=!0),te(Bt,`RPC '${e}' stream ${r} sending:`,P),m.send(P))},Yo:()=>m.close()}),x=(P,A,w)=>{P.listen(A,N=>{try{w(N)}catch(D){setTimeout(()=>{throw D},0)}})};return x(m,Oa.EventType.OPEN,()=>{g||(te(Bt,`RPC '${e}' stream ${r} transport opened.`),E.s_())}),x(m,Oa.EventType.CLOSE,()=>{g||(g=!0,te(Bt,`RPC '${e}' stream ${r} transport closed`),E.__(),this.I_(m))}),x(m,Oa.EventType.ERROR,P=>{g||(g=!0,Or(Bt,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),E.__(new ee(X.UNAVAILABLE,"The operation could not be completed")))}),x(m,Oa.EventType.MESSAGE,P=>{var A;if(!g){const w=P.data[0];Ie(!!w,16349);const N=w,D=(N==null?void 0:N.error)||((A=N[0])===null||A===void 0?void 0:A.error);if(D){te(Bt,`RPC '${e}' stream ${r} received error:`,D);const O=D.status;let L=function(T){const S=dt[T];if(S!==void 0)return uw(S)}(O),b=D.message;L===void 0&&(L=X.INTERNAL,b="Unknown error status: "+O+" with message "+D.message),g=!0,E.__(new ee(L,b)),m.close()}else te(Bt,`RPC '${e}' stream ${r} received:`,w),E.a_(w)}}),x(a,x1.STAT_EVENT,P=>{P.stat===Um.PROXY?te(Bt,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===Um.NOPROXY&&te(Bt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{E.o_()},0),E}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Sh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(t){return new u4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-i);r>0&&te("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="PersistentStream";class Sw{constructor(e,n,i,r,s,o,a,c){this.Fi=e,this.w_=i,this.S_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Aw(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(Ji(n.toString()),Ji("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===n&&this.W_(i,r)},i=>{e(()=>{const r=new ee(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return te(K_,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(te(K_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oV extends Sw{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=d4(this.serializer,e),i=function(s){if(!("targetChange"in s))return fe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?pi(o.readTime):fe.min()}(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=Km(this.serializer),n.addTarget=function(s,o){let a;const c=o.target;if(a=Bm(c)?{documents:p4(s,c)}:{query:g4(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=dw(s,o.resumeToken);const f=Hm(s,o.expectedCount);f!==null&&(a.expectedCount=f)}else if(o.snapshotVersion.compareTo(fe.min())>0){a.readTime=yf(s,o.snapshotVersion.toTimestamp());const f=Hm(s,o.expectedCount);f!==null&&(a.expectedCount=f)}return a}(this.serializer,e);const i=v4(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=Km(this.serializer),n.removeTarget=e,this.k_(n)}}class aV extends Sw{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=m4(e.writeResults,e.commitTime),i=pi(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=Km(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>h4(this.serializer,i))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{}class uV extends lV{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new ee(X.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,$m(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee(X.UNKNOWN,s.toString())})}Jo(e,n,i,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,$m(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(X.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class cV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ji(n),this._a=!1):te("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="RemoteStore";class fV{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{i.enqueueAndForget(async()=>{Os(this)&&(te(Rs,"Restarting streams for network reachability change."),await async function(c){const f=de(c);f.Ia.add(4),await ru(f),f.Aa.set("Unknown"),f.Ia.delete(4),await dd(f)}(this))})}),this.Aa=new cV(i,r)}}async function dd(t){if(Os(t))for(const e of t.da)await e(!0)}async function ru(t){for(const e of t.da)await e(!1)}function ww(t,e){const n=de(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),$g(n)?Hg(n):la(n).x_()&&Gg(n,e))}function qg(t,e){const n=de(t),i=la(n);n.Ta.delete(e),i.x_()&&xw(n,e),n.Ta.size===0&&(i.x_()?i.B_():Os(n)&&n.Aa.set("Unknown"))}function Gg(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}la(t).H_(e)}function xw(t,e){t.Ra.$e(e),la(t).Y_(e)}function Hg(t){t.Ra=new s4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),la(t).start(),t.Aa.aa()}function $g(t){return Os(t)&&!la(t).M_()&&t.Ta.size>0}function Os(t){return de(t).Ia.size===0}function bw(t){t.Ra=void 0}async function dV(t){t.Aa.set("Online")}async function hV(t){t.Ta.forEach((e,n)=>{Gg(t,e)})}async function mV(t,e){bw(t),$g(t)?(t.Aa.la(e),Hg(t)):t.Aa.set("Unknown")}async function pV(t,e,n){if(t.Aa.set("Online"),e instanceof fw&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.Ta.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ta.delete(a),r.Ra.removeTarget(a))}(t,e)}catch(i){te(Rs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await _f(t,i)}else if(e instanceof vc?t.Ra.Ye(e):e instanceof cw?t.Ra.it(e):t.Ra.et(e),!n.isEqual(fe.min()))try{const i=await Cw(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Ra.Pt(o);return a.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ta.get(f);d&&s.Ta.set(f,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,f)=>{const d=s.Ta.get(c);if(!d)return;s.Ta.set(c,d.withResumeToken(Lt.EMPTY_BYTE_STRING,d.snapshotVersion)),xw(s,c);const m=new Er(d.target,c,f,d.sequenceNumber);Gg(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){te(Rs,"Failed to raise snapshot:",i),await _f(t,i)}}async function _f(t,e,n){if(!aa(e))throw e;t.Ia.add(1),await ru(t),t.Aa.set("Offline"),n||(n=()=>Cw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te(Rs,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await dd(t)})}function Iw(t,e){return e().catch(n=>_f(t,n,e))}async function hd(t){const e=de(t),n=Gr(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Rg;for(;gV(e);)try{const r=await j4(e.localStore,i);if(r===null){e.Pa.length===0&&n.B_();break}i=r.batchId,yV(e,r)}catch(r){await _f(e,r)}Rw(e)&&Nw(e)}function gV(t){return Os(t)&&t.Pa.length<10}function yV(t,e){t.Pa.push(e);const n=Gr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function Rw(t){return Os(t)&&!Gr(t).M_()&&t.Pa.length>0}function Nw(t){Gr(t).start()}async function vV(t){Gr(t).na()}async function _V(t){const e=Gr(t);for(const n of t.Pa)e.X_(n.mutations)}async function TV(t,e,n){const i=t.Pa.shift(),r=kg.from(i,e,n);await Iw(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await hd(t)}async function EV(t,e){e&&Gr(t).Z_&&await async function(i,r){if(function(o){return i4(o)&&o!==X.ABORTED}(r.code)){const s=i.Pa.shift();Gr(i).N_(),await Iw(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await hd(i)}}(t,e),Rw(t)&&Nw(t)}async function J_(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),te(Rs,"RemoteStore received new credentials");const i=Os(n);n.Ia.add(3),await ru(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await dd(n)}async function CV(t,e){const n=de(t);e?(n.Ia.delete(2),await dd(n)):e||(n.Ia.add(2),await ru(n),n.Aa.set("Unknown"))}function la(t){return t.Va||(t.Va=function(n,i,r){const s=de(n);return s.ia(),new oV(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Zo:dV.bind(null,t),e_:hV.bind(null,t),n_:mV.bind(null,t),J_:pV.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),$g(t)?Hg(t):t.Aa.set("Unknown")):(await t.Va.stop(),bw(t))})),t.Va}function Gr(t){return t.ma||(t.ma=function(n,i,r){const s=de(n);return s.ia(),new aV(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:vV.bind(null,t),n_:EV.bind(null,t),ea:_V.bind(null,t),ta:TV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await hd(t)):(await t.ma.stop(),t.Pa.length>0&&(te(Rs,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new Yg(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kg(t,e){if(Ji("AsyncQueue",`${e}: ${t}`),aa(t))return new ee(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||oe.comparator(n.key,i.key):(n,i)=>oe.comparator(n.key,i.key),this.keyedMap=Fa(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.fa=new tt(oe.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):ae(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,i)=>{e.push(i)}),e}}class Xo{constructor(e,n,i,r,s,o,a,c,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Xo(e,n,Mo.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class SV{constructor(){this.queries=X_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const r=de(n),s=r.queries;r.queries=X_(),s.forEach((o,a)=>{for(const c of a.wa)c.onError(i)})})(this,new ee(X.ABORTED,"Firestore shutting down"))}}function X_(){return new Ls(t=>j1(t),sd)}async function Jg(t,e){const n=de(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.Sa()&&e.ba()&&(i=2):(s=new AV,i=e.ba()?0:1);try{switch(i){case 0:s.ya=await n.onListen(r,!0);break;case 1:s.ya=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=Kg(o,`Initialization of query '${no(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&Xg(n)}async function Qg(t,e){const n=de(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?r=e.ba()?0:1:!s.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function wV(t,e){const n=de(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.wa)a.Ca(r)&&(i=!0);o.ya=r}}i&&Xg(n)}function xV(t,e,n){const i=de(t),r=i.queries.get(e);if(r)for(const s of r.wa)s.onError(n);i.queries.delete(e)}function Xg(t){t.Da.forEach(e=>{e.next()})}var Xm,j_;(j_=Xm||(Xm={})).Fa="default",j_.Cache="cache";class jg{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Xo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Xm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this.key=e}}class Dw{constructor(e){this.key=e}}class bV{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=_e(),this.mutatedKeys=_e(),this.Xa=W1(e),this.eu=new Mo(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new Q_,r=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,m)=>{const p=r.get(d),g=od(this.query,m)?m:null,E=!!p&&this.mutatedKeys.has(p.key),x=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let P=!1;p&&g?p.data.isEqual(g.data)?E!==x&&(i.track({type:3,doc:g}),P=!0):this.iu(p,g)||(i.track({type:2,doc:g}),P=!0,(c&&this.Xa(g,c)>0||f&&this.Xa(g,f)<0)&&(a=!0)):!p&&g?(i.track({type:0,doc:g}),P=!0):p&&!g&&(i.track({type:1,doc:p}),P=!0,(c||f)&&(a=!0)),P&&(g?(o=o.add(g),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{eu:o,ru:i,Ds:a,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((d,m)=>function(g,E){const x=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae(20277,{At:P})}};return x(g)-x(E)}(d.type,m.type)||this.Xa(d.doc,m.doc)),this.su(i),r=r!=null&&r;const a=n&&!r?this.ou():[],c=this.Za.size===0&&this.current&&!r?1:0,f=c!==this.Ya;return this.Ya=c,o.length!==0||f?{snapshot:new Xo(this.query,e.eu,s,o,e.mutatedKeys,c===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Q_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=_e(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const n=[];return e.forEach(i=>{this.Za.has(i)||n.push(new Dw(i))}),this.Za.forEach(i=>{e.has(i)||n.push(new Mw(i))}),n}uu(e){this.Ha=e.qs,this.Za=_e();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Xo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Wg="SyncEngine";class IV{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class RV{constructor(e){this.key=e,this.lu=!1}}class NV{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Ls(a=>j1(a),sd),this.Tu=new Map,this.Iu=new Set,this.du=new tt(oe.comparator),this.Eu=new Map,this.Au=new Og,this.Ru={},this.Vu=new Map,this.mu=Qo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function MV(t,e,n=!0){const i=Ow(t);let r;const s=i.Pu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.cu()):r=await Pw(i,e,n,!0),r}async function DV(t,e){const n=Ow(t);await Pw(n,e,!0,!1)}async function Pw(t,e,n,i){const r=await W4(t.localStore,mi(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await PV(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&ww(t.remoteStore,r),a}async function PV(t,e,n,i,r){t.gu=(m,p,g)=>async function(x,P,A,w){let N=P.view.nu(A);N.Ds&&(N=await G_(x.localStore,P.query,!1).then(({documents:b})=>P.view.nu(b,N)));const D=w&&w.targetChanges.get(P.targetId),O=w&&w.targetMismatches.get(P.targetId)!=null,L=P.view.applyChanges(N,x.isPrimaryClient,D,O);return Z_(x,P.targetId,L._u),L.snapshot}(t,m,p,g);const s=await G_(t.localStore,e,!0),o=new bV(e,s.qs),a=o.nu(s.documents),c=iu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=o.applyChanges(a,t.isPrimaryClient,c);Z_(t,n,f._u);const d=new IV(e,n,o);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function VV(t,e,n){const i=de(t),r=i.Pu.get(e),s=i.Tu.get(r.targetId);if(s.length>1)return i.Tu.set(r.targetId,s.filter(o=>!sd(o,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Jm(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&qg(i.remoteStore,r.targetId),jm(i,r.targetId)}).catch(oa)):(jm(i,r.targetId),await Jm(i.localStore,r.targetId,!0))}async function kV(t,e){const n=de(t),i=n.Pu.get(e),r=n.Tu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),qg(n.remoteStore,i.targetId))}async function UV(t,e,n){const i=GV(t);try{const r=await function(o,a){const c=de(o),f=Ye.now(),d=a.reduce((g,E)=>g.add(E.key),_e());let m,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let E=Qi(),x=_e();return c.Os.getEntries(g,d).next(P=>{E=P,E.forEach((A,w)=>{w.isValidDocument()||(x=x.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,E)).next(P=>{m=P;const A=[];for(const w of a){const N=WP(w,m.get(w.key).overlayedDocument);N!=null&&A.push(new Qr(w.key,N,G1(N.value.mapValue),xn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,f,A,a)}).next(P=>{p=P;const A=P.applyToLocalDocumentSet(m,x);return c.documentOverlayCache.saveOverlays(g,P.batchId,A)})}).then(()=>({batchId:p.batchId,changes:ew(m)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let f=o.Ru[o.currentUser.toKey()];f||(f=new tt(me)),f=f.insert(a,c),o.Ru[o.currentUser.toKey()]=f}(i,r.batchId,n),await su(i,r.changes),await hd(i.remoteStore)}catch(r){const s=Kg(r,"Failed to persist write");n.reject(s)}}async function Vw(t,e){const n=de(t);try{const i=await Q4(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Eu.get(s);o&&(Ie(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.lu=!0:r.modifiedDocuments.size>0?Ie(o.lu,14607):r.removedDocuments.size>0&&(Ie(o.lu,42227),o.lu=!1))}),await su(n,i,e)}catch(i){await oa(i)}}function W_(t,e,n){const i=de(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Pu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const c=de(o);c.onlineState=a;let f=!1;c.queries.forEach((d,m)=>{for(const p of m.wa)p.va(a)&&(f=!0)}),f&&Xg(c)}(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function LV(t,e,n){const i=de(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),s=r&&r.key;if(s){let o=new tt(oe.comparator);o=o.insert(s,Ht.newNoDocument(s,fe.min()));const a=_e().add(s),c=new cd(fe.min(),new Map,new tt(me),o,a);await Vw(i,c),i.du=i.du.remove(s),i.Eu.delete(e),Zg(i)}else await Jm(i.localStore,e,!1).then(()=>jm(i,e,n)).catch(oa)}async function OV(t,e){const n=de(t),i=e.batch.batchId;try{const r=await J4(n.localStore,e);Uw(n,i,null),kw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await su(n,r)}catch(r){await oa(r)}}async function FV(t,e,n){const i=de(t);try{const r=await function(o,a){const c=de(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let d;return c.mutationQueue.lookupMutationBatch(f,a).next(m=>(Ie(m!==null,37113),d=m.keys(),c.mutationQueue.removeMutationBatch(f,m))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d)).next(()=>c.localDocuments.getDocuments(f,d))})}(i.localStore,e);Uw(i,e,n),kw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await su(i,r)}catch(r){await oa(r)}}function kw(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function Uw(t,e,n){const i=de(t);let r=i.Ru[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function jm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(i=>{t.Au.containsKey(i)||Lw(t,i)})}function Lw(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(qg(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Zg(t))}function Z_(t,e,n){for(const i of n)i instanceof Mw?(t.Au.addReference(i.key,e),zV(t,i)):i instanceof Dw?(te(Wg,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||Lw(t,i.key)):ae(19791,{yu:i})}function zV(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(te(Wg,"New document in limbo: "+n),t.Iu.add(i),Zg(t))}function Zg(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new oe(Be.fromString(e)),i=t.mu.next();t.Eu.set(i,new RV(n)),t.du=t.du.insert(n,i),ww(t.remoteStore,new Er(mi(rd(n.path)),i,"TargetPurposeLimboResolution",td.ue))}}async function su(t,e,n){const i=de(t),r=[],s=[],o=[];i.Pu.isEmpty()||(i.Pu.forEach((a,c)=>{o.push(i.gu(c,e,n).then(f=>{var d;if((f||n)&&i.isPrimaryClient){const m=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(f){r.push(f);const m=zg.Es(c.targetId,f);s.push(m)}}))}),await Promise.all(o),i.hu.J_(r),await async function(c,f){const d=de(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>j.forEach(f,p=>j.forEach(p.Is,g=>d.persistence.referenceDelegate.addReference(m,p.targetId,g)).next(()=>j.forEach(p.ds,g=>d.persistence.referenceDelegate.removeReference(m,p.targetId,g)))))}catch(m){if(!aa(m))throw m;te(Bg,"Failed to update sequence numbers: "+m)}for(const m of f){const p=m.targetId;if(!m.fromCache){const g=d.Fs.get(p),E=g.snapshotVersion,x=g.withLastLimboFreeSnapshotVersion(E);d.Fs=d.Fs.insert(p,x)}}}(i.localStore,s))}async function BV(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){te(Wg,"User change. New user:",e.toKey());const i=await Ew(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new ee(X.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await su(n,i.Bs)}}function qV(t,e){const n=de(t),i=n.Eu.get(e);if(i&&i.lu)return _e().add(i.key);{let r=_e();const s=n.Tu.get(e);if(!s)return r;for(const o of s){const a=n.Pu.get(o);r=r.unionWith(a.view.tu)}return r}}function Ow(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LV.bind(null,e),e.hu.J_=wV.bind(null,e.eventManager),e.hu.pu=xV.bind(null,e.eventManager),e}function GV(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FV.bind(null,e),e}class Tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return K4(this.persistence,new H4,e.initialUser,this.serializer)}Du(e){return new Tw(Fg.Vi,this.serializer)}bu(e){return new eV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tf.provider={build:()=>new Tf};class HV extends Tf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ie(this.persistence.referenceDelegate instanceof vf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new R4(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new Tw(i=>vf.Vi(i,n),this.serializer)}}class Wm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>W_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=BV.bind(null,this.syncEngine),await CV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new SV}()}createDatastore(e){const n=fd(e.databaseInfo.databaseId),i=function(s){return new sV(s)}(e.databaseInfo);return function(s,o,a,c){return new uV(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new fV(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>W_(this.syncEngine,n,0),function(){return Y_.C()?new Y_:new tV}())}createSyncEngine(e,n){return function(r,s,o,a,c,f,d){const m=new NV(r,s,o,a,c,f);return d&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=de(r);te(Rs,"RemoteStore shutting down."),s.Ia.add(5),await ru(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Wm.provider={build:()=>new Wm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ji("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="FirestoreClient";class $V{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Gt.UNAUTHENTICATED,this.clientId=Ig.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{te(Hr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(te(Hr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Kg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function wh(t,e){t.asyncQueue.verifyOperationInProgress(),te(Hr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await Ew(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>{Or("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{te("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{Or("Terminating Firestore due to IndexedDb database deletion failed",r)})}),t._offlineComponents=e}async function eT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await YV(t);te(Hr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>J_(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>J_(e.remoteStore,r)),t._onlineComponents=e}async function YV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te(Hr,"Using user provided OfflineComponentProvider");try{await wh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===X.FAILED_PRECONDITION||r.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Or("Error using user provided cache. Falling back to memory cache: "+n),await wh(t,new Tf)}}else te(Hr,"Using default OfflineComponentProvider"),await wh(t,new HV(void 0));return t._offlineComponents}async function Fw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te(Hr,"Using user provided OnlineComponentProvider"),await eT(t,t._uninitializedComponentsProvider._online)):(te(Hr,"Using default OnlineComponentProvider"),await eT(t,new Wm))),t._onlineComponents}function KV(t){return Fw(t).then(e=>e.syncEngine)}async function Ef(t){const e=await Fw(t),n=e.eventManager;return n.onListen=MV.bind(null,e.syncEngine),n.onUnlisten=VV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=DV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=kV.bind(null,e.syncEngine),n}function JV(t,e,n={}){const i=new Bi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,f){const d=new ey({next:p=>{d.Ou(),o.enqueueAndForget(()=>Qg(s,m));const g=p.docs.has(a);!g&&p.fromCache?f.reject(new ee(X.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?f.reject(new ee(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(p)},error:p=>f.reject(p)}),m=new jg(rd(a.path),d,{includeMetadataChanges:!0,ka:!0});return Jg(s,m)}(await Ef(t),t.asyncQueue,e,n,i)),i.promise}function QV(t,e,n={}){const i=new Bi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,f){const d=new ey({next:p=>{d.Ou(),o.enqueueAndForget(()=>Qg(s,m)),p.fromCache&&c.source==="server"?f.reject(new ee(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(p)},error:p=>f.reject(p)}),m=new jg(a,d,{includeMetadataChanges:!0,ka:!0});return Jg(s,m)}(await Ef(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="firestore.googleapis.com",nT=!0;class iT{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Bw,this.ssl=nT}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:nT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_w;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<b4)throw new ee(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ee(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class md{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new iP;switch(i.type){case"firstParty":return new aP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ee(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=tT.get(n);i&&(te("ComponentProvider","Removing Datastore"),tT.delete(n),i.terminate())}(this),Promise.resolve()}}function XV(t,e,n,i={}){var r;t=zn(t,md);const s=ks(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;s&&(fg(`https://${c}`),dg("Firestore",!0)),o.host!==Bw&&o.host!==c&&Or("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:i});if(!ws(f,a)&&(t._setSettings(f),i.mockUserToken)){let d,m;if(typeof i.mockUserToken=="string")d=i.mockUserToken,m=Gt.MOCK_USER;else{d=BS(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new ee(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Gt(p)}t._authCredentials=new rP(new N1(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Fs(this.firestore,e,this._query)}}class ut{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ut(this.firestore,e,this._key)}toJSON(){return{type:ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(eu(n,ut._jsonSchema))return new ut(e,i||null,new oe(Be.fromString(n.referencePath)))}}ut._jsonSchemaVersion="firestore/documentReference/1.0",ut._jsonSchema={type:pt("string",ut._jsonSchemaVersion),referencePath:pt("string")};class Pr extends Fs{constructor(e,n,i){super(e,n,rd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new oe(e))}withConverter(e){return new Pr(this.firestore,e,this._path)}}function jV(t,e,...n){if(t=yt(t),D1("collection","path",e),t instanceof md){const i=Be.fromString(e,...n);return g_(i),new Pr(t,null,i)}{if(!(t instanceof ut||t instanceof Pr))throw new ee(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return g_(i),new Pr(t.firestore,null,i)}}function qw(t,e,...n){if(t=yt(t),arguments.length===1&&(e=Ig.newId()),D1("doc","path",e),t instanceof md){const i=Be.fromString(e,...n);return p_(i),new ut(t,null,new oe(i))}{if(!(t instanceof ut||t instanceof Pr))throw new ee(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return p_(i),new ut(t.firestore,t instanceof Pr?t.converter:null,new oe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="AsyncQueue";class sT{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Aw(this,"async_queue_retry"),this.oc=()=>{const i=Sh();i&&te(rT,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=Sh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Sh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Bi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!aa(e))throw e;te(rT,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,Ji("INTERNAL UNHANDLED ERROR: ",oT(i)),i}).then(i=>(this.nc=!1,i))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const r=Yg.createAndSchedule(this,e,n,i,s=>this.lc(s));return this.ec.push(r),r}ac(){this.tc&&ae(47125,{hc:oT(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function oT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class $r extends md{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new sT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sT(e),this._firestoreClient=void 0,await e}}}function WV(t,e){const n=typeof t=="object"?t:pg(),i=typeof t=="string"?t:ff,r=Xf(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=OS("firestore");s&&XV(r,...s)}return r}function ou(t){if(t._terminated)throw new ee(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ZV(t),t._firestoreClient}function ZV(t){var e,n,i;const r=t._freezeSettings(),s=function(a,c,f,d){return new AP(a,c,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,zw(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new $V(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this._byteString=e}static fromBase64String(e){try{return new On(Lt.fromBase64String(e))}catch(n){throw new ee(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new On(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:On._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(eu(e,On._jsonSchema))return On.fromBase64String(e.bytes)}}On._jsonSchemaVersion="firestore/bytes/1.0",On._jsonSchema={type:pt("string",On._jsonSchemaVersion),bytes:pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gi._jsonSchemaVersion}}static fromJSON(e){if(eu(e,gi._jsonSchema))return new gi(e.latitude,e.longitude)}}gi._jsonSchemaVersion="firestore/geoPoint/1.0",gi._jsonSchema={type:pt("string",gi._jsonSchemaVersion),latitude:pt("number"),longitude:pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(eu(e,yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new yi(e.vectorValues);throw new ee(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:pt("string",yi._jsonSchemaVersion),vectorValues:pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=/^__.*__$/;class t3{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Qr(e,this.data,this.fieldMask,n,this.fieldTransforms):new nu(e,this.data,n,this.fieldTransforms)}}class Gw{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Qr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Hw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae(40011,{Ec:t})}}class ny{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new ny(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Cf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Hw(this.Ec)&&e3.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class n3{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||fd(e)}Dc(e,n,i,r=!1){return new ny({Ec:e,methodName:n,bc:i,path:kt.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iy(t){const e=t._freezeSettings(),n=fd(t._databaseId);return new n3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $w(t,e,n,i,r,s={}){const o=t.Dc(s.merge||s.mergeFields?2:0,e,n,r);ry("Data must be an object, but it was:",o,i);const a=Yw(i,o);let c,f;if(s.merge)c=new En(o.fieldMask),f=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const m of s.mergeFields){const p=Zm(e,m,n);if(!o.contains(p))throw new ee(X.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Jw(d,p)||d.push(p)}c=new En(d),f=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,f=o.fieldTransforms;return new t3(new ln(a),c,f)}class gd extends ty{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gd}}function i3(t,e,n,i){const r=t.Dc(1,e,n);ry("Data must be an object, but it was:",r,i);const s=[],o=ln.empty();Jr(i,(c,f)=>{const d=sy(e,c,n);f=yt(f);const m=r.gc(d);if(f instanceof gd)s.push(d);else{const p=au(f,m);p!=null&&(s.push(d),o.set(d,p))}});const a=new En(s);return new Gw(o,a,r.fieldTransforms)}function r3(t,e,n,i,r,s){const o=t.Dc(1,e,n),a=[Zm(e,i,n)],c=[r];if(s.length%2!=0)throw new ee(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Zm(e,s[p])),c.push(s[p+1]);const f=[],d=ln.empty();for(let p=a.length-1;p>=0;--p)if(!Jw(f,a[p])){const g=a[p];let E=c[p];E=yt(E);const x=o.gc(g);if(E instanceof gd)f.push(g);else{const P=au(E,x);P!=null&&(f.push(g),d.set(g,P))}}const m=new En(f);return new Gw(d,m,o.fieldTransforms)}function s3(t,e,n,i=!1){return au(n,t.Dc(i?4:3,e))}function au(t,e){if(Kw(t=yt(t)))return ry("Unsupported field value:",e,t),Yw(t,e);if(t instanceof ty)return function(i,r){if(!Hw(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let c=au(a,r.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=yt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return YP(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ye.fromDate(i);return{timestampValue:yf(r.serializer,s)}}if(i instanceof Ye){const s=new Ye(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:yf(r.serializer,s)}}if(i instanceof gi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof On)return{bytesValue:dw(r.serializer,i._byteString)};if(i instanceof ut){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Lg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof yi)return function(o,a){return{mapValue:{fields:{[B1]:{stringValue:q1},[df]:{arrayValue:{values:o.toArray().map(f=>{if(typeof f!="number")throw a.wc("VectorValues must only contain numeric values.");return Vg(a.serializer,f)})}}}}}}(i,r);throw r.wc(`Unsupported field value: ${ed(i)}`)}(t,e)}function Yw(t,e){const n={};return k1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jr(t,(i,r)=>{const s=au(r,e.Vc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function Kw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof gi||t instanceof On||t instanceof ut||t instanceof ty||t instanceof yi)}function ry(t,e,n){if(!Kw(n)||!P1(n)){const i=ed(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function Zm(t,e,n){if((e=yt(e))instanceof pd)return e._internalPath;if(typeof e=="string")return sy(t,e);throw Cf("Field path arguments must be of type string or ",t,!1,void 0,n)}const o3=new RegExp("[~\\*/\\[\\]]");function sy(t,e,n){if(e.search(o3)>=0)throw Cf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pd(...e.split("."))._internalPath}catch{throw Cf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cf(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new ee(X.INVALID_ARGUMENT,a+t+c)}function Jw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new a3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Xw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class a3 extends Qw{data(){return super.data()}}function Xw(t,e){return typeof e=="string"?sy(t,e):e instanceof pd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oy{}class l3 extends oy{}function u3(t,e,...n){let i=[];e instanceof oy&&i.push(e),i=i.concat(n),function(s){const o=s.filter(c=>c instanceof ly).length,a=s.filter(c=>c instanceof ay).length;if(o>1||o>0&&a>0)throw new ee(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class ay extends l3{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new ay(e,n,i)}_apply(e){const n=this._parse(e);return Ww(e._query,n),new Fs(e.firestore,e.converter,qm(e._query,n))}_parse(e){const n=iy(e.firestore);return function(s,o,a,c,f,d,m){let p;if(f.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ee(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){uT(m,d);const E=[];for(const x of m)E.push(lT(c,s,x));p={arrayValue:{values:E}}}else p=lT(c,s,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||uT(m,d),p=s3(a,o,m,d==="in"||d==="not-in");return mt.create(f,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class ly extends oy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ly(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:ei.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const c of a)Ww(o,c),o=qm(o,c)}(e._query,n),new Fs(e.firestore,e.converter,qm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function lT(t,e,n){if(typeof(n=yt(n))=="string"){if(n==="")throw new ee(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!X1(e)&&n.indexOf("/")!==-1)throw new ee(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Be.fromString(n));if(!oe.isDocumentKey(i))throw new ee(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return S_(t,new oe(i))}if(n instanceof ut)return S_(t,n._key);throw new ee(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ed(n)}.`)}function uT(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ww(t,e){const n=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class c3{convertValue(e,n="none"){switch(qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Jr(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[df].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>lt(o.doubleValue));return new yi(s)}convertGeoPoint(e){return new gi(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=id(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(bl(e));default:return null}}convertTimestamp(e){const n=zr(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Be.fromString(e);Ie(vw(i),9688,{name:e});const r=new Il(i.get(1),i.get(3)),s=new oe(i.popFirst(5));return r.isEqual(n)||Ji(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Ba{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _s extends Qw{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _c(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Xw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=_s._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}_s._jsonSchemaVersion="firestore/documentSnapshot/1.0",_s._jsonSchema={type:pt("string",_s._jsonSchemaVersion),bundleSource:pt("string","DocumentSnapshot"),bundleName:pt("string"),bundle:pt("string")};class _c extends _s{data(e={}){return super.data(e)}}class Ts{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ba(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new _c(this._firestore,this._userDataWriter,i.key,i,new Ba(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const c=new _c(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ba(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const c=new _c(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ba(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,d=-1;return a.type!==0&&(f=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:f3(a.type),doc:c,oldIndex:f,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ts._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ig.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function f3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(t){t=zn(t,ut);const e=zn(t.firestore,$r);return JV(ou(e),t._key).then(n=>ex(e,t,n))}Ts._jsonSchemaVersion="firestore/querySnapshot/1.0",Ts._jsonSchema={type:pt("string",Ts._jsonSchemaVersion),bundleSource:pt("string","QuerySnapshot"),bundleName:pt("string"),bundle:pt("string")};class uy extends c3{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,n)}}function h3(t){t=zn(t,Fs);const e=zn(t.firestore,$r),n=ou(e),i=new uy(e);return jw(t._query),QV(n,t._query).then(r=>new Ts(e,i,t,r))}function m3(t,e,n){t=zn(t,ut);const i=zn(t.firestore,$r),r=Zw(t.converter,e,n);return cy(i,[$w(iy(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,xn.none())])}function p3(t){return cy(zn(t.firestore,$r),[new ud(t._key,xn.none())])}function g3(t,...e){var n,i,r;t=yt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||aT(e[o])||(s=e[o++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(aT(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(i=m.error)===null||i===void 0?void 0:i.bind(m),e[o+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}let c,f,d;if(t instanceof ut)f=zn(t.firestore,$r),d=rd(t._key.path),c={next:m=>{e[o]&&e[o](ex(f,t,m))},error:e[o+1],complete:e[o+2]};else{const m=zn(t,Fs);f=zn(m.firestore,$r),d=m._query;const p=new uy(f);c={next:g=>{e[o]&&e[o](new Ts(f,p,m,g))},error:e[o+1],complete:e[o+2]},jw(t._query)}return function(p,g,E,x){const P=new ey(x),A=new jg(g,P,E);return p.asyncQueue.enqueueAndForget(async()=>Jg(await Ef(p),A)),()=>{P.Ou(),p.asyncQueue.enqueueAndForget(async()=>Qg(await Ef(p),A))}}(ou(f),d,a,c)}function cy(t,e){return function(i,r){const s=new Bi;return i.asyncQueue.enqueueAndForget(async()=>UV(await KV(i),r,s)),s.promise}(ou(t),e)}function ex(t,e,n){const i=n.docs.get(e._key),r=new uy(t);return new _s(t,r,e._key,i,new Ba(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=iy(e)}set(e,n,i){this._verifyNotCommitted();const r=xh(e,this._firestore),s=Zw(r.converter,n,i),o=$w(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,xn.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=xh(e,this._firestore);let o;return o=typeof(n=yt(n))=="string"||n instanceof pd?r3(this._dataReader,"WriteBatch.update",s._key,n,i,r):i3(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=xh(e,this._firestore);return this._mutations=this._mutations.concat(new ud(n._key,xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ee(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function xh(t,e){if((t=yt(t)).firestore!==e)throw new ee(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(t){return ou(t=zn(t,$r)),new y3(t,e=>cy(t,e))}(function(e,n=!0){(function(r){sa=r})(Us),xs(new Lr("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new $r(new sP(i.getProvider("auth-internal")),new lP(o,i.getProvider("app-check-internal")),function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ee(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Il(f.options.projectId,d)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),di(c_,f_,e),di(c_,f_,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="firebasestorage.googleapis.com",_3="storageBucket",T3=2*60*1e3,E3=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Ai{constructor(e,n,i=0){super(bh(e),`Firebase Storage: ${n} (${bh(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Si.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ti;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ti||(Ti={}));function bh(t){return"storage/"+t}function C3(){const t="An unknown error occurred, please check the error payload for server response.";return new Si(Ti.UNKNOWN,t)}function A3(){return new Si(Ti.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function S3(){return new Si(Ti.CANCELED,"User canceled the upload/download.")}function w3(t){return new Si(Ti.INVALID_URL,"Invalid URL '"+t+"'.")}function x3(t){return new Si(Ti.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function cT(t){return new Si(Ti.INVALID_ARGUMENT,t)}function nx(){return new Si(Ti.APP_DELETED,"The Firebase app was deleted.")}function b3(t){return new Si(Ti.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=jn.makeFromUrl(e,n)}catch{return new jn(e,"")}if(i.path==="")return i;throw x3(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function f(D){D.path_=decodeURIComponent(D.path)}const d="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${m}/${d}/b/${r}/o${p}`,"i"),E={bucket:1,path:3},x=n===tx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",A=new RegExp(`^https?://${x}/${r}/${P}`,"i"),N=[{regex:a,indices:c,postModify:s},{regex:g,indices:E,postModify:f},{regex:A,indices:{bucket:1,path:2},postModify:f}];for(let D=0;D<N.length;D++){const O=N[D],L=O.regex.exec(e);if(L){const b=L[O.indices.bucket];let _=L[O.indices.path];_||(_=""),i=new jn(b,_),O.postModify(i);break}}if(i==null)throw w3(e);return i}}class I3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(t,e,n){let i=1,r=null,s=null,o=!1,a=0;function c(){return a===2}let f=!1;function d(...P){f||(f=!0,e.apply(null,P))}function m(P){r=setTimeout(()=>{r=null,t(g,c())},P)}function p(){s&&clearTimeout(s)}function g(P,...A){if(f){p();return}if(P){p(),d.call(null,P,...A);return}if(c()||o){p(),d.call(null,P,...A);return}i<64&&(i*=2);let N;a===1?(a=2,N=0):N=(i+Math.random())*1e3,m(N)}let E=!1;function x(P){E||(E=!0,p(),!f&&(r!==null?(P||(a=2),clearTimeout(r),m(0)):P||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,x(!0)},n),x}function N3(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(t){return t!==void 0}function fT(t,e,n,i){if(i<e)throw cT(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw cT(`Invalid value for '${t}'. Expected ${n} or less.`)}function D3(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Af;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Af||(Af={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n,i,r,s,o,a,c,f,d,m,p=!0,g=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=d,this.connectionFactory_=m,this.retry=p,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,x)=>{this.resolve_=E,this.reject_=x,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Yu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const c=a.loaded,f=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Af.NO_ERROR,c=s.getStatus();if(!a||P3(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Af.ABORT;i(!1,new Yu(!1,null,d));return}const f=this.successCodes_.indexOf(c)!==-1;i(!0,new Yu(f,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());M3(c)?s(c):s()}catch(c){o(c)}else if(a!==null){const c=C3();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(r.canceled){const c=this.appDelete_?nx():S3();o(c)}else{const c=A3();o(c)}};this.canceled_?n(!1,new Yu(!1,null,!0)):this.backoffId_=R3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&N3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yu{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function k3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function U3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function L3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function O3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function F3(t,e,n,i,r,s,o=!0,a=!1){const c=D3(t.urlParams),f=t.url+c,d=Object.assign({},t.headers);return L3(d,e),k3(d,n),U3(d,s),O3(d,i),new V3(f,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function B3(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n){this._service=e,n instanceof jn?this._location=n:this._location=jn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Sf(e,n)}get root(){const e=new jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return B3(this._location.path)}get storage(){return this._service}get parent(){const e=z3(this._location.path);if(e===null)return null;const n=new jn(this._location.bucket,e);return new Sf(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw b3(e)}}function dT(t,e){const n=e==null?void 0:e[_3];return n==null?null:jn.makeFromBucketSpec(n,t)}function q3(t,e,n,i={}){t.host=`${e}:${n}`;const r=ks(e);r&&(fg(`https://${t.host}/b`),dg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:s}=i;s&&(t._overrideAuthToken=typeof s=="string"?s:BS(s,t.app.options.projectId))}class G3{constructor(e,n,i,r,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=tx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=T3,this._maxUploadRetryTime=E3,this._requests=new Set,r!=null?this._bucket=jn.makeFromBucketSpec(r,this._host):this._bucket=dT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jn.makeFromBucketSpec(this._url,e):this._bucket=dT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sf(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new I3(nx());{const o=F3(e,this._appId,i,r,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const hT="@firebase/storage",mT="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="storage";function H3(t=pg(),e){t=yt(t);const i=Xf(t,ix).getImmediate({identifier:e}),r=OS("storage");return r&&$3(i,...r),i}function $3(t,e,n,i={}){q3(t,e,n,i)}function Y3(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new G3(n,i,r,e,Us)}function K3(){xs(new Lr(ix,Y3,"PUBLIC").setMultipleInstances(!0)),di(hT,mT,""),di(hT,mT,"esm2017")}K3();const Ih={apiKey:"AIzaSyAHaGI476VkNOa8gZGJnOctW6-BNDkLx1w",authDomain:"runica-dndcompanion.firebaseapp.com",projectId:"runica-dndcompanion",storageBucket:"runica-dndcompanion.firebasestorage.app",messagingSenderId:"1044992835319",appId:"1:1044992835319:web:3ce18324c445ed5e001df2",measurementId:"G-9KC2DBMXK4"};let Ku,un,Dl,J3;if(Ih.apiKey&&Ih.projectId)try{Ku=HS(Ih),un=tP(Ku),Dl=WV(Ku),J3=H3(Ku),console.log("Firebase initialized successfully.")}catch(t){console.error("Error initializing Firebase. Please check your configuration.",t)}else console.warn("Firebase configuration environment variables are not set. Cloud features are disabled.");const Q3=t=>Math.ceil(t/4)+1,pT=t=>Math.floor((t-10)/2),X3=t=>[{name:"Acrobatics",ability:"dexterity",proficient:!1,expertise:!1},{name:"Animal Handling",ability:"wisdom",proficient:!1,expertise:!1},{name:"Arcana",ability:"intelligence",proficient:!1,expertise:!1},{name:"Athletics",ability:"strength",proficient:!1,expertise:!1},{name:"Deception",ability:"charisma",proficient:!1,expertise:!1},{name:"History",ability:"intelligence",proficient:!1,expertise:!1},{name:"Insight",ability:"wisdom",proficient:!1,expertise:!1},{name:"Intimidation",ability:"charisma",proficient:!1,expertise:!1},{name:"Investigation",ability:"intelligence",proficient:!1,expertise:!1},{name:"Medicine",ability:"wisdom",proficient:!1,expertise:!1},{name:"Nature",ability:"intelligence",proficient:!1,expertise:!1},{name:"Perception",ability:"wisdom",proficient:!1,expertise:!1},{name:"Performance",ability:"charisma",proficient:!1,expertise:!1},{name:"Persuasion",ability:"charisma",proficient:!1,expertise:!1},{name:"Religion",ability:"intelligence",proficient:!1,expertise:!1},{name:"Sleight of Hand",ability:"dexterity",proficient:!1,expertise:!1},{name:"Stealth",ability:"dexterity",proficient:!1,expertise:!1},{name:"Survival",ability:"wisdom",proficient:!1,expertise:!1}],fy=()=>{const t={strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10};return{id:`new_${Date.now()}`,lastUpdated:Date.now(),name:"",class:"",subclass:"",level:1,race:"",alignment:"",background:"",playerName:"",experiencePoints:0,abilityScores:t,inspiration:0,proficiencyBonus:Q3(1),savingThrows:{strength:{proficient:!1},dexterity:{proficient:!1},constitution:{proficient:!1},intelligence:{proficient:!1},wisdom:{proficient:!1},charisma:{proficient:!1}},skills:X3(),armorClass:10+pT(t.dexterity),initiative:pT(t.dexterity),speed:30,hp:{max:10,current:10,temporary:0},hitDice:{total:"1d8",used:0},deathSaves:{successes:0,failures:0},personalityTraits:"",ideals:"",bonds:"",flaws:"",languages:"Common",attacks:[],currency:{cp:0,sp:0,ep:0,gp:0,pp:0},equipment:[],featuresAndTraits:[],notes:"",dmNotes:"",spellcastingAbility:"",spells:[],spellSlots:{1:{max:0,used:0},2:{max:0,used:0},3:{max:0,used:0},4:{max:0,used:0},5:{max:0,used:0},6:{max:0,used:0},7:{max:0,used:0},8:{max:0,used:0},9:{max:0,used:0}},customResources:[]}},rx="runica-characters",lu=()=>{try{const t=localStorage.getItem(rx);return t?JSON.parse(t).map(e=>({...fy(),...e})):[]}catch(t){return console.error("Error reading from local storage",t),[]}},dy=t=>{try{localStorage.setItem(rx,JSON.stringify(t))}catch(e){console.error("Error saving to local storage",e)}},hy=()=>!Dl||!(un!=null&&un.currentUser)?null:jV(Dl,"users",un.currentUser.uid,"characters"),my=t=>{const e=hy();return e?qw(e,t):null},j3=t=>{const e=hy();return e?g3(u3(e),n=>{const i=n.docs.map(r=>r.data());t(i)}):(t(lu()),()=>{})},sx=async t=>{if(t==="new")return fy();const e=my(t);if(e){const n=await d3(e);return n.exists()?n.data():null}else return lu().find(n=>n.id===t)||null},ox=async t=>{const e={...t,lastUpdated:Date.now()},n=my(e.id);if(n)await m3(n,e);else{const i=lu(),r=i.findIndex(s=>s.id===e.id);r>-1?i[r]=e:i.push(e),dy(i)}return e},ax=async t=>{const e=my(t);if(e)await p3(e);else{const n=lu();dy(n.filter(i=>i.id!==t))}},W3=async()=>{if(!Dl||!(un!=null&&un.currentUser))return;const t=lu();if(t.length===0||!window.confirm("You have local characters saved on this device. Do you want to move them to your account? This will merge them with any existing characters on your account."))return;const e=hy();if(!e)return;const n=v3(Dl),r=(await h3(e)).docs.map(o=>o.data());let s=0;for(const o of t){const a=r.find(c=>c.id===o.id);if(!a||o.lastUpdated>(a.lastUpdated||0)){const c=qw(e,o.id);n.set(c,o),s++}}if(s>0)try{await n.commit(),alert(`${s} character(s) migrated to your account.`),dy([])}catch(o){console.error("Failed to migrate characters:",o),alert("There was an error migrating your characters. They remain on this device for now.")}else alert("No characters needed to be migrated. Your cloud data is up to date.")},Z3=new Mi,ek=()=>un?cD(un,Z3).then(()=>{}):(alert("Firebase is not configured. Cloud sign-in is disabled. Please update firebaseConfig.ts."),Promise.resolve()),tk=()=>un?HM(un):Promise.resolve(),nk=t=>un?GM(un,t):(t(null),()=>{}),ik=({className:t})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor",children:[v.jsx("path",{fillRule:"evenodd",d:"M9.315 7.584C12.195 3.883 19.695 4.032 22.425 8.133c.225.33.015.765-.36.765h-2.19c-.39 0-.683-.404-.509-.757C17.58 4.568 11.535 4.818 9.315 7.584zM10.035 15c-2.88 3.701-10.38 3.552-13.11-0.549a.6.6 0 01.36-.765h2.19c.39 0 .683.404.509.757 1.785 3.552 7.83 3.302 10.05-0.21z",clipRule:"evenodd"}),v.jsx("path",{d:"M11.25 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75V12zM12 4.5a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75V4.5zM12 18a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75V18zM4.5 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H5.25a.75.75 0 01-.75-.75V12zM18 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75V12z"})]}),zs=({className:t})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.256 1.478l-.209-.035-1.005 13.006a.75.75 0 01-.75.742H5.625a.75.75 0 01-.75-.742L3.87 6.66l-.209.035a.75.75 0 01-.256-1.478A48.567 48.567 0 017.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 013.369 0c1.603.051 2.815 1.387 2.815 2.951zm-6.136-1.452a51.196 51.196 0 013.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 00-6 0v-.113c0-.794.609-1.428 1.364-1.452z",clipRule:"evenodd"})}),Bs=({className:t})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:t,children:v.jsx("path",{d:"M2.695 14.763l-1.262 3.154a.5.5 0 00.65.65l3.155-1.262a4 4 0 001.343-.885L17.5 5.5a2.121 2.121 0 00-3-3L3.58 13.42a4 4 0 00-.885 1.343z"})}),lx=({className:t})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),ux=({className:t})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),rk=({className:t})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),uu=({className:t})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),sk=({className:t})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),ok=({character:t,onSelect:e,onDelete:n})=>{const i=r=>{r.stopPropagation(),e()};return v.jsxs("div",{onClick:e,className:"bg-zinc-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 hover:shadow-amber-500/20 hover:scale-105 group relative cursor-pointer",children:[v.jsx("div",{className:"h-32 bg-zinc-700/50 relative",children:t.imageUrl?v.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}):v.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-600",children:v.jsx(ux,{className:"w-16 h-16"})})}),v.jsxs("div",{className:"p-5",children:[v.jsx("h3",{className:"text-xl font-bold font-cinzel text-amber-400 truncate",children:t.name||"Unnamed Adventurer"}),v.jsxs("p",{className:"text-zinc-400 capitalize text-sm",children:[t.race||"Race"," ",t.class||"Class","  Level ",t.level]}),v.jsxs("div",{className:"mt-4 flex items-center gap-4 text-sm text-zinc-300 border-t border-zinc-700 pt-4",children:[v.jsxs("div",{className:"flex items-center gap-1.5",title:"Hit Points",children:[v.jsx("span",{className:"font-bold text-red-400",children:"HP"}),v.jsxs("span",{children:[t.hp.current,"/",t.hp.max]})]}),v.jsxs("div",{className:"flex items-center gap-1.5",title:"Armor Class",children:[v.jsx("span",{className:"font-bold text-sky-400",children:"AC"}),v.jsx("span",{children:t.armorClass})]})]})]}),v.jsxs("div",{className:"absolute top-3 right-3 flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[v.jsx("button",{onClick:i,className:"p-2 rounded-full bg-zinc-700 hover:bg-amber-500 text-zinc-300 hover:text-white transition-colors","aria-label":`Edit ${t.name}`,children:v.jsx(Bs,{className:"w-4 h-4"})}),v.jsx("button",{onClick:n,className:"p-2 rounded-full bg-zinc-700 hover:bg-red-600 text-zinc-300 hover:text-white transition-colors","aria-label":`Delete ${t.name}`,children:v.jsx(zs,{className:"w-4 h-4"})})]})]})},ak=({user:t})=>t?v.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("img",{src:t.photoURL||void 0,alt:"User",className:"w-8 h-8 rounded-full"}),v.jsx("span",{className:"text-zinc-300 hidden sm:inline",children:t.displayName||t.email})]}),v.jsx("button",{onClick:()=>tk(),className:"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 rounded-md text-white transition-colors",children:"Sign Out"})]}):v.jsxs("button",{onClick:()=>ek(),className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 rounded-md text-white font-bold transition-colors flex items-center gap-2",children:[v.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("path",{d:"M22.56,12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26,1.37-1.04,2.53-2.21,3.31v2.77h3.57c2.08-1.92,3.28-4.74,3.28-8.09Z"}),v.jsx("path",{d:"M12,23c2.97,0,5.46-.98,7.28-2.66l-3.57-2.77c-.98.66-2.23,1.06-3.71,1.06-2.86,0-5.29-1.93-6.16-4.53H2.18v2.84C3.99,20.53,7.7,23,12,23Z"}),v.jsx("path",{d:"M5.84,14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43,8.55,1,10.22,1,12s.43,3.45,1.18,4.93l3.66-2.84Z"}),v.jsx("path",{d:"M12,5.38c1.62,0,3.06.56,4.21,1.64l3.15-3.15C17.45,2.09,14.97,1,12,1,7.7,1,3.99,3.47,2.18,7.07l3.66,2.84c.87-2.6,3.3-4.53,6.16-4.53Z"})]}),"Sign in with Google"]}),lk=({onSelectCharacter:t,currentUser:e})=>{const[n,i]=se.useState([]),[r,s]=se.useState(!0);se.useEffect(()=>{s(!0);const c=j3(f=>{i(f.sort((d,m)=>d.name.localeCompare(m.name))),s(!1)});return()=>c()},[e]);const o=()=>{t("new")},a=async(c,f)=>{window.confirm(`Are you sure you want to delete ${f}? This cannot be undone.`)&&await ax(c)};return r?v.jsx("div",{className:"flex justify-center items-center h-screen",children:v.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})}):v.jsxs("div",{className:"p-4 sm:p-8 max-w-7xl mx-auto",children:[v.jsxs("header",{className:"flex justify-between items-center mb-8",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-amber-400 font-cinzel tracking-wider",children:"RUNICA"}),v.jsx("p",{className:"text-zinc-400 mt-1",children:"Your D&D Companion"})]}),v.jsx(ak,{user:e})]}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsxs("button",{onClick:o,className:"mb-10 flex items-center gap-2 px-6 py-3 bg-amber-600 text-white font-bold rounded-lg shadow-md hover:bg-amber-500 transition-all duration-300 transform hover:scale-105",children:[v.jsx(sk,{className:"w-5 h-5"}),"Create New Character"]}),n.length>0?v.jsx("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(c=>v.jsx(ok,{character:c,onSelect:()=>t(c.id),onDelete:f=>{f.stopPropagation(),a(c.id,c.name)}},c.id))}):v.jsxs("div",{className:"text-center w-full max-w-2xl mt-8 py-16 px-6 bg-zinc-800/50 rounded-lg",children:[v.jsx("h2",{className:"text-2xl font-semibold text-zinc-300 font-cinzel",children:"Your adventure awaits!"}),v.jsxs("p",{className:"text-zinc-400 mt-2",children:[e?"You have no characters synced to this account.":"You have no local characters.",v.jsx("br",{}),"Click the button above to forge your first hero."]})]})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let uk,ck;function fk(){return{geminiUrl:uk,vertexUrl:ck}}function dk(t,e,n){var i,r,s;if(!(!((i=t.httpOptions)===null||i===void 0)&&i.baseUrl)){const o=fk();return t.vertexai?(r=o.vertexUrl)!==null&&r!==void 0?r:e:(s=o.geminiUrl)!==null&&s!==void 0?s:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qs{}function ie(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const s=e[r];return s!=null?String(s):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function u(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const c=t[a];if(Array.isArray(n))for(let f=0;f<c.length;f++){const d=c[f];u(d,e.slice(s+1),n[f])}else for(const f of c)u(f,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const c=t[a];u(c[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else t[i]=n}function l(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const i=e[n];if(i.endsWith("[]")){const r=i.slice(0,-2);if(r in t){const s=t[r];return Array.isArray(s)?s.map(o=>l(o,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var gT;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(gT||(gT={}));var yT;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(yT||(yT={}));var Tn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Tn||(Tn={}));var vT;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(vT||(vT={}));var _T;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(_T||(_T={}));var TT;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(TT||(TT={}));var ET;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ET||(ET={}));var CT;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(CT||(CT={}));var AT;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(AT||(AT={}));var ST;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(ST||(ST={}));var wT;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(wT||(wT={}));var xT;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(xT||(xT={}));var bT;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(bT||(bT={}));var IT;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(IT||(IT={}));var RT;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(RT||(RT={}));var NT;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(NT||(NT={}));var wf;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(wf||(wf={}));var MT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(MT||(MT={}));var ep;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ep||(ep={}));var DT;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(DT||(DT={}));var PT;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(PT||(PT={}));var VT;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(VT||(VT={}));var kT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(kT||(kT={}));var UT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(UT||(UT={}));var LT;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(LT||(LT={}));var OT;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(OT||(OT={}));var FT;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(FT||(FT={}));var zT;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(zT||(zT={}));var BT;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(BT||(BT={}));var qT;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(qT||(qT={}));var GT;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(GT||(GT={}));var HT;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(HT||(HT={}));var $T;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})($T||($T={}));var YT;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(YT||(YT={}));var KT;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(KT||(KT={}));var JT;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(JT||(JT={}));var QT;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(QT||(QT={}));var XT;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(XT||(XT={}));var jT;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(jT||(jT={}));var WT;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(WT||(WT={}));var ZT;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ZT||(ZT={}));var vo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(vo||(vo={}));class tp{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Pa{get text(){var e,n,i,r,s,o,a,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",d=!1;const m=[];for(const p of(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[g,E]of Object.entries(p))g!=="text"&&g!=="thought"&&(E!==null||E!==void 0)&&m.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;d=!0,f+=p.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?f:void 0}get data(){var e,n,i,r,s,o,a,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const d=[];for(const m of(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[p,g]of Object.entries(m))p!=="inlineData"&&(g!==null||g!==void 0)&&d.push(p);m.inlineData&&typeof m.inlineData.data=="string"&&(f+=atob(m.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,i,r,s,o,a,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,i,r,s,o,a,c,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(f=d==null?void 0:d[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,i,r,s,o,a,c,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(f=d==null?void 0:d[0])===null||f===void 0?void 0:f.output}}class eE{}class tE{}class hk{}class mk{}class nE{}class iE{}class rE{}class pk{}class sE{}class oE{}class aE{}class gk{}class yk{}class vk{}class lE{}class _k{get text(){var e,n,i;let r="",s=!1;const o=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,f]of Object.entries(a))c!=="text"&&c!=="thought"&&f!==null&&o.push(c);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,r+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?r:void 0}get data(){var e,n,i;let r="";const s=[];for(const o of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[a,c]of Object.entries(o))a!=="inlineData"&&c!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(r+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class Tk{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function De(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function cx(t,e){const n=De(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function fx(t){return Array.isArray(t)?t.map(e=>xf(e)):[xf(t)]}function xf(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function dx(t){const e=xf(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function hx(t){const e=xf(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function uE(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function mx(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>uE(e)):[uE(t)]}function np(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function cE(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function fE(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Kt(t){if(t==null)throw new Error("ContentUnion is required");return np(t)?t:{role:"user",parts:mx(t)}}function px(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Kt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Kt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Kt(n)):[Kt(e)]}function Bn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(cE(t)||fE(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Kt(t)]}const e=[],n=[],i=np(t[0]);for(const r of t){const s=np(r);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(r);else{if(cE(r)||fE(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:mx(n)}),e}function Ek(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Tn).includes(n[0].toUpperCase())?n[0].toUpperCase():Tn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Tn).includes(i.toUpperCase())?i.toUpperCase():Tn.TYPE_UNSPECIFIED})}}function Do(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&Ek(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Tn).includes(a.toUpperCase())?a.toUpperCase():Tn.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Do(a);else if(i.includes(o)){const c=[];for(const f of a){if(f.type=="null"){e.nullable=!0;continue}c.push(Do(f))}e[o]=c}else if(r.includes(o)){const c={};for(const[f,d]of Object.entries(a))c[f]=Do(d);e[o]=c}else{if(o==="additionalProperties")continue;e[o]=a}return e}function py(t){return Do(t)}function gy(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function yy(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ua(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Do(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Do(e.response));return t}function ca(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Ck(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function ji(t,e){if(typeof e!="string")throw new Error("name must be a string");return Ck(t,e,"cachedContents")}function gx(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Wi(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Ak(t){return t!=null&&typeof t=="object"&&"name"in t}function Sk(t){return t!=null&&typeof t=="object"&&"video"in t}function wk(t){return t!=null&&typeof t=="object"&&"uri"in t}function yx(t){var e;let n;if(Ak(t)&&(n=t.name),!(wk(t)&&(n=t.uri,n===void 0))&&!(Sk(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function vx(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function _x(t){for(const e of["models","tunedModels","publisherModels"])if(xk(t,e))return t[e];return[]}function xk(t,e){return t!==null&&typeof t=="object"&&e in t}function bk(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Ik(t,e={}){const n=[],i=new Set;for(const r of t){const s=r.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const o=bk(r,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function Tx(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function Rk(t){const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function fa(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Ex(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nk(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const r=l(t,["startOffset"]);return r!=null&&u(e,["startOffset"],r),e}function Mk(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function Dk(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function Pk(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],Nk(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const r=l(t,["inlineData"]);r!=null&&u(e,["inlineData"],Mk(r));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],Dk(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function Cx(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Pk(s))),u(e,["parts"],r)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function Vk(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const i=l(t,["default"]);i!=null&&u(e,["default"],i);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const s=l(t,["enum"]);s!=null&&u(e,["enum"],s);const o=l(t,["example"]);o!=null&&u(e,["example"],o);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const f=l(t,["maxItems"]);f!=null&&u(e,["maxItems"],f);const d=l(t,["maxLength"]);d!=null&&u(e,["maxLength"],d);const m=l(t,["maxProperties"]);m!=null&&u(e,["maxProperties"],m);const p=l(t,["maximum"]);p!=null&&u(e,["maximum"],p);const g=l(t,["minItems"]);g!=null&&u(e,["minItems"],g);const E=l(t,["minLength"]);E!=null&&u(e,["minLength"],E);const x=l(t,["minProperties"]);x!=null&&u(e,["minProperties"],x);const P=l(t,["minimum"]);P!=null&&u(e,["minimum"],P);const A=l(t,["nullable"]);A!=null&&u(e,["nullable"],A);const w=l(t,["pattern"]);w!=null&&u(e,["pattern"],w);const N=l(t,["properties"]);N!=null&&u(e,["properties"],N);const D=l(t,["propertyOrdering"]);D!=null&&u(e,["propertyOrdering"],D);const O=l(t,["required"]);O!=null&&u(e,["required"],O);const L=l(t,["title"]);L!=null&&u(e,["title"],L);const b=l(t,["type"]);return b!=null&&u(e,["type"],b),e}function kk(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&u(e,["category"],n);const i=l(t,["threshold"]);return i!=null&&u(e,["threshold"],i),e}function Uk(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const s=l(t,["parameters"]);s!=null&&u(e,["parameters"],s);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function Lk(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const i=l(t,["endTime"]);return i!=null&&u(e,["endTime"],i),e}function Ok(t){const e={},n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],Lk(n)),e}function Fk(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["dynamicThreshold"]);return i!=null&&u(e,["dynamicThreshold"],i),e}function zk(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],Fk(n)),e}function Bk(){return{}}function qk(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>Uk(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],Ok(i));const r=l(t,["googleSearchRetrieval"]);if(r!=null&&u(e,["googleSearchRetrieval"],zk(r)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],Bk());const o=l(t,["codeExecution"]);o!=null&&u(e,["codeExecution"],o);const a=l(t,["computerUse"]);return a!=null&&u(e,["computerUse"],a),e}function Gk(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["allowedFunctionNames"]);return i!=null&&u(e,["allowedFunctionNames"],i),e}function Hk(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const i=l(t,["longitude"]);return i!=null&&u(e,["longitude"],i),e}function $k(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],Hk(n));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function Yk(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],Gk(n));const i=l(t,["retrievalConfig"]);return i!=null&&u(e,["retrievalConfig"],$k(i)),e}function Kk(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function Ax(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],Kk(n)),e}function Jk(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const i=l(t,["voiceConfig"]);return i!=null&&u(e,["voiceConfig"],Ax(i)),e}function Qk(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Jk(r))),u(e,["speakerVoiceConfigs"],i)}return e}function Xk(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],Ax(n));const i=l(t,["multiSpeakerVoiceConfig"]);i!=null&&u(e,["multiSpeakerVoiceConfig"],Qk(i));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function jk(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const i=l(t,["thinkingBudget"]);return i!=null&&u(e,["thinkingBudget"],i),e}function Wk(t,e,n){const i={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&u(n,["systemInstruction"],Cx(Kt(r)));const s=l(e,["temperature"]);s!=null&&u(i,["temperature"],s);const o=l(e,["topP"]);o!=null&&u(i,["topP"],o);const a=l(e,["topK"]);a!=null&&u(i,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(i,["candidateCount"],c);const f=l(e,["maxOutputTokens"]);f!=null&&u(i,["maxOutputTokens"],f);const d=l(e,["stopSequences"]);d!=null&&u(i,["stopSequences"],d);const m=l(e,["responseLogprobs"]);m!=null&&u(i,["responseLogprobs"],m);const p=l(e,["logprobs"]);p!=null&&u(i,["logprobs"],p);const g=l(e,["presencePenalty"]);g!=null&&u(i,["presencePenalty"],g);const E=l(e,["frequencyPenalty"]);E!=null&&u(i,["frequencyPenalty"],E);const x=l(e,["seed"]);x!=null&&u(i,["seed"],x);const P=l(e,["responseMimeType"]);P!=null&&u(i,["responseMimeType"],P);const A=l(e,["responseSchema"]);A!=null&&u(i,["responseSchema"],Vk(py(A)));const w=l(e,["responseJsonSchema"]);if(w!=null&&u(i,["responseJsonSchema"],w),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=l(e,["safetySettings"]);if(n!==void 0&&N!=null){let I=N;Array.isArray(I)&&(I=I.map(M=>kk(M))),u(n,["safetySettings"],I)}const D=l(e,["tools"]);if(n!==void 0&&D!=null){let I=ca(D);Array.isArray(I)&&(I=I.map(M=>qk(ua(M)))),u(n,["tools"],I)}const O=l(e,["toolConfig"]);if(n!==void 0&&O!=null&&u(n,["toolConfig"],Yk(O)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=l(e,["cachedContent"]);n!==void 0&&L!=null&&u(n,["cachedContent"],ji(t,L));const b=l(e,["responseModalities"]);b!=null&&u(i,["responseModalities"],b);const _=l(e,["mediaResolution"]);_!=null&&u(i,["mediaResolution"],_);const T=l(e,["speechConfig"]);if(T!=null&&u(i,["speechConfig"],Xk(gy(T))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const S=l(e,["thinkingConfig"]);return S!=null&&u(i,["thinkingConfig"],jk(S)),i}function Zk(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["request","model"],De(t,i));const r=l(e,["contents"]);if(r!=null){let o=Bn(r);Array.isArray(o)&&(o=o.map(a=>Cx(a))),u(n,["request","contents"],o)}const s=l(e,["config"]);return s!=null&&u(n,["request","generationConfig"],Wk(t,s,n)),n}function eU(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=l(e,["fileName"]);i!=null&&u(n,["fileName"],i);const r=l(e,["inlinedRequests"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Zk(t,o))),u(n,["requests","requests"],s)}return n}function tU(t,e){const n={},i=l(t,["displayName"]);if(e!==void 0&&i!=null&&u(e,["batch","displayName"],i),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function nU(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],De(t,i));const r=l(e,["src"]);r!=null&&u(n,["batch","inputConfig"],eU(t,Tx(t,r)));const s=l(e,["config"]);return s!=null&&u(n,["config"],tU(s,n)),n}function iU(t,e){const n={},i=l(e,["name"]);i!=null&&u(n,["_url","name"],fa(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],r),n}function rU(t,e){const n={},i=l(e,["name"]);i!=null&&u(n,["_url","name"],fa(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],r),n}function sU(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const r=l(t,["pageToken"]);if(e!==void 0&&r!=null&&u(e,["_query","pageToken"],r),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function oU(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],sU(n,e)),e}function aU(t,e){const n={},i=l(e,["name"]);i!=null&&u(n,["_url","name"],fa(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],r),n}function lU(t){const e={},n=l(t,["format"]);n!=null&&u(e,["instancesFormat"],n);const i=l(t,["gcsUri"]);i!=null&&u(e,["gcsSource","uris"],i);const r=l(t,["bigqueryUri"]);if(r!=null&&u(e,["bigquerySource","inputUri"],r),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function uU(t){const e={},n=l(t,["format"]);n!=null&&u(e,["predictionsFormat"],n);const i=l(t,["gcsUri"]);i!=null&&u(e,["gcsDestination","outputUriPrefix"],i);const r=l(t,["bigqueryUri"]);if(r!=null&&u(e,["bigqueryDestination","outputUri"],r),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function cU(t,e){const n={},i=l(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const r=l(t,["dest"]);return e!==void 0&&r!=null&&u(e,["outputConfig"],uU(Rk(r))),n}function fU(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["model"],De(t,i));const r=l(e,["src"]);r!=null&&u(n,["inputConfig"],lU(Tx(t,r)));const s=l(e,["config"]);return s!=null&&u(n,["config"],cU(s,n)),n}function dU(t,e){const n={},i=l(e,["name"]);i!=null&&u(n,["_url","name"],fa(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],r),n}function hU(t,e){const n={},i=l(e,["name"]);i!=null&&u(n,["_url","name"],fa(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],r),n}function mU(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const r=l(t,["pageToken"]);e!==void 0&&r!=null&&u(e,["_query","pageToken"],r);const s=l(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),n}function pU(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],mU(n,e)),e}function gU(t,e){const n={},i=l(e,["name"]);i!=null&&u(n,["_url","name"],fa(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],r),n}function Sx(){return{}}function yU(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const r=l(t,["startOffset"]);return r!=null&&u(e,["startOffset"],r),e}function vU(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function _U(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function TU(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],yU(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const r=l(t,["inlineData"]);r!=null&&u(e,["inlineData"],vU(r));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],_U(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function EU(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>TU(s))),u(e,["parts"],r)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function CU(t){const e={},n=l(t,["citationSources"]);return n!=null&&u(e,["citations"],n),e}function AU(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const i=l(t,["urlRetrievalStatus"]);return i!=null&&u(e,["urlRetrievalStatus"],i),e}function SU(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>AU(r))),u(e,["urlMetadata"],i)}return e}function wU(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],EU(n));const i=l(t,["citationMetadata"]);i!=null&&u(e,["citationMetadata"],CU(i));const r=l(t,["tokenCount"]);r!=null&&u(e,["tokenCount"],r);const s=l(t,["finishReason"]);s!=null&&u(e,["finishReason"],s);const o=l(t,["urlContextMetadata"]);o!=null&&u(e,["urlContextMetadata"],SU(o));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const f=l(t,["index"]);f!=null&&u(e,["index"],f);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const m=l(t,["safetyRatings"]);return m!=null&&u(e,["safetyRatings"],m),e}function xU(t){const e={},n=l(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>wU(a))),u(e,["candidates"],o)}const i=l(t,["modelVersion"]);i!=null&&u(e,["modelVersion"],i);const r=l(t,["promptFeedback"]);r!=null&&u(e,["promptFeedback"],r);const s=l(t,["usageMetadata"]);return s!=null&&u(e,["usageMetadata"],s),e}function bU(t){const e={},n=l(t,["response"]);return n!=null&&u(e,["response"],xU(n)),l(t,["error"])!=null&&u(e,["error"],Sx()),e}function IU(t){const e={},n=l(t,["responsesFile"]);n!=null&&u(e,["fileName"],n);const i=l(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>bU(s))),u(e,["inlinedResponses"],r)}return e}function ip(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["metadata","displayName"]);i!=null&&u(e,["displayName"],i);const r=l(t,["metadata","state"]);r!=null&&u(e,["state"],Ex(r));const s=l(t,["metadata","createTime"]);s!=null&&u(e,["createTime"],s);const o=l(t,["metadata","endTime"]);o!=null&&u(e,["endTime"],o);const a=l(t,["metadata","updateTime"]);a!=null&&u(e,["updateTime"],a);const c=l(t,["metadata","model"]);c!=null&&u(e,["model"],c);const f=l(t,["metadata","output"]);return f!=null&&u(e,["dest"],IU(f)),e}function RU(t){const e={},n=l(t,["nextPageToken"]);n!=null&&u(e,["nextPageToken"],n);const i=l(t,["operations"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>ip(s))),u(e,["batchJobs"],r)}return e}function NU(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["done"]);return i!=null&&u(e,["done"],i),l(t,["error"])!=null&&u(e,["error"],Sx()),e}function wx(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const i=l(t,["code"]);i!=null&&u(e,["code"],i);const r=l(t,["message"]);return r!=null&&u(e,["message"],r),e}function MU(t){const e={},n=l(t,["instancesFormat"]);n!=null&&u(e,["format"],n);const i=l(t,["gcsSource","uris"]);i!=null&&u(e,["gcsUri"],i);const r=l(t,["bigquerySource","inputUri"]);return r!=null&&u(e,["bigqueryUri"],r),e}function DU(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&u(e,["format"],n);const i=l(t,["gcsDestination","outputUriPrefix"]);i!=null&&u(e,["gcsUri"],i);const r=l(t,["bigqueryDestination","outputUri"]);return r!=null&&u(e,["bigqueryUri"],r),e}function rp(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["displayName"]);i!=null&&u(e,["displayName"],i);const r=l(t,["state"]);r!=null&&u(e,["state"],Ex(r));const s=l(t,["error"]);s!=null&&u(e,["error"],wx(s));const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const a=l(t,["startTime"]);a!=null&&u(e,["startTime"],a);const c=l(t,["endTime"]);c!=null&&u(e,["endTime"],c);const f=l(t,["updateTime"]);f!=null&&u(e,["updateTime"],f);const d=l(t,["model"]);d!=null&&u(e,["model"],d);const m=l(t,["inputConfig"]);m!=null&&u(e,["src"],MU(m));const p=l(t,["outputConfig"]);return p!=null&&u(e,["dest"],DU(p)),e}function PU(t){const e={},n=l(t,["nextPageToken"]);n!=null&&u(e,["nextPageToken"],n);const i=l(t,["batchPredictionJobs"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>rp(s))),u(e,["batchJobs"],r)}return e}function VU(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const r=l(t,["error"]);return r!=null&&u(e,["error"],wx(r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ns;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ns||(Ns={}));class cu{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};i?typeof i=="object"?o=Object.assign({},i):o=i:o={config:{}},o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(r=o.config)===null||r===void 0?void 0:r.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kU extends qs{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const r=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${r}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new cu(Ns.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}async createInternal(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=fU(this.apiClient,e);return a=ie("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>rp(d))}else{const f=nU(this.apiClient,e);return a=ie("{model}:batchGenerateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>ip(d))}}async get(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=dU(this.apiClient,e);return a=ie("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>rp(d))}else{const f=iU(this.apiClient,e);return a=ie("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>ip(d))}}async cancel(e){var n,i,r,s;let o="",a={};if(this.apiClient.isVertexAI()){const c=hU(this.apiClient,e);o=ie("batchPredictionJobs/{name}:cancel",c._url),a=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const c=rU(this.apiClient,e);o=ie("batches/{name}:cancel",c._url),a=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=pU(e);return a=ie("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const m=PU(d),p=new lE;return Object.assign(p,m),p})}else{const f=oU(e);return a=ie("batches",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>{const m=RU(d),p=new lE;return Object.assign(p,m),p})}}async delete(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=gU(this.apiClient,e);return a=ie("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>VU(d))}else{const f=aU(this.apiClient,e);return a=ie("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>NU(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UU(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const r=l(t,["startOffset"]);return r!=null&&u(e,["startOffset"],r),e}function LU(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function OU(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function FU(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],UU(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const r=l(t,["inlineData"]);r!=null&&u(e,["inlineData"],LU(r));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],OU(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function dE(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>FU(s))),u(e,["parts"],r)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function zU(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const s=l(t,["parameters"]);s!=null&&u(e,["parameters"],s);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function BU(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const i=l(t,["endTime"]);return i!=null&&u(e,["endTime"],i),e}function qU(t){const e={},n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],BU(n)),e}function GU(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["dynamicThreshold"]);return i!=null&&u(e,["dynamicThreshold"],i),e}function HU(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],GU(n)),e}function $U(){return{}}function YU(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>zU(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],qU(i));const r=l(t,["googleSearchRetrieval"]);if(r!=null&&u(e,["googleSearchRetrieval"],HU(r)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],$U());const o=l(t,["codeExecution"]);o!=null&&u(e,["codeExecution"],o);const a=l(t,["computerUse"]);return a!=null&&u(e,["computerUse"],a),e}function KU(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["allowedFunctionNames"]);return i!=null&&u(e,["allowedFunctionNames"],i),e}function JU(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const i=l(t,["longitude"]);return i!=null&&u(e,["longitude"],i),e}function QU(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],JU(n));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function XU(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],KU(n));const i=l(t,["retrievalConfig"]);return i!=null&&u(e,["retrievalConfig"],QU(i)),e}function jU(t,e){const n={},i=l(t,["ttl"]);e!==void 0&&i!=null&&u(e,["ttl"],i);const r=l(t,["expireTime"]);e!==void 0&&r!=null&&u(e,["expireTime"],r);const s=l(t,["displayName"]);e!==void 0&&s!=null&&u(e,["displayName"],s);const o=l(t,["contents"]);if(e!==void 0&&o!=null){let d=Bn(o);Array.isArray(d)&&(d=d.map(m=>dE(m))),u(e,["contents"],d)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],dE(Kt(a)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let d=c;Array.isArray(d)&&(d=d.map(m=>YU(m))),u(e,["tools"],d)}const f=l(t,["toolConfig"]);if(e!==void 0&&f!=null&&u(e,["toolConfig"],XU(f)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function WU(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["model"],cx(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],jU(r,n)),n}function ZU(t,e){const n={},i=l(e,["name"]);i!=null&&u(n,["_url","name"],ji(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],r),n}function e5(t,e){const n={},i=l(e,["name"]);i!=null&&u(n,["_url","name"],ji(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],r),n}function t5(t,e){const n={},i=l(t,["ttl"]);e!==void 0&&i!=null&&u(e,["ttl"],i);const r=l(t,["expireTime"]);return e!==void 0&&r!=null&&u(e,["expireTime"],r),n}function n5(t,e){const n={},i=l(e,["name"]);i!=null&&u(n,["_url","name"],ji(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],t5(r,n)),n}function i5(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&u(e,["_query","pageToken"],r),n}function r5(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],i5(n,e)),e}function s5(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const r=l(t,["startOffset"]);return r!=null&&u(e,["startOffset"],r),e}function o5(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["data"]);i!=null&&u(e,["data"],i);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function a5(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function l5(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],s5(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const r=l(t,["inlineData"]);r!=null&&u(e,["inlineData"],o5(r));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],a5(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function hE(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>l5(s))),u(e,["parts"],r)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function u5(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const r=l(t,["parameters"]);r!=null&&u(e,["parameters"],r);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const o=l(t,["response"]);o!=null&&u(e,["response"],o);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function c5(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const i=l(t,["endTime"]);return i!=null&&u(e,["endTime"],i),e}function f5(t){const e={},n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],c5(n)),e}function d5(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["dynamicThreshold"]);return i!=null&&u(e,["dynamicThreshold"],i),e}function h5(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],d5(n)),e}function m5(){return{}}function p5(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function g5(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],p5(n));const i=l(t,["authType"]);i!=null&&u(e,["authType"],i);const r=l(t,["googleServiceAccountConfig"]);r!=null&&u(e,["googleServiceAccountConfig"],r);const s=l(t,["httpBasicAuthConfig"]);s!=null&&u(e,["httpBasicAuthConfig"],s);const o=l(t,["oauthConfig"]);o!=null&&u(e,["oauthConfig"],o);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function y5(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],g5(n)),e}function v5(){return{}}function _5(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>u5(p))),u(e,["functionDeclarations"],m)}const i=l(t,["retrieval"]);i!=null&&u(e,["retrieval"],i);const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],f5(r));const s=l(t,["googleSearchRetrieval"]);s!=null&&u(e,["googleSearchRetrieval"],h5(s)),l(t,["enterpriseWebSearch"])!=null&&u(e,["enterpriseWebSearch"],m5());const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],y5(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],v5());const f=l(t,["codeExecution"]);f!=null&&u(e,["codeExecution"],f);const d=l(t,["computerUse"]);return d!=null&&u(e,["computerUse"],d),e}function T5(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["allowedFunctionNames"]);return i!=null&&u(e,["allowedFunctionNames"],i),e}function E5(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const i=l(t,["longitude"]);return i!=null&&u(e,["longitude"],i),e}function C5(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],E5(n));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function A5(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],T5(n));const i=l(t,["retrievalConfig"]);return i!=null&&u(e,["retrievalConfig"],C5(i)),e}function S5(t,e){const n={},i=l(t,["ttl"]);e!==void 0&&i!=null&&u(e,["ttl"],i);const r=l(t,["expireTime"]);e!==void 0&&r!=null&&u(e,["expireTime"],r);const s=l(t,["displayName"]);e!==void 0&&s!=null&&u(e,["displayName"],s);const o=l(t,["contents"]);if(e!==void 0&&o!=null){let m=Bn(o);Array.isArray(m)&&(m=m.map(p=>hE(p))),u(e,["contents"],m)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],hE(Kt(a)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(p=>_5(p))),u(e,["tools"],m)}const f=l(t,["toolConfig"]);e!==void 0&&f!=null&&u(e,["toolConfig"],A5(f));const d=l(t,["kmsKeyName"]);return e!==void 0&&d!=null&&u(e,["encryption_spec","kmsKeyName"],d),n}function w5(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["model"],cx(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],S5(r,n)),n}function x5(t,e){const n={},i=l(e,["name"]);i!=null&&u(n,["_url","name"],ji(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],r),n}function b5(t,e){const n={},i=l(e,["name"]);i!=null&&u(n,["_url","name"],ji(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],r),n}function I5(t,e){const n={},i=l(t,["ttl"]);e!==void 0&&i!=null&&u(e,["ttl"],i);const r=l(t,["expireTime"]);return e!==void 0&&r!=null&&u(e,["expireTime"],r),n}function R5(t,e){const n={},i=l(e,["name"]);i!=null&&u(n,["_url","name"],ji(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],I5(r,n)),n}function N5(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&u(e,["_query","pageToken"],r),n}function M5(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],N5(n,e)),e}function Tc(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["displayName"]);i!=null&&u(e,["displayName"],i);const r=l(t,["model"]);r!=null&&u(e,["model"],r);const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const o=l(t,["updateTime"]);o!=null&&u(e,["updateTime"],o);const a=l(t,["expireTime"]);a!=null&&u(e,["expireTime"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function D5(){return{}}function P5(t){const e={},n=l(t,["nextPageToken"]);n!=null&&u(e,["nextPageToken"],n);const i=l(t,["cachedContents"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>Tc(s))),u(e,["cachedContents"],r)}return e}function Ec(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["displayName"]);i!=null&&u(e,["displayName"],i);const r=l(t,["model"]);r!=null&&u(e,["model"],r);const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const o=l(t,["updateTime"]);o!=null&&u(e,["updateTime"],o);const a=l(t,["expireTime"]);a!=null&&u(e,["expireTime"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function V5(){return{}}function k5(t){const e={},n=l(t,["nextPageToken"]);n!=null&&u(e,["nextPageToken"],n);const i=l(t,["cachedContents"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>Ec(s))),u(e,["cachedContents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U5 extends qs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new cu(Ns.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=w5(this.apiClient,e);return a=ie("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>Ec(d))}else{const f=WU(this.apiClient,e);return a=ie("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>Tc(d))}}async get(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=x5(this.apiClient,e);return a=ie("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>Ec(d))}else{const f=ZU(this.apiClient,e);return a=ie("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>Tc(d))}}async delete(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=b5(this.apiClient,e);return a=ie("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(()=>{const d=V5(),m=new oE;return Object.assign(m,d),m})}else{const f=e5(this.apiClient,e);return a=ie("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(()=>{const d=D5(),m=new oE;return Object.assign(m,d),m})}}async update(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=R5(this.apiClient,e);return a=ie("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>Ec(d))}else{const f=n5(this.apiClient,e);return a=ie("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>Tc(d))}}async listInternal(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=M5(e);return a=ie("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const m=k5(d),p=new aE;return Object.assign(p,m),p})}else{const f=r5(e);return a=ie("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>{const m=P5(d),p=new aE;return Object.assign(p,m),p})}}}function mE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $e(t){return this instanceof $e?(this.v=t,this):new $e(t)}function Po(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(g){return function(E){return Promise.resolve(E).then(g,m)}}function a(g,E){i[g]&&(r[g]=function(x){return new Promise(function(P,A){s.push([g,x,P,A])>1||c(g,x)})},E&&(r[g]=E(r[g])))}function c(g,E){try{f(i[g](E))}catch(x){p(s[0][3],x)}}function f(g){g.value instanceof $e?Promise.resolve(g.value.v).then(d,m):p(s[0][2],g)}function d(g){c("next",g)}function m(g){c("throw",g)}function p(g,E){g(E),s.shift(),s.length&&c(s[0][0],s[0][1])}}function ul(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof mE=="function"?mE(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),r(a,c,o.done,o.value)})}}function r(s,o,a,c){Promise.resolve(c).then(function(f){s({value:f,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L5(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:xx(n)}function xx(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function O5(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function pE(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let s=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),s&&!xx(t[i])&&(s=!1),i++;s?e.push(...r):e.pop()}return e}class F5{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new z5(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class z5{constructor(e,n,i,r={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=s,this.sendPromise=Promise.resolve(),O5(s)}async sendMessage(e){var n;await this.sendPromise;const i=Kt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,a;const c=await r,f=(o=(s=c.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,d=c.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let p=[];d!=null&&(p=(a=d.slice(m))!==null&&a!==void 0?a:[]);const g=f?[f]:[];this.recordHistory(i,g,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=Kt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const s=await r;return this.processStreamResponse(s,i)}getHistory(e=!1){const n=e?pE(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return Po(this,arguments,function*(){var o,a,c,f;const d=[];try{for(var m=!0,p=ul(e),g;g=yield $e(p.next()),o=g.done,!o;m=!0){f=g.value,m=!1;const E=f;if(L5(E)){const x=(r=(i=E.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;x!==void 0&&d.push(x)}yield yield $e(E)}}catch(E){a={error:E}}finally{try{!m&&!o&&(c=p.return)&&(yield $e(c.call(p)))}finally{if(a)throw a.error}}this.recordHistory(n,d)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(s=>s.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...pE(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,yd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B5(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&u(e,["_query","pageToken"],r),n}function q5(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],B5(n,e)),e}function G5(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const i=l(t,["message"]);i!=null&&u(e,["message"],i);const r=l(t,["code"]);return r!=null&&u(e,["code"],r),e}function H5(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["displayName"]);i!=null&&u(e,["displayName"],i);const r=l(t,["mimeType"]);r!=null&&u(e,["mimeType"],r);const s=l(t,["sizeBytes"]);s!=null&&u(e,["sizeBytes"],s);const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const a=l(t,["expirationTime"]);a!=null&&u(e,["expirationTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const f=l(t,["sha256Hash"]);f!=null&&u(e,["sha256Hash"],f);const d=l(t,["uri"]);d!=null&&u(e,["uri"],d);const m=l(t,["downloadUri"]);m!=null&&u(e,["downloadUri"],m);const p=l(t,["state"]);p!=null&&u(e,["state"],p);const g=l(t,["source"]);g!=null&&u(e,["source"],g);const E=l(t,["videoMetadata"]);E!=null&&u(e,["videoMetadata"],E);const x=l(t,["error"]);return x!=null&&u(e,["error"],G5(x)),e}function $5(t){const e={},n=l(t,["file"]);n!=null&&u(e,["file"],H5(n));const i=l(t,["config"]);return i!=null&&u(e,["config"],i),e}function Y5(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","file"],yx(n));const i=l(t,["config"]);return i!=null&&u(e,["config"],i),e}function K5(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","file"],yx(n));const i=l(t,["config"]);return i!=null&&u(e,["config"],i),e}function J5(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const i=l(t,["message"]);i!=null&&u(e,["message"],i);const r=l(t,["code"]);return r!=null&&u(e,["code"],r),e}function sp(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["displayName"]);i!=null&&u(e,["displayName"],i);const r=l(t,["mimeType"]);r!=null&&u(e,["mimeType"],r);const s=l(t,["sizeBytes"]);s!=null&&u(e,["sizeBytes"],s);const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const a=l(t,["expirationTime"]);a!=null&&u(e,["expirationTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const f=l(t,["sha256Hash"]);f!=null&&u(e,["sha256Hash"],f);const d=l(t,["uri"]);d!=null&&u(e,["uri"],d);const m=l(t,["downloadUri"]);m!=null&&u(e,["downloadUri"],m);const p=l(t,["state"]);p!=null&&u(e,["state"],p);const g=l(t,["source"]);g!=null&&u(e,["source"],g);const E=l(t,["videoMetadata"]);E!=null&&u(e,["videoMetadata"],E);const x=l(t,["error"]);return x!=null&&u(e,["error"],J5(x)),e}function Q5(t){const e={},n=l(t,["nextPageToken"]);n!=null&&u(e,["nextPageToken"],n);const i=l(t,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>sp(s))),u(e,["files"],r)}return e}function X5(){return{}}function j5(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W5 extends qs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new cu(Ns.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>sp(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=q5(e);return s=ie("files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const f=Q5(c),d=new gk;return Object.assign(d,f),d})}}async createInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$5(e);return s=ie("upload/v1beta/files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(()=>{const c=X5(),f=new yk;return Object.assign(f,c),f})}}async get(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Y5(e);return s=ie("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>sp(c))}}async delete(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=K5(e);return s=ie("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(()=>{const c=j5(),f=new vk;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z5(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function eL(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function bx(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],Z5(n)),e}function tL(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],eL(n)),e}function nL(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const i=l(t,["voiceConfig"]);return i!=null&&u(e,["voiceConfig"],bx(i)),e}function iL(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>nL(r))),u(e,["speakerVoiceConfigs"],i)}return e}function rL(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],bx(n));const i=l(t,["multiSpeakerVoiceConfig"]);i!=null&&u(e,["multiSpeakerVoiceConfig"],iL(i));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function sL(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&u(e,["voiceConfig"],tL(n)),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function oL(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const r=l(t,["startOffset"]);return r!=null&&u(e,["startOffset"],r),e}function aL(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const r=l(t,["startOffset"]);return r!=null&&u(e,["startOffset"],r),e}function lL(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function uL(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["data"]);i!=null&&u(e,["data"],i);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function cL(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function fL(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function dL(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],oL(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const r=l(t,["inlineData"]);r!=null&&u(e,["inlineData"],lL(r));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],cL(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function hL(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],aL(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const r=l(t,["inlineData"]);r!=null&&u(e,["inlineData"],uL(r));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],fL(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function mL(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>dL(s))),u(e,["parts"],r)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function pL(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>hL(s))),u(e,["parts"],r)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function gL(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const s=l(t,["parameters"]);s!=null&&u(e,["parameters"],s);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function yL(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const r=l(t,["parameters"]);r!=null&&u(e,["parameters"],r);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const o=l(t,["response"]);o!=null&&u(e,["response"],o);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function vL(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const i=l(t,["endTime"]);return i!=null&&u(e,["endTime"],i),e}function _L(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const i=l(t,["endTime"]);return i!=null&&u(e,["endTime"],i),e}function TL(t){const e={},n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],vL(n)),e}function EL(t){const e={},n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],_L(n)),e}function CL(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["dynamicThreshold"]);return i!=null&&u(e,["dynamicThreshold"],i),e}function AL(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["dynamicThreshold"]);return i!=null&&u(e,["dynamicThreshold"],i),e}function SL(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],CL(n)),e}function wL(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],AL(n)),e}function xL(){return{}}function bL(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function IL(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],bL(n));const i=l(t,["authType"]);i!=null&&u(e,["authType"],i);const r=l(t,["googleServiceAccountConfig"]);r!=null&&u(e,["googleServiceAccountConfig"],r);const s=l(t,["httpBasicAuthConfig"]);s!=null&&u(e,["httpBasicAuthConfig"],s);const o=l(t,["oauthConfig"]);o!=null&&u(e,["oauthConfig"],o);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function RL(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],IL(n)),e}function NL(){return{}}function ML(){return{}}function DL(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>gL(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],TL(i));const r=l(t,["googleSearchRetrieval"]);if(r!=null&&u(e,["googleSearchRetrieval"],SL(r)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],NL());const o=l(t,["codeExecution"]);o!=null&&u(e,["codeExecution"],o);const a=l(t,["computerUse"]);return a!=null&&u(e,["computerUse"],a),e}function PL(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>yL(p))),u(e,["functionDeclarations"],m)}const i=l(t,["retrieval"]);i!=null&&u(e,["retrieval"],i);const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],EL(r));const s=l(t,["googleSearchRetrieval"]);s!=null&&u(e,["googleSearchRetrieval"],wL(s)),l(t,["enterpriseWebSearch"])!=null&&u(e,["enterpriseWebSearch"],xL());const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],RL(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],ML());const f=l(t,["codeExecution"]);f!=null&&u(e,["codeExecution"],f);const d=l(t,["computerUse"]);return d!=null&&u(e,["computerUse"],d),e}function VL(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function kL(t){const e={},n=l(t,["handle"]);n!=null&&u(e,["handle"],n);const i=l(t,["transparent"]);return i!=null&&u(e,["transparent"],i),e}function gE(){return{}}function yE(){return{}}function UL(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const i=l(t,["startOfSpeechSensitivity"]);i!=null&&u(e,["startOfSpeechSensitivity"],i);const r=l(t,["endOfSpeechSensitivity"]);r!=null&&u(e,["endOfSpeechSensitivity"],r);const s=l(t,["prefixPaddingMs"]);s!=null&&u(e,["prefixPaddingMs"],s);const o=l(t,["silenceDurationMs"]);return o!=null&&u(e,["silenceDurationMs"],o),e}function LL(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const i=l(t,["startOfSpeechSensitivity"]);i!=null&&u(e,["startOfSpeechSensitivity"],i);const r=l(t,["endOfSpeechSensitivity"]);r!=null&&u(e,["endOfSpeechSensitivity"],r);const s=l(t,["prefixPaddingMs"]);s!=null&&u(e,["prefixPaddingMs"],s);const o=l(t,["silenceDurationMs"]);return o!=null&&u(e,["silenceDurationMs"],o),e}function OL(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],UL(n));const i=l(t,["activityHandling"]);i!=null&&u(e,["activityHandling"],i);const r=l(t,["turnCoverage"]);return r!=null&&u(e,["turnCoverage"],r),e}function FL(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],LL(n));const i=l(t,["activityHandling"]);i!=null&&u(e,["activityHandling"],i);const r=l(t,["turnCoverage"]);return r!=null&&u(e,["turnCoverage"],r),e}function zL(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function BL(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function qL(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const i=l(t,["slidingWindow"]);return i!=null&&u(e,["slidingWindow"],zL(i)),e}function GL(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const i=l(t,["slidingWindow"]);return i!=null&&u(e,["slidingWindow"],BL(i)),e}function HL(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function $L(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function YL(t,e){const n={},i=l(t,["generationConfig"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig"],i);const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig","responseModalities"],r);const s=l(t,["temperature"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","temperature"],s);const o=l(t,["topP"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","topP"],o);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const f=l(t,["mediaResolution"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","mediaResolution"],f);const d=l(t,["seed"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","seed"],d);const m=l(t,["speechConfig"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","speechConfig"],rL(yy(m)));const p=l(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=l(t,["systemInstruction"]);e!==void 0&&g!=null&&u(e,["setup","systemInstruction"],mL(Kt(g)));const E=l(t,["tools"]);if(e!==void 0&&E!=null){let O=ca(E);Array.isArray(O)&&(O=O.map(L=>DL(ua(L)))),u(e,["setup","tools"],O)}const x=l(t,["sessionResumption"]);e!==void 0&&x!=null&&u(e,["setup","sessionResumption"],VL(x));const P=l(t,["inputAudioTranscription"]);e!==void 0&&P!=null&&u(e,["setup","inputAudioTranscription"],gE());const A=l(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&u(e,["setup","outputAudioTranscription"],gE());const w=l(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&u(e,["setup","realtimeInputConfig"],OL(w));const N=l(t,["contextWindowCompression"]);e!==void 0&&N!=null&&u(e,["setup","contextWindowCompression"],qL(N));const D=l(t,["proactivity"]);return e!==void 0&&D!=null&&u(e,["setup","proactivity"],HL(D)),n}function KL(t,e){const n={},i=l(t,["generationConfig"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig"],i);const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig","responseModalities"],r);const s=l(t,["temperature"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","temperature"],s);const o=l(t,["topP"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","topP"],o);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const f=l(t,["mediaResolution"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","mediaResolution"],f);const d=l(t,["seed"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","seed"],d);const m=l(t,["speechConfig"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","speechConfig"],sL(yy(m)));const p=l(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=l(t,["systemInstruction"]);e!==void 0&&g!=null&&u(e,["setup","systemInstruction"],pL(Kt(g)));const E=l(t,["tools"]);if(e!==void 0&&E!=null){let O=ca(E);Array.isArray(O)&&(O=O.map(L=>PL(ua(L)))),u(e,["setup","tools"],O)}const x=l(t,["sessionResumption"]);e!==void 0&&x!=null&&u(e,["setup","sessionResumption"],kL(x));const P=l(t,["inputAudioTranscription"]);e!==void 0&&P!=null&&u(e,["setup","inputAudioTranscription"],yE());const A=l(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&u(e,["setup","outputAudioTranscription"],yE());const w=l(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&u(e,["setup","realtimeInputConfig"],FL(w));const N=l(t,["contextWindowCompression"]);e!==void 0&&N!=null&&u(e,["setup","contextWindowCompression"],GL(N));const D=l(t,["proactivity"]);return e!==void 0&&D!=null&&u(e,["setup","proactivity"],$L(D)),n}function JL(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["setup","model"],De(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],YL(r,n)),n}function QL(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["setup","model"],De(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],KL(r,n)),n}function XL(){return{}}function jL(){return{}}function WL(){return{}}function ZL(){return{}}function e6(t){const e={},n=l(t,["media"]);n!=null&&u(e,["mediaChunks"],fx(n));const i=l(t,["audio"]);i!=null&&u(e,["audio"],hx(i));const r=l(t,["audioStreamEnd"]);r!=null&&u(e,["audioStreamEnd"],r);const s=l(t,["video"]);s!=null&&u(e,["video"],dx(s));const o=l(t,["text"]);return o!=null&&u(e,["text"],o),l(t,["activityStart"])!=null&&u(e,["activityStart"],XL()),l(t,["activityEnd"])!=null&&u(e,["activityEnd"],WL()),e}function t6(t){const e={},n=l(t,["media"]);n!=null&&u(e,["mediaChunks"],fx(n));const i=l(t,["audio"]);i!=null&&u(e,["audio"],hx(i));const r=l(t,["audioStreamEnd"]);r!=null&&u(e,["audioStreamEnd"],r);const s=l(t,["video"]);s!=null&&u(e,["video"],dx(s));const o=l(t,["text"]);return o!=null&&u(e,["text"],o),l(t,["activityStart"])!=null&&u(e,["activityStart"],jL()),l(t,["activityEnd"])!=null&&u(e,["activityEnd"],ZL()),e}function Ix(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const i=l(t,["weight"]);return i!=null&&u(e,["weight"],i),e}function n6(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Ix(r))),u(e,["weightedPrompts"],i)}return e}function Rx(t){const e={},n=l(t,["temperature"]);n!=null&&u(e,["temperature"],n);const i=l(t,["topK"]);i!=null&&u(e,["topK"],i);const r=l(t,["seed"]);r!=null&&u(e,["seed"],r);const s=l(t,["guidance"]);s!=null&&u(e,["guidance"],s);const o=l(t,["bpm"]);o!=null&&u(e,["bpm"],o);const a=l(t,["density"]);a!=null&&u(e,["density"],a);const c=l(t,["brightness"]);c!=null&&u(e,["brightness"],c);const f=l(t,["scale"]);f!=null&&u(e,["scale"],f);const d=l(t,["muteBass"]);d!=null&&u(e,["muteBass"],d);const m=l(t,["muteDrums"]);m!=null&&u(e,["muteDrums"],m);const p=l(t,["onlyBassAndDrums"]);return p!=null&&u(e,["onlyBassAndDrums"],p),e}function i6(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&u(e,["musicGenerationConfig"],Rx(n)),e}function Nx(t){const e={},n=l(t,["model"]);return n!=null&&u(e,["model"],n),e}function Mx(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Ix(r))),u(e,["weightedPrompts"],i)}return e}function op(t){const e={},n=l(t,["setup"]);n!=null&&u(e,["setup"],Nx(n));const i=l(t,["clientContent"]);i!=null&&u(e,["clientContent"],Mx(i));const r=l(t,["musicGenerationConfig"]);r!=null&&u(e,["musicGenerationConfig"],Rx(r));const s=l(t,["playbackControl"]);return s!=null&&u(e,["playbackControl"],s),e}function r6(){return{}}function s6(t){const e={},n=l(t,["sessionId"]);return n!=null&&u(e,["sessionId"],n),e}function o6(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const r=l(t,["startOffset"]);return r!=null&&u(e,["startOffset"],r),e}function a6(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const r=l(t,["startOffset"]);return r!=null&&u(e,["startOffset"],r),e}function l6(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function u6(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["data"]);i!=null&&u(e,["data"],i);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function c6(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function f6(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function d6(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],o6(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const r=l(t,["inlineData"]);r!=null&&u(e,["inlineData"],l6(r));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],c6(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function h6(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],a6(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const r=l(t,["inlineData"]);r!=null&&u(e,["inlineData"],u6(r));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],f6(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function m6(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>d6(s))),u(e,["parts"],r)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function p6(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>h6(s))),u(e,["parts"],r)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function vE(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const i=l(t,["finished"]);return i!=null&&u(e,["finished"],i),e}function _E(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const i=l(t,["finished"]);return i!=null&&u(e,["finished"],i),e}function g6(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const i=l(t,["urlRetrievalStatus"]);return i!=null&&u(e,["urlRetrievalStatus"],i),e}function y6(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>g6(r))),u(e,["urlMetadata"],i)}return e}function v6(t){const e={},n=l(t,["modelTurn"]);n!=null&&u(e,["modelTurn"],m6(n));const i=l(t,["turnComplete"]);i!=null&&u(e,["turnComplete"],i);const r=l(t,["interrupted"]);r!=null&&u(e,["interrupted"],r);const s=l(t,["groundingMetadata"]);s!=null&&u(e,["groundingMetadata"],s);const o=l(t,["generationComplete"]);o!=null&&u(e,["generationComplete"],o);const a=l(t,["inputTranscription"]);a!=null&&u(e,["inputTranscription"],vE(a));const c=l(t,["outputTranscription"]);c!=null&&u(e,["outputTranscription"],vE(c));const f=l(t,["urlContextMetadata"]);return f!=null&&u(e,["urlContextMetadata"],y6(f)),e}function _6(t){const e={},n=l(t,["modelTurn"]);n!=null&&u(e,["modelTurn"],p6(n));const i=l(t,["turnComplete"]);i!=null&&u(e,["turnComplete"],i);const r=l(t,["interrupted"]);r!=null&&u(e,["interrupted"],r);const s=l(t,["groundingMetadata"]);s!=null&&u(e,["groundingMetadata"],s);const o=l(t,["generationComplete"]);o!=null&&u(e,["generationComplete"],o);const a=l(t,["inputTranscription"]);a!=null&&u(e,["inputTranscription"],_E(a));const c=l(t,["outputTranscription"]);return c!=null&&u(e,["outputTranscription"],_E(c)),e}function T6(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const i=l(t,["args"]);i!=null&&u(e,["args"],i);const r=l(t,["name"]);return r!=null&&u(e,["name"],r),e}function E6(t){const e={},n=l(t,["args"]);n!=null&&u(e,["args"],n);const i=l(t,["name"]);return i!=null&&u(e,["name"],i),e}function C6(t){const e={},n=l(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>T6(r))),u(e,["functionCalls"],i)}return e}function A6(t){const e={},n=l(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>E6(r))),u(e,["functionCalls"],i)}return e}function S6(t){const e={},n=l(t,["ids"]);return n!=null&&u(e,["ids"],n),e}function w6(t){const e={},n=l(t,["ids"]);return n!=null&&u(e,["ids"],n),e}function Ju(t){const e={},n=l(t,["modality"]);n!=null&&u(e,["modality"],n);const i=l(t,["tokenCount"]);return i!=null&&u(e,["tokenCount"],i),e}function Qu(t){const e={},n=l(t,["modality"]);n!=null&&u(e,["modality"],n);const i=l(t,["tokenCount"]);return i!=null&&u(e,["tokenCount"],i),e}function x6(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);const i=l(t,["cachedContentTokenCount"]);i!=null&&u(e,["cachedContentTokenCount"],i);const r=l(t,["responseTokenCount"]);r!=null&&u(e,["responseTokenCount"],r);const s=l(t,["toolUsePromptTokenCount"]);s!=null&&u(e,["toolUsePromptTokenCount"],s);const o=l(t,["thoughtsTokenCount"]);o!=null&&u(e,["thoughtsTokenCount"],o);const a=l(t,["totalTokenCount"]);a!=null&&u(e,["totalTokenCount"],a);const c=l(t,["promptTokensDetails"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>Ju(g))),u(e,["promptTokensDetails"],p)}const f=l(t,["cacheTokensDetails"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>Ju(g))),u(e,["cacheTokensDetails"],p)}const d=l(t,["responseTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(g=>Ju(g))),u(e,["responseTokensDetails"],p)}const m=l(t,["toolUsePromptTokensDetails"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(g=>Ju(g))),u(e,["toolUsePromptTokensDetails"],p)}return e}function b6(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);const i=l(t,["cachedContentTokenCount"]);i!=null&&u(e,["cachedContentTokenCount"],i);const r=l(t,["candidatesTokenCount"]);r!=null&&u(e,["responseTokenCount"],r);const s=l(t,["toolUsePromptTokenCount"]);s!=null&&u(e,["toolUsePromptTokenCount"],s);const o=l(t,["thoughtsTokenCount"]);o!=null&&u(e,["thoughtsTokenCount"],o);const a=l(t,["totalTokenCount"]);a!=null&&u(e,["totalTokenCount"],a);const c=l(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(E=>Qu(E))),u(e,["promptTokensDetails"],g)}const f=l(t,["cacheTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(E=>Qu(E))),u(e,["cacheTokensDetails"],g)}const d=l(t,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(E=>Qu(E))),u(e,["responseTokensDetails"],g)}const m=l(t,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(E=>Qu(E))),u(e,["toolUsePromptTokensDetails"],g)}const p=l(t,["trafficType"]);return p!=null&&u(e,["trafficType"],p),e}function I6(t){const e={},n=l(t,["timeLeft"]);return n!=null&&u(e,["timeLeft"],n),e}function R6(t){const e={},n=l(t,["timeLeft"]);return n!=null&&u(e,["timeLeft"],n),e}function N6(t){const e={},n=l(t,["newHandle"]);n!=null&&u(e,["newHandle"],n);const i=l(t,["resumable"]);i!=null&&u(e,["resumable"],i);const r=l(t,["lastConsumedClientMessageIndex"]);return r!=null&&u(e,["lastConsumedClientMessageIndex"],r),e}function M6(t){const e={},n=l(t,["newHandle"]);n!=null&&u(e,["newHandle"],n);const i=l(t,["resumable"]);i!=null&&u(e,["resumable"],i);const r=l(t,["lastConsumedClientMessageIndex"]);return r!=null&&u(e,["lastConsumedClientMessageIndex"],r),e}function D6(t){const e={};l(t,["setupComplete"])!=null&&u(e,["setupComplete"],r6());const i=l(t,["serverContent"]);i!=null&&u(e,["serverContent"],v6(i));const r=l(t,["toolCall"]);r!=null&&u(e,["toolCall"],C6(r));const s=l(t,["toolCallCancellation"]);s!=null&&u(e,["toolCallCancellation"],S6(s));const o=l(t,["usageMetadata"]);o!=null&&u(e,["usageMetadata"],x6(o));const a=l(t,["goAway"]);a!=null&&u(e,["goAway"],I6(a));const c=l(t,["sessionResumptionUpdate"]);return c!=null&&u(e,["sessionResumptionUpdate"],N6(c)),e}function P6(t){const e={},n=l(t,["setupComplete"]);n!=null&&u(e,["setupComplete"],s6(n));const i=l(t,["serverContent"]);i!=null&&u(e,["serverContent"],_6(i));const r=l(t,["toolCall"]);r!=null&&u(e,["toolCall"],A6(r));const s=l(t,["toolCallCancellation"]);s!=null&&u(e,["toolCallCancellation"],w6(s));const o=l(t,["usageMetadata"]);o!=null&&u(e,["usageMetadata"],b6(o));const a=l(t,["goAway"]);a!=null&&u(e,["goAway"],R6(a));const c=l(t,["sessionResumptionUpdate"]);return c!=null&&u(e,["sessionResumptionUpdate"],M6(c)),e}function V6(){return{}}function k6(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const i=l(t,["weight"]);return i!=null&&u(e,["weight"],i),e}function U6(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>k6(r))),u(e,["weightedPrompts"],i)}return e}function L6(t){const e={},n=l(t,["temperature"]);n!=null&&u(e,["temperature"],n);const i=l(t,["topK"]);i!=null&&u(e,["topK"],i);const r=l(t,["seed"]);r!=null&&u(e,["seed"],r);const s=l(t,["guidance"]);s!=null&&u(e,["guidance"],s);const o=l(t,["bpm"]);o!=null&&u(e,["bpm"],o);const a=l(t,["density"]);a!=null&&u(e,["density"],a);const c=l(t,["brightness"]);c!=null&&u(e,["brightness"],c);const f=l(t,["scale"]);f!=null&&u(e,["scale"],f);const d=l(t,["muteBass"]);d!=null&&u(e,["muteBass"],d);const m=l(t,["muteDrums"]);m!=null&&u(e,["muteDrums"],m);const p=l(t,["onlyBassAndDrums"]);return p!=null&&u(e,["onlyBassAndDrums"],p),e}function O6(t){const e={},n=l(t,["clientContent"]);n!=null&&u(e,["clientContent"],U6(n));const i=l(t,["musicGenerationConfig"]);return i!=null&&u(e,["musicGenerationConfig"],L6(i)),e}function F6(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);i!=null&&u(e,["mimeType"],i);const r=l(t,["sourceMetadata"]);return r!=null&&u(e,["sourceMetadata"],O6(r)),e}function z6(t){const e={},n=l(t,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>F6(r))),u(e,["audioChunks"],i)}return e}function B6(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const i=l(t,["filteredReason"]);return i!=null&&u(e,["filteredReason"],i),e}function q6(t){const e={};l(t,["setupComplete"])!=null&&u(e,["setupComplete"],V6());const i=l(t,["serverContent"]);i!=null&&u(e,["serverContent"],z6(i));const r=l(t,["filteredPrompt"]);return r!=null&&u(e,["filteredPrompt"],B6(r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G6(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const r=l(t,["startOffset"]);return r!=null&&u(e,["startOffset"],r),e}function H6(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function $6(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function Y6(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],G6(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const r=l(t,["inlineData"]);r!=null&&u(e,["inlineData"],H6(r));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],$6(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function vd(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Y6(s))),u(e,["parts"],r)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function K6(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const i=l(t,["default"]);i!=null&&u(e,["default"],i);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const s=l(t,["enum"]);s!=null&&u(e,["enum"],s);const o=l(t,["example"]);o!=null&&u(e,["example"],o);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const f=l(t,["maxItems"]);f!=null&&u(e,["maxItems"],f);const d=l(t,["maxLength"]);d!=null&&u(e,["maxLength"],d);const m=l(t,["maxProperties"]);m!=null&&u(e,["maxProperties"],m);const p=l(t,["maximum"]);p!=null&&u(e,["maximum"],p);const g=l(t,["minItems"]);g!=null&&u(e,["minItems"],g);const E=l(t,["minLength"]);E!=null&&u(e,["minLength"],E);const x=l(t,["minProperties"]);x!=null&&u(e,["minProperties"],x);const P=l(t,["minimum"]);P!=null&&u(e,["minimum"],P);const A=l(t,["nullable"]);A!=null&&u(e,["nullable"],A);const w=l(t,["pattern"]);w!=null&&u(e,["pattern"],w);const N=l(t,["properties"]);N!=null&&u(e,["properties"],N);const D=l(t,["propertyOrdering"]);D!=null&&u(e,["propertyOrdering"],D);const O=l(t,["required"]);O!=null&&u(e,["required"],O);const L=l(t,["title"]);L!=null&&u(e,["title"],L);const b=l(t,["type"]);return b!=null&&u(e,["type"],b),e}function J6(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&u(e,["category"],n);const i=l(t,["threshold"]);return i!=null&&u(e,["threshold"],i),e}function Q6(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const s=l(t,["parameters"]);s!=null&&u(e,["parameters"],s);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function X6(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const i=l(t,["endTime"]);return i!=null&&u(e,["endTime"],i),e}function j6(t){const e={},n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],X6(n)),e}function W6(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["dynamicThreshold"]);return i!=null&&u(e,["dynamicThreshold"],i),e}function Z6(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],W6(n)),e}function eO(){return{}}function tO(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>Q6(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],j6(i));const r=l(t,["googleSearchRetrieval"]);if(r!=null&&u(e,["googleSearchRetrieval"],Z6(r)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],eO());const o=l(t,["codeExecution"]);o!=null&&u(e,["codeExecution"],o);const a=l(t,["computerUse"]);return a!=null&&u(e,["computerUse"],a),e}function nO(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["allowedFunctionNames"]);return i!=null&&u(e,["allowedFunctionNames"],i),e}function iO(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const i=l(t,["longitude"]);return i!=null&&u(e,["longitude"],i),e}function rO(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],iO(n));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function sO(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],nO(n));const i=l(t,["retrievalConfig"]);return i!=null&&u(e,["retrievalConfig"],rO(i)),e}function oO(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function Dx(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],oO(n)),e}function aO(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const i=l(t,["voiceConfig"]);return i!=null&&u(e,["voiceConfig"],Dx(i)),e}function lO(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>aO(r))),u(e,["speakerVoiceConfigs"],i)}return e}function uO(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],Dx(n));const i=l(t,["multiSpeakerVoiceConfig"]);i!=null&&u(e,["multiSpeakerVoiceConfig"],lO(i));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function cO(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const i=l(t,["thinkingBudget"]);return i!=null&&u(e,["thinkingBudget"],i),e}function fO(t,e,n){const i={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&u(n,["systemInstruction"],vd(Kt(r)));const s=l(e,["temperature"]);s!=null&&u(i,["temperature"],s);const o=l(e,["topP"]);o!=null&&u(i,["topP"],o);const a=l(e,["topK"]);a!=null&&u(i,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(i,["candidateCount"],c);const f=l(e,["maxOutputTokens"]);f!=null&&u(i,["maxOutputTokens"],f);const d=l(e,["stopSequences"]);d!=null&&u(i,["stopSequences"],d);const m=l(e,["responseLogprobs"]);m!=null&&u(i,["responseLogprobs"],m);const p=l(e,["logprobs"]);p!=null&&u(i,["logprobs"],p);const g=l(e,["presencePenalty"]);g!=null&&u(i,["presencePenalty"],g);const E=l(e,["frequencyPenalty"]);E!=null&&u(i,["frequencyPenalty"],E);const x=l(e,["seed"]);x!=null&&u(i,["seed"],x);const P=l(e,["responseMimeType"]);P!=null&&u(i,["responseMimeType"],P);const A=l(e,["responseSchema"]);A!=null&&u(i,["responseSchema"],K6(py(A)));const w=l(e,["responseJsonSchema"]);if(w!=null&&u(i,["responseJsonSchema"],w),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=l(e,["safetySettings"]);if(n!==void 0&&N!=null){let I=N;Array.isArray(I)&&(I=I.map(M=>J6(M))),u(n,["safetySettings"],I)}const D=l(e,["tools"]);if(n!==void 0&&D!=null){let I=ca(D);Array.isArray(I)&&(I=I.map(M=>tO(ua(M)))),u(n,["tools"],I)}const O=l(e,["toolConfig"]);if(n!==void 0&&O!=null&&u(n,["toolConfig"],sO(O)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=l(e,["cachedContent"]);n!==void 0&&L!=null&&u(n,["cachedContent"],ji(t,L));const b=l(e,["responseModalities"]);b!=null&&u(i,["responseModalities"],b);const _=l(e,["mediaResolution"]);_!=null&&u(i,["mediaResolution"],_);const T=l(e,["speechConfig"]);if(T!=null&&u(i,["speechConfig"],uO(gy(T))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const S=l(e,["thinkingConfig"]);return S!=null&&u(i,["thinkingConfig"],cO(S)),i}function TE(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],De(t,i));const r=l(e,["contents"]);if(r!=null){let o=Bn(r);Array.isArray(o)&&(o=o.map(a=>vd(a))),u(n,["contents"],o)}const s=l(e,["config"]);return s!=null&&u(n,["generationConfig"],fO(t,s,n)),n}function dO(t,e){const n={},i=l(t,["taskType"]);e!==void 0&&i!=null&&u(e,["requests[]","taskType"],i);const r=l(t,["title"]);e!==void 0&&r!=null&&u(e,["requests[]","title"],r);const s=l(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&u(e,["requests[]","outputDimensionality"],s),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function hO(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],De(t,i));const r=l(e,["contents"]);r!=null&&u(n,["requests[]","content"],px(t,r));const s=l(e,["config"]);s!=null&&u(n,["config"],dO(s,n));const o=l(e,["model"]);return o!==void 0&&u(n,["requests[]","model"],De(t,o)),n}function mO(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);const r=l(t,["aspectRatio"]);e!==void 0&&r!=null&&u(e,["parameters","aspectRatio"],r);const s=l(t,["guidanceScale"]);if(e!==void 0&&s!=null&&u(e,["parameters","guidanceScale"],s),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=l(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&u(e,["parameters","safetySetting"],o);const a=l(t,["personGeneration"]);e!==void 0&&a!=null&&u(e,["parameters","personGeneration"],a);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&u(e,["parameters","includeSafetyAttributes"],c);const f=l(t,["includeRaiReason"]);e!==void 0&&f!=null&&u(e,["parameters","includeRaiReason"],f);const d=l(t,["language"]);e!==void 0&&d!=null&&u(e,["parameters","language"],d);const m=l(t,["outputMimeType"]);e!==void 0&&m!=null&&u(e,["parameters","outputOptions","mimeType"],m);const p=l(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&u(e,["parameters","outputOptions","compressionQuality"],p),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function pO(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],De(t,i));const r=l(e,["prompt"]);r!=null&&u(n,["instances[0]","prompt"],r);const s=l(e,["config"]);return s!=null&&u(n,["config"],mO(s,n)),n}function gO(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","name"],De(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],r),n}function yO(t,e,n){const i={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&u(n,["_query","pageSize"],r);const s=l(e,["pageToken"]);n!==void 0&&s!=null&&u(n,["_query","pageToken"],s);const o=l(e,["filter"]);n!==void 0&&o!=null&&u(n,["_query","filter"],o);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],vx(t,a)),i}function vO(t,e){const n={},i=l(e,["config"]);return i!=null&&u(n,["config"],yO(t,i,n)),n}function _O(t,e){const n={},i=l(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const r=l(t,["description"]);e!==void 0&&r!=null&&u(e,["description"],r);const s=l(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&u(e,["defaultCheckpointId"],s),n}function TO(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","name"],De(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],_O(r,n)),n}function EO(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","name"],De(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],r),n}function CO(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function AO(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],De(t,i));const r=l(e,["contents"]);if(r!=null){let o=Bn(r);Array.isArray(o)&&(o=o.map(a=>vd(a))),u(n,["contents"],o)}const s=l(e,["config"]);return s!=null&&u(n,["config"],CO(s)),n}function SO(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&u(e,["bytesBase64Encoded"],Wi(n));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function wO(t,e){const n={},i=l(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=l(t,["durationSeconds"]);if(e!==void 0&&r!=null&&u(e,["parameters","durationSeconds"],r),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["aspectRatio"]);if(e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s),l(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const o=l(t,["personGeneration"]);if(e!==void 0&&o!=null&&u(e,["parameters","personGeneration"],o),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=l(t,["negativePrompt"]);e!==void 0&&a!=null&&u(e,["parameters","negativePrompt"],a);const c=l(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&u(e,["parameters","enhancePrompt"],c),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(l(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function xO(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],De(t,i));const r=l(e,["prompt"]);r!=null&&u(n,["instances[0]","prompt"],r);const s=l(e,["image"]);if(s!=null&&u(n,["instances[0]","image"],SO(s)),l(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const o=l(e,["config"]);return o!=null&&u(n,["config"],wO(o,n)),n}function bO(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const r=l(t,["startOffset"]);return r!=null&&u(e,["startOffset"],r),e}function IO(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["data"]);i!=null&&u(e,["data"],i);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function RO(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function NO(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],bO(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const r=l(t,["inlineData"]);r!=null&&u(e,["inlineData"],IO(r));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],RO(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function da(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>NO(s))),u(e,["parts"],r)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function MO(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const i=l(t,["default"]);i!=null&&u(e,["default"],i);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const s=l(t,["enum"]);s!=null&&u(e,["enum"],s);const o=l(t,["example"]);o!=null&&u(e,["example"],o);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const f=l(t,["maxItems"]);f!=null&&u(e,["maxItems"],f);const d=l(t,["maxLength"]);d!=null&&u(e,["maxLength"],d);const m=l(t,["maxProperties"]);m!=null&&u(e,["maxProperties"],m);const p=l(t,["maximum"]);p!=null&&u(e,["maximum"],p);const g=l(t,["minItems"]);g!=null&&u(e,["minItems"],g);const E=l(t,["minLength"]);E!=null&&u(e,["minLength"],E);const x=l(t,["minProperties"]);x!=null&&u(e,["minProperties"],x);const P=l(t,["minimum"]);P!=null&&u(e,["minimum"],P);const A=l(t,["nullable"]);A!=null&&u(e,["nullable"],A);const w=l(t,["pattern"]);w!=null&&u(e,["pattern"],w);const N=l(t,["properties"]);N!=null&&u(e,["properties"],N);const D=l(t,["propertyOrdering"]);D!=null&&u(e,["propertyOrdering"],D);const O=l(t,["required"]);O!=null&&u(e,["required"],O);const L=l(t,["title"]);L!=null&&u(e,["title"],L);const b=l(t,["type"]);return b!=null&&u(e,["type"],b),e}function DO(t){const e={},n=l(t,["featureSelectionPreference"]);return n!=null&&u(e,["featureSelectionPreference"],n),e}function PO(t){const e={},n=l(t,["method"]);n!=null&&u(e,["method"],n);const i=l(t,["category"]);i!=null&&u(e,["category"],i);const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function VO(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const r=l(t,["parameters"]);r!=null&&u(e,["parameters"],r);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const o=l(t,["response"]);o!=null&&u(e,["response"],o);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function kO(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const i=l(t,["endTime"]);return i!=null&&u(e,["endTime"],i),e}function UO(t){const e={},n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],kO(n)),e}function LO(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["dynamicThreshold"]);return i!=null&&u(e,["dynamicThreshold"],i),e}function OO(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],LO(n)),e}function FO(){return{}}function zO(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function BO(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],zO(n));const i=l(t,["authType"]);i!=null&&u(e,["authType"],i);const r=l(t,["googleServiceAccountConfig"]);r!=null&&u(e,["googleServiceAccountConfig"],r);const s=l(t,["httpBasicAuthConfig"]);s!=null&&u(e,["httpBasicAuthConfig"],s);const o=l(t,["oauthConfig"]);o!=null&&u(e,["oauthConfig"],o);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function qO(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],BO(n)),e}function GO(){return{}}function Px(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>VO(p))),u(e,["functionDeclarations"],m)}const i=l(t,["retrieval"]);i!=null&&u(e,["retrieval"],i);const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],UO(r));const s=l(t,["googleSearchRetrieval"]);s!=null&&u(e,["googleSearchRetrieval"],OO(s)),l(t,["enterpriseWebSearch"])!=null&&u(e,["enterpriseWebSearch"],FO());const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],qO(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],GO());const f=l(t,["codeExecution"]);f!=null&&u(e,["codeExecution"],f);const d=l(t,["computerUse"]);return d!=null&&u(e,["computerUse"],d),e}function HO(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["allowedFunctionNames"]);return i!=null&&u(e,["allowedFunctionNames"],i),e}function $O(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const i=l(t,["longitude"]);return i!=null&&u(e,["longitude"],i),e}function YO(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],$O(n));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function KO(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],HO(n));const i=l(t,["retrievalConfig"]);return i!=null&&u(e,["retrievalConfig"],YO(i)),e}function JO(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function QO(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],JO(n)),e}function XO(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&u(e,["voiceConfig"],QO(n)),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function jO(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const i=l(t,["thinkingBudget"]);return i!=null&&u(e,["thinkingBudget"],i),e}function WO(t,e,n){const i={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&u(n,["systemInstruction"],da(Kt(r)));const s=l(e,["temperature"]);s!=null&&u(i,["temperature"],s);const o=l(e,["topP"]);o!=null&&u(i,["topP"],o);const a=l(e,["topK"]);a!=null&&u(i,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(i,["candidateCount"],c);const f=l(e,["maxOutputTokens"]);f!=null&&u(i,["maxOutputTokens"],f);const d=l(e,["stopSequences"]);d!=null&&u(i,["stopSequences"],d);const m=l(e,["responseLogprobs"]);m!=null&&u(i,["responseLogprobs"],m);const p=l(e,["logprobs"]);p!=null&&u(i,["logprobs"],p);const g=l(e,["presencePenalty"]);g!=null&&u(i,["presencePenalty"],g);const E=l(e,["frequencyPenalty"]);E!=null&&u(i,["frequencyPenalty"],E);const x=l(e,["seed"]);x!=null&&u(i,["seed"],x);const P=l(e,["responseMimeType"]);P!=null&&u(i,["responseMimeType"],P);const A=l(e,["responseSchema"]);A!=null&&u(i,["responseSchema"],MO(py(A)));const w=l(e,["responseJsonSchema"]);w!=null&&u(i,["responseJsonSchema"],w);const N=l(e,["routingConfig"]);N!=null&&u(i,["routingConfig"],N);const D=l(e,["modelSelectionConfig"]);D!=null&&u(i,["modelConfig"],DO(D));const O=l(e,["safetySettings"]);if(n!==void 0&&O!=null){let G=O;Array.isArray(G)&&(G=G.map(V=>PO(V))),u(n,["safetySettings"],G)}const L=l(e,["tools"]);if(n!==void 0&&L!=null){let G=ca(L);Array.isArray(G)&&(G=G.map(V=>Px(ua(V)))),u(n,["tools"],G)}const b=l(e,["toolConfig"]);n!==void 0&&b!=null&&u(n,["toolConfig"],KO(b));const _=l(e,["labels"]);n!==void 0&&_!=null&&u(n,["labels"],_);const T=l(e,["cachedContent"]);n!==void 0&&T!=null&&u(n,["cachedContent"],ji(t,T));const S=l(e,["responseModalities"]);S!=null&&u(i,["responseModalities"],S);const I=l(e,["mediaResolution"]);I!=null&&u(i,["mediaResolution"],I);const M=l(e,["speechConfig"]);M!=null&&u(i,["speechConfig"],XO(gy(M)));const R=l(e,["audioTimestamp"]);R!=null&&u(i,["audioTimestamp"],R);const F=l(e,["thinkingConfig"]);return F!=null&&u(i,["thinkingConfig"],jO(F)),i}function EE(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],De(t,i));const r=l(e,["contents"]);if(r!=null){let o=Bn(r);Array.isArray(o)&&(o=o.map(a=>da(a))),u(n,["contents"],o)}const s=l(e,["config"]);return s!=null&&u(n,["generationConfig"],WO(t,s,n)),n}function ZO(t,e){const n={},i=l(t,["taskType"]);e!==void 0&&i!=null&&u(e,["instances[]","task_type"],i);const r=l(t,["title"]);e!==void 0&&r!=null&&u(e,["instances[]","title"],r);const s=l(t,["outputDimensionality"]);e!==void 0&&s!=null&&u(e,["parameters","outputDimensionality"],s);const o=l(t,["mimeType"]);e!==void 0&&o!=null&&u(e,["instances[]","mimeType"],o);const a=l(t,["autoTruncate"]);return e!==void 0&&a!=null&&u(e,["parameters","autoTruncate"],a),n}function eF(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],De(t,i));const r=l(e,["contents"]);r!=null&&u(n,["instances[]","content"],px(t,r));const s=l(e,["config"]);return s!=null&&u(n,["config"],ZO(s,n)),n}function tF(t,e){const n={},i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const r=l(t,["negativePrompt"]);e!==void 0&&r!=null&&u(e,["parameters","negativePrompt"],r);const s=l(t,["numberOfImages"]);e!==void 0&&s!=null&&u(e,["parameters","sampleCount"],s);const o=l(t,["aspectRatio"]);e!==void 0&&o!=null&&u(e,["parameters","aspectRatio"],o);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const f=l(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&u(e,["parameters","safetySetting"],f);const d=l(t,["personGeneration"]);e!==void 0&&d!=null&&u(e,["parameters","personGeneration"],d);const m=l(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&u(e,["parameters","includeSafetyAttributes"],m);const p=l(t,["includeRaiReason"]);e!==void 0&&p!=null&&u(e,["parameters","includeRaiReason"],p);const g=l(t,["language"]);e!==void 0&&g!=null&&u(e,["parameters","language"],g);const E=l(t,["outputMimeType"]);e!==void 0&&E!=null&&u(e,["parameters","outputOptions","mimeType"],E);const x=l(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&u(e,["parameters","outputOptions","compressionQuality"],x);const P=l(t,["addWatermark"]);e!==void 0&&P!=null&&u(e,["parameters","addWatermark"],P);const A=l(t,["enhancePrompt"]);return e!==void 0&&A!=null&&u(e,["parameters","enhancePrompt"],A),n}function nF(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],De(t,i));const r=l(e,["prompt"]);r!=null&&u(n,["instances[0]","prompt"],r);const s=l(e,["config"]);return s!=null&&u(n,["config"],tF(s,n)),n}function _d(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const i=l(t,["imageBytes"]);i!=null&&u(e,["bytesBase64Encoded"],Wi(i));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function iF(t){const e={},n=l(t,["maskMode"]);n!=null&&u(e,["maskMode"],n);const i=l(t,["segmentationClasses"]);i!=null&&u(e,["maskClasses"],i);const r=l(t,["maskDilation"]);return r!=null&&u(e,["dilation"],r),e}function rF(t){const e={},n=l(t,["controlType"]);n!=null&&u(e,["controlType"],n);const i=l(t,["enableControlImageComputation"]);return i!=null&&u(e,["computeControl"],i),e}function sF(t){const e={},n=l(t,["styleDescription"]);return n!=null&&u(e,["styleDescription"],n),e}function oF(t){const e={},n=l(t,["subjectType"]);n!=null&&u(e,["subjectType"],n);const i=l(t,["subjectDescription"]);return i!=null&&u(e,["subjectDescription"],i),e}function aF(t){const e={},n=l(t,["referenceImage"]);n!=null&&u(e,["referenceImage"],_d(n));const i=l(t,["referenceId"]);i!=null&&u(e,["referenceId"],i);const r=l(t,["referenceType"]);r!=null&&u(e,["referenceType"],r);const s=l(t,["maskImageConfig"]);s!=null&&u(e,["maskImageConfig"],iF(s));const o=l(t,["controlImageConfig"]);o!=null&&u(e,["controlImageConfig"],rF(o));const a=l(t,["styleImageConfig"]);a!=null&&u(e,["styleImageConfig"],sF(a));const c=l(t,["subjectImageConfig"]);return c!=null&&u(e,["subjectImageConfig"],oF(c)),e}function lF(t,e){const n={},i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const r=l(t,["negativePrompt"]);e!==void 0&&r!=null&&u(e,["parameters","negativePrompt"],r);const s=l(t,["numberOfImages"]);e!==void 0&&s!=null&&u(e,["parameters","sampleCount"],s);const o=l(t,["aspectRatio"]);e!==void 0&&o!=null&&u(e,["parameters","aspectRatio"],o);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const f=l(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&u(e,["parameters","safetySetting"],f);const d=l(t,["personGeneration"]);e!==void 0&&d!=null&&u(e,["parameters","personGeneration"],d);const m=l(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&u(e,["parameters","includeSafetyAttributes"],m);const p=l(t,["includeRaiReason"]);e!==void 0&&p!=null&&u(e,["parameters","includeRaiReason"],p);const g=l(t,["language"]);e!==void 0&&g!=null&&u(e,["parameters","language"],g);const E=l(t,["outputMimeType"]);e!==void 0&&E!=null&&u(e,["parameters","outputOptions","mimeType"],E);const x=l(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&u(e,["parameters","outputOptions","compressionQuality"],x);const P=l(t,["editMode"]);e!==void 0&&P!=null&&u(e,["parameters","editMode"],P);const A=l(t,["baseSteps"]);return e!==void 0&&A!=null&&u(e,["parameters","editConfig","baseSteps"],A),n}function uF(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],De(t,i));const r=l(e,["prompt"]);r!=null&&u(n,["instances[0]","prompt"],r);const s=l(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>aF(c))),u(n,["instances[0]","referenceImages"],a)}const o=l(e,["config"]);return o!=null&&u(n,["config"],lF(o,n)),n}function cF(t,e){const n={},i=l(t,["includeRaiReason"]);e!==void 0&&i!=null&&u(e,["parameters","includeRaiReason"],i);const r=l(t,["outputMimeType"]);e!==void 0&&r!=null&&u(e,["parameters","outputOptions","mimeType"],r);const s=l(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&u(e,["parameters","outputOptions","compressionQuality"],s);const o=l(t,["enhanceInputImage"]);e!==void 0&&o!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],o);const a=l(t,["imagePreservationFactor"]);e!==void 0&&a!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],a);const c=l(t,["numberOfImages"]);e!==void 0&&c!=null&&u(e,["parameters","sampleCount"],c);const f=l(t,["mode"]);return e!==void 0&&f!=null&&u(e,["parameters","mode"],f),n}function fF(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],De(t,i));const r=l(e,["image"]);r!=null&&u(n,["instances[0]","image"],_d(r));const s=l(e,["upscaleFactor"]);s!=null&&u(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=l(e,["config"]);return o!=null&&u(n,["config"],cF(o,n)),n}function dF(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","name"],De(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],r),n}function hF(t,e,n){const i={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&u(n,["_query","pageSize"],r);const s=l(e,["pageToken"]);n!==void 0&&s!=null&&u(n,["_query","pageToken"],s);const o=l(e,["filter"]);n!==void 0&&o!=null&&u(n,["_query","filter"],o);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],vx(t,a)),i}function mF(t,e){const n={},i=l(e,["config"]);return i!=null&&u(n,["config"],hF(t,i,n)),n}function pF(t,e){const n={},i=l(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const r=l(t,["description"]);e!==void 0&&r!=null&&u(e,["description"],r);const s=l(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&u(e,["defaultCheckpointId"],s),n}function gF(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],De(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],pF(r,n)),n}function yF(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","name"],De(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],r),n}function vF(t,e){const n={},i=l(t,["systemInstruction"]);e!==void 0&&i!=null&&u(e,["systemInstruction"],da(Kt(i)));const r=l(t,["tools"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Px(a))),u(e,["tools"],o)}const s=l(t,["generationConfig"]);return e!==void 0&&s!=null&&u(e,["generationConfig"],s),n}function _F(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],De(t,i));const r=l(e,["contents"]);if(r!=null){let o=Bn(r);Array.isArray(o)&&(o=o.map(a=>da(a))),u(n,["contents"],o)}const s=l(e,["config"]);return s!=null&&u(n,["config"],vF(s,n)),n}function TF(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],De(t,i));const r=l(e,["contents"]);if(r!=null){let o=Bn(r);Array.isArray(o)&&(o=o.map(a=>da(a))),u(n,["contents"],o)}const s=l(e,["config"]);return s!=null&&u(n,["config"],s),n}function EF(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["gcsUri"],n);const i=l(t,["videoBytes"]);i!=null&&u(e,["bytesBase64Encoded"],Wi(i));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function CF(t,e){const n={},i=l(t,["numberOfVideos"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);const r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const s=l(t,["fps"]);e!==void 0&&s!=null&&u(e,["parameters","fps"],s);const o=l(t,["durationSeconds"]);e!==void 0&&o!=null&&u(e,["parameters","durationSeconds"],o);const a=l(t,["seed"]);e!==void 0&&a!=null&&u(e,["parameters","seed"],a);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&u(e,["parameters","aspectRatio"],c);const f=l(t,["resolution"]);e!==void 0&&f!=null&&u(e,["parameters","resolution"],f);const d=l(t,["personGeneration"]);e!==void 0&&d!=null&&u(e,["parameters","personGeneration"],d);const m=l(t,["pubsubTopic"]);e!==void 0&&m!=null&&u(e,["parameters","pubsubTopic"],m);const p=l(t,["negativePrompt"]);e!==void 0&&p!=null&&u(e,["parameters","negativePrompt"],p);const g=l(t,["enhancePrompt"]);e!==void 0&&g!=null&&u(e,["parameters","enhancePrompt"],g);const E=l(t,["generateAudio"]);e!==void 0&&E!=null&&u(e,["parameters","generateAudio"],E);const x=l(t,["lastFrame"]);e!==void 0&&x!=null&&u(e,["instances[0]","lastFrame"],_d(x));const P=l(t,["compressionQuality"]);return e!==void 0&&P!=null&&u(e,["parameters","compressionQuality"],P),n}function AF(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],De(t,i));const r=l(e,["prompt"]);r!=null&&u(n,["instances[0]","prompt"],r);const s=l(e,["image"]);s!=null&&u(n,["instances[0]","image"],_d(s));const o=l(e,["video"]);o!=null&&u(n,["instances[0]","video"],EF(o));const a=l(e,["config"]);return a!=null&&u(n,["config"],CF(a,n)),n}function SF(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const r=l(t,["startOffset"]);return r!=null&&u(e,["startOffset"],r),e}function wF(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function xF(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function bF(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],SF(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const r=l(t,["inlineData"]);r!=null&&u(e,["inlineData"],wF(r));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],xF(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function IF(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>bF(s))),u(e,["parts"],r)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function RF(t){const e={},n=l(t,["citationSources"]);return n!=null&&u(e,["citations"],n),e}function NF(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const i=l(t,["urlRetrievalStatus"]);return i!=null&&u(e,["urlRetrievalStatus"],i),e}function MF(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>NF(r))),u(e,["urlMetadata"],i)}return e}function DF(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],IF(n));const i=l(t,["citationMetadata"]);i!=null&&u(e,["citationMetadata"],RF(i));const r=l(t,["tokenCount"]);r!=null&&u(e,["tokenCount"],r);const s=l(t,["finishReason"]);s!=null&&u(e,["finishReason"],s);const o=l(t,["urlContextMetadata"]);o!=null&&u(e,["urlContextMetadata"],MF(o));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const f=l(t,["index"]);f!=null&&u(e,["index"],f);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const m=l(t,["safetyRatings"]);return m!=null&&u(e,["safetyRatings"],m),e}function CE(t){const e={},n=l(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>DF(a))),u(e,["candidates"],o)}const i=l(t,["modelVersion"]);i!=null&&u(e,["modelVersion"],i);const r=l(t,["promptFeedback"]);r!=null&&u(e,["promptFeedback"],r);const s=l(t,["usageMetadata"]);return s!=null&&u(e,["usageMetadata"],s),e}function PF(t){const e={},n=l(t,["values"]);return n!=null&&u(e,["values"],n),e}function VF(){return{}}function kF(t){const e={},n=l(t,["embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>PF(s))),u(e,["embeddings"],r)}return l(t,["metadata"])!=null&&u(e,["metadata"],VF()),e}function UF(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&u(e,["imageBytes"],Wi(n));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function Vx(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const i=l(t,["safetyAttributes","scores"]);i!=null&&u(e,["scores"],i);const r=l(t,["contentType"]);return r!=null&&u(e,["contentType"],r),e}function LF(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],UF(n));const i=l(t,["raiFilteredReason"]);i!=null&&u(e,["raiFilteredReason"],i);const r=l(t,["_self"]);return r!=null&&u(e,["safetyAttributes"],Vx(r)),e}function OF(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>LF(s))),u(e,["generatedImages"],r)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&u(e,["positivePromptSafetyAttributes"],Vx(i)),e}function FF(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const i=l(t,["createTime"]);i!=null&&u(e,["createTime"],i);const r=l(t,["updateTime"]);return r!=null&&u(e,["updateTime"],r),e}function ap(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["displayName"]);i!=null&&u(e,["displayName"],i);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const s=l(t,["version"]);s!=null&&u(e,["version"],s);const o=l(t,["_self"]);o!=null&&u(e,["tunedModelInfo"],FF(o));const a=l(t,["inputTokenLimit"]);a!=null&&u(e,["inputTokenLimit"],a);const c=l(t,["outputTokenLimit"]);c!=null&&u(e,["outputTokenLimit"],c);const f=l(t,["supportedGenerationMethods"]);return f!=null&&u(e,["supportedActions"],f),e}function zF(t){const e={},n=l(t,["nextPageToken"]);n!=null&&u(e,["nextPageToken"],n);const i=l(t,["_self"]);if(i!=null){let r=_x(i);Array.isArray(r)&&(r=r.map(s=>ap(s))),u(e,["models"],r)}return e}function BF(){return{}}function qF(t){const e={},n=l(t,["totalTokens"]);n!=null&&u(e,["totalTokens"],n);const i=l(t,["cachedContentTokenCount"]);return i!=null&&u(e,["cachedContentTokenCount"],i),e}function GF(t){const e={},n=l(t,["video","uri"]);n!=null&&u(e,["uri"],n);const i=l(t,["video","encodedVideo"]);i!=null&&u(e,["videoBytes"],Wi(i));const r=l(t,["encoding"]);return r!=null&&u(e,["mimeType"],r),e}function HF(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],GF(n)),e}function $F(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>HF(o))),u(e,["generatedVideos"],s)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&u(e,["raiMediaFilteredCount"],i);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&u(e,["raiMediaFilteredReasons"],r),e}function YF(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["metadata"]);i!=null&&u(e,["metadata"],i);const r=l(t,["done"]);r!=null&&u(e,["done"],r);const s=l(t,["error"]);s!=null&&u(e,["error"],s);const o=l(t,["response","generateVideoResponse"]);return o!=null&&u(e,["response"],$F(o)),e}function KF(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const r=l(t,["startOffset"]);return r!=null&&u(e,["startOffset"],r),e}function JF(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["data"]);i!=null&&u(e,["data"],i);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function QF(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function XF(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],KF(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const r=l(t,["inlineData"]);r!=null&&u(e,["inlineData"],JF(r));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],QF(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function jF(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>XF(s))),u(e,["parts"],r)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function WF(t){const e={},n=l(t,["citations"]);return n!=null&&u(e,["citations"],n),e}function ZF(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const i=l(t,["urlRetrievalStatus"]);return i!=null&&u(e,["urlRetrievalStatus"],i),e}function e9(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>ZF(r))),u(e,["urlMetadata"],i)}return e}function t9(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],jF(n));const i=l(t,["citationMetadata"]);i!=null&&u(e,["citationMetadata"],WF(i));const r=l(t,["finishMessage"]);r!=null&&u(e,["finishMessage"],r);const s=l(t,["finishReason"]);s!=null&&u(e,["finishReason"],s);const o=l(t,["urlContextMetadata"]);o!=null&&u(e,["urlContextMetadata"],e9(o));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const f=l(t,["index"]);f!=null&&u(e,["index"],f);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const m=l(t,["safetyRatings"]);return m!=null&&u(e,["safetyRatings"],m),e}function AE(t){const e={},n=l(t,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>t9(f))),u(e,["candidates"],c)}const i=l(t,["createTime"]);i!=null&&u(e,["createTime"],i);const r=l(t,["responseId"]);r!=null&&u(e,["responseId"],r);const s=l(t,["modelVersion"]);s!=null&&u(e,["modelVersion"],s);const o=l(t,["promptFeedback"]);o!=null&&u(e,["promptFeedback"],o);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function n9(t){const e={},n=l(t,["truncated"]);n!=null&&u(e,["truncated"],n);const i=l(t,["token_count"]);return i!=null&&u(e,["tokenCount"],i),e}function i9(t){const e={},n=l(t,["values"]);n!=null&&u(e,["values"],n);const i=l(t,["statistics"]);return i!=null&&u(e,["statistics"],n9(i)),e}function r9(t){const e={},n=l(t,["billableCharacterCount"]);return n!=null&&u(e,["billableCharacterCount"],n),e}function s9(t){const e={},n=l(t,["predictions[]","embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>i9(s))),u(e,["embeddings"],r)}const i=l(t,["metadata"]);return i!=null&&u(e,["metadata"],r9(i)),e}function o9(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const i=l(t,["bytesBase64Encoded"]);i!=null&&u(e,["imageBytes"],Wi(i));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function kx(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const i=l(t,["safetyAttributes","scores"]);i!=null&&u(e,["scores"],i);const r=l(t,["contentType"]);return r!=null&&u(e,["contentType"],r),e}function vy(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],o9(n));const i=l(t,["raiFilteredReason"]);i!=null&&u(e,["raiFilteredReason"],i);const r=l(t,["_self"]);r!=null&&u(e,["safetyAttributes"],kx(r));const s=l(t,["prompt"]);return s!=null&&u(e,["enhancedPrompt"],s),e}function a9(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>vy(s))),u(e,["generatedImages"],r)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&u(e,["positivePromptSafetyAttributes"],kx(i)),e}function l9(t){const e={},n=l(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>vy(r))),u(e,["generatedImages"],i)}return e}function u9(t){const e={},n=l(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>vy(r))),u(e,["generatedImages"],i)}return e}function c9(t){const e={},n=l(t,["endpoint"]);n!=null&&u(e,["name"],n);const i=l(t,["deployedModelId"]);return i!=null&&u(e,["deployedModelId"],i),e}function f9(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&u(e,["baseModel"],n);const i=l(t,["createTime"]);i!=null&&u(e,["createTime"],i);const r=l(t,["updateTime"]);return r!=null&&u(e,["updateTime"],r),e}function d9(t){const e={},n=l(t,["checkpointId"]);n!=null&&u(e,["checkpointId"],n);const i=l(t,["epoch"]);i!=null&&u(e,["epoch"],i);const r=l(t,["step"]);return r!=null&&u(e,["step"],r),e}function lp(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["displayName"]);i!=null&&u(e,["displayName"],i);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const s=l(t,["versionId"]);s!=null&&u(e,["version"],s);const o=l(t,["deployedModels"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(p=>c9(p))),u(e,["endpoints"],m)}const a=l(t,["labels"]);a!=null&&u(e,["labels"],a);const c=l(t,["_self"]);c!=null&&u(e,["tunedModelInfo"],f9(c));const f=l(t,["defaultCheckpointId"]);f!=null&&u(e,["defaultCheckpointId"],f);const d=l(t,["checkpoints"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(p=>d9(p))),u(e,["checkpoints"],m)}return e}function h9(t){const e={},n=l(t,["nextPageToken"]);n!=null&&u(e,["nextPageToken"],n);const i=l(t,["_self"]);if(i!=null){let r=_x(i);Array.isArray(r)&&(r=r.map(s=>lp(s))),u(e,["models"],r)}return e}function m9(){return{}}function p9(t){const e={},n=l(t,["totalTokens"]);return n!=null&&u(e,["totalTokens"],n),e}function g9(t){const e={},n=l(t,["tokensInfo"]);return n!=null&&u(e,["tokensInfo"],n),e}function y9(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["uri"],n);const i=l(t,["bytesBase64Encoded"]);i!=null&&u(e,["videoBytes"],Wi(i));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function v9(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],y9(n)),e}function _9(t){const e={},n=l(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>v9(o))),u(e,["generatedVideos"],s)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&u(e,["raiMediaFilteredCount"],i);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&u(e,["raiMediaFilteredReasons"],r),e}function T9(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["metadata"]);i!=null&&u(e,["metadata"],i);const r=l(t,["done"]);r!=null&&u(e,["done"],r);const s=l(t,["error"]);s!=null&&u(e,["error"],s);const o=l(t,["response"]);return o!=null&&u(e,["response"],_9(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const E9="Content-Type",C9="X-Server-Timeout",A9="User-Agent",up="x-goog-api-client",S9="1.9.0",w9=`google-genai-sdk/${S9}`,x9="v1beta1",b9="v1beta",SE=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class I9{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:x9,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:b9,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))r.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.unaryApiCall(r,s,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,s]of Object.entries(n))typeof s=="object"?i[r]=Object.assign(Object.assign({},i[r]),s):s!==void 0&&(i[r]=s);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.streamApiCall(r,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const r=new AbortController,s=r.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const o=setTimeout(()=>r.abort(),n.timeout);o&&typeof o.unref=="function"&&o.unref()}i&&i.addEventListener("abort",()=>{r.abort()}),e.signal=s}return n&&n.extraBody!==null&&R9(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await wE(r),new tp(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await wE(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return Po(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:c}=yield $e(r.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=s.decode(c,{stream:!0});try{const m=JSON.parse(f);if("error"in m){const p=JSON.parse(JSON.stringify(m.error)),g=p.status,E=p.code,x=`got status: ${g}. ${JSON.stringify(m)}`;if(E>=400&&E<600)throw new yd({message:x,status:E})}}catch(m){if(m.name==="ApiError")throw m}o+=f;let d=o.match(SE);for(;d;){const m=d[1];try{const p=new Response(m,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield $e(new tp(p)),o=o.slice(d[0].length),d=o.match(SE)}catch(p){throw new Error(`exception parsing stream chunk ${m}. ${p}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=w9+" "+this.clientOptions.userAgentExtra;return e[A9]=n,e[up]=n,e[E9]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,r]of Object.entries(e.headers))n.append(i,r);e.timeout&&e.timeout>0&&n.append(C9,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);r.sizeBytes=String(o.size);const a=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=a;const c=await this.fetchUploadUrl(r,n);return s.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let r={};n!=null&&n.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},o=await this.request({path:ie("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:r});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(i=o==null?void 0:o.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function wE(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new yd({message:r,status:n}):new Error(r)}}function R9(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,o){const a=Object.assign({},s);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const f=o[c],d=a[c];f&&typeof f=="object"&&!Array.isArray(f)&&d&&typeof d=="object"&&!Array.isArray(d)?a[c]=i(d,f):(d&&f&&typeof d!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof d}, New type: ${typeof f}. Overwriting.`),a[c]=f)}return a}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N9="mcp_used/unknown";function Ux(t){for(const e of t)if(_y(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function Lx(t){var e;const n=(e=t[up])!==null&&e!==void 0?e:"";t[up]=(n+` ${N9}`).trimStart()}function M9(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>_y(r)))!==null&&i!==void 0?i:!1}function D9(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!_y(r)))!==null&&i!==void 0?i:!1}function _y(t){return t!==null&&typeof t=="object"&&t instanceof Ty}function P9(t,e=100){return Po(this,arguments,function*(){let i,r=0;for(;r<e;){const s=yield $e(t.listTools({cursor:i}));for(const o of s.tools)yield yield $e(o),r++;if(!s.nextCursor)break;i=s.nextCursor}})}class Ty{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Ty(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const s={},o=[];for(const d of this.mcpClients)try{for(var a=!0,c=(n=void 0,ul(P9(d))),f;f=await c.next(),e=f.done,!e;a=!0){r=f.value,a=!1;const m=r;o.push(m);const p=m.name;if(s[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);s[p]=d}}catch(m){n={error:m}}finally{try{!a&&!e&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),Ik(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await r.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function V9(t,e,n){const i=new Tk;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data);const s=q6(r);Object.assign(i,s),e(i)}class k9{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=O9(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let f=()=>{};const d=new Promise(N=>{f=N}),m=e.callbacks,p=function(){f({})},g=this.apiClient,E={onopen:p,onmessage:N=>{V9(g,m.onmessage,N)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(N){},onclose:(i=m==null?void 0:m.onclose)!==null&&i!==void 0?i:function(N){}},x=this.webSocketFactory.create(c,L9(o),E);x.connect(),await d;const P=De(this.apiClient,e.model),A=Nx({model:P}),w=op({setup:A});return x.send(JSON.stringify(w)),new U9(x,this.apiClient)}}class U9{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=n6(e),i=Mx(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=i6(e),i=op(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const n=op({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(vo.PLAY)}pause(){this.sendPlaybackControl(vo.PAUSE)}stop(){this.sendPlaybackControl(vo.STOP)}resetContext(){this.sendPlaybackControl(vo.RESET_CONTEXT)}close(){this.conn.close()}}function L9(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function O9(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const F9="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function z9(t,e,n){const i=new _k;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const s=JSON.parse(r);if(t.isVertexAI()){const o=P6(s);Object.assign(i,o)}else{const o=D6(s);Object.assign(i,o)}e(i)}class B9{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new k9(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,s,o,a;const c=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let d;const m=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&Ux(e.config.tools)&&Lx(m);const p=$9(m);if(this.apiClient.isVertexAI())d=`${c}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const T=this.apiClient.getApiKey();let S="BidiGenerateContent",I="key";T!=null&&T.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),S="BidiGenerateContentConstrained",I="access_token"),d=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.${S}?${I}=${T}`}let g=()=>{};const E=new Promise(T=>{g=T}),x=e.callbacks,P=function(){var T;(T=x==null?void 0:x.onopen)===null||T===void 0||T.call(x),g({})},A=this.apiClient,w={onopen:P,onmessage:T=>{z9(A,x.onmessage,T)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(T){},onclose:(i=x==null?void 0:x.onclose)!==null&&i!==void 0?i:function(T){}},N=this.webSocketFactory.create(d,H9(p),w);N.connect(),await E;let D=De(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const T=this.apiClient.getProject(),S=this.apiClient.getLocation();D=`projects/${T}/locations/${S}/`+D}let O={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[wf.AUDIO]}:e.config.responseModalities=[wf.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const L=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],b=[];for(const T of L)if(this.isCallableTool(T)){const S=T;b.push(await S.tool())}else b.push(T);b.length>0&&(e.config.tools=b);const _={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?O=QL(this.apiClient,_):O=JL(this.apiClient,_),delete O.config,N.send(JSON.stringify(O)),new G9(N,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const q9={turnComplete:!0};class G9{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Bn(n.turns),e.isVertexAI()?i=i.map(r=>da(r)):i=i.map(r=>vd(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(F9)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},q9),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:t6(e)}:n={realtimeInput:e6(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function H9(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function $9(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xE=10;function bE(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Cc(o)){r=!0;break}if(!r)return!0;const s=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Cc(t){return"callTool"in t&&typeof t.callTool=="function"}function IE(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y9 extends qs{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,s,o,a;const c=await this.processParamsForMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!M9(n)||bE(n.config))return await this.generateContentInternal(c);if(D9(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,d;const m=Bn(c.contents),p=(s=(r=(i=c.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:xE;let g=0;for(;g<p&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const E=f.candidates[0].content,x=[];for(const P of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Cc(P)){const w=await P.callTool(f.functionCalls);x.push(...w)}g++,d={role:"user",parts:x},c.contents=Bn(c.contents),c.contents.push(E),c.contents.push(d),IE(c.config)&&(m.push(E),m.push(d))}return IE(c.config)&&(f.automaticFunctionCallingHistory=m),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),bE(n.config)){const i=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let s;const o=[];if(i!=null&&i.generatedImages)for(const c of i.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((r=c==null?void 0:c.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:o.push(c);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s}:a={generatedImages:o},a}),this.list=async n=>{var i;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((i=o.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new cu(Ns.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsForMcpUsage(e){var n,i,r;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const o=await Promise.all(s.map(async c=>Cc(c)?await c.tool():c)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&Ux(e.config.tools)){const c=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let f=Object.assign({},c);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),Lx(f),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return a}async initAfcToolsMap(e){var n,i,r;const s=new Map;for(const o of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Cc(o)){const a=o,c=await a.tool();for(const f of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!f.name)throw new Error("Function declaration name is required.");if(s.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);s.set(f.name,a)}}return s}async processAfcStream(e){var n,i,r;const s=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:xE;let o=!1,a=0;const c=await this.initAfcToolsMap(e);return function(f,d,m){var p,g;return Po(this,arguments,function*(){for(var E,x,P,A;a<s;){o&&(a++,o=!1);const O=yield $e(f.processParamsForMcpUsage(m)),L=yield $e(f.generateContentStreamInternal(O)),b=[],_=[];try{for(var w=!0,N=(x=void 0,ul(L)),D;D=yield $e(N.next()),E=D.done,!E;w=!0){A=D.value,w=!1;const T=A;if(yield yield $e(T),T.candidates&&(!((p=T.candidates[0])===null||p===void 0)&&p.content)){_.push(T.candidates[0].content);for(const S of(g=T.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(a<s&&S.functionCall){if(!S.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(S.functionCall.name)){const I=yield $e(d.get(S.functionCall.name).callTool([S.functionCall]));b.push(...I)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${S.functionCall.name}`)}}}}catch(T){x={error:T}}finally{try{!w&&!E&&(P=N.return)&&(yield $e(P.call(N)))}finally{if(x)throw x.error}}if(b.length>0){o=!0;const T=new Pa;T.candidates=[{content:{role:"user",parts:b}}],yield yield $e(T);const S=[];S.push(..._),S.push({role:"user",parts:b});const I=Bn(m.contents).concat(S);m.contents=I}else break}})}(this,c,e)}async generateContentInternal(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=EE(this.apiClient,e);return a=ie("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const m=AE(d),p=new Pa;return Object.assign(p,m),p})}else{const f=TE(this.apiClient,e);return a=ie("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>{const m=CE(d),p=new Pa;return Object.assign(p,m),p})}}async generateContentStreamInternal(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=EE(this.apiClient,e);return a=ie("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(m){return Po(this,arguments,function*(){var p,g,E,x;try{for(var P=!0,A=ul(m),w;w=yield $e(A.next()),p=w.done,!p;P=!0){x=w.value,P=!1;const D=AE(yield $e(x.json())),O=new Pa;Object.assign(O,D),yield yield $e(O)}}catch(N){g={error:N}}finally{try{!P&&!p&&(E=A.return)&&(yield $e(E.call(A)))}finally{if(g)throw g.error}}})})}else{const f=TE(this.apiClient,e);return a=ie("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(m){return Po(this,arguments,function*(){var p,g,E,x;try{for(var P=!0,A=ul(m),w;w=yield $e(A.next()),p=w.done,!p;P=!0){x=w.value,P=!1;const D=CE(yield $e(x.json())),O=new Pa;Object.assign(O,D),yield yield $e(O)}}catch(N){g={error:N}}finally{try{!P&&!p&&(E=A.return)&&(yield $e(E.call(A)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=eF(this.apiClient,e);return a=ie("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const m=s9(d),p=new eE;return Object.assign(p,m),p})}else{const f=hO(this.apiClient,e);return a=ie("{model}:batchEmbedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>{const m=kF(d),p=new eE;return Object.assign(p,m),p})}}async generateImagesInternal(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=nF(this.apiClient,e);return a=ie("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const m=a9(d),p=new tE;return Object.assign(p,m),p})}else{const f=pO(this.apiClient,e);return a=ie("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>{const m=OF(d),p=new tE;return Object.assign(p,m),p})}}async editImageInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=uF(this.apiClient,e);return s=ie("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const f=l9(c),d=new hk;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=fF(this.apiClient,e);return s=ie("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const f=u9(c),d=new mk;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=dF(this.apiClient,e);return a=ie("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>lp(d))}else{const f=gO(this.apiClient,e);return a=ie("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>ap(d))}}async listInternal(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=mF(this.apiClient,e);return a=ie("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const m=h9(d),p=new nE;return Object.assign(p,m),p})}else{const f=vO(this.apiClient,e);return a=ie("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>{const m=zF(d),p=new nE;return Object.assign(p,m),p})}}async update(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=gF(this.apiClient,e);return a=ie("{model}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>lp(d))}else{const f=TO(this.apiClient,e);return a=ie("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>ap(d))}}async delete(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=yF(this.apiClient,e);return a=ie("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(()=>{const d=m9(),m=new iE;return Object.assign(m,d),m})}else{const f=EO(this.apiClient,e);return a=ie("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(()=>{const d=BF(),m=new iE;return Object.assign(m,d),m})}}async countTokens(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=_F(this.apiClient,e);return a=ie("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const m=p9(d),p=new rE;return Object.assign(p,m),p})}else{const f=AO(this.apiClient,e);return a=ie("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>{const m=qF(d),p=new rE;return Object.assign(p,m),p})}}async computeTokens(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=TF(this.apiClient,e);return s=ie("{model}:computeTokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const f=g9(c),d=new pk;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=AF(this.apiClient,e);return a=ie("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>T9(d))}else{const f=xO(this.apiClient,e);return a=ie("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>YF(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K9(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["_url","operationName"],n);const i=l(t,["config"]);return i!=null&&u(e,["config"],i),e}function J9(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["_url","operationName"],n);const i=l(t,["config"]);return i!=null&&u(e,["config"],i),e}function Q9(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["operationName"],n);const i=l(t,["resourceName"]);i!=null&&u(e,["_url","resourceName"],i);const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function X9(t){const e={},n=l(t,["video","uri"]);n!=null&&u(e,["uri"],n);const i=l(t,["video","encodedVideo"]);i!=null&&u(e,["videoBytes"],Wi(i));const r=l(t,["encoding"]);return r!=null&&u(e,["mimeType"],r),e}function j9(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],X9(n)),e}function W9(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>j9(o))),u(e,["generatedVideos"],s)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&u(e,["raiMediaFilteredCount"],i);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&u(e,["raiMediaFilteredReasons"],r),e}function Z9(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["metadata"]);i!=null&&u(e,["metadata"],i);const r=l(t,["done"]);r!=null&&u(e,["done"],r);const s=l(t,["error"]);s!=null&&u(e,["error"],s);const o=l(t,["response","generateVideoResponse"]);return o!=null&&u(e,["response"],W9(o)),e}function ez(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["uri"],n);const i=l(t,["bytesBase64Encoded"]);i!=null&&u(e,["videoBytes"],Wi(i));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function tz(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],ez(n)),e}function nz(t){const e={},n=l(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>tz(o))),u(e,["generatedVideos"],s)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&u(e,["raiMediaFilteredCount"],i);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&u(e,["raiMediaFilteredReasons"],r),e}function RE(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["metadata"]);i!=null&&u(e,["metadata"],i);const r=l(t,["done"]);r!=null&&u(e,["done"],r);const s=l(t,["error"]);s!=null&&u(e,["error"],s);const o=l(t,["response"]);return o!=null&&u(e,["response"],nz(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iz extends qs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let s;return i&&"httpOptions"in i&&(s=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}})}else return this.getVideosOperationInternal({operationName:n.name,config:i})}async getVideosOperationInternal(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=J9(e);return a=ie("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>RE(d))}else{const f=K9(e);return a=ie("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>Z9(d))}}async fetchPredictVideosOperationInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=Q9(e);return s=ie("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>RE(c))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rz(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function Ox(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],rz(n)),e}function sz(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const i=l(t,["voiceConfig"]);return i!=null&&u(e,["voiceConfig"],Ox(i)),e}function oz(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>sz(r))),u(e,["speakerVoiceConfigs"],i)}return e}function az(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],Ox(n));const i=l(t,["multiSpeakerVoiceConfig"]);i!=null&&u(e,["multiSpeakerVoiceConfig"],oz(i));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function lz(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const r=l(t,["startOffset"]);return r!=null&&u(e,["startOffset"],r),e}function uz(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function cz(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function fz(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],lz(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const r=l(t,["inlineData"]);r!=null&&u(e,["inlineData"],uz(r));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],cz(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function dz(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>fz(s))),u(e,["parts"],r)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function hz(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const s=l(t,["parameters"]);s!=null&&u(e,["parameters"],s);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function mz(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const i=l(t,["endTime"]);return i!=null&&u(e,["endTime"],i),e}function pz(t){const e={},n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],mz(n)),e}function gz(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["dynamicThreshold"]);return i!=null&&u(e,["dynamicThreshold"],i),e}function yz(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],gz(n)),e}function vz(){return{}}function _z(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>hz(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],pz(i));const r=l(t,["googleSearchRetrieval"]);if(r!=null&&u(e,["googleSearchRetrieval"],yz(r)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],vz());const o=l(t,["codeExecution"]);o!=null&&u(e,["codeExecution"],o);const a=l(t,["computerUse"]);return a!=null&&u(e,["computerUse"],a),e}function Tz(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function NE(){return{}}function Ez(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const i=l(t,["startOfSpeechSensitivity"]);i!=null&&u(e,["startOfSpeechSensitivity"],i);const r=l(t,["endOfSpeechSensitivity"]);r!=null&&u(e,["endOfSpeechSensitivity"],r);const s=l(t,["prefixPaddingMs"]);s!=null&&u(e,["prefixPaddingMs"],s);const o=l(t,["silenceDurationMs"]);return o!=null&&u(e,["silenceDurationMs"],o),e}function Cz(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],Ez(n));const i=l(t,["activityHandling"]);i!=null&&u(e,["activityHandling"],i);const r=l(t,["turnCoverage"]);return r!=null&&u(e,["turnCoverage"],r),e}function Az(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function Sz(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const i=l(t,["slidingWindow"]);return i!=null&&u(e,["slidingWindow"],Az(i)),e}function wz(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function xz(t,e){const n={},i=l(t,["generationConfig"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig"],i);const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig","responseModalities"],r);const s=l(t,["temperature"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","temperature"],s);const o=l(t,["topP"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","topP"],o);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const f=l(t,["mediaResolution"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","mediaResolution"],f);const d=l(t,["seed"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","seed"],d);const m=l(t,["speechConfig"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","speechConfig"],az(yy(m)));const p=l(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=l(t,["systemInstruction"]);e!==void 0&&g!=null&&u(e,["setup","systemInstruction"],dz(Kt(g)));const E=l(t,["tools"]);if(e!==void 0&&E!=null){let O=ca(E);Array.isArray(O)&&(O=O.map(L=>_z(ua(L)))),u(e,["setup","tools"],O)}const x=l(t,["sessionResumption"]);e!==void 0&&x!=null&&u(e,["setup","sessionResumption"],Tz(x));const P=l(t,["inputAudioTranscription"]);e!==void 0&&P!=null&&u(e,["setup","inputAudioTranscription"],NE());const A=l(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&u(e,["setup","outputAudioTranscription"],NE());const w=l(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&u(e,["setup","realtimeInputConfig"],Cz(w));const N=l(t,["contextWindowCompression"]);e!==void 0&&N!=null&&u(e,["setup","contextWindowCompression"],Sz(N));const D=l(t,["proactivity"]);return e!==void 0&&D!=null&&u(e,["setup","proactivity"],wz(D)),n}function bz(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["setup","model"],De(t,i));const r=l(e,["config"]);return r!=null&&u(n,["config"],xz(r,n)),n}function Iz(t,e,n){const i={},r=l(e,["expireTime"]);n!==void 0&&r!=null&&u(n,["expireTime"],r);const s=l(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&u(n,["newSessionExpireTime"],s);const o=l(e,["uses"]);n!==void 0&&o!=null&&u(n,["uses"],o);const a=l(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&u(n,["bidiGenerateContentSetup"],bz(t,a));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&u(n,["fieldMask"],c),i}function Rz(t,e){const n={},i=l(e,["config"]);return i!=null&&u(n,["config"],Iz(t,i,n)),n}function Nz(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mz(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(s=>`${n}.${s}`);e.push(...r)}else e.push(n)}return e.join(",")}function Dz(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const s=Mz(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];r.length>0&&(a=r.map(f=>o.includes(f)?`generationConfig.${f}`:f));const c=[];s&&c.push(s),a.length>0&&c.push(...a),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class Pz extends qs{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=Rz(this.apiClient,e);s=ie("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const c=Dz(a,e.config);return r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>Nz(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vz(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const i=l(t,["config"]);return i!=null&&u(e,["config"],i),e}function kz(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const r=l(t,["pageToken"]);e!==void 0&&r!=null&&u(e,["_query","pageToken"],r);const s=l(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),n}function Uz(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],kz(n,e)),e}function Lz(t){const e={},n=l(t,["textInput"]);n!=null&&u(e,["textInput"],n);const i=l(t,["output"]);return i!=null&&u(e,["output"],i),e}function Oz(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=l(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Lz(r))),u(e,["examples","examples"],i)}return e}function Fz(t,e){const n={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=l(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&u(e,["displayName"],i),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=l(t,["epochCount"]);e!==void 0&&r!=null&&u(e,["tuningTask","hyperparameters","epochCount"],r);const s=l(t,["learningRateMultiplier"]);if(s!=null&&u(n,["tuningTask","hyperparameters","learningRateMultiplier"],s),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const o=l(t,["batchSize"]);e!==void 0&&o!=null&&u(e,["tuningTask","hyperparameters","batchSize"],o);const a=l(t,["learningRate"]);return e!==void 0&&a!=null&&u(e,["tuningTask","hyperparameters","learningRate"],a),n}function zz(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const i=l(t,["trainingDataset"]);i!=null&&u(e,["tuningTask","trainingData"],Oz(i));const r=l(t,["config"]);return r!=null&&u(e,["config"],Fz(r,e)),e}function Bz(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const i=l(t,["config"]);return i!=null&&u(e,["config"],i),e}function qz(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const r=l(t,["pageToken"]);e!==void 0&&r!=null&&u(e,["_query","pageToken"],r);const s=l(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),n}function Gz(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],qz(n,e)),e}function Hz(t,e){const n={},i=l(t,["gcsUri"]);e!==void 0&&i!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],i);const r=l(t,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],r),l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function $z(t,e){const n={},i=l(t,["gcsUri"]);i!=null&&u(n,["validationDatasetUri"],i);const r=l(t,["vertexDatasetResource"]);return e!==void 0&&r!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],r),n}function Yz(t,e){const n={},i=l(t,["validationDataset"]);e!==void 0&&i!=null&&u(e,["supervisedTuningSpec"],$z(i,n));const r=l(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&u(e,["tunedModelDisplayName"],r);const s=l(t,["description"]);e!==void 0&&s!=null&&u(e,["description"],s);const o=l(t,["epochCount"]);e!==void 0&&o!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],o);const a=l(t,["learningRateMultiplier"]);e!==void 0&&a!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const c=l(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=l(t,["adapterSize"]);if(e!==void 0&&f!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],f),l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function Kz(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const i=l(t,["trainingDataset"]);i!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],Hz(i,e));const r=l(t,["config"]);return r!=null&&u(e,["config"],Yz(r,e)),e}function Jz(t){const e={},n=l(t,["name"]);n!=null&&u(e,["model"],n);const i=l(t,["name"]);return i!=null&&u(e,["endpoint"],i),e}function Fx(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["state"]);i!=null&&u(e,["state"],gx(i));const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const s=l(t,["tuningTask","startTime"]);s!=null&&u(e,["startTime"],s);const o=l(t,["tuningTask","completeTime"]);o!=null&&u(e,["endTime"],o);const a=l(t,["updateTime"]);a!=null&&u(e,["updateTime"],a);const c=l(t,["description"]);c!=null&&u(e,["description"],c);const f=l(t,["baseModel"]);f!=null&&u(e,["baseModel"],f);const d=l(t,["_self"]);d!=null&&u(e,["tunedModel"],Jz(d));const m=l(t,["distillationSpec"]);m!=null&&u(e,["distillationSpec"],m);const p=l(t,["experiment"]);p!=null&&u(e,["experiment"],p);const g=l(t,["labels"]);g!=null&&u(e,["labels"],g);const E=l(t,["pipelineJob"]);E!=null&&u(e,["pipelineJob"],E);const x=l(t,["satisfiesPzi"]);x!=null&&u(e,["satisfiesPzi"],x);const P=l(t,["satisfiesPzs"]);P!=null&&u(e,["satisfiesPzs"],P);const A=l(t,["serviceAccount"]);A!=null&&u(e,["serviceAccount"],A);const w=l(t,["tunedModelDisplayName"]);return w!=null&&u(e,["tunedModelDisplayName"],w),e}function Qz(t){const e={},n=l(t,["nextPageToken"]);n!=null&&u(e,["nextPageToken"],n);const i=l(t,["tunedModels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>Fx(s))),u(e,["tuningJobs"],r)}return e}function Xz(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["metadata"]);i!=null&&u(e,["metadata"],i);const r=l(t,["done"]);r!=null&&u(e,["done"],r);const s=l(t,["error"]);return s!=null&&u(e,["error"],s),e}function jz(t){const e={},n=l(t,["checkpointId"]);n!=null&&u(e,["checkpointId"],n);const i=l(t,["epoch"]);i!=null&&u(e,["epoch"],i);const r=l(t,["step"]);r!=null&&u(e,["step"],r);const s=l(t,["endpoint"]);return s!=null&&u(e,["endpoint"],s),e}function Wz(t){const e={},n=l(t,["model"]);n!=null&&u(e,["model"],n);const i=l(t,["endpoint"]);i!=null&&u(e,["endpoint"],i);const r=l(t,["checkpoints"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>jz(o))),u(e,["checkpoints"],s)}return e}function cp(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["state"]);i!=null&&u(e,["state"],gx(i));const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const s=l(t,["startTime"]);s!=null&&u(e,["startTime"],s);const o=l(t,["endTime"]);o!=null&&u(e,["endTime"],o);const a=l(t,["updateTime"]);a!=null&&u(e,["updateTime"],a);const c=l(t,["error"]);c!=null&&u(e,["error"],c);const f=l(t,["description"]);f!=null&&u(e,["description"],f);const d=l(t,["baseModel"]);d!=null&&u(e,["baseModel"],d);const m=l(t,["tunedModel"]);m!=null&&u(e,["tunedModel"],Wz(m));const p=l(t,["supervisedTuningSpec"]);p!=null&&u(e,["supervisedTuningSpec"],p);const g=l(t,["tuningDataStats"]);g!=null&&u(e,["tuningDataStats"],g);const E=l(t,["encryptionSpec"]);E!=null&&u(e,["encryptionSpec"],E);const x=l(t,["partnerModelTuningSpec"]);x!=null&&u(e,["partnerModelTuningSpec"],x);const P=l(t,["distillationSpec"]);P!=null&&u(e,["distillationSpec"],P);const A=l(t,["experiment"]);A!=null&&u(e,["experiment"],A);const w=l(t,["labels"]);w!=null&&u(e,["labels"],w);const N=l(t,["pipelineJob"]);N!=null&&u(e,["pipelineJob"],N);const D=l(t,["satisfiesPzi"]);D!=null&&u(e,["satisfiesPzi"],D);const O=l(t,["satisfiesPzs"]);O!=null&&u(e,["satisfiesPzs"],O);const L=l(t,["serviceAccount"]);L!=null&&u(e,["serviceAccount"],L);const b=l(t,["tunedModelDisplayName"]);return b!=null&&u(e,["tunedModelDisplayName"],b),e}function Zz(t){const e={},n=l(t,["nextPageToken"]);n!=null&&u(e,["nextPageToken"],n);const i=l(t,["tuningJobs"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>cp(s))),u(e,["tuningJobs"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e7 extends qs{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new cu(Ns.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const i=await this.tuneMldevInternal(n);let r="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?r=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(r=i.name.split("/operations/")[0]),{name:r,state:ep.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=Bz(e);return a=ie("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>cp(d))}else{const f=Vz(e);return a=ie("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>Fx(d))}}async listInternal(e){var n,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const f=Gz(e);return a=ie("tuningJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const m=Zz(d),p=new sE;return Object.assign(p,m),p})}else{const f=Uz(e);return a=ie("tunedModels",f._url),c=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>{const m=Qz(d),p=new sE;return Object.assign(p,m),p})}}async tuneInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=Kz(e);return s=ie("tuningJobs",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>cp(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=zz(e);return s=ie("tunedModels",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>Xz(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t7{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const n7=1024*1024*8,i7=3,r7=1e3,s7=2,Rh="x-goog-upload-status";async function o7(t,e,n){var i,r,s;let o=0,a=0,c=new tp(new Response),f="upload";for(o=t.size;a<o;){const m=Math.min(n7,o-a),p=t.slice(a,a+m);a+m>=o&&(f+=", finalize");let g=0,E=r7;for(;g<i7&&(c=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(a),"Content-Length":String(m)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[Rh]));)g++,await l7(E),E=E*s7;if(a+=m,((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[Rh])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(c==null?void 0:c.json());if(((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[Rh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function a7(t){return{size:t.size,type:t.type}}function l7(t){return new Promise(e=>setTimeout(e,t))}class u7{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await o7(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await a7(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c7{create(e,n,i){return new f7(e,n,i)}}class f7{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ME="x-goog-api-key";class d7{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(ME)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ME,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h7="gl-node/";class m7{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=dk(e,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new d7(this.apiKey);this.apiClient=new I9({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:h7+"web",uploader:new u7,downloader:new t7}),this.models=new Y9(this.apiClient),this.live=new B9(this.apiClient,r,new c7),this.batches=new kU(this.apiClient),this.chats=new F5(this.models,this.apiClient),this.caches=new U5(this.apiClient),this.files=new W5(this.apiClient),this.operations=new iz(this.apiClient),this.authTokens=new Pz(this.apiClient),this.tunings=new e7(this.apiClient)}}const p7="AIzaSyCZgDjIHYpvLnIGbMPfp4bbRAqtp0rrrQM",DE=new m7({apiKey:p7}),PE={personalityTraits:"AI generation failed. The API key might be missing or invalid.",ideals:"Error generating ideals.",bonds:"Error generating bonds.",flaws:"Error generating flaws."},g7=async(t,e)=>{if(!DE)return console.error("Gemini AI client is not initialized. Make sure VITE_GEMINI_API_KEY is set."),PE;const{name:n,race:i,class:r,background:s,alignment:o}=t,a=`
    Generate personality aspects for a Dungeons & Dragons character.
    Based on the following details:
    - Name: ${n}
    - Race: ${i}
    - Class: ${r}
    - Background: ${s}
    - Alignment: ${o}
    ${e?`
- Additional Theme: "${e}"`:""}

    Return a JSON object with four keys: "personalityTraits", "ideals", "bonds", and "flaws".
    - "personalityTraits": A short paragraph describing the character's general demeanor.
    - "ideals": A sentence describing a core belief.
    - "bonds": A sentence about something or someone the character cares deeply about.
    - "flaws": A sentence describing a significant weakness or fear.
  `;try{const f=(await DE.models.generateContent({model:"gemini-2.5-flash",contents:a,config:{responseMimeType:"application/json",responseSchema:{type:Tn.OBJECT,properties:{personalityTraits:{type:Tn.STRING},ideals:{type:Tn.STRING},bonds:{type:Tn.STRING},flaws:{type:Tn.STRING}}}}})).text.trim(),d=JSON.parse(f);return{personalityTraits:d.personalityTraits||"",ideals:d.ideals||"",bonds:d.bonds||"",flaws:d.flaws||""}}catch(c){return console.error("Error generating personality:",c),PE}};function y7(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in t)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(t)}function zx(t,e){return new Promise(function(n,i){let r;return v7(t).then(function(s){try{return r=s,n(new Blob([e.slice(0,2),r,e.slice(2)],{type:"image/jpeg"}))}catch(o){return i(o)}},i)})}const v7=t=>new Promise((e,n)=>{const i=new FileReader;i.addEventListener("load",({target:{result:r}})=>{const s=new DataView(r);let o=0;if(s.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const a=s.getUint16(o);if(a===65498)break;const c=s.getUint16(o+2);if(a===65505&&s.getUint32(o+4)===1165519206){const f=o+10;let d;switch(s.getUint16(f)){case 18761:d=!0;break;case 19789:d=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(f+2,d)!==42)return n("TIFF header contains invalid version");const m=s.getUint32(f+4,d),p=f+m+2+12*s.getUint16(f+m,d);for(let g=f+m+2;g<p;g+=12)if(s.getUint16(g,d)==274){if(s.getUint16(g+2,d)!==3)return n("Orientation data type is invalid");if(s.getUint32(g+4,d)!==1)return n("Orientation data count is invalid");s.setUint16(g+8,1,d);break}return e(r.slice(o,o+2+c))}o+=2+c}return e(new Blob)}),i.readAsArrayBuffer(t)});var bf={},_7={get exports(){return bf},set exports(t){bf=t}};(function(t){var e,n,i={};_7.exports=i,i.parse=function(r,s){for(var o=i.bin.readUshort,a=i.bin.readUint,c=0,f={},d=new Uint8Array(r),m=d.length-4;a(d,m)!=101010256;)m--;c=m,c+=4;var p=o(d,c+=4);o(d,c+=2);var g=a(d,c+=2),E=a(d,c+=4);c+=4,c=E;for(var x=0;x<p;x++){a(d,c),c+=4,c+=4,c+=4,a(d,c+=4),g=a(d,c+=4);var P=a(d,c+=4),A=o(d,c+=4),w=o(d,c+2),N=o(d,c+4);c+=6;var D=a(d,c+=8);c+=4,c+=A+w+N,i._readLocal(d,D,f,g,P,s)}return f},i._readLocal=function(r,s,o,a,c,f){var d=i.bin.readUshort,m=i.bin.readUint;m(r,s),d(r,s+=4),d(r,s+=2);var p=d(r,s+=2);m(r,s+=2),m(r,s+=4),s+=4;var g=d(r,s+=8),E=d(r,s+=2);s+=2;var x=i.bin.readUTF8(r,s,g);if(s+=g,s+=E,f)o[x]={size:c,csize:a};else{var P=new Uint8Array(r.buffer,s);if(p==0)o[x]=new Uint8Array(P.buffer.slice(s,s+a));else{if(p!=8)throw"unknown compression method: "+p;var A=new Uint8Array(c);i.inflateRaw(P,A),o[x]=A}}},i.inflateRaw=function(r,s){return i.F.inflate(r,s)},i.inflate=function(r,s){return r[0],r[1],i.inflateRaw(new Uint8Array(r.buffer,r.byteOffset+2,r.length-6),s)},i.deflate=function(r,s){s==null&&(s={level:6});var o=0,a=new Uint8Array(50+Math.floor(1.1*r.length));a[o]=120,a[o+1]=156,o+=2,o=i.F.deflateRaw(r,a,o,s.level);var c=i.adler(r,0,r.length);return a[o+0]=c>>>24&255,a[o+1]=c>>>16&255,a[o+2]=c>>>8&255,a[o+3]=c>>>0&255,new Uint8Array(a.buffer,0,o+4)},i.deflateRaw=function(r,s){s==null&&(s={level:6});var o=new Uint8Array(50+Math.floor(1.1*r.length)),a=i.F.deflateRaw(r,o,a,s.level);return new Uint8Array(o.buffer,0,a)},i.encode=function(r,s){s==null&&(s=!1);var o=0,a=i.bin.writeUint,c=i.bin.writeUshort,f={};for(var d in r){var m=!i._noNeed(d)&&!s,p=r[d],g=i.crc.crc(p,0,p.length);f[d]={cpr:m,usize:p.length,crc:g,file:m?i.deflateRaw(p):p}}for(var d in f)o+=f[d].file.length+30+46+2*i.bin.sizeUTF8(d);o+=22;var E=new Uint8Array(o),x=0,P=[];for(var d in f){var A=f[d];P.push(x),x=i._writeHeader(E,x,d,A,0)}var w=0,N=x;for(var d in f)A=f[d],P.push(x),x=i._writeHeader(E,x,d,A,1,P[w++]);var D=x-N;return a(E,x,101010256),x+=4,c(E,x+=4,w),c(E,x+=2,w),a(E,x+=2,D),a(E,x+=4,N),x+=4,x+=2,E.buffer},i._noNeed=function(r){var s=r.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},i._writeHeader=function(r,s,o,a,c,f){var d=i.bin.writeUint,m=i.bin.writeUshort,p=a.file;return d(r,s,c==0?67324752:33639248),s+=4,c==1&&(s+=2),m(r,s,20),m(r,s+=2,0),m(r,s+=2,a.cpr?8:0),d(r,s+=2,0),d(r,s+=4,a.crc),d(r,s+=4,p.length),d(r,s+=4,a.usize),m(r,s+=4,i.bin.sizeUTF8(o)),m(r,s+=2,0),s+=2,c==1&&(s+=2,s+=2,d(r,s+=6,f),s+=4),s+=i.bin.writeUTF8(r,s,o),c==0&&(r.set(p,s),s+=p.length),s},i.crc={table:function(){for(var r=new Uint32Array(256),s=0;s<256;s++){for(var o=s,a=0;a<8;a++)1&o?o=3988292384^o>>>1:o>>>=1;r[s]=o}return r}(),update:function(r,s,o,a){for(var c=0;c<a;c++)r=i.crc.table[255&(r^s[o+c])]^r>>>8;return r},crc:function(r,s,o){return 4294967295^i.crc.update(4294967295,r,s,o)}},i.adler=function(r,s,o){for(var a=1,c=0,f=s,d=s+o;f<d;){for(var m=Math.min(f+5552,d);f<m;)c+=a+=r[f++];a%=65521,c%=65521}return c<<16|a},i.bin={readUshort:function(r,s){return r[s]|r[s+1]<<8},writeUshort:function(r,s,o){r[s]=255&o,r[s+1]=o>>8&255},readUint:function(r,s){return 16777216*r[s+3]+(r[s+2]<<16|r[s+1]<<8|r[s])},writeUint:function(r,s,o){r[s]=255&o,r[s+1]=o>>8&255,r[s+2]=o>>16&255,r[s+3]=o>>24&255},readASCII:function(r,s,o){for(var a="",c=0;c<o;c++)a+=String.fromCharCode(r[s+c]);return a},writeASCII:function(r,s,o){for(var a=0;a<o.length;a++)r[s+a]=o.charCodeAt(a)},pad:function(r){return r.length<2?"0"+r:r},readUTF8:function(r,s,o){for(var a,c="",f=0;f<o;f++)c+="%"+i.bin.pad(r[s+f].toString(16));try{a=decodeURIComponent(c)}catch{return i.bin.readASCII(r,s,o)}return a},writeUTF8:function(r,s,o){for(var a=o.length,c=0,f=0;f<a;f++){var d=o.charCodeAt(f);if(!(4294967168&d))r[s+c]=d,c++;else if(!(4294965248&d))r[s+c]=192|d>>6,r[s+c+1]=128|d>>0&63,c+=2;else if(!(4294901760&d))r[s+c]=224|d>>12,r[s+c+1]=128|d>>6&63,r[s+c+2]=128|d>>0&63,c+=3;else{if(4292870144&d)throw"e";r[s+c]=240|d>>18,r[s+c+1]=128|d>>12&63,r[s+c+2]=128|d>>6&63,r[s+c+3]=128|d>>0&63,c+=4}}return c},sizeUTF8:function(r){for(var s=r.length,o=0,a=0;a<s;a++){var c=r.charCodeAt(a);if(!(4294967168&c))o++;else if(!(4294965248&c))o+=2;else if(!(4294901760&c))o+=3;else{if(4292870144&c)throw"e";o+=4}}return o}},i.F={},i.F.deflateRaw=function(r,s,o,a){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],f=i.F.U,d=i.F._goodIndex;i.F._hash;var m=i.F._putsE,p=0,g=o<<3,E=0,x=r.length;if(a==0){for(;p<x;)m(s,g,p+(I=Math.min(65535,x-p))==x?1:0),g=i.F._copyExact(r,p,I,s,g+8),p+=I;return g>>>3}var P=f.lits,A=f.strt,w=f.prev,N=0,D=0,O=0,L=0,b=0,_=0;for(x>2&&(A[_=i.F._hash(r,0)]=0),p=0;p<x;p++){if(b=_,p+1<x-2){_=i.F._hash(r,p+1);var T=p+1&32767;w[T]=A[_],A[_]=T}if(E<=p){(N>14e3||D>26697)&&x-p>100&&(E<p&&(P[N]=p-E,N+=2,E=p),g=i.F._writeBlock(p==x-1||E==x?1:0,P,N,L,r,O,p-O,s,g),N=D=L=0,O=p);var S=0;p<x-2&&(S=i.F._bestMatch(r,p,w,b,Math.min(c[2],x-p),c[3]));var I=S>>>16,M=65535&S;if(S!=0){M=65535&S;var R=d(I=S>>>16,f.of0);f.lhst[257+R]++;var F=d(M,f.df0);f.dhst[F]++,L+=f.exb[R]+f.dxb[F],P[N]=I<<23|p-E,P[N+1]=M<<16|R<<8|F,N+=2,E=p+I}else f.lhst[r[p]]++;D++}}for(O==p&&r.length!=0||(E<p&&(P[N]=p-E,N+=2,E=p),g=i.F._writeBlock(1,P,N,L,r,O,p-O,s,g),N=0,D=0,N=D=L=0,O=p);7&g;)g++;return g>>>3},i.F._bestMatch=function(r,s,o,a,c,f){var d=32767&s,m=o[d],p=d-m+32768&32767;if(m==d||a!=i.F._hash(r,s-p))return 0;for(var g=0,E=0,x=Math.min(32767,s);p<=x&&--f!=0&&m!=d;){if(g==0||r[s+g]==r[s+g-p]){var P=i.F._howLong(r,s,p);if(P>g){if(E=p,(g=P)>=c)break;p+2<P&&(P=p+2);for(var A=0,w=0;w<P-2;w++){var N=s-p+w+32768&32767,D=N-o[N]+32768&32767;D>A&&(A=D,m=N)}}}p+=(d=m)-(m=o[d])+32768&32767}return g<<16|E},i.F._howLong=function(r,s,o){if(r[s]!=r[s-o]||r[s+1]!=r[s+1-o]||r[s+2]!=r[s+2-o])return 0;var a=s,c=Math.min(r.length,s+258);for(s+=3;s<c&&r[s]==r[s-o];)s++;return s-a},i.F._hash=function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(r,s,o,a,c,f,d,m,p){var g,E,x,P,A,w,N,D,O,L=i.F.U,b=i.F._putsF,_=i.F._putsE;L.lhst[256]++,E=(g=i.F.getTrees())[0],x=g[1],P=g[2],A=g[3],w=g[4],N=g[5],D=g[6],O=g[7];var T=32+(p+3&7?8-(p+3&7):0)+(d<<3),S=a+i.F.contSize(L.fltree,L.lhst)+i.F.contSize(L.fdtree,L.dhst),I=a+i.F.contSize(L.ltree,L.lhst)+i.F.contSize(L.dtree,L.dhst);I+=14+3*N+i.F.contSize(L.itree,L.ihst)+(2*L.ihst[16]+3*L.ihst[17]+7*L.ihst[18]);for(var M=0;M<286;M++)L.lhst[M]=0;for(M=0;M<30;M++)L.dhst[M]=0;for(M=0;M<19;M++)L.ihst[M]=0;var R=T<S&&T<I?0:S<I?1:2;if(b(m,p,r),b(m,p+1,R),p+=3,R==0){for(;7&p;)p++;p=i.F._copyExact(c,f,d,m,p)}else{var F,G;if(R==1&&(F=L.fltree,G=L.fdtree),R==2){i.F.makeCodes(L.ltree,E),i.F.revCodes(L.ltree,E),i.F.makeCodes(L.dtree,x),i.F.revCodes(L.dtree,x),i.F.makeCodes(L.itree,P),i.F.revCodes(L.itree,P),F=L.ltree,G=L.dtree,_(m,p,A-257),_(m,p+=5,w-1),_(m,p+=5,N-4),p+=4;for(var V=0;V<N;V++)_(m,p+3*V,L.itree[1+(L.ordr[V]<<1)]);p+=3*N,p=i.F._codeTiny(D,L.itree,m,p),p=i.F._codeTiny(O,L.itree,m,p)}for(var k=f,$=0;$<o;$+=2){for(var B=s[$],K=B>>>23,ne=k+(8388607&B);k<ne;)p=i.F._writeLit(c[k++],F,m,p);if(K!=0){var z=s[$+1],Q=z>>16,H=z>>8&255,Y=255&z;_(m,p=i.F._writeLit(257+H,F,m,p),K-L.of0[H]),p+=L.exb[H],b(m,p=i.F._writeLit(Y,G,m,p),Q-L.df0[Y]),p+=L.dxb[Y],k+=K}}p=i.F._writeLit(256,F,m,p)}return p},i.F._copyExact=function(r,s,o,a,c){var f=c>>>3;return a[f]=o,a[f+1]=o>>>8,a[f+2]=255-a[f],a[f+3]=255-a[f+1],f+=4,a.set(new Uint8Array(r.buffer,s,o),f),c+(o+4<<3)},i.F.getTrees=function(){for(var r=i.F.U,s=i.F._hufTree(r.lhst,r.ltree,15),o=i.F._hufTree(r.dhst,r.dtree,15),a=[],c=i.F._lenCodes(r.ltree,a),f=[],d=i.F._lenCodes(r.dtree,f),m=0;m<a.length;m+=2)r.ihst[a[m]]++;for(m=0;m<f.length;m+=2)r.ihst[f[m]]++;for(var p=i.F._hufTree(r.ihst,r.itree,7),g=19;g>4&&r.itree[1+(r.ordr[g-1]<<1)]==0;)g--;return[s,o,p,c,d,g,a,f]},i.F.getSecond=function(r){for(var s=[],o=0;o<r.length;o+=2)s.push(r[o+1]);return s},i.F.nonZero=function(r){for(var s="",o=0;o<r.length;o+=2)r[o+1]!=0&&(s+=(o>>1)+",");return s},i.F.contSize=function(r,s){for(var o=0,a=0;a<s.length;a++)o+=s[a]*r[1+(a<<1)];return o},i.F._codeTiny=function(r,s,o,a){for(var c=0;c<r.length;c+=2){var f=r[c],d=r[c+1];a=i.F._writeLit(f,s,o,a);var m=f==16?2:f==17?3:7;f>15&&(i.F._putsE(o,a,d,m),a+=m)}return a},i.F._lenCodes=function(r,s){for(var o=r.length;o!=2&&r[o-1]==0;)o-=2;for(var a=0;a<o;a+=2){var c=r[a+1],f=a+3<o?r[a+3]:-1,d=a+5<o?r[a+5]:-1,m=a==0?-1:r[a-1];if(c==0&&f==c&&d==c){for(var p=a+5;p+2<o&&r[p+2]==c;)p+=2;(g=Math.min(p+1-a>>>1,138))<11?s.push(17,g-3):s.push(18,g-11),a+=2*g-2}else if(c==m&&f==c&&d==c){for(p=a+5;p+2<o&&r[p+2]==c;)p+=2;var g=Math.min(p+1-a>>>1,6);s.push(16,g-3),a+=2*g-2}else s.push(c,0)}return o>>>1},i.F._hufTree=function(r,s,o){var a=[],c=r.length,f=s.length,d=0;for(d=0;d<f;d+=2)s[d]=0,s[d+1]=0;for(d=0;d<c;d++)r[d]!=0&&a.push({lit:d,f:r[d]});var m=a.length,p=a.slice(0);if(m==0)return 0;if(m==1){var g=a[0].lit;return p=g==0?1:0,s[1+(g<<1)]=1,s[1+(p<<1)]=1,1}a.sort(function(D,O){return D.f-O.f});var E=a[0],x=a[1],P=0,A=1,w=2;for(a[0]={lit:-1,f:E.f+x.f,l:E,r:x,d:0};A!=m-1;)E=P!=A&&(w==m||a[P].f<a[w].f)?a[P++]:a[w++],x=P!=A&&(w==m||a[P].f<a[w].f)?a[P++]:a[w++],a[A++]={lit:-1,f:E.f+x.f,l:E,r:x};var N=i.F.setDepth(a[A-1],0);for(N>o&&(i.F.restrictDepth(p,o,N),N=o),d=0;d<m;d++)s[1+(p[d].lit<<1)]=p[d].d;return N},i.F.setDepth=function(r,s){return r.lit!=-1?(r.d=s,s):Math.max(i.F.setDepth(r.l,s+1),i.F.setDepth(r.r,s+1))},i.F.restrictDepth=function(r,s,o){var a=0,c=1<<o-s,f=0;for(r.sort(function(m,p){return p.d==m.d?m.f-p.f:p.d-m.d}),a=0;a<r.length&&r[a].d>s;a++){var d=r[a].d;r[a].d=s,f+=c-(1<<o-d)}for(f>>>=o-s;f>0;)(d=r[a].d)<s?(r[a].d++,f-=1<<s-d-1):a++;for(;a>=0;a--)r[a].d==s&&f<0&&(r[a].d--,f++);f!=0&&console.log("debt left")},i.F._goodIndex=function(r,s){var o=0;return s[16|o]<=r&&(o|=16),s[8|o]<=r&&(o|=8),s[4|o]<=r&&(o|=4),s[2|o]<=r&&(o|=2),s[1|o]<=r&&(o|=1),o},i.F._writeLit=function(r,s,o,a){return i.F._putsF(o,a,s[r<<1]),a+s[1+(r<<1)]},i.F.inflate=function(r,s){var o=Uint8Array;if(r[0]==3&&r[1]==0)return s||new o(0);var a=i.F,c=a._bitsF,f=a._bitsE,d=a._decodeTiny,m=a.makeCodes,p=a.codes2map,g=a._get17,E=a.U,x=s==null;x&&(s=new o(r.length>>>2<<3));for(var P,A,w=0,N=0,D=0,O=0,L=0,b=0,_=0,T=0,S=0;w==0;)if(w=c(r,S,1),N=c(r,S+1,2),S+=3,N!=0){if(x&&(s=i.F._check(s,T+(1<<17))),N==1&&(P=E.flmap,A=E.fdmap,b=511,_=31),N==2){D=f(r,S,5)+257,O=f(r,S+5,5)+1,L=f(r,S+10,4)+4,S+=14;for(var I=0;I<38;I+=2)E.itree[I]=0,E.itree[I+1]=0;var M=1;for(I=0;I<L;I++){var R=f(r,S+3*I,3);E.itree[1+(E.ordr[I]<<1)]=R,R>M&&(M=R)}S+=3*L,m(E.itree,M),p(E.itree,M,E.imap),P=E.lmap,A=E.dmap,S=d(E.imap,(1<<M)-1,D+O,r,S,E.ttree);var F=a._copyOut(E.ttree,0,D,E.ltree);b=(1<<F)-1;var G=a._copyOut(E.ttree,D,O,E.dtree);_=(1<<G)-1,m(E.ltree,F),p(E.ltree,F,P),m(E.dtree,G),p(E.dtree,G,A)}for(;;){var V=P[g(r,S)&b];S+=15&V;var k=V>>>4;if(!(k>>>8))s[T++]=k;else{if(k==256)break;var $=T+k-254;if(k>264){var B=E.ldef[k-257];$=T+(B>>>3)+f(r,S,7&B),S+=7&B}var K=A[g(r,S)&_];S+=15&K;var ne=K>>>4,z=E.ddef[ne],Q=(z>>>4)+c(r,S,15&z);for(S+=15&z,x&&(s=i.F._check(s,T+(1<<17)));T<$;)s[T]=s[T++-Q],s[T]=s[T++-Q],s[T]=s[T++-Q],s[T]=s[T++-Q];T=$}}}else{7&S&&(S+=8-(7&S));var H=4+(S>>>3),Y=r[H-4]|r[H-3]<<8;x&&(s=i.F._check(s,T+Y)),s.set(new o(r.buffer,r.byteOffset+H,Y),T),S=H+Y<<3,T+=Y}return s.length==T?s:s.slice(0,T)},i.F._check=function(r,s){var o=r.length;if(s<=o)return r;var a=new Uint8Array(Math.max(o<<1,s));return a.set(r,0),a},i.F._decodeTiny=function(r,s,o,a,c,f){for(var d=i.F._bitsE,m=i.F._get17,p=0;p<o;){var g=r[m(a,c)&s];c+=15&g;var E=g>>>4;if(E<=15)f[p]=E,p++;else{var x=0,P=0;E==16?(P=3+d(a,c,2),c+=2,x=f[p-1]):E==17?(P=3+d(a,c,3),c+=3):E==18&&(P=11+d(a,c,7),c+=7);for(var A=p+P;p<A;)f[p]=x,p++}}return c},i.F._copyOut=function(r,s,o,a){for(var c=0,f=0,d=a.length>>>1;f<o;){var m=r[f+s];a[f<<1]=0,a[1+(f<<1)]=m,m>c&&(c=m),f++}for(;f<d;)a[f<<1]=0,a[1+(f<<1)]=0,f++;return c},i.F.makeCodes=function(r,s){for(var o,a,c,f,d=i.F.U,m=r.length,p=d.bl_count,g=0;g<=s;g++)p[g]=0;for(g=1;g<m;g+=2)p[r[g]]++;var E=d.next_code;for(o=0,p[0]=0,a=1;a<=s;a++)o=o+p[a-1]<<1,E[a]=o;for(c=0;c<m;c+=2)(f=r[c+1])!=0&&(r[c]=E[f],E[f]++)},i.F.codes2map=function(r,s,o){for(var a=r.length,c=i.F.U.rev15,f=0;f<a;f+=2)if(r[f+1]!=0)for(var d=f>>1,m=r[f+1],p=d<<4|m,g=s-m,E=r[f]<<g,x=E+(1<<g);E!=x;)o[c[E]>>>15-s]=p,E++},i.F.revCodes=function(r,s){for(var o=i.F.U.rev15,a=15-s,c=0;c<r.length;c+=2){var f=r[c]<<s-r[c+1];r[c]=o[f]>>>a}},i.F._putsE=function(r,s,o){o<<=7&s;var a=s>>>3;r[a]|=o,r[a+1]|=o>>>8},i.F._putsF=function(r,s,o){o<<=7&s;var a=s>>>3;r[a]|=o,r[a+1]|=o>>>8,r[a+2]|=o>>>16},i.F._bitsE=function(r,s,o){return(r[s>>>3]|r[1+(s>>>3)]<<8)>>>(7&s)&(1<<o)-1},i.F._bitsF=function(r,s,o){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16)>>>(7&s)&(1<<o)-1},i.F._get17=function(r,s){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16)>>>(7&s)},i.F._get25=function(r,s){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16|r[3+(s>>>3)]<<24)>>>(7&s)},i.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var r=i.F.U,s=0;s<32768;s++){var o=s;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,r.rev15[s]=(o>>>16|o<<16)>>>17}function a(c,f,d){for(;f--!=0;)c.push(0,d)}for(s=0;s<32;s++)r.ldef[s]=r.of0[s]<<3|r.exb[s],r.ddef[s]=r.df0[s]<<4|r.dxb[s];a(r.fltree,144,8),a(r.fltree,112,9),a(r.fltree,24,7),a(r.fltree,8,8),i.F.makeCodes(r.fltree,9),i.F.codes2map(r.fltree,9,r.flmap),i.F.revCodes(r.fltree,9),a(r.fdtree,32,5),i.F.makeCodes(r.fdtree,5),i.F.codes2map(r.fdtree,5,r.fdmap),i.F.revCodes(r.fdtree,5),a(r.itree,19,0),a(r.ltree,286,0),a(r.dtree,30,0),a(r.ttree,320,0)}()})();var T7=y7({__proto__:null,default:bf},[bf]);const Jn=function(){var t={nextZero(d,m){for(;d[m]!=0;)m++;return m},readUshort:(d,m)=>d[m]<<8|d[m+1],writeUshort(d,m,p){d[m]=p>>8&255,d[m+1]=255&p},readUint:(d,m)=>16777216*d[m]+(d[m+1]<<16|d[m+2]<<8|d[m+3]),writeUint(d,m,p){d[m]=p>>24&255,d[m+1]=p>>16&255,d[m+2]=p>>8&255,d[m+3]=255&p},readASCII(d,m,p){let g="";for(let E=0;E<p;E++)g+=String.fromCharCode(d[m+E]);return g},writeASCII(d,m,p){for(let g=0;g<p.length;g++)d[m+g]=p.charCodeAt(g)},readBytes(d,m,p){const g=[];for(let E=0;E<p;E++)g.push(d[m+E]);return g},pad:d=>d.length<2?`0${d}`:d,readUTF8(d,m,p){let g,E="";for(let x=0;x<p;x++)E+=`%${t.pad(d[m+x].toString(16))}`;try{g=decodeURIComponent(E)}catch{return t.readASCII(d,m,p)}return g}};function e(d,m,p,g){const E=m*p,x=s(g),P=Math.ceil(m*x/8),A=new Uint8Array(4*E),w=new Uint32Array(A.buffer),{ctype:N}=g,{depth:D}=g,O=t.readUshort;if(N==6){const B=E<<2;if(D==8)for(var L=0;L<B;L+=4)A[L]=d[L],A[L+1]=d[L+1],A[L+2]=d[L+2],A[L+3]=d[L+3];if(D==16)for(L=0;L<B;L++)A[L]=d[L<<1]}else if(N==2){const B=g.tabs.tRNS;if(B==null){if(D==8)for(L=0;L<E;L++){var b=3*L;w[L]=255<<24|d[b+2]<<16|d[b+1]<<8|d[b]}if(D==16)for(L=0;L<E;L++)b=6*L,w[L]=255<<24|d[b+4]<<16|d[b+2]<<8|d[b]}else{var _=B[0];const K=B[1],ne=B[2];if(D==8)for(L=0;L<E;L++){var T=L<<2;b=3*L,w[L]=255<<24|d[b+2]<<16|d[b+1]<<8|d[b],d[b]==_&&d[b+1]==K&&d[b+2]==ne&&(A[T+3]=0)}if(D==16)for(L=0;L<E;L++)T=L<<2,b=6*L,w[L]=255<<24|d[b+4]<<16|d[b+2]<<8|d[b],O(d,b)==_&&O(d,b+2)==K&&O(d,b+4)==ne&&(A[T+3]=0)}}else if(N==3){const B=g.tabs.PLTE,K=g.tabs.tRNS,ne=K?K.length:0;if(D==1)for(var S=0;S<p;S++){var I=S*P,M=S*m;for(L=0;L<m;L++){T=M+L<<2;var R=3*(F=d[I+(L>>3)]>>7-((7&L)<<0)&1);A[T]=B[R],A[T+1]=B[R+1],A[T+2]=B[R+2],A[T+3]=F<ne?K[F]:255}}if(D==2)for(S=0;S<p;S++)for(I=S*P,M=S*m,L=0;L<m;L++)T=M+L<<2,R=3*(F=d[I+(L>>2)]>>6-((3&L)<<1)&3),A[T]=B[R],A[T+1]=B[R+1],A[T+2]=B[R+2],A[T+3]=F<ne?K[F]:255;if(D==4)for(S=0;S<p;S++)for(I=S*P,M=S*m,L=0;L<m;L++)T=M+L<<2,R=3*(F=d[I+(L>>1)]>>4-((1&L)<<2)&15),A[T]=B[R],A[T+1]=B[R+1],A[T+2]=B[R+2],A[T+3]=F<ne?K[F]:255;if(D==8)for(L=0;L<E;L++){var F;T=L<<2,R=3*(F=d[L]),A[T]=B[R],A[T+1]=B[R+1],A[T+2]=B[R+2],A[T+3]=F<ne?K[F]:255}}else if(N==4){if(D==8)for(L=0;L<E;L++){T=L<<2;var G=d[V=L<<1];A[T]=G,A[T+1]=G,A[T+2]=G,A[T+3]=d[V+1]}if(D==16)for(L=0;L<E;L++){var V;T=L<<2,G=d[V=L<<2],A[T]=G,A[T+1]=G,A[T+2]=G,A[T+3]=d[V+2]}}else if(N==0)for(_=g.tabs.tRNS?g.tabs.tRNS:-1,S=0;S<p;S++){const B=S*P,K=S*m;if(D==1)for(var k=0;k<m;k++){var $=(G=255*(d[B+(k>>>3)]>>>7-(7&k)&1))==255*_?0:255;w[K+k]=$<<24|G<<16|G<<8|G}else if(D==2)for(k=0;k<m;k++)$=(G=85*(d[B+(k>>>2)]>>>6-((3&k)<<1)&3))==85*_?0:255,w[K+k]=$<<24|G<<16|G<<8|G;else if(D==4)for(k=0;k<m;k++)$=(G=17*(d[B+(k>>>1)]>>>4-((1&k)<<2)&15))==17*_?0:255,w[K+k]=$<<24|G<<16|G<<8|G;else if(D==8)for(k=0;k<m;k++)$=(G=d[B+k])==_?0:255,w[K+k]=$<<24|G<<16|G<<8|G;else if(D==16)for(k=0;k<m;k++)G=d[B+(k<<1)],$=O(d,B+(k<<1))==_?0:255,w[K+k]=$<<24|G<<16|G<<8|G}return A}function n(d,m,p,g){const E=s(d),x=Math.ceil(p*E/8),P=new Uint8Array((x+1+d.interlace)*g);return m=d.tabs.CgBI?r(m,P):i(m,P),d.interlace==0?m=o(m,d,0,p,g):d.interlace==1&&(m=function(w,N){const D=N.width,O=N.height,L=s(N),b=L>>3,_=Math.ceil(D*L/8),T=new Uint8Array(O*_);let S=0;const I=[0,0,4,0,2,0,1],M=[0,4,0,2,0,1,0],R=[8,8,8,4,4,2,2],F=[8,8,4,4,2,2,1];let G=0;for(;G<7;){const k=R[G],$=F[G];let B=0,K=0,ne=I[G];for(;ne<O;)ne+=k,K++;let z=M[G];for(;z<D;)z+=$,B++;const Q=Math.ceil(B*L/8);o(w,N,S,B,K);let H=0,Y=I[G];for(;Y<O;){let re=M[G],Ae=S+H*Q<<3;for(;re<D;){var V;if(L==1&&(V=(V=w[Ae>>3])>>7-(7&Ae)&1,T[Y*_+(re>>3)]|=V<<7-((7&re)<<0)),L==2&&(V=(V=w[Ae>>3])>>6-(7&Ae)&3,T[Y*_+(re>>2)]|=V<<6-((3&re)<<1)),L==4&&(V=(V=w[Ae>>3])>>4-(7&Ae)&15,T[Y*_+(re>>1)]|=V<<4-((1&re)<<2)),L>=8){const ce=Y*_+re*b;for(let Te=0;Te<b;Te++)T[ce+Te]=w[(Ae>>3)+Te]}Ae+=L,re+=$}H++,Y+=k}B*K!=0&&(S+=K*(1+Q)),G+=1}return T}(m,d)),m}function i(d,m){return r(new Uint8Array(d.buffer,2,d.length-6),m)}var r=function(){const d={H:{}};return d.H.N=function(m,p){const g=Uint8Array;let E,x,P=0,A=0,w=0,N=0,D=0,O=0,L=0,b=0,_=0;if(m[0]==3&&m[1]==0)return p||new g(0);const T=d.H,S=T.b,I=T.e,M=T.R,R=T.n,F=T.A,G=T.Z,V=T.m,k=p==null;for(k&&(p=new g(m.length>>>2<<5));P==0;)if(P=S(m,_,1),A=S(m,_+1,2),_+=3,A!=0){if(k&&(p=d.H.W(p,b+(1<<17))),A==1&&(E=V.J,x=V.h,O=511,L=31),A==2){w=I(m,_,5)+257,N=I(m,_+5,5)+1,D=I(m,_+10,4)+4,_+=14;let B=1;for(var $=0;$<38;$+=2)V.Q[$]=0,V.Q[$+1]=0;for($=0;$<D;$++){const z=I(m,_+3*$,3);V.Q[1+(V.X[$]<<1)]=z,z>B&&(B=z)}_+=3*D,R(V.Q,B),F(V.Q,B,V.u),E=V.w,x=V.d,_=M(V.u,(1<<B)-1,w+N,m,_,V.v);const K=T.V(V.v,0,w,V.C);O=(1<<K)-1;const ne=T.V(V.v,w,N,V.D);L=(1<<ne)-1,R(V.C,K),F(V.C,K,E),R(V.D,ne),F(V.D,ne,x)}for(;;){const B=E[G(m,_)&O];_+=15&B;const K=B>>>4;if(!(K>>>8))p[b++]=K;else{if(K==256)break;{let ne=b+K-254;if(K>264){const re=V.q[K-257];ne=b+(re>>>3)+I(m,_,7&re),_+=7&re}const z=x[G(m,_)&L];_+=15&z;const Q=z>>>4,H=V.c[Q],Y=(H>>>4)+S(m,_,15&H);for(_+=15&H;b<ne;)p[b]=p[b++-Y],p[b]=p[b++-Y],p[b]=p[b++-Y],p[b]=p[b++-Y];b=ne}}}}else{7&_&&(_+=8-(7&_));const B=4+(_>>>3),K=m[B-4]|m[B-3]<<8;k&&(p=d.H.W(p,b+K)),p.set(new g(m.buffer,m.byteOffset+B,K),b),_=B+K<<3,b+=K}return p.length==b?p:p.slice(0,b)},d.H.W=function(m,p){const g=m.length;if(p<=g)return m;const E=new Uint8Array(g<<1);return E.set(m,0),E},d.H.R=function(m,p,g,E,x,P){const A=d.H.e,w=d.H.Z;let N=0;for(;N<g;){const D=m[w(E,x)&p];x+=15&D;const O=D>>>4;if(O<=15)P[N]=O,N++;else{let L=0,b=0;O==16?(b=3+A(E,x,2),x+=2,L=P[N-1]):O==17?(b=3+A(E,x,3),x+=3):O==18&&(b=11+A(E,x,7),x+=7);const _=N+b;for(;N<_;)P[N]=L,N++}}return x},d.H.V=function(m,p,g,E){let x=0,P=0;const A=E.length>>>1;for(;P<g;){const w=m[P+p];E[P<<1]=0,E[1+(P<<1)]=w,w>x&&(x=w),P++}for(;P<A;)E[P<<1]=0,E[1+(P<<1)]=0,P++;return x},d.H.n=function(m,p){const g=d.H.m,E=m.length;let x,P,A,w;const N=g.j;for(var D=0;D<=p;D++)N[D]=0;for(D=1;D<E;D+=2)N[m[D]]++;const O=g.K;for(x=0,N[0]=0,P=1;P<=p;P++)x=x+N[P-1]<<1,O[P]=x;for(A=0;A<E;A+=2)w=m[A+1],w!=0&&(m[A]=O[w],O[w]++)},d.H.A=function(m,p,g){const E=m.length,x=d.H.m.r;for(let P=0;P<E;P+=2)if(m[P+1]!=0){const A=P>>1,w=m[P+1],N=A<<4|w,D=p-w;let O=m[P]<<D;const L=O+(1<<D);for(;O!=L;)g[x[O]>>>15-p]=N,O++}},d.H.l=function(m,p){const g=d.H.m.r,E=15-p;for(let x=0;x<m.length;x+=2){const P=m[x]<<p-m[x+1];m[x]=g[P]>>>E}},d.H.M=function(m,p,g){g<<=7&p;const E=p>>>3;m[E]|=g,m[E+1]|=g>>>8},d.H.I=function(m,p,g){g<<=7&p;const E=p>>>3;m[E]|=g,m[E+1]|=g>>>8,m[E+2]|=g>>>16},d.H.e=function(m,p,g){return(m[p>>>3]|m[1+(p>>>3)]<<8)>>>(7&p)&(1<<g)-1},d.H.b=function(m,p,g){return(m[p>>>3]|m[1+(p>>>3)]<<8|m[2+(p>>>3)]<<16)>>>(7&p)&(1<<g)-1},d.H.Z=function(m,p){return(m[p>>>3]|m[1+(p>>>3)]<<8|m[2+(p>>>3)]<<16)>>>(7&p)},d.H.i=function(m,p){return(m[p>>>3]|m[1+(p>>>3)]<<8|m[2+(p>>>3)]<<16|m[3+(p>>>3)]<<24)>>>(7&p)},d.H.m=function(){const m=Uint16Array,p=Uint32Array;return{K:new m(16),j:new m(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new m(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new p(32),J:new m(512),_:[],h:new m(32),$:[],w:new m(32768),C:[],v:[],d:new m(32768),D:[],u:new m(512),Q:[],r:new m(32768),s:new p(286),Y:new p(30),a:new p(19),t:new p(15e3),k:new m(65536),g:new m(32768)}}(),function(){const m=d.H.m;for(var p=0;p<32768;p++){let E=p;E=(2863311530&E)>>>1|(1431655765&E)<<1,E=(3435973836&E)>>>2|(858993459&E)<<2,E=(4042322160&E)>>>4|(252645135&E)<<4,E=(4278255360&E)>>>8|(16711935&E)<<8,m.r[p]=(E>>>16|E<<16)>>>17}function g(E,x,P){for(;x--!=0;)E.push(0,P)}for(p=0;p<32;p++)m.q[p]=m.S[p]<<3|m.T[p],m.c[p]=m.p[p]<<4|m.z[p];g(m._,144,8),g(m._,112,9),g(m._,24,7),g(m._,8,8),d.H.n(m._,9),d.H.A(m._,9,m.J),d.H.l(m._,9),g(m.$,32,5),d.H.n(m.$,5),d.H.A(m.$,5,m.h),d.H.l(m.$,5),g(m.Q,19,0),g(m.C,286,0),g(m.D,30,0),g(m.v,320,0)}(),d.H.N}();function s(d){return[1,null,3,1,2,null,4][d.ctype]*d.depth}function o(d,m,p,g,E){let x=s(m);const P=Math.ceil(g*x/8);let A,w;x=Math.ceil(x/8);let N=d[p],D=0;if(N>1&&(d[p]=[0,0,1][N-2]),N==3)for(D=x;D<P;D++)d[D+1]=d[D+1]+(d[D+1-x]>>>1)&255;for(let O=0;O<E;O++)if(A=p+O*P,w=A+O+1,N=d[w-1],D=0,N==0)for(;D<P;D++)d[A+D]=d[w+D];else if(N==1){for(;D<x;D++)d[A+D]=d[w+D];for(;D<P;D++)d[A+D]=d[w+D]+d[A+D-x]}else if(N==2)for(;D<P;D++)d[A+D]=d[w+D]+d[A+D-P];else if(N==3){for(;D<x;D++)d[A+D]=d[w+D]+(d[A+D-P]>>>1);for(;D<P;D++)d[A+D]=d[w+D]+(d[A+D-P]+d[A+D-x]>>>1)}else{for(;D<x;D++)d[A+D]=d[w+D]+a(0,d[A+D-P],0);for(;D<P;D++)d[A+D]=d[w+D]+a(d[A+D-x],d[A+D-P],d[A+D-x-P])}return d}function a(d,m,p){const g=d+m-p,E=g-d,x=g-m,P=g-p;return E*E<=x*x&&E*E<=P*P?d:x*x<=P*P?m:p}function c(d,m,p){p.width=t.readUint(d,m),m+=4,p.height=t.readUint(d,m),m+=4,p.depth=d[m],m++,p.ctype=d[m],m++,p.compress=d[m],m++,p.filter=d[m],m++,p.interlace=d[m],m++}function f(d,m,p,g,E,x,P,A,w){const N=Math.min(m,E),D=Math.min(p,x);let O=0,L=0;for(let G=0;G<D;G++)for(let V=0;V<N;V++)if(P>=0&&A>=0?(O=G*m+V<<2,L=(A+G)*E+P+V<<2):(O=(-A+G)*m-P+V<<2,L=G*E+V<<2),w==0)g[L]=d[O],g[L+1]=d[O+1],g[L+2]=d[O+2],g[L+3]=d[O+3];else if(w==1){var b=d[O+3]*.00392156862745098,_=d[O]*b,T=d[O+1]*b,S=d[O+2]*b,I=g[L+3]*(1/255),M=g[L]*I,R=g[L+1]*I,F=g[L+2]*I;const k=1-b,$=b+I*k,B=$==0?0:1/$;g[L+3]=255*$,g[L+0]=(_+M*k)*B,g[L+1]=(T+R*k)*B,g[L+2]=(S+F*k)*B}else if(w==2)b=d[O+3],_=d[O],T=d[O+1],S=d[O+2],I=g[L+3],M=g[L],R=g[L+1],F=g[L+2],b==I&&_==M&&T==R&&S==F?(g[L]=0,g[L+1]=0,g[L+2]=0,g[L+3]=0):(g[L]=_,g[L+1]=T,g[L+2]=S,g[L+3]=b);else if(w==3){if(b=d[O+3],_=d[O],T=d[O+1],S=d[O+2],I=g[L+3],M=g[L],R=g[L+1],F=g[L+2],b==I&&_==M&&T==R&&S==F)continue;if(b<220&&I>20)return!1}return!0}return{decode:function(m){const p=new Uint8Array(m);let g=8;const E=t,x=E.readUshort,P=E.readUint,A={tabs:{},frames:[]},w=new Uint8Array(p.length);let N,D=0,O=0;const L=[137,80,78,71,13,10,26,10];for(var b=0;b<8;b++)if(p[b]!=L[b])throw"The input is not a PNG file!";for(;g<p.length;){const G=E.readUint(p,g);g+=4;const V=E.readASCII(p,g,4);if(g+=4,V=="IHDR")c(p,g,A);else if(V=="iCCP"){for(var _=g;p[_]!=0;)_++;E.readASCII(p,g,_-g),p[_+1];const k=p.slice(_+2,g+G);let $=null;try{$=i(k)}catch{$=r(k)}A.tabs[V]=$}else if(V=="CgBI")A.tabs[V]=p.slice(g,g+4);else if(V=="IDAT"){for(b=0;b<G;b++)w[D+b]=p[g+b];D+=G}else if(V=="acTL")A.tabs[V]={num_frames:P(p,g),num_plays:P(p,g+4)},N=new Uint8Array(p.length);else if(V=="fcTL"){O!=0&&((F=A.frames[A.frames.length-1]).data=n(A,N.slice(0,O),F.rect.width,F.rect.height),O=0);const k={x:P(p,g+12),y:P(p,g+16),width:P(p,g+4),height:P(p,g+8)};let $=x(p,g+22);$=x(p,g+20)/($==0?100:$);const B={rect:k,delay:Math.round(1e3*$),dispose:p[g+24],blend:p[g+25]};A.frames.push(B)}else if(V=="fdAT"){for(b=0;b<G-4;b++)N[O+b]=p[g+b+4];O+=G-4}else if(V=="pHYs")A.tabs[V]=[E.readUint(p,g),E.readUint(p,g+4),p[g+8]];else if(V=="cHRM")for(A.tabs[V]=[],b=0;b<8;b++)A.tabs[V].push(E.readUint(p,g+4*b));else if(V=="tEXt"||V=="zTXt"){A.tabs[V]==null&&(A.tabs[V]={});var T=E.nextZero(p,g),S=E.readASCII(p,g,T-g),I=g+G-T-1;if(V=="tEXt")R=E.readASCII(p,T+1,I);else{var M=i(p.slice(T+2,T+2+I));R=E.readUTF8(M,0,M.length)}A.tabs[V][S]=R}else if(V=="iTXt"){A.tabs[V]==null&&(A.tabs[V]={}),T=0,_=g,T=E.nextZero(p,_),S=E.readASCII(p,_,T-_);const k=p[_=T+1];var R;p[_+1],_+=2,T=E.nextZero(p,_),E.readASCII(p,_,T-_),_=T+1,T=E.nextZero(p,_),E.readUTF8(p,_,T-_),I=G-((_=T+1)-g),k==0?R=E.readUTF8(p,_,I):(M=i(p.slice(_,_+I)),R=E.readUTF8(M,0,M.length)),A.tabs[V][S]=R}else if(V=="PLTE")A.tabs[V]=E.readBytes(p,g,G);else if(V=="hIST"){const k=A.tabs.PLTE.length/3;for(A.tabs[V]=[],b=0;b<k;b++)A.tabs[V].push(x(p,g+2*b))}else if(V=="tRNS")A.ctype==3?A.tabs[V]=E.readBytes(p,g,G):A.ctype==0?A.tabs[V]=x(p,g):A.ctype==2&&(A.tabs[V]=[x(p,g),x(p,g+2),x(p,g+4)]);else if(V=="gAMA")A.tabs[V]=E.readUint(p,g)/1e5;else if(V=="sRGB")A.tabs[V]=p[g];else if(V=="bKGD")A.ctype==0||A.ctype==4?A.tabs[V]=[x(p,g)]:A.ctype==2||A.ctype==6?A.tabs[V]=[x(p,g),x(p,g+2),x(p,g+4)]:A.ctype==3&&(A.tabs[V]=p[g]);else if(V=="IEND")break;g+=G,E.readUint(p,g),g+=4}var F;return O!=0&&((F=A.frames[A.frames.length-1]).data=n(A,N.slice(0,O),F.rect.width,F.rect.height)),A.data=n(A,w,A.width,A.height),delete A.compress,delete A.interlace,delete A.filter,A},toRGBA8:function(m){const p=m.width,g=m.height;if(m.tabs.acTL==null)return[e(m.data,p,g,m).buffer];const E=[];m.frames[0].data==null&&(m.frames[0].data=m.data);const x=p*g*4,P=new Uint8Array(x),A=new Uint8Array(x),w=new Uint8Array(x);for(let D=0;D<m.frames.length;D++){const O=m.frames[D],L=O.rect.x,b=O.rect.y,_=O.rect.width,T=O.rect.height,S=e(O.data,_,T,m);if(D!=0)for(var N=0;N<x;N++)w[N]=P[N];if(O.blend==0?f(S,_,T,P,p,g,L,b,0):O.blend==1&&f(S,_,T,P,p,g,L,b,1),E.push(P.buffer.slice(0)),O.dispose!=0){if(O.dispose==1)f(A,_,T,P,p,g,L,b,0);else if(O.dispose==2)for(N=0;N<x;N++)P[N]=w[N]}}return E},_paeth:a,_copyTile:f,_bin:t}}();(function(){const{_copyTile:t}=Jn,{_bin:e}=Jn,n=Jn._paeth;var i={table:function(){const _=new Uint32Array(256);for(let T=0;T<256;T++){let S=T;for(let I=0;I<8;I++)1&S?S=3988292384^S>>>1:S>>>=1;_[T]=S}return _}(),update(_,T,S,I){for(let M=0;M<I;M++)_=i.table[255&(_^T[S+M])]^_>>>8;return _},crc:(_,T,S)=>4294967295^i.update(4294967295,_,T,S)};function r(_,T,S,I){T[S]+=_[0]*I>>4,T[S+1]+=_[1]*I>>4,T[S+2]+=_[2]*I>>4,T[S+3]+=_[3]*I>>4}function s(_){return Math.max(0,Math.min(255,_))}function o(_,T){const S=_[0]-T[0],I=_[1]-T[1],M=_[2]-T[2],R=_[3]-T[3];return S*S+I*I+M*M+R*R}function a(_,T,S,I,M,R,F){F==null&&(F=1);const G=I.length,V=[];for(var k=0;k<G;k++){const Y=I[k];V.push([Y>>>0&255,Y>>>8&255,Y>>>16&255,Y>>>24&255])}for(k=0;k<G;k++){let Y=4294967295;for(var $=0,B=0;B<G;B++){var K=o(V[k],V[B]);B!=k&&K<Y&&(Y=K,$=B)}}const ne=new Uint32Array(M.buffer),z=new Int16Array(T*S*4),Q=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(k=0;k<Q.length;k++)Q[k]=255*((Q[k]+.5)/16-.5);for(let Y=0;Y<S;Y++)for(let re=0;re<T;re++){var H;k=4*(Y*T+re),F!=2?H=[s(_[k]+z[k]),s(_[k+1]+z[k+1]),s(_[k+2]+z[k+2]),s(_[k+3]+z[k+3])]:(K=Q[4*(3&Y)+(3&re)],H=[s(_[k]+K),s(_[k+1]+K),s(_[k+2]+K),s(_[k+3]+K)]),$=0;let Ae=16777215;for(B=0;B<G;B++){const be=o(H,V[B]);be<Ae&&(Ae=be,$=B)}const ce=V[$],Te=[H[0]-ce[0],H[1]-ce[1],H[2]-ce[2],H[3]-ce[3]];F==1&&(re!=T-1&&r(Te,z,k+4,7),Y!=S-1&&(re!=0&&r(Te,z,k+4*T-4,3),r(Te,z,k+4*T,5),re!=T-1&&r(Te,z,k+4*T+4,1))),R[k>>2]=$,ne[k>>2]=I[$]}}function c(_,T,S,I,M){M==null&&(M={});const{crc:R}=i,F=e.writeUint,G=e.writeUshort,V=e.writeASCII;let k=8;const $=_.frames.length>1;let B,K=!1,ne=33+($?20:0);if(M.sRGB!=null&&(ne+=13),M.pHYs!=null&&(ne+=21),M.iCCP!=null&&(B=pako.deflate(M.iCCP),ne+=21+B.length+4),_.ctype==3){for(var z=_.plte.length,Q=0;Q<z;Q++)_.plte[Q]>>>24!=255&&(K=!0);ne+=8+3*z+4+(K?8+1*z+4:0)}for(var H=0;H<_.frames.length;H++)$&&(ne+=38),ne+=(ce=_.frames[H]).cimg.length+12,H!=0&&(ne+=4);ne+=12;const Y=new Uint8Array(ne),re=[137,80,78,71,13,10,26,10];for(Q=0;Q<8;Q++)Y[Q]=re[Q];if(F(Y,k,13),k+=4,V(Y,k,"IHDR"),k+=4,F(Y,k,T),k+=4,F(Y,k,S),k+=4,Y[k]=_.depth,k++,Y[k]=_.ctype,k++,Y[k]=0,k++,Y[k]=0,k++,Y[k]=0,k++,F(Y,k,R(Y,k-17,17)),k+=4,M.sRGB!=null&&(F(Y,k,1),k+=4,V(Y,k,"sRGB"),k+=4,Y[k]=M.sRGB,k++,F(Y,k,R(Y,k-5,5)),k+=4),M.iCCP!=null){const Te=13+B.length;F(Y,k,Te),k+=4,V(Y,k,"iCCP"),k+=4,V(Y,k,"ICC profile"),k+=11,k+=2,Y.set(B,k),k+=B.length,F(Y,k,R(Y,k-(Te+4),Te+4)),k+=4}if(M.pHYs!=null&&(F(Y,k,9),k+=4,V(Y,k,"pHYs"),k+=4,F(Y,k,M.pHYs[0]),k+=4,F(Y,k,M.pHYs[1]),k+=4,Y[k]=M.pHYs[2],k++,F(Y,k,R(Y,k-13,13)),k+=4),$&&(F(Y,k,8),k+=4,V(Y,k,"acTL"),k+=4,F(Y,k,_.frames.length),k+=4,F(Y,k,M.loop!=null?M.loop:0),k+=4,F(Y,k,R(Y,k-12,12)),k+=4),_.ctype==3){for(F(Y,k,3*(z=_.plte.length)),k+=4,V(Y,k,"PLTE"),k+=4,Q=0;Q<z;Q++){const Te=3*Q,be=_.plte[Q],Oe=255&be,We=be>>>8&255,Hn=be>>>16&255;Y[k+Te+0]=Oe,Y[k+Te+1]=We,Y[k+Te+2]=Hn}if(k+=3*z,F(Y,k,R(Y,k-3*z-4,3*z+4)),k+=4,K){for(F(Y,k,z),k+=4,V(Y,k,"tRNS"),k+=4,Q=0;Q<z;Q++)Y[k+Q]=_.plte[Q]>>>24&255;k+=z,F(Y,k,R(Y,k-z-4,z+4)),k+=4}}let Ae=0;for(H=0;H<_.frames.length;H++){var ce=_.frames[H];$&&(F(Y,k,26),k+=4,V(Y,k,"fcTL"),k+=4,F(Y,k,Ae++),k+=4,F(Y,k,ce.rect.width),k+=4,F(Y,k,ce.rect.height),k+=4,F(Y,k,ce.rect.x),k+=4,F(Y,k,ce.rect.y),k+=4,G(Y,k,I[H]),k+=2,G(Y,k,1e3),k+=2,Y[k]=ce.dispose,k++,Y[k]=ce.blend,k++,F(Y,k,R(Y,k-30,30)),k+=4);const Te=ce.cimg;F(Y,k,(z=Te.length)+(H==0?0:4)),k+=4;const be=k;V(Y,k,H==0?"IDAT":"fdAT"),k+=4,H!=0&&(F(Y,k,Ae++),k+=4),Y.set(Te,k),k+=z,F(Y,k,R(Y,be,k-be)),k+=4}return F(Y,k,0),k+=4,V(Y,k,"IEND"),k+=4,F(Y,k,R(Y,k-4,4)),k+=4,Y.buffer}function f(_,T,S){for(let I=0;I<_.frames.length;I++){const M=_.frames[I];M.rect.width;const R=M.rect.height,F=new Uint8Array(R*M.bpl+R);M.cimg=g(M.img,R,M.bpp,M.bpl,F,T,S)}}function d(_,T,S,I,M){const R=M[0],F=M[1],G=M[2],V=M[3],k=M[4],$=M[5];let B=6,K=8,ne=255;for(var z=0;z<_.length;z++){const vt=new Uint8Array(_[z]);for(var Q=vt.length,H=0;H<Q;H+=4)ne&=vt[H+3]}const Y=ne!=255,re=function(ze,ke,ct,_t,Ze,Qt){const Je=[];for(var Re=0;Re<ze.length;Re++){const St=new Uint8Array(ze[Re]),dn=new Uint32Array(St.buffer);var Ot;let wt=0,In=0,hn=ke,$n=ct,ha=_t?1:0;if(Re!=0){const Ed=Qt||_t||Re==1||Je[Re-2].dispose!=0?1:2;let Xr=0,ma=1e9;for(let Zi=0;Zi<Ed;Zi++){var Ge=new Uint8Array(ze[Re-1-Zi]);const jr=new Uint32Array(ze[Re-1-Zi]);let Rn=ke,Nn=ct,tn=-1,er=-1;for(let ii=0;ii<ct;ii++)for(let mn=0;mn<ke;mn++)dn[st=ii*ke+mn]!=jr[st]&&(mn<Rn&&(Rn=mn),mn>tn&&(tn=mn),ii<Nn&&(Nn=ii),ii>er&&(er=ii));tn==-1&&(Rn=Nn=tn=er=0),Ze&&((1&Rn)==1&&Rn--,(1&Nn)==1&&Nn--);const Wr=(tn-Rn+1)*(er-Nn+1);Wr<ma&&(ma=Wr,Xr=Zi,wt=Rn,In=Nn,hn=tn-Rn+1,$n=er-Nn+1)}Ge=new Uint8Array(ze[Re-1-Xr]),Xr==1&&(Je[Re-1].dispose=2),Ot=new Uint8Array(hn*$n*4),t(Ge,ke,ct,Ot,hn,$n,-wt,-In,0),ha=t(St,ke,ct,Ot,hn,$n,-wt,-In,3)?1:0,ha==1?p(St,ke,ct,Ot,{x:wt,y:In,width:hn,height:$n}):t(St,ke,ct,Ot,hn,$n,-wt,-In,0)}else Ot=St.slice(0);Je.push({rect:{x:wt,y:In,width:hn,height:$n},img:Ot,blend:ha,dispose:0})}if(_t)for(Re=0;Re<Je.length;Re++){if((ni=Je[Re]).blend==1)continue;const St=ni.rect,dn=Je[Re-1].rect,wt=Math.min(St.x,dn.x),In=Math.min(St.y,dn.y),hn={x:wt,y:In,width:Math.max(St.x+St.width,dn.x+dn.width)-wt,height:Math.max(St.y+St.height,dn.y+dn.height)-In};Je[Re-1].dispose=1,Re-1!=0&&m(ze,ke,ct,Je,Re-1,hn,Ze),m(ze,ke,ct,Je,Re,hn,Ze)}let ft=0;if(ze.length!=1)for(var st=0;st<Je.length;st++){var ni;ft+=(ni=Je[st]).rect.width*ni.rect.height}return Je}(_,T,S,R,F,G),Ae={},ce=[],Te=[];if(I!=0){const vt=[];for(H=0;H<re.length;H++)vt.push(re[H].img.buffer);const ze=function(Ze){let Qt=0;for(var Je=0;Je<Ze.length;Je++)Qt+=Ze[Je].byteLength;const Re=new Uint8Array(Qt);let Ot=0;for(Je=0;Je<Ze.length;Je++){const Ge=new Uint8Array(Ze[Je]),ft=Ge.length;for(let st=0;st<ft;st+=4){let ni=Ge[st],St=Ge[st+1],dn=Ge[st+2];const wt=Ge[st+3];wt==0&&(ni=St=dn=0),Re[Ot+st]=ni,Re[Ot+st+1]=St,Re[Ot+st+2]=dn,Re[Ot+st+3]=wt}Ot+=ft}return Re.buffer}(vt),ke=x(ze,I);for(H=0;H<ke.plte.length;H++)ce.push(ke.plte[H].est.rgba);let ct=0;for(H=0;H<re.length;H++){const _t=(Oe=re[H]).img.length;var be=new Uint8Array(ke.inds.buffer,ct>>2,_t>>2);Te.push(be);const Ze=new Uint8Array(ke.abuf,ct,_t);$&&a(Oe.img,Oe.rect.width,Oe.rect.height,ce,Ze,be),Oe.img.set(Ze),ct+=_t}}else for(z=0;z<re.length;z++){var Oe=re[z];const vt=new Uint32Array(Oe.img.buffer);var We=Oe.rect.width;for(Q=vt.length,be=new Uint8Array(Q),Te.push(be),H=0;H<Q;H++){const ze=vt[H];if(H!=0&&ze==vt[H-1])be[H]=be[H-1];else if(H>We&&ze==vt[H-We])be[H]=be[H-We];else{let ke=Ae[ze];if(ke==null&&(Ae[ze]=ke=ce.length,ce.push(ze),ce.length>=300))break;be[H]=ke}}}const Hn=ce.length;for(Hn<=256&&k==0&&(K=Hn<=2?1:Hn<=4?2:Hn<=16?4:8,K=Math.max(K,V)),z=0;z<re.length;z++){(Oe=re[z]).rect.x,Oe.rect.y,We=Oe.rect.width;const vt=Oe.rect.height;let ze=Oe.img;new Uint32Array(ze.buffer);let ke=4*We,ct=4;if(Hn<=256&&k==0){ke=Math.ceil(K*We/8);var en=new Uint8Array(ke*vt);const _t=Te[z];for(let Ze=0;Ze<vt;Ze++){H=Ze*ke;const Qt=Ze*We;if(K==8)for(var Fe=0;Fe<We;Fe++)en[H+Fe]=_t[Qt+Fe];else if(K==4)for(Fe=0;Fe<We;Fe++)en[H+(Fe>>1)]|=_t[Qt+Fe]<<4-4*(1&Fe);else if(K==2)for(Fe=0;Fe<We;Fe++)en[H+(Fe>>2)]|=_t[Qt+Fe]<<6-2*(3&Fe);else if(K==1)for(Fe=0;Fe<We;Fe++)en[H+(Fe>>3)]|=_t[Qt+Fe]<<7-1*(7&Fe)}ze=en,B=3,ct=1}else if(Y==0&&re.length==1){en=new Uint8Array(We*vt*3);const _t=We*vt;for(H=0;H<_t;H++){const Ze=3*H,Qt=4*H;en[Ze]=ze[Qt],en[Ze+1]=ze[Qt+1],en[Ze+2]=ze[Qt+2]}ze=en,B=2,ct=3,ke=3*We}Oe.img=ze,Oe.bpl=ke,Oe.bpp=ct}return{ctype:B,depth:K,plte:ce,frames:re}}function m(_,T,S,I,M,R,F){const G=Uint8Array,V=Uint32Array,k=new G(_[M-1]),$=new V(_[M-1]),B=M+1<_.length?new G(_[M+1]):null,K=new G(_[M]),ne=new V(K.buffer);let z=T,Q=S,H=-1,Y=-1;for(let Ae=0;Ae<R.height;Ae++)for(let ce=0;ce<R.width;ce++){const Te=R.x+ce,be=R.y+Ae,Oe=be*T+Te,We=ne[Oe];We==0||I[M-1].dispose==0&&$[Oe]==We&&(B==null||B[4*Oe+3]!=0)||(Te<z&&(z=Te),Te>H&&(H=Te),be<Q&&(Q=be),be>Y&&(Y=be))}H==-1&&(z=Q=H=Y=0),F&&((1&z)==1&&z--,(1&Q)==1&&Q--),R={x:z,y:Q,width:H-z+1,height:Y-Q+1};const re=I[M];re.rect=R,re.blend=1,re.img=new Uint8Array(R.width*R.height*4),I[M-1].dispose==0?(t(k,T,S,re.img,R.width,R.height,-R.x,-R.y,0),p(K,T,S,re.img,R)):t(K,T,S,re.img,R.width,R.height,-R.x,-R.y,0)}function p(_,T,S,I,M){t(_,T,S,I,M.width,M.height,-M.x,-M.y,2)}function g(_,T,S,I,M,R,F){const G=[];let V,k=[0,1,2,3,4];R!=-1?k=[R]:(T*I>5e5||S==1)&&(k=[0]),F&&(V={level:0});const $=T7;for(var B=0;B<k.length;B++){for(let z=0;z<T;z++)E(M,_,z,I,S,k[B]);G.push($.deflate(M,V))}let K,ne=1e9;for(B=0;B<G.length;B++)G[B].length<ne&&(K=B,ne=G[B].length);return G[K]}function E(_,T,S,I,M,R){const F=S*I;let G=F+S;if(_[G]=R,G++,R==0)if(I<500)for(var V=0;V<I;V++)_[G+V]=T[F+V];else _.set(new Uint8Array(T.buffer,F,I),G);else if(R==1){for(V=0;V<M;V++)_[G+V]=T[F+V];for(V=M;V<I;V++)_[G+V]=T[F+V]-T[F+V-M]+256&255}else if(S==0){for(V=0;V<M;V++)_[G+V]=T[F+V];if(R==2)for(V=M;V<I;V++)_[G+V]=T[F+V];if(R==3)for(V=M;V<I;V++)_[G+V]=T[F+V]-(T[F+V-M]>>1)+256&255;if(R==4)for(V=M;V<I;V++)_[G+V]=T[F+V]-n(T[F+V-M],0,0)+256&255}else{if(R==2)for(V=0;V<I;V++)_[G+V]=T[F+V]+256-T[F+V-I]&255;if(R==3){for(V=0;V<M;V++)_[G+V]=T[F+V]+256-(T[F+V-I]>>1)&255;for(V=M;V<I;V++)_[G+V]=T[F+V]+256-(T[F+V-I]+T[F+V-M]>>1)&255}if(R==4){for(V=0;V<M;V++)_[G+V]=T[F+V]+256-n(0,T[F+V-I],0)&255;for(V=M;V<I;V++)_[G+V]=T[F+V]+256-n(T[F+V-M],T[F+V-I],T[F+V-M-I])&255}}}function x(_,T){const S=new Uint8Array(_),I=S.slice(0),M=new Uint32Array(I.buffer),R=P(I,T),F=R[0],G=R[1],V=S.length,k=new Uint8Array(V>>2);let $;if(S.length<2e7)for(var B=0;B<V;B+=4)$=A(F,K=S[B]*(1/255),ne=S[B+1]*(1/255),z=S[B+2]*(1/255),Q=S[B+3]*(1/255)),k[B>>2]=$.ind,M[B>>2]=$.est.rgba;else for(B=0;B<V;B+=4){var K=S[B]*.00392156862745098,ne=S[B+1]*(1/255),z=S[B+2]*(1/255),Q=S[B+3]*(1/255);for($=F;$.left;)$=w($.est,K,ne,z,Q)<=0?$.left:$.right;k[B>>2]=$.ind,M[B>>2]=$.est.rgba}return{abuf:I.buffer,inds:k,plte:G}}function P(_,T,S){S==null&&(S=1e-4);const I=new Uint32Array(_.buffer),M={i0:0,i1:_.length,bst:null,est:null,tdst:0,left:null,right:null};M.bst=O(_,M.i0,M.i1),M.est=L(M.bst);const R=[M];for(;R.length<T;){let G=0,V=0;for(var F=0;F<R.length;F++)R[F].est.L>G&&(G=R[F].est.L,V=F);if(G<S)break;const k=R[V],$=N(_,I,k.i0,k.i1,k.est.e,k.est.eMq255);if(k.i0>=$||k.i1<=$){k.est.L=0;continue}const B={i0:k.i0,i1:$,bst:null,est:null,tdst:0,left:null,right:null};B.bst=O(_,B.i0,B.i1),B.est=L(B.bst);const K={i0:$,i1:k.i1,bst:null,est:null,tdst:0,left:null,right:null};for(K.bst={R:[],m:[],N:k.bst.N-B.bst.N},F=0;F<16;F++)K.bst.R[F]=k.bst.R[F]-B.bst.R[F];for(F=0;F<4;F++)K.bst.m[F]=k.bst.m[F]-B.bst.m[F];K.est=L(K.bst),k.left=B,k.right=K,R[V]=B,R.push(K)}for(R.sort((G,V)=>V.bst.N-G.bst.N),F=0;F<R.length;F++)R[F].ind=F;return[M,R]}function A(_,T,S,I,M){if(_.left==null)return _.tdst=function(B,K,ne,z,Q){const H=K-B[0],Y=ne-B[1],re=z-B[2],Ae=Q-B[3];return H*H+Y*Y+re*re+Ae*Ae}(_.est.q,T,S,I,M),_;const R=w(_.est,T,S,I,M);let F=_.left,G=_.right;R>0&&(F=_.right,G=_.left);const V=A(F,T,S,I,M);if(V.tdst<=R*R)return V;const k=A(G,T,S,I,M);return k.tdst<V.tdst?k:V}function w(_,T,S,I,M){const{e:R}=_;return R[0]*T+R[1]*S+R[2]*I+R[3]*M-_.eMq}function N(_,T,S,I,M,R){for(I-=4;S<I;){for(;D(_,S,M)<=R;)S+=4;for(;D(_,I,M)>R;)I-=4;if(S>=I)break;const F=T[S>>2];T[S>>2]=T[I>>2],T[I>>2]=F,S+=4,I-=4}for(;D(_,S,M)>R;)S-=4;return S+4}function D(_,T,S){return _[T]*S[0]+_[T+1]*S[1]+_[T+2]*S[2]+_[T+3]*S[3]}function O(_,T,S){const I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],M=[0,0,0,0],R=S-T>>2;for(let F=T;F<S;F+=4){const G=_[F]*.00392156862745098,V=_[F+1]*(1/255),k=_[F+2]*(1/255),$=_[F+3]*(1/255);M[0]+=G,M[1]+=V,M[2]+=k,M[3]+=$,I[0]+=G*G,I[1]+=G*V,I[2]+=G*k,I[3]+=G*$,I[5]+=V*V,I[6]+=V*k,I[7]+=V*$,I[10]+=k*k,I[11]+=k*$,I[15]+=$*$}return I[4]=I[1],I[8]=I[2],I[9]=I[6],I[12]=I[3],I[13]=I[7],I[14]=I[11],{R:I,m:M,N:R}}function L(_){const{R:T}=_,{m:S}=_,{N:I}=_,M=S[0],R=S[1],F=S[2],G=S[3],V=I==0?0:1/I,k=[T[0]-M*M*V,T[1]-M*R*V,T[2]-M*F*V,T[3]-M*G*V,T[4]-R*M*V,T[5]-R*R*V,T[6]-R*F*V,T[7]-R*G*V,T[8]-F*M*V,T[9]-F*R*V,T[10]-F*F*V,T[11]-F*G*V,T[12]-G*M*V,T[13]-G*R*V,T[14]-G*F*V,T[15]-G*G*V],$=k,B=b;let K=[Math.random(),Math.random(),Math.random(),Math.random()],ne=0,z=0;if(I!=0)for(let H=0;H<16&&(K=B.multVec($,K),z=Math.sqrt(B.dot(K,K)),K=B.sml(1/z,K),!(H!=0&&Math.abs(z-ne)<1e-9));H++)ne=z;const Q=[M*V,R*V,F*V,G*V];return{Cov:k,q:Q,e:K,L:ne,eMq255:B.dot(B.sml(255,Q),K),eMq:B.dot(K,Q),rgba:(Math.round(255*Q[3])<<24|Math.round(255*Q[2])<<16|Math.round(255*Q[1])<<8|Math.round(255*Q[0])<<0)>>>0}}var b={multVec:(_,T)=>[_[0]*T[0]+_[1]*T[1]+_[2]*T[2]+_[3]*T[3],_[4]*T[0]+_[5]*T[1]+_[6]*T[2]+_[7]*T[3],_[8]*T[0]+_[9]*T[1]+_[10]*T[2]+_[11]*T[3],_[12]*T[0]+_[13]*T[1]+_[14]*T[2]+_[15]*T[3]],dot:(_,T)=>_[0]*T[0]+_[1]*T[1]+_[2]*T[2]+_[3]*T[3],sml:(_,T)=>[_*T[0],_*T[1],_*T[2],_*T[3]]};Jn.encode=function(T,S,I,M,R,F,G){M==null&&(M=0),G==null&&(G=!1);const V=d(T,S,I,M,[!1,!1,!1,0,G,!1]);return f(V,-1),c(V,S,I,R,F)},Jn.encodeLL=function(T,S,I,M,R,F,G,V){const k={ctype:0+(M==1?0:2)+(R==0?0:4),depth:F,frames:[]},$=(M+R)*F,B=$*S;for(let K=0;K<T.length;K++)k.frames.push({rect:{x:0,y:0,width:S,height:I},img:new Uint8Array(T[K]),blend:0,dispose:1,bpp:Math.ceil($/8),bpl:Math.ceil(B/8)});return f(k,0,!0),c(k,S,I,G,V)},Jn.encode.compress=d,Jn.encode.dither=a,Jn.quantize=x,Jn.quantize.getKDtree=P,Jn.quantize.getNearest=A})();const Bx={toArrayBuffer(t,e){const n=t.width,i=t.height,r=n<<2,s=t.getContext("2d").getImageData(0,0,n,i),o=new Uint32Array(s.data.buffer),a=(32*n+31)/32<<2,c=a*i,f=122+c,d=new ArrayBuffer(f),m=new DataView(d),p=1<<20;let g,E,x,P,A=p,w=0,N=0,D=0;function O(_){m.setUint16(N,_,!0),N+=2}function L(_){m.setUint32(N,_,!0),N+=4}function b(_){N+=_}O(19778),L(f),b(4),L(122),L(108),L(n),L(-i>>>0),O(1),O(32),L(3),L(c),L(2835),L(2835),b(8),L(16711680),L(65280),L(255),L(4278190080),L(1466527264),function _(){for(;w<i&&A>0;){for(P=122+w*a,g=0;g<r;)A--,E=o[D++],x=E>>>24,m.setUint32(P+g,E<<8|x),g+=4;w++}D<o.length?(A=p,setTimeout(_,Bx._dly)):e(d)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var an={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},E7={[an.CHROME]:16384,[an.FIREFOX]:11180,[an.DESKTOP_SAFARI]:16384,[an.IE]:8192,[an.IOS]:4096,[an.ETC]:8192};const Ey=typeof window<"u",qx=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,If=Ey&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),C7=(Ey||qx)&&(If&&If.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Gx=(Ey||qx)&&(If&&If.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Cy(t,e,n=Date.now()){return new Promise(i=>{const r=t.split(","),s=r[0].match(/:(.*?);/)[1],o=globalThis.atob(r[1]);let a=o.length;const c=new Uint8Array(a);for(;a--;)c[a]=o.charCodeAt(a);const f=new Blob([c],{type:s});f.name=e,f.lastModified=n,i(f)})}function Hx(t){return new Promise((e,n)=>{const i=new Gx;i.onload=()=>e(i.result),i.onerror=r=>n(r),i.readAsDataURL(t)})}function $x(t){return new Promise((e,n)=>{const i=new Image;i.onload=()=>e(i),i.onerror=r=>n(r),i.src=t})}function cs(){if(cs.cachedResult!==void 0)return cs.cachedResult;let t=an.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=an.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=an.IOS:/Safari/i.test(e)?t=an.DESKTOP_SAFARI:/Firefox/i.test(e)?t=an.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=an.IE),cs.cachedResult=t,cs.cachedResult}function Yx(t,e){const n=cs(),i=E7[n];let r=t,s=e,o=r*s;const a=r>s?s/r:r/s;for(;o>i*i;){const c=(i+r)/2,f=(i+s)/2;c<f?(s=f,r=f*a):(s=c*a,r=c),o=r*s}return{width:r,height:s}}function Td(t,e){let n,i;try{if(n=new OffscreenCanvas(t,e),i=n.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),i=n.getContext("2d")}return n.width=t,n.height=e,[n,i]}function Kx(t,e){const{width:n,height:i}=Yx(t.width,t.height),[r,s]=Td(n,i);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,r.width,r.height)),s.drawImage(t,0,0,r.width,r.height),r}function Ac(){return Ac.cachedResult!==void 0||(Ac.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Ac.cachedResult}function Rf(t,e={}){return new Promise(function(n,i){let r,s;var o=function(){try{return s=Kx(r,e.fileType||t.type),n([r,s])}catch(c){return i(c)}},a=function(c){try{var f=function(d){try{throw d}catch(m){return i(m)}};try{let d;return Hx(t).then(function(m){try{return d=m,$x(d).then(function(p){try{return r=p,function(){try{return o()}catch(g){return i(g)}}()}catch(g){return f(g)}},f)}catch(p){return f(p)}},f)}catch(d){f(d)}}catch(d){return i(d)}};try{if(Ac()||[an.DESKTOP_SAFARI,an.MOBILE_SAFARI].includes(cs()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(c){try{return r=c,o()}catch{return a()}},a)}catch{a()}})}function Nf(t,e,n,i,r=1){return new Promise(function(s,o){let a;if(e==="image/png"){let m,p,g;return m=t.getContext("2d"),{data:p}=m.getImageData(0,0,t.width,t.height),g=Jn.encode([p.buffer],t.width,t.height,4096*r),a=new Blob([g],{type:e}),a.name=n,a.lastModified=i,c.call(this)}{let m=function(){return c.call(this)};var f=m;if(e==="image/bmp")return new Promise(p=>Bx.toBlob(t,p)).then((function(p){try{return a=p,a.name=n,a.lastModified=i,m.call(this)}catch(g){return o(g)}}).bind(this),o);{let p=function(){return m.call(this)};var d=p;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:r}).then((function(g){try{return a=g,a.name=n,a.lastModified=i,p.call(this)}catch(E){return o(E)}}).bind(this),o);{let g;return g=t.toDataURL(e,r),Cy(g,n,i).then((function(E){try{return a=E,p.call(this)}catch(x){return o(x)}}).bind(this),o)}}}function c(){return s(a)}})}function oi(t){t.width=0,t.height=0}function _o(){return new Promise(function(t,e){let n,i,r,s;return _o.cachedResult!==void 0?t(_o.cachedResult):Cy("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return n=o,Rf(n).then(function(a){try{return i=a[1],Nf(i,n.type,n.name,n.lastModified).then(function(c){try{return r=c,oi(i),Rf(r).then(function(f){try{return s=f[0],_o.cachedResult=s.width===1&&s.height===2,t(_o.cachedResult)}catch(d){return e(d)}},e)}catch(f){return e(f)}},e)}catch(c){return e(c)}},e)}catch(a){return e(a)}},e)})}function Jx(t){return new Promise((e,n)=>{const i=new Gx;i.onload=r=>{const s=new DataView(r.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const o=s.byteLength;let a=2;for(;a<o;){if(s.getUint16(a+2,!1)<=8)return e(-1);const c=s.getUint16(a,!1);if(a+=2,c==65505){if(s.getUint32(a+=2,!1)!=1165519206)return e(-1);const f=s.getUint16(a+=6,!1)==18761;a+=s.getUint32(a+4,f);const d=s.getUint16(a,f);a+=2;for(let m=0;m<d;m++)if(s.getUint16(a+12*m,f)==274)return e(s.getUint16(a+12*m+8,f))}else{if((65280&c)!=65280)break;a+=s.getUint16(a,!1)}}return e(-1)},i.onerror=r=>n(r),i.readAsArrayBuffer(t)})}function Qx(t,e){const{width:n}=t,{height:i}=t,{maxWidthOrHeight:r}=e;let s,o=t;return isFinite(r)&&(n>r||i>r)&&([o,s]=Td(n,i),n>i?(o.width=r,o.height=i/n*r):(o.width=n/i*r,o.height=r),s.drawImage(t,0,0,o.width,o.height),oi(t)),o}function Xx(t,e){const{width:n}=t,{height:i}=t,[r,s]=Td(n,i);switch(e>4&&e<9?(r.width=i,r.height=n):(r.width=n,r.height=i),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,i);break;case 4:s.transform(1,0,0,-1,0,i);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,i,0);break;case 7:s.transform(0,-1,-1,0,i,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,i),oi(t),r}function VE(t,e,n=0){return new Promise(function(i,r){let s,o,a,c,f,d,m,p,g,E,x,P,A,w,N,D,O,L,b,_;function T(I=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=I,e.onProgress(Math.min(s,100))}function S(I){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(I,s),100),e.onProgress(s)}return s=n,o=e.maxIteration||10,a=1024*e.maxSizeMB*1024,T(),Rf(t,e).then((function(I){try{return[,c]=I,T(),f=Qx(c,e),T(),new Promise(function(M,R){var F;if(!(F=e.exifOrientation))return Jx(t).then((function(V){try{return F=V,G.call(this)}catch(k){return R(k)}}).bind(this),R);function G(){return M(F)}return G.call(this)}).then((function(M){try{return d=M,T(),_o().then((function(R){try{return m=R?f:Xx(f,d),T(),p=e.initialQuality||1,g=e.fileType||t.type,Nf(m,g,t.name,t.lastModified,p).then((function(F){try{{let $=function(){if(o--&&(N>a||N>A)){let K,ne;return K=_?.95*b.width:b.width,ne=_?.95*b.height:b.height,[O,L]=Td(K,ne),L.drawImage(b,0,0,K,ne),p*=g==="image/png"?.85:.95,Nf(O,g,t.name,t.lastModified,p).then(function(z){try{return D=z,oi(b),b=O,N=D.size,S(Math.min(99,Math.floor((w-N)/(w-a)*100))),$}catch(Q){return r(Q)}},r)}return[1]},B=function(){return oi(b),oi(O),oi(f),oi(m),oi(c),S(100),i(D)};var V=$,k=B;if(E=F,T(),x=E.size>a,P=E.size>t.size,!x&&!P)return S(100),i(E);var G;return A=t.size,w=E.size,N=w,b=m,_=!e.alwaysKeepResolution&&x,(G=(function(K){for(;K;){if(K.then)return void K.then(G,r);try{if(K.pop){if(K.length)return K.pop()?B.call(this):K;K=$}else K=K.call(this)}catch(ne){return r(ne)}}}).bind(this))($)}}catch($){return r($)}}).bind(this),r)}catch(F){return r(F)}}).bind(this),r)}catch(R){return r(R)}}).bind(this),r)}catch(M){return r(M)}}).bind(this),r)})}const A7=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Nh;function S7(t,e){return new Promise((n,i)=>{Nh||(Nh=function(o){const a=[];return a.push(o),URL.createObjectURL(new Blob(a))}(A7));const r=new Worker(Nh);r.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)r.terminate();else if(o.data.progress===void 0){if(o.data.error)return i(new Error(o.data.error)),void r.terminate();n(o.data.file),r.terminate()}else e.onProgress(o.data.progress)}),r.addEventListener("error",i),e.signal&&e.signal.addEventListener("abort",()=>{i(e.signal.reason),r.terminate()}),r.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function qt(t,e){return new Promise(function(n,i){let r,s,o,a,c,f;if(r={...e},o=0,{onProgress:a}=r,r.maxSizeMB=r.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof r.useWebWorker!="boolean"||r.useWebWorker,delete r.useWebWorker,r.onProgress=g=>{o=g,typeof a=="function"&&a(o)},!(t instanceof Blob||t instanceof C7))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return i(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||f)return VE(t,r).then((function(g){try{return s=g,p.call(this)}catch(E){return i(E)}}).bind(this),i);var d=(function(){try{return p.call(this)}catch(g){return i(g)}}).bind(this),m=function(g){try{return VE(t,r).then(function(E){try{return s=E,d()}catch(x){return i(x)}},i)}catch(E){return i(E)}};try{return r.libURL=r.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",S7(t,r).then(function(g){try{return s=g,d()}catch{return m()}},m)}catch{m()}function p(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{r.preserveExif&&t.type==="image/jpeg"&&(!r.fileType||r.fileType&&r.fileType===t.type)&&(s=zx(t,s))}catch{}return n(s)}})}qt.getDataUrlFromFile=Hx,qt.getFilefromDataUrl=Cy,qt.loadImage=$x,qt.drawImageInCanvas=Kx,qt.drawFileInCanvas=Rf,qt.canvasToFile=Nf,qt.getExifOrientation=Jx,qt.handleMaxWidthOrHeight=Qx,qt.followExifOrientation=Xx,qt.cleanupCanvasMemory=oi,qt.isAutoOrientationInBrowser=_o,qt.approximateBelowMaximumCanvasSizeOfBrowser=Yx,qt.copyExifWithoutOrientation=zx,qt.getBrowserName=cs,qt.version="2.0.2";const w7=t=>new Promise((e,n)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=()=>e(i.result),i.onerror=r=>n(r)}),x7=async(t,e)=>{if(!t)throw new Error("No file provided for upload.");const n={maxSizeMB:.75,maxWidthOrHeight:1024,useWebWorker:!0};try{console.log(`Original image size: ${(t.size/1024).toFixed(2)} KB`);const i=await qt(t,n);return console.log(`Compressed image size: ${(i.size/1024).toFixed(2)} KB`),w7(i)}catch(i){throw console.error("Error during image compression:",i),new Error("Failed to process the image. Please try again or select a different one.")}},b7={name:"",level:0,school:"Evocation",castingTime:"1 Action",range:"60 feet",components:"V, S",duration:"Instantaneous",description:""},I7=({initialData:t,onSave:e,onCancel:n})=>{const[i,r]=se.useState(t),s=(f,d)=>{r(m=>({...m,[f]:d}))},o=f=>{f.preventDefault(),i.name.trim()&&e(i)},a=["Abjuration","Conjuration","Divination","Enchantment","Evocation","Illusion","Necromancy","Transmutation"],c="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return v.jsxs("form",{onSubmit:o,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-6",children:[v.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Spell":"Add New Spell"}),v.jsx("input",{type:"text",placeholder:"Spell Name",value:i.name,onChange:f=>s("name",f.target.value),required:!0,className:c}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[v.jsx("input",{type:"number",placeholder:"Level",value:i.level,onChange:f=>s("level",parseInt(f.target.value)),min:"0",max:"9",className:c}),v.jsx("select",{value:i.school,onChange:f=>s("school",f.target.value),className:c,children:a.map(f=>v.jsx("option",{value:f,children:f},f))})]}),v.jsx("textarea",{placeholder:"Description",value:i.description,onChange:f=>s("description",f.target.value),rows:4,className:`${c} resize-y`}),v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),v.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Spell"})]})]})},R7=({spell:t,onEdit:e,onDelete:n,onToggleExpand:i,isExpanded:r})=>v.jsxs("div",{className:"bg-zinc-700/50 rounded-lg",children:[v.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-3",onClick:i,children:[v.jsx("h4",{className:"font-bold text-amber-300",children:t.name}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("span",{className:"text-sm text-zinc-400 capitalize",children:t.school}),v.jsx("button",{onClick:s=>{s.stopPropagation(),e()},className:"text-zinc-400 hover:text-amber-400 p-1",children:v.jsx(Bs,{className:"w-4 h-4"})}),v.jsx("button",{onClick:s=>{s.stopPropagation(),n()},className:"text-zinc-500 hover:text-red-400 p-1",children:v.jsx(zs,{className:"w-4 h-4"})})]})]}),r&&v.jsxs("div",{className:"mt-2 pt-3 border-t border-zinc-600/50 space-y-2 text-sm p-3 bg-zinc-900/30",children:[v.jsxs("p",{children:[v.jsx("strong",{className:"text-zinc-400",children:"Casting Time:"})," ",t.castingTime]}),v.jsxs("p",{children:[v.jsx("strong",{className:"text-zinc-400",children:"Range:"})," ",t.range]}),v.jsxs("p",{children:[v.jsx("strong",{className:"text-zinc-400",children:"Components:"})," ",t.components]}),v.jsxs("p",{children:[v.jsx("strong",{className:"text-zinc-400",children:"Duration:"})," ",t.duration]}),v.jsx("p",{className:"text-zinc-300 mt-2 whitespace-pre-wrap",children:t.description})]})]}),N7=({character:t,onUpdateCharacter:e})=>{const[n,i]=se.useState(null),[r,s]=se.useState({}),o=m=>{let p;if("id"in m)p=t.spells.map(g=>g.id===m.id?m:g);else{const g={...m,id:`spell_${Date.now()}`};p=[...t.spells,g]}e({...t,spells:p}),i(null)},a=m=>{if(window.confirm("Are you sure you want to delete this spell?")){const p=t.spells.filter(g=>g.id!==m);e({...t,spells:p})}},c=m=>{s(p=>({...p,[m]:!p[m]}))},f=se.useMemo(()=>t.spells.reduce((m,p)=>(m[p.level]=[...m[p.level]||[],p],m[p.level].sort((g,E)=>g.name.localeCompare(E.name)),m),{}),[t.spells]),d=Object.keys(f).map(Number).sort((m,p)=>m-p);return v.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Spellbook"}),v.jsxs("button",{onClick:()=>i("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[v.jsx(uu,{className:"w-5 h-5"})," Add Spell"]})]}),n&&v.jsx(I7,{initialData:n==="new"?b7:n,onSave:o,onCancel:()=>i(null)}),v.jsxs("div",{className:"space-y-6 overflow-y-auto pr-2 -mr-2",children:[t.spells.length===0&&!n&&v.jsx("p",{className:"text-center text-zinc-500 text-sm py-8",children:"This character knows no spells. Add one to get started!"}),d.map(m=>v.jsxs("div",{children:[v.jsx("h4",{className:"text-xl font-serif text-zinc-300 border-b border-zinc-600 pb-1 mb-3",children:m===0?"Cantrips":`Level ${m}`}),v.jsx("div",{className:"space-y-3",children:f[m].map(p=>v.jsx(R7,{spell:p,isExpanded:!!r[p.id],onToggleExpand:()=>c(p.id),onEdit:()=>i(p),onDelete:()=>a(p.id)},p.id))})]},m))]})]})},M7={name:"",description:""},D7=({initialData:t,onSave:e,onCancel:n})=>{const[i,r]=se.useState(t),s=(c,f)=>{r(d=>({...d,[c]:f}))},o=c=>{c.preventDefault(),i.name.trim()&&e(i)},a="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return v.jsxs("form",{onSubmit:o,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[v.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Feature":"Add New Feature"}),v.jsx("input",{type:"text",placeholder:"Feature or Trait Name",value:i.name,onChange:c=>s("name",c.target.value),required:!0,className:a}),v.jsx("textarea",{placeholder:"Description",value:i.description,onChange:c=>s("description",c.target.value),rows:4,className:`${a} resize-y`}),v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),v.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Feature"})]})]})},P7=({character:t,onUpdateCharacter:e})=>{const[n,i]=se.useState(null),[r,s]=se.useState({}),o=d=>{let m;if("id"in d)m=t.featuresAndTraits.map(p=>p.id===d.id?d:p);else{const p={...d,id:`feat_${Date.now()}`};m=[...t.featuresAndTraits,p]}e({...t,featuresAndTraits:m}),i(null)},a=d=>{if(window.confirm("Are you sure you want to delete this feature?")){const m=t.featuresAndTraits.filter(p=>p.id!==d);e({...t,featuresAndTraits:m})}},c=d=>{s(m=>({...m,[d]:!m[d]}))},f=se.useMemo(()=>[...t.featuresAndTraits].sort((d,m)=>d.name.localeCompare(m.name)),[t.featuresAndTraits]);return v.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Features & Traits"}),v.jsxs("button",{onClick:()=>i("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[v.jsx(uu,{className:"w-5 h-5"})," Add Feature"]})]}),n&&v.jsx(D7,{initialData:n==="new"?M7:n,onSave:o,onCancel:()=>i(null)}),v.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[f.length===0&&!n&&v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"No features or traits have been added."})}),f.map(d=>v.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:[v.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer",onClick:()=>c(d.id),children:[v.jsx("span",{className:"font-semibold text-amber-300",children:d.name}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("button",{onClick:m=>{m.stopPropagation(),i(d)},className:"text-zinc-400 hover:text-amber-400 p-1",children:v.jsx(Bs,{className:"w-4 h-4"})}),v.jsx("button",{onClick:m=>{m.stopPropagation(),a(d.id)},className:"text-zinc-500 hover:text-red-400 p-1",children:v.jsx(zs,{className:"w-4 h-4"})})]})]}),r[d.id]&&v.jsx("div",{className:"p-3 border-t border-zinc-600/50 bg-zinc-900/30",children:v.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:d.description})})]},d.id))]})]})},V7={name:"",quantity:1,description:"",equipped:!1},k7=({initialData:t,onSave:e,onCancel:n})=>{const[i,r]=se.useState(t),s=(f,d)=>{r(m=>({...m,[f]:d}))},o=f=>{f.preventDefault(),i.name.trim()&&e(i)},a="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500",c=["light","medium","heavy","shield"];return v.jsxs("form",{onSubmit:o,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[v.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Item":"Add New Item"}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[v.jsx("input",{type:"text",placeholder:"Item Name",value:i.name,onChange:f=>s("name",f.target.value),required:!0,className:`${a} sm:col-span-2`}),v.jsx("input",{type:"number",placeholder:"Qty",value:i.quantity,onChange:f=>s("quantity",parseInt(f.target.value)),min:"1",className:`${a} text-center`})]}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-zinc-400",children:"Armor Type"}),v.jsxs("select",{value:i.armorType||"",onChange:f=>s("armorType",f.target.value||void 0),className:a,children:[v.jsx("option",{value:"",children:"Not Armor"}),c.map(f=>v.jsx("option",{value:f,className:"capitalize",children:f},f))]})]}),i.armorType&&v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-zinc-400",children:i.armorType==="shield"?"AC Bonus":"Base AC"}),v.jsx("input",{type:"number",placeholder:"AC",value:i.armorClass||"",onChange:f=>s("armorClass",parseInt(f.target.value)||0),className:a})]})]}),v.jsx("textarea",{placeholder:"Description (optional)",value:i.description,onChange:f=>s("description",f.target.value),rows:3,className:`${a} resize-y`}),v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),v.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Item"})]})]})},U7=({character:t,onUpdateCharacter:e})=>{const[n,i]=se.useState(null),[r,s]=se.useState({}),o=d=>{let m;if("id"in d)m=t.equipment.map(p=>p.id===d.id?d:p);else{const p={...d,id:`item_${Date.now()}`};m=[...t.equipment,p]}e({...t,equipment:m}),i(null)},a=d=>{if(window.confirm("Are you sure you want to delete this item?")){const m=t.equipment.filter(p=>p.id!==d);e({...t,equipment:m})}},c=d=>{s(m=>({...m,[d]:!m[d]}))},f=se.useMemo(()=>[...t.equipment||[]].sort((d,m)=>d.name.localeCompare(m.name)),[t.equipment]);return v.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Equipment"}),v.jsxs("button",{onClick:()=>i("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[v.jsx(uu,{className:"w-5 h-5"})," Add Item"]})]}),n&&v.jsx(k7,{initialData:n==="new"?V7:n,onSave:o,onCancel:()=>i(null)}),v.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[f.length===0&&!n&&v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"Your backpack is empty."})}),f.map(d=>v.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:[v.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer",onClick:()=>c(d.id),children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("span",{className:"font-semibold text-amber-300",children:d.name}),v.jsxs("span",{className:"text-zinc-400 text-xs",children:["(x",d.quantity,")"]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("button",{onClick:m=>{m.stopPropagation(),i(d)},className:"text-zinc-400 hover:text-amber-400 p-1",children:v.jsx(Bs,{className:"w-4 h-4"})}),v.jsx("button",{onClick:m=>{m.stopPropagation(),a(d.id)},className:"text-zinc-500 hover:text-red-400 p-1",children:v.jsx(zs,{className:"w-4 h-4"})})]})]}),r[d.id]&&(d.description||d.armorType)&&v.jsxs("div",{className:"p-3 border-t border-zinc-600/50 bg-zinc-900/30",children:[d.armorType&&v.jsxs("p",{className:"text-xs text-sky-300 capitalize mb-1",children:["Type: ",d.armorType," ",d.armorType!=="shield"?`(Base AC ${d.armorClass})`:`(AC Bonus +${d.armorClass})`]}),d.description&&v.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:d.description})]})]},d.id))]})]})},L7={name:"",bonus:"+0",damage:"1d4"},O7=({initialData:t,onSave:e,onCancel:n})=>{const[i,r]=se.useState(t),s=(c,f)=>{r(d=>({...d,[c]:f}))},o=c=>{c.preventDefault(),i.name.trim()&&e(i)},a="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return v.jsxs("form",{onSubmit:o,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[v.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Attack":"Add New Attack"}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[v.jsx("input",{type:"text",placeholder:"Attack Name",value:i.name,onChange:c=>s("name",c.target.value),required:!0,className:`${a} sm:col-span-1`}),v.jsx("input",{type:"text",placeholder:"e.g. +5",value:i.bonus,onChange:c=>s("bonus",c.target.value),required:!0,className:`${a} text-center`}),v.jsx("input",{type:"text",placeholder:"e.g. (2d6)+(1d4)+3",value:i.damage,onChange:c=>s("damage",c.target.value),required:!0,className:`${a} text-center`})]}),v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),v.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Attack"})]})]})},F7=({character:t,onUpdateCharacter:e})=>{const[n,i]=se.useState(null),r=a=>{let c;if("id"in a)c=t.attacks.map(f=>f.id===a.id?a:f);else{const f={...a,id:`attack_${Date.now()}`};c=[...t.attacks,f]}e({...t,attacks:c}),i(null)},s=a=>{if(window.confirm("Are you sure you want to delete this attack?")){const c=t.attacks.filter(f=>f.id!==a);e({...t,attacks:c})}},o=se.useMemo(()=>[...t.attacks||[]].sort((a,c)=>a.name.localeCompare(c.name)),[t.attacks]);return v.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Attacks & Cantrips"}),v.jsxs("button",{onClick:()=>i("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[v.jsx(uu,{className:"w-5 h-5"})," Add Attack"]})]}),n&&v.jsx(O7,{initialData:n==="new"?L7:n,onSave:r,onCancel:()=>i(null)}),v.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[o.length===0&&!n&&v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"No attacks have been defined."})}),o.map(a=>v.jsx("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:v.jsxs("div",{className:"grid grid-cols-6 items-center p-3",children:[v.jsx("span",{className:"font-semibold text-amber-300 col-span-3",children:a.name}),v.jsx("span",{className:"font-mono text-zinc-300 col-span-1 text-center",children:a.bonus}),v.jsx("span",{className:"font-mono text-zinc-300 col-span-1 text-center",children:a.damage}),v.jsxs("div",{className:"flex items-center gap-2 justify-end col-span-1",children:[v.jsx("button",{onClick:()=>i(a),className:"text-zinc-400 hover:text-amber-400 p-1",children:v.jsx(Bs,{className:"w-4 h-4"})}),v.jsx("button",{onClick:()=>s(a.id),className:"text-zinc-500 hover:text-red-400 p-1",children:v.jsx(zs,{className:"w-4 h-4"})})]})]})},a.id))]})]})},z7={name:"",max:1},B7=({initialData:t,onSave:e,onCancel:n})=>{const[i,r]=se.useState(t),s=(c,f)=>{r(d=>({...d,[c]:f}))},o=c=>{c.preventDefault(),i.name.trim()&&e(i)},a="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return v.jsxs("form",{onSubmit:o,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[v.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Resource":"Add New Resource"}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[v.jsx("input",{type:"text",placeholder:"Resource Name",value:i.name,onChange:c=>s("name",c.target.value),required:!0,className:`${a} sm:col-span-2`}),v.jsx("input",{type:"number",placeholder:"Max",value:i.max,onChange:c=>s("max",parseInt(c.target.value)||1),min:"1",className:`${a} text-center`})]}),v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),v.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save"})]})]})},q7=({character:t,onUpdateCharacter:e})=>{const[n,i]=se.useState(null),r=o=>{let a;if("id"in o)a=t.customResources.map(c=>c.id===o.id?{...c,name:o.name,max:o.max}:c);else{const c={...o,id:`resource_${Date.now()}`,used:0};a=[...t.customResources,c]}e({...t,customResources:a}),i(null)},s=o=>{if(window.confirm("Are you sure you want to delete this resource?")){const a=t.customResources.filter(c=>c.id!==o);e({...t,customResources:a})}};return v.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-lg",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Other Resources"}),v.jsxs("button",{onClick:()=>i("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[v.jsx(uu,{className:"w-5 h-5"})," Add Resource"]})]}),n&&v.jsx(B7,{initialData:n==="new"?z7:n,onSave:r,onCancel:()=>i(null)}),v.jsxs("div",{className:"space-y-2",children:[(t.customResources||[]).length===0&&!n&&v.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"No custom resources defined."}),(t.customResources||[]).map(o=>v.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm p-3 flex items-center justify-between",children:[v.jsx("span",{className:"font-semibold text-amber-300",children:o.name}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("span",{className:"text-zinc-400",children:["Max: ",o.max]}),v.jsx("button",{onClick:()=>i(o),className:"text-zinc-400 hover:text-amber-400 p-1",children:v.jsx(Bs,{className:"w-4 h-4"})}),v.jsx("button",{onClick:()=>s(o.id),className:"text-zinc-500 hover:text-red-400 p-1",children:v.jsx(zs,{className:"w-4 h-4"})})]})]},o.id))]})]})},Mh=t=>Math.floor((t-10)/2),Qs=t=>t>=0?`+${t}`:String(t),kE=["strength","dexterity","constitution","intelligence","wisdom","charisma"],G7=({label:t,isActive:e,onClick:n,controls:i,id:r})=>v.jsx("button",{id:r,role:"tab","aria-selected":e,"aria-controls":i,onClick:n,className:`px-3 py-2 text-sm font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-zinc-700 text-amber-400 border-b-2 border-amber-400":"text-zinc-400 hover:bg-zinc-800/60 border-b-2 border-transparent"}`,children:t}),Kn=({label:t,name:e,type:n,value:i,onChange:r,placeholder:s,className:o})=>v.jsxs("div",{className:o,children:[v.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-zinc-400 capitalize",children:t}),v.jsx("input",{type:n,id:e,name:e,value:i,onChange:r,placeholder:s,className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md shadow-sm py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm"})]}),Xu=({label:t,value:e,className:n})=>v.jsxs("div",{className:`flex flex-col items-center justify-center p-3 bg-zinc-700/50 rounded-lg text-center ${n}`,children:[v.jsx("span",{className:"text-3xl font-bold font-mono text-white",children:e}),v.jsx("span",{className:"text-xs uppercase tracking-wider text-zinc-400 mt-1",children:t})]}),Xs=({label:t,name:e,value:n,onChange:i,placeholder:r})=>v.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col flex-1 h-full",children:[v.jsx("h3",{className:"text-lg font-semibold text-amber-400 mb-2",children:t}),v.jsx("textarea",{name:e,value:n,onChange:i,className:"w-full bg-zinc-700 border border-zinc-600 rounded-md p-3 text-zinc-200 focus:ring-amber-500 focus:border-amber-500 resize-y flex-grow min-h-[100px]",placeholder:r||`Your character's ${t.toLowerCase()}...`})]}),H7=[{key:"main",label:"Main"},{key:"stats",label:"Stats & Skills"},{key:"combat",label:"Combat & Features"},{key:"bio",label:"Biography & Notes"},{key:"inventory",label:"Inventory"},{key:"spells",label:"Spells"}],$7=({characterId:t,onBack:e,onSaveComplete:n,onDelete:i})=>{const[r,s]=se.useState(null),[o,a]=se.useState(!0),[c,f]=se.useState(!1),[d,m]=se.useState(!1),[p,g]=se.useState(""),[E,x]=se.useState("main"),[P,A]=se.useState(null),[w,N]=se.useState(null),D=t==="new";se.useEffect(()=>{(async()=>{a(!0);let Q;D?Q={...fy(),id:"temp_new"}:Q=await sx(t),s(Q),Q!=null&&Q.imageUrl&&N(Q.imageUrl),a(!1)})()},[t,D]);const O=se.useMemo(()=>r?Math.ceil(r.level/4)+1:0,[r==null?void 0:r.level]),L=async()=>{if(r){f(!0);try{const z=D?`char_${Date.now()}`:r.id;let Q=r.imageUrl||"";P&&(Q=await x7(P,z));const H={...r,id:z,imageUrl:Q,proficiencyBonus:O,lastUpdated:Date.now()},Y=await ox(H);n(Y.id)}catch(z){console.error("Failed to save character:",z),alert("An error occurred while saving. Please try again.")}finally{f(!1)}}},b=async()=>{r&&!D&&window.confirm(`Are you sure you want to permanently delete ${r.name}?`)&&i(r.id)},_=z=>{if(z.target.files&&z.target.files[0]){const Q=z.target.files[0];A(Q);const H=new FileReader;H.onloadend=()=>{N(H.result)},H.readAsDataURL(Q)}},T=z=>{if(!r)return;const{name:Q,value:H,type:Y}=z.target;let re=H;Y==="number"&&(re=parseInt(H)||0),s(Ae=>({...Ae,[Q]:re}))},S=(z,Q)=>{r&&s(H=>({...H,currency:{...H.currency,[z]:Q}}))},I=(z,Q)=>{r&&s(H=>({...H,hp:{...H.hp,[z]:Q}}))},M=z=>{if(!r)return;const{value:Q}=z.target;s(H=>({...H,hitDice:{...H.hitDice,total:Q}}))},R=(z,Q)=>{r&&s(H=>({...H,abilityScores:{...H.abilityScores,[z]:Q}}))},F=z=>{if(!r)return;const Q={...r.savingThrows};Q[z].proficient=!Q[z].proficient,s(H=>({...H,savingThrows:Q}))},G=z=>{if(!r)return;const Q=r.skills.map(H=>{if(H.name===z){const Y=!H.proficient,re=Y?H.expertise:!1;return{...H,proficient:Y,expertise:re}}return H});s(H=>({...H,skills:Q}))},V=z=>{if(!r)return;const Q=r.skills.map(H=>{if(H.name===z){const Y=!H.expertise,re=Y||H.proficient;return{...H,proficient:re,expertise:Y}}return H});s(H=>({...H,skills:Q}))},k=(z,Q)=>{if(!r)return;const H={...r.spellSlots};H[z]={...H[z],max:Q},s(Y=>({...Y,spellSlots:H}))},$=async()=>{if(!r)return;m(!0);const z=await g7(r,p);s(Q=>({...Q,...z})),m(!1)},B=se.useMemo(()=>r?Mh(r.abilityScores.dexterity):0,[r==null?void 0:r.abilityScores.dexterity]),{spellSaveDC:K,spellAttackBonus:ne}=se.useMemo(()=>{if(!r||!r.spellcastingAbility)return{spellSaveDC:"-",spellAttackBonus:"-"};const z=Mh(r.abilityScores[r.spellcastingAbility]);return{spellSaveDC:8+O+z,spellAttackBonus:Qs(O+z)}},[r==null?void 0:r.spellcastingAbility,r==null?void 0:r.abilityScores,O]);return o||!r?v.jsx("div",{className:"flex justify-center items-center h-screen",children:v.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})}):v.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:[v.jsxs("header",{className:"flex justify-between items-center mb-4 border-b border-zinc-700 pb-4",children:[v.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-zinc-300 hover:text-amber-400 transition-colors",children:[v.jsx(lx,{className:"w-5 h-5"}),D?"Cancel Creation":"Back to Play View"]}),v.jsxs("div",{className:"flex items-center gap-2",children:[!D&&v.jsx("button",{onClick:b,className:"p-2 rounded-full bg-red-800/50 hover:bg-red-600 text-red-300 hover:text-white transition-colors","aria-label":"Delete Character",children:v.jsx(zs,{className:"w-5 h-5"})}),v.jsxs("button",{onClick:L,disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-amber-600 text-white font-bold rounded-lg shadow-md hover:bg-amber-500 transition-colors disabled:bg-zinc-600",children:[v.jsx(rk,{className:"w-5 h-5"}),c?"Saving...":"Save Changes"]})]})]}),v.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 shadow-2xl shadow-amber-900/10 rounded-lg p-4 sm:p-6",children:[v.jsx("div",{role:"tablist","aria-label":"Character Sheet Sections",className:"flex space-x-1 mb-6 border-b border-zinc-700 overflow-x-auto",children:H7.map(z=>v.jsx(G7,{id:`tab-${z.key}`,label:z.label,isActive:E===z.key,onClick:()=>x(z.key),controls:`panel-${z.key}`},z.key))}),v.jsx("div",{id:"panel-main",role:"tabpanel","aria-labelledby":"tab-main",hidden:E!=="main",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"space-y-4 md:col-span-1",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-zinc-400",children:"Character Portrait"}),v.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[v.jsx("span",{className:"inline-block h-24 w-24 rounded-lg overflow-hidden bg-zinc-700",children:w?v.jsx("img",{src:w,alt:"Character portrait",className:"h-full w-full object-cover"}):v.jsx(ux,{className:"h-full w-full text-zinc-500 p-4"})}),v.jsx("input",{type:"file",id:"imageUpload",className:"hidden",accept:"image/png, image/jpeg, image/webp, image/gif",onChange:_}),v.jsx("label",{htmlFor:"imageUpload",className:"cursor-pointer rounded-md bg-zinc-700 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-zinc-600",children:"Change"})]})]}),v.jsx(Kn,{label:"Character Name",name:"name",type:"text",value:r.name,onChange:T,placeholder:"e.g., Eldrin"}),v.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[v.jsx(Kn,{label:"Class",name:"class",type:"text",value:r.class,onChange:T,placeholder:"e.g., Wizard"}),v.jsx(Kn,{label:"Subclass",name:"subclass",type:"text",value:r.subclass,onChange:T,placeholder:"e.g., School of Evocation"})]}),v.jsx(Kn,{label:"Race",name:"race",type:"text",value:r.race,onChange:T,placeholder:"e.g., High-Elf"}),v.jsx(Kn,{label:"Background",name:"background",type:"text",value:r.background,onChange:T,placeholder:"e.g., Sage"}),v.jsx(Kn,{label:"Languages",name:"languages",type:"text",value:r.languages,onChange:T,placeholder:"e.g., Common, Elvish"})]}),v.jsxs("div",{className:"space-y-4 md:col-span-1",children:[v.jsx(Kn,{label:"Level",name:"level",type:"number",value:r.level,onChange:T}),v.jsx(Kn,{label:"Alignment",name:"alignment",type:"text",value:r.alignment,onChange:T,placeholder:"e.g., Chaotic Good"}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Hit Points"}),v.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"hp-current",className:"block text-xs font-medium text-zinc-500 text-center",children:"Current"}),v.jsx("input",{id:"hp-current",type:"number",value:r.hp.current,onChange:z=>I("current",parseInt(z.target.value)||0),className:"mt-1 w-full bg-zinc-700 border border-zinc-600 rounded-md py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"hp-max",className:"block text-xs font-medium text-zinc-500 text-center",children:"Max"}),v.jsx("input",{id:"hp-max",type:"number",value:r.hp.max,onChange:z=>I("max",parseInt(z.target.value)||0),className:"mt-1 w-full bg-zinc-700 border border-zinc-600 rounded-md py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"hp-temporary",className:"block text-xs font-medium text-zinc-500 text-center",children:"Temporary"}),v.jsx("input",{id:"hp-temporary",type:"number",value:r.hp.temporary,onChange:z=>I("temporary",parseInt(z.target.value)||0),className:"mt-1 w-full bg-zinc-700 border border-zinc-600 rounded-md py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]})]})]}),v.jsx(Kn,{label:"Hit Dice",name:"hitDice",type:"text",value:r.hitDice.total,onChange:M,placeholder:"e.g. 1d8"})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4 md:col-span-1",children:[v.jsx(Kn,{label:"Armor Class",name:"armorClass",type:"number",value:r.armorClass,onChange:T,className:"col-span-1"}),v.jsx(Xu,{label:"Initiative",value:Qs(B)}),v.jsx(Kn,{label:"Speed",name:"speed",type:"number",value:r.speed,onChange:T,className:"col-span-1"}),v.jsx(Xu,{label:"Proficiency",value:Qs(O)}),v.jsxs("div",{className:"col-span-2",children:[v.jsx("label",{htmlFor:"spellcastingAbility",className:"block text-sm font-medium text-zinc-400",children:"Spellcasting Ability"}),v.jsxs("select",{id:"spellcastingAbility",name:"spellcastingAbility",value:r.spellcastingAbility,onChange:T,className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md shadow-sm py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm",children:[v.jsx("option",{value:"",children:"None"}),kE.map(z=>v.jsx("option",{value:z,className:"capitalize",children:z},z))]})]}),v.jsx(Xu,{label:"Spell Save DC",value:String(K)}),v.jsx(Xu,{label:"Spell Attack",value:String(ne)})]})]})}),v.jsx("div",{id:"panel-stats",role:"tabpanel","aria-labelledby":"tab-stats",hidden:E!=="stats",children:v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:kE.map(z=>{const Q=r.abilityScores[z],H=Mh(Q),Y=r.savingThrows[z],re=H+(Y.proficient?O:0),Ae=r.skills.filter(ce=>ce.ability===z);return v.jsxs("div",{className:"bg-zinc-700/50 p-3 rounded-lg flex flex-col gap-3",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("div",{className:"flex flex-col items-center justify-center bg-zinc-900/50 p-2 rounded-lg w-20",children:[v.jsx("span",{className:"text-3xl font-bold font-mono text-white",children:Qs(H)}),v.jsx("span",{className:"text-xs uppercase tracking-wider text-zinc-400",children:z.substring(0,3)})]}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"text-xl font-cinzel text-amber-400 capitalize",children:z}),v.jsx("input",{type:"number",value:Q,onChange:ce=>R(z,parseInt(ce.target.value)||0),className:"w-full bg-zinc-800 text-center text-lg rounded border border-zinc-600 p-1 focus:ring-amber-500","aria-label":`${z} score`})]})]}),v.jsxs("div",{className:"bg-zinc-800/60 p-2 rounded-md space-y-2",children:[v.jsxs("label",{htmlFor:`saving-throw-${z}`,className:"flex items-center justify-between cursor-pointer text-sm",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("input",{type:"checkbox",id:`saving-throw-${z}`,checked:Y.proficient,onChange:()=>F(z),className:"w-4 h-4 rounded-full text-amber-600 bg-zinc-900 border-zinc-600 focus:ring-amber-500"}),v.jsx("span",{children:"Saving Throw"})]}),v.jsx("span",{className:"font-mono font-bold text-lg text-white",children:Qs(re)})]}),Ae.map(ce=>{const Te=H+(ce.proficient?O:0)+(ce.expertise?O:0);return v.jsxs("div",{className:"flex items-center justify-between text-sm",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("input",{type:"checkbox",id:`skill-prof-${ce.name}`,checked:ce.proficient,onChange:()=>G(ce.name),className:"w-4 h-4 rounded-full text-amber-600 bg-zinc-900 border-zinc-600 focus:ring-amber-500 cursor-pointer"}),v.jsx("input",{type:"checkbox",id:`skill-exp-${ce.name}`,checked:ce.expertise,onChange:()=>V(ce.name),className:"w-4 h-4 rounded-sm text-yellow-300 bg-zinc-900 border-zinc-600 focus:ring-yellow-400 cursor-pointer",title:"Expertise"}),v.jsx("label",{htmlFor:`skill-prof-${ce.name}`,className:"cursor-pointer",children:ce.name})]}),v.jsx("span",{className:"font-mono font-bold text-lg text-white",children:Qs(Te)})]},ce.name)})]})]},z)})})}),v.jsx("div",{id:"panel-combat",role:"tabpanel","aria-labelledby":"tab-combat",hidden:E!=="combat",className:"min-h-[60vh]",children:v.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-full",children:[v.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col",children:v.jsx(F7,{character:r,onUpdateCharacter:s})}),v.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col",children:v.jsx(P7,{character:r,onUpdateCharacter:z=>s(z)})})]})}),v.jsx("div",{id:"panel-bio",role:"tabpanel","aria-labelledby":"tab-bio",hidden:E!=="bio",className:"min-h-[60vh]",children:v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"flex flex-col gap-6",children:[v.jsx(Xs,{label:"Personality Traits",name:"personalityTraits",value:r.personalityTraits,onChange:T}),v.jsx(Xs,{label:"Ideals",name:"ideals",value:r.ideals,onChange:T}),v.jsx(Xs,{label:"Bonds",name:"bonds",value:r.bonds,onChange:T}),v.jsx(Xs,{label:"Flaws",name:"flaws",value:r.flaws,onChange:T})]}),v.jsxs("div",{className:"flex flex-col gap-6",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-amber-400 mb-2",children:"AI Personality Generator"}),v.jsxs("div",{className:"p-4 bg-zinc-800 border border-zinc-700 rounded-lg",children:[v.jsx("input",{type:"text",placeholder:"Optional: Add a keyword (e.g., 'tragic', 'grew up an orphan')",value:p,onChange:z=>g(z.target.value),className:"w-full bg-zinc-700 border border-zinc-600 rounded-md p-2 text-sm mb-2 focus:ring-amber-500 focus:border-amber-500"}),v.jsxs("button",{onClick:$,disabled:d,className:"flex w-full justify-center items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition disabled:bg-zinc-600",children:[v.jsx(ik,{className:"w-4 h-4"}),d?"Generating...":"Generate with AI"]})]})]}),v.jsx(Xs,{label:"Notes",name:"notes",value:r.notes,onChange:T,placeholder:"Campaign notes, important NPCs, etc."}),v.jsx(Xs,{label:"DM Notes",name:"dmNotes",value:r.dmNotes,onChange:T,placeholder:"Notes from your DM, or secrets your character knows."})]})]})}),v.jsx("div",{id:"panel-inventory",role:"tabpanel","aria-labelledby":"tab-inventory",hidden:E!=="inventory",className:"min-h-[60vh]",children:v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"lg:col-span-1",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-4",children:"Currency"}),v.jsx("div",{className:"bg-zinc-900/50 p-4 rounded-lg grid grid-cols-3 sm:grid-cols-5 gap-3",children:Object.entries(r.currency).map(([z,Q])=>v.jsxs("div",{children:[v.jsx("label",{className:"block text-center text-sm font-medium text-zinc-400 uppercase",children:z}),v.jsx("input",{type:"number",value:Q,onChange:H=>S(z,parseInt(H.target.value,10)||0),className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md py-1 px-2 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]},z))})]}),v.jsx("div",{className:"lg:col-span-2",children:v.jsx(U7,{character:r,onUpdateCharacter:s})})]})}),v.jsxs("div",{id:"panel-spells",role:"tabpanel","aria-labelledby":"tab-spells",hidden:E!=="spells",className:"min-h-[60vh] space-y-6",children:[v.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-lg",children:[v.jsx("h4",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Maximum Spell Slots"}),v.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-5 md:grid-cols-9 gap-3",children:Array.from({length:9},(z,Q)=>Q+1).map(z=>{var Q;return v.jsxs("div",{children:[v.jsxs("label",{className:"block text-center text-sm font-medium text-zinc-400",children:["Lvl ",z]}),v.jsx("input",{type:"number",min:"0",value:((Q=r.spellSlots[z])==null?void 0:Q.max)??0,onChange:H=>k(z,parseInt(H.target.value,10)||0),className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md py-1 px-2 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]},z)})})]}),v.jsx(q7,{character:r,onUpdateCharacter:s}),v.jsx(N7,{character:r,onUpdateCharacter:z=>s(z)})]})]})]})},Y7=t=>Math.floor((t-10)/2),Dh=t=>t>=0?`+${t}`:String(t),K7=["strength","dexterity","constitution","intelligence","wisdom","charisma"],J7=({character:t})=>{const{proficiencyBonus:e,abilityScores:n,savingThrows:i,skills:r}=t;return v.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3 text-center",children:"Abilities"}),v.jsx("div",{className:"space-y-3",children:K7.map(s=>{const o=n[s],a=Y7(o),c=i[s],f=a+(c.proficient?e:0),d=r.filter(m=>m.ability===s);return v.jsxs("div",{className:"bg-zinc-900/50 p-3 rounded-lg border border-zinc-700/50",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("h4",{className:"text-lg font-cinzel text-amber-400 capitalize",children:s}),v.jsxs("div",{className:"flex items-baseline gap-2",children:[v.jsx("span",{className:"text-3xl font-mono text-white font-bold",children:o}),v.jsxs("span",{className:"text-2xl font-mono text-amber-300 font-bold",children:["(",Dh(a),")"]})]})]}),v.jsxs("div",{className:"bg-zinc-800/60 p-2 rounded-md space-y-2",children:[v.jsxs("div",{className:"flex items-center justify-between text-sm",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:`w-3 h-3 rounded-full border-2 ${c.proficient?"bg-amber-400 border-amber-200":"border-zinc-500"}`}),v.jsx("span",{children:"Saving Throw"})]}),v.jsx("span",{className:"font-mono font-bold text-base text-white",children:Dh(f)})]}),v.jsx("hr",{className:"border-zinc-700"}),d.map(m=>{const p=a+(m.proficient?e:0)+(m.expertise?e:0);let g="border-zinc-500";return m.expertise?g="bg-white border-white":m.proficient&&(g="bg-amber-400 border-amber-200"),v.jsxs("div",{className:"flex items-center justify-between text-sm",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:`w-3 h-3 rounded-full border-2 ${g}`}),v.jsx("span",{children:m.name})]}),v.jsx("span",{className:"font-mono font-bold text-base text-white",children:Dh(p)})]},m.name)})]})]},s)})})]})},Q7=({spell:t,onToggleExpand:e,isExpanded:n})=>v.jsxs("div",{className:"bg-zinc-700/50 rounded-lg",children:[v.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-3",onClick:e,children:[v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("h4",{className:"font-bold text-amber-300 truncate",title:t.name,children:t.name}),v.jsxs("div",{className:"flex items-center gap-2 text-xs text-zinc-400 mt-1",children:[v.jsx("span",{className:"truncate",title:t.castingTime,children:t.castingTime}),v.jsx("span",{className:"opacity-50",children:"|"}),v.jsx("span",{className:"truncate",title:t.range,children:t.range})]})]}),v.jsx("div",{className:"flex items-center gap-2 pl-2 flex-shrink-0",children:v.jsx("span",{className:"text-xs text-zinc-400 capitalize",children:t.school})})]}),n&&v.jsxs("div",{className:"mt-2 pt-3 border-t border-zinc-600/50 space-y-2 text-sm p-3 bg-zinc-900/30",children:[v.jsxs("p",{children:[v.jsx("strong",{className:"text-zinc-400",children:"Components:"})," ",t.components]}),v.jsxs("p",{children:[v.jsx("strong",{className:"text-zinc-400",children:"Duration:"})," ",t.duration]}),v.jsx("p",{className:"text-zinc-300 mt-2 whitespace-pre-wrap",children:t.description})]})]}),X7=({character:t})=>{const[e,n]=se.useState({}),[i,r]=se.useState(""),s=c=>{n(f=>({...f,[c]:!f[c]}))},o=se.useMemo(()=>t.spells.filter(f=>f.name.toLowerCase().includes(i.toLowerCase())).reduce((f,d)=>(f[d.level]=[...f[d.level]||[],d],f[d.level].sort((m,p)=>m.name.localeCompare(p.name)),f),{}),[t.spells,i]),a=Object.keys(o).map(Number).sort((c,f)=>c-f);return v.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col h-auto max-h-[calc(100vh-10rem)]",children:[v.jsx("div",{className:"flex justify-between items-center mb-2",children:v.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Spellbook"})}),v.jsx("div",{className:"mb-4",children:v.jsx("input",{type:"text",placeholder:"Search spells...",value:i,onChange:c=>r(c.target.value),className:"w-full bg-zinc-700 p-2 rounded-md border border-zinc-600 text-sm focus:ring-amber-500 focus:border-amber-500"})}),v.jsx("div",{className:"space-y-6 overflow-y-auto pr-2 -mr-2 flex-grow",children:t.spells.length===0?v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("p",{className:"text-center text-zinc-500 text-sm py-8",children:"This character knows no spells."})}):a.length===0?v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("p",{className:"text-center text-zinc-500 text-sm py-8",children:"No spells match your search."})}):a.map(c=>v.jsxs("div",{children:[v.jsx("h4",{className:"text-xl font-serif text-zinc-300 border-b border-zinc-600 pb-1 mb-3",children:c===0?"Cantrips":`Level ${c}`}),v.jsx("div",{className:"space-y-3",children:o[c].map(f=>v.jsx(Q7,{spell:f,isExpanded:!!e[f.id],onToggleExpand:()=>s(f.id)},f.id))})]},c))})]})},Sc=t=>Math.floor((t-10)/2),fp=t=>t>=0?`+${t}`:String(t),j7=({label:t,isActive:e,onClick:n,id:i,controls:r})=>v.jsx("button",{id:i,role:"tab","aria-selected":e,"aria-controls":r,onClick:n,className:`px-4 py-2 text-sm sm:text-base font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-zinc-800 text-amber-400 border-b-2 border-amber-400":"text-zinc-400 hover:bg-zinc-800/60 border-b-2 border-transparent"}`,children:t}),as=({label:t,value:e,subValue:n,className:i})=>v.jsxs("div",{className:`flex flex-col items-center justify-center p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-center ${i}`,children:[v.jsx("span",{className:"text-2xl sm:text-3xl font-bold font-mono text-white",children:e}),v.jsx("span",{className:"text-xs uppercase tracking-wider text-zinc-400 mt-1",children:t}),n&&v.jsx("span",{className:"text-xs text-zinc-500",children:n})]}),W7=t=>{if(!t||typeof t!="string")return{total:0,pretty:"Invalid"};const e=t.match(/(\d+)d(\d+)/);if(!e)return{total:0,pretty:"Invalid"};const n=parseInt(e[1],10),i=parseInt(e[2],10);let r=0;const s=[];for(let o=0;o<n;o++){const a=Math.floor(Math.random()*i)+1;s.push(a),r+=a}return{total:r,pretty:`[${s.join("+")}]`}},Z7=({character:t,onUpdate:e})=>{const[n,i]=se.useState(null),r=Sc(t.abilityScores.constitution),s=se.useMemo(()=>{const f=Sc(t.abilityScores.wisdom),d=t.skills.find(p=>p.name==="Perception");let m=0;return d&&(d.expertise?m=t.proficiencyBonus*2:d.proficient&&(m=t.proficiencyBonus)),10+f+m},[t]),o=se.useMemo(()=>{const f=Sc(t.abilityScores.dexterity);let d=10+f,m=0;const p=t.equipment.find(E=>E.equipped&&["light","medium","heavy"].includes(E.armorType||"")),g=t.equipment.find(E=>E.equipped&&E.armorType==="shield");if(g&&(m=g.armorClass||2),p){const E=p.armorClass||0;switch(p.armorType){case"light":d=E+f;break;case"medium":d=E+Math.min(f,2);break;case"heavy":d=E;break}}return d+m},[t.abilityScores,t.equipment]),a=()=>{if(t.hitDice.used>=t.level)return;const{total:f,pretty:d}=W7(t.hitDice.total),m=Math.max(1,f+r),p=Math.min(t.hp.max,t.hp.current+m);i(`${d} + ${r} = ${m} HP`),e({hp:{...t.hp,current:p},hitDice:{...t.hitDice,used:t.hitDice.used+1}})},c=()=>{e({hitDice:{...t.hitDice,used:0}}),i(null)};return v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"md:col-span-2 lg:col-span-3 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:[v.jsx(as,{label:"Armor Class",value:o}),v.jsx(as,{label:"Initiative",value:fp(t.initiative)}),v.jsx(as,{label:"Speed",value:`${t.speed}ft`,subValue:` ${Math.round(t.speed*.3)}m`}),v.jsx(as,{label:"Proficiency",value:fp(t.proficiencyBonus)}),v.jsx(as,{label:"Passive Perception",value:s,className:"col-span-2 sm:col-span-1"})]}),v.jsx(o8,{hp:t.hp,onHpChange:f=>e({hp:f})}),v.jsx(a8,{saves:t.deathSaves,onSaveChange:f=>e({deathSaves:f})}),v.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Hit Dice"}),v.jsxs("p",{className:"text-center text-3xl font-bold font-mono text-white mb-3",children:[t.level-t.hitDice.used," / ",t.level]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("button",{onClick:a,disabled:t.hitDice.used>=t.level,className:"w-full bg-green-800/80 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md transition-colors disabled:bg-zinc-600 disabled:cursor-not-allowed",children:["Spend (",t.hitDice.total,")"]}),v.jsx("button",{onClick:c,className:"bg-sky-800/80 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-md transition-colors",children:"Reset"})]}),n&&v.jsx("p",{className:"text-center text-amber-300 font-mono mt-3 p-2 bg-zinc-900/50 rounded-md",children:n})]}),v.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Languages"}),v.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:t.languages||"None"})]})]})},e8=({character:t})=>v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[v.jsx(l8,{items:t.attacks||[]}),v.jsx(u8,{title:"Features & Traits",items:t.featuresAndTraits||[]})]}),t8=({character:t,onUpdate:e})=>{const n=t.spellcastingAbility,i=n?Sc(t.abilityScores[n]):0,r=n?8+t.proficiencyBonus+i:"-",s=n?t.proficiencyBonus+i:0;return v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[v.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3 text-center",children:"Spellcasting"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsx(as,{label:"Save DC",value:r}),v.jsx(as,{label:"Attack Bonus",value:fp(s)}),v.jsxs("div",{className:"col-span-2 text-center",children:[v.jsx("p",{className:"text-xs uppercase tracking-wider text-zinc-400",children:"Ability"}),v.jsx("p",{className:"text-xl font-bold text-white capitalize",children:n||"None"})]})]})]}),v.jsx(UE,{title:"Spell Slots",slots:t.spellSlots,onSlotChange:o=>e({spellSlots:o})}),t.customResources&&t.customResources.length>0&&v.jsx(UE,{title:"Other Resources",slots:t.customResources,onSlotChange:o=>e({customResources:o}),isCustom:!0})]}),v.jsx("div",{className:"lg:col-span-2",children:v.jsx(X7,{character:t})})]})},n8=({character:t,onUpdate:e})=>{const n=a=>{const c=t.equipment.map(f=>{var d;return f.id===a?{...f,equipped:!f.equipped}:f.id!==a&&f.armorType&&f.armorType!=="shield"&&((d=t.equipment.find(m=>m.id===a))==null?void 0:d.armorType)!=="shield"?{...f,equipped:!1}:f});e({equipment:c})},i=t.equipment.filter(a=>a.armorType&&a.armorType!=="shield"),r=t.equipment.filter(a=>a.armorType==="shield"),s=t.equipment.filter(a=>!a.armorType),o=({title:a,items:c})=>v.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:a}),c.length===0?v.jsx("p",{className:"text-zinc-500 text-sm text-center py-4",children:"None."}):v.jsx("div",{className:"space-y-2",children:c.map(f=>v.jsxs("div",{className:"bg-zinc-700/50 rounded-lg p-3 text-sm flex justify-between items-center",children:[v.jsxs("div",{children:[v.jsxs("p",{className:"font-semibold text-amber-300",children:[f.name," ",v.jsxs("span",{className:"text-xs text-zinc-400",children:["(x",f.quantity,")"]})]}),f.description&&v.jsx("p",{className:"text-xs text-zinc-300",children:f.description})]}),f.armorType&&v.jsx("button",{onClick:()=>n(f.id),className:`px-3 py-1 text-xs font-bold rounded ${f.equipped?"bg-amber-500 text-white":"bg-zinc-600 hover:bg-zinc-500"}`,children:f.equipped?"Equipped":"Equip"})]},f.id))})]});return v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[v.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Currency"}),v.jsx("div",{className:"grid grid-cols-3 gap-2 text-center",children:Object.keys(t.currency).map(a=>v.jsxs("div",{children:[v.jsx("p",{className:"text-xl font-mono text-white",children:t.currency[a]}),v.jsx("p",{className:"text-xs uppercase text-zinc-400",children:a})]},a))})]}),v.jsx(o,{title:"Armor",items:i}),v.jsx(o,{title:"Shields",items:r})]}),v.jsx("div",{className:"lg:col-span-2",children:v.jsx(o,{title:"Backpack",items:s})})]})},i8=({character:t})=>{const e=({title:n,content:i})=>v.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex-grow",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-2",children:n}),v.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:i||"Not set."})]});return v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"space-y-6 flex flex-col",children:[v.jsx(e,{title:"Personality Traits",content:t.personalityTraits}),v.jsx(e,{title:"Ideals",content:t.ideals}),v.jsx(e,{title:"Bonds",content:t.bonds}),v.jsx(e,{title:"Flaws",content:t.flaws})]}),v.jsxs("div",{className:"space-y-6 flex flex-col",children:[v.jsx(e,{title:"Character Notes",content:t.notes}),v.jsx(e,{title:"Campaign Info",content:t.dmNotes})]})]})},r8=[{key:"main",label:"Main"},{key:"abilities",label:"Abilities"},{key:"combat",label:"Combat"},{key:"spells",label:"Spells"},{key:"inventory",label:"Inventory"},{key:"info",label:"Info"}],s8=({characterId:t,onGoToEdit:e,onBack:n})=>{const[i,r]=se.useState(null),[s,o]=se.useState(!0),[a,c]=se.useState("main");se.useEffect(()=>{(async()=>{o(!0);const m=await sx(t);r(m),o(!1)})()},[t]);const f=d=>{if(!i)return;const m={...i,...d};r(m),ox(m)};return s||!i?v.jsx("div",{className:"flex justify-center items-center h-screen",children:v.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})}):v.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:[v.jsxs("header",{className:"flex justify-between items-center mb-6 border-b border-zinc-700 pb-4",children:[v.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-zinc-300 hover:text-amber-400 transition-colors",children:[v.jsx(lx,{className:"w-5 h-5"})," Back to List"]}),v.jsxs("div",{className:"text-center",children:[v.jsx("h1",{className:"text-2xl sm:text-3xl font-cinzel text-amber-400",children:i.name}),v.jsxs("p",{className:"text-zinc-400 capitalize text-sm",children:[i.race," ",i.class," ",i.subclass&&`(${i.subclass})`,"  Level ",i.level,"  ",i.alignment]})]}),v.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-zinc-700 text-white font-bold rounded-lg shadow-md hover:bg-zinc-600 transition-colors",children:[v.jsx(Bs,{className:"w-5 h-5"})," Edit Sheet"]})]}),v.jsx("div",{role:"tablist","aria-label":"Character View Sections",className:"flex space-x-1 mb-6 border-b border-zinc-700 overflow-x-auto",children:r8.map(d=>v.jsx(j7,{id:`play-tab-${d.key}`,controls:`play-panel-${d.key}`,label:d.label,isActive:a===d.key,onClick:()=>c(d.key)},d.key))}),v.jsxs("div",{className:"bg-zinc-900/50 p-4 sm:p-6 rounded-b-lg rounded-tr-lg",children:[v.jsx("div",{id:"play-panel-main",role:"tabpanel","aria-labelledby":"play-tab-main",hidden:a!=="main",children:v.jsx(Z7,{character:i,onUpdate:f})}),v.jsx("div",{id:"play-panel-abilities",role:"tabpanel","aria-labelledby":"play-tab-abilities",hidden:a!=="abilities",children:v.jsx(J7,{character:i})}),v.jsx("div",{id:"play-panel-combat",role:"tabpanel","aria-labelledby":"play-tab-combat",hidden:a!=="combat",children:v.jsx(e8,{character:i})}),v.jsx("div",{id:"play-panel-spells",role:"tabpanel","aria-labelledby":"play-tab-spells",hidden:a!=="spells",children:v.jsx(t8,{character:i,onUpdate:f})}),v.jsx("div",{id:"play-panel-inventory",role:"tabpanel","aria-labelledby":"play-tab-inventory",hidden:a!=="inventory",children:v.jsx(n8,{character:i,onUpdate:f})}),v.jsx("div",{id:"play-panel-info",role:"tabpanel","aria-labelledby":"play-tab-info",hidden:a!=="info",children:v.jsx(i8,{character:i})})]})]})},o8=({hp:t,onHpChange:e})=>{const[n,i]=se.useState(""),[r,s]=se.useState(""),[o,a]=se.useState(""),c=()=>{const m=parseInt(n,10);if(!isNaN(m)&&m>0){const p=Math.min(m,t.temporary),g=t.temporary-p,E=m-p,x=Math.max(0,t.current-E);e({...t,current:x,temporary:g}),i("")}},f=()=>{const m=parseInt(r,10);if(!isNaN(m)&&m>0){const p=Math.min(t.max,t.current+m);e({...t,current:p}),s("")}},d=()=>{const m=parseInt(o,10);!isNaN(m)&&m>=0&&(e({...t,temporary:m}),a(""))};return v.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3 text-center",children:"Hit Points"}),v.jsxs("div",{className:"text-center mb-4",children:[v.jsx("span",{className:"text-5xl font-bold text-red-400",children:t.current}),t.temporary>0&&v.jsxs("span",{className:"text-3xl font-bold text-sky-400",title:"Temporary HP",children:[" +",t.temporary]}),v.jsxs("span",{className:"text-2xl text-zinc-400",children:[" / ",t.max]})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[v.jsxs("div",{className:"flex flex-col",children:[v.jsx("input",{type:"number",value:n,onChange:m=>i(m.target.value),onKeyDown:m=>m.key==="Enter"&&c(),placeholder:"Damage",className:"bg-zinc-700 text-center rounded-md p-2 border border-zinc-600 focus:ring-red-500 focus:border-red-500"}),v.jsx("button",{onClick:c,className:"bg-red-800/80 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Apply"})]}),v.jsxs("div",{className:"flex flex-col",children:[v.jsx("input",{type:"number",value:r,onChange:m=>s(m.target.value),onKeyDown:m=>m.key==="Enter"&&f(),placeholder:"Healing",className:"bg-zinc-700 text-center rounded-md p-2 border border-zinc-600 focus:ring-green-500 focus:border-green-500"}),v.jsx("button",{onClick:f,className:"bg-green-800/80 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Apply"})]})]}),v.jsxs("div",{className:"flex flex-col",children:[v.jsx("input",{type:"number",value:o,onChange:m=>a(m.target.value),onKeyDown:m=>m.key==="Enter"&&d(),placeholder:"Set/Replace Temp HP",className:"bg-zinc-700 text-center rounded-md p-2 border border-zinc-600 focus:ring-sky-500 focus:border-sky-500"}),v.jsx("button",{onClick:d,className:"bg-sky-800/80 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Set Temp HP"})]})]})},UE=({title:t,slots:e,onSlotChange:n,isCustom:i})=>{const r=(a,c)=>{if(i){const f=e,d=f.findIndex(E=>E.id===a);if(d===-1)return;const m=f[d],p=c<m.used?c:c+1,g=[...f];g[d]={...m,used:p},n(g)}else{const f=e,d=f[a],m=c<d.used?c:c+1;n({...f,[a]:{...d,used:m}})}},s=i?e:Object.entries(e),o=s.some(a=>i?a.max>0:a[1].max>0);return v.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:t}),!o&&v.jsx("p",{className:"text-zinc-500 text-sm text-center",children:"No resources available."}),v.jsx("div",{className:"space-y-3",children:s.map(a=>{const[c,f]=i?[a.id,a]:a,d=i?f.name:`Lvl ${c}`;return f.max===0?null:v.jsxs("div",{className:"flex items-center",children:[v.jsxs("span",{className:"font-bold text-zinc-400 w-24 truncate",title:d,children:[d,":"]}),v.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:f.max}).map((m,p)=>v.jsx("button",{onClick:()=>r(c,p),className:`w-5 h-5 rounded-md border-2 transition-colors ${p<f.used?"bg-amber-500 border-amber-400":"bg-zinc-600 border-zinc-500 hover:border-amber-400"}`,"aria-label":`Slot ${p+1} for ${d}. ${p<f.used?"Used":"Available"}`},p))})]},c)})})]})},a8=({saves:t,onSaveChange:e})=>{const n=(i,r)=>{const s=t[i],o=r<s?r:r+1;e({...t,[i]:o})};return v.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Death Saves"}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"font-semibold text-zinc-300",children:"Successes"}),v.jsx("div",{className:"flex gap-2",children:Array.from({length:3}).map((i,r)=>v.jsx("input",{type:"checkbox",checked:r<t.successes,onChange:()=>n("successes",r),className:"w-5 h-5 rounded-full text-green-500 bg-zinc-600 border-zinc-500 focus:ring-green-500"},r))})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"font-semibold text-zinc-300",children:"Failures"}),v.jsx("div",{className:"flex gap-2",children:Array.from({length:3}).map((i,r)=>v.jsx("input",{type:"checkbox",checked:r<t.failures,onChange:()=>n("failures",r),className:"w-5 h-5 rounded-full text-red-500 bg-zinc-600 border-zinc-500 focus:ring-red-500"},r))})]})]})]})},l8=({items:t})=>{const[e,n]=se.useState({}),i=o=>{if(!o||typeof o!="string")return{total:0,pretty:"Invalid input"};const a=o.replace(/[\s()]/g,"").split("+");let c=0;const f=[],d=/(\d+)d(\d+)/;for(const m of a){if(!m)continue;const p=m.match(d);if(p){const g=parseInt(p[1],10),E=parseInt(p[2],10);let x=0;const P=Array.from({length:g},()=>Math.floor(Math.random()*E)+1);x=P.reduce((A,w)=>A+w,0),c+=x,f.push(`[${P.join("+")}]`)}else{const g=parseInt(m,10);isNaN(g)||(c+=g,f.push(String(g)))}}return f.length===0?{total:0,pretty:"Invalid Format"}:{total:c,pretty:`${f.join(" + ")} = ${c}`}},r=o=>{const a=parseInt(o.bonus)||0,c=Math.floor(Math.random()*20)+1,f=c+a,d=`${c} ${a>=0?"+":"-"} ${Math.abs(a)} = ${f}`;n(m=>({...m,[o.id]:{...m[o.id],atk:d}}))},s=o=>{const{pretty:a}=i(o.damage);n(c=>({...c,[o.id]:{...c[o.id],dmg:a}}))};return v.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Attacks & Cantrips"}),v.jsxs("div",{className:"space-y-3 flex-grow overflow-y-auto pr-2 -mr-2 max-h-[calc(50vh-5rem)]",children:[t.length===0&&v.jsx("p",{className:"text-zinc-500 text-sm text-center py-4",children:"None."}),t.map(o=>{var a,c;return v.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm p-3 space-y-2",children:[v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsx("span",{className:"font-semibold text-amber-300 text-base",children:o.name}),v.jsxs("div",{className:"flex gap-4 font-mono text-zinc-300 text-right",children:[v.jsx("span",{title:"Attack Bonus",children:o.bonus}),v.jsx("span",{title:"Damage",children:o.damage})]})]}),v.jsxs("div",{className:"flex justify-end items-center gap-2",children:[v.jsx("button",{onClick:()=>r(o),className:"text-xs bg-zinc-600 hover:bg-zinc-500 rounded px-3 py-1.5 transition-colors font-bold",children:"ATK"}),v.jsx("button",{onClick:()=>s(o),className:"text-xs bg-red-800/80 hover:bg-red-700 rounded px-3 py-1.5 transition-colors font-bold",children:"DMG"})]}),(((a=e[o.id])==null?void 0:a.atk)||((c=e[o.id])==null?void 0:c.dmg))&&v.jsxs("div",{className:"text-xs text-zinc-300 bg-zinc-900/50 p-2 rounded-md border-l-2 border-amber-500 space-y-1",children:[e[o.id].atk&&v.jsxs("div",{children:[v.jsx("strong",{children:"Attack:"})," ",v.jsx("span",{className:"font-mono text-amber-300",children:e[o.id].atk})]}),e[o.id].dmg&&v.jsxs("div",{children:[v.jsx("strong",{children:"Damage:"})," ",v.jsx("span",{className:"font-mono text-red-400",children:e[o.id].dmg})]})]})]},o.id)})]})]})},u8=({title:t,items:e})=>{const[n,i]=se.useState({});return v.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:t}),v.jsxs("div",{className:"space-y-2 flex-grow overflow-y-auto pr-2 -mr-2 max-h-[calc(50vh-5rem)]",children:[e.length===0&&v.jsx("p",{className:"text-zinc-500 text-sm text-center py-4",children:"None."}),e.map(r=>v.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:[v.jsx("div",{className:"flex items-center justify-between p-3 cursor-pointer w-full text-left",onClick:()=>r.description&&i(s=>({...s,[r.id]:!s[r.id]})),children:v.jsx("span",{className:"font-semibold text-amber-300",children:r.name})}),n[r.id]&&r.description&&v.jsx("div",{className:"p-3 border-t border-zinc-600/50 bg-zinc-900/30",children:v.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:r.description})})]},r.id))]})]})},c8=()=>{const[t,e]=se.useState("list"),[n,i]=se.useState(null),[r,s]=se.useState(null),[o,a]=se.useState(!1);se.useEffect(()=>nk(P=>{s(P),P&&W3(),a(!0)}),[]);const c=x=>{i(x),e(x==="new"?"edit":"play")},f=()=>{n&&e("edit")},d=()=>{i(null),e("list")},m=()=>{n==="new"?d():e("play")},p=x=>{i(x),e("play")},g=async x=>{!x||x==="new"||x==="temp_new"||(await ax(x),d())};if(!o)return v.jsx("div",{className:"flex justify-center items-center h-screen",children:v.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})});const E=()=>{switch(t){case"edit":return v.jsx($7,{characterId:n,onSaveComplete:p,onDelete:g,onBack:m});case"play":return v.jsx(s8,{characterId:n,onGoToEdit:f,onBack:d});case"list":default:return v.jsx(lk,{onSelectCharacter:c,currentUser:r})}};return v.jsx("main",{className:"min-h-screen",children:E()})},jx=document.getElementById("root");if(!jx)throw new Error("Could not find root element to mount to");const f8=v2.createRoot(jx);f8.render(v.jsx(Ob.StrictMode,{children:v.jsx(c8,{})}));
