function Uw(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function $g(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Lw={exports:{}},Jd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $R=Symbol.for("react.transitional.element"),YR=Symbol.for("react.fragment");function Vw(t,e,n){var r=null;if(n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:$R,type:t,key:r,ref:e!==void 0?e:null,props:n}}Jd.Fragment=YR;Jd.jsx=Vw;Jd.jsxs=Vw;Lw.exports=Jd;var m=Lw.exports,zw={exports:{}},Te={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg=Symbol.for("react.transitional.element"),XR=Symbol.for("react.portal"),QR=Symbol.for("react.fragment"),KR=Symbol.for("react.strict_mode"),WR=Symbol.for("react.profiler"),ZR=Symbol.for("react.consumer"),JR=Symbol.for("react.context"),eC=Symbol.for("react.forward_ref"),tC=Symbol.for("react.suspense"),nC=Symbol.for("react.memo"),Bw=Symbol.for("react.lazy"),z0=Symbol.iterator;function rC(t){return t===null||typeof t!="object"?null:(t=z0&&t[z0]||t["@@iterator"],typeof t=="function"?t:null)}var Fw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hw=Object.assign,qw={};function pl(t,e,n){this.props=t,this.context=e,this.refs=qw,this.updater=n||Fw}pl.prototype.isReactComponent={};pl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Gw(){}Gw.prototype=pl.prototype;function Xg(t,e,n){this.props=t,this.context=e,this.refs=qw,this.updater=n||Fw}var Qg=Xg.prototype=new Gw;Qg.constructor=Xg;Hw(Qg,pl.prototype);Qg.isPureReactComponent=!0;var B0=Array.isArray,Et={H:null,A:null,T:null,S:null,V:null},$w=Object.prototype.hasOwnProperty;function Kg(t,e,n,r,i,a){return n=a.ref,{$$typeof:Yg,type:t,key:e,ref:n!==void 0?n:null,props:a}}function iC(t,e){return Kg(t.type,e,void 0,void 0,void 0,t.props)}function Wg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yg}function aC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var F0=/\/+/g;function Jf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?aC(""+t.key):e.toString(36)}function H0(){}function sC(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(H0,H0):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function so(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"bigint":case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Yg:case XR:s=!0;break;case Bw:return s=t._init,so(s(t._payload),e,n,r,i)}}if(s)return i=i(t),s=r===""?"."+Jf(t,0):r,B0(i)?(n="",s!=null&&(n=s.replace(F0,"$&/")+"/"),so(i,e,n,"",function(h){return h})):i!=null&&(Wg(i)&&(i=iC(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(F0,"$&/")+"/")+s)),e.push(i)),1;s=0;var o=r===""?".":r+":";if(B0(t))for(var l=0;l<t.length;l++)r=t[l],a=o+Jf(r,l),s+=so(r,e,n,a,i);else if(l=rC(t),typeof l=="function")for(t=l.call(t),l=0;!(r=t.next()).done;)r=r.value,a=o+Jf(r,l++),s+=so(r,e,n,a,i);else if(a==="object"){if(typeof t.then=="function")return so(sC(t),e,n,r,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return s}function Qu(t,e,n){if(t==null)return t;var r=[],i=0;return so(t,r,"","",function(a){return e.call(n,a,i++)}),r}function oC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var q0=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function lC(){}Te.Children={map:Qu,forEach:function(t,e,n){Qu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qu(t,function(){e++}),e},toArray:function(t){return Qu(t,function(e){return e})||[]},only:function(t){if(!Wg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=pl;Te.Fragment=QR;Te.Profiler=WR;Te.PureComponent=Xg;Te.StrictMode=KR;Te.Suspense=tC;Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Et;Te.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Et.H.useMemoCache(t)}};Te.cache=function(t){return function(){return t.apply(null,arguments)}};Te.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var r=Hw({},t.props),i=t.key,a=void 0;if(e!=null)for(s in e.ref!==void 0&&(a=void 0),e.key!==void 0&&(i=""+e.key),e)!$w.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(r[s]=e[s]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];r.children=o}return Kg(t.type,i,void 0,void 0,a,r)};Te.createContext=function(t){return t={$$typeof:JR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:ZR,_context:t},t};Te.createElement=function(t,e,n){var r,i={},a=null;if(e!=null)for(r in e.key!==void 0&&(a=""+e.key),e)$w.call(e,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];i.children=o}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return Kg(t,a,void 0,void 0,null,i)};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:eC,render:t}};Te.isValidElement=Wg;Te.lazy=function(t){return{$$typeof:Bw,_payload:{_status:-1,_result:t},_init:oC}};Te.memo=function(t,e){return{$$typeof:nC,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=Et.T,n={};Et.T=n;try{var r=t(),i=Et.S;i!==null&&i(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(lC,q0)}catch(a){q0(a)}finally{Et.T=e}};Te.unstable_useCacheRefresh=function(){return Et.H.useCacheRefresh()};Te.use=function(t){return Et.H.use(t)};Te.useActionState=function(t,e,n){return Et.H.useActionState(t,e,n)};Te.useCallback=function(t,e){return Et.H.useCallback(t,e)};Te.useContext=function(t){return Et.H.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t,e){return Et.H.useDeferredValue(t,e)};Te.useEffect=function(t,e,n){var r=Et.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(t,e)};Te.useId=function(){return Et.H.useId()};Te.useImperativeHandle=function(t,e,n){return Et.H.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return Et.H.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return Et.H.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return Et.H.useMemo(t,e)};Te.useOptimistic=function(t,e){return Et.H.useOptimistic(t,e)};Te.useReducer=function(t,e,n){return Et.H.useReducer(t,e,n)};Te.useRef=function(t){return Et.H.useRef(t)};Te.useState=function(t){return Et.H.useState(t)};Te.useSyncExternalStore=function(t,e,n){return Et.H.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return Et.H.useTransition()};Te.version="19.1.0";zw.exports=Te;var H=zw.exports;const po=$g(H),cC=Uw({__proto__:null,default:po},[H]);var Yw={exports:{}},ef={},Xw={exports:{}},Qw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,M){var q=k.length;k.push(M);e:for(;0<q;){var B=q-1>>>1,X=k[B];if(0<i(X,M))k[B]=M,k[q]=X,q=B;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var M=k[0],q=k.pop();if(q!==M){k[0]=q;e:for(var B=0,X=k.length,re=X>>>1;B<re;){var V=2*(B+1)-1,K=k[V],$=V+1,Y=k[$];if(0>i(K,q))$<X&&0>i(Y,K)?(k[B]=Y,k[$]=q,B=$):(k[B]=K,k[V]=q,B=V);else if($<X&&0>i(Y,q))k[B]=Y,k[$]=q,B=$;else break e}}return M}function i(k,M){var q=k.sortIndex-M.sortIndex;return q!==0?q:k.id-M.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],h=[],u=1,d=null,f=3,p=!1,b=!1,A=!1,D=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function O(k){for(var M=n(h);M!==null;){if(M.callback===null)r(h);else if(M.startTime<=k)r(h),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(h)}}function P(k){if(A=!1,O(k),!b)if(n(l)!==null)b=!0,R||(R=!0,I());else{var M=n(h);M!==null&&z(P,M.startTime-k)}}var R=!1,_=-1,g=5,y=-1;function x(){return D?!0:!(t.unstable_now()-y<g)}function C(){if(D=!1,R){var k=t.unstable_now();y=k;var M=!0;try{e:{b=!1,A&&(A=!1,T(_),_=-1),p=!0;var q=f;try{t:{for(O(k),d=n(l);d!==null&&!(d.expirationTime>k&&x());){var B=d.callback;if(typeof B=="function"){d.callback=null,f=d.priorityLevel;var X=B(d.expirationTime<=k);if(k=t.unstable_now(),typeof X=="function"){d.callback=X,O(k),M=!0;break t}d===n(l)&&r(l),O(k)}else r(l);d=n(l)}if(d!==null)M=!0;else{var re=n(h);re!==null&&z(P,re.startTime-k),M=!1}}break e}finally{d=null,f=q,p=!1}M=void 0}}finally{M?I():R=!1}}}var I;if(typeof N=="function")I=function(){N(C)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,U=S.port2;S.port1.onmessage=C,I=function(){U.postMessage(null)}}else I=function(){w(C,0)};function z(k,M){_=w(function(){k(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(k){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var q=f;f=M;try{return k()}finally{f=q}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(k,M){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var q=f;f=k;try{return M()}finally{f=q}},t.unstable_scheduleCallback=function(k,M,q){var B=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?B+q:B):q=B,k){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=q+X,k={id:u++,callback:M,priorityLevel:k,startTime:q,expirationTime:X,sortIndex:-1},q>B?(k.sortIndex=q,e(h,k),n(l)===null&&k===n(h)&&(A?(T(_),_=-1):A=!0,z(P,q-B))):(k.sortIndex=X,e(l,k),b||p||(b=!0,R||(R=!0,I()))),k},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(k){var M=f;return function(){var q=f;f=M;try{return k.apply(this,arguments)}finally{f=q}}}})(Qw);Xw.exports=Qw;var uC=Xw.exports,Kw={exports:{}},Ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hC=H;function Ww(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ta(){}var Un={d:{f:ta,r:function(){throw Error(Ww(522))},D:ta,C:ta,L:ta,m:ta,X:ta,S:ta,M:ta},p:0,findDOMNode:null},dC=Symbol.for("react.portal");function fC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dC,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}var cc=hC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function tf(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Un;Ln.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(Ww(299));return fC(t,e,null,n)};Ln.flushSync=function(t){var e=cc.T,n=Un.p;try{if(cc.T=null,Un.p=2,t)return t()}finally{cc.T=e,Un.p=n,Un.d.f()}};Ln.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Un.d.C(t,e))};Ln.prefetchDNS=function(t){typeof t=="string"&&Un.d.D(t)};Ln.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,r=tf(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,a=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Un.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:a}):n==="script"&&Un.d.X(t,{crossOrigin:r,integrity:i,fetchPriority:a,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Ln.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=tf(e.as,e.crossOrigin);Un.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Un.d.M(t)};Ln.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,r=tf(n,e.crossOrigin);Un.d.L(t,n,{crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Ln.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=tf(e.as,e.crossOrigin);Un.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Un.d.m(t)};Ln.requestFormReset=function(t){Un.d.r(t)};Ln.unstable_batchedUpdates=function(t,e){return t(e)};Ln.useFormState=function(t,e,n){return cc.H.useFormState(t,e,n)};Ln.useFormStatus=function(){return cc.H.useHostTransitionStatus()};Ln.version="19.1.0";function Zw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zw)}catch(t){console.error(t)}}Zw(),Kw.exports=Ln;var Zg=Kw.exports;const mC=$g(Zg),pC=Uw({__proto__:null,default:mC},[Zg]);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jt=uC,Jw=H,gC=Zg;function ee(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function eE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function G0(t){if(nu(t)!==t)throw Error(ee(188))}function vC(t){var e=t.alternate;if(!e){if(e=nu(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return G0(i),t;if(a===r)return G0(i),e;a=a.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function nE(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=nE(t),e!==null)return e;t=t.sibling}return null}var pt=Object.assign,yC=Symbol.for("react.element"),Ku=Symbol.for("react.transitional.element"),ec=Symbol.for("react.portal"),go=Symbol.for("react.fragment"),rE=Symbol.for("react.strict_mode"),ap=Symbol.for("react.profiler"),_C=Symbol.for("react.provider"),iE=Symbol.for("react.consumer"),Ri=Symbol.for("react.context"),Jg=Symbol.for("react.forward_ref"),sp=Symbol.for("react.suspense"),op=Symbol.for("react.suspense_list"),ev=Symbol.for("react.memo"),oa=Symbol.for("react.lazy"),lp=Symbol.for("react.activity"),bC=Symbol.for("react.memo_cache_sentinel"),$0=Symbol.iterator;function Ll(t){return t===null||typeof t!="object"?null:(t=$0&&t[$0]||t["@@iterator"],typeof t=="function"?t:null)}var wC=Symbol.for("react.client.reference");function cp(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===wC?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case go:return"Fragment";case ap:return"Profiler";case rE:return"StrictMode";case sp:return"Suspense";case op:return"SuspenseList";case lp:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ec:return"Portal";case Ri:return(t.displayName||"Context")+".Provider";case iE:return(t._context.displayName||"Context")+".Consumer";case Jg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ev:return e=t.displayName||null,e!==null?e:cp(t.type)||"Memo";case oa:e=t._payload,t=t._init;try{return cp(t(e))}catch{}}return null}var tc=Array.isArray,ve=Jw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,He=gC.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ys={pending:!1,data:null,method:null,action:null},up=[],vo=-1;function mi(t){return{current:t}}function cn(t){0>vo||(t.current=up[vo],up[vo]=null,vo--)}function xt(t,e){vo++,up[vo]=t.current,t.current=e}var ni=mi(null),Oc=mi(null),Aa=mi(null),$h=mi(null);function Yh(t,e){switch(xt(Aa,e),xt(Oc,t),xt(ni,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?W_(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=W_(e),t=wT(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}cn(ni),xt(ni,t)}function Yo(){cn(ni),cn(Oc),cn(Aa)}function hp(t){t.memoizedState!==null&&xt($h,t);var e=ni.current,n=wT(e,t.type);e!==n&&(xt(Oc,t),xt(ni,n))}function Xh(t){Oc.current===t&&(cn(ni),cn(Oc)),$h.current===t&&(cn($h),Fc._currentValue=ys)}var dp=Object.prototype.hasOwnProperty,tv=Jt.unstable_scheduleCallback,em=Jt.unstable_cancelCallback,EC=Jt.unstable_shouldYield,xC=Jt.unstable_requestPaint,ri=Jt.unstable_now,TC=Jt.unstable_getCurrentPriorityLevel,aE=Jt.unstable_ImmediatePriority,sE=Jt.unstable_UserBlockingPriority,Qh=Jt.unstable_NormalPriority,AC=Jt.unstable_LowPriority,oE=Jt.unstable_IdlePriority,SC=Jt.log,RC=Jt.unstable_setDisableYieldValue,ru=null,cr=null;function va(t){if(typeof SC=="function"&&RC(t),cr&&typeof cr.setStrictMode=="function")try{cr.setStrictMode(ru,t)}catch{}}var ur=Math.clz32?Math.clz32:IC,CC=Math.log,NC=Math.LN2;function IC(t){return t>>>=0,t===0?32:31-(CC(t)/NC|0)|0}var Wu=256,Zu=4194304;function os(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function nf(t,e,n){var r=t.pendingLanes;if(r===0)return 0;var i=0,a=t.suspendedLanes,s=t.pingedLanes;t=t.warmLanes;var o=r&134217727;return o!==0?(r=o&~a,r!==0?i=os(r):(s&=o,s!==0?i=os(s):n||(n=o&~t,n!==0&&(i=os(n))))):(o=r&~a,o!==0?i=os(o):s!==0?i=os(s):n||(n=r&~t,n!==0&&(i=os(n)))),i===0?0:e!==0&&e!==i&&!(e&a)&&(a=i&-i,n=e&-e,a>=n||a===32&&(n&4194048)!==0)?e:i}function iu(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function DC(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lE(){var t=Wu;return Wu<<=1,!(Wu&4194048)&&(Wu=256),t}function cE(){var t=Zu;return Zu<<=1,!(Zu&62914560)&&(Zu=4194304),t}function tm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function au(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function OC(t,e,n,r,i,a){var s=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,h=t.hiddenUpdates;for(n=s&~n;0<n;){var u=31-ur(n),d=1<<u;o[u]=0,l[u]=-1;var f=h[u];if(f!==null)for(h[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&uE(t,r,0),a!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=a&~(s&~e))}function uE(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var r=31-ur(e);t.entangledLanes|=e,t.entanglements[r]=t.entanglements[r]|1073741824|n&4194090}function hE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ur(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}function nv(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function rv(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function dE(){var t=He.p;return t!==0?t:(t=window.event,t===void 0?32:DT(t.type))}function MC(t,e){var n=He.p;try{return He.p=t,e()}finally{He.p=n}}var Ka=Math.random().toString(36).slice(2),Nn="__reactFiber$"+Ka,Wn="__reactProps$"+Ka,gl="__reactContainer$"+Ka,fp="__reactEvents$"+Ka,kC="__reactListeners$"+Ka,jC="__reactHandles$"+Ka,Y0="__reactResources$"+Ka,su="__reactMarker$"+Ka;function iv(t){delete t[Nn],delete t[Wn],delete t[fp],delete t[kC],delete t[jC]}function yo(t){var e=t[Nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gl]||n[Nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=eb(t);t!==null;){if(n=t[Nn])return n;t=eb(t)}return e}t=n,n=t.parentNode}return null}function vl(t){if(t=t[Nn]||t[gl]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function nc(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(ee(33))}function Oo(t){var e=t[Y0];return e||(e=t[Y0]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function on(t){t[su]=!0}var fE=new Set,mE={};function zs(t,e){Xo(t,e),Xo(t+"Capture",e)}function Xo(t,e){for(mE[t]=e,t=0;t<e.length;t++)fE.add(e[t])}var PC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),X0={},Q0={};function UC(t){return dp.call(Q0,t)?!0:dp.call(X0,t)?!1:PC.test(t)?Q0[t]=!0:(X0[t]=!0,!1)}function wh(t,e,n){if(UC(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var r=e.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Ju(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function wi(t,e,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+r)}}var nm,K0;function oo(t){if(nm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);nm=e&&e[1]||"",K0=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nm+t+K0}var rm=!1;function im(t,e){if(!t||rm)return"";rm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(p){var f=p}Reflect.construct(t,[],d)}else{try{d.call()}catch(p){f=p}t.call(d.prototype)}}else{try{throw Error()}catch(p){f=p}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(p){if(p&&f&&typeof p.stack=="string")return[p.stack,f.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var l=s.split(`
`),h=o.split(`
`);for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<h.length&&!h[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===h.length)for(r=l.length-1,i=h.length-1;1<=r&&0<=i&&l[r]!==h[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==h[i]){if(r!==1||i!==1)do if(r--,i--,0>i||l[r]!==h[i]){var u=`
`+l[r].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=r&&0<=i);break}}}finally{rm=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?oo(n):""}function LC(t){switch(t.tag){case 26:case 27:case 5:return oo(t.type);case 16:return oo("Lazy");case 13:return oo("Suspense");case 19:return oo("SuspenseList");case 0:case 15:return im(t.type,!1);case 11:return im(t.type.render,!1);case 1:return im(t.type,!0);case 31:return oo("Activity");default:return""}}function W0(t){try{var e="";do e+=LC(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function yr(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VC(t){var e=pE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kh(t){t._valueTracker||(t._valueTracker=VC(t))}function gE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=pE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zC=/[\n"\\]/g;function wr(t){return t.replace(zC,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function mp(t,e,n,r,i,a,s,o){t.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?t.type=s:t.removeAttribute("type"),e!=null?s==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+yr(e)):t.value!==""+yr(e)&&(t.value=""+yr(e)):s!=="submit"&&s!=="reset"||t.removeAttribute("value"),e!=null?pp(t,s,yr(e)):n!=null?pp(t,s,yr(n)):r!=null&&t.removeAttribute("value"),i==null&&a!=null&&(t.defaultChecked=!!a),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+yr(o):t.removeAttribute("name")}function vE(t,e,n,r,i,a,s,o){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.type=a),e!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||e!=null))return;n=n!=null?""+yr(n):"",e=e!=null?""+yr(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}r=r??i,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=o?t.checked:!!r,t.defaultChecked=!!r,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.name=s)}function pp(t,e,n){e==="number"&&Wh(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Mo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function yE(t,e,n){if(e!=null&&(e=""+yr(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+yr(n):""}function _E(t,e,n,r){if(e==null){if(r!=null){if(n!=null)throw Error(ee(92));if(tc(r)){if(1<r.length)throw Error(ee(93));r=r[0]}n=r}n==null&&(n=""),e=n}n=yr(e),t.defaultValue=n,r=t.textContent,r===n&&r!==""&&r!==null&&(t.value=r)}function Qo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var BC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Z0(t,e,n){var r=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":r?t.setProperty(e,n):typeof n!="number"||n===0||BC.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function bE(t,e,n){if(e!=null&&typeof e!="object")throw Error(ee(62));if(t=t.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||e!=null&&e.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var i in e)r=e[i],e.hasOwnProperty(i)&&n[i]!==r&&Z0(t,i,r)}else for(var a in e)e.hasOwnProperty(a)&&Z0(t,a,e[a])}function av(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var FC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),HC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Eh(t){return HC.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var gp=null;function sv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _o=null,ko=null;function J0(t){var e=vl(t);if(e&&(t=e.stateNode)){var n=t[Wn]||null;e:switch(t=e.stateNode,e.type){case"input":if(mp(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+wr(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=r[Wn]||null;if(!i)throw Error(ee(90));mp(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)r=n[e],r.form===t.form&&gE(r)}break e;case"textarea":yE(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Mo(t,!!n.multiple,e,!1)}}}var am=!1;function wE(t,e,n){if(am)return t(e,n);am=!0;try{var r=t(e);return r}finally{if(am=!1,(_o!==null||ko!==null)&&(ff(),_o&&(e=_o,t=ko,ko=_o=null,J0(e),t)))for(e=0;e<t.length;e++)J0(t[e])}}function Mc(t,e){var n=t.stateNode;if(n===null)return null;var r=n[Wn]||null;if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vp=!1;if(Ui)try{var Vl={};Object.defineProperty(Vl,"passive",{get:function(){vp=!0}}),window.addEventListener("test",Vl,Vl),window.removeEventListener("test",Vl,Vl)}catch{vp=!1}var ya=null,ov=null,xh=null;function EE(){if(xh)return xh;var t,e=ov,n=e.length,r,i="value"in ya?ya.value:ya.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[a-r];r++);return xh=i.slice(t,1<r?1-r:void 0)}function Th(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function eh(){return!0}function e_(){return!1}function Zn(t){function e(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?eh:e_,this.isPropagationStopped=e_,this}return pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=eh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=eh)},persist:function(){},isPersistent:eh}),e}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rf=Zn(Bs),ou=pt({},Bs,{view:0,detail:0}),qC=Zn(ou),sm,om,zl,af=pt({},ou,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zl&&(zl&&t.type==="mousemove"?(sm=t.screenX-zl.screenX,om=t.screenY-zl.screenY):om=sm=0,zl=t),sm)},movementY:function(t){return"movementY"in t?t.movementY:om}}),t_=Zn(af),GC=pt({},af,{dataTransfer:0}),$C=Zn(GC),YC=pt({},ou,{relatedTarget:0}),lm=Zn(YC),XC=pt({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),QC=Zn(XC),KC=pt({},Bs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),WC=Zn(KC),ZC=pt({},Bs,{data:0}),n_=Zn(ZC),JC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tN[t])?!!e[t]:!1}function lv(){return nN}var rN=pt({},ou,{key:function(t){if(t.key){var e=JC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Th(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lv,charCode:function(t){return t.type==="keypress"?Th(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Th(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iN=Zn(rN),aN=pt({},af,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r_=Zn(aN),sN=pt({},ou,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lv}),oN=Zn(sN),lN=pt({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),cN=Zn(lN),uN=pt({},af,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hN=Zn(uN),dN=pt({},Bs,{newState:0,oldState:0}),fN=Zn(dN),mN=[9,13,27,32],cv=Ui&&"CompositionEvent"in window,uc=null;Ui&&"documentMode"in document&&(uc=document.documentMode);var pN=Ui&&"TextEvent"in window&&!uc,xE=Ui&&(!cv||uc&&8<uc&&11>=uc),i_=" ",a_=!1;function TE(t,e){switch(t){case"keyup":return mN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bo=!1;function gN(t,e){switch(t){case"compositionend":return AE(e);case"keypress":return e.which!==32?null:(a_=!0,i_);case"textInput":return t=e.data,t===i_&&a_?null:t;default:return null}}function vN(t,e){if(bo)return t==="compositionend"||!cv&&TE(t,e)?(t=EE(),xh=ov=ya=null,bo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xE&&e.locale!=="ko"?null:e.data;default:return null}}var yN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function s_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yN[t.type]:e==="textarea"}function SE(t,e,n,r){_o?ko?ko.push(r):ko=[r]:_o=r,e=pd(e,"onChange"),0<e.length&&(n=new rf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hc=null,kc=null;function _N(t){yT(t,0)}function sf(t){var e=nc(t);if(gE(e))return t}function o_(t,e){if(t==="change")return e}var RE=!1;if(Ui){var cm;if(Ui){var um="oninput"in document;if(!um){var l_=document.createElement("div");l_.setAttribute("oninput","return;"),um=typeof l_.oninput=="function"}cm=um}else cm=!1;RE=cm&&(!document.documentMode||9<document.documentMode)}function c_(){hc&&(hc.detachEvent("onpropertychange",CE),kc=hc=null)}function CE(t){if(t.propertyName==="value"&&sf(kc)){var e=[];SE(e,kc,t,sv(t)),wE(_N,e)}}function bN(t,e,n){t==="focusin"?(c_(),hc=e,kc=n,hc.attachEvent("onpropertychange",CE)):t==="focusout"&&c_()}function wN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sf(kc)}function EN(t,e){if(t==="click")return sf(e)}function xN(t,e){if(t==="input"||t==="change")return sf(e)}function TN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mr=typeof Object.is=="function"?Object.is:TN;function jc(t,e){if(mr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!dp.call(e,i)||!mr(t[i],e[i]))return!1}return!0}function u_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function h_(t,e){var n=u_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=u_(n)}}function NE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?NE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function IE(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Wh(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wh(t.document)}return e}function uv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var AN=Ui&&"documentMode"in document&&11>=document.documentMode,wo=null,yp=null,dc=null,_p=!1;function d_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_p||wo==null||wo!==Wh(r)||(r=wo,"selectionStart"in r&&uv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dc&&jc(dc,r)||(dc=r,r=pd(yp,"onSelect"),0<r.length&&(e=new rf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wo)))}function is(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Eo={animationend:is("Animation","AnimationEnd"),animationiteration:is("Animation","AnimationIteration"),animationstart:is("Animation","AnimationStart"),transitionrun:is("Transition","TransitionRun"),transitionstart:is("Transition","TransitionStart"),transitioncancel:is("Transition","TransitionCancel"),transitionend:is("Transition","TransitionEnd")},hm={},DE={};Ui&&(DE=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function Fs(t){if(hm[t])return hm[t];if(!Eo[t])return t;var e=Eo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in DE)return hm[t]=e[n];return t}var OE=Fs("animationend"),ME=Fs("animationiteration"),kE=Fs("animationstart"),SN=Fs("transitionrun"),RN=Fs("transitionstart"),CN=Fs("transitioncancel"),jE=Fs("transitionend"),PE=new Map,bp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bp.push("scrollEnd");function Hr(t,e){PE.set(t,e),zs(e,[t])}var f_=new WeakMap;function Er(t,e){if(typeof t=="object"&&t!==null){var n=f_.get(t);return n!==void 0?n:(e={value:t,source:e,stack:W0(e)},f_.set(t,e),e)}return{value:t,source:e,stack:W0(e)}}var vr=[],xo=0,hv=0;function of(){for(var t=xo,e=hv=xo=0;e<t;){var n=vr[e];vr[e++]=null;var r=vr[e];vr[e++]=null;var i=vr[e];vr[e++]=null;var a=vr[e];if(vr[e++]=null,r!==null&&i!==null){var s=r.pending;s===null?i.next=i:(i.next=s.next,s.next=i),r.pending=i}a!==0&&UE(n,i,a)}}function lf(t,e,n,r){vr[xo++]=t,vr[xo++]=e,vr[xo++]=n,vr[xo++]=r,hv|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function dv(t,e,n,r){return lf(t,e,n,r),Zh(t)}function yl(t,e){return lf(t,null,null,e),Zh(t)}function UE(t,e,n){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=t.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(t=a.stateNode,t===null||t._visibility&1||(i=!0)),t=a,a=a.return;return t.tag===3?(a=t.stateNode,i&&e!==null&&(i=31-ur(n),t=a.hiddenUpdates,r=t[i],r===null?t[i]=[e]:r.push(e),e.lane=n|536870912),a):null}function Zh(t){if(50<Ec)throw Ec=0,Bp=null,Error(ee(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var To={};function NN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(t,e,n,r){return new NN(t,e,n,r)}function fv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ki(t,e){var n=t.alternate;return n===null?(n=ar(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function LE(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Ah(t,e,n,r,i,a){var s=0;if(r=t,typeof t=="function")fv(t)&&(s=1);else if(typeof t=="string")s=DI(t,n,ni.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case lp:return t=ar(31,n,e,i),t.elementType=lp,t.lanes=a,t;case go:return _s(n.children,i,a,e);case rE:s=8,i|=24;break;case ap:return t=ar(12,n,e,i|2),t.elementType=ap,t.lanes=a,t;case sp:return t=ar(13,n,e,i),t.elementType=sp,t.lanes=a,t;case op:return t=ar(19,n,e,i),t.elementType=op,t.lanes=a,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _C:case Ri:s=10;break e;case iE:s=9;break e;case Jg:s=11;break e;case ev:s=14;break e;case oa:s=16,r=null;break e}s=29,n=Error(ee(130,t===null?"null":typeof t,"")),r=null}return e=ar(s,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function _s(t,e,n,r){return t=ar(7,t,r,e),t.lanes=n,t}function dm(t,e,n){return t=ar(6,t,null,e),t.lanes=n,t}function fm(t,e,n){return e=ar(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Ao=[],So=0,Jh=null,ed=0,_r=[],br=0,bs=null,Ci=1,Ni="";function ls(t,e){Ao[So++]=ed,Ao[So++]=Jh,Jh=t,ed=e}function VE(t,e,n){_r[br++]=Ci,_r[br++]=Ni,_r[br++]=bs,bs=t;var r=Ci;t=Ni;var i=32-ur(r)-1;r&=~(1<<i),n+=1;var a=32-ur(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ci=1<<32-ur(e)+i|n<<i|r,Ni=a+t}else Ci=1<<a|n<<i|r,Ni=t}function mv(t){t.return!==null&&(ls(t,1),VE(t,1,0))}function pv(t){for(;t===Jh;)Jh=Ao[--So],Ao[So]=null,ed=Ao[--So],Ao[So]=null;for(;t===bs;)bs=_r[--br],_r[br]=null,Ni=_r[--br],_r[br]=null,Ci=_r[--br],_r[br]=null}var Pn=null,Nt=null,Fe=!1,ws=null,ei=!1,wp=Error(ee(519));function Ns(t){var e=Error(ee(418,""));throw Pc(Er(e,t)),wp}function m_(t){var e=t.stateNode,n=t.type,r=t.memoizedProps;switch(e[Nn]=t,e[Wn]=r,n){case"dialog":Ne("cancel",e),Ne("close",e);break;case"iframe":case"object":case"embed":Ne("load",e);break;case"video":case"audio":for(n=0;n<Vc.length;n++)Ne(Vc[n],e);break;case"source":Ne("error",e);break;case"img":case"image":case"link":Ne("error",e),Ne("load",e);break;case"details":Ne("toggle",e);break;case"input":Ne("invalid",e),vE(e,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),Kh(e);break;case"select":Ne("invalid",e);break;case"textarea":Ne("invalid",e),_E(e,r.value,r.defaultValue,r.children),Kh(e)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||r.suppressHydrationWarning===!0||bT(e.textContent,n)?(r.popover!=null&&(Ne("beforetoggle",e),Ne("toggle",e)),r.onScroll!=null&&Ne("scroll",e),r.onScrollEnd!=null&&Ne("scrollend",e),r.onClick!=null&&(e.onclick=gf),e=!0):e=!1,e||Ns(t)}function p_(t){for(Pn=t.return;Pn;)switch(Pn.tag){case 5:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:Pn=Pn.return}}function Bl(t){if(t!==Pn)return!1;if(!Fe)return p_(t),Fe=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Yp(t.type,t.memoizedProps)),n=!n),n&&Nt&&Ns(t),p_(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){Nt=zr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}Nt=null}}else e===27?(e=Nt,Wa(t.type)?(t=Kp,Kp=null,Nt=t):Nt=e):Nt=Pn?zr(t.stateNode.nextSibling):null;return!0}function lu(){Nt=Pn=null,Fe=!1}function g_(){var t=ws;return t!==null&&(Gn===null?Gn=t:Gn.push.apply(Gn,t),ws=null),t}function Pc(t){ws===null?ws=[t]:ws.push(t)}var Ep=mi(null),Hs=null,Ii=null;function ca(t,e,n){xt(Ep,e._currentValue),e._currentValue=n}function ji(t){t._currentValue=Ep.current,cn(Ep)}function xp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Tp(t,e,n,r){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){var s=i.child;a=a.firstContext;e:for(;a!==null;){var o=a;a=i;for(var l=0;l<e.length;l++)if(o.context===e[l]){a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),xp(a.return,n,t),r||(s=null);break e}a=o.next}}else if(i.tag===18){if(s=i.return,s===null)throw Error(ee(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),xp(s,n,t),s=null}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}}function cu(t,e,n,r){t=null;for(var i=e,a=!1;i!==null;){if(!a){if(i.flags&524288)a=!0;else if(i.flags&262144)break}if(i.tag===10){var s=i.alternate;if(s===null)throw Error(ee(387));if(s=s.memoizedProps,s!==null){var o=i.type;mr(i.pendingProps.value,s.value)||(t!==null?t.push(o):t=[o])}}else if(i===$h.current){if(s=i.alternate,s===null)throw Error(ee(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(Fc):t=[Fc])}i=i.return}t!==null&&Tp(e,t,n,r),e.flags|=262144}function td(t){for(t=t.firstContext;t!==null;){if(!mr(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Is(t){Hs=t,Ii=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function In(t){return zE(Hs,t)}function th(t,e){return Hs===null&&Is(t),zE(t,e)}function zE(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Ii===null){if(t===null)throw Error(ee(308));Ii=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Ii=Ii.next=e;return n}var IN=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,r){t.push(r)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},DN=Jt.unstable_scheduleCallback,ON=Jt.unstable_NormalPriority,Kt={$$typeof:Ri,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gv(){return{controller:new IN,data:new Map,refCount:0}}function uu(t){t.refCount--,t.refCount===0&&DN(ON,function(){t.controller.abort()})}var fc=null,Ap=0,Ko=0,jo=null;function MN(t,e){if(fc===null){var n=fc=[];Ap=0,Ko=Vv(),jo={status:"pending",value:void 0,then:function(r){n.push(r)}}}return Ap++,e.then(v_,v_),e}function v_(){if(--Ap===0&&fc!==null){jo!==null&&(jo.status="fulfilled");var t=fc;fc=null,Ko=0,jo=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function kN(t,e){var n=[],r={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){r.status="fulfilled",r.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(r.status="rejected",r.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),r}var y_=ve.S;ve.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&MN(t,e),y_!==null&&y_(t,e)};var Es=mi(null);function vv(){var t=Es.current;return t!==null?t:ut.pooledCache}function Sh(t,e){e===null?xt(Es,Es.current):xt(Es,e.pool)}function BE(){var t=vv();return t===null?null:{parent:Kt._currentValue,pool:t}}var hu=Error(ee(460)),FE=Error(ee(474)),cf=Error(ee(542)),Sp={then:function(){}};function __(t){return t=t.status,t==="fulfilled"||t==="rejected"}function nh(){}function HE(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(nh,nh),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,w_(t),t;default:if(typeof e.status=="string")e.then(nh,nh);else{if(t=ut,t!==null&&100<t.shellSuspendCounter)throw Error(ee(482));t=e,t.status="pending",t.then(function(r){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=r}},function(r){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=r}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,w_(t),t}throw mc=e,hu}}var mc=null;function b_(){if(mc===null)throw Error(ee(459));var t=mc;return mc=null,t}function w_(t){if(t===hu||t===cf)throw Error(ee(483))}var la=!1;function yv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Sa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ra(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,e=Zh(t),UE(t,null,n),e}return lf(t,r,e,n),Zh(t)}function pc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hE(t,n)}}function mm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Cp=!1;function gc(){if(Cp){var t=jo;if(t!==null)throw t}}function vc(t,e,n,r){Cp=!1;var i=t.updateQueue;la=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,h=l.next;l.next=null,s===null?a=h:s.next=h,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==s&&(o===null?u.firstBaseUpdate=h:o.next=h,u.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;s=0,u=h=l=null,o=a;do{var f=o.lane&-536870913,p=f!==o.lane;if(p?(Ve&f)===f:(r&f)===f){f!==0&&f===Ko&&(Cp=!0),u!==null&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var b=t,A=o;f=e;var D=n;switch(A.tag){case 1:if(b=A.payload,typeof b=="function"){d=b.call(D,d,f);break e}d=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=A.payload,f=typeof b=="function"?b.call(D,d,f):b,f==null)break e;d=pt({},d,f);break e;case 2:la=!0}}f=o.callback,f!==null&&(t.flags|=64,p&&(t.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(h=u=p,l=d):u=u.next=p,s|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=h,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),za|=s,t.lanes=s,t.memoizedState=d}}function qE(t,e){if(typeof t!="function")throw Error(ee(191,t));t.call(e)}function GE(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)qE(n[t],e)}var Wo=mi(null),nd=mi(0);function E_(t,e){t=zi,xt(nd,t),xt(Wo,e),zi=t|e.baseLanes}function Np(){xt(nd,zi),xt(Wo,Wo.current)}function _v(){zi=nd.current,cn(Wo),cn(nd)}var La=0,Re=null,nt=null,Gt=null,rd=!1,Po=!1,Ds=!1,id=0,Uc=0,Uo=null,jN=0;function Pt(){throw Error(ee(321))}function bv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mr(t[n],e[n]))return!1;return!0}function wv(t,e,n,r,i,a){return La=a,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ve.H=t===null||t.memoizedState===null?Ex:xx,Ds=!1,a=n(r,i),Ds=!1,Po&&(a=YE(e,n,r,i)),$E(t),a}function $E(t){ve.H=ad;var e=nt!==null&&nt.next!==null;if(La=0,Gt=nt=Re=null,rd=!1,Uc=0,Uo=null,e)throw Error(ee(300));t===null||ln||(t=t.dependencies,t!==null&&td(t)&&(ln=!0))}function YE(t,e,n,r){Re=t;var i=0;do{if(Po&&(Uo=null),Uc=0,Po=!1,25<=i)throw Error(ee(301));if(i+=1,Gt=nt=null,t.updateQueue!=null){var a=t.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}ve.H=FN,a=e(n,r)}while(Po);return a}function PN(){var t=ve.H,e=t.useState()[0];return e=typeof e.then=="function"?du(e):e,t=t.useState()[0],(nt!==null?nt.memoizedState:null)!==t&&(Re.flags|=1024),e}function Ev(){var t=id!==0;return id=0,t}function xv(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Tv(t){if(rd){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}rd=!1}La=0,Gt=nt=Re=null,Po=!1,Uc=id=0,Uo=null}function Bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Re.memoizedState=Gt=t:Gt=Gt.next=t,Gt}function Qt(){if(nt===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var e=Gt===null?Re.memoizedState:Gt.next;if(e!==null)Gt=e,nt=t;else{if(t===null)throw Re.alternate===null?Error(ee(467)):Error(ee(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Gt===null?Re.memoizedState=Gt=t:Gt=Gt.next=t}return Gt}function Av(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function du(t){var e=Uc;return Uc+=1,Uo===null&&(Uo=[]),t=HE(Uo,t,e),e=Re,(Gt===null?e.memoizedState:Gt.next)===null&&(e=e.alternate,ve.H=e===null||e.memoizedState===null?Ex:xx),t}function uf(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return du(t);if(t.$$typeof===Ri)return In(t)}throw Error(ee(438,String(t)))}function Sv(t){var e=null,n=Re.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var r=Re.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(e={data:r.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Av(),Re.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),r=0;r<t;r++)n[r]=bC;return e.index++,n}function Li(t,e){return typeof e=="function"?e(t):e}function Rh(t){var e=Qt();return Rv(e,nt,t)}function Rv(t,e,n){var r=t.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=n;var i=t.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}e.baseQueue=i=a,r.pending=null}if(a=t.baseState,i===null)t.memoizedState=a;else{e=i.next;var o=s=null,l=null,h=e,u=!1;do{var d=h.lane&-536870913;if(d!==h.lane?(Ve&d)===d:(La&d)===d){var f=h.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),d===Ko&&(u=!0);else if((La&f)===f){h=h.next,f===Ko&&(u=!0);continue}else d={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},l===null?(o=l=d,s=a):l=l.next=d,Re.lanes|=f,za|=f;d=h.action,Ds&&n(a,d),a=h.hasEagerState?h.eagerState:n(a,d)}else f={lane:d,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},l===null?(o=l=f,s=a):l=l.next=f,Re.lanes|=d,za|=d;h=h.next}while(h!==null&&h!==e);if(l===null?s=a:l.next=o,!mr(a,t.memoizedState)&&(ln=!0,u&&(n=jo,n!==null)))throw n;t.memoizedState=a,t.baseState=s,t.baseQueue=l,r.lastRenderedState=a}return i===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function pm(t){var e=Qt(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);mr(a,e.memoizedState)||(ln=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function XE(t,e,n){var r=Re,i=Qt(),a=Fe;if(a){if(n===void 0)throw Error(ee(407));n=n()}else n=e();var s=!mr((nt||i).memoizedState,n);s&&(i.memoizedState=n,ln=!0),i=i.queue;var o=WE.bind(null,r,i,t);if(fu(2048,8,o,[t]),i.getSnapshot!==e||s||Gt!==null&&Gt.memoizedState.tag&1){if(r.flags|=2048,Zo(9,hf(),KE.bind(null,r,i,n,e),null),ut===null)throw Error(ee(349));a||La&124||QE(r,e,n)}return n}function QE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e=Av(),Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function KE(t,e,n,r){e.value=n,e.getSnapshot=r,ZE(e)&&JE(t)}function WE(t,e,n){return n(function(){ZE(e)&&JE(t)})}function ZE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mr(t,n)}catch{return!0}}function JE(t){var e=yl(t,2);e!==null&&dr(e,t,2)}function Ip(t){var e=Bn();if(typeof t=="function"){var n=t;if(t=n(),Ds){va(!0);try{n()}finally{va(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:t},e}function ex(t,e,n,r){return t.baseState=n,Rv(t,nt,typeof r=="function"?r:Li)}function UN(t,e,n,r,i){if(df(t))throw Error(ee(485));if(t=e.action,t!==null){var a={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){a.listeners.push(s)}};ve.T!==null?n(!0):a.isTransition=!1,r(a),n=e.pending,n===null?(a.next=e.pending=a,tx(e,a)):(a.next=n.next,e.pending=n.next=a)}}function tx(t,e){var n=e.action,r=e.payload,i=t.state;if(e.isTransition){var a=ve.T,s={};ve.T=s;try{var o=n(i,r),l=ve.S;l!==null&&l(s,o),x_(t,e,o)}catch(h){Dp(t,e,h)}finally{ve.T=a}}else try{a=n(i,r),x_(t,e,a)}catch(h){Dp(t,e,h)}}function x_(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){T_(t,e,r)},function(r){return Dp(t,e,r)}):T_(t,e,n)}function T_(t,e,n){e.status="fulfilled",e.value=n,nx(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,tx(t,n)))}function Dp(t,e,n){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do e.status="rejected",e.reason=n,nx(e),e=e.next;while(e!==r)}t.action=null}function nx(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function rx(t,e){return e}function A_(t,e){if(Fe){var n=ut.formState;if(n!==null){e:{var r=Re;if(Fe){if(Nt){t:{for(var i=Nt,a=ei;i.nodeType!==8;){if(!a){i=null;break t}if(i=zr(i.nextSibling),i===null){i=null;break t}}a=i.data,i=a==="F!"||a==="F"?i:null}if(i){Nt=zr(i.nextSibling),r=i.data==="F!";break e}}Ns(r)}r=!1}r&&(e=n[0])}}return n=Bn(),n.memoizedState=n.baseState=e,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rx,lastRenderedState:e},n.queue=r,n=_x.bind(null,Re,r),r.dispatch=n,r=Ip(!1),a=Dv.bind(null,Re,!1,r.queue),r=Bn(),i={state:e,dispatch:null,action:t,pending:null},r.queue=i,n=UN.bind(null,Re,i,a,n),i.dispatch=n,r.memoizedState=t,[e,n,!1]}function S_(t){var e=Qt();return ix(e,nt,t)}function ix(t,e,n){if(e=Rv(t,e,rx)[0],t=Rh(Li)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var r=du(e)}catch(s){throw s===hu?cf:s}else r=e;e=Qt();var i=e.queue,a=i.dispatch;return n!==e.memoizedState&&(Re.flags|=2048,Zo(9,hf(),LN.bind(null,i,n),null)),[r,a,t]}function LN(t,e){t.action=e}function R_(t){var e=Qt(),n=nt;if(n!==null)return ix(e,n,t);Qt(),e=e.memoizedState,n=Qt();var r=n.queue.dispatch;return n.memoizedState=t,[e,r,!1]}function Zo(t,e,n,r){return t={tag:t,create:n,deps:r,inst:e,next:null},e=Re.updateQueue,e===null&&(e=Av(),Re.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function hf(){return{destroy:void 0,resource:void 0}}function ax(){return Qt().memoizedState}function Ch(t,e,n,r){var i=Bn();r=r===void 0?null:r,Re.flags|=t,i.memoizedState=Zo(1|e,hf(),n,r)}function fu(t,e,n,r){var i=Qt();r=r===void 0?null:r;var a=i.memoizedState.inst;nt!==null&&r!==null&&bv(r,nt.memoizedState.deps)?i.memoizedState=Zo(e,a,n,r):(Re.flags|=t,i.memoizedState=Zo(1|e,a,n,r))}function C_(t,e){Ch(8390656,8,t,e)}function sx(t,e){fu(2048,8,t,e)}function ox(t,e){return fu(4,2,t,e)}function lx(t,e){return fu(4,4,t,e)}function cx(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ux(t,e,n){n=n!=null?n.concat([t]):null,fu(4,4,cx.bind(null,e,t),n)}function Cv(){}function hx(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return e!==null&&bv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function dx(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;if(e!==null&&bv(e,r[1]))return r[0];if(r=t(),Ds){va(!0);try{t()}finally{va(!1)}}return n.memoizedState=[r,e],r}function Nv(t,e,n){return n===void 0||La&1073741824?t.memoizedState=e:(t.memoizedState=n,t=nT(),Re.lanes|=t,za|=t,n)}function fx(t,e,n,r){return mr(n,e)?n:Wo.current!==null?(t=Nv(t,n,r),mr(t,e)||(ln=!0),t):La&42?(t=nT(),Re.lanes|=t,za|=t,e):(ln=!0,t.memoizedState=n)}function mx(t,e,n,r,i){var a=He.p;He.p=a!==0&&8>a?a:8;var s=ve.T,o={};ve.T=o,Dv(t,!1,e,n);try{var l=i(),h=ve.S;if(h!==null&&h(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=kN(l,r);yc(t,e,u,hr(t))}else yc(t,e,r,hr(t))}catch(d){yc(t,e,{then:function(){},status:"rejected",reason:d},hr())}finally{He.p=a,ve.T=s}}function VN(){}function Op(t,e,n,r){if(t.tag!==5)throw Error(ee(476));var i=px(t).queue;mx(t,i,e,ys,n===null?VN:function(){return gx(t),n(r)})}function px(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:ys,baseState:ys,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:ys},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function gx(t){var e=px(t).next.queue;yc(t,e,{},hr())}function Iv(){return In(Fc)}function vx(){return Qt().memoizedState}function yx(){return Qt().memoizedState}function zN(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=hr();t=Sa(n);var r=Ra(e,t,n);r!==null&&(dr(r,e,n),pc(r,e,n)),e={cache:gv()},t.payload=e;return}e=e.return}}function BN(t,e,n){var r=hr();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},df(t)?bx(e,n):(n=dv(t,e,n,r),n!==null&&(dr(n,t,r),wx(n,e,r)))}function _x(t,e,n){var r=hr();yc(t,e,n,r)}function yc(t,e,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(df(t))bx(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,mr(o,s))return lf(t,e,i,0),ut===null&&of(),!1}catch{}finally{}if(n=dv(t,e,i,r),n!==null)return dr(n,t,r),wx(n,e,r),!0}return!1}function Dv(t,e,n,r){if(r={lane:2,revertLane:Vv(),action:r,hasEagerState:!1,eagerState:null,next:null},df(t)){if(e)throw Error(ee(479))}else e=dv(t,n,r,2),e!==null&&dr(e,t,2)}function df(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function bx(t,e){Po=rd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function wx(t,e,n){if(n&4194048){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hE(t,n)}}var ad={readContext:In,use:uf,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt},Ex={readContext:In,use:uf,useCallback:function(t,e){return Bn().memoizedState=[t,e===void 0?null:e],t},useContext:In,useEffect:C_,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Ch(4194308,4,cx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ch(4194308,4,t,e)},useInsertionEffect:function(t,e){Ch(4,2,t,e)},useMemo:function(t,e){var n=Bn();e=e===void 0?null:e;var r=t();if(Ds){va(!0);try{t()}finally{va(!1)}}return n.memoizedState=[r,e],r},useReducer:function(t,e,n){var r=Bn();if(n!==void 0){var i=n(e);if(Ds){va(!0);try{n(e)}finally{va(!1)}}}else i=e;return r.memoizedState=r.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},r.queue=t,t=t.dispatch=BN.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=Bn();return t={current:t},e.memoizedState=t},useState:function(t){t=Ip(t);var e=t.queue,n=_x.bind(null,Re,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Cv,useDeferredValue:function(t,e){var n=Bn();return Nv(n,t,e)},useTransition:function(){var t=Ip(!1);return t=mx.bind(null,Re,t.queue,!0,!1),Bn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var r=Re,i=Bn();if(Fe){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),ut===null)throw Error(ee(349));Ve&124||QE(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,C_(WE.bind(null,r,a,t),[t]),r.flags|=2048,Zo(9,hf(),KE.bind(null,r,a,n,e),null),n},useId:function(){var t=Bn(),e=ut.identifierPrefix;if(Fe){var n=Ni,r=Ci;n=(r&~(1<<32-ur(r)-1)).toString(32)+n,e=""+e+"R"+n,n=id++,0<n&&(e+="H"+n.toString(32)),e+=""}else n=jN++,e=""+e+"r"+n.toString(32)+"";return t.memoizedState=e},useHostTransitionStatus:Iv,useFormState:A_,useActionState:A_,useOptimistic:function(t){var e=Bn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Dv.bind(null,Re,!0,n),n.dispatch=e,[t,e]},useMemoCache:Sv,useCacheRefresh:function(){return Bn().memoizedState=zN.bind(null,Re)}},xx={readContext:In,use:uf,useCallback:hx,useContext:In,useEffect:sx,useImperativeHandle:ux,useInsertionEffect:ox,useLayoutEffect:lx,useMemo:dx,useReducer:Rh,useRef:ax,useState:function(){return Rh(Li)},useDebugValue:Cv,useDeferredValue:function(t,e){var n=Qt();return fx(n,nt.memoizedState,t,e)},useTransition:function(){var t=Rh(Li)[0],e=Qt().memoizedState;return[typeof t=="boolean"?t:du(t),e]},useSyncExternalStore:XE,useId:vx,useHostTransitionStatus:Iv,useFormState:S_,useActionState:S_,useOptimistic:function(t,e){var n=Qt();return ex(n,nt,t,e)},useMemoCache:Sv,useCacheRefresh:yx},FN={readContext:In,use:uf,useCallback:hx,useContext:In,useEffect:sx,useImperativeHandle:ux,useInsertionEffect:ox,useLayoutEffect:lx,useMemo:dx,useReducer:pm,useRef:ax,useState:function(){return pm(Li)},useDebugValue:Cv,useDeferredValue:function(t,e){var n=Qt();return nt===null?Nv(n,t,e):fx(n,nt.memoizedState,t,e)},useTransition:function(){var t=pm(Li)[0],e=Qt().memoizedState;return[typeof t=="boolean"?t:du(t),e]},useSyncExternalStore:XE,useId:vx,useHostTransitionStatus:Iv,useFormState:R_,useActionState:R_,useOptimistic:function(t,e){var n=Qt();return nt!==null?ex(n,nt,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Sv,useCacheRefresh:yx},Lo=null,Lc=0;function rh(t){var e=Lc;return Lc+=1,Lo===null&&(Lo=[]),HE(Lo,t,e)}function Fl(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function ih(t,e){throw e.$$typeof===yC?Error(ee(525)):(t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function N_(t){var e=t._init;return e(t._payload)}function Tx(t){function e(w,T){if(t){var N=w.deletions;N===null?(w.deletions=[T],w.flags|=16):N.push(T)}}function n(w,T){if(!t)return null;for(;T!==null;)e(w,T),T=T.sibling;return null}function r(w){for(var T=new Map;w!==null;)w.key!==null?T.set(w.key,w):T.set(w.index,w),w=w.sibling;return T}function i(w,T){return w=ki(w,T),w.index=0,w.sibling=null,w}function a(w,T,N){return w.index=N,t?(N=w.alternate,N!==null?(N=N.index,N<T?(w.flags|=67108866,T):N):(w.flags|=67108866,T)):(w.flags|=1048576,T)}function s(w){return t&&w.alternate===null&&(w.flags|=67108866),w}function o(w,T,N,O){return T===null||T.tag!==6?(T=dm(N,w.mode,O),T.return=w,T):(T=i(T,N),T.return=w,T)}function l(w,T,N,O){var P=N.type;return P===go?u(w,T,N.props.children,O,N.key):T!==null&&(T.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===oa&&N_(P)===T.type)?(T=i(T,N.props),Fl(T,N),T.return=w,T):(T=Ah(N.type,N.key,N.props,null,w.mode,O),Fl(T,N),T.return=w,T)}function h(w,T,N,O){return T===null||T.tag!==4||T.stateNode.containerInfo!==N.containerInfo||T.stateNode.implementation!==N.implementation?(T=fm(N,w.mode,O),T.return=w,T):(T=i(T,N.children||[]),T.return=w,T)}function u(w,T,N,O,P){return T===null||T.tag!==7?(T=_s(N,w.mode,O,P),T.return=w,T):(T=i(T,N),T.return=w,T)}function d(w,T,N){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=dm(""+T,w.mode,N),T.return=w,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ku:return N=Ah(T.type,T.key,T.props,null,w.mode,N),Fl(N,T),N.return=w,N;case ec:return T=fm(T,w.mode,N),T.return=w,T;case oa:var O=T._init;return T=O(T._payload),d(w,T,N)}if(tc(T)||Ll(T))return T=_s(T,w.mode,N,null),T.return=w,T;if(typeof T.then=="function")return d(w,rh(T),N);if(T.$$typeof===Ri)return d(w,th(w,T),N);ih(w,T)}return null}function f(w,T,N,O){var P=T!==null?T.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return P!==null?null:o(w,T,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ku:return N.key===P?l(w,T,N,O):null;case ec:return N.key===P?h(w,T,N,O):null;case oa:return P=N._init,N=P(N._payload),f(w,T,N,O)}if(tc(N)||Ll(N))return P!==null?null:u(w,T,N,O,null);if(typeof N.then=="function")return f(w,T,rh(N),O);if(N.$$typeof===Ri)return f(w,T,th(w,N),O);ih(w,N)}return null}function p(w,T,N,O,P){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return w=w.get(N)||null,o(T,w,""+O,P);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Ku:return w=w.get(O.key===null?N:O.key)||null,l(T,w,O,P);case ec:return w=w.get(O.key===null?N:O.key)||null,h(T,w,O,P);case oa:var R=O._init;return O=R(O._payload),p(w,T,N,O,P)}if(tc(O)||Ll(O))return w=w.get(N)||null,u(T,w,O,P,null);if(typeof O.then=="function")return p(w,T,N,rh(O),P);if(O.$$typeof===Ri)return p(w,T,N,th(T,O),P);ih(T,O)}return null}function b(w,T,N,O){for(var P=null,R=null,_=T,g=T=0,y=null;_!==null&&g<N.length;g++){_.index>g?(y=_,_=null):y=_.sibling;var x=f(w,_,N[g],O);if(x===null){_===null&&(_=y);break}t&&_&&x.alternate===null&&e(w,_),T=a(x,T,g),R===null?P=x:R.sibling=x,R=x,_=y}if(g===N.length)return n(w,_),Fe&&ls(w,g),P;if(_===null){for(;g<N.length;g++)_=d(w,N[g],O),_!==null&&(T=a(_,T,g),R===null?P=_:R.sibling=_,R=_);return Fe&&ls(w,g),P}for(_=r(_);g<N.length;g++)y=p(_,w,g,N[g],O),y!==null&&(t&&y.alternate!==null&&_.delete(y.key===null?g:y.key),T=a(y,T,g),R===null?P=y:R.sibling=y,R=y);return t&&_.forEach(function(C){return e(w,C)}),Fe&&ls(w,g),P}function A(w,T,N,O){if(N==null)throw Error(ee(151));for(var P=null,R=null,_=T,g=T=0,y=null,x=N.next();_!==null&&!x.done;g++,x=N.next()){_.index>g?(y=_,_=null):y=_.sibling;var C=f(w,_,x.value,O);if(C===null){_===null&&(_=y);break}t&&_&&C.alternate===null&&e(w,_),T=a(C,T,g),R===null?P=C:R.sibling=C,R=C,_=y}if(x.done)return n(w,_),Fe&&ls(w,g),P;if(_===null){for(;!x.done;g++,x=N.next())x=d(w,x.value,O),x!==null&&(T=a(x,T,g),R===null?P=x:R.sibling=x,R=x);return Fe&&ls(w,g),P}for(_=r(_);!x.done;g++,x=N.next())x=p(_,w,g,x.value,O),x!==null&&(t&&x.alternate!==null&&_.delete(x.key===null?g:x.key),T=a(x,T,g),R===null?P=x:R.sibling=x,R=x);return t&&_.forEach(function(I){return e(w,I)}),Fe&&ls(w,g),P}function D(w,T,N,O){if(typeof N=="object"&&N!==null&&N.type===go&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Ku:e:{for(var P=N.key;T!==null;){if(T.key===P){if(P=N.type,P===go){if(T.tag===7){n(w,T.sibling),O=i(T,N.props.children),O.return=w,w=O;break e}}else if(T.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===oa&&N_(P)===T.type){n(w,T.sibling),O=i(T,N.props),Fl(O,N),O.return=w,w=O;break e}n(w,T);break}else e(w,T);T=T.sibling}N.type===go?(O=_s(N.props.children,w.mode,O,N.key),O.return=w,w=O):(O=Ah(N.type,N.key,N.props,null,w.mode,O),Fl(O,N),O.return=w,w=O)}return s(w);case ec:e:{for(P=N.key;T!==null;){if(T.key===P)if(T.tag===4&&T.stateNode.containerInfo===N.containerInfo&&T.stateNode.implementation===N.implementation){n(w,T.sibling),O=i(T,N.children||[]),O.return=w,w=O;break e}else{n(w,T);break}else e(w,T);T=T.sibling}O=fm(N,w.mode,O),O.return=w,w=O}return s(w);case oa:return P=N._init,N=P(N._payload),D(w,T,N,O)}if(tc(N))return b(w,T,N,O);if(Ll(N)){if(P=Ll(N),typeof P!="function")throw Error(ee(150));return N=P.call(N),A(w,T,N,O)}if(typeof N.then=="function")return D(w,T,rh(N),O);if(N.$$typeof===Ri)return D(w,T,th(w,N),O);ih(w,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,T!==null&&T.tag===6?(n(w,T.sibling),O=i(T,N),O.return=w,w=O):(n(w,T),O=dm(N,w.mode,O),O.return=w,w=O),s(w)):n(w,T)}return function(w,T,N,O){try{Lc=0;var P=D(w,T,N,O);return Lo=null,P}catch(_){if(_===hu||_===cf)throw _;var R=ar(29,_,null,w.mode);return R.lanes=O,R.return=w,R}finally{}}}var Jo=Tx(!0),Ax=Tx(!1),Cr=mi(null),ii=null;function ua(t){var e=t.alternate;xt(Wt,Wt.current&1),xt(Cr,t),ii===null&&(e===null||Wo.current!==null||e.memoizedState!==null)&&(ii=t)}function Sx(t){if(t.tag===22){if(xt(Wt,Wt.current),xt(Cr,t),ii===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(ii=t)}}else ha()}function ha(){xt(Wt,Wt.current),xt(Cr,Cr.current)}function Di(t){cn(Cr),ii===t&&(ii=null),cn(Wt)}var Wt=mi(0);function sd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Qp(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function gm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Mp={enqueueSetState:function(t,e,n){t=t._reactInternals;var r=hr(),i=Sa(r);i.payload=e,n!=null&&(i.callback=n),e=Ra(t,i,r),e!==null&&(dr(e,t,r),pc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=hr(),i=Sa(r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ra(t,i,r),e!==null&&(dr(e,t,r),pc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hr(),r=Sa(n);r.tag=2,e!=null&&(r.callback=e),e=Ra(t,r,n),e!==null&&(dr(e,t,n),pc(e,t,n))}};function I_(t,e,n,r,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,s):e.prototype&&e.prototype.isPureReactComponent?!jc(n,r)||!jc(i,a):!0}function D_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Mp.enqueueReplaceState(e,e.state,null)}function Os(t,e){var n=e;if("ref"in e){n={};for(var r in e)r!=="ref"&&(n[r]=e[r])}if(t=t.defaultProps){n===e&&(n=pt({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}var od=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Rx(t){od(t)}function Cx(t){console.error(t)}function Nx(t){od(t)}function ld(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(r){setTimeout(function(){throw r})}}function O_(t,e,n){try{var r=t.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function kp(t,e,n){return n=Sa(n),n.tag=3,n.payload={element:null},n.callback=function(){ld(t,e)},n}function Ix(t){return t=Sa(t),t.tag=3,t}function Dx(t,e,n,r){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var a=r.value;t.payload=function(){return i(a)},t.callback=function(){O_(e,n,r)}}var s=n.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){O_(e,n,r),typeof i!="function"&&(Ca===null?Ca=new Set([this]):Ca.add(this));var o=r.stack;this.componentDidCatch(r.value,{componentStack:o!==null?o:""})})}function HN(t,e,n,r,i){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(e=n.alternate,e!==null&&cu(e,n,i,!0),n=Cr.current,n!==null){switch(n.tag){case 13:return ii===null?Fp():n.alternate===null&&It===0&&(It=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Sp?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([r]):e.add(r),Rm(t,r,i)),!1;case 22:return n.flags|=65536,r===Sp?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([r]):n.add(r)),Rm(t,r,i)),!1}throw Error(ee(435,n.tag))}return Rm(t,r,i),Fp(),!1}if(Fe)return e=Cr.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,r!==wp&&(t=Error(ee(422),{cause:r}),Pc(Er(t,n)))):(r!==wp&&(e=Error(ee(423),{cause:r}),Pc(Er(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,r=Er(r,n),i=kp(t.stateNode,r,i),mm(t,i),It!==4&&(It=2)),!1;var a=Error(ee(520),{cause:r});if(a=Er(a,n),wc===null?wc=[a]:wc.push(a),It!==4&&(It=2),e===null)return!0;r=Er(r,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=kp(n.stateNode,r,t),mm(n,t),!1;case 1:if(e=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(Ca===null||!Ca.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,i=Ix(i),Dx(i,t,n,r),mm(n,i),!1}n=n.return}while(n!==null);return!1}var Ox=Error(ee(461)),ln=!1;function gn(t,e,n,r){e.child=t===null?Ax(e,null,n,r):Jo(e,t.child,n,r)}function M_(t,e,n,r,i){n=n.render;var a=e.ref;if("ref"in r){var s={};for(var o in r)o!=="ref"&&(s[o]=r[o])}else s=r;return Is(e),r=wv(t,e,n,s,a,i),o=Ev(),t!==null&&!ln?(xv(t,e,i),Vi(t,e,i)):(Fe&&o&&mv(e),e.flags|=1,gn(t,e,r,i),e.child)}function k_(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!fv(a)&&a.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=a,Mx(t,e,a,r,i)):(t=Ah(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!Ov(t,i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:jc,n(s,r)&&t.ref===e.ref)return Vi(t,e,i)}return e.flags|=1,t=ki(a,r),t.ref=e.ref,t.return=e,e.child=t}function Mx(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(jc(a,r)&&t.ref===e.ref)if(ln=!1,e.pendingProps=r=a,Ov(t,i))t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,Vi(t,e,i)}return jp(t,e,n,r,i)}function kx(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden"){if(e.flags&128){if(r=a!==null?a.baseLanes|n:n,t!==null){for(i=e.child=t.child,a=0;i!==null;)a=a|i.lanes|i.childLanes,i=i.sibling;e.childLanes=a&~r}else e.childLanes=0,e.child=null;return j_(t,e,r,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Sh(e,a!==null?a.cachePool:null),a!==null?E_(e,a):Np(),Sx(e);else return e.lanes=e.childLanes=536870912,j_(t,e,a!==null?a.baseLanes|n:n,n)}else a!==null?(Sh(e,a.cachePool),E_(e,a),ha(),e.memoizedState=null):(t!==null&&Sh(e,null),Np(),ha());return gn(t,e,i,n),e.child}function j_(t,e,n,r){var i=vv();return i=i===null?null:{parent:Kt._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},t!==null&&Sh(e,null),Np(),Sx(e),t!==null&&cu(t,e,r,!0),null}function Nh(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(ee(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function jp(t,e,n,r,i){return Is(e),n=wv(t,e,n,r,void 0,i),r=Ev(),t!==null&&!ln?(xv(t,e,i),Vi(t,e,i)):(Fe&&r&&mv(e),e.flags|=1,gn(t,e,n,i),e.child)}function P_(t,e,n,r,i,a){return Is(e),e.updateQueue=null,n=YE(e,r,n,i),$E(t),r=Ev(),t!==null&&!ln?(xv(t,e,a),Vi(t,e,a)):(Fe&&r&&mv(e),e.flags|=1,gn(t,e,n,a),e.child)}function U_(t,e,n,r,i){if(Is(e),e.stateNode===null){var a=To,s=n.contextType;typeof s=="object"&&s!==null&&(a=In(s)),a=new n(r,a),e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Mp,e.stateNode=a,a._reactInternals=e,a=e.stateNode,a.props=r,a.state=e.memoizedState,a.refs={},yv(e),s=n.contextType,a.context=typeof s=="object"&&s!==null?In(s):To,a.state=e.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(gm(e,n,s,r),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&Mp.enqueueReplaceState(a,a.state,null),vc(e,r,a,i),gc(),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!0}else if(t===null){a=e.stateNode;var o=e.memoizedProps,l=Os(n,o);a.props=l;var h=a.context,u=n.contextType;s=To,typeof u=="object"&&u!==null&&(s=In(u));var d=n.getDerivedStateFromProps;u=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o||h!==s)&&D_(e,a,r,s),la=!1;var f=e.memoizedState;a.state=f,vc(e,r,a,i),gc(),h=e.memoizedState,o||f!==h||la?(typeof d=="function"&&(gm(e,n,d,r),h=e.memoizedState),(l=la||I_(e,n,l,r,f,h,s))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),a.props=r,a.state=h,a.context=s,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Rp(t,e),s=e.memoizedProps,u=Os(n,s),a.props=u,d=e.pendingProps,f=a.context,h=n.contextType,l=To,typeof h=="object"&&h!==null&&(l=In(h)),o=n.getDerivedStateFromProps,(h=typeof o=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||f!==l)&&D_(e,a,r,l),la=!1,f=e.memoizedState,a.state=f,vc(e,r,a,i),gc();var p=e.memoizedState;s!==d||f!==p||la||t!==null&&t.dependencies!==null&&td(t.dependencies)?(typeof o=="function"&&(gm(e,n,o,r),p=e.memoizedState),(u=la||I_(e,n,u,r,f,p,l)||t!==null&&t.dependencies!==null&&td(t.dependencies))?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return a=r,Nh(t,e),r=(e.flags&128)!==0,a||r?(a=e.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:a.render(),e.flags|=1,t!==null&&r?(e.child=Jo(e,t.child,null,i),e.child=Jo(e,null,n,i)):gn(t,e,n,i),e.memoizedState=a.state,t=e.child):t=Vi(t,e,i),t}function L_(t,e,n,r){return lu(),e.flags|=256,gn(t,e,n,r),e.child}var vm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ym(t){return{baseLanes:t,cachePool:BE()}}function _m(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Tr),t}function jx(t,e,n){var r=e.pendingProps,i=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(Wt.current&2)!==0),s&&(i=!0,e.flags&=-129),s=(e.flags&32)!==0,e.flags&=-33,t===null){if(Fe){if(i?ua(e):ha(),Fe){var o=Nt,l;if(l=o){e:{for(l=o,o=ei;l.nodeType!==8;){if(!o){o=null;break e}if(l=zr(l.nextSibling),l===null){o=null;break e}}o=l}o!==null?(e.memoizedState={dehydrated:o,treeContext:bs!==null?{id:Ci,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},l=ar(18,null,null,0),l.stateNode=o,l.return=e,e.child=l,Pn=e,Nt=null,l=!0):l=!1}l||Ns(e)}if(o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return Qp(o)?e.lanes=32:e.lanes=536870912,null;Di(e)}return o=r.children,r=r.fallback,i?(ha(),i=e.mode,o=cd({mode:"hidden",children:o},i),r=_s(r,i,n,null),o.return=e,r.return=e,o.sibling=r,e.child=o,i=e.child,i.memoizedState=ym(n),i.childLanes=_m(t,s,n),e.memoizedState=vm,r):(ua(e),Pp(e,o))}if(l=t.memoizedState,l!==null&&(o=l.dehydrated,o!==null)){if(a)e.flags&256?(ua(e),e.flags&=-257,e=bm(t,e,n)):e.memoizedState!==null?(ha(),e.child=t.child,e.flags|=128,e=null):(ha(),i=r.fallback,o=e.mode,r=cd({mode:"visible",children:r.children},o),i=_s(i,o,n,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,Jo(e,t.child,null,n),r=e.child,r.memoizedState=ym(n),r.childLanes=_m(t,s,n),e.memoizedState=vm,e=i);else if(ua(e),Qp(o)){if(s=o.nextSibling&&o.nextSibling.dataset,s)var h=s.dgst;s=h,r=Error(ee(419)),r.stack="",r.digest=s,Pc({value:r,source:null,stack:null}),e=bm(t,e,n)}else if(ln||cu(t,e,n,!1),s=(n&t.childLanes)!==0,ln||s){if(s=ut,s!==null&&(r=n&-n,r=r&42?1:nv(r),r=r&(s.suspendedLanes|n)?0:r,r!==0&&r!==l.retryLane))throw l.retryLane=r,yl(t,r),dr(s,t,r),Ox;o.data==="$?"||Fp(),e=bm(t,e,n)}else o.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,Nt=zr(o.nextSibling),Pn=e,Fe=!0,ws=null,ei=!1,t!==null&&(_r[br++]=Ci,_r[br++]=Ni,_r[br++]=bs,Ci=t.id,Ni=t.overflow,bs=e),e=Pp(e,r.children),e.flags|=4096);return e}return i?(ha(),i=r.fallback,o=e.mode,l=t.child,h=l.sibling,r=ki(l,{mode:"hidden",children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,h!==null?i=ki(h,i):(i=_s(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o===null?o=ym(n):(l=o.cachePool,l!==null?(h=Kt._currentValue,l=l.parent!==h?{parent:h,pool:h}:l):l=BE(),o={baseLanes:o.baseLanes|n,cachePool:l}),i.memoizedState=o,i.childLanes=_m(t,s,n),e.memoizedState=vm,r):(ua(e),n=t.child,t=n.sibling,n=ki(n,{mode:"visible",children:r.children}),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n)}function Pp(t,e){return e=cd({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function cd(t,e){return t=ar(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function bm(t,e,n){return Jo(e,t.child,null,n),t=Pp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function V_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xp(t.return,e,n)}function wm(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Px(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(gn(t,e,r.children,n),r=Wt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&V_(t,n,e);else if(t.tag===19)V_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}switch(xt(Wt,r),i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&sd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),wm(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}wm(e,!0,n,null,a);break;case"together":wm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),za|=e.lanes,!(n&e.childLanes))if(t!==null){if(cu(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=ki(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ki(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ov(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&td(t)))}function qN(t,e,n){switch(e.tag){case 3:Yh(e,e.stateNode.containerInfo),ca(e,Kt,t.memoizedState.cache),lu();break;case 27:case 5:hp(e);break;case 4:Yh(e,e.stateNode.containerInfo);break;case 10:ca(e,e.type,e.memoizedProps.value);break;case 13:var r=e.memoizedState;if(r!==null)return r.dehydrated!==null?(ua(e),e.flags|=128,null):n&e.child.childLanes?jx(t,e,n):(ua(e),t=Vi(t,e,n),t!==null?t.sibling:null);ua(e);break;case 19:var i=(t.flags&128)!==0;if(r=(n&e.childLanes)!==0,r||(cu(t,e,n,!1),r=(n&e.childLanes)!==0),i){if(r)return Px(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xt(Wt,Wt.current),r)break;return null;case 22:case 23:return e.lanes=0,kx(t,e,n);case 24:ca(e,Kt,t.memoizedState.cache)}return Vi(t,e,n)}function Ux(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)ln=!0;else{if(!Ov(t,n)&&!(e.flags&128))return ln=!1,qN(t,e,n);ln=!!(t.flags&131072)}else ln=!1,Fe&&e.flags&1048576&&VE(e,ed,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var r=e.elementType,i=r._init;if(r=i(r._payload),e.type=r,typeof r=="function")fv(r)?(t=Os(r,t),e.tag=1,e=U_(null,e,r,t,n)):(e.tag=0,e=jp(null,e,r,t,n));else{if(r!=null){if(i=r.$$typeof,i===Jg){e.tag=11,e=M_(null,e,r,t,n);break e}else if(i===ev){e.tag=14,e=k_(null,e,r,t,n);break e}}throw e=cp(r)||r,Error(ee(306,e,""))}}return e;case 0:return jp(t,e,e.type,e.pendingProps,n);case 1:return r=e.type,i=Os(r,e.pendingProps),U_(t,e,r,i,n);case 3:e:{if(Yh(e,e.stateNode.containerInfo),t===null)throw Error(ee(387));r=e.pendingProps;var a=e.memoizedState;i=a.element,Rp(t,e),vc(e,r,null,n);var s=e.memoizedState;if(r=s.cache,ca(e,Kt,r),r!==a.cache&&Tp(e,[Kt],n,!0),gc(),r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){e=L_(t,e,r,n);break e}else if(r!==i){i=Er(Error(ee(424)),e),Pc(i),e=L_(t,e,r,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Nt=zr(t.firstChild),Pn=e,Fe=!0,ws=null,ei=!0,n=Ax(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(lu(),r===i){e=Vi(t,e,n);break e}gn(t,e,r,n)}e=e.child}return e;case 26:return Nh(t,e),t===null?(n=nb(e.type,null,e.pendingProps,null))?e.memoizedState=n:Fe||(n=e.type,t=e.pendingProps,r=gd(Aa.current).createElement(n),r[Nn]=e,r[Wn]=t,bn(r,n,t),on(r),e.stateNode=r):e.memoizedState=nb(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return hp(e),t===null&&Fe&&(r=e.stateNode=xT(e.type,e.pendingProps,Aa.current),Pn=e,ei=!0,i=Nt,Wa(e.type)?(Kp=i,Nt=zr(r.firstChild)):Nt=i),gn(t,e,e.pendingProps.children,n),Nh(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Fe&&((i=r=Nt)&&(r=yI(r,e.type,e.pendingProps,ei),r!==null?(e.stateNode=r,Pn=e,Nt=zr(r.firstChild),ei=!1,i=!0):i=!1),i||Ns(e)),hp(e),i=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,r=a.children,Yp(i,a)?r=null:s!==null&&Yp(i,s)&&(e.flags|=32),e.memoizedState!==null&&(i=wv(t,e,PN,null,null,n),Fc._currentValue=i),Nh(t,e),gn(t,e,r,n),e.child;case 6:return t===null&&Fe&&((t=n=Nt)&&(n=_I(n,e.pendingProps,ei),n!==null?(e.stateNode=n,Pn=e,Nt=null,t=!0):t=!1),t||Ns(e)),null;case 13:return jx(t,e,n);case 4:return Yh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Jo(e,null,r,n):gn(t,e,r,n),e.child;case 11:return M_(t,e,e.type,e.pendingProps,n);case 7:return gn(t,e,e.pendingProps,n),e.child;case 8:return gn(t,e,e.pendingProps.children,n),e.child;case 12:return gn(t,e,e.pendingProps.children,n),e.child;case 10:return r=e.pendingProps,ca(e,e.type,r.value),gn(t,e,r.children,n),e.child;case 9:return i=e.type._context,r=e.pendingProps.children,Is(e),i=In(i),r=r(i),e.flags|=1,gn(t,e,r,n),e.child;case 14:return k_(t,e,e.type,e.pendingProps,n);case 15:return Mx(t,e,e.type,e.pendingProps,n);case 19:return Px(t,e,n);case 31:return r=e.pendingProps,n=e.mode,r={mode:r.mode,children:r.children},t===null?(n=cd(r,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=ki(t.child,r),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return kx(t,e,n);case 24:return Is(e),r=In(Kt),t===null?(i=vv(),i===null&&(i=ut,a=gv(),i.pooledCache=a,a.refCount++,a!==null&&(i.pooledCacheLanes|=n),i=a),e.memoizedState={parent:r,cache:i},yv(e),ca(e,Kt,i)):(t.lanes&n&&(Rp(t,e),vc(e,null,null,n),gc()),i=t.memoizedState,a=e.memoizedState,i.parent!==r?(i={parent:r,cache:r},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),ca(e,Kt,r)):(r=a.cache,ca(e,Kt,r),r!==i.cache&&Tp(e,[Kt],n,!0))),gn(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(ee(156,e.tag))}function Ei(t){t.flags|=4}function z_(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!ST(e)){if(e=Cr.current,e!==null&&((Ve&4194048)===Ve?ii!==null:(Ve&62914560)!==Ve&&!(Ve&536870912)||e!==ii))throw mc=Sp,FE;t.flags|=8192}}function ah(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?cE():536870912,t.lanes|=e,el|=e)}function Hl(t,e){if(!Fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function GN(t,e,n){var r=e.pendingProps;switch(pv(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return At(e),null;case 3:return n=e.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),ji(Kt),Yo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Bl(e)?Ei(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,g_())),At(e),null;case 26:return n=e.memoizedState,t===null?(Ei(e),n!==null?(At(e),z_(e,n)):(At(e),e.flags&=-16777217)):n?n!==t.memoizedState?(Ei(e),At(e),z_(e,n)):(At(e),e.flags&=-16777217):(t.memoizedProps!==r&&Ei(e),At(e),e.flags&=-16777217),null;case 27:Xh(e),n=Aa.current;var i=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==r&&Ei(e);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return At(e),null}t=ni.current,Bl(e)?m_(e):(t=xT(i,r,n),e.stateNode=t,Ei(e))}return At(e),null;case 5:if(Xh(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==r&&Ei(e);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return At(e),null}if(t=ni.current,Bl(e))m_(e);else{switch(i=gd(Aa.current),t){case 1:t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof r.is=="string"?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?t.multiple=!0:r.size&&(t.size=r.size);break;default:t=typeof r.is=="string"?i.createElement(n,{is:r.is}):i.createElement(n)}}t[Nn]=e,t[Wn]=r;e:for(i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}e.stateNode=t;e:switch(bn(t,n,r),n){case"button":case"input":case"select":case"textarea":t=!!r.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Ei(e)}}return At(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==r&&Ei(e);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(t=Aa.current,Bl(e)){if(t=e.stateNode,n=e.memoizedProps,r=null,i=Pn,i!==null)switch(i.tag){case 27:case 5:r=i.memoizedProps}t[Nn]=e,t=!!(t.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||bT(t.nodeValue,n)),t||Ns(e)}else t=gd(t).createTextNode(r),t[Nn]=e,e.stateNode=t}return At(e),null;case 13:if(r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=Bl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ee(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ee(317));i[Nn]=e}else lu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),i=!1}else i=g_(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(Di(e),e):(Di(e),null)}if(Di(e),e.flags&128)return e.lanes=n,e;if(n=r!==null,t=t!==null&&t.memoizedState!==null,n){r=e.child,i=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(i=r.alternate.memoizedState.cachePool.pool);var a=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),ah(e,e.updateQueue),At(e),null;case 4:return Yo(),t===null&&zv(e.stateNode.containerInfo),At(e),null;case 10:return ji(e.type),At(e),null;case 19:if(cn(Wt),i=e.memoizedState,i===null)return At(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Hl(i,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=sd(t),a!==null){for(e.flags|=128,Hl(i,!1),t=a.updateQueue,e.updateQueue=t,ah(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)LE(n,t),n=n.sibling;return xt(Wt,Wt.current&1|2),e.child}t=t.sibling}i.tail!==null&&ri()>hd&&(e.flags|=128,r=!0,Hl(i,!1),e.lanes=4194304)}else{if(!r)if(t=sd(a),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,ah(e,t),Hl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Fe)return At(e),null}else 2*ri()-i.renderingStartTime>hd&&n!==536870912&&(e.flags|=128,r=!0,Hl(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(t=i.last,t!==null?t.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ri(),e.sibling=null,t=Wt.current,xt(Wt,r?t&1|2:t&1),e):(At(e),null);case 22:case 23:return Di(e),_v(),r=e.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(e.flags|=8192):r&&(e.flags|=8192),r?n&536870912&&!(e.flags&128)&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),n=e.updateQueue,n!==null&&ah(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),r=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),r!==n&&(e.flags|=2048),t!==null&&cn(Es),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),ji(Kt),At(e),null;case 25:return null;case 30:return null}throw Error(ee(156,e.tag))}function $N(t,e){switch(pv(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ji(Kt),Yo(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Xh(e),null;case 13:if(Di(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));lu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return cn(Wt),null;case 4:return Yo(),null;case 10:return ji(e.type),null;case 22:case 23:return Di(e),_v(),t!==null&&cn(Es),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return ji(Kt),null;case 25:return null;default:return null}}function Lx(t,e){switch(pv(e),e.tag){case 3:ji(Kt),Yo();break;case 26:case 27:case 5:Xh(e);break;case 4:Yo();break;case 13:Di(e);break;case 19:cn(Wt);break;case 10:ji(e.type);break;case 22:case 23:Di(e),_v(),t!==null&&cn(Es);break;case 24:ji(Kt)}}function mu(t,e){try{var n=e.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var i=r.next;n=i;do{if((n.tag&t)===t){r=void 0;var a=n.create,s=n.inst;r=a(),s.destroy=r}n=n.next}while(n!==i)}}catch(o){st(e,e.return,o)}}function Va(t,e,n){try{var r=e.updateQueue,i=r!==null?r.lastEffect:null;if(i!==null){var a=i.next;r=a;do{if((r.tag&t)===t){var s=r.inst,o=s.destroy;if(o!==void 0){s.destroy=void 0,i=e;var l=n,h=o;try{h()}catch(u){st(i,l,u)}}}r=r.next}while(r!==a)}}catch(u){st(e,e.return,u)}}function Vx(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{GE(e,n)}catch(r){st(t,t.return,r)}}}function zx(t,e,n){n.props=Os(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(r){st(t,e,r)}}function _c(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof n=="function"?t.refCleanup=n(r):n.current=r}}catch(i){st(t,e,i)}}function ti(t,e){var n=t.ref,r=t.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(i){st(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){st(t,e,i)}else n.current=null}function Bx(t){var e=t.type,n=t.memoizedProps,r=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){st(t,t.return,i)}}function Em(t,e,n){try{var r=t.stateNode;fI(r,t.type,n,e),r[Wn]=e}catch(i){st(t,t.return,i)}}function Fx(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Wa(t.type)||t.tag===4}function xm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Wa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Up(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gf));else if(r!==4&&(r===27&&Wa(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Up(t,e,n),t=t.sibling;t!==null;)Up(t,e,n),t=t.sibling}function ud(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(r===27&&Wa(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(ud(t,e,n),t=t.sibling;t!==null;)ud(t,e,n),t=t.sibling}function Hx(t){var e=t.stateNode,n=t.memoizedProps;try{for(var r=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);bn(e,r,n),e[Nn]=t,e[Wn]=n}catch(a){st(t,t.return,a)}}var Ai=!1,Ut=!1,Tm=!1,B_=typeof WeakSet=="function"?WeakSet:Set,sn=null;function YN(t,e){if(t=t.containerInfo,Gp=bd,t=IE(t),uv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,l=-1,h=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(o=s+i),d!==a||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++h===i&&(o=s),f===a&&++u===r&&(l=s),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for($p={focusedElem:t,selectionRange:n},bd=!1,sn=e;sn!==null;)if(e=sn,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,sn=t;else for(;sn!==null;){switch(e=sn,a=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&a!==null){t=void 0,n=e,i=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var b=Os(n.type,i,n.elementType===n.type);t=r.getSnapshotBeforeUpdate(b,a),r.__reactInternalSnapshotBeforeUpdate=t}catch(A){st(n,n.return,A)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Xp(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Xp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(ee(163))}if(t=e.sibling,t!==null){t.return=e.return,sn=t;break}sn=e.return}}function qx(t,e,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:na(t,n),r&4&&mu(5,n);break;case 1:if(na(t,n),r&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(s){st(n,n.return,s)}else{var i=Os(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(s){st(n,n.return,s)}}r&64&&Vx(n),r&512&&_c(n,n.return);break;case 3:if(na(t,n),r&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{GE(t,e)}catch(s){st(n,n.return,s)}}break;case 27:e===null&&r&4&&Hx(n);case 26:case 5:na(t,n),e===null&&r&4&&Bx(n),r&512&&_c(n,n.return);break;case 12:na(t,n);break;case 13:na(t,n),r&4&&Yx(t,n),r&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=nI.bind(null,n),bI(t,n))));break;case 22:if(r=n.memoizedState!==null||Ai,!r){e=e!==null&&e.memoizedState!==null||Ut,i=Ai;var a=Ut;Ai=r,(Ut=e)&&!a?aa(t,n,(n.subtreeFlags&8772)!==0):na(t,n),Ai=i,Ut=a}break;case 30:break;default:na(t,n)}}function Gx(t){var e=t.alternate;e!==null&&(t.alternate=null,Gx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&iv(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var yt=null,Fn=!1;function xi(t,e,n){for(n=n.child;n!==null;)$x(t,e,n),n=n.sibling}function $x(t,e,n){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(ru,n)}catch{}switch(n.tag){case 26:Ut||ti(n,e),xi(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ut||ti(n,e);var r=yt,i=Fn;Wa(n.type)&&(yt=n.stateNode,Fn=!1),xi(t,e,n),xc(n.stateNode),yt=r,Fn=i;break;case 5:Ut||ti(n,e);case 6:if(r=yt,i=Fn,yt=null,xi(t,e,n),yt=r,Fn=i,yt!==null)if(Fn)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(n.stateNode)}catch(a){st(n,e,a)}else try{yt.removeChild(n.stateNode)}catch(a){st(n,e,a)}break;case 18:yt!==null&&(Fn?(t=yt,J_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Gc(t)):J_(yt,n.stateNode));break;case 4:r=yt,i=Fn,yt=n.stateNode.containerInfo,Fn=!0,xi(t,e,n),yt=r,Fn=i;break;case 0:case 11:case 14:case 15:Ut||Va(2,n,e),Ut||Va(4,n,e),xi(t,e,n);break;case 1:Ut||(ti(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"&&zx(n,e,r)),xi(t,e,n);break;case 21:xi(t,e,n);break;case 22:Ut=(r=Ut)||n.memoizedState!==null,xi(t,e,n),Ut=r;break;default:xi(t,e,n)}}function Yx(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Gc(t)}catch(n){st(e,e.return,n)}}function XN(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new B_),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new B_),e;default:throw Error(ee(435,t.tag))}}function Am(t,e){var n=XN(t);e.forEach(function(r){var i=rI.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}function tr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r],a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 27:if(Wa(o.type)){yt=o.stateNode,Fn=!1;break e}break;case 5:yt=o.stateNode,Fn=!1;break e;case 3:case 4:yt=o.stateNode.containerInfo,Fn=!0;break e}o=o.return}if(yt===null)throw Error(ee(160));$x(a,s,i),yt=null,Fn=!1,a=i.alternate,a!==null&&(a.return=null),i.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)Xx(e,t),e=e.sibling}var Pr=null;function Xx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:tr(e,t),nr(t),r&4&&(Va(3,t,t.return),mu(3,t),Va(5,t,t.return));break;case 1:tr(e,t),nr(t),r&512&&(Ut||n===null||ti(n,n.return)),r&64&&Ai&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var i=Pr;if(tr(e,t),nr(t),r&512&&(Ut||n===null||ti(n,n.return)),r&4){var a=n!==null?n.memoizedState:null;if(r=t.memoizedState,n===null)if(r===null)if(t.stateNode===null){e:{r=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":a=i.getElementsByTagName("title")[0],(!a||a[su]||a[Nn]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector("head > title"))),bn(a,r,n),a[Nn]=t,on(a),r=a;break e;case"link":var s=ib("link","href",i).get(r+(n.href||""));if(s){for(var o=0;o<s.length;o++)if(a=s[o],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(o,1);break t}}a=i.createElement(r),bn(a,r,n),i.head.appendChild(a);break;case"meta":if(s=ib("meta","content",i).get(r+(n.content||""))){for(o=0;o<s.length;o++)if(a=s[o],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){s.splice(o,1);break t}}a=i.createElement(r),bn(a,r,n),i.head.appendChild(a);break;default:throw Error(ee(468,r))}a[Nn]=t,on(a),r=a}t.stateNode=r}else ab(i,t.type,t.stateNode);else t.stateNode=rb(i,r,t.memoizedProps);else a!==r?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,r===null?ab(i,t.type,t.stateNode):rb(i,r,t.memoizedProps)):r===null&&t.stateNode!==null&&Em(t,t.memoizedProps,n.memoizedProps)}break;case 27:tr(e,t),nr(t),r&512&&(Ut||n===null||ti(n,n.return)),n!==null&&r&4&&Em(t,t.memoizedProps,n.memoizedProps);break;case 5:if(tr(e,t),nr(t),r&512&&(Ut||n===null||ti(n,n.return)),t.flags&32){i=t.stateNode;try{Qo(i,"")}catch(p){st(t,t.return,p)}}r&4&&t.stateNode!=null&&(i=t.memoizedProps,Em(t,i,n!==null?n.memoizedProps:i)),r&1024&&(Tm=!0);break;case 6:if(tr(e,t),nr(t),r&4){if(t.stateNode===null)throw Error(ee(162));r=t.memoizedProps,n=t.stateNode;try{n.nodeValue=r}catch(p){st(t,t.return,p)}}break;case 3:if(Oh=null,i=Pr,Pr=vd(e.containerInfo),tr(e,t),Pr=i,nr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gc(e.containerInfo)}catch(p){st(t,t.return,p)}Tm&&(Tm=!1,Qx(t));break;case 4:r=Pr,Pr=vd(t.stateNode.containerInfo),tr(e,t),nr(t),Pr=r;break;case 12:tr(e,t),nr(t);break;case 13:tr(e,t),nr(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Uv=ri()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Am(t,r)));break;case 22:i=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,h=Ai,u=Ut;if(Ai=h||i,Ut=u||l,tr(e,t),Ut=u,Ai=h,nr(t),r&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||l||Ai||Ut||cs(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(a=l.stateNode,i)s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,f=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(p){st(l,l.return,p)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=i?"":l.memoizedProps}catch(p){st(l,l.return,p)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}r&4&&(r=t.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,Am(t,n))));break;case 19:tr(e,t),nr(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Am(t,r)));break;case 30:break;case 21:break;default:tr(e,t),nr(t)}}function nr(t){var e=t.flags;if(e&2){try{for(var n,r=t.return;r!==null;){if(Fx(r)){n=r;break}r=r.return}if(n==null)throw Error(ee(160));switch(n.tag){case 27:var i=n.stateNode,a=xm(t);ud(t,a,i);break;case 5:var s=n.stateNode;n.flags&32&&(Qo(s,""),n.flags&=-33);var o=xm(t);ud(t,o,s);break;case 3:case 4:var l=n.stateNode.containerInfo,h=xm(t);Up(t,h,l);break;default:throw Error(ee(161))}}catch(u){st(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qx(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Qx(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function na(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)qx(t,e.alternate,e),e=e.sibling}function cs(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Va(4,e,e.return),cs(e);break;case 1:ti(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&zx(e,e.return,n),cs(e);break;case 27:xc(e.stateNode);case 26:case 5:ti(e,e.return),cs(e);break;case 22:e.memoizedState===null&&cs(e);break;case 30:cs(e);break;default:cs(e)}t=t.sibling}}function aa(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var r=e.alternate,i=t,a=e,s=a.flags;switch(a.tag){case 0:case 11:case 15:aa(i,a,n),mu(4,a);break;case 1:if(aa(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(h){st(r,r.return,h)}if(r=a,i=r.updateQueue,i!==null){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(l!==null)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)qE(l[i],o)}catch(h){st(r,r.return,h)}}n&&s&64&&Vx(a),_c(a,a.return);break;case 27:Hx(a);case 26:case 5:aa(i,a,n),n&&r===null&&s&4&&Bx(a),_c(a,a.return);break;case 12:aa(i,a,n);break;case 13:aa(i,a,n),n&&s&4&&Yx(i,a);break;case 22:a.memoizedState===null&&aa(i,a,n),_c(a,a.return);break;case 30:break;default:aa(i,a,n)}e=e.sibling}}function Mv(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&uu(n))}function kv(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&uu(t))}function Kr(t,e,n,r){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Kx(t,e,n,r),e=e.sibling}function Kx(t,e,n,r){var i=e.flags;switch(e.tag){case 0:case 11:case 15:Kr(t,e,n,r),i&2048&&mu(9,e);break;case 1:Kr(t,e,n,r);break;case 3:Kr(t,e,n,r),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&uu(t)));break;case 12:if(i&2048){Kr(t,e,n,r),t=e.stateNode;try{var a=e.memoizedProps,s=a.id,o=a.onPostCommit;typeof o=="function"&&o(s,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){st(e,e.return,l)}}else Kr(t,e,n,r);break;case 13:Kr(t,e,n,r);break;case 23:break;case 22:a=e.stateNode,s=e.alternate,e.memoizedState!==null?a._visibility&2?Kr(t,e,n,r):bc(t,e):a._visibility&2?Kr(t,e,n,r):(a._visibility|=2,lo(t,e,n,r,(e.subtreeFlags&10256)!==0)),i&2048&&Mv(s,e);break;case 24:Kr(t,e,n,r),i&2048&&kv(e.alternate,e);break;default:Kr(t,e,n,r)}}function lo(t,e,n,r,i){for(i=i&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var a=t,s=e,o=n,l=r,h=s.flags;switch(s.tag){case 0:case 11:case 15:lo(a,s,o,l,i),mu(8,s);break;case 23:break;case 22:var u=s.stateNode;s.memoizedState!==null?u._visibility&2?lo(a,s,o,l,i):bc(a,s):(u._visibility|=2,lo(a,s,o,l,i)),i&&h&2048&&Mv(s.alternate,s);break;case 24:lo(a,s,o,l,i),i&&h&2048&&kv(s.alternate,s);break;default:lo(a,s,o,l,i)}e=e.sibling}}function bc(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,r=e,i=r.flags;switch(r.tag){case 22:bc(n,r),i&2048&&Mv(r.alternate,r);break;case 24:bc(n,r),i&2048&&kv(r.alternate,r);break;default:bc(n,r)}e=e.sibling}}var rc=8192;function to(t){if(t.subtreeFlags&rc)for(t=t.child;t!==null;)Wx(t),t=t.sibling}function Wx(t){switch(t.tag){case 26:to(t),t.flags&rc&&t.memoizedState!==null&&MI(Pr,t.memoizedState,t.memoizedProps);break;case 5:to(t);break;case 3:case 4:var e=Pr;Pr=vd(t.stateNode.containerInfo),to(t),Pr=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=rc,rc=16777216,to(t),rc=e):to(t));break;default:to(t)}}function Zx(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function ql(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];sn=r,eT(r,t)}Zx(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Jx(t),t=t.sibling}function Jx(t){switch(t.tag){case 0:case 11:case 15:ql(t),t.flags&2048&&Va(9,t,t.return);break;case 3:ql(t);break;case 12:ql(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Ih(t)):ql(t);break;default:ql(t)}}function Ih(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];sn=r,eT(r,t)}Zx(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Va(8,e,e.return),Ih(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Ih(e));break;default:Ih(e)}t=t.sibling}}function eT(t,e){for(;sn!==null;){var n=sn;switch(n.tag){case 0:case 11:case 15:Va(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:uu(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,sn=r;else e:for(n=t;sn!==null;){r=sn;var i=r.sibling,a=r.return;if(Gx(r),r===n){sn=null;break e}if(i!==null){i.return=a,sn=i;break e}sn=a}}}var QN={getCacheForType:function(t){var e=In(Kt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},KN=typeof WeakMap=="function"?WeakMap:Map,Ke=0,ut=null,Ie=null,Ve=0,Xe=0,rr=null,_a=!1,_l=!1,jv=!1,zi=0,It=0,za=0,xs=0,Pv=0,Tr=0,el=0,wc=null,Gn=null,Lp=!1,Uv=0,hd=1/0,dd=null,Ca=null,yn=0,Na=null,tl=null,Vo=0,Vp=0,zp=null,tT=null,Ec=0,Bp=null;function hr(){if(Ke&2&&Ve!==0)return Ve&-Ve;if(ve.T!==null){var t=Ko;return t!==0?t:Vv()}return dE()}function nT(){Tr===0&&(Tr=!(Ve&536870912)||Fe?lE():536870912);var t=Cr.current;return t!==null&&(t.flags|=32),Tr}function dr(t,e,n){(t===ut&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)&&(nl(t,0),ba(t,Ve,Tr,!1)),au(t,n),(!(Ke&2)||t!==ut)&&(t===ut&&(!(Ke&2)&&(xs|=n),It===4&&ba(t,Ve,Tr,!1)),pi(t))}function rT(t,e,n){if(Ke&6)throw Error(ee(327));var r=!n&&(e&124)===0&&(e&t.expiredLanes)===0||iu(t,e),i=r?JN(t,e):Sm(t,e,!0),a=r;do{if(i===0){_l&&!r&&ba(t,e,0,!1);break}else{if(n=t.current.alternate,a&&!WN(n)){i=Sm(t,e,!1),a=!1;continue}if(i===2){if(a=e,t.errorRecoveryDisabledLanes&a)var s=0;else s=t.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){e=s;e:{var o=t;i=wc;var l=o.current.memoizedState.isDehydrated;if(l&&(nl(o,s).flags|=256),s=Sm(o,s,!1),s!==2){if(jv&&!l){o.errorRecoveryDisabledLanes|=a,xs|=a,i=4;break e}a=Gn,Gn=i,a!==null&&(Gn===null?Gn=a:Gn.push.apply(Gn,a))}i=s}if(a=!1,i!==2)continue}}if(i===1){nl(t,0),ba(t,e,0,!0);break}e:{switch(r=t,a=i,a){case 0:case 1:throw Error(ee(345));case 4:if((e&4194048)!==e)break;case 6:ba(r,e,Tr,!_a);break e;case 2:Gn=null;break;case 3:case 5:break;default:throw Error(ee(329))}if((e&62914560)===e&&(i=Uv+300-ri(),10<i)){if(ba(r,e,Tr,!_a),nf(r,0,!0)!==0)break e;r.timeoutHandle=ET(F_.bind(null,r,n,Gn,dd,Lp,e,Tr,xs,el,_a,a,2,-0,0),i);break e}F_(r,n,Gn,dd,Lp,e,Tr,xs,el,_a,a,0,-0,0)}}break}while(!0);pi(t)}function F_(t,e,n,r,i,a,s,o,l,h,u,d,f,p){if(t.timeoutHandle=-1,d=e.subtreeFlags,(d&8192||(d&16785408)===16785408)&&(Bc={stylesheets:null,count:0,unsuspend:OI},Wx(e),d=kI(),d!==null)){t.cancelPendingCommit=d(q_.bind(null,t,e,a,n,r,i,s,o,l,u,1,f,p)),ba(t,a,s,!h);return}q_(t,e,a,n,r,i,s,o,l)}function WN(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!mr(a(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ba(t,e,n,r){e&=~Pv,e&=~xs,t.suspendedLanes|=e,t.pingedLanes&=~e,r&&(t.warmLanes|=e),r=t.expirationTimes;for(var i=e;0<i;){var a=31-ur(i),s=1<<a;r[a]=-1,i&=~s}n!==0&&uE(t,n,e)}function ff(){return Ke&6?!0:(pu(0),!1)}function Lv(){if(Ie!==null){if(Xe===0)var t=Ie.return;else t=Ie,Ii=Hs=null,Tv(t),Lo=null,Lc=0,t=Ie;for(;t!==null;)Lx(t.alternate,t),t=t.return;Ie=null}}function nl(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,pI(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Lv(),ut=t,Ie=n=ki(t.current,null),Ve=e,Xe=0,rr=null,_a=!1,_l=iu(t,e),jv=!1,el=Tr=Pv=xs=za=It=0,Gn=wc=null,Lp=!1,e&8&&(e|=e&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=e;0<r;){var i=31-ur(r),a=1<<i;e|=t[i],r&=~a}return zi=e,of(),n}function iT(t,e){Re=null,ve.H=ad,e===hu||e===cf?(e=b_(),Xe=3):e===FE?(e=b_(),Xe=4):Xe=e===Ox?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,rr=e,Ie===null&&(It=1,ld(t,Er(e,t.current)))}function aT(){var t=ve.H;return ve.H=ad,t===null?ad:t}function sT(){var t=ve.A;return ve.A=QN,t}function Fp(){It=4,_a||(Ve&4194048)!==Ve&&Cr.current!==null||(_l=!0),!(za&134217727)&&!(xs&134217727)||ut===null||ba(ut,Ve,Tr,!1)}function Sm(t,e,n){var r=Ke;Ke|=2;var i=aT(),a=sT();(ut!==t||Ve!==e)&&(dd=null,nl(t,e)),e=!1;var s=It;e:do try{if(Xe!==0&&Ie!==null){var o=Ie,l=rr;switch(Xe){case 8:Lv(),s=6;break e;case 3:case 2:case 9:case 6:Cr.current===null&&(e=!0);var h=Xe;if(Xe=0,rr=null,Ro(t,o,l,h),n&&_l){s=0;break e}break;default:h=Xe,Xe=0,rr=null,Ro(t,o,l,h)}}ZN(),s=It;break}catch(u){iT(t,u)}while(!0);return e&&t.shellSuspendCounter++,Ii=Hs=null,Ke=r,ve.H=i,ve.A=a,Ie===null&&(ut=null,Ve=0,of()),s}function ZN(){for(;Ie!==null;)oT(Ie)}function JN(t,e){var n=Ke;Ke|=2;var r=aT(),i=sT();ut!==t||Ve!==e?(dd=null,hd=ri()+500,nl(t,e)):_l=iu(t,e);e:do try{if(Xe!==0&&Ie!==null){e=Ie;var a=rr;t:switch(Xe){case 1:Xe=0,rr=null,Ro(t,e,a,1);break;case 2:case 9:if(__(a)){Xe=0,rr=null,H_(e);break}e=function(){Xe!==2&&Xe!==9||ut!==t||(Xe=7),pi(t)},a.then(e,e);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:__(a)?(Xe=0,rr=null,H_(e)):(Xe=0,rr=null,Ro(t,e,a,7));break;case 5:var s=null;switch(Ie.tag){case 26:s=Ie.memoizedState;case 5:case 27:var o=Ie;if(!s||ST(s)){Xe=0,rr=null;var l=o.sibling;if(l!==null)Ie=l;else{var h=o.return;h!==null?(Ie=h,mf(h)):Ie=null}break t}}Xe=0,rr=null,Ro(t,e,a,5);break;case 6:Xe=0,rr=null,Ro(t,e,a,6);break;case 8:Lv(),It=6;break e;default:throw Error(ee(462))}}eI();break}catch(u){iT(t,u)}while(!0);return Ii=Hs=null,ve.H=r,ve.A=i,Ke=n,Ie!==null?0:(ut=null,Ve=0,of(),It)}function eI(){for(;Ie!==null&&!EC();)oT(Ie)}function oT(t){var e=Ux(t.alternate,t,zi);t.memoizedProps=t.pendingProps,e===null?mf(t):Ie=e}function H_(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=P_(n,e,e.pendingProps,e.type,void 0,Ve);break;case 11:e=P_(n,e,e.pendingProps,e.type.render,e.ref,Ve);break;case 5:Tv(e);default:Lx(n,e),e=Ie=LE(e,zi),e=Ux(n,e,zi)}t.memoizedProps=t.pendingProps,e===null?mf(t):Ie=e}function Ro(t,e,n,r){Ii=Hs=null,Tv(e),Lo=null,Lc=0;var i=e.return;try{if(HN(t,i,e,n,Ve)){It=1,ld(t,Er(n,t.current)),Ie=null;return}}catch(a){if(i!==null)throw Ie=i,a;It=1,ld(t,Er(n,t.current)),Ie=null;return}e.flags&32768?(Fe||r===1?t=!0:_l||Ve&536870912?t=!1:(_a=t=!0,(r===2||r===9||r===3||r===6)&&(r=Cr.current,r!==null&&r.tag===13&&(r.flags|=16384))),lT(e,t)):mf(e)}function mf(t){var e=t;do{if(e.flags&32768){lT(e,_a);return}t=e.return;var n=GN(e.alternate,e,zi);if(n!==null){Ie=n;return}if(e=e.sibling,e!==null){Ie=e;return}Ie=e=t}while(e!==null);It===0&&(It=5)}function lT(t,e){do{var n=$N(t.alternate,t);if(n!==null){n.flags&=32767,Ie=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Ie=t;return}Ie=t=n}while(t!==null);It=6,Ie=null}function q_(t,e,n,r,i,a,s,o,l){t.cancelPendingCommit=null;do pf();while(yn!==0);if(Ke&6)throw Error(ee(327));if(e!==null){if(e===t.current)throw Error(ee(177));if(a=e.lanes|e.childLanes,a|=hv,OC(t,n,a,s,o,l),t===ut&&(Ie=ut=null,Ve=0),tl=e,Na=t,Vo=n,Vp=a,zp=i,tT=r,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,iI(Qh,function(){return fT(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(e.flags&13878)!==0,e.subtreeFlags&13878||r){r=ve.T,ve.T=null,i=He.p,He.p=2,s=Ke,Ke|=4;try{YN(t,e,n)}finally{Ke=s,He.p=i,ve.T=r}}yn=1,cT(),uT(),hT()}}function cT(){if(yn===1){yn=0;var t=Na,e=tl,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ve.T,ve.T=null;var r=He.p;He.p=2;var i=Ke;Ke|=4;try{Xx(e,t);var a=$p,s=IE(t.containerInfo),o=a.focusedElem,l=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&NE(o.ownerDocument.documentElement,o)){if(l!==null&&uv(o)){var h=l.start,u=l.end;if(u===void 0&&(u=h),"selectionStart"in o)o.selectionStart=h,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),b=o.textContent.length,A=Math.min(l.start,b),D=l.end===void 0?A:Math.min(l.end,b);!p.extend&&A>D&&(s=D,D=A,A=s);var w=h_(o,A),T=h_(o,D);if(w&&T&&(p.rangeCount!==1||p.anchorNode!==w.node||p.anchorOffset!==w.offset||p.focusNode!==T.node||p.focusOffset!==T.offset)){var N=d.createRange();N.setStart(w.node,w.offset),p.removeAllRanges(),A>D?(p.addRange(N),p.extend(T.node,T.offset)):(N.setEnd(T.node,T.offset),p.addRange(N))}}}}for(d=[],p=o;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var O=d[o];O.element.scrollLeft=O.left,O.element.scrollTop=O.top}}bd=!!Gp,$p=Gp=null}finally{Ke=i,He.p=r,ve.T=n}}t.current=e,yn=2}}function uT(){if(yn===2){yn=0;var t=Na,e=tl,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ve.T,ve.T=null;var r=He.p;He.p=2;var i=Ke;Ke|=4;try{qx(t,e.alternate,e)}finally{Ke=i,He.p=r,ve.T=n}}yn=3}}function hT(){if(yn===4||yn===3){yn=0,xC();var t=Na,e=tl,n=Vo,r=tT;e.subtreeFlags&10256||e.flags&10256?yn=5:(yn=0,tl=Na=null,dT(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(Ca=null),rv(n),e=e.stateNode,cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(ru,e,void 0,(e.current.flags&128)===128)}catch{}if(r!==null){e=ve.T,i=He.p,He.p=2,ve.T=null;try{for(var a=t.onRecoverableError,s=0;s<r.length;s++){var o=r[s];a(o.value,{componentStack:o.stack})}}finally{ve.T=e,He.p=i}}Vo&3&&pf(),pi(t),i=t.pendingLanes,n&4194090&&i&42?t===Bp?Ec++:(Ec=0,Bp=t):Ec=0,pu(0)}}function dT(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,uu(e)))}function pf(t){return cT(),uT(),hT(),fT()}function fT(){if(yn!==5)return!1;var t=Na,e=Vp;Vp=0;var n=rv(Vo),r=ve.T,i=He.p;try{He.p=32>n?32:n,ve.T=null,n=zp,zp=null;var a=Na,s=Vo;if(yn=0,tl=Na=null,Vo=0,Ke&6)throw Error(ee(331));var o=Ke;if(Ke|=4,Jx(a.current),Kx(a,a.current,s,n),Ke=o,pu(0,!1),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(ru,a)}catch{}return!0}finally{He.p=i,ve.T=r,dT(t,e)}}function G_(t,e,n){e=Er(n,e),e=kp(t.stateNode,e,2),t=Ra(t,e,2),t!==null&&(au(t,2),pi(t))}function st(t,e,n){if(t.tag===3)G_(t,t,n);else for(;e!==null;){if(e.tag===3){G_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ca===null||!Ca.has(r))){t=Er(n,t),n=Ix(2),r=Ra(e,n,2),r!==null&&(Dx(n,r,e,t),au(r,2),pi(r));break}}e=e.return}}function Rm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new KN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(jv=!0,i.add(n),t=tI.bind(null,t,e,n),e.then(t,t))}function tI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,ut===t&&(Ve&n)===n&&(It===4||It===3&&(Ve&62914560)===Ve&&300>ri()-Uv?!(Ke&2)&&nl(t,0):Pv|=n,el===Ve&&(el=0)),pi(t)}function mT(t,e){e===0&&(e=cE()),t=yl(t,e),t!==null&&(au(t,e),pi(t))}function nI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mT(t,n)}function rI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(ee(314))}r!==null&&r.delete(e),mT(t,n)}function iI(t,e){return tv(t,e)}var fd=null,co=null,Hp=!1,md=!1,Cm=!1,Ts=0;function pi(t){t!==co&&t.next===null&&(co===null?fd=co=t:co=co.next=t),md=!0,Hp||(Hp=!0,sI())}function pu(t,e){if(!Cm&&md){Cm=!0;do for(var n=!1,r=fd;r!==null;){if(t!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var s=r.suspendedLanes,o=r.pingedLanes;a=(1<<31-ur(42|t)+1)-1,a&=i&~(s&~o),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,$_(r,a))}else a=Ve,a=nf(r,r===ut?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||iu(r,a)||(n=!0,$_(r,a));r=r.next}while(n);Cm=!1}}function aI(){pT()}function pT(){md=Hp=!1;var t=0;Ts!==0&&(mI()&&(t=Ts),Ts=0);for(var e=ri(),n=null,r=fd;r!==null;){var i=r.next,a=gT(r,e);a===0?(r.next=null,n===null?fd=i:n.next=i,i===null&&(co=n)):(n=r,(t!==0||a&3)&&(md=!0)),r=i}pu(t)}function gT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes&-62914561;0<a;){var s=31-ur(a),o=1<<s,l=i[s];l===-1?(!(o&n)||o&r)&&(i[s]=DC(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}if(e=ut,n=Ve,n=nf(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,n===0||t===e&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&em(r),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||iu(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(r!==null&&em(r),rv(n)){case 2:case 8:n=sE;break;case 32:n=Qh;break;case 268435456:n=oE;break;default:n=Qh}return r=vT.bind(null,t),n=tv(n,r),t.callbackPriority=e,t.callbackNode=n,e}return r!==null&&r!==null&&em(r),t.callbackPriority=2,t.callbackNode=null,2}function vT(t,e){if(yn!==0&&yn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(pf()&&t.callbackNode!==n)return null;var r=Ve;return r=nf(t,t===ut?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(rT(t,r,e),gT(t,ri()),t.callbackNode!=null&&t.callbackNode===n?vT.bind(null,t):null)}function $_(t,e){if(pf())return null;rT(t,e,!0)}function sI(){gI(function(){Ke&6?tv(aE,aI):pT()})}function Vv(){return Ts===0&&(Ts=lE()),Ts}function Y_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Eh(""+t)}function X_(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function oI(t,e,n,r,i){if(e==="submit"&&n&&n.stateNode===i){var a=Y_((i[Wn]||null).action),s=r.submitter;s&&(e=(e=s[Wn]||null)?Y_(e.formAction):s.getAttribute("formAction"),e!==null&&(a=e,s=null));var o=new rf("action","action",null,r,i);t.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Ts!==0){var l=s?X_(i,s):new FormData(i);Op(n,{pending:!0,data:l,method:i.method,action:a},null,l)}}else typeof a=="function"&&(o.preventDefault(),l=s?X_(i,s):new FormData(i),Op(n,{pending:!0,data:l,method:i.method,action:a},a,l))},currentTarget:i}]})}}for(var Nm=0;Nm<bp.length;Nm++){var Im=bp[Nm],lI=Im.toLowerCase(),cI=Im[0].toUpperCase()+Im.slice(1);Hr(lI,"on"+cI)}Hr(OE,"onAnimationEnd");Hr(ME,"onAnimationIteration");Hr(kE,"onAnimationStart");Hr("dblclick","onDoubleClick");Hr("focusin","onFocus");Hr("focusout","onBlur");Hr(SN,"onTransitionRun");Hr(RN,"onTransitionStart");Hr(CN,"onTransitionCancel");Hr(jE,"onTransitionEnd");Xo("onMouseEnter",["mouseout","mouseover"]);Xo("onMouseLeave",["mouseout","mouseover"]);Xo("onPointerEnter",["pointerout","pointerover"]);Xo("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vc));function yT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,h=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=h;try{a(i)}catch(u){od(u)}i.currentTarget=null,a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,h=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=h;try{a(i)}catch(u){od(u)}i.currentTarget=null,a=l}}}}function Ne(t,e){var n=e[fp];n===void 0&&(n=e[fp]=new Set);var r=t+"__bubble";n.has(r)||(_T(e,t,2,!1),n.add(r))}function Dm(t,e,n){var r=0;e&&(r|=4),_T(n,t,r,e)}var sh="_reactListening"+Math.random().toString(36).slice(2);function zv(t){if(!t[sh]){t[sh]=!0,fE.forEach(function(n){n!=="selectionchange"&&(uI.has(n)||Dm(n,!1,t),Dm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[sh]||(e[sh]=!0,Dm("selectionchange",!1,e))}}function _T(t,e,n,r){switch(DT(e)){case 2:var i=UI;break;case 8:i=LI;break;default:i=qv}n=i.bind(null,e,n,t),i=void 0,!vp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Om(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;o!==null;){if(s=yo(o),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue e}o=o.parentNode}}r=r.return}wE(function(){var h=a,u=sv(n),d=[];e:{var f=PE.get(t);if(f!==void 0){var p=rf,b=t;switch(t){case"keypress":if(Th(n)===0)break e;case"keydown":case"keyup":p=iN;break;case"focusin":b="focus",p=lm;break;case"focusout":b="blur",p=lm;break;case"beforeblur":case"afterblur":p=lm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=t_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=$C;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=oN;break;case OE:case ME:case kE:p=QC;break;case jE:p=cN;break;case"scroll":case"scrollend":p=qC;break;case"wheel":p=hN;break;case"copy":case"cut":case"paste":p=WC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=r_;break;case"toggle":case"beforetoggle":p=fN}var A=(e&4)!==0,D=!A&&(t==="scroll"||t==="scrollend"),w=A?f!==null?f+"Capture":null:f;A=[];for(var T=h,N;T!==null;){var O=T;if(N=O.stateNode,O=O.tag,O!==5&&O!==26&&O!==27||N===null||w===null||(O=Mc(T,w),O!=null&&A.push(zc(T,O,N))),D)break;T=T.return}0<A.length&&(f=new p(f,b,null,n,u),d.push({event:f,listeners:A}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==gp&&(b=n.relatedTarget||n.fromElement)&&(yo(b)||b[gl]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=h,b=b?yo(b):null,b!==null&&(D=nu(b),A=b.tag,b!==D||A!==5&&A!==27&&A!==6)&&(b=null)):(p=null,b=h),p!==b)){if(A=t_,O="onMouseLeave",w="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(A=r_,O="onPointerLeave",w="onPointerEnter",T="pointer"),D=p==null?f:nc(p),N=b==null?f:nc(b),f=new A(O,T+"leave",p,n,u),f.target=D,f.relatedTarget=N,O=null,yo(u)===h&&(A=new A(w,T+"enter",b,n,u),A.target=N,A.relatedTarget=D,O=A),D=O,p&&b)t:{for(A=p,w=b,T=0,N=A;N;N=no(N))T++;for(N=0,O=w;O;O=no(O))N++;for(;0<T-N;)A=no(A),T--;for(;0<N-T;)w=no(w),N--;for(;T--;){if(A===w||w!==null&&A===w.alternate)break t;A=no(A),w=no(w)}A=null}else A=null;p!==null&&Q_(d,f,p,A,!1),b!==null&&D!==null&&Q_(d,D,b,A,!0)}}e:{if(f=h?nc(h):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var P=o_;else if(s_(f))if(RE)P=xN;else{P=wN;var R=bN}else p=f.nodeName,!p||p.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?h&&av(h.elementType)&&(P=o_):P=EN;if(P&&(P=P(t,h))){SE(d,P,n,u);break e}R&&R(t,f,h),t==="focusout"&&h&&f.type==="number"&&h.memoizedProps.value!=null&&pp(f,"number",f.value)}switch(R=h?nc(h):window,t){case"focusin":(s_(R)||R.contentEditable==="true")&&(wo=R,yp=h,dc=null);break;case"focusout":dc=yp=wo=null;break;case"mousedown":_p=!0;break;case"contextmenu":case"mouseup":case"dragend":_p=!1,d_(d,n,u);break;case"selectionchange":if(AN)break;case"keydown":case"keyup":d_(d,n,u)}var _;if(cv)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else bo?TE(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(xE&&n.locale!=="ko"&&(bo||g!=="onCompositionStart"?g==="onCompositionEnd"&&bo&&(_=EE()):(ya=u,ov="value"in ya?ya.value:ya.textContent,bo=!0)),R=pd(h,g),0<R.length&&(g=new n_(g,t,null,n,u),d.push({event:g,listeners:R}),_?g.data=_:(_=AE(n),_!==null&&(g.data=_)))),(_=pN?gN(t,n):vN(t,n))&&(g=pd(h,"onBeforeInput"),0<g.length&&(R=new n_("onBeforeInput","beforeinput",null,n,u),d.push({event:R,listeners:g}),R.data=_)),oI(d,t,h,n,u)}yT(d,e)})}function zc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=Mc(t,n),i!=null&&r.unshift(zc(t,i,a)),i=Mc(t,e),i!=null&&r.push(zc(t,i,a))),t.tag===3)return r;t=t.return}return[]}function no(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Q_(t,e,n,r,i){for(var a=e._reactName,s=[];n!==null&&n!==r;){var o=n,l=o.alternate,h=o.stateNode;if(o=o.tag,l!==null&&l===r)break;o!==5&&o!==26&&o!==27||h===null||(l=h,i?(h=Mc(n,a),h!=null&&s.unshift(zc(n,h,l))):i||(h=Mc(n,a),h!=null&&s.push(zc(n,h,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var hI=/\r\n?/g,dI=/\u0000|\uFFFD/g;function K_(t){return(typeof t=="string"?t:""+t).replace(hI,`
`).replace(dI,"")}function bT(t,e){return e=K_(e),K_(t)===e}function gf(){}function tt(t,e,n,r,i,a){switch(n){case"children":typeof r=="string"?e==="body"||e==="textarea"&&r===""||Qo(t,r):(typeof r=="number"||typeof r=="bigint")&&e!=="body"&&Qo(t,""+r);break;case"className":Ju(t,"class",r);break;case"tabIndex":Ju(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Ju(t,n,r);break;case"style":bE(t,r,a);break;case"data":if(e!=="object"){Ju(t,"data",r);break}case"src":case"href":if(r===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=Eh(""+r),t.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(e!=="input"&&tt(t,e,"name",i.name,i,null),tt(t,e,"formEncType",i.formEncType,i,null),tt(t,e,"formMethod",i.formMethod,i,null),tt(t,e,"formTarget",i.formTarget,i,null)):(tt(t,e,"encType",i.encType,i,null),tt(t,e,"method",i.method,i,null),tt(t,e,"target",i.target,i,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=Eh(""+r),t.setAttribute(n,r);break;case"onClick":r!=null&&(t.onclick=gf);break;case"onScroll":r!=null&&Ne("scroll",t);break;case"onScrollEnd":r!=null&&Ne("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(ee(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(ee(60));t.innerHTML=n}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}n=Eh(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""+r):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":r===!0?t.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,r):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(n,r):t.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(n):t.setAttribute(n,r);break;case"popover":Ne("beforetoggle",t),Ne("toggle",t),wh(t,"popover",r);break;case"xlinkActuate":wi(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":wi(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":wi(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":wi(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":wi(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":wi(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":wi(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":wi(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":wi(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":wh(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=FC.get(n)||n,wh(t,n,r))}}function qp(t,e,n,r,i,a){switch(n){case"style":bE(t,r,a);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(ee(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(ee(60));t.innerHTML=n}}break;case"children":typeof r=="string"?Qo(t,r):(typeof r=="number"||typeof r=="bigint")&&Qo(t,""+r);break;case"onScroll":r!=null&&Ne("scroll",t);break;case"onScrollEnd":r!=null&&Ne("scrollend",t);break;case"onClick":r!=null&&(t.onclick=gf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mE.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),a=t[Wn]||null,a=a!=null?a[n]:null,typeof a=="function"&&t.removeEventListener(e,a,i),typeof r=="function")){typeof a!="function"&&a!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,r,i);break e}n in t?t[n]=r:r===!0?t.setAttribute(n,""):wh(t,n,r)}}}function bn(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",t),Ne("load",t);var r=!1,i=!1,a;for(a in n)if(n.hasOwnProperty(a)){var s=n[a];if(s!=null)switch(a){case"src":r=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(ee(137,e));default:tt(t,e,a,s,n,null)}}i&&tt(t,e,"srcSet",n.srcSet,n,null),r&&tt(t,e,"src",n.src,n,null);return;case"input":Ne("invalid",t);var o=a=s=i=null,l=null,h=null;for(r in n)if(n.hasOwnProperty(r)){var u=n[r];if(u!=null)switch(r){case"name":i=u;break;case"type":s=u;break;case"checked":l=u;break;case"defaultChecked":h=u;break;case"value":a=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(ee(137,e));break;default:tt(t,e,r,u,n,null)}}vE(t,a,o,l,h,s,i,!1),Kh(t);return;case"select":Ne("invalid",t),r=s=a=null;for(i in n)if(n.hasOwnProperty(i)&&(o=n[i],o!=null))switch(i){case"value":a=o;break;case"defaultValue":s=o;break;case"multiple":r=o;default:tt(t,e,i,o,n,null)}e=a,n=s,t.multiple=!!r,e!=null?Mo(t,!!r,e,!1):n!=null&&Mo(t,!!r,n,!0);return;case"textarea":Ne("invalid",t),a=i=r=null;for(s in n)if(n.hasOwnProperty(s)&&(o=n[s],o!=null))switch(s){case"value":r=o;break;case"defaultValue":i=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(ee(91));break;default:tt(t,e,s,o,n,null)}_E(t,r,i,a),Kh(t);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:tt(t,e,l,r,n,null)}return;case"dialog":Ne("beforetoggle",t),Ne("toggle",t),Ne("cancel",t),Ne("close",t);break;case"iframe":case"object":Ne("load",t);break;case"video":case"audio":for(r=0;r<Vc.length;r++)Ne(Vc[r],t);break;case"image":Ne("error",t),Ne("load",t);break;case"details":Ne("toggle",t);break;case"embed":case"source":case"link":Ne("error",t),Ne("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(r=n[h],r!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(ee(137,e));default:tt(t,e,h,r,n,null)}return;default:if(av(e)){for(u in n)n.hasOwnProperty(u)&&(r=n[u],r!==void 0&&qp(t,e,u,r,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(r=n[o],r!=null&&tt(t,e,o,r,n,null))}function fI(t,e,n,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,s=null,o=null,l=null,h=null,u=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&d!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":l=d;default:r.hasOwnProperty(p)||tt(t,e,p,null,r,d)}}for(var f in r){var p=r[f];if(d=n[f],r.hasOwnProperty(f)&&(p!=null||d!=null))switch(f){case"type":a=p;break;case"name":i=p;break;case"checked":h=p;break;case"defaultChecked":u=p;break;case"value":s=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(ee(137,e));break;default:p!==d&&tt(t,e,f,p,r,d)}}mp(t,s,o,l,h,u,a,i);return;case"select":p=s=o=f=null;for(a in n)if(l=n[a],n.hasOwnProperty(a)&&l!=null)switch(a){case"value":break;case"multiple":p=l;default:r.hasOwnProperty(a)||tt(t,e,a,null,r,l)}for(i in r)if(a=r[i],l=n[i],r.hasOwnProperty(i)&&(a!=null||l!=null))switch(i){case"value":f=a;break;case"defaultValue":o=a;break;case"multiple":s=a;default:a!==l&&tt(t,e,i,a,r,l)}e=o,n=s,r=p,f!=null?Mo(t,!!n,f,!1):!!r!=!!n&&(e!=null?Mo(t,!!n,e,!0):Mo(t,!!n,n?[]:"",!1));return;case"textarea":p=f=null;for(o in n)if(i=n[o],n.hasOwnProperty(o)&&i!=null&&!r.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:tt(t,e,o,null,r,i)}for(s in r)if(i=r[s],a=n[s],r.hasOwnProperty(s)&&(i!=null||a!=null))switch(s){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(ee(91));break;default:i!==a&&tt(t,e,s,i,r,a)}yE(t,f,p);return;case"option":for(var b in n)if(f=n[b],n.hasOwnProperty(b)&&f!=null&&!r.hasOwnProperty(b))switch(b){case"selected":t.selected=!1;break;default:tt(t,e,b,null,r,f)}for(l in r)if(f=r[l],p=n[l],r.hasOwnProperty(l)&&f!==p&&(f!=null||p!=null))switch(l){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:tt(t,e,l,f,r,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var A in n)f=n[A],n.hasOwnProperty(A)&&f!=null&&!r.hasOwnProperty(A)&&tt(t,e,A,null,r,f);for(h in r)if(f=r[h],p=n[h],r.hasOwnProperty(h)&&f!==p&&(f!=null||p!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(ee(137,e));break;default:tt(t,e,h,f,r,p)}return;default:if(av(e)){for(var D in n)f=n[D],n.hasOwnProperty(D)&&f!==void 0&&!r.hasOwnProperty(D)&&qp(t,e,D,void 0,r,f);for(u in r)f=r[u],p=n[u],!r.hasOwnProperty(u)||f===p||f===void 0&&p===void 0||qp(t,e,u,f,r,p);return}}for(var w in n)f=n[w],n.hasOwnProperty(w)&&f!=null&&!r.hasOwnProperty(w)&&tt(t,e,w,null,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||f==null&&p==null||tt(t,e,d,f,r,p)}var Gp=null,$p=null;function gd(t){return t.nodeType===9?t:t.ownerDocument}function W_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wT(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Yp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mm=null;function mI(){var t=window.event;return t&&t.type==="popstate"?t===Mm?!1:(Mm=t,!0):(Mm=null,!1)}var ET=typeof setTimeout=="function"?setTimeout:void 0,pI=typeof clearTimeout=="function"?clearTimeout:void 0,Z_=typeof Promise=="function"?Promise:void 0,gI=typeof queueMicrotask=="function"?queueMicrotask:typeof Z_<"u"?function(t){return Z_.resolve(null).then(t).catch(vI)}:ET;function vI(t){setTimeout(function(){throw t})}function Wa(t){return t==="head"}function J_(t,e){var n=e,r=0,i=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(0<r&&8>r){n=r;var s=t.ownerDocument;if(n&1&&xc(s.documentElement),n&2&&xc(s.body),n&4)for(n=s.head,xc(n),s=n.firstChild;s;){var o=s.nextSibling,l=s.nodeName;s[su]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=o}}if(i===0){t.removeChild(a),Gc(e);return}i--}else n==="$"||n==="$?"||n==="$!"?i++:r=n.charCodeAt(0)-48;else r=0;n=a}while(n);Gc(e)}function Xp(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Xp(n),iv(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function yI(t,e,n,r){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[su])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(a=t.getAttribute("rel"),a==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(a!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(a=t.getAttribute("src"),(a!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var a=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===a)return t}else return t;if(t=zr(t.nextSibling),t===null)break}return null}function _I(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=zr(t.nextSibling),t===null))return null;return t}function Qp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function bI(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var r=function(){e(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function zr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var Kp=null;function eb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function xT(t,e,n){switch(e=gd(n),t){case"html":if(t=e.documentElement,!t)throw Error(ee(452));return t;case"head":if(t=e.head,!t)throw Error(ee(453));return t;case"body":if(t=e.body,!t)throw Error(ee(454));return t;default:throw Error(ee(451))}}function xc(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);iv(t)}var Nr=new Map,tb=new Set;function vd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var $i=He.d;He.d={f:wI,r:EI,D:xI,C:TI,L:AI,m:SI,X:CI,S:RI,M:NI};function wI(){var t=$i.f(),e=ff();return t||e}function EI(t){var e=vl(t);e!==null&&e.tag===5&&e.type==="form"?gx(e):$i.r(t)}var bl=typeof document>"u"?null:document;function TT(t,e,n){var r=bl;if(r&&typeof e=="string"&&e){var i=wr(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),tb.has(i)||(tb.add(i),t={rel:t,crossOrigin:n,href:e},r.querySelector(i)===null&&(e=r.createElement("link"),bn(e,"link",t),on(e),r.head.appendChild(e)))}}function xI(t){$i.D(t),TT("dns-prefetch",t,null)}function TI(t,e){$i.C(t,e),TT("preconnect",t,e)}function AI(t,e,n){$i.L(t,e,n);var r=bl;if(r&&t&&e){var i='link[rel="preload"][as="'+wr(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+wr(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+wr(n.imageSizes)+'"]')):i+='[href="'+wr(t)+'"]';var a=i;switch(e){case"style":a=rl(t);break;case"script":a=wl(t)}Nr.has(a)||(t=pt({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Nr.set(a,t),r.querySelector(i)!==null||e==="style"&&r.querySelector(gu(a))||e==="script"&&r.querySelector(vu(a))||(e=r.createElement("link"),bn(e,"link",t),on(e),r.head.appendChild(e)))}}function SI(t,e){$i.m(t,e);var n=bl;if(n&&t){var r=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+wr(r)+'"][href="'+wr(t)+'"]',a=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=wl(t)}if(!Nr.has(a)&&(t=pt({rel:"modulepreload",href:t},e),Nr.set(a,t),n.querySelector(i)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(vu(a)))return}r=n.createElement("link"),bn(r,"link",t),on(r),n.head.appendChild(r)}}}function RI(t,e,n){$i.S(t,e,n);var r=bl;if(r&&t){var i=Oo(r).hoistableStyles,a=rl(t);e=e||"default";var s=i.get(a);if(!s){var o={loading:0,preload:null};if(s=r.querySelector(gu(a)))o.loading=5;else{t=pt({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Nr.get(a))&&Bv(t,n);var l=s=r.createElement("link");on(l),bn(l,"link",t),l._p=new Promise(function(h,u){l.onload=h,l.onerror=u}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Dh(s,e,r)}s={type:"stylesheet",instance:s,count:1,state:o},i.set(a,s)}}}function CI(t,e){$i.X(t,e);var n=bl;if(n&&t){var r=Oo(n).hoistableScripts,i=wl(t),a=r.get(i);a||(a=n.querySelector(vu(i)),a||(t=pt({src:t,async:!0},e),(e=Nr.get(i))&&Fv(t,e),a=n.createElement("script"),on(a),bn(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}function NI(t,e){$i.M(t,e);var n=bl;if(n&&t){var r=Oo(n).hoistableScripts,i=wl(t),a=r.get(i);a||(a=n.querySelector(vu(i)),a||(t=pt({src:t,async:!0,type:"module"},e),(e=Nr.get(i))&&Fv(t,e),a=n.createElement("script"),on(a),bn(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}function nb(t,e,n,r){var i=(i=Aa.current)?vd(i):null;if(!i)throw Error(ee(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=rl(n.href),n=Oo(i).hoistableStyles,r=n.get(e),r||(r={type:"style",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=rl(n.href);var a=Oo(i).hoistableStyles,s=a.get(t);if(s||(i=i.ownerDocument||i,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(t,s),(a=i.querySelector(gu(t)))&&!a._p&&(s.instance=a,s.state.loading=5),Nr.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Nr.set(t,n),a||II(i,t,n,s.state))),e&&r===null)throw Error(ee(528,""));return s}if(e&&r!==null)throw Error(ee(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=wl(n),n=Oo(i).hoistableScripts,r=n.get(e),r||(r={type:"script",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(ee(444,t))}}function rl(t){return'href="'+wr(t)+'"'}function gu(t){return'link[rel="stylesheet"]['+t+"]"}function AT(t){return pt({},t,{"data-precedence":t.precedence,precedence:null})}function II(t,e,n,r){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?r.loading=1:(e=t.createElement("link"),r.preload=e,e.addEventListener("load",function(){return r.loading|=1}),e.addEventListener("error",function(){return r.loading|=2}),bn(e,"link",n),on(e),t.head.appendChild(e))}function wl(t){return'[src="'+wr(t)+'"]'}function vu(t){return"script[async]"+t}function rb(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var r=t.querySelector('style[data-href~="'+wr(n.href)+'"]');if(r)return e.instance=r,on(r),r;var i=pt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),on(r),bn(r,"style",i),Dh(r,n.precedence,t),e.instance=r;case"stylesheet":i=rl(n.href);var a=t.querySelector(gu(i));if(a)return e.state.loading|=4,e.instance=a,on(a),a;r=AT(n),(i=Nr.get(i))&&Bv(r,i),a=(t.ownerDocument||t).createElement("link"),on(a);var s=a;return s._p=new Promise(function(o,l){s.onload=o,s.onerror=l}),bn(a,"link",r),e.state.loading|=4,Dh(a,n.precedence,t),e.instance=a;case"script":return a=wl(n.src),(i=t.querySelector(vu(a)))?(e.instance=i,on(i),i):(r=n,(i=Nr.get(a))&&(r=pt({},n),Fv(r,i)),t=t.ownerDocument||t,i=t.createElement("script"),on(i),bn(i,"link",r),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(ee(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(r=e.instance,e.state.loading|=4,Dh(r,n.precedence,t));return e.instance}function Dh(t,e,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,a=i,s=0;s<r.length;s++){var o=r[s];if(o.dataset.precedence===e)a=o;else if(a!==i)break}a?a.parentNode.insertBefore(t,a.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Bv(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Fv(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Oh=null;function ib(t,e,n){if(Oh===null){var r=new Map,i=Oh=new Map;i.set(n,r)}else i=Oh,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(t))return r;for(r.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var a=n[i];if(!(a[su]||a[Nn]||t==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var s=a.getAttribute(e)||"";s=t+s;var o=r.get(s);o?o.push(a):r.set(s,[a])}}return r}function ab(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function DI(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function ST(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Bc=null;function OI(){}function MI(t,e,n){if(Bc===null)throw Error(ee(475));var r=Bc;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var i=rl(n.href),a=t.querySelector(gu(i));if(a){t=a._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(r.count++,r=yd.bind(r),t.then(r,r)),e.state.loading|=4,e.instance=a,on(a);return}a=t.ownerDocument||t,n=AT(n),(i=Nr.get(i))&&Bv(n,i),a=a.createElement("link"),on(a);var s=a;s._p=new Promise(function(o,l){s.onload=o,s.onerror=l}),bn(a,"link",n),e.instance=a}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(r.count++,e=yd.bind(r),t.addEventListener("load",e),t.addEventListener("error",e))}}function kI(){if(Bc===null)throw Error(ee(475));var t=Bc;return t.stylesheets&&t.count===0&&Wp(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&Wp(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function yd(){if(this.count--,this.count===0){if(this.stylesheets)Wp(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var _d=null;function Wp(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,_d=new Map,e.forEach(jI,t),_d=null,yd.call(t))}function jI(t,e){if(!(e.state.loading&4)){var n=_d.get(t);if(n)var r=n.get(null);else{n=new Map,_d.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var s=i[a];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}i=e.instance,s=i.getAttribute("data-precedence"),a=n.get(s)||r,a===r&&n.set(null,i),n.set(s,i),this.count++,r=yd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),a?a.parentNode.insertBefore(i,a.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var Fc={$$typeof:Ri,Provider:null,Consumer:null,_currentValue:ys,_currentValue2:ys,_threadCount:0};function PI(t,e,n,r,i,a,s,o){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tm(0),this.hiddenUpdates=tm(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function RT(t,e,n,r,i,a,s,o,l,h,u,d){return t=new PI(t,e,n,s,o,l,h,d),e=1,a===!0&&(e|=24),a=ar(3,null,null,e),t.current=a,a.stateNode=t,e=gv(),e.refCount++,t.pooledCache=e,e.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:e},yv(a),t}function CT(t){return t?(t=To,t):To}function NT(t,e,n,r,i,a){i=CT(i),r.context===null?r.context=i:r.pendingContext=i,r=Sa(e),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Ra(t,r,e),n!==null&&(dr(n,t,e),pc(n,t,e))}function sb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hv(t,e){sb(t,e),(t=t.alternate)&&sb(t,e)}function IT(t){if(t.tag===13){var e=yl(t,67108864);e!==null&&dr(e,t,67108864),Hv(t,67108864)}}var bd=!0;function UI(t,e,n,r){var i=ve.T;ve.T=null;var a=He.p;try{He.p=2,qv(t,e,n,r)}finally{He.p=a,ve.T=i}}function LI(t,e,n,r){var i=ve.T;ve.T=null;var a=He.p;try{He.p=8,qv(t,e,n,r)}finally{He.p=a,ve.T=i}}function qv(t,e,n,r){if(bd){var i=Zp(r);if(i===null)Om(t,e,r,wd,n),ob(t,r);else if(zI(i,t,e,n,r))r.stopPropagation();else if(ob(t,r),e&4&&-1<VI.indexOf(t)){for(;i!==null;){var a=vl(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var s=os(a.pendingLanes);if(s!==0){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-ur(s);o.entanglements[1]|=l,s&=~l}pi(a),!(Ke&6)&&(hd=ri()+500,pu(0))}}break;case 13:o=yl(a,2),o!==null&&dr(o,a,2),ff(),Hv(a,2)}if(a=Zp(r),a===null&&Om(t,e,r,wd,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Om(t,e,r,null,n)}}function Zp(t){return t=sv(t),Gv(t)}var wd=null;function Gv(t){if(wd=null,t=yo(t),t!==null){var e=nu(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=tE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return wd=t,null}function DT(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(TC()){case aE:return 2;case sE:return 8;case Qh:case AC:return 32;case oE:return 268435456;default:return 32}default:return 32}}var Jp=!1,Ia=null,Da=null,Oa=null,Hc=new Map,qc=new Map,da=[],VI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ob(t,e){switch(t){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":Da=null;break;case"mouseover":case"mouseout":Oa=null;break;case"pointerover":case"pointerout":Hc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qc.delete(e.pointerId)}}function Gl(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=vl(e),e!==null&&IT(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function zI(t,e,n,r,i){switch(e){case"focusin":return Ia=Gl(Ia,t,e,n,r,i),!0;case"dragenter":return Da=Gl(Da,t,e,n,r,i),!0;case"mouseover":return Oa=Gl(Oa,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Hc.set(a,Gl(Hc.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,qc.set(a,Gl(qc.get(a)||null,t,e,n,r,i)),!0}return!1}function OT(t){var e=yo(t.target);if(e!==null){var n=nu(e);if(n!==null){if(e=n.tag,e===13){if(e=tE(n),e!==null){t.blockedOn=e,MC(t.priority,function(){if(n.tag===13){var r=hr();r=nv(r);var i=yl(n,r);i!==null&&dr(i,n,r),Hv(n,r)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zp(t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);gp=r,n.target.dispatchEvent(r),gp=null}else return e=vl(n),e!==null&&IT(e),t.blockedOn=n,!1;e.shift()}return!0}function lb(t,e,n){Mh(t)&&n.delete(e)}function BI(){Jp=!1,Ia!==null&&Mh(Ia)&&(Ia=null),Da!==null&&Mh(Da)&&(Da=null),Oa!==null&&Mh(Oa)&&(Oa=null),Hc.forEach(lb),qc.forEach(lb)}function oh(t,e){t.blockedOn===e&&(t.blockedOn=null,Jp||(Jp=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,BI)))}var lh=null;function cb(t){lh!==t&&(lh=t,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,function(){lh===t&&(lh=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],i=t[e+2];if(typeof r!="function"){if(Gv(r||n)===null)continue;break}var a=vl(n);a!==null&&(t.splice(e,3),e-=3,Op(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Gc(t){function e(l){return oh(l,t)}Ia!==null&&oh(Ia,t),Da!==null&&oh(Da,t),Oa!==null&&oh(Oa,t),Hc.forEach(e),qc.forEach(e);for(var n=0;n<da.length;n++){var r=da[n];r.blockedOn===t&&(r.blockedOn=null)}for(;0<da.length&&(n=da[0],n.blockedOn===null);)OT(n),n.blockedOn===null&&da.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],s=i[Wn]||null;if(typeof a=="function")s||cb(n);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(i=a,s=a[Wn]||null)o=s.formAction;else if(Gv(i)!==null)continue}else o=s.action;typeof o=="function"?n[r+1]=o:(n.splice(r,3),r-=3),cb(n)}}}function $v(t){this._internalRoot=t}vf.prototype.render=$v.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));var n=e.current,r=hr();NT(n,r,t,e,null,null)};vf.prototype.unmount=$v.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;NT(t.current,2,null,t,null,null),ff(),e[gl]=null}};function vf(t){this._internalRoot=t}vf.prototype.unstable_scheduleHydration=function(t){if(t){var e=dE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<da.length&&e!==0&&e<da[n].priority;n++);da.splice(n,0,t),n===0&&OT(t)}};var ub=Jw.version;if(ub!=="19.1.0")throw Error(ee(527,ub,"19.1.0"));He.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=vC(e),t=t!==null?nE(t):null,t=t===null?null:t.stateNode,t};var FI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ve,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ch.isDisabled&&ch.supportsFiber)try{ru=ch.inject(FI),cr=ch}catch{}}ef.createRoot=function(t,e){if(!eE(t))throw Error(ee(299));var n=!1,r="",i=Rx,a=Cx,s=Nx,o=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(a=e.onCaughtError),e.onRecoverableError!==void 0&&(s=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(o=e.unstable_transitionCallbacks)),e=RT(t,1,!1,null,null,n,r,i,a,s,o,null),t[gl]=e.current,zv(t),new $v(e)};ef.hydrateRoot=function(t,e,n){if(!eE(t))throw Error(ee(299));var r=!1,i="",a=Rx,s=Cx,o=Nx,l=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(s=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),e=RT(t,1,!0,e,n??null,r,i,a,s,o,l,h),e.context=CT(null),n=e.current,r=hr(),r=nv(r),i=Sa(r),i.callback=null,Ra(n,i,r),n=r,e.current.lanes=n,au(e,n),pi(e),t[gl]=e.current,zv(t),new vf(e)};ef.version="19.1.0";function MT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MT)}catch(t){console.error(t)}}MT(),Yw.exports=ef;var HI=Yw.exports;const qI=$g(HI);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bt(){return bt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bt.apply(this,arguments)}var qt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qt||(qt={}));const hb="popstate";function GI(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:s,hash:o}=r.location;return $c("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:yu(i)}return YI(e,n,null,t)}function Pe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function il(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $I(){return Math.random().toString(36).substr(2,8)}function db(t,e){return{usr:t.state,key:t.key,idx:e}}function $c(t,e,n,r){return n===void 0&&(n=null),bt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Za(e):e,{state:n,key:e&&e.key||r||$I()})}function yu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Za(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function YI(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o=qt.Pop,l=null,h=u();h==null&&(h=0,s.replaceState(bt({},s.state,{idx:h}),""));function u(){return(s.state||{idx:null}).idx}function d(){o=qt.Pop;let D=u(),w=D==null?null:D-h;h=D,l&&l({action:o,location:A.location,delta:w})}function f(D,w){o=qt.Push;let T=$c(A.location,D,w);h=u()+1;let N=db(T,h),O=A.createHref(T);try{s.pushState(N,"",O)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(O)}a&&l&&l({action:o,location:A.location,delta:1})}function p(D,w){o=qt.Replace;let T=$c(A.location,D,w);h=u();let N=db(T,h),O=A.createHref(T);s.replaceState(N,"",O),a&&l&&l({action:o,location:A.location,delta:0})}function b(D){let w=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof D=="string"?D:yu(D);return T=T.replace(/ $/,"%20"),Pe(w,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,w)}let A={get action(){return o},get location(){return t(i,s)},listen(D){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(hb,d),l=D,()=>{i.removeEventListener(hb,d),l=null}},createHref(D){return e(i,D)},createURL:b,encodeLocation(D){let w=b(D);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:p,go(D){return s.go(D)}};return A}var Qe;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Qe||(Qe={}));const XI=new Set(["lazy","caseSensitive","path","id","index","children"]);function QI(t){return t.index===!0}function Ed(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,a)=>{let s=[...n,String(a)],o=typeof i.id=="string"?i.id:s.join("-");if(Pe(i.index!==!0||!i.children,"Cannot specify children on an index route"),Pe(!r[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),QI(i)){let l=bt({},i,e(i),{id:o});return r[o]=l,l}else{let l=bt({},i,e(i),{id:o,children:void 0});return r[o]=l,i.children&&(l.children=Ed(i.children,e,s,r)),l}})}function hs(t,e,n){return n===void 0&&(n="/"),kh(t,e,n,!1)}function kh(t,e,n,r){let i=typeof e=="string"?Za(e):e,a=_u(i.pathname||"/",n);if(a==null)return null;let s=kT(t);WI(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let h=l4(a);o=s4(s[l],h,r)}return o}function KI(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function kT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,s,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};l.relativePath.startsWith("/")&&(Pe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let h=Ma([r,l.relativePath]),u=n.concat(l);a.children&&a.children.length>0&&(Pe(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),kT(a.children,e,u,h)),!(a.path==null&&!a.index)&&e.push({path:h,score:i4(h,a.index),routesMeta:u})};return t.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let l of jT(a.path))i(a,s,l)}),e}function jT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=jT(r.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function WI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:a4(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ZI=/^:[\w-]+$/,JI=3,e4=2,t4=1,n4=10,r4=-2,fb=t=>t==="*";function i4(t,e){let n=t.split("/"),r=n.length;return n.some(fb)&&(r+=r4),e&&(r+=e4),n.filter(i=>!fb(i)).reduce((i,a)=>i+(ZI.test(a)?JI:a===""?t4:n4),r)}function a4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function s4(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let l=r[o],h=o===r.length-1,u=a==="/"?e:e.slice(a.length)||"/",d=mb({path:l.relativePath,caseSensitive:l.caseSensitive,end:h},u),f=l.route;if(!d&&h&&n&&!r[r.length-1].route.index&&(d=mb({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:Ma([a,d.pathname]),pathnameBase:h4(Ma([a,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(a=Ma([a,d.pathnameBase]))}return s}function mb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=o4(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((h,u,d)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let A=o[d]||"";s=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const b=o[d];return p&&!b?h[f]=void 0:h[f]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:s,pattern:t}}function o4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),il(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function l4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return il(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _u(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function c4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Za(t):t;return{pathname:n?n.startsWith("/")?n:u4(n,e):e,search:d4(r),hash:f4(i)}}function u4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function km(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function UT(t,e){let n=PT(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function LT(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Za(t):(i=bt({},t),Pe(!i.pathname||!i.pathname.includes("?"),km("?","pathname","search",i)),Pe(!i.pathname||!i.pathname.includes("#"),km("#","pathname","hash",i)),Pe(!i.search||!i.search.includes("#"),km("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let d=e.length-1;if(!r&&s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}o=d>=0?e[d]:"/"}let l=c4(i,o),h=s&&s!=="/"&&s.endsWith("/"),u=(a||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(h||u)&&(l.pathname+="/"),l}const Ma=t=>t.join("/").replace(/\/\/+/g,"/"),h4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),d4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,f4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class xd{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function al(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const VT=["post","put","patch","delete"],m4=new Set(VT),p4=["get",...VT],g4=new Set(p4),v4=new Set([301,302,303,307,308]),y4=new Set([307,308]),jm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},_4={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},$l={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Yv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,b4=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),zT="remix-router-transitions";function w4(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Pe(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let L=t.detectErrorBoundary;i=F=>({hasErrorBoundary:L(F)})}else i=b4;let a={},s=Ed(t.routes,i,void 0,a),o,l=t.basename||"/",h=t.dataStrategy||A4,u=t.patchRoutesOnNavigation,d=bt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),f=null,p=new Set,b=null,A=null,D=null,w=t.hydrationData!=null,T=hs(s,t.history.location,l),N=!1,O=null;if(T==null&&!u){let L=Hn(404,{pathname:t.history.location.pathname}),{matches:F,route:Q}=Ab(s);T=F,O={[Q.id]:L}}T&&!t.hydrationData&&Mn(T,s,t.history.location.pathname).active&&(T=null);let P;if(T)if(T.some(L=>L.route.lazy))P=!1;else if(!T.some(L=>L.route.loader))P=!0;else if(d.v7_partialHydration){let L=t.hydrationData?t.hydrationData.loaderData:null,F=t.hydrationData?t.hydrationData.errors:null;if(F){let Q=T.findIndex(te=>F[te.route.id]!==void 0);P=T.slice(0,Q+1).every(te=>!tg(te.route,L,F))}else P=T.every(Q=>!tg(Q.route,L,F))}else P=t.hydrationData!=null;else if(P=!1,T=[],d.v7_partialHydration){let L=Mn(null,s,t.history.location.pathname);L.active&&L.matches&&(N=!0,T=L.matches)}let R,_={historyAction:t.history.action,location:t.history.location,matches:T,initialized:P,navigation:jm,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||O,fetchers:new Map,blockers:new Map},g=qt.Pop,y=!1,x,C=!1,I=new Map,S=null,U=!1,z=!1,k=[],M=new Set,q=new Map,B=0,X=-1,re=new Map,V=new Set,K=new Map,$=new Map,Y=new Set,le=new Map,xe=new Map,me;function De(){if(f=t.history.listen(L=>{let{action:F,location:Q,delta:te}=L;if(me){me(),me=void 0;return}il(xe.size===0||te!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ie=Ir({currentLocation:_.location,nextLocation:Q,historyAction:F});if(ie&&te!=null){let he=new Promise(ge=>{me=ge});t.history.go(te*-1),$r(ie,{state:"blocked",location:Q,proceed(){$r(ie,{state:"proceeding",proceed:void 0,reset:void 0,location:Q}),he.then(()=>t.history.go(te))},reset(){let ge=new Map(_.blockers);ge.set(ie,$l),Ae({blockers:ge})}});return}return it(F,Q)}),n){V4(e,I);let L=()=>z4(e,I);e.addEventListener("pagehide",L),S=()=>e.removeEventListener("pagehide",L)}return _.initialized||it(qt.Pop,_.location,{initialHydration:!0}),R}function ze(){f&&f(),S&&S(),p.clear(),x&&x.abort(),_.fetchers.forEach((L,F)=>tn(F)),_.blockers.forEach((L,F)=>Gr(F))}function We(L){return p.add(L),()=>p.delete(L)}function Ae(L,F){F===void 0&&(F={}),_=bt({},_,L);let Q=[],te=[];d.v7_fetcherPersist&&_.fetchers.forEach((ie,he)=>{ie.state==="idle"&&(Y.has(he)?te.push(he):Q.push(he))}),Y.forEach(ie=>{!_.fetchers.has(ie)&&!q.has(ie)&&te.push(ie)}),[...p].forEach(ie=>ie(_,{deletedFetchers:te,viewTransitionOpts:F.viewTransitionOpts,flushSync:F.flushSync===!0})),d.v7_fetcherPersist?(Q.forEach(ie=>_.fetchers.delete(ie)),te.forEach(ie=>tn(ie))):te.forEach(ie=>Y.delete(ie))}function en(L,F,Q){var te,ie;let{flushSync:he}=Q===void 0?{}:Q,ge=_.actionData!=null&&_.navigation.formMethod!=null&&Ur(_.navigation.formMethod)&&_.navigation.state==="loading"&&((te=L.state)==null?void 0:te._isRedirect)!==!0,ue;F.actionData?Object.keys(F.actionData).length>0?ue=F.actionData:ue=null:ge?ue=_.actionData:ue=null;let ce=F.loaderData?xb(_.loaderData,F.loaderData,F.matches||[],F.errors):_.loaderData,oe=_.blockers;oe.size>0&&(oe=new Map(oe),oe.forEach((Ee,Ft)=>oe.set(Ft,$l)));let de=y===!0||_.navigation.formMethod!=null&&Ur(_.navigation.formMethod)&&((ie=L.state)==null?void 0:ie._isRedirect)!==!0;o&&(s=o,o=void 0),U||g===qt.Pop||(g===qt.Push?t.history.push(L,L.state):g===qt.Replace&&t.history.replace(L,L.state));let _e;if(g===qt.Pop){let Ee=I.get(_.location.pathname);Ee&&Ee.has(L.pathname)?_e={currentLocation:_.location,nextLocation:L}:I.has(L.pathname)&&(_e={currentLocation:L,nextLocation:_.location})}else if(C){let Ee=I.get(_.location.pathname);Ee?Ee.add(L.pathname):(Ee=new Set([L.pathname]),I.set(_.location.pathname,Ee)),_e={currentLocation:_.location,nextLocation:L}}Ae(bt({},F,{actionData:ue,loaderData:ce,historyAction:g,location:L,initialized:!0,navigation:jm,revalidation:"idle",restoreScrollPosition:Xr(L,F.matches||_.matches),preventScrollReset:de,blockers:oe}),{viewTransitionOpts:_e,flushSync:he===!0}),g=qt.Pop,y=!1,C=!1,U=!1,z=!1,k=[]}async function un(L,F){if(typeof L=="number"){t.history.go(L);return}let Q=eg(_.location,_.matches,l,d.v7_prependBasename,L,d.v7_relativeSplatPath,F==null?void 0:F.fromRouteId,F==null?void 0:F.relative),{path:te,submission:ie,error:he}=pb(d.v7_normalizeFormMethod,!1,Q,F),ge=_.location,ue=$c(_.location,te,F&&F.state);ue=bt({},ue,t.history.encodeLocation(ue));let ce=F&&F.replace!=null?F.replace:void 0,oe=qt.Push;ce===!0?oe=qt.Replace:ce===!1||ie!=null&&Ur(ie.formMethod)&&ie.formAction===_.location.pathname+_.location.search&&(oe=qt.Replace);let de=F&&"preventScrollReset"in F?F.preventScrollReset===!0:void 0,_e=(F&&F.flushSync)===!0,Ee=Ir({currentLocation:ge,nextLocation:ue,historyAction:oe});if(Ee){$r(Ee,{state:"blocked",location:ue,proceed(){$r(Ee,{state:"proceeding",proceed:void 0,reset:void 0,location:ue}),un(L,F)},reset(){let Ft=new Map(_.blockers);Ft.set(Ee,$l),Ae({blockers:Ft})}});return}return await it(oe,ue,{submission:ie,pendingError:he,preventScrollReset:de,replace:F&&F.replace,enableViewTransition:F&&F.viewTransition,flushSync:_e})}function Ze(){if(gt(),Ae({revalidation:"loading"}),_.navigation.state!=="submitting"){if(_.navigation.state==="idle"){it(_.historyAction,_.location,{startUninterruptedRevalidation:!0});return}it(g||_.historyAction,_.navigation.location,{overrideNavigation:_.navigation,enableViewTransition:C===!0})}}async function it(L,F,Q){x&&x.abort(),x=null,g=L,U=(Q&&Q.startUninterruptedRevalidation)===!0,Yr(_.location,_.matches),y=(Q&&Q.preventScrollReset)===!0,C=(Q&&Q.enableViewTransition)===!0;let te=o||s,ie=Q&&Q.overrideNavigation,he=Q!=null&&Q.initialHydration&&_.matches&&_.matches.length>0&&!N?_.matches:hs(te,F,l),ge=(Q&&Q.flushSync)===!0;if(he&&_.initialized&&!z&&D4(_.location,F)&&!(Q&&Q.submission&&Ur(Q.submission.formMethod))){en(F,{matches:he},{flushSync:ge});return}let ue=Mn(he,te,F.pathname);if(ue.active&&ue.matches&&(he=ue.matches),!he){let{error:Ye,notFoundMatches:je,route:lt}=Dr(F.pathname);en(F,{matches:je,loaderData:{},errors:{[lt.id]:Ye}},{flushSync:ge});return}x=new AbortController;let ce=ro(t.history,F,x.signal,Q&&Q.submission),oe;if(Q&&Q.pendingError)oe=[ds(he).route.id,{type:Qe.error,error:Q.pendingError}];else if(Q&&Q.submission&&Ur(Q.submission.formMethod)){let Ye=await Je(ce,F,Q.submission,he,ue.active,{replace:Q.replace,flushSync:ge});if(Ye.shortCircuited)return;if(Ye.pendingActionResult){let[je,lt]=Ye.pendingActionResult;if(ir(lt)&&al(lt.error)&&lt.error.status===404){x=null,en(F,{matches:Ye.matches,loaderData:{},errors:{[je]:lt.error}});return}}he=Ye.matches||he,oe=Ye.pendingActionResult,ie=Pm(F,Q.submission),ge=!1,ue.active=!1,ce=ro(t.history,ce.url,ce.signal)}let{shortCircuited:de,matches:_e,loaderData:Ee,errors:Ft}=await $e(ce,F,he,ue.active,ie,Q&&Q.submission,Q&&Q.fetcherSubmission,Q&&Q.replace,Q&&Q.initialHydration===!0,ge,oe);de||(x=null,en(F,bt({matches:_e||he},Tb(oe),{loaderData:Ee,errors:Ft})))}async function Je(L,F,Q,te,ie,he){he===void 0&&(he={}),gt();let ge=U4(F,Q);if(Ae({navigation:ge},{flushSync:he.flushSync===!0}),ie){let oe=await nn(te,F.pathname,L.signal);if(oe.type==="aborted")return{shortCircuited:!0};if(oe.type==="error"){let de=ds(oe.partialMatches).route.id;return{matches:oe.partialMatches,pendingActionResult:[de,{type:Qe.error,error:oe.error}]}}else if(oe.matches)te=oe.matches;else{let{notFoundMatches:de,error:_e,route:Ee}=Dr(F.pathname);return{matches:de,pendingActionResult:[Ee.id,{type:Qe.error,error:_e}]}}}let ue,ce=ic(te,F);if(!ce.route.action&&!ce.route.lazy)ue={type:Qe.error,error:Hn(405,{method:L.method,pathname:F.pathname,routeId:ce.route.id})};else if(ue=(await Rt("action",_,L,[ce],te,null))[ce.route.id],L.signal.aborted)return{shortCircuited:!0};if(ms(ue)){let oe;return he&&he.replace!=null?oe=he.replace:oe=bb(ue.response.headers.get("Location"),new URL(L.url),l)===_.location.pathname+_.location.search,await Ce(L,ue,!0,{submission:Q,replace:oe}),{shortCircuited:!0}}if(wa(ue))throw Hn(400,{type:"defer-action"});if(ir(ue)){let oe=ds(te,ce.route.id);return(he&&he.replace)!==!0&&(g=qt.Push),{matches:te,pendingActionResult:[oe.route.id,ue]}}return{matches:te,pendingActionResult:[ce.route.id,ue]}}async function $e(L,F,Q,te,ie,he,ge,ue,ce,oe,de){let _e=ie||Pm(F,he),Ee=he||ge||Rb(_e),Ft=!U&&(!d.v7_partialHydration||!ce);if(te){if(Ft){let dt=Tt(de);Ae(bt({navigation:_e},dt!==void 0?{actionData:dt}:{}),{flushSync:oe})}let Ue=await nn(Q,F.pathname,L.signal);if(Ue.type==="aborted")return{shortCircuited:!0};if(Ue.type==="error"){let dt=ds(Ue.partialMatches).route.id;return{matches:Ue.partialMatches,loaderData:{},errors:{[dt]:Ue.error}}}else if(Ue.matches)Q=Ue.matches;else{let{error:dt,notFoundMatches:yi,route:Zi}=Dr(F.pathname);return{matches:yi,loaderData:{},errors:{[Zi.id]:dt}}}}let Ye=o||s,[je,lt]=vb(t.history,_,Q,Ee,F,d.v7_partialHydration&&ce===!0,d.v7_skipActionErrorRevalidation,z,k,M,Y,K,V,Ye,l,de);if(xn(Ue=>!(Q&&Q.some(dt=>dt.route.id===Ue))||je&&je.some(dt=>dt.route.id===Ue)),X=++B,je.length===0&&lt.length===0){let Ue=Vn();return en(F,bt({matches:Q,loaderData:{},errors:de&&ir(de[1])?{[de[0]]:de[1].error}:null},Tb(de),Ue?{fetchers:new Map(_.fetchers)}:{}),{flushSync:oe}),{shortCircuited:!0}}if(Ft){let Ue={};if(!te){Ue.navigation=_e;let dt=Tt(de);dt!==void 0&&(Ue.actionData=dt)}lt.length>0&&(Ue.fetchers=Mt(lt)),Ae(Ue,{flushSync:oe})}lt.forEach(Ue=>{jt(Ue.key),Ue.controller&&q.set(Ue.key,Ue.controller)});let gi=()=>lt.forEach(Ue=>jt(Ue.key));x&&x.signal.addEventListener("abort",gi);let{loaderResults:Ki,fetcherResults:Or}=await et(_,Q,je,lt,L);if(L.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",gi),lt.forEach(Ue=>q.delete(Ue.key));let kn=uh(Ki);if(kn)return await Ce(L,kn.result,!0,{replace:ue}),{shortCircuited:!0};if(kn=uh(Or),kn)return V.add(kn.key),await Ce(L,kn.result,!0,{replace:ue}),{shortCircuited:!0};let{loaderData:Ws,errors:vi}=Eb(_,Q,Ki,de,lt,Or,le);le.forEach((Ue,dt)=>{Ue.subscribe(yi=>{(yi||Ue.done)&&le.delete(dt)})}),d.v7_partialHydration&&ce&&_.errors&&(vi=bt({},_.errors,vi));let Jn=Vn(),pr=Qi(X),Wi=Jn||pr||lt.length>0;return bt({matches:Q,loaderData:Ws,errors:vi},Wi?{fetchers:new Map(_.fetchers)}:{})}function Tt(L){if(L&&!ir(L[1]))return{[L[0]]:L[1].data};if(_.actionData)return Object.keys(_.actionData).length===0?null:_.actionData}function Mt(L){return L.forEach(F=>{let Q=_.fetchers.get(F.key),te=Yl(void 0,Q?Q.data:void 0);_.fetchers.set(F.key,te)}),new Map(_.fetchers)}function ht(L,F,Q,te){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");jt(L);let ie=(te&&te.flushSync)===!0,he=o||s,ge=eg(_.location,_.matches,l,d.v7_prependBasename,Q,d.v7_relativeSplatPath,F,te==null?void 0:te.relative),ue=hs(he,ge,l),ce=Mn(ue,he,ge);if(ce.active&&ce.matches&&(ue=ce.matches),!ue){zt(L,F,Hn(404,{pathname:ge}),{flushSync:ie});return}let{path:oe,submission:de,error:_e}=pb(d.v7_normalizeFormMethod,!0,ge,te);if(_e){zt(L,F,_e,{flushSync:ie});return}let Ee=ic(ue,oe),Ft=(te&&te.preventScrollReset)===!0;if(de&&Ur(de.formMethod)){hn(L,F,oe,Ee,ue,ce.active,ie,Ft,de);return}K.set(L,{routeId:F,path:oe}),ot(L,F,oe,Ee,ue,ce.active,ie,Ft,de)}async function hn(L,F,Q,te,ie,he,ge,ue,ce){gt(),K.delete(L);function oe(vt){if(!vt.route.action&&!vt.route.lazy){let Qr=Hn(405,{method:ce.formMethod,pathname:Q,routeId:F});return zt(L,F,Qr,{flushSync:ge}),!0}return!1}if(!he&&oe(te))return;let de=_.fetchers.get(L);qe(L,L4(ce,de),{flushSync:ge});let _e=new AbortController,Ee=ro(t.history,Q,_e.signal,ce);if(he){let vt=await nn(ie,new URL(Ee.url).pathname,Ee.signal,L);if(vt.type==="aborted")return;if(vt.type==="error"){zt(L,F,vt.error,{flushSync:ge});return}else if(vt.matches){if(ie=vt.matches,te=ic(ie,Q),oe(te))return}else{zt(L,F,Hn(404,{pathname:Q}),{flushSync:ge});return}}q.set(L,_e);let Ft=B,je=(await Rt("action",_,Ee,[te],ie,L))[te.route.id];if(Ee.signal.aborted){q.get(L)===_e&&q.delete(L);return}if(d.v7_fetcherPersist&&Y.has(L)){if(ms(je)||ir(je)){qe(L,sa(void 0));return}}else{if(ms(je))if(q.delete(L),X>Ft){qe(L,sa(void 0));return}else return V.add(L),qe(L,Yl(ce)),Ce(Ee,je,!1,{fetcherSubmission:ce,preventScrollReset:ue});if(ir(je)){zt(L,F,je.error);return}}if(wa(je))throw Hn(400,{type:"defer-action"});let lt=_.navigation.location||_.location,gi=ro(t.history,lt,_e.signal),Ki=o||s,Or=_.navigation.state!=="idle"?hs(Ki,_.navigation.location,l):_.matches;Pe(Or,"Didn't find any matches after fetcher action");let kn=++B;re.set(L,kn);let Ws=Yl(ce,je.data);_.fetchers.set(L,Ws);let[vi,Jn]=vb(t.history,_,Or,ce,lt,!1,d.v7_skipActionErrorRevalidation,z,k,M,Y,K,V,Ki,l,[te.route.id,je]);Jn.filter(vt=>vt.key!==L).forEach(vt=>{let Qr=vt.key,Il=_.fetchers.get(Qr),Uu=Yl(void 0,Il?Il.data:void 0);_.fetchers.set(Qr,Uu),jt(Qr),vt.controller&&q.set(Qr,vt.controller)}),Ae({fetchers:new Map(_.fetchers)});let pr=()=>Jn.forEach(vt=>jt(vt.key));_e.signal.addEventListener("abort",pr);let{loaderResults:Wi,fetcherResults:Ue}=await et(_,Or,vi,Jn,gi);if(_e.signal.aborted)return;_e.signal.removeEventListener("abort",pr),re.delete(L),q.delete(L),Jn.forEach(vt=>q.delete(vt.key));let dt=uh(Wi);if(dt)return Ce(gi,dt.result,!1,{preventScrollReset:ue});if(dt=uh(Ue),dt)return V.add(dt.key),Ce(gi,dt.result,!1,{preventScrollReset:ue});let{loaderData:yi,errors:Zi}=Eb(_,Or,Wi,void 0,Jn,Ue,le);if(_.fetchers.has(L)){let vt=sa(je.data);_.fetchers.set(L,vt)}Qi(kn),_.navigation.state==="loading"&&kn>X?(Pe(g,"Expected pending action"),x&&x.abort(),en(_.navigation.location,{matches:Or,loaderData:yi,errors:Zi,fetchers:new Map(_.fetchers)})):(Ae({errors:Zi,loaderData:xb(_.loaderData,yi,Or,Zi),fetchers:new Map(_.fetchers)}),z=!1)}async function ot(L,F,Q,te,ie,he,ge,ue,ce){let oe=_.fetchers.get(L);qe(L,Yl(ce,oe?oe.data:void 0),{flushSync:ge});let de=new AbortController,_e=ro(t.history,Q,de.signal);if(he){let je=await nn(ie,new URL(_e.url).pathname,_e.signal,L);if(je.type==="aborted")return;if(je.type==="error"){zt(L,F,je.error,{flushSync:ge});return}else if(je.matches)ie=je.matches,te=ic(ie,Q);else{zt(L,F,Hn(404,{pathname:Q}),{flushSync:ge});return}}q.set(L,de);let Ee=B,Ye=(await Rt("loader",_,_e,[te],ie,L))[te.route.id];if(wa(Ye)&&(Ye=await Xv(Ye,_e.signal,!0)||Ye),q.get(L)===de&&q.delete(L),!_e.signal.aborted){if(Y.has(L)){qe(L,sa(void 0));return}if(ms(Ye))if(X>Ee){qe(L,sa(void 0));return}else{V.add(L),await Ce(_e,Ye,!1,{preventScrollReset:ue});return}if(ir(Ye)){zt(L,F,Ye.error);return}Pe(!wa(Ye),"Unhandled fetcher deferred data"),qe(L,sa(Ye.data))}}async function Ce(L,F,Q,te){let{submission:ie,fetcherSubmission:he,preventScrollReset:ge,replace:ue}=te===void 0?{}:te;F.response.headers.has("X-Remix-Revalidate")&&(z=!0);let ce=F.response.headers.get("Location");Pe(ce,"Expected a Location header on the redirect Response"),ce=bb(ce,new URL(L.url),l);let oe=$c(_.location,ce,{_isRedirect:!0});if(n){let je=!1;if(F.response.headers.has("X-Remix-Reload-Document"))je=!0;else if(Yv.test(ce)){const lt=t.history.createURL(ce);je=lt.origin!==e.location.origin||_u(lt.pathname,l)==null}if(je){ue?e.location.replace(ce):e.location.assign(ce);return}}x=null;let de=ue===!0||F.response.headers.has("X-Remix-Replace")?qt.Replace:qt.Push,{formMethod:_e,formAction:Ee,formEncType:Ft}=_.navigation;!ie&&!he&&_e&&Ee&&Ft&&(ie=Rb(_.navigation));let Ye=ie||he;if(y4.has(F.response.status)&&Ye&&Ur(Ye.formMethod))await it(de,oe,{submission:bt({},Ye,{formAction:ce}),preventScrollReset:ge||y,enableViewTransition:Q?C:void 0});else{let je=Pm(oe,ie);await it(de,oe,{overrideNavigation:je,fetcherSubmission:he,preventScrollReset:ge||y,enableViewTransition:Q?C:void 0})}}async function Rt(L,F,Q,te,ie,he){let ge,ue={};try{ge=await S4(h,L,F,Q,te,ie,he,a,i)}catch(ce){return te.forEach(oe=>{ue[oe.route.id]={type:Qe.error,error:ce}}),ue}for(let[ce,oe]of Object.entries(ge))if(O4(oe)){let de=oe.result;ue[ce]={type:Qe.redirect,response:N4(de,Q,ce,ie,l,d.v7_relativeSplatPath)}}else ue[ce]=await C4(oe);return ue}async function et(L,F,Q,te,ie){let he=L.matches,ge=Rt("loader",L,ie,Q,F,null),ue=Promise.all(te.map(async de=>{if(de.matches&&de.match&&de.controller){let Ee=(await Rt("loader",L,ro(t.history,de.path,de.controller.signal),[de.match],de.matches,de.key))[de.match.route.id];return{[de.key]:Ee}}else return Promise.resolve({[de.key]:{type:Qe.error,error:Hn(404,{pathname:de.path})}})})),ce=await ge,oe=(await ue).reduce((de,_e)=>Object.assign(de,_e),{});return await Promise.all([j4(F,ce,ie.signal,he,L.loaderData),P4(F,oe,te)]),{loaderResults:ce,fetcherResults:oe}}function gt(){z=!0,k.push(...xn()),K.forEach((L,F)=>{q.has(F)&&M.add(F),jt(F)})}function qe(L,F,Q){Q===void 0&&(Q={}),_.fetchers.set(L,F),Ae({fetchers:new Map(_.fetchers)},{flushSync:(Q&&Q.flushSync)===!0})}function zt(L,F,Q,te){te===void 0&&(te={});let ie=ds(_.matches,F);tn(L),Ae({errors:{[ie.route.id]:Q},fetchers:new Map(_.fetchers)},{flushSync:(te&&te.flushSync)===!0})}function kt(L){return $.set(L,($.get(L)||0)+1),Y.has(L)&&Y.delete(L),_.fetchers.get(L)||_4}function tn(L){let F=_.fetchers.get(L);q.has(L)&&!(F&&F.state==="loading"&&re.has(L))&&jt(L),K.delete(L),re.delete(L),V.delete(L),d.v7_fetcherPersist&&Y.delete(L),M.delete(L),_.fetchers.delete(L)}function Bt(L){let F=($.get(L)||0)-1;F<=0?($.delete(L),Y.add(L),d.v7_fetcherPersist||tn(L)):$.set(L,F),Ae({fetchers:new Map(_.fetchers)})}function jt(L){let F=q.get(L);F&&(F.abort(),q.delete(L))}function En(L){for(let F of L){let Q=kt(F),te=sa(Q.data);_.fetchers.set(F,te)}}function Vn(){let L=[],F=!1;for(let Q of V){let te=_.fetchers.get(Q);Pe(te,"Expected fetcher: "+Q),te.state==="loading"&&(V.delete(Q),L.push(Q),F=!0)}return En(L),F}function Qi(L){let F=[];for(let[Q,te]of re)if(te<L){let ie=_.fetchers.get(Q);Pe(ie,"Expected fetcher: "+Q),ie.state==="loading"&&(jt(Q),re.delete(Q),F.push(Q))}return En(F),F.length>0}function Nl(L,F){let Q=_.blockers.get(L)||$l;return xe.get(L)!==F&&xe.set(L,F),Q}function Gr(L){_.blockers.delete(L),xe.delete(L)}function $r(L,F){let Q=_.blockers.get(L)||$l;Pe(Q.state==="unblocked"&&F.state==="blocked"||Q.state==="blocked"&&F.state==="blocked"||Q.state==="blocked"&&F.state==="proceeding"||Q.state==="blocked"&&F.state==="unblocked"||Q.state==="proceeding"&&F.state==="unblocked","Invalid blocker state transition: "+Q.state+" -> "+F.state);let te=new Map(_.blockers);te.set(L,F),Ae({blockers:te})}function Ir(L){let{currentLocation:F,nextLocation:Q,historyAction:te}=L;if(xe.size===0)return;xe.size>1&&il(!1,"A router only supports one blocker at a time");let ie=Array.from(xe.entries()),[he,ge]=ie[ie.length-1],ue=_.blockers.get(he);if(!(ue&&ue.state==="proceeding")&&ge({currentLocation:F,nextLocation:Q,historyAction:te}))return he}function Dr(L){let F=Hn(404,{pathname:L}),Q=o||s,{matches:te,route:ie}=Ab(Q);return xn(),{notFoundMatches:te,route:ie,error:F}}function xn(L){let F=[];return le.forEach((Q,te)=>{(!L||L(te))&&(Q.cancel(),F.push(te),le.delete(te))}),F}function zn(L,F,Q){if(b=L,D=F,A=Q||null,!w&&_.navigation===jm){w=!0;let te=Xr(_.location,_.matches);te!=null&&Ae({restoreScrollPosition:te})}return()=>{b=null,D=null,A=null}}function dn(L,F){return A&&A(L,F.map(te=>KI(te,_.loaderData)))||L.key}function Yr(L,F){if(b&&D){let Q=dn(L,F);b[Q]=D()}}function Xr(L,F){if(b){let Q=dn(L,F),te=b[Q];if(typeof te=="number")return te}return null}function Mn(L,F,Q){if(u)if(L){if(Object.keys(L[0].params).length>0)return{active:!0,matches:kh(F,Q,l,!0)}}else return{active:!0,matches:kh(F,Q,l,!0)||[]};return{active:!1,matches:null}}async function nn(L,F,Q,te){if(!u)return{type:"success",matches:L};let ie=L;for(;;){let he=o==null,ge=o||s,ue=a;try{await u({signal:Q,path:F,matches:ie,fetcherKey:te,patch:(de,_e)=>{Q.aborted||_b(de,_e,ge,ue,i)}})}catch(de){return{type:"error",error:de,partialMatches:ie}}finally{he&&!Q.aborted&&(s=[...s])}if(Q.aborted)return{type:"aborted"};let ce=hs(ge,F,l);if(ce)return{type:"success",matches:ce};let oe=kh(ge,F,l,!0);if(!oe||ie.length===oe.length&&ie.every((de,_e)=>de.route.id===oe[_e].route.id))return{type:"success",matches:null};ie=oe}}function Pu(L){a={},o=Ed(L,i,void 0,a)}function fn(L,F){let Q=o==null;_b(L,F,o||s,a,i),Q&&(s=[...s],Ae({}))}return R={get basename(){return l},get future(){return d},get state(){return _},get routes(){return s},get window(){return e},initialize:De,subscribe:We,enableScrollRestoration:zn,navigate:un,fetch:ht,revalidate:Ze,createHref:L=>t.history.createHref(L),encodeLocation:L=>t.history.encodeLocation(L),getFetcher:kt,deleteFetcher:Bt,dispose:ze,getBlocker:Nl,deleteBlocker:Gr,patchRoutes:fn,_internalFetchControllers:q,_internalActiveDeferreds:le,_internalSetRoutes:Pu},R}function E4(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function eg(t,e,n,r,i,a,s,o){let l,h;if(s){l=[];for(let d of e)if(l.push(d),d.route.id===s){h=d;break}}else l=e,h=e[e.length-1];let u=LT(i||".",UT(l,a),_u(t.pathname,n)||t.pathname,o==="path");if(i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&h){let d=Qv(u.search);if(h.route.index&&!d)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&d){let f=new URLSearchParams(u.search),p=f.getAll("index");f.delete("index"),p.filter(A=>A).forEach(A=>f.append("index",A));let b=f.toString();u.search=b?"?"+b:""}}return r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Ma([n,u.pathname])),yu(u)}function pb(t,e,n,r){if(!r||!E4(r))return{path:n};if(r.formMethod&&!k4(r.formMethod))return{path:n,error:Hn(405,{method:r.formMethod})};let i=()=>({path:n,error:Hn(400,{type:"invalid-body"})}),a=r.formMethod||"get",s=t?a.toUpperCase():a.toLowerCase(),o=HT(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Ur(s))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((p,b)=>{let[A,D]=b;return""+p+A+"="+D+`
`},""):String(r.body);return{path:n,submission:{formMethod:s,formAction:o,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!Ur(s))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:o,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}Pe(typeof FormData=="function","FormData is not available in this environment");let l,h;if(r.formData)l=ng(r.formData),h=r.formData;else if(r.body instanceof FormData)l=ng(r.body),h=r.body;else if(r.body instanceof URLSearchParams)l=r.body,h=wb(l);else if(r.body==null)l=new URLSearchParams,h=new FormData;else try{l=new URLSearchParams(r.body),h=wb(l)}catch{return i()}let u={formMethod:s,formAction:o,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:h,json:void 0,text:void 0};if(Ur(u.formMethod))return{path:n,submission:u};let d=Za(n);return e&&d.search&&Qv(d.search)&&l.append("index",""),d.search="?"+l,{path:yu(d),submission:u}}function gb(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function vb(t,e,n,r,i,a,s,o,l,h,u,d,f,p,b,A){let D=A?ir(A[1])?A[1].error:A[1].data:void 0,w=t.createURL(e.location),T=t.createURL(i),N=n;a&&e.errors?N=gb(n,Object.keys(e.errors)[0],!0):A&&ir(A[1])&&(N=gb(n,A[0]));let O=A?A[1].statusCode:void 0,P=s&&O&&O>=400,R=N.filter((g,y)=>{let{route:x}=g;if(x.lazy)return!0;if(x.loader==null)return!1;if(a)return tg(x,e.loaderData,e.errors);if(x4(e.loaderData,e.matches[y],g)||l.some(S=>S===g.route.id))return!0;let C=e.matches[y],I=g;return yb(g,bt({currentUrl:w,currentParams:C.params,nextUrl:T,nextParams:I.params},r,{actionResult:D,actionStatus:O,defaultShouldRevalidate:P?!1:o||w.pathname+w.search===T.pathname+T.search||w.search!==T.search||BT(C,I)}))}),_=[];return d.forEach((g,y)=>{if(a||!n.some(U=>U.route.id===g.routeId)||u.has(y))return;let x=hs(p,g.path,b);if(!x){_.push({key:y,routeId:g.routeId,path:g.path,matches:null,match:null,controller:null});return}let C=e.fetchers.get(y),I=ic(x,g.path),S=!1;f.has(y)?S=!1:h.has(y)?(h.delete(y),S=!0):C&&C.state!=="idle"&&C.data===void 0?S=o:S=yb(I,bt({currentUrl:w,currentParams:e.matches[e.matches.length-1].params,nextUrl:T,nextParams:n[n.length-1].params},r,{actionResult:D,actionStatus:O,defaultShouldRevalidate:P?!1:o})),S&&_.push({key:y,routeId:g.routeId,path:g.path,matches:x,match:I,controller:new AbortController})}),[R,_]}function tg(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function x4(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function BT(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function yb(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function _b(t,e,n,r,i){var a;let s;if(t){let h=r[t];Pe(h,"No route found to patch children into: routeId = "+t),h.children||(h.children=[]),s=h.children}else s=n;let o=e.filter(h=>!s.some(u=>FT(h,u))),l=Ed(o,i,[t||"_","patch",String(((a=s)==null?void 0:a.length)||"0")],r);s.push(...l)}function FT(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(a=>FT(n,a))}):!1}async function T4(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Pe(i,"No route found in manifest");let a={};for(let s in r){let l=i[s]!==void 0&&s!=="hasErrorBoundary";il(!l,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!l&&!XI.has(s)&&(a[s]=r[s])}Object.assign(i,a),Object.assign(i,bt({},e(i),{lazy:void 0}))}async function A4(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,a,s)=>Object.assign(i,{[n[s].route.id]:a}),{})}async function S4(t,e,n,r,i,a,s,o,l,h){let u=a.map(p=>p.route.lazy?T4(p.route,l,o):void 0),d=a.map((p,b)=>{let A=u[b],D=i.some(T=>T.route.id===p.route.id);return bt({},p,{shouldLoad:D,resolve:async T=>(T&&r.method==="GET"&&(p.route.lazy||p.route.loader)&&(D=!0),D?R4(e,r,p,A,T,h):Promise.resolve({type:Qe.data,result:void 0}))})}),f=await t({matches:d,request:r,params:a[0].params,fetcherKey:s,context:h});try{await Promise.all(u)}catch{}return f}async function R4(t,e,n,r,i,a){let s,o,l=h=>{let u,d=new Promise((b,A)=>u=A);o=()=>u(),e.signal.addEventListener("abort",o);let f=b=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):h({request:e,params:n.params,context:a},...b!==void 0?[b]:[]),p=(async()=>{try{return{type:"data",result:await(i?i(A=>f(A)):f())}}catch(b){return{type:"error",result:b}}})();return Promise.race([p,d])};try{let h=n.route[t];if(r)if(h){let u,[d]=await Promise.all([l(h).catch(f=>{u=f}),r]);if(u!==void 0)throw u;s=d}else if(await r,h=n.route[t],h)s=await l(h);else if(t==="action"){let u=new URL(e.url),d=u.pathname+u.search;throw Hn(405,{method:e.method,pathname:d,routeId:n.route.id})}else return{type:Qe.data,result:void 0};else if(h)s=await l(h);else{let u=new URL(e.url),d=u.pathname+u.search;throw Hn(404,{pathname:d})}Pe(s.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:Qe.error,result:h}}finally{o&&e.signal.removeEventListener("abort",o)}return s}async function C4(t){let{result:e,type:n}=t;if(qT(e)){let d;try{let f=e.headers.get("Content-Type");f&&/\bapplication\/json\b/.test(f)?e.body==null?d=null:d=await e.json():d=await e.text()}catch(f){return{type:Qe.error,error:f}}return n===Qe.error?{type:Qe.error,error:new xd(e.status,e.statusText,d),statusCode:e.status,headers:e.headers}:{type:Qe.data,data:d,statusCode:e.status,headers:e.headers}}if(n===Qe.error){if(Sb(e)){var r,i;if(e.data instanceof Error){var a,s;return{type:Qe.error,error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:Qe.error,error:new xd(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:al(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:Qe.error,error:e,statusCode:al(e)?e.status:void 0}}if(M4(e)){var o,l;return{type:Qe.deferred,deferredData:e,statusCode:(o=e.init)==null?void 0:o.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(Sb(e)){var h,u;return{type:Qe.data,data:e.data,statusCode:(h=e.init)==null?void 0:h.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}}return{type:Qe.data,data:e}}function N4(t,e,n,r,i,a){let s=t.headers.get("Location");if(Pe(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!Yv.test(s)){let o=r.slice(0,r.findIndex(l=>l.route.id===n)+1);s=eg(new URL(e.url),o,i,!0,s,a),t.headers.set("Location",s)}return t}function bb(t,e,n){if(Yv.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),a=_u(i.pathname,n)!=null;if(i.origin===e.origin&&a)return i.pathname+i.search+i.hash}return t}function ro(t,e,n,r){let i=t.createURL(HT(e)).toString(),a={signal:n};if(r&&Ur(r.formMethod)){let{formMethod:s,formEncType:o}=r;a.method=s.toUpperCase(),o==="application/json"?(a.headers=new Headers({"Content-Type":o}),a.body=JSON.stringify(r.json)):o==="text/plain"?a.body=r.text:o==="application/x-www-form-urlencoded"&&r.formData?a.body=ng(r.formData):a.body=r.formData}return new Request(i,a)}function ng(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function wb(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function I4(t,e,n,r,i){let a={},s=null,o,l=!1,h={},u=n&&ir(n[1])?n[1].error:void 0;return t.forEach(d=>{if(!(d.route.id in e))return;let f=d.route.id,p=e[f];if(Pe(!ms(p),"Cannot handle redirect results in processLoaderData"),ir(p)){let b=p.error;u!==void 0&&(b=u,u=void 0),s=s||{};{let A=ds(t,f);s[A.route.id]==null&&(s[A.route.id]=b)}a[f]=void 0,l||(l=!0,o=al(p.error)?p.error.status:500),p.headers&&(h[f]=p.headers)}else wa(p)?(r.set(f,p.deferredData),a[f]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!l&&(o=p.statusCode),p.headers&&(h[f]=p.headers)):(a[f]=p.data,p.statusCode&&p.statusCode!==200&&!l&&(o=p.statusCode),p.headers&&(h[f]=p.headers))}),u!==void 0&&n&&(s={[n[0]]:u},a[n[0]]=void 0),{loaderData:a,errors:s,statusCode:o||200,loaderHeaders:h}}function Eb(t,e,n,r,i,a,s){let{loaderData:o,errors:l}=I4(e,n,r,s);return i.forEach(h=>{let{key:u,match:d,controller:f}=h,p=a[u];if(Pe(p,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if(ir(p)){let b=ds(t.matches,d==null?void 0:d.route.id);l&&l[b.route.id]||(l=bt({},l,{[b.route.id]:p.error})),t.fetchers.delete(u)}else if(ms(p))Pe(!1,"Unhandled fetcher revalidation redirect");else if(wa(p))Pe(!1,"Unhandled fetcher deferred data");else{let b=sa(p.data);t.fetchers.set(u,b)}}),{loaderData:o,errors:l}}function xb(t,e,n,r){let i=bt({},e);for(let a of n){let s=a.route.id;if(e.hasOwnProperty(s)?e[s]!==void 0&&(i[s]=e[s]):t[s]!==void 0&&a.route.loader&&(i[s]=t[s]),r&&r.hasOwnProperty(s))break}return i}function Tb(t){return t?ir(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function ds(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Ab(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Hn(t,e){let{pathname:n,routeId:r,method:i,type:a,message:s}=e===void 0?{}:e,o="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":a==="defer-action"?l="defer() is not supported in actions":a==="invalid-body"&&(l="Unable to encode submission body")):t===403?(o="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",l='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new xd(t||500,o,new Error(l),!0)}function uh(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(ms(i))return{key:r,result:i}}}function HT(t){let e=typeof t=="string"?Za(t):t;return yu(bt({},e,{hash:""}))}function D4(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function O4(t){return qT(t.result)&&v4.has(t.result.status)}function wa(t){return t.type===Qe.deferred}function ir(t){return t.type===Qe.error}function ms(t){return(t&&t.type)===Qe.redirect}function Sb(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function M4(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function qT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function k4(t){return g4.has(t.toLowerCase())}function Ur(t){return m4.has(t.toLowerCase())}async function j4(t,e,n,r,i){let a=Object.entries(e);for(let s=0;s<a.length;s++){let[o,l]=a[s],h=t.find(f=>(f==null?void 0:f.route.id)===o);if(!h)continue;let u=r.find(f=>f.route.id===h.route.id),d=u!=null&&!BT(u,h)&&(i&&i[h.route.id])!==void 0;wa(l)&&d&&await Xv(l,n,!1).then(f=>{f&&(e[o]=f)})}}async function P4(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:a,controller:s}=n[r],o=e[i];t.find(h=>(h==null?void 0:h.route.id)===a)&&wa(o)&&(Pe(s,"Expected an AbortController for revalidating fetcher deferred result"),await Xv(o,s.signal,!0).then(h=>{h&&(e[i]=h)}))}}async function Xv(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Qe.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Qe.error,error:i}}return{type:Qe.data,data:t.deferredData.data}}}function Qv(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function ic(t,e){let n=typeof e=="string"?Za(e).search:e.search;if(t[t.length-1].route.index&&Qv(n||""))return t[t.length-1];let r=PT(t);return r[r.length-1]}function Rb(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:a,json:s}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(a!=null)return{formMethod:e,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function Pm(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function U4(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Yl(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function L4(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function sa(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function V4(t,e){try{let n=t.sessionStorage.getItem(zT);if(n){let r=JSON.parse(n);for(let[i,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(i,new Set(a||[]))}}catch{}}function z4(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(zT,JSON.stringify(n))}catch(r){il(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Td(){return Td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Td.apply(this,arguments)}const yf=H.createContext(null),GT=H.createContext(null),_f=H.createContext(null),Kv=H.createContext(null),Ja=H.createContext({outlet:null,matches:[],isDataRoute:!1}),$T=H.createContext(null);function bf(){return H.useContext(Kv)!=null}function YT(){return bf()||Pe(!1),H.useContext(Kv).location}function XT(t){H.useContext(_f).static||H.useLayoutEffect(t)}function El(){let{isDataRoute:t}=H.useContext(Ja);return t?J4():B4()}function B4(){bf()||Pe(!1);let t=H.useContext(yf),{basename:e,future:n,navigator:r}=H.useContext(_f),{matches:i}=H.useContext(Ja),{pathname:a}=YT(),s=JSON.stringify(UT(i,n.v7_relativeSplatPath)),o=H.useRef(!1);return XT(()=>{o.current=!0}),H.useCallback(function(h,u){if(u===void 0&&(u={}),!o.current)return;if(typeof h=="number"){r.go(h);return}let d=LT(h,JSON.parse(s),a,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ma([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,s,a,t])}const F4=H.createContext(null);function H4(t){let e=H.useContext(Ja).outlet;return e&&H.createElement(F4.Provider,{value:t},e)}function QT(){let{matches:t}=H.useContext(Ja),e=t[t.length-1];return e?e.params:{}}function q4(t,e,n,r){bf()||Pe(!1);let{navigator:i}=H.useContext(_f),{matches:a}=H.useContext(Ja),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let h=YT(),u;u=h;let d=u.pathname||"/",f=d;if(l!=="/"){let A=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(A.length).join("/")}let p=hs(t,{pathname:f});return Q4(p&&p.map(A=>Object.assign({},A,{params:Object.assign({},o,A.params),pathname:Ma([l,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?l:Ma([l,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),a,n,r)}function G4(){let t=JT(),e=al(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),n?H.createElement("pre",{style:i},n):null,null)}const $4=H.createElement(G4,null);class Y4 extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?H.createElement(Ja.Provider,{value:this.props.routeContext},H.createElement($T.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function X4(t){let{routeContext:e,match:n,children:r}=t,i=H.useContext(yf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),H.createElement(Ja.Provider,{value:e},r)}function Q4(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let u=s.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);u>=0||Pe(!1),s=s.slice(0,Math.min(s.length,u+1))}let l=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(h=u),d.route.id){let{loaderData:f,errors:p}=n,b=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||b){l=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((u,d,f)=>{let p,b=!1,A=null,D=null;n&&(p=o&&d.route.id?o[d.route.id]:void 0,A=d.route.errorElement||$4,l&&(h<0&&f===0?(eD("route-fallback"),b=!0,D=null):h===f&&(b=!0,D=d.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,f+1)),T=()=>{let N;return p?N=A:b?N=D:d.route.Component?N=H.createElement(d.route.Component,null):d.route.element?N=d.route.element:N=u,H.createElement(X4,{match:d,routeContext:{outlet:u,matches:w,isDataRoute:n!=null},children:N})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?H.createElement(Y4,{location:n.location,revalidation:n.revalidation,component:A,error:p,children:T(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):T()},null)}var KT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(KT||{}),WT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(WT||{});function K4(t){let e=H.useContext(yf);return e||Pe(!1),e}function W4(t){let e=H.useContext(GT);return e||Pe(!1),e}function Z4(t){let e=H.useContext(Ja);return e||Pe(!1),e}function ZT(t){let e=Z4(),n=e.matches[e.matches.length-1];return n.route.id||Pe(!1),n.route.id}function JT(){var t;let e=H.useContext($T),n=W4(WT.UseRouteError),r=ZT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function J4(){let{router:t}=K4(KT.UseNavigateStable),e=ZT(),n=H.useRef(!1);return XT(()=>{n.current=!0}),H.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Td({fromRouteId:e},a)))},[t,e])}const Cb={};function eD(t,e,n){Cb[t]||(Cb[t]=!0)}function tD(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function e2(t){return H4(t.context)}function nD(t){let{basename:e="/",children:n=null,location:r,navigationType:i=qt.Pop,navigator:a,static:s=!1,future:o}=t;bf()&&Pe(!1);let l=e.replace(/^\/*/,"/"),h=H.useMemo(()=>({basename:l,navigator:a,static:s,future:Td({v7_relativeSplatPath:!1},o)}),[l,o,a,s]);typeof r=="string"&&(r=Za(r));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:b="default"}=r,A=H.useMemo(()=>{let D=_u(u,l);return D==null?null:{location:{pathname:D,search:d,hash:f,state:p,key:b},navigationType:i}},[l,u,d,f,p,b,i]);return A==null?null:H.createElement(_f.Provider,{value:h},H.createElement(Kv.Provider,{children:n,value:A}))}new Promise(()=>{});function rD(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:H.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:H.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:H.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ad(){return Ad=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ad.apply(this,arguments)}const iD="6";try{window.__reactRouterVersion=iD}catch{}function aD(t,e){return w4({basename:void 0,future:Ad({},void 0,{v7_prependBasename:!0}),history:GI({window:void 0}),hydrationData:sD(),routes:t,mapRouteProperties:rD,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function sD(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Ad({},e,{errors:oD(e.errors)})),e}function oD(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new xd(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let s=new a(i.message);s.stack="",n[r]=s}catch{}}if(n[r]==null){let a=new Error(i.message);a.stack="",n[r]=a}}else n[r]=i;return n}const lD=H.createContext({isTransitioning:!1}),cD=H.createContext(new Map),uD="startTransition",Nb=cC[uD],hD="flushSync",Ib=pC[hD];function dD(t){Nb?Nb(t):t()}function Xl(t){Ib?Ib(t):t()}let fD=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function mD(t){let{fallbackElement:e,router:n,future:r}=t,[i,a]=H.useState(n.state),[s,o]=H.useState(),[l,h]=H.useState({isTransitioning:!1}),[u,d]=H.useState(),[f,p]=H.useState(),[b,A]=H.useState(),D=H.useRef(new Map),{v7_startTransition:w}=r||{},T=H.useCallback(g=>{w?dD(g):g()},[w]),N=H.useCallback((g,y)=>{let{deletedFetchers:x,flushSync:C,viewTransitionOpts:I}=y;g.fetchers.forEach((U,z)=>{U.data!==void 0&&D.current.set(z,U.data)}),x.forEach(U=>D.current.delete(U));let S=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!I||S){C?Xl(()=>a(g)):T(()=>a(g));return}if(C){Xl(()=>{f&&(u&&u.resolve(),f.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:I.currentLocation,nextLocation:I.nextLocation})});let U=n.window.document.startViewTransition(()=>{Xl(()=>a(g))});U.finished.finally(()=>{Xl(()=>{d(void 0),p(void 0),o(void 0),h({isTransitioning:!1})})}),Xl(()=>p(U));return}f?(u&&u.resolve(),f.skipTransition(),A({state:g,currentLocation:I.currentLocation,nextLocation:I.nextLocation})):(o(g),h({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}))},[n.window,f,u,D,T]);H.useLayoutEffect(()=>n.subscribe(N),[n,N]),H.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new fD)},[l]),H.useEffect(()=>{if(u&&s&&n.window){let g=s,y=u.promise,x=n.window.document.startViewTransition(async()=>{T(()=>a(g)),await y});x.finished.finally(()=>{d(void 0),p(void 0),o(void 0),h({isTransitioning:!1})}),p(x)}},[T,s,u,n.window]),H.useEffect(()=>{u&&s&&i.location.key===s.location.key&&u.resolve()},[u,f,i.location,s]),H.useEffect(()=>{!l.isTransitioning&&b&&(o(b.state),h({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}),A(void 0))},[l.isTransitioning,b]),H.useEffect(()=>{},[]);let O=H.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:g=>n.navigate(g),push:(g,y,x)=>n.navigate(g,{state:y,preventScrollReset:x==null?void 0:x.preventScrollReset}),replace:(g,y,x)=>n.navigate(g,{replace:!0,state:y,preventScrollReset:x==null?void 0:x.preventScrollReset})}),[n]),P=n.basename||"/",R=H.useMemo(()=>({router:n,navigator:O,static:!1,basename:P}),[n,O,P]),_=H.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return H.useEffect(()=>tD(r,n.future),[r,n.future]),H.createElement(H.Fragment,null,H.createElement(yf.Provider,{value:R},H.createElement(GT.Provider,{value:i},H.createElement(cD.Provider,{value:D.current},H.createElement(lD.Provider,{value:l},H.createElement(nD,{basename:P,location:i.location,navigationType:i.historyAction,navigator:O,future:_},i.initialized||n.future.v7_partialHydration?H.createElement(pD,{routes:n.routes,future:n.future,state:i}):e))))),null)}const pD=H.memo(gD);function gD(t){let{routes:e,future:n,state:r}=t;return q4(e,void 0,r,n)}var Db;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Db||(Db={}));var Ob;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ob||(Ob={}));const vD=()=>{};var Mb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],l=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},n2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,l=i+2<t.length,h=l?t[i+2]:0,u=a>>2,d=(a&3)<<4|o>>4;let f=(o&15)<<2|h>>6,p=h&63;l||(p=64,s||(f=64)),r.push(n[u],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(t2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||h==null||d==null)throw new _D;const f=a<<2|o>>4;if(r.push(f),h!==64){const p=o<<4&240|h>>2;if(r.push(p),d!==64){const b=h<<6&192|d;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _D extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bD=function(t){const e=t2(t);return n2.encodeByteArray(e,!0)},Sd=function(t){return bD(t).replace(/\./g,"")},r2=function(t){try{return n2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=()=>wD().__FIREBASE_DEFAULTS__,xD=()=>{if(typeof process>"u"||typeof Mb>"u")return;const t=Mb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&r2(t[1]);return e&&JSON.parse(e)},wf=()=>{try{return vD()||ED()||xD()||TD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},i2=t=>{var e,n;return(n=(e=wf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Wv=t=>{const e=i2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},a2=()=>{var t;return(t=wf())===null||t===void 0?void 0:t.config},s2=t=>{var e;return(e=wf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ef(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Sd(JSON.stringify(n)),Sd(JSON.stringify(s)),""].join(".")}const Tc={};function SD(){const t={prod:[],emulator:[]};for(const e of Object.keys(Tc))Tc[e]?t.emulator.push(e):t.prod.push(e);return t}function RD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let kb=!1;function xf(t,e){if(typeof window>"u"||typeof document>"u"||!Yi(window.location.host)||Tc[t]===e||Tc[t]||kb)return;Tc[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",a=SD().prod.length>0;function s(){const f=document.getElementById(r);f&&f.remove()}function o(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function h(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{kb=!0,s()},f}function u(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=RD(r),p=n("text"),b=document.getElementById(p)||document.createElement("span"),A=n("learnmore"),D=document.getElementById(A)||document.createElement("a"),w=n("preprendIcon"),T=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const N=f.element;o(N),u(D,A);const O=h();l(T,w),N.append(T,b,D,O),document.body.appendChild(N)}a?(b.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dn())}function ND(){var t;const e=(t=wf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ID(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function OD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MD(){const t=Dn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kD(){return!ND()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jD(){try{return typeof indexedDB=="object"}catch{return!1}}function PD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD="FirebaseError";class qr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=UD,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bu.prototype.create)}}class bu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?LD(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new qr(i,o,r)}}function LD(t,e){return t.replace(VD,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const VD=/\{\$([^}]+)}/g;function zD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ms(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(jb(a)&&jb(s)){if(!Ms(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function jb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function BD(t,e){const n=new FD(t,e);return n.subscribe.bind(n)}class FD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HD(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Um),i.error===void 0&&(i.error=Um),i.complete===void 0&&(i.complete=Um);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Um(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t){return t&&t._delegate?t._delegate:t}class Bi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new AD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($D(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GD(t){return t===us?void 0:t}function $D(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Me||(Me={}));const XD={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},QD=Me.INFO,KD={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},WD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=KD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zv{constructor(e){this.name=e,this._logLevel=QD,this._logHandler=WD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const ZD=(t,e)=>e.some(n=>t instanceof n);let Pb,Ub;function JD(){return Pb||(Pb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e3(){return Ub||(Ub=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l2=new WeakMap,rg=new WeakMap,c2=new WeakMap,Lm=new WeakMap,Jv=new WeakMap;function t3(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(ka(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&l2.set(n,t)}).catch(()=>{}),Jv.set(e,t),e}function n3(t){if(rg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});rg.set(t,e)}let ig={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||c2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ka(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function r3(t){ig=t(ig)}function i3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vm(this),e,...n);return c2.set(r,e.sort?e.sort():[e]),ka(r)}:e3().includes(t)?function(...e){return t.apply(Vm(this),e),ka(l2.get(this))}:function(...e){return ka(t.apply(Vm(this),e))}}function a3(t){return typeof t=="function"?i3(t):(t instanceof IDBTransaction&&n3(t),ZD(t,JD())?new Proxy(t,ig):t)}function ka(t){if(t instanceof IDBRequest)return t3(t);if(Lm.has(t))return Lm.get(t);const e=a3(t);return e!==t&&(Lm.set(t,e),Jv.set(e,t)),e}const Vm=t=>Jv.get(t);function s3(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=ka(s);return r&&s.addEventListener("upgradeneeded",l=>{r(ka(s.result),l.oldVersion,l.newVersion,ka(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),o}const o3=["get","getKey","getAll","getAllKeys","count"],l3=["put","add","delete","clear"],zm=new Map;function Lb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zm.get(e))return zm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=l3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||o3.includes(n)))return;const a=async function(s,...o){const l=this.transaction(s,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(o.shift())),(await Promise.all([h[n](...o),i&&l.done]))[0]};return zm.set(e,a),a}r3(t=>({...t,get:(e,n,r)=>Lb(e,n)||t.get(e,n,r),has:(e,n)=>!!Lb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(u3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function u3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ag="@firebase/app",Vb="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new Zv("@firebase/app"),h3="@firebase/app-compat",d3="@firebase/analytics-compat",f3="@firebase/analytics",m3="@firebase/app-check-compat",p3="@firebase/app-check",g3="@firebase/auth",v3="@firebase/auth-compat",y3="@firebase/database",_3="@firebase/data-connect",b3="@firebase/database-compat",w3="@firebase/functions",E3="@firebase/functions-compat",x3="@firebase/installations",T3="@firebase/installations-compat",A3="@firebase/messaging",S3="@firebase/messaging-compat",R3="@firebase/performance",C3="@firebase/performance-compat",N3="@firebase/remote-config",I3="@firebase/remote-config-compat",D3="@firebase/storage",O3="@firebase/storage-compat",M3="@firebase/firestore",k3="@firebase/ai",j3="@firebase/firestore-compat",P3="firebase",U3="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="[DEFAULT]",L3={[ag]:"fire-core",[h3]:"fire-core-compat",[f3]:"fire-analytics",[d3]:"fire-analytics-compat",[p3]:"fire-app-check",[m3]:"fire-app-check-compat",[g3]:"fire-auth",[v3]:"fire-auth-compat",[y3]:"fire-rtdb",[_3]:"fire-data-connect",[b3]:"fire-rtdb-compat",[w3]:"fire-fn",[E3]:"fire-fn-compat",[x3]:"fire-iid",[T3]:"fire-iid-compat",[A3]:"fire-fcm",[S3]:"fire-fcm-compat",[R3]:"fire-perf",[C3]:"fire-perf-compat",[N3]:"fire-rc",[I3]:"fire-rc-compat",[D3]:"fire-gcs",[O3]:"fire-gcs-compat",[M3]:"fire-fst",[j3]:"fire-fst-compat",[k3]:"fire-vertex","fire-js":"fire-js",[P3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=new Map,V3=new Map,og=new Map;function zb(t,e){try{t.container.addComponent(e)}catch(n){Fi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ba(t){const e=t.name;if(og.has(e))return Fi.debug(`There were multiple attempts to register component ${e}.`),!1;og.set(e,t);for(const n of Rd.values())zb(n,t);for(const n of V3.values())zb(n,t);return!0}function Eu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ja=new bu("app","Firebase",z3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ja.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=U3;function u2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sg,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ja.create("bad-app-name",{appName:String(i)});if(n||(n=a2()),!n)throw ja.create("no-options");const a=Rd.get(i);if(a){if(Ms(n,a.options)&&Ms(r,a.config))return a;throw ja.create("duplicate-app",{appName:i})}const s=new YD(i);for(const l of og.values())s.addComponent(l);const o=new B3(n,r,s);return Rd.set(i,o),o}function Tf(t=sg){const e=Rd.get(t);if(!e&&t===sg&&a2())return u2();if(!e)throw ja.create("no-app",{appName:t});return e}function Sr(t,e,n){var r;let i=(r=L3[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${i}" with version "${e}":`];a&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fi.warn(o.join(" "));return}Ba(new Bi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3="firebase-heartbeat-database",H3=1,Yc="firebase-heartbeat-store";let Bm=null;function h2(){return Bm||(Bm=s3(F3,H3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ja.create("idb-open",{originalErrorMessage:t.message})})),Bm}async function q3(t){try{const n=(await h2()).transaction(Yc),r=await n.objectStore(Yc).get(d2(t));return await n.done,r}catch(e){if(e instanceof qr)Fi.warn(e.message);else{const n=ja.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fi.warn(n.message)}}}async function Bb(t,e){try{const r=(await h2()).transaction(Yc,"readwrite");await r.objectStore(Yc).put(e,d2(t)),await r.done}catch(n){if(n instanceof qr)Fi.warn(n.message);else{const r=ja.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fi.warn(r.message)}}}function d2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=1024,$3=30;class Y3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Q3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Fb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>$3){const s=K3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Fi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fb(),{heartbeatsToSend:r,unsentEntries:i}=X3(this._heartbeatsCache.heartbeats),a=Sd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Fi.warn(n),""}}}function Fb(){return new Date().toISOString().substring(0,10)}function X3(t,e=G3){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),Hb(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Hb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Q3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jD()?PD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await q3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Bb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Bb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Hb(t){return Sd(JSON.stringify({version:2,heartbeats:t})).length}function K3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(t){Ba(new Bi("platform-logger",e=>new c3(e),"PRIVATE")),Ba(new Bi("heartbeat",e=>new Y3(e),"PRIVATE")),Sr(ag,Vb,t),Sr(ag,Vb,"esm2017"),Sr("fire-js","")}W3("");function ey(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function f2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Z3=f2,m2=new bu("auth","Firebase",f2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new Zv("@firebase/auth");function J3(t,...e){Cd.logLevel<=Me.WARN&&Cd.warn(`Auth (${qs}): ${t}`,...e)}function jh(t,...e){Cd.logLevel<=Me.ERROR&&Cd.error(`Auth (${qs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(t,...e){throw ny(t,...e)}function Br(t,...e){return ny(t,...e)}function ty(t,e,n){const r=Object.assign(Object.assign({},Z3()),{[e]:n});return new bu("auth","Firebase",r).create(e,{appName:t.name})}function As(t){return ty(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function e5(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&hi(t,"argument-error"),ty(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ny(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return m2.create(t,...e)}function ye(t,e,...n){if(!t)throw ny(e,...n)}function Oi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jh(e),new Error(e)}function Hi(t,e){t||Oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function t5(){return qb()==="http:"||qb()==="https:"}function qb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(t5()||DD()||"connection"in navigator)?navigator.onLine:!0}function r5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hi(n>e,"Short delay should be less than long delay!"),this.isMobile=CD()||OD()}get(){return n5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(t,e){Hi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],s5=new xu(3e4,6e4);function iy(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Gs(t,e,n,r,i={}){return g2(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=wu(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:l},a);return ID()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Yi(t.emulatorConfig.host)&&(h.credentials="include"),p2.fetch()(await v2(t,t.config.apiHost,n,o),h)})}async function g2(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},i5),e);try{const i=new l5(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw hh(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[l,h]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw hh(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw hh(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw hh(t,"user-disabled",s);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ty(t,u,h);hi(t,u)}}catch(i){if(i instanceof qr)throw i;hi(t,"network-request-failed",{message:String(i)})}}async function o5(t,e,n,r,i={}){const a=await Gs(t,e,n,r,i);return"mfaPendingCredential"in a&&hi(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function v2(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?ry(t.config,i):`${t.config.apiScheme}://${i}`;return a5.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}class l5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Br(this.auth,"network-request-failed")),s5.get())})}}function hh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Br(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c5(t,e){return Gs(t,"POST","/v1/accounts:delete",e)}async function Nd(t,e){return Gs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function u5(t,e=!1){const n=rt(t),r=await n.getIdToken(e),i=ay(r);ye(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Ac(Fm(i.auth_time)),issuedAtTime:Ac(Fm(i.iat)),expirationTime:Ac(Fm(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Fm(t){return Number(t)*1e3}function ay(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return jh("JWT malformed, contained fewer than 3 sections"),null;try{const i=r2(n);return i?JSON.parse(i):(jh("Failed to decode base64 JWT payload"),null)}catch(i){return jh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Gb(t){const e=ay(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qr&&h5(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function h5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ac(this.lastLoginAt),this.creationTime=Ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Id(t){var e;const n=t.auth,r=await t.getIdToken(),i=await sl(t,Nd(n,{idToken:r}));ye(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?y2(a.providerUserInfo):[],o=m5(t.providerData,s),l=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(o!=null&&o.length),u=l?h:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new cg(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function f5(t){const e=rt(t);await Id(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function m5(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function y2(t){return t.map(e=>{var{providerId:n}=e,r=ey(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(t,e){const n=await g2(t,{},async()=>{const r=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await v2(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return t.emulatorConfig&&Yi(t.emulatorConfig.host)&&(l.credentials="include"),p2.fetch()(s,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function g5(t,e){return Gs(t,"POST","/v2/accounts:revokeToken",iy(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=Gb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await p5(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new zo;return r&&(ye(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ye(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(ye(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return Oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=ey(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new d5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new cg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await sl(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return u5(this,e)}reload(){return f5(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Id(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sr(this.auth.app))return Promise.reject(As(this.auth));const e=await this.getIdToken();return await sl(this,c5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,s,o,l,h,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,b=(s=n.photoURL)!==null&&s!==void 0?s:void 0,A=(o=n.tenantId)!==null&&o!==void 0?o:void 0,D=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(h=n.createdAt)!==null&&h!==void 0?h:void 0,T=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:N,emailVerified:O,isAnonymous:P,providerData:R,stsTokenManager:_}=n;ye(N&&_,e,"internal-error");const g=zo.fromJSON(this.name,_);ye(typeof N=="string",e,"internal-error"),ra(d,e.name),ra(f,e.name),ye(typeof O=="boolean",e,"internal-error"),ye(typeof P=="boolean",e,"internal-error"),ra(p,e.name),ra(b,e.name),ra(A,e.name),ra(D,e.name),ra(w,e.name),ra(T,e.name);const y=new Vr({uid:N,auth:e,email:f,emailVerified:O,displayName:d,isAnonymous:P,photoURL:b,phoneNumber:p,tenantId:A,stsTokenManager:g,createdAt:w,lastLoginAt:T});return R&&Array.isArray(R)&&(y.providerData=R.map(x=>Object.assign({},x))),D&&(y._redirectEventId=D),y}static async _fromIdTokenResponse(e,n,r=!1){const i=new zo;i.updateFromServerResponse(n);const a=new Vr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Id(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ye(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?y2(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new zo;o.updateFromIdToken(r);const l=new Vr({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new cg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,h),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=new Map;function Mi(t){Hi(t instanceof Function,"Expected a class definition");let e=$b.get(t);return e?(Hi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$b.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_2.type="NONE";const Yb=_2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(t,e,n){return`firebase:${t}:${e}:${n}`}class Bo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Ph(this.userKey,i.apiKey,a),this.fullPersistenceKey=Ph("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Nd(this.auth,{idToken:e}).catch(()=>{});return n?Vr._fromGetAccountInfoResponse(this.auth,n,e):null}return Vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Bo(Mi(Yb),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||Mi(Yb);const s=Ph(r,e.config.apiKey,e.name);let o=null;for(const h of n)try{const u=await h._get(s);if(u){let d;if(typeof u=="string"){const f=await Nd(e,{idToken:u}).catch(()=>{});if(!f)break;d=await Vr._fromGetAccountInfoResponse(e,f,u)}else d=Vr._fromJSON(e,u);h!==a&&(o=d),a=h;break}}catch{}const l=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new Bo(a,e,r):(a=l[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(s)}catch{}})),new Bo(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(x2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(b2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(A2(e))return"Blackberry";if(S2(e))return"Webos";if(w2(e))return"Safari";if((e.includes("chrome/")||E2(e))&&!e.includes("edge/"))return"Chrome";if(T2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function b2(t=Dn()){return/firefox\//i.test(t)}function w2(t=Dn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function E2(t=Dn()){return/crios\//i.test(t)}function x2(t=Dn()){return/iemobile/i.test(t)}function T2(t=Dn()){return/android/i.test(t)}function A2(t=Dn()){return/blackberry/i.test(t)}function S2(t=Dn()){return/webos/i.test(t)}function sy(t=Dn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function v5(t=Dn()){var e;return sy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function y5(){return MD()&&document.documentMode===10}function R2(t=Dn()){return sy(t)||T2(t)||S2(t)||A2(t)||/windows phone/i.test(t)||x2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(t,e=[]){let n;switch(t){case"Browser":n=Xb(Dn());break;case"Worker":n=`${Xb(Dn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const l=e(a);s(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b5(t,e={}){return Gs(t,"GET","/v2/passwordPolicy",iy(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5=6;class E5{constructor(e){var n,r,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:w5,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,s,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsUppercaseLetter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qb(this),this.idTokenSubscription=new Qb(this),this.beforeStateQueue=new _5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mi(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Bo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Nd(this,{idToken:e}),r=await Vr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(sr(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===o)&&(l!=null&&l.user)&&(i=l.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Id(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=r5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sr(this.app))return Promise.reject(As(this));const n=e?rt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sr(this.app)?Promise.reject(As(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sr(this.app)?Promise.reject(As(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await b5(this),n=new E5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await g5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mi(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await Bo.create(this,[Mi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=C2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&J3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Af(t){return rt(t)}class Qb{constructor(e){this.auth=e,this.observer=null,this.addObserver=BD(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function T5(t){oy=t}function A5(t){return oy.loadJS(t)}function S5(){return oy.gapiScript}function R5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(t,e){const n=Eu(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Ms(a,e??{}))return i;hi(i,"already-initialized")}return n.initialize({options:e})}function N5(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function I5(t,e,n){const r=Af(t);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=N2(e),{host:s,port:o}=D5(e),l=o===null?"":`:${o}`,h={url:`${a}//${s}${l}/`},u=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(Ms(h,r.config.emulator)&&Ms(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Yi(s)?(Ef(`${a}//${s}${l}`),xf("Auth",!0)):O5()}function N2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function D5(t){const e=N2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Kb(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:Kb(s)}}}function Kb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function O5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Oi("not implemented")}_getIdTokenResponse(e){return Oi("not implemented")}_linkToIdToken(e,n){return Oi("not implemented")}_getReauthenticationResolver(e){return Oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(t,e){return o5(t,"POST","/v1/accounts:signInWithIdp",iy(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5="http://localhost";class ks extends I2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=ey(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new ks(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Fo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Fo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fo(e,n)}buildRequest(){const e={requestUri:M5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends ly{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends Tu{constructor(){super("facebook.com")}static credential(e){return ks._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fa.credential(e.oauthAccessToken)}catch{return null}}}fa.FACEBOOK_SIGN_IN_METHOD="facebook.com";fa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ks._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Si.credential(n,r)}catch{return null}}}Si.GOOGLE_SIGN_IN_METHOD="google.com";Si.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma extends Tu{constructor(){super("github.com")}static credential(e){return ks._fromParams({providerId:ma.PROVIDER_ID,signInMethod:ma.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ma.credentialFromTaggedObject(e)}static credentialFromError(e){return ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ma.credential(e.oauthAccessToken)}catch{return null}}}ma.GITHUB_SIGN_IN_METHOD="github.com";ma.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa extends Tu{constructor(){super("twitter.com")}static credential(e,n){return ks._fromParams({providerId:pa.PROVIDER_ID,signInMethod:pa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pa.credentialFromTaggedObject(e)}static credentialFromError(e){return pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return pa.credential(n,r)}catch{return null}}}pa.TWITTER_SIGN_IN_METHOD="twitter.com";pa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Vr._fromIdTokenResponse(e,r,i),s=Wb(r);return new ol({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Wb(r);return new ol({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Wb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends qr{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Dd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Dd(e,n,r,i)}}function D2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Dd._fromErrorAndOperation(t,a,e,r):a})}async function k5(t,e,n=!1){const r=await sl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ol._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j5(t,e,n=!1){const{auth:r}=t;if(sr(r.app))return Promise.reject(As(r));const i="reauthenticate";try{const a=await sl(t,D2(r,i,e,t),n);ye(a.idToken,r,"internal-error");const s=ay(a.idToken);ye(s,r,"internal-error");const{sub:o}=s;return ye(t.uid===o,r,"user-mismatch"),ol._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&hi(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(t,e,n=!1){if(sr(t.app))return Promise.reject(As(t));const r="signIn",i=await D2(t,r,e),a=await ol._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U5(t,e){return Gs(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L5(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=rt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await sl(r,U5(r.auth,a));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find(({providerId:l})=>l==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function V5(t,e,n,r){return rt(t).onIdTokenChanged(e,n,r)}function z5(t,e,n){return rt(t).beforeAuthStateChanged(e,n)}function B5(t,e,n,r){return rt(t).onAuthStateChanged(e,n,r)}function F5(t){return rt(t).signOut()}const Od="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Od,"1"),this.storage.removeItem(Od),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=1e3,q5=10;class M2 extends O2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=R2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);y5()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,q5):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},H5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}M2.type="LOCAL";const G5=M2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2 extends O2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}k2.type="SESSION";const j2=k2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Sf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async h=>h(n.origin,a)),l=await $5(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,l)=>{const h=cy("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===h)switch(f.data.status){case"ack":clearTimeout(u),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(f.data.response);break;default:clearTimeout(u),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(){return window}function X5(t){ai().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(){return typeof ai().WorkerGlobalScope<"u"&&typeof ai().importScripts=="function"}async function Q5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function K5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function W5(){return P2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2="firebaseLocalStorageDb",Z5=1,Md="firebaseLocalStorage",L2="fbase_key";class Au{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rf(t,e){return t.transaction([Md],e?"readwrite":"readonly").objectStore(Md)}function J5(){const t=indexedDB.deleteDatabase(U2);return new Au(t).toPromise()}function ug(){const t=indexedDB.open(U2,Z5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Md,{keyPath:L2})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Md)?e(r):(r.close(),await J5(),e(await ug()))})})}async function Zb(t,e,n){const r=Rf(t,!0).put({[L2]:e,value:n});return new Au(r).toPromise()}async function eO(t,e){const n=Rf(t,!1).get(e),r=await new Au(n).toPromise();return r===void 0?null:r.value}function Jb(t,e){const n=Rf(t,!0).delete(e);return new Au(n).toPromise()}const tO=800,nO=3;class V2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ug(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>nO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return P2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sf._getInstance(W5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Q5(),!this.activeServiceWorker)return;this.sender=new Y5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||K5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ug();return await Zb(e,Od,"1"),await Jb(e,Od),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Zb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>eO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Rf(i,!1).getAll();return new Au(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}V2.type="LOCAL";const rO=V2;new xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t,e){return e?Mi(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy extends I2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function iO(t){return P5(t.auth,new uy(t),t.bypassAuthState)}function aO(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),j5(n,new uy(t),t.bypassAuthState)}async function sO(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),k5(n,new uy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iO;case"linkViaPopup":case"linkViaRedirect":return sO;case"reauthViaPopup":case"reauthViaRedirect":return aO;default:hi(this.auth,"internal-error")}}resolve(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=new xu(2e3,1e4);async function lO(t,e,n){if(sr(t.app))return Promise.reject(Br(t,"operation-not-supported-in-this-environment"));const r=Af(t);e5(t,e,ly);const i=z2(r,n);return new ps(r,"signInViaPopup",e,i).executeNotNull()}class ps extends B2{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,ps.currentPopupAction&&ps.currentPopupAction.cancel(),ps.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Hi(this.filter.length===1,"Popup operations only handle one event");const e=cy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ps.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oO.get())};e()}}ps.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO="pendingRedirect",Uh=new Map;class uO extends B2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Uh.get(this.auth._key());if(!e){try{const r=await hO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Uh.set(this.auth._key(),e)}return this.bypassAuthState||Uh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hO(t,e){const n=mO(e),r=fO(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function dO(t,e){Uh.set(t._key(),e)}function fO(t){return Mi(t._redirectPersistence)}function mO(t){return Ph(cO,t.config.apiKey,t.name)}async function pO(t,e,n=!1){if(sr(t.app))return Promise.reject(As(t));const r=Af(t),i=z2(r,e),s=await new uO(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=10*60*1e3;class vO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!F2(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Br(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gO&&this.cachedEventUids.clear(),this.cachedEventUids.has(e1(e))}saveEventToCache(e){this.cachedEventUids.add(e1(e)),this.lastProcessedEventTime=Date.now()}}function e1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function F2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function yO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return F2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _O(t,e={}){return Gs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wO=/^https?/;async function EO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _O(t);for(const n of e)try{if(xO(n))return}catch{}hi(t,"unauthorized-domain")}function xO(t){const e=lg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!wO.test(n))return!1;if(bO.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=new xu(3e4,6e4);function t1(){const t=ai().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function AO(t){return new Promise((e,n)=>{var r,i,a;function s(){t1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{t1(),n(Br(t,"network-request-failed"))},timeout:TO.get()})}if(!((i=(r=ai().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=ai().gapi)===null||a===void 0)&&a.load)s();else{const o=R5("iframefcb");return ai()[o]=()=>{gapi.load?s():n(Br(t,"network-request-failed"))},A5(`${S5()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw Lh=null,e})}let Lh=null;function SO(t){return Lh=Lh||AO(t),Lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=new xu(5e3,15e3),CO="__/auth/iframe",NO="emulator/auth/iframe",IO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OO(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ry(e,NO):`https://${t.config.authDomain}/${CO}`,r={apiKey:e.apiKey,appName:t.name,v:qs},i=DO.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${wu(r).slice(1)}`}async function MO(t){const e=await SO(t),n=ai().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:OO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IO,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=Br(t,"network-request-failed"),o=ai().setTimeout(()=>{a(s)},RO.get());function l(){ai().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jO=500,PO=600,UO="_blank",LO="http://localhost";class n1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VO(t,e,n,r=jO,i=PO){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},kO),{width:r.toString(),height:i.toString(),top:a,left:s}),h=Dn().toLowerCase();n&&(o=E2(h)?UO:n),b2(h)&&(e=e||LO,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,b])=>`${f}${p}=${b},`,"");if(v5(h)&&o!=="_self")return zO(e||"",o),new n1(null);const d=window.open(e||"",o,u);ye(d,t,"popup-blocked");try{d.focus()}catch{}return new n1(d)}function zO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO="__/auth/handler",FO="emulator/auth/handler",HO=encodeURIComponent("fac");async function r1(t,e,n,r,i,a){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qs,eventId:i};if(e instanceof ly){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",zD(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))s[u]=d}if(e instanceof Tu){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await t._getAppCheckToken(),h=l?`#${HO}=${encodeURIComponent(l)}`:"";return`${qO(t)}?${wu(o).slice(1)}${h}`}function qO({config:t}){return t.emulator?ry(t,FO):`https://${t.authDomain}/${BO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="webStorageSupport";class GO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=j2,this._completeRedirectFn=pO,this._overrideRedirectResult=dO}async _openPopup(e,n,r,i){var a;Hi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await r1(e,n,r,lg(),i);return VO(e,s,cy())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await r1(e,n,r,lg(),i);return X5(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Hi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await MO(e),r=new vO(e);return n.register("authEvent",i=>(ye(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hm,{type:Hm},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Hm];s!==void 0&&n(!!s),hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return R2()||w2()||sy()}}const $O=GO;var i1="@firebase/auth",a1="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QO(t){Ba(new Bi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;ye(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:C2(t)},h=new x5(r,i,a,l);return N5(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ba(new Bi("auth-internal",e=>{const n=Af(e.getProvider("auth").getImmediate());return(r=>new YO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sr(i1,a1,XO(t)),Sr(i1,a1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=5*60,WO=s2("authIdTokenMaxAge")||KO;let s1=null;const ZO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>WO)return;const i=n==null?void 0:n.token;s1!==i&&(s1=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function JO(t=Tf()){const e=Eu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=C5(t,{popupRedirectResolver:$O,persistence:[rO,G5,j2]}),r=s2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=ZO(a.toString());z5(n,s,()=>s(n.currentUser)),V5(n,o=>s(o))}}const i=i2("auth");return i&&I5(n,`http://${i}`),n}function eM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}T5({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Br("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",eM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QO("Browser");var tM="firebase",nM="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sr(tM,nM,"app");var o1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pa,H2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,g){function y(){}y.prototype=g.prototype,_.D=g.prototype,_.prototype=new y,_.prototype.constructor=_,_.C=function(x,C,I){for(var S=Array(arguments.length-2),U=2;U<arguments.length;U++)S[U-2]=arguments[U];return g.prototype[C].apply(x,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,g,y){y||(y=0);var x=Array(16);if(typeof g=="string")for(var C=0;16>C;++C)x[C]=g.charCodeAt(y++)|g.charCodeAt(y++)<<8|g.charCodeAt(y++)<<16|g.charCodeAt(y++)<<24;else for(C=0;16>C;++C)x[C]=g[y++]|g[y++]<<8|g[y++]<<16|g[y++]<<24;g=_.g[0],y=_.g[1],C=_.g[2];var I=_.g[3],S=g+(I^y&(C^I))+x[0]+3614090360&4294967295;g=y+(S<<7&4294967295|S>>>25),S=I+(C^g&(y^C))+x[1]+3905402710&4294967295,I=g+(S<<12&4294967295|S>>>20),S=C+(y^I&(g^y))+x[2]+606105819&4294967295,C=I+(S<<17&4294967295|S>>>15),S=y+(g^C&(I^g))+x[3]+3250441966&4294967295,y=C+(S<<22&4294967295|S>>>10),S=g+(I^y&(C^I))+x[4]+4118548399&4294967295,g=y+(S<<7&4294967295|S>>>25),S=I+(C^g&(y^C))+x[5]+1200080426&4294967295,I=g+(S<<12&4294967295|S>>>20),S=C+(y^I&(g^y))+x[6]+2821735955&4294967295,C=I+(S<<17&4294967295|S>>>15),S=y+(g^C&(I^g))+x[7]+4249261313&4294967295,y=C+(S<<22&4294967295|S>>>10),S=g+(I^y&(C^I))+x[8]+1770035416&4294967295,g=y+(S<<7&4294967295|S>>>25),S=I+(C^g&(y^C))+x[9]+2336552879&4294967295,I=g+(S<<12&4294967295|S>>>20),S=C+(y^I&(g^y))+x[10]+4294925233&4294967295,C=I+(S<<17&4294967295|S>>>15),S=y+(g^C&(I^g))+x[11]+2304563134&4294967295,y=C+(S<<22&4294967295|S>>>10),S=g+(I^y&(C^I))+x[12]+1804603682&4294967295,g=y+(S<<7&4294967295|S>>>25),S=I+(C^g&(y^C))+x[13]+4254626195&4294967295,I=g+(S<<12&4294967295|S>>>20),S=C+(y^I&(g^y))+x[14]+2792965006&4294967295,C=I+(S<<17&4294967295|S>>>15),S=y+(g^C&(I^g))+x[15]+1236535329&4294967295,y=C+(S<<22&4294967295|S>>>10),S=g+(C^I&(y^C))+x[1]+4129170786&4294967295,g=y+(S<<5&4294967295|S>>>27),S=I+(y^C&(g^y))+x[6]+3225465664&4294967295,I=g+(S<<9&4294967295|S>>>23),S=C+(g^y&(I^g))+x[11]+643717713&4294967295,C=I+(S<<14&4294967295|S>>>18),S=y+(I^g&(C^I))+x[0]+3921069994&4294967295,y=C+(S<<20&4294967295|S>>>12),S=g+(C^I&(y^C))+x[5]+3593408605&4294967295,g=y+(S<<5&4294967295|S>>>27),S=I+(y^C&(g^y))+x[10]+38016083&4294967295,I=g+(S<<9&4294967295|S>>>23),S=C+(g^y&(I^g))+x[15]+3634488961&4294967295,C=I+(S<<14&4294967295|S>>>18),S=y+(I^g&(C^I))+x[4]+3889429448&4294967295,y=C+(S<<20&4294967295|S>>>12),S=g+(C^I&(y^C))+x[9]+568446438&4294967295,g=y+(S<<5&4294967295|S>>>27),S=I+(y^C&(g^y))+x[14]+3275163606&4294967295,I=g+(S<<9&4294967295|S>>>23),S=C+(g^y&(I^g))+x[3]+4107603335&4294967295,C=I+(S<<14&4294967295|S>>>18),S=y+(I^g&(C^I))+x[8]+1163531501&4294967295,y=C+(S<<20&4294967295|S>>>12),S=g+(C^I&(y^C))+x[13]+2850285829&4294967295,g=y+(S<<5&4294967295|S>>>27),S=I+(y^C&(g^y))+x[2]+4243563512&4294967295,I=g+(S<<9&4294967295|S>>>23),S=C+(g^y&(I^g))+x[7]+1735328473&4294967295,C=I+(S<<14&4294967295|S>>>18),S=y+(I^g&(C^I))+x[12]+2368359562&4294967295,y=C+(S<<20&4294967295|S>>>12),S=g+(y^C^I)+x[5]+4294588738&4294967295,g=y+(S<<4&4294967295|S>>>28),S=I+(g^y^C)+x[8]+2272392833&4294967295,I=g+(S<<11&4294967295|S>>>21),S=C+(I^g^y)+x[11]+1839030562&4294967295,C=I+(S<<16&4294967295|S>>>16),S=y+(C^I^g)+x[14]+4259657740&4294967295,y=C+(S<<23&4294967295|S>>>9),S=g+(y^C^I)+x[1]+2763975236&4294967295,g=y+(S<<4&4294967295|S>>>28),S=I+(g^y^C)+x[4]+1272893353&4294967295,I=g+(S<<11&4294967295|S>>>21),S=C+(I^g^y)+x[7]+4139469664&4294967295,C=I+(S<<16&4294967295|S>>>16),S=y+(C^I^g)+x[10]+3200236656&4294967295,y=C+(S<<23&4294967295|S>>>9),S=g+(y^C^I)+x[13]+681279174&4294967295,g=y+(S<<4&4294967295|S>>>28),S=I+(g^y^C)+x[0]+3936430074&4294967295,I=g+(S<<11&4294967295|S>>>21),S=C+(I^g^y)+x[3]+3572445317&4294967295,C=I+(S<<16&4294967295|S>>>16),S=y+(C^I^g)+x[6]+76029189&4294967295,y=C+(S<<23&4294967295|S>>>9),S=g+(y^C^I)+x[9]+3654602809&4294967295,g=y+(S<<4&4294967295|S>>>28),S=I+(g^y^C)+x[12]+3873151461&4294967295,I=g+(S<<11&4294967295|S>>>21),S=C+(I^g^y)+x[15]+530742520&4294967295,C=I+(S<<16&4294967295|S>>>16),S=y+(C^I^g)+x[2]+3299628645&4294967295,y=C+(S<<23&4294967295|S>>>9),S=g+(C^(y|~I))+x[0]+4096336452&4294967295,g=y+(S<<6&4294967295|S>>>26),S=I+(y^(g|~C))+x[7]+1126891415&4294967295,I=g+(S<<10&4294967295|S>>>22),S=C+(g^(I|~y))+x[14]+2878612391&4294967295,C=I+(S<<15&4294967295|S>>>17),S=y+(I^(C|~g))+x[5]+4237533241&4294967295,y=C+(S<<21&4294967295|S>>>11),S=g+(C^(y|~I))+x[12]+1700485571&4294967295,g=y+(S<<6&4294967295|S>>>26),S=I+(y^(g|~C))+x[3]+2399980690&4294967295,I=g+(S<<10&4294967295|S>>>22),S=C+(g^(I|~y))+x[10]+4293915773&4294967295,C=I+(S<<15&4294967295|S>>>17),S=y+(I^(C|~g))+x[1]+2240044497&4294967295,y=C+(S<<21&4294967295|S>>>11),S=g+(C^(y|~I))+x[8]+1873313359&4294967295,g=y+(S<<6&4294967295|S>>>26),S=I+(y^(g|~C))+x[15]+4264355552&4294967295,I=g+(S<<10&4294967295|S>>>22),S=C+(g^(I|~y))+x[6]+2734768916&4294967295,C=I+(S<<15&4294967295|S>>>17),S=y+(I^(C|~g))+x[13]+1309151649&4294967295,y=C+(S<<21&4294967295|S>>>11),S=g+(C^(y|~I))+x[4]+4149444226&4294967295,g=y+(S<<6&4294967295|S>>>26),S=I+(y^(g|~C))+x[11]+3174756917&4294967295,I=g+(S<<10&4294967295|S>>>22),S=C+(g^(I|~y))+x[2]+718787259&4294967295,C=I+(S<<15&4294967295|S>>>17),S=y+(I^(C|~g))+x[9]+3951481745&4294967295,_.g[0]=_.g[0]+g&4294967295,_.g[1]=_.g[1]+(C+(S<<21&4294967295|S>>>11))&4294967295,_.g[2]=_.g[2]+C&4294967295,_.g[3]=_.g[3]+I&4294967295}r.prototype.u=function(_,g){g===void 0&&(g=_.length);for(var y=g-this.blockSize,x=this.B,C=this.h,I=0;I<g;){if(C==0)for(;I<=y;)i(this,_,I),I+=this.blockSize;if(typeof _=="string"){for(;I<g;)if(x[C++]=_.charCodeAt(I++),C==this.blockSize){i(this,x),C=0;break}}else for(;I<g;)if(x[C++]=_[I++],C==this.blockSize){i(this,x),C=0;break}}this.h=C,this.o+=g},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var g=1;g<_.length-8;++g)_[g]=0;var y=8*this.o;for(g=_.length-8;g<_.length;++g)_[g]=y&255,y/=256;for(this.u(_),_=Array(16),g=y=0;4>g;++g)for(var x=0;32>x;x+=8)_[y++]=this.g[g]>>>x&255;return _};function a(_,g){var y=o;return Object.prototype.hasOwnProperty.call(y,_)?y[_]:y[_]=g(_)}function s(_,g){this.h=g;for(var y=[],x=!0,C=_.length-1;0<=C;C--){var I=_[C]|0;x&&I==g||(y[C]=I,x=!1)}this.g=y}var o={};function l(_){return-128<=_&&128>_?a(_,function(g){return new s([g|0],0>g?-1:0)}):new s([_|0],0>_?-1:0)}function h(_){if(isNaN(_)||!isFinite(_))return d;if(0>_)return D(h(-_));for(var g=[],y=1,x=0;_>=y;x++)g[x]=_/y|0,y*=4294967296;return new s(g,0)}function u(_,g){if(_.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(_.charAt(0)=="-")return D(u(_.substring(1),g));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=h(Math.pow(g,8)),x=d,C=0;C<_.length;C+=8){var I=Math.min(8,_.length-C),S=parseInt(_.substring(C,C+I),g);8>I?(I=h(Math.pow(g,I)),x=x.j(I).add(h(S))):(x=x.j(y),x=x.add(h(S)))}return x}var d=l(0),f=l(1),p=l(16777216);t=s.prototype,t.m=function(){if(A(this))return-D(this).m();for(var _=0,g=1,y=0;y<this.g.length;y++){var x=this.i(y);_+=(0<=x?x:4294967296+x)*g,g*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b(this))return"0";if(A(this))return"-"+D(this).toString(_);for(var g=h(Math.pow(_,6)),y=this,x="";;){var C=O(y,g).g;y=w(y,C.j(g));var I=((0<y.g.length?y.g[0]:y.h)>>>0).toString(_);if(y=C,b(y))return I+x;for(;6>I.length;)I="0"+I;x=I+x}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function b(_){if(_.h!=0)return!1;for(var g=0;g<_.g.length;g++)if(_.g[g]!=0)return!1;return!0}function A(_){return _.h==-1}t.l=function(_){return _=w(this,_),A(_)?-1:b(_)?0:1};function D(_){for(var g=_.g.length,y=[],x=0;x<g;x++)y[x]=~_.g[x];return new s(y,~_.h).add(f)}t.abs=function(){return A(this)?D(this):this},t.add=function(_){for(var g=Math.max(this.g.length,_.g.length),y=[],x=0,C=0;C<=g;C++){var I=x+(this.i(C)&65535)+(_.i(C)&65535),S=(I>>>16)+(this.i(C)>>>16)+(_.i(C)>>>16);x=S>>>16,I&=65535,S&=65535,y[C]=S<<16|I}return new s(y,y[y.length-1]&-2147483648?-1:0)};function w(_,g){return _.add(D(g))}t.j=function(_){if(b(this)||b(_))return d;if(A(this))return A(_)?D(this).j(D(_)):D(D(this).j(_));if(A(_))return D(this.j(D(_)));if(0>this.l(p)&&0>_.l(p))return h(this.m()*_.m());for(var g=this.g.length+_.g.length,y=[],x=0;x<2*g;x++)y[x]=0;for(x=0;x<this.g.length;x++)for(var C=0;C<_.g.length;C++){var I=this.i(x)>>>16,S=this.i(x)&65535,U=_.i(C)>>>16,z=_.i(C)&65535;y[2*x+2*C]+=S*z,T(y,2*x+2*C),y[2*x+2*C+1]+=I*z,T(y,2*x+2*C+1),y[2*x+2*C+1]+=S*U,T(y,2*x+2*C+1),y[2*x+2*C+2]+=I*U,T(y,2*x+2*C+2)}for(x=0;x<g;x++)y[x]=y[2*x+1]<<16|y[2*x];for(x=g;x<2*g;x++)y[x]=0;return new s(y,0)};function T(_,g){for(;(_[g]&65535)!=_[g];)_[g+1]+=_[g]>>>16,_[g]&=65535,g++}function N(_,g){this.g=_,this.h=g}function O(_,g){if(b(g))throw Error("division by zero");if(b(_))return new N(d,d);if(A(_))return g=O(D(_),g),new N(D(g.g),D(g.h));if(A(g))return g=O(_,D(g)),new N(D(g.g),g.h);if(30<_.g.length){if(A(_)||A(g))throw Error("slowDivide_ only works with positive integers.");for(var y=f,x=g;0>=x.l(_);)y=P(y),x=P(x);var C=R(y,1),I=R(x,1);for(x=R(x,2),y=R(y,2);!b(x);){var S=I.add(x);0>=S.l(_)&&(C=C.add(y),I=S),x=R(x,1),y=R(y,1)}return g=w(_,C.j(g)),new N(C,g)}for(C=d;0<=_.l(g);){for(y=Math.max(1,Math.floor(_.m()/g.m())),x=Math.ceil(Math.log(y)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),I=h(y),S=I.j(g);A(S)||0<S.l(_);)y-=x,I=h(y),S=I.j(g);b(I)&&(I=f),C=C.add(I),_=w(_,S)}return new N(C,_)}t.A=function(_){return O(this,_).h},t.and=function(_){for(var g=Math.max(this.g.length,_.g.length),y=[],x=0;x<g;x++)y[x]=this.i(x)&_.i(x);return new s(y,this.h&_.h)},t.or=function(_){for(var g=Math.max(this.g.length,_.g.length),y=[],x=0;x<g;x++)y[x]=this.i(x)|_.i(x);return new s(y,this.h|_.h)},t.xor=function(_){for(var g=Math.max(this.g.length,_.g.length),y=[],x=0;x<g;x++)y[x]=this.i(x)^_.i(x);return new s(y,this.h^_.h)};function P(_){for(var g=_.g.length+1,y=[],x=0;x<g;x++)y[x]=_.i(x)<<1|_.i(x-1)>>>31;return new s(y,_.h)}function R(_,g){var y=g>>5;g%=32;for(var x=_.g.length-y,C=[],I=0;I<x;I++)C[I]=0<g?_.i(I+y)>>>g|_.i(I+y+1)<<32-g:_.i(I+y);return new s(C,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,H2=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=u,Pa=s}).apply(typeof o1<"u"?o1:typeof self<"u"?self:typeof window<"u"?window:{});var dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var q2,ac,G2,Vh,hg,$2,Y2,X2;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,v,E){return c==Array.prototype||c==Object.prototype||(c[v]=E.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof dh=="object"&&dh];for(var v=0;v<c.length;++v){var E=c[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function i(c,v){if(v)e:{var E=r;c=c.split(".");for(var j=0;j<c.length-1;j++){var G=c[j];if(!(G in E))break e;E=E[G]}c=c[c.length-1],j=E[c],v=v(j),v!=j&&v!=null&&e(E,c,{configurable:!0,writable:!0,value:v})}}function a(c,v){c instanceof String&&(c+="");var E=0,j=!1,G={next:function(){if(!j&&E<c.length){var W=E++;return{value:v(W,c[W]),done:!1}}return j=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}i("Array.prototype.values",function(c){return c||function(){return a(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(c){var v=typeof c;return v=v!="object"?v:c?Array.isArray(c)?"array":v:"null",v=="array"||v=="object"&&typeof c.length=="number"}function h(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function u(c,v,E){return c.call.apply(c.bind,arguments)}function d(c,v,E){if(!c)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,j),c.apply(v,G)}}return function(){return c.apply(v,arguments)}}function f(c,v,E){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function p(c,v){var E=Array.prototype.slice.call(arguments,1);return function(){var j=E.slice();return j.push.apply(j,arguments),c.apply(this,j)}}function b(c,v){function E(){}E.prototype=v.prototype,c.aa=v.prototype,c.prototype=new E,c.prototype.constructor=c,c.Qb=function(j,G,W){for(var ne=Array(arguments.length-2),at=2;at<arguments.length;at++)ne[at-2]=arguments[at];return v.prototype[G].apply(j,ne)}}function A(c){const v=c.length;if(0<v){const E=Array(v);for(let j=0;j<v;j++)E[j]=c[j];return E}return[]}function D(c,v){for(let E=1;E<arguments.length;E++){const j=arguments[E];if(l(j)){const G=c.length||0,W=j.length||0;c.length=G+W;for(let ne=0;ne<W;ne++)c[G+ne]=j[ne]}else c.push(j)}}class w{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function T(c){return/^[\s\xa0]*$/.test(c)}function N(){var c=o.navigator;return c&&(c=c.userAgent)?c:""}function O(c){return O[" "](c),c}O[" "]=function(){};var P=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function R(c,v,E){for(const j in c)v.call(E,c[j],j,c)}function _(c,v){for(const E in c)v.call(void 0,c[E],E,c)}function g(c){const v={};for(const E in c)v[E]=c[E];return v}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,v){let E,j;for(let G=1;G<arguments.length;G++){j=arguments[G];for(E in j)c[E]=j[E];for(let W=0;W<y.length;W++)E=y[W],Object.prototype.hasOwnProperty.call(j,E)&&(c[E]=j[E])}}function C(c){var v=1;c=c.split(":");const E=[];for(;0<v&&c.length;)E.push(c.shift()),v--;return c.length&&E.push(c.join(":")),E}function I(c){o.setTimeout(()=>{throw c},0)}function S(){var c=B;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class U{constructor(){this.h=this.g=null}add(v,E){const j=z.get();j.set(v,E),this.h?this.h.next=j:this.g=j,this.h=j}}var z=new w(()=>new k,c=>c.reset());class k{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let M,q=!1,B=new U,X=()=>{const c=o.Promise.resolve(void 0);M=()=>{c.then(re)}};var re=()=>{for(var c;c=S();){try{c.h.call(c.g)}catch(E){I(E)}var v=z;v.j(c),100>v.h&&(v.h++,c.next=v.g,v.g=c)}q=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};o.addEventListener("test",E,v),o.removeEventListener("test",E,v)}catch{}return c}();function Y(c,v){if(K.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var E=this.type=c.type,j=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget){if(P){e:{try{O(v.nodeName);var G=!0;break e}catch{}G=!1}G||(v=null)}}else E=="mouseover"?v=c.fromElement:E=="mouseout"&&(v=c.toElement);this.relatedTarget=v,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:le[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Y.aa.h.call(this)}}b(Y,K);var le={2:"touch",3:"pen",4:"mouse"};Y.prototype.h=function(){Y.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),me=0;function De(c,v,E,j,G){this.listener=c,this.proxy=null,this.src=v,this.type=E,this.capture=!!j,this.ha=G,this.key=++me,this.da=this.fa=!1}function ze(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function We(c){this.src=c,this.g={},this.h=0}We.prototype.add=function(c,v,E,j,G){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var ne=en(c,v,j,G);return-1<ne?(v=c[ne],E||(v.fa=!1)):(v=new De(v,this.src,W,!!j,G),v.fa=E,c.push(v)),v};function Ae(c,v){var E=v.type;if(E in c.g){var j=c.g[E],G=Array.prototype.indexOf.call(j,v,void 0),W;(W=0<=G)&&Array.prototype.splice.call(j,G,1),W&&(ze(v),c.g[E].length==0&&(delete c.g[E],c.h--))}}function en(c,v,E,j){for(var G=0;G<c.length;++G){var W=c[G];if(!W.da&&W.listener==v&&W.capture==!!E&&W.ha==j)return G}return-1}var un="closure_lm_"+(1e6*Math.random()|0),Ze={};function it(c,v,E,j,G){if(Array.isArray(v)){for(var W=0;W<v.length;W++)it(c,v[W],E,j,G);return null}return E=Rt(E),c&&c[xe]?c.K(v,E,h(j)?!!j.capture:!1,G):Je(c,v,E,!1,j,G)}function Je(c,v,E,j,G,W){if(!v)throw Error("Invalid event type");var ne=h(G)?!!G.capture:!!G,at=ot(c);if(at||(c[un]=at=new We(c)),E=at.add(v,E,j,ne,W),E.proxy)return E;if(j=$e(),E.proxy=j,j.src=c,j.listener=E,c.addEventListener)$||(G=ne),G===void 0&&(G=!1),c.addEventListener(v.toString(),j,G);else if(c.attachEvent)c.attachEvent(ht(v.toString()),j);else if(c.addListener&&c.removeListener)c.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return E}function $e(){function c(E){return v.call(c.src,c.listener,E)}const v=hn;return c}function Tt(c,v,E,j,G){if(Array.isArray(v))for(var W=0;W<v.length;W++)Tt(c,v[W],E,j,G);else j=h(j)?!!j.capture:!!j,E=Rt(E),c&&c[xe]?(c=c.i,v=String(v).toString(),v in c.g&&(W=c.g[v],E=en(W,E,j,G),-1<E&&(ze(W[E]),Array.prototype.splice.call(W,E,1),W.length==0&&(delete c.g[v],c.h--)))):c&&(c=ot(c))&&(v=c.g[v.toString()],c=-1,v&&(c=en(v,E,j,G)),(E=-1<c?v[c]:null)&&Mt(E))}function Mt(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[xe])Ae(v.i,c);else{var E=c.type,j=c.proxy;v.removeEventListener?v.removeEventListener(E,j,c.capture):v.detachEvent?v.detachEvent(ht(E),j):v.addListener&&v.removeListener&&v.removeListener(j),(E=ot(v))?(Ae(E,c),E.h==0&&(E.src=null,v[un]=null)):ze(c)}}}function ht(c){return c in Ze?Ze[c]:Ze[c]="on"+c}function hn(c,v){if(c.da)c=!0;else{v=new Y(v,this);var E=c.listener,j=c.ha||c.src;c.fa&&Mt(c),c=E.call(j,v)}return c}function ot(c){return c=c[un],c instanceof We?c:null}var Ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(c){return typeof c=="function"?c:(c[Ce]||(c[Ce]=function(v){return c.handleEvent(v)}),c[Ce])}function et(){V.call(this),this.i=new We(this),this.M=this,this.F=null}b(et,V),et.prototype[xe]=!0,et.prototype.removeEventListener=function(c,v,E,j){Tt(this,c,v,E,j)};function gt(c,v){var E,j=c.F;if(j)for(E=[];j;j=j.F)E.push(j);if(c=c.M,j=v.type||v,typeof v=="string")v=new K(v,c);else if(v instanceof K)v.target=v.target||c;else{var G=v;v=new K(j,c),x(v,G)}if(G=!0,E)for(var W=E.length-1;0<=W;W--){var ne=v.g=E[W];G=qe(ne,j,!0,v)&&G}if(ne=v.g=c,G=qe(ne,j,!0,v)&&G,G=qe(ne,j,!1,v)&&G,E)for(W=0;W<E.length;W++)ne=v.g=E[W],G=qe(ne,j,!1,v)&&G}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var c=this.i,v;for(v in c.g){for(var E=c.g[v],j=0;j<E.length;j++)ze(E[j]);delete c.g[v],c.h--}}this.F=null},et.prototype.K=function(c,v,E,j){return this.i.add(String(c),v,!1,E,j)},et.prototype.L=function(c,v,E,j){return this.i.add(String(c),v,!0,E,j)};function qe(c,v,E,j){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();for(var G=!0,W=0;W<v.length;++W){var ne=v[W];if(ne&&!ne.da&&ne.capture==E){var at=ne.listener,mn=ne.ha||ne.src;ne.fa&&Ae(c.i,ne),G=at.call(mn,j)!==!1&&G}}return G&&!j.defaultPrevented}function zt(c,v,E){if(typeof c=="function")E&&(c=f(c,E));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:o.setTimeout(c,v||0)}function kt(c){c.g=zt(()=>{c.g=null,c.i&&(c.i=!1,kt(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class tn extends V{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:kt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bt(c){V.call(this),this.h=c,this.g={}}b(Bt,V);var jt=[];function En(c){R(c.g,function(v,E){this.g.hasOwnProperty(E)&&Mt(v)},c),c.g={}}Bt.prototype.N=function(){Bt.aa.N.call(this),En(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vn=o.JSON.stringify,Qi=o.JSON.parse,Nl=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function Gr(){}Gr.prototype.h=null;function $r(c){return c.h||(c.h=c.i())}function Ir(){}var Dr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xn(){K.call(this,"d")}b(xn,K);function zn(){K.call(this,"c")}b(zn,K);var dn={},Yr=null;function Xr(){return Yr=Yr||new et}dn.La="serverreachability";function Mn(c){K.call(this,dn.La,c)}b(Mn,K);function nn(c){const v=Xr();gt(v,new Mn(v))}dn.STAT_EVENT="statevent";function Pu(c,v){K.call(this,dn.STAT_EVENT,c),this.stat=v}b(Pu,K);function fn(c){const v=Xr();gt(v,new Pu(v,c))}dn.Ma="timingevent";function L(c,v){K.call(this,dn.Ma,c),this.size=v}b(L,K);function F(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},v)}function Q(){this.g=!0}Q.prototype.xa=function(){this.g=!1};function te(c,v,E,j,G,W){c.info(function(){if(c.g)if(W)for(var ne="",at=W.split("&"),mn=0;mn<at.length;mn++){var Be=at[mn].split("=");if(1<Be.length){var Tn=Be[0];Be=Be[1];var An=Tn.split("_");ne=2<=An.length&&An[1]=="type"?ne+(Tn+"="+Be+"&"):ne+(Tn+"=redacted&")}}else ne=null;else ne=W;return"XMLHTTP REQ ("+j+") [attempt "+G+"]: "+v+`
`+E+`
`+ne})}function ie(c,v,E,j,G,W,ne){c.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+G+"]: "+v+`
`+E+`
`+W+" "+ne})}function he(c,v,E,j){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+ue(c,E)+(j?" "+j:"")})}function ge(c,v){c.info(function(){return"TIMEOUT: "+v})}Q.prototype.info=function(){};function ue(c,v){if(!c.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(c=0;c<E.length;c++)if(Array.isArray(E[c])){var j=E[c];if(!(2>j.length)){var G=j[1];if(Array.isArray(G)&&!(1>G.length)){var W=G[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ne=1;ne<G.length;ne++)G[ne]=""}}}}return Vn(E)}catch{return v}}var ce={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},de;function _e(){}b(_e,Gr),_e.prototype.g=function(){return new XMLHttpRequest},_e.prototype.i=function(){return{}},de=new _e;function Ee(c,v,E,j){this.j=c,this.i=v,this.l=E,this.R=j||1,this.U=new Bt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ft}function Ft(){this.i=null,this.g="",this.h=!1}var Ye={},je={};function lt(c,v,E){c.L=1,c.v=zu(_i(v)),c.m=E,c.P=!0,gi(c,null)}function gi(c,v){c.F=Date.now(),kn(c),c.A=_i(c.v);var E=c.A,j=c.R;Array.isArray(j)||(j=[String(j)]),y0(E.i,"t",j),c.C=0,E=c.j.J,c.h=new Ft,c.g=P0(c.j,E?v:null,!c.m),0<c.O&&(c.M=new tn(f(c.Y,c,c.g),c.O)),v=c.U,E=c.g,j=c.ca;var G="readystatechange";Array.isArray(G)||(G&&(jt[0]=G.toString()),G=jt);for(var W=0;W<G.length;W++){var ne=it(E,G[W],j||v.handleEvent,!1,v.h||v);if(!ne)break;v.g[ne.key]=ne}v=c.H?g(c.H):{},c.m?(c.u||(c.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,v)):(c.u="GET",c.g.ea(c.A,c.u,null,v)),nn(),te(c.i,c.u,c.A,c.l,c.R,c.m)}Ee.prototype.ca=function(c){c=c.target;const v=this.M;v&&bi(c)==3?v.j():this.Y(c)},Ee.prototype.Y=function(c){try{if(c==this.g)e:{const An=bi(this.g);var v=this.g.Ba();const eo=this.g.Z();if(!(3>An)&&(An!=3||this.g&&(this.h.h||this.g.oa()||A0(this.g)))){this.J||An!=4||v==7||(v==8||0>=eo?nn(3):nn(2)),vi(this);var E=this.g.Z();this.X=E;t:if(Ki(this)){var j=A0(this.g);c="";var G=j.length,W=bi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pr(this),Jn(this);var ne="";break t}this.h.i=new o.TextDecoder}for(v=0;v<G;v++)this.h.h=!0,c+=this.h.i.decode(j[v],{stream:!(W&&v==G-1)});j.length=0,this.h.g+=c,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=E==200,ie(this.i,this.u,this.A,this.l,this.R,An,E),this.o){if(this.T&&!this.K){t:{if(this.g){var at,mn=this.g;if((at=mn.g?mn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(at)){var Be=at;break t}}Be=null}if(E=Be)he(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wi(this,E);else{this.o=!1,this.s=3,fn(12),pr(this),Jn(this);break e}}if(this.P){E=!0;let Mr;for(;!this.J&&this.C<ne.length;)if(Mr=Or(this,ne),Mr==je){An==4&&(this.s=4,fn(14),E=!1),he(this.i,this.l,null,"[Incomplete Response]");break}else if(Mr==Ye){this.s=4,fn(15),he(this.i,this.l,ne,"[Invalid Chunk]"),E=!1;break}else he(this.i,this.l,Mr,null),Wi(this,Mr);if(Ki(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),An!=4||ne.length!=0||this.h.h||(this.s=1,fn(16),E=!1),this.o=this.o&&E,!E)he(this.i,this.l,ne,"[Invalid Chunked Response]"),pr(this),Jn(this);else if(0<ne.length&&!this.W){this.W=!0;var Tn=this.j;Tn.g==this&&Tn.ba&&!Tn.M&&(Tn.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),Wf(Tn),Tn.M=!0,fn(11))}}else he(this.i,this.l,ne,null),Wi(this,ne);An==4&&pr(this),this.o&&!this.J&&(An==4?O0(this.j,this):(this.o=!1,kn(this)))}else qR(this.g),E==400&&0<ne.indexOf("Unknown SID")?(this.s=3,fn(12)):(this.s=0,fn(13)),pr(this),Jn(this)}}}catch{}finally{}};function Ki(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Or(c,v){var E=c.C,j=v.indexOf(`
`,E);return j==-1?je:(E=Number(v.substring(E,j)),isNaN(E)?Ye:(j+=1,j+E>v.length?je:(v=v.slice(j,j+E),c.C=j+E,v)))}Ee.prototype.cancel=function(){this.J=!0,pr(this)};function kn(c){c.S=Date.now()+c.I,Ws(c,c.I)}function Ws(c,v){if(c.B!=null)throw Error("WatchDog timer not null");c.B=F(f(c.ba,c),v)}function vi(c){c.B&&(o.clearTimeout(c.B),c.B=null)}Ee.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ge(this.i,this.A),this.L!=2&&(nn(),fn(17)),pr(this),this.s=2,Jn(this)):Ws(this,this.S-c)};function Jn(c){c.j.G==0||c.J||O0(c.j,c)}function pr(c){vi(c);var v=c.M;v&&typeof v.ma=="function"&&v.ma(),c.M=null,En(c.U),c.g&&(v=c.g,c.g=null,v.abort(),v.ma())}function Wi(c,v){try{var E=c.j;if(E.G!=0&&(E.g==c||vt(E.h,c))){if(!c.K&&vt(E.h,c)&&E.G==3){try{var j=E.Da.g.parse(v)}catch{j=null}if(Array.isArray(j)&&j.length==3){var G=j;if(G[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<c.F)$u(E),qu(E);else break e;Kf(E),fn(18)}}else E.za=G[1],0<E.za-E.T&&37500>G[2]&&E.F&&E.v==0&&!E.C&&(E.C=F(f(E.Za,E),6e3));if(1>=Zi(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else rs(E,11)}else if((c.K||E.g==c)&&$u(E),!T(v))for(G=E.Da.g.parse(v),v=0;v<G.length;v++){let Be=G[v];if(E.T=Be[0],Be=Be[1],E.G==2)if(Be[0]=="c"){E.K=Be[1],E.ia=Be[2];const Tn=Be[3];Tn!=null&&(E.la=Tn,E.j.info("VER="+E.la));const An=Be[4];An!=null&&(E.Aa=An,E.j.info("SVER="+E.Aa));const eo=Be[5];eo!=null&&typeof eo=="number"&&0<eo&&(j=1.5*eo,E.L=j,E.j.info("backChannelRequestTimeoutMs_="+j)),j=E;const Mr=c.g;if(Mr){const Xu=Mr.g?Mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xu){var W=j.h;W.g||Xu.indexOf("spdy")==-1&&Xu.indexOf("quic")==-1&&Xu.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Qr(W,W.h),W.h=null))}if(j.D){const Zf=Mr.g?Mr.g.getResponseHeader("X-HTTP-Session-Id"):null;Zf&&(j.ya=Zf,ft(j.I,j.D,Zf))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-c.F,E.j.info("Handshake RTT: "+E.R+"ms")),j=E;var ne=c;if(j.qa=j0(j,j.J?j.ia:null,j.W),ne.K){Il(j.h,ne);var at=ne,mn=j.L;mn&&(at.I=mn),at.B&&(vi(at),kn(at)),j.g=ne}else I0(j);0<E.i.length&&Gu(E)}else Be[0]!="stop"&&Be[0]!="close"||rs(E,7);else E.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?rs(E,7):Qf(E):Be[0]!="noop"&&E.l&&E.l.ta(Be),E.v=0)}}nn(4)}catch{}}var Ue=class{constructor(c,v){this.g=c,this.map=v}};function dt(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yi(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Zi(c){return c.h?1:c.g?c.g.size:0}function vt(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function Qr(c,v){c.g?c.g.add(v):c.h=v}function Il(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}dt.prototype.cancel=function(){if(this.i=Uu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Uu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const E of c.g.values())v=v.concat(E.D);return v}return A(c.i)}function NR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var v=[],E=c.length,j=0;j<E;j++)v.push(c[j]);return v}v=[],E=0;for(j in c)v[E++]=c[j];return v}function IR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var v=[];c=c.length;for(var E=0;E<c;E++)v.push(E);return v}v=[],E=0;for(const j in c)v[E++]=j;return v}}}function d0(c,v){if(c.forEach&&typeof c.forEach=="function")c.forEach(v,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,v,void 0);else for(var E=IR(c),j=NR(c),G=j.length,W=0;W<G;W++)v.call(void 0,j[W],E&&E[W],c)}var f0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function DR(c,v){if(c){c=c.split("&");for(var E=0;E<c.length;E++){var j=c[E].indexOf("="),G=null;if(0<=j){var W=c[E].substring(0,j);G=c[E].substring(j+1)}else W=c[E];v(W,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function ns(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ns){this.h=c.h,Lu(this,c.j),this.o=c.o,this.g=c.g,Vu(this,c.s),this.l=c.l;var v=c.i,E=new Ml;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),m0(this,E),this.m=c.m}else c&&(v=String(c).match(f0))?(this.h=!1,Lu(this,v[1]||"",!0),this.o=Dl(v[2]||""),this.g=Dl(v[3]||"",!0),Vu(this,v[4]),this.l=Dl(v[5]||"",!0),m0(this,v[6]||"",!0),this.m=Dl(v[7]||"")):(this.h=!1,this.i=new Ml(null,this.h))}ns.prototype.toString=function(){var c=[],v=this.j;v&&c.push(Ol(v,p0,!0),":");var E=this.g;return(E||v=="file")&&(c.push("//"),(v=this.o)&&c.push(Ol(v,p0,!0),"@"),c.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&c.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(Ol(E,E.charAt(0)=="/"?kR:MR,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",Ol(E,PR)),c.join("")};function _i(c){return new ns(c)}function Lu(c,v,E){c.j=E?Dl(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function Vu(c,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);c.s=v}else c.s=null}function m0(c,v,E){v instanceof Ml?(c.i=v,UR(c.i,c.h)):(E||(v=Ol(v,jR)),c.i=new Ml(v,c.h))}function ft(c,v,E){c.i.set(v,E)}function zu(c){return ft(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Dl(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ol(c,v,E){return typeof c=="string"?(c=encodeURI(c).replace(v,OR),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function OR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var p0=/[#\/\?@]/g,MR=/[#\?:]/g,kR=/[#\?]/g,jR=/[#\?@]/g,PR=/#/g;function Ml(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function Ji(c){c.g||(c.g=new Map,c.h=0,c.i&&DR(c.i,function(v,E){c.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}t=Ml.prototype,t.add=function(c,v){Ji(this),this.i=null,c=Zs(this,c);var E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(v),this.h+=1,this};function g0(c,v){Ji(c),v=Zs(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function v0(c,v){return Ji(c),v=Zs(c,v),c.g.has(v)}t.forEach=function(c,v){Ji(this),this.g.forEach(function(E,j){E.forEach(function(G){c.call(v,G,j,this)},this)},this)},t.na=function(){Ji(this);const c=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let j=0;j<v.length;j++){const G=c[j];for(let W=0;W<G.length;W++)E.push(v[j])}return E},t.V=function(c){Ji(this);let v=[];if(typeof c=="string")v0(this,c)&&(v=v.concat(this.g.get(Zs(this,c))));else{c=Array.from(this.g.values());for(let E=0;E<c.length;E++)v=v.concat(c[E])}return v},t.set=function(c,v){return Ji(this),this.i=null,c=Zs(this,c),v0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},t.get=function(c,v){return c?(c=this.V(c),0<c.length?String(c[0]):v):v};function y0(c,v,E){g0(c,v),0<E.length&&(c.i=null,c.g.set(Zs(c,v),A(E)),c.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var j=v[E];const W=encodeURIComponent(String(j)),ne=this.V(j);for(j=0;j<ne.length;j++){var G=W;ne[j]!==""&&(G+="="+encodeURIComponent(String(ne[j]))),c.push(G)}}return this.i=c.join("&")};function Zs(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function UR(c,v){v&&!c.j&&(Ji(c),c.i=null,c.g.forEach(function(E,j){var G=j.toLowerCase();j!=G&&(g0(this,j),y0(this,G,E))},c)),c.j=v}function LR(c,v){const E=new Q;if(o.Image){const j=new Image;j.onload=p(ea,E,"TestLoadImage: loaded",!0,v,j),j.onerror=p(ea,E,"TestLoadImage: error",!1,v,j),j.onabort=p(ea,E,"TestLoadImage: abort",!1,v,j),j.ontimeout=p(ea,E,"TestLoadImage: timeout",!1,v,j),o.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=c}else v(!1)}function VR(c,v){const E=new Q,j=new AbortController,G=setTimeout(()=>{j.abort(),ea(E,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:j.signal}).then(W=>{clearTimeout(G),W.ok?ea(E,"TestPingServer: ok",!0,v):ea(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(G),ea(E,"TestPingServer: error",!1,v)})}function ea(c,v,E,j,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),j(E)}catch{}}function zR(){this.g=new Nl}function BR(c,v,E){const j=E||"";try{d0(c,function(G,W){let ne=G;h(G)&&(ne=Vn(G)),v.push(j+W+"="+encodeURIComponent(ne))})}catch(G){throw v.push(j+"type="+encodeURIComponent("_badmap")),G}}function Bu(c){this.l=c.Ub||null,this.j=c.eb||!1}b(Bu,Gr),Bu.prototype.g=function(){return new Fu(this.l,this.j)},Bu.prototype.i=function(c){return function(){return c}}({});function Fu(c,v){et.call(this),this.D=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Fu,et),t=Fu.prototype,t.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=v,this.readyState=1,jl(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(v.body=c),(this.D||o).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kl(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,jl(this)),this.g&&(this.readyState=3,jl(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function _0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?kl(this):jl(this),this.readyState==3&&_0(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,kl(this))},t.Qa=function(c){this.g&&(this.response=c,kl(this))},t.ga=function(){this.g&&kl(this)};function kl(c){c.readyState=4,c.l=null,c.j=null,c.v=null,jl(c)}t.setRequestHeader=function(c,v){this.u.append(c,v)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=v.next();return c.join(`\r
`)};function jl(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Fu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function b0(c){let v="";return R(c,function(E,j){v+=j,v+=":",v+=E,v+=`\r
`}),v}function Xf(c,v,E){e:{for(j in E){var j=!1;break e}j=!0}j||(E=b0(E),typeof c=="string"?E!=null&&encodeURIComponent(String(E)):ft(c,v,E))}function Ct(c){et.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ct,et);var FR=/^https?$/i,HR=["POST","PUT"];t=Ct.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,v,E,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():de.g(),this.v=this.o?$r(this.o):$r(de),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(W){w0(this,W);return}if(c=E||"",E=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var G in j)E.set(G,j[G]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const W of j.keys())E.set(W,j.get(W));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(E.keys()).find(W=>W.toLowerCase()=="content-type"),G=o.FormData&&c instanceof o.FormData,!(0<=Array.prototype.indexOf.call(HR,v,void 0))||j||G||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ne]of E)this.g.setRequestHeader(W,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{T0(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){w0(this,W)}};function w0(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.m=5,E0(c),Hu(c)}function E0(c){c.A||(c.A=!0,gt(c,"complete"),gt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,gt(this,"complete"),gt(this,"abort"),Hu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hu(this,!0)),Ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?x0(this):this.bb())},t.bb=function(){x0(this)};function x0(c){if(c.h&&typeof s<"u"&&(!c.v[1]||bi(c)!=4||c.Z()!=2)){if(c.u&&bi(c)==4)zt(c.Ea,0,c);else if(gt(c,"readystatechange"),bi(c)==4){c.h=!1;try{const ne=c.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var j;if(j=ne===0){var G=String(c.D).match(f0)[1]||null;!G&&o.self&&o.self.location&&(G=o.self.location.protocol.slice(0,-1)),j=!FR.test(G?G.toLowerCase():"")}E=j}if(E)gt(c,"complete"),gt(c,"success");else{c.m=6;try{var W=2<bi(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",E0(c)}}finally{Hu(c)}}}}function Hu(c,v){if(c.g){T0(c);const E=c.g,j=c.v[0]?()=>{}:null;c.g=null,c.v=null,v||gt(c,"ready");try{E.onreadystatechange=j}catch{}}}function T0(c){c.I&&(o.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function bi(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<bi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),Qi(v)}};function A0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function qR(c){const v={};c=(c.g&&2<=bi(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<c.length;j++){if(T(c[j]))continue;var E=C(c[j]);const G=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const W=v[G]||[];v[G]=W,W.push(E)}_(v,function(j){return j.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pl(c,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||v}function S0(c){this.Aa=0,this.i=[],this.j=new Q,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pl("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pl("baseRetryDelayMs",5e3,c),this.cb=Pl("retryDelaySeedMs",1e4,c),this.Wa=Pl("forwardChannelMaxRetries",2,c),this.wa=Pl("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new dt(c&&c.concurrentRequestLimit),this.Da=new zR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=S0.prototype,t.la=8,t.G=1,t.connect=function(c,v,E,j){fn(0),this.W=c,this.H=v||{},E&&j!==void 0&&(this.H.OSID=E,this.H.OAID=j),this.F=this.X,this.I=j0(this,null,this.W),Gu(this)};function Qf(c){if(R0(c),c.G==3){var v=c.U++,E=_i(c.I);if(ft(E,"SID",c.K),ft(E,"RID",v),ft(E,"TYPE","terminate"),Ul(c,E),v=new Ee(c,c.j,v),v.L=2,v.v=zu(_i(E)),E=!1,o.navigator&&o.navigator.sendBeacon)try{E=o.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&o.Image&&(new Image().src=v.v,E=!0),E||(v.g=P0(v.j,null),v.g.ea(v.v)),v.F=Date.now(),kn(v)}k0(c)}function qu(c){c.g&&(Wf(c),c.g.cancel(),c.g=null)}function R0(c){qu(c),c.u&&(o.clearTimeout(c.u),c.u=null),$u(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&o.clearTimeout(c.s),c.s=null)}function Gu(c){if(!yi(c.h)&&!c.s){c.s=!0;var v=c.Ga;M||X(),q||(M(),q=!0),B.add(v,c),c.B=0}}function GR(c,v){return Zi(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=v.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=F(f(c.Ga,c,v),M0(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const G=new Ee(this,this.j,c);let W=this.o;if(this.S&&(W?(W=g(W),x(W,this.S)):W=this.S),this.m!==null||this.O||(G.H=W,W=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var j=this.i[E];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(v+=j,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=N0(this,G,v),E=_i(this.I),ft(E,"RID",c),ft(E,"CVER",22),this.D&&ft(E,"X-HTTP-Session-Id",this.D),Ul(this,E),W&&(this.O?v="headers="+encodeURIComponent(String(b0(W)))+"&"+v:this.m&&Xf(E,this.m,W)),Qr(this.h,G),this.Ua&&ft(E,"TYPE","init"),this.P?(ft(E,"$req",v),ft(E,"SID","null"),G.T=!0,lt(G,E,null)):lt(G,E,v),this.G=2}}else this.G==3&&(c?C0(this,c):this.i.length==0||yi(this.h)||C0(this))};function C0(c,v){var E;v?E=v.l:E=c.U++;const j=_i(c.I);ft(j,"SID",c.K),ft(j,"RID",E),ft(j,"AID",c.T),Ul(c,j),c.m&&c.o&&Xf(j,c.m,c.o),E=new Ee(c,c.j,E,c.B+1),c.m===null&&(E.H=c.o),v&&(c.i=v.D.concat(c.i)),v=N0(c,E,1e3),E.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Qr(c.h,E),lt(E,j,v)}function Ul(c,v){c.H&&R(c.H,function(E,j){ft(v,j,E)}),c.l&&d0({},function(E,j){ft(v,j,E)})}function N0(c,v,E){E=Math.min(c.i.length,E);var j=c.l?f(c.l.Na,c.l,c):null;e:{var G=c.i;let W=-1;for(;;){const ne=["count="+E];W==-1?0<E?(W=G[0].g,ne.push("ofs="+W)):W=0:ne.push("ofs="+W);let at=!0;for(let mn=0;mn<E;mn++){let Be=G[mn].g;const Tn=G[mn].map;if(Be-=W,0>Be)W=Math.max(0,G[mn].g-100),at=!1;else try{BR(Tn,ne,"req"+Be+"_")}catch{j&&j(Tn)}}if(at){j=ne.join("&");break e}}}return c=c.i.splice(0,E),v.D=c,j}function I0(c){if(!c.g&&!c.u){c.Y=1;var v=c.Fa;M||X(),q||(M(),q=!0),B.add(v,c),c.v=0}}function Kf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=F(f(c.Fa,c),M0(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,D0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=F(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fn(10),qu(this),D0(this))};function Wf(c){c.A!=null&&(o.clearTimeout(c.A),c.A=null)}function D0(c){c.g=new Ee(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var v=_i(c.qa);ft(v,"RID","rpc"),ft(v,"SID",c.K),ft(v,"AID",c.T),ft(v,"CI",c.F?"0":"1"),!c.F&&c.ja&&ft(v,"TO",c.ja),ft(v,"TYPE","xmlhttp"),Ul(c,v),c.m&&c.o&&Xf(v,c.m,c.o),c.L&&(c.g.I=c.L);var E=c.g;c=c.ia,E.L=1,E.v=zu(_i(v)),E.m=null,E.P=!0,gi(E,c)}t.Za=function(){this.C!=null&&(this.C=null,qu(this),Kf(this),fn(19))};function $u(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function O0(c,v){var E=null;if(c.g==v){$u(c),Wf(c),c.g=null;var j=2}else if(vt(c.h,v))E=v.D,Il(c.h,v),j=1;else return;if(c.G!=0){if(v.o)if(j==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var G=c.B;j=Xr(),gt(j,new L(j,E)),Gu(c)}else I0(c);else if(G=v.s,G==3||G==0&&0<v.X||!(j==1&&GR(c,v)||j==2&&Kf(c)))switch(E&&0<E.length&&(v=c.h,v.i=v.i.concat(E)),G){case 1:rs(c,5);break;case 4:rs(c,10);break;case 3:rs(c,6);break;default:rs(c,2)}}}function M0(c,v){let E=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(E*=2),E*v}function rs(c,v){if(c.j.info("Error code "+v),v==2){var E=f(c.fb,c),j=c.Xa;const G=!j;j=new ns(j||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Lu(j,"https"),zu(j),G?LR(j.toString(),E):VR(j.toString(),E)}else fn(2);c.G=0,c.l&&c.l.sa(v),k0(c),R0(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),fn(2)):(this.j.info("Failed to ping google.com"),fn(1))};function k0(c){if(c.G=0,c.ka=[],c.l){const v=Uu(c.h);(v.length!=0||c.i.length!=0)&&(D(c.ka,v),D(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function j0(c,v,E){var j=E instanceof ns?_i(E):new ns(E);if(j.g!="")v&&(j.g=v+"."+j.g),Vu(j,j.s);else{var G=o.location;j=G.protocol,v=v?v+"."+G.hostname:G.hostname,G=+G.port;var W=new ns(null);j&&Lu(W,j),v&&(W.g=v),G&&Vu(W,G),E&&(W.l=E),j=W}return E=c.D,v=c.ya,E&&v&&ft(j,E,v),ft(j,"VER",c.la),Ul(c,j),j}function P0(c,v,E){if(v&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Ca&&!c.pa?new Ct(new Bu({eb:E})):new Ct(c.pa),v.Ha(c.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function U0(){}t=U0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Yu(){}Yu.prototype.g=function(c,v){return new er(c,v)};function er(c,v){et.call(this),this.g=new S0(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(c?c["X-WebChannel-Client-Profile"]=v.va:c={"X-WebChannel-Client-Profile":v.va}),this.g.S=c,(c=v&&v.Sb)&&!T(c)&&(this.g.m=c),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!T(v)&&(this.g.D=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new Js(this)}b(er,et),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){Qf(this.g)},er.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.u&&(E={},E.__data__=Vn(c),c=E);v.i.push(new Ue(v.Ya++,c)),v.G==3&&Gu(v)},er.prototype.N=function(){this.g.l=null,delete this.j,Qf(this.g),delete this.g,er.aa.N.call(this)};function L0(c){xn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const E in v){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}b(L0,xn);function V0(){zn.call(this),this.status=1}b(V0,zn);function Js(c){this.g=c}b(Js,U0),Js.prototype.ua=function(){gt(this.g,"a")},Js.prototype.ta=function(c){gt(this.g,new L0(c))},Js.prototype.sa=function(c){gt(this.g,new V0)},Js.prototype.ra=function(){gt(this.g,"b")},Yu.prototype.createWebChannel=Yu.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,X2=function(){return new Yu},Y2=function(){return Xr()},$2=dn,hg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ce.NO_ERROR=0,ce.TIMEOUT=8,ce.HTTP_ERROR=6,Vh=ce,oe.COMPLETE="complete",G2=oe,Ir.EventType=Dr,Dr.OPEN="a",Dr.CLOSE="b",Dr.ERROR="c",Dr.MESSAGE="d",et.prototype.listen=et.prototype.K,ac=Ir,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,q2=Ct}).apply(typeof dh<"u"?dh:typeof self<"u"?self:typeof window<"u"?window:{});const l1="@firebase/firestore",c1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new Zv("@firebase/firestore");function uo(){return js.logLevel}function se(t,...e){if(js.logLevel<=Me.DEBUG){const n=e.map(hy);js.debug(`Firestore (${xl}): ${t}`,...n)}}function qi(t,...e){if(js.logLevel<=Me.ERROR){const n=e.map(hy);js.error(`Firestore (${xl}): ${t}`,...n)}}function Fa(t,...e){if(js.logLevel<=Me.WARN){const n=e.map(hy);js.warn(`Firestore (${xl}): ${t}`,...n)}}function hy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Q2(t,r,n)}function Q2(t,e,n){let r=`FIRESTORE (${xl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw qi(r),new Error(r)}function Ge(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Q2(e,i,r)}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends qr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Rn.UNAUTHENTICATED))}shutdown(){}}class iM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class aM{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ge(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let a=new Pi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Pi,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Pi)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string",31837,{l:r}),new K2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new Rn(e)}}class sM{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oM{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new sM(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class u1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ge(this.o===void 0,3512);const r=a=>{a.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,se("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new u1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new u1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=cM(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function dg(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Se(r,i);{const a=W2(),s=uM(a.encode(h1(t,n)),a.encode(h1(e,n)));return s!==0?s:Se(r,i)}}n+=r>65535?2:1}return Se(t.length,e.length)}function h1(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function uM(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Se(t[n],e[n]);return Se(t.length,e.length)}function ll(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="__name__";class Zr{constructor(e,n,r){n===void 0?n=0:n>e.length&&pe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&pe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=Zr.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return Se(e.length,n.length)}static compareSegments(e,n){const r=Zr.isNumericId(e),i=Zr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Zr.extractNumericId(e).compare(Zr.extractNumericId(n)):dg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pa.fromString(e.substring(4,e.length-2))}}class ct extends Zr{construct(e,n,r){return new ct(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ct(n)}static emptyPath(){return new ct([])}}const hM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _n extends Zr{construct(e,n,r){return new _n(e,n,r)}static isValidIdentifier(e){return hM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===d1}static keyField(){return new _n([d1])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ae(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new ae(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ae(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new ae(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _n(n)}static emptyPath(){return new _n([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(ct.fromString(e))}static fromName(e){return new fe(ct.fromString(e).popFirst(5))}static empty(){return new fe(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(t,e,n){if(!n)throw new ae(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dM(t,e,n,r){if(e===!0&&r===!0)throw new ae(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function f1(t){if(!fe.isDocumentKey(t))throw new ae(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function m1(t){if(fe.isDocumentKey(t))throw new ae(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function J2(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Cf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe(12329,{type:typeof t})}function Rr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ae(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cf(t);throw new ae(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Su(t,e){if(!J2(t))throw new ae(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new ae(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=-62135596800,g1=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*g1);return new mt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<p1)throw new ae(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/g1}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Su(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-p1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:Xt("string",mt._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new mt(0,0))}static max(){return new be(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=-1;function fM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=be.fromTimestamp(r===1e9?new mt(n+1,0):new mt(n,r));return new Ha(i,fe.empty(),e)}function mM(t){return new Ha(t.readTime,t.key,Xc)}class Ha{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ha(be.min(),fe.empty(),Xc)}static max(){return new Ha(be.max(),fe.empty(),Xc)}}function pM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==gM)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):J.reject(n)}static resolve(e){return new J((n,r)=>{n(e)})}static reject(e){return new J((n,r)=>{r(e)})}static waitFor(e){return new J((n,r)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&n()},l=>r(l))}),s=!0,a===i&&n()})}static or(e){let n=J.resolve(!1);for(const r of e)n=n.next(i=>i?J.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new J((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let l=0;l<a;l++){const h=l;n(e[h]).next(u=>{s[h]=u,++o,o===a&&r(s)},u=>i(u))}})}static doWhile(e,n){return new J((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function yM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Al(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Nf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy=-1;function If(t){return t==null}function kd(t){return t===0&&1/t==-1/0}function _M(t){return typeof t=="number"&&Number.isInteger(t)&&!kd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="";function bM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=v1(e)),e=wM(t.get(n),e);return v1(e)}function wM(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case eA:n+="";break;default:n+=a}}return n}function v1(t){return t+eA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function es(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n){this.comparator=e,this.root=n||vn.EMPTY}insert(e,n){return new St(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fh(this.root,e,this.comparator,!0)}}class fh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vn{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??vn.RED,this.left=i??vn.EMPTY,this.right=a??vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new vn(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return vn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}vn.EMPTY=null,vn.RED=!0,vn.BLACK=!1;vn.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new vn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _1(this.data.getIterator())}getIteratorFrom(e){return new _1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zt(this.comparator);return n.data=e,n}}class _1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.fields=e,e.sort(_n.comparator)}static empty(){return new or([])}unionWith(e){let n=new Zt(_n.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new or(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ll(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new nA("Invalid base64 string: "+a):a}}(e);return new wn(n)}static fromUint8Array(e){const n=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new wn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const EM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qa(t){if(Ge(!!t,39018),typeof t=="string"){let e=0;const n=EM.exec(t);if(Ge(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Lt(t.seconds),nanos:Lt(t.nanos)}}function Lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ga(t){return typeof t=="string"?wn.fromBase64String(t):wn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="server_timestamp",iA="__type__",aA="__previous_value__",sA="__local_write_time__";function my(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[iA])===null||n===void 0?void 0:n.stringValue)===rA}function Df(t){const e=t.mapValue.fields[aA];return my(e)?Df(e):e}function Qc(t){const e=qa(t.mapValue.fields[sA].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,n,r,i,a,s,o,l,h,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=h,this.isUsingEmulator=u}}const fg="(default)";class Kc{constructor(e,n){this.projectId=e,this.database=n||fg}static empty(){return new Kc("","")}get isDefaultDatabase(){return this.database===fg}isEqual(e){return e instanceof Kc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="__type__",TM="__max__",mh={mapValue:{}},lA="__vector__",jd="value";function $a(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?my(t)?4:SM(t)?9007199254740991:AM(t)?10:11:pe(28295,{value:t})}function di(t,e){if(t===e)return!0;const n=$a(t);if(n!==$a(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qc(t).isEqual(Qc(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=qa(i.timestampValue),o=qa(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Ga(i.bytesValue).isEqual(Ga(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return Lt(i.geoPointValue.latitude)===Lt(a.geoPointValue.latitude)&&Lt(i.geoPointValue.longitude)===Lt(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Lt(i.integerValue)===Lt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=Lt(i.doubleValue),o=Lt(a.doubleValue);return s===o?kd(s)===kd(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return ll(t.arrayValue.values||[],e.arrayValue.values||[],di);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(y1(s)!==y1(o))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(o[l]===void 0||!di(s[l],o[l])))return!1;return!0}(t,e);default:return pe(52216,{left:t})}}function Wc(t,e){return(t.values||[]).find(n=>di(n,e))!==void 0}function cl(t,e){if(t===e)return 0;const n=$a(t),r=$a(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(a,s){const o=Lt(a.integerValue||a.doubleValue),l=Lt(s.integerValue||s.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return b1(t.timestampValue,e.timestampValue);case 4:return b1(Qc(t),Qc(e));case 5:return dg(t.stringValue,e.stringValue);case 6:return function(a,s){const o=Ga(a),l=Ga(s);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),l=s.split("/");for(let h=0;h<o.length&&h<l.length;h++){const u=Se(o[h],l[h]);if(u!==0)return u}return Se(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,s){const o=Se(Lt(a.latitude),Lt(s.latitude));return o!==0?o:Se(Lt(a.longitude),Lt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return w1(t.arrayValue,e.arrayValue);case 10:return function(a,s){var o,l,h,u;const d=a.fields||{},f=s.fields||{},p=(o=d[jd])===null||o===void 0?void 0:o.arrayValue,b=(l=f[jd])===null||l===void 0?void 0:l.arrayValue,A=Se(((h=p==null?void 0:p.values)===null||h===void 0?void 0:h.length)||0,((u=b==null?void 0:b.values)===null||u===void 0?void 0:u.length)||0);return A!==0?A:w1(p,b)}(t.mapValue,e.mapValue);case 11:return function(a,s){if(a===mh.mapValue&&s===mh.mapValue)return 0;if(a===mh.mapValue)return 1;if(s===mh.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),h=s.fields||{},u=Object.keys(h);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=dg(l[d],u[d]);if(f!==0)return f;const p=cl(o[l[d]],h[u[d]]);if(p!==0)return p}return Se(l.length,u.length)}(t.mapValue,e.mapValue);default:throw pe(23264,{le:n})}}function b1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=qa(t),r=qa(e),i=Se(n.seconds,r.seconds);return i!==0?i:Se(n.nanos,r.nanos)}function w1(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=cl(n[i],r[i]);if(a)return a}return Se(n.length,r.length)}function ul(t){return mg(t)}function mg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ga(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=mg(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${mg(n.fields[s])}`;return i+"}"}(t.mapValue):pe(61005,{value:t})}function zh(t){switch($a(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Df(t);return e?16+zh(e):16;case 5:return 2*t.stringValue.length;case 6:return Ga(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+zh(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return es(r.fields,(a,s)=>{i+=a.length+zh(s)}),i}(t.mapValue);default:throw pe(13486,{value:t})}}function E1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function pg(t){return!!t&&"integerValue"in t}function py(t){return!!t&&"arrayValue"in t}function x1(t){return!!t&&"nullValue"in t}function T1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bh(t){return!!t&&"mapValue"in t}function AM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[oA])===null||n===void 0?void 0:n.stringValue)===lA}function Sc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return es(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Sc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function SM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===TM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.value=e}static empty(){return new Qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Bh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sc(n)}setAll(e){let n=_n.emptyPath(),r={},i=[];e.forEach((s,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=Sc(s):i.push(o.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Bh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return di(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Bh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){es(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Qn(Sc(this.value))}}function cA(t){const e=[];return es(t.fields,(n,r)=>{const i=new _n([n]);if(Bh(r)){const a=cA(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new or(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Cn(e,0,be.min(),be.min(),be.min(),Qn.empty(),0)}static newFoundDocument(e,n,r,i){return new Cn(e,1,n,be.min(),r,i,0)}static newNoDocument(e,n){return new Cn(e,2,n,be.min(),be.min(),Qn.empty(),0)}static newUnknownDocument(e,n){return new Cn(e,3,n,be.min(),be.min(),Qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n){this.position=e,this.inclusive=n}}function A1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=fe.comparator(fe.fromName(s.referenceValue),n.key):r=cl(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function S1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!di(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n="asc"){this.field=e,this.dir=n}}function RM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{}class $t extends uA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new NM(e,n,r):n==="array-contains"?new OM(e,r):n==="in"?new MM(e,r):n==="not-in"?new kM(e,r):n==="array-contains-any"?new jM(e,r):new $t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new IM(e,r):new DM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(cl(n,this.value)):n!==null&&$a(this.value)===$a(n)&&this.matchesComparison(cl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fr extends uA{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Fr(e,n)}matches(e){return hA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function hA(t){return t.op==="and"}function dA(t){return CM(t)&&hA(t)}function CM(t){for(const e of t.filters)if(e instanceof Fr)return!1;return!0}function gg(t){if(t instanceof $t)return t.field.canonicalString()+t.op.toString()+ul(t.value);if(dA(t))return t.filters.map(e=>gg(e)).join(",");{const e=t.filters.map(n=>gg(n)).join(",");return`${t.op}(${e})`}}function fA(t,e){return t instanceof $t?function(r,i){return i instanceof $t&&r.op===i.op&&r.field.isEqual(i.field)&&di(r.value,i.value)}(t,e):t instanceof Fr?function(r,i){return i instanceof Fr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,s,o)=>a&&fA(s,i.filters[o]),!0):!1}(t,e):void pe(19439)}function mA(t){return t instanceof $t?function(n){return`${n.field.canonicalString()} ${n.op} ${ul(n.value)}`}(t):t instanceof Fr?function(n){return n.op.toString()+" {"+n.getFilters().map(mA).join(" ,")+"}"}(t):"Filter"}class NM extends $t{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class IM extends $t{constructor(e,n){super(e,"in",n),this.keys=pA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DM extends $t{constructor(e,n){super(e,"not-in",n),this.keys=pA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function pA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}class OM extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return py(n)&&Wc(n.arrayValue,this.value)}}class MM extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wc(this.value.arrayValue,n)}}class kM extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Wc(this.value.arrayValue,n)}}class jM extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!py(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Wc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Pe=null}}function R1(t,e=null,n=[],r=[],i=null,a=null,s=null){return new PM(t,e,n,r,i,a,s)}function gy(t){const e=we(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>gg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),If(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ul(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ul(r)).join(",")),e.Pe=n}return e.Pe}function vy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!RM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!S1(t.startAt,e.startAt)&&S1(t.endAt,e.endAt)}function vg(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function UM(t,e,n,r,i,a,s,o){return new Ru(t,e,n,r,i,a,s,o)}function Of(t){return new Ru(t)}function C1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gA(t){return t.collectionGroup!==null}function Rc(t){const e=we(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Zt(_n.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(o=o.add(h.field))})}),o})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Ud(a,r))}),n.has(_n.keyField().canonicalString())||e.Te.push(new Ud(_n.keyField(),r))}return e.Te}function si(t){const e=we(t);return e.Ie||(e.Ie=LM(e,Rc(t))),e.Ie}function LM(t,e){if(t.limitType==="F")return R1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Ud(i.field,a)});const n=t.endAt?new Pd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pd(t.startAt.position,t.startAt.inclusive):null;return R1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yg(t,e){const n=t.filters.concat([e]);return new Ru(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _g(t,e,n){return new Ru(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mf(t,e){return vy(si(t),si(e))&&t.limitType===e.limitType}function vA(t){return`${gy(si(t))}|lt:${t.limitType}`}function ho(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>mA(i)).join(", ")}]`),If(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ul(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ul(i)).join(",")),`Target(${r})`}(si(t))}; limitType=${t.limitType})`}function kf(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):fe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of Rc(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,o,l){const h=A1(s,o,l);return s.inclusive?h<=0:h<0}(r.startAt,Rc(r),i)||r.endAt&&!function(s,o,l){const h=A1(s,o,l);return s.inclusive?h>=0:h>0}(r.endAt,Rc(r),i))}(t,e)}function VM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yA(t){return(e,n)=>{let r=!1;for(const i of Rc(t)){const a=zM(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function zM(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(a,s,o){const l=s.data.field(a),h=o.data.field(a);return l!==null&&h!==null?cl(l,h):pe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){es(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return tA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=new St(fe.comparator);function Gi(){return BM}const _A=new St(fe.comparator);function sc(...t){let e=_A;for(const n of t)e=e.insert(n.key,n);return e}function bA(t){let e=_A;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gs(){return Cc()}function wA(){return Cc()}function Cc(){return new $s(t=>t.toString(),(t,e)=>t.isEqual(e))}const FM=new St(fe.comparator),HM=new Zt(fe.comparator);function ke(...t){let e=HM;for(const n of t)e=e.add(n);return e}const qM=new Zt(Se);function GM(){return qM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kd(e)?"-0":e}}function EA(t){return{integerValue:""+t}}function $M(t,e){return _M(e)?EA(e):yy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(){this._=void 0}}function YM(t,e,n){return t instanceof Ld?function(i,a){const s={fields:{[iA]:{stringValue:rA},[sA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&my(a)&&(a=Df(a)),a&&(s.fields[aA]=a),{mapValue:s}}(n,e):t instanceof Zc?TA(t,e):t instanceof Jc?AA(t,e):function(i,a){const s=xA(i,a),o=N1(s)+N1(i.Ee);return pg(s)&&pg(i.Ee)?EA(o):yy(i.serializer,o)}(t,e)}function XM(t,e,n){return t instanceof Zc?TA(t,e):t instanceof Jc?AA(t,e):n}function xA(t,e){return t instanceof Vd?function(r){return pg(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Ld extends jf{}class Zc extends jf{constructor(e){super(),this.elements=e}}function TA(t,e){const n=SA(e);for(const r of t.elements)n.some(i=>di(i,r))||n.push(r);return{arrayValue:{values:n}}}class Jc extends jf{constructor(e){super(),this.elements=e}}function AA(t,e){let n=SA(e);for(const r of t.elements)n=n.filter(i=>!di(i,r));return{arrayValue:{values:n}}}class Vd extends jf{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function N1(t){return Lt(t.integerValue||t.doubleValue)}function SA(t){return py(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function QM(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Zc&&i instanceof Zc||r instanceof Jc&&i instanceof Jc?ll(r.elements,i.elements,di):r instanceof Vd&&i instanceof Vd?di(r.Ee,i.Ee):r instanceof Ld&&i instanceof Ld}(t.transform,e.transform)}class KM{constructor(e,n){this.version=e,this.transformResults=n}}class fr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pf{}function RA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Uf(t.key,fr.none()):new Cu(t.key,t.data,fr.none());{const n=t.data,r=Qn.empty();let i=new Zt(_n.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new ts(t.key,r,new or(i.toArray()),fr.none())}}function WM(t,e,n){t instanceof Cu?function(i,a,s){const o=i.value.clone(),l=D1(i.fieldTransforms,a,s.transformResults);o.setAll(l),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof ts?function(i,a,s){if(!Fh(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=D1(i.fieldTransforms,a,s.transformResults),l=a.data;l.setAll(CA(i)),l.setAll(o),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Nc(t,e,n,r){return t instanceof Cu?function(a,s,o,l){if(!Fh(a.precondition,s))return o;const h=a.value.clone(),u=O1(a.fieldTransforms,l,s);return h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof ts?function(a,s,o,l){if(!Fh(a.precondition,s))return o;const h=O1(a.fieldTransforms,l,s),u=s.data;return u.setAll(CA(a)),u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(a,s,o){return Fh(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function ZM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=xA(r.transform,i||null);a!=null&&(n===null&&(n=Qn.empty()),n.set(r.field,a))}return n||null}function I1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ll(r,i,(a,s)=>QM(a,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cu extends Pf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ts extends Pf{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function CA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function D1(t,e,n){const r=new Map;Ge(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,XM(s,o,n[i]))}return r}function O1(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,YM(a,s,e))}return r}class Uf extends Pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JM extends Pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&WM(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Nc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Nc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=wA();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const l=RA(s,o);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&ll(this.mutations,e.mutations,(n,r)=>I1(n,r))&&ll(this.baseMutations,e.baseMutations,(n,r)=>I1(n,r))}}class _y{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ge(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return FM}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new _y(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,Le;function r6(t){switch(t){case Z.OK:return pe(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return pe(15467,{code:t})}}function NA(t){if(t===void 0)return qi("GRPC error has no .code"),Z.UNKNOWN;switch(t){case Ht.OK:return Z.OK;case Ht.CANCELLED:return Z.CANCELLED;case Ht.UNKNOWN:return Z.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return Z.INTERNAL;case Ht.UNAVAILABLE:return Z.UNAVAILABLE;case Ht.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Ht.NOT_FOUND:return Z.NOT_FOUND;case Ht.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Ht.ABORTED:return Z.ABORTED;case Ht.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Ht.DATA_LOSS:return Z.DATA_LOSS;default:return pe(39323,{code:t})}}(Le=Ht||(Ht={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=new Pa([4294967295,4294967295],0);function M1(t){const e=W2().encode(t),n=new H2;return n.update(e),new Uint8Array(n.digest())}function k1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Pa([n,r],0),new Pa([i,a],0)]}class by{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new oc(`Invalid padding: ${n}`);if(r<0)throw new oc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new oc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new oc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Pa.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Pa.fromNumber(r)));return i.compare(i6)===1&&(i=new Pa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=M1(e),[r,i]=k1(n);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);if(!this.ye(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new by(a,i,n);return r.forEach(o=>s.insert(o)),s}insert(e){if(this.fe===0)return;const n=M1(e),[r,i]=k1(n);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);this.we(s)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lf(be.min(),i,new St(Se),Gi(),ke())}}class Nu{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Nu(r,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class IA{constructor(e,n){this.targetId=e,this.De=n}}class DA{constructor(e,n,r=wn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class j1{constructor(){this.ve=0,this.Ce=P1(),this.Fe=wn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ke(),n=ke(),r=ke();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:pe(38017,{changeType:a})}}),new Nu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=P1()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ge(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class a6{constructor(e){this.We=e,this.Ge=new Map,this.ze=Gi(),this.je=ph(),this.Je=ph(),this.He=new St(Se)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const a=i.target;if(vg(a))if(r===0){const s=new fe(a.path);this.Xe(n,s,Cn.newNoDocument(s,be.min()))}else Ge(r===1,20013,{expectedCount:r});else{const s=this.ot(n);if(s!==r){const o=this._t(e),l=o?this.ut(o,e,s):1;if(l!==0){this.rt(n);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=Ga(r).toUint8Array()}catch(l){if(l instanceof nA)return Fa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new by(s,i,a)}catch(l){return Fa(l instanceof oc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.fe===0?null:o}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const s=this.We.lt(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.Xe(n,a,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((a,s)=>{const o=this.st(s);if(o){if(a.current&&vg(o.target)){const l=new fe(o.target.path);this.Tt(l).has(s)||this.It(s,l)||this.Xe(s,l,Cn.newNoDocument(l,e))}a.Ne&&(n.set(s,a.Le()),a.ke())}});let r=ke();this.Je.forEach((a,s)=>{let o=!0;s.forEachWhile(l=>{const h=this.st(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.ze.forEach((a,s)=>s.setReadTime(e));const i=new Lf(e,n,this.He,this.ze,r);return this.ze=Gi(),this.je=ph(),this.Je=ph(),this.He=new St(Se),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new j1,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Zt(Se),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Zt(Se),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new j1),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function ph(){return new St(fe.comparator)}function P1(){return new St(fe.comparator)}const s6={asc:"ASCENDING",desc:"DESCENDING"},o6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l6={and:"AND",or:"OR"};class c6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bg(t,e){return t.useProto3Json||If(e)?e:{value:e}}function zd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function u6(t,e){return zd(t,e.toTimestamp())}function oi(t){return Ge(!!t,49232),be.fromTimestamp(function(n){const r=qa(n);return new mt(r.seconds,r.nanos)}(t))}function wy(t,e){return wg(t,e).canonicalString()}function wg(t,e){const n=function(i){return new ct(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function MA(t){const e=ct.fromString(t);return Ge(LA(e),10190,{key:e.toString()}),e}function Eg(t,e){return wy(t.databaseId,e.path)}function qm(t,e){const n=MA(e);if(n.get(1)!==t.databaseId.projectId)throw new ae(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ae(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(jA(n))}function kA(t,e){return wy(t.databaseId,e)}function h6(t){const e=MA(t);return e.length===4?ct.emptyPath():jA(e)}function xg(t){return new ct(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jA(t){return Ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function U1(t,e,n){return{name:Eg(t,e),fields:n.value.mapValue.fields}}function d6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:pe(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(h,u){return h.useProto3Json?(Ge(u===void 0||typeof u=="string",58123),wn.fromBase64String(u||"")):(Ge(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),wn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(h){const u=h.code===void 0?Z.UNKNOWN:NA(h.code);return new ae(u,h.message||"")}(s);n=new DA(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=qm(t,r.document.name),a=oi(r.document.updateTime),s=r.document.createTime?oi(r.document.createTime):be.min(),o=new Qn({mapValue:{fields:r.document.fields}}),l=Cn.newFoundDocument(i,a,s,o),h=r.targetIds||[],u=r.removedTargetIds||[];n=new Hh(h,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=qm(t,r.document),a=r.readTime?oi(r.readTime):be.min(),s=Cn.newNoDocument(i,a),o=r.removedTargetIds||[];n=new Hh([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=qm(t,r.document),a=r.removedTargetIds||[];n=new Hh([],a,i,null)}else{if(!("filter"in e))return pe(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new n6(i,a),o=r.targetId;n=new IA(o,s)}}return n}function f6(t,e){let n;if(e instanceof Cu)n={update:U1(t,e.key,e.value)};else if(e instanceof Uf)n={delete:Eg(t,e.key)};else if(e instanceof ts)n={update:U1(t,e.key,e.data),updateMask:E6(e.fieldMask)};else{if(!(e instanceof JM))return pe(16599,{Rt:e.type});n={verify:Eg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,s){const o=s.transform;if(o instanceof Ld)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Zc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Jc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Vd)return{fieldPath:s.field.canonicalString(),increment:o.Ee};throw pe(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:u6(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:pe(27497)}(t,e.precondition)),n}function m6(t,e){return t&&t.length>0?(Ge(e!==void 0,14353),t.map(n=>function(i,a){let s=i.updateTime?oi(i.updateTime):oi(a);return s.isEqual(be.min())&&(s=oi(a)),new KM(s,i.transformResults||[])}(n,e))):[]}function p6(t,e){return{documents:[kA(t,e.path)]}}function g6(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kA(t,i);const a=function(h){if(h.length!==0)return UA(Fr.create(h,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const s=function(h){if(h.length!==0)return h.map(u=>function(f){return{field:fo(f.field),direction:_6(f.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=bg(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{Vt:n,parent:i}}function v6(t){let e=h6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ge(r===1,65062);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let a=[];n.where&&(a=function(d){const f=PA(d);return f instanceof Fr&&dA(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(f=>function(b){return new Ud(mo(b.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(d){let f;return f=typeof d=="object"?d.value:d,If(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new Pd(p,f)}(n.startAt));let h=null;return n.endAt&&(h=function(d){const f=!d.before,p=d.values||[];return new Pd(p,f)}(n.endAt)),UM(e,i,s,a,o,"F",l,h)}function y6(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function PA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=mo(n.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=mo(n.unaryFilter.field);return $t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=mo(n.unaryFilter.field);return $t.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=mo(n.unaryFilter.field);return $t.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}}(t):t.fieldFilter!==void 0?function(n){return $t.create(mo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Fr.create(n.compositeFilter.filters.map(r=>PA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pe(1026)}}(n.compositeFilter.op))}(t):pe(30097,{filter:t})}function _6(t){return s6[t]}function b6(t){return o6[t]}function w6(t){return l6[t]}function fo(t){return{fieldPath:t.canonicalString()}}function mo(t){return _n.fromServerFormat(t.fieldPath)}function UA(t){return t instanceof $t?function(n){if(n.op==="=="){if(T1(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NAN"}};if(x1(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(T1(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NAN"}};if(x1(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(n.field),op:b6(n.op),value:n.value}}}(t):t instanceof Fr?function(n){const r=n.getFilters().map(i=>UA(i));return r.length===1?r[0]:{compositeFilter:{op:w6(n.op),filters:r}}}(t):pe(54877,{filter:t})}function E6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function LA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n,r,i,a=be.min(),s=be.min(),o=wn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Ea(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e){this.gt=e}}function T6(t){const e=v6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_g(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(){this.Dn=new S6}addToCollectionParentIndex(e,n){return this.Dn.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(Ha.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(Ha.min())}updateCollectionGroup(e,n,r){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class S6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Zt(ct.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VA=41943040;class $n{static withCacheSize(e){return new $n(e,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n.DEFAULT_COLLECTION_PERCENTILE=10,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$n.DEFAULT=new $n(VA,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$n.DISABLED=new $n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new hl(0)}static ur(){return new hl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="LruGarbageCollector",R6=1048576;function z1([t,e],[n,r]){const i=Se(t,n);return i===0?Se(e,r):i}class C6{constructor(e){this.Tr=e,this.buffer=new Zt(z1),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();z1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class N6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){se(V1,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Al(n)?se(V1,"Ignoring IndexedDB error during garbage collection: ",n):await Tl(n)}await this.Rr(3e5)})}}class I6{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return J.resolve(Nf.ue);const r=new C6(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(L1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),L1):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,a,s,o,l,h;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,o=Date.now(),this.removeTargets(e,r,n))).next(d=>(a=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(h=Date.now(),uo()<=Me.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(h-l)+`ms
Total Duration: ${h-u}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:d})))}}function D6(t,e){return new I6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(){this.changes=new $s(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?J.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Nc(r.mutation,i,or.empty(),mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ke()){const i=gs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let s=sc();return a.forEach((o,l)=>{s=s.insert(o,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ke()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{n.set(s,o)})})}computeViews(e,n,r,i){let a=Gi();const s=Cc(),o=function(){return Cc()}();return n.forEach((l,h)=>{const u=r.get(h.key);i.has(h.key)&&(u===void 0||u.mutation instanceof ts)?a=a.insert(h.key,h):u!==void 0?(s.set(h.key,u.mutation.getFieldMask()),Nc(u.mutation,h,u.mutation.getFieldMask(),mt.now())):s.set(h.key,or.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((h,u)=>s.set(h,u)),n.forEach((h,u)=>{var d;return o.set(h,new M6(u,(d=s.get(h))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,n){const r=Cc();let i=new St((s,o)=>s-o),a=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const o of s)o.keys().forEach(l=>{const h=n.get(l);if(h===null)return;let u=r.get(l)||or.empty();u=o.applyToLocalView(h,u),r.set(l,u);const d=(i.get(o.batchId)||ke()).add(l);i=i.insert(o.batchId,d)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),h=l.key,u=l.value,d=wA();u.forEach(f=>{if(!a.has(f)){const p=RA(n.get(f),r.get(f));p!==null&&d.set(f,p),a=a.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,h,d))}return J.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return fe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):J.resolve(gs());let o=Xc,l=a;return s.next(h=>J.forEach(h,(u,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),a.get(u)?J.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,h,a)).next(()=>this.computeViews(e,l,h,ke())).next(u=>({batchId:o,changes:bA(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let i=sc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=sc();return this.indexManager.getCollectionParents(e,a).next(o=>J.forEach(o,l=>{const h=function(d,f){return new Ru(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(u=>{u.forEach((d,f)=>{s=s.insert(d,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(s=>{a.forEach((l,h)=>{const u=h.getKey();s.get(u)===null&&(s=s.insert(u,Cn.newInvalidDocument(u)))});let o=sc();return s.forEach((l,h)=>{const u=a.get(l);u!==void 0&&Nc(u.mutation,h,or.empty(),mt.now()),kf(n,h)&&(o=o.insert(l,h))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return J.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:oi(i.createTime)}}(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:T6(i.bundledQuery),readTime:oi(i.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(){this.overlays=new St(fe.comparator),this.kr=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const r=gs();return J.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.wt(e,n,a)}),J.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),J.resolve()}getOverlaysForCollection(e,n,r){const i=gs(),a=n.length+1,s=new fe(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const l=o.getNext().value,h=l.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&l.largestBatchId>r&&i.set(l.getKey(),l)}return J.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new St((h,u)=>h-u);const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let u=a.get(h.largestBatchId);u===null&&(u=gs(),a=a.insert(h.largestBatchId,u)),u.set(h.getKey(),h)}}const o=gs(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,u)=>o.set(h,u)),!(o.size()>=i)););return J.resolve(o)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new t6(n,r));let a=this.kr.get(n);a===void 0&&(a=ke(),this.kr.set(n,a)),this.kr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(){this.qr=new Zt(an.Qr),this.$r=new Zt(an.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new an(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new an(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new fe(new ct([])),r=new an(n,e),i=new an(n,e+1),a=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),a.push(s.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new fe(new ct([])),r=new an(n,e),i=new an(n,e+1);let a=ke();return this.$r.forEachInRange([r,i],s=>{a=a.add(s.key)}),a}containsKey(e){const n=new an(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class an{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return fe.comparator(e.key,n.key)||Se(e.Hr,n.Hr)}static Ur(e,n){return Se(e.Hr,n.Hr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Zt(an.Qr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new e6(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.Yr=this.Yr.add(new an(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return J.resolve(s)}lookupMutationBatch(e,n){return J.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return J.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?fy:this.er-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new an(n,0),i=new an(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],s=>{const o=this.Zr(s.Hr);a.push(o)}),J.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Zt(Se);return n.forEach(i=>{const a=new an(i,0),s=new an(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,s],o=>{r=r.add(o.Hr)})}),J.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;fe.isDocumentKey(a)||(a=a.child(""));const s=new an(new fe(a),0);let o=new Zt(Se);return this.Yr.forEachWhile(l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(o=o.add(l.Hr)),!0)},s),J.resolve(this.ei(o))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ge(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return J.forEach(n.mutations,i=>{const a=new an(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new an(n,0),i=this.Yr.firstAfterOrEqual(r);return J.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e){this.ni=e,this.docs=function(){return new St(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return J.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(n))}getEntries(e,n){let r=Gi();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Cn.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=Gi();const s=n.path,o=new fe(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:h,value:{document:u}}=l.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||pM(mM(u),r)<=0||(i.has(u.key)||kf(n,u))&&(a=a.insert(u.key,u.mutableCopy()))}return J.resolve(a)}getAllFromCollectionGroup(e,n,r,i){pe(9500)}ri(e,n){return J.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new z6(this)}getSize(e){return J.resolve(this.size)}}class z6 extends O6{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),J.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e){this.persistence=e,this.ii=new $s(n=>gy(n),vy),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.si=0,this.oi=new Ey,this.targetCount=0,this._i=hl.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),J.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new hl(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.hr(n),J.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ii.forEach((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.ii.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),J.waitFor(a).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return J.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),J.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),J.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return J.resolve(r)}containsKey(e,n){return J.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n){this.ai={},this.overlays={},this.ui=new Nf(0),this.ci=!1,this.ci=!0,this.li=new U6,this.referenceDelegate=e(this),this.hi=new B6(this),this.indexManager=new A6,this.remoteDocumentCache=function(i){return new V6(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new x6(n),this.Ti=new j6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new P6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new L6(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const i=new F6(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,n){return J.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class F6 extends vM{constructor(e){super(),this.currentSequenceNumber=e}}class xy{constructor(e){this.persistence=e,this.Ai=new Ey,this.Ri=null}static Vi(e){return new xy(e)}get mi(){if(this.Ri)return this.Ri;throw pe(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),J.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),J.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.mi,r=>{const i=fe.fromPath(r);return this.fi(e,i).next(a=>{a||n.removeEntry(i,be.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return J.or([()=>J.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Bd{constructor(e,n){this.persistence=e,this.gi=new $s(r=>bM(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=D6(this,n)}static Vi(e,n){return new Bd(e,n)}Ii(){}di(e){return J.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return J.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?J.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(o=>{o||(r++,a.removeEntry(s,be.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),J.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),J.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zh(e.data.value)),n}Sr(e,n,r){return J.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return J.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ke(),i=ke();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Ty(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return kD()?8:yM(Dn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ps(e,n).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.ys(e,n,i,r).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new H6;return this.ws(e,n,s).next(o=>{if(a.result=o,this.Rs)return this.Ss(e,n,s,o.size)})}).next(()=>a.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(uo()<=Me.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),J.resolve()):(uo()<=Me.DEBUG&&se("QueryEngine","Query:",ho(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(uo()<=Me.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(n))):J.resolve())}ps(e,n){if(C1(n))return J.resolve(null);let r=si(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=_g(n,null,"F"),r=si(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const s=ke(...a);return this.gs.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const h=this.bs(n,o);return this.Ds(n,h,s,l.readTime)?this.ps(e,_g(n,null,"F")):this.vs(e,h,n,l)}))})))}ys(e,n,r,i){return C1(n)||i.isEqual(be.min())?J.resolve(null):this.gs.getDocuments(e,r).next(a=>{const s=this.bs(n,a);return this.Ds(n,s,r,i)?J.resolve(null):(uo()<=Me.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ho(n)),this.vs(e,s,n,fM(i,Xc)).next(o=>o))})}bs(e,n){let r=new Zt(yA(e));return n.forEach((i,a)=>{kf(e,a)&&(r=r.add(a))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,n,r){return uo()<=Me.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",ho(n)),this.gs.getDocumentsMatchingQuery(e,n,Ha.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="LocalStore",G6=3e8;class $6{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new St(Se),this.Ms=new $s(a=>gy(a),vy),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new k6(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Y6(t,e,n,r){return new $6(t,e,n,r)}async function BA(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const s=[],o=[];let l=ke();for(const h of i){s.push(h.batchId);for(const u of h.mutations)l=l.add(u.key)}for(const h of a){o.push(h.batchId);for(const u of h.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(h=>({Bs:h,removedBatchIds:s,addedBatchIds:o}))})})}function X6(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return function(o,l,h,u){const d=h.batch,f=d.keys();let p=J.resolve();return f.forEach(b=>{p=p.next(()=>u.getEntry(l,b)).next(A=>{const D=h.docVersions.get(b);Ge(D!==null,48541),A.version.compareTo(D)<0&&(d.applyToRemoteDocument(A,h),A.isValidDocument()&&(A.setReadTime(h.commitVersion),u.addEntry(A)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=ke();for(let h=0;h<o.mutationResults.length;++h)o.mutationResults[h].transformResults.length>0&&(l=l.add(o.batch.mutations[h].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function FA(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Q6(t,e){const n=we(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const o=[];e.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;o.push(n.hi.removeMatchingKeys(a,u.removedDocuments,d).next(()=>n.hi.addMatchingKeys(a,u.addedDocuments,d)));let p=f.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(wn.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(d,p),function(A,D,w){return A.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=G6?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,p,u)&&o.push(n.hi.updateTargetData(a,p))});let l=Gi(),h=ke();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,u))}),o.push(K6(a,s,e.documentUpdates).next(u=>{l=u.Ls,h=u.ks})),!r.isEqual(be.min())){const u=n.hi.getLastRemoteSnapshotVersion(a).next(d=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(u)}return J.waitFor(o).next(()=>s.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,l,h)).next(()=>l)}).then(a=>(n.Fs=i,a))}function K6(t,e,n){let r=ke(),i=ke();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let s=Gi();return n.forEach((o,l)=>{const h=a.get(o);l.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(be.min())?(e.removeEntry(o,l.readTime),s=s.insert(o,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),s=s.insert(o,l)):se(Ay,"Ignoring outdated watch update for ",o,". Current version:",h.version," Watch version:",l.version)}),{Ls:s,ks:i}})}function W6(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=fy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Z6(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(a=>a?(i=a,J.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Ea(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Tg(t,e,n){const r=we(t),i=r.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Al(s))throw s;se(Ay,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function B1(t,e,n){const r=we(t);let i=be.min(),a=ke();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,h,u){const d=we(l),f=d.Ms.get(u);return f!==void 0?J.resolve(d.Fs.get(f)):d.hi.getTargetData(h,u)}(r,s,si(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,o.targetId).next(l=>{a=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:be.min(),n?a:ke())).next(o=>(J6(r,VM(e),o),{documents:o,qs:a})))}function J6(t,e,n){let r=t.xs.get(e)||be.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.xs.set(e,r)}class F1{constructor(){this.activeTargetIds=GM()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ek{constructor(){this.Fo=new F1,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new F1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="ConnectivityMonitor";class q1{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){se(H1,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){se(H1,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh=null;function Ag(){return gh===null?gh=function(){return 268435456+Math.round(2147483648*Math.random())}():gh++,"0x"+gh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="RestConnection",nk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rk{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===fg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const s=Ag(),o=this.Go(e,n.toUriEncodedString());se(Gm,`Sending RPC '${e}' ${s}:`,o,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,a);const{host:h}=new URL(o),u=Yi(h);return this.jo(e,o,l,r,u).then(d=>(se(Gm,`Received RPC '${e}' ${s}: `,d),d),d=>{throw Fa(Gm,`RPC '${e}' ${s} failed with error: `,d,"url: ",o,"request:",r),d})}Jo(e,n,r,i,a,s){return this.Wo(e,n,r,i,a)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,n){const r=nk[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class ak extends rk{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,a){const s=Ag();return new Promise((o,l)=>{const h=new q2;h.setWithCredentials(!0),h.listenOnce(G2.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Vh.NO_ERROR:const d=h.getResponseJson();se(Sn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Vh.TIMEOUT:se(Sn,`RPC '${e}' ${s} timed out`),l(new ae(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Vh.HTTP_ERROR:const f=h.getStatus();if(se(Sn,`RPC '${e}' ${s} failed with status:`,f,"response text:",h.getResponseText()),f>0){let p=h.getResponseJson();Array.isArray(p)&&(p=p[0]);const b=p==null?void 0:p.error;if(b&&b.status&&b.message){const A=function(w){const T=w.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(T)>=0?T:Z.UNKNOWN}(b.status);l(new ae(A,b.message))}else l(new ae(Z.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new ae(Z.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{c_:e,streamId:s,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{se(Sn,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);se(Sn,`RPC '${e}' ${s} sending request:`,i),h.send(n,"POST",u,r,15)})}P_(e,n,r){const i=Ag(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=X2(),o=Y2(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=a.join("");se(Sn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=s.createWebChannel(u,l);this.T_(d);let f=!1,p=!1;const b=new ik({Ho:D=>{p?se(Sn,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(f||(se(Sn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),se(Sn,`RPC '${e}' stream ${i} sending:`,D),d.send(D))},Yo:()=>d.close()}),A=(D,w,T)=>{D.listen(w,N=>{try{T(N)}catch(O){setTimeout(()=>{throw O},0)}})};return A(d,ac.EventType.OPEN,()=>{p||(se(Sn,`RPC '${e}' stream ${i} transport opened.`),b.s_())}),A(d,ac.EventType.CLOSE,()=>{p||(p=!0,se(Sn,`RPC '${e}' stream ${i} transport closed`),b.__(),this.I_(d))}),A(d,ac.EventType.ERROR,D=>{p||(p=!0,Fa(Sn,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),b.__(new ae(Z.UNAVAILABLE,"The operation could not be completed")))}),A(d,ac.EventType.MESSAGE,D=>{var w;if(!p){const T=D.data[0];Ge(!!T,16349);const N=T,O=(N==null?void 0:N.error)||((w=N[0])===null||w===void 0?void 0:w.error);if(O){se(Sn,`RPC '${e}' stream ${i} received error:`,O);const P=O.status;let R=function(y){const x=Ht[y];if(x!==void 0)return NA(x)}(P),_=O.message;R===void 0&&(R=Z.INTERNAL,_="Unknown error status: "+P+" with message "+O.message),p=!0,b.__(new ae(R,_)),d.close()}else se(Sn,`RPC '${e}' stream ${i} received:`,T),b.a_(T)}}),A(o,$2.STAT_EVENT,D=>{D.stat===hg.PROXY?se(Sn,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===hg.NOPROXY&&se(Sn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.o_()},0),b}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function $m(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(t){return new c6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="PersistentStream";class qA{constructor(e,n,r,i,a,s,o,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new HA(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(qi(n.toString()),qi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new ae(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return se(G1,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(se(G1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sk extends qA{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=d6(this.serializer,e),r=function(a){if(!("targetChange"in a))return be.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?be.min():s.readTime?oi(s.readTime):be.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=xg(this.serializer),n.addTarget=function(a,s){let o;const l=s.target;if(o=vg(l)?{documents:p6(a,l)}:{query:g6(a,l).Vt},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=OA(a,s.resumeToken);const h=bg(a,s.expectedCount);h!==null&&(o.expectedCount=h)}else if(s.snapshotVersion.compareTo(be.min())>0){o.readTime=zd(a,s.snapshotVersion.toTimestamp());const h=bg(a,s.expectedCount);h!==null&&(o.expectedCount=h)}return o}(this.serializer,e);const r=y6(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=xg(this.serializer),n.removeTarget=e,this.k_(n)}}class ok extends qA{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=m6(e.writeResults,e.commitTime),r=oi(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=xg(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>f6(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{}class ck extends lk{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ae(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Wo(e,wg(n,r),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ae(Z.UNKNOWN,a.toString())})}Jo(e,n,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Jo(e,wg(n,r),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ae(Z.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class uk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(qi(n),this._a=!1):se("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="RemoteStore";class hk{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Ys(this)&&(se(Ps,"Restarting streams for network reachability change."),await async function(l){const h=we(l);h.Ia.add(4),await Iu(h),h.Aa.set("Unknown"),h.Ia.delete(4),await zf(h)}(this))})}),this.Aa=new uk(r,i)}}async function zf(t){if(Ys(t))for(const e of t.da)await e(!0)}async function Iu(t){for(const e of t.da)await e(!1)}function GA(t,e){const n=we(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Ny(n)?Cy(n):Sl(n).x_()&&Ry(n,e))}function Sy(t,e){const n=we(t),r=Sl(n);n.Ta.delete(e),r.x_()&&$A(n,e),n.Ta.size===0&&(r.x_()?r.B_():Ys(n)&&n.Aa.set("Unknown"))}function Ry(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sl(t).H_(e)}function $A(t,e){t.Ra.$e(e),Sl(t).Y_(e)}function Cy(t){t.Ra=new a6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Sl(t).start(),t.Aa.aa()}function Ny(t){return Ys(t)&&!Sl(t).M_()&&t.Ta.size>0}function Ys(t){return we(t).Ia.size===0}function YA(t){t.Ra=void 0}async function dk(t){t.Aa.set("Online")}async function fk(t){t.Ta.forEach((e,n)=>{Ry(t,e)})}async function mk(t,e){YA(t),Ny(t)?(t.Aa.la(e),Cy(t)):t.Aa.set("Unknown")}async function pk(t,e,n){if(t.Aa.set("Online"),e instanceof DA&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ta.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ta.delete(o),i.Ra.removeTarget(o))}(t,e)}catch(r){se(Ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fd(t,r)}else if(e instanceof Hh?t.Ra.Ye(e):e instanceof IA?t.Ra.it(e):t.Ra.et(e),!n.isEqual(be.min()))try{const r=await FA(t.localStore);n.compareTo(r)>=0&&await function(a,s){const o=a.Ra.Pt(s);return o.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const u=a.Ta.get(h);u&&a.Ta.set(h,u.withResumeToken(l.resumeToken,s))}}),o.targetMismatches.forEach((l,h)=>{const u=a.Ta.get(l);if(!u)return;a.Ta.set(l,u.withResumeToken(wn.EMPTY_BYTE_STRING,u.snapshotVersion)),$A(a,l);const d=new Ea(u.target,l,h,u.sequenceNumber);Ry(a,d)}),a.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){se(Ps,"Failed to raise snapshot:",r),await Fd(t,r)}}async function Fd(t,e,n){if(!Al(e))throw e;t.Ia.add(1),await Iu(t),t.Aa.set("Offline"),n||(n=()=>FA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se(Ps,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await zf(t)})}function XA(t,e){return e().catch(n=>Fd(t,n,e))}async function Bf(t){const e=we(t),n=Ya(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:fy;for(;gk(e);)try{const i=await W6(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,vk(e,i)}catch(i){await Fd(e,i)}QA(e)&&KA(e)}function gk(t){return Ys(t)&&t.Pa.length<10}function vk(t,e){t.Pa.push(e);const n=Ya(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function QA(t){return Ys(t)&&!Ya(t).M_()&&t.Pa.length>0}function KA(t){Ya(t).start()}async function yk(t){Ya(t).na()}async function _k(t){const e=Ya(t);for(const n of t.Pa)e.X_(n.mutations)}async function bk(t,e,n){const r=t.Pa.shift(),i=_y.from(r,e,n);await XA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Bf(t)}async function wk(t,e){e&&Ya(t).Z_&&await async function(r,i){if(function(s){return r6(s)&&s!==Z.ABORTED}(i.code)){const a=r.Pa.shift();Ya(r).N_(),await XA(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Bf(r)}}(t,e),QA(t)&&KA(t)}async function $1(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),se(Ps,"RemoteStore received new credentials");const r=Ys(n);n.Ia.add(3),await Iu(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await zf(n)}async function Ek(t,e){const n=we(t);e?(n.Ia.delete(2),await zf(n)):e||(n.Ia.add(2),await Iu(n),n.Aa.set("Unknown"))}function Sl(t){return t.Va||(t.Va=function(n,r,i){const a=we(n);return a.ia(),new sk(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:dk.bind(null,t),e_:fk.bind(null,t),n_:mk.bind(null,t),J_:pk.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Ny(t)?Cy(t):t.Aa.set("Unknown")):(await t.Va.stop(),YA(t))})),t.Va}function Ya(t){return t.ma||(t.ma=function(n,r,i){const a=we(n);return a.ia(),new ok(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:yk.bind(null,t),n_:wk.bind(null,t),ea:_k.bind(null,t),ta:bk.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Bf(t)):(await t.ma.stop(),t.Pa.length>0&&(se(Ps,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new Iy(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dy(t,e){if(qi("AsyncQueue",`${e}: ${t}`),Al(t))return new ae(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{static emptySet(e){return new Ho(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=sc(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ho;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.fa=new St(fe.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):pe(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class dl{constructor(e,n,r,i,a,s,o,l,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new dl(e,n,Ho.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Tk{constructor(){this.queries=X1(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=we(n),a=i.queries;i.queries=X1(),a.forEach((s,o)=>{for(const l of o.wa)l.onError(r)})})(this,new ae(Z.ABORTED,"Firestore shutting down"))}}function X1(){return new $s(t=>vA(t),Mf)}async function Oy(t,e){const n=we(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new xk,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await n.onListen(i,!0);break;case 1:a.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=Dy(s,`Initialization of query '${ho(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&ky(n)}async function My(t,e){const n=we(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.wa.indexOf(e);s>=0&&(a.wa.splice(s,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ak(t,e){const n=we(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.wa)o.Ca(i)&&(r=!0);s.ya=i}}r&&ky(n)}function Sk(t,e,n){const r=we(t),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(n);r.queries.delete(e)}function ky(t){t.Da.forEach(e=>{e.next()})}var Sg,Q1;(Q1=Sg||(Sg={})).Fa="default",Q1.Cache="cache";class jy{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new dl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=dl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Sg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.key=e}}class ZA{constructor(e){this.key=e}}class Rk{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ke(),this.mutatedKeys=ke(),this.Xa=yA(e),this.eu=new Ho(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Y1,i=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const f=i.get(u),p=kf(this.query,d)?d:null,b=!!f&&this.mutatedKeys.has(f.key),A=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let D=!1;f&&p?f.data.isEqual(p.data)?b!==A&&(r.track({type:3,doc:p}),D=!0):this.iu(f,p)||(r.track({type:2,doc:p}),D=!0,(l&&this.Xa(p,l)>0||h&&this.Xa(p,h)<0)&&(o=!0)):!f&&p?(r.track({type:0,doc:p}),D=!0):f&&!p&&(r.track({type:1,doc:f}),D=!0,(l||h)&&(o=!0)),D&&(p?(s=s.add(p),a=A?a.add(u):a.delete(u)):(s=s.delete(u),a=a.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),a=a.delete(u.key),r.track({type:1,doc:u})}return{eu:s,ru:r,Ds:o,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((u,d)=>function(p,b){const A=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{At:D})}};return A(p)-A(b)}(u.type,d.type)||this.Xa(u.doc,d.doc)),this.su(r),i=i!=null&&i;const o=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,h=l!==this.Ya;return this.Ya=l,s.length!==0||h?{snapshot:new dl(this.query,e.eu,a,s,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Y1,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ke(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new ZA(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new WA(r))}),n}uu(e){this.Ha=e.qs,this.Za=ke();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return dl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Py="SyncEngine";class Ck{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Nk{constructor(e){this.key=e,this.lu=!1}}class Ik{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new $s(o=>vA(o),Mf),this.Tu=new Map,this.Iu=new Set,this.du=new St(fe.comparator),this.Eu=new Map,this.Au=new Ey,this.Ru={},this.Vu=new Map,this.mu=hl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Dk(t,e,n=!0){const r=iS(t);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await JA(r,e,n,!0),i}async function Ok(t,e){const n=iS(t);await JA(n,e,!0,!1)}async function JA(t,e,n,r){const i=await Z6(t.localStore,si(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await Mk(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&GA(t.remoteStore,i),o}async function Mk(t,e,n,r,i){t.gu=(d,f,p)=>async function(A,D,w,T){let N=D.view.nu(w);N.Ds&&(N=await B1(A.localStore,D.query,!1).then(({documents:_})=>D.view.nu(_,N)));const O=T&&T.targetChanges.get(D.targetId),P=T&&T.targetMismatches.get(D.targetId)!=null,R=D.view.applyChanges(N,A.isPrimaryClient,O,P);return W1(A,D.targetId,R._u),R.snapshot}(t,d,f,p);const a=await B1(t.localStore,e,!0),s=new Rk(e,a.qs),o=s.nu(a.documents),l=Nu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=s.applyChanges(o,t.isPrimaryClient,l);W1(t,n,h._u);const u=new Ck(e,n,s);return t.Pu.set(e,u),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function kk(t,e,n){const r=we(t),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(s=>!Mf(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Tg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Sy(r.remoteStore,i.targetId),Rg(r,i.targetId)}).catch(Tl)):(Rg(r,i.targetId),await Tg(r.localStore,i.targetId,!0))}async function jk(t,e){const n=we(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Sy(n.remoteStore,r.targetId))}async function Pk(t,e,n){const r=Hk(t);try{const i=await function(s,o){const l=we(s),h=mt.now(),u=o.reduce((p,b)=>p.add(b.key),ke());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let b=Gi(),A=ke();return l.Os.getEntries(p,u).next(D=>{b=D,b.forEach((w,T)=>{T.isValidDocument()||(A=A.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,b)).next(D=>{d=D;const w=[];for(const T of o){const N=ZM(T,d.get(T.key).overlayedDocument);N!=null&&w.push(new ts(T.key,N,cA(N.value.mapValue),fr.exists(!0)))}return l.mutationQueue.addMutationBatch(p,h,w,o)}).next(D=>{f=D;const w=D.applyToLocalDocumentSet(d,A);return l.documentOverlayCache.saveOverlays(p,D.batchId,w)})}).then(()=>({batchId:f.batchId,changes:bA(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,l){let h=s.Ru[s.currentUser.toKey()];h||(h=new St(Se)),h=h.insert(o,l),s.Ru[s.currentUser.toKey()]=h}(r,i.batchId,n),await Du(r,i.changes),await Bf(r.remoteStore)}catch(i){const a=Dy(i,"Failed to persist write");n.reject(a)}}async function eS(t,e){const n=we(t);try{const r=await Q6(n.localStore,e);e.targetChanges.forEach((i,a)=>{const s=n.Eu.get(a);s&&(Ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ge(s.lu,14607):i.removedDocuments.size>0&&(Ge(s.lu,42227),s.lu=!1))}),await Du(n,r,e)}catch(r){await Tl(r)}}function K1(t,e,n){const r=we(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const l=we(s);l.onlineState=o;let h=!1;l.queries.forEach((u,d)=>{for(const f of d.wa)f.va(o)&&(h=!0)}),h&&ky(l)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Uk(t,e,n){const r=we(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),a=i&&i.key;if(a){let s=new St(fe.comparator);s=s.insert(a,Cn.newNoDocument(a,be.min()));const o=ke().add(a),l=new Lf(be.min(),new Map,new St(Se),s,o);await eS(r,l),r.du=r.du.remove(a),r.Eu.delete(e),Uy(r)}else await Tg(r.localStore,e,!1).then(()=>Rg(r,e,n)).catch(Tl)}async function Lk(t,e){const n=we(t),r=e.batch.batchId;try{const i=await X6(n.localStore,e);nS(n,r,null),tS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Du(n,i)}catch(i){await Tl(i)}}async function Vk(t,e,n){const r=we(t);try{const i=await function(s,o){const l=we(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let u;return l.mutationQueue.lookupMutationBatch(h,o).next(d=>(Ge(d!==null,37113),u=d.keys(),l.mutationQueue.removeMutationBatch(h,d))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,u)).next(()=>l.localDocuments.getDocuments(h,u))})}(r.localStore,e);nS(r,e,n),tS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Du(r,i)}catch(i){await Tl(i)}}function tS(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function nS(t,e,n){const r=we(t);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Rg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||rS(t,r)})}function rS(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Sy(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Uy(t))}function W1(t,e,n){for(const r of n)r instanceof WA?(t.Au.addReference(r.key,e),zk(t,r)):r instanceof ZA?(se(Py,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||rS(t,r.key)):pe(19791,{yu:r})}function zk(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(se(Py,"New document in limbo: "+n),t.Iu.add(r),Uy(t))}function Uy(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new fe(ct.fromString(e)),r=t.mu.next();t.Eu.set(r,new Nk(n)),t.du=t.du.insert(n,r),GA(t.remoteStore,new Ea(si(Of(n.path)),r,"TargetPurposeLimboResolution",Nf.ue))}}async function Du(t,e,n){const r=we(t),i=[],a=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((o,l)=>{s.push(r.gu(l,e,n).then(h=>{var u;if((h||n)&&r.isPrimaryClient){const d=h?!h.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(h){i.push(h);const d=Ty.Es(l.targetId,h);a.push(d)}}))}),await Promise.all(s),r.hu.J_(i),await async function(l,h){const u=we(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>J.forEach(h,f=>J.forEach(f.Is,p=>u.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>J.forEach(f.ds,p=>u.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!Al(d))throw d;se(Ay,"Failed to update sequence numbers: "+d)}for(const d of h){const f=d.targetId;if(!d.fromCache){const p=u.Fs.get(f),b=p.snapshotVersion,A=p.withLastLimboFreeSnapshotVersion(b);u.Fs=u.Fs.insert(f,A)}}}(r.localStore,a))}async function Bk(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){se(Py,"User change. New user:",e.toKey());const r=await BA(n.localStore,e);n.currentUser=e,function(a,s){a.Vu.forEach(o=>{o.forEach(l=>{l.reject(new ae(Z.CANCELLED,s))})}),a.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Du(n,r.Bs)}}function Fk(t,e){const n=we(t),r=n.Eu.get(e);if(r&&r.lu)return ke().add(r.key);{let i=ke();const a=n.Tu.get(e);if(!a)return i;for(const s of a){const o=n.Pu.get(s);i=i.unionWith(o.view.tu)}return i}}function iS(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Uk.bind(null,e),e.hu.J_=Ak.bind(null,e.eventManager),e.hu.pu=Sk.bind(null,e.eventManager),e}function Hk(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vk.bind(null,e),e}class Hd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Y6(this.persistence,new q6,e.initialUser,this.serializer)}Du(e){return new zA(xy.Vi,this.serializer)}bu(e){return new ek}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hd.provider={build:()=>new Hd};class qk extends Hd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ge(this.persistence.referenceDelegate instanceof Bd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new N6(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new zA(r=>Bd.Vi(r,n),this.serializer)}}class Cg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>K1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bk.bind(null,this.syncEngine),await Ek(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Tk}()}createDatastore(e){const n=Vf(e.databaseInfo.databaseId),r=function(a){return new ak(a)}(e.databaseInfo);return function(a,s,o,l){return new ck(a,s,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,s,o){return new hk(r,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,n=>K1(this.syncEngine,n,0),function(){return q1.C()?new q1:new tk}())}createSyncEngine(e,n){return function(i,a,s,o,l,h,u){const d=new Ik(i,a,s,o,l,h);return u&&(d.fu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=we(i);se(Ps,"RemoteStore shutting down."),a.Ia.add(5),await Iu(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Cg.provider={build:()=>new Cg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):qi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="FirestoreClient";class Gk{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Rn.UNAUTHENTICATED,this.clientId=dy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async s=>{se(Xa,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(se(Xa,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Dy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ym(t,e){t.asyncQueue.verifyOperationInProgress(),se(Xa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await BA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Fa("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{se("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Fa("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function Z1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $k(t);se(Xa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>$1(e.remoteStore,i)),t._onlineComponents=e}async function $k(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(Xa,"Using user provided OfflineComponentProvider");try{await Ym(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Fa("Error using user provided cache. Falling back to memory cache: "+n),await Ym(t,new Hd)}}else se(Xa,"Using default OfflineComponentProvider"),await Ym(t,new qk(void 0));return t._offlineComponents}async function aS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(Xa,"Using user provided OnlineComponentProvider"),await Z1(t,t._uninitializedComponentsProvider._online)):(se(Xa,"Using default OnlineComponentProvider"),await Z1(t,new Cg))),t._onlineComponents}function Yk(t){return aS(t).then(e=>e.syncEngine)}async function qd(t){const e=await aS(t),n=e.eventManager;return n.onListen=Dk.bind(null,e.syncEngine),n.onUnlisten=kk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Ok.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=jk.bind(null,e.syncEngine),n}function Xk(t,e,n={}){const r=new Pi;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,l,h){const u=new Ly({next:f=>{u.Ou(),s.enqueueAndForget(()=>My(a,d));const p=f.docs.has(o);!p&&f.fromCache?h.reject(new ae(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?h.reject(new ae(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(f)},error:f=>h.reject(f)}),d=new jy(Of(o.path),u,{includeMetadataChanges:!0,ka:!0});return Oy(a,d)}(await qd(t),t.asyncQueue,e,n,r)),r.promise}function Qk(t,e,n={}){const r=new Pi;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,l,h){const u=new Ly({next:f=>{u.Ou(),s.enqueueAndForget(()=>My(a,d)),f.fromCache&&l.source==="server"?h.reject(new ae(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(f)},error:f=>h.reject(f)}),d=new jy(o,u,{includeMetadataChanges:!0,ka:!0});return Oy(a,d)}(await qd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="firestore.googleapis.com",ew=!0;class tw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oS,this.ssl=ew}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:ew;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<R6)throw new ae(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ff{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rM;switch(r.type){case"firstParty":return new oM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=J1.get(n);r&&(se("ComponentProvider","Removing Datastore"),J1.delete(n),r.terminate())}(this),Promise.resolve()}}function Kk(t,e,n,r={}){var i;t=Rr(t,Ff);const a=Yi(e),s=t._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;a&&(Ef(`https://${l}`),xf("Firestore",!0)),s.host!==oS&&s.host!==l&&Fa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},s),{host:l,ssl:a,emulatorOptions:r});if(!Ms(h,o)&&(t._setSettings(h),r.mockUserToken)){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=Rn.MOCK_USER;else{u=o2(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ae(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Rn(f)}t._authCredentials=new iM(new K2(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xs(this.firestore,e,this._query)}}class Vt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Su(n,Vt._jsonSchema))return new Vt(e,r||null,new fe(ct.fromString(n.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:Xt("string",Vt._jsonSchemaVersion),referencePath:Xt("string")};class Ua extends Xs{constructor(e,n,r){super(e,n,Of(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new fe(e))}withConverter(e){return new Ua(this.firestore,e,this._path)}}function Wk(t,e,...n){if(t=rt(t),Z2("collection","path",e),t instanceof Ff){const r=ct.fromString(e,...n);return m1(r),new Ua(t,null,r)}{if(!(t instanceof Vt||t instanceof Ua))throw new ae(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ct.fromString(e,...n));return m1(r),new Ua(t.firestore,null,r)}}function Vy(t,e,...n){if(t=rt(t),arguments.length===1&&(e=dy.newId()),Z2("doc","path",e),t instanceof Ff){const r=ct.fromString(e,...n);return f1(r),new Vt(t,null,new fe(r))}{if(!(t instanceof Vt||t instanceof Ua))throw new ae(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ct.fromString(e,...n));return f1(r),new Vt(t.firestore,t instanceof Ua?t.converter:null,new fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="AsyncQueue";class rw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new HA(this,"async_queue_retry"),this.oc=()=>{const r=$m();r&&se(nw,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=$m();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=$m();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Pi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Al(e))throw e;se(nw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,qi("INTERNAL UNHANDLED ERROR: ",iw(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Iy.createAndSchedule(this,e,n,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&pe(47125,{hc:iw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function iw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Qa extends Ff{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new rw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rw(e),this._firestoreClient=void 0,await e}}}function Zk(t,e){const n=typeof t=="object"?t:Tf(),r=typeof t=="string"?t:e,i=Eu(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=Wv("firestore");a&&Kk(i,...a)}return i}function Ou(t){if(t._terminated)throw new ae(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Jk(t),t._firestoreClient}function Jk(t){var e,n,r;const i=t._freezeSettings(),a=function(o,l,h,u){return new xM(o,l,h,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,sS(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Gk(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xr(wn.fromBase64String(e))}catch(n){throw new ae(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xr(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Su(e,xr._jsonSchema))return xr.fromBase64String(e.bytes)}}xr._jsonSchemaVersion="firestore/bytes/1.0",xr._jsonSchema={type:Xt("string",xr._jsonSchemaVersion),bytes:Xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:li._jsonSchemaVersion}}static fromJSON(e){if(Su(e,li._jsonSchema))return new li(e.latitude,e.longitude)}}li._jsonSchemaVersion="firestore/geoPoint/1.0",li._jsonSchema={type:Xt("string",li._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ci._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Su(e,ci._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ci(e.vectorValues);throw new ae(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ci._jsonSchemaVersion="firestore/vectorValue/1.0",ci._jsonSchema={type:Xt("string",ci._jsonSchemaVersion),vectorValues:Xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=/^__.*__$/;class tj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ts(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cu(e,this.data,n,this.fieldTransforms)}}class lS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ts(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function cS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ec:t})}}class By{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new By(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Gd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(cS(this.Ec)&&ej.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class nj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Vf(e)}Dc(e,n,r,i=!1){return new By({Ec:e,methodName:n,bc:r,path:_n.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fy(t){const e=t._freezeSettings(),n=Vf(t._databaseId);return new nj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function uS(t,e,n,r,i,a={}){const s=t.Dc(a.merge||a.mergeFields?2:0,e,n,i);Hy("Data must be an object, but it was:",s,r);const o=hS(r,s);let l,h;if(a.merge)l=new or(s.fieldMask),h=s.fieldTransforms;else if(a.mergeFields){const u=[];for(const d of a.mergeFields){const f=Ng(e,d,n);if(!s.contains(f))throw new ae(Z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);fS(u,f)||u.push(f)}l=new or(u),h=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,h=s.fieldTransforms;return new tj(new Qn(o),l,h)}class qf extends zy{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qf}}function rj(t,e,n,r){const i=t.Dc(1,e,n);Hy("Data must be an object, but it was:",i,r);const a=[],s=Qn.empty();es(r,(l,h)=>{const u=qy(e,l,n);h=rt(h);const d=i.gc(u);if(h instanceof qf)a.push(u);else{const f=Mu(h,d);f!=null&&(a.push(u),s.set(u,f))}});const o=new or(a);return new lS(s,o,i.fieldTransforms)}function ij(t,e,n,r,i,a){const s=t.Dc(1,e,n),o=[Ng(e,r,n)],l=[i];if(a.length%2!=0)throw new ae(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<a.length;f+=2)o.push(Ng(e,a[f])),l.push(a[f+1]);const h=[],u=Qn.empty();for(let f=o.length-1;f>=0;--f)if(!fS(h,o[f])){const p=o[f];let b=l[f];b=rt(b);const A=s.gc(p);if(b instanceof qf)h.push(p);else{const D=Mu(b,A);D!=null&&(h.push(p),u.set(p,D))}}const d=new or(h);return new lS(u,d,s.fieldTransforms)}function aj(t,e,n,r=!1){return Mu(n,t.Dc(r?4:3,e))}function Mu(t,e){if(dS(t=rt(t)))return Hy("Unsupported field value:",e,t),hS(t,e);if(t instanceof zy)return function(r,i){if(!cS(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let s=0;for(const o of r){let l=Mu(o,i.yc(s));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),s++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $M(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=mt.fromDate(r);return{timestampValue:zd(i.serializer,a)}}if(r instanceof mt){const a=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zd(i.serializer,a)}}if(r instanceof li)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xr)return{bytesValue:OA(i.serializer,r._byteString)};if(r instanceof Vt){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:wy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ci)return function(s,o){return{mapValue:{fields:{[oA]:{stringValue:lA},[jd]:{arrayValue:{values:s.toArray().map(h=>{if(typeof h!="number")throw o.wc("VectorValues must only contain numeric values.");return yy(o.serializer,h)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Cf(r)}`)}(t,e)}function hS(t,e){const n={};return tA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):es(t,(r,i)=>{const a=Mu(i,e.Vc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function dS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof li||t instanceof xr||t instanceof Vt||t instanceof zy||t instanceof ci)}function Hy(t,e,n){if(!dS(n)||!J2(n)){const r=Cf(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Ng(t,e,n){if((e=rt(e))instanceof Hf)return e._internalPath;if(typeof e=="string")return qy(t,e);throw Gd("Field path arguments must be of type string or ",t,!1,void 0,n)}const sj=new RegExp("[~\\*/\\[\\]]");function qy(t,e,n){if(e.search(sj)>=0)throw Gd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hf(...e.split("."))._internalPath}catch{throw Gd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gd(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new ae(Z.INVALID_ARGUMENT,o+t+l)}function fS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(pS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oj extends mS{data(){return super.data()}}function pS(t,e){return typeof e=="string"?qy(t,e):e instanceof Hf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ae(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gy{}class lj extends Gy{}function cj(t,e,...n){let r=[];e instanceof Gy&&r.push(e),r=r.concat(n),function(a){const s=a.filter(l=>l instanceof Yy).length,o=a.filter(l=>l instanceof $y).length;if(s>1||s>0&&o>0)throw new ae(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class $y extends lj{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new $y(e,n,r)}_apply(e){const n=this._parse(e);return vS(e._query,n),new Xs(e.firestore,e.converter,yg(e._query,n))}_parse(e){const n=Fy(e.firestore);return function(a,s,o,l,h,u,d){let f;if(h.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ae(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){ow(d,u);const b=[];for(const A of d)b.push(sw(l,a,A));f={arrayValue:{values:b}}}else f=sw(l,a,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||ow(d,u),f=aj(o,s,d,u==="in"||u==="not-in");return $t.create(h,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Yy extends Gy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Fr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const l of o)vS(s,l),s=yg(s,l)}(e._query,n),new Xs(e.firestore,e.converter,yg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function sw(t,e,n){if(typeof(n=rt(n))=="string"){if(n==="")throw new ae(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gA(e)&&n.indexOf("/")!==-1)throw new ae(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ct.fromString(n));if(!fe.isDocumentKey(r))throw new ae(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return E1(t,new fe(r))}if(n instanceof Vt)return E1(t,n._key);throw new ae(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cf(n)}.`)}function ow(t,e){if(!Array.isArray(t)||t.length===0)throw new ae(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vS(t,e){const n=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ae(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class uj{convertValue(e,n="none"){switch($a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ga(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return es(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[jd].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Lt(s.doubleValue));return new ci(a)}convertGeoPoint(e){return new li(Lt(e.latitude),Lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Df(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}convertTimestamp(e){const n=qa(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ct.fromString(e);Ge(LA(r),9688,{name:e});const i=new Kc(r.get(1),r.get(3)),a=new fe(r.popFirst(5));return i.isEqual(n)||qi(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class lc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ss extends mS{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(pS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ss._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ss._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ss._jsonSchema={type:Xt("string",Ss._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class qh extends Ss{data(e={}){return super.data(e)}}class Rs{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new lc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qh(this._firestore,this._userDataWriter,r.key,r,new lc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const l=new qh(i._firestore,i._userDataWriter,o.doc.key,o.doc,new lc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new qh(i._firestore,i._userDataWriter,o.doc.key,o.doc,new lc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,u=-1;return o.type!==0&&(h=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:hj(o.type),doc:l,oldIndex:h,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Rs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(t){t=Rr(t,Vt);const e=Rr(t.firestore,Qa);return Xk(Ou(e),t._key).then(n=>_S(e,t,n))}Rs._jsonSchemaVersion="firestore/querySnapshot/1.0",Rs._jsonSchema={type:Xt("string",Rs._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Xy extends uj{constructor(e){super(),this.firestore=e}convertBytes(e){return new xr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function Gf(t){t=Rr(t,Xs);const e=Rr(t.firestore,Qa),n=Ou(e),r=new Xy(e);return gS(t._query),Qk(n,t._query).then(i=>new Rs(e,r,t,i))}function fj(t,e,n){t=Rr(t,Vt);const r=Rr(t.firestore,Qa),i=yS(t.converter,e,n);return Qy(r,[uS(Fy(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,fr.none())])}function mj(t){return Qy(Rr(t.firestore,Qa),[new Uf(t._key,fr.none())])}function pj(t,...e){var n,r,i;t=rt(t);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||aw(e[s])||(a=e[s++]);const o={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(aw(e[s])){const d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,h,u;if(t instanceof Vt)h=Rr(t.firestore,Qa),u=Of(t._key.path),l={next:d=>{e[s]&&e[s](_S(h,t,d))},error:e[s+1],complete:e[s+2]};else{const d=Rr(t,Xs);h=Rr(d.firestore,Qa),u=d._query;const f=new Xy(h);l={next:p=>{e[s]&&e[s](new Rs(h,f,d,p))},error:e[s+1],complete:e[s+2]},gS(t._query)}return function(f,p,b,A){const D=new Ly(A),w=new jy(p,D,b);return f.asyncQueue.enqueueAndForget(async()=>Oy(await qd(f),w)),()=>{D.Ou(),f.asyncQueue.enqueueAndForget(async()=>My(await qd(f),w))}}(Ou(h),u,o,l)}function Qy(t,e){return function(r,i){const a=new Pi;return r.asyncQueue.enqueueAndForget(async()=>Pk(await Yk(r),i,a)),a.promise}(Ou(t),e)}function _S(t,e,n){const r=n.docs.get(e._key),i=new Xy(t);return new Ss(t,i,e._key,r,new lc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Fy(e)}set(e,n,r){this._verifyNotCommitted();const i=Xm(e,this._firestore),a=yS(i.converter,n,r),s=uS(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,fr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=Xm(e,this._firestore);let s;return s=typeof(n=rt(n))=="string"||n instanceof Hf?ij(this._dataReader,"WriteBatch.update",a._key,n,r,i):rj(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Xm(e,this._firestore);return this._mutations=this._mutations.concat(new Uf(n._key,fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ae(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xm(t,e){if((t=rt(t)).firestore!==e)throw new ae(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(t){return Ou(t=Rr(t,Qa)),new gj(t,e=>Qy(t,e))}(function(e,n=!0){(function(i){xl=i})(qs),Ba(new Bi("firestore",(r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new Qa(new aM(r.getProvider("auth-internal")),new lM(s,r.getProvider("app-check-internal")),function(h,u){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ae(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kc(h.options.projectId,u)}(s,i),s);return a=Object.assign({useFetchStreams:n},a),o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),Sr(l1,c1,e),Sr(l1,c1,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="firebasestorage.googleapis.com",wS="storageBucket",vj=2*60*1e3,yj=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot extends qr{constructor(e,n,r=0){super(Qm(e),`Firebase Storage: ${n} (${Qm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Dt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Dt||(Dt={}));function Qm(t){return"storage/"+t}function Wy(){const t="An unknown error occurred, please check the error payload for server response.";return new Ot(Dt.UNKNOWN,t)}function _j(t){return new Ot(Dt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function bj(t){return new Ot(Dt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function wj(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ot(Dt.UNAUTHENTICATED,t)}function Ej(){return new Ot(Dt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function xj(t){return new Ot(Dt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Tj(){return new Ot(Dt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Aj(){return new Ot(Dt.CANCELED,"User canceled the upload/download.")}function Sj(t){return new Ot(Dt.INVALID_URL,"Invalid URL '"+t+"'.")}function Rj(t){return new Ot(Dt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Cj(){return new Ot(Dt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wS+"' property when initializing the app?")}function Nj(){return new Ot(Dt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ij(){return new Ot(Dt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Dj(t){return new Ot(Dt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ig(t){return new Ot(Dt.INVALID_ARGUMENT,t)}function ES(){return new Ot(Dt.APP_DELETED,"The Firebase app was deleted.")}function Oj(t){return new Ot(Dt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ic(t,e){return new Ot(Dt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ql(t){throw new Ot(Dt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=lr.makeFromUrl(e,n)}catch{return new lr(e,"")}if(r.path==="")return r;throw Rj(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const s="(/(.*))?$",o=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function h(O){O.path_=decodeURIComponent(O.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${u}/b/${i}/o${f}`,"i"),b={bucket:1,path:3},A=n===bS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",w=new RegExp(`^https?://${A}/${i}/${D}`,"i"),N=[{regex:o,indices:l,postModify:a},{regex:p,indices:b,postModify:h},{regex:w,indices:{bucket:1,path:2},postModify:h}];for(let O=0;O<N.length;O++){const P=N[O],R=P.regex.exec(e);if(R){const _=R[P.indices.bucket];let g=R[P.indices.path];g||(g=""),r=new lr(_,g),P.postModify(r);break}}if(r==null)throw Sj(e);return r}}class Mj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(t,e,n){let r=1,i=null,a=null,s=!1,o=0;function l(){return o===2}let h=!1;function u(...D){h||(h=!0,e.apply(null,D))}function d(D){i=setTimeout(()=>{i=null,t(p,l())},D)}function f(){a&&clearTimeout(a)}function p(D,...w){if(h){f();return}if(D){f(),u.call(null,D,...w);return}if(l()||s){f(),u.call(null,D,...w);return}r<64&&(r*=2);let N;o===1?(o=2,N=0):N=(r+Math.random())*1e3,d(N)}let b=!1;function A(D){b||(b=!0,f(),!h&&(i!==null?(D||(o=2),clearTimeout(i),d(0)):D||(o=1)))}return d(0),a=setTimeout(()=>{s=!0,A(!0)},n),A}function jj(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(t){return t!==void 0}function Uj(t){return typeof t=="object"&&!Array.isArray(t)}function Zy(t){return typeof t=="string"||t instanceof String}function lw(t){return Jy()&&t instanceof Blob}function Jy(){return typeof Blob<"u"}function cw(t,e,n,r){if(r<e)throw Ig(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ig(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function xS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Cs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Cs||(Cs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,n,r,i,a,s,o,l,h,u,d,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,A)=>{this.resolve_=b,this.reject_=A,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new vh(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const s=o=>{const l=o.loaded,h=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,h)};this.progressCallback_!==null&&a.addUploadProgressListener(s),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(s),this.pendingConnection_=null;const o=a.getErrorCode()===Cs.NO_ERROR,l=a.getStatus();if(!o||Lj(l,this.additionalRetryCodes_)&&this.retry){const u=a.getErrorCode()===Cs.ABORT;r(!1,new vh(!1,null,u));return}const h=this.successCodes_.indexOf(l)!==-1;r(!0,new vh(h,a))})},n=(r,i)=>{const a=this.resolve_,s=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());Pj(l)?a(l):a()}catch(l){s(l)}else if(o!==null){const l=Wy();l.serverResponse=o.getErrorText(),this.errorCallback_?s(this.errorCallback_(o,l)):s(l)}else if(i.canceled){const l=this.appDelete_?ES():Aj();s(l)}else{const l=Tj();s(l)}};this.canceled_?n(!1,new vh(!1,null,!0)):this.backoffId_=kj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&jj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function zj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Bj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Fj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Hj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function qj(t,e,n,r,i,a,s=!0,o=!1){const l=xS(t.urlParams),h=t.url+l,u=Object.assign({},t.headers);return Fj(u,e),zj(u,n),Bj(u,a),Hj(u,r),new Vj(h,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $j(...t){const e=Gj();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Jy())return new Blob(t);throw new Ot(Dt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Yj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(t){if(typeof atob>"u")throw Dj("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Km{constructor(e,n){this.data=e,this.contentType=n||null}}function TS(t,e){switch(t){case Ar.RAW:return new Km(AS(e));case Ar.BASE64:case Ar.BASE64URL:return new Km(SS(t,e));case Ar.DATA_URL:return new Km(Kj(e),Wj(e))}throw Wy()}function AS(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,s=t.charCodeAt(++n);r=65536|(a&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Qj(t){let e;try{e=decodeURIComponent(t)}catch{throw Ic(Ar.DATA_URL,"Malformed data URL.")}return AS(e)}function SS(t,e){switch(t){case Ar.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Ic(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ar.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Ic(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Xj(e)}catch(i){throw i.message.includes("polyfill")?i:Ic(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class RS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ic(Ar.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Zj(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Kj(t){const e=new RS(t);return e.base64?SS(Ar.BASE64,e.rest):Qj(e.rest)}function Wj(t){return new RS(t).contentType}function Zj(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n){let r=0,i="";lw(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(lw(this.data_)){const r=this.data_,i=Yj(r,e,n);return i===null?null:new ga(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ga(r,!0)}}static getBlob(...e){if(Jy()){const n=e.map(r=>r instanceof ga?r.data_:r);return new ga($j.apply(null,n))}else{const n=e.map(s=>Zy(s)?TS(Ar.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(s=>{for(let o=0;o<s.length;o++)i[a++]=s[o]}),new ga(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t){let e;try{e=JSON.parse(t)}catch{return null}return Uj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function eP(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function NS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(t,e){return e}class jn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||tP}}let yh=null;function nP(t){return!Zy(t)||t.length<2?t:NS(t)}function IS(){if(yh)return yh;const t=[];t.push(new jn("bucket")),t.push(new jn("generation")),t.push(new jn("metageneration")),t.push(new jn("name","fullPath",!0));function e(a,s){return nP(s)}const n=new jn("name");n.xform=e,t.push(n);function r(a,s){return s!==void 0?Number(s):s}const i=new jn("size");return i.xform=r,t.push(i),t.push(new jn("timeCreated")),t.push(new jn("updated")),t.push(new jn("md5Hash",null,!0)),t.push(new jn("cacheControl",null,!0)),t.push(new jn("contentDisposition",null,!0)),t.push(new jn("contentEncoding",null,!0)),t.push(new jn("contentLanguage",null,!0)),t.push(new jn("contentType",null,!0)),t.push(new jn("metadata","customMetadata",!0)),yh=t,yh}function rP(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new lr(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function iP(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const s=n[a];r[s.local]=s.xform(r,e[s.server])}return rP(r,t),r}function DS(t,e,n){const r=CS(e);return r===null?null:iP(t,r,n)}function aP(t,e,n,r){const i=CS(e);if(i===null||!Zy(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const s=encodeURIComponent;return a.split(",").map(h=>{const u=t.bucket,d=t.fullPath,f="/b/"+s(u)+"/o/"+s(d),p=e0(f,n,r),b=xS({alt:"media",token:h});return p+b})[0]}function sP(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class OS{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(t){if(!t)throw Wy()}function oP(t,e){function n(r,i){const a=DS(t,i,e);return MS(a!==null),a}return n}function lP(t,e){function n(r,i){const a=DS(t,i,e);return MS(a!==null),aP(a,i,t.host,t._protocol)}return n}function kS(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Ej():i=wj():n.getStatus()===402?i=bj(t.bucket):n.getStatus()===403?i=xj(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function cP(t){const e=kS(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=_j(t.path)),a.serverResponse=i.serverResponse,a}return n}function uP(t,e,n){const r=e.fullServerUrl(),i=e0(r,t.host,t._protocol),a="GET",s=t.maxOperationRetryTime,o=new OS(i,a,lP(t,n),s);return o.errorHandler=cP(e),o}function hP(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function dP(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=hP(null,e)),r}function fP(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function o(){let N="";for(let O=0;O<2;O++)N=N+Math.random().toString().slice(2);return N}const l=o();s["Content-Type"]="multipart/related; boundary="+l;const h=dP(e,r,i),u=sP(h,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=ga.getBlob(d,r,f);if(p===null)throw Nj();const b={name:h.fullPath},A=e0(a,t.host,t._protocol),D="POST",w=t.maxUploadRetryTime,T=new OS(A,D,oP(t,n),w);return T.urlParams=b,T.headers=s,T.body=p.uploadData(),T.errorHandler=kS(e),T}class mP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Cs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Cs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Cs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,a){if(this.sent_)throw Ql("cannot .send() more than once");if(Yi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const s in a)a.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,a[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ql("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ql("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ql("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ql("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class pP extends mP{initXhr(){this.xhr_.responseType="text"}}function jS(){return new pP}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n){this._service=e,n instanceof lr?this._location=n:this._location=lr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Us(e,n)}get root(){const e=new lr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NS(this._location.path)}get storage(){return this._service}get parent(){const e=Jj(this._location.path);if(e===null)return null;const n=new lr(this._location.bucket,e);return new Us(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Oj(e)}}function PS(t,e,n){t._throwIfRoot("uploadBytes");const r=fP(t.storage,t._location,IS(),new ga(e,!0),n);return t.storage.makeRequestWithTokens(r,jS).then(i=>({metadata:i,ref:t}))}function gP(t,e,n=Ar.RAW,r){t._throwIfRoot("uploadString");const i=TS(n,e),a=Object.assign({},r);return a.contentType==null&&i.contentType!=null&&(a.contentType=i.contentType),PS(t,i.data,a)}function vP(t){t._throwIfRoot("getDownloadURL");const e=uP(t.storage,t._location,IS());return t.storage.makeRequestWithTokens(e,jS).then(n=>{if(n===null)throw Ij();return n})}function yP(t,e){const n=eP(t._location.path,e),r=new lr(t._location.bucket,n);return new Us(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(t){return/^[A-Za-z]+:\/\//.test(t)}function bP(t,e){return new Us(t,e)}function US(t,e){if(t instanceof t0){const n=t;if(n._bucket==null)throw Cj();const r=new Us(n,n._bucket);return e!=null?US(r,e):r}else return e!==void 0?yP(t,e):t}function wP(t,e){if(e&&_P(e)){if(t instanceof t0)return bP(t,e);throw Ig("To use ref(service, url), the first argument must be a Storage instance.")}else return US(t,e)}function uw(t,e){const n=e==null?void 0:e[wS];return n==null?null:lr.makeFromBucketSpec(n,t)}function EP(t,e,n,r={}){t.host=`${e}:${n}`;const i=Yi(e);i&&(Ef(`https://${t.host}/b`),xf("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:o2(a,t.app.options.projectId))}class t0{constructor(e,n,r,i,a,s=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=s,this._bucket=null,this._host=bS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vj,this._maxUploadRetryTime=yj,this._requests=new Set,i!=null?this._bucket=lr.makeFromBucketSpec(i,this._host):this._bucket=uw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=lr.makeFromBucketSpec(this._url,e):this._bucket=uw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){cw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){cw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Us(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new Mj(ES());{const s=qj(e,this._appId,r,i,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const hw="@firebase/storage",dw="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="storage";function xP(t,e,n){return t=rt(t),PS(t,e,n)}function TP(t,e,n,r){return t=rt(t),gP(t,e,n,r)}function VS(t){return t=rt(t),vP(t)}function zS(t,e){return t=rt(t),wP(t,e)}function BS(t=Tf(),e){t=rt(t);const r=Eu(t,LS).getImmediate({identifier:e}),i=Wv("storage");return i&&AP(r,...i),r}function AP(t,e,n,r={}){EP(t,e,n,r)}function SP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new t0(n,r,i,e,qs)}function RP(){Ba(new Bi(LS,SP,"PUBLIC").setMultipleInstances(!0)),Sr(hw,dw,""),Sr(hw,dw,"esm2017")}RP();const Wm={apiKey:"AIzaSyBivqXghVKoxfSsJVXxmNi3n2yO1l2U9zU",authDomain:"runica-heros-folio.firebaseapp.com",projectId:"runica-heros-folio",storageBucket:"runica-heros-folio.firebasestorage.app",messagingSenderId:"1092943227692",appId:"1:1092943227692:web:342ed3d5e7c682b7eb9a89",measurementId:"G-GKS7XV7YEW"};let Co,Dg,Og,Mg;if(Wm.apiKey&&Wm.projectId)try{Co=u2(Wm),Dg=JO(Co),Og=Zk(Co,"runica-db"),Mg=BS(Co),console.log("Firebase initialized successfully.")}catch(t){console.error("Error initializing Firebase. Please check your configuration.",t)}else console.warn("Firebase configuration environment variables are not set. Cloud features are disabled.");const Xi=()=>{if(!Co||!Dg||!Og||!Mg)throw new Error("Firebase is not initialized. Make sure your environment variables are set.");return{app:Co,auth:Dg,db:Og,storage:Mg}},CP=new Si,NP=()=>{try{const{auth:t}=Xi();return lO(t,CP).then(()=>{})}catch{return alert("Firebase is not configured. Cloud sign-in is disabled. Please update firebaseConfig.ts."),Promise.resolve()}},IP=()=>{try{const{auth:t}=Xi();return F5(t)}catch{return Promise.resolve()}},DP=t=>{try{const{auth:e}=Xi();return B5(e,t)}catch{return t(null),()=>{}}};function OP(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function FS(t,e){return new Promise(function(n,r){let i;return MP(t).then(function(a){try{return i=a,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(s){return r(s)}},r)})}const MP=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const a=new DataView(i);let s=0;if(a.getUint16(s)!==65496)return n("not a valid JPEG");for(s+=2;;){const o=a.getUint16(s);if(o===65498)break;const l=a.getUint16(s+2);if(o===65505&&a.getUint32(s+4)===1165519206){const h=s+10;let u;switch(a.getUint16(h)){case 18761:u=!0;break;case 19789:u=!1;break;default:return n("TIFF header contains invalid endian")}if(a.getUint16(h+2,u)!==42)return n("TIFF header contains invalid version");const d=a.getUint32(h+4,u),f=h+d+2+12*a.getUint16(h+d,u);for(let p=h+d+2;p<f;p+=12)if(a.getUint16(p,u)==274){if(a.getUint16(p+2,u)!==3)return n("Orientation data type is invalid");if(a.getUint32(p+4,u)!==1)return n("Orientation data count is invalid");a.setUint16(p+8,1,u);break}return e(i.slice(s,s+2+l))}s+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var $d={},kP={get exports(){return $d},set exports(t){$d=t}};(function(t){var e,n,r={};kP.exports=r,r.parse=function(i,a){for(var s=r.bin.readUshort,o=r.bin.readUint,l=0,h={},u=new Uint8Array(i),d=u.length-4;o(u,d)!=101010256;)d--;l=d,l+=4;var f=s(u,l+=4);s(u,l+=2);var p=o(u,l+=2),b=o(u,l+=4);l+=4,l=b;for(var A=0;A<f;A++){o(u,l),l+=4,l+=4,l+=4,o(u,l+=4),p=o(u,l+=4);var D=o(u,l+=4),w=s(u,l+=4),T=s(u,l+2),N=s(u,l+4);l+=6;var O=o(u,l+=8);l+=4,l+=w+T+N,r._readLocal(u,O,h,p,D,a)}return h},r._readLocal=function(i,a,s,o,l,h){var u=r.bin.readUshort,d=r.bin.readUint;d(i,a),u(i,a+=4),u(i,a+=2);var f=u(i,a+=2);d(i,a+=2),d(i,a+=4),a+=4;var p=u(i,a+=8),b=u(i,a+=2);a+=2;var A=r.bin.readUTF8(i,a,p);if(a+=p,a+=b,h)s[A]={size:l,csize:o};else{var D=new Uint8Array(i.buffer,a);if(f==0)s[A]=new Uint8Array(D.buffer.slice(a,a+o));else{if(f!=8)throw"unknown compression method: "+f;var w=new Uint8Array(l);r.inflateRaw(D,w),s[A]=w}}},r.inflateRaw=function(i,a){return r.F.inflate(i,a)},r.inflate=function(i,a){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),a)},r.deflate=function(i,a){a==null&&(a={level:6});var s=0,o=new Uint8Array(50+Math.floor(1.1*i.length));o[s]=120,o[s+1]=156,s+=2,s=r.F.deflateRaw(i,o,s,a.level);var l=r.adler(i,0,i.length);return o[s+0]=l>>>24&255,o[s+1]=l>>>16&255,o[s+2]=l>>>8&255,o[s+3]=l>>>0&255,new Uint8Array(o.buffer,0,s+4)},r.deflateRaw=function(i,a){a==null&&(a={level:6});var s=new Uint8Array(50+Math.floor(1.1*i.length)),o=r.F.deflateRaw(i,s,o,a.level);return new Uint8Array(s.buffer,0,o)},r.encode=function(i,a){a==null&&(a=!1);var s=0,o=r.bin.writeUint,l=r.bin.writeUshort,h={};for(var u in i){var d=!r._noNeed(u)&&!a,f=i[u],p=r.crc.crc(f,0,f.length);h[u]={cpr:d,usize:f.length,crc:p,file:d?r.deflateRaw(f):f}}for(var u in h)s+=h[u].file.length+30+46+2*r.bin.sizeUTF8(u);s+=22;var b=new Uint8Array(s),A=0,D=[];for(var u in h){var w=h[u];D.push(A),A=r._writeHeader(b,A,u,w,0)}var T=0,N=A;for(var u in h)w=h[u],D.push(A),A=r._writeHeader(b,A,u,w,1,D[T++]);var O=A-N;return o(b,A,101010256),A+=4,l(b,A+=4,T),l(b,A+=2,T),o(b,A+=2,O),o(b,A+=4,N),A+=4,A+=2,b.buffer},r._noNeed=function(i){var a=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},r._writeHeader=function(i,a,s,o,l,h){var u=r.bin.writeUint,d=r.bin.writeUshort,f=o.file;return u(i,a,l==0?67324752:33639248),a+=4,l==1&&(a+=2),d(i,a,20),d(i,a+=2,0),d(i,a+=2,o.cpr?8:0),u(i,a+=2,0),u(i,a+=4,o.crc),u(i,a+=4,f.length),u(i,a+=4,o.usize),d(i,a+=4,r.bin.sizeUTF8(s)),d(i,a+=2,0),a+=2,l==1&&(a+=2,a+=2,u(i,a+=6,h),a+=4),a+=r.bin.writeUTF8(i,a,s),l==0&&(i.set(f,a),a+=f.length),a},r.crc={table:function(){for(var i=new Uint32Array(256),a=0;a<256;a++){for(var s=a,o=0;o<8;o++)1&s?s=3988292384^s>>>1:s>>>=1;i[a]=s}return i}(),update:function(i,a,s,o){for(var l=0;l<o;l++)i=r.crc.table[255&(i^a[s+l])]^i>>>8;return i},crc:function(i,a,s){return 4294967295^r.crc.update(4294967295,i,a,s)}},r.adler=function(i,a,s){for(var o=1,l=0,h=a,u=a+s;h<u;){for(var d=Math.min(h+5552,u);h<d;)l+=o+=i[h++];o%=65521,l%=65521}return l<<16|o},r.bin={readUshort:function(i,a){return i[a]|i[a+1]<<8},writeUshort:function(i,a,s){i[a]=255&s,i[a+1]=s>>8&255},readUint:function(i,a){return 16777216*i[a+3]+(i[a+2]<<16|i[a+1]<<8|i[a])},writeUint:function(i,a,s){i[a]=255&s,i[a+1]=s>>8&255,i[a+2]=s>>16&255,i[a+3]=s>>24&255},readASCII:function(i,a,s){for(var o="",l=0;l<s;l++)o+=String.fromCharCode(i[a+l]);return o},writeASCII:function(i,a,s){for(var o=0;o<s.length;o++)i[a+o]=s.charCodeAt(o)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,a,s){for(var o,l="",h=0;h<s;h++)l+="%"+r.bin.pad(i[a+h].toString(16));try{o=decodeURIComponent(l)}catch{return r.bin.readASCII(i,a,s)}return o},writeUTF8:function(i,a,s){for(var o=s.length,l=0,h=0;h<o;h++){var u=s.charCodeAt(h);if(!(4294967168&u))i[a+l]=u,l++;else if(!(4294965248&u))i[a+l]=192|u>>6,i[a+l+1]=128|u>>0&63,l+=2;else if(!(4294901760&u))i[a+l]=224|u>>12,i[a+l+1]=128|u>>6&63,i[a+l+2]=128|u>>0&63,l+=3;else{if(4292870144&u)throw"e";i[a+l]=240|u>>18,i[a+l+1]=128|u>>12&63,i[a+l+2]=128|u>>6&63,i[a+l+3]=128|u>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var a=i.length,s=0,o=0;o<a;o++){var l=i.charCodeAt(o);if(!(4294967168&l))s++;else if(!(4294965248&l))s+=2;else if(!(4294901760&l))s+=3;else{if(4292870144&l)throw"e";s+=4}}return s}},r.F={},r.F.deflateRaw=function(i,a,s,o){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],h=r.F.U,u=r.F._goodIndex;r.F._hash;var d=r.F._putsE,f=0,p=s<<3,b=0,A=i.length;if(o==0){for(;f<A;)d(a,p,f+(C=Math.min(65535,A-f))==A?1:0),p=r.F._copyExact(i,f,C,a,p+8),f+=C;return p>>>3}var D=h.lits,w=h.strt,T=h.prev,N=0,O=0,P=0,R=0,_=0,g=0;for(A>2&&(w[g=r.F._hash(i,0)]=0),f=0;f<A;f++){if(_=g,f+1<A-2){g=r.F._hash(i,f+1);var y=f+1&32767;T[y]=w[g],w[g]=y}if(b<=f){(N>14e3||O>26697)&&A-f>100&&(b<f&&(D[N]=f-b,N+=2,b=f),p=r.F._writeBlock(f==A-1||b==A?1:0,D,N,R,i,P,f-P,a,p),N=O=R=0,P=f);var x=0;f<A-2&&(x=r.F._bestMatch(i,f,T,_,Math.min(l[2],A-f),l[3]));var C=x>>>16,I=65535&x;if(x!=0){I=65535&x;var S=u(C=x>>>16,h.of0);h.lhst[257+S]++;var U=u(I,h.df0);h.dhst[U]++,R+=h.exb[S]+h.dxb[U],D[N]=C<<23|f-b,D[N+1]=I<<16|S<<8|U,N+=2,b=f+C}else h.lhst[i[f]]++;O++}}for(P==f&&i.length!=0||(b<f&&(D[N]=f-b,N+=2,b=f),p=r.F._writeBlock(1,D,N,R,i,P,f-P,a,p),N=0,O=0,N=O=R=0,P=f);7&p;)p++;return p>>>3},r.F._bestMatch=function(i,a,s,o,l,h){var u=32767&a,d=s[u],f=u-d+32768&32767;if(d==u||o!=r.F._hash(i,a-f))return 0;for(var p=0,b=0,A=Math.min(32767,a);f<=A&&--h!=0&&d!=u;){if(p==0||i[a+p]==i[a+p-f]){var D=r.F._howLong(i,a,f);if(D>p){if(b=f,(p=D)>=l)break;f+2<D&&(D=f+2);for(var w=0,T=0;T<D-2;T++){var N=a-f+T+32768&32767,O=N-s[N]+32768&32767;O>w&&(w=O,d=N)}}}f+=(u=d)-(d=s[u])+32768&32767}return p<<16|b},r.F._howLong=function(i,a,s){if(i[a]!=i[a-s]||i[a+1]!=i[a+1-s]||i[a+2]!=i[a+2-s])return 0;var o=a,l=Math.min(i.length,a+258);for(a+=3;a<l&&i[a]==i[a-s];)a++;return a-o},r.F._hash=function(i,a){return(i[a]<<8|i[a+1])+(i[a+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,a,s,o,l,h,u,d,f){var p,b,A,D,w,T,N,O,P,R=r.F.U,_=r.F._putsF,g=r.F._putsE;R.lhst[256]++,b=(p=r.F.getTrees())[0],A=p[1],D=p[2],w=p[3],T=p[4],N=p[5],O=p[6],P=p[7];var y=32+(f+3&7?8-(f+3&7):0)+(u<<3),x=o+r.F.contSize(R.fltree,R.lhst)+r.F.contSize(R.fdtree,R.dhst),C=o+r.F.contSize(R.ltree,R.lhst)+r.F.contSize(R.dtree,R.dhst);C+=14+3*N+r.F.contSize(R.itree,R.ihst)+(2*R.ihst[16]+3*R.ihst[17]+7*R.ihst[18]);for(var I=0;I<286;I++)R.lhst[I]=0;for(I=0;I<30;I++)R.dhst[I]=0;for(I=0;I<19;I++)R.ihst[I]=0;var S=y<x&&y<C?0:x<C?1:2;if(_(d,f,i),_(d,f+1,S),f+=3,S==0){for(;7&f;)f++;f=r.F._copyExact(l,h,u,d,f)}else{var U,z;if(S==1&&(U=R.fltree,z=R.fdtree),S==2){r.F.makeCodes(R.ltree,b),r.F.revCodes(R.ltree,b),r.F.makeCodes(R.dtree,A),r.F.revCodes(R.dtree,A),r.F.makeCodes(R.itree,D),r.F.revCodes(R.itree,D),U=R.ltree,z=R.dtree,g(d,f,w-257),g(d,f+=5,T-1),g(d,f+=5,N-4),f+=4;for(var k=0;k<N;k++)g(d,f+3*k,R.itree[1+(R.ordr[k]<<1)]);f+=3*N,f=r.F._codeTiny(O,R.itree,d,f),f=r.F._codeTiny(P,R.itree,d,f)}for(var M=h,q=0;q<s;q+=2){for(var B=a[q],X=B>>>23,re=M+(8388607&B);M<re;)f=r.F._writeLit(l[M++],U,d,f);if(X!=0){var V=a[q+1],K=V>>16,$=V>>8&255,Y=255&V;g(d,f=r.F._writeLit(257+$,U,d,f),X-R.of0[$]),f+=R.exb[$],_(d,f=r.F._writeLit(Y,z,d,f),K-R.df0[Y]),f+=R.dxb[Y],M+=X}}f=r.F._writeLit(256,U,d,f)}return f},r.F._copyExact=function(i,a,s,o,l){var h=l>>>3;return o[h]=s,o[h+1]=s>>>8,o[h+2]=255-o[h],o[h+3]=255-o[h+1],h+=4,o.set(new Uint8Array(i.buffer,a,s),h),l+(s+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,a=r.F._hufTree(i.lhst,i.ltree,15),s=r.F._hufTree(i.dhst,i.dtree,15),o=[],l=r.F._lenCodes(i.ltree,o),h=[],u=r.F._lenCodes(i.dtree,h),d=0;d<o.length;d+=2)i.ihst[o[d]]++;for(d=0;d<h.length;d+=2)i.ihst[h[d]]++;for(var f=r.F._hufTree(i.ihst,i.itree,7),p=19;p>4&&i.itree[1+(i.ordr[p-1]<<1)]==0;)p--;return[a,s,f,l,u,p,o,h]},r.F.getSecond=function(i){for(var a=[],s=0;s<i.length;s+=2)a.push(i[s+1]);return a},r.F.nonZero=function(i){for(var a="",s=0;s<i.length;s+=2)i[s+1]!=0&&(a+=(s>>1)+",");return a},r.F.contSize=function(i,a){for(var s=0,o=0;o<a.length;o++)s+=a[o]*i[1+(o<<1)];return s},r.F._codeTiny=function(i,a,s,o){for(var l=0;l<i.length;l+=2){var h=i[l],u=i[l+1];o=r.F._writeLit(h,a,s,o);var d=h==16?2:h==17?3:7;h>15&&(r.F._putsE(s,o,u,d),o+=d)}return o},r.F._lenCodes=function(i,a){for(var s=i.length;s!=2&&i[s-1]==0;)s-=2;for(var o=0;o<s;o+=2){var l=i[o+1],h=o+3<s?i[o+3]:-1,u=o+5<s?i[o+5]:-1,d=o==0?-1:i[o-1];if(l==0&&h==l&&u==l){for(var f=o+5;f+2<s&&i[f+2]==l;)f+=2;(p=Math.min(f+1-o>>>1,138))<11?a.push(17,p-3):a.push(18,p-11),o+=2*p-2}else if(l==d&&h==l&&u==l){for(f=o+5;f+2<s&&i[f+2]==l;)f+=2;var p=Math.min(f+1-o>>>1,6);a.push(16,p-3),o+=2*p-2}else a.push(l,0)}return s>>>1},r.F._hufTree=function(i,a,s){var o=[],l=i.length,h=a.length,u=0;for(u=0;u<h;u+=2)a[u]=0,a[u+1]=0;for(u=0;u<l;u++)i[u]!=0&&o.push({lit:u,f:i[u]});var d=o.length,f=o.slice(0);if(d==0)return 0;if(d==1){var p=o[0].lit;return f=p==0?1:0,a[1+(p<<1)]=1,a[1+(f<<1)]=1,1}o.sort(function(O,P){return O.f-P.f});var b=o[0],A=o[1],D=0,w=1,T=2;for(o[0]={lit:-1,f:b.f+A.f,l:b,r:A,d:0};w!=d-1;)b=D!=w&&(T==d||o[D].f<o[T].f)?o[D++]:o[T++],A=D!=w&&(T==d||o[D].f<o[T].f)?o[D++]:o[T++],o[w++]={lit:-1,f:b.f+A.f,l:b,r:A};var N=r.F.setDepth(o[w-1],0);for(N>s&&(r.F.restrictDepth(f,s,N),N=s),u=0;u<d;u++)a[1+(f[u].lit<<1)]=f[u].d;return N},r.F.setDepth=function(i,a){return i.lit!=-1?(i.d=a,a):Math.max(r.F.setDepth(i.l,a+1),r.F.setDepth(i.r,a+1))},r.F.restrictDepth=function(i,a,s){var o=0,l=1<<s-a,h=0;for(i.sort(function(d,f){return f.d==d.d?d.f-f.f:f.d-d.d}),o=0;o<i.length&&i[o].d>a;o++){var u=i[o].d;i[o].d=a,h+=l-(1<<s-u)}for(h>>>=s-a;h>0;)(u=i[o].d)<a?(i[o].d++,h-=1<<a-u-1):o++;for(;o>=0;o--)i[o].d==a&&h<0&&(i[o].d--,h++);h!=0&&console.log("debt left")},r.F._goodIndex=function(i,a){var s=0;return a[16|s]<=i&&(s|=16),a[8|s]<=i&&(s|=8),a[4|s]<=i&&(s|=4),a[2|s]<=i&&(s|=2),a[1|s]<=i&&(s|=1),s},r.F._writeLit=function(i,a,s,o){return r.F._putsF(s,o,a[i<<1]),o+a[1+(i<<1)]},r.F.inflate=function(i,a){var s=Uint8Array;if(i[0]==3&&i[1]==0)return a||new s(0);var o=r.F,l=o._bitsF,h=o._bitsE,u=o._decodeTiny,d=o.makeCodes,f=o.codes2map,p=o._get17,b=o.U,A=a==null;A&&(a=new s(i.length>>>2<<3));for(var D,w,T=0,N=0,O=0,P=0,R=0,_=0,g=0,y=0,x=0;T==0;)if(T=l(i,x,1),N=l(i,x+1,2),x+=3,N!=0){if(A&&(a=r.F._check(a,y+(1<<17))),N==1&&(D=b.flmap,w=b.fdmap,_=511,g=31),N==2){O=h(i,x,5)+257,P=h(i,x+5,5)+1,R=h(i,x+10,4)+4,x+=14;for(var C=0;C<38;C+=2)b.itree[C]=0,b.itree[C+1]=0;var I=1;for(C=0;C<R;C++){var S=h(i,x+3*C,3);b.itree[1+(b.ordr[C]<<1)]=S,S>I&&(I=S)}x+=3*R,d(b.itree,I),f(b.itree,I,b.imap),D=b.lmap,w=b.dmap,x=u(b.imap,(1<<I)-1,O+P,i,x,b.ttree);var U=o._copyOut(b.ttree,0,O,b.ltree);_=(1<<U)-1;var z=o._copyOut(b.ttree,O,P,b.dtree);g=(1<<z)-1,d(b.ltree,U),f(b.ltree,U,D),d(b.dtree,z),f(b.dtree,z,w)}for(;;){var k=D[p(i,x)&_];x+=15&k;var M=k>>>4;if(!(M>>>8))a[y++]=M;else{if(M==256)break;var q=y+M-254;if(M>264){var B=b.ldef[M-257];q=y+(B>>>3)+h(i,x,7&B),x+=7&B}var X=w[p(i,x)&g];x+=15&X;var re=X>>>4,V=b.ddef[re],K=(V>>>4)+l(i,x,15&V);for(x+=15&V,A&&(a=r.F._check(a,y+(1<<17)));y<q;)a[y]=a[y++-K],a[y]=a[y++-K],a[y]=a[y++-K],a[y]=a[y++-K];y=q}}}else{7&x&&(x+=8-(7&x));var $=4+(x>>>3),Y=i[$-4]|i[$-3]<<8;A&&(a=r.F._check(a,y+Y)),a.set(new s(i.buffer,i.byteOffset+$,Y),y),x=$+Y<<3,y+=Y}return a.length==y?a:a.slice(0,y)},r.F._check=function(i,a){var s=i.length;if(a<=s)return i;var o=new Uint8Array(Math.max(s<<1,a));return o.set(i,0),o},r.F._decodeTiny=function(i,a,s,o,l,h){for(var u=r.F._bitsE,d=r.F._get17,f=0;f<s;){var p=i[d(o,l)&a];l+=15&p;var b=p>>>4;if(b<=15)h[f]=b,f++;else{var A=0,D=0;b==16?(D=3+u(o,l,2),l+=2,A=h[f-1]):b==17?(D=3+u(o,l,3),l+=3):b==18&&(D=11+u(o,l,7),l+=7);for(var w=f+D;f<w;)h[f]=A,f++}}return l},r.F._copyOut=function(i,a,s,o){for(var l=0,h=0,u=o.length>>>1;h<s;){var d=i[h+a];o[h<<1]=0,o[1+(h<<1)]=d,d>l&&(l=d),h++}for(;h<u;)o[h<<1]=0,o[1+(h<<1)]=0,h++;return l},r.F.makeCodes=function(i,a){for(var s,o,l,h,u=r.F.U,d=i.length,f=u.bl_count,p=0;p<=a;p++)f[p]=0;for(p=1;p<d;p+=2)f[i[p]]++;var b=u.next_code;for(s=0,f[0]=0,o=1;o<=a;o++)s=s+f[o-1]<<1,b[o]=s;for(l=0;l<d;l+=2)(h=i[l+1])!=0&&(i[l]=b[h],b[h]++)},r.F.codes2map=function(i,a,s){for(var o=i.length,l=r.F.U.rev15,h=0;h<o;h+=2)if(i[h+1]!=0)for(var u=h>>1,d=i[h+1],f=u<<4|d,p=a-d,b=i[h]<<p,A=b+(1<<p);b!=A;)s[l[b]>>>15-a]=f,b++},r.F.revCodes=function(i,a){for(var s=r.F.U.rev15,o=15-a,l=0;l<i.length;l+=2){var h=i[l]<<a-i[l+1];i[l]=s[h]>>>o}},r.F._putsE=function(i,a,s){s<<=7&a;var o=a>>>3;i[o]|=s,i[o+1]|=s>>>8},r.F._putsF=function(i,a,s){s<<=7&a;var o=a>>>3;i[o]|=s,i[o+1]|=s>>>8,i[o+2]|=s>>>16},r.F._bitsE=function(i,a,s){return(i[a>>>3]|i[1+(a>>>3)]<<8)>>>(7&a)&(1<<s)-1},r.F._bitsF=function(i,a,s){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)&(1<<s)-1},r.F._get17=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)},r.F._get25=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16|i[3+(a>>>3)]<<24)>>>(7&a)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,a=0;a<32768;a++){var s=a;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,i.rev15[a]=(s>>>16|s<<16)>>>17}function o(l,h,u){for(;h--!=0;)l.push(0,u)}for(a=0;a<32;a++)i.ldef[a]=i.of0[a]<<3|i.exb[a],i.ddef[a]=i.df0[a]<<4|i.dxb[a];o(i.fltree,144,8),o(i.fltree,112,9),o(i.fltree,24,7),o(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),o(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),o(i.itree,19,0),o(i.ltree,286,0),o(i.dtree,30,0),o(i.ttree,320,0)}()})();var jP=OP({__proto__:null,default:$d},[$d]);const jr=function(){var t={nextZero(u,d){for(;u[d]!=0;)d++;return d},readUshort:(u,d)=>u[d]<<8|u[d+1],writeUshort(u,d,f){u[d]=f>>8&255,u[d+1]=255&f},readUint:(u,d)=>16777216*u[d]+(u[d+1]<<16|u[d+2]<<8|u[d+3]),writeUint(u,d,f){u[d]=f>>24&255,u[d+1]=f>>16&255,u[d+2]=f>>8&255,u[d+3]=255&f},readASCII(u,d,f){let p="";for(let b=0;b<f;b++)p+=String.fromCharCode(u[d+b]);return p},writeASCII(u,d,f){for(let p=0;p<f.length;p++)u[d+p]=f.charCodeAt(p)},readBytes(u,d,f){const p=[];for(let b=0;b<f;b++)p.push(u[d+b]);return p},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,d,f){let p,b="";for(let A=0;A<f;A++)b+=`%${t.pad(u[d+A].toString(16))}`;try{p=decodeURIComponent(b)}catch{return t.readASCII(u,d,f)}return p}};function e(u,d,f,p){const b=d*f,A=a(p),D=Math.ceil(d*A/8),w=new Uint8Array(4*b),T=new Uint32Array(w.buffer),{ctype:N}=p,{depth:O}=p,P=t.readUshort;if(N==6){const B=b<<2;if(O==8)for(var R=0;R<B;R+=4)w[R]=u[R],w[R+1]=u[R+1],w[R+2]=u[R+2],w[R+3]=u[R+3];if(O==16)for(R=0;R<B;R++)w[R]=u[R<<1]}else if(N==2){const B=p.tabs.tRNS;if(B==null){if(O==8)for(R=0;R<b;R++){var _=3*R;T[R]=255<<24|u[_+2]<<16|u[_+1]<<8|u[_]}if(O==16)for(R=0;R<b;R++)_=6*R,T[R]=255<<24|u[_+4]<<16|u[_+2]<<8|u[_]}else{var g=B[0];const X=B[1],re=B[2];if(O==8)for(R=0;R<b;R++){var y=R<<2;_=3*R,T[R]=255<<24|u[_+2]<<16|u[_+1]<<8|u[_],u[_]==g&&u[_+1]==X&&u[_+2]==re&&(w[y+3]=0)}if(O==16)for(R=0;R<b;R++)y=R<<2,_=6*R,T[R]=255<<24|u[_+4]<<16|u[_+2]<<8|u[_],P(u,_)==g&&P(u,_+2)==X&&P(u,_+4)==re&&(w[y+3]=0)}}else if(N==3){const B=p.tabs.PLTE,X=p.tabs.tRNS,re=X?X.length:0;if(O==1)for(var x=0;x<f;x++){var C=x*D,I=x*d;for(R=0;R<d;R++){y=I+R<<2;var S=3*(U=u[C+(R>>3)]>>7-((7&R)<<0)&1);w[y]=B[S],w[y+1]=B[S+1],w[y+2]=B[S+2],w[y+3]=U<re?X[U]:255}}if(O==2)for(x=0;x<f;x++)for(C=x*D,I=x*d,R=0;R<d;R++)y=I+R<<2,S=3*(U=u[C+(R>>2)]>>6-((3&R)<<1)&3),w[y]=B[S],w[y+1]=B[S+1],w[y+2]=B[S+2],w[y+3]=U<re?X[U]:255;if(O==4)for(x=0;x<f;x++)for(C=x*D,I=x*d,R=0;R<d;R++)y=I+R<<2,S=3*(U=u[C+(R>>1)]>>4-((1&R)<<2)&15),w[y]=B[S],w[y+1]=B[S+1],w[y+2]=B[S+2],w[y+3]=U<re?X[U]:255;if(O==8)for(R=0;R<b;R++){var U;y=R<<2,S=3*(U=u[R]),w[y]=B[S],w[y+1]=B[S+1],w[y+2]=B[S+2],w[y+3]=U<re?X[U]:255}}else if(N==4){if(O==8)for(R=0;R<b;R++){y=R<<2;var z=u[k=R<<1];w[y]=z,w[y+1]=z,w[y+2]=z,w[y+3]=u[k+1]}if(O==16)for(R=0;R<b;R++){var k;y=R<<2,z=u[k=R<<2],w[y]=z,w[y+1]=z,w[y+2]=z,w[y+3]=u[k+2]}}else if(N==0)for(g=p.tabs.tRNS?p.tabs.tRNS:-1,x=0;x<f;x++){const B=x*D,X=x*d;if(O==1)for(var M=0;M<d;M++){var q=(z=255*(u[B+(M>>>3)]>>>7-(7&M)&1))==255*g?0:255;T[X+M]=q<<24|z<<16|z<<8|z}else if(O==2)for(M=0;M<d;M++)q=(z=85*(u[B+(M>>>2)]>>>6-((3&M)<<1)&3))==85*g?0:255,T[X+M]=q<<24|z<<16|z<<8|z;else if(O==4)for(M=0;M<d;M++)q=(z=17*(u[B+(M>>>1)]>>>4-((1&M)<<2)&15))==17*g?0:255,T[X+M]=q<<24|z<<16|z<<8|z;else if(O==8)for(M=0;M<d;M++)q=(z=u[B+M])==g?0:255,T[X+M]=q<<24|z<<16|z<<8|z;else if(O==16)for(M=0;M<d;M++)z=u[B+(M<<1)],q=P(u,B+(M<<1))==g?0:255,T[X+M]=q<<24|z<<16|z<<8|z}return w}function n(u,d,f,p){const b=a(u),A=Math.ceil(f*b/8),D=new Uint8Array((A+1+u.interlace)*p);return d=u.tabs.CgBI?i(d,D):r(d,D),u.interlace==0?d=s(d,u,0,f,p):u.interlace==1&&(d=function(T,N){const O=N.width,P=N.height,R=a(N),_=R>>3,g=Math.ceil(O*R/8),y=new Uint8Array(P*g);let x=0;const C=[0,0,4,0,2,0,1],I=[0,4,0,2,0,1,0],S=[8,8,8,4,4,2,2],U=[8,8,4,4,2,2,1];let z=0;for(;z<7;){const M=S[z],q=U[z];let B=0,X=0,re=C[z];for(;re<P;)re+=M,X++;let V=I[z];for(;V<O;)V+=q,B++;const K=Math.ceil(B*R/8);s(T,N,x,B,X);let $=0,Y=C[z];for(;Y<P;){let le=I[z],xe=x+$*K<<3;for(;le<O;){var k;if(R==1&&(k=(k=T[xe>>3])>>7-(7&xe)&1,y[Y*g+(le>>3)]|=k<<7-((7&le)<<0)),R==2&&(k=(k=T[xe>>3])>>6-(7&xe)&3,y[Y*g+(le>>2)]|=k<<6-((3&le)<<1)),R==4&&(k=(k=T[xe>>3])>>4-(7&xe)&15,y[Y*g+(le>>1)]|=k<<4-((1&le)<<2)),R>=8){const me=Y*g+le*_;for(let De=0;De<_;De++)y[me+De]=T[(xe>>3)+De]}xe+=R,le+=q}$++,Y+=M}B*X!=0&&(x+=X*(1+K)),z+=1}return y}(d,u)),d}function r(u,d){return i(new Uint8Array(u.buffer,2,u.length-6),d)}var i=function(){const u={H:{}};return u.H.N=function(d,f){const p=Uint8Array;let b,A,D=0,w=0,T=0,N=0,O=0,P=0,R=0,_=0,g=0;if(d[0]==3&&d[1]==0)return f||new p(0);const y=u.H,x=y.b,C=y.e,I=y.R,S=y.n,U=y.A,z=y.Z,k=y.m,M=f==null;for(M&&(f=new p(d.length>>>2<<5));D==0;)if(D=x(d,g,1),w=x(d,g+1,2),g+=3,w!=0){if(M&&(f=u.H.W(f,_+(1<<17))),w==1&&(b=k.J,A=k.h,P=511,R=31),w==2){T=C(d,g,5)+257,N=C(d,g+5,5)+1,O=C(d,g+10,4)+4,g+=14;let B=1;for(var q=0;q<38;q+=2)k.Q[q]=0,k.Q[q+1]=0;for(q=0;q<O;q++){const V=C(d,g+3*q,3);k.Q[1+(k.X[q]<<1)]=V,V>B&&(B=V)}g+=3*O,S(k.Q,B),U(k.Q,B,k.u),b=k.w,A=k.d,g=I(k.u,(1<<B)-1,T+N,d,g,k.v);const X=y.V(k.v,0,T,k.C);P=(1<<X)-1;const re=y.V(k.v,T,N,k.D);R=(1<<re)-1,S(k.C,X),U(k.C,X,b),S(k.D,re),U(k.D,re,A)}for(;;){const B=b[z(d,g)&P];g+=15&B;const X=B>>>4;if(!(X>>>8))f[_++]=X;else{if(X==256)break;{let re=_+X-254;if(X>264){const le=k.q[X-257];re=_+(le>>>3)+C(d,g,7&le),g+=7&le}const V=A[z(d,g)&R];g+=15&V;const K=V>>>4,$=k.c[K],Y=($>>>4)+x(d,g,15&$);for(g+=15&$;_<re;)f[_]=f[_++-Y],f[_]=f[_++-Y],f[_]=f[_++-Y],f[_]=f[_++-Y];_=re}}}}else{7&g&&(g+=8-(7&g));const B=4+(g>>>3),X=d[B-4]|d[B-3]<<8;M&&(f=u.H.W(f,_+X)),f.set(new p(d.buffer,d.byteOffset+B,X),_),g=B+X<<3,_+=X}return f.length==_?f:f.slice(0,_)},u.H.W=function(d,f){const p=d.length;if(f<=p)return d;const b=new Uint8Array(p<<1);return b.set(d,0),b},u.H.R=function(d,f,p,b,A,D){const w=u.H.e,T=u.H.Z;let N=0;for(;N<p;){const O=d[T(b,A)&f];A+=15&O;const P=O>>>4;if(P<=15)D[N]=P,N++;else{let R=0,_=0;P==16?(_=3+w(b,A,2),A+=2,R=D[N-1]):P==17?(_=3+w(b,A,3),A+=3):P==18&&(_=11+w(b,A,7),A+=7);const g=N+_;for(;N<g;)D[N]=R,N++}}return A},u.H.V=function(d,f,p,b){let A=0,D=0;const w=b.length>>>1;for(;D<p;){const T=d[D+f];b[D<<1]=0,b[1+(D<<1)]=T,T>A&&(A=T),D++}for(;D<w;)b[D<<1]=0,b[1+(D<<1)]=0,D++;return A},u.H.n=function(d,f){const p=u.H.m,b=d.length;let A,D,w,T;const N=p.j;for(var O=0;O<=f;O++)N[O]=0;for(O=1;O<b;O+=2)N[d[O]]++;const P=p.K;for(A=0,N[0]=0,D=1;D<=f;D++)A=A+N[D-1]<<1,P[D]=A;for(w=0;w<b;w+=2)T=d[w+1],T!=0&&(d[w]=P[T],P[T]++)},u.H.A=function(d,f,p){const b=d.length,A=u.H.m.r;for(let D=0;D<b;D+=2)if(d[D+1]!=0){const w=D>>1,T=d[D+1],N=w<<4|T,O=f-T;let P=d[D]<<O;const R=P+(1<<O);for(;P!=R;)p[A[P]>>>15-f]=N,P++}},u.H.l=function(d,f){const p=u.H.m.r,b=15-f;for(let A=0;A<d.length;A+=2){const D=d[A]<<f-d[A+1];d[A]=p[D]>>>b}},u.H.M=function(d,f,p){p<<=7&f;const b=f>>>3;d[b]|=p,d[b+1]|=p>>>8},u.H.I=function(d,f,p){p<<=7&f;const b=f>>>3;d[b]|=p,d[b+1]|=p>>>8,d[b+2]|=p>>>16},u.H.e=function(d,f,p){return(d[f>>>3]|d[1+(f>>>3)]<<8)>>>(7&f)&(1<<p)-1},u.H.b=function(d,f,p){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16)>>>(7&f)&(1<<p)-1},u.H.Z=function(d,f){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16)>>>(7&f)},u.H.i=function(d,f){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16|d[3+(f>>>3)]<<24)>>>(7&f)},u.H.m=function(){const d=Uint16Array,f=Uint32Array;return{K:new d(16),j:new d(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new d(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new f(32),J:new d(512),_:[],h:new d(32),$:[],w:new d(32768),C:[],v:[],d:new d(32768),D:[],u:new d(512),Q:[],r:new d(32768),s:new f(286),Y:new f(30),a:new f(19),t:new f(15e3),k:new d(65536),g:new d(32768)}}(),function(){const d=u.H.m;for(var f=0;f<32768;f++){let b=f;b=(2863311530&b)>>>1|(1431655765&b)<<1,b=(3435973836&b)>>>2|(858993459&b)<<2,b=(4042322160&b)>>>4|(252645135&b)<<4,b=(4278255360&b)>>>8|(16711935&b)<<8,d.r[f]=(b>>>16|b<<16)>>>17}function p(b,A,D){for(;A--!=0;)b.push(0,D)}for(f=0;f<32;f++)d.q[f]=d.S[f]<<3|d.T[f],d.c[f]=d.p[f]<<4|d.z[f];p(d._,144,8),p(d._,112,9),p(d._,24,7),p(d._,8,8),u.H.n(d._,9),u.H.A(d._,9,d.J),u.H.l(d._,9),p(d.$,32,5),u.H.n(d.$,5),u.H.A(d.$,5,d.h),u.H.l(d.$,5),p(d.Q,19,0),p(d.C,286,0),p(d.D,30,0),p(d.v,320,0)}(),u.H.N}();function a(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function s(u,d,f,p,b){let A=a(d);const D=Math.ceil(p*A/8);let w,T;A=Math.ceil(A/8);let N=u[f],O=0;if(N>1&&(u[f]=[0,0,1][N-2]),N==3)for(O=A;O<D;O++)u[O+1]=u[O+1]+(u[O+1-A]>>>1)&255;for(let P=0;P<b;P++)if(w=f+P*D,T=w+P+1,N=u[T-1],O=0,N==0)for(;O<D;O++)u[w+O]=u[T+O];else if(N==1){for(;O<A;O++)u[w+O]=u[T+O];for(;O<D;O++)u[w+O]=u[T+O]+u[w+O-A]}else if(N==2)for(;O<D;O++)u[w+O]=u[T+O]+u[w+O-D];else if(N==3){for(;O<A;O++)u[w+O]=u[T+O]+(u[w+O-D]>>>1);for(;O<D;O++)u[w+O]=u[T+O]+(u[w+O-D]+u[w+O-A]>>>1)}else{for(;O<A;O++)u[w+O]=u[T+O]+o(0,u[w+O-D],0);for(;O<D;O++)u[w+O]=u[T+O]+o(u[w+O-A],u[w+O-D],u[w+O-A-D])}return u}function o(u,d,f){const p=u+d-f,b=p-u,A=p-d,D=p-f;return b*b<=A*A&&b*b<=D*D?u:A*A<=D*D?d:f}function l(u,d,f){f.width=t.readUint(u,d),d+=4,f.height=t.readUint(u,d),d+=4,f.depth=u[d],d++,f.ctype=u[d],d++,f.compress=u[d],d++,f.filter=u[d],d++,f.interlace=u[d],d++}function h(u,d,f,p,b,A,D,w,T){const N=Math.min(d,b),O=Math.min(f,A);let P=0,R=0;for(let z=0;z<O;z++)for(let k=0;k<N;k++)if(D>=0&&w>=0?(P=z*d+k<<2,R=(w+z)*b+D+k<<2):(P=(-w+z)*d-D+k<<2,R=z*b+k<<2),T==0)p[R]=u[P],p[R+1]=u[P+1],p[R+2]=u[P+2],p[R+3]=u[P+3];else if(T==1){var _=u[P+3]*.00392156862745098,g=u[P]*_,y=u[P+1]*_,x=u[P+2]*_,C=p[R+3]*(1/255),I=p[R]*C,S=p[R+1]*C,U=p[R+2]*C;const M=1-_,q=_+C*M,B=q==0?0:1/q;p[R+3]=255*q,p[R+0]=(g+I*M)*B,p[R+1]=(y+S*M)*B,p[R+2]=(x+U*M)*B}else if(T==2)_=u[P+3],g=u[P],y=u[P+1],x=u[P+2],C=p[R+3],I=p[R],S=p[R+1],U=p[R+2],_==C&&g==I&&y==S&&x==U?(p[R]=0,p[R+1]=0,p[R+2]=0,p[R+3]=0):(p[R]=g,p[R+1]=y,p[R+2]=x,p[R+3]=_);else if(T==3){if(_=u[P+3],g=u[P],y=u[P+1],x=u[P+2],C=p[R+3],I=p[R],S=p[R+1],U=p[R+2],_==C&&g==I&&y==S&&x==U)continue;if(_<220&&C>20)return!1}return!0}return{decode:function(d){const f=new Uint8Array(d);let p=8;const b=t,A=b.readUshort,D=b.readUint,w={tabs:{},frames:[]},T=new Uint8Array(f.length);let N,O=0,P=0;const R=[137,80,78,71,13,10,26,10];for(var _=0;_<8;_++)if(f[_]!=R[_])throw"The input is not a PNG file!";for(;p<f.length;){const z=b.readUint(f,p);p+=4;const k=b.readASCII(f,p,4);if(p+=4,k=="IHDR")l(f,p,w);else if(k=="iCCP"){for(var g=p;f[g]!=0;)g++;b.readASCII(f,p,g-p),f[g+1];const M=f.slice(g+2,p+z);let q=null;try{q=r(M)}catch{q=i(M)}w.tabs[k]=q}else if(k=="CgBI")w.tabs[k]=f.slice(p,p+4);else if(k=="IDAT"){for(_=0;_<z;_++)T[O+_]=f[p+_];O+=z}else if(k=="acTL")w.tabs[k]={num_frames:D(f,p),num_plays:D(f,p+4)},N=new Uint8Array(f.length);else if(k=="fcTL"){P!=0&&((U=w.frames[w.frames.length-1]).data=n(w,N.slice(0,P),U.rect.width,U.rect.height),P=0);const M={x:D(f,p+12),y:D(f,p+16),width:D(f,p+4),height:D(f,p+8)};let q=A(f,p+22);q=A(f,p+20)/(q==0?100:q);const B={rect:M,delay:Math.round(1e3*q),dispose:f[p+24],blend:f[p+25]};w.frames.push(B)}else if(k=="fdAT"){for(_=0;_<z-4;_++)N[P+_]=f[p+_+4];P+=z-4}else if(k=="pHYs")w.tabs[k]=[b.readUint(f,p),b.readUint(f,p+4),f[p+8]];else if(k=="cHRM")for(w.tabs[k]=[],_=0;_<8;_++)w.tabs[k].push(b.readUint(f,p+4*_));else if(k=="tEXt"||k=="zTXt"){w.tabs[k]==null&&(w.tabs[k]={});var y=b.nextZero(f,p),x=b.readASCII(f,p,y-p),C=p+z-y-1;if(k=="tEXt")S=b.readASCII(f,y+1,C);else{var I=r(f.slice(y+2,y+2+C));S=b.readUTF8(I,0,I.length)}w.tabs[k][x]=S}else if(k=="iTXt"){w.tabs[k]==null&&(w.tabs[k]={}),y=0,g=p,y=b.nextZero(f,g),x=b.readASCII(f,g,y-g);const M=f[g=y+1];var S;f[g+1],g+=2,y=b.nextZero(f,g),b.readASCII(f,g,y-g),g=y+1,y=b.nextZero(f,g),b.readUTF8(f,g,y-g),C=z-((g=y+1)-p),M==0?S=b.readUTF8(f,g,C):(I=r(f.slice(g,g+C)),S=b.readUTF8(I,0,I.length)),w.tabs[k][x]=S}else if(k=="PLTE")w.tabs[k]=b.readBytes(f,p,z);else if(k=="hIST"){const M=w.tabs.PLTE.length/3;for(w.tabs[k]=[],_=0;_<M;_++)w.tabs[k].push(A(f,p+2*_))}else if(k=="tRNS")w.ctype==3?w.tabs[k]=b.readBytes(f,p,z):w.ctype==0?w.tabs[k]=A(f,p):w.ctype==2&&(w.tabs[k]=[A(f,p),A(f,p+2),A(f,p+4)]);else if(k=="gAMA")w.tabs[k]=b.readUint(f,p)/1e5;else if(k=="sRGB")w.tabs[k]=f[p];else if(k=="bKGD")w.ctype==0||w.ctype==4?w.tabs[k]=[A(f,p)]:w.ctype==2||w.ctype==6?w.tabs[k]=[A(f,p),A(f,p+2),A(f,p+4)]:w.ctype==3&&(w.tabs[k]=f[p]);else if(k=="IEND")break;p+=z,b.readUint(f,p),p+=4}var U;return P!=0&&((U=w.frames[w.frames.length-1]).data=n(w,N.slice(0,P),U.rect.width,U.rect.height)),w.data=n(w,T,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(d){const f=d.width,p=d.height;if(d.tabs.acTL==null)return[e(d.data,f,p,d).buffer];const b=[];d.frames[0].data==null&&(d.frames[0].data=d.data);const A=f*p*4,D=new Uint8Array(A),w=new Uint8Array(A),T=new Uint8Array(A);for(let O=0;O<d.frames.length;O++){const P=d.frames[O],R=P.rect.x,_=P.rect.y,g=P.rect.width,y=P.rect.height,x=e(P.data,g,y,d);if(O!=0)for(var N=0;N<A;N++)T[N]=D[N];if(P.blend==0?h(x,g,y,D,f,p,R,_,0):P.blend==1&&h(x,g,y,D,f,p,R,_,1),b.push(D.buffer.slice(0)),P.dispose!=0){if(P.dispose==1)h(w,g,y,D,f,p,R,_,0);else if(P.dispose==2)for(N=0;N<A;N++)D[N]=T[N]}}return b},_paeth:o,_copyTile:h,_bin:t}}();(function(){const{_copyTile:t}=jr,{_bin:e}=jr,n=jr._paeth;var r={table:function(){const g=new Uint32Array(256);for(let y=0;y<256;y++){let x=y;for(let C=0;C<8;C++)1&x?x=3988292384^x>>>1:x>>>=1;g[y]=x}return g}(),update(g,y,x,C){for(let I=0;I<C;I++)g=r.table[255&(g^y[x+I])]^g>>>8;return g},crc:(g,y,x)=>4294967295^r.update(4294967295,g,y,x)};function i(g,y,x,C){y[x]+=g[0]*C>>4,y[x+1]+=g[1]*C>>4,y[x+2]+=g[2]*C>>4,y[x+3]+=g[3]*C>>4}function a(g){return Math.max(0,Math.min(255,g))}function s(g,y){const x=g[0]-y[0],C=g[1]-y[1],I=g[2]-y[2],S=g[3]-y[3];return x*x+C*C+I*I+S*S}function o(g,y,x,C,I,S,U){U==null&&(U=1);const z=C.length,k=[];for(var M=0;M<z;M++){const Y=C[M];k.push([Y>>>0&255,Y>>>8&255,Y>>>16&255,Y>>>24&255])}for(M=0;M<z;M++){let Y=4294967295;for(var q=0,B=0;B<z;B++){var X=s(k[M],k[B]);B!=M&&X<Y&&(Y=X,q=B)}}const re=new Uint32Array(I.buffer),V=new Int16Array(y*x*4),K=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(M=0;M<K.length;M++)K[M]=255*((K[M]+.5)/16-.5);for(let Y=0;Y<x;Y++)for(let le=0;le<y;le++){var $;M=4*(Y*y+le),U!=2?$=[a(g[M]+V[M]),a(g[M+1]+V[M+1]),a(g[M+2]+V[M+2]),a(g[M+3]+V[M+3])]:(X=K[4*(3&Y)+(3&le)],$=[a(g[M]+X),a(g[M+1]+X),a(g[M+2]+X),a(g[M+3]+X)]),q=0;let xe=16777215;for(B=0;B<z;B++){const ze=s($,k[B]);ze<xe&&(xe=ze,q=B)}const me=k[q],De=[$[0]-me[0],$[1]-me[1],$[2]-me[2],$[3]-me[3]];U==1&&(le!=y-1&&i(De,V,M+4,7),Y!=x-1&&(le!=0&&i(De,V,M+4*y-4,3),i(De,V,M+4*y,5),le!=y-1&&i(De,V,M+4*y+4,1))),S[M>>2]=q,re[M>>2]=C[q]}}function l(g,y,x,C,I){I==null&&(I={});const{crc:S}=r,U=e.writeUint,z=e.writeUshort,k=e.writeASCII;let M=8;const q=g.frames.length>1;let B,X=!1,re=33+(q?20:0);if(I.sRGB!=null&&(re+=13),I.pHYs!=null&&(re+=21),I.iCCP!=null&&(B=pako.deflate(I.iCCP),re+=21+B.length+4),g.ctype==3){for(var V=g.plte.length,K=0;K<V;K++)g.plte[K]>>>24!=255&&(X=!0);re+=8+3*V+4+(X?8+1*V+4:0)}for(var $=0;$<g.frames.length;$++)q&&(re+=38),re+=(me=g.frames[$]).cimg.length+12,$!=0&&(re+=4);re+=12;const Y=new Uint8Array(re),le=[137,80,78,71,13,10,26,10];for(K=0;K<8;K++)Y[K]=le[K];if(U(Y,M,13),M+=4,k(Y,M,"IHDR"),M+=4,U(Y,M,y),M+=4,U(Y,M,x),M+=4,Y[M]=g.depth,M++,Y[M]=g.ctype,M++,Y[M]=0,M++,Y[M]=0,M++,Y[M]=0,M++,U(Y,M,S(Y,M-17,17)),M+=4,I.sRGB!=null&&(U(Y,M,1),M+=4,k(Y,M,"sRGB"),M+=4,Y[M]=I.sRGB,M++,U(Y,M,S(Y,M-5,5)),M+=4),I.iCCP!=null){const De=13+B.length;U(Y,M,De),M+=4,k(Y,M,"iCCP"),M+=4,k(Y,M,"ICC profile"),M+=11,M+=2,Y.set(B,M),M+=B.length,U(Y,M,S(Y,M-(De+4),De+4)),M+=4}if(I.pHYs!=null&&(U(Y,M,9),M+=4,k(Y,M,"pHYs"),M+=4,U(Y,M,I.pHYs[0]),M+=4,U(Y,M,I.pHYs[1]),M+=4,Y[M]=I.pHYs[2],M++,U(Y,M,S(Y,M-13,13)),M+=4),q&&(U(Y,M,8),M+=4,k(Y,M,"acTL"),M+=4,U(Y,M,g.frames.length),M+=4,U(Y,M,I.loop!=null?I.loop:0),M+=4,U(Y,M,S(Y,M-12,12)),M+=4),g.ctype==3){for(U(Y,M,3*(V=g.plte.length)),M+=4,k(Y,M,"PLTE"),M+=4,K=0;K<V;K++){const De=3*K,ze=g.plte[K],We=255&ze,Ae=ze>>>8&255,en=ze>>>16&255;Y[M+De+0]=We,Y[M+De+1]=Ae,Y[M+De+2]=en}if(M+=3*V,U(Y,M,S(Y,M-3*V-4,3*V+4)),M+=4,X){for(U(Y,M,V),M+=4,k(Y,M,"tRNS"),M+=4,K=0;K<V;K++)Y[M+K]=g.plte[K]>>>24&255;M+=V,U(Y,M,S(Y,M-V-4,V+4)),M+=4}}let xe=0;for($=0;$<g.frames.length;$++){var me=g.frames[$];q&&(U(Y,M,26),M+=4,k(Y,M,"fcTL"),M+=4,U(Y,M,xe++),M+=4,U(Y,M,me.rect.width),M+=4,U(Y,M,me.rect.height),M+=4,U(Y,M,me.rect.x),M+=4,U(Y,M,me.rect.y),M+=4,z(Y,M,C[$]),M+=2,z(Y,M,1e3),M+=2,Y[M]=me.dispose,M++,Y[M]=me.blend,M++,U(Y,M,S(Y,M-30,30)),M+=4);const De=me.cimg;U(Y,M,(V=De.length)+($==0?0:4)),M+=4;const ze=M;k(Y,M,$==0?"IDAT":"fdAT"),M+=4,$!=0&&(U(Y,M,xe++),M+=4),Y.set(De,M),M+=V,U(Y,M,S(Y,ze,M-ze)),M+=4}return U(Y,M,0),M+=4,k(Y,M,"IEND"),M+=4,U(Y,M,S(Y,M-4,4)),M+=4,Y.buffer}function h(g,y,x){for(let C=0;C<g.frames.length;C++){const I=g.frames[C];I.rect.width;const S=I.rect.height,U=new Uint8Array(S*I.bpl+S);I.cimg=p(I.img,S,I.bpp,I.bpl,U,y,x)}}function u(g,y,x,C,I){const S=I[0],U=I[1],z=I[2],k=I[3],M=I[4],q=I[5];let B=6,X=8,re=255;for(var V=0;V<g.length;V++){const it=new Uint8Array(g[V]);for(var K=it.length,$=0;$<K;$+=4)re&=it[$+3]}const Y=re!=255,le=function(Je,$e,Tt,Mt,ht,hn){const ot=[];for(var Ce=0;Ce<Je.length;Ce++){const kt=new Uint8Array(Je[Ce]),tn=new Uint32Array(kt.buffer);var Rt;let Bt=0,jt=0,En=$e,Vn=Tt,Qi=Mt?1:0;if(Ce!=0){const Nl=hn||Mt||Ce==1||ot[Ce-2].dispose!=0?1:2;let Gr=0,$r=1e9;for(let Ir=0;Ir<Nl;Ir++){var et=new Uint8Array(Je[Ce-1-Ir]);const Dr=new Uint32Array(Je[Ce-1-Ir]);let xn=$e,zn=Tt,dn=-1,Yr=-1;for(let Mn=0;Mn<Tt;Mn++)for(let nn=0;nn<$e;nn++)tn[qe=Mn*$e+nn]!=Dr[qe]&&(nn<xn&&(xn=nn),nn>dn&&(dn=nn),Mn<zn&&(zn=Mn),Mn>Yr&&(Yr=Mn));dn==-1&&(xn=zn=dn=Yr=0),ht&&((1&xn)==1&&xn--,(1&zn)==1&&zn--);const Xr=(dn-xn+1)*(Yr-zn+1);Xr<$r&&($r=Xr,Gr=Ir,Bt=xn,jt=zn,En=dn-xn+1,Vn=Yr-zn+1)}et=new Uint8Array(Je[Ce-1-Gr]),Gr==1&&(ot[Ce-1].dispose=2),Rt=new Uint8Array(En*Vn*4),t(et,$e,Tt,Rt,En,Vn,-Bt,-jt,0),Qi=t(kt,$e,Tt,Rt,En,Vn,-Bt,-jt,3)?1:0,Qi==1?f(kt,$e,Tt,Rt,{x:Bt,y:jt,width:En,height:Vn}):t(kt,$e,Tt,Rt,En,Vn,-Bt,-jt,0)}else Rt=kt.slice(0);ot.push({rect:{x:Bt,y:jt,width:En,height:Vn},img:Rt,blend:Qi,dispose:0})}if(Mt)for(Ce=0;Ce<ot.length;Ce++){if((zt=ot[Ce]).blend==1)continue;const kt=zt.rect,tn=ot[Ce-1].rect,Bt=Math.min(kt.x,tn.x),jt=Math.min(kt.y,tn.y),En={x:Bt,y:jt,width:Math.max(kt.x+kt.width,tn.x+tn.width)-Bt,height:Math.max(kt.y+kt.height,tn.y+tn.height)-jt};ot[Ce-1].dispose=1,Ce-1!=0&&d(Je,$e,Tt,ot,Ce-1,En,ht),d(Je,$e,Tt,ot,Ce,En,ht)}let gt=0;if(Je.length!=1)for(var qe=0;qe<ot.length;qe++){var zt;gt+=(zt=ot[qe]).rect.width*zt.rect.height}return ot}(g,y,x,S,U,z),xe={},me=[],De=[];if(C!=0){const it=[];for($=0;$<le.length;$++)it.push(le[$].img.buffer);const Je=function(ht){let hn=0;for(var ot=0;ot<ht.length;ot++)hn+=ht[ot].byteLength;const Ce=new Uint8Array(hn);let Rt=0;for(ot=0;ot<ht.length;ot++){const et=new Uint8Array(ht[ot]),gt=et.length;for(let qe=0;qe<gt;qe+=4){let zt=et[qe],kt=et[qe+1],tn=et[qe+2];const Bt=et[qe+3];Bt==0&&(zt=kt=tn=0),Ce[Rt+qe]=zt,Ce[Rt+qe+1]=kt,Ce[Rt+qe+2]=tn,Ce[Rt+qe+3]=Bt}Rt+=gt}return Ce.buffer}(it),$e=A(Je,C);for($=0;$<$e.plte.length;$++)me.push($e.plte[$].est.rgba);let Tt=0;for($=0;$<le.length;$++){const Mt=(We=le[$]).img.length;var ze=new Uint8Array($e.inds.buffer,Tt>>2,Mt>>2);De.push(ze);const ht=new Uint8Array($e.abuf,Tt,Mt);q&&o(We.img,We.rect.width,We.rect.height,me,ht,ze),We.img.set(ht),Tt+=Mt}}else for(V=0;V<le.length;V++){var We=le[V];const it=new Uint32Array(We.img.buffer);var Ae=We.rect.width;for(K=it.length,ze=new Uint8Array(K),De.push(ze),$=0;$<K;$++){const Je=it[$];if($!=0&&Je==it[$-1])ze[$]=ze[$-1];else if($>Ae&&Je==it[$-Ae])ze[$]=ze[$-Ae];else{let $e=xe[Je];if($e==null&&(xe[Je]=$e=me.length,me.push(Je),me.length>=300))break;ze[$]=$e}}}const en=me.length;for(en<=256&&M==0&&(X=en<=2?1:en<=4?2:en<=16?4:8,X=Math.max(X,k)),V=0;V<le.length;V++){(We=le[V]).rect.x,We.rect.y,Ae=We.rect.width;const it=We.rect.height;let Je=We.img;new Uint32Array(Je.buffer);let $e=4*Ae,Tt=4;if(en<=256&&M==0){$e=Math.ceil(X*Ae/8);var un=new Uint8Array($e*it);const Mt=De[V];for(let ht=0;ht<it;ht++){$=ht*$e;const hn=ht*Ae;if(X==8)for(var Ze=0;Ze<Ae;Ze++)un[$+Ze]=Mt[hn+Ze];else if(X==4)for(Ze=0;Ze<Ae;Ze++)un[$+(Ze>>1)]|=Mt[hn+Ze]<<4-4*(1&Ze);else if(X==2)for(Ze=0;Ze<Ae;Ze++)un[$+(Ze>>2)]|=Mt[hn+Ze]<<6-2*(3&Ze);else if(X==1)for(Ze=0;Ze<Ae;Ze++)un[$+(Ze>>3)]|=Mt[hn+Ze]<<7-1*(7&Ze)}Je=un,B=3,Tt=1}else if(Y==0&&le.length==1){un=new Uint8Array(Ae*it*3);const Mt=Ae*it;for($=0;$<Mt;$++){const ht=3*$,hn=4*$;un[ht]=Je[hn],un[ht+1]=Je[hn+1],un[ht+2]=Je[hn+2]}Je=un,B=2,Tt=3,$e=3*Ae}We.img=Je,We.bpl=$e,We.bpp=Tt}return{ctype:B,depth:X,plte:me,frames:le}}function d(g,y,x,C,I,S,U){const z=Uint8Array,k=Uint32Array,M=new z(g[I-1]),q=new k(g[I-1]),B=I+1<g.length?new z(g[I+1]):null,X=new z(g[I]),re=new k(X.buffer);let V=y,K=x,$=-1,Y=-1;for(let xe=0;xe<S.height;xe++)for(let me=0;me<S.width;me++){const De=S.x+me,ze=S.y+xe,We=ze*y+De,Ae=re[We];Ae==0||C[I-1].dispose==0&&q[We]==Ae&&(B==null||B[4*We+3]!=0)||(De<V&&(V=De),De>$&&($=De),ze<K&&(K=ze),ze>Y&&(Y=ze))}$==-1&&(V=K=$=Y=0),U&&((1&V)==1&&V--,(1&K)==1&&K--),S={x:V,y:K,width:$-V+1,height:Y-K+1};const le=C[I];le.rect=S,le.blend=1,le.img=new Uint8Array(S.width*S.height*4),C[I-1].dispose==0?(t(M,y,x,le.img,S.width,S.height,-S.x,-S.y,0),f(X,y,x,le.img,S)):t(X,y,x,le.img,S.width,S.height,-S.x,-S.y,0)}function f(g,y,x,C,I){t(g,y,x,C,I.width,I.height,-I.x,-I.y,2)}function p(g,y,x,C,I,S,U){const z=[];let k,M=[0,1,2,3,4];S!=-1?M=[S]:(y*C>5e5||x==1)&&(M=[0]),U&&(k={level:0});const q=jP;for(var B=0;B<M.length;B++){for(let V=0;V<y;V++)b(I,g,V,C,x,M[B]);z.push(q.deflate(I,k))}let X,re=1e9;for(B=0;B<z.length;B++)z[B].length<re&&(X=B,re=z[B].length);return z[X]}function b(g,y,x,C,I,S){const U=x*C;let z=U+x;if(g[z]=S,z++,S==0)if(C<500)for(var k=0;k<C;k++)g[z+k]=y[U+k];else g.set(new Uint8Array(y.buffer,U,C),z);else if(S==1){for(k=0;k<I;k++)g[z+k]=y[U+k];for(k=I;k<C;k++)g[z+k]=y[U+k]-y[U+k-I]+256&255}else if(x==0){for(k=0;k<I;k++)g[z+k]=y[U+k];if(S==2)for(k=I;k<C;k++)g[z+k]=y[U+k];if(S==3)for(k=I;k<C;k++)g[z+k]=y[U+k]-(y[U+k-I]>>1)+256&255;if(S==4)for(k=I;k<C;k++)g[z+k]=y[U+k]-n(y[U+k-I],0,0)+256&255}else{if(S==2)for(k=0;k<C;k++)g[z+k]=y[U+k]+256-y[U+k-C]&255;if(S==3){for(k=0;k<I;k++)g[z+k]=y[U+k]+256-(y[U+k-C]>>1)&255;for(k=I;k<C;k++)g[z+k]=y[U+k]+256-(y[U+k-C]+y[U+k-I]>>1)&255}if(S==4){for(k=0;k<I;k++)g[z+k]=y[U+k]+256-n(0,y[U+k-C],0)&255;for(k=I;k<C;k++)g[z+k]=y[U+k]+256-n(y[U+k-I],y[U+k-C],y[U+k-I-C])&255}}}function A(g,y){const x=new Uint8Array(g),C=x.slice(0),I=new Uint32Array(C.buffer),S=D(C,y),U=S[0],z=S[1],k=x.length,M=new Uint8Array(k>>2);let q;if(x.length<2e7)for(var B=0;B<k;B+=4)q=w(U,X=x[B]*(1/255),re=x[B+1]*(1/255),V=x[B+2]*(1/255),K=x[B+3]*(1/255)),M[B>>2]=q.ind,I[B>>2]=q.est.rgba;else for(B=0;B<k;B+=4){var X=x[B]*.00392156862745098,re=x[B+1]*(1/255),V=x[B+2]*(1/255),K=x[B+3]*(1/255);for(q=U;q.left;)q=T(q.est,X,re,V,K)<=0?q.left:q.right;M[B>>2]=q.ind,I[B>>2]=q.est.rgba}return{abuf:C.buffer,inds:M,plte:z}}function D(g,y,x){x==null&&(x=1e-4);const C=new Uint32Array(g.buffer),I={i0:0,i1:g.length,bst:null,est:null,tdst:0,left:null,right:null};I.bst=P(g,I.i0,I.i1),I.est=R(I.bst);const S=[I];for(;S.length<y;){let z=0,k=0;for(var U=0;U<S.length;U++)S[U].est.L>z&&(z=S[U].est.L,k=U);if(z<x)break;const M=S[k],q=N(g,C,M.i0,M.i1,M.est.e,M.est.eMq255);if(M.i0>=q||M.i1<=q){M.est.L=0;continue}const B={i0:M.i0,i1:q,bst:null,est:null,tdst:0,left:null,right:null};B.bst=P(g,B.i0,B.i1),B.est=R(B.bst);const X={i0:q,i1:M.i1,bst:null,est:null,tdst:0,left:null,right:null};for(X.bst={R:[],m:[],N:M.bst.N-B.bst.N},U=0;U<16;U++)X.bst.R[U]=M.bst.R[U]-B.bst.R[U];for(U=0;U<4;U++)X.bst.m[U]=M.bst.m[U]-B.bst.m[U];X.est=R(X.bst),M.left=B,M.right=X,S[k]=B,S.push(X)}for(S.sort((z,k)=>k.bst.N-z.bst.N),U=0;U<S.length;U++)S[U].ind=U;return[I,S]}function w(g,y,x,C,I){if(g.left==null)return g.tdst=function(B,X,re,V,K){const $=X-B[0],Y=re-B[1],le=V-B[2],xe=K-B[3];return $*$+Y*Y+le*le+xe*xe}(g.est.q,y,x,C,I),g;const S=T(g.est,y,x,C,I);let U=g.left,z=g.right;S>0&&(U=g.right,z=g.left);const k=w(U,y,x,C,I);if(k.tdst<=S*S)return k;const M=w(z,y,x,C,I);return M.tdst<k.tdst?M:k}function T(g,y,x,C,I){const{e:S}=g;return S[0]*y+S[1]*x+S[2]*C+S[3]*I-g.eMq}function N(g,y,x,C,I,S){for(C-=4;x<C;){for(;O(g,x,I)<=S;)x+=4;for(;O(g,C,I)>S;)C-=4;if(x>=C)break;const U=y[x>>2];y[x>>2]=y[C>>2],y[C>>2]=U,x+=4,C-=4}for(;O(g,x,I)>S;)x-=4;return x+4}function O(g,y,x){return g[y]*x[0]+g[y+1]*x[1]+g[y+2]*x[2]+g[y+3]*x[3]}function P(g,y,x){const C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=[0,0,0,0],S=x-y>>2;for(let U=y;U<x;U+=4){const z=g[U]*.00392156862745098,k=g[U+1]*(1/255),M=g[U+2]*(1/255),q=g[U+3]*(1/255);I[0]+=z,I[1]+=k,I[2]+=M,I[3]+=q,C[0]+=z*z,C[1]+=z*k,C[2]+=z*M,C[3]+=z*q,C[5]+=k*k,C[6]+=k*M,C[7]+=k*q,C[10]+=M*M,C[11]+=M*q,C[15]+=q*q}return C[4]=C[1],C[8]=C[2],C[9]=C[6],C[12]=C[3],C[13]=C[7],C[14]=C[11],{R:C,m:I,N:S}}function R(g){const{R:y}=g,{m:x}=g,{N:C}=g,I=x[0],S=x[1],U=x[2],z=x[3],k=C==0?0:1/C,M=[y[0]-I*I*k,y[1]-I*S*k,y[2]-I*U*k,y[3]-I*z*k,y[4]-S*I*k,y[5]-S*S*k,y[6]-S*U*k,y[7]-S*z*k,y[8]-U*I*k,y[9]-U*S*k,y[10]-U*U*k,y[11]-U*z*k,y[12]-z*I*k,y[13]-z*S*k,y[14]-z*U*k,y[15]-z*z*k],q=M,B=_;let X=[Math.random(),Math.random(),Math.random(),Math.random()],re=0,V=0;if(C!=0)for(let $=0;$<16&&(X=B.multVec(q,X),V=Math.sqrt(B.dot(X,X)),X=B.sml(1/V,X),!($!=0&&Math.abs(V-re)<1e-9));$++)re=V;const K=[I*k,S*k,U*k,z*k];return{Cov:M,q:K,e:X,L:re,eMq255:B.dot(B.sml(255,K),X),eMq:B.dot(X,K),rgba:(Math.round(255*K[3])<<24|Math.round(255*K[2])<<16|Math.round(255*K[1])<<8|Math.round(255*K[0])<<0)>>>0}}var _={multVec:(g,y)=>[g[0]*y[0]+g[1]*y[1]+g[2]*y[2]+g[3]*y[3],g[4]*y[0]+g[5]*y[1]+g[6]*y[2]+g[7]*y[3],g[8]*y[0]+g[9]*y[1]+g[10]*y[2]+g[11]*y[3],g[12]*y[0]+g[13]*y[1]+g[14]*y[2]+g[15]*y[3]],dot:(g,y)=>g[0]*y[0]+g[1]*y[1]+g[2]*y[2]+g[3]*y[3],sml:(g,y)=>[g*y[0],g*y[1],g*y[2],g*y[3]]};jr.encode=function(y,x,C,I,S,U,z){I==null&&(I=0),z==null&&(z=!1);const k=u(y,x,C,I,[!1,!1,!1,0,z,!1]);return h(k,-1),l(k,x,C,S,U)},jr.encodeLL=function(y,x,C,I,S,U,z,k){const M={ctype:0+(I==1?0:2)+(S==0?0:4),depth:U,frames:[]},q=(I+S)*U,B=q*x;for(let X=0;X<y.length;X++)M.frames.push({rect:{x:0,y:0,width:x,height:C},img:new Uint8Array(y[X]),blend:0,dispose:1,bpp:Math.ceil(q/8),bpl:Math.ceil(B/8)});return h(M,0,!0),l(M,x,C,z,k)},jr.encode.compress=u,jr.encode.dither=o,jr.quantize=A,jr.quantize.getKDtree=D,jr.quantize.getNearest=w})();const HS={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,a=t.getContext("2d").getImageData(0,0,n,r),s=new Uint32Array(a.data.buffer),o=(32*n+31)/32<<2,l=o*r,h=122+l,u=new ArrayBuffer(h),d=new DataView(u),f=1<<20;let p,b,A,D,w=f,T=0,N=0,O=0;function P(g){d.setUint16(N,g,!0),N+=2}function R(g){d.setUint32(N,g,!0),N+=4}function _(g){N+=g}P(19778),R(h),_(4),R(122),R(108),R(n),R(-r>>>0),P(1),P(32),R(3),R(l),R(2835),R(2835),_(8),R(16711680),R(65280),R(255),R(4278190080),R(1466527264),function g(){for(;T<r&&w>0;){for(D=122+T*o,p=0;p<i;)w--,b=s[O++],A=b>>>24,d.setUint32(D+p,b<<8|A),p+=4;T++}O<s.length?(w=f,setTimeout(g,HS._dly)):e(u)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var Xn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},PP={[Xn.CHROME]:16384,[Xn.FIREFOX]:11180,[Xn.DESKTOP_SAFARI]:16384,[Xn.IE]:8192,[Xn.IOS]:4096,[Xn.ETC]:8192};const n0=typeof window<"u",qS=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Yd=n0&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),UP=(n0||qS)&&(Yd&&Yd.getOriginalSymbol(window,"File")||typeof File<"u"&&File),GS=(n0||qS)&&(Yd&&Yd.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function r0(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),a=i[0].match(/:(.*?);/)[1],s=globalThis.atob(i[1]);let o=s.length;const l=new Uint8Array(o);for(;o--;)l[o]=s.charCodeAt(o);const h=new Blob([l],{type:a});h.name=e,h.lastModified=n,r(h)})}function $S(t){return new Promise((e,n)=>{const r=new GS;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function YS(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function vs(){if(vs.cachedResult!==void 0)return vs.cachedResult;let t=Xn.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=Xn.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=Xn.IOS:/Safari/i.test(e)?t=Xn.DESKTOP_SAFARI:/Firefox/i.test(e)?t=Xn.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=Xn.IE),vs.cachedResult=t,vs.cachedResult}function XS(t,e){const n=vs(),r=PP[n];let i=t,a=e,s=i*a;const o=i>a?a/i:i/a;for(;s>r*r;){const l=(r+i)/2,h=(r+a)/2;l<h?(a=h,i=h*o):(a=l*o,i=l),s=i*a}return{width:i,height:a}}function $f(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function QS(t,e){const{width:n,height:r}=XS(t.width,t.height),[i,a]=$f(n,r);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,i.width,i.height)),a.drawImage(t,0,0,i.width,i.height),i}function Gh(){return Gh.cachedResult!==void 0||(Gh.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Gh.cachedResult}function Xd(t,e={}){return new Promise(function(n,r){let i,a;var s=function(){try{return a=QS(i,e.fileType||t.type),n([i,a])}catch(l){return r(l)}},o=function(l){try{var h=function(u){try{throw u}catch(d){return r(d)}};try{let u;return $S(t).then(function(d){try{return u=d,YS(u).then(function(f){try{return i=f,function(){try{return s()}catch(p){return r(p)}}()}catch(p){return h(p)}},h)}catch(f){return h(f)}},h)}catch(u){h(u)}}catch(u){return r(u)}};try{if(Gh()||[Xn.DESKTOP_SAFARI,Xn.MOBILE_SAFARI].includes(vs()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return i=l,s()}catch{return o()}},o)}catch{o()}})}function Qd(t,e,n,r,i=1){return new Promise(function(a,s){let o;if(e==="image/png"){let d,f,p;return d=t.getContext("2d"),{data:f}=d.getImageData(0,0,t.width,t.height),p=jr.encode([f.buffer],t.width,t.height,4096*i),o=new Blob([p],{type:e}),o.name=n,o.lastModified=r,l.call(this)}{let d=function(){return l.call(this)};var h=d;if(e==="image/bmp")return new Promise(f=>HS.toBlob(t,f)).then((function(f){try{return o=f,o.name=n,o.lastModified=r,d.call(this)}catch(p){return s(p)}}).bind(this),s);{let f=function(){return d.call(this)};var u=f;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(p){try{return o=p,o.name=n,o.lastModified=r,f.call(this)}catch(b){return s(b)}}).bind(this),s);{let p;return p=t.toDataURL(e,i),r0(p,n,r).then((function(b){try{return o=b,f.call(this)}catch(A){return s(A)}}).bind(this),s)}}}function l(){return a(o)}})}function Jr(t){t.width=0,t.height=0}function No(){return new Promise(function(t,e){let n,r,i,a;return No.cachedResult!==void 0?t(No.cachedResult):r0("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return n=s,Xd(n).then(function(o){try{return r=o[1],Qd(r,n.type,n.name,n.lastModified).then(function(l){try{return i=l,Jr(r),Xd(i).then(function(h){try{return a=h[0],No.cachedResult=a.width===1&&a.height===2,t(No.cachedResult)}catch(u){return e(u)}},e)}catch(h){return e(h)}},e)}catch(l){return e(l)}},e)}catch(o){return e(o)}},e)})}function KS(t){return new Promise((e,n)=>{const r=new GS;r.onload=i=>{const a=new DataView(i.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const s=a.byteLength;let o=2;for(;o<s;){if(a.getUint16(o+2,!1)<=8)return e(-1);const l=a.getUint16(o,!1);if(o+=2,l==65505){if(a.getUint32(o+=2,!1)!=1165519206)return e(-1);const h=a.getUint16(o+=6,!1)==18761;o+=a.getUint32(o+4,h);const u=a.getUint16(o,h);o+=2;for(let d=0;d<u;d++)if(a.getUint16(o+12*d,h)==274)return e(a.getUint16(o+12*d+8,h))}else{if((65280&l)!=65280)break;o+=a.getUint16(o,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function WS(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let a,s=t;return isFinite(i)&&(n>i||r>i)&&([s,a]=$f(n,r),n>r?(s.width=i,s.height=r/n*i):(s.width=n/r*i,s.height=i),a.drawImage(t,0,0,s.width,s.height),Jr(t)),s}function ZS(t,e){const{width:n}=t,{height:r}=t,[i,a]=$f(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:a.transform(-1,0,0,1,n,0);break;case 3:a.transform(-1,0,0,-1,n,r);break;case 4:a.transform(1,0,0,-1,0,r);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,r,0);break;case 7:a.transform(0,-1,-1,0,r,n);break;case 8:a.transform(0,-1,1,0,0,n)}return a.drawImage(t,0,0,n,r),Jr(t),i}function fw(t,e,n=0){return new Promise(function(r,i){let a,s,o,l,h,u,d,f,p,b,A,D,w,T,N,O,P,R,_,g;function y(C=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=C,e.onProgress(Math.min(a,100))}function x(C){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(C,a),100),e.onProgress(a)}return a=n,s=e.maxIteration||10,o=1024*e.maxSizeMB*1024,y(),Xd(t,e).then((function(C){try{return[,l]=C,y(),h=WS(l,e),y(),new Promise(function(I,S){var U;if(!(U=e.exifOrientation))return KS(t).then((function(k){try{return U=k,z.call(this)}catch(M){return S(M)}}).bind(this),S);function z(){return I(U)}return z.call(this)}).then((function(I){try{return u=I,y(),No().then((function(S){try{return d=S?h:ZS(h,u),y(),f=e.initialQuality||1,p=e.fileType||t.type,Qd(d,p,t.name,t.lastModified,f).then((function(U){try{{let q=function(){if(s--&&(N>o||N>w)){let X,re;return X=g?.95*_.width:_.width,re=g?.95*_.height:_.height,[P,R]=$f(X,re),R.drawImage(_,0,0,X,re),f*=p==="image/png"?.85:.95,Qd(P,p,t.name,t.lastModified,f).then(function(V){try{return O=V,Jr(_),_=P,N=O.size,x(Math.min(99,Math.floor((T-N)/(T-o)*100))),q}catch(K){return i(K)}},i)}return[1]},B=function(){return Jr(_),Jr(P),Jr(h),Jr(d),Jr(l),x(100),r(O)};var k=q,M=B;if(b=U,y(),A=b.size>o,D=b.size>t.size,!A&&!D)return x(100),r(b);var z;return w=t.size,T=b.size,N=T,_=d,g=!e.alwaysKeepResolution&&A,(z=(function(X){for(;X;){if(X.then)return void X.then(z,i);try{if(X.pop){if(X.length)return X.pop()?B.call(this):X;X=q}else X=X.call(this)}catch(re){return i(re)}}}).bind(this))(q)}}catch(q){return i(q)}}).bind(this),i)}catch(U){return i(U)}}).bind(this),i)}catch(S){return i(S)}}).bind(this),i)}catch(I){return i(I)}}).bind(this),i)})}const LP=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Zm;function VP(t,e){return new Promise((n,r)=>{Zm||(Zm=function(s){const o=[];return o.push(s),URL.createObjectURL(new Blob(o))}(LP));const i=new Worker(Zm);i.addEventListener("message",function(s){if(e.signal&&e.signal.aborted)i.terminate();else if(s.data.progress===void 0){if(s.data.error)return r(new Error(s.data.error)),void i.terminate();n(s.data.file),i.terminate()}else e.onProgress(s.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function pn(t,e){return new Promise(function(n,r){let i,a,s,o,l,h;if(i={...e},s=0,{onProgress:o}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=p=>{s=p,typeof o=="function"&&o(s)},!(t instanceof Blob||t instanceof UP))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(h=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||h)return fw(t,i).then((function(p){try{return a=p,f.call(this)}catch(b){return r(b)}}).bind(this),r);var u=(function(){try{return f.call(this)}catch(p){return r(p)}}).bind(this),d=function(p){try{return fw(t,i).then(function(b){try{return a=b,u()}catch(A){return r(A)}},r)}catch(b){return r(b)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",VP(t,i).then(function(p){try{return a=p,u()}catch{return d()}},d)}catch{d()}function f(){try{a.name=t.name,a.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(a=FS(t,a))}catch{}return n(a)}})}pn.getDataUrlFromFile=$S,pn.getFilefromDataUrl=r0,pn.loadImage=YS,pn.drawImageInCanvas=QS,pn.drawFileInCanvas=Xd,pn.canvasToFile=Qd,pn.getExifOrientation=KS,pn.handleMaxWidthOrHeight=WS,pn.followExifOrientation=ZS,pn.cleanupCanvasMemory=Jr,pn.isAutoOrientationInBrowser=No,pn.approximateBelowMaximumCanvasSizeOfBrowser=XS,pn.copyExifWithoutOrientation=FS,pn.getBrowserName=vs,pn.version="2.0.2";async function zP(t,e){try{return await pn(t,e)}catch(n){return console.error("Image compression failed:",n),t}}const mw=async(t,e,n)=>{const{storage:r}=Xi(),i=zS(r,`users/${e}/character-portraits/${n}`);return await TP(i,t,Ar.DATA_URL),VS(i)},BP=t=>Math.ceil(t/4)+1,kg=t=>Math.floor((t-10)/2),FP=t=>[{name:"Acrobatics",ability:"dexterity",proficient:!1,expertise:!1},{name:"Animal Handling",ability:"wisdom",proficient:!1,expertise:!1},{name:"Arcana",ability:"intelligence",proficient:!1,expertise:!1},{name:"Athletics",ability:"strength",proficient:!1,expertise:!1},{name:"Deception",ability:"charisma",proficient:!1,expertise:!1},{name:"History",ability:"intelligence",proficient:!1,expertise:!1},{name:"Insight",ability:"wisdom",proficient:!1,expertise:!1},{name:"Intimidation",ability:"charisma",proficient:!1,expertise:!1},{name:"Investigation",ability:"intelligence",proficient:!1,expertise:!1},{name:"Medicine",ability:"wisdom",proficient:!1,expertise:!1},{name:"Nature",ability:"intelligence",proficient:!1,expertise:!1},{name:"Perception",ability:"wisdom",proficient:!1,expertise:!1},{name:"Performance",ability:"charisma",proficient:!1,expertise:!1},{name:"Persuasion",ability:"charisma",proficient:!1,expertise:!1},{name:"Religion",ability:"intelligence",proficient:!1,expertise:!1},{name:"Sleight of Hand",ability:"dexterity",proficient:!1,expertise:!1},{name:"Stealth",ability:"dexterity",proficient:!1,expertise:!1},{name:"Survival",ability:"wisdom",proficient:!1,expertise:!1}],Ls=()=>{const t={strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10};return{id:`new_${Date.now()}`,lastUpdated:Date.now(),name:"",class:"",subclass:"",level:1,race:"",alignment:"",background:"",playerName:"",experiencePoints:0,abilityScores:t,inspiration:0,proficiencyBonus:BP(1),savingThrows:{strength:{proficient:!1},dexterity:{proficient:!1},constitution:{proficient:!1},intelligence:{proficient:!1},wisdom:{proficient:!1},charisma:{proficient:!1}},skills:FP(),unarmoredDefense:{base:10,abilities:["dexterity"]},initiative:kg(t.dexterity),speed:30,hp:{max:10,current:10,temporary:0},hitDice:{total:"1d8",used:0},deathSaves:{successes:0,failures:0},personalityTraits:"",ideals:"",bonds:"",flaws:"",languages:"Common",attacks:[],currency:{cp:0,sp:0,ep:0,gp:0,pp:0},equipment:[],featuresAndTraits:[],notes:"",dmNotes:"",spellcastingAbility:"",spells:[],spellSlots:{1:{max:0,used:0},2:{max:0,used:0},3:{max:0,used:0},4:{max:0,used:0},5:{max:0,used:0},6:{max:0,used:0},7:{max:0,used:0},8:{max:0,used:0},9:{max:0,used:0}},customResources:[],imageUrl:""}},JS=t=>{var a,s;if(!t)return 10;const e=kg(t.abilityScores.dexterity);let n=0;const r=(a=t.equipment)==null?void 0:a.find(o=>o.equipped&&["light","medium","heavy"].includes(o.armorType||"")),i=(s=t.equipment)==null?void 0:s.find(o=>o.equipped&&o.armorType==="shield");if(r){const o=r.armorClass||0;switch(r.armorType){case"light":n=o+e;break;case"medium":n=o+Math.min(2,e);break;case"heavy":n=o;break}}else{const o=t.unarmoredDefense||{base:10,abilities:[]};let l=o.base;o.abilities.forEach(h=>{l+=kg(t.abilityScores[h])}),n=l}return i&&(n+=i.armorClass||2),n},eR="runica-characters",Rl=()=>{try{const t=localStorage.getItem(eR);return t?JSON.parse(t).map(e=>({...Ls(),...e})):[]}catch(t){return console.error("Error reading from local storage",t),[]}},fl=t=>{try{localStorage.setItem(eR,JSON.stringify(t))}catch(e){console.error("Error saving to local storage",e)}},Cl=()=>{try{const{db:t,auth:e}=Xi();return e.currentUser?Wk(t,"users",e.currentUser.uid,"characters"):null}catch{return null}},i0=t=>{const e=Cl();return e?Vy(e,t):null},HP=t=>{const e=Cl();return e?pj(cj(e),n=>{const r=n.docs.map(i=>i.data());t(r)}):(t(Rl()),()=>{})},tR=async t=>{if(t==="new")return Ls();const e=i0(t);if(e){const n=await dj(e);return n.exists()?n.data():null}else return Rl().find(n=>n.id===t)||null},nR=async t=>{const e={...t,lastUpdated:Date.now()},n=i0(e.id);if(n)await fj(n,e);else{const r=Rl(),i=r.findIndex(a=>a.id===e.id);i>-1?r[i]=e:r.push(e),fl(r)}return e},qP=async t=>{const e=i0(t);if(e)await mj(e);else{const n=Rl();fl(n.filter(r=>r.id!==t))}},GP=async()=>{let t,e;try{({db:t,auth:e}=Xi())}catch{return}if(!e.currentUser||!mw)return;const n=Rl();if(n.length===0||!window.confirm("You have local characters saved on this device. Do you want to move them to your account? This will merge them with any existing characters on your account."))return;const r=Cl();if(!r)return;const i=Ky(t),s=(await Gf(r)).docs.map(l=>l.data());let o=0;for(const l of n){const h=s.find(u=>u.id===l.id);if(!h||l.lastUpdated>(h.lastUpdated||0)){const u={...l};if(u.imageUrl&&u.imageUrl.startsWith("data:image"))try{const f=e.currentUser.uid;u.imageUrl=await mw(u.imageUrl,f,u.id)}catch(f){console.error(`Failed to upload image for character ${u.name}. It will be saved with the local data URL.`,f),u.imageUrl=""}const d=Vy(r,l.id);i.set(d,u),o++}}if(o>0)try{await i.commit(),alert(`${o} character(s) migrated to your account.`),fl([])}catch(l){console.error("Failed to migrate characters:",l),alert("There was an error migrating your characters. They remain on this device for now.")}else alert("No characters needed to be migrated. Your cloud data is up to date."),fl([])},$P=async()=>{const t=Cl();return t?(await Gf(t)).docs.map(n=>n.data()):Rl()},YP=async t=>{const e=Cl();if(e){const{db:n}=Xi(),r=Ky(n);(await Gf(e)).forEach(s=>r.delete(s.ref)),t.map(s=>({...Ls(),...s})).forEach(s=>{const o=Vy(e,s.id);r.set(o,s)}),await r.commit()}else fl(t.map(n=>({...Ls(),...n})))},XP=async()=>{const t=Cl();if(t){const{db:e}=Xi(),n=Ky(e);(await Gf(t)).forEach(i=>n.delete(i.ref)),await n.commit()}else fl([])},rR=H.createContext({currentUser:null,loading:!0,signInWithGoogle:()=>Promise.reject("Auth provider not initialized"),logout:()=>Promise.reject("Auth provider not initialized")}),ku=()=>H.useContext(rR),QP=({children:t})=>{const[e,n]=H.useState(null),[r,i]=H.useState(!0);H.useEffect(()=>DP(async l=>{n(l),l&&(await l.getIdToken(),await GP()),i(!1)}),[]);const a={currentUser:e,loading:r,signInWithGoogle:NP,logout:IP};return r?m.jsx("div",{className:"flex justify-center items-center h-screen w-screen bg-background",children:m.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-accent"})}):m.jsx(rR.Provider,{value:a,children:t})},KP=["theme-amber","theme-sapphire","theme-twilight","theme-evergreen","theme-crimson","theme-rose","theme-veridian","theme-obsidian","theme-solaris","theme-aether","theme-grove","theme-celestial","theme-nocturne"],iR=H.createContext(void 0),WP=({children:t})=>{const[e,n]=H.useState(()=>localStorage.getItem("app-theme")||"theme-amber");H.useEffect(()=>{const i=window.document.documentElement;i.classList.remove(...KP),i.classList.add(e),localStorage.setItem("app-theme",e)},[e]);const r=H.useMemo(()=>({theme:e,setTheme:n}),[e]);return m.jsx(iR.Provider,{value:r,children:t})},ZP=()=>{const t=H.useContext(iR);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},aR=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),a0=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),JP=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),eU=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.5 21.75l-.398-1.188a3.375 3.375 0 00-2.924-2.924l-1.188-.398 1.188-.398a3.375 3.375 0 002.924-2.924l.398-1.188.398 1.188a3.375 3.375 0 002.924 2.924l1.188.398-1.188.398a3.375 3.375 0 00-2.924 2.924z"})}),sR=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})}),tU=t=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",...t,children:[m.jsx("path",{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V7l-4-4z"}),m.jsx("path",{d:"M17 3v5H7V3"}),m.jsx("rect",{x:"9",y:"13",width:"6",height:"5",rx:"1"})]}),Qs=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.134H8.09a2.09 2.09 0 00-2.09 2.134v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),Ks=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),oR=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),nU=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),rU=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 100-2.186m0 2.186c-.18.324-.283.696-.283 1.093s.103.77.283 1.093m-7.5-12.28a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093"})}),iU=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),ju=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),aU=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 12l4.5 4.5L18.75 9"})}),sU=t=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.242 1.417l-1.07 1.07c-.127.127-.213.289-.27.461a4.5 4.5 0 010 .752c.057.172.143.334.27.461l1.07 1.07c.48.48.577 1.232.242 1.417l-1.296 2.247a1.125 1.125 0 01-1.37.49l-1.217-.456a4.5 4.5 0 01-1.075-.124.938.938 0 01-.22.127c-.332.183-.582.495-.645.87l-.213 1.281c-.09.543-.56.94-1.11.94h-2.593c-.55 0-1.02-.398-1.11-.94l-.213-1.281a4.5 4.5 0 01-.645-.87.938.938 0 01-.22-.127 4.5 4.5 0 01-1.075-.124l-1.217.456a1.125 1.125 0 01-1.37-.49l-1.296-2.247a1.125 1.125 0 01.242-1.417l1.07-1.07c.127-.127.213-.289.27-.461a4.5 4.5 0 010-.752 4.49 4.49 0 01-.27-.461l-1.07-1.07a1.125 1.125 0 01-.242-1.417l1.296-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.075-.124.073-.044.146-.087.22-.127.332-.183-.582-.495-.645-.87l.213-1.281z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),oU=t=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"48px",height:"48px",...t,children:[m.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),m.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),m.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),m.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.574l6.19,5.238C39.99,36.62,44,30.638,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),lU=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),cU=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),uU=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),hU=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),dU=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),fU=()=>{const[t,e]=H.useState(null),[n,r]=H.useState(!1),[i,a]=H.useState(!1);return H.useEffect(()=>{const o=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;r(o);const l=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;a(l);const h=u=>{u.preventDefault(),o||e(u)};return window.addEventListener("beforeinstallprompt",h),()=>window.removeEventListener("beforeinstallprompt",h)},[n]),{canInstall:!!t&&!n,isIos:i,isStandalone:n,promptInstall:async()=>{if(!t)return;await t.prompt(),e(null)}}},mU=({onSettingsClick:t})=>{const{currentUser:e,logout:n}=ku(),r=El(),{canInstall:i,isIos:a,isStandalone:s,promptInstall:o}=fU(),[l,h]=H.useState(!1),u=H.useRef(null);H.useEffect(()=>{const p=b=>{u.current&&!u.current.contains(b.target)&&h(!1)};return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[]);const d=async()=>{h(!1),await n(),r("/")},f=()=>{h(!1),r("/account")};return m.jsxs("header",{className:"sticky top-0 z-50 flex justify-between items-center h-20 px-6 bg-background/80 backdrop-blur-lg border-b border-white/10 [box-shadow:0_1px_10px_rgb(var(--color-accent)/0.3)] transition-all duration-300",children:[m.jsxs("h1",{onClick:()=>r("/"),className:"font-norse font-bold text-accent cursor-pointer flex items-baseline transition-all duration-300 hover:opacity-80",style:{textShadow:"0 0 8px rgb(var(--color-accent) / 0.7)"},children:[m.jsx("span",{className:"text-6xl",children:"R"}),m.jsx("span",{className:"text-4xl",children:"unica"})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[i&&m.jsxs("button",{onClick:o,className:"px-3 py-2 flex items-center gap-2 font-semibold text-accent bg-accent/10 rounded-lg border border-accent/30 hover:bg-accent/20 hover:border-accent/70 transition-all duration-300",title:"Installa Runica sul tuo dispositivo",children:[m.jsx(nU,{className:"w-5 h-5"}),m.jsx("span",{className:"hidden sm:inline",children:"Installa App"})]}),a&&!i&&!s&&m.jsxs("div",{className:"px-3 py-2 flex items-center gap-2 font-semibold text-accent bg-accent/10 rounded-lg border border-accent/30 cursor-help",title:"Per installare: tocca l'icona Condividi e poi 'Aggiungi a Home'",children:[m.jsx(rU,{className:"w-5 h-5"}),m.jsx("span",{className:"hidden sm:inline",children:"Installa App"})]}),e?m.jsxs("div",{className:"relative",ref:u,children:[m.jsx("img",{src:e.photoURL||`https://api.dicebear.com/8.x/lorelei/svg?seed=${e.uid}`,alt:e.displayName||"User Avatar",onClick:()=>h(p=>!p),className:"w-12 h-12 rounded-full cursor-pointer ring-2 ring-transparent hover:ring-accent transition-all duration-300 hover:scale-105",title:"Account"}),l&&m.jsx("div",{className:"absolute right-0 mt-2 w-56 origin-top-right rounded-md bg-zinc-800 shadow-lg ring-1 ring-white/10 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu-button",children:m.jsxs("div",{className:"py-1",role:"none",children:[m.jsxs("div",{className:"px-4 py-3 border-b border-zinc-700",children:[m.jsx("p",{className:"text-sm text-zinc-300",role:"none",children:"Signed in as"}),m.jsx("p",{className:"text-sm font-medium text-accent truncate",role:"none",children:e.displayName||e.email})]}),m.jsxs("button",{onClick:f,className:"w-full text-left flex items-center gap-3 px-4 py-3 text-sm text-zinc-200 hover:bg-zinc-700 transition-colors",role:"menuitem",children:[m.jsx(dU,{className:"w-5 h-5"}),"Account Settings"]}),m.jsxs("button",{onClick:d,className:"w-full text-left flex items-center gap-3 px-4 py-3 text-sm text-red-400 hover:bg-zinc-700 transition-colors",role:"menuitem",children:[m.jsx(hU,{className:"w-5 h-5"}),"Logout"]})]})})]}):m.jsx("button",{onClick:()=>r("/login"),className:"px-5 py-2 font-semibold text-accent bg-accent/10 rounded-lg border border-accent/30 hover:bg-accent/20 hover:border-accent/70 transition-all duration-300",children:"Login"}),m.jsx("button",{onClick:t,className:"w-12 h-12 flex items-center justify-center rounded-lg text-accent bg-accent/10 border border-accent/30 hover:bg-accent/20 hover:border-accent/70 transition-all duration-300","aria-label":"Open settings",children:m.jsx(sU,{className:"w-6 h-6"})})]})]})},Jm=({title:t,children:e})=>m.jsxs("div",{className:"border-t border-zinc-700 pt-4 mt-4 first:border-t-0 first:mt-0 first:pt-0",children:[m.jsx("h4",{className:"text-md font-semibold text-zinc-400 mb-3",children:t}),e]}),pU=[{id:"theme-amber",name:"Ambra",color:"bg-amber-400"},{id:"theme-sapphire",name:"Zaffiro",color:"bg-cyan-400"},{id:"theme-twilight",name:"Crepuscolo",color:"bg-violet-400"},{id:"theme-evergreen",name:"Foresta",color:"bg-emerald-400"},{id:"theme-crimson",name:"Cremisi",color:"bg-red-500"},{id:"theme-rose",name:"Rosato",color:"bg-rose-500"},{id:"theme-veridian",name:"Veridiano",color:"bg-green-400"},{id:"theme-obsidian",name:"Ossidiana",color:"bg-gray-300"},{id:"theme-solaris",name:"Solaris",color:"bg-orange-500"},{id:"theme-aether",name:"Etere",color:"bg-fuchsia-500"},{id:"theme-grove",name:"Bosco",color:"bg-lime-500"},{id:"theme-nocturne",name:"Notturno",color:"bg-violet-500"},{id:"theme-celestial",name:"Celeste",color:"bg-indigo-600"}],gU=({isOpen:t,onClose:e})=>{const{theme:n,setTheme:r}=ZP(),i=H.useRef(null),a=H.useRef(null);H.useEffect(()=>{const u=i.current;u&&(t?u.showModal():u.close())},[t]);const s=async()=>{try{const u=await $P(),d={version:1,exportedAt:new Date().toISOString(),characters:u,settings:{theme:n}},f=JSON.stringify(d,null,2),p=new Blob([f],{type:"application/json"}),b=URL.createObjectURL(p),A=document.createElement("a");A.href=b,A.download=`runica-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(b),alert("Data exported successfully!")}catch(u){console.error("Failed to export data:",u),alert("Error exporting data. Check the console for details.")}},o=()=>{var u;(u=a.current)==null||u.click()},l=async u=>{var p;const d=(p=u.target.files)==null?void 0:p[0];if(!d||!window.confirm("Are you sure you want to import data? This will overwrite all current characters."))return;const f=new FileReader;f.onload=async b=>{var A,D;try{const w=(A=b.target)==null?void 0:A.result;if(typeof w!="string")throw new Error("Invalid file content");const T=JSON.parse(w);if(!T.characters||!Array.isArray(T.characters))throw new Error("Invalid backup file format.");await YP(T.characters),(D=T.settings)!=null&&D.theme&&r(T.settings.theme),alert("Data imported successfully! The page will now reload."),window.location.reload()}catch(w){console.error("Failed to import data:",w),alert("Error importing data. Make sure it is a valid backup file.")}},f.readAsText(d)},h=async()=>{if(window.confirm("DANGER! This will permanently delete ALL your characters. This action cannot be undone. Are you absolutely sure?"))try{await XP(),alert("All data has been cleared. The app will now reload."),window.location.reload()}catch(u){console.error("Failed to clear data:",u),alert("An error occurred while clearing data.")}};return m.jsxs("dialog",{ref:i,onClose:e,className:"bg-zinc-800 text-zinc-200 p-0 rounded-lg shadow-2xl w-full max-w-sm border border-zinc-700 backdrop:bg-black/50",children:[m.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-zinc-700",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Settings"}),m.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-zinc-700 transition-colors",children:m.jsx(aR,{className:"w-5 h-5"})})]}),m.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:[m.jsx(Jm,{title:"Appearance",children:m.jsx("div",{className:"grid grid-cols-2 gap-3",children:pU.map(u=>m.jsxs("button",{onClick:()=>r(u.id),className:`flex items-center justify-between p-3 rounded-md border-2 transition-colors ${n===u.id?"border-accent":"border-zinc-600 hover:border-zinc-500"}`,children:[m.jsxs("span",{className:"flex items-center gap-2",children:[m.jsx("span",{className:`w-5 h-5 rounded-full ${u.color}`})," ",u.name]}),n===u.id&&m.jsx(aU,{className:"w-5 h-5 text-accent"})]},u.id))})}),m.jsx(Jm,{title:"Data Management",children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center gap-2 bg-zinc-700 hover:bg-zinc-600 text-zinc-200 font-semibold py-2 px-4 rounded-md transition-colors",children:[m.jsx(lU,{className:"w-5 h-5"}),"Export All Data"]}),m.jsxs("button",{onClick:o,className:"w-full flex items-center justify-center gap-2 bg-zinc-700 hover:bg-zinc-600 text-zinc-200 font-semibold py-2 px-4 rounded-md transition-colors",children:[m.jsx(cU,{className:"w-5 h-5"}),"Import from Backup"]}),m.jsx("input",{type:"file",ref:a,onChange:l,accept:".json",className:"hidden"})]})}),m.jsx(Jm,{title:"Danger Zone",children:m.jsxs("button",{onClick:h,className:"w-full flex items-center justify-center gap-2 bg-destructive/20 hover:bg-destructive/40 text-destructive font-semibold py-2 px-4 rounded-md transition-colors border border-destructive/50",children:[m.jsx(uU,{className:"w-5 h-5"}),"Clear All Data"]})})]})]})};function vU(){const[t,e]=H.useState(!1);return m.jsxs("div",{className:"bg-background min-h-screen text-text-main",children:[m.jsx(mU,{onSettingsClick:()=>e(!0)}),m.jsx("main",{children:m.jsx(e2,{})}),m.jsx(gU,{isOpen:t,onClose:()=>e(!1)})]})}const lR=H.createContext(void 0),On=()=>{const t=H.useContext(lR);if(!t)throw new Error("useCharacter must be used within a CharacterProvider");return t},yU=({children:t})=>{const[e,n]=H.useState(null),[r,i]=H.useState([]),[a,s]=H.useState(!0),{currentUser:o}=ku(),l=H.useCallback(f=>{n(p=>p?{...p,...f}:null)},[]);H.useEffect(()=>{s(!0);const f=HP(p=>{const b=p.map(A=>({...Ls(),...A}));i(b.sort((A,D)=>A.name.localeCompare(D.name))),s(!1)});return()=>f()},[o]);const h=H.useCallback(async f=>{await qP(f),i(p=>p.filter(b=>b.id!==f))},[]),u=H.useCallback(async f=>(i(p=>{const b=p.findIndex(A=>A.id===f.id);if(b>-1){const A=[...p];return A[b]=f,A.sort((D,w)=>D.name.localeCompare(w.name))}else return[...p,f].sort((A,D)=>A.name.localeCompare(D.name))}),await nR(f)),[]),d={character:e,setCharacter:n,updateCharacter:l,characters:r,loading:a,deleteCharacter:h,saveCharacter:u};return m.jsx(lR.Provider,{value:d,children:t})},_U=({character:t,onSelect:e,onDelete:n,onEdit:r})=>m.jsxs("div",{onClick:e,className:"bg-card rounded-lg shadow-lg overflow-hidden transition-all duration-300 md:hover:shadow-accent/20 group relative cursor-pointer",role:"button",tabIndex:0,children:[m.jsx("div",{className:"relative w-full max-h-32 md:group-hover:max-h-96 transition-all duration-500 ease-in-out overflow-hidden",children:t.imageUrl?m.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-auto"}):m.jsx("div",{className:"w-full h-32 flex items-center justify-center text-muted-foreground bg-muted/50",children:m.jsx(a0,{className:"w-16 h-16"})})}),m.jsxs("div",{className:"p-5",children:[m.jsx("h3",{className:"text-xl font-bold font-cinzel text-accent truncate",children:t.name||"Unnamed Adventurer"}),m.jsxs("p",{className:"text-muted-foreground capitalize text-sm",children:[t.race||"Race"," ",t.class||"Class","  Level ",t.level]}),m.jsxs("div",{className:"mt-4 flex items-center gap-4 text-sm text-foreground border-t border-border pt-4",children:[m.jsxs("div",{className:"flex items-center gap-1.5",title:"Hit Points",children:[m.jsx("span",{className:"font-bold text-destructive",children:"HP"}),m.jsxs("span",{children:[t.hp.current,"/",t.hp.max]})]}),m.jsxs("div",{className:"flex items-center gap-1.5",title:"Armor Class",children:[m.jsx("span",{className:"font-bold text-accent",children:"AC"}),m.jsx("span",{children:JS(t)})]})]})]}),m.jsxs("div",{className:"absolute top-3 right-3 flex items-center space-x-2 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity duration-300",children:[m.jsx("button",{onClick:r,className:"p-2 rounded-full bg-secondary hover:bg-accent text-secondary-foreground hover:text-accent-foreground transition-colors","aria-label":`Edit ${t.name}`,children:m.jsx(Ks,{className:"w-4 h-4"})}),m.jsx("button",{onClick:n,className:"p-2 rounded-full bg-secondary hover:bg-accent text-secondary-foreground hover:text-destructive-foreground transition-colors","aria-label":`Delete ${t.name}`,children:m.jsx(Qs,{className:"w-4 h-4"})})]})]}),bU=()=>{const{characters:t,loading:e,deleteCharacter:n}=On(),{currentUser:r}=ku(),i=El(),a=l=>{i(l==="new"?"/character/new":`/character/${l}`)},s=l=>{i(`/character/${l}/edit`)},o=async(l,h)=>{window.confirm(`Are you sure you want to delete ${h}? This cannot be undone.`)&&await n(l)};return e?m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-accent"})}):m.jsxs("div",{className:"p-4 sm:p-8 max-w-7xl mx-auto pt-12",children:[m.jsx("h2",{className:"text-3xl font-cinzel text-center text-foreground mb-8",children:"Your Characters"}),m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsxs("button",{onClick:()=>a("new"),className:"mb-10 flex items-center gap-2 px-6 py-3 bg-accent-dark text-white font-bold rounded-lg shadow-md hover:bg-accent transition-all duration-300 transform hover:scale-105",children:[m.jsx(iU,{className:"w-5 h-5"}),"Create New Character"]}),t.length>0?m.jsx("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(l=>m.jsx(_U,{character:l,onSelect:()=>a(l.id),onDelete:h=>{h.stopPropagation(),o(l.id,l.name)},onEdit:h=>{h.stopPropagation(),s(l.id)}},l.id))}):m.jsxs("div",{className:"text-center w-full max-w-2xl mt-8 py-16 px-6 bg-card/50 rounded-lg border border-border",children:[m.jsx("h2",{className:"text-2xl font-semibold text-foreground font-cinzel",children:"Your adventure awaits!"}),m.jsxs("p",{className:"text-text-muted mt-2",children:[r?"You have no characters synced to this account.":"You have no local characters.",m.jsx("br",{}),"Click the button above to forge your first hero."]})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU="type.googleapis.com/google.protobuf.Int64Value",EU="type.googleapis.com/google.protobuf.UInt64Value";function cR(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Kd(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Kd(e));if(typeof t=="function"||typeof t=="object")return cR(t,e=>Kd(e));throw new Error("Data cannot be encoded in JSON: "+t)}function ml(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case wU:case EU:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>ml(e)):typeof t=="function"||typeof t=="object"?cR(t,e=>ml(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Kn extends qr{constructor(e,n,r){super(`${s0}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Kn.prototype)}}function xU(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Wd(t,e){let n=xU(t),r=n,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!pw[s])return new Kn("internal","internal");n=pw[s],r=s}const o=a.message;typeof o=="string"&&(r=o),i=a.details,i!==void 0&&(i=ml(i))}}catch{}return n==="ok"?null:new Kn(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,sr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i==null||i.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="us-central1",AU=/^data: (.*?)(?:\n|$)/;function SU(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Kn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class RU{constructor(e,n,r,i,a=jg,s=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new TU(e,n,r,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=jg}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function CU(t,e,n){const r=Yi(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Ef(t.emulatorOrigin),xf("Functions",!0))}function NU(t,e,n){const r=i=>DU(t,e,i,{});return r.stream=(i,a)=>MU(t,e,i,a),r}async function IU(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let a=null;try{a=await i.json()}catch{}return{status:i.status,json:a}}async function uR(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function DU(t,e,n,r){const i=t._url(e);return OU(t,i,n,r)}async function OU(t,e,n,r){n=Kd(n);const i={data:n},a=await uR(t,r),s=r.timeout||7e4,o=SU(s),l=await Promise.race([IU(e,i,a,t.fetchImpl),o.promise,t.cancelAllRequests]);if(o.cancel(),!l)throw new Kn("cancelled","Firebase Functions instance was deleted.");const h=Wd(l.status,l.json);if(h)throw h;if(!l.json)throw new Kn("internal","Response is not valid JSON object.");let u=l.json.data;if(typeof u>"u"&&(u=l.json.result),typeof u>"u")throw new Kn("internal","Response is missing data field.");return{data:ml(u)}}function MU(t,e,n,r){const i=t._url(e);return kU(t,i,n,r||{})}async function kU(t,e,n,r){var i;n=Kd(n);const a={data:n},s=await uR(t,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:s,signal:r==null?void 0:r.signal})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const A=new Kn("cancelled","Request was cancelled.");return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}const b=Wd(0,null);return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}let l,h;const u=new Promise((p,b)=>{l=p,h=b});(i=r==null?void 0:r.signal)===null||i===void 0||i.addEventListener("abort",()=>{const p=new Kn("cancelled","Request was cancelled.");h(p)});const d=o.body.getReader(),f=jU(d,l,h,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const p=f.getReader();return{async next(){const{value:b,done:A}=await p.read();return{value:b,done:A}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:u}}function jU(t,e,n,r){const i=(s,o)=>{const l=s.match(AU);if(!l)return;const h=l[1];try{const u=JSON.parse(h);if("result"in u){e(ml(u.result));return}if("message"in u){o.enqueue(ml(u.message));return}if("error"in u){const d=Wd(0,u);o.error(d),n(d);return}}catch(u){if(u instanceof Kn){o.error(u),n(u);return}}},a=new TextDecoder;return new ReadableStream({start(s){let o="";return l();async function l(){if(r!=null&&r.aborted){const h=new Kn("cancelled","Request was cancelled");return s.error(h),n(h),Promise.resolve()}try{const{value:h,done:u}=await t.read();if(u){o.trim()&&i(o.trim(),s),s.close();return}if(r!=null&&r.aborted){const f=new Kn("cancelled","Request was cancelled");s.error(f),n(f),await t.cancel();return}o+=a.decode(h,{stream:!0});const d=o.split(`
`);o=d.pop()||"";for(const f of d)f.trim()&&i(f.trim(),s);return l()}catch(h){const u=h instanceof Kn?h:Wd(0,null);s.error(u),n(u)}}},cancel(){return t.cancel()}})}const gw="@firebase/functions",vw="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU="auth-internal",UU="app-check-internal",LU="messaging-internal";function VU(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(PU),s=n.getProvider(LU),o=n.getProvider(UU);return new RU(i,a,s,o,r)};Ba(new Bi(s0,e,"PUBLIC").setMultipleInstances(!0)),Sr(gw,vw,t),Sr(gw,vw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(t=Tf(),e=jg){const r=Eu(rt(t),s0).getImmediate({identifier:e}),i=Wv("functions");return i&&BU(r,...i),r}function BU(t,e,n){CU(rt(t),e,n)}function FU(t,e,n){return NU(rt(t),e)}VU();const HU={personalityTraits:"Generazione AI fallita. Impossibile contattare il servizio.",ideals:"Errore.",bonds:"Errore.",flaws:"Errore."},qU=()=>{const{app:t}=Xi(),e=zU(t,"europe-west1");return FU(e,"callGemini")},GU=async(t,e)=>{const{name:n,race:r,class:i,background:a,alignment:s}=t,o=`
     Generate personality aspects for a Dungeons & Dragons character.
     Based on the following details:
     - Name: ${n}
     - Race: ${r}
     - Class: ${i}
     - Background: ${a}
     - Alignment: ${s}
     ${e?`
- Additional Theme: "${e}"`:""}

     Return a JSON object with four keys: "personalityTraits", "ideals", "bonds", and "flaws".
     - "personalityTraits": A short paragraph describing the character's general demeanor.
     - "ideals": A sentence describing a core belief.
     - "bonds": A sentence about something or someone the character cares deeply about.
     - "flaws": A sentence describing a significant weakness or fear.
   `;try{console.log("Calling Cloud Function 'callGemini'...");const h=await qU()(o);if(!h.data.success||!h.data.response)throw new Error("La Cloud Function ha riportato un errore: "+h.data.response);const u=h.data.response.trim(),d=JSON.parse(u);return{personalityTraits:d.personalityTraits||"",ideals:d.ideals||"",bonds:d.bonds||"",flaws:d.flaws||""}}catch(l){return console.error("Errore durante la chiamata alla Cloud Function 'callGemini':",l),HU}};/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function yw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yw(Object(n),!0).forEach(function(r){QU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yw(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $U(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function dR(t){var e=$U(t,"string");return typeof e=="symbol"?e:e+""}function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function YU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dR(r.key),r)}}function XU(t,e,n){return e&&_w(t.prototype,e),n&&_w(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function QU(t,e,n){return e=dR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fR(t){return KU(t)||WU(t)||ZU(t)||JU()}function KU(t){if(Array.isArray(t))return Ug(t)}function WU(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZU(t,e){if(t){if(typeof t=="string")return Ug(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ug(t,e)}}function Ug(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function JU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Yf=typeof window<"u"&&typeof window.document<"u",fi=Yf?window:{},o0=Yf&&fi.document.documentElement?"ontouchstart"in fi.document.documentElement:!1,l0=Yf?"PointerEvent"in fi:!1,_t="cropper",c0="all",mR="crop",pR="move",gR="zoom",as="e",ss="w",io="s",ia="n",Kl="ne",Wl="nw",Zl="se",Jl="sw",Lg="".concat(_t,"-crop"),bw="".concat(_t,"-disabled"),Yn="".concat(_t,"-hidden"),ww="".concat(_t,"-hide"),eL="".concat(_t,"-invisible"),Zd="".concat(_t,"-modal"),Vg="".concat(_t,"-move"),eu="".concat(_t,"Action"),_h="".concat(_t,"Preview"),u0="crop",vR="move",yR="none",zg="crop",Bg="cropend",Fg="cropmove",Hg="cropstart",Ew="dblclick",tL=o0?"touchstart":"mousedown",nL=o0?"touchmove":"mousemove",rL=o0?"touchend touchcancel":"mouseup",xw=l0?"pointerdown":tL,Tw=l0?"pointermove":nL,Aw=l0?"pointerup pointercancel":rL,Sw="ready",Rw="resize",Cw="wheel",qg="zoom",Nw="image/jpeg",iL=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,aL=/^data:/,sL=/^data:image\/jpeg;base64,/,oL=/^img|canvas$/i,_R=200,bR=100,Iw={viewMode:0,dragMode:u0,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:_R,minContainerHeight:bR,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},lL='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',cL=Number.isNaN||fi.isNaN;function Oe(t){return typeof t=="number"&&!cL(t)}var Dw=function(e){return e>0&&e<1/0};function ep(t){return typeof t>"u"}function Vs(t){return Pg(t)==="object"&&t!==null}var uL=Object.prototype.hasOwnProperty;function Io(t){if(!Vs(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&uL.call(n,"isPrototypeOf")}catch{return!1}}function qn(t){return typeof t=="function"}var hL=Array.prototype.slice;function wR(t){return Array.from?Array.from(t):hL.call(t)}function Yt(t,e){return t&&qn(e)&&(Array.isArray(t)||Oe(t.length)?wR(t).forEach(function(n,r){e.call(t,n,r,t)}):Vs(t)&&Object.keys(t).forEach(function(n){e.call(t,t[n],n,t)})),t}var wt=Object.assign||function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Vs(e)&&r.length>0&&r.forEach(function(a){Vs(a)&&Object.keys(a).forEach(function(s){e[s]=a[s]})}),e},dL=/\.\d*(?:0|9){12}\d*$/;function qo(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return dL.test(t)?Math.round(t*e)/e:t}var fL=/^width|height|left|top|marginLeft|marginTop$/;function xa(t,e){var n=t.style;Yt(e,function(r,i){fL.test(i)&&Oe(r)&&(r="".concat(r,"px")),n[i]=r})}function mL(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function rn(t,e){if(e){if(Oe(t.length)){Yt(t,function(r){rn(r,e)});return}if(t.classList){t.classList.add(e);return}var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function ui(t,e){if(e){if(Oe(t.length)){Yt(t,function(n){ui(n,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function Do(t,e,n){if(e){if(Oe(t.length)){Yt(t,function(r){Do(r,e,n)});return}n?rn(t,e):ui(t,e)}}var pL=/([a-z\d])([A-Z])/g;function h0(t){return t.replace(pL,"$1-$2").toLowerCase()}function Gg(t,e){return Vs(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(h0(e)))}function tu(t,e,n){Vs(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(h0(e)),n)}function gL(t,e){if(Vs(t[e]))try{delete t[e]}catch{t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch{t.dataset[e]=void 0}else t.removeAttribute("data-".concat(h0(e)))}var ER=/\s\s*/,xR=function(){var t=!1;if(Yf){var e=!1,n=function(){},r=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(a){e=a}});fi.addEventListener("test",n,r),fi.removeEventListener("test",n,r)}return t}();function kr(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=n;e.trim().split(ER).forEach(function(a){if(!xR){var s=t.listeners;s&&s[a]&&s[a][n]&&(i=s[a][n],delete s[a][n],Object.keys(s[a]).length===0&&delete s[a],Object.keys(s).length===0&&delete t.listeners)}t.removeEventListener(a,i,r)})}function gr(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=n;e.trim().split(ER).forEach(function(a){if(r.once&&!xR){var s=t.listeners,o=s===void 0?{}:s;i=function(){delete o[a][n],t.removeEventListener(a,i,r);for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];n.apply(t,u)},o[a]||(o[a]={}),o[a][n]&&t.removeEventListener(a,o[a][n],r),o[a][n]=i,t.listeners=o}t.addEventListener(a,i,r)})}function Go(t,e,n){var r;return qn(Event)&&qn(CustomEvent)?r=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(r)}function TR(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var tp=fi.location,vL=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Ow(t){var e=t.match(vL);return e!==null&&(e[1]!==tp.protocol||e[2]!==tp.hostname||e[3]!==tp.port)}function Mw(t){var e="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+e}function Dc(t){var e=t.rotate,n=t.scaleX,r=t.scaleY,i=t.translateX,a=t.translateY,s=[];Oe(i)&&i!==0&&s.push("translateX(".concat(i,"px)")),Oe(a)&&a!==0&&s.push("translateY(".concat(a,"px)")),Oe(e)&&e!==0&&s.push("rotate(".concat(e,"deg)")),Oe(n)&&n!==1&&s.push("scaleX(".concat(n,")")),Oe(r)&&r!==1&&s.push("scaleY(".concat(r,")"));var o=s.length?s.join(" "):"none";return{WebkitTransform:o,msTransform:o,transform:o}}function yL(t){var e=hR({},t),n=0;return Yt(t,function(r,i){delete e[i],Yt(e,function(a){var s=Math.abs(r.startX-a.startX),o=Math.abs(r.startY-a.startY),l=Math.abs(r.endX-a.endX),h=Math.abs(r.endY-a.endY),u=Math.sqrt(s*s+o*o),d=Math.sqrt(l*l+h*h),f=(d-u)/u;Math.abs(f)>Math.abs(n)&&(n=f)})}),n}function bh(t,e){var n=t.pageX,r=t.pageY,i={endX:n,endY:r};return e?i:hR({startX:n,startY:r},i)}function _L(t){var e=0,n=0,r=0;return Yt(t,function(i){var a=i.startX,s=i.startY;e+=a,n+=s,r+=1}),e/=r,n/=r,{pageX:e,pageY:n}}function Ta(t){var e=t.aspectRatio,n=t.height,r=t.width,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",a=Dw(r),s=Dw(n);if(a&&s){var o=n*e;i==="contain"&&o>r||i==="cover"&&o<r?n=r/e:r=n*e}else a?n=r/e:s&&(r=n*e);return{width:r,height:n}}function bL(t){var e=t.width,n=t.height,r=t.degree;if(r=Math.abs(r)%180,r===90)return{width:n,height:e};var i=r%90*Math.PI/180,a=Math.sin(i),s=Math.cos(i),o=e*s+n*a,l=e*a+n*s;return r>90?{width:l,height:o}:{width:o,height:l}}function wL(t,e,n,r){var i=e.aspectRatio,a=e.naturalWidth,s=e.naturalHeight,o=e.rotate,l=o===void 0?0:o,h=e.scaleX,u=h===void 0?1:h,d=e.scaleY,f=d===void 0?1:d,p=n.aspectRatio,b=n.naturalWidth,A=n.naturalHeight,D=r.fillColor,w=D===void 0?"transparent":D,T=r.imageSmoothingEnabled,N=T===void 0?!0:T,O=r.imageSmoothingQuality,P=O===void 0?"low":O,R=r.maxWidth,_=R===void 0?1/0:R,g=r.maxHeight,y=g===void 0?1/0:g,x=r.minWidth,C=x===void 0?0:x,I=r.minHeight,S=I===void 0?0:I,U=document.createElement("canvas"),z=U.getContext("2d"),k=Ta({aspectRatio:p,width:_,height:y}),M=Ta({aspectRatio:p,width:C,height:S},"cover"),q=Math.min(k.width,Math.max(M.width,b)),B=Math.min(k.height,Math.max(M.height,A)),X=Ta({aspectRatio:i,width:_,height:y}),re=Ta({aspectRatio:i,width:C,height:S},"cover"),V=Math.min(X.width,Math.max(re.width,a)),K=Math.min(X.height,Math.max(re.height,s)),$=[-V/2,-K/2,V,K];return U.width=qo(q),U.height=qo(B),z.fillStyle=w,z.fillRect(0,0,q,B),z.save(),z.translate(q/2,B/2),z.rotate(l*Math.PI/180),z.scale(u,f),z.imageSmoothingEnabled=N,z.imageSmoothingQuality=P,z.drawImage.apply(z,[t].concat(fR($.map(function(Y){return Math.floor(qo(Y))})))),z.restore(),U}var AR=String.fromCharCode;function EL(t,e,n){var r="";n+=e;for(var i=e;i<n;i+=1)r+=AR(t.getUint8(i));return r}var xL=/^data:.*,/;function TL(t){var e=t.replace(xL,""),n=atob(e),r=new ArrayBuffer(n.length),i=new Uint8Array(r);return Yt(i,function(a,s){i[s]=n.charCodeAt(s)}),r}function AL(t,e){for(var n=[],r=8192,i=new Uint8Array(t);i.length>0;)n.push(AR.apply(null,wR(i.subarray(0,r)))),i=i.subarray(r);return"data:".concat(e,";base64,").concat(btoa(n.join("")))}function SL(t){var e=new DataView(t),n;try{var r,i,a;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var s=e.byteLength,o=2;o+1<s;){if(e.getUint8(o)===255&&e.getUint8(o+1)===225){i=o;break}o+=1}if(i){var l=i+4,h=i+10;if(EL(e,l,4)==="Exif"){var u=e.getUint16(h);if(r=u===18761,(r||u===19789)&&e.getUint16(h+2,r)===42){var d=e.getUint32(h+4,r);d>=8&&(a=h+d)}}}if(a){var f=e.getUint16(a,r),p,b;for(b=0;b<f;b+=1)if(p=a+b*12+2,e.getUint16(p,r)===274){p+=8,n=e.getUint16(p,r),e.setUint16(p,1,r);break}}}catch{n=1}return n}function RL(t){var e=0,n=1,r=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:r=-1;break;case 5:e=90,r=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:n,scaleY:r}}var CL={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,n=this.options,r=this.container,i=this.cropper,a=Number(n.minContainerWidth),s=Number(n.minContainerHeight);rn(i,Yn),ui(e,Yn);var o={width:Math.max(r.offsetWidth,a>=0?a:_R),height:Math.max(r.offsetHeight,s>=0?s:bR)};this.containerData=o,xa(i,{width:o.width,height:o.height}),rn(e,Yn),ui(i,Yn)},initCanvas:function(){var e=this.containerData,n=this.imageData,r=this.options.viewMode,i=Math.abs(n.rotate)%180===90,a=i?n.naturalHeight:n.naturalWidth,s=i?n.naturalWidth:n.naturalHeight,o=a/s,l=e.width,h=e.height;e.height*o>e.width?r===3?l=e.height*o:h=e.width/o:r===3?h=e.width/o:l=e.height*o;var u={aspectRatio:o,naturalWidth:a,naturalHeight:s,width:l,height:h};this.canvasData=u,this.limited=r===1||r===2,this.limitCanvas(!0,!0),u.width=Math.min(Math.max(u.width,u.minWidth),u.maxWidth),u.height=Math.min(Math.max(u.height,u.minHeight),u.maxHeight),u.left=(e.width-u.width)/2,u.top=(e.height-u.height)/2,u.oldLeft=u.left,u.oldTop=u.top,this.initialCanvasData=wt({},u)},limitCanvas:function(e,n){var r=this.options,i=this.containerData,a=this.canvasData,s=this.cropBoxData,o=r.viewMode,l=a.aspectRatio,h=this.cropped&&s;if(e){var u=Number(r.minCanvasWidth)||0,d=Number(r.minCanvasHeight)||0;o>1?(u=Math.max(u,i.width),d=Math.max(d,i.height),o===3&&(d*l>u?u=d*l:d=u/l)):o>0&&(u?u=Math.max(u,h?s.width:0):d?d=Math.max(d,h?s.height:0):h&&(u=s.width,d=s.height,d*l>u?u=d*l:d=u/l));var f=Ta({aspectRatio:l,width:u,height:d});u=f.width,d=f.height,a.minWidth=u,a.minHeight=d,a.maxWidth=1/0,a.maxHeight=1/0}if(n)if(o>(h?0:1)){var p=i.width-a.width,b=i.height-a.height;a.minLeft=Math.min(0,p),a.minTop=Math.min(0,b),a.maxLeft=Math.max(0,p),a.maxTop=Math.max(0,b),h&&this.limited&&(a.minLeft=Math.min(s.left,s.left+(s.width-a.width)),a.minTop=Math.min(s.top,s.top+(s.height-a.height)),a.maxLeft=s.left,a.maxTop=s.top,o===2&&(a.width>=i.width&&(a.minLeft=Math.min(0,p),a.maxLeft=Math.max(0,p)),a.height>=i.height&&(a.minTop=Math.min(0,b),a.maxTop=Math.max(0,b))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=i.width,a.maxTop=i.height},renderCanvas:function(e,n){var r=this.canvasData,i=this.imageData;if(n){var a=bL({width:i.naturalWidth*Math.abs(i.scaleX||1),height:i.naturalHeight*Math.abs(i.scaleY||1),degree:i.rotate||0}),s=a.width,o=a.height,l=r.width*(s/r.naturalWidth),h=r.height*(o/r.naturalHeight);r.left-=(l-r.width)/2,r.top-=(h-r.height)/2,r.width=l,r.height=h,r.aspectRatio=s/o,r.naturalWidth=s,r.naturalHeight=o,this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCanvas(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,xa(this.canvas,wt({width:r.width,height:r.height},Dc({translateX:r.left,translateY:r.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var n=this.canvasData,r=this.imageData,i=r.naturalWidth*(n.width/n.naturalWidth),a=r.naturalHeight*(n.height/n.naturalHeight);wt(r,{width:i,height:a,left:(n.width-i)/2,top:(n.height-a)/2}),xa(this.image,wt({width:r.width,height:r.height},Dc(wt({translateX:r.left,translateY:r.top},r)))),e&&this.output()},initCropBox:function(){var e=this.options,n=this.canvasData,r=e.aspectRatio||e.initialAspectRatio,i=Number(e.autoCropArea)||.8,a={width:n.width,height:n.height};r&&(n.height*r>n.width?a.height=a.width/r:a.width=a.height*r),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*i),a.height=Math.max(a.minHeight,a.height*i),a.left=n.left+(n.width-a.width)/2,a.top=n.top+(n.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=wt({},a)},limitCropBox:function(e,n){var r=this.options,i=this.containerData,a=this.canvasData,s=this.cropBoxData,o=this.limited,l=r.aspectRatio;if(e){var h=Number(r.minCropBoxWidth)||0,u=Number(r.minCropBoxHeight)||0,d=o?Math.min(i.width,a.width,a.width+a.left,i.width-a.left):i.width,f=o?Math.min(i.height,a.height,a.height+a.top,i.height-a.top):i.height;h=Math.min(h,i.width),u=Math.min(u,i.height),l&&(h&&u?u*l>h?u=h/l:h=u*l:h?u=h/l:u&&(h=u*l),f*l>d?f=d/l:d=f*l),s.minWidth=Math.min(h,d),s.minHeight=Math.min(u,f),s.maxWidth=d,s.maxHeight=f}n&&(o?(s.minLeft=Math.max(0,a.left),s.minTop=Math.max(0,a.top),s.maxLeft=Math.min(i.width,a.left+a.width)-s.width,s.maxTop=Math.min(i.height,a.top+a.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=i.width-s.width,s.maxTop=i.height-s.height))},renderCropBox:function(){var e=this.options,n=this.containerData,r=this.cropBoxData;(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCropBox(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,e.movable&&e.cropBoxMovable&&tu(this.face,eu,r.width>=n.width&&r.height>=n.height?pR:c0),xa(this.cropBox,wt({width:r.width,height:r.height},Dc({translateX:r.left,translateY:r.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Go(this.element,zg,this.getData())}},NL={initPreview:function(){var e=this.element,n=this.crossOrigin,r=this.options.preview,i=n?this.crossOriginUrl:this.url,a=e.alt||"The image to preview",s=document.createElement("img");if(n&&(s.crossOrigin=n),s.src=i,s.alt=a,this.viewBox.appendChild(s),this.viewBoxImage=s,!!r){var o=r;typeof r=="string"?o=e.ownerDocument.querySelectorAll(r):r.querySelector&&(o=[r]),this.previews=o,Yt(o,function(l){var h=document.createElement("img");tu(l,_h,{width:l.offsetWidth,height:l.offsetHeight,html:l.innerHTML}),n&&(h.crossOrigin=n),h.src=i,h.alt=a,h.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',l.innerHTML="",l.appendChild(h)})}},resetPreview:function(){Yt(this.previews,function(e){var n=Gg(e,_h);xa(e,{width:n.width,height:n.height}),e.innerHTML=n.html,gL(e,_h)})},preview:function(){var e=this.imageData,n=this.canvasData,r=this.cropBoxData,i=r.width,a=r.height,s=e.width,o=e.height,l=r.left-n.left-e.left,h=r.top-n.top-e.top;!this.cropped||this.disabled||(xa(this.viewBoxImage,wt({width:s,height:o},Dc(wt({translateX:-l,translateY:-h},e)))),Yt(this.previews,function(u){var d=Gg(u,_h),f=d.width,p=d.height,b=f,A=p,D=1;i&&(D=f/i,A=a*D),a&&A>p&&(D=p/a,b=i*D,A=p),xa(u,{width:b,height:A}),xa(u.getElementsByTagName("img")[0],wt({width:s*D,height:o*D},Dc(wt({translateX:-l*D,translateY:-h*D},e))))}))}},IL={bind:function(){var e=this.element,n=this.options,r=this.cropper;qn(n.cropstart)&&gr(e,Hg,n.cropstart),qn(n.cropmove)&&gr(e,Fg,n.cropmove),qn(n.cropend)&&gr(e,Bg,n.cropend),qn(n.crop)&&gr(e,zg,n.crop),qn(n.zoom)&&gr(e,qg,n.zoom),gr(r,xw,this.onCropStart=this.cropStart.bind(this)),n.zoomable&&n.zoomOnWheel&&gr(r,Cw,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&gr(r,Ew,this.onDblclick=this.dblclick.bind(this)),gr(e.ownerDocument,Tw,this.onCropMove=this.cropMove.bind(this)),gr(e.ownerDocument,Aw,this.onCropEnd=this.cropEnd.bind(this)),n.responsive&&gr(window,Rw,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,n=this.options,r=this.cropper;qn(n.cropstart)&&kr(e,Hg,n.cropstart),qn(n.cropmove)&&kr(e,Fg,n.cropmove),qn(n.cropend)&&kr(e,Bg,n.cropend),qn(n.crop)&&kr(e,zg,n.crop),qn(n.zoom)&&kr(e,qg,n.zoom),kr(r,xw,this.onCropStart),n.zoomable&&n.zoomOnWheel&&kr(r,Cw,this.onWheel,{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&kr(r,Ew,this.onDblclick),kr(e.ownerDocument,Tw,this.onCropMove),kr(e.ownerDocument,Aw,this.onCropEnd),n.responsive&&kr(window,Rw,this.onResize)}},DL={resize:function(){if(!this.disabled){var e=this.options,n=this.container,r=this.containerData,i=n.offsetWidth/r.width,a=n.offsetHeight/r.height,s=Math.abs(i-1)>Math.abs(a-1)?i:a;if(s!==1){var o,l;e.restore&&(o=this.getCanvasData(),l=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(Yt(o,function(h,u){o[u]=h*s})),this.setCropBoxData(Yt(l,function(h,u){l[u]=h*s})))}}},dblclick:function(){this.disabled||this.options.dragMode===yR||this.setDragMode(mL(this.dragBox,Lg)?vR:u0)},wheel:function(e){var n=this,r=Number(this.options.wheelZoomRatio)||.1,i=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50),e.deltaY?i=e.deltaY>0?1:-1:e.wheelDelta?i=-e.wheelDelta/120:e.detail&&(i=e.detail>0?1:-1),this.zoom(-i*r,e)))},cropStart:function(e){var n=e.buttons,r=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(Oe(n)&&n!==1||Oe(r)&&r!==0||e.ctrlKey))){var i=this.options,a=this.pointers,s;e.changedTouches?Yt(e.changedTouches,function(o){a[o.identifier]=bh(o)}):a[e.pointerId||0]=bh(e),Object.keys(a).length>1&&i.zoomable&&i.zoomOnTouch?s=gR:s=Gg(e.target,eu),iL.test(s)&&Go(this.element,Hg,{originalEvent:e,action:s})!==!1&&(e.preventDefault(),this.action=s,this.cropping=!1,s===mR&&(this.cropping=!0,rn(this.dragBox,Zd)))}},cropMove:function(e){var n=this.action;if(!(this.disabled||!n)){var r=this.pointers;e.preventDefault(),Go(this.element,Fg,{originalEvent:e,action:n})!==!1&&(e.changedTouches?Yt(e.changedTouches,function(i){wt(r[i.identifier]||{},bh(i,!0))}):wt(r[e.pointerId||0]||{},bh(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var n=this.action,r=this.pointers;e.changedTouches?Yt(e.changedTouches,function(i){delete r[i.identifier]}):delete r[e.pointerId||0],n&&(e.preventDefault(),Object.keys(r).length||(this.action=""),this.cropping&&(this.cropping=!1,Do(this.dragBox,Zd,this.cropped&&this.options.modal)),Go(this.element,Bg,{originalEvent:e,action:n}))}}},OL={change:function(e){var n=this.options,r=this.canvasData,i=this.containerData,a=this.cropBoxData,s=this.pointers,o=this.action,l=n.aspectRatio,h=a.left,u=a.top,d=a.width,f=a.height,p=h+d,b=u+f,A=0,D=0,w=i.width,T=i.height,N=!0,O;!l&&e.shiftKey&&(l=d&&f?d/f:1),this.limited&&(A=a.minLeft,D=a.minTop,w=A+Math.min(i.width,r.width,r.left+r.width),T=D+Math.min(i.height,r.height,r.top+r.height));var P=s[Object.keys(s)[0]],R={x:P.endX-P.startX,y:P.endY-P.startY},_=function(y){switch(y){case as:p+R.x>w&&(R.x=w-p);break;case ss:h+R.x<A&&(R.x=A-h);break;case ia:u+R.y<D&&(R.y=D-u);break;case io:b+R.y>T&&(R.y=T-b);break}};switch(o){case c0:h+=R.x,u+=R.y;break;case as:if(R.x>=0&&(p>=w||l&&(u<=D||b>=T))){N=!1;break}_(as),d+=R.x,d<0&&(o=ss,d=-d,h-=d),l&&(f=d/l,u+=(a.height-f)/2);break;case ia:if(R.y<=0&&(u<=D||l&&(h<=A||p>=w))){N=!1;break}_(ia),f-=R.y,u+=R.y,f<0&&(o=io,f=-f,u-=f),l&&(d=f*l,h+=(a.width-d)/2);break;case ss:if(R.x<=0&&(h<=A||l&&(u<=D||b>=T))){N=!1;break}_(ss),d-=R.x,h+=R.x,d<0&&(o=as,d=-d,h-=d),l&&(f=d/l,u+=(a.height-f)/2);break;case io:if(R.y>=0&&(b>=T||l&&(h<=A||p>=w))){N=!1;break}_(io),f+=R.y,f<0&&(o=ia,f=-f,u-=f),l&&(d=f*l,h+=(a.width-d)/2);break;case Kl:if(l){if(R.y<=0&&(u<=D||p>=w)){N=!1;break}_(ia),f-=R.y,u+=R.y,d=f*l}else _(ia),_(as),R.x>=0?p<w?d+=R.x:R.y<=0&&u<=D&&(N=!1):d+=R.x,R.y<=0?u>D&&(f-=R.y,u+=R.y):(f-=R.y,u+=R.y);d<0&&f<0?(o=Jl,f=-f,d=-d,u-=f,h-=d):d<0?(o=Wl,d=-d,h-=d):f<0&&(o=Zl,f=-f,u-=f);break;case Wl:if(l){if(R.y<=0&&(u<=D||h<=A)){N=!1;break}_(ia),f-=R.y,u+=R.y,d=f*l,h+=a.width-d}else _(ia),_(ss),R.x<=0?h>A?(d-=R.x,h+=R.x):R.y<=0&&u<=D&&(N=!1):(d-=R.x,h+=R.x),R.y<=0?u>D&&(f-=R.y,u+=R.y):(f-=R.y,u+=R.y);d<0&&f<0?(o=Zl,f=-f,d=-d,u-=f,h-=d):d<0?(o=Kl,d=-d,h-=d):f<0&&(o=Jl,f=-f,u-=f);break;case Jl:if(l){if(R.x<=0&&(h<=A||b>=T)){N=!1;break}_(ss),d-=R.x,h+=R.x,f=d/l}else _(io),_(ss),R.x<=0?h>A?(d-=R.x,h+=R.x):R.y>=0&&b>=T&&(N=!1):(d-=R.x,h+=R.x),R.y>=0?b<T&&(f+=R.y):f+=R.y;d<0&&f<0?(o=Kl,f=-f,d=-d,u-=f,h-=d):d<0?(o=Zl,d=-d,h-=d):f<0&&(o=Wl,f=-f,u-=f);break;case Zl:if(l){if(R.x>=0&&(p>=w||b>=T)){N=!1;break}_(as),d+=R.x,f=d/l}else _(io),_(as),R.x>=0?p<w?d+=R.x:R.y>=0&&b>=T&&(N=!1):d+=R.x,R.y>=0?b<T&&(f+=R.y):f+=R.y;d<0&&f<0?(o=Wl,f=-f,d=-d,u-=f,h-=d):d<0?(o=Jl,d=-d,h-=d):f<0&&(o=Kl,f=-f,u-=f);break;case pR:this.move(R.x,R.y),N=!1;break;case gR:this.zoom(yL(s),e),N=!1;break;case mR:if(!R.x||!R.y){N=!1;break}O=TR(this.cropper),h=P.startX-O.left,u=P.startY-O.top,d=a.minWidth,f=a.minHeight,R.x>0?o=R.y>0?Zl:Kl:R.x<0&&(h-=d,o=R.y>0?Jl:Wl),R.y<0&&(u-=f),this.cropped||(ui(this.cropBox,Yn),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}N&&(a.width=d,a.height=f,a.left=h,a.top=u,this.action=o,this.renderCropBox()),Yt(s,function(g){g.startX=g.endX,g.startY=g.endY})}},ML={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&rn(this.dragBox,Zd),ui(this.cropBox,Yn),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=wt({},this.initialImageData),this.canvasData=wt({},this.initialCanvasData),this.cropBoxData=wt({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(wt(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ui(this.dragBox,Zd),rn(this.cropBox,Yn)),this},replace:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),n?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,Yt(this.previews,function(r){r.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ui(this.cropper,bw)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,rn(this.cropper,bw)),this},destroy:function(){var e=this.element;return e[_t]?(e[_t]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.canvasData,i=r.left,a=r.top;return this.moveTo(ep(e)?e:i+Number(e),ep(n)?n:a+Number(n))},moveTo:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.canvasData,i=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.movable&&(Oe(e)&&(r.left=e,i=!0),Oe(n)&&(r.top=n,i=!0),i&&this.renderCanvas(!0)),this},zoom:function(e,n){var r=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(r.width*e/r.naturalWidth,null,n)},zoomTo:function(e,n,r){var i=this.options,a=this.canvasData,s=a.width,o=a.height,l=a.naturalWidth,h=a.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&i.zoomable){var u=l*e,d=h*e;if(Go(this.element,qg,{ratio:e,oldRatio:s/l,originalEvent:r})===!1)return this;if(r){var f=this.pointers,p=TR(this.cropper),b=f&&Object.keys(f).length?_L(f):{pageX:r.pageX,pageY:r.pageY};a.left-=(u-s)*((b.pageX-p.left-a.left)/s),a.top-=(d-o)*((b.pageY-p.top-a.top)/o)}else Io(n)&&Oe(n.x)&&Oe(n.y)?(a.left-=(u-s)*((n.x-a.left)/s),a.top-=(d-o)*((n.y-a.top)/o)):(a.left-=(u-s)/2,a.top-=(d-o)/2);a.width=u,a.height=d,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),Oe(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var n=this.imageData.scaleY;return this.scale(e,Oe(n)?n:1)},scaleY:function(e){var n=this.imageData.scaleX;return this.scale(Oe(n)?n:1,e)},scale:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.imageData,i=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.scalable&&(Oe(e)&&(r.scaleX=e,i=!0),Oe(n)&&(r.scaleY=n,i=!0),i&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.options,r=this.imageData,i=this.canvasData,a=this.cropBoxData,s;if(this.ready&&this.cropped){s={x:a.left-i.left,y:a.top-i.top,width:a.width,height:a.height};var o=r.width/r.naturalWidth;if(Yt(s,function(u,d){s[d]=u/o}),e){var l=Math.round(s.y+s.height),h=Math.round(s.x+s.width);s.x=Math.round(s.x),s.y=Math.round(s.y),s.width=h-s.x,s.height=l-s.y}}else s={x:0,y:0,width:0,height:0};return n.rotatable&&(s.rotate=r.rotate||0),n.scalable&&(s.scaleX=r.scaleX||1,s.scaleY=r.scaleY||1),s},setData:function(e){var n=this.options,r=this.imageData,i=this.canvasData,a={};if(this.ready&&!this.disabled&&Io(e)){var s=!1;n.rotatable&&Oe(e.rotate)&&e.rotate!==r.rotate&&(r.rotate=e.rotate,s=!0),n.scalable&&(Oe(e.scaleX)&&e.scaleX!==r.scaleX&&(r.scaleX=e.scaleX,s=!0),Oe(e.scaleY)&&e.scaleY!==r.scaleY&&(r.scaleY=e.scaleY,s=!0)),s&&this.renderCanvas(!0,!0);var o=r.width/r.naturalWidth;Oe(e.x)&&(a.left=e.x*o+i.left),Oe(e.y)&&(a.top=e.y*o+i.top),Oe(e.width)&&(a.width=e.width*o),Oe(e.height)&&(a.height=e.height*o),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?wt({},this.containerData):{}},getImageData:function(){return this.sized?wt({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,n={};return this.ready&&Yt(["left","top","width","height","naturalWidth","naturalHeight"],function(r){n[r]=e[r]}),n},setCanvasData:function(e){var n=this.canvasData,r=n.aspectRatio;return this.ready&&!this.disabled&&Io(e)&&(Oe(e.left)&&(n.left=e.left),Oe(e.top)&&(n.top=e.top),Oe(e.width)?(n.width=e.width,n.height=e.width/r):Oe(e.height)&&(n.height=e.height,n.width=e.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,n;return this.ready&&this.cropped&&(n={left:e.left,top:e.top,width:e.width,height:e.height}),n||{}},setCropBoxData:function(e){var n=this.cropBoxData,r=this.options.aspectRatio,i,a;return this.ready&&this.cropped&&!this.disabled&&Io(e)&&(Oe(e.left)&&(n.left=e.left),Oe(e.top)&&(n.top=e.top),Oe(e.width)&&e.width!==n.width&&(i=!0,n.width=e.width),Oe(e.height)&&e.height!==n.height&&(a=!0,n.height=e.height),r&&(i?n.height=n.width/r:a&&(n.width=n.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var n=this.canvasData,r=wL(this.image,this.imageData,n,e);if(!this.cropped)return r;var i=this.getData(e.rounded),a=i.x,s=i.y,o=i.width,l=i.height,h=r.width/Math.floor(n.naturalWidth);h!==1&&(a*=h,s*=h,o*=h,l*=h);var u=o/l,d=Ta({aspectRatio:u,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),f=Ta({aspectRatio:u,width:e.minWidth||0,height:e.minHeight||0},"cover"),p=Ta({aspectRatio:u,width:e.width||(h!==1?r.width:o),height:e.height||(h!==1?r.height:l)}),b=p.width,A=p.height;b=Math.min(d.width,Math.max(f.width,b)),A=Math.min(d.height,Math.max(f.height,A));var D=document.createElement("canvas"),w=D.getContext("2d");D.width=qo(b),D.height=qo(A),w.fillStyle=e.fillColor||"transparent",w.fillRect(0,0,b,A);var T=e.imageSmoothingEnabled,N=T===void 0?!0:T,O=e.imageSmoothingQuality;w.imageSmoothingEnabled=N,O&&(w.imageSmoothingQuality=O);var P=r.width,R=r.height,_=a,g=s,y,x,C,I,S,U;_<=-o||_>P?(_=0,y=0,C=0,S=0):_<=0?(C=-_,_=0,y=Math.min(P,o+_),S=y):_<=P&&(C=0,y=Math.min(o,P-_),S=y),y<=0||g<=-l||g>R?(g=0,x=0,I=0,U=0):g<=0?(I=-g,g=0,x=Math.min(R,l+g),U=x):g<=R&&(I=0,x=Math.min(l,R-g),U=x);var z=[_,g,y,x];if(S>0&&U>0){var k=b/o;z.push(C*k,I*k,S*k,U*k)}return w.drawImage.apply(w,[r].concat(fR(z.map(function(M){return Math.floor(qo(M))})))),D},setAspectRatio:function(e){var n=this.options;return!this.disabled&&!ep(e)&&(n.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var n=this.options,r=this.dragBox,i=this.face;if(this.ready&&!this.disabled){var a=e===u0,s=n.movable&&e===vR;e=a||s?e:yR,n.dragMode=e,tu(r,eu,e),Do(r,Lg,a),Do(r,Vg,s),n.cropBoxMovable||(tu(i,eu,e),Do(i,Lg,a),Do(i,Vg,s))}return this}},kL=fi.Cropper,SR=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(YU(this,t),!e||!oL.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=wt({},Iw,Io(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return XU(t,[{key:"init",value:function(){var n=this.element,r=n.tagName.toLowerCase(),i;if(!n[_t]){if(n[_t]=this,r==="img"){if(this.isImg=!0,i=n.getAttribute("src")||"",this.originalUrl=i,!i)return;i=n.src}else r==="canvas"&&window.HTMLCanvasElement&&(i=n.toDataURL());this.load(i)}}},{key:"load",value:function(n){var r=this;if(n){this.url=n,this.imageData={};var i=this.element,a=this.options;if(!a.rotatable&&!a.scalable&&(a.checkOrientation=!1),!a.checkOrientation||!window.ArrayBuffer){this.clone();return}if(aL.test(n)){sL.test(n)?this.read(TL(n)):this.clone();return}var s=new XMLHttpRequest,o=this.clone.bind(this);this.reloading=!0,this.xhr=s,s.onabort=o,s.onerror=o,s.ontimeout=o,s.onprogress=function(){s.getResponseHeader("content-type")!==Nw&&s.abort()},s.onload=function(){r.read(s.response)},s.onloadend=function(){r.reloading=!1,r.xhr=null},a.checkCrossOrigin&&Ow(n)&&i.crossOrigin&&(n=Mw(n)),s.open("GET",n,!0),s.responseType="arraybuffer",s.withCredentials=i.crossOrigin==="use-credentials",s.send()}}},{key:"read",value:function(n){var r=this.options,i=this.imageData,a=SL(n),s=0,o=1,l=1;if(a>1){this.url=AL(n,Nw);var h=RL(a);s=h.rotate,o=h.scaleX,l=h.scaleY}r.rotatable&&(i.rotate=s),r.scalable&&(i.scaleX=o,i.scaleY=l),this.clone()}},{key:"clone",value:function(){var n=this.element,r=this.url,i=n.crossOrigin,a=r;this.options.checkCrossOrigin&&Ow(r)&&(i||(i="anonymous"),a=Mw(r)),this.crossOrigin=i,this.crossOriginUrl=a;var s=document.createElement("img");i&&(s.crossOrigin=i),s.src=a||r,s.alt=n.alt||"The image to crop",this.image=s,s.onload=this.start.bind(this),s.onerror=this.stop.bind(this),rn(s,ww),n.parentNode.insertBefore(s,n.nextSibling)}},{key:"start",value:function(){var n=this,r=this.image;r.onload=null,r.onerror=null,this.sizing=!0;var i=fi.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(fi.navigator.userAgent),a=function(h,u){wt(n.imageData,{naturalWidth:h,naturalHeight:u,aspectRatio:h/u}),n.initialImageData=wt({},n.imageData),n.sizing=!1,n.sized=!0,n.build()};if(r.naturalWidth&&!i){a(r.naturalWidth,r.naturalHeight);return}var s=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=s,s.onload=function(){a(s.width,s.height),i||o.removeChild(s)},s.src=r.src,i||(s.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(s))}},{key:"stop",value:function(){var n=this.image;n.onload=null,n.onerror=null,n.parentNode.removeChild(n),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var n=this.element,r=this.options,i=this.image,a=n.parentNode,s=document.createElement("div");s.innerHTML=lL;var o=s.querySelector(".".concat(_t,"-container")),l=o.querySelector(".".concat(_t,"-canvas")),h=o.querySelector(".".concat(_t,"-drag-box")),u=o.querySelector(".".concat(_t,"-crop-box")),d=u.querySelector(".".concat(_t,"-face"));this.container=a,this.cropper=o,this.canvas=l,this.dragBox=h,this.cropBox=u,this.viewBox=o.querySelector(".".concat(_t,"-view-box")),this.face=d,l.appendChild(i),rn(n,Yn),a.insertBefore(o,n.nextSibling),ui(i,ww),this.initPreview(),this.bind(),r.initialAspectRatio=Math.max(0,r.initialAspectRatio)||NaN,r.aspectRatio=Math.max(0,r.aspectRatio)||NaN,r.viewMode=Math.max(0,Math.min(3,Math.round(r.viewMode)))||0,rn(u,Yn),r.guides||rn(u.getElementsByClassName("".concat(_t,"-dashed")),Yn),r.center||rn(u.getElementsByClassName("".concat(_t,"-center")),Yn),r.background&&rn(o,"".concat(_t,"-bg")),r.highlight||rn(d,eL),r.cropBoxMovable&&(rn(d,Vg),tu(d,eu,c0)),r.cropBoxResizable||(rn(u.getElementsByClassName("".concat(_t,"-line")),Yn),rn(u.getElementsByClassName("".concat(_t,"-point")),Yn)),this.render(),this.ready=!0,this.setDragMode(r.dragMode),r.autoCrop&&this.crop(),this.setData(r.data),qn(r.ready)&&gr(n,Sw,r.ready,{once:!0}),Go(n,Sw)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var n=this.cropper.parentNode;n&&n.removeChild(this.cropper),ui(this.element,Yn)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=kL,t}},{key:"setDefaults",value:function(n){wt(Iw,Io(n)&&n)}}])}();wt(SR.prototype,CL,NL,IL,DL,OL,ML);var fs=function(){return fs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},fs.apply(this,arguments)};function np(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}var jL=["aspectRatio","autoCrop","autoCropArea","background","center","checkCrossOrigin","checkOrientation","cropBoxMovable","cropBoxResizable","data","dragMode","guides","highlight","initialAspectRatio","minCanvasHeight","minCanvasWidth","minContainerHeight","minContainerWidth","minCropBoxHeight","minCropBoxWidth","modal","movable","preview","responsive","restore","rotatable","scalable","toggleDragModeOnDblclick","viewMode","wheelZoomRatio","zoomOnTouch","zoomOnWheel","zoomable","cropstart","cropmove","cropend","crop","zoom","ready"],PL={opacity:0,maxWidth:"100%"},UL=po.forwardRef(function(t,e){var n=np(t,[]),r=n.dragMode,i=r===void 0?"crop":r,a=n.src,s=n.style,o=n.className,l=n.crossOrigin,h=n.scaleX,u=n.scaleY,d=n.enable,f=n.zoomTo,p=n.rotateTo,b=n.alt,A=b===void 0?"picture":b,D=n.ready,w=n.onInitialized,T=np(n,["dragMode","src","style","className","crossOrigin","scaleX","scaleY","enable","zoomTo","rotateTo","alt","ready","onInitialized"]),N={scaleY:u,scaleX:h,enable:d,zoomTo:f,rotateTo:p},O=function(){for(var R=[],_=0;_<arguments.length;_++)R[_]=arguments[_];var g=H.useRef(null);return po.useEffect(function(){R.forEach(function(y){y&&(typeof y=="function"?y(g.current):y.current=g.current)})},[R]),g}(e,H.useRef(null));H.useEffect(function(){var R;!((R=O.current)===null||R===void 0)&&R.cropper&&typeof f=="number"&&O.current.cropper.zoomTo(f)},[n.zoomTo]),H.useEffect(function(){var R;!((R=O.current)===null||R===void 0)&&R.cropper&&a!==void 0&&O.current.cropper.reset().clear().replace(a)},[a]),H.useEffect(function(){if(O.current!==null){var R=new SR(O.current,fs(fs({dragMode:i},T),{ready:function(_){_.currentTarget!==null&&function(g,y){y===void 0&&(y={});var x=y.enable,C=x===void 0||x,I=y.scaleX,S=I===void 0?1:I,U=y.scaleY,z=U===void 0?1:U,k=y.zoomTo,M=k===void 0?0:k,q=y.rotateTo;C?g.enable():g.disable(),g.scaleX(S),g.scaleY(z),q!==void 0&&g.rotateTo(q),M>0&&g.zoomTo(M)}(_.currentTarget.cropper,N),D&&D(_)}}));w&&w(R)}return function(){var _,g;(g=(_=O.current)===null||_===void 0?void 0:_.cropper)===null||g===void 0||g.destroy()}},[O]);var P=function(R){return jL.reduce(function(_,g){var y=_,x=g;return y[x],np(y,[typeof x=="symbol"?x:x+""])},R)}(fs(fs({},T),{crossOrigin:l,src:a,alt:A}));return po.createElement("div",{style:s,className:o},po.createElement("img",fs({},P,{style:PL,ref:O})))});const LL=({isOpen:t,onClose:e,onImageReady:n})=>{const[r,i]=H.useState(null),[a,s]=H.useState(!1),[o,l]=H.useState(null),h=H.useRef(null),u=H.useRef(null);H.useEffect(()=>{const A=u.current;A&&(t?A.showModal():A.close())},[t]);const d=()=>{i(null),s(!1),l(null)},f=()=>{d(),e()},p=async A=>{if(l(null),A.target.files&&A.target.files.length>0){const D=A.target.files[0];s(!0);try{const w=await zP(D,{maxSizeMB:1,maxWidthOrHeight:1024,useWebWorker:!0}),T=new FileReader;T.onload=()=>{i(T.result),s(!1)},T.readAsDataURL(w)}catch(w){l(w instanceof Error?w.message:"Image processing failed"),s(!1)}}},b=()=>{var D;if(!((D=h.current)!=null&&D.cropper)){l("Cropper not available.");return}s(!0);const A=h.current.cropper.getCroppedCanvas({width:256,height:256,imageSmoothingQuality:"high"}).toDataURL("image/jpeg",.9);n(A),f()};return m.jsxs("dialog",{ref:u,onClose:f,className:"bg-zinc-800 text-zinc-200 p-0 rounded-lg shadow-2xl w-full max-w-md border border-zinc-700 backdrop:bg-black/50",children:[m.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-zinc-700",children:[m.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Upload Portrait"}),m.jsx("button",{onClick:f,className:"p-1 rounded-full hover:bg-zinc-700 transition-colors",children:m.jsx(aR,{className:"w-5 h-5"})})]}),m.jsxs("div",{className:"p-6",children:[r?m.jsx("div",{children:m.jsx(UL,{ref:h,src:r,style:{height:400,width:"100%"},aspectRatio:1/1,guides:!1,viewMode:1,autoCropArea:.8,movable:!0,zoomable:!0,background:!1,className:"bg-zinc-900 rounded-md"})}):m.jsxs("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-zinc-600 rounded-lg p-8 text-center",children:[m.jsx(a0,{className:"w-12 h-12 text-zinc-500 mb-2"}),m.jsx("label",{htmlFor:"image-upload-input",className:"cursor-pointer bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition-colors duration-200",children:"Select an Image"}),m.jsx("input",{id:"image-upload-input",type:"file",accept:"image/*",onChange:p,className:"hidden"}),m.jsx("p",{className:"text-xs text-zinc-400 mt-2",children:"PNG, JPG, WEBP up to 1MB."}),a&&m.jsx("p",{className:"mt-2 text-zinc-400 animate-pulse",children:"Processing..."})]}),o&&m.jsx("p",{className:"text-red-400 text-sm mt-4",children:o})]}),m.jsxs("footer",{className:"flex justify-end gap-2 p-4 bg-zinc-900/50 border-t border-zinc-700",children:[m.jsx("button",{onClick:f,disabled:a,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition-colors disabled:bg-zinc-500 disabled:cursor-not-allowed",children:"Cancel"}),m.jsxs("button",{onClick:b,disabled:a||!r,className:"flex items-center gap-2 bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded transition-colors disabled:bg-zinc-600 disabled:cursor-not-allowed",children:[m.jsx(JP,{className:"w-5 h-5"}),a?"Saving...":"Save Cropped Image"]})]})]})},VL={name:"",level:0,school:"Evocation",castingTime:"1 Action",range:"60 feet",components:"V, S",duration:"Instantaneous",description:""},zL=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=H.useState(t),a=(h,u)=>{i(d=>({...d,[h]:u}))},s=h=>{h.preventDefault(),r.name.trim()&&e(r)},o=["Abjuration","Conjuration","Divination","Enchantment","Evocation","Illusion","Necromancy","Transmutation"],l="w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent";return m.jsxs("form",{onSubmit:s,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-6",children:[m.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Spell":"Add New Spell"}),m.jsx("input",{type:"text",placeholder:"Spell Name",value:r.name,onChange:h=>a("name",h.target.value),required:!0,className:l}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[m.jsx("input",{type:"number",placeholder:"Level",value:r.level,onChange:h=>a("level",parseInt(h.target.value)),min:"0",max:"9",className:l}),m.jsx("select",{value:r.school,onChange:h=>a("school",h.target.value),className:l,children:o.map(h=>m.jsx("option",{value:h,children:h},h))})]}),m.jsx("textarea",{placeholder:"Description",value:r.description,onChange:h=>a("description",h.target.value),rows:4,className:`${l} resize-y`}),m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition",children:"Cancel"}),m.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition",children:"Save Spell"})]})]})},BL=({spell:t,onEdit:e,onDelete:n,onToggleExpand:r,isExpanded:i})=>m.jsxs("div",{className:"bg-card/50 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-3",onClick:r,children:[m.jsx("h4",{className:"font-bold text-accent",children:t.name}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("span",{className:"text-sm text-muted-foreground capitalize",children:t.school}),m.jsx("button",{onClick:a=>{a.stopPropagation(),e()},className:"text-muted-foreground hover:text-accent p-1",children:m.jsx(Ks,{className:"w-4 h-4"})}),m.jsx("button",{onClick:a=>{a.stopPropagation(),n()},className:"text-muted-foreground hover:text-destructive p-1",children:m.jsx(Qs,{className:"w-4 h-4"})})]})]}),i&&m.jsxs("div",{className:"mt-2 pt-3 border-t border-border/50 space-y-2 text-sm p-3 bg-muted/30",children:[m.jsxs("p",{children:[m.jsx("strong",{className:"text-muted-foreground",children:"Casting Time:"})," ",t.castingTime]}),m.jsxs("p",{children:[m.jsx("strong",{className:"text-muted-foreground",children:"Range:"})," ",t.range]}),m.jsxs("p",{children:[m.jsx("strong",{className:"text-muted-foreground",children:"Components:"})," ",t.components]}),m.jsxs("p",{children:[m.jsx("strong",{className:"text-muted-foreground",children:"Duration:"})," ",t.duration]}),m.jsx("p",{className:"text-foreground mt-2 whitespace-pre-wrap",children:t.description})]})]}),FL=()=>{const{character:t,updateCharacter:e}=On(),[n,r]=H.useState(null),[i,a]=H.useState({});if(!t)return null;const s=d=>{let f;if("id"in d)f=t.spells.map(p=>p.id===d.id?d:p);else{const p={...d,id:`spell_${Date.now()}`};f=[...t.spells,p]}e({spells:f}),r(null)},o=d=>{if(window.confirm("Are you sure you want to delete this spell?")){const f=t.spells.filter(p=>p.id!==d);e({spells:f})}},l=d=>{a(f=>({...f,[d]:!f[d]}))},h=H.useMemo(()=>t.spells.reduce((d,f)=>(d[f.level]=[...d[f.level]||[],f],d[f.level].sort((p,b)=>p.name.localeCompare(b.name)),d),{}),[t.spells]),u=Object.keys(h).map(Number).sort((d,f)=>d-f);return m.jsxs("div",{className:"bg-card/80 p-4 rounded-lg border border-border flex flex-col h-full",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Spellbook"}),m.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[m.jsx(ju,{className:"w-5 h-5"})," Add Spell"]})]}),n&&m.jsx(zL,{initialData:n==="new"?VL:n,onSave:s,onCancel:()=>r(null)}),m.jsxs("div",{className:"space-y-6 overflow-y-auto pr-2 -mr-2",children:[t.spells.length===0&&!n&&m.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"This character knows no spells. Add one to get started!"}),u.map(d=>m.jsxs("div",{children:[m.jsx("h4",{className:"text-xl font-serif text-foreground border-b border-border pb-1 mb-3",children:d===0?"Cantrips":`Level ${d}`}),m.jsx("div",{className:"space-y-3",children:h[d].map(f=>m.jsx(BL,{spell:f,isExpanded:!!i[f.id],onToggleExpand:()=>l(f.id),onEdit:()=>r(f),onDelete:()=>o(f.id)},f.id))})]},d))]})]})},HL={name:"",description:""},qL=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=H.useState(t),a=(o,l)=>{i(h=>({...h,[o]:l}))},s=o=>{o.preventDefault(),r.name.trim()&&e(r)};return m.jsxs("form",{onSubmit:s,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-4",children:[m.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Feature":"Add New Feature"}),m.jsx("input",{type:"text",placeholder:"Feature or Trait Name",value:r.name,onChange:o=>a("name",o.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent"}),m.jsx("textarea",{placeholder:"Description",value:r.description,onChange:o=>a("description",o.target.value),rows:4,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent resize-y"}),m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition",children:"Cancel"}),m.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition",children:"Save Feature"})]})]})},GL=()=>{const{character:t,updateCharacter:e}=On(),[n,r]=H.useState(null),[i,a]=H.useState({});if(!t)return null;const s=u=>{let d;if("id"in u)d=t.featuresAndTraits.map(f=>f.id===u.id?u:f);else{const f={...u,id:`feat_${Date.now()}`};d=[...t.featuresAndTraits,f]}e({featuresAndTraits:d}),r(null)},o=u=>{if(window.confirm("Are you sure you want to delete this feature?")){const d=t.featuresAndTraits.filter(f=>f.id!==u);e({featuresAndTraits:d})}},l=u=>{a(d=>({...d,[u]:!d[u]}))},h=H.useMemo(()=>[...t.featuresAndTraits].sort((u,d)=>u.name.localeCompare(d.name)),[t.featuresAndTraits]);return m.jsxs("div",{className:"bg-card/80 p-4 rounded-lg border border-border flex flex-col h-full",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Features & Traits"}),m.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[m.jsx(ju,{className:"w-5 h-5"})," Add Feature"]})]}),n&&m.jsx(qL,{initialData:n==="new"?HL:n,onSave:s,onCancel:()=>r(null)}),m.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[h.length===0&&!n&&m.jsx("div",{className:"flex items-center justify-center h-full",children:m.jsx("p",{className:"text-center text-muted-foreground text-sm py-4",children:"No features or traits have been added."})}),h.map(u=>m.jsxs("div",{className:"bg-card/50 rounded-lg text-sm",children:[m.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer",onClick:()=>l(u.id),children:[m.jsx("span",{className:"font-semibold text-accent",children:u.name}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:d=>{d.stopPropagation(),r(u)},className:"text-muted-foreground hover:text-accent p-1",children:m.jsx(Ks,{className:"w-4 h-4"})}),m.jsx("button",{onClick:d=>{d.stopPropagation(),o(u.id)},className:"text-muted-foreground hover:text-destructive p-1",children:m.jsx(Qs,{className:"w-4 h-4"})})]})]}),i[u.id]&&m.jsx("div",{className:"p-3 border-t border-border/50 bg-muted/30",children:m.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:u.description})})]},u.id))]})]})},$L={name:"",quantity:1,description:"",equipped:!1},YL=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=H.useState(t),a=(h,u)=>{i(d=>({...d,[h]:u}))},s=h=>{h.preventDefault(),r.name.trim()&&e(r)},o="w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent text-sm",l="block text-xs font-medium text-muted-foreground mb-1";return m.jsxs("form",{onSubmit:s,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-4",children:[m.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Item":"Add New Item"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{htmlFor:"name",className:l,children:"Item Name"}),m.jsx("input",{id:"name",type:"text",placeholder:"e.g., Longsword",value:r.name,onChange:h=>a("name",h.target.value),required:!0,className:o})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"quantity",className:l,children:"Quantity"}),m.jsx("input",{id:"quantity",type:"number",value:r.quantity,onChange:h=>a("quantity",parseInt(h.target.value)||1),min:"1",className:`${o} text-center`})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"description",className:l,children:"Description"}),m.jsx("textarea",{id:"description",value:r.description,onChange:h=>a("description",h.target.value),className:o,rows:3})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"armorType",className:l,children:"Armor Type"}),m.jsxs("select",{id:"armorType",value:r.armorType||"",onChange:h=>a("armorType",h.target.value||void 0),className:o,children:[m.jsx("option",{value:"",children:"Not Armor"}),m.jsx("option",{value:"light",children:"Light Armor"}),m.jsx("option",{value:"medium",children:"Medium Armor"}),m.jsx("option",{value:"heavy",children:"Heavy Armor"}),m.jsx("option",{value:"shield",children:"Shield"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"armorClass",className:l,children:"Armor Class (AC)"}),m.jsx("input",{id:"armorClass",type:"number",placeholder:"e.g., 14",value:r.armorClass||"",onChange:h=>a("armorClass",parseInt(h.target.value)||void 0),className:o})]})]}),m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition text-sm",children:"Cancel"}),m.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition text-sm",children:"Save Item"})]})]})},kw=({title:t,items:e,expandedItem:n,onToggleExpand:r,onEdit:i,onDelete:a})=>m.jsxs("div",{children:[m.jsx("h4",{className:"text-base font-semibold text-foreground border-b border-border pb-2 mb-3",children:t}),m.jsxs("div",{className:"space-y-2",children:[e.length===0&&m.jsx("p",{className:"text-center text-muted-foreground text-xs py-2",children:"Empty"}),e.map(s=>m.jsxs("div",{className:"bg-card/50 rounded-lg text-sm",children:[m.jsxs("div",{className:"p-3 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[m.jsx("button",{onClick:()=>r(s.id),className:"flex-shrink-0 text-muted-foreground hover:text-foreground",children:m.jsx(oR,{className:`w-5 h-5 transition-transform ${n===s.id?"rotate-180":""}`})}),m.jsxs("p",{className:"font-semibold text-accent truncate",title:s.name,children:[s.name," ",m.jsxs("span",{className:"text-xs text-muted-foreground",children:["(x",s.quantity,")"]})]})]}),m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[m.jsx("button",{onClick:()=>i(s),className:"text-muted-foreground hover:text-accent p-1",children:m.jsx(Ks,{className:"w-4 h-4"})}),m.jsx("button",{onClick:()=>a(s.id),className:"text-muted-foreground hover:text-destructive p-1",children:m.jsx(Qs,{className:"w-4 h-4"})})]})]}),n===s.id&&m.jsxs("div",{className:"p-3 border-t border-border/50 bg-muted/30 space-y-2",children:[s.armorType&&m.jsxs("p",{children:[m.jsxs("strong",{className:"text-muted-foreground capitalize",children:[s.armorType," Armor"]}),s.armorClass?m.jsxs("span",{className:"text-foreground",children:[" (AC: ",s.armorClass,")"]}):""]}),m.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:s.description||"No description."})]})]},s.id))]})]}),XL=()=>{const{character:t,updateCharacter:e}=On(),[n,r]=H.useState(null),[i,a]=H.useState(null),s=d=>{let f;if("id"in d)f=(t.equipment||[]).map(p=>p.id===d.id?d:p);else{const p={...d,id:`item_${Date.now()}`};f=[...t.equipment||[],p]}e({equipment:f}),r(null)},o=d=>{if(window.confirm("Are you sure you want to delete this item?")){const f=(t.equipment||[]).filter(p=>p.id!==d);e({equipment:f})}},l=d=>{a(f=>f===d?null:d)},{equippableItems:h,backpackItems:u}=H.useMemo(()=>{const d=[],f=[];return(t.equipment||[]).forEach(p=>{p.armorType?d.push(p):f.push(p)}),{equippableItems:d.sort((p,b)=>p.name.localeCompare(b.name)),backpackItems:f.sort((p,b)=>p.name.localeCompare(b.name))}},[t.equipment]);return m.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Inventory"}),m.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[m.jsx(ju,{className:"w-5 h-5"})," Add Item"]})]}),n&&m.jsx(YL,{initialData:n==="new"?$L:n,onSave:s,onCancel:()=>r(null)}),m.jsxs("div",{className:"space-y-6",children:[m.jsx(kw,{title:"Equippable Gear",items:h,expandedItem:i,onToggleExpand:l,onEdit:r,onDelete:o}),m.jsx(kw,{title:"Backpack",items:u,expandedItem:i,onToggleExpand:l,onEdit:r,onDelete:o})]})]})},QL={name:"",bonus:"+0",damage:"1d4"},KL=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=H.useState(t),a=(o,l)=>{i(h=>({...h,[o]:l}))},s=o=>{o.preventDefault(),r.name.trim()&&e(r)};return m.jsxs("form",{onSubmit:s,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-4",children:[m.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Attack":"Add New Attack"}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[m.jsx("input",{type:"text",placeholder:"Attack Name",value:r.name,onChange:o=>a("name",o.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent sm:col-span-1"}),m.jsx("input",{type:"text",placeholder:"e.g. +5",value:r.bonus,onChange:o=>a("bonus",o.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent text-center"}),m.jsx("input",{type:"text",placeholder:"e.g. (2d6)+(1d4)+3",value:r.damage,onChange:o=>a("damage",o.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent text-center"})]}),m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition",children:"Cancel"}),m.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition",children:"Save Attack"})]})]})},WL=()=>{const{character:t,updateCharacter:e}=On(),[n,r]=H.useState(null);if(!t)return null;const i=o=>{let l;if("id"in o)l=t.attacks.map(h=>h.id===o.id?o:h);else{const h={...o,id:`attack_${Date.now()}`};l=[...t.attacks,h]}e({attacks:l}),r(null)},a=o=>{if(window.confirm("Are you sure you want to delete this attack?")){const l=t.attacks.filter(h=>h.id!==o);e({attacks:l})}},s=H.useMemo(()=>[...t.attacks||[]].sort((o,l)=>o.name.localeCompare(l.name)),[t.attacks]);return m.jsxs("div",{className:"bg-card/80 p-4 rounded-lg border border-border flex flex-col h-full",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Attacks & Cantrips"}),m.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[m.jsx(ju,{className:"w-5 h-5"})," Add Attack"]})]}),n&&m.jsx(KL,{initialData:n==="new"?QL:n,onSave:i,onCancel:()=>r(null)}),m.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[s.length===0&&!n&&m.jsx("div",{className:"flex items-center justify-center h-full",children:m.jsx("p",{className:"text-center text-muted-foreground text-sm py-4",children:"No attacks have been defined."})}),s.map(o=>m.jsx("div",{className:"bg-card/50 rounded-lg text-sm",children:m.jsxs("div",{className:"grid grid-cols-6 items-center p-3",children:[m.jsx("span",{className:"font-semibold text-accent col-span-3",children:o.name}),m.jsx("span",{className:"font-mono text-foreground col-span-1 text-center",children:o.bonus}),m.jsx("span",{className:"font-mono text-foreground col-span-1 text-center",children:o.damage}),m.jsxs("div",{className:"flex items-center gap-2 justify-end col-span-1",children:[m.jsx("button",{onClick:()=>r(o),className:"text-muted-foreground hover:text-accent p-1",children:m.jsx(Ks,{className:"w-4 h-4"})}),m.jsx("button",{onClick:()=>a(o.id),className:"text-muted-foreground hover:text-destructive p-1",children:m.jsx(Qs,{className:"w-4 h-4"})})]})]})},o.id))]})]})},ZL={name:"",max:1},JL=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=H.useState(t),a=(o,l)=>{i(h=>({...h,[o]:l}))},s=o=>{o.preventDefault(),r.name.trim()&&e(r)};return m.jsxs("form",{onSubmit:s,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-4",children:[m.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Resource":"Add New Resource"}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[m.jsx("input",{type:"text",placeholder:"Resource Name",value:r.name,onChange:o=>a("name",o.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent sm:col-span-2"}),m.jsx("input",{type:"number",placeholder:"Max",value:r.max,onChange:o=>a("max",parseInt(o.target.value)||1),min:"1",className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent text-center"})]}),m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition",children:"Cancel"}),m.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition",children:"Save"})]})]})},e9=({character:t,onUpdateCharacter:e})=>{const[n,r]=H.useState(null),i=s=>{let o;if("id"in s)o=(t.customResources||[]).map(l=>l.id===s.id?{...l,name:s.name,max:s.max}:l);else{const l={...s,id:`resource_${Date.now()}`,used:0};o=[...t.customResources||[],l]}e({customResources:o}),r(null)},a=s=>{if(window.confirm("Are you sure you want to delete this resource?")){const o=(t.customResources||[]).filter(l=>l.id!==s);e({customResources:o})}};return m.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Other Resources"}),m.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[m.jsx(ju,{className:"w-5 h-5"})," Add Resource"]})]}),n&&m.jsx(JL,{initialData:n==="new"?ZL:n,onSave:i,onCancel:()=>r(null)}),m.jsxs("div",{className:"space-y-2",children:[(t.customResources||[]).length===0&&!n&&m.jsx("p",{className:"text-center text-muted-foreground text-sm py-4",children:"No custom resources defined."}),(t.customResources||[]).map(s=>m.jsxs("div",{className:"bg-card/50 rounded-lg text-sm p-3 flex items-center justify-between",children:[m.jsx("span",{className:"font-semibold text-accent",children:s.name}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("span",{className:"text-muted-foreground",children:["Max: ",s.max]}),m.jsx("button",{onClick:()=>r(s),className:"text-muted-foreground hover:text-accent p-1",children:m.jsx(Ks,{className:"w-4 h-4"})}),m.jsx("button",{onClick:()=>a(s.id),className:"text-muted-foreground hover:text-destructive p-1",children:m.jsx(Qs,{className:"w-4 h-4"})})]})]},s.id))]})]})},Lr=({label:t,value:e,subValue:n,className:r})=>m.jsxs("div",{className:`flex flex-col items-center justify-center p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-center ${r}`,children:[m.jsx("span",{className:"text-2xl sm:text-3xl font-bold font-mono text-white",children:e}),m.jsx("span",{className:"text-xs uppercase tracking-wider text-zinc-400 mt-1",children:t}),n&&m.jsx("span",{className:"text-xs text-zinc-500",children:n})]}),$o=t=>Math.floor((t-10)/2),Ti=t=>t>=0?`+${t}`:String(t),rp=["strength","dexterity","constitution","intelligence","wisdom","charisma"],t9=({label:t,isActive:e,onClick:n,controls:r,id:i})=>m.jsx("button",{id:i,role:"tab","aria-selected":e,"aria-controls":r,onClick:n,className:`px-3 py-2 text-sm font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-card text-accent border-b-2 border-accent":"text-muted-foreground hover:bg-muted border-b-2 border-transparent"}`,children:t}),Wr=({label:t,name:e,type:n,value:r,onChange:i,placeholder:a,className:s})=>m.jsxs("div",{className:s,children:[m.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-muted-foreground capitalize",children:t}),m.jsx("input",{type:n,id:e,name:e,value:r,onChange:i,placeholder:a,className:"mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent sm:text-sm"})]}),ao=({label:t,name:e,value:n,onChange:r,placeholder:i})=>m.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col",children:[m.jsx("h3",{className:"text-lg font-semibold text-accent mb-2",children:t}),m.jsx("textarea",{name:e,value:n,onChange:r,className:"w-full bg-input border border-border rounded-md p-3 text-foreground focus:ring-ring focus:border-accent resize-y flex-grow min-h-[100px]",placeholder:i||`Your character's ${t.toLowerCase()}...`})]}),n9=[{key:"main",label:"Main"},{key:"stats",label:"Stats & Skills"},{key:"combat",label:"Combat & Features"},{key:"bio",label:"Biography & Notes"},{key:"inventory",label:"Inventory"},{key:"spells",label:"Spells"}],jw=()=>{var re;const{characterId:t}=QT(),e=El(),{character:n,setCharacter:r,updateCharacter:i,deleteCharacter:a,saveCharacter:s}=On(),[o,l]=H.useState(!1),[h,u]=H.useState(!1),[d,f]=H.useState(""),[p,b]=H.useState("main"),[A,D]=H.useState(!1),w=window.location.pathname.endsWith("/character/new");H.useEffect(()=>{let V=!0;return(async()=>{let $;t?$=await tR(t):$={...Ls(),id:"temp_new"};const Y={...Ls(),...$};V&&r(Y)})(),()=>{V=!1}},[t,r]);const T=H.useMemo(()=>n?Math.ceil(n.level/4)+1:0,[n==null?void 0:n.level]),N=async()=>{if(n){l(!0);try{const V=w?`char_${Date.now()}`:n.id,K={...n,id:V,proficiencyBonus:T,initiative:q,lastUpdated:Date.now()},$=await s(K);e(`/character/${$.id}`,{replace:w})}catch(V){console.error("Failed to save character:",V),alert("An error occurred while saving. Please try again.")}finally{l(!1)}}},O=async()=>{if(n&&!w&&window.confirm(`Are you sure you want to permanently delete ${n.name}?`))try{await a(n.id),e("/")}catch(V){console.error("Failed to delete character:",V),alert("An error occurred while deleting the character.")}},P=()=>{e(w?"/":n?`/character/${n.id}`:-1)},R=V=>{if(!n)return;const{name:K,value:$,type:Y}=V.target;let le=$;Y==="number"&&(le=parseInt($)||0),i({[K]:le})},_=(V,K)=>{n&&r($=>({...$,currency:{...$.currency,[V]:K}}))},g=(V,K)=>{n&&r($=>({...$,hp:{...$.hp,[V]:K}}))},y=V=>{if(!n)return;const{value:K}=V.target;r($=>({...$,hitDice:{...$.hitDice,total:K}}))},x=(V,K)=>{n&&r($=>({...$,abilityScores:{...$.abilityScores,[V]:K}}))},C=V=>{if(!n)return;const K={...n.savingThrows};K[V].proficient=!K[V].proficient,r($=>({...$,savingThrows:K}))},I=V=>{if(!n)return;const K=n.skills.map($=>{if($.name===V){const Y=!$.proficient,le=Y?$.expertise:!1;return{...$,proficient:Y,expertise:le}}return $});r($=>({...$,skills:K}))},S=V=>{if(!n)return;const K=n.skills.map($=>{if($.name===V){const Y=!$.expertise,le=Y||$.proficient;return{...$,proficient:le,expertise:Y}}return $});r($=>({...$,skills:K}))},U=V=>{var $;if(!n)return;const K=parseInt(V.target.value,10)||0;i({unarmoredDefense:{base:K,abilities:(($=n.unarmoredDefense)==null?void 0:$.abilities)||[]}})},z=V=>{var Y,le;if(!n)return;const K=((Y=n.unarmoredDefense)==null?void 0:Y.abilities)||[],$=K.includes(V)?K.filter(xe=>xe!==V):[...K,V];i({unarmoredDefense:{base:((le=n.unarmoredDefense)==null?void 0:le.base)??10,abilities:$}})},k=(V,K)=>{if(!n)return;const $={...n.spellSlots};$[V]={...$[V],max:K},r(Y=>({...Y,spellSlots:$}))},M=async()=>{if(!n)return;u(!0);const V=await GU(n,d);r(K=>({...K,...V})),u(!1)},q=H.useMemo(()=>n?$o(n.abilityScores.dexterity):0,[n==null?void 0:n.abilityScores.dexterity]),{spellSaveDC:B,spellAttackBonus:X}=H.useMemo(()=>{if(!n||!n.spellcastingAbility)return{spellSaveDC:"-",spellAttackBonus:"-"};const V=$o(n.abilityScores[n.spellcastingAbility]);return{spellSaveDC:8+T+V,spellAttackBonus:Ti(T+V)}},[n==null?void 0:n.spellcastingAbility,n==null?void 0:n.abilityScores,T]);return n?m.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:pt-8",children:[m.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[m.jsxs("button",{onClick:P,className:"flex items-center gap-2 rounded-md px-3 py-2 font-semibold text-muted-foreground transition-all duration-200 hover:scale-105 hover:text-accent [text-shadow:0_1px_2px_rgba(0,0,0,0.3)] self-start","aria-label":w?"Cancel Creation":"Back to Play View",children:[m.jsx(sR,{className:"w-5 h-5"}),m.jsx("span",{children:w?"Cancel Creation":"Back to Play"})]}),m.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-center",children:[!w&&m.jsxs("button",{onClick:O,className:"flex items-center gap-2 rounded-md px-3 py-2 font-semibold text-destructive transition-all duration-200 hover:scale-105 hover:text-accent [text-shadow:0_1px_2px_rgba(0,0,0,0.3)]","aria-label":"Delete Character",children:[m.jsx(Qs,{className:"w-4 h-4"}),m.jsx("span",{className:"hidden sm:inline",children:"Delete"})]}),m.jsxs("button",{onClick:N,disabled:o,className:"flex items-center gap-2 rounded-md px-3 py-2 font-bold text-primary transition-all duration-200 hover:scale-105 hover:text-accent [text-shadow:0_1px_2px_rgba(0,0,0,0.3)] disabled:text-muted-foreground/60 disabled:scale-100 disabled:cursor-not-allowed disabled:[text-shadow:none]",children:[m.jsx(tU,{className:"w-5 h-5"}),m.jsx("span",{className:"hidden sm:inline",children:o?"Saving...":"Save Changes"}),m.jsx("span",{className:"sm:hidden",children:o?"...":"Save"})]})]})]}),m.jsxs("div",{className:"bg-card border border-border shadow-lg shadow-accent/5 rounded-lg p-4 sm:p-6",children:[m.jsx("div",{role:"tablist","aria-label":"Character Sheet Sections",className:"flex space-x-1 mb-6 border-b border-border overflow-x-auto",children:n9.map(V=>m.jsx(t9,{id:`tab-${V.key}`,label:V.label,isActive:p===V.key,onClick:()=>b(V.key),controls:`panel-${V.key}`},V.key))}),m.jsx("div",{id:"panel-main",role:"tabpanel","aria-labelledby":"tab-main",hidden:p!=="main",children:m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[m.jsx("div",{className:"space-y-6",children:m.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-muted-foreground",children:"Character Portrait"}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("span",{className:"inline-block h-24 w-24 rounded-lg overflow-hidden bg-muted",children:n.imageUrl?m.jsx("img",{src:n.imageUrl,alt:"Character portrait",className:"h-full w-full object-cover"}):m.jsx(a0,{className:"h-full w-full text-muted-foreground p-4"})}),m.jsx("button",{type:"button",onClick:()=>D(!0),disabled:w,className:"cursor-pointer rounded-md bg-secondary px-3 py-2 text-sm font-semibold text-secondary-foreground shadow-sm hover:bg-secondary/80 transition-colors disabled:bg-muted disabled:text-muted-foreground disabled:cursor-not-allowed",children:"Change"})]}),w&&m.jsx("p",{className:"text-xs text-muted-foreground",children:"Save the character to enable the image uploader."})]}),m.jsx(Wr,{label:"Character Name",name:"name",type:"text",value:n.name,onChange:R,placeholder:"e.g., Eldrin"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsx(Wr,{label:"Class",name:"class",type:"text",value:n.class,onChange:R,placeholder:"e.g., Wizard"}),m.jsx(Wr,{label:"Subclass",name:"subclass",type:"text",value:n.subclass,onChange:R,placeholder:"e.g., School of Evocation"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsx(Wr,{label:"Race",name:"race",type:"text",value:n.race,onChange:R,placeholder:"e.g., High-Elf"}),m.jsx(Wr,{label:"Background",name:"background",type:"text",value:n.background,onChange:R,placeholder:"e.g., Sage"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsx(Wr,{label:"Alignment",name:"alignment",type:"text",value:n.alignment,onChange:R,placeholder:"e.g., Chaotic Good"}),m.jsx(Wr,{label:"Level",name:"level",type:"number",value:n.level,onChange:R})]}),m.jsx(Wr,{label:"Languages",name:"languages",type:"text",value:n.languages,onChange:R,placeholder:"e.g., Common, Elvish"})]})}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Hit Points"}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"hp-current",className:"block text-xs font-medium text-muted-foreground text-center",children:"Current"}),m.jsx("input",{id:"hp-current",type:"number",value:n.hp.current,onChange:V=>g("current",parseInt(V.target.value)||0),className:"mt-1 w-full bg-input border border-border rounded-md py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"hp-max",className:"block text-xs font-medium text-muted-foreground text-center",children:"Max"}),m.jsx("input",{id:"hp-max",type:"number",value:n.hp.max,onChange:V=>g("max",parseInt(V.target.value)||0),className:"mt-1 w-full bg-input border border-border rounded-md py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"hp-temporary",className:"block text-xs font-medium text-muted-foreground text-center",children:"Temporary"}),m.jsx("input",{id:"hp-temporary",type:"number",value:n.hp.temporary,onChange:V=>g("temporary",parseInt(V.target.value)||0),className:"mt-1 w-full bg-input border border-border rounded-md py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]})]})]}),m.jsx(Wr,{label:"Hit Dice",name:"hitDice",type:"text",value:n.hitDice.total,onChange:y,placeholder:"e.g. 1d8"})]}),m.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-2",children:[m.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Unarmored Defense"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx("input",{id:"unarmoredBase",type:"number",name:"unarmoredBase",value:((re=n.unarmoredDefense)==null?void 0:re.base)??10,onChange:U,className:"w-24 bg-input border border-border rounded-md py-1 px-2 text-foreground text-center focus:outline-none focus:ring-ring focus:border-accent","aria-label":"Base Armor Class"}),m.jsx("label",{htmlFor:"unarmoredBase",className:"text-xs text-muted-foreground mt-1",children:"Base AC"})]}),m.jsx("span",{className:"text-xl text-muted-foreground",children:" + "}),m.jsx("div",{className:"flex-1",children:m.jsx("div",{className:"grid grid-cols-3 gap-2",children:rp.map(V=>{var K;return m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx("input",{type:"checkbox",id:`unarmored-${V}`,checked:(K=n.unarmoredDefense)==null?void 0:K.abilities.includes(V),onChange:()=>z(V),className:"w-4 h-4 rounded-full text-primary bg-input border-border focus:ring-ring cursor-pointer"}),m.jsx("label",{htmlFor:`unarmored-${V}`,className:"text-xs text-muted-foreground mt-1 uppercase",children:V.substring(0,3)})]},V)})})})]})]})]}),m.jsx("div",{className:"space-y-6",children:m.jsxs("div",{className:"p-4 border border-border rounded-lg grid grid-cols-2 gap-4",children:[m.jsx(Lr,{label:"Initiative",value:Ti(q)}),m.jsx(Wr,{label:"Speed",name:"speed",type:"number",value:n.speed,onChange:R}),m.jsx(Lr,{label:"Proficiency",value:Ti(T)}),m.jsxs("div",{className:"col-span-2",children:[m.jsx("label",{htmlFor:"spellcastingAbility",className:"block text-sm font-medium text-muted-foreground",children:"Spellcasting Ability"}),m.jsxs("select",{id:"spellcastingAbility",name:"spellcastingAbility",value:n.spellcastingAbility,onChange:R,className:"mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent sm:text-sm",children:[m.jsx("option",{value:"",children:"None"}),rp.map(V=>m.jsx("option",{value:V,className:"capitalize",children:V},V))]})]}),m.jsx(Lr,{label:"Spell Save DC",value:String(B)}),m.jsx(Lr,{label:"Spell Attack",value:String(X)})]})})]})}),m.jsx("div",{id:"panel-stats",role:"tabpanel","aria-labelledby":"tab-stats",hidden:p!=="stats",children:m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:rp.map(V=>{const K=n.abilityScores[V],$=$o(K),Y=n.savingThrows[V],le=$+(Y.proficient?T:0),xe=n.skills.filter(me=>me.ability===V);return m.jsxs("div",{className:"bg-card p-3 rounded-lg flex flex-col gap-3 border border-border",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("div",{className:"flex flex-col items-center justify-center bg-muted p-2 rounded-lg w-20",children:[m.jsx("span",{className:"text-3xl font-bold font-mono text-foreground",children:Ti($)}),m.jsx("span",{className:"text-xs uppercase tracking-wider text-muted-foreground",children:V.substring(0,3)})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"text-xl font-cinzel text-accent capitalize",children:V}),m.jsx("input",{type:"number",value:K,onChange:me=>x(V,parseInt(me.target.value)||0),className:"w-full bg-input text-center text-lg rounded border border-border p-1 focus:ring-ring","aria-label":`${V} score`})]})]}),m.jsxs("div",{className:"bg-muted/60 p-2 rounded-md space-y-2",children:[m.jsxs("label",{htmlFor:`saving-throw-${V}`,className:"flex items-center justify-between cursor-pointer text-sm",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"checkbox",id:`saving-throw-${V}`,checked:Y.proficient,onChange:()=>C(V),className:"w-4 h-4 rounded-full text-primary bg-input border-border focus:ring-ring"}),m.jsx("span",{className:"text-foreground",children:"Saving Throw"})]}),m.jsx("span",{className:"font-mono font-bold text-lg text-foreground",children:Ti(le)})]}),xe.map(me=>{const De=$+(me.proficient?T:0)+(me.expertise?T:0);return m.jsxs("div",{className:"flex items-center justify-between text-sm",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"checkbox",id:`skill-prof-${me.name}`,checked:me.proficient,onChange:()=>I(me.name),className:"w-4 h-4 rounded-full text-primary bg-input border-border focus:ring-ring cursor-pointer"}),m.jsx("input",{type:"checkbox",id:`skill-exp-${me.name}`,checked:me.expertise,onChange:()=>S(me.name),className:"w-4 h-4 rounded-sm text-accent bg-input border-border focus:ring-ring cursor-pointer",title:"Expertise"}),m.jsx("label",{htmlFor:`skill-prof-${me.name}`,className:"cursor-pointer text-foreground",children:me.name})]}),m.jsx("span",{className:"font-mono font-bold text-lg text-foreground",children:Ti(De)})]},me.name)})]})]},V)})})}),m.jsx("div",{id:"panel-combat",role:"tabpanel","aria-labelledby":"tab-combat",hidden:p!=="combat",className:"min-h-[60vh]",children:m.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-full",children:[m.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col p-4 border border-border rounded-lg",children:m.jsx(WL,{})}),m.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col p-4 border border-border rounded-lg",children:m.jsx(GL,{})})]})}),m.jsx("div",{id:"panel-bio",role:"tabpanel","aria-labelledby":"tab-bio",hidden:p!=="bio",className:"min-h-[60vh]",children:m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"flex flex-col gap-6",children:[m.jsx(ao,{label:"Personality Traits",name:"personalityTraits",value:n.personalityTraits,onChange:R}),m.jsx(ao,{label:"Ideals",name:"ideals",value:n.ideals,onChange:R}),m.jsx(ao,{label:"Bonds",name:"bonds",value:n.bonds,onChange:R}),m.jsx(ao,{label:"Flaws",name:"flaws",value:n.flaws,onChange:R})]}),m.jsxs("div",{className:"flex flex-col gap-6",children:[m.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col",children:[m.jsx("h3",{className:"text-lg font-semibold text-accent mb-2",children:"AI Personality Generator"}),m.jsx("input",{type:"text",placeholder:"Optional: Add a keyword (e.g., 'tragic', 'grew up an orphan')",value:d,onChange:V=>f(V.target.value),className:"w-full bg-input border border-border rounded-md p-2 text-sm mb-2 focus:ring-ring focus:border-accent"}),m.jsxs("button",{onClick:M,disabled:h,className:"flex w-full justify-center items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition disabled:bg-muted disabled:text-muted-foreground",children:[m.jsx(eU,{className:"w-4 h-4"}),h?"Generating...":"Generate with AI"]})]}),m.jsx(ao,{label:"Notes",name:"notes",value:n.notes,onChange:R,placeholder:"Campaign notes, important NPCs, etc."}),m.jsx(ao,{label:"DM Notes",name:"dmNotes",value:n.dmNotes,onChange:R,placeholder:"Notes from your DM, or secrets your character knows."})]})]})}),m.jsx("div",{id:"panel-inventory",role:"tabpanel","aria-labelledby":"tab-inventory",hidden:p!=="inventory",className:"min-h-[60vh]",children:m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"lg:col-span-1",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent mb-4",children:"Currency"}),m.jsx("div",{className:"bg-muted/50 p-4 rounded-lg grid grid-cols-3 sm:grid-cols-5 gap-3 border border-border",children:Object.entries(n.currency).map(([V,K])=>m.jsxs("div",{children:[m.jsx("label",{className:"block text-center text-sm font-medium text-muted-foreground uppercase",children:V}),m.jsx("input",{type:"number",value:K,onChange:$=>_(V,parseInt($.target.value,10)||0),className:"mt-1 block w-full bg-input border border-border rounded-md py-1 px-2 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]},V))})]}),m.jsx("div",{className:"lg:col-span-2 p-4 border border-border rounded-lg",children:m.jsx(XL,{})})]})}),m.jsxs("div",{id:"panel-spells",role:"tabpanel","aria-labelledby":"tab-spells",hidden:p!=="spells",className:"min-h-[60vh] space-y-6",children:[m.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg border border-border",children:[m.jsx("h4",{className:"text-lg font-cinzel text-accent mb-3",children:"Maximum Spell Slots"}),m.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-5 md:grid-cols-9 gap-3",children:Array.from({length:9},(V,K)=>K+1).map(V=>{var K;return m.jsxs("div",{children:[m.jsxs("label",{className:"block text-center text-sm font-medium text-muted-foreground",children:["Lvl ",V]}),m.jsx("input",{type:"number",min:"0",value:((K=n.spellSlots[V])==null?void 0:K.max)??0,onChange:$=>k(V,parseInt($.target.value,10)||0),className:"mt-1 block w-full bg-input border border-border rounded-md py-1 px-2 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]},V)})})]}),m.jsx("div",{className:"p-4 border border-border rounded-lg",children:m.jsx(e9,{character:n,onUpdateCharacter:i})}),m.jsx("div",{className:"p-4 border border-border rounded-lg",children:m.jsx(FL,{})})]})]}),m.jsx(LL,{isOpen:A,onClose:()=>D(!1),onImageReady:V=>i({imageUrl:V})})]}):m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-accent"})})},r9=t=>Math.floor((t-10)/2),ip=t=>t>=0?`+${t}`:String(t),i9=["strength","dexterity","constitution","intelligence","wisdom","charisma"],a9=()=>{const{character:t}=On();if(!t)return null;const{proficiencyBonus:e,abilityScores:n,savingThrows:r,skills:i}=t;return m.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3 text-center",children:"Abilities"}),m.jsx("div",{className:"space-y-3",children:i9.map(a=>{const s=n[a],o=r9(s),l=r[a],h=o+(l.proficient?e:0),u=i.filter(d=>d.ability===a);return m.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg border border-border/50",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("h4",{className:"text-lg font-cinzel text-accent capitalize",children:a}),m.jsxs("div",{className:"flex items-baseline gap-2",children:[m.jsx("span",{className:"text-3xl font-mono text-foreground font-bold",children:s}),m.jsxs("span",{className:"text-2xl font-mono text-accent font-bold",children:["(",ip(o),")"]})]})]}),m.jsxs("div",{className:"bg-muted/60 p-2 rounded-md space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between text-sm text-foreground",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:`w-3 h-3 rounded-full border-2 transition-colors ${l.proficient?"bg-primary border-primary":"bg-transparent border-border"}`}),m.jsx("span",{children:"Saving Throw"})]}),m.jsx("span",{className:"font-mono font-bold text-base text-foreground",children:ip(h)})]}),m.jsx("hr",{className:"border-border"}),u.map(d=>{const f=o+(d.proficient?e:0)+(d.expertise?e:0);let p="bg-transparent border-border";return d.expertise?p="bg-accent border-accent ring-2 ring-offset-2 ring-offset-muted/60 ring-accent":d.proficient&&(p="bg-primary border-primary"),m.jsxs("div",{className:"flex items-center justify-between text-sm text-foreground",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:`w-3 h-3 rounded-full border-2 transition-all ${p}`}),m.jsx("span",{children:d.name})]}),m.jsx("span",{className:"font-mono font-bold text-base text-foreground",children:ip(f)})]},d.name)})]})]},a)})})]})},s9=({spell:t,onToggleExpand:e,isExpanded:n})=>m.jsxs("div",{className:"bg-card/50 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-3",onClick:e,children:[m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h4",{className:"font-bold text-accent truncate",title:t.name,children:t.name}),m.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-1",children:[m.jsx("span",{className:"truncate",title:t.castingTime,children:t.castingTime}),m.jsx("span",{className:"opacity-50",children:"|"}),m.jsx("span",{className:"truncate",title:t.range,children:t.range})]})]}),m.jsx("div",{className:"flex items-center gap-2 pl-2 flex-shrink-0",children:m.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:t.school})})]}),n&&m.jsxs("div",{className:"mt-2 pt-3 border-t border-border/50 space-y-2 text-sm p-3 bg-muted/30",children:[m.jsxs("p",{children:[m.jsx("strong",{className:"text-muted-foreground",children:"Components:"})," ",t.components]}),m.jsxs("p",{children:[m.jsx("strong",{className:"text-muted-foreground",children:"Duration:"})," ",t.duration]}),m.jsx("p",{className:"text-foreground mt-2 whitespace-pre-wrap",children:t.description})]})]}),o9=()=>{const{character:t}=On(),[e,n]=H.useState({}),[r,i]=H.useState(""),a=l=>{n(h=>({...h,[l]:!h[l]}))},s=H.useMemo(()=>t?t.spells.filter(h=>h.name.toLowerCase().includes(r.toLowerCase())).reduce((h,u)=>(h[u.level]=[...h[u.level]||[],u],h[u.level].sort((d,f)=>d.name.localeCompare(f.name)),h),{}):{},[t,r]),o=Object.keys(s).map(Number).sort((l,h)=>l-h);return t?m.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col h-auto max-h-[calc(100vh-10rem)]",children:[m.jsx("div",{className:"flex justify-between items-center mb-2",children:m.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Spellbook"})}),m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"text",placeholder:"Search spells...",value:r,onChange:l=>i(l.target.value),className:"w-full bg-input p-2 rounded-md border border-border text-sm focus:ring-ring focus:border-accent"})}),m.jsx("div",{className:"space-y-6 overflow-y-auto pr-2 -mr-2 flex-grow",children:t.spells.length===0?m.jsx("div",{className:"flex items-center justify-center h-full",children:m.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"This character knows no spells."})}):o.length===0?m.jsx("div",{className:"flex items-center justify-center h-full",children:m.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"No spells match your search."})}):o.map(l=>m.jsxs("div",{children:[m.jsx("h4",{className:"text-xl font-serif text-foreground border-b border-border pb-1 mb-3",children:l===0?"Cantrips":`Level ${l}`}),m.jsx("div",{className:"space-y-3",children:s[l].map(h=>m.jsx(s9,{spell:h,isExpanded:!!e[h.id],onToggleExpand:()=>a(h.id)},h.id))})]},l))})]}):null},l9=({label:t,isActive:e,onClick:n,id:r,controls:i})=>m.jsx("button",{id:r,role:"tab","aria-selected":e,"aria-controls":i,onClick:n,className:`px-4 py-2 text-sm sm:text-base font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-card text-accent border-b-2 border-accent":"text-muted-foreground hover:bg-muted border-b-2 border-transparent"}`,children:t}),RR=t=>{if(!t||typeof t!="string")return{total:0,pretty:"Invalid input"};const e=t.replace(/[\s()]/g,"").split("+");let n=0;const r=[],i=/(\d+)d(\d+)/i;for(const a of e){if(!a)continue;const s=a.match(i);if(s){const o=parseInt(s[1],10),l=parseInt(s[2],10);if(isNaN(o)||isNaN(l))continue;const h=Array.from({length:o},()=>Math.floor(Math.random()*l)+1),u=h.reduce((d,f)=>d+f,0);n+=u,r.push(`[${h.join("+")}]`)}else{const o=parseInt(a,10);isNaN(o)||(n+=o,r.push(String(o)))}}return r.length===0?{total:0,pretty:"Invalid Format"}:{total:n,pretty:`${r.join(" + ")} = ${n}`}},c9=()=>{const[t,e]=H.useState(null),{character:n,updateCharacter:r}=On(),i=$o(n.abilityScores.constitution),a=H.useMemo(()=>{const l=$o(n.abilityScores.wisdom),h=n.skills.find(d=>d.name==="Perception");let u=0;return h&&(h.expertise?u=n.proficiencyBonus*2:h.proficient&&(u=n.proficiencyBonus)),10+l+u},[n]),s=()=>{if(n.hitDice.used>=n.level)return;const{total:l,pretty:h}=RR(`${n.hitDice.total}+${i}`),u=Math.min(n.hp.max,n.hp.current+Math.max(1,l));e(`${h} HP`),r({hp:{...n.hp,current:u},hitDice:{...n.hitDice,used:n.hitDice.used+1}})},o=()=>{r({hitDice:{...n.hitDice,used:0}}),e(null)};return m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"md:col-span-2 lg:col-span-3 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:[m.jsx(Lr,{label:"Armor Class",value:H.useMemo(()=>JS(n),[n])}),m.jsx(Lr,{label:"Initiative",value:Ti(n.initiative)}),m.jsx(Lr,{label:"Speed",value:`${n.speed}ft`,subValue:` ${Math.round(n.speed*.3)}m`}),m.jsx(Lr,{label:"Proficiency",value:Ti(n.proficiencyBonus)}),m.jsx(Lr,{label:"Passive Perception",value:a,className:"col-span-2 sm:col-span-1"})]}),m.jsx(g9,{}),m.jsx(v9,{}),m.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:"Hit Dice"}),m.jsxs("p",{className:"text-center text-3xl font-bold font-mono text-foreground mb-3",children:[n.level-n.hitDice.used," / ",n.level]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("button",{onClick:s,disabled:n.hitDice.used>=n.level,className:"w-full bg-primary/80 hover:bg-primary text-primary-foreground font-bold py-2 px-4 rounded-md transition-colors disabled:bg-muted disabled:text-muted-foreground disabled:cursor-not-allowed",children:["Spend (",n.hitDice.total,")"]}),m.jsx("button",{onClick:o,className:"bg-secondary/80 hover:bg-secondary text-secondary-foreground font-bold py-2 px-4 rounded-md transition-colors",children:"Reset"})]}),t&&m.jsx("p",{className:"text-center text-accent font-mono mt-3 p-2 bg-muted/50 rounded-md",children:t})]}),m.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:"Languages"}),m.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:n.languages||"None"})]})]})},u9=()=>{const{character:t}=On();return m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsx(y9,{items:t.attacks||[]}),m.jsx(_9,{title:"Features & Traits",items:t.featuresAndTraits||[]})]})},h9=()=>{const{character:t,updateCharacter:e}=On(),n=t.spellcastingAbility,r=n?$o(t.abilityScores[n]):0,i=n?8+t.proficiencyBonus+r:"-",a=n?t.proficiencyBonus+r:0;return m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[m.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3 text-center",children:"Spellcasting"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsx(Lr,{label:"Save DC",value:i}),m.jsx(Lr,{label:"Attack Bonus",value:Ti(a)}),m.jsxs("div",{className:"col-span-2 text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wider text-muted-foreground",children:"Ability"}),m.jsx("p",{className:"text-xl font-bold text-foreground capitalize",children:n||"None"})]})]})]}),m.jsx(Pw,{title:"Spell Slots",slots:t.spellSlots,onSlotChange:s=>e({spellSlots:s})}),t.customResources&&t.customResources.length>0&&m.jsx(Pw,{title:"Other Resources",slots:t.customResources,onSlotChange:s=>e({customResources:s}),isCustom:!0})]}),m.jsx("div",{className:"lg:col-span-2",children:m.jsx(o9,{})})]})},d9=()=>{const{character:t,updateCharacter:e}=On(),[n,r]=H.useState(null),i=h=>{const u=t.equipment.find(p=>p.id===h);if(!u)return;const d=!u.equipped,f=t.equipment.map(p=>{if(p.id===h)return{...p,equipped:d};if(d){const b=u.armorType&&u.armorType!=="shield",A=p.equipped&&p.armorType&&p.armorType!=="shield";if(b&&A)return{...p,equipped:!1};if(u.armorType==="shield"&&p.equipped&&p.armorType==="shield")return{...p,equipped:!1}}return p});e({equipment:f})},a=h=>{r(u=>u===h?null:h)},{equippableItems:s,backpackItems:o}=H.useMemo(()=>{const h=[],u=[];return(t.equipment||[]).forEach(d=>{d.armorType?h.push(d):u.push(d)}),{equippableItems:h.sort((d,f)=>d.name.localeCompare(f.name)),backpackItems:u.sort((d,f)=>d.name.localeCompare(f.name))}},[t.equipment]),l=({title:h,items:u})=>m.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:h}),u.length===0?m.jsx("p",{className:"text-muted-foreground text-sm text-center py-4",children:"None."}):m.jsx("div",{className:"space-y-2",children:u.map(d=>m.jsxs("div",{className:"bg-card/50 rounded-lg text-sm",children:[m.jsxs("div",{className:"p-3 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[m.jsx("button",{onClick:()=>a(d.id),className:"flex-shrink-0 text-muted-foreground hover:text-foreground",children:m.jsx(oR,{className:`w-5 h-5 transition-transform ${n===d.id?"rotate-180":""}`})}),m.jsxs("p",{className:"font-semibold text-accent truncate",title:d.name,children:[d.name," ",m.jsxs("span",{className:"text-xs text-muted-foreground",children:["(x",d.quantity,")"]})]})]}),d.armorType&&m.jsx("button",{onClick:()=>i(d.id),className:`px-3 py-1 text-xs font-bold rounded ${d.equipped?"bg-primary text-primary-foreground":"bg-secondary hover:bg-secondary/80"}`,children:d.equipped?"Equipped":"Equip"})]}),n===d.id&&m.jsxs("div",{className:"p-3 border-t border-border/50 bg-muted/30 space-y-2",children:[d.armorType&&m.jsxs("p",{children:[m.jsxs("strong",{className:"text-muted-foreground capitalize",children:[d.armorType," Armor"]}),d.armorClass?m.jsxs("span",{className:"text-foreground",children:[" (AC: ",d.armorClass,")"]}):""]}),m.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:d.description||"No description."})]})]},d.id))})]});return m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[m.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:"Currency"}),m.jsx("div",{className:"grid grid-cols-3 gap-2 text-center",children:Object.keys(t.currency).map(h=>m.jsxs("div",{children:[m.jsx("p",{className:"text-xl font-mono text-foreground",children:t.currency[h]}),m.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:h})]},h))})]}),m.jsx(l,{title:"Equippable Gear",items:s})]}),m.jsx("div",{className:"lg:col-span-2",children:m.jsx(l,{title:"Backpack",items:o})})]})},f9=()=>{const{character:t}=On(),e=({title:n,content:r})=>m.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex-grow",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent mb-2",children:n}),m.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:r||"Not set."})]});return m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"space-y-6 flex flex-col",children:[m.jsx(e,{title:"Personality Traits",content:t.personalityTraits}),m.jsx(e,{title:"Ideals",content:t.ideals}),m.jsx(e,{title:"Bonds",content:t.bonds}),m.jsx(e,{title:"Flaws",content:t.flaws})]}),m.jsxs("div",{className:"space-y-6 flex flex-col",children:[m.jsx(e,{title:"Character Notes",content:t.notes}),m.jsx(e,{title:"Campaign Info",content:t.dmNotes})]})]})},m9=[{key:"main",label:"Main"},{key:"abilities",label:"Abilities"},{key:"combat",label:"Combat"},{key:"spells",label:"Spells"},{key:"inventory",label:"Inventory"},{key:"info",label:"Info"}],p9=()=>{const{characterId:t}=QT(),e=El(),{character:n,setCharacter:r,updateCharacter:i}=On(),[a,s]=H.useState("main"),o=H.useRef(!0);return H.useEffect(()=>{if(!t)return;(async()=>{const h=await tR(t);r(h)})()},[t,r]),H.useEffect(()=>{if(o.current){o.current=!1;return}if(n){const l=setTimeout(()=>{nR(n)},1500);return()=>{clearTimeout(l)}}},[n]),n?m.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:pt-8",children:[m.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-6 border-b border-border pb-4",children:[m.jsxs("button",{onClick:()=>e("/"),className:"flex items-center gap-2 rounded-md px-3 py-2 font-semibold text-muted-foreground transition-all duration-200 hover:scale-105 hover:text-accent [text-shadow:0_1px_2px_rgba(0,0,0,0.3)]","aria-label":"Back to character list",children:[m.jsx(sR,{className:"w-5 h-5"}),m.jsx("span",{className:"hidden sm:inline",children:"Back to List"}),m.jsx("span",{className:"sm:hidden",children:"Back"})]}),m.jsxs("div",{className:"flex items-center gap-4 text-center order-first sm:order-none",children:[n.imageUrl&&m.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border-2 border-border shadow-md"}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl sm:text-3xl font-cinzel text-accent",children:n.name}),m.jsxs("p",{className:"text-muted-foreground capitalize text-sm",children:[n.race," ",n.class," ",n.subclass&&`(${n.subclass})`,"  Level ",n.level,"  ",n.alignment]})]})]}),m.jsxs("button",{onClick:()=>e(`/character/${t}/edit`),className:"flex items-center gap-2 rounded-md px-3 py-2 font-bold text-primary transition-all duration-200 hover:scale-105 hover:text-accent [text-shadow:0_1px_2px_rgba(0,0,0,0.3)]","aria-label":"Edit character sheet",children:[m.jsx(Ks,{className:"w-5 h-5"}),m.jsx("span",{className:"hidden sm:inline",children:"Edit Sheet"}),m.jsx("span",{className:"sm:hidden",children:"Edit"})]})]}),m.jsx("div",{role:"tablist","aria-label":"Character View Sections",className:"flex space-x-1 mb-6 border-b border-border overflow-x-auto",children:m9.map(l=>m.jsx(l9,{id:`play-tab-${l.key}`,controls:`play-panel-${l.key}`,label:l.label,isActive:a===l.key,onClick:()=>s(l.key)},l.key))}),m.jsxs("div",{className:"bg-muted/50 p-4 sm:p-6 rounded-b-lg rounded-tr-lg",children:[m.jsx("div",{id:"play-panel-main",role:"tabpanel","aria-labelledby":"play-tab-main",style:{display:a==="main"?"block":"none"},children:m.jsx(c9,{})}),m.jsx("div",{id:"play-panel-abilities",role:"tabpanel","aria-labelledby":"play-tab-abilities",style:{display:a==="abilities"?"block":"none"},children:m.jsx(a9,{})}),m.jsx("div",{id:"play-panel-combat",role:"tabpanel","aria-labelledby":"play-tab-combat",style:{display:a==="combat"?"block":"none"},children:m.jsx(u9,{})}),m.jsx("div",{id:"play-panel-spells",role:"tabpanel","aria-labelledby":"play-tab-spells",style:{display:a==="spells"?"block":"none"},children:m.jsx(h9,{})}),m.jsx("div",{id:"play-panel-inventory",role:"tabpanel","aria-labelledby":"play-tab-inventory",style:{display:a==="inventory"?"block":"none"},children:m.jsx(d9,{})}),m.jsx("div",{id:"play-panel-info",role:"tabpanel","aria-labelledby":"play-tab-info",style:{display:a==="info"?"block":"none"},children:m.jsx(f9,{})})]})]}):m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-accent"})})},g9=()=>{const{character:t,updateCharacter:e}=On(),{hp:n}=t,[r,i]=H.useState(""),[a,s]=H.useState(""),[o,l]=H.useState(""),h=()=>{const f=parseInt(r,10);if(!isNaN(f)&&f>0){const p=Math.min(f,n.temporary),b=n.temporary-p,A=f-p,D=Math.max(0,n.current-A);e({hp:{...n,current:D,temporary:b}}),i("")}},u=()=>{const f=parseInt(a,10);if(!isNaN(f)&&f>0){const p=Math.min(n.max,n.current+f);e({hp:{...n,current:p}}),s("")}},d=()=>{const f=parseInt(o,10);!isNaN(f)&&f>=0&&(e({hp:{...n,temporary:f}}),l(""))};return m.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3 text-center",children:"Hit Points"}),m.jsxs("div",{className:"text-center mb-4",children:[m.jsx("span",{className:"text-5xl font-bold text-destructive",children:n.current}),n.temporary>0&&m.jsxs("span",{className:"text-3xl font-bold text-accent",title:"Temporary HP",children:[" +",n.temporary]}),m.jsxs("span",{className:"text-2xl text-muted-foreground",children:[" / ",n.max]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsx("input",{type:"number",value:r,onChange:f=>i(f.target.value),onKeyDown:f=>f.key==="Enter"&&h(),placeholder:"Damage",className:"bg-input text-center rounded-md p-2 border border-border focus:ring-destructive focus:border-destructive"}),m.jsx("button",{onClick:h,className:"bg-destructive/80 hover:bg-destructive text-destructive-foreground font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Apply"})]}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("input",{type:"number",value:a,onChange:f=>s(f.target.value),onKeyDown:f=>f.key==="Enter"&&u(),placeholder:"Healing",className:"bg-input text-center rounded-md p-2 border border-border focus:ring-primary focus:border-primary"}),m.jsx("button",{onClick:u,className:"bg-primary/80 hover:bg-primary text-primary-foreground font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Apply"})]})]}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("input",{type:"number",value:o,onChange:f=>l(f.target.value),onKeyDown:f=>f.key==="Enter"&&d(),placeholder:"Set/Replace Temp HP",className:"bg-input text-center rounded-md p-2 border border-border focus:ring-accent focus:border-accent"}),m.jsx("button",{onClick:d,className:"bg-accent/80 hover:bg-accent text-accent-foreground font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Set Temp HP"})]})]})},Pw=({title:t,slots:e,onSlotChange:n,isCustom:r})=>{const i=(o,l)=>{if(r){const h=e,u=h.findIndex(b=>b.id===o);if(u===-1)return;const d=h[u],f=l<d.used?l:l+1,p=[...h];p[u]={...d,used:f},n(p)}else{const h=e,u=h[o],d=l<u.used?l:l+1;n({...h,[o]:{...u,used:d}})}},a=r?e:Object.entries(e),s=a.some(o=>r?o.max>0:o[1].max>0);return m.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:t}),!s&&m.jsx("p",{className:"text-muted-foreground text-sm text-center",children:"No resources available."}),m.jsx("div",{className:"space-y-3",children:a.map(o=>{const[l,h]=r?[o.id,o]:o,u=r?h.name:`Lvl ${l}`;return h.max===0?null:m.jsxs("div",{className:"flex items-center",children:[m.jsxs("span",{className:"font-bold text-muted-foreground w-24 truncate",title:u,children:[u,":"]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:h.max}).map((d,f)=>m.jsx("button",{onClick:()=>i(l,f),className:`w-5 h-5 rounded-md border-2 transition-colors ${f<h.used?"bg-primary border-primary/80":"bg-muted border-border hover:border-accent"}`,"aria-label":`Slot ${f+1} for ${u}. ${f<h.used?"Used":"Available"}`},f))})]},l)})})]})},v9=()=>{const{character:t,updateCharacter:e}=On(),{deathSaves:n}=t,r=(i,a)=>{const s=n[i],o=a<s?a:a+1;e({deathSaves:{...n,[i]:o}})};return m.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:"Death Saves"}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"font-semibold text-foreground",children:"Successes"}),m.jsx("div",{className:"flex gap-2",children:Array.from({length:3}).map((i,a)=>m.jsx("input",{type:"checkbox",checked:a<n.successes,onChange:()=>r("successes",a),className:"w-5 h-5 rounded-full text-primary bg-input border-border focus:ring-primary"},a))})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"font-semibold text-foreground",children:"Failures"}),m.jsx("div",{className:"flex gap-2",children:Array.from({length:3}).map((i,a)=>m.jsx("input",{type:"checkbox",checked:a<n.failures,onChange:()=>r("failures",a),className:"w-5 h-5 rounded-full text-destructive bg-input border-border focus:ring-destructive"},a))})]})]})]})},y9=({items:t})=>{const[e,n]=H.useState({}),r=a=>{const s=parseInt(a.bonus)||0,o=Math.floor(Math.random()*20)+1,l=o+s,h=`${o} ${s>=0?"+":"-"} ${Math.abs(s)} = ${l}`;n(u=>({...u,[a.id]:{...u[a.id],atk:h}}))},i=a=>{const{pretty:s}=RR(a.damage);n(o=>({...o,[a.id]:{...o[a.id],dmg:s}}))};return m.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col h-full",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:"Attacks & Cantrips"}),m.jsxs("div",{className:"space-y-3 flex-grow overflow-y-auto pr-2 -mr-2 max-h-[calc(50vh-5rem)]",children:[t.length===0&&m.jsx("p",{className:"text-muted-foreground text-sm text-center py-4",children:"None."}),t.map(a=>{var s,o;return m.jsxs("div",{className:"bg-card/50 rounded-lg text-sm p-3 space-y-2",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsx("span",{className:"font-semibold text-accent text-base",children:a.name}),m.jsxs("div",{className:"flex gap-4 font-mono text-foreground text-right",children:[m.jsx("span",{title:"Attack Bonus",children:a.bonus}),m.jsx("span",{title:"Damage",children:a.damage})]})]}),m.jsxs("div",{className:"flex justify-end items-center gap-2",children:[m.jsx("button",{onClick:()=>r(a),className:"text-xs bg-secondary hover:bg-secondary/80 rounded px-3 py-1.5 transition-colors font-bold",children:"ATK"}),m.jsx("button",{onClick:()=>i(a),className:"text-xs bg-destructive/80 hover:bg-destructive rounded px-3 py-1.5 transition-colors font-bold",children:"DMG"})]}),(((s=e[a.id])==null?void 0:s.atk)||((o=e[a.id])==null?void 0:o.dmg))&&m.jsxs("div",{className:"text-xs text-foreground bg-muted/50 p-2 rounded-md border-l-2 border-accent space-y-1",children:[e[a.id].atk&&m.jsxs("div",{children:[m.jsx("strong",{children:"Attack:"})," ",m.jsx("span",{className:"font-mono text-accent",children:e[a.id].atk})]}),e[a.id].dmg&&m.jsxs("div",{children:[m.jsx("strong",{children:"Damage:"})," ",m.jsx("span",{className:"font-mono text-destructive",children:e[a.id].dmg})]})]})]},a.id)})]})]})},_9=({title:t,items:e})=>{const[n,r]=H.useState({});return m.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col h-full",children:[m.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:t}),m.jsxs("div",{className:"space-y-2 flex-grow overflow-y-auto pr-2 -mr-2 max-h-[calc(50vh-5rem)]",children:[e.length===0&&m.jsx("p",{className:"text-muted-foreground text-sm text-center py-4",children:"None."}),e.map(i=>m.jsxs("div",{className:"bg-card/50 rounded-lg text-sm",children:[m.jsx("div",{className:"flex items-center justify-between p-3 cursor-pointer w-full text-left",onClick:()=>i.description&&r(a=>({...a,[i.id]:!a[i.id]})),children:m.jsx("span",{className:"font-semibold text-accent",children:i.name})}),n[i.id]&&i.description&&m.jsx("div",{className:"p-3 border-t border-border/50 bg-muted/30",children:m.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:i.description})})]},i.id))]})]})},b9=()=>{const{currentUser:t,signInWithGoogle:e}=ku(),n=El();H.useEffect(()=>{t&&n("/")},[t,n]);const r=async()=>{try{await e(),n("/")}catch(i){console.error("Error during sign-in:",i)}};return m.jsx("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-100px)] p-4 text-center",children:m.jsxs("div",{className:"bg-card p-8 rounded-lg shadow-lg max-w-md w-full border border-border",children:[m.jsx("h1",{className:"text-3xl font-cinzel text-accent mb-4",children:"Join the Adventure"}),m.jsx("p",{className:"text-muted-foreground mb-8",children:"Sign in with Google to sync your characters across devices."}),m.jsxs("button",{onClick:r,className:"flex items-center justify-center gap-3 w-full px-6 py-3 bg-white text-zinc-700 font-bold rounded-lg shadow-md hover:bg-zinc-200 transition-colors",children:[m.jsx(oU,{className:"w-6 h-6"}),"Sign In with Google"]})]})})},w9=()=>{const{currentUser:t}=ku(),e=El(),[n,r]=H.useState(""),[i,a]=H.useState(null),[s,o]=H.useState(null),[l,h]=H.useState(!1),[u,d]=H.useState("");H.useEffect(()=>{t?(r(t.displayName||""),o(t.photoURL||null)):e("/login")},[t,e]);const f=async b=>{if(b.target.files&&b.target.files[0]){const A=b.target.files[0];a(A),o(URL.createObjectURL(A))}},p=async()=>{if(t){h(!0),d("");try{let b=t.photoURL;if(i){const A=await pn(i,{maxSizeMB:.5,maxWidthOrHeight:512,useWebWorker:!0}),D=BS(),w=zS(D,`users/${t.uid}/profile.jpg`);await xP(w,A),b=await VS(w)}await L5(t,{displayName:n,photoURL:b}),alert("Profile updated successfully!"),a(null)}catch(b){console.error("Error updating profile:",b),d("Failed to update profile. Please try again.")}finally{h(!1)}}};return t?m.jsx("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-100px)] p-4 text-center",children:m.jsxs("div",{className:"bg-card p-8 rounded-lg shadow-lg max-w-md w-full border border-border",children:[m.jsxs("h1",{className:"text-3xl font-cinzel text-accent mb-4",children:["Welcome, ",t.displayName||"Adventurer"]}),m.jsx("p",{className:"text-muted-foreground mb-8",children:"Manage your account details below."}),m.jsxs("div",{className:"flex flex-col space-y-4 w-full",children:[m.jsxs("div",{className:"flex flex-col items-center gap-4 mb-4",children:[m.jsxs("label",{htmlFor:"profile-image-upload",className:"cursor-pointer group relative",children:[m.jsx("img",{src:s||`https://api.dicebear.com/8.x/lorelei/svg?seed=${t.uid}`,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-2 border-accent/50 group-hover:opacity-75 transition-opacity"}),m.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:m.jsx("span",{className:"text-white text-sm",children:"Change"})})]}),m.jsx("input",{id:"profile-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:f})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"nickname",className:"block text-sm font-medium text-muted-foreground text-left mb-1",children:"Nickname"}),m.jsx("input",{id:"nickname",type:"text",value:n,onChange:b=>r(b.target.value),placeholder:"Enter your nickname",className:"mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent sm:text-sm"})]}),m.jsx("button",{onClick:p,disabled:l,className:"px-6 py-3 bg-primary text-primary-foreground font-bold rounded-lg shadow-md hover:bg-primary/90 transition-colors disabled:bg-muted disabled:text-muted-foreground",children:l?"Saving...":"Save Profile"}),u&&m.jsx("p",{className:"text-destructive text-sm",children:u})]})]})}):null};function E9(){const t=JT();if(al(t))return m.jsxs("div",{className:"text-center p-8",children:[m.jsxs("h1",{className:"text-2xl font-bold text-red-500",children:[t.status," ",t.statusText]}),m.jsx("p",{className:"text-zinc-400",children:t.data})]});const e=t instanceof Error?t.message:"Unknown error";return m.jsxs("div",{className:"text-center p-8",children:[m.jsx("h1",{className:"text-2xl font-bold text-red-500",children:"Something went wrong"}),m.jsx("p",{className:"text-zinc-400",children:e})]})}function x9(){return m.jsxs("div",{className:"text-center p-8",children:[m.jsx("h1",{className:"text-2xl font-bold text-red-500",children:"404 Not Found"}),m.jsx("p",{className:"text-zinc-400",children:"The page you are looking for does not exist."})]})}const T9=()=>m.jsx(yU,{children:m.jsx(e2,{})}),A9={element:m.jsx(T9,{}),children:[{index:!0,element:m.jsx(bU,{})},{path:"character/new",element:m.jsx(jw,{})},{path:"character/:characterId/edit",element:m.jsx(jw,{})},{path:"character/:characterId",element:m.jsx(p9,{})}]},S9=aD([{path:"/",element:m.jsx(vU,{}),errorElement:m.jsx(E9,{}),children:[A9,{path:"login",element:m.jsx(b9,{})},{path:"account",element:m.jsx(w9,{})},{path:"*",element:m.jsx(x9,{})}]}]),CR=document.getElementById("root");if(!CR)throw new Error("Could not find root element to mount to");qI.createRoot(CR).render(m.jsx(po.StrictMode,{children:m.jsx(WP,{children:m.jsx(QP,{children:m.jsx(mD,{router:S9})})})}));
