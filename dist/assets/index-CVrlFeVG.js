function ME(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Hg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kE={exports:{}},Wd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HR=Symbol.for("react.transitional.element"),qR=Symbol.for("react.fragment");function jE(t,e,n){var r=null;if(n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:HR,type:t,key:r,ref:e!==void 0?e:null,props:n}}Wd.Fragment=qR;Wd.jsx=jE;Wd.jsxs=jE;kE.exports=Wd;var p=kE.exports,PE={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qg=Symbol.for("react.transitional.element"),GR=Symbol.for("react.portal"),$R=Symbol.for("react.fragment"),YR=Symbol.for("react.strict_mode"),XR=Symbol.for("react.profiler"),QR=Symbol.for("react.consumer"),KR=Symbol.for("react.context"),WR=Symbol.for("react.forward_ref"),ZR=Symbol.for("react.suspense"),JR=Symbol.for("react.memo"),UE=Symbol.for("react.lazy"),P0=Symbol.iterator;function eC(t){return t===null||typeof t!="object"?null:(t=P0&&t[P0]||t["@@iterator"],typeof t=="function"?t:null)}var LE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VE=Object.assign,zE={};function fl(t,e,n){this.props=t,this.context=e,this.refs=zE,this.updater=n||LE}fl.prototype.isReactComponent={};fl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function BE(){}BE.prototype=fl.prototype;function Gg(t,e,n){this.props=t,this.context=e,this.refs=zE,this.updater=n||LE}var $g=Gg.prototype=new BE;$g.constructor=Gg;VE($g,fl.prototype);$g.isPureReactComponent=!0;var U0=Array.isArray,wt={H:null,A:null,T:null,S:null,V:null},FE=Object.prototype.hasOwnProperty;function Yg(t,e,n,r,i,a){return n=a.ref,{$$typeof:qg,type:t,key:e,ref:n!==void 0?n:null,props:a}}function tC(t,e){return Yg(t.type,e,void 0,void 0,void 0,t.props)}function Xg(t){return typeof t=="object"&&t!==null&&t.$$typeof===qg}function nC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var L0=/\/+/g;function Wf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nC(""+t.key):e.toString(36)}function V0(){}function rC(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(V0,V0):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function ao(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"bigint":case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case qg:case GR:s=!0;break;case UE:return s=t._init,ao(s(t._payload),e,n,r,i)}}if(s)return i=i(t),s=r===""?"."+Wf(t,0):r,U0(i)?(n="",s!=null&&(n=s.replace(L0,"$&/")+"/"),ao(i,e,n,"",function(h){return h})):i!=null&&(Xg(i)&&(i=tC(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(L0,"$&/")+"/")+s)),e.push(i)),1;s=0;var o=r===""?".":r+":";if(U0(t))for(var l=0;l<t.length;l++)r=t[l],a=o+Wf(r,l),s+=ao(r,e,n,a,i);else if(l=eC(t),typeof l=="function")for(t=l.call(t),l=0;!(r=t.next()).done;)r=r.value,a=o+Wf(r,l++),s+=ao(r,e,n,a,i);else if(a==="object"){if(typeof t.then=="function")return ao(rC(t),e,n,r,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return s}function $u(t,e,n){if(t==null)return t;var r=[],i=0;return ao(t,r,"","",function(a){return e.call(n,a,i++)}),r}function iC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var z0=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function aC(){}xe.Children={map:$u,forEach:function(t,e,n){$u(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $u(t,function(){e++}),e},toArray:function(t){return $u(t,function(e){return e})||[]},only:function(t){if(!Xg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=fl;xe.Fragment=$R;xe.Profiler=XR;xe.PureComponent=Gg;xe.StrictMode=YR;xe.Suspense=ZR;xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=wt;xe.__COMPILER_RUNTIME={__proto__:null,c:function(t){return wt.H.useMemoCache(t)}};xe.cache=function(t){return function(){return t.apply(null,arguments)}};xe.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var r=VE({},t.props),i=t.key,a=void 0;if(e!=null)for(s in e.ref!==void 0&&(a=void 0),e.key!==void 0&&(i=""+e.key),e)!FE.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(r[s]=e[s]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];r.children=o}return Yg(t.type,i,void 0,void 0,a,r)};xe.createContext=function(t){return t={$$typeof:KR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:QR,_context:t},t};xe.createElement=function(t,e,n){var r,i={},a=null;if(e!=null)for(r in e.key!==void 0&&(a=""+e.key),e)FE.call(e,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];i.children=o}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return Yg(t,a,void 0,void 0,null,i)};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:WR,render:t}};xe.isValidElement=Xg;xe.lazy=function(t){return{$$typeof:UE,_payload:{_status:-1,_result:t},_init:iC}};xe.memo=function(t,e){return{$$typeof:JR,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=wt.T,n={};wt.T=n;try{var r=t(),i=wt.S;i!==null&&i(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(aC,z0)}catch(a){z0(a)}finally{wt.T=e}};xe.unstable_useCacheRefresh=function(){return wt.H.useCacheRefresh()};xe.use=function(t){return wt.H.use(t)};xe.useActionState=function(t,e,n){return wt.H.useActionState(t,e,n)};xe.useCallback=function(t,e){return wt.H.useCallback(t,e)};xe.useContext=function(t){return wt.H.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t,e){return wt.H.useDeferredValue(t,e)};xe.useEffect=function(t,e,n){var r=wt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(t,e)};xe.useId=function(){return wt.H.useId()};xe.useImperativeHandle=function(t,e,n){return wt.H.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return wt.H.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return wt.H.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return wt.H.useMemo(t,e)};xe.useOptimistic=function(t,e){return wt.H.useOptimistic(t,e)};xe.useReducer=function(t,e,n){return wt.H.useReducer(t,e,n)};xe.useRef=function(t){return wt.H.useRef(t)};xe.useState=function(t){return wt.H.useState(t)};xe.useSyncExternalStore=function(t,e,n){return wt.H.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return wt.H.useTransition()};xe.version="19.1.0";PE.exports=xe;var q=PE.exports;const mo=Hg(q),sC=ME({__proto__:null,default:mo},[q]);var HE={exports:{}},Zd={},qE={exports:{}},GE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,M){var H=k.length;k.push(M);e:for(;0<H;){var B=H-1>>>1,X=k[B];if(0<i(X,M))k[B]=M,k[H]=X,H=B;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var M=k[0],H=k.pop();if(H!==M){k[0]=H;e:for(var B=0,X=k.length,re=X>>>1;B<re;){var V=2*(B+1)-1,K=k[V],$=V+1,Y=k[$];if(0>i(K,H))$<X&&0>i(Y,K)?(k[B]=Y,k[$]=H,B=$):(k[B]=K,k[V]=H,B=V);else if($<X&&0>i(Y,H))k[B]=Y,k[$]=H,B=$;else break e}}return M}function i(k,M){var H=k.sortIndex-M.sortIndex;return H!==0?H:k.id-M.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],h=[],u=1,d=null,f=3,m=!1,b=!1,A=!1,D=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function O(k){for(var M=n(h);M!==null;){if(M.callback===null)r(h);else if(M.startTime<=k)r(h),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(h)}}function P(k){if(A=!1,O(k),!b)if(n(l)!==null)b=!0,R||(R=!0,I());else{var M=n(h);M!==null&&z(P,M.startTime-k)}}var R=!1,_=-1,g=5,y=-1;function T(){return D?!0:!(t.unstable_now()-y<g)}function C(){if(D=!1,R){var k=t.unstable_now();y=k;var M=!0;try{e:{b=!1,A&&(A=!1,x(_),_=-1),m=!0;var H=f;try{t:{for(O(k),d=n(l);d!==null&&!(d.expirationTime>k&&T());){var B=d.callback;if(typeof B=="function"){d.callback=null,f=d.priorityLevel;var X=B(d.expirationTime<=k);if(k=t.unstable_now(),typeof X=="function"){d.callback=X,O(k),M=!0;break t}d===n(l)&&r(l),O(k)}else r(l);d=n(l)}if(d!==null)M=!0;else{var re=n(h);re!==null&&z(P,re.startTime-k),M=!1}}break e}finally{d=null,f=H,m=!1}M=void 0}}finally{M?I():R=!1}}}var I;if(typeof N=="function")I=function(){N(C)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,U=S.port2;S.port1.onmessage=C,I=function(){U.postMessage(null)}}else I=function(){E(C,0)};function z(k,M){_=E(function(){k(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(k){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var H=f;f=M;try{return k()}finally{f=H}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(k,M){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var H=f;f=k;try{return M()}finally{f=H}},t.unstable_scheduleCallback=function(k,M,H){var B=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?B+H:B):H=B,k){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=H+X,k={id:u++,callback:M,priorityLevel:k,startTime:H,expirationTime:X,sortIndex:-1},H>B?(k.sortIndex=H,e(h,k),n(l)===null&&k===n(h)&&(A?(x(_),_=-1):A=!0,z(P,H-B))):(k.sortIndex=X,e(l,k),b||m||(b=!0,R||(R=!0,I()))),k},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(k){var M=f;return function(){var H=f;f=M;try{return k.apply(this,arguments)}finally{f=H}}}})(GE);qE.exports=GE;var oC=qE.exports,$E={exports:{}},Ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lC=q;function YE(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ea(){}var Un={d:{f:ea,r:function(){throw Error(YE(522))},D:ea,C:ea,L:ea,m:ea,X:ea,S:ea,M:ea},p:0,findDOMNode:null},cC=Symbol.for("react.portal");function uC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cC,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}var ic=lC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Jd(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Un;Ln.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(YE(299));return uC(t,e,null,n)};Ln.flushSync=function(t){var e=ic.T,n=Un.p;try{if(ic.T=null,Un.p=2,t)return t()}finally{ic.T=e,Un.p=n,Un.d.f()}};Ln.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Un.d.C(t,e))};Ln.prefetchDNS=function(t){typeof t=="string"&&Un.d.D(t)};Ln.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,r=Jd(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,a=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Un.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:a}):n==="script"&&Un.d.X(t,{crossOrigin:r,integrity:i,fetchPriority:a,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Ln.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Jd(e.as,e.crossOrigin);Un.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Un.d.M(t)};Ln.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,r=Jd(n,e.crossOrigin);Un.d.L(t,n,{crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Ln.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Jd(e.as,e.crossOrigin);Un.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Un.d.m(t)};Ln.requestFormReset=function(t){Un.d.r(t)};Ln.unstable_batchedUpdates=function(t,e){return t(e)};Ln.useFormState=function(t,e,n){return ic.H.useFormState(t,e,n)};Ln.useFormStatus=function(){return ic.H.useHostTransitionStatus()};Ln.version="19.1.0";function XE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XE)}catch(t){console.error(t)}}XE(),$E.exports=Ln;var Qg=$E.exports;const hC=Hg(Qg),dC=ME({__proto__:null,default:hC},[Qg]);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jt=oC,QE=q,fC=Qg;function ee(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function KE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function WE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function B0(t){if(Zc(t)!==t)throw Error(ee(188))}function mC(t){var e=t.alternate;if(!e){if(e=Zc(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return B0(i),t;if(a===r)return B0(i),e;a=a.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function ZE(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=ZE(t),e!==null)return e;t=t.sibling}return null}var pt=Object.assign,pC=Symbol.for("react.element"),Yu=Symbol.for("react.transitional.element"),Ql=Symbol.for("react.portal"),po=Symbol.for("react.fragment"),JE=Symbol.for("react.strict_mode"),np=Symbol.for("react.profiler"),gC=Symbol.for("react.provider"),ew=Symbol.for("react.consumer"),Ri=Symbol.for("react.context"),Kg=Symbol.for("react.forward_ref"),rp=Symbol.for("react.suspense"),ip=Symbol.for("react.suspense_list"),Wg=Symbol.for("react.memo"),sa=Symbol.for("react.lazy"),ap=Symbol.for("react.activity"),vC=Symbol.for("react.memo_cache_sentinel"),F0=Symbol.iterator;function Ml(t){return t===null||typeof t!="object"?null:(t=F0&&t[F0]||t["@@iterator"],typeof t=="function"?t:null)}var yC=Symbol.for("react.client.reference");function sp(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===yC?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case po:return"Fragment";case np:return"Profiler";case JE:return"StrictMode";case rp:return"Suspense";case ip:return"SuspenseList";case ap:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Ql:return"Portal";case Ri:return(t.displayName||"Context")+".Provider";case ew:return(t._context.displayName||"Context")+".Consumer";case Kg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wg:return e=t.displayName||null,e!==null?e:sp(t.type)||"Memo";case sa:e=t._payload,t=t._init;try{return sp(t(e))}catch{}}return null}var Kl=Array.isArray,ve=QE.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,He=fC.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vs={pending:!1,data:null,method:null,action:null},op=[],go=-1;function mi(t){return{current:t}}function cn(t){0>go||(t.current=op[go],op[go]=null,go--)}function Tt(t,e){go++,op[go]=t.current,t.current=e}var ni=mi(null),Rc=mi(null),xa=mi(null),Hh=mi(null);function qh(t,e){switch(Tt(xa,e),Tt(Rc,t),Tt(ni,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Y_(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Y_(e),t=vx(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}cn(ni),Tt(ni,t)}function $o(){cn(ni),cn(Rc),cn(xa)}function lp(t){t.memoizedState!==null&&Tt(Hh,t);var e=ni.current,n=vx(e,t.type);e!==n&&(Tt(Rc,t),Tt(ni,n))}function Gh(t){Rc.current===t&&(cn(ni),cn(Rc)),Hh.current===t&&(cn(Hh),Uc._currentValue=vs)}var cp=Object.prototype.hasOwnProperty,Zg=Jt.unstable_scheduleCallback,Zf=Jt.unstable_cancelCallback,_C=Jt.unstable_shouldYield,bC=Jt.unstable_requestPaint,ri=Jt.unstable_now,EC=Jt.unstable_getCurrentPriorityLevel,tw=Jt.unstable_ImmediatePriority,nw=Jt.unstable_UserBlockingPriority,$h=Jt.unstable_NormalPriority,wC=Jt.unstable_LowPriority,rw=Jt.unstable_IdlePriority,TC=Jt.log,xC=Jt.unstable_setDisableYieldValue,Jc=null,cr=null;function ga(t){if(typeof TC=="function"&&xC(t),cr&&typeof cr.setStrictMode=="function")try{cr.setStrictMode(Jc,t)}catch{}}var ur=Math.clz32?Math.clz32:RC,AC=Math.log,SC=Math.LN2;function RC(t){return t>>>=0,t===0?32:31-(AC(t)/SC|0)|0}var Xu=256,Qu=4194304;function ss(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ef(t,e,n){var r=t.pendingLanes;if(r===0)return 0;var i=0,a=t.suspendedLanes,s=t.pingedLanes;t=t.warmLanes;var o=r&134217727;return o!==0?(r=o&~a,r!==0?i=ss(r):(s&=o,s!==0?i=ss(s):n||(n=o&~t,n!==0&&(i=ss(n))))):(o=r&~a,o!==0?i=ss(o):s!==0?i=ss(s):n||(n=r&~t,n!==0&&(i=ss(n)))),i===0?0:e!==0&&e!==i&&!(e&a)&&(a=i&-i,n=e&-e,a>=n||a===32&&(n&4194048)!==0)?e:i}function eu(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function CC(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iw(){var t=Xu;return Xu<<=1,!(Xu&4194048)&&(Xu=256),t}function aw(){var t=Qu;return Qu<<=1,!(Qu&62914560)&&(Qu=4194304),t}function Jf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tu(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function NC(t,e,n,r,i,a){var s=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,h=t.hiddenUpdates;for(n=s&~n;0<n;){var u=31-ur(n),d=1<<u;o[u]=0,l[u]=-1;var f=h[u];if(f!==null)for(h[u]=null,u=0;u<f.length;u++){var m=f[u];m!==null&&(m.lane&=-536870913)}n&=~d}r!==0&&sw(t,r,0),a!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=a&~(s&~e))}function sw(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var r=31-ur(e);t.entangledLanes|=e,t.entanglements[r]=t.entanglements[r]|1073741824|n&4194090}function ow(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ur(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}function Jg(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ev(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function lw(){var t=He.p;return t!==0?t:(t=window.event,t===void 0?32:Rx(t.type))}function IC(t,e){var n=He.p;try{return He.p=t,e()}finally{He.p=n}}var Qa=Math.random().toString(36).slice(2),Nn="__reactFiber$"+Qa,Wn="__reactProps$"+Qa,ml="__reactContainer$"+Qa,up="__reactEvents$"+Qa,DC="__reactListeners$"+Qa,OC="__reactHandles$"+Qa,H0="__reactResources$"+Qa,nu="__reactMarker$"+Qa;function tv(t){delete t[Nn],delete t[Wn],delete t[up],delete t[DC],delete t[OC]}function vo(t){var e=t[Nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ml]||n[Nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=K_(t);t!==null;){if(n=t[Nn])return n;t=K_(t)}return e}t=n,n=t.parentNode}return null}function pl(t){if(t=t[Nn]||t[ml]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function Wl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(ee(33))}function Do(t){var e=t[H0];return e||(e=t[H0]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function on(t){t[nu]=!0}var cw=new Set,uw={};function Ls(t,e){Yo(t,e),Yo(t+"Capture",e)}function Yo(t,e){for(uw[t]=e,t=0;t<e.length;t++)cw.add(e[t])}var MC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),q0={},G0={};function kC(t){return cp.call(G0,t)?!0:cp.call(q0,t)?!1:MC.test(t)?G0[t]=!0:(q0[t]=!0,!1)}function yh(t,e,n){if(kC(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var r=e.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Ku(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Ei(t,e,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+r)}}var em,$0;function so(t){if(em===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);em=e&&e[1]||"",$0=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+em+t+$0}var tm=!1;function nm(t,e){if(!t||tm)return"";tm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(m){var f=m}Reflect.construct(t,[],d)}else{try{d.call()}catch(m){f=m}t.call(d.prototype)}}else{try{throw Error()}catch(m){f=m}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(m){if(m&&f&&typeof m.stack=="string")return[m.stack,f.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var l=s.split(`
`),h=o.split(`
`);for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<h.length&&!h[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===h.length)for(r=l.length-1,i=h.length-1;1<=r&&0<=i&&l[r]!==h[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==h[i]){if(r!==1||i!==1)do if(r--,i--,0>i||l[r]!==h[i]){var u=`
`+l[r].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=r&&0<=i);break}}}finally{tm=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?so(n):""}function jC(t){switch(t.tag){case 26:case 27:case 5:return so(t.type);case 16:return so("Lazy");case 13:return so("Suspense");case 19:return so("SuspenseList");case 0:case 15:return nm(t.type,!1);case 11:return nm(t.type.render,!1);case 1:return nm(t.type,!0);case 31:return so("Activity");default:return""}}function Y0(t){try{var e="";do e+=jC(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function yr(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PC(t){var e=hw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yh(t){t._valueTracker||(t._valueTracker=PC(t))}function dw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var UC=/[\n"\\]/g;function Er(t){return t.replace(UC,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function hp(t,e,n,r,i,a,s,o){t.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?t.type=s:t.removeAttribute("type"),e!=null?s==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+yr(e)):t.value!==""+yr(e)&&(t.value=""+yr(e)):s!=="submit"&&s!=="reset"||t.removeAttribute("value"),e!=null?dp(t,s,yr(e)):n!=null?dp(t,s,yr(n)):r!=null&&t.removeAttribute("value"),i==null&&a!=null&&(t.defaultChecked=!!a),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+yr(o):t.removeAttribute("name")}function fw(t,e,n,r,i,a,s,o){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.type=a),e!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||e!=null))return;n=n!=null?""+yr(n):"",e=e!=null?""+yr(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}r=r??i,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=o?t.checked:!!r,t.defaultChecked=!!r,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.name=s)}function dp(t,e,n){e==="number"&&Xh(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Oo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function mw(t,e,n){if(e!=null&&(e=""+yr(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+yr(n):""}function pw(t,e,n,r){if(e==null){if(r!=null){if(n!=null)throw Error(ee(92));if(Kl(r)){if(1<r.length)throw Error(ee(93));r=r[0]}n=r}n==null&&(n=""),e=n}n=yr(e),t.defaultValue=n,r=t.textContent,r===n&&r!==""&&r!==null&&(t.value=r)}function Xo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var LC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function X0(t,e,n){var r=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":r?t.setProperty(e,n):typeof n!="number"||n===0||LC.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function gw(t,e,n){if(e!=null&&typeof e!="object")throw Error(ee(62));if(t=t.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||e!=null&&e.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var i in e)r=e[i],e.hasOwnProperty(i)&&n[i]!==r&&X0(t,i,r)}else for(var a in e)e.hasOwnProperty(a)&&X0(t,a,e[a])}function nv(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _h(t){return zC.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var fp=null;function rv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yo=null,Mo=null;function Q0(t){var e=pl(t);if(e&&(t=e.stateNode)){var n=t[Wn]||null;e:switch(t=e.stateNode,e.type){case"input":if(hp(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Er(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=r[Wn]||null;if(!i)throw Error(ee(90));hp(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)r=n[e],r.form===t.form&&dw(r)}break e;case"textarea":mw(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Oo(t,!!n.multiple,e,!1)}}}var rm=!1;function vw(t,e,n){if(rm)return t(e,n);rm=!0;try{var r=t(e);return r}finally{if(rm=!1,(yo!==null||Mo!==null)&&(hf(),yo&&(e=yo,t=Mo,Mo=yo=null,Q0(e),t)))for(e=0;e<t.length;e++)Q0(t[e])}}function Cc(t,e){var n=t.stateNode;if(n===null)return null;var r=n[Wn]||null;if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mp=!1;if(Ui)try{var kl={};Object.defineProperty(kl,"passive",{get:function(){mp=!0}}),window.addEventListener("test",kl,kl),window.removeEventListener("test",kl,kl)}catch{mp=!1}var va=null,iv=null,bh=null;function yw(){if(bh)return bh;var t,e=iv,n=e.length,r,i="value"in va?va.value:va.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[a-r];r++);return bh=i.slice(t,1<r?1-r:void 0)}function Eh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wu(){return!0}function K0(){return!1}function Zn(t){function e(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Wu:K0,this.isPropagationStopped=K0,this}return pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wu)},persist:function(){},isPersistent:Wu}),e}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tf=Zn(Vs),ru=pt({},Vs,{view:0,detail:0}),BC=Zn(ru),im,am,jl,nf=pt({},ru,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:av,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jl&&(jl&&t.type==="mousemove"?(im=t.screenX-jl.screenX,am=t.screenY-jl.screenY):am=im=0,jl=t),im)},movementY:function(t){return"movementY"in t?t.movementY:am}}),W0=Zn(nf),FC=pt({},nf,{dataTransfer:0}),HC=Zn(FC),qC=pt({},ru,{relatedTarget:0}),sm=Zn(qC),GC=pt({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),$C=Zn(GC),YC=pt({},Vs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XC=Zn(YC),QC=pt({},Vs,{data:0}),Z0=Zn(QC),KC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ZC[t])?!!e[t]:!1}function av(){return JC}var eN=pt({},ru,{key:function(t){if(t.key){var e=KC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Eh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:av,charCode:function(t){return t.type==="keypress"?Eh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Eh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tN=Zn(eN),nN=pt({},nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),J0=Zn(nN),rN=pt({},ru,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:av}),iN=Zn(rN),aN=pt({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),sN=Zn(aN),oN=pt({},nf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lN=Zn(oN),cN=pt({},Vs,{newState:0,oldState:0}),uN=Zn(cN),hN=[9,13,27,32],sv=Ui&&"CompositionEvent"in window,ac=null;Ui&&"documentMode"in document&&(ac=document.documentMode);var dN=Ui&&"TextEvent"in window&&!ac,_w=Ui&&(!sv||ac&&8<ac&&11>=ac),e_=" ",t_=!1;function bw(t,e){switch(t){case"keyup":return hN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ew(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _o=!1;function fN(t,e){switch(t){case"compositionend":return Ew(e);case"keypress":return e.which!==32?null:(t_=!0,e_);case"textInput":return t=e.data,t===e_&&t_?null:t;default:return null}}function mN(t,e){if(_o)return t==="compositionend"||!sv&&bw(t,e)?(t=yw(),bh=iv=va=null,_o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _w&&e.locale!=="ko"?null:e.data;default:return null}}var pN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function n_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pN[t.type]:e==="textarea"}function ww(t,e,n,r){yo?Mo?Mo.push(r):Mo=[r]:yo=r,e=dd(e,"onChange"),0<e.length&&(n=new tf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sc=null,Nc=null;function gN(t){mx(t,0)}function rf(t){var e=Wl(t);if(dw(e))return t}function r_(t,e){if(t==="change")return e}var Tw=!1;if(Ui){var om;if(Ui){var lm="oninput"in document;if(!lm){var i_=document.createElement("div");i_.setAttribute("oninput","return;"),lm=typeof i_.oninput=="function"}om=lm}else om=!1;Tw=om&&(!document.documentMode||9<document.documentMode)}function a_(){sc&&(sc.detachEvent("onpropertychange",xw),Nc=sc=null)}function xw(t){if(t.propertyName==="value"&&rf(Nc)){var e=[];ww(e,Nc,t,rv(t)),vw(gN,e)}}function vN(t,e,n){t==="focusin"?(a_(),sc=e,Nc=n,sc.attachEvent("onpropertychange",xw)):t==="focusout"&&a_()}function yN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rf(Nc)}function _N(t,e){if(t==="click")return rf(e)}function bN(t,e){if(t==="input"||t==="change")return rf(e)}function EN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mr=typeof Object.is=="function"?Object.is:EN;function Ic(t,e){if(mr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!cp.call(e,i)||!mr(t[i],e[i]))return!1}return!0}function s_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function o_(t,e){var n=s_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=s_(n)}}function Aw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Aw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sw(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Xh(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xh(t.document)}return e}function ov(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var wN=Ui&&"documentMode"in document&&11>=document.documentMode,bo=null,pp=null,oc=null,gp=!1;function l_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gp||bo==null||bo!==Xh(r)||(r=bo,"selectionStart"in r&&ov(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oc&&Ic(oc,r)||(oc=r,r=dd(pp,"onSelect"),0<r.length&&(e=new tf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=bo)))}function rs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Eo={animationend:rs("Animation","AnimationEnd"),animationiteration:rs("Animation","AnimationIteration"),animationstart:rs("Animation","AnimationStart"),transitionrun:rs("Transition","TransitionRun"),transitionstart:rs("Transition","TransitionStart"),transitioncancel:rs("Transition","TransitionCancel"),transitionend:rs("Transition","TransitionEnd")},cm={},Rw={};Ui&&(Rw=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function zs(t){if(cm[t])return cm[t];if(!Eo[t])return t;var e=Eo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Rw)return cm[t]=e[n];return t}var Cw=zs("animationend"),Nw=zs("animationiteration"),Iw=zs("animationstart"),TN=zs("transitionrun"),xN=zs("transitionstart"),AN=zs("transitioncancel"),Dw=zs("transitionend"),Ow=new Map,vp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vp.push("scrollEnd");function Hr(t,e){Ow.set(t,e),Ls(e,[t])}var c_=new WeakMap;function wr(t,e){if(typeof t=="object"&&t!==null){var n=c_.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Y0(e)},c_.set(t,e),e)}return{value:t,source:e,stack:Y0(e)}}var vr=[],wo=0,lv=0;function af(){for(var t=wo,e=lv=wo=0;e<t;){var n=vr[e];vr[e++]=null;var r=vr[e];vr[e++]=null;var i=vr[e];vr[e++]=null;var a=vr[e];if(vr[e++]=null,r!==null&&i!==null){var s=r.pending;s===null?i.next=i:(i.next=s.next,s.next=i),r.pending=i}a!==0&&Mw(n,i,a)}}function sf(t,e,n,r){vr[wo++]=t,vr[wo++]=e,vr[wo++]=n,vr[wo++]=r,lv|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function cv(t,e,n,r){return sf(t,e,n,r),Qh(t)}function gl(t,e){return sf(t,null,null,e),Qh(t)}function Mw(t,e,n){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=t.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(t=a.stateNode,t===null||t._visibility&1||(i=!0)),t=a,a=a.return;return t.tag===3?(a=t.stateNode,i&&e!==null&&(i=31-ur(n),t=a.hiddenUpdates,r=t[i],r===null?t[i]=[e]:r.push(e),e.lane=n|536870912),a):null}function Qh(t){if(50<vc)throw vc=0,Lp=null,Error(ee(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var To={};function SN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(t,e,n,r){return new SN(t,e,n,r)}function uv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ki(t,e){var n=t.alternate;return n===null?(n=ar(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function kw(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function wh(t,e,n,r,i,a){var s=0;if(r=t,typeof t=="function")uv(t)&&(s=1);else if(typeof t=="string")s=CI(t,n,ni.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case ap:return t=ar(31,n,e,i),t.elementType=ap,t.lanes=a,t;case po:return ys(n.children,i,a,e);case JE:s=8,i|=24;break;case np:return t=ar(12,n,e,i|2),t.elementType=np,t.lanes=a,t;case rp:return t=ar(13,n,e,i),t.elementType=rp,t.lanes=a,t;case ip:return t=ar(19,n,e,i),t.elementType=ip,t.lanes=a,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gC:case Ri:s=10;break e;case ew:s=9;break e;case Kg:s=11;break e;case Wg:s=14;break e;case sa:s=16,r=null;break e}s=29,n=Error(ee(130,t===null?"null":typeof t,"")),r=null}return e=ar(s,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function ys(t,e,n,r){return t=ar(7,t,r,e),t.lanes=n,t}function um(t,e,n){return t=ar(6,t,null,e),t.lanes=n,t}function hm(t,e,n){return e=ar(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var xo=[],Ao=0,Kh=null,Wh=0,_r=[],br=0,_s=null,Ci=1,Ni="";function os(t,e){xo[Ao++]=Wh,xo[Ao++]=Kh,Kh=t,Wh=e}function jw(t,e,n){_r[br++]=Ci,_r[br++]=Ni,_r[br++]=_s,_s=t;var r=Ci;t=Ni;var i=32-ur(r)-1;r&=~(1<<i),n+=1;var a=32-ur(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ci=1<<32-ur(e)+i|n<<i|r,Ni=a+t}else Ci=1<<a|n<<i|r,Ni=t}function hv(t){t.return!==null&&(os(t,1),jw(t,1,0))}function dv(t){for(;t===Kh;)Kh=xo[--Ao],xo[Ao]=null,Wh=xo[--Ao],xo[Ao]=null;for(;t===_s;)_s=_r[--br],_r[br]=null,Ni=_r[--br],_r[br]=null,Ci=_r[--br],_r[br]=null}var Pn=null,Nt=null,Fe=!1,bs=null,ei=!1,yp=Error(ee(519));function Cs(t){var e=Error(ee(418,""));throw Dc(wr(e,t)),yp}function u_(t){var e=t.stateNode,n=t.type,r=t.memoizedProps;switch(e[Nn]=t,e[Wn]=r,n){case"dialog":Ne("cancel",e),Ne("close",e);break;case"iframe":case"object":case"embed":Ne("load",e);break;case"video":case"audio":for(n=0;n<kc.length;n++)Ne(kc[n],e);break;case"source":Ne("error",e);break;case"img":case"image":case"link":Ne("error",e),Ne("load",e);break;case"details":Ne("toggle",e);break;case"input":Ne("invalid",e),fw(e,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),Yh(e);break;case"select":Ne("invalid",e);break;case"textarea":Ne("invalid",e),pw(e,r.value,r.defaultValue,r.children),Yh(e)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||r.suppressHydrationWarning===!0||gx(e.textContent,n)?(r.popover!=null&&(Ne("beforetoggle",e),Ne("toggle",e)),r.onScroll!=null&&Ne("scroll",e),r.onScrollEnd!=null&&Ne("scrollend",e),r.onClick!=null&&(e.onclick=mf),e=!0):e=!1,e||Cs(t)}function h_(t){for(Pn=t.return;Pn;)switch(Pn.tag){case 5:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:Pn=Pn.return}}function Pl(t){if(t!==Pn)return!1;if(!Fe)return h_(t),Fe=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||qp(t.type,t.memoizedProps)),n=!n),n&&Nt&&Cs(t),h_(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){Nt=zr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}Nt=null}}else e===27?(e=Nt,Ka(t.type)?(t=Yp,Yp=null,Nt=t):Nt=e):Nt=Pn?zr(t.stateNode.nextSibling):null;return!0}function iu(){Nt=Pn=null,Fe=!1}function d_(){var t=bs;return t!==null&&(Gn===null?Gn=t:Gn.push.apply(Gn,t),bs=null),t}function Dc(t){bs===null?bs=[t]:bs.push(t)}var _p=mi(null),Bs=null,Ii=null;function la(t,e,n){Tt(_p,e._currentValue),e._currentValue=n}function ji(t){t._currentValue=_p.current,cn(_p)}function bp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ep(t,e,n,r){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){var s=i.child;a=a.firstContext;e:for(;a!==null;){var o=a;a=i;for(var l=0;l<e.length;l++)if(o.context===e[l]){a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),bp(a.return,n,t),r||(s=null);break e}a=o.next}}else if(i.tag===18){if(s=i.return,s===null)throw Error(ee(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),bp(s,n,t),s=null}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}}function au(t,e,n,r){t=null;for(var i=e,a=!1;i!==null;){if(!a){if(i.flags&524288)a=!0;else if(i.flags&262144)break}if(i.tag===10){var s=i.alternate;if(s===null)throw Error(ee(387));if(s=s.memoizedProps,s!==null){var o=i.type;mr(i.pendingProps.value,s.value)||(t!==null?t.push(o):t=[o])}}else if(i===Hh.current){if(s=i.alternate,s===null)throw Error(ee(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(Uc):t=[Uc])}i=i.return}t!==null&&Ep(e,t,n,r),e.flags|=262144}function Zh(t){for(t=t.firstContext;t!==null;){if(!mr(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ns(t){Bs=t,Ii=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function In(t){return Pw(Bs,t)}function Zu(t,e){return Bs===null&&Ns(t),Pw(t,e)}function Pw(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Ii===null){if(t===null)throw Error(ee(308));Ii=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Ii=Ii.next=e;return n}var RN=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,r){t.push(r)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},CN=Jt.unstable_scheduleCallback,NN=Jt.unstable_NormalPriority,Kt={$$typeof:Ri,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fv(){return{controller:new RN,data:new Map,refCount:0}}function su(t){t.refCount--,t.refCount===0&&CN(NN,function(){t.controller.abort()})}var lc=null,wp=0,Qo=0,ko=null;function IN(t,e){if(lc===null){var n=lc=[];wp=0,Qo=Pv(),ko={status:"pending",value:void 0,then:function(r){n.push(r)}}}return wp++,e.then(f_,f_),e}function f_(){if(--wp===0&&lc!==null){ko!==null&&(ko.status="fulfilled");var t=lc;lc=null,Qo=0,ko=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function DN(t,e){var n=[],r={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){r.status="fulfilled",r.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(r.status="rejected",r.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),r}var m_=ve.S;ve.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&IN(t,e),m_!==null&&m_(t,e)};var Es=mi(null);function mv(){var t=Es.current;return t!==null?t:ut.pooledCache}function Th(t,e){e===null?Tt(Es,Es.current):Tt(Es,e.pool)}function Uw(){var t=mv();return t===null?null:{parent:Kt._currentValue,pool:t}}var ou=Error(ee(460)),Lw=Error(ee(474)),of=Error(ee(542)),Tp={then:function(){}};function p_(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ju(){}function Vw(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Ju,Ju),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,v_(t),t;default:if(typeof e.status=="string")e.then(Ju,Ju);else{if(t=ut,t!==null&&100<t.shellSuspendCounter)throw Error(ee(482));t=e,t.status="pending",t.then(function(r){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=r}},function(r){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=r}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,v_(t),t}throw cc=e,ou}}var cc=null;function g_(){if(cc===null)throw Error(ee(459));var t=cc;return cc=null,t}function v_(t){if(t===ou||t===of)throw Error(ee(483))}var oa=!1;function pv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Aa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Sa(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,e=Qh(t),Mw(t,null,n),e}return sf(t,r,e,n),Qh(t)}function uc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ow(t,n)}}function dm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Ap=!1;function hc(){if(Ap){var t=ko;if(t!==null)throw t}}function dc(t,e,n,r){Ap=!1;var i=t.updateQueue;oa=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,h=l.next;l.next=null,s===null?a=h:s.next=h,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==s&&(o===null?u.firstBaseUpdate=h:o.next=h,u.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;s=0,u=h=l=null,o=a;do{var f=o.lane&-536870913,m=f!==o.lane;if(m?(Ve&f)===f:(r&f)===f){f!==0&&f===Qo&&(Ap=!0),u!==null&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var b=t,A=o;f=e;var D=n;switch(A.tag){case 1:if(b=A.payload,typeof b=="function"){d=b.call(D,d,f);break e}d=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=A.payload,f=typeof b=="function"?b.call(D,d,f):b,f==null)break e;d=pt({},d,f);break e;case 2:oa=!0}}f=o.callback,f!==null&&(t.flags|=64,m&&(t.flags|=8192),m=i.callbacks,m===null?i.callbacks=[f]:m.push(f))}else m={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(h=u=m,l=d):u=u.next=m,s|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=h,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),Va|=s,t.lanes=s,t.memoizedState=d}}function zw(t,e){if(typeof t!="function")throw Error(ee(191,t));t.call(e)}function Bw(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)zw(n[t],e)}var Ko=mi(null),Jh=mi(0);function y_(t,e){t=zi,Tt(Jh,t),Tt(Ko,e),zi=t|e.baseLanes}function Sp(){Tt(Jh,zi),Tt(Ko,Ko.current)}function gv(){zi=Jh.current,cn(Ko),cn(Jh)}var Ua=0,Re=null,nt=null,Gt=null,ed=!1,jo=!1,Is=!1,td=0,Oc=0,Po=null,ON=0;function Pt(){throw Error(ee(321))}function vv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mr(t[n],e[n]))return!1;return!0}function yv(t,e,n,r,i,a){return Ua=a,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ve.H=t===null||t.memoizedState===null?yT:_T,Is=!1,a=n(r,i),Is=!1,jo&&(a=Hw(e,n,r,i)),Fw(t),a}function Fw(t){ve.H=nd;var e=nt!==null&&nt.next!==null;if(Ua=0,Gt=nt=Re=null,ed=!1,Oc=0,Po=null,e)throw Error(ee(300));t===null||ln||(t=t.dependencies,t!==null&&Zh(t)&&(ln=!0))}function Hw(t,e,n,r){Re=t;var i=0;do{if(jo&&(Po=null),Oc=0,jo=!1,25<=i)throw Error(ee(301));if(i+=1,Gt=nt=null,t.updateQueue!=null){var a=t.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}ve.H=VN,a=e(n,r)}while(jo);return a}function MN(){var t=ve.H,e=t.useState()[0];return e=typeof e.then=="function"?lu(e):e,t=t.useState()[0],(nt!==null?nt.memoizedState:null)!==t&&(Re.flags|=1024),e}function _v(){var t=td!==0;return td=0,t}function bv(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Ev(t){if(ed){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}ed=!1}Ua=0,Gt=nt=Re=null,jo=!1,Oc=td=0,Po=null}function Bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Re.memoizedState=Gt=t:Gt=Gt.next=t,Gt}function Qt(){if(nt===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var e=Gt===null?Re.memoizedState:Gt.next;if(e!==null)Gt=e,nt=t;else{if(t===null)throw Re.alternate===null?Error(ee(467)):Error(ee(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Gt===null?Re.memoizedState=Gt=t:Gt=Gt.next=t}return Gt}function wv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lu(t){var e=Oc;return Oc+=1,Po===null&&(Po=[]),t=Vw(Po,t,e),e=Re,(Gt===null?e.memoizedState:Gt.next)===null&&(e=e.alternate,ve.H=e===null||e.memoizedState===null?yT:_T),t}function lf(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return lu(t);if(t.$$typeof===Ri)return In(t)}throw Error(ee(438,String(t)))}function Tv(t){var e=null,n=Re.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var r=Re.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(e={data:r.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=wv(),Re.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),r=0;r<t;r++)n[r]=vC;return e.index++,n}function Li(t,e){return typeof e=="function"?e(t):e}function xh(t){var e=Qt();return xv(e,nt,t)}function xv(t,e,n){var r=t.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=n;var i=t.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}e.baseQueue=i=a,r.pending=null}if(a=t.baseState,i===null)t.memoizedState=a;else{e=i.next;var o=s=null,l=null,h=e,u=!1;do{var d=h.lane&-536870913;if(d!==h.lane?(Ve&d)===d:(Ua&d)===d){var f=h.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),d===Qo&&(u=!0);else if((Ua&f)===f){h=h.next,f===Qo&&(u=!0);continue}else d={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},l===null?(o=l=d,s=a):l=l.next=d,Re.lanes|=f,Va|=f;d=h.action,Is&&n(a,d),a=h.hasEagerState?h.eagerState:n(a,d)}else f={lane:d,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},l===null?(o=l=f,s=a):l=l.next=f,Re.lanes|=d,Va|=d;h=h.next}while(h!==null&&h!==e);if(l===null?s=a:l.next=o,!mr(a,t.memoizedState)&&(ln=!0,u&&(n=ko,n!==null)))throw n;t.memoizedState=a,t.baseState=s,t.baseQueue=l,r.lastRenderedState=a}return i===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function fm(t){var e=Qt(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);mr(a,e.memoizedState)||(ln=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function qw(t,e,n){var r=Re,i=Qt(),a=Fe;if(a){if(n===void 0)throw Error(ee(407));n=n()}else n=e();var s=!mr((nt||i).memoizedState,n);s&&(i.memoizedState=n,ln=!0),i=i.queue;var o=Yw.bind(null,r,i,t);if(cu(2048,8,o,[t]),i.getSnapshot!==e||s||Gt!==null&&Gt.memoizedState.tag&1){if(r.flags|=2048,Wo(9,cf(),$w.bind(null,r,i,n,e),null),ut===null)throw Error(ee(349));a||Ua&124||Gw(r,e,n)}return n}function Gw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e=wv(),Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $w(t,e,n,r){e.value=n,e.getSnapshot=r,Xw(e)&&Qw(t)}function Yw(t,e,n){return n(function(){Xw(e)&&Qw(t)})}function Xw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mr(t,n)}catch{return!0}}function Qw(t){var e=gl(t,2);e!==null&&dr(e,t,2)}function Rp(t){var e=Bn();if(typeof t=="function"){var n=t;if(t=n(),Is){ga(!0);try{n()}finally{ga(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:t},e}function Kw(t,e,n,r){return t.baseState=n,xv(t,nt,typeof r=="function"?r:Li)}function kN(t,e,n,r,i){if(uf(t))throw Error(ee(485));if(t=e.action,t!==null){var a={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){a.listeners.push(s)}};ve.T!==null?n(!0):a.isTransition=!1,r(a),n=e.pending,n===null?(a.next=e.pending=a,Ww(e,a)):(a.next=n.next,e.pending=n.next=a)}}function Ww(t,e){var n=e.action,r=e.payload,i=t.state;if(e.isTransition){var a=ve.T,s={};ve.T=s;try{var o=n(i,r),l=ve.S;l!==null&&l(s,o),__(t,e,o)}catch(h){Cp(t,e,h)}finally{ve.T=a}}else try{a=n(i,r),__(t,e,a)}catch(h){Cp(t,e,h)}}function __(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){b_(t,e,r)},function(r){return Cp(t,e,r)}):b_(t,e,n)}function b_(t,e,n){e.status="fulfilled",e.value=n,Zw(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Ww(t,n)))}function Cp(t,e,n){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do e.status="rejected",e.reason=n,Zw(e),e=e.next;while(e!==r)}t.action=null}function Zw(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Jw(t,e){return e}function E_(t,e){if(Fe){var n=ut.formState;if(n!==null){e:{var r=Re;if(Fe){if(Nt){t:{for(var i=Nt,a=ei;i.nodeType!==8;){if(!a){i=null;break t}if(i=zr(i.nextSibling),i===null){i=null;break t}}a=i.data,i=a==="F!"||a==="F"?i:null}if(i){Nt=zr(i.nextSibling),r=i.data==="F!";break e}}Cs(r)}r=!1}r&&(e=n[0])}}return n=Bn(),n.memoizedState=n.baseState=e,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jw,lastRenderedState:e},n.queue=r,n=pT.bind(null,Re,r),r.dispatch=n,r=Rp(!1),a=Cv.bind(null,Re,!1,r.queue),r=Bn(),i={state:e,dispatch:null,action:t,pending:null},r.queue=i,n=kN.bind(null,Re,i,a,n),i.dispatch=n,r.memoizedState=t,[e,n,!1]}function w_(t){var e=Qt();return eT(e,nt,t)}function eT(t,e,n){if(e=xv(t,e,Jw)[0],t=xh(Li)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var r=lu(e)}catch(s){throw s===ou?of:s}else r=e;e=Qt();var i=e.queue,a=i.dispatch;return n!==e.memoizedState&&(Re.flags|=2048,Wo(9,cf(),jN.bind(null,i,n),null)),[r,a,t]}function jN(t,e){t.action=e}function T_(t){var e=Qt(),n=nt;if(n!==null)return eT(e,n,t);Qt(),e=e.memoizedState,n=Qt();var r=n.queue.dispatch;return n.memoizedState=t,[e,r,!1]}function Wo(t,e,n,r){return t={tag:t,create:n,deps:r,inst:e,next:null},e=Re.updateQueue,e===null&&(e=wv(),Re.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function cf(){return{destroy:void 0,resource:void 0}}function tT(){return Qt().memoizedState}function Ah(t,e,n,r){var i=Bn();r=r===void 0?null:r,Re.flags|=t,i.memoizedState=Wo(1|e,cf(),n,r)}function cu(t,e,n,r){var i=Qt();r=r===void 0?null:r;var a=i.memoizedState.inst;nt!==null&&r!==null&&vv(r,nt.memoizedState.deps)?i.memoizedState=Wo(e,a,n,r):(Re.flags|=t,i.memoizedState=Wo(1|e,a,n,r))}function x_(t,e){Ah(8390656,8,t,e)}function nT(t,e){cu(2048,8,t,e)}function rT(t,e){return cu(4,2,t,e)}function iT(t,e){return cu(4,4,t,e)}function aT(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sT(t,e,n){n=n!=null?n.concat([t]):null,cu(4,4,aT.bind(null,e,t),n)}function Av(){}function oT(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return e!==null&&vv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function lT(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;if(e!==null&&vv(e,r[1]))return r[0];if(r=t(),Is){ga(!0);try{t()}finally{ga(!1)}}return n.memoizedState=[r,e],r}function Sv(t,e,n){return n===void 0||Ua&1073741824?t.memoizedState=e:(t.memoizedState=n,t=ZT(),Re.lanes|=t,Va|=t,n)}function cT(t,e,n,r){return mr(n,e)?n:Ko.current!==null?(t=Sv(t,n,r),mr(t,e)||(ln=!0),t):Ua&42?(t=ZT(),Re.lanes|=t,Va|=t,e):(ln=!0,t.memoizedState=n)}function uT(t,e,n,r,i){var a=He.p;He.p=a!==0&&8>a?a:8;var s=ve.T,o={};ve.T=o,Cv(t,!1,e,n);try{var l=i(),h=ve.S;if(h!==null&&h(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=DN(l,r);fc(t,e,u,hr(t))}else fc(t,e,r,hr(t))}catch(d){fc(t,e,{then:function(){},status:"rejected",reason:d},hr())}finally{He.p=a,ve.T=s}}function PN(){}function Np(t,e,n,r){if(t.tag!==5)throw Error(ee(476));var i=hT(t).queue;uT(t,i,e,vs,n===null?PN:function(){return dT(t),n(r)})}function hT(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:vs,baseState:vs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:vs},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function dT(t){var e=hT(t).next.queue;fc(t,e,{},hr())}function Rv(){return In(Uc)}function fT(){return Qt().memoizedState}function mT(){return Qt().memoizedState}function UN(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=hr();t=Aa(n);var r=Sa(e,t,n);r!==null&&(dr(r,e,n),uc(r,e,n)),e={cache:fv()},t.payload=e;return}e=e.return}}function LN(t,e,n){var r=hr();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},uf(t)?gT(e,n):(n=cv(t,e,n,r),n!==null&&(dr(n,t,r),vT(n,e,r)))}function pT(t,e,n){var r=hr();fc(t,e,n,r)}function fc(t,e,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(uf(t))gT(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,mr(o,s))return sf(t,e,i,0),ut===null&&af(),!1}catch{}finally{}if(n=cv(t,e,i,r),n!==null)return dr(n,t,r),vT(n,e,r),!0}return!1}function Cv(t,e,n,r){if(r={lane:2,revertLane:Pv(),action:r,hasEagerState:!1,eagerState:null,next:null},uf(t)){if(e)throw Error(ee(479))}else e=cv(t,n,r,2),e!==null&&dr(e,t,2)}function uf(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function gT(t,e){jo=ed=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vT(t,e,n){if(n&4194048){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ow(t,n)}}var nd={readContext:In,use:lf,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt},yT={readContext:In,use:lf,useCallback:function(t,e){return Bn().memoizedState=[t,e===void 0?null:e],t},useContext:In,useEffect:x_,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Ah(4194308,4,aT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ah(4194308,4,t,e)},useInsertionEffect:function(t,e){Ah(4,2,t,e)},useMemo:function(t,e){var n=Bn();e=e===void 0?null:e;var r=t();if(Is){ga(!0);try{t()}finally{ga(!1)}}return n.memoizedState=[r,e],r},useReducer:function(t,e,n){var r=Bn();if(n!==void 0){var i=n(e);if(Is){ga(!0);try{n(e)}finally{ga(!1)}}}else i=e;return r.memoizedState=r.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},r.queue=t,t=t.dispatch=LN.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=Bn();return t={current:t},e.memoizedState=t},useState:function(t){t=Rp(t);var e=t.queue,n=pT.bind(null,Re,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Av,useDeferredValue:function(t,e){var n=Bn();return Sv(n,t,e)},useTransition:function(){var t=Rp(!1);return t=uT.bind(null,Re,t.queue,!0,!1),Bn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var r=Re,i=Bn();if(Fe){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),ut===null)throw Error(ee(349));Ve&124||Gw(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,x_(Yw.bind(null,r,a,t),[t]),r.flags|=2048,Wo(9,cf(),$w.bind(null,r,a,n,e),null),n},useId:function(){var t=Bn(),e=ut.identifierPrefix;if(Fe){var n=Ni,r=Ci;n=(r&~(1<<32-ur(r)-1)).toString(32)+n,e=""+e+"R"+n,n=td++,0<n&&(e+="H"+n.toString(32)),e+=""}else n=ON++,e=""+e+"r"+n.toString(32)+"";return t.memoizedState=e},useHostTransitionStatus:Rv,useFormState:E_,useActionState:E_,useOptimistic:function(t){var e=Bn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Cv.bind(null,Re,!0,n),n.dispatch=e,[t,e]},useMemoCache:Tv,useCacheRefresh:function(){return Bn().memoizedState=UN.bind(null,Re)}},_T={readContext:In,use:lf,useCallback:oT,useContext:In,useEffect:nT,useImperativeHandle:sT,useInsertionEffect:rT,useLayoutEffect:iT,useMemo:lT,useReducer:xh,useRef:tT,useState:function(){return xh(Li)},useDebugValue:Av,useDeferredValue:function(t,e){var n=Qt();return cT(n,nt.memoizedState,t,e)},useTransition:function(){var t=xh(Li)[0],e=Qt().memoizedState;return[typeof t=="boolean"?t:lu(t),e]},useSyncExternalStore:qw,useId:fT,useHostTransitionStatus:Rv,useFormState:w_,useActionState:w_,useOptimistic:function(t,e){var n=Qt();return Kw(n,nt,t,e)},useMemoCache:Tv,useCacheRefresh:mT},VN={readContext:In,use:lf,useCallback:oT,useContext:In,useEffect:nT,useImperativeHandle:sT,useInsertionEffect:rT,useLayoutEffect:iT,useMemo:lT,useReducer:fm,useRef:tT,useState:function(){return fm(Li)},useDebugValue:Av,useDeferredValue:function(t,e){var n=Qt();return nt===null?Sv(n,t,e):cT(n,nt.memoizedState,t,e)},useTransition:function(){var t=fm(Li)[0],e=Qt().memoizedState;return[typeof t=="boolean"?t:lu(t),e]},useSyncExternalStore:qw,useId:fT,useHostTransitionStatus:Rv,useFormState:T_,useActionState:T_,useOptimistic:function(t,e){var n=Qt();return nt!==null?Kw(n,nt,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Tv,useCacheRefresh:mT},Uo=null,Mc=0;function eh(t){var e=Mc;return Mc+=1,Uo===null&&(Uo=[]),Vw(Uo,t,e)}function Ul(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function th(t,e){throw e.$$typeof===pC?Error(ee(525)):(t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function A_(t){var e=t._init;return e(t._payload)}function bT(t){function e(E,x){if(t){var N=E.deletions;N===null?(E.deletions=[x],E.flags|=16):N.push(x)}}function n(E,x){if(!t)return null;for(;x!==null;)e(E,x),x=x.sibling;return null}function r(E){for(var x=new Map;E!==null;)E.key!==null?x.set(E.key,E):x.set(E.index,E),E=E.sibling;return x}function i(E,x){return E=ki(E,x),E.index=0,E.sibling=null,E}function a(E,x,N){return E.index=N,t?(N=E.alternate,N!==null?(N=N.index,N<x?(E.flags|=67108866,x):N):(E.flags|=67108866,x)):(E.flags|=1048576,x)}function s(E){return t&&E.alternate===null&&(E.flags|=67108866),E}function o(E,x,N,O){return x===null||x.tag!==6?(x=um(N,E.mode,O),x.return=E,x):(x=i(x,N),x.return=E,x)}function l(E,x,N,O){var P=N.type;return P===po?u(E,x,N.props.children,O,N.key):x!==null&&(x.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===sa&&A_(P)===x.type)?(x=i(x,N.props),Ul(x,N),x.return=E,x):(x=wh(N.type,N.key,N.props,null,E.mode,O),Ul(x,N),x.return=E,x)}function h(E,x,N,O){return x===null||x.tag!==4||x.stateNode.containerInfo!==N.containerInfo||x.stateNode.implementation!==N.implementation?(x=hm(N,E.mode,O),x.return=E,x):(x=i(x,N.children||[]),x.return=E,x)}function u(E,x,N,O,P){return x===null||x.tag!==7?(x=ys(N,E.mode,O,P),x.return=E,x):(x=i(x,N),x.return=E,x)}function d(E,x,N){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=um(""+x,E.mode,N),x.return=E,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Yu:return N=wh(x.type,x.key,x.props,null,E.mode,N),Ul(N,x),N.return=E,N;case Ql:return x=hm(x,E.mode,N),x.return=E,x;case sa:var O=x._init;return x=O(x._payload),d(E,x,N)}if(Kl(x)||Ml(x))return x=ys(x,E.mode,N,null),x.return=E,x;if(typeof x.then=="function")return d(E,eh(x),N);if(x.$$typeof===Ri)return d(E,Zu(E,x),N);th(E,x)}return null}function f(E,x,N,O){var P=x!==null?x.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return P!==null?null:o(E,x,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Yu:return N.key===P?l(E,x,N,O):null;case Ql:return N.key===P?h(E,x,N,O):null;case sa:return P=N._init,N=P(N._payload),f(E,x,N,O)}if(Kl(N)||Ml(N))return P!==null?null:u(E,x,N,O,null);if(typeof N.then=="function")return f(E,x,eh(N),O);if(N.$$typeof===Ri)return f(E,x,Zu(E,N),O);th(E,N)}return null}function m(E,x,N,O,P){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return E=E.get(N)||null,o(x,E,""+O,P);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Yu:return E=E.get(O.key===null?N:O.key)||null,l(x,E,O,P);case Ql:return E=E.get(O.key===null?N:O.key)||null,h(x,E,O,P);case sa:var R=O._init;return O=R(O._payload),m(E,x,N,O,P)}if(Kl(O)||Ml(O))return E=E.get(N)||null,u(x,E,O,P,null);if(typeof O.then=="function")return m(E,x,N,eh(O),P);if(O.$$typeof===Ri)return m(E,x,N,Zu(x,O),P);th(x,O)}return null}function b(E,x,N,O){for(var P=null,R=null,_=x,g=x=0,y=null;_!==null&&g<N.length;g++){_.index>g?(y=_,_=null):y=_.sibling;var T=f(E,_,N[g],O);if(T===null){_===null&&(_=y);break}t&&_&&T.alternate===null&&e(E,_),x=a(T,x,g),R===null?P=T:R.sibling=T,R=T,_=y}if(g===N.length)return n(E,_),Fe&&os(E,g),P;if(_===null){for(;g<N.length;g++)_=d(E,N[g],O),_!==null&&(x=a(_,x,g),R===null?P=_:R.sibling=_,R=_);return Fe&&os(E,g),P}for(_=r(_);g<N.length;g++)y=m(_,E,g,N[g],O),y!==null&&(t&&y.alternate!==null&&_.delete(y.key===null?g:y.key),x=a(y,x,g),R===null?P=y:R.sibling=y,R=y);return t&&_.forEach(function(C){return e(E,C)}),Fe&&os(E,g),P}function A(E,x,N,O){if(N==null)throw Error(ee(151));for(var P=null,R=null,_=x,g=x=0,y=null,T=N.next();_!==null&&!T.done;g++,T=N.next()){_.index>g?(y=_,_=null):y=_.sibling;var C=f(E,_,T.value,O);if(C===null){_===null&&(_=y);break}t&&_&&C.alternate===null&&e(E,_),x=a(C,x,g),R===null?P=C:R.sibling=C,R=C,_=y}if(T.done)return n(E,_),Fe&&os(E,g),P;if(_===null){for(;!T.done;g++,T=N.next())T=d(E,T.value,O),T!==null&&(x=a(T,x,g),R===null?P=T:R.sibling=T,R=T);return Fe&&os(E,g),P}for(_=r(_);!T.done;g++,T=N.next())T=m(_,E,g,T.value,O),T!==null&&(t&&T.alternate!==null&&_.delete(T.key===null?g:T.key),x=a(T,x,g),R===null?P=T:R.sibling=T,R=T);return t&&_.forEach(function(I){return e(E,I)}),Fe&&os(E,g),P}function D(E,x,N,O){if(typeof N=="object"&&N!==null&&N.type===po&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Yu:e:{for(var P=N.key;x!==null;){if(x.key===P){if(P=N.type,P===po){if(x.tag===7){n(E,x.sibling),O=i(x,N.props.children),O.return=E,E=O;break e}}else if(x.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===sa&&A_(P)===x.type){n(E,x.sibling),O=i(x,N.props),Ul(O,N),O.return=E,E=O;break e}n(E,x);break}else e(E,x);x=x.sibling}N.type===po?(O=ys(N.props.children,E.mode,O,N.key),O.return=E,E=O):(O=wh(N.type,N.key,N.props,null,E.mode,O),Ul(O,N),O.return=E,E=O)}return s(E);case Ql:e:{for(P=N.key;x!==null;){if(x.key===P)if(x.tag===4&&x.stateNode.containerInfo===N.containerInfo&&x.stateNode.implementation===N.implementation){n(E,x.sibling),O=i(x,N.children||[]),O.return=E,E=O;break e}else{n(E,x);break}else e(E,x);x=x.sibling}O=hm(N,E.mode,O),O.return=E,E=O}return s(E);case sa:return P=N._init,N=P(N._payload),D(E,x,N,O)}if(Kl(N))return b(E,x,N,O);if(Ml(N)){if(P=Ml(N),typeof P!="function")throw Error(ee(150));return N=P.call(N),A(E,x,N,O)}if(typeof N.then=="function")return D(E,x,eh(N),O);if(N.$$typeof===Ri)return D(E,x,Zu(E,N),O);th(E,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,x!==null&&x.tag===6?(n(E,x.sibling),O=i(x,N),O.return=E,E=O):(n(E,x),O=um(N,E.mode,O),O.return=E,E=O),s(E)):n(E,x)}return function(E,x,N,O){try{Mc=0;var P=D(E,x,N,O);return Uo=null,P}catch(_){if(_===ou||_===of)throw _;var R=ar(29,_,null,E.mode);return R.lanes=O,R.return=E,R}finally{}}}var Zo=bT(!0),ET=bT(!1),Cr=mi(null),ii=null;function ca(t){var e=t.alternate;Tt(Wt,Wt.current&1),Tt(Cr,t),ii===null&&(e===null||Ko.current!==null||e.memoizedState!==null)&&(ii=t)}function wT(t){if(t.tag===22){if(Tt(Wt,Wt.current),Tt(Cr,t),ii===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(ii=t)}}else ua()}function ua(){Tt(Wt,Wt.current),Tt(Cr,Cr.current)}function Di(t){cn(Cr),ii===t&&(ii=null),cn(Wt)}var Wt=mi(0);function rd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||$p(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function mm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ip={enqueueSetState:function(t,e,n){t=t._reactInternals;var r=hr(),i=Aa(r);i.payload=e,n!=null&&(i.callback=n),e=Sa(t,i,r),e!==null&&(dr(e,t,r),uc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=hr(),i=Aa(r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Sa(t,i,r),e!==null&&(dr(e,t,r),uc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hr(),r=Aa(n);r.tag=2,e!=null&&(r.callback=e),e=Sa(t,r,n),e!==null&&(dr(e,t,n),uc(e,t,n))}};function S_(t,e,n,r,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,s):e.prototype&&e.prototype.isPureReactComponent?!Ic(n,r)||!Ic(i,a):!0}function R_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ip.enqueueReplaceState(e,e.state,null)}function Ds(t,e){var n=e;if("ref"in e){n={};for(var r in e)r!=="ref"&&(n[r]=e[r])}if(t=t.defaultProps){n===e&&(n=pt({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}var id=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function TT(t){id(t)}function xT(t){console.error(t)}function AT(t){id(t)}function ad(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(r){setTimeout(function(){throw r})}}function C_(t,e,n){try{var r=t.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Dp(t,e,n){return n=Aa(n),n.tag=3,n.payload={element:null},n.callback=function(){ad(t,e)},n}function ST(t){return t=Aa(t),t.tag=3,t}function RT(t,e,n,r){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var a=r.value;t.payload=function(){return i(a)},t.callback=function(){C_(e,n,r)}}var s=n.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){C_(e,n,r),typeof i!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var o=r.stack;this.componentDidCatch(r.value,{componentStack:o!==null?o:""})})}function zN(t,e,n,r,i){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(e=n.alternate,e!==null&&au(e,n,i,!0),n=Cr.current,n!==null){switch(n.tag){case 13:return ii===null?Vp():n.alternate===null&&It===0&&(It=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Tp?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([r]):e.add(r),Am(t,r,i)),!1;case 22:return n.flags|=65536,r===Tp?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([r]):n.add(r)),Am(t,r,i)),!1}throw Error(ee(435,n.tag))}return Am(t,r,i),Vp(),!1}if(Fe)return e=Cr.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,r!==yp&&(t=Error(ee(422),{cause:r}),Dc(wr(t,n)))):(r!==yp&&(e=Error(ee(423),{cause:r}),Dc(wr(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,r=wr(r,n),i=Dp(t.stateNode,r,i),dm(t,i),It!==4&&(It=2)),!1;var a=Error(ee(520),{cause:r});if(a=wr(a,n),gc===null?gc=[a]:gc.push(a),It!==4&&(It=2),e===null)return!0;r=wr(r,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=Dp(n.stateNode,r,t),dm(n,t),!1;case 1:if(e=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(Ra===null||!Ra.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,i=ST(i),RT(i,t,n,r),dm(n,i),!1}n=n.return}while(n!==null);return!1}var CT=Error(ee(461)),ln=!1;function gn(t,e,n,r){e.child=t===null?ET(e,null,n,r):Zo(e,t.child,n,r)}function N_(t,e,n,r,i){n=n.render;var a=e.ref;if("ref"in r){var s={};for(var o in r)o!=="ref"&&(s[o]=r[o])}else s=r;return Ns(e),r=yv(t,e,n,s,a,i),o=_v(),t!==null&&!ln?(bv(t,e,i),Vi(t,e,i)):(Fe&&o&&hv(e),e.flags|=1,gn(t,e,r,i),e.child)}function I_(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!uv(a)&&a.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=a,NT(t,e,a,r,i)):(t=wh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!Nv(t,i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ic,n(s,r)&&t.ref===e.ref)return Vi(t,e,i)}return e.flags|=1,t=ki(a,r),t.ref=e.ref,t.return=e,e.child=t}function NT(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(Ic(a,r)&&t.ref===e.ref)if(ln=!1,e.pendingProps=r=a,Nv(t,i))t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,Vi(t,e,i)}return Op(t,e,n,r,i)}function IT(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden"){if(e.flags&128){if(r=a!==null?a.baseLanes|n:n,t!==null){for(i=e.child=t.child,a=0;i!==null;)a=a|i.lanes|i.childLanes,i=i.sibling;e.childLanes=a&~r}else e.childLanes=0,e.child=null;return D_(t,e,r,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Th(e,a!==null?a.cachePool:null),a!==null?y_(e,a):Sp(),wT(e);else return e.lanes=e.childLanes=536870912,D_(t,e,a!==null?a.baseLanes|n:n,n)}else a!==null?(Th(e,a.cachePool),y_(e,a),ua(),e.memoizedState=null):(t!==null&&Th(e,null),Sp(),ua());return gn(t,e,i,n),e.child}function D_(t,e,n,r){var i=mv();return i=i===null?null:{parent:Kt._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},t!==null&&Th(e,null),Sp(),wT(e),t!==null&&au(t,e,r,!0),null}function Sh(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(ee(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Op(t,e,n,r,i){return Ns(e),n=yv(t,e,n,r,void 0,i),r=_v(),t!==null&&!ln?(bv(t,e,i),Vi(t,e,i)):(Fe&&r&&hv(e),e.flags|=1,gn(t,e,n,i),e.child)}function O_(t,e,n,r,i,a){return Ns(e),e.updateQueue=null,n=Hw(e,r,n,i),Fw(t),r=_v(),t!==null&&!ln?(bv(t,e,a),Vi(t,e,a)):(Fe&&r&&hv(e),e.flags|=1,gn(t,e,n,a),e.child)}function M_(t,e,n,r,i){if(Ns(e),e.stateNode===null){var a=To,s=n.contextType;typeof s=="object"&&s!==null&&(a=In(s)),a=new n(r,a),e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Ip,e.stateNode=a,a._reactInternals=e,a=e.stateNode,a.props=r,a.state=e.memoizedState,a.refs={},pv(e),s=n.contextType,a.context=typeof s=="object"&&s!==null?In(s):To,a.state=e.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(mm(e,n,s,r),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&Ip.enqueueReplaceState(a,a.state,null),dc(e,r,a,i),hc(),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!0}else if(t===null){a=e.stateNode;var o=e.memoizedProps,l=Ds(n,o);a.props=l;var h=a.context,u=n.contextType;s=To,typeof u=="object"&&u!==null&&(s=In(u));var d=n.getDerivedStateFromProps;u=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o||h!==s)&&R_(e,a,r,s),oa=!1;var f=e.memoizedState;a.state=f,dc(e,r,a,i),hc(),h=e.memoizedState,o||f!==h||oa?(typeof d=="function"&&(mm(e,n,d,r),h=e.memoizedState),(l=oa||S_(e,n,l,r,f,h,s))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),a.props=r,a.state=h,a.context=s,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,xp(t,e),s=e.memoizedProps,u=Ds(n,s),a.props=u,d=e.pendingProps,f=a.context,h=n.contextType,l=To,typeof h=="object"&&h!==null&&(l=In(h)),o=n.getDerivedStateFromProps,(h=typeof o=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||f!==l)&&R_(e,a,r,l),oa=!1,f=e.memoizedState,a.state=f,dc(e,r,a,i),hc();var m=e.memoizedState;s!==d||f!==m||oa||t!==null&&t.dependencies!==null&&Zh(t.dependencies)?(typeof o=="function"&&(mm(e,n,o,r),m=e.memoizedState),(u=oa||S_(e,n,u,r,f,m,l)||t!==null&&t.dependencies!==null&&Zh(t.dependencies))?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,m,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),a.props=r,a.state=m,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return a=r,Sh(t,e),r=(e.flags&128)!==0,a||r?(a=e.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:a.render(),e.flags|=1,t!==null&&r?(e.child=Zo(e,t.child,null,i),e.child=Zo(e,null,n,i)):gn(t,e,n,i),e.memoizedState=a.state,t=e.child):t=Vi(t,e,i),t}function k_(t,e,n,r){return iu(),e.flags|=256,gn(t,e,n,r),e.child}var pm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gm(t){return{baseLanes:t,cachePool:Uw()}}function vm(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=xr),t}function DT(t,e,n){var r=e.pendingProps,i=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(Wt.current&2)!==0),s&&(i=!0,e.flags&=-129),s=(e.flags&32)!==0,e.flags&=-33,t===null){if(Fe){if(i?ca(e):ua(),Fe){var o=Nt,l;if(l=o){e:{for(l=o,o=ei;l.nodeType!==8;){if(!o){o=null;break e}if(l=zr(l.nextSibling),l===null){o=null;break e}}o=l}o!==null?(e.memoizedState={dehydrated:o,treeContext:_s!==null?{id:Ci,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},l=ar(18,null,null,0),l.stateNode=o,l.return=e,e.child=l,Pn=e,Nt=null,l=!0):l=!1}l||Cs(e)}if(o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return $p(o)?e.lanes=32:e.lanes=536870912,null;Di(e)}return o=r.children,r=r.fallback,i?(ua(),i=e.mode,o=sd({mode:"hidden",children:o},i),r=ys(r,i,n,null),o.return=e,r.return=e,o.sibling=r,e.child=o,i=e.child,i.memoizedState=gm(n),i.childLanes=vm(t,s,n),e.memoizedState=pm,r):(ca(e),Mp(e,o))}if(l=t.memoizedState,l!==null&&(o=l.dehydrated,o!==null)){if(a)e.flags&256?(ca(e),e.flags&=-257,e=ym(t,e,n)):e.memoizedState!==null?(ua(),e.child=t.child,e.flags|=128,e=null):(ua(),i=r.fallback,o=e.mode,r=sd({mode:"visible",children:r.children},o),i=ys(i,o,n,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,Zo(e,t.child,null,n),r=e.child,r.memoizedState=gm(n),r.childLanes=vm(t,s,n),e.memoizedState=pm,e=i);else if(ca(e),$p(o)){if(s=o.nextSibling&&o.nextSibling.dataset,s)var h=s.dgst;s=h,r=Error(ee(419)),r.stack="",r.digest=s,Dc({value:r,source:null,stack:null}),e=ym(t,e,n)}else if(ln||au(t,e,n,!1),s=(n&t.childLanes)!==0,ln||s){if(s=ut,s!==null&&(r=n&-n,r=r&42?1:Jg(r),r=r&(s.suspendedLanes|n)?0:r,r!==0&&r!==l.retryLane))throw l.retryLane=r,gl(t,r),dr(s,t,r),CT;o.data==="$?"||Vp(),e=ym(t,e,n)}else o.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,Nt=zr(o.nextSibling),Pn=e,Fe=!0,bs=null,ei=!1,t!==null&&(_r[br++]=Ci,_r[br++]=Ni,_r[br++]=_s,Ci=t.id,Ni=t.overflow,_s=e),e=Mp(e,r.children),e.flags|=4096);return e}return i?(ua(),i=r.fallback,o=e.mode,l=t.child,h=l.sibling,r=ki(l,{mode:"hidden",children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,h!==null?i=ki(h,i):(i=ys(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o===null?o=gm(n):(l=o.cachePool,l!==null?(h=Kt._currentValue,l=l.parent!==h?{parent:h,pool:h}:l):l=Uw(),o={baseLanes:o.baseLanes|n,cachePool:l}),i.memoizedState=o,i.childLanes=vm(t,s,n),e.memoizedState=pm,r):(ca(e),n=t.child,t=n.sibling,n=ki(n,{mode:"visible",children:r.children}),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n)}function Mp(t,e){return e=sd({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function sd(t,e){return t=ar(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function ym(t,e,n){return Zo(e,t.child,null,n),t=Mp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function j_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bp(t.return,e,n)}function _m(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function OT(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(gn(t,e,r.children,n),r=Wt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&j_(t,n,e);else if(t.tag===19)j_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}switch(Tt(Wt,r),i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&rd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),_m(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&rd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}_m(e,!0,n,null,a);break;case"together":_m(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Va|=e.lanes,!(n&e.childLanes))if(t!==null){if(au(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=ki(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ki(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Nv(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Zh(t)))}function BN(t,e,n){switch(e.tag){case 3:qh(e,e.stateNode.containerInfo),la(e,Kt,t.memoizedState.cache),iu();break;case 27:case 5:lp(e);break;case 4:qh(e,e.stateNode.containerInfo);break;case 10:la(e,e.type,e.memoizedProps.value);break;case 13:var r=e.memoizedState;if(r!==null)return r.dehydrated!==null?(ca(e),e.flags|=128,null):n&e.child.childLanes?DT(t,e,n):(ca(e),t=Vi(t,e,n),t!==null?t.sibling:null);ca(e);break;case 19:var i=(t.flags&128)!==0;if(r=(n&e.childLanes)!==0,r||(au(t,e,n,!1),r=(n&e.childLanes)!==0),i){if(r)return OT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Tt(Wt,Wt.current),r)break;return null;case 22:case 23:return e.lanes=0,IT(t,e,n);case 24:la(e,Kt,t.memoizedState.cache)}return Vi(t,e,n)}function MT(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)ln=!0;else{if(!Nv(t,n)&&!(e.flags&128))return ln=!1,BN(t,e,n);ln=!!(t.flags&131072)}else ln=!1,Fe&&e.flags&1048576&&jw(e,Wh,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var r=e.elementType,i=r._init;if(r=i(r._payload),e.type=r,typeof r=="function")uv(r)?(t=Ds(r,t),e.tag=1,e=M_(null,e,r,t,n)):(e.tag=0,e=Op(null,e,r,t,n));else{if(r!=null){if(i=r.$$typeof,i===Kg){e.tag=11,e=N_(null,e,r,t,n);break e}else if(i===Wg){e.tag=14,e=I_(null,e,r,t,n);break e}}throw e=sp(r)||r,Error(ee(306,e,""))}}return e;case 0:return Op(t,e,e.type,e.pendingProps,n);case 1:return r=e.type,i=Ds(r,e.pendingProps),M_(t,e,r,i,n);case 3:e:{if(qh(e,e.stateNode.containerInfo),t===null)throw Error(ee(387));r=e.pendingProps;var a=e.memoizedState;i=a.element,xp(t,e),dc(e,r,null,n);var s=e.memoizedState;if(r=s.cache,la(e,Kt,r),r!==a.cache&&Ep(e,[Kt],n,!0),hc(),r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){e=k_(t,e,r,n);break e}else if(r!==i){i=wr(Error(ee(424)),e),Dc(i),e=k_(t,e,r,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Nt=zr(t.firstChild),Pn=e,Fe=!0,bs=null,ei=!0,n=ET(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(iu(),r===i){e=Vi(t,e,n);break e}gn(t,e,r,n)}e=e.child}return e;case 26:return Sh(t,e),t===null?(n=Z_(e.type,null,e.pendingProps,null))?e.memoizedState=n:Fe||(n=e.type,t=e.pendingProps,r=fd(xa.current).createElement(n),r[Nn]=e,r[Wn]=t,bn(r,n,t),on(r),e.stateNode=r):e.memoizedState=Z_(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return lp(e),t===null&&Fe&&(r=e.stateNode=_x(e.type,e.pendingProps,xa.current),Pn=e,ei=!0,i=Nt,Ka(e.type)?(Yp=i,Nt=zr(r.firstChild)):Nt=i),gn(t,e,e.pendingProps.children,n),Sh(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Fe&&((i=r=Nt)&&(r=pI(r,e.type,e.pendingProps,ei),r!==null?(e.stateNode=r,Pn=e,Nt=zr(r.firstChild),ei=!1,i=!0):i=!1),i||Cs(e)),lp(e),i=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,r=a.children,qp(i,a)?r=null:s!==null&&qp(i,s)&&(e.flags|=32),e.memoizedState!==null&&(i=yv(t,e,MN,null,null,n),Uc._currentValue=i),Sh(t,e),gn(t,e,r,n),e.child;case 6:return t===null&&Fe&&((t=n=Nt)&&(n=gI(n,e.pendingProps,ei),n!==null?(e.stateNode=n,Pn=e,Nt=null,t=!0):t=!1),t||Cs(e)),null;case 13:return DT(t,e,n);case 4:return qh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zo(e,null,r,n):gn(t,e,r,n),e.child;case 11:return N_(t,e,e.type,e.pendingProps,n);case 7:return gn(t,e,e.pendingProps,n),e.child;case 8:return gn(t,e,e.pendingProps.children,n),e.child;case 12:return gn(t,e,e.pendingProps.children,n),e.child;case 10:return r=e.pendingProps,la(e,e.type,r.value),gn(t,e,r.children,n),e.child;case 9:return i=e.type._context,r=e.pendingProps.children,Ns(e),i=In(i),r=r(i),e.flags|=1,gn(t,e,r,n),e.child;case 14:return I_(t,e,e.type,e.pendingProps,n);case 15:return NT(t,e,e.type,e.pendingProps,n);case 19:return OT(t,e,n);case 31:return r=e.pendingProps,n=e.mode,r={mode:r.mode,children:r.children},t===null?(n=sd(r,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=ki(t.child,r),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return IT(t,e,n);case 24:return Ns(e),r=In(Kt),t===null?(i=mv(),i===null&&(i=ut,a=fv(),i.pooledCache=a,a.refCount++,a!==null&&(i.pooledCacheLanes|=n),i=a),e.memoizedState={parent:r,cache:i},pv(e),la(e,Kt,i)):(t.lanes&n&&(xp(t,e),dc(e,null,null,n),hc()),i=t.memoizedState,a=e.memoizedState,i.parent!==r?(i={parent:r,cache:r},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),la(e,Kt,r)):(r=a.cache,la(e,Kt,r),r!==i.cache&&Ep(e,[Kt],n,!0))),gn(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(ee(156,e.tag))}function wi(t){t.flags|=4}function P_(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!wx(e)){if(e=Cr.current,e!==null&&((Ve&4194048)===Ve?ii!==null:(Ve&62914560)!==Ve&&!(Ve&536870912)||e!==ii))throw cc=Tp,Lw;t.flags|=8192}}function nh(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?aw():536870912,t.lanes|=e,Jo|=e)}function Ll(t,e){if(!Fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function FN(t,e,n){var r=e.pendingProps;switch(dv(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return At(e),null;case 3:return n=e.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),ji(Kt),$o(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Pl(e)?wi(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,d_())),At(e),null;case 26:return n=e.memoizedState,t===null?(wi(e),n!==null?(At(e),P_(e,n)):(At(e),e.flags&=-16777217)):n?n!==t.memoizedState?(wi(e),At(e),P_(e,n)):(At(e),e.flags&=-16777217):(t.memoizedProps!==r&&wi(e),At(e),e.flags&=-16777217),null;case 27:Gh(e),n=xa.current;var i=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==r&&wi(e);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return At(e),null}t=ni.current,Pl(e)?u_(e):(t=_x(i,r,n),e.stateNode=t,wi(e))}return At(e),null;case 5:if(Gh(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==r&&wi(e);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return At(e),null}if(t=ni.current,Pl(e))u_(e);else{switch(i=fd(xa.current),t){case 1:t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof r.is=="string"?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?t.multiple=!0:r.size&&(t.size=r.size);break;default:t=typeof r.is=="string"?i.createElement(n,{is:r.is}):i.createElement(n)}}t[Nn]=e,t[Wn]=r;e:for(i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}e.stateNode=t;e:switch(bn(t,n,r),n){case"button":case"input":case"select":case"textarea":t=!!r.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&wi(e)}}return At(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==r&&wi(e);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(t=xa.current,Pl(e)){if(t=e.stateNode,n=e.memoizedProps,r=null,i=Pn,i!==null)switch(i.tag){case 27:case 5:r=i.memoizedProps}t[Nn]=e,t=!!(t.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||gx(t.nodeValue,n)),t||Cs(e)}else t=fd(t).createTextNode(r),t[Nn]=e,e.stateNode=t}return At(e),null;case 13:if(r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=Pl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ee(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ee(317));i[Nn]=e}else iu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),i=!1}else i=d_(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(Di(e),e):(Di(e),null)}if(Di(e),e.flags&128)return e.lanes=n,e;if(n=r!==null,t=t!==null&&t.memoizedState!==null,n){r=e.child,i=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(i=r.alternate.memoizedState.cachePool.pool);var a=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),nh(e,e.updateQueue),At(e),null;case 4:return $o(),t===null&&Uv(e.stateNode.containerInfo),At(e),null;case 10:return ji(e.type),At(e),null;case 19:if(cn(Wt),i=e.memoizedState,i===null)return At(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Ll(i,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=rd(t),a!==null){for(e.flags|=128,Ll(i,!1),t=a.updateQueue,e.updateQueue=t,nh(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)kw(n,t),n=n.sibling;return Tt(Wt,Wt.current&1|2),e.child}t=t.sibling}i.tail!==null&&ri()>ld&&(e.flags|=128,r=!0,Ll(i,!1),e.lanes=4194304)}else{if(!r)if(t=rd(a),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,nh(e,t),Ll(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Fe)return At(e),null}else 2*ri()-i.renderingStartTime>ld&&n!==536870912&&(e.flags|=128,r=!0,Ll(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(t=i.last,t!==null?t.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ri(),e.sibling=null,t=Wt.current,Tt(Wt,r?t&1|2:t&1),e):(At(e),null);case 22:case 23:return Di(e),gv(),r=e.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(e.flags|=8192):r&&(e.flags|=8192),r?n&536870912&&!(e.flags&128)&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),n=e.updateQueue,n!==null&&nh(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),r=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),r!==n&&(e.flags|=2048),t!==null&&cn(Es),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),ji(Kt),At(e),null;case 25:return null;case 30:return null}throw Error(ee(156,e.tag))}function HN(t,e){switch(dv(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ji(Kt),$o(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Gh(e),null;case 13:if(Di(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));iu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return cn(Wt),null;case 4:return $o(),null;case 10:return ji(e.type),null;case 22:case 23:return Di(e),gv(),t!==null&&cn(Es),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return ji(Kt),null;case 25:return null;default:return null}}function kT(t,e){switch(dv(e),e.tag){case 3:ji(Kt),$o();break;case 26:case 27:case 5:Gh(e);break;case 4:$o();break;case 13:Di(e);break;case 19:cn(Wt);break;case 10:ji(e.type);break;case 22:case 23:Di(e),gv(),t!==null&&cn(Es);break;case 24:ji(Kt)}}function uu(t,e){try{var n=e.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var i=r.next;n=i;do{if((n.tag&t)===t){r=void 0;var a=n.create,s=n.inst;r=a(),s.destroy=r}n=n.next}while(n!==i)}}catch(o){st(e,e.return,o)}}function La(t,e,n){try{var r=e.updateQueue,i=r!==null?r.lastEffect:null;if(i!==null){var a=i.next;r=a;do{if((r.tag&t)===t){var s=r.inst,o=s.destroy;if(o!==void 0){s.destroy=void 0,i=e;var l=n,h=o;try{h()}catch(u){st(i,l,u)}}}r=r.next}while(r!==a)}}catch(u){st(e,e.return,u)}}function jT(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{Bw(e,n)}catch(r){st(t,t.return,r)}}}function PT(t,e,n){n.props=Ds(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(r){st(t,e,r)}}function mc(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof n=="function"?t.refCleanup=n(r):n.current=r}}catch(i){st(t,e,i)}}function ti(t,e){var n=t.ref,r=t.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(i){st(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){st(t,e,i)}else n.current=null}function UT(t){var e=t.type,n=t.memoizedProps,r=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){st(t,t.return,i)}}function bm(t,e,n){try{var r=t.stateNode;uI(r,t.type,n,e),r[Wn]=e}catch(i){st(t,t.return,i)}}function LT(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ka(t.type)||t.tag===4}function Em(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||LT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ka(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mf));else if(r!==4&&(r===27&&Ka(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(kp(t,e,n),t=t.sibling;t!==null;)kp(t,e,n),t=t.sibling}function od(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(r===27&&Ka(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(od(t,e,n),t=t.sibling;t!==null;)od(t,e,n),t=t.sibling}function VT(t){var e=t.stateNode,n=t.memoizedProps;try{for(var r=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);bn(e,r,n),e[Nn]=t,e[Wn]=n}catch(a){st(t,t.return,a)}}var Ai=!1,Ut=!1,wm=!1,U_=typeof WeakSet=="function"?WeakSet:Set,sn=null;function qN(t,e){if(t=t.containerInfo,Fp=vd,t=Sw(t),ov(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,l=-1,h=0,u=0,d=t,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(o=s+i),d!==a||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++h===i&&(o=s),f===a&&++u===r&&(l=s),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hp={focusedElem:t,selectionRange:n},vd=!1,sn=e;sn!==null;)if(e=sn,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,sn=t;else for(;sn!==null;){switch(e=sn,a=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&a!==null){t=void 0,n=e,i=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var b=Ds(n.type,i,n.elementType===n.type);t=r.getSnapshotBeforeUpdate(b,a),r.__reactInternalSnapshotBeforeUpdate=t}catch(A){st(n,n.return,A)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Gp(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Gp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(ee(163))}if(t=e.sibling,t!==null){t.return=e.return,sn=t;break}sn=e.return}}function zT(t,e,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:ta(t,n),r&4&&uu(5,n);break;case 1:if(ta(t,n),r&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(s){st(n,n.return,s)}else{var i=Ds(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(s){st(n,n.return,s)}}r&64&&jT(n),r&512&&mc(n,n.return);break;case 3:if(ta(t,n),r&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{Bw(t,e)}catch(s){st(n,n.return,s)}}break;case 27:e===null&&r&4&&VT(n);case 26:case 5:ta(t,n),e===null&&r&4&&UT(n),r&512&&mc(n,n.return);break;case 12:ta(t,n);break;case 13:ta(t,n),r&4&&HT(t,n),r&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=JN.bind(null,n),vI(t,n))));break;case 22:if(r=n.memoizedState!==null||Ai,!r){e=e!==null&&e.memoizedState!==null||Ut,i=Ai;var a=Ut;Ai=r,(Ut=e)&&!a?ia(t,n,(n.subtreeFlags&8772)!==0):ta(t,n),Ai=i,Ut=a}break;case 30:break;default:ta(t,n)}}function BT(t){var e=t.alternate;e!==null&&(t.alternate=null,BT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&tv(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var yt=null,Fn=!1;function Ti(t,e,n){for(n=n.child;n!==null;)FT(t,e,n),n=n.sibling}function FT(t,e,n){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(Jc,n)}catch{}switch(n.tag){case 26:Ut||ti(n,e),Ti(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ut||ti(n,e);var r=yt,i=Fn;Ka(n.type)&&(yt=n.stateNode,Fn=!1),Ti(t,e,n),yc(n.stateNode),yt=r,Fn=i;break;case 5:Ut||ti(n,e);case 6:if(r=yt,i=Fn,yt=null,Ti(t,e,n),yt=r,Fn=i,yt!==null)if(Fn)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(n.stateNode)}catch(a){st(n,e,a)}else try{yt.removeChild(n.stateNode)}catch(a){st(n,e,a)}break;case 18:yt!==null&&(Fn?(t=yt,Q_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),zc(t)):Q_(yt,n.stateNode));break;case 4:r=yt,i=Fn,yt=n.stateNode.containerInfo,Fn=!0,Ti(t,e,n),yt=r,Fn=i;break;case 0:case 11:case 14:case 15:Ut||La(2,n,e),Ut||La(4,n,e),Ti(t,e,n);break;case 1:Ut||(ti(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"&&PT(n,e,r)),Ti(t,e,n);break;case 21:Ti(t,e,n);break;case 22:Ut=(r=Ut)||n.memoizedState!==null,Ti(t,e,n),Ut=r;break;default:Ti(t,e,n)}}function HT(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{zc(t)}catch(n){st(e,e.return,n)}}function GN(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new U_),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new U_),e;default:throw Error(ee(435,t.tag))}}function Tm(t,e){var n=GN(t);e.forEach(function(r){var i=eI.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}function tr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r],a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 27:if(Ka(o.type)){yt=o.stateNode,Fn=!1;break e}break;case 5:yt=o.stateNode,Fn=!1;break e;case 3:case 4:yt=o.stateNode.containerInfo,Fn=!0;break e}o=o.return}if(yt===null)throw Error(ee(160));FT(a,s,i),yt=null,Fn=!1,a=i.alternate,a!==null&&(a.return=null),i.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)qT(e,t),e=e.sibling}var Pr=null;function qT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:tr(e,t),nr(t),r&4&&(La(3,t,t.return),uu(3,t),La(5,t,t.return));break;case 1:tr(e,t),nr(t),r&512&&(Ut||n===null||ti(n,n.return)),r&64&&Ai&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var i=Pr;if(tr(e,t),nr(t),r&512&&(Ut||n===null||ti(n,n.return)),r&4){var a=n!==null?n.memoizedState:null;if(r=t.memoizedState,n===null)if(r===null)if(t.stateNode===null){e:{r=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":a=i.getElementsByTagName("title")[0],(!a||a[nu]||a[Nn]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector("head > title"))),bn(a,r,n),a[Nn]=t,on(a),r=a;break e;case"link":var s=eb("link","href",i).get(r+(n.href||""));if(s){for(var o=0;o<s.length;o++)if(a=s[o],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(o,1);break t}}a=i.createElement(r),bn(a,r,n),i.head.appendChild(a);break;case"meta":if(s=eb("meta","content",i).get(r+(n.content||""))){for(o=0;o<s.length;o++)if(a=s[o],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){s.splice(o,1);break t}}a=i.createElement(r),bn(a,r,n),i.head.appendChild(a);break;default:throw Error(ee(468,r))}a[Nn]=t,on(a),r=a}t.stateNode=r}else tb(i,t.type,t.stateNode);else t.stateNode=J_(i,r,t.memoizedProps);else a!==r?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,r===null?tb(i,t.type,t.stateNode):J_(i,r,t.memoizedProps)):r===null&&t.stateNode!==null&&bm(t,t.memoizedProps,n.memoizedProps)}break;case 27:tr(e,t),nr(t),r&512&&(Ut||n===null||ti(n,n.return)),n!==null&&r&4&&bm(t,t.memoizedProps,n.memoizedProps);break;case 5:if(tr(e,t),nr(t),r&512&&(Ut||n===null||ti(n,n.return)),t.flags&32){i=t.stateNode;try{Xo(i,"")}catch(m){st(t,t.return,m)}}r&4&&t.stateNode!=null&&(i=t.memoizedProps,bm(t,i,n!==null?n.memoizedProps:i)),r&1024&&(wm=!0);break;case 6:if(tr(e,t),nr(t),r&4){if(t.stateNode===null)throw Error(ee(162));r=t.memoizedProps,n=t.stateNode;try{n.nodeValue=r}catch(m){st(t,t.return,m)}}break;case 3:if(Nh=null,i=Pr,Pr=md(e.containerInfo),tr(e,t),Pr=i,nr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zc(e.containerInfo)}catch(m){st(t,t.return,m)}wm&&(wm=!1,GT(t));break;case 4:r=Pr,Pr=md(t.stateNode.containerInfo),tr(e,t),nr(t),Pr=r;break;case 12:tr(e,t),nr(t);break;case 13:tr(e,t),nr(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(kv=ri()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Tm(t,r)));break;case 22:i=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,h=Ai,u=Ut;if(Ai=h||i,Ut=u||l,tr(e,t),Ut=u,Ai=h,nr(t),r&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||l||Ai||Ut||ls(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(a=l.stateNode,i)s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,f=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(m){st(l,l.return,m)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=i?"":l.memoizedProps}catch(m){st(l,l.return,m)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}r&4&&(r=t.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,Tm(t,n))));break;case 19:tr(e,t),nr(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Tm(t,r)));break;case 30:break;case 21:break;default:tr(e,t),nr(t)}}function nr(t){var e=t.flags;if(e&2){try{for(var n,r=t.return;r!==null;){if(LT(r)){n=r;break}r=r.return}if(n==null)throw Error(ee(160));switch(n.tag){case 27:var i=n.stateNode,a=Em(t);od(t,a,i);break;case 5:var s=n.stateNode;n.flags&32&&(Xo(s,""),n.flags&=-33);var o=Em(t);od(t,o,s);break;case 3:case 4:var l=n.stateNode.containerInfo,h=Em(t);kp(t,h,l);break;default:throw Error(ee(161))}}catch(u){st(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GT(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;GT(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ta(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)zT(t,e.alternate,e),e=e.sibling}function ls(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:La(4,e,e.return),ls(e);break;case 1:ti(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&PT(e,e.return,n),ls(e);break;case 27:yc(e.stateNode);case 26:case 5:ti(e,e.return),ls(e);break;case 22:e.memoizedState===null&&ls(e);break;case 30:ls(e);break;default:ls(e)}t=t.sibling}}function ia(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var r=e.alternate,i=t,a=e,s=a.flags;switch(a.tag){case 0:case 11:case 15:ia(i,a,n),uu(4,a);break;case 1:if(ia(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(h){st(r,r.return,h)}if(r=a,i=r.updateQueue,i!==null){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(l!==null)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)zw(l[i],o)}catch(h){st(r,r.return,h)}}n&&s&64&&jT(a),mc(a,a.return);break;case 27:VT(a);case 26:case 5:ia(i,a,n),n&&r===null&&s&4&&UT(a),mc(a,a.return);break;case 12:ia(i,a,n);break;case 13:ia(i,a,n),n&&s&4&&HT(i,a);break;case 22:a.memoizedState===null&&ia(i,a,n),mc(a,a.return);break;case 30:break;default:ia(i,a,n)}e=e.sibling}}function Iv(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&su(n))}function Dv(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&su(t))}function Kr(t,e,n,r){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)$T(t,e,n,r),e=e.sibling}function $T(t,e,n,r){var i=e.flags;switch(e.tag){case 0:case 11:case 15:Kr(t,e,n,r),i&2048&&uu(9,e);break;case 1:Kr(t,e,n,r);break;case 3:Kr(t,e,n,r),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&su(t)));break;case 12:if(i&2048){Kr(t,e,n,r),t=e.stateNode;try{var a=e.memoizedProps,s=a.id,o=a.onPostCommit;typeof o=="function"&&o(s,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){st(e,e.return,l)}}else Kr(t,e,n,r);break;case 13:Kr(t,e,n,r);break;case 23:break;case 22:a=e.stateNode,s=e.alternate,e.memoizedState!==null?a._visibility&2?Kr(t,e,n,r):pc(t,e):a._visibility&2?Kr(t,e,n,r):(a._visibility|=2,oo(t,e,n,r,(e.subtreeFlags&10256)!==0)),i&2048&&Iv(s,e);break;case 24:Kr(t,e,n,r),i&2048&&Dv(e.alternate,e);break;default:Kr(t,e,n,r)}}function oo(t,e,n,r,i){for(i=i&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var a=t,s=e,o=n,l=r,h=s.flags;switch(s.tag){case 0:case 11:case 15:oo(a,s,o,l,i),uu(8,s);break;case 23:break;case 22:var u=s.stateNode;s.memoizedState!==null?u._visibility&2?oo(a,s,o,l,i):pc(a,s):(u._visibility|=2,oo(a,s,o,l,i)),i&&h&2048&&Iv(s.alternate,s);break;case 24:oo(a,s,o,l,i),i&&h&2048&&Dv(s.alternate,s);break;default:oo(a,s,o,l,i)}e=e.sibling}}function pc(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,r=e,i=r.flags;switch(r.tag){case 22:pc(n,r),i&2048&&Iv(r.alternate,r);break;case 24:pc(n,r),i&2048&&Dv(r.alternate,r);break;default:pc(n,r)}e=e.sibling}}var Zl=8192;function eo(t){if(t.subtreeFlags&Zl)for(t=t.child;t!==null;)YT(t),t=t.sibling}function YT(t){switch(t.tag){case 26:eo(t),t.flags&Zl&&t.memoizedState!==null&&II(Pr,t.memoizedState,t.memoizedProps);break;case 5:eo(t);break;case 3:case 4:var e=Pr;Pr=md(t.stateNode.containerInfo),eo(t),Pr=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=Zl,Zl=16777216,eo(t),Zl=e):eo(t));break;default:eo(t)}}function XT(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Vl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];sn=r,KT(r,t)}XT(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)QT(t),t=t.sibling}function QT(t){switch(t.tag){case 0:case 11:case 15:Vl(t),t.flags&2048&&La(9,t,t.return);break;case 3:Vl(t);break;case 12:Vl(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Rh(t)):Vl(t);break;default:Vl(t)}}function Rh(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];sn=r,KT(r,t)}XT(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:La(8,e,e.return),Rh(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Rh(e));break;default:Rh(e)}t=t.sibling}}function KT(t,e){for(;sn!==null;){var n=sn;switch(n.tag){case 0:case 11:case 15:La(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:su(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,sn=r;else e:for(n=t;sn!==null;){r=sn;var i=r.sibling,a=r.return;if(BT(r),r===n){sn=null;break e}if(i!==null){i.return=a,sn=i;break e}sn=a}}}var $N={getCacheForType:function(t){var e=In(Kt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},YN=typeof WeakMap=="function"?WeakMap:Map,Ke=0,ut=null,Ie=null,Ve=0,Xe=0,rr=null,ya=!1,vl=!1,Ov=!1,zi=0,It=0,Va=0,ws=0,Mv=0,xr=0,Jo=0,gc=null,Gn=null,jp=!1,kv=0,ld=1/0,cd=null,Ra=null,yn=0,Ca=null,el=null,Lo=0,Pp=0,Up=null,WT=null,vc=0,Lp=null;function hr(){if(Ke&2&&Ve!==0)return Ve&-Ve;if(ve.T!==null){var t=Qo;return t!==0?t:Pv()}return lw()}function ZT(){xr===0&&(xr=!(Ve&536870912)||Fe?iw():536870912);var t=Cr.current;return t!==null&&(t.flags|=32),xr}function dr(t,e,n){(t===ut&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)&&(tl(t,0),_a(t,Ve,xr,!1)),tu(t,n),(!(Ke&2)||t!==ut)&&(t===ut&&(!(Ke&2)&&(ws|=n),It===4&&_a(t,Ve,xr,!1)),pi(t))}function JT(t,e,n){if(Ke&6)throw Error(ee(327));var r=!n&&(e&124)===0&&(e&t.expiredLanes)===0||eu(t,e),i=r?KN(t,e):xm(t,e,!0),a=r;do{if(i===0){vl&&!r&&_a(t,e,0,!1);break}else{if(n=t.current.alternate,a&&!XN(n)){i=xm(t,e,!1),a=!1;continue}if(i===2){if(a=e,t.errorRecoveryDisabledLanes&a)var s=0;else s=t.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){e=s;e:{var o=t;i=gc;var l=o.current.memoizedState.isDehydrated;if(l&&(tl(o,s).flags|=256),s=xm(o,s,!1),s!==2){if(Ov&&!l){o.errorRecoveryDisabledLanes|=a,ws|=a,i=4;break e}a=Gn,Gn=i,a!==null&&(Gn===null?Gn=a:Gn.push.apply(Gn,a))}i=s}if(a=!1,i!==2)continue}}if(i===1){tl(t,0),_a(t,e,0,!0);break}e:{switch(r=t,a=i,a){case 0:case 1:throw Error(ee(345));case 4:if((e&4194048)!==e)break;case 6:_a(r,e,xr,!ya);break e;case 2:Gn=null;break;case 3:case 5:break;default:throw Error(ee(329))}if((e&62914560)===e&&(i=kv+300-ri(),10<i)){if(_a(r,e,xr,!ya),ef(r,0,!0)!==0)break e;r.timeoutHandle=yx(L_.bind(null,r,n,Gn,cd,jp,e,xr,ws,Jo,ya,a,2,-0,0),i);break e}L_(r,n,Gn,cd,jp,e,xr,ws,Jo,ya,a,0,-0,0)}}break}while(!0);pi(t)}function L_(t,e,n,r,i,a,s,o,l,h,u,d,f,m){if(t.timeoutHandle=-1,d=e.subtreeFlags,(d&8192||(d&16785408)===16785408)&&(Pc={stylesheets:null,count:0,unsuspend:NI},YT(e),d=DI(),d!==null)){t.cancelPendingCommit=d(z_.bind(null,t,e,a,n,r,i,s,o,l,u,1,f,m)),_a(t,a,s,!h);return}z_(t,e,a,n,r,i,s,o,l)}function XN(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!mr(a(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _a(t,e,n,r){e&=~Mv,e&=~ws,t.suspendedLanes|=e,t.pingedLanes&=~e,r&&(t.warmLanes|=e),r=t.expirationTimes;for(var i=e;0<i;){var a=31-ur(i),s=1<<a;r[a]=-1,i&=~s}n!==0&&sw(t,n,e)}function hf(){return Ke&6?!0:(hu(0),!1)}function jv(){if(Ie!==null){if(Xe===0)var t=Ie.return;else t=Ie,Ii=Bs=null,Ev(t),Uo=null,Mc=0,t=Ie;for(;t!==null;)kT(t.alternate,t),t=t.return;Ie=null}}function tl(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,dI(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),jv(),ut=t,Ie=n=ki(t.current,null),Ve=e,Xe=0,rr=null,ya=!1,vl=eu(t,e),Ov=!1,Jo=xr=Mv=ws=Va=It=0,Gn=gc=null,jp=!1,e&8&&(e|=e&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=e;0<r;){var i=31-ur(r),a=1<<i;e|=t[i],r&=~a}return zi=e,af(),n}function ex(t,e){Re=null,ve.H=nd,e===ou||e===of?(e=g_(),Xe=3):e===Lw?(e=g_(),Xe=4):Xe=e===CT?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,rr=e,Ie===null&&(It=1,ad(t,wr(e,t.current)))}function tx(){var t=ve.H;return ve.H=nd,t===null?nd:t}function nx(){var t=ve.A;return ve.A=$N,t}function Vp(){It=4,ya||(Ve&4194048)!==Ve&&Cr.current!==null||(vl=!0),!(Va&134217727)&&!(ws&134217727)||ut===null||_a(ut,Ve,xr,!1)}function xm(t,e,n){var r=Ke;Ke|=2;var i=tx(),a=nx();(ut!==t||Ve!==e)&&(cd=null,tl(t,e)),e=!1;var s=It;e:do try{if(Xe!==0&&Ie!==null){var o=Ie,l=rr;switch(Xe){case 8:jv(),s=6;break e;case 3:case 2:case 9:case 6:Cr.current===null&&(e=!0);var h=Xe;if(Xe=0,rr=null,So(t,o,l,h),n&&vl){s=0;break e}break;default:h=Xe,Xe=0,rr=null,So(t,o,l,h)}}QN(),s=It;break}catch(u){ex(t,u)}while(!0);return e&&t.shellSuspendCounter++,Ii=Bs=null,Ke=r,ve.H=i,ve.A=a,Ie===null&&(ut=null,Ve=0,af()),s}function QN(){for(;Ie!==null;)rx(Ie)}function KN(t,e){var n=Ke;Ke|=2;var r=tx(),i=nx();ut!==t||Ve!==e?(cd=null,ld=ri()+500,tl(t,e)):vl=eu(t,e);e:do try{if(Xe!==0&&Ie!==null){e=Ie;var a=rr;t:switch(Xe){case 1:Xe=0,rr=null,So(t,e,a,1);break;case 2:case 9:if(p_(a)){Xe=0,rr=null,V_(e);break}e=function(){Xe!==2&&Xe!==9||ut!==t||(Xe=7),pi(t)},a.then(e,e);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:p_(a)?(Xe=0,rr=null,V_(e)):(Xe=0,rr=null,So(t,e,a,7));break;case 5:var s=null;switch(Ie.tag){case 26:s=Ie.memoizedState;case 5:case 27:var o=Ie;if(!s||wx(s)){Xe=0,rr=null;var l=o.sibling;if(l!==null)Ie=l;else{var h=o.return;h!==null?(Ie=h,df(h)):Ie=null}break t}}Xe=0,rr=null,So(t,e,a,5);break;case 6:Xe=0,rr=null,So(t,e,a,6);break;case 8:jv(),It=6;break e;default:throw Error(ee(462))}}WN();break}catch(u){ex(t,u)}while(!0);return Ii=Bs=null,ve.H=r,ve.A=i,Ke=n,Ie!==null?0:(ut=null,Ve=0,af(),It)}function WN(){for(;Ie!==null&&!_C();)rx(Ie)}function rx(t){var e=MT(t.alternate,t,zi);t.memoizedProps=t.pendingProps,e===null?df(t):Ie=e}function V_(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=O_(n,e,e.pendingProps,e.type,void 0,Ve);break;case 11:e=O_(n,e,e.pendingProps,e.type.render,e.ref,Ve);break;case 5:Ev(e);default:kT(n,e),e=Ie=kw(e,zi),e=MT(n,e,zi)}t.memoizedProps=t.pendingProps,e===null?df(t):Ie=e}function So(t,e,n,r){Ii=Bs=null,Ev(e),Uo=null,Mc=0;var i=e.return;try{if(zN(t,i,e,n,Ve)){It=1,ad(t,wr(n,t.current)),Ie=null;return}}catch(a){if(i!==null)throw Ie=i,a;It=1,ad(t,wr(n,t.current)),Ie=null;return}e.flags&32768?(Fe||r===1?t=!0:vl||Ve&536870912?t=!1:(ya=t=!0,(r===2||r===9||r===3||r===6)&&(r=Cr.current,r!==null&&r.tag===13&&(r.flags|=16384))),ix(e,t)):df(e)}function df(t){var e=t;do{if(e.flags&32768){ix(e,ya);return}t=e.return;var n=FN(e.alternate,e,zi);if(n!==null){Ie=n;return}if(e=e.sibling,e!==null){Ie=e;return}Ie=e=t}while(e!==null);It===0&&(It=5)}function ix(t,e){do{var n=HN(t.alternate,t);if(n!==null){n.flags&=32767,Ie=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Ie=t;return}Ie=t=n}while(t!==null);It=6,Ie=null}function z_(t,e,n,r,i,a,s,o,l){t.cancelPendingCommit=null;do ff();while(yn!==0);if(Ke&6)throw Error(ee(327));if(e!==null){if(e===t.current)throw Error(ee(177));if(a=e.lanes|e.childLanes,a|=lv,NC(t,n,a,s,o,l),t===ut&&(Ie=ut=null,Ve=0),el=e,Ca=t,Lo=n,Pp=a,Up=i,WT=r,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,tI($h,function(){return cx(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(e.flags&13878)!==0,e.subtreeFlags&13878||r){r=ve.T,ve.T=null,i=He.p,He.p=2,s=Ke,Ke|=4;try{qN(t,e,n)}finally{Ke=s,He.p=i,ve.T=r}}yn=1,ax(),sx(),ox()}}function ax(){if(yn===1){yn=0;var t=Ca,e=el,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ve.T,ve.T=null;var r=He.p;He.p=2;var i=Ke;Ke|=4;try{qT(e,t);var a=Hp,s=Sw(t.containerInfo),o=a.focusedElem,l=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&Aw(o.ownerDocument.documentElement,o)){if(l!==null&&ov(o)){var h=l.start,u=l.end;if(u===void 0&&(u=h),"selectionStart"in o)o.selectionStart=h,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var m=f.getSelection(),b=o.textContent.length,A=Math.min(l.start,b),D=l.end===void 0?A:Math.min(l.end,b);!m.extend&&A>D&&(s=D,D=A,A=s);var E=o_(o,A),x=o_(o,D);if(E&&x&&(m.rangeCount!==1||m.anchorNode!==E.node||m.anchorOffset!==E.offset||m.focusNode!==x.node||m.focusOffset!==x.offset)){var N=d.createRange();N.setStart(E.node,E.offset),m.removeAllRanges(),A>D?(m.addRange(N),m.extend(x.node,x.offset)):(N.setEnd(x.node,x.offset),m.addRange(N))}}}}for(d=[],m=o;m=m.parentNode;)m.nodeType===1&&d.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var O=d[o];O.element.scrollLeft=O.left,O.element.scrollTop=O.top}}vd=!!Fp,Hp=Fp=null}finally{Ke=i,He.p=r,ve.T=n}}t.current=e,yn=2}}function sx(){if(yn===2){yn=0;var t=Ca,e=el,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ve.T,ve.T=null;var r=He.p;He.p=2;var i=Ke;Ke|=4;try{zT(t,e.alternate,e)}finally{Ke=i,He.p=r,ve.T=n}}yn=3}}function ox(){if(yn===4||yn===3){yn=0,bC();var t=Ca,e=el,n=Lo,r=WT;e.subtreeFlags&10256||e.flags&10256?yn=5:(yn=0,el=Ca=null,lx(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(Ra=null),ev(n),e=e.stateNode,cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(Jc,e,void 0,(e.current.flags&128)===128)}catch{}if(r!==null){e=ve.T,i=He.p,He.p=2,ve.T=null;try{for(var a=t.onRecoverableError,s=0;s<r.length;s++){var o=r[s];a(o.value,{componentStack:o.stack})}}finally{ve.T=e,He.p=i}}Lo&3&&ff(),pi(t),i=t.pendingLanes,n&4194090&&i&42?t===Lp?vc++:(vc=0,Lp=t):vc=0,hu(0)}}function lx(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,su(e)))}function ff(t){return ax(),sx(),ox(),cx()}function cx(){if(yn!==5)return!1;var t=Ca,e=Pp;Pp=0;var n=ev(Lo),r=ve.T,i=He.p;try{He.p=32>n?32:n,ve.T=null,n=Up,Up=null;var a=Ca,s=Lo;if(yn=0,el=Ca=null,Lo=0,Ke&6)throw Error(ee(331));var o=Ke;if(Ke|=4,QT(a.current),$T(a,a.current,s,n),Ke=o,hu(0,!1),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(Jc,a)}catch{}return!0}finally{He.p=i,ve.T=r,lx(t,e)}}function B_(t,e,n){e=wr(n,e),e=Dp(t.stateNode,e,2),t=Sa(t,e,2),t!==null&&(tu(t,2),pi(t))}function st(t,e,n){if(t.tag===3)B_(t,t,n);else for(;e!==null;){if(e.tag===3){B_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ra===null||!Ra.has(r))){t=wr(n,t),n=ST(2),r=Sa(e,n,2),r!==null&&(RT(n,r,e,t),tu(r,2),pi(r));break}}e=e.return}}function Am(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new YN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(Ov=!0,i.add(n),t=ZN.bind(null,t,e,n),e.then(t,t))}function ZN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,ut===t&&(Ve&n)===n&&(It===4||It===3&&(Ve&62914560)===Ve&&300>ri()-kv?!(Ke&2)&&tl(t,0):Mv|=n,Jo===Ve&&(Jo=0)),pi(t)}function ux(t,e){e===0&&(e=aw()),t=gl(t,e),t!==null&&(tu(t,e),pi(t))}function JN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ux(t,n)}function eI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(ee(314))}r!==null&&r.delete(e),ux(t,n)}function tI(t,e){return Zg(t,e)}var ud=null,lo=null,zp=!1,hd=!1,Sm=!1,Ts=0;function pi(t){t!==lo&&t.next===null&&(lo===null?ud=lo=t:lo=lo.next=t),hd=!0,zp||(zp=!0,rI())}function hu(t,e){if(!Sm&&hd){Sm=!0;do for(var n=!1,r=ud;r!==null;){if(t!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var s=r.suspendedLanes,o=r.pingedLanes;a=(1<<31-ur(42|t)+1)-1,a&=i&~(s&~o),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,F_(r,a))}else a=Ve,a=ef(r,r===ut?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||eu(r,a)||(n=!0,F_(r,a));r=r.next}while(n);Sm=!1}}function nI(){hx()}function hx(){hd=zp=!1;var t=0;Ts!==0&&(hI()&&(t=Ts),Ts=0);for(var e=ri(),n=null,r=ud;r!==null;){var i=r.next,a=dx(r,e);a===0?(r.next=null,n===null?ud=i:n.next=i,i===null&&(lo=n)):(n=r,(t!==0||a&3)&&(hd=!0)),r=i}hu(t)}function dx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes&-62914561;0<a;){var s=31-ur(a),o=1<<s,l=i[s];l===-1?(!(o&n)||o&r)&&(i[s]=CC(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}if(e=ut,n=Ve,n=ef(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,n===0||t===e&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&Zf(r),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||eu(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(r!==null&&Zf(r),ev(n)){case 2:case 8:n=nw;break;case 32:n=$h;break;case 268435456:n=rw;break;default:n=$h}return r=fx.bind(null,t),n=Zg(n,r),t.callbackPriority=e,t.callbackNode=n,e}return r!==null&&r!==null&&Zf(r),t.callbackPriority=2,t.callbackNode=null,2}function fx(t,e){if(yn!==0&&yn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(ff()&&t.callbackNode!==n)return null;var r=Ve;return r=ef(t,t===ut?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(JT(t,r,e),dx(t,ri()),t.callbackNode!=null&&t.callbackNode===n?fx.bind(null,t):null)}function F_(t,e){if(ff())return null;JT(t,e,!0)}function rI(){fI(function(){Ke&6?Zg(tw,nI):hx()})}function Pv(){return Ts===0&&(Ts=iw()),Ts}function H_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:_h(""+t)}function q_(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function iI(t,e,n,r,i){if(e==="submit"&&n&&n.stateNode===i){var a=H_((i[Wn]||null).action),s=r.submitter;s&&(e=(e=s[Wn]||null)?H_(e.formAction):s.getAttribute("formAction"),e!==null&&(a=e,s=null));var o=new tf("action","action",null,r,i);t.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Ts!==0){var l=s?q_(i,s):new FormData(i);Np(n,{pending:!0,data:l,method:i.method,action:a},null,l)}}else typeof a=="function"&&(o.preventDefault(),l=s?q_(i,s):new FormData(i),Np(n,{pending:!0,data:l,method:i.method,action:a},a,l))},currentTarget:i}]})}}for(var Rm=0;Rm<vp.length;Rm++){var Cm=vp[Rm],aI=Cm.toLowerCase(),sI=Cm[0].toUpperCase()+Cm.slice(1);Hr(aI,"on"+sI)}Hr(Cw,"onAnimationEnd");Hr(Nw,"onAnimationIteration");Hr(Iw,"onAnimationStart");Hr("dblclick","onDoubleClick");Hr("focusin","onFocus");Hr("focusout","onBlur");Hr(TN,"onTransitionRun");Hr(xN,"onTransitionStart");Hr(AN,"onTransitionCancel");Hr(Dw,"onTransitionEnd");Yo("onMouseEnter",["mouseout","mouseover"]);Yo("onMouseLeave",["mouseout","mouseover"]);Yo("onPointerEnter",["pointerout","pointerover"]);Yo("onPointerLeave",["pointerout","pointerover"]);Ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ls("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kc));function mx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,h=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=h;try{a(i)}catch(u){id(u)}i.currentTarget=null,a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,h=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=h;try{a(i)}catch(u){id(u)}i.currentTarget=null,a=l}}}}function Ne(t,e){var n=e[up];n===void 0&&(n=e[up]=new Set);var r=t+"__bubble";n.has(r)||(px(e,t,2,!1),n.add(r))}function Nm(t,e,n){var r=0;e&&(r|=4),px(n,t,r,e)}var rh="_reactListening"+Math.random().toString(36).slice(2);function Uv(t){if(!t[rh]){t[rh]=!0,cw.forEach(function(n){n!=="selectionchange"&&(oI.has(n)||Nm(n,!1,t),Nm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rh]||(e[rh]=!0,Nm("selectionchange",!1,e))}}function px(t,e,n,r){switch(Rx(e)){case 2:var i=kI;break;case 8:i=jI;break;default:i=Bv}n=i.bind(null,e,n,t),i=void 0,!mp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Im(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;o!==null;){if(s=vo(o),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue e}o=o.parentNode}}r=r.return}vw(function(){var h=a,u=rv(n),d=[];e:{var f=Ow.get(t);if(f!==void 0){var m=tf,b=t;switch(t){case"keypress":if(Eh(n)===0)break e;case"keydown":case"keyup":m=tN;break;case"focusin":b="focus",m=sm;break;case"focusout":b="blur",m=sm;break;case"beforeblur":case"afterblur":m=sm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=W0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=HC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=iN;break;case Cw:case Nw:case Iw:m=$C;break;case Dw:m=sN;break;case"scroll":case"scrollend":m=BC;break;case"wheel":m=lN;break;case"copy":case"cut":case"paste":m=XC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=J0;break;case"toggle":case"beforetoggle":m=uN}var A=(e&4)!==0,D=!A&&(t==="scroll"||t==="scrollend"),E=A?f!==null?f+"Capture":null:f;A=[];for(var x=h,N;x!==null;){var O=x;if(N=O.stateNode,O=O.tag,O!==5&&O!==26&&O!==27||N===null||E===null||(O=Cc(x,E),O!=null&&A.push(jc(x,O,N))),D)break;x=x.return}0<A.length&&(f=new m(f,b,null,n,u),d.push({event:f,listeners:A}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==fp&&(b=n.relatedTarget||n.fromElement)&&(vo(b)||b[ml]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(b=n.relatedTarget||n.toElement,m=h,b=b?vo(b):null,b!==null&&(D=Zc(b),A=b.tag,b!==D||A!==5&&A!==27&&A!==6)&&(b=null)):(m=null,b=h),m!==b)){if(A=W0,O="onMouseLeave",E="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(A=J0,O="onPointerLeave",E="onPointerEnter",x="pointer"),D=m==null?f:Wl(m),N=b==null?f:Wl(b),f=new A(O,x+"leave",m,n,u),f.target=D,f.relatedTarget=N,O=null,vo(u)===h&&(A=new A(E,x+"enter",b,n,u),A.target=N,A.relatedTarget=D,O=A),D=O,m&&b)t:{for(A=m,E=b,x=0,N=A;N;N=to(N))x++;for(N=0,O=E;O;O=to(O))N++;for(;0<x-N;)A=to(A),x--;for(;0<N-x;)E=to(E),N--;for(;x--;){if(A===E||E!==null&&A===E.alternate)break t;A=to(A),E=to(E)}A=null}else A=null;m!==null&&G_(d,f,m,A,!1),b!==null&&D!==null&&G_(d,D,b,A,!0)}}e:{if(f=h?Wl(h):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var P=r_;else if(n_(f))if(Tw)P=bN;else{P=yN;var R=vN}else m=f.nodeName,!m||m.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?h&&nv(h.elementType)&&(P=r_):P=_N;if(P&&(P=P(t,h))){ww(d,P,n,u);break e}R&&R(t,f,h),t==="focusout"&&h&&f.type==="number"&&h.memoizedProps.value!=null&&dp(f,"number",f.value)}switch(R=h?Wl(h):window,t){case"focusin":(n_(R)||R.contentEditable==="true")&&(bo=R,pp=h,oc=null);break;case"focusout":oc=pp=bo=null;break;case"mousedown":gp=!0;break;case"contextmenu":case"mouseup":case"dragend":gp=!1,l_(d,n,u);break;case"selectionchange":if(wN)break;case"keydown":case"keyup":l_(d,n,u)}var _;if(sv)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else _o?bw(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(_w&&n.locale!=="ko"&&(_o||g!=="onCompositionStart"?g==="onCompositionEnd"&&_o&&(_=yw()):(va=u,iv="value"in va?va.value:va.textContent,_o=!0)),R=dd(h,g),0<R.length&&(g=new Z0(g,t,null,n,u),d.push({event:g,listeners:R}),_?g.data=_:(_=Ew(n),_!==null&&(g.data=_)))),(_=dN?fN(t,n):mN(t,n))&&(g=dd(h,"onBeforeInput"),0<g.length&&(R=new Z0("onBeforeInput","beforeinput",null,n,u),d.push({event:R,listeners:g}),R.data=_)),iI(d,t,h,n,u)}mx(d,e)})}function jc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=Cc(t,n),i!=null&&r.unshift(jc(t,i,a)),i=Cc(t,e),i!=null&&r.push(jc(t,i,a))),t.tag===3)return r;t=t.return}return[]}function to(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function G_(t,e,n,r,i){for(var a=e._reactName,s=[];n!==null&&n!==r;){var o=n,l=o.alternate,h=o.stateNode;if(o=o.tag,l!==null&&l===r)break;o!==5&&o!==26&&o!==27||h===null||(l=h,i?(h=Cc(n,a),h!=null&&s.unshift(jc(n,h,l))):i||(h=Cc(n,a),h!=null&&s.push(jc(n,h,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var lI=/\r\n?/g,cI=/\u0000|\uFFFD/g;function $_(t){return(typeof t=="string"?t:""+t).replace(lI,`
`).replace(cI,"")}function gx(t,e){return e=$_(e),$_(t)===e}function mf(){}function tt(t,e,n,r,i,a){switch(n){case"children":typeof r=="string"?e==="body"||e==="textarea"&&r===""||Xo(t,r):(typeof r=="number"||typeof r=="bigint")&&e!=="body"&&Xo(t,""+r);break;case"className":Ku(t,"class",r);break;case"tabIndex":Ku(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Ku(t,n,r);break;case"style":gw(t,r,a);break;case"data":if(e!=="object"){Ku(t,"data",r);break}case"src":case"href":if(r===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=_h(""+r),t.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(e!=="input"&&tt(t,e,"name",i.name,i,null),tt(t,e,"formEncType",i.formEncType,i,null),tt(t,e,"formMethod",i.formMethod,i,null),tt(t,e,"formTarget",i.formTarget,i,null)):(tt(t,e,"encType",i.encType,i,null),tt(t,e,"method",i.method,i,null),tt(t,e,"target",i.target,i,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=_h(""+r),t.setAttribute(n,r);break;case"onClick":r!=null&&(t.onclick=mf);break;case"onScroll":r!=null&&Ne("scroll",t);break;case"onScrollEnd":r!=null&&Ne("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(ee(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(ee(60));t.innerHTML=n}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}n=_h(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""+r):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":r===!0?t.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,r):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(n,r):t.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(n):t.setAttribute(n,r);break;case"popover":Ne("beforetoggle",t),Ne("toggle",t),yh(t,"popover",r);break;case"xlinkActuate":Ei(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Ei(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Ei(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Ei(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Ei(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Ei(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Ei(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Ei(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Ei(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":yh(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=VC.get(n)||n,yh(t,n,r))}}function Bp(t,e,n,r,i,a){switch(n){case"style":gw(t,r,a);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(ee(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(ee(60));t.innerHTML=n}}break;case"children":typeof r=="string"?Xo(t,r):(typeof r=="number"||typeof r=="bigint")&&Xo(t,""+r);break;case"onScroll":r!=null&&Ne("scroll",t);break;case"onScrollEnd":r!=null&&Ne("scrollend",t);break;case"onClick":r!=null&&(t.onclick=mf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uw.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),a=t[Wn]||null,a=a!=null?a[n]:null,typeof a=="function"&&t.removeEventListener(e,a,i),typeof r=="function")){typeof a!="function"&&a!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,r,i);break e}n in t?t[n]=r:r===!0?t.setAttribute(n,""):yh(t,n,r)}}}function bn(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",t),Ne("load",t);var r=!1,i=!1,a;for(a in n)if(n.hasOwnProperty(a)){var s=n[a];if(s!=null)switch(a){case"src":r=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(ee(137,e));default:tt(t,e,a,s,n,null)}}i&&tt(t,e,"srcSet",n.srcSet,n,null),r&&tt(t,e,"src",n.src,n,null);return;case"input":Ne("invalid",t);var o=a=s=i=null,l=null,h=null;for(r in n)if(n.hasOwnProperty(r)){var u=n[r];if(u!=null)switch(r){case"name":i=u;break;case"type":s=u;break;case"checked":l=u;break;case"defaultChecked":h=u;break;case"value":a=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(ee(137,e));break;default:tt(t,e,r,u,n,null)}}fw(t,a,o,l,h,s,i,!1),Yh(t);return;case"select":Ne("invalid",t),r=s=a=null;for(i in n)if(n.hasOwnProperty(i)&&(o=n[i],o!=null))switch(i){case"value":a=o;break;case"defaultValue":s=o;break;case"multiple":r=o;default:tt(t,e,i,o,n,null)}e=a,n=s,t.multiple=!!r,e!=null?Oo(t,!!r,e,!1):n!=null&&Oo(t,!!r,n,!0);return;case"textarea":Ne("invalid",t),a=i=r=null;for(s in n)if(n.hasOwnProperty(s)&&(o=n[s],o!=null))switch(s){case"value":r=o;break;case"defaultValue":i=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(ee(91));break;default:tt(t,e,s,o,n,null)}pw(t,r,i,a),Yh(t);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:tt(t,e,l,r,n,null)}return;case"dialog":Ne("beforetoggle",t),Ne("toggle",t),Ne("cancel",t),Ne("close",t);break;case"iframe":case"object":Ne("load",t);break;case"video":case"audio":for(r=0;r<kc.length;r++)Ne(kc[r],t);break;case"image":Ne("error",t),Ne("load",t);break;case"details":Ne("toggle",t);break;case"embed":case"source":case"link":Ne("error",t),Ne("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(r=n[h],r!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(ee(137,e));default:tt(t,e,h,r,n,null)}return;default:if(nv(e)){for(u in n)n.hasOwnProperty(u)&&(r=n[u],r!==void 0&&Bp(t,e,u,r,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(r=n[o],r!=null&&tt(t,e,o,r,n,null))}function uI(t,e,n,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,s=null,o=null,l=null,h=null,u=null;for(m in n){var d=n[m];if(n.hasOwnProperty(m)&&d!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":l=d;default:r.hasOwnProperty(m)||tt(t,e,m,null,r,d)}}for(var f in r){var m=r[f];if(d=n[f],r.hasOwnProperty(f)&&(m!=null||d!=null))switch(f){case"type":a=m;break;case"name":i=m;break;case"checked":h=m;break;case"defaultChecked":u=m;break;case"value":s=m;break;case"defaultValue":o=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(ee(137,e));break;default:m!==d&&tt(t,e,f,m,r,d)}}hp(t,s,o,l,h,u,a,i);return;case"select":m=s=o=f=null;for(a in n)if(l=n[a],n.hasOwnProperty(a)&&l!=null)switch(a){case"value":break;case"multiple":m=l;default:r.hasOwnProperty(a)||tt(t,e,a,null,r,l)}for(i in r)if(a=r[i],l=n[i],r.hasOwnProperty(i)&&(a!=null||l!=null))switch(i){case"value":f=a;break;case"defaultValue":o=a;break;case"multiple":s=a;default:a!==l&&tt(t,e,i,a,r,l)}e=o,n=s,r=m,f!=null?Oo(t,!!n,f,!1):!!r!=!!n&&(e!=null?Oo(t,!!n,e,!0):Oo(t,!!n,n?[]:"",!1));return;case"textarea":m=f=null;for(o in n)if(i=n[o],n.hasOwnProperty(o)&&i!=null&&!r.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:tt(t,e,o,null,r,i)}for(s in r)if(i=r[s],a=n[s],r.hasOwnProperty(s)&&(i!=null||a!=null))switch(s){case"value":f=i;break;case"defaultValue":m=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(ee(91));break;default:i!==a&&tt(t,e,s,i,r,a)}mw(t,f,m);return;case"option":for(var b in n)if(f=n[b],n.hasOwnProperty(b)&&f!=null&&!r.hasOwnProperty(b))switch(b){case"selected":t.selected=!1;break;default:tt(t,e,b,null,r,f)}for(l in r)if(f=r[l],m=n[l],r.hasOwnProperty(l)&&f!==m&&(f!=null||m!=null))switch(l){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:tt(t,e,l,f,r,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var A in n)f=n[A],n.hasOwnProperty(A)&&f!=null&&!r.hasOwnProperty(A)&&tt(t,e,A,null,r,f);for(h in r)if(f=r[h],m=n[h],r.hasOwnProperty(h)&&f!==m&&(f!=null||m!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(ee(137,e));break;default:tt(t,e,h,f,r,m)}return;default:if(nv(e)){for(var D in n)f=n[D],n.hasOwnProperty(D)&&f!==void 0&&!r.hasOwnProperty(D)&&Bp(t,e,D,void 0,r,f);for(u in r)f=r[u],m=n[u],!r.hasOwnProperty(u)||f===m||f===void 0&&m===void 0||Bp(t,e,u,f,r,m);return}}for(var E in n)f=n[E],n.hasOwnProperty(E)&&f!=null&&!r.hasOwnProperty(E)&&tt(t,e,E,null,r,f);for(d in r)f=r[d],m=n[d],!r.hasOwnProperty(d)||f===m||f==null&&m==null||tt(t,e,d,f,r,m)}var Fp=null,Hp=null;function fd(t){return t.nodeType===9?t:t.ownerDocument}function Y_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vx(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function qp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dm=null;function hI(){var t=window.event;return t&&t.type==="popstate"?t===Dm?!1:(Dm=t,!0):(Dm=null,!1)}var yx=typeof setTimeout=="function"?setTimeout:void 0,dI=typeof clearTimeout=="function"?clearTimeout:void 0,X_=typeof Promise=="function"?Promise:void 0,fI=typeof queueMicrotask=="function"?queueMicrotask:typeof X_<"u"?function(t){return X_.resolve(null).then(t).catch(mI)}:yx;function mI(t){setTimeout(function(){throw t})}function Ka(t){return t==="head"}function Q_(t,e){var n=e,r=0,i=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(0<r&&8>r){n=r;var s=t.ownerDocument;if(n&1&&yc(s.documentElement),n&2&&yc(s.body),n&4)for(n=s.head,yc(n),s=n.firstChild;s;){var o=s.nextSibling,l=s.nodeName;s[nu]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=o}}if(i===0){t.removeChild(a),zc(e);return}i--}else n==="$"||n==="$?"||n==="$!"?i++:r=n.charCodeAt(0)-48;else r=0;n=a}while(n);zc(e)}function Gp(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Gp(n),tv(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function pI(t,e,n,r){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[nu])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(a=t.getAttribute("rel"),a==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(a!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(a=t.getAttribute("src"),(a!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var a=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===a)return t}else return t;if(t=zr(t.nextSibling),t===null)break}return null}function gI(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=zr(t.nextSibling),t===null))return null;return t}function $p(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function vI(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var r=function(){e(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function zr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var Yp=null;function K_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function _x(t,e,n){switch(e=fd(n),t){case"html":if(t=e.documentElement,!t)throw Error(ee(452));return t;case"head":if(t=e.head,!t)throw Error(ee(453));return t;case"body":if(t=e.body,!t)throw Error(ee(454));return t;default:throw Error(ee(451))}}function yc(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);tv(t)}var Nr=new Map,W_=new Set;function md(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var $i=He.d;He.d={f:yI,r:_I,D:bI,C:EI,L:wI,m:TI,X:AI,S:xI,M:SI};function yI(){var t=$i.f(),e=hf();return t||e}function _I(t){var e=pl(t);e!==null&&e.tag===5&&e.type==="form"?dT(e):$i.r(t)}var yl=typeof document>"u"?null:document;function bx(t,e,n){var r=yl;if(r&&typeof e=="string"&&e){var i=Er(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),W_.has(i)||(W_.add(i),t={rel:t,crossOrigin:n,href:e},r.querySelector(i)===null&&(e=r.createElement("link"),bn(e,"link",t),on(e),r.head.appendChild(e)))}}function bI(t){$i.D(t),bx("dns-prefetch",t,null)}function EI(t,e){$i.C(t,e),bx("preconnect",t,e)}function wI(t,e,n){$i.L(t,e,n);var r=yl;if(r&&t&&e){var i='link[rel="preload"][as="'+Er(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+Er(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+Er(n.imageSizes)+'"]')):i+='[href="'+Er(t)+'"]';var a=i;switch(e){case"style":a=nl(t);break;case"script":a=_l(t)}Nr.has(a)||(t=pt({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Nr.set(a,t),r.querySelector(i)!==null||e==="style"&&r.querySelector(du(a))||e==="script"&&r.querySelector(fu(a))||(e=r.createElement("link"),bn(e,"link",t),on(e),r.head.appendChild(e)))}}function TI(t,e){$i.m(t,e);var n=yl;if(n&&t){var r=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+Er(r)+'"][href="'+Er(t)+'"]',a=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=_l(t)}if(!Nr.has(a)&&(t=pt({rel:"modulepreload",href:t},e),Nr.set(a,t),n.querySelector(i)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(fu(a)))return}r=n.createElement("link"),bn(r,"link",t),on(r),n.head.appendChild(r)}}}function xI(t,e,n){$i.S(t,e,n);var r=yl;if(r&&t){var i=Do(r).hoistableStyles,a=nl(t);e=e||"default";var s=i.get(a);if(!s){var o={loading:0,preload:null};if(s=r.querySelector(du(a)))o.loading=5;else{t=pt({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Nr.get(a))&&Lv(t,n);var l=s=r.createElement("link");on(l),bn(l,"link",t),l._p=new Promise(function(h,u){l.onload=h,l.onerror=u}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Ch(s,e,r)}s={type:"stylesheet",instance:s,count:1,state:o},i.set(a,s)}}}function AI(t,e){$i.X(t,e);var n=yl;if(n&&t){var r=Do(n).hoistableScripts,i=_l(t),a=r.get(i);a||(a=n.querySelector(fu(i)),a||(t=pt({src:t,async:!0},e),(e=Nr.get(i))&&Vv(t,e),a=n.createElement("script"),on(a),bn(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}function SI(t,e){$i.M(t,e);var n=yl;if(n&&t){var r=Do(n).hoistableScripts,i=_l(t),a=r.get(i);a||(a=n.querySelector(fu(i)),a||(t=pt({src:t,async:!0,type:"module"},e),(e=Nr.get(i))&&Vv(t,e),a=n.createElement("script"),on(a),bn(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}function Z_(t,e,n,r){var i=(i=xa.current)?md(i):null;if(!i)throw Error(ee(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=nl(n.href),n=Do(i).hoistableStyles,r=n.get(e),r||(r={type:"style",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=nl(n.href);var a=Do(i).hoistableStyles,s=a.get(t);if(s||(i=i.ownerDocument||i,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(t,s),(a=i.querySelector(du(t)))&&!a._p&&(s.instance=a,s.state.loading=5),Nr.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Nr.set(t,n),a||RI(i,t,n,s.state))),e&&r===null)throw Error(ee(528,""));return s}if(e&&r!==null)throw Error(ee(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=_l(n),n=Do(i).hoistableScripts,r=n.get(e),r||(r={type:"script",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(ee(444,t))}}function nl(t){return'href="'+Er(t)+'"'}function du(t){return'link[rel="stylesheet"]['+t+"]"}function Ex(t){return pt({},t,{"data-precedence":t.precedence,precedence:null})}function RI(t,e,n,r){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?r.loading=1:(e=t.createElement("link"),r.preload=e,e.addEventListener("load",function(){return r.loading|=1}),e.addEventListener("error",function(){return r.loading|=2}),bn(e,"link",n),on(e),t.head.appendChild(e))}function _l(t){return'[src="'+Er(t)+'"]'}function fu(t){return"script[async]"+t}function J_(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var r=t.querySelector('style[data-href~="'+Er(n.href)+'"]');if(r)return e.instance=r,on(r),r;var i=pt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),on(r),bn(r,"style",i),Ch(r,n.precedence,t),e.instance=r;case"stylesheet":i=nl(n.href);var a=t.querySelector(du(i));if(a)return e.state.loading|=4,e.instance=a,on(a),a;r=Ex(n),(i=Nr.get(i))&&Lv(r,i),a=(t.ownerDocument||t).createElement("link"),on(a);var s=a;return s._p=new Promise(function(o,l){s.onload=o,s.onerror=l}),bn(a,"link",r),e.state.loading|=4,Ch(a,n.precedence,t),e.instance=a;case"script":return a=_l(n.src),(i=t.querySelector(fu(a)))?(e.instance=i,on(i),i):(r=n,(i=Nr.get(a))&&(r=pt({},n),Vv(r,i)),t=t.ownerDocument||t,i=t.createElement("script"),on(i),bn(i,"link",r),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(ee(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(r=e.instance,e.state.loading|=4,Ch(r,n.precedence,t));return e.instance}function Ch(t,e,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,a=i,s=0;s<r.length;s++){var o=r[s];if(o.dataset.precedence===e)a=o;else if(a!==i)break}a?a.parentNode.insertBefore(t,a.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Lv(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Vv(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Nh=null;function eb(t,e,n){if(Nh===null){var r=new Map,i=Nh=new Map;i.set(n,r)}else i=Nh,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(t))return r;for(r.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var a=n[i];if(!(a[nu]||a[Nn]||t==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var s=a.getAttribute(e)||"";s=t+s;var o=r.get(s);o?o.push(a):r.set(s,[a])}}return r}function tb(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function CI(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function wx(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Pc=null;function NI(){}function II(t,e,n){if(Pc===null)throw Error(ee(475));var r=Pc;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var i=nl(n.href),a=t.querySelector(du(i));if(a){t=a._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(r.count++,r=pd.bind(r),t.then(r,r)),e.state.loading|=4,e.instance=a,on(a);return}a=t.ownerDocument||t,n=Ex(n),(i=Nr.get(i))&&Lv(n,i),a=a.createElement("link"),on(a);var s=a;s._p=new Promise(function(o,l){s.onload=o,s.onerror=l}),bn(a,"link",n),e.instance=a}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(r.count++,e=pd.bind(r),t.addEventListener("load",e),t.addEventListener("error",e))}}function DI(){if(Pc===null)throw Error(ee(475));var t=Pc;return t.stylesheets&&t.count===0&&Xp(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&Xp(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function pd(){if(this.count--,this.count===0){if(this.stylesheets)Xp(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var gd=null;function Xp(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,gd=new Map,e.forEach(OI,t),gd=null,pd.call(t))}function OI(t,e){if(!(e.state.loading&4)){var n=gd.get(t);if(n)var r=n.get(null);else{n=new Map,gd.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var s=i[a];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}i=e.instance,s=i.getAttribute("data-precedence"),a=n.get(s)||r,a===r&&n.set(null,i),n.set(s,i),this.count++,r=pd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),a?a.parentNode.insertBefore(i,a.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var Uc={$$typeof:Ri,Provider:null,Consumer:null,_currentValue:vs,_currentValue2:vs,_threadCount:0};function MI(t,e,n,r,i,a,s,o){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jf(0),this.hiddenUpdates=Jf(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Tx(t,e,n,r,i,a,s,o,l,h,u,d){return t=new MI(t,e,n,s,o,l,h,d),e=1,a===!0&&(e|=24),a=ar(3,null,null,e),t.current=a,a.stateNode=t,e=fv(),e.refCount++,t.pooledCache=e,e.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:e},pv(a),t}function xx(t){return t?(t=To,t):To}function Ax(t,e,n,r,i,a){i=xx(i),r.context===null?r.context=i:r.pendingContext=i,r=Aa(e),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Sa(t,r,e),n!==null&&(dr(n,t,e),uc(n,t,e))}function nb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zv(t,e){nb(t,e),(t=t.alternate)&&nb(t,e)}function Sx(t){if(t.tag===13){var e=gl(t,67108864);e!==null&&dr(e,t,67108864),zv(t,67108864)}}var vd=!0;function kI(t,e,n,r){var i=ve.T;ve.T=null;var a=He.p;try{He.p=2,Bv(t,e,n,r)}finally{He.p=a,ve.T=i}}function jI(t,e,n,r){var i=ve.T;ve.T=null;var a=He.p;try{He.p=8,Bv(t,e,n,r)}finally{He.p=a,ve.T=i}}function Bv(t,e,n,r){if(vd){var i=Qp(r);if(i===null)Im(t,e,r,yd,n),rb(t,r);else if(UI(i,t,e,n,r))r.stopPropagation();else if(rb(t,r),e&4&&-1<PI.indexOf(t)){for(;i!==null;){var a=pl(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var s=ss(a.pendingLanes);if(s!==0){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-ur(s);o.entanglements[1]|=l,s&=~l}pi(a),!(Ke&6)&&(ld=ri()+500,hu(0))}}break;case 13:o=gl(a,2),o!==null&&dr(o,a,2),hf(),zv(a,2)}if(a=Qp(r),a===null&&Im(t,e,r,yd,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Im(t,e,r,null,n)}}function Qp(t){return t=rv(t),Fv(t)}var yd=null;function Fv(t){if(yd=null,t=vo(t),t!==null){var e=Zc(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=WE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return yd=t,null}function Rx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(EC()){case tw:return 2;case nw:return 8;case $h:case wC:return 32;case rw:return 268435456;default:return 32}default:return 32}}var Kp=!1,Na=null,Ia=null,Da=null,Lc=new Map,Vc=new Map,ha=[],PI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rb(t,e){switch(t){case"focusin":case"focusout":Na=null;break;case"dragenter":case"dragleave":Ia=null;break;case"mouseover":case"mouseout":Da=null;break;case"pointerover":case"pointerout":Lc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vc.delete(e.pointerId)}}function zl(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=pl(e),e!==null&&Sx(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function UI(t,e,n,r,i){switch(e){case"focusin":return Na=zl(Na,t,e,n,r,i),!0;case"dragenter":return Ia=zl(Ia,t,e,n,r,i),!0;case"mouseover":return Da=zl(Da,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Lc.set(a,zl(Lc.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Vc.set(a,zl(Vc.get(a)||null,t,e,n,r,i)),!0}return!1}function Cx(t){var e=vo(t.target);if(e!==null){var n=Zc(e);if(n!==null){if(e=n.tag,e===13){if(e=WE(n),e!==null){t.blockedOn=e,IC(t.priority,function(){if(n.tag===13){var r=hr();r=Jg(r);var i=gl(n,r);i!==null&&dr(i,n,r),zv(n,r)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ih(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qp(t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fp=r,n.target.dispatchEvent(r),fp=null}else return e=pl(n),e!==null&&Sx(e),t.blockedOn=n,!1;e.shift()}return!0}function ib(t,e,n){Ih(t)&&n.delete(e)}function LI(){Kp=!1,Na!==null&&Ih(Na)&&(Na=null),Ia!==null&&Ih(Ia)&&(Ia=null),Da!==null&&Ih(Da)&&(Da=null),Lc.forEach(ib),Vc.forEach(ib)}function ih(t,e){t.blockedOn===e&&(t.blockedOn=null,Kp||(Kp=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,LI)))}var ah=null;function ab(t){ah!==t&&(ah=t,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,function(){ah===t&&(ah=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],i=t[e+2];if(typeof r!="function"){if(Fv(r||n)===null)continue;break}var a=pl(n);a!==null&&(t.splice(e,3),e-=3,Np(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function zc(t){function e(l){return ih(l,t)}Na!==null&&ih(Na,t),Ia!==null&&ih(Ia,t),Da!==null&&ih(Da,t),Lc.forEach(e),Vc.forEach(e);for(var n=0;n<ha.length;n++){var r=ha[n];r.blockedOn===t&&(r.blockedOn=null)}for(;0<ha.length&&(n=ha[0],n.blockedOn===null);)Cx(n),n.blockedOn===null&&ha.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],s=i[Wn]||null;if(typeof a=="function")s||ab(n);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(i=a,s=a[Wn]||null)o=s.formAction;else if(Fv(i)!==null)continue}else o=s.action;typeof o=="function"?n[r+1]=o:(n.splice(r,3),r-=3),ab(n)}}}function Hv(t){this._internalRoot=t}pf.prototype.render=Hv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));var n=e.current,r=hr();Ax(n,r,t,e,null,null)};pf.prototype.unmount=Hv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ax(t.current,2,null,t,null,null),hf(),e[ml]=null}};function pf(t){this._internalRoot=t}pf.prototype.unstable_scheduleHydration=function(t){if(t){var e=lw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ha.length&&e!==0&&e<ha[n].priority;n++);ha.splice(n,0,t),n===0&&Cx(t)}};var sb=QE.version;if(sb!=="19.1.0")throw Error(ee(527,sb,"19.1.0"));He.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=mC(e),t=t!==null?ZE(t):null,t=t===null?null:t.stateNode,t};var VI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ve,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{Jc=sh.inject(VI),cr=sh}catch{}}Zd.createRoot=function(t,e){if(!KE(t))throw Error(ee(299));var n=!1,r="",i=TT,a=xT,s=AT,o=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(a=e.onCaughtError),e.onRecoverableError!==void 0&&(s=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(o=e.unstable_transitionCallbacks)),e=Tx(t,1,!1,null,null,n,r,i,a,s,o,null),t[ml]=e.current,Uv(t),new Hv(e)};Zd.hydrateRoot=function(t,e,n){if(!KE(t))throw Error(ee(299));var r=!1,i="",a=TT,s=xT,o=AT,l=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(s=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),e=Tx(t,1,!0,e,n??null,r,i,a,s,o,l,h),e.context=xx(null),n=e.current,r=hr(),r=Jg(r),i=Aa(r),i.callback=null,Sa(n,i,r),n=r,e.current.lanes=n,tu(e,n),pi(e),t[ml]=e.current,Uv(t),new pf(e)};Zd.version="19.1.0";function Nx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nx)}catch(t){console.error(t)}}Nx(),HE.exports=Zd;var zI=HE.exports;const BI=Hg(zI);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bt(){return bt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bt.apply(this,arguments)}var qt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qt||(qt={}));const ob="popstate";function FI(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:s,hash:o}=r.location;return Bc("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:mu(i)}return qI(e,n,null,t)}function Pe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HI(){return Math.random().toString(36).substr(2,8)}function lb(t,e){return{usr:t.state,key:t.key,idx:e}}function Bc(t,e,n,r){return n===void 0&&(n=null),bt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Wa(e):e,{state:n,key:e&&e.key||r||HI()})}function mu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function qI(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o=qt.Pop,l=null,h=u();h==null&&(h=0,s.replaceState(bt({},s.state,{idx:h}),""));function u(){return(s.state||{idx:null}).idx}function d(){o=qt.Pop;let D=u(),E=D==null?null:D-h;h=D,l&&l({action:o,location:A.location,delta:E})}function f(D,E){o=qt.Push;let x=Bc(A.location,D,E);h=u()+1;let N=lb(x,h),O=A.createHref(x);try{s.pushState(N,"",O)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(O)}a&&l&&l({action:o,location:A.location,delta:1})}function m(D,E){o=qt.Replace;let x=Bc(A.location,D,E);h=u();let N=lb(x,h),O=A.createHref(x);s.replaceState(N,"",O),a&&l&&l({action:o,location:A.location,delta:0})}function b(D){let E=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof D=="string"?D:mu(D);return x=x.replace(/ $/,"%20"),Pe(E,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,E)}let A={get action(){return o},get location(){return t(i,s)},listen(D){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ob,d),l=D,()=>{i.removeEventListener(ob,d),l=null}},createHref(D){return e(i,D)},createURL:b,encodeLocation(D){let E=b(D);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:m,go(D){return s.go(D)}};return A}var Qe;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Qe||(Qe={}));const GI=new Set(["lazy","caseSensitive","path","id","index","children"]);function $I(t){return t.index===!0}function _d(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,a)=>{let s=[...n,String(a)],o=typeof i.id=="string"?i.id:s.join("-");if(Pe(i.index!==!0||!i.children,"Cannot specify children on an index route"),Pe(!r[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),$I(i)){let l=bt({},i,e(i),{id:o});return r[o]=l,l}else{let l=bt({},i,e(i),{id:o,children:void 0});return r[o]=l,i.children&&(l.children=_d(i.children,e,s,r)),l}})}function us(t,e,n){return n===void 0&&(n="/"),Dh(t,e,n,!1)}function Dh(t,e,n,r){let i=typeof e=="string"?Wa(e):e,a=pu(i.pathname||"/",n);if(a==null)return null;let s=Ix(t);XI(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let h=a4(a);o=r4(s[l],h,r)}return o}function YI(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Ix(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,s,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};l.relativePath.startsWith("/")&&(Pe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let h=Oa([r,l.relativePath]),u=n.concat(l);a.children&&a.children.length>0&&(Pe(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Ix(a.children,e,u,h)),!(a.path==null&&!a.index)&&e.push({path:h,score:t4(h,a.index),routesMeta:u})};return t.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let l of Dx(a.path))i(a,s,l)}),e}function Dx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=Dx(r.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function XI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:n4(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const QI=/^:[\w-]+$/,KI=3,WI=2,ZI=1,JI=10,e4=-2,cb=t=>t==="*";function t4(t,e){let n=t.split("/"),r=n.length;return n.some(cb)&&(r+=e4),e&&(r+=WI),n.filter(i=>!cb(i)).reduce((i,a)=>i+(QI.test(a)?KI:a===""?ZI:JI),r)}function n4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function r4(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let l=r[o],h=o===r.length-1,u=a==="/"?e:e.slice(a.length)||"/",d=ub({path:l.relativePath,caseSensitive:l.caseSensitive,end:h},u),f=l.route;if(!d&&h&&n&&!r[r.length-1].route.index&&(d=ub({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:Oa([a,d.pathname]),pathnameBase:l4(Oa([a,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(a=Oa([a,d.pathnameBase]))}return s}function ub(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=i4(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((h,u,d)=>{let{paramName:f,isOptional:m}=u;if(f==="*"){let A=o[d]||"";s=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const b=o[d];return m&&!b?h[f]=void 0:h[f]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:s,pattern:t}}function i4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),rl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function a4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rl(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function pu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function s4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Wa(t):t;return{pathname:n?n.startsWith("/")?n:o4(n,e):e,search:c4(r),hash:u4(i)}}function o4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Om(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ox(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Mx(t,e){let n=Ox(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function kx(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Wa(t):(i=bt({},t),Pe(!i.pathname||!i.pathname.includes("?"),Om("?","pathname","search",i)),Pe(!i.pathname||!i.pathname.includes("#"),Om("#","pathname","hash",i)),Pe(!i.search||!i.search.includes("#"),Om("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let d=e.length-1;if(!r&&s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}o=d>=0?e[d]:"/"}let l=s4(i,o),h=s&&s!=="/"&&s.endsWith("/"),u=(a||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(h||u)&&(l.pathname+="/"),l}const Oa=t=>t.join("/").replace(/\/\/+/g,"/"),l4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),c4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,u4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class bd{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function il(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const jx=["post","put","patch","delete"],h4=new Set(jx),d4=["get",...jx],f4=new Set(d4),m4=new Set([301,302,303,307,308]),p4=new Set([307,308]),Mm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},g4={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Bl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},qv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,v4=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Px="remix-router-transitions";function y4(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Pe(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let L=t.detectErrorBoundary;i=F=>({hasErrorBoundary:L(F)})}else i=v4;let a={},s=_d(t.routes,i,void 0,a),o,l=t.basename||"/",h=t.dataStrategy||w4,u=t.patchRoutesOnNavigation,d=bt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),f=null,m=new Set,b=null,A=null,D=null,E=t.hydrationData!=null,x=us(s,t.history.location,l),N=!1,O=null;if(x==null&&!u){let L=Hn(404,{pathname:t.history.location.pathname}),{matches:F,route:Q}=Eb(s);x=F,O={[Q.id]:L}}x&&!t.hydrationData&&Mn(x,s,t.history.location.pathname).active&&(x=null);let P;if(x)if(x.some(L=>L.route.lazy))P=!1;else if(!x.some(L=>L.route.loader))P=!0;else if(d.v7_partialHydration){let L=t.hydrationData?t.hydrationData.loaderData:null,F=t.hydrationData?t.hydrationData.errors:null;if(F){let Q=x.findIndex(te=>F[te.route.id]!==void 0);P=x.slice(0,Q+1).every(te=>!Zp(te.route,L,F))}else P=x.every(Q=>!Zp(Q.route,L,F))}else P=t.hydrationData!=null;else if(P=!1,x=[],d.v7_partialHydration){let L=Mn(null,s,t.history.location.pathname);L.active&&L.matches&&(N=!0,x=L.matches)}let R,_={historyAction:t.history.action,location:t.history.location,matches:x,initialized:P,navigation:Mm,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||O,fetchers:new Map,blockers:new Map},g=qt.Pop,y=!1,T,C=!1,I=new Map,S=null,U=!1,z=!1,k=[],M=new Set,H=new Map,B=0,X=-1,re=new Map,V=new Set,K=new Map,$=new Map,Y=new Set,le=new Map,Te=new Map,me;function De(){if(f=t.history.listen(L=>{let{action:F,location:Q,delta:te}=L;if(me){me(),me=void 0;return}rl(Te.size===0||te!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ie=Ir({currentLocation:_.location,nextLocation:Q,historyAction:F});if(ie&&te!=null){let he=new Promise(ge=>{me=ge});t.history.go(te*-1),$r(ie,{state:"blocked",location:Q,proceed(){$r(ie,{state:"proceeding",proceed:void 0,reset:void 0,location:Q}),he.then(()=>t.history.go(te))},reset(){let ge=new Map(_.blockers);ge.set(ie,Bl),Ae({blockers:ge})}});return}return it(F,Q)}),n){P4(e,I);let L=()=>U4(e,I);e.addEventListener("pagehide",L),S=()=>e.removeEventListener("pagehide",L)}return _.initialized||it(qt.Pop,_.location,{initialHydration:!0}),R}function ze(){f&&f(),S&&S(),m.clear(),T&&T.abort(),_.fetchers.forEach((L,F)=>tn(F)),_.blockers.forEach((L,F)=>Gr(F))}function We(L){return m.add(L),()=>m.delete(L)}function Ae(L,F){F===void 0&&(F={}),_=bt({},_,L);let Q=[],te=[];d.v7_fetcherPersist&&_.fetchers.forEach((ie,he)=>{ie.state==="idle"&&(Y.has(he)?te.push(he):Q.push(he))}),Y.forEach(ie=>{!_.fetchers.has(ie)&&!H.has(ie)&&te.push(ie)}),[...m].forEach(ie=>ie(_,{deletedFetchers:te,viewTransitionOpts:F.viewTransitionOpts,flushSync:F.flushSync===!0})),d.v7_fetcherPersist?(Q.forEach(ie=>_.fetchers.delete(ie)),te.forEach(ie=>tn(ie))):te.forEach(ie=>Y.delete(ie))}function en(L,F,Q){var te,ie;let{flushSync:he}=Q===void 0?{}:Q,ge=_.actionData!=null&&_.navigation.formMethod!=null&&Ur(_.navigation.formMethod)&&_.navigation.state==="loading"&&((te=L.state)==null?void 0:te._isRedirect)!==!0,ue;F.actionData?Object.keys(F.actionData).length>0?ue=F.actionData:ue=null:ge?ue=_.actionData:ue=null;let ce=F.loaderData?_b(_.loaderData,F.loaderData,F.matches||[],F.errors):_.loaderData,oe=_.blockers;oe.size>0&&(oe=new Map(oe),oe.forEach((we,Ft)=>oe.set(Ft,Bl)));let de=y===!0||_.navigation.formMethod!=null&&Ur(_.navigation.formMethod)&&((ie=L.state)==null?void 0:ie._isRedirect)!==!0;o&&(s=o,o=void 0),U||g===qt.Pop||(g===qt.Push?t.history.push(L,L.state):g===qt.Replace&&t.history.replace(L,L.state));let _e;if(g===qt.Pop){let we=I.get(_.location.pathname);we&&we.has(L.pathname)?_e={currentLocation:_.location,nextLocation:L}:I.has(L.pathname)&&(_e={currentLocation:L,nextLocation:_.location})}else if(C){let we=I.get(_.location.pathname);we?we.add(L.pathname):(we=new Set([L.pathname]),I.set(_.location.pathname,we)),_e={currentLocation:_.location,nextLocation:L}}Ae(bt({},F,{actionData:ue,loaderData:ce,historyAction:g,location:L,initialized:!0,navigation:Mm,revalidation:"idle",restoreScrollPosition:Xr(L,F.matches||_.matches),preventScrollReset:de,blockers:oe}),{viewTransitionOpts:_e,flushSync:he===!0}),g=qt.Pop,y=!1,C=!1,U=!1,z=!1,k=[]}async function un(L,F){if(typeof L=="number"){t.history.go(L);return}let Q=Wp(_.location,_.matches,l,d.v7_prependBasename,L,d.v7_relativeSplatPath,F==null?void 0:F.fromRouteId,F==null?void 0:F.relative),{path:te,submission:ie,error:he}=hb(d.v7_normalizeFormMethod,!1,Q,F),ge=_.location,ue=Bc(_.location,te,F&&F.state);ue=bt({},ue,t.history.encodeLocation(ue));let ce=F&&F.replace!=null?F.replace:void 0,oe=qt.Push;ce===!0?oe=qt.Replace:ce===!1||ie!=null&&Ur(ie.formMethod)&&ie.formAction===_.location.pathname+_.location.search&&(oe=qt.Replace);let de=F&&"preventScrollReset"in F?F.preventScrollReset===!0:void 0,_e=(F&&F.flushSync)===!0,we=Ir({currentLocation:ge,nextLocation:ue,historyAction:oe});if(we){$r(we,{state:"blocked",location:ue,proceed(){$r(we,{state:"proceeding",proceed:void 0,reset:void 0,location:ue}),un(L,F)},reset(){let Ft=new Map(_.blockers);Ft.set(we,Bl),Ae({blockers:Ft})}});return}return await it(oe,ue,{submission:ie,pendingError:he,preventScrollReset:de,replace:F&&F.replace,enableViewTransition:F&&F.viewTransition,flushSync:_e})}function Ze(){if(gt(),Ae({revalidation:"loading"}),_.navigation.state!=="submitting"){if(_.navigation.state==="idle"){it(_.historyAction,_.location,{startUninterruptedRevalidation:!0});return}it(g||_.historyAction,_.navigation.location,{overrideNavigation:_.navigation,enableViewTransition:C===!0})}}async function it(L,F,Q){T&&T.abort(),T=null,g=L,U=(Q&&Q.startUninterruptedRevalidation)===!0,Yr(_.location,_.matches),y=(Q&&Q.preventScrollReset)===!0,C=(Q&&Q.enableViewTransition)===!0;let te=o||s,ie=Q&&Q.overrideNavigation,he=Q!=null&&Q.initialHydration&&_.matches&&_.matches.length>0&&!N?_.matches:us(te,F,l),ge=(Q&&Q.flushSync)===!0;if(he&&_.initialized&&!z&&C4(_.location,F)&&!(Q&&Q.submission&&Ur(Q.submission.formMethod))){en(F,{matches:he},{flushSync:ge});return}let ue=Mn(he,te,F.pathname);if(ue.active&&ue.matches&&(he=ue.matches),!he){let{error:Ye,notFoundMatches:je,route:lt}=Dr(F.pathname);en(F,{matches:je,loaderData:{},errors:{[lt.id]:Ye}},{flushSync:ge});return}T=new AbortController;let ce=no(t.history,F,T.signal,Q&&Q.submission),oe;if(Q&&Q.pendingError)oe=[hs(he).route.id,{type:Qe.error,error:Q.pendingError}];else if(Q&&Q.submission&&Ur(Q.submission.formMethod)){let Ye=await Je(ce,F,Q.submission,he,ue.active,{replace:Q.replace,flushSync:ge});if(Ye.shortCircuited)return;if(Ye.pendingActionResult){let[je,lt]=Ye.pendingActionResult;if(ir(lt)&&il(lt.error)&&lt.error.status===404){T=null,en(F,{matches:Ye.matches,loaderData:{},errors:{[je]:lt.error}});return}}he=Ye.matches||he,oe=Ye.pendingActionResult,ie=km(F,Q.submission),ge=!1,ue.active=!1,ce=no(t.history,ce.url,ce.signal)}let{shortCircuited:de,matches:_e,loaderData:we,errors:Ft}=await $e(ce,F,he,ue.active,ie,Q&&Q.submission,Q&&Q.fetcherSubmission,Q&&Q.replace,Q&&Q.initialHydration===!0,ge,oe);de||(T=null,en(F,bt({matches:_e||he},bb(oe),{loaderData:we,errors:Ft})))}async function Je(L,F,Q,te,ie,he){he===void 0&&(he={}),gt();let ge=k4(F,Q);if(Ae({navigation:ge},{flushSync:he.flushSync===!0}),ie){let oe=await nn(te,F.pathname,L.signal);if(oe.type==="aborted")return{shortCircuited:!0};if(oe.type==="error"){let de=hs(oe.partialMatches).route.id;return{matches:oe.partialMatches,pendingActionResult:[de,{type:Qe.error,error:oe.error}]}}else if(oe.matches)te=oe.matches;else{let{notFoundMatches:de,error:_e,route:we}=Dr(F.pathname);return{matches:de,pendingActionResult:[we.id,{type:Qe.error,error:_e}]}}}let ue,ce=Jl(te,F);if(!ce.route.action&&!ce.route.lazy)ue={type:Qe.error,error:Hn(405,{method:L.method,pathname:F.pathname,routeId:ce.route.id})};else if(ue=(await Rt("action",_,L,[ce],te,null))[ce.route.id],L.signal.aborted)return{shortCircuited:!0};if(fs(ue)){let oe;return he&&he.replace!=null?oe=he.replace:oe=gb(ue.response.headers.get("Location"),new URL(L.url),l)===_.location.pathname+_.location.search,await Ce(L,ue,!0,{submission:Q,replace:oe}),{shortCircuited:!0}}if(ba(ue))throw Hn(400,{type:"defer-action"});if(ir(ue)){let oe=hs(te,ce.route.id);return(he&&he.replace)!==!0&&(g=qt.Push),{matches:te,pendingActionResult:[oe.route.id,ue]}}return{matches:te,pendingActionResult:[ce.route.id,ue]}}async function $e(L,F,Q,te,ie,he,ge,ue,ce,oe,de){let _e=ie||km(F,he),we=he||ge||Tb(_e),Ft=!U&&(!d.v7_partialHydration||!ce);if(te){if(Ft){let dt=xt(de);Ae(bt({navigation:_e},dt!==void 0?{actionData:dt}:{}),{flushSync:oe})}let Ue=await nn(Q,F.pathname,L.signal);if(Ue.type==="aborted")return{shortCircuited:!0};if(Ue.type==="error"){let dt=hs(Ue.partialMatches).route.id;return{matches:Ue.partialMatches,loaderData:{},errors:{[dt]:Ue.error}}}else if(Ue.matches)Q=Ue.matches;else{let{error:dt,notFoundMatches:yi,route:Wi}=Dr(F.pathname);return{matches:yi,loaderData:{},errors:{[Wi.id]:dt}}}}let Ye=o||s,[je,lt]=fb(t.history,_,Q,we,F,d.v7_partialHydration&&ce===!0,d.v7_skipActionErrorRevalidation,z,k,M,Y,K,V,Ye,l,de);if(Tn(Ue=>!(Q&&Q.some(dt=>dt.route.id===Ue))||je&&je.some(dt=>dt.route.id===Ue)),X=++B,je.length===0&&lt.length===0){let Ue=Vn();return en(F,bt({matches:Q,loaderData:{},errors:de&&ir(de[1])?{[de[0]]:de[1].error}:null},bb(de),Ue?{fetchers:new Map(_.fetchers)}:{}),{flushSync:oe}),{shortCircuited:!0}}if(Ft){let Ue={};if(!te){Ue.navigation=_e;let dt=xt(de);dt!==void 0&&(Ue.actionData=dt)}lt.length>0&&(Ue.fetchers=Mt(lt)),Ae(Ue,{flushSync:oe})}lt.forEach(Ue=>{jt(Ue.key),Ue.controller&&H.set(Ue.key,Ue.controller)});let gi=()=>lt.forEach(Ue=>jt(Ue.key));T&&T.signal.addEventListener("abort",gi);let{loaderResults:Qi,fetcherResults:Or}=await et(_,Q,je,lt,L);if(L.signal.aborted)return{shortCircuited:!0};T&&T.signal.removeEventListener("abort",gi),lt.forEach(Ue=>H.delete(Ue.key));let kn=oh(Qi);if(kn)return await Ce(L,kn.result,!0,{replace:ue}),{shortCircuited:!0};if(kn=oh(Or),kn)return V.add(kn.key),await Ce(L,kn.result,!0,{replace:ue}),{shortCircuited:!0};let{loaderData:Ks,errors:vi}=yb(_,Q,Qi,de,lt,Or,le);le.forEach((Ue,dt)=>{Ue.subscribe(yi=>{(yi||Ue.done)&&le.delete(dt)})}),d.v7_partialHydration&&ce&&_.errors&&(vi=bt({},_.errors,vi));let Jn=Vn(),pr=Xi(X),Ki=Jn||pr||lt.length>0;return bt({matches:Q,loaderData:Ks,errors:vi},Ki?{fetchers:new Map(_.fetchers)}:{})}function xt(L){if(L&&!ir(L[1]))return{[L[0]]:L[1].data};if(_.actionData)return Object.keys(_.actionData).length===0?null:_.actionData}function Mt(L){return L.forEach(F=>{let Q=_.fetchers.get(F.key),te=Fl(void 0,Q?Q.data:void 0);_.fetchers.set(F.key,te)}),new Map(_.fetchers)}function ht(L,F,Q,te){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");jt(L);let ie=(te&&te.flushSync)===!0,he=o||s,ge=Wp(_.location,_.matches,l,d.v7_prependBasename,Q,d.v7_relativeSplatPath,F,te==null?void 0:te.relative),ue=us(he,ge,l),ce=Mn(ue,he,ge);if(ce.active&&ce.matches&&(ue=ce.matches),!ue){zt(L,F,Hn(404,{pathname:ge}),{flushSync:ie});return}let{path:oe,submission:de,error:_e}=hb(d.v7_normalizeFormMethod,!0,ge,te);if(_e){zt(L,F,_e,{flushSync:ie});return}let we=Jl(ue,oe),Ft=(te&&te.preventScrollReset)===!0;if(de&&Ur(de.formMethod)){hn(L,F,oe,we,ue,ce.active,ie,Ft,de);return}K.set(L,{routeId:F,path:oe}),ot(L,F,oe,we,ue,ce.active,ie,Ft,de)}async function hn(L,F,Q,te,ie,he,ge,ue,ce){gt(),K.delete(L);function oe(vt){if(!vt.route.action&&!vt.route.lazy){let Qr=Hn(405,{method:ce.formMethod,pathname:Q,routeId:F});return zt(L,F,Qr,{flushSync:ge}),!0}return!1}if(!he&&oe(te))return;let de=_.fetchers.get(L);qe(L,j4(ce,de),{flushSync:ge});let _e=new AbortController,we=no(t.history,Q,_e.signal,ce);if(he){let vt=await nn(ie,new URL(we.url).pathname,we.signal,L);if(vt.type==="aborted")return;if(vt.type==="error"){zt(L,F,vt.error,{flushSync:ge});return}else if(vt.matches){if(ie=vt.matches,te=Jl(ie,Q),oe(te))return}else{zt(L,F,Hn(404,{pathname:Q}),{flushSync:ge});return}}H.set(L,_e);let Ft=B,je=(await Rt("action",_,we,[te],ie,L))[te.route.id];if(we.signal.aborted){H.get(L)===_e&&H.delete(L);return}if(d.v7_fetcherPersist&&Y.has(L)){if(fs(je)||ir(je)){qe(L,aa(void 0));return}}else{if(fs(je))if(H.delete(L),X>Ft){qe(L,aa(void 0));return}else return V.add(L),qe(L,Fl(ce)),Ce(we,je,!1,{fetcherSubmission:ce,preventScrollReset:ue});if(ir(je)){zt(L,F,je.error);return}}if(ba(je))throw Hn(400,{type:"defer-action"});let lt=_.navigation.location||_.location,gi=no(t.history,lt,_e.signal),Qi=o||s,Or=_.navigation.state!=="idle"?us(Qi,_.navigation.location,l):_.matches;Pe(Or,"Didn't find any matches after fetcher action");let kn=++B;re.set(L,kn);let Ks=Fl(ce,je.data);_.fetchers.set(L,Ks);let[vi,Jn]=fb(t.history,_,Or,ce,lt,!1,d.v7_skipActionErrorRevalidation,z,k,M,Y,K,V,Qi,l,[te.route.id,je]);Jn.filter(vt=>vt.key!==L).forEach(vt=>{let Qr=vt.key,Al=_.fetchers.get(Qr),ku=Fl(void 0,Al?Al.data:void 0);_.fetchers.set(Qr,ku),jt(Qr),vt.controller&&H.set(Qr,vt.controller)}),Ae({fetchers:new Map(_.fetchers)});let pr=()=>Jn.forEach(vt=>jt(vt.key));_e.signal.addEventListener("abort",pr);let{loaderResults:Ki,fetcherResults:Ue}=await et(_,Or,vi,Jn,gi);if(_e.signal.aborted)return;_e.signal.removeEventListener("abort",pr),re.delete(L),H.delete(L),Jn.forEach(vt=>H.delete(vt.key));let dt=oh(Ki);if(dt)return Ce(gi,dt.result,!1,{preventScrollReset:ue});if(dt=oh(Ue),dt)return V.add(dt.key),Ce(gi,dt.result,!1,{preventScrollReset:ue});let{loaderData:yi,errors:Wi}=yb(_,Or,Ki,void 0,Jn,Ue,le);if(_.fetchers.has(L)){let vt=aa(je.data);_.fetchers.set(L,vt)}Xi(kn),_.navigation.state==="loading"&&kn>X?(Pe(g,"Expected pending action"),T&&T.abort(),en(_.navigation.location,{matches:Or,loaderData:yi,errors:Wi,fetchers:new Map(_.fetchers)})):(Ae({errors:Wi,loaderData:_b(_.loaderData,yi,Or,Wi),fetchers:new Map(_.fetchers)}),z=!1)}async function ot(L,F,Q,te,ie,he,ge,ue,ce){let oe=_.fetchers.get(L);qe(L,Fl(ce,oe?oe.data:void 0),{flushSync:ge});let de=new AbortController,_e=no(t.history,Q,de.signal);if(he){let je=await nn(ie,new URL(_e.url).pathname,_e.signal,L);if(je.type==="aborted")return;if(je.type==="error"){zt(L,F,je.error,{flushSync:ge});return}else if(je.matches)ie=je.matches,te=Jl(ie,Q);else{zt(L,F,Hn(404,{pathname:Q}),{flushSync:ge});return}}H.set(L,de);let we=B,Ye=(await Rt("loader",_,_e,[te],ie,L))[te.route.id];if(ba(Ye)&&(Ye=await Gv(Ye,_e.signal,!0)||Ye),H.get(L)===de&&H.delete(L),!_e.signal.aborted){if(Y.has(L)){qe(L,aa(void 0));return}if(fs(Ye))if(X>we){qe(L,aa(void 0));return}else{V.add(L),await Ce(_e,Ye,!1,{preventScrollReset:ue});return}if(ir(Ye)){zt(L,F,Ye.error);return}Pe(!ba(Ye),"Unhandled fetcher deferred data"),qe(L,aa(Ye.data))}}async function Ce(L,F,Q,te){let{submission:ie,fetcherSubmission:he,preventScrollReset:ge,replace:ue}=te===void 0?{}:te;F.response.headers.has("X-Remix-Revalidate")&&(z=!0);let ce=F.response.headers.get("Location");Pe(ce,"Expected a Location header on the redirect Response"),ce=gb(ce,new URL(L.url),l);let oe=Bc(_.location,ce,{_isRedirect:!0});if(n){let je=!1;if(F.response.headers.has("X-Remix-Reload-Document"))je=!0;else if(qv.test(ce)){const lt=t.history.createURL(ce);je=lt.origin!==e.location.origin||pu(lt.pathname,l)==null}if(je){ue?e.location.replace(ce):e.location.assign(ce);return}}T=null;let de=ue===!0||F.response.headers.has("X-Remix-Replace")?qt.Replace:qt.Push,{formMethod:_e,formAction:we,formEncType:Ft}=_.navigation;!ie&&!he&&_e&&we&&Ft&&(ie=Tb(_.navigation));let Ye=ie||he;if(p4.has(F.response.status)&&Ye&&Ur(Ye.formMethod))await it(de,oe,{submission:bt({},Ye,{formAction:ce}),preventScrollReset:ge||y,enableViewTransition:Q?C:void 0});else{let je=km(oe,ie);await it(de,oe,{overrideNavigation:je,fetcherSubmission:he,preventScrollReset:ge||y,enableViewTransition:Q?C:void 0})}}async function Rt(L,F,Q,te,ie,he){let ge,ue={};try{ge=await T4(h,L,F,Q,te,ie,he,a,i)}catch(ce){return te.forEach(oe=>{ue[oe.route.id]={type:Qe.error,error:ce}}),ue}for(let[ce,oe]of Object.entries(ge))if(N4(oe)){let de=oe.result;ue[ce]={type:Qe.redirect,response:S4(de,Q,ce,ie,l,d.v7_relativeSplatPath)}}else ue[ce]=await A4(oe);return ue}async function et(L,F,Q,te,ie){let he=L.matches,ge=Rt("loader",L,ie,Q,F,null),ue=Promise.all(te.map(async de=>{if(de.matches&&de.match&&de.controller){let we=(await Rt("loader",L,no(t.history,de.path,de.controller.signal),[de.match],de.matches,de.key))[de.match.route.id];return{[de.key]:we}}else return Promise.resolve({[de.key]:{type:Qe.error,error:Hn(404,{pathname:de.path})}})})),ce=await ge,oe=(await ue).reduce((de,_e)=>Object.assign(de,_e),{});return await Promise.all([O4(F,ce,ie.signal,he,L.loaderData),M4(F,oe,te)]),{loaderResults:ce,fetcherResults:oe}}function gt(){z=!0,k.push(...Tn()),K.forEach((L,F)=>{H.has(F)&&M.add(F),jt(F)})}function qe(L,F,Q){Q===void 0&&(Q={}),_.fetchers.set(L,F),Ae({fetchers:new Map(_.fetchers)},{flushSync:(Q&&Q.flushSync)===!0})}function zt(L,F,Q,te){te===void 0&&(te={});let ie=hs(_.matches,F);tn(L),Ae({errors:{[ie.route.id]:Q},fetchers:new Map(_.fetchers)},{flushSync:(te&&te.flushSync)===!0})}function kt(L){return $.set(L,($.get(L)||0)+1),Y.has(L)&&Y.delete(L),_.fetchers.get(L)||g4}function tn(L){let F=_.fetchers.get(L);H.has(L)&&!(F&&F.state==="loading"&&re.has(L))&&jt(L),K.delete(L),re.delete(L),V.delete(L),d.v7_fetcherPersist&&Y.delete(L),M.delete(L),_.fetchers.delete(L)}function Bt(L){let F=($.get(L)||0)-1;F<=0?($.delete(L),Y.add(L),d.v7_fetcherPersist||tn(L)):$.set(L,F),Ae({fetchers:new Map(_.fetchers)})}function jt(L){let F=H.get(L);F&&(F.abort(),H.delete(L))}function wn(L){for(let F of L){let Q=kt(F),te=aa(Q.data);_.fetchers.set(F,te)}}function Vn(){let L=[],F=!1;for(let Q of V){let te=_.fetchers.get(Q);Pe(te,"Expected fetcher: "+Q),te.state==="loading"&&(V.delete(Q),L.push(Q),F=!0)}return wn(L),F}function Xi(L){let F=[];for(let[Q,te]of re)if(te<L){let ie=_.fetchers.get(Q);Pe(ie,"Expected fetcher: "+Q),ie.state==="loading"&&(jt(Q),re.delete(Q),F.push(Q))}return wn(F),F.length>0}function xl(L,F){let Q=_.blockers.get(L)||Bl;return Te.get(L)!==F&&Te.set(L,F),Q}function Gr(L){_.blockers.delete(L),Te.delete(L)}function $r(L,F){let Q=_.blockers.get(L)||Bl;Pe(Q.state==="unblocked"&&F.state==="blocked"||Q.state==="blocked"&&F.state==="blocked"||Q.state==="blocked"&&F.state==="proceeding"||Q.state==="blocked"&&F.state==="unblocked"||Q.state==="proceeding"&&F.state==="unblocked","Invalid blocker state transition: "+Q.state+" -> "+F.state);let te=new Map(_.blockers);te.set(L,F),Ae({blockers:te})}function Ir(L){let{currentLocation:F,nextLocation:Q,historyAction:te}=L;if(Te.size===0)return;Te.size>1&&rl(!1,"A router only supports one blocker at a time");let ie=Array.from(Te.entries()),[he,ge]=ie[ie.length-1],ue=_.blockers.get(he);if(!(ue&&ue.state==="proceeding")&&ge({currentLocation:F,nextLocation:Q,historyAction:te}))return he}function Dr(L){let F=Hn(404,{pathname:L}),Q=o||s,{matches:te,route:ie}=Eb(Q);return Tn(),{notFoundMatches:te,route:ie,error:F}}function Tn(L){let F=[];return le.forEach((Q,te)=>{(!L||L(te))&&(Q.cancel(),F.push(te),le.delete(te))}),F}function zn(L,F,Q){if(b=L,D=F,A=Q||null,!E&&_.navigation===Mm){E=!0;let te=Xr(_.location,_.matches);te!=null&&Ae({restoreScrollPosition:te})}return()=>{b=null,D=null,A=null}}function dn(L,F){return A&&A(L,F.map(te=>YI(te,_.loaderData)))||L.key}function Yr(L,F){if(b&&D){let Q=dn(L,F);b[Q]=D()}}function Xr(L,F){if(b){let Q=dn(L,F),te=b[Q];if(typeof te=="number")return te}return null}function Mn(L,F,Q){if(u)if(L){if(Object.keys(L[0].params).length>0)return{active:!0,matches:Dh(F,Q,l,!0)}}else return{active:!0,matches:Dh(F,Q,l,!0)||[]};return{active:!1,matches:null}}async function nn(L,F,Q,te){if(!u)return{type:"success",matches:L};let ie=L;for(;;){let he=o==null,ge=o||s,ue=a;try{await u({signal:Q,path:F,matches:ie,fetcherKey:te,patch:(de,_e)=>{Q.aborted||pb(de,_e,ge,ue,i)}})}catch(de){return{type:"error",error:de,partialMatches:ie}}finally{he&&!Q.aborted&&(s=[...s])}if(Q.aborted)return{type:"aborted"};let ce=us(ge,F,l);if(ce)return{type:"success",matches:ce};let oe=Dh(ge,F,l,!0);if(!oe||ie.length===oe.length&&ie.every((de,_e)=>de.route.id===oe[_e].route.id))return{type:"success",matches:null};ie=oe}}function Mu(L){a={},o=_d(L,i,void 0,a)}function fn(L,F){let Q=o==null;pb(L,F,o||s,a,i),Q&&(s=[...s],Ae({}))}return R={get basename(){return l},get future(){return d},get state(){return _},get routes(){return s},get window(){return e},initialize:De,subscribe:We,enableScrollRestoration:zn,navigate:un,fetch:ht,revalidate:Ze,createHref:L=>t.history.createHref(L),encodeLocation:L=>t.history.encodeLocation(L),getFetcher:kt,deleteFetcher:Bt,dispose:ze,getBlocker:xl,deleteBlocker:Gr,patchRoutes:fn,_internalFetchControllers:H,_internalActiveDeferreds:le,_internalSetRoutes:Mu},R}function _4(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Wp(t,e,n,r,i,a,s,o){let l,h;if(s){l=[];for(let d of e)if(l.push(d),d.route.id===s){h=d;break}}else l=e,h=e[e.length-1];let u=kx(i||".",Mx(l,a),pu(t.pathname,n)||t.pathname,o==="path");if(i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&h){let d=$v(u.search);if(h.route.index&&!d)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&d){let f=new URLSearchParams(u.search),m=f.getAll("index");f.delete("index"),m.filter(A=>A).forEach(A=>f.append("index",A));let b=f.toString();u.search=b?"?"+b:""}}return r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Oa([n,u.pathname])),mu(u)}function hb(t,e,n,r){if(!r||!_4(r))return{path:n};if(r.formMethod&&!D4(r.formMethod))return{path:n,error:Hn(405,{method:r.formMethod})};let i=()=>({path:n,error:Hn(400,{type:"invalid-body"})}),a=r.formMethod||"get",s=t?a.toUpperCase():a.toLowerCase(),o=Vx(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Ur(s))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((m,b)=>{let[A,D]=b;return""+m+A+"="+D+`
`},""):String(r.body);return{path:n,submission:{formMethod:s,formAction:o,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!Ur(s))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:o,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}Pe(typeof FormData=="function","FormData is not available in this environment");let l,h;if(r.formData)l=Jp(r.formData),h=r.formData;else if(r.body instanceof FormData)l=Jp(r.body),h=r.body;else if(r.body instanceof URLSearchParams)l=r.body,h=vb(l);else if(r.body==null)l=new URLSearchParams,h=new FormData;else try{l=new URLSearchParams(r.body),h=vb(l)}catch{return i()}let u={formMethod:s,formAction:o,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:h,json:void 0,text:void 0};if(Ur(u.formMethod))return{path:n,submission:u};let d=Wa(n);return e&&d.search&&$v(d.search)&&l.append("index",""),d.search="?"+l,{path:mu(d),submission:u}}function db(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function fb(t,e,n,r,i,a,s,o,l,h,u,d,f,m,b,A){let D=A?ir(A[1])?A[1].error:A[1].data:void 0,E=t.createURL(e.location),x=t.createURL(i),N=n;a&&e.errors?N=db(n,Object.keys(e.errors)[0],!0):A&&ir(A[1])&&(N=db(n,A[0]));let O=A?A[1].statusCode:void 0,P=s&&O&&O>=400,R=N.filter((g,y)=>{let{route:T}=g;if(T.lazy)return!0;if(T.loader==null)return!1;if(a)return Zp(T,e.loaderData,e.errors);if(b4(e.loaderData,e.matches[y],g)||l.some(S=>S===g.route.id))return!0;let C=e.matches[y],I=g;return mb(g,bt({currentUrl:E,currentParams:C.params,nextUrl:x,nextParams:I.params},r,{actionResult:D,actionStatus:O,defaultShouldRevalidate:P?!1:o||E.pathname+E.search===x.pathname+x.search||E.search!==x.search||Ux(C,I)}))}),_=[];return d.forEach((g,y)=>{if(a||!n.some(U=>U.route.id===g.routeId)||u.has(y))return;let T=us(m,g.path,b);if(!T){_.push({key:y,routeId:g.routeId,path:g.path,matches:null,match:null,controller:null});return}let C=e.fetchers.get(y),I=Jl(T,g.path),S=!1;f.has(y)?S=!1:h.has(y)?(h.delete(y),S=!0):C&&C.state!=="idle"&&C.data===void 0?S=o:S=mb(I,bt({currentUrl:E,currentParams:e.matches[e.matches.length-1].params,nextUrl:x,nextParams:n[n.length-1].params},r,{actionResult:D,actionStatus:O,defaultShouldRevalidate:P?!1:o})),S&&_.push({key:y,routeId:g.routeId,path:g.path,matches:T,match:I,controller:new AbortController})}),[R,_]}function Zp(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function b4(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function Ux(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function mb(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function pb(t,e,n,r,i){var a;let s;if(t){let h=r[t];Pe(h,"No route found to patch children into: routeId = "+t),h.children||(h.children=[]),s=h.children}else s=n;let o=e.filter(h=>!s.some(u=>Lx(h,u))),l=_d(o,i,[t||"_","patch",String(((a=s)==null?void 0:a.length)||"0")],r);s.push(...l)}function Lx(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(a=>Lx(n,a))}):!1}async function E4(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Pe(i,"No route found in manifest");let a={};for(let s in r){let l=i[s]!==void 0&&s!=="hasErrorBoundary";rl(!l,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!l&&!GI.has(s)&&(a[s]=r[s])}Object.assign(i,a),Object.assign(i,bt({},e(i),{lazy:void 0}))}async function w4(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,a,s)=>Object.assign(i,{[n[s].route.id]:a}),{})}async function T4(t,e,n,r,i,a,s,o,l,h){let u=a.map(m=>m.route.lazy?E4(m.route,l,o):void 0),d=a.map((m,b)=>{let A=u[b],D=i.some(x=>x.route.id===m.route.id);return bt({},m,{shouldLoad:D,resolve:async x=>(x&&r.method==="GET"&&(m.route.lazy||m.route.loader)&&(D=!0),D?x4(e,r,m,A,x,h):Promise.resolve({type:Qe.data,result:void 0}))})}),f=await t({matches:d,request:r,params:a[0].params,fetcherKey:s,context:h});try{await Promise.all(u)}catch{}return f}async function x4(t,e,n,r,i,a){let s,o,l=h=>{let u,d=new Promise((b,A)=>u=A);o=()=>u(),e.signal.addEventListener("abort",o);let f=b=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):h({request:e,params:n.params,context:a},...b!==void 0?[b]:[]),m=(async()=>{try{return{type:"data",result:await(i?i(A=>f(A)):f())}}catch(b){return{type:"error",result:b}}})();return Promise.race([m,d])};try{let h=n.route[t];if(r)if(h){let u,[d]=await Promise.all([l(h).catch(f=>{u=f}),r]);if(u!==void 0)throw u;s=d}else if(await r,h=n.route[t],h)s=await l(h);else if(t==="action"){let u=new URL(e.url),d=u.pathname+u.search;throw Hn(405,{method:e.method,pathname:d,routeId:n.route.id})}else return{type:Qe.data,result:void 0};else if(h)s=await l(h);else{let u=new URL(e.url),d=u.pathname+u.search;throw Hn(404,{pathname:d})}Pe(s.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:Qe.error,result:h}}finally{o&&e.signal.removeEventListener("abort",o)}return s}async function A4(t){let{result:e,type:n}=t;if(zx(e)){let d;try{let f=e.headers.get("Content-Type");f&&/\bapplication\/json\b/.test(f)?e.body==null?d=null:d=await e.json():d=await e.text()}catch(f){return{type:Qe.error,error:f}}return n===Qe.error?{type:Qe.error,error:new bd(e.status,e.statusText,d),statusCode:e.status,headers:e.headers}:{type:Qe.data,data:d,statusCode:e.status,headers:e.headers}}if(n===Qe.error){if(wb(e)){var r,i;if(e.data instanceof Error){var a,s;return{type:Qe.error,error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:Qe.error,error:new bd(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:il(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:Qe.error,error:e,statusCode:il(e)?e.status:void 0}}if(I4(e)){var o,l;return{type:Qe.deferred,deferredData:e,statusCode:(o=e.init)==null?void 0:o.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(wb(e)){var h,u;return{type:Qe.data,data:e.data,statusCode:(h=e.init)==null?void 0:h.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}}return{type:Qe.data,data:e}}function S4(t,e,n,r,i,a){let s=t.headers.get("Location");if(Pe(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!qv.test(s)){let o=r.slice(0,r.findIndex(l=>l.route.id===n)+1);s=Wp(new URL(e.url),o,i,!0,s,a),t.headers.set("Location",s)}return t}function gb(t,e,n){if(qv.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),a=pu(i.pathname,n)!=null;if(i.origin===e.origin&&a)return i.pathname+i.search+i.hash}return t}function no(t,e,n,r){let i=t.createURL(Vx(e)).toString(),a={signal:n};if(r&&Ur(r.formMethod)){let{formMethod:s,formEncType:o}=r;a.method=s.toUpperCase(),o==="application/json"?(a.headers=new Headers({"Content-Type":o}),a.body=JSON.stringify(r.json)):o==="text/plain"?a.body=r.text:o==="application/x-www-form-urlencoded"&&r.formData?a.body=Jp(r.formData):a.body=r.formData}return new Request(i,a)}function Jp(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function vb(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function R4(t,e,n,r,i){let a={},s=null,o,l=!1,h={},u=n&&ir(n[1])?n[1].error:void 0;return t.forEach(d=>{if(!(d.route.id in e))return;let f=d.route.id,m=e[f];if(Pe(!fs(m),"Cannot handle redirect results in processLoaderData"),ir(m)){let b=m.error;u!==void 0&&(b=u,u=void 0),s=s||{};{let A=hs(t,f);s[A.route.id]==null&&(s[A.route.id]=b)}a[f]=void 0,l||(l=!0,o=il(m.error)?m.error.status:500),m.headers&&(h[f]=m.headers)}else ba(m)?(r.set(f,m.deferredData),a[f]=m.deferredData.data,m.statusCode!=null&&m.statusCode!==200&&!l&&(o=m.statusCode),m.headers&&(h[f]=m.headers)):(a[f]=m.data,m.statusCode&&m.statusCode!==200&&!l&&(o=m.statusCode),m.headers&&(h[f]=m.headers))}),u!==void 0&&n&&(s={[n[0]]:u},a[n[0]]=void 0),{loaderData:a,errors:s,statusCode:o||200,loaderHeaders:h}}function yb(t,e,n,r,i,a,s){let{loaderData:o,errors:l}=R4(e,n,r,s);return i.forEach(h=>{let{key:u,match:d,controller:f}=h,m=a[u];if(Pe(m,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if(ir(m)){let b=hs(t.matches,d==null?void 0:d.route.id);l&&l[b.route.id]||(l=bt({},l,{[b.route.id]:m.error})),t.fetchers.delete(u)}else if(fs(m))Pe(!1,"Unhandled fetcher revalidation redirect");else if(ba(m))Pe(!1,"Unhandled fetcher deferred data");else{let b=aa(m.data);t.fetchers.set(u,b)}}),{loaderData:o,errors:l}}function _b(t,e,n,r){let i=bt({},e);for(let a of n){let s=a.route.id;if(e.hasOwnProperty(s)?e[s]!==void 0&&(i[s]=e[s]):t[s]!==void 0&&a.route.loader&&(i[s]=t[s]),r&&r.hasOwnProperty(s))break}return i}function bb(t){return t?ir(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function hs(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Eb(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Hn(t,e){let{pathname:n,routeId:r,method:i,type:a,message:s}=e===void 0?{}:e,o="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":a==="defer-action"?l="defer() is not supported in actions":a==="invalid-body"&&(l="Unable to encode submission body")):t===403?(o="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",l='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new bd(t||500,o,new Error(l),!0)}function oh(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(fs(i))return{key:r,result:i}}}function Vx(t){let e=typeof t=="string"?Wa(t):t;return mu(bt({},e,{hash:""}))}function C4(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function N4(t){return zx(t.result)&&m4.has(t.result.status)}function ba(t){return t.type===Qe.deferred}function ir(t){return t.type===Qe.error}function fs(t){return(t&&t.type)===Qe.redirect}function wb(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function I4(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function zx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function D4(t){return f4.has(t.toLowerCase())}function Ur(t){return h4.has(t.toLowerCase())}async function O4(t,e,n,r,i){let a=Object.entries(e);for(let s=0;s<a.length;s++){let[o,l]=a[s],h=t.find(f=>(f==null?void 0:f.route.id)===o);if(!h)continue;let u=r.find(f=>f.route.id===h.route.id),d=u!=null&&!Ux(u,h)&&(i&&i[h.route.id])!==void 0;ba(l)&&d&&await Gv(l,n,!1).then(f=>{f&&(e[o]=f)})}}async function M4(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:a,controller:s}=n[r],o=e[i];t.find(h=>(h==null?void 0:h.route.id)===a)&&ba(o)&&(Pe(s,"Expected an AbortController for revalidating fetcher deferred result"),await Gv(o,s.signal,!0).then(h=>{h&&(e[i]=h)}))}}async function Gv(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Qe.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Qe.error,error:i}}return{type:Qe.data,data:t.deferredData.data}}}function $v(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Jl(t,e){let n=typeof e=="string"?Wa(e).search:e.search;if(t[t.length-1].route.index&&$v(n||""))return t[t.length-1];let r=Ox(t);return r[r.length-1]}function Tb(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:a,json:s}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(a!=null)return{formMethod:e,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function km(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function k4(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Fl(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function j4(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function aa(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function P4(t,e){try{let n=t.sessionStorage.getItem(Px);if(n){let r=JSON.parse(n);for(let[i,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(i,new Set(a||[]))}}catch{}}function U4(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Px,JSON.stringify(n))}catch(r){rl(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ed(){return Ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ed.apply(this,arguments)}const gf=q.createContext(null),Bx=q.createContext(null),vf=q.createContext(null),Yv=q.createContext(null),Za=q.createContext({outlet:null,matches:[],isDataRoute:!1}),Fx=q.createContext(null);function yf(){return q.useContext(Yv)!=null}function Hx(){return yf()||Pe(!1),q.useContext(Yv).location}function qx(t){q.useContext(vf).static||q.useLayoutEffect(t)}function gu(){let{isDataRoute:t}=q.useContext(Za);return t?K4():L4()}function L4(){yf()||Pe(!1);let t=q.useContext(gf),{basename:e,future:n,navigator:r}=q.useContext(vf),{matches:i}=q.useContext(Za),{pathname:a}=Hx(),s=JSON.stringify(Mx(i,n.v7_relativeSplatPath)),o=q.useRef(!1);return qx(()=>{o.current=!0}),q.useCallback(function(h,u){if(u===void 0&&(u={}),!o.current)return;if(typeof h=="number"){r.go(h);return}let d=kx(h,JSON.parse(s),a,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Oa([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,s,a,t])}const V4=q.createContext(null);function z4(t){let e=q.useContext(Za).outlet;return e&&q.createElement(V4.Provider,{value:t},e)}function Gx(){let{matches:t}=q.useContext(Za),e=t[t.length-1];return e?e.params:{}}function B4(t,e,n,r){yf()||Pe(!1);let{navigator:i}=q.useContext(vf),{matches:a}=q.useContext(Za),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let h=Hx(),u;u=h;let d=u.pathname||"/",f=d;if(l!=="/"){let A=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(A.length).join("/")}let m=us(t,{pathname:f});return $4(m&&m.map(A=>Object.assign({},A,{params:Object.assign({},o,A.params),pathname:Oa([l,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?l:Oa([l,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),a,n,r)}function F4(){let t=Qx(),e=il(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:i},n):null,null)}const H4=q.createElement(F4,null);class q4 extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?q.createElement(Za.Provider,{value:this.props.routeContext},q.createElement(Fx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function G4(t){let{routeContext:e,match:n,children:r}=t,i=q.useContext(gf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),q.createElement(Za.Provider,{value:e},r)}function $4(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let u=s.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);u>=0||Pe(!1),s=s.slice(0,Math.min(s.length,u+1))}let l=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(h=u),d.route.id){let{loaderData:f,errors:m}=n,b=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||b){l=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((u,d,f)=>{let m,b=!1,A=null,D=null;n&&(m=o&&d.route.id?o[d.route.id]:void 0,A=d.route.errorElement||H4,l&&(h<0&&f===0?(W4("route-fallback"),b=!0,D=null):h===f&&(b=!0,D=d.route.hydrateFallbackElement||null)));let E=e.concat(s.slice(0,f+1)),x=()=>{let N;return m?N=A:b?N=D:d.route.Component?N=q.createElement(d.route.Component,null):d.route.element?N=d.route.element:N=u,q.createElement(G4,{match:d,routeContext:{outlet:u,matches:E,isDataRoute:n!=null},children:N})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?q.createElement(q4,{location:n.location,revalidation:n.revalidation,component:A,error:m,children:x(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):x()},null)}var $x=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}($x||{}),Yx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Yx||{});function Y4(t){let e=q.useContext(gf);return e||Pe(!1),e}function X4(t){let e=q.useContext(Bx);return e||Pe(!1),e}function Q4(t){let e=q.useContext(Za);return e||Pe(!1),e}function Xx(t){let e=Q4(),n=e.matches[e.matches.length-1];return n.route.id||Pe(!1),n.route.id}function Qx(){var t;let e=q.useContext(Fx),n=X4(Yx.UseRouteError),r=Xx();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function K4(){let{router:t}=Y4($x.UseNavigateStable),e=Xx(),n=q.useRef(!1);return qx(()=>{n.current=!0}),q.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ed({fromRouteId:e},a)))},[t,e])}const xb={};function W4(t,e,n){xb[t]||(xb[t]=!0)}function Z4(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Kx(t){return z4(t.context)}function J4(t){let{basename:e="/",children:n=null,location:r,navigationType:i=qt.Pop,navigator:a,static:s=!1,future:o}=t;yf()&&Pe(!1);let l=e.replace(/^\/*/,"/"),h=q.useMemo(()=>({basename:l,navigator:a,static:s,future:Ed({v7_relativeSplatPath:!1},o)}),[l,o,a,s]);typeof r=="string"&&(r=Wa(r));let{pathname:u="/",search:d="",hash:f="",state:m=null,key:b="default"}=r,A=q.useMemo(()=>{let D=pu(u,l);return D==null?null:{location:{pathname:D,search:d,hash:f,state:m,key:b},navigationType:i}},[l,u,d,f,m,b,i]);return A==null?null:q.createElement(vf.Provider,{value:h},q.createElement(Yv.Provider,{children:n,value:A}))}new Promise(()=>{});function eD(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:q.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:q.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:q.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wd(){return wd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wd.apply(this,arguments)}const tD="6";try{window.__reactRouterVersion=tD}catch{}function nD(t,e){return y4({basename:void 0,future:wd({},void 0,{v7_prependBasename:!0}),history:FI({window:void 0}),hydrationData:rD(),routes:t,mapRouteProperties:eD,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function rD(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=wd({},e,{errors:iD(e.errors)})),e}function iD(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new bd(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let s=new a(i.message);s.stack="",n[r]=s}catch{}}if(n[r]==null){let a=new Error(i.message);a.stack="",n[r]=a}}else n[r]=i;return n}const aD=q.createContext({isTransitioning:!1}),sD=q.createContext(new Map),oD="startTransition",Ab=sC[oD],lD="flushSync",Sb=dC[lD];function cD(t){Ab?Ab(t):t()}function Hl(t){Sb?Sb(t):t()}let uD=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function hD(t){let{fallbackElement:e,router:n,future:r}=t,[i,a]=q.useState(n.state),[s,o]=q.useState(),[l,h]=q.useState({isTransitioning:!1}),[u,d]=q.useState(),[f,m]=q.useState(),[b,A]=q.useState(),D=q.useRef(new Map),{v7_startTransition:E}=r||{},x=q.useCallback(g=>{E?cD(g):g()},[E]),N=q.useCallback((g,y)=>{let{deletedFetchers:T,flushSync:C,viewTransitionOpts:I}=y;g.fetchers.forEach((U,z)=>{U.data!==void 0&&D.current.set(z,U.data)}),T.forEach(U=>D.current.delete(U));let S=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!I||S){C?Hl(()=>a(g)):x(()=>a(g));return}if(C){Hl(()=>{f&&(u&&u.resolve(),f.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:I.currentLocation,nextLocation:I.nextLocation})});let U=n.window.document.startViewTransition(()=>{Hl(()=>a(g))});U.finished.finally(()=>{Hl(()=>{d(void 0),m(void 0),o(void 0),h({isTransitioning:!1})})}),Hl(()=>m(U));return}f?(u&&u.resolve(),f.skipTransition(),A({state:g,currentLocation:I.currentLocation,nextLocation:I.nextLocation})):(o(g),h({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}))},[n.window,f,u,D,x]);q.useLayoutEffect(()=>n.subscribe(N),[n,N]),q.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new uD)},[l]),q.useEffect(()=>{if(u&&s&&n.window){let g=s,y=u.promise,T=n.window.document.startViewTransition(async()=>{x(()=>a(g)),await y});T.finished.finally(()=>{d(void 0),m(void 0),o(void 0),h({isTransitioning:!1})}),m(T)}},[x,s,u,n.window]),q.useEffect(()=>{u&&s&&i.location.key===s.location.key&&u.resolve()},[u,f,i.location,s]),q.useEffect(()=>{!l.isTransitioning&&b&&(o(b.state),h({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}),A(void 0))},[l.isTransitioning,b]),q.useEffect(()=>{},[]);let O=q.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:g=>n.navigate(g),push:(g,y,T)=>n.navigate(g,{state:y,preventScrollReset:T==null?void 0:T.preventScrollReset}),replace:(g,y,T)=>n.navigate(g,{replace:!0,state:y,preventScrollReset:T==null?void 0:T.preventScrollReset})}),[n]),P=n.basename||"/",R=q.useMemo(()=>({router:n,navigator:O,static:!1,basename:P}),[n,O,P]),_=q.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return q.useEffect(()=>Z4(r,n.future),[r,n.future]),q.createElement(q.Fragment,null,q.createElement(gf.Provider,{value:R},q.createElement(Bx.Provider,{value:i},q.createElement(sD.Provider,{value:D.current},q.createElement(aD.Provider,{value:l},q.createElement(J4,{basename:P,location:i.location,navigationType:i.historyAction,navigator:O,future:_},i.initialized||n.future.v7_partialHydration?q.createElement(dD,{routes:n.routes,future:n.future,state:i}):e))))),null)}const dD=q.memo(fD);function fD(t){let{routes:e,future:n,state:r}=t;return B4(e,void 0,r,n)}var Rb;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Rb||(Rb={}));var Cb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Cb||(Cb={}));const mD=()=>{};var Nb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},pD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],l=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},Zx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,l=i+2<t.length,h=l?t[i+2]:0,u=a>>2,d=(a&3)<<4|o>>4;let f=(o&15)<<2|h>>6,m=h&63;l||(m=64,s||(f=64)),r.push(n[u],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Wx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||h==null||d==null)throw new gD;const f=a<<2|o>>4;if(r.push(f),h!==64){const m=o<<4&240|h>>2;if(r.push(m),d!==64){const b=h<<6&192|d;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vD=function(t){const e=Wx(t);return Zx.encodeByteArray(e,!0)},Td=function(t){return vD(t).replace(/\./g,"")},Jx=function(t){try{return Zx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=()=>yD().__FIREBASE_DEFAULTS__,bD=()=>{if(typeof process>"u"||typeof Nb>"u")return;const t=Nb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ED=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Jx(t[1]);return e&&JSON.parse(e)},_f=()=>{try{return mD()||_D()||bD()||ED()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},e2=t=>{var e,n;return(n=(e=_f())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Xv=t=>{const e=e2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},t2=()=>{var t;return(t=_f())===null||t===void 0?void 0:t.config},n2=t=>{var e;return(e=_f())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bf(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Td(JSON.stringify(n)),Td(JSON.stringify(s)),""].join(".")}const _c={};function TD(){const t={prod:[],emulator:[]};for(const e of Object.keys(_c))_c[e]?t.emulator.push(e):t.prod.push(e);return t}function xD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ib=!1;function Ef(t,e){if(typeof window>"u"||typeof document>"u"||!Yi(window.location.host)||_c[t]===e||_c[t]||Ib)return;_c[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",a=TD().prod.length>0;function s(){const f=document.getElementById(r);f&&f.remove()}function o(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function h(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Ib=!0,s()},f}function u(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=xD(r),m=n("text"),b=document.getElementById(m)||document.createElement("span"),A=n("learnmore"),D=document.getElementById(A)||document.createElement("a"),E=n("preprendIcon"),x=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const N=f.element;o(N),u(D,A);const O=h();l(x,E),N.append(x,b,D,O),document.body.appendChild(N)}a?(b.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dn())}function SD(){var t;const e=(t=_f())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ND(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ID(){const t=Dn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DD(){return!SD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OD(){try{return typeof indexedDB=="object"}catch{return!1}}function MD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD="FirebaseError";class qr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kD,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vu.prototype.create)}}class vu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?jD(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new qr(i,o,r)}}function jD(t,e){return t.replace(PD,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const PD=/\{\$([^}]+)}/g;function UD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Os(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(Db(a)&&Db(s)){if(!Os(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Db(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function LD(t,e){const n=new VD(t,e);return n.subscribe.bind(n)}class VD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zD(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=jm),i.error===void 0&&(i.error=jm),i.complete===void 0&&(i.complete=jm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t){return t&&t._delegate?t._delegate:t}class Bi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HD(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FD(t){return t===cs?void 0:t}function HD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new BD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Me||(Me={}));const GD={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},$D=Me.INFO,YD={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},XD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=YD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qv{constructor(e){this.name=e,this._logLevel=$D,this._logHandler=XD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const QD=(t,e)=>e.some(n=>t instanceof n);let Ob,Mb;function KD(){return Ob||(Ob=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WD(){return Mb||(Mb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const i2=new WeakMap,eg=new WeakMap,a2=new WeakMap,Pm=new WeakMap,Kv=new WeakMap;function ZD(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(Ma(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&i2.set(n,t)}).catch(()=>{}),Kv.set(e,t),e}function JD(t){if(eg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});eg.set(t,e)}let tg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return eg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||a2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ma(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function e3(t){tg=t(tg)}function t3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Um(this),e,...n);return a2.set(r,e.sort?e.sort():[e]),Ma(r)}:WD().includes(t)?function(...e){return t.apply(Um(this),e),Ma(i2.get(this))}:function(...e){return Ma(t.apply(Um(this),e))}}function n3(t){return typeof t=="function"?t3(t):(t instanceof IDBTransaction&&JD(t),QD(t,KD())?new Proxy(t,tg):t)}function Ma(t){if(t instanceof IDBRequest)return ZD(t);if(Pm.has(t))return Pm.get(t);const e=n3(t);return e!==t&&(Pm.set(t,e),Kv.set(e,t)),e}const Um=t=>Kv.get(t);function r3(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=Ma(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Ma(s.result),l.oldVersion,l.newVersion,Ma(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),o}const i3=["get","getKey","getAll","getAllKeys","count"],a3=["put","add","delete","clear"],Lm=new Map;function kb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lm.get(e))return Lm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=a3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||i3.includes(n)))return;const a=async function(s,...o){const l=this.transaction(s,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(o.shift())),(await Promise.all([h[n](...o),i&&l.done]))[0]};return Lm.set(e,a),a}e3(t=>({...t,get:(e,n,r)=>kb(e,n)||t.get(e,n,r),has:(e,n)=>!!kb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(o3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function o3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ng="@firebase/app",jb="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new Qv("@firebase/app"),l3="@firebase/app-compat",c3="@firebase/analytics-compat",u3="@firebase/analytics",h3="@firebase/app-check-compat",d3="@firebase/app-check",f3="@firebase/auth",m3="@firebase/auth-compat",p3="@firebase/database",g3="@firebase/data-connect",v3="@firebase/database-compat",y3="@firebase/functions",_3="@firebase/functions-compat",b3="@firebase/installations",E3="@firebase/installations-compat",w3="@firebase/messaging",T3="@firebase/messaging-compat",x3="@firebase/performance",A3="@firebase/performance-compat",S3="@firebase/remote-config",R3="@firebase/remote-config-compat",C3="@firebase/storage",N3="@firebase/storage-compat",I3="@firebase/firestore",D3="@firebase/ai",O3="@firebase/firestore-compat",M3="firebase",k3="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="[DEFAULT]",j3={[ng]:"fire-core",[l3]:"fire-core-compat",[u3]:"fire-analytics",[c3]:"fire-analytics-compat",[d3]:"fire-app-check",[h3]:"fire-app-check-compat",[f3]:"fire-auth",[m3]:"fire-auth-compat",[p3]:"fire-rtdb",[g3]:"fire-data-connect",[v3]:"fire-rtdb-compat",[y3]:"fire-fn",[_3]:"fire-fn-compat",[b3]:"fire-iid",[E3]:"fire-iid-compat",[w3]:"fire-fcm",[T3]:"fire-fcm-compat",[x3]:"fire-perf",[A3]:"fire-perf-compat",[S3]:"fire-rc",[R3]:"fire-rc-compat",[C3]:"fire-gcs",[N3]:"fire-gcs-compat",[I3]:"fire-fst",[O3]:"fire-fst-compat",[D3]:"fire-vertex","fire-js":"fire-js",[M3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new Map,P3=new Map,ig=new Map;function Pb(t,e){try{t.container.addComponent(e)}catch(n){Fi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function za(t){const e=t.name;if(ig.has(e))return Fi.debug(`There were multiple attempts to register component ${e}.`),!1;ig.set(e,t);for(const n of xd.values())Pb(n,t);for(const n of P3.values())Pb(n,t);return!0}function _u(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ka=new vu("app","Firebase",U3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ka.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=k3;function s2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:rg,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ka.create("bad-app-name",{appName:String(i)});if(n||(n=t2()),!n)throw ka.create("no-options");const a=xd.get(i);if(a){if(Os(n,a.options)&&Os(r,a.config))return a;throw ka.create("duplicate-app",{appName:i})}const s=new qD(i);for(const l of ig.values())s.addComponent(l);const o=new L3(n,r,s);return xd.set(i,o),o}function wf(t=rg){const e=xd.get(t);if(!e&&t===rg&&t2())return s2();if(!e)throw ka.create("no-app",{appName:t});return e}function Sr(t,e,n){var r;let i=(r=j3[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${i}" with version "${e}":`];a&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fi.warn(o.join(" "));return}za(new Bi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3="firebase-heartbeat-database",z3=1,Fc="firebase-heartbeat-store";let Vm=null;function o2(){return Vm||(Vm=r3(V3,z3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ka.create("idb-open",{originalErrorMessage:t.message})})),Vm}async function B3(t){try{const n=(await o2()).transaction(Fc),r=await n.objectStore(Fc).get(l2(t));return await n.done,r}catch(e){if(e instanceof qr)Fi.warn(e.message);else{const n=ka.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fi.warn(n.message)}}}async function Ub(t,e){try{const r=(await o2()).transaction(Fc,"readwrite");await r.objectStore(Fc).put(e,l2(t)),await r.done}catch(n){if(n instanceof qr)Fi.warn(n.message);else{const r=ka.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fi.warn(r.message)}}}function l2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3=1024,H3=30;class q3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Lb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>H3){const s=Y3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Fi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Lb(),{heartbeatsToSend:r,unsentEntries:i}=G3(this._heartbeatsCache.heartbeats),a=Td(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Fi.warn(n),""}}}function Lb(){return new Date().toISOString().substring(0,10)}function G3(t,e=F3){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),Vb(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Vb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OD()?MD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await B3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ub(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ub(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Vb(t){return Td(JSON.stringify({version:2,heartbeats:t})).length}function Y3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(t){za(new Bi("platform-logger",e=>new s3(e),"PRIVATE")),za(new Bi("heartbeat",e=>new q3(e),"PRIVATE")),Sr(ng,jb,t),Sr(ng,jb,"esm2017"),Sr("fire-js","")}X3("");function Wv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function c2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q3=c2,u2=new vu("auth","Firebase",c2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=new Qv("@firebase/auth");function K3(t,...e){Ad.logLevel<=Me.WARN&&Ad.warn(`Auth (${Fs}): ${t}`,...e)}function Oh(t,...e){Ad.logLevel<=Me.ERROR&&Ad.error(`Auth (${Fs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(t,...e){throw Jv(t,...e)}function Br(t,...e){return Jv(t,...e)}function Zv(t,e,n){const r=Object.assign(Object.assign({},Q3()),{[e]:n});return new vu("auth","Firebase",r).create(e,{appName:t.name})}function xs(t){return Zv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function W3(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&hi(t,"argument-error"),Zv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return u2.create(t,...e)}function ye(t,e,...n){if(!t)throw Jv(e,...n)}function Oi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Oh(e),new Error(e)}function Hi(t,e){t||Oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Z3(){return zb()==="http:"||zb()==="https:"}function zb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Z3()||CD()||"connection"in navigator)?navigator.onLine:!0}function eO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hi(n>e,"Short delay should be less than long delay!"),this.isMobile=AD()||ND()}get(){return J3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t,e){Hi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rO=new bu(3e4,6e4);function ty(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Hs(t,e,n,r,i={}){return d2(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=yu(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:l},a);return RD()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Yi(t.emulatorConfig.host)&&(h.credentials="include"),h2.fetch()(await f2(t,t.config.apiHost,n,o),h)})}async function d2(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},tO),e);try{const i=new aO(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw lh(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[l,h]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw lh(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw lh(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw lh(t,"user-disabled",s);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Zv(t,u,h);hi(t,u)}}catch(i){if(i instanceof qr)throw i;hi(t,"network-request-failed",{message:String(i)})}}async function iO(t,e,n,r,i={}){const a=await Hs(t,e,n,r,i);return"mfaPendingCredential"in a&&hi(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function f2(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?ey(t.config,i):`${t.config.apiScheme}://${i}`;return nO.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}class aO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Br(this.auth,"network-request-failed")),rO.get())})}}function lh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Br(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(t,e){return Hs(t,"POST","/v1/accounts:delete",e)}async function Sd(t,e){return Hs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oO(t,e=!1){const n=rt(t),r=await n.getIdToken(e),i=ny(r);ye(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:bc(zm(i.auth_time)),issuedAtTime:bc(zm(i.iat)),expirationTime:bc(zm(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function zm(t){return Number(t)*1e3}function ny(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Oh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Jx(n);return i?JSON.parse(i):(Oh("Failed to decode base64 JWT payload"),null)}catch(i){return Oh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Bb(t){const e=ny(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function al(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qr&&lO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function lO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bc(this.lastLoginAt),this.creationTime=bc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await al(t,Sd(n,{idToken:r}));ye(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?m2(a.providerUserInfo):[],o=hO(t.providerData,s),l=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(o!=null&&o.length),u=l?h:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new sg(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function uO(t){const e=rt(t);await Rd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function m2(t){return t.map(e=>{var{providerId:n}=e,r=Wv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(t,e){const n=await d2(t,{},async()=>{const r=yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await f2(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return t.emulatorConfig&&Yi(t.emulatorConfig.host)&&(l.credentials="include"),h2.fetch()(s,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fO(t,e){return Hs(t,"POST","/v2/accounts:revokeToken",ty(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=Bb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await dO(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new Vo;return r&&(ye(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ye(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(ye(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vo,this.toJSON())}_performRefresh(){return Oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=Wv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new sg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await al(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oO(this,e)}reload(){return uO(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sr(this.auth.app))return Promise.reject(xs(this.auth));const e=await this.getIdToken();return await al(this,sO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,s,o,l,h,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,m=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,b=(s=n.photoURL)!==null&&s!==void 0?s:void 0,A=(o=n.tenantId)!==null&&o!==void 0?o:void 0,D=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(h=n.createdAt)!==null&&h!==void 0?h:void 0,x=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:N,emailVerified:O,isAnonymous:P,providerData:R,stsTokenManager:_}=n;ye(N&&_,e,"internal-error");const g=Vo.fromJSON(this.name,_);ye(typeof N=="string",e,"internal-error"),na(d,e.name),na(f,e.name),ye(typeof O=="boolean",e,"internal-error"),ye(typeof P=="boolean",e,"internal-error"),na(m,e.name),na(b,e.name),na(A,e.name),na(D,e.name),na(E,e.name),na(x,e.name);const y=new Vr({uid:N,auth:e,email:f,emailVerified:O,displayName:d,isAnonymous:P,photoURL:b,phoneNumber:m,tenantId:A,stsTokenManager:g,createdAt:E,lastLoginAt:x});return R&&Array.isArray(R)&&(y.providerData=R.map(T=>Object.assign({},T))),D&&(y._redirectEventId=D),y}static async _fromIdTokenResponse(e,n,r=!1){const i=new Vo;i.updateFromServerResponse(n);const a=new Vr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Rd(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ye(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?m2(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new Vo;o.updateFromIdToken(r);const l=new Vr({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new sg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,h),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=new Map;function Mi(t){Hi(t instanceof Function,"Expected a class definition");let e=Fb.get(t);return e?(Hi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Fb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}p2.type="NONE";const Hb=p2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(t,e,n){return`firebase:${t}:${e}:${n}`}class zo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Mh(this.userKey,i.apiKey,a),this.fullPersistenceKey=Mh("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Sd(this.auth,{idToken:e}).catch(()=>{});return n?Vr._fromGetAccountInfoResponse(this.auth,n,e):null}return Vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new zo(Mi(Hb),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||Mi(Hb);const s=Mh(r,e.config.apiKey,e.name);let o=null;for(const h of n)try{const u=await h._get(s);if(u){let d;if(typeof u=="string"){const f=await Sd(e,{idToken:u}).catch(()=>{});if(!f)break;d=await Vr._fromGetAccountInfoResponse(e,f,u)}else d=Vr._fromJSON(e,u);h!==a&&(o=d),a=h;break}}catch{}const l=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new zo(a,e,r):(a=l[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(s)}catch{}})),new zo(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(g2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(E2(e))return"Blackberry";if(w2(e))return"Webos";if(v2(e))return"Safari";if((e.includes("chrome/")||y2(e))&&!e.includes("edge/"))return"Chrome";if(b2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function g2(t=Dn()){return/firefox\//i.test(t)}function v2(t=Dn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function y2(t=Dn()){return/crios\//i.test(t)}function _2(t=Dn()){return/iemobile/i.test(t)}function b2(t=Dn()){return/android/i.test(t)}function E2(t=Dn()){return/blackberry/i.test(t)}function w2(t=Dn()){return/webos/i.test(t)}function ry(t=Dn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mO(t=Dn()){var e;return ry(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pO(){return ID()&&document.documentMode===10}function T2(t=Dn()){return ry(t)||b2(t)||w2(t)||E2(t)||/windows phone/i.test(t)||_2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t,e=[]){let n;switch(t){case"Browser":n=qb(Dn());break;case"Worker":n=`${qb(Dn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const l=e(a);s(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vO(t,e={}){return Hs(t,"GET","/v2/passwordPolicy",ty(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=6;class _O{constructor(e){var n,r,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:yO,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,s,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsUppercaseLetter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gb(this),this.idTokenSubscription=new Gb(this),this.beforeStateQueue=new gO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mi(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await zo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sd(this,{idToken:e}),r=await Vr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(sr(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===o)&&(l!=null&&l.user)&&(i=l.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sr(this.app))return Promise.reject(xs(this));const n=e?rt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sr(this.app)?Promise.reject(xs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sr(this.app)?Promise.reject(xs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vO(this),n=new _O(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await fO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mi(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await zo.create(this,[Mi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=x2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&K3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Tf(t){return rt(t)}class Gb{constructor(e){this.auth=e,this.observer=null,this.addObserver=LD(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EO(t){iy=t}function wO(t){return iy.loadJS(t)}function TO(){return iy.gapiScript}function xO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t,e){const n=_u(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Os(a,e??{}))return i;hi(i,"already-initialized")}return n.initialize({options:e})}function SO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RO(t,e,n){const r=Tf(t);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=A2(e),{host:s,port:o}=CO(e),l=o===null?"":`:${o}`,h={url:`${a}//${s}${l}/`},u=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(Os(h,r.config.emulator)&&Os(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Yi(s)?(bf(`${a}//${s}${l}`),Ef("Auth",!0)):NO()}function A2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CO(t){const e=A2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:$b(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:$b(s)}}}function $b(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function NO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Oi("not implemented")}_getIdTokenResponse(e){return Oi("not implemented")}_linkToIdToken(e,n){return Oi("not implemented")}_getReauthenticationResolver(e){return Oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(t,e){return iO(t,"POST","/v1/accounts:signInWithIdp",ty(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO="http://localhost";class Ms extends S2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=Wv(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Ms(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Bo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Bo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bo(e,n)}buildRequest(){const e={requestUri:IO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends ay{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends Eu{constructor(){super("facebook.com")}static credential(e){return Ms._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return da.credential(e.oauthAccessToken)}catch{return null}}}da.FACEBOOK_SIGN_IN_METHOD="facebook.com";da.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ms._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Si.credential(n,r)}catch{return null}}}Si.GOOGLE_SIGN_IN_METHOD="google.com";Si.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends Eu{constructor(){super("github.com")}static credential(e){return Ms._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fa.credential(e.oauthAccessToken)}catch{return null}}}fa.GITHUB_SIGN_IN_METHOD="github.com";fa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma extends Eu{constructor(){super("twitter.com")}static credential(e,n){return Ms._fromParams({providerId:ma.PROVIDER_ID,signInMethod:ma.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ma.credentialFromTaggedObject(e)}static credentialFromError(e){return ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ma.credential(n,r)}catch{return null}}}ma.TWITTER_SIGN_IN_METHOD="twitter.com";ma.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Vr._fromIdTokenResponse(e,r,i),s=Yb(r);return new sl({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Yb(r);return new sl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Yb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd extends qr{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Cd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Cd(e,n,r,i)}}function R2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Cd._fromErrorAndOperation(t,a,e,r):a})}async function DO(t,e,n=!1){const r=await al(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return sl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OO(t,e,n=!1){const{auth:r}=t;if(sr(r.app))return Promise.reject(xs(r));const i="reauthenticate";try{const a=await al(t,R2(r,i,e,t),n);ye(a.idToken,r,"internal-error");const s=ny(a.idToken);ye(s,r,"internal-error");const{sub:o}=s;return ye(t.uid===o,r,"user-mismatch"),sl._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&hi(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MO(t,e,n=!1){if(sr(t.app))return Promise.reject(xs(t));const r="signIn",i=await R2(t,r,e),a=await sl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kO(t,e){return Hs(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=rt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await al(r,kO(r.auth,a));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find(({providerId:l})=>l==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function PO(t,e,n,r){return rt(t).onIdTokenChanged(e,n,r)}function UO(t,e,n){return rt(t).beforeAuthStateChanged(e,n)}function LO(t,e,n,r){return rt(t).onAuthStateChanged(e,n,r)}function VO(t){return rt(t).signOut()}const Nd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nd,"1"),this.storage.removeItem(Nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=1e3,BO=10;class N2 extends C2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=T2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);pO()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,BO):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},zO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}N2.type="LOCAL";const FO=N2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2 extends C2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}I2.type="SESSION";const D2=I2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new xf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async h=>h(n.origin,a)),l=await HO(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,l)=>{const h=sy("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===h)switch(f.data.status){case"ack":clearTimeout(u),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(f.data.response);break;default:clearTimeout(u),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(){return window}function GO(t){ai().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(){return typeof ai().WorkerGlobalScope<"u"&&typeof ai().importScripts=="function"}async function $O(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function XO(){return O2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="firebaseLocalStorageDb",QO=1,Id="firebaseLocalStorage",k2="fbase_key";class wu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Af(t,e){return t.transaction([Id],e?"readwrite":"readonly").objectStore(Id)}function KO(){const t=indexedDB.deleteDatabase(M2);return new wu(t).toPromise()}function og(){const t=indexedDB.open(M2,QO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Id,{keyPath:k2})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Id)?e(r):(r.close(),await KO(),e(await og()))})})}async function Xb(t,e,n){const r=Af(t,!0).put({[k2]:e,value:n});return new wu(r).toPromise()}async function WO(t,e){const n=Af(t,!1).get(e),r=await new wu(n).toPromise();return r===void 0?null:r.value}function Qb(t,e){const n=Af(t,!0).delete(e);return new wu(n).toPromise()}const ZO=800,JO=3;class j2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await og(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>JO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return O2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xf._getInstance(XO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await $O(),!this.activeServiceWorker)return;this.sender=new qO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await og();return await Xb(e,Nd,"1"),await Qb(e,Nd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Xb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>WO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Qb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Af(i,!1).getAll();return new wu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}j2.type="LOCAL";const e5=j2;new bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t,e){return e?Mi(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy extends S2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function t5(t){return MO(t.auth,new oy(t),t.bypassAuthState)}function n5(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),OO(n,new oy(t),t.bypassAuthState)}async function r5(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),DO(n,new oy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return t5;case"linkViaPopup":case"linkViaRedirect":return r5;case"reauthViaPopup":case"reauthViaRedirect":return n5;default:hi(this.auth,"internal-error")}}resolve(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5=new bu(2e3,1e4);async function a5(t,e,n){if(sr(t.app))return Promise.reject(Br(t,"operation-not-supported-in-this-environment"));const r=Tf(t);W3(t,e,ay);const i=P2(r,n);return new ms(r,"signInViaPopup",e,i).executeNotNull()}class ms extends U2{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,ms.currentPopupAction&&ms.currentPopupAction.cancel(),ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Hi(this.filter.length===1,"Popup operations only handle one event");const e=sy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,i5.get())};e()}}ms.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5="pendingRedirect",kh=new Map;class o5 extends U2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=kh.get(this.auth._key());if(!e){try{const r=await l5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}kh.set(this.auth._key(),e)}return this.bypassAuthState||kh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function l5(t,e){const n=h5(e),r=u5(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function c5(t,e){kh.set(t._key(),e)}function u5(t){return Mi(t._redirectPersistence)}function h5(t){return Mh(s5,t.config.apiKey,t.name)}async function d5(t,e,n=!1){if(sr(t.app))return Promise.reject(xs(t));const r=Tf(t),i=P2(r,e),s=await new o5(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5=10*60*1e3;class m5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!p5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!L2(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Br(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=f5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kb(e))}saveEventToCache(e){this.cachedEventUids.add(Kb(e)),this.lastProcessedEventTime=Date.now()}}function Kb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function L2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function p5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return L2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g5(t,e={}){return Hs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,y5=/^https?/;async function _5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await g5(t);for(const n of e)try{if(b5(n))return}catch{}hi(t,"unauthorized-domain")}function b5(t){const e=ag(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!y5.test(n))return!1;if(v5.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5=new bu(3e4,6e4);function Wb(){const t=ai().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function w5(t){return new Promise((e,n)=>{var r,i,a;function s(){Wb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wb(),n(Br(t,"network-request-failed"))},timeout:E5.get()})}if(!((i=(r=ai().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=ai().gapi)===null||a===void 0)&&a.load)s();else{const o=xO("iframefcb");return ai()[o]=()=>{gapi.load?s():n(Br(t,"network-request-failed"))},wO(`${TO()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw jh=null,e})}let jh=null;function T5(t){return jh=jh||w5(t),jh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=new bu(5e3,15e3),A5="__/auth/iframe",S5="emulator/auth/iframe",R5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function N5(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ey(e,S5):`https://${t.config.authDomain}/${A5}`,r={apiKey:e.apiKey,appName:t.name,v:Fs},i=C5.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${yu(r).slice(1)}`}async function I5(t){const e=await T5(t),n=ai().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:N5(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:R5,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=Br(t,"network-request-failed"),o=ai().setTimeout(()=>{a(s)},x5.get());function l(){ai().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},O5=500,M5=600,k5="_blank",j5="http://localhost";class Zb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function P5(t,e,n,r=O5,i=M5){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},D5),{width:r.toString(),height:i.toString(),top:a,left:s}),h=Dn().toLowerCase();n&&(o=y2(h)?k5:n),g2(h)&&(e=e||j5,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[m,b])=>`${f}${m}=${b},`,"");if(mO(h)&&o!=="_self")return U5(e||"",o),new Zb(null);const d=window.open(e||"",o,u);ye(d,t,"popup-blocked");try{d.focus()}catch{}return new Zb(d)}function U5(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5="__/auth/handler",V5="emulator/auth/handler",z5=encodeURIComponent("fac");async function Jb(t,e,n,r,i,a){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Fs,eventId:i};if(e instanceof ay){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",UD(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))s[u]=d}if(e instanceof Eu){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await t._getAppCheckToken(),h=l?`#${z5}=${encodeURIComponent(l)}`:"";return`${B5(t)}?${yu(o).slice(1)}${h}`}function B5({config:t}){return t.emulator?ey(t,V5):`https://${t.authDomain}/${L5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="webStorageSupport";class F5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=D2,this._completeRedirectFn=d5,this._overrideRedirectResult=c5}async _openPopup(e,n,r,i){var a;Hi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await Jb(e,n,r,ag(),i);return P5(e,s,sy())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await Jb(e,n,r,ag(),i);return GO(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Hi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await I5(e),r=new m5(e);return n.register("authEvent",i=>(ye(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bm,{type:Bm},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Bm];s!==void 0&&n(!!s),hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return T2()||v2()||ry()}}const H5=F5;var e1="@firebase/auth",t1="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $5(t){za(new Bi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;ye(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:x2(t)},h=new bO(r,i,a,l);return SO(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),za(new Bi("auth-internal",e=>{const n=Tf(e.getProvider("auth").getImmediate());return(r=>new q5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sr(e1,t1,G5(t)),Sr(e1,t1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5=5*60,X5=n2("authIdTokenMaxAge")||Y5;let n1=null;const Q5=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>X5)return;const i=n==null?void 0:n.token;n1!==i&&(n1=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function K5(t=wf()){const e=_u(t,"auth");if(e.isInitialized())return e.getImmediate();const n=AO(t,{popupRedirectResolver:H5,persistence:[e5,FO,D2]}),r=n2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=Q5(a.toString());UO(n,s,()=>s(n.currentUser)),PO(n,o=>s(o))}}const i=e2("auth");return i&&RO(n,`http://${i}`),n}function W5(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}EO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Br("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",W5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$5("Browser");var Z5="firebase",J5="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sr(Z5,J5,"app");var r1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ja,V2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,g){function y(){}y.prototype=g.prototype,_.D=g.prototype,_.prototype=new y,_.prototype.constructor=_,_.C=function(T,C,I){for(var S=Array(arguments.length-2),U=2;U<arguments.length;U++)S[U-2]=arguments[U];return g.prototype[C].apply(T,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,g,y){y||(y=0);var T=Array(16);if(typeof g=="string")for(var C=0;16>C;++C)T[C]=g.charCodeAt(y++)|g.charCodeAt(y++)<<8|g.charCodeAt(y++)<<16|g.charCodeAt(y++)<<24;else for(C=0;16>C;++C)T[C]=g[y++]|g[y++]<<8|g[y++]<<16|g[y++]<<24;g=_.g[0],y=_.g[1],C=_.g[2];var I=_.g[3],S=g+(I^y&(C^I))+T[0]+3614090360&4294967295;g=y+(S<<7&4294967295|S>>>25),S=I+(C^g&(y^C))+T[1]+3905402710&4294967295,I=g+(S<<12&4294967295|S>>>20),S=C+(y^I&(g^y))+T[2]+606105819&4294967295,C=I+(S<<17&4294967295|S>>>15),S=y+(g^C&(I^g))+T[3]+3250441966&4294967295,y=C+(S<<22&4294967295|S>>>10),S=g+(I^y&(C^I))+T[4]+4118548399&4294967295,g=y+(S<<7&4294967295|S>>>25),S=I+(C^g&(y^C))+T[5]+1200080426&4294967295,I=g+(S<<12&4294967295|S>>>20),S=C+(y^I&(g^y))+T[6]+2821735955&4294967295,C=I+(S<<17&4294967295|S>>>15),S=y+(g^C&(I^g))+T[7]+4249261313&4294967295,y=C+(S<<22&4294967295|S>>>10),S=g+(I^y&(C^I))+T[8]+1770035416&4294967295,g=y+(S<<7&4294967295|S>>>25),S=I+(C^g&(y^C))+T[9]+2336552879&4294967295,I=g+(S<<12&4294967295|S>>>20),S=C+(y^I&(g^y))+T[10]+4294925233&4294967295,C=I+(S<<17&4294967295|S>>>15),S=y+(g^C&(I^g))+T[11]+2304563134&4294967295,y=C+(S<<22&4294967295|S>>>10),S=g+(I^y&(C^I))+T[12]+1804603682&4294967295,g=y+(S<<7&4294967295|S>>>25),S=I+(C^g&(y^C))+T[13]+4254626195&4294967295,I=g+(S<<12&4294967295|S>>>20),S=C+(y^I&(g^y))+T[14]+2792965006&4294967295,C=I+(S<<17&4294967295|S>>>15),S=y+(g^C&(I^g))+T[15]+1236535329&4294967295,y=C+(S<<22&4294967295|S>>>10),S=g+(C^I&(y^C))+T[1]+4129170786&4294967295,g=y+(S<<5&4294967295|S>>>27),S=I+(y^C&(g^y))+T[6]+3225465664&4294967295,I=g+(S<<9&4294967295|S>>>23),S=C+(g^y&(I^g))+T[11]+643717713&4294967295,C=I+(S<<14&4294967295|S>>>18),S=y+(I^g&(C^I))+T[0]+3921069994&4294967295,y=C+(S<<20&4294967295|S>>>12),S=g+(C^I&(y^C))+T[5]+3593408605&4294967295,g=y+(S<<5&4294967295|S>>>27),S=I+(y^C&(g^y))+T[10]+38016083&4294967295,I=g+(S<<9&4294967295|S>>>23),S=C+(g^y&(I^g))+T[15]+3634488961&4294967295,C=I+(S<<14&4294967295|S>>>18),S=y+(I^g&(C^I))+T[4]+3889429448&4294967295,y=C+(S<<20&4294967295|S>>>12),S=g+(C^I&(y^C))+T[9]+568446438&4294967295,g=y+(S<<5&4294967295|S>>>27),S=I+(y^C&(g^y))+T[14]+3275163606&4294967295,I=g+(S<<9&4294967295|S>>>23),S=C+(g^y&(I^g))+T[3]+4107603335&4294967295,C=I+(S<<14&4294967295|S>>>18),S=y+(I^g&(C^I))+T[8]+1163531501&4294967295,y=C+(S<<20&4294967295|S>>>12),S=g+(C^I&(y^C))+T[13]+2850285829&4294967295,g=y+(S<<5&4294967295|S>>>27),S=I+(y^C&(g^y))+T[2]+4243563512&4294967295,I=g+(S<<9&4294967295|S>>>23),S=C+(g^y&(I^g))+T[7]+1735328473&4294967295,C=I+(S<<14&4294967295|S>>>18),S=y+(I^g&(C^I))+T[12]+2368359562&4294967295,y=C+(S<<20&4294967295|S>>>12),S=g+(y^C^I)+T[5]+4294588738&4294967295,g=y+(S<<4&4294967295|S>>>28),S=I+(g^y^C)+T[8]+2272392833&4294967295,I=g+(S<<11&4294967295|S>>>21),S=C+(I^g^y)+T[11]+1839030562&4294967295,C=I+(S<<16&4294967295|S>>>16),S=y+(C^I^g)+T[14]+4259657740&4294967295,y=C+(S<<23&4294967295|S>>>9),S=g+(y^C^I)+T[1]+2763975236&4294967295,g=y+(S<<4&4294967295|S>>>28),S=I+(g^y^C)+T[4]+1272893353&4294967295,I=g+(S<<11&4294967295|S>>>21),S=C+(I^g^y)+T[7]+4139469664&4294967295,C=I+(S<<16&4294967295|S>>>16),S=y+(C^I^g)+T[10]+3200236656&4294967295,y=C+(S<<23&4294967295|S>>>9),S=g+(y^C^I)+T[13]+681279174&4294967295,g=y+(S<<4&4294967295|S>>>28),S=I+(g^y^C)+T[0]+3936430074&4294967295,I=g+(S<<11&4294967295|S>>>21),S=C+(I^g^y)+T[3]+3572445317&4294967295,C=I+(S<<16&4294967295|S>>>16),S=y+(C^I^g)+T[6]+76029189&4294967295,y=C+(S<<23&4294967295|S>>>9),S=g+(y^C^I)+T[9]+3654602809&4294967295,g=y+(S<<4&4294967295|S>>>28),S=I+(g^y^C)+T[12]+3873151461&4294967295,I=g+(S<<11&4294967295|S>>>21),S=C+(I^g^y)+T[15]+530742520&4294967295,C=I+(S<<16&4294967295|S>>>16),S=y+(C^I^g)+T[2]+3299628645&4294967295,y=C+(S<<23&4294967295|S>>>9),S=g+(C^(y|~I))+T[0]+4096336452&4294967295,g=y+(S<<6&4294967295|S>>>26),S=I+(y^(g|~C))+T[7]+1126891415&4294967295,I=g+(S<<10&4294967295|S>>>22),S=C+(g^(I|~y))+T[14]+2878612391&4294967295,C=I+(S<<15&4294967295|S>>>17),S=y+(I^(C|~g))+T[5]+4237533241&4294967295,y=C+(S<<21&4294967295|S>>>11),S=g+(C^(y|~I))+T[12]+1700485571&4294967295,g=y+(S<<6&4294967295|S>>>26),S=I+(y^(g|~C))+T[3]+2399980690&4294967295,I=g+(S<<10&4294967295|S>>>22),S=C+(g^(I|~y))+T[10]+4293915773&4294967295,C=I+(S<<15&4294967295|S>>>17),S=y+(I^(C|~g))+T[1]+2240044497&4294967295,y=C+(S<<21&4294967295|S>>>11),S=g+(C^(y|~I))+T[8]+1873313359&4294967295,g=y+(S<<6&4294967295|S>>>26),S=I+(y^(g|~C))+T[15]+4264355552&4294967295,I=g+(S<<10&4294967295|S>>>22),S=C+(g^(I|~y))+T[6]+2734768916&4294967295,C=I+(S<<15&4294967295|S>>>17),S=y+(I^(C|~g))+T[13]+1309151649&4294967295,y=C+(S<<21&4294967295|S>>>11),S=g+(C^(y|~I))+T[4]+4149444226&4294967295,g=y+(S<<6&4294967295|S>>>26),S=I+(y^(g|~C))+T[11]+3174756917&4294967295,I=g+(S<<10&4294967295|S>>>22),S=C+(g^(I|~y))+T[2]+718787259&4294967295,C=I+(S<<15&4294967295|S>>>17),S=y+(I^(C|~g))+T[9]+3951481745&4294967295,_.g[0]=_.g[0]+g&4294967295,_.g[1]=_.g[1]+(C+(S<<21&4294967295|S>>>11))&4294967295,_.g[2]=_.g[2]+C&4294967295,_.g[3]=_.g[3]+I&4294967295}r.prototype.u=function(_,g){g===void 0&&(g=_.length);for(var y=g-this.blockSize,T=this.B,C=this.h,I=0;I<g;){if(C==0)for(;I<=y;)i(this,_,I),I+=this.blockSize;if(typeof _=="string"){for(;I<g;)if(T[C++]=_.charCodeAt(I++),C==this.blockSize){i(this,T),C=0;break}}else for(;I<g;)if(T[C++]=_[I++],C==this.blockSize){i(this,T),C=0;break}}this.h=C,this.o+=g},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var g=1;g<_.length-8;++g)_[g]=0;var y=8*this.o;for(g=_.length-8;g<_.length;++g)_[g]=y&255,y/=256;for(this.u(_),_=Array(16),g=y=0;4>g;++g)for(var T=0;32>T;T+=8)_[y++]=this.g[g]>>>T&255;return _};function a(_,g){var y=o;return Object.prototype.hasOwnProperty.call(y,_)?y[_]:y[_]=g(_)}function s(_,g){this.h=g;for(var y=[],T=!0,C=_.length-1;0<=C;C--){var I=_[C]|0;T&&I==g||(y[C]=I,T=!1)}this.g=y}var o={};function l(_){return-128<=_&&128>_?a(_,function(g){return new s([g|0],0>g?-1:0)}):new s([_|0],0>_?-1:0)}function h(_){if(isNaN(_)||!isFinite(_))return d;if(0>_)return D(h(-_));for(var g=[],y=1,T=0;_>=y;T++)g[T]=_/y|0,y*=4294967296;return new s(g,0)}function u(_,g){if(_.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(_.charAt(0)=="-")return D(u(_.substring(1),g));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=h(Math.pow(g,8)),T=d,C=0;C<_.length;C+=8){var I=Math.min(8,_.length-C),S=parseInt(_.substring(C,C+I),g);8>I?(I=h(Math.pow(g,I)),T=T.j(I).add(h(S))):(T=T.j(y),T=T.add(h(S)))}return T}var d=l(0),f=l(1),m=l(16777216);t=s.prototype,t.m=function(){if(A(this))return-D(this).m();for(var _=0,g=1,y=0;y<this.g.length;y++){var T=this.i(y);_+=(0<=T?T:4294967296+T)*g,g*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b(this))return"0";if(A(this))return"-"+D(this).toString(_);for(var g=h(Math.pow(_,6)),y=this,T="";;){var C=O(y,g).g;y=E(y,C.j(g));var I=((0<y.g.length?y.g[0]:y.h)>>>0).toString(_);if(y=C,b(y))return I+T;for(;6>I.length;)I="0"+I;T=I+T}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function b(_){if(_.h!=0)return!1;for(var g=0;g<_.g.length;g++)if(_.g[g]!=0)return!1;return!0}function A(_){return _.h==-1}t.l=function(_){return _=E(this,_),A(_)?-1:b(_)?0:1};function D(_){for(var g=_.g.length,y=[],T=0;T<g;T++)y[T]=~_.g[T];return new s(y,~_.h).add(f)}t.abs=function(){return A(this)?D(this):this},t.add=function(_){for(var g=Math.max(this.g.length,_.g.length),y=[],T=0,C=0;C<=g;C++){var I=T+(this.i(C)&65535)+(_.i(C)&65535),S=(I>>>16)+(this.i(C)>>>16)+(_.i(C)>>>16);T=S>>>16,I&=65535,S&=65535,y[C]=S<<16|I}return new s(y,y[y.length-1]&-2147483648?-1:0)};function E(_,g){return _.add(D(g))}t.j=function(_){if(b(this)||b(_))return d;if(A(this))return A(_)?D(this).j(D(_)):D(D(this).j(_));if(A(_))return D(this.j(D(_)));if(0>this.l(m)&&0>_.l(m))return h(this.m()*_.m());for(var g=this.g.length+_.g.length,y=[],T=0;T<2*g;T++)y[T]=0;for(T=0;T<this.g.length;T++)for(var C=0;C<_.g.length;C++){var I=this.i(T)>>>16,S=this.i(T)&65535,U=_.i(C)>>>16,z=_.i(C)&65535;y[2*T+2*C]+=S*z,x(y,2*T+2*C),y[2*T+2*C+1]+=I*z,x(y,2*T+2*C+1),y[2*T+2*C+1]+=S*U,x(y,2*T+2*C+1),y[2*T+2*C+2]+=I*U,x(y,2*T+2*C+2)}for(T=0;T<g;T++)y[T]=y[2*T+1]<<16|y[2*T];for(T=g;T<2*g;T++)y[T]=0;return new s(y,0)};function x(_,g){for(;(_[g]&65535)!=_[g];)_[g+1]+=_[g]>>>16,_[g]&=65535,g++}function N(_,g){this.g=_,this.h=g}function O(_,g){if(b(g))throw Error("division by zero");if(b(_))return new N(d,d);if(A(_))return g=O(D(_),g),new N(D(g.g),D(g.h));if(A(g))return g=O(_,D(g)),new N(D(g.g),g.h);if(30<_.g.length){if(A(_)||A(g))throw Error("slowDivide_ only works with positive integers.");for(var y=f,T=g;0>=T.l(_);)y=P(y),T=P(T);var C=R(y,1),I=R(T,1);for(T=R(T,2),y=R(y,2);!b(T);){var S=I.add(T);0>=S.l(_)&&(C=C.add(y),I=S),T=R(T,1),y=R(y,1)}return g=E(_,C.j(g)),new N(C,g)}for(C=d;0<=_.l(g);){for(y=Math.max(1,Math.floor(_.m()/g.m())),T=Math.ceil(Math.log(y)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),I=h(y),S=I.j(g);A(S)||0<S.l(_);)y-=T,I=h(y),S=I.j(g);b(I)&&(I=f),C=C.add(I),_=E(_,S)}return new N(C,_)}t.A=function(_){return O(this,_).h},t.and=function(_){for(var g=Math.max(this.g.length,_.g.length),y=[],T=0;T<g;T++)y[T]=this.i(T)&_.i(T);return new s(y,this.h&_.h)},t.or=function(_){for(var g=Math.max(this.g.length,_.g.length),y=[],T=0;T<g;T++)y[T]=this.i(T)|_.i(T);return new s(y,this.h|_.h)},t.xor=function(_){for(var g=Math.max(this.g.length,_.g.length),y=[],T=0;T<g;T++)y[T]=this.i(T)^_.i(T);return new s(y,this.h^_.h)};function P(_){for(var g=_.g.length+1,y=[],T=0;T<g;T++)y[T]=_.i(T)<<1|_.i(T-1)>>>31;return new s(y,_.h)}function R(_,g){var y=g>>5;g%=32;for(var T=_.g.length-y,C=[],I=0;I<T;I++)C[I]=0<g?_.i(I+y)>>>g|_.i(I+y+1)<<32-g:_.i(I+y);return new s(C,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,V2=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=u,ja=s}).apply(typeof r1<"u"?r1:typeof self<"u"?self:typeof window<"u"?window:{});var ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var z2,ec,B2,Ph,lg,F2,H2,q2;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,v,w){return c==Array.prototype||c==Object.prototype||(c[v]=w.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ch=="object"&&ch];for(var v=0;v<c.length;++v){var w=c[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function i(c,v){if(v)e:{var w=r;c=c.split(".");for(var j=0;j<c.length-1;j++){var G=c[j];if(!(G in w))break e;w=w[G]}c=c[c.length-1],j=w[c],v=v(j),v!=j&&v!=null&&e(w,c,{configurable:!0,writable:!0,value:v})}}function a(c,v){c instanceof String&&(c+="");var w=0,j=!1,G={next:function(){if(!j&&w<c.length){var W=w++;return{value:v(W,c[W]),done:!1}}return j=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}i("Array.prototype.values",function(c){return c||function(){return a(this,function(v,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(c){var v=typeof c;return v=v!="object"?v:c?Array.isArray(c)?"array":v:"null",v=="array"||v=="object"&&typeof c.length=="number"}function h(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function u(c,v,w){return c.call.apply(c.bind,arguments)}function d(c,v,w){if(!c)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,j),c.apply(v,G)}}return function(){return c.apply(v,arguments)}}function f(c,v,w){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function m(c,v){var w=Array.prototype.slice.call(arguments,1);return function(){var j=w.slice();return j.push.apply(j,arguments),c.apply(this,j)}}function b(c,v){function w(){}w.prototype=v.prototype,c.aa=v.prototype,c.prototype=new w,c.prototype.constructor=c,c.Qb=function(j,G,W){for(var ne=Array(arguments.length-2),at=2;at<arguments.length;at++)ne[at-2]=arguments[at];return v.prototype[G].apply(j,ne)}}function A(c){const v=c.length;if(0<v){const w=Array(v);for(let j=0;j<v;j++)w[j]=c[j];return w}return[]}function D(c,v){for(let w=1;w<arguments.length;w++){const j=arguments[w];if(l(j)){const G=c.length||0,W=j.length||0;c.length=G+W;for(let ne=0;ne<W;ne++)c[G+ne]=j[ne]}else c.push(j)}}class E{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function x(c){return/^[\s\xa0]*$/.test(c)}function N(){var c=o.navigator;return c&&(c=c.userAgent)?c:""}function O(c){return O[" "](c),c}O[" "]=function(){};var P=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function R(c,v,w){for(const j in c)v.call(w,c[j],j,c)}function _(c,v){for(const w in c)v.call(void 0,c[w],w,c)}function g(c){const v={};for(const w in c)v[w]=c[w];return v}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,v){let w,j;for(let G=1;G<arguments.length;G++){j=arguments[G];for(w in j)c[w]=j[w];for(let W=0;W<y.length;W++)w=y[W],Object.prototype.hasOwnProperty.call(j,w)&&(c[w]=j[w])}}function C(c){var v=1;c=c.split(":");const w=[];for(;0<v&&c.length;)w.push(c.shift()),v--;return c.length&&w.push(c.join(":")),w}function I(c){o.setTimeout(()=>{throw c},0)}function S(){var c=B;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class U{constructor(){this.h=this.g=null}add(v,w){const j=z.get();j.set(v,w),this.h?this.h.next=j:this.g=j,this.h=j}}var z=new E(()=>new k,c=>c.reset());class k{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let M,H=!1,B=new U,X=()=>{const c=o.Promise.resolve(void 0);M=()=>{c.then(re)}};var re=()=>{for(var c;c=S();){try{c.h.call(c.g)}catch(w){I(w)}var v=z;v.j(c),100>v.h&&(v.h++,c.next=v.g,v.g=c)}H=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};o.addEventListener("test",w,v),o.removeEventListener("test",w,v)}catch{}return c}();function Y(c,v){if(K.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var w=this.type=c.type,j=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget){if(P){e:{try{O(v.nodeName);var G=!0;break e}catch{}G=!1}G||(v=null)}}else w=="mouseover"?v=c.fromElement:w=="mouseout"&&(v=c.toElement);this.relatedTarget=v,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:le[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Y.aa.h.call(this)}}b(Y,K);var le={2:"touch",3:"pen",4:"mouse"};Y.prototype.h=function(){Y.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),me=0;function De(c,v,w,j,G){this.listener=c,this.proxy=null,this.src=v,this.type=w,this.capture=!!j,this.ha=G,this.key=++me,this.da=this.fa=!1}function ze(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function We(c){this.src=c,this.g={},this.h=0}We.prototype.add=function(c,v,w,j,G){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var ne=en(c,v,j,G);return-1<ne?(v=c[ne],w||(v.fa=!1)):(v=new De(v,this.src,W,!!j,G),v.fa=w,c.push(v)),v};function Ae(c,v){var w=v.type;if(w in c.g){var j=c.g[w],G=Array.prototype.indexOf.call(j,v,void 0),W;(W=0<=G)&&Array.prototype.splice.call(j,G,1),W&&(ze(v),c.g[w].length==0&&(delete c.g[w],c.h--))}}function en(c,v,w,j){for(var G=0;G<c.length;++G){var W=c[G];if(!W.da&&W.listener==v&&W.capture==!!w&&W.ha==j)return G}return-1}var un="closure_lm_"+(1e6*Math.random()|0),Ze={};function it(c,v,w,j,G){if(Array.isArray(v)){for(var W=0;W<v.length;W++)it(c,v[W],w,j,G);return null}return w=Rt(w),c&&c[Te]?c.K(v,w,h(j)?!!j.capture:!1,G):Je(c,v,w,!1,j,G)}function Je(c,v,w,j,G,W){if(!v)throw Error("Invalid event type");var ne=h(G)?!!G.capture:!!G,at=ot(c);if(at||(c[un]=at=new We(c)),w=at.add(v,w,j,ne,W),w.proxy)return w;if(j=$e(),w.proxy=j,j.src=c,j.listener=w,c.addEventListener)$||(G=ne),G===void 0&&(G=!1),c.addEventListener(v.toString(),j,G);else if(c.attachEvent)c.attachEvent(ht(v.toString()),j);else if(c.addListener&&c.removeListener)c.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return w}function $e(){function c(w){return v.call(c.src,c.listener,w)}const v=hn;return c}function xt(c,v,w,j,G){if(Array.isArray(v))for(var W=0;W<v.length;W++)xt(c,v[W],w,j,G);else j=h(j)?!!j.capture:!!j,w=Rt(w),c&&c[Te]?(c=c.i,v=String(v).toString(),v in c.g&&(W=c.g[v],w=en(W,w,j,G),-1<w&&(ze(W[w]),Array.prototype.splice.call(W,w,1),W.length==0&&(delete c.g[v],c.h--)))):c&&(c=ot(c))&&(v=c.g[v.toString()],c=-1,v&&(c=en(v,w,j,G)),(w=-1<c?v[c]:null)&&Mt(w))}function Mt(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[Te])Ae(v.i,c);else{var w=c.type,j=c.proxy;v.removeEventListener?v.removeEventListener(w,j,c.capture):v.detachEvent?v.detachEvent(ht(w),j):v.addListener&&v.removeListener&&v.removeListener(j),(w=ot(v))?(Ae(w,c),w.h==0&&(w.src=null,v[un]=null)):ze(c)}}}function ht(c){return c in Ze?Ze[c]:Ze[c]="on"+c}function hn(c,v){if(c.da)c=!0;else{v=new Y(v,this);var w=c.listener,j=c.ha||c.src;c.fa&&Mt(c),c=w.call(j,v)}return c}function ot(c){return c=c[un],c instanceof We?c:null}var Ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(c){return typeof c=="function"?c:(c[Ce]||(c[Ce]=function(v){return c.handleEvent(v)}),c[Ce])}function et(){V.call(this),this.i=new We(this),this.M=this,this.F=null}b(et,V),et.prototype[Te]=!0,et.prototype.removeEventListener=function(c,v,w,j){xt(this,c,v,w,j)};function gt(c,v){var w,j=c.F;if(j)for(w=[];j;j=j.F)w.push(j);if(c=c.M,j=v.type||v,typeof v=="string")v=new K(v,c);else if(v instanceof K)v.target=v.target||c;else{var G=v;v=new K(j,c),T(v,G)}if(G=!0,w)for(var W=w.length-1;0<=W;W--){var ne=v.g=w[W];G=qe(ne,j,!0,v)&&G}if(ne=v.g=c,G=qe(ne,j,!0,v)&&G,G=qe(ne,j,!1,v)&&G,w)for(W=0;W<w.length;W++)ne=v.g=w[W],G=qe(ne,j,!1,v)&&G}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var c=this.i,v;for(v in c.g){for(var w=c.g[v],j=0;j<w.length;j++)ze(w[j]);delete c.g[v],c.h--}}this.F=null},et.prototype.K=function(c,v,w,j){return this.i.add(String(c),v,!1,w,j)},et.prototype.L=function(c,v,w,j){return this.i.add(String(c),v,!0,w,j)};function qe(c,v,w,j){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();for(var G=!0,W=0;W<v.length;++W){var ne=v[W];if(ne&&!ne.da&&ne.capture==w){var at=ne.listener,mn=ne.ha||ne.src;ne.fa&&Ae(c.i,ne),G=at.call(mn,j)!==!1&&G}}return G&&!j.defaultPrevented}function zt(c,v,w){if(typeof c=="function")w&&(c=f(c,w));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:o.setTimeout(c,v||0)}function kt(c){c.g=zt(()=>{c.g=null,c.i&&(c.i=!1,kt(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class tn extends V{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:kt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bt(c){V.call(this),this.h=c,this.g={}}b(Bt,V);var jt=[];function wn(c){R(c.g,function(v,w){this.g.hasOwnProperty(w)&&Mt(v)},c),c.g={}}Bt.prototype.N=function(){Bt.aa.N.call(this),wn(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vn=o.JSON.stringify,Xi=o.JSON.parse,xl=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function Gr(){}Gr.prototype.h=null;function $r(c){return c.h||(c.h=c.i())}function Ir(){}var Dr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tn(){K.call(this,"d")}b(Tn,K);function zn(){K.call(this,"c")}b(zn,K);var dn={},Yr=null;function Xr(){return Yr=Yr||new et}dn.La="serverreachability";function Mn(c){K.call(this,dn.La,c)}b(Mn,K);function nn(c){const v=Xr();gt(v,new Mn(v))}dn.STAT_EVENT="statevent";function Mu(c,v){K.call(this,dn.STAT_EVENT,c),this.stat=v}b(Mu,K);function fn(c){const v=Xr();gt(v,new Mu(v,c))}dn.Ma="timingevent";function L(c,v){K.call(this,dn.Ma,c),this.size=v}b(L,K);function F(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},v)}function Q(){this.g=!0}Q.prototype.xa=function(){this.g=!1};function te(c,v,w,j,G,W){c.info(function(){if(c.g)if(W)for(var ne="",at=W.split("&"),mn=0;mn<at.length;mn++){var Be=at[mn].split("=");if(1<Be.length){var xn=Be[0];Be=Be[1];var An=xn.split("_");ne=2<=An.length&&An[1]=="type"?ne+(xn+"="+Be+"&"):ne+(xn+"=redacted&")}}else ne=null;else ne=W;return"XMLHTTP REQ ("+j+") [attempt "+G+"]: "+v+`
`+w+`
`+ne})}function ie(c,v,w,j,G,W,ne){c.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+G+"]: "+v+`
`+w+`
`+W+" "+ne})}function he(c,v,w,j){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+ue(c,w)+(j?" "+j:"")})}function ge(c,v){c.info(function(){return"TIMEOUT: "+v})}Q.prototype.info=function(){};function ue(c,v){if(!c.g)return v;if(!v)return null;try{var w=JSON.parse(v);if(w){for(c=0;c<w.length;c++)if(Array.isArray(w[c])){var j=w[c];if(!(2>j.length)){var G=j[1];if(Array.isArray(G)&&!(1>G.length)){var W=G[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ne=1;ne<G.length;ne++)G[ne]=""}}}}return Vn(w)}catch{return v}}var ce={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},de;function _e(){}b(_e,Gr),_e.prototype.g=function(){return new XMLHttpRequest},_e.prototype.i=function(){return{}},de=new _e;function we(c,v,w,j){this.j=c,this.i=v,this.l=w,this.R=j||1,this.U=new Bt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ft}function Ft(){this.i=null,this.g="",this.h=!1}var Ye={},je={};function lt(c,v,w){c.L=1,c.v=Uu(_i(v)),c.m=w,c.P=!0,gi(c,null)}function gi(c,v){c.F=Date.now(),kn(c),c.A=_i(c.v);var w=c.A,j=c.R;Array.isArray(j)||(j=[String(j)]),m0(w.i,"t",j),c.C=0,w=c.j.J,c.h=new Ft,c.g=O0(c.j,w?v:null,!c.m),0<c.O&&(c.M=new tn(f(c.Y,c,c.g),c.O)),v=c.U,w=c.g,j=c.ca;var G="readystatechange";Array.isArray(G)||(G&&(jt[0]=G.toString()),G=jt);for(var W=0;W<G.length;W++){var ne=it(w,G[W],j||v.handleEvent,!1,v.h||v);if(!ne)break;v.g[ne.key]=ne}v=c.H?g(c.H):{},c.m?(c.u||(c.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,v)):(c.u="GET",c.g.ea(c.A,c.u,null,v)),nn(),te(c.i,c.u,c.A,c.l,c.R,c.m)}we.prototype.ca=function(c){c=c.target;const v=this.M;v&&bi(c)==3?v.j():this.Y(c)},we.prototype.Y=function(c){try{if(c==this.g)e:{const An=bi(this.g);var v=this.g.Ba();const Js=this.g.Z();if(!(3>An)&&(An!=3||this.g&&(this.h.h||this.g.oa()||E0(this.g)))){this.J||An!=4||v==7||(v==8||0>=Js?nn(3):nn(2)),vi(this);var w=this.g.Z();this.X=w;t:if(Qi(this)){var j=E0(this.g);c="";var G=j.length,W=bi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pr(this),Jn(this);var ne="";break t}this.h.i=new o.TextDecoder}for(v=0;v<G;v++)this.h.h=!0,c+=this.h.i.decode(j[v],{stream:!(W&&v==G-1)});j.length=0,this.h.g+=c,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=w==200,ie(this.i,this.u,this.A,this.l,this.R,An,w),this.o){if(this.T&&!this.K){t:{if(this.g){var at,mn=this.g;if((at=mn.g?mn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(at)){var Be=at;break t}}Be=null}if(w=Be)he(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ki(this,w);else{this.o=!1,this.s=3,fn(12),pr(this),Jn(this);break e}}if(this.P){w=!0;let Mr;for(;!this.J&&this.C<ne.length;)if(Mr=Or(this,ne),Mr==je){An==4&&(this.s=4,fn(14),w=!1),he(this.i,this.l,null,"[Incomplete Response]");break}else if(Mr==Ye){this.s=4,fn(15),he(this.i,this.l,ne,"[Invalid Chunk]"),w=!1;break}else he(this.i,this.l,Mr,null),Ki(this,Mr);if(Qi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),An!=4||ne.length!=0||this.h.h||(this.s=1,fn(16),w=!1),this.o=this.o&&w,!w)he(this.i,this.l,ne,"[Invalid Chunked Response]"),pr(this),Jn(this);else if(0<ne.length&&!this.W){this.W=!0;var xn=this.j;xn.g==this&&xn.ba&&!xn.M&&(xn.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),Qf(xn),xn.M=!0,fn(11))}}else he(this.i,this.l,ne,null),Ki(this,ne);An==4&&pr(this),this.o&&!this.J&&(An==4?C0(this.j,this):(this.o=!1,kn(this)))}else BR(this.g),w==400&&0<ne.indexOf("Unknown SID")?(this.s=3,fn(12)):(this.s=0,fn(13)),pr(this),Jn(this)}}}catch{}finally{}};function Qi(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Or(c,v){var w=c.C,j=v.indexOf(`
`,w);return j==-1?je:(w=Number(v.substring(w,j)),isNaN(w)?Ye:(j+=1,j+w>v.length?je:(v=v.slice(j,j+w),c.C=j+w,v)))}we.prototype.cancel=function(){this.J=!0,pr(this)};function kn(c){c.S=Date.now()+c.I,Ks(c,c.I)}function Ks(c,v){if(c.B!=null)throw Error("WatchDog timer not null");c.B=F(f(c.ba,c),v)}function vi(c){c.B&&(o.clearTimeout(c.B),c.B=null)}we.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ge(this.i,this.A),this.L!=2&&(nn(),fn(17)),pr(this),this.s=2,Jn(this)):Ks(this,this.S-c)};function Jn(c){c.j.G==0||c.J||C0(c.j,c)}function pr(c){vi(c);var v=c.M;v&&typeof v.ma=="function"&&v.ma(),c.M=null,wn(c.U),c.g&&(v=c.g,c.g=null,v.abort(),v.ma())}function Ki(c,v){try{var w=c.j;if(w.G!=0&&(w.g==c||vt(w.h,c))){if(!c.K&&vt(w.h,c)&&w.G==3){try{var j=w.Da.g.parse(v)}catch{j=null}if(Array.isArray(j)&&j.length==3){var G=j;if(G[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<c.F)Hu(w),Bu(w);else break e;Xf(w),fn(18)}}else w.za=G[1],0<w.za-w.T&&37500>G[2]&&w.F&&w.v==0&&!w.C&&(w.C=F(f(w.Za,w),6e3));if(1>=Wi(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ns(w,11)}else if((c.K||w.g==c)&&Hu(w),!x(v))for(G=w.Da.g.parse(v),v=0;v<G.length;v++){let Be=G[v];if(w.T=Be[0],Be=Be[1],w.G==2)if(Be[0]=="c"){w.K=Be[1],w.ia=Be[2];const xn=Be[3];xn!=null&&(w.la=xn,w.j.info("VER="+w.la));const An=Be[4];An!=null&&(w.Aa=An,w.j.info("SVER="+w.Aa));const Js=Be[5];Js!=null&&typeof Js=="number"&&0<Js&&(j=1.5*Js,w.L=j,w.j.info("backChannelRequestTimeoutMs_="+j)),j=w;const Mr=c.g;if(Mr){const Gu=Mr.g?Mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gu){var W=j.h;W.g||Gu.indexOf("spdy")==-1&&Gu.indexOf("quic")==-1&&Gu.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Qr(W,W.h),W.h=null))}if(j.D){const Kf=Mr.g?Mr.g.getResponseHeader("X-HTTP-Session-Id"):null;Kf&&(j.ya=Kf,ft(j.I,j.D,Kf))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-c.F,w.j.info("Handshake RTT: "+w.R+"ms")),j=w;var ne=c;if(j.qa=D0(j,j.J?j.ia:null,j.W),ne.K){Al(j.h,ne);var at=ne,mn=j.L;mn&&(at.I=mn),at.B&&(vi(at),kn(at)),j.g=ne}else S0(j);0<w.i.length&&Fu(w)}else Be[0]!="stop"&&Be[0]!="close"||ns(w,7);else w.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?ns(w,7):Yf(w):Be[0]!="noop"&&w.l&&w.l.ta(Be),w.v=0)}}nn(4)}catch{}}var Ue=class{constructor(c,v){this.g=c,this.map=v}};function dt(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yi(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Wi(c){return c.h?1:c.g?c.g.size:0}function vt(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function Qr(c,v){c.g?c.g.add(v):c.h=v}function Al(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}dt.prototype.cancel=function(){if(this.i=ku(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ku(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const w of c.g.values())v=v.concat(w.D);return v}return A(c.i)}function SR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var v=[],w=c.length,j=0;j<w;j++)v.push(c[j]);return v}v=[],w=0;for(j in c)v[w++]=c[j];return v}function RR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var v=[];c=c.length;for(var w=0;w<c;w++)v.push(w);return v}v=[],w=0;for(const j in c)v[w++]=j;return v}}}function l0(c,v){if(c.forEach&&typeof c.forEach=="function")c.forEach(v,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,v,void 0);else for(var w=RR(c),j=SR(c),G=j.length,W=0;W<G;W++)v.call(void 0,j[W],w&&w[W],c)}var c0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function CR(c,v){if(c){c=c.split("&");for(var w=0;w<c.length;w++){var j=c[w].indexOf("="),G=null;if(0<=j){var W=c[w].substring(0,j);G=c[w].substring(j+1)}else W=c[w];v(W,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function ts(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ts){this.h=c.h,ju(this,c.j),this.o=c.o,this.g=c.g,Pu(this,c.s),this.l=c.l;var v=c.i,w=new Cl;w.i=v.i,v.g&&(w.g=new Map(v.g),w.h=v.h),u0(this,w),this.m=c.m}else c&&(v=String(c).match(c0))?(this.h=!1,ju(this,v[1]||"",!0),this.o=Sl(v[2]||""),this.g=Sl(v[3]||"",!0),Pu(this,v[4]),this.l=Sl(v[5]||"",!0),u0(this,v[6]||"",!0),this.m=Sl(v[7]||"")):(this.h=!1,this.i=new Cl(null,this.h))}ts.prototype.toString=function(){var c=[],v=this.j;v&&c.push(Rl(v,h0,!0),":");var w=this.g;return(w||v=="file")&&(c.push("//"),(v=this.o)&&c.push(Rl(v,h0,!0),"@"),c.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&c.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(Rl(w,w.charAt(0)=="/"?DR:IR,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",Rl(w,MR)),c.join("")};function _i(c){return new ts(c)}function ju(c,v,w){c.j=w?Sl(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function Pu(c,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);c.s=v}else c.s=null}function u0(c,v,w){v instanceof Cl?(c.i=v,kR(c.i,c.h)):(w||(v=Rl(v,OR)),c.i=new Cl(v,c.h))}function ft(c,v,w){c.i.set(v,w)}function Uu(c){return ft(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Sl(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Rl(c,v,w){return typeof c=="string"?(c=encodeURI(c).replace(v,NR),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function NR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var h0=/[#\/\?@]/g,IR=/[#\?:]/g,DR=/[#\?]/g,OR=/[#\?@]/g,MR=/#/g;function Cl(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function Zi(c){c.g||(c.g=new Map,c.h=0,c.i&&CR(c.i,function(v,w){c.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}t=Cl.prototype,t.add=function(c,v){Zi(this),this.i=null,c=Ws(this,c);var w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(v),this.h+=1,this};function d0(c,v){Zi(c),v=Ws(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function f0(c,v){return Zi(c),v=Ws(c,v),c.g.has(v)}t.forEach=function(c,v){Zi(this),this.g.forEach(function(w,j){w.forEach(function(G){c.call(v,G,j,this)},this)},this)},t.na=function(){Zi(this);const c=Array.from(this.g.values()),v=Array.from(this.g.keys()),w=[];for(let j=0;j<v.length;j++){const G=c[j];for(let W=0;W<G.length;W++)w.push(v[j])}return w},t.V=function(c){Zi(this);let v=[];if(typeof c=="string")f0(this,c)&&(v=v.concat(this.g.get(Ws(this,c))));else{c=Array.from(this.g.values());for(let w=0;w<c.length;w++)v=v.concat(c[w])}return v},t.set=function(c,v){return Zi(this),this.i=null,c=Ws(this,c),f0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},t.get=function(c,v){return c?(c=this.V(c),0<c.length?String(c[0]):v):v};function m0(c,v,w){d0(c,v),0<w.length&&(c.i=null,c.g.set(Ws(c,v),A(w)),c.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(var w=0;w<v.length;w++){var j=v[w];const W=encodeURIComponent(String(j)),ne=this.V(j);for(j=0;j<ne.length;j++){var G=W;ne[j]!==""&&(G+="="+encodeURIComponent(String(ne[j]))),c.push(G)}}return this.i=c.join("&")};function Ws(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function kR(c,v){v&&!c.j&&(Zi(c),c.i=null,c.g.forEach(function(w,j){var G=j.toLowerCase();j!=G&&(d0(this,j),m0(this,G,w))},c)),c.j=v}function jR(c,v){const w=new Q;if(o.Image){const j=new Image;j.onload=m(Ji,w,"TestLoadImage: loaded",!0,v,j),j.onerror=m(Ji,w,"TestLoadImage: error",!1,v,j),j.onabort=m(Ji,w,"TestLoadImage: abort",!1,v,j),j.ontimeout=m(Ji,w,"TestLoadImage: timeout",!1,v,j),o.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=c}else v(!1)}function PR(c,v){const w=new Q,j=new AbortController,G=setTimeout(()=>{j.abort(),Ji(w,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:j.signal}).then(W=>{clearTimeout(G),W.ok?Ji(w,"TestPingServer: ok",!0,v):Ji(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(G),Ji(w,"TestPingServer: error",!1,v)})}function Ji(c,v,w,j,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),j(w)}catch{}}function UR(){this.g=new xl}function LR(c,v,w){const j=w||"";try{l0(c,function(G,W){let ne=G;h(G)&&(ne=Vn(G)),v.push(j+W+"="+encodeURIComponent(ne))})}catch(G){throw v.push(j+"type="+encodeURIComponent("_badmap")),G}}function Lu(c){this.l=c.Ub||null,this.j=c.eb||!1}b(Lu,Gr),Lu.prototype.g=function(){return new Vu(this.l,this.j)},Lu.prototype.i=function(c){return function(){return c}}({});function Vu(c,v){et.call(this),this.D=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Vu,et),t=Vu.prototype,t.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=v,this.readyState=1,Il(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(v.body=c),(this.D||o).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nl(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Il(this)),this.g&&(this.readyState=3,Il(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;p0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function p0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?Nl(this):Il(this),this.readyState==3&&p0(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Nl(this))},t.Qa=function(c){this.g&&(this.response=c,Nl(this))},t.ga=function(){this.g&&Nl(this)};function Nl(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Il(c)}t.setRequestHeader=function(c,v){this.u.append(c,v)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=v.next();return c.join(`\r
`)};function Il(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Vu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function g0(c){let v="";return R(c,function(w,j){v+=j,v+=":",v+=w,v+=`\r
`}),v}function $f(c,v,w){e:{for(j in w){var j=!1;break e}j=!0}j||(w=g0(w),typeof c=="string"?w!=null&&encodeURIComponent(String(w)):ft(c,v,w))}function Ct(c){et.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ct,et);var VR=/^https?$/i,zR=["POST","PUT"];t=Ct.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,v,w,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():de.g(),this.v=this.o?$r(this.o):$r(de),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(W){v0(this,W);return}if(c=w||"",w=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var G in j)w.set(G,j[G]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const W of j.keys())w.set(W,j.get(W));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(w.keys()).find(W=>W.toLowerCase()=="content-type"),G=o.FormData&&c instanceof o.FormData,!(0<=Array.prototype.indexOf.call(zR,v,void 0))||j||G||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ne]of w)this.g.setRequestHeader(W,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{b0(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){v0(this,W)}};function v0(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.m=5,y0(c),zu(c)}function y0(c){c.A||(c.A=!0,gt(c,"complete"),gt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,gt(this,"complete"),gt(this,"abort"),zu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zu(this,!0)),Ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?_0(this):this.bb())},t.bb=function(){_0(this)};function _0(c){if(c.h&&typeof s<"u"&&(!c.v[1]||bi(c)!=4||c.Z()!=2)){if(c.u&&bi(c)==4)zt(c.Ea,0,c);else if(gt(c,"readystatechange"),bi(c)==4){c.h=!1;try{const ne=c.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var j;if(j=ne===0){var G=String(c.D).match(c0)[1]||null;!G&&o.self&&o.self.location&&(G=o.self.location.protocol.slice(0,-1)),j=!VR.test(G?G.toLowerCase():"")}w=j}if(w)gt(c,"complete"),gt(c,"success");else{c.m=6;try{var W=2<bi(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",y0(c)}}finally{zu(c)}}}}function zu(c,v){if(c.g){b0(c);const w=c.g,j=c.v[0]?()=>{}:null;c.g=null,c.v=null,v||gt(c,"ready");try{w.onreadystatechange=j}catch{}}}function b0(c){c.I&&(o.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function bi(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<bi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),Xi(v)}};function E0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function BR(c){const v={};c=(c.g&&2<=bi(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<c.length;j++){if(x(c[j]))continue;var w=C(c[j]);const G=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const W=v[G]||[];v[G]=W,W.push(w)}_(v,function(j){return j.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dl(c,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||v}function w0(c){this.Aa=0,this.i=[],this.j=new Q,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Dl("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Dl("baseRetryDelayMs",5e3,c),this.cb=Dl("retryDelaySeedMs",1e4,c),this.Wa=Dl("forwardChannelMaxRetries",2,c),this.wa=Dl("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new dt(c&&c.concurrentRequestLimit),this.Da=new UR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=w0.prototype,t.la=8,t.G=1,t.connect=function(c,v,w,j){fn(0),this.W=c,this.H=v||{},w&&j!==void 0&&(this.H.OSID=w,this.H.OAID=j),this.F=this.X,this.I=D0(this,null,this.W),Fu(this)};function Yf(c){if(T0(c),c.G==3){var v=c.U++,w=_i(c.I);if(ft(w,"SID",c.K),ft(w,"RID",v),ft(w,"TYPE","terminate"),Ol(c,w),v=new we(c,c.j,v),v.L=2,v.v=Uu(_i(w)),w=!1,o.navigator&&o.navigator.sendBeacon)try{w=o.navigator.sendBeacon(v.v.toString(),"")}catch{}!w&&o.Image&&(new Image().src=v.v,w=!0),w||(v.g=O0(v.j,null),v.g.ea(v.v)),v.F=Date.now(),kn(v)}I0(c)}function Bu(c){c.g&&(Qf(c),c.g.cancel(),c.g=null)}function T0(c){Bu(c),c.u&&(o.clearTimeout(c.u),c.u=null),Hu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&o.clearTimeout(c.s),c.s=null)}function Fu(c){if(!yi(c.h)&&!c.s){c.s=!0;var v=c.Ga;M||X(),H||(M(),H=!0),B.add(v,c),c.B=0}}function FR(c,v){return Wi(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=v.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=F(f(c.Ga,c,v),N0(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const G=new we(this,this.j,c);let W=this.o;if(this.S&&(W?(W=g(W),T(W,this.S)):W=this.S),this.m!==null||this.O||(G.H=W,W=null),this.P)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var j=this.i[w];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(v+=j,4096<v){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=A0(this,G,v),w=_i(this.I),ft(w,"RID",c),ft(w,"CVER",22),this.D&&ft(w,"X-HTTP-Session-Id",this.D),Ol(this,w),W&&(this.O?v="headers="+encodeURIComponent(String(g0(W)))+"&"+v:this.m&&$f(w,this.m,W)),Qr(this.h,G),this.Ua&&ft(w,"TYPE","init"),this.P?(ft(w,"$req",v),ft(w,"SID","null"),G.T=!0,lt(G,w,null)):lt(G,w,v),this.G=2}}else this.G==3&&(c?x0(this,c):this.i.length==0||yi(this.h)||x0(this))};function x0(c,v){var w;v?w=v.l:w=c.U++;const j=_i(c.I);ft(j,"SID",c.K),ft(j,"RID",w),ft(j,"AID",c.T),Ol(c,j),c.m&&c.o&&$f(j,c.m,c.o),w=new we(c,c.j,w,c.B+1),c.m===null&&(w.H=c.o),v&&(c.i=v.D.concat(c.i)),v=A0(c,w,1e3),w.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Qr(c.h,w),lt(w,j,v)}function Ol(c,v){c.H&&R(c.H,function(w,j){ft(v,j,w)}),c.l&&l0({},function(w,j){ft(v,j,w)})}function A0(c,v,w){w=Math.min(c.i.length,w);var j=c.l?f(c.l.Na,c.l,c):null;e:{var G=c.i;let W=-1;for(;;){const ne=["count="+w];W==-1?0<w?(W=G[0].g,ne.push("ofs="+W)):W=0:ne.push("ofs="+W);let at=!0;for(let mn=0;mn<w;mn++){let Be=G[mn].g;const xn=G[mn].map;if(Be-=W,0>Be)W=Math.max(0,G[mn].g-100),at=!1;else try{LR(xn,ne,"req"+Be+"_")}catch{j&&j(xn)}}if(at){j=ne.join("&");break e}}}return c=c.i.splice(0,w),v.D=c,j}function S0(c){if(!c.g&&!c.u){c.Y=1;var v=c.Fa;M||X(),H||(M(),H=!0),B.add(v,c),c.v=0}}function Xf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=F(f(c.Fa,c),N0(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,R0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=F(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fn(10),Bu(this),R0(this))};function Qf(c){c.A!=null&&(o.clearTimeout(c.A),c.A=null)}function R0(c){c.g=new we(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var v=_i(c.qa);ft(v,"RID","rpc"),ft(v,"SID",c.K),ft(v,"AID",c.T),ft(v,"CI",c.F?"0":"1"),!c.F&&c.ja&&ft(v,"TO",c.ja),ft(v,"TYPE","xmlhttp"),Ol(c,v),c.m&&c.o&&$f(v,c.m,c.o),c.L&&(c.g.I=c.L);var w=c.g;c=c.ia,w.L=1,w.v=Uu(_i(v)),w.m=null,w.P=!0,gi(w,c)}t.Za=function(){this.C!=null&&(this.C=null,Bu(this),Xf(this),fn(19))};function Hu(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function C0(c,v){var w=null;if(c.g==v){Hu(c),Qf(c),c.g=null;var j=2}else if(vt(c.h,v))w=v.D,Al(c.h,v),j=1;else return;if(c.G!=0){if(v.o)if(j==1){w=v.m?v.m.length:0,v=Date.now()-v.F;var G=c.B;j=Xr(),gt(j,new L(j,w)),Fu(c)}else S0(c);else if(G=v.s,G==3||G==0&&0<v.X||!(j==1&&FR(c,v)||j==2&&Xf(c)))switch(w&&0<w.length&&(v=c.h,v.i=v.i.concat(w)),G){case 1:ns(c,5);break;case 4:ns(c,10);break;case 3:ns(c,6);break;default:ns(c,2)}}}function N0(c,v){let w=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(w*=2),w*v}function ns(c,v){if(c.j.info("Error code "+v),v==2){var w=f(c.fb,c),j=c.Xa;const G=!j;j=new ts(j||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ju(j,"https"),Uu(j),G?jR(j.toString(),w):PR(j.toString(),w)}else fn(2);c.G=0,c.l&&c.l.sa(v),I0(c),T0(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),fn(2)):(this.j.info("Failed to ping google.com"),fn(1))};function I0(c){if(c.G=0,c.ka=[],c.l){const v=ku(c.h);(v.length!=0||c.i.length!=0)&&(D(c.ka,v),D(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function D0(c,v,w){var j=w instanceof ts?_i(w):new ts(w);if(j.g!="")v&&(j.g=v+"."+j.g),Pu(j,j.s);else{var G=o.location;j=G.protocol,v=v?v+"."+G.hostname:G.hostname,G=+G.port;var W=new ts(null);j&&ju(W,j),v&&(W.g=v),G&&Pu(W,G),w&&(W.l=w),j=W}return w=c.D,v=c.ya,w&&v&&ft(j,w,v),ft(j,"VER",c.la),Ol(c,j),j}function O0(c,v,w){if(v&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Ca&&!c.pa?new Ct(new Lu({eb:w})):new Ct(c.pa),v.Ha(c.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function M0(){}t=M0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function qu(){}qu.prototype.g=function(c,v){return new er(c,v)};function er(c,v){et.call(this),this.g=new w0(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(c?c["X-WebChannel-Client-Profile"]=v.va:c={"X-WebChannel-Client-Profile":v.va}),this.g.S=c,(c=v&&v.Sb)&&!x(c)&&(this.g.m=c),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!x(v)&&(this.g.D=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new Zs(this)}b(er,et),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){Yf(this.g)},er.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.u&&(w={},w.__data__=Vn(c),c=w);v.i.push(new Ue(v.Ya++,c)),v.G==3&&Fu(v)},er.prototype.N=function(){this.g.l=null,delete this.j,Yf(this.g),delete this.g,er.aa.N.call(this)};function k0(c){Tn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const w in v){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}b(k0,Tn);function j0(){zn.call(this),this.status=1}b(j0,zn);function Zs(c){this.g=c}b(Zs,M0),Zs.prototype.ua=function(){gt(this.g,"a")},Zs.prototype.ta=function(c){gt(this.g,new k0(c))},Zs.prototype.sa=function(c){gt(this.g,new j0)},Zs.prototype.ra=function(){gt(this.g,"b")},qu.prototype.createWebChannel=qu.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,q2=function(){return new qu},H2=function(){return Xr()},F2=dn,lg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ce.NO_ERROR=0,ce.TIMEOUT=8,ce.HTTP_ERROR=6,Ph=ce,oe.COMPLETE="complete",B2=oe,Ir.EventType=Dr,Dr.OPEN="a",Dr.CLOSE="b",Dr.ERROR="c",Dr.MESSAGE="d",et.prototype.listen=et.prototype.K,ec=Ir,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,z2=Ct}).apply(typeof ch<"u"?ch:typeof self<"u"?self:typeof window<"u"?window:{});const i1="@firebase/firestore",a1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new Qv("@firebase/firestore");function co(){return ks.logLevel}function se(t,...e){if(ks.logLevel<=Me.DEBUG){const n=e.map(ly);ks.debug(`Firestore (${bl}): ${t}`,...n)}}function qi(t,...e){if(ks.logLevel<=Me.ERROR){const n=e.map(ly);ks.error(`Firestore (${bl}): ${t}`,...n)}}function Ba(t,...e){if(ks.logLevel<=Me.WARN){const n=e.map(ly);ks.warn(`Firestore (${bl}): ${t}`,...n)}}function ly(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,G2(t,r,n)}function G2(t,e,n){let r=`FIRESTORE (${bl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw qi(r),new Error(r)}function Ge(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||G2(e,i,r)}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends qr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Rn.UNAUTHENTICATED))}shutdown(){}}class tM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nM{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ge(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let a=new Pi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Pi,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Pi)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string",31837,{l:r}),new $2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new Rn(e)}}class rM{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iM{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new rM(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ge(this.o===void 0,3512);const r=a=>{a.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,se("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new s1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new s1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=sM(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function cg(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Se(r,i);{const a=Y2(),s=oM(a.encode(o1(t,n)),a.encode(o1(e,n)));return s!==0?s:Se(r,i)}}n+=r>65535?2:1}return Se(t.length,e.length)}function o1(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function oM(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Se(t[n],e[n]);return Se(t.length,e.length)}function ol(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="__name__";class Zr{constructor(e,n,r){n===void 0?n=0:n>e.length&&pe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&pe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=Zr.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return Se(e.length,n.length)}static compareSegments(e,n){const r=Zr.isNumericId(e),i=Zr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Zr.extractNumericId(e).compare(Zr.extractNumericId(n)):cg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ja.fromString(e.substring(4,e.length-2))}}class ct extends Zr{construct(e,n,r){return new ct(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ct(n)}static emptyPath(){return new ct([])}}const lM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _n extends Zr{construct(e,n,r){return new _n(e,n,r)}static isValidIdentifier(e){return lM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===l1}static keyField(){return new _n([l1])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ae(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new ae(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ae(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new ae(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _n(n)}static emptyPath(){return new _n([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(ct.fromString(e))}static fromName(e){return new fe(ct.fromString(e).popFirst(5))}static empty(){return new fe(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t,e,n){if(!n)throw new ae(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cM(t,e,n,r){if(e===!0&&r===!0)throw new ae(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function c1(t){if(!fe.isDocumentKey(t))throw new ae(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function u1(t){if(fe.isDocumentKey(t))throw new ae(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Q2(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Sf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe(12329,{type:typeof t})}function Rr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ae(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sf(t);throw new ae(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Tu(t,e){if(!Q2(t))throw new ae(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new ae(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=-62135596800,d1=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*d1);return new mt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<h1)throw new ae(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/d1}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tu(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-h1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:Xt("string",mt._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new mt(0,0))}static max(){return new be(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=-1;function uM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=be.fromTimestamp(r===1e9?new mt(n+1,0):new mt(n,r));return new Fa(i,fe.empty(),e)}function hM(t){return new Fa(t.readTime,t.key,Hc)}class Fa{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fa(be.min(),fe.empty(),Hc)}static max(){return new Fa(be.max(),fe.empty(),Hc)}}function dM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==fM)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):J.reject(n)}static resolve(e){return new J((n,r)=>{n(e)})}static reject(e){return new J((n,r)=>{r(e)})}static waitFor(e){return new J((n,r)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&n()},l=>r(l))}),s=!0,a===i&&n()})}static or(e){let n=J.resolve(!1);for(const r of e)n=n.next(i=>i?J.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new J((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let l=0;l<a;l++){const h=l;n(e[h]).next(u=>{s[h]=u,++o,o===a&&r(s)},u=>i(u))}})}static doWhile(e,n){return new J((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function pM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Rf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy=-1;function Cf(t){return t==null}function Dd(t){return t===0&&1/t==-1/0}function gM(t){return typeof t=="number"&&Number.isInteger(t)&&!Dd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="";function vM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=f1(e)),e=yM(t.get(n),e);return f1(e)}function yM(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case K2:n+="";break;default:n+=a}}return n}function f1(t){return t+K2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ja(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function W2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n){this.comparator=e,this.root=n||vn.EMPTY}insert(e,n){return new St(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uh(this.root,e,this.comparator,!0)}}class uh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vn{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??vn.RED,this.left=i??vn.EMPTY,this.right=a??vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new vn(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return vn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}vn.EMPTY=null,vn.RED=!0,vn.BLACK=!1;vn.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new vn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new p1(this.data.getIterator())}getIteratorFrom(e){return new p1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zt(this.comparator);return n.data=e,n}}class p1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.fields=e,e.sort(_n.comparator)}static empty(){return new or([])}unionWith(e){let n=new Zt(_n.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new or(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ol(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Z2("Invalid base64 string: "+a):a}}(e);return new En(n)}static fromUint8Array(e){const n=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new En(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}En.EMPTY_BYTE_STRING=new En("");const _M=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ha(t){if(Ge(!!t,39018),typeof t=="string"){let e=0;const n=_M.exec(t);if(Ge(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Lt(t.seconds),nanos:Lt(t.nanos)}}function Lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qa(t){return typeof t=="string"?En.fromBase64String(t):En.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="server_timestamp",eA="__type__",tA="__previous_value__",nA="__local_write_time__";function hy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[eA])===null||n===void 0?void 0:n.stringValue)===J2}function Nf(t){const e=t.mapValue.fields[tA];return hy(e)?Nf(e):e}function qc(t){const e=Ha(t.mapValue.fields[nA].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e,n,r,i,a,s,o,l,h,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=h,this.isUsingEmulator=u}}const ug="(default)";class Gc{constructor(e,n){this.projectId=e,this.database=n||ug}static empty(){return new Gc("","")}get isDefaultDatabase(){return this.database===ug}isEqual(e){return e instanceof Gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="__type__",EM="__max__",hh={mapValue:{}},iA="__vector__",Od="value";function Ga(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hy(t)?4:TM(t)?9007199254740991:wM(t)?10:11:pe(28295,{value:t})}function di(t,e){if(t===e)return!0;const n=Ga(t);if(n!==Ga(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qc(t).isEqual(qc(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=Ha(i.timestampValue),o=Ha(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return qa(i.bytesValue).isEqual(qa(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return Lt(i.geoPointValue.latitude)===Lt(a.geoPointValue.latitude)&&Lt(i.geoPointValue.longitude)===Lt(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Lt(i.integerValue)===Lt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=Lt(i.doubleValue),o=Lt(a.doubleValue);return s===o?Dd(s)===Dd(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return ol(t.arrayValue.values||[],e.arrayValue.values||[],di);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(m1(s)!==m1(o))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(o[l]===void 0||!di(s[l],o[l])))return!1;return!0}(t,e);default:return pe(52216,{left:t})}}function $c(t,e){return(t.values||[]).find(n=>di(n,e))!==void 0}function ll(t,e){if(t===e)return 0;const n=Ga(t),r=Ga(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(a,s){const o=Lt(a.integerValue||a.doubleValue),l=Lt(s.integerValue||s.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return g1(t.timestampValue,e.timestampValue);case 4:return g1(qc(t),qc(e));case 5:return cg(t.stringValue,e.stringValue);case 6:return function(a,s){const o=qa(a),l=qa(s);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),l=s.split("/");for(let h=0;h<o.length&&h<l.length;h++){const u=Se(o[h],l[h]);if(u!==0)return u}return Se(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,s){const o=Se(Lt(a.latitude),Lt(s.latitude));return o!==0?o:Se(Lt(a.longitude),Lt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return v1(t.arrayValue,e.arrayValue);case 10:return function(a,s){var o,l,h,u;const d=a.fields||{},f=s.fields||{},m=(o=d[Od])===null||o===void 0?void 0:o.arrayValue,b=(l=f[Od])===null||l===void 0?void 0:l.arrayValue,A=Se(((h=m==null?void 0:m.values)===null||h===void 0?void 0:h.length)||0,((u=b==null?void 0:b.values)===null||u===void 0?void 0:u.length)||0);return A!==0?A:v1(m,b)}(t.mapValue,e.mapValue);case 11:return function(a,s){if(a===hh.mapValue&&s===hh.mapValue)return 0;if(a===hh.mapValue)return 1;if(s===hh.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),h=s.fields||{},u=Object.keys(h);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=cg(l[d],u[d]);if(f!==0)return f;const m=ll(o[l[d]],h[u[d]]);if(m!==0)return m}return Se(l.length,u.length)}(t.mapValue,e.mapValue);default:throw pe(23264,{le:n})}}function g1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Ha(t),r=Ha(e),i=Se(n.seconds,r.seconds);return i!==0?i:Se(n.nanos,r.nanos)}function v1(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=ll(n[i],r[i]);if(a)return a}return Se(n.length,r.length)}function cl(t){return hg(t)}function hg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ha(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qa(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=hg(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${hg(n.fields[s])}`;return i+"}"}(t.mapValue):pe(61005,{value:t})}function Uh(t){switch(Ga(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nf(t);return e?16+Uh(e):16;case 5:return 2*t.stringValue.length;case 6:return qa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Uh(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ja(r.fields,(a,s)=>{i+=a.length+Uh(s)}),i}(t.mapValue);default:throw pe(13486,{value:t})}}function y1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dg(t){return!!t&&"integerValue"in t}function dy(t){return!!t&&"arrayValue"in t}function _1(t){return!!t&&"nullValue"in t}function b1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lh(t){return!!t&&"mapValue"in t}function wM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[rA])===null||n===void 0?void 0:n.stringValue)===iA}function Ec(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ja(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ec(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ec(t.arrayValue.values[n]);return e}return Object.assign({},t)}function TM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===EM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.value=e}static empty(){return new Qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ec(n)}setAll(e){let n=_n.emptyPath(),r={},i=[];e.forEach((s,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=Ec(s):i.push(o.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return di(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Lh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ja(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Qn(Ec(this.value))}}function aA(t){const e=[];return Ja(t.fields,(n,r)=>{const i=new _n([n]);if(Lh(r)){const a=aA(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new or(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Cn(e,0,be.min(),be.min(),be.min(),Qn.empty(),0)}static newFoundDocument(e,n,r,i){return new Cn(e,1,n,be.min(),r,i,0)}static newNoDocument(e,n){return new Cn(e,2,n,be.min(),be.min(),Qn.empty(),0)}static newUnknownDocument(e,n){return new Cn(e,3,n,be.min(),be.min(),Qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n){this.position=e,this.inclusive=n}}function E1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=fe.comparator(fe.fromName(s.referenceValue),n.key):r=ll(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function w1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!di(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n="asc"){this.field=e,this.dir=n}}function xM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{}class $t extends sA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new SM(e,n,r):n==="array-contains"?new NM(e,r):n==="in"?new IM(e,r):n==="not-in"?new DM(e,r):n==="array-contains-any"?new OM(e,r):new $t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new RM(e,r):new CM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ll(n,this.value)):n!==null&&Ga(this.value)===Ga(n)&&this.matchesComparison(ll(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fr extends sA{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Fr(e,n)}matches(e){return oA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function oA(t){return t.op==="and"}function lA(t){return AM(t)&&oA(t)}function AM(t){for(const e of t.filters)if(e instanceof Fr)return!1;return!0}function fg(t){if(t instanceof $t)return t.field.canonicalString()+t.op.toString()+cl(t.value);if(lA(t))return t.filters.map(e=>fg(e)).join(",");{const e=t.filters.map(n=>fg(n)).join(",");return`${t.op}(${e})`}}function cA(t,e){return t instanceof $t?function(r,i){return i instanceof $t&&r.op===i.op&&r.field.isEqual(i.field)&&di(r.value,i.value)}(t,e):t instanceof Fr?function(r,i){return i instanceof Fr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,s,o)=>a&&cA(s,i.filters[o]),!0):!1}(t,e):void pe(19439)}function uA(t){return t instanceof $t?function(n){return`${n.field.canonicalString()} ${n.op} ${cl(n.value)}`}(t):t instanceof Fr?function(n){return n.op.toString()+" {"+n.getFilters().map(uA).join(" ,")+"}"}(t):"Filter"}class SM extends $t{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class RM extends $t{constructor(e,n){super(e,"in",n),this.keys=hA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class CM extends $t{constructor(e,n){super(e,"not-in",n),this.keys=hA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}class NM extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dy(n)&&$c(n.arrayValue,this.value)}}class IM extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$c(this.value.arrayValue,n)}}class DM extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if($c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!$c(this.value.arrayValue,n)}}class OM extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$c(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Pe=null}}function T1(t,e=null,n=[],r=[],i=null,a=null,s=null){return new MM(t,e,n,r,i,a,s)}function fy(t){const e=Ee(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>fg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Cf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>cl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>cl(r)).join(",")),e.Pe=n}return e.Pe}function my(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!w1(t.startAt,e.startAt)&&w1(t.endAt,e.endAt)}function mg(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function kM(t,e,n,r,i,a,s,o){return new xu(t,e,n,r,i,a,s,o)}function If(t){return new xu(t)}function x1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function dA(t){return t.collectionGroup!==null}function wc(t){const e=Ee(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Zt(_n.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(o=o.add(h.field))})}),o})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new kd(a,r))}),n.has(_n.keyField().canonicalString())||e.Te.push(new kd(_n.keyField(),r))}return e.Te}function si(t){const e=Ee(t);return e.Ie||(e.Ie=jM(e,wc(t))),e.Ie}function jM(t,e){if(t.limitType==="F")return T1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new kd(i.field,a)});const n=t.endAt?new Md(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Md(t.startAt.position,t.startAt.inclusive):null;return T1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function pg(t,e){const n=t.filters.concat([e]);return new xu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gg(t,e,n){return new xu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Df(t,e){return my(si(t),si(e))&&t.limitType===e.limitType}function fA(t){return`${fy(si(t))}|lt:${t.limitType}`}function uo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>uA(i)).join(", ")}]`),Cf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>cl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>cl(i)).join(",")),`Target(${r})`}(si(t))}; limitType=${t.limitType})`}function Of(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):fe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of wc(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,o,l){const h=E1(s,o,l);return s.inclusive?h<=0:h<0}(r.startAt,wc(r),i)||r.endAt&&!function(s,o,l){const h=E1(s,o,l);return s.inclusive?h>=0:h>0}(r.endAt,wc(r),i))}(t,e)}function PM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mA(t){return(e,n)=>{let r=!1;for(const i of wc(t)){const a=UM(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function UM(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(a,s,o){const l=s.data.field(a),h=o.data.field(a);return l!==null&&h!==null?ll(l,h):pe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ja(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return W2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=new St(fe.comparator);function Gi(){return LM}const pA=new St(fe.comparator);function tc(...t){let e=pA;for(const n of t)e=e.insert(n.key,n);return e}function gA(t){let e=pA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ps(){return Tc()}function vA(){return Tc()}function Tc(){return new qs(t=>t.toString(),(t,e)=>t.isEqual(e))}const VM=new St(fe.comparator),zM=new Zt(fe.comparator);function ke(...t){let e=zM;for(const n of t)e=e.add(n);return e}const BM=new Zt(Se);function FM(){return BM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dd(e)?"-0":e}}function yA(t){return{integerValue:""+t}}function HM(t,e){return gM(e)?yA(e):py(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this._=void 0}}function qM(t,e,n){return t instanceof jd?function(i,a){const s={fields:{[eA]:{stringValue:J2},[nA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&hy(a)&&(a=Nf(a)),a&&(s.fields[tA]=a),{mapValue:s}}(n,e):t instanceof Yc?bA(t,e):t instanceof Xc?EA(t,e):function(i,a){const s=_A(i,a),o=A1(s)+A1(i.Ee);return dg(s)&&dg(i.Ee)?yA(o):py(i.serializer,o)}(t,e)}function GM(t,e,n){return t instanceof Yc?bA(t,e):t instanceof Xc?EA(t,e):n}function _A(t,e){return t instanceof Pd?function(r){return dg(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class jd extends Mf{}class Yc extends Mf{constructor(e){super(),this.elements=e}}function bA(t,e){const n=wA(e);for(const r of t.elements)n.some(i=>di(i,r))||n.push(r);return{arrayValue:{values:n}}}class Xc extends Mf{constructor(e){super(),this.elements=e}}function EA(t,e){let n=wA(e);for(const r of t.elements)n=n.filter(i=>!di(i,r));return{arrayValue:{values:n}}}class Pd extends Mf{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function A1(t){return Lt(t.integerValue||t.doubleValue)}function wA(t){return dy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function $M(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Yc&&i instanceof Yc||r instanceof Xc&&i instanceof Xc?ol(r.elements,i.elements,di):r instanceof Pd&&i instanceof Pd?di(r.Ee,i.Ee):r instanceof jd&&i instanceof jd}(t.transform,e.transform)}class YM{constructor(e,n){this.version=e,this.transformResults=n}}class fr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kf{}function TA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jf(t.key,fr.none()):new Au(t.key,t.data,fr.none());{const n=t.data,r=Qn.empty();let i=new Zt(_n.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new es(t.key,r,new or(i.toArray()),fr.none())}}function XM(t,e,n){t instanceof Au?function(i,a,s){const o=i.value.clone(),l=R1(i.fieldTransforms,a,s.transformResults);o.setAll(l),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof es?function(i,a,s){if(!Vh(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=R1(i.fieldTransforms,a,s.transformResults),l=a.data;l.setAll(xA(i)),l.setAll(o),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function xc(t,e,n,r){return t instanceof Au?function(a,s,o,l){if(!Vh(a.precondition,s))return o;const h=a.value.clone(),u=C1(a.fieldTransforms,l,s);return h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof es?function(a,s,o,l){if(!Vh(a.precondition,s))return o;const h=C1(a.fieldTransforms,l,s),u=s.data;return u.setAll(xA(a)),u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(a,s,o){return Vh(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function QM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=_A(r.transform,i||null);a!=null&&(n===null&&(n=Qn.empty()),n.set(r.field,a))}return n||null}function S1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ol(r,i,(a,s)=>$M(a,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Au extends kf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class es extends kf{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function xA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function R1(t,e,n){const r=new Map;Ge(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,GM(s,o,n[i]))}return r}function C1(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,qM(a,s,e))}return r}class jf extends kf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KM extends kf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&XM(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=vA();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const l=TA(s,o);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&ol(this.mutations,e.mutations,(n,r)=>S1(n,r))&&ol(this.baseMutations,e.baseMutations,(n,r)=>S1(n,r))}}class gy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ge(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return VM}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new gy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,Le;function e6(t){switch(t){case Z.OK:return pe(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return pe(15467,{code:t})}}function AA(t){if(t===void 0)return qi("GRPC error has no .code"),Z.UNKNOWN;switch(t){case Ht.OK:return Z.OK;case Ht.CANCELLED:return Z.CANCELLED;case Ht.UNKNOWN:return Z.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return Z.INTERNAL;case Ht.UNAVAILABLE:return Z.UNAVAILABLE;case Ht.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Ht.NOT_FOUND:return Z.NOT_FOUND;case Ht.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Ht.ABORTED:return Z.ABORTED;case Ht.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Ht.DATA_LOSS:return Z.DATA_LOSS;default:return pe(39323,{code:t})}}(Le=Ht||(Ht={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6=new ja([4294967295,4294967295],0);function N1(t){const e=Y2().encode(t),n=new V2;return n.update(e),new Uint8Array(n.digest())}function I1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ja([n,r],0),new ja([i,a],0)]}class vy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new nc(`Invalid padding: ${n}`);if(r<0)throw new nc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new nc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ja.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(ja.fromNumber(r)));return i.compare(t6)===1&&(i=new ja([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=N1(e),[r,i]=I1(n);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);if(!this.ye(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new vy(a,i,n);return r.forEach(o=>s.insert(o)),s}insert(e){if(this.fe===0)return;const n=N1(e),[r,i]=I1(n);for(let a=0;a<this.hashCount;a++){const s=this.pe(r,i,a);this.we(s)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Su.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Pf(be.min(),i,new St(Se),Gi(),ke())}}class Su{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Su(r,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class SA{constructor(e,n){this.targetId=e,this.De=n}}class RA{constructor(e,n,r=En.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class D1{constructor(){this.ve=0,this.Ce=O1(),this.Fe=En.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ke(),n=ke(),r=ke();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:pe(38017,{changeType:a})}}),new Su(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=O1()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ge(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class n6{constructor(e){this.We=e,this.Ge=new Map,this.ze=Gi(),this.je=dh(),this.Je=dh(),this.He=new St(Se)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const a=i.target;if(mg(a))if(r===0){const s=new fe(a.path);this.Xe(n,s,Cn.newNoDocument(s,be.min()))}else Ge(r===1,20013,{expectedCount:r});else{const s=this.ot(n);if(s!==r){const o=this._t(e),l=o?this.ut(o,e,s):1;if(l!==0){this.rt(n);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=qa(r).toUint8Array()}catch(l){if(l instanceof Z2)return Ba("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new vy(s,i,a)}catch(l){return Ba(l instanceof nc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.fe===0?null:o}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const s=this.We.lt(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.Xe(n,a,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((a,s)=>{const o=this.st(s);if(o){if(a.current&&mg(o.target)){const l=new fe(o.target.path);this.Tt(l).has(s)||this.It(s,l)||this.Xe(s,l,Cn.newNoDocument(l,e))}a.Ne&&(n.set(s,a.Le()),a.ke())}});let r=ke();this.Je.forEach((a,s)=>{let o=!0;s.forEachWhile(l=>{const h=this.st(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.ze.forEach((a,s)=>s.setReadTime(e));const i=new Pf(e,n,this.He,this.ze,r);return this.ze=Gi(),this.je=dh(),this.Je=dh(),this.He=new St(Se),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new D1,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Zt(Se),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Zt(Se),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new D1),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function dh(){return new St(fe.comparator)}function O1(){return new St(fe.comparator)}const r6={asc:"ASCENDING",desc:"DESCENDING"},i6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a6={and:"AND",or:"OR"};class s6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vg(t,e){return t.useProto3Json||Cf(e)?e:{value:e}}function Ud(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function o6(t,e){return Ud(t,e.toTimestamp())}function oi(t){return Ge(!!t,49232),be.fromTimestamp(function(n){const r=Ha(n);return new mt(r.seconds,r.nanos)}(t))}function yy(t,e){return yg(t,e).canonicalString()}function yg(t,e){const n=function(i){return new ct(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function NA(t){const e=ct.fromString(t);return Ge(kA(e),10190,{key:e.toString()}),e}function _g(t,e){return yy(t.databaseId,e.path)}function Fm(t,e){const n=NA(e);if(n.get(1)!==t.databaseId.projectId)throw new ae(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ae(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(DA(n))}function IA(t,e){return yy(t.databaseId,e)}function l6(t){const e=NA(t);return e.length===4?ct.emptyPath():DA(e)}function bg(t){return new ct(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DA(t){return Ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function M1(t,e,n){return{name:_g(t,e),fields:n.value.mapValue.fields}}function c6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:pe(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(h,u){return h.useProto3Json?(Ge(u===void 0||typeof u=="string",58123),En.fromBase64String(u||"")):(Ge(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),En.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(h){const u=h.code===void 0?Z.UNKNOWN:AA(h.code);return new ae(u,h.message||"")}(s);n=new RA(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Fm(t,r.document.name),a=oi(r.document.updateTime),s=r.document.createTime?oi(r.document.createTime):be.min(),o=new Qn({mapValue:{fields:r.document.fields}}),l=Cn.newFoundDocument(i,a,s,o),h=r.targetIds||[],u=r.removedTargetIds||[];n=new zh(h,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Fm(t,r.document),a=r.readTime?oi(r.readTime):be.min(),s=Cn.newNoDocument(i,a),o=r.removedTargetIds||[];n=new zh([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Fm(t,r.document),a=r.removedTargetIds||[];n=new zh([],a,i,null)}else{if(!("filter"in e))return pe(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new JM(i,a),o=r.targetId;n=new SA(o,s)}}return n}function u6(t,e){let n;if(e instanceof Au)n={update:M1(t,e.key,e.value)};else if(e instanceof jf)n={delete:_g(t,e.key)};else if(e instanceof es)n={update:M1(t,e.key,e.data),updateMask:_6(e.fieldMask)};else{if(!(e instanceof KM))return pe(16599,{Rt:e.type});n={verify:_g(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,s){const o=s.transform;if(o instanceof jd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Yc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Xc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Pd)return{fieldPath:s.field.canonicalString(),increment:o.Ee};throw pe(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:o6(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:pe(27497)}(t,e.precondition)),n}function h6(t,e){return t&&t.length>0?(Ge(e!==void 0,14353),t.map(n=>function(i,a){let s=i.updateTime?oi(i.updateTime):oi(a);return s.isEqual(be.min())&&(s=oi(a)),new YM(s,i.transformResults||[])}(n,e))):[]}function d6(t,e){return{documents:[IA(t,e.path)]}}function f6(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=IA(t,i);const a=function(h){if(h.length!==0)return MA(Fr.create(h,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const s=function(h){if(h.length!==0)return h.map(u=>function(f){return{field:ho(f.field),direction:g6(f.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=vg(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{Vt:n,parent:i}}function m6(t){let e=l6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ge(r===1,65062);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let a=[];n.where&&(a=function(d){const f=OA(d);return f instanceof Fr&&lA(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(f=>function(b){return new kd(fo(b.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(d){let f;return f=typeof d=="object"?d.value:d,Cf(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new Md(m,f)}(n.startAt));let h=null;return n.endAt&&(h=function(d){const f=!d.before,m=d.values||[];return new Md(m,f)}(n.endAt)),kM(e,i,s,a,o,"F",l,h)}function p6(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fo(n.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=fo(n.unaryFilter.field);return $t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=fo(n.unaryFilter.field);return $t.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=fo(n.unaryFilter.field);return $t.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}}(t):t.fieldFilter!==void 0?function(n){return $t.create(fo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Fr.create(n.compositeFilter.filters.map(r=>OA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pe(1026)}}(n.compositeFilter.op))}(t):pe(30097,{filter:t})}function g6(t){return r6[t]}function v6(t){return i6[t]}function y6(t){return a6[t]}function ho(t){return{fieldPath:t.canonicalString()}}function fo(t){return _n.fromServerFormat(t.fieldPath)}function MA(t){return t instanceof $t?function(n){if(n.op==="=="){if(b1(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NAN"}};if(_1(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(b1(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NAN"}};if(_1(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(n.field),op:v6(n.op),value:n.value}}}(t):t instanceof Fr?function(n){const r=n.getFilters().map(i=>MA(i));return r.length===1?r[0]:{compositeFilter:{op:y6(n.op),filters:r}}}(t):pe(54877,{filter:t})}function _6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n,r,i,a=be.min(),s=be.min(),o=En.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Ea(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.gt=e}}function E6(t){const e=m6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(){this.Dn=new T6}addToCollectionParentIndex(e,n){return this.Dn.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(Fa.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(Fa.min())}updateCollectionGroup(e,n,r){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class T6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Zt(ct.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jA=41943040;class $n{static withCacheSize(e){return new $n(e,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n.DEFAULT_COLLECTION_PERCENTILE=10,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$n.DEFAULT=new $n(jA,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$n.DISABLED=new $n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ul(0)}static ur(){return new ul(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="LruGarbageCollector",x6=1048576;function P1([t,e],[n,r]){const i=Se(t,n);return i===0?Se(e,r):i}class A6{constructor(e){this.Tr=e,this.buffer=new Zt(P1),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();P1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class S6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){se(j1,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){wl(n)?se(j1,"Ignoring IndexedDB error during garbage collection: ",n):await El(n)}await this.Rr(3e5)})}}class R6{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return J.resolve(Rf.ue);const r=new A6(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(k1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),k1):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,a,s,o,l,h;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,o=Date.now(),this.removeTargets(e,r,n))).next(d=>(a=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(h=Date.now(),co()<=Me.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(h-l)+`ms
Total Duration: ${h-u}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:d})))}}function C6(t,e){return new R6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(){this.changes=new qs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?J.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&xc(r.mutation,i,or.empty(),mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ke()){const i=ps();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let s=tc();return a.forEach((o,l)=>{s=s.insert(o,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=ps();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ke()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{n.set(s,o)})})}computeViews(e,n,r,i){let a=Gi();const s=Tc(),o=function(){return Tc()}();return n.forEach((l,h)=>{const u=r.get(h.key);i.has(h.key)&&(u===void 0||u.mutation instanceof es)?a=a.insert(h.key,h):u!==void 0?(s.set(h.key,u.mutation.getFieldMask()),xc(u.mutation,h,u.mutation.getFieldMask(),mt.now())):s.set(h.key,or.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((h,u)=>s.set(h,u)),n.forEach((h,u)=>{var d;return o.set(h,new I6(u,(d=s.get(h))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,n){const r=Tc();let i=new St((s,o)=>s-o),a=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const o of s)o.keys().forEach(l=>{const h=n.get(l);if(h===null)return;let u=r.get(l)||or.empty();u=o.applyToLocalView(h,u),r.set(l,u);const d=(i.get(o.batchId)||ke()).add(l);i=i.insert(o.batchId,d)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),h=l.key,u=l.value,d=vA();u.forEach(f=>{if(!a.has(f)){const m=TA(n.get(f),r.get(f));m!==null&&d.set(f,m),a=a.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,h,d))}return J.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return fe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):J.resolve(ps());let o=Hc,l=a;return s.next(h=>J.forEach(h,(u,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),a.get(u)?J.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,h,a)).next(()=>this.computeViews(e,l,h,ke())).next(u=>({batchId:o,changes:gA(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let i=tc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=tc();return this.indexManager.getCollectionParents(e,a).next(o=>J.forEach(o,l=>{const h=function(d,f){return new xu(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(u=>{u.forEach((d,f)=>{s=s.insert(d,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(s=>{a.forEach((l,h)=>{const u=h.getKey();s.get(u)===null&&(s=s.insert(u,Cn.newInvalidDocument(u)))});let o=tc();return s.forEach((l,h)=>{const u=a.get(l);u!==void 0&&xc(u.mutation,h,or.empty(),mt.now()),Of(n,h)&&(o=o.insert(l,h))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return J.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:oi(i.createTime)}}(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:E6(i.bundledQuery),readTime:oi(i.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(){this.overlays=new St(fe.comparator),this.kr=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ps();return J.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.wt(e,n,a)}),J.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),J.resolve()}getOverlaysForCollection(e,n,r){const i=ps(),a=n.length+1,s=new fe(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const l=o.getNext().value,h=l.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&l.largestBatchId>r&&i.set(l.getKey(),l)}return J.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new St((h,u)=>h-u);const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let u=a.get(h.largestBatchId);u===null&&(u=ps(),a=a.insert(h.largestBatchId,u)),u.set(h.getKey(),h)}}const o=ps(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,u)=>o.set(h,u)),!(o.size()>=i)););return J.resolve(o)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new ZM(n,r));let a=this.kr.get(n);a===void 0&&(a=ke(),this.kr.set(n,a)),this.kr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(){this.sessionToken=En.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(){this.qr=new Zt(an.Qr),this.$r=new Zt(an.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new an(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new an(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new fe(new ct([])),r=new an(n,e),i=new an(n,e+1),a=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),a.push(s.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new fe(new ct([])),r=new an(n,e),i=new an(n,e+1);let a=ke();return this.$r.forEachInRange([r,i],s=>{a=a.add(s.key)}),a}containsKey(e){const n=new an(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class an{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return fe.comparator(e.key,n.key)||Se(e.Hr,n.Hr)}static Ur(e,n){return Se(e.Hr,n.Hr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Zt(an.Qr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new WM(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.Yr=this.Yr.add(new an(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return J.resolve(s)}lookupMutationBatch(e,n){return J.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return J.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?uy:this.er-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new an(n,0),i=new an(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],s=>{const o=this.Zr(s.Hr);a.push(o)}),J.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Zt(Se);return n.forEach(i=>{const a=new an(i,0),s=new an(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,s],o=>{r=r.add(o.Hr)})}),J.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;fe.isDocumentKey(a)||(a=a.child(""));const s=new an(new fe(a),0);let o=new Zt(Se);return this.Yr.forEachWhile(l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(o=o.add(l.Hr)),!0)},s),J.resolve(this.ei(o))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ge(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return J.forEach(n.mutations,i=>{const a=new an(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new an(n,0),i=this.Yr.firstAfterOrEqual(r);return J.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e){this.ni=e,this.docs=function(){return new St(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return J.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(n))}getEntries(e,n){let r=Gi();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Cn.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=Gi();const s=n.path,o=new fe(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:h,value:{document:u}}=l.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||dM(hM(u),r)<=0||(i.has(u.key)||Of(n,u))&&(a=a.insert(u.key,u.mutableCopy()))}return J.resolve(a)}getAllFromCollectionGroup(e,n,r,i){pe(9500)}ri(e,n){return J.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new U6(this)}getSize(e){return J.resolve(this.size)}}class U6 extends N6{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),J.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e){this.persistence=e,this.ii=new qs(n=>fy(n),my),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.si=0,this.oi=new _y,this.targetCount=0,this._i=ul.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),J.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new ul(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.hr(n),J.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ii.forEach((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.ii.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),J.waitFor(a).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return J.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),J.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),J.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return J.resolve(r)}containsKey(e,n){return J.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n){this.ai={},this.overlays={},this.ui=new Rf(0),this.ci=!1,this.ci=!0,this.li=new k6,this.referenceDelegate=e(this),this.hi=new L6(this),this.indexManager=new w6,this.remoteDocumentCache=function(i){return new P6(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new b6(n),this.Ti=new O6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new M6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new j6(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const i=new V6(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,n){return J.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class V6 extends mM{constructor(e){super(),this.currentSequenceNumber=e}}class by{constructor(e){this.persistence=e,this.Ai=new _y,this.Ri=null}static Vi(e){return new by(e)}get mi(){if(this.Ri)return this.Ri;throw pe(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),J.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),J.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.mi,r=>{const i=fe.fromPath(r);return this.fi(e,i).next(a=>{a||n.removeEntry(i,be.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return J.or([()=>J.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ld{constructor(e,n){this.persistence=e,this.gi=new qs(r=>vM(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=C6(this,n)}static Vi(e,n){return new Ld(e,n)}Ii(){}di(e){return J.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return J.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?J.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(o=>{o||(r++,a.removeEntry(s,be.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),J.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),J.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Uh(e.data.value)),n}Sr(e,n,r){return J.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return J.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ke(),i=ke();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Ey(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return DD()?8:pM(Dn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ps(e,n).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.ys(e,n,i,r).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new z6;return this.ws(e,n,s).next(o=>{if(a.result=o,this.Rs)return this.Ss(e,n,s,o.size)})}).next(()=>a.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(co()<=Me.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),J.resolve()):(co()<=Me.DEBUG&&se("QueryEngine","Query:",uo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(co()<=Me.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(n))):J.resolve())}ps(e,n){if(x1(n))return J.resolve(null);let r=si(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=gg(n,null,"F"),r=si(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const s=ke(...a);return this.gs.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const h=this.bs(n,o);return this.Ds(n,h,s,l.readTime)?this.ps(e,gg(n,null,"F")):this.vs(e,h,n,l)}))})))}ys(e,n,r,i){return x1(n)||i.isEqual(be.min())?J.resolve(null):this.gs.getDocuments(e,r).next(a=>{const s=this.bs(n,a);return this.Ds(n,s,r,i)?J.resolve(null):(co()<=Me.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),uo(n)),this.vs(e,s,n,uM(i,Hc)).next(o=>o))})}bs(e,n){let r=new Zt(mA(e));return n.forEach((i,a)=>{Of(e,a)&&(r=r.add(a))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,n,r){return co()<=Me.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",uo(n)),this.gs.getDocumentsMatchingQuery(e,n,Fa.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="LocalStore",F6=3e8;class H6{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new St(Se),this.Ms=new qs(a=>fy(a),my),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new D6(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function q6(t,e,n,r){return new H6(t,e,n,r)}async function UA(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const s=[],o=[];let l=ke();for(const h of i){s.push(h.batchId);for(const u of h.mutations)l=l.add(u.key)}for(const h of a){o.push(h.batchId);for(const u of h.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(h=>({Bs:h,removedBatchIds:s,addedBatchIds:o}))})})}function G6(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return function(o,l,h,u){const d=h.batch,f=d.keys();let m=J.resolve();return f.forEach(b=>{m=m.next(()=>u.getEntry(l,b)).next(A=>{const D=h.docVersions.get(b);Ge(D!==null,48541),A.version.compareTo(D)<0&&(d.applyToRemoteDocument(A,h),A.isValidDocument()&&(A.setReadTime(h.commitVersion),u.addEntry(A)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=ke();for(let h=0;h<o.mutationResults.length;++h)o.mutationResults[h].transformResults.length>0&&(l=l.add(o.batch.mutations[h].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function LA(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function $6(t,e){const n=Ee(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const o=[];e.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;o.push(n.hi.removeMatchingKeys(a,u.removedDocuments,d).next(()=>n.hi.addMatchingKeys(a,u.addedDocuments,d)));let m=f.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(En.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(d,m),function(A,D,E){return A.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=F6?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,m,u)&&o.push(n.hi.updateTargetData(a,m))});let l=Gi(),h=ke();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,u))}),o.push(Y6(a,s,e.documentUpdates).next(u=>{l=u.Ls,h=u.ks})),!r.isEqual(be.min())){const u=n.hi.getLastRemoteSnapshotVersion(a).next(d=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(u)}return J.waitFor(o).next(()=>s.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,l,h)).next(()=>l)}).then(a=>(n.Fs=i,a))}function Y6(t,e,n){let r=ke(),i=ke();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let s=Gi();return n.forEach((o,l)=>{const h=a.get(o);l.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(be.min())?(e.removeEntry(o,l.readTime),s=s.insert(o,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),s=s.insert(o,l)):se(wy,"Ignoring outdated watch update for ",o,". Current version:",h.version," Watch version:",l.version)}),{Ls:s,ks:i}})}function X6(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=uy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Q6(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(a=>a?(i=a,J.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Ea(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Eg(t,e,n){const r=Ee(t),i=r.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!wl(s))throw s;se(wy,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function U1(t,e,n){const r=Ee(t);let i=be.min(),a=ke();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,h,u){const d=Ee(l),f=d.Ms.get(u);return f!==void 0?J.resolve(d.Fs.get(f)):d.hi.getTargetData(h,u)}(r,s,si(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,o.targetId).next(l=>{a=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:be.min(),n?a:ke())).next(o=>(K6(r,PM(e),o),{documents:o,qs:a})))}function K6(t,e,n){let r=t.xs.get(e)||be.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.xs.set(e,r)}class L1{constructor(){this.activeTargetIds=FM()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class W6{constructor(){this.Fo=new L1,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new L1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="ConnectivityMonitor";class z1{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){se(V1,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){se(V1,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fh=null;function wg(){return fh===null?fh=function(){return 268435456+Math.round(2147483648*Math.random())}():fh++,"0x"+fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="RestConnection",J6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ek{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===ug?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const s=wg(),o=this.Go(e,n.toUriEncodedString());se(Hm,`Sending RPC '${e}' ${s}:`,o,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,a);const{host:h}=new URL(o),u=Yi(h);return this.jo(e,o,l,r,u).then(d=>(se(Hm,`Received RPC '${e}' ${s}: `,d),d),d=>{throw Ba(Hm,`RPC '${e}' ${s} failed with error: `,d,"url: ",o,"request:",r),d})}Jo(e,n,r,i,a,s){return this.Wo(e,n,r,i,a)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,n){const r=J6[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class nk extends ek{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,a){const s=wg();return new Promise((o,l)=>{const h=new z2;h.setWithCredentials(!0),h.listenOnce(B2.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Ph.NO_ERROR:const d=h.getResponseJson();se(Sn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Ph.TIMEOUT:se(Sn,`RPC '${e}' ${s} timed out`),l(new ae(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Ph.HTTP_ERROR:const f=h.getStatus();if(se(Sn,`RPC '${e}' ${s} failed with status:`,f,"response text:",h.getResponseText()),f>0){let m=h.getResponseJson();Array.isArray(m)&&(m=m[0]);const b=m==null?void 0:m.error;if(b&&b.status&&b.message){const A=function(E){const x=E.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(x)>=0?x:Z.UNKNOWN}(b.status);l(new ae(A,b.message))}else l(new ae(Z.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new ae(Z.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{c_:e,streamId:s,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{se(Sn,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);se(Sn,`RPC '${e}' ${s} sending request:`,i),h.send(n,"POST",u,r,15)})}P_(e,n,r){const i=wg(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=q2(),o=H2(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=a.join("");se(Sn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=s.createWebChannel(u,l);this.T_(d);let f=!1,m=!1;const b=new tk({Ho:D=>{m?se(Sn,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(f||(se(Sn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),se(Sn,`RPC '${e}' stream ${i} sending:`,D),d.send(D))},Yo:()=>d.close()}),A=(D,E,x)=>{D.listen(E,N=>{try{x(N)}catch(O){setTimeout(()=>{throw O},0)}})};return A(d,ec.EventType.OPEN,()=>{m||(se(Sn,`RPC '${e}' stream ${i} transport opened.`),b.s_())}),A(d,ec.EventType.CLOSE,()=>{m||(m=!0,se(Sn,`RPC '${e}' stream ${i} transport closed`),b.__(),this.I_(d))}),A(d,ec.EventType.ERROR,D=>{m||(m=!0,Ba(Sn,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),b.__(new ae(Z.UNAVAILABLE,"The operation could not be completed")))}),A(d,ec.EventType.MESSAGE,D=>{var E;if(!m){const x=D.data[0];Ge(!!x,16349);const N=x,O=(N==null?void 0:N.error)||((E=N[0])===null||E===void 0?void 0:E.error);if(O){se(Sn,`RPC '${e}' stream ${i} received error:`,O);const P=O.status;let R=function(y){const T=Ht[y];if(T!==void 0)return AA(T)}(P),_=O.message;R===void 0&&(R=Z.INTERNAL,_="Unknown error status: "+P+" with message "+O.message),m=!0,b.__(new ae(R,_)),d.close()}else se(Sn,`RPC '${e}' stream ${i} received:`,x),b.a_(x)}}),A(o,F2.STAT_EVENT,D=>{D.stat===lg.PROXY?se(Sn,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===lg.NOPROXY&&se(Sn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.o_()},0),b}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function qm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t){return new s6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="PersistentStream";class zA{constructor(e,n,r,i,a,s,o,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new VA(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(qi(n.toString()),qi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new ae(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return se(B1,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(se(B1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rk extends zA{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=c6(this.serializer,e),r=function(a){if(!("targetChange"in a))return be.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?be.min():s.readTime?oi(s.readTime):be.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=bg(this.serializer),n.addTarget=function(a,s){let o;const l=s.target;if(o=mg(l)?{documents:d6(a,l)}:{query:f6(a,l).Vt},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=CA(a,s.resumeToken);const h=vg(a,s.expectedCount);h!==null&&(o.expectedCount=h)}else if(s.snapshotVersion.compareTo(be.min())>0){o.readTime=Ud(a,s.snapshotVersion.toTimestamp());const h=vg(a,s.expectedCount);h!==null&&(o.expectedCount=h)}return o}(this.serializer,e);const r=p6(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=bg(this.serializer),n.removeTarget=e,this.k_(n)}}class ik extends zA{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=h6(e.writeResults,e.commitTime),r=oi(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=bg(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>u6(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{}class sk extends ak{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ae(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Wo(e,yg(n,r),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ae(Z.UNKNOWN,a.toString())})}Jo(e,n,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Jo(e,yg(n,r),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ae(Z.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class ok{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(qi(n),this._a=!1):se("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="RemoteStore";class lk{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Gs(this)&&(se(js,"Restarting streams for network reachability change."),await async function(l){const h=Ee(l);h.Ia.add(4),await Ru(h),h.Aa.set("Unknown"),h.Ia.delete(4),await Lf(h)}(this))})}),this.Aa=new ok(r,i)}}async function Lf(t){if(Gs(t))for(const e of t.da)await e(!0)}async function Ru(t){for(const e of t.da)await e(!1)}function BA(t,e){const n=Ee(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Sy(n)?Ay(n):Tl(n).x_()&&xy(n,e))}function Ty(t,e){const n=Ee(t),r=Tl(n);n.Ta.delete(e),r.x_()&&FA(n,e),n.Ta.size===0&&(r.x_()?r.B_():Gs(n)&&n.Aa.set("Unknown"))}function xy(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Tl(t).H_(e)}function FA(t,e){t.Ra.$e(e),Tl(t).Y_(e)}function Ay(t){t.Ra=new n6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Tl(t).start(),t.Aa.aa()}function Sy(t){return Gs(t)&&!Tl(t).M_()&&t.Ta.size>0}function Gs(t){return Ee(t).Ia.size===0}function HA(t){t.Ra=void 0}async function ck(t){t.Aa.set("Online")}async function uk(t){t.Ta.forEach((e,n)=>{xy(t,e)})}async function hk(t,e){HA(t),Sy(t)?(t.Aa.la(e),Ay(t)):t.Aa.set("Unknown")}async function dk(t,e,n){if(t.Aa.set("Online"),e instanceof RA&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ta.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ta.delete(o),i.Ra.removeTarget(o))}(t,e)}catch(r){se(js,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vd(t,r)}else if(e instanceof zh?t.Ra.Ye(e):e instanceof SA?t.Ra.it(e):t.Ra.et(e),!n.isEqual(be.min()))try{const r=await LA(t.localStore);n.compareTo(r)>=0&&await function(a,s){const o=a.Ra.Pt(s);return o.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const u=a.Ta.get(h);u&&a.Ta.set(h,u.withResumeToken(l.resumeToken,s))}}),o.targetMismatches.forEach((l,h)=>{const u=a.Ta.get(l);if(!u)return;a.Ta.set(l,u.withResumeToken(En.EMPTY_BYTE_STRING,u.snapshotVersion)),FA(a,l);const d=new Ea(u.target,l,h,u.sequenceNumber);xy(a,d)}),a.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){se(js,"Failed to raise snapshot:",r),await Vd(t,r)}}async function Vd(t,e,n){if(!wl(e))throw e;t.Ia.add(1),await Ru(t),t.Aa.set("Offline"),n||(n=()=>LA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se(js,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Lf(t)})}function qA(t,e){return e().catch(n=>Vd(t,n,e))}async function Vf(t){const e=Ee(t),n=$a(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:uy;for(;fk(e);)try{const i=await X6(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,mk(e,i)}catch(i){await Vd(e,i)}GA(e)&&$A(e)}function fk(t){return Gs(t)&&t.Pa.length<10}function mk(t,e){t.Pa.push(e);const n=$a(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function GA(t){return Gs(t)&&!$a(t).M_()&&t.Pa.length>0}function $A(t){$a(t).start()}async function pk(t){$a(t).na()}async function gk(t){const e=$a(t);for(const n of t.Pa)e.X_(n.mutations)}async function vk(t,e,n){const r=t.Pa.shift(),i=gy.from(r,e,n);await qA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Vf(t)}async function yk(t,e){e&&$a(t).Z_&&await async function(r,i){if(function(s){return e6(s)&&s!==Z.ABORTED}(i.code)){const a=r.Pa.shift();$a(r).N_(),await qA(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Vf(r)}}(t,e),GA(t)&&$A(t)}async function F1(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),se(js,"RemoteStore received new credentials");const r=Gs(n);n.Ia.add(3),await Ru(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Lf(n)}async function _k(t,e){const n=Ee(t);e?(n.Ia.delete(2),await Lf(n)):e||(n.Ia.add(2),await Ru(n),n.Aa.set("Unknown"))}function Tl(t){return t.Va||(t.Va=function(n,r,i){const a=Ee(n);return a.ia(),new rk(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:ck.bind(null,t),e_:uk.bind(null,t),n_:hk.bind(null,t),J_:dk.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Sy(t)?Ay(t):t.Aa.set("Unknown")):(await t.Va.stop(),HA(t))})),t.Va}function $a(t){return t.ma||(t.ma=function(n,r,i){const a=Ee(n);return a.ia(),new ik(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:pk.bind(null,t),n_:yk.bind(null,t),ea:gk.bind(null,t),ta:vk.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Vf(t)):(await t.ma.stop(),t.Pa.length>0&&(se(js,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new Ry(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cy(t,e){if(qi("AsyncQueue",`${e}: ${t}`),wl(t))return new ae(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{static emptySet(e){return new Fo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=tc(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Fo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.fa=new St(fe.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):pe(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class hl{constructor(e,n,r,i,a,s,o,l,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new hl(e,n,Fo.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Ek{constructor(){this.queries=q1(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=Ee(n),a=i.queries;i.queries=q1(),a.forEach((s,o)=>{for(const l of o.wa)l.onError(r)})})(this,new ae(Z.ABORTED,"Firestore shutting down"))}}function q1(){return new qs(t=>fA(t),Df)}async function Ny(t,e){const n=Ee(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new bk,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await n.onListen(i,!0);break;case 1:a.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=Cy(s,`Initialization of query '${uo(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&Dy(n)}async function Iy(t,e){const n=Ee(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.wa.indexOf(e);s>=0&&(a.wa.splice(s,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wk(t,e){const n=Ee(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.wa)o.Ca(i)&&(r=!0);s.ya=i}}r&&Dy(n)}function Tk(t,e,n){const r=Ee(t),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(n);r.queries.delete(e)}function Dy(t){t.Da.forEach(e=>{e.next()})}var Tg,G1;(G1=Tg||(Tg={})).Fa="default",G1.Cache="cache";class Oy{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new hl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Tg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.key=e}}class XA{constructor(e){this.key=e}}class xk{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ke(),this.mutatedKeys=ke(),this.Xa=mA(e),this.eu=new Fo(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new H1,i=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const f=i.get(u),m=Of(this.query,d)?d:null,b=!!f&&this.mutatedKeys.has(f.key),A=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let D=!1;f&&m?f.data.isEqual(m.data)?b!==A&&(r.track({type:3,doc:m}),D=!0):this.iu(f,m)||(r.track({type:2,doc:m}),D=!0,(l&&this.Xa(m,l)>0||h&&this.Xa(m,h)<0)&&(o=!0)):!f&&m?(r.track({type:0,doc:m}),D=!0):f&&!m&&(r.track({type:1,doc:f}),D=!0,(l||h)&&(o=!0)),D&&(m?(s=s.add(m),a=A?a.add(u):a.delete(u)):(s=s.delete(u),a=a.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),a=a.delete(u.key),r.track({type:1,doc:u})}return{eu:s,ru:r,Ds:o,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((u,d)=>function(m,b){const A=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{At:D})}};return A(m)-A(b)}(u.type,d.type)||this.Xa(u.doc,d.doc)),this.su(r),i=i!=null&&i;const o=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,h=l!==this.Ya;return this.Ya=l,s.length!==0||h?{snapshot:new hl(this.query,e.eu,a,s,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new H1,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ke(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new XA(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new YA(r))}),n}uu(e){this.Ha=e.qs,this.Za=ke();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return hl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const My="SyncEngine";class Ak{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Sk{constructor(e){this.key=e,this.lu=!1}}class Rk{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new qs(o=>fA(o),Df),this.Tu=new Map,this.Iu=new Set,this.du=new St(fe.comparator),this.Eu=new Map,this.Au=new _y,this.Ru={},this.Vu=new Map,this.mu=ul.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Ck(t,e,n=!0){const r=eS(t);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await QA(r,e,n,!0),i}async function Nk(t,e){const n=eS(t);await QA(n,e,!0,!1)}async function QA(t,e,n,r){const i=await Q6(t.localStore,si(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await Ik(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&BA(t.remoteStore,i),o}async function Ik(t,e,n,r,i){t.gu=(d,f,m)=>async function(A,D,E,x){let N=D.view.nu(E);N.Ds&&(N=await U1(A.localStore,D.query,!1).then(({documents:_})=>D.view.nu(_,N)));const O=x&&x.targetChanges.get(D.targetId),P=x&&x.targetMismatches.get(D.targetId)!=null,R=D.view.applyChanges(N,A.isPrimaryClient,O,P);return Y1(A,D.targetId,R._u),R.snapshot}(t,d,f,m);const a=await U1(t.localStore,e,!0),s=new xk(e,a.qs),o=s.nu(a.documents),l=Su.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=s.applyChanges(o,t.isPrimaryClient,l);Y1(t,n,h._u);const u=new Ak(e,n,s);return t.Pu.set(e,u),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function Dk(t,e,n){const r=Ee(t),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(s=>!Df(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Eg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ty(r.remoteStore,i.targetId),xg(r,i.targetId)}).catch(El)):(xg(r,i.targetId),await Eg(r.localStore,i.targetId,!0))}async function Ok(t,e){const n=Ee(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ty(n.remoteStore,r.targetId))}async function Mk(t,e,n){const r=zk(t);try{const i=await function(s,o){const l=Ee(s),h=mt.now(),u=o.reduce((m,b)=>m.add(b.key),ke());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let b=Gi(),A=ke();return l.Os.getEntries(m,u).next(D=>{b=D,b.forEach((E,x)=>{x.isValidDocument()||(A=A.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,b)).next(D=>{d=D;const E=[];for(const x of o){const N=QM(x,d.get(x.key).overlayedDocument);N!=null&&E.push(new es(x.key,N,aA(N.value.mapValue),fr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,h,E,o)}).next(D=>{f=D;const E=D.applyToLocalDocumentSet(d,A);return l.documentOverlayCache.saveOverlays(m,D.batchId,E)})}).then(()=>({batchId:f.batchId,changes:gA(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,l){let h=s.Ru[s.currentUser.toKey()];h||(h=new St(Se)),h=h.insert(o,l),s.Ru[s.currentUser.toKey()]=h}(r,i.batchId,n),await Cu(r,i.changes),await Vf(r.remoteStore)}catch(i){const a=Cy(i,"Failed to persist write");n.reject(a)}}async function KA(t,e){const n=Ee(t);try{const r=await $6(n.localStore,e);e.targetChanges.forEach((i,a)=>{const s=n.Eu.get(a);s&&(Ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ge(s.lu,14607):i.removedDocuments.size>0&&(Ge(s.lu,42227),s.lu=!1))}),await Cu(n,r,e)}catch(r){await El(r)}}function $1(t,e,n){const r=Ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const l=Ee(s);l.onlineState=o;let h=!1;l.queries.forEach((u,d)=>{for(const f of d.wa)f.va(o)&&(h=!0)}),h&&Dy(l)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kk(t,e,n){const r=Ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),a=i&&i.key;if(a){let s=new St(fe.comparator);s=s.insert(a,Cn.newNoDocument(a,be.min()));const o=ke().add(a),l=new Pf(be.min(),new Map,new St(Se),s,o);await KA(r,l),r.du=r.du.remove(a),r.Eu.delete(e),ky(r)}else await Eg(r.localStore,e,!1).then(()=>xg(r,e,n)).catch(El)}async function jk(t,e){const n=Ee(t),r=e.batch.batchId;try{const i=await G6(n.localStore,e);ZA(n,r,null),WA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Cu(n,i)}catch(i){await El(i)}}async function Pk(t,e,n){const r=Ee(t);try{const i=await function(s,o){const l=Ee(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let u;return l.mutationQueue.lookupMutationBatch(h,o).next(d=>(Ge(d!==null,37113),u=d.keys(),l.mutationQueue.removeMutationBatch(h,d))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,u)).next(()=>l.localDocuments.getDocuments(h,u))})}(r.localStore,e);ZA(r,e,n),WA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Cu(r,i)}catch(i){await El(i)}}function WA(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function ZA(t,e,n){const r=Ee(t);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function xg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||JA(t,r)})}function JA(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ty(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),ky(t))}function Y1(t,e,n){for(const r of n)r instanceof YA?(t.Au.addReference(r.key,e),Uk(t,r)):r instanceof XA?(se(My,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||JA(t,r.key)):pe(19791,{yu:r})}function Uk(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(se(My,"New document in limbo: "+n),t.Iu.add(r),ky(t))}function ky(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new fe(ct.fromString(e)),r=t.mu.next();t.Eu.set(r,new Sk(n)),t.du=t.du.insert(n,r),BA(t.remoteStore,new Ea(si(If(n.path)),r,"TargetPurposeLimboResolution",Rf.ue))}}async function Cu(t,e,n){const r=Ee(t),i=[],a=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((o,l)=>{s.push(r.gu(l,e,n).then(h=>{var u;if((h||n)&&r.isPrimaryClient){const d=h?!h.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(h){i.push(h);const d=Ey.Es(l.targetId,h);a.push(d)}}))}),await Promise.all(s),r.hu.J_(i),await async function(l,h){const u=Ee(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>J.forEach(h,f=>J.forEach(f.Is,m=>u.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>J.forEach(f.ds,m=>u.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!wl(d))throw d;se(wy,"Failed to update sequence numbers: "+d)}for(const d of h){const f=d.targetId;if(!d.fromCache){const m=u.Fs.get(f),b=m.snapshotVersion,A=m.withLastLimboFreeSnapshotVersion(b);u.Fs=u.Fs.insert(f,A)}}}(r.localStore,a))}async function Lk(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){se(My,"User change. New user:",e.toKey());const r=await UA(n.localStore,e);n.currentUser=e,function(a,s){a.Vu.forEach(o=>{o.forEach(l=>{l.reject(new ae(Z.CANCELLED,s))})}),a.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Cu(n,r.Bs)}}function Vk(t,e){const n=Ee(t),r=n.Eu.get(e);if(r&&r.lu)return ke().add(r.key);{let i=ke();const a=n.Tu.get(e);if(!a)return i;for(const s of a){const o=n.Pu.get(s);i=i.unionWith(o.view.tu)}return i}}function eS(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=KA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kk.bind(null,e),e.hu.J_=wk.bind(null,e.eventManager),e.hu.pu=Tk.bind(null,e.eventManager),e}function zk(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Pk.bind(null,e),e}class zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return q6(this.persistence,new B6,e.initialUser,this.serializer)}Du(e){return new PA(by.Vi,this.serializer)}bu(e){return new W6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zd.provider={build:()=>new zd};class Bk extends zd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ge(this.persistence.referenceDelegate instanceof Ld,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new S6(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new PA(r=>Ld.Vi(r,n),this.serializer)}}class Ag{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Lk.bind(null,this.syncEngine),await _k(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ek}()}createDatastore(e){const n=Uf(e.databaseInfo.databaseId),r=function(a){return new nk(a)}(e.databaseInfo);return function(a,s,o,l){return new sk(a,s,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,s,o){return new lk(r,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,n=>$1(this.syncEngine,n,0),function(){return z1.C()?new z1:new Z6}())}createSyncEngine(e,n){return function(i,a,s,o,l,h,u){const d=new Rk(i,a,s,o,l,h);return u&&(d.fu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=Ee(i);se(js,"RemoteStore shutting down."),a.Ia.add(5),await Ru(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ag.provider={build:()=>new Ag};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):qi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya="FirestoreClient";class Fk{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Rn.UNAUTHENTICATED,this.clientId=cy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async s=>{se(Ya,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(se(Ya,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Cy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gm(t,e){t.asyncQueue.verifyOperationInProgress(),se(Ya,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await UA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Ba("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{se("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ba("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function X1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Hk(t);se(Ya,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>F1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>F1(e.remoteStore,i)),t._onlineComponents=e}async function Hk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(Ya,"Using user provided OfflineComponentProvider");try{await Gm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ba("Error using user provided cache. Falling back to memory cache: "+n),await Gm(t,new zd)}}else se(Ya,"Using default OfflineComponentProvider"),await Gm(t,new Bk(void 0));return t._offlineComponents}async function tS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(Ya,"Using user provided OnlineComponentProvider"),await X1(t,t._uninitializedComponentsProvider._online)):(se(Ya,"Using default OnlineComponentProvider"),await X1(t,new Ag))),t._onlineComponents}function qk(t){return tS(t).then(e=>e.syncEngine)}async function Bd(t){const e=await tS(t),n=e.eventManager;return n.onListen=Ck.bind(null,e.syncEngine),n.onUnlisten=Dk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Nk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Ok.bind(null,e.syncEngine),n}function Gk(t,e,n={}){const r=new Pi;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,l,h){const u=new jy({next:f=>{u.Ou(),s.enqueueAndForget(()=>Iy(a,d));const m=f.docs.has(o);!m&&f.fromCache?h.reject(new ae(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?h.reject(new ae(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(f)},error:f=>h.reject(f)}),d=new Oy(If(o.path),u,{includeMetadataChanges:!0,ka:!0});return Ny(a,d)}(await Bd(t),t.asyncQueue,e,n,r)),r.promise}function $k(t,e,n={}){const r=new Pi;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,l,h){const u=new jy({next:f=>{u.Ou(),s.enqueueAndForget(()=>Iy(a,d)),f.fromCache&&l.source==="server"?h.reject(new ae(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(f)},error:f=>h.reject(f)}),d=new Oy(o,u,{includeMetadataChanges:!0,ka:!0});return Ny(a,d)}(await Bd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="firestore.googleapis.com",K1=!0;class W1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rS,this.ssl=K1}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:K1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<x6)throw new ae(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ae(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eM;switch(r.type){case"firstParty":return new iM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Q1.get(n);r&&(se("ComponentProvider","Removing Datastore"),Q1.delete(n),r.terminate())}(this),Promise.resolve()}}function Yk(t,e,n,r={}){var i;t=Rr(t,zf);const a=Yi(e),s=t._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;a&&(bf(`https://${l}`),Ef("Firestore",!0)),s.host!==rS&&s.host!==l&&Ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},s),{host:l,ssl:a,emulatorOptions:r});if(!Os(h,o)&&(t._setSettings(h),r.mockUserToken)){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=Rn.MOCK_USER;else{u=r2(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ae(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Rn(f)}t._authCredentials=new tM(new $2(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $s(this.firestore,e,this._query)}}class Vt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Tu(n,Vt._jsonSchema))return new Vt(e,r||null,new fe(ct.fromString(n.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:Xt("string",Vt._jsonSchemaVersion),referencePath:Xt("string")};class Pa extends $s{constructor(e,n,r){super(e,n,If(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new fe(e))}withConverter(e){return new Pa(this.firestore,e,this._path)}}function Xk(t,e,...n){if(t=rt(t),X2("collection","path",e),t instanceof zf){const r=ct.fromString(e,...n);return u1(r),new Pa(t,null,r)}{if(!(t instanceof Vt||t instanceof Pa))throw new ae(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ct.fromString(e,...n));return u1(r),new Pa(t.firestore,null,r)}}function iS(t,e,...n){if(t=rt(t),arguments.length===1&&(e=cy.newId()),X2("doc","path",e),t instanceof zf){const r=ct.fromString(e,...n);return c1(r),new Vt(t,null,new fe(r))}{if(!(t instanceof Vt||t instanceof Pa))throw new ae(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ct.fromString(e,...n));return c1(r),new Vt(t.firestore,t instanceof Pa?t.converter:null,new fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="AsyncQueue";class J1{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new VA(this,"async_queue_retry"),this.oc=()=>{const r=qm();r&&se(Z1,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=qm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=qm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Pi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!wl(e))throw e;se(Z1,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,qi("INTERNAL UNHANDLED ERROR: ",eE(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Ry.createAndSchedule(this,e,n,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&pe(47125,{hc:eE(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function eE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Xa extends zf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new J1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new J1(e),this._firestoreClient=void 0,await e}}}function Qk(t,e){const n=typeof t=="object"?t:wf(),r=typeof t=="string"?t:e,i=_u(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=Xv("firestore");a&&Yk(i,...a)}return i}function Nu(t){if(t._terminated)throw new ae(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Kk(t),t._firestoreClient}function Kk(t){var e,n,r;const i=t._freezeSettings(),a=function(o,l,h,u){return new bM(o,l,h,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,nS(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Fk(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tr(En.fromBase64String(e))}catch(n){throw new ae(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Tr(En.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tu(e,Tr._jsonSchema))return Tr.fromBase64String(e.bytes)}}Tr._jsonSchemaVersion="firestore/bytes/1.0",Tr._jsonSchema={type:Xt("string",Tr._jsonSchemaVersion),bytes:Xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:li._jsonSchemaVersion}}static fromJSON(e){if(Tu(e,li._jsonSchema))return new li(e.latitude,e.longitude)}}li._jsonSchemaVersion="firestore/geoPoint/1.0",li._jsonSchema={type:Xt("string",li._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ci._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tu(e,ci._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ci(e.vectorValues);throw new ae(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ci._jsonSchemaVersion="firestore/vectorValue/1.0",ci._jsonSchema={type:Xt("string",ci._jsonSchemaVersion),vectorValues:Xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=/^__.*__$/;class Zk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new es(e,this.data,this.fieldMask,n,this.fieldTransforms):new Au(e,this.data,n,this.fieldTransforms)}}class aS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new es(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ec:t})}}class Uy{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Uy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Fd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(sS(this.Ec)&&Wk.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Jk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uf(e)}Dc(e,n,r,i=!1){return new Uy({Ec:e,methodName:n,bc:r,path:_n.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ly(t){const e=t._freezeSettings(),n=Uf(t._databaseId);return new Jk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oS(t,e,n,r,i,a={}){const s=t.Dc(a.merge||a.mergeFields?2:0,e,n,i);Vy("Data must be an object, but it was:",s,r);const o=lS(r,s);let l,h;if(a.merge)l=new or(s.fieldMask),h=s.fieldTransforms;else if(a.mergeFields){const u=[];for(const d of a.mergeFields){const f=Sg(e,d,n);if(!s.contains(f))throw new ae(Z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);uS(u,f)||u.push(f)}l=new or(u),h=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,h=s.fieldTransforms;return new Zk(new Qn(o),l,h)}class Ff extends Py{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ff}}function ej(t,e,n,r){const i=t.Dc(1,e,n);Vy("Data must be an object, but it was:",i,r);const a=[],s=Qn.empty();Ja(r,(l,h)=>{const u=zy(e,l,n);h=rt(h);const d=i.gc(u);if(h instanceof Ff)a.push(u);else{const f=Iu(h,d);f!=null&&(a.push(u),s.set(u,f))}});const o=new or(a);return new aS(s,o,i.fieldTransforms)}function tj(t,e,n,r,i,a){const s=t.Dc(1,e,n),o=[Sg(e,r,n)],l=[i];if(a.length%2!=0)throw new ae(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<a.length;f+=2)o.push(Sg(e,a[f])),l.push(a[f+1]);const h=[],u=Qn.empty();for(let f=o.length-1;f>=0;--f)if(!uS(h,o[f])){const m=o[f];let b=l[f];b=rt(b);const A=s.gc(m);if(b instanceof Ff)h.push(m);else{const D=Iu(b,A);D!=null&&(h.push(m),u.set(m,D))}}const d=new or(h);return new aS(u,d,s.fieldTransforms)}function nj(t,e,n,r=!1){return Iu(n,t.Dc(r?4:3,e))}function Iu(t,e){if(cS(t=rt(t)))return Vy("Unsupported field value:",e,t),lS(t,e);if(t instanceof Py)return function(r,i){if(!sS(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let s=0;for(const o of r){let l=Iu(o,i.yc(s));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),s++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=mt.fromDate(r);return{timestampValue:Ud(i.serializer,a)}}if(r instanceof mt){const a=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ud(i.serializer,a)}}if(r instanceof li)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tr)return{bytesValue:CA(i.serializer,r._byteString)};if(r instanceof Vt){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:yy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ci)return function(s,o){return{mapValue:{fields:{[rA]:{stringValue:iA},[Od]:{arrayValue:{values:s.toArray().map(h=>{if(typeof h!="number")throw o.wc("VectorValues must only contain numeric values.");return py(o.serializer,h)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Sf(r)}`)}(t,e)}function lS(t,e){const n={};return W2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ja(t,(r,i)=>{const a=Iu(i,e.Vc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function cS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof li||t instanceof Tr||t instanceof Vt||t instanceof Py||t instanceof ci)}function Vy(t,e,n){if(!cS(n)||!Q2(n)){const r=Sf(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Sg(t,e,n){if((e=rt(e))instanceof Bf)return e._internalPath;if(typeof e=="string")return zy(t,e);throw Fd("Field path arguments must be of type string or ",t,!1,void 0,n)}const rj=new RegExp("[~\\*/\\[\\]]");function zy(t,e,n){if(e.search(rj)>=0)throw Fd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bf(...e.split("."))._internalPath}catch{throw Fd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fd(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new ae(Z.INVALID_ARGUMENT,o+t+l)}function uS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ij(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ij extends hS{data(){return super.data()}}function dS(t,e){return typeof e=="string"?zy(t,e):e instanceof Bf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ae(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class By{}class aj extends By{}function sj(t,e,...n){let r=[];e instanceof By&&r.push(e),r=r.concat(n),function(a){const s=a.filter(l=>l instanceof Hy).length,o=a.filter(l=>l instanceof Fy).length;if(s>1||s>0&&o>0)throw new ae(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Fy extends aj{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fy(e,n,r)}_apply(e){const n=this._parse(e);return mS(e._query,n),new $s(e.firestore,e.converter,pg(e._query,n))}_parse(e){const n=Ly(e.firestore);return function(a,s,o,l,h,u,d){let f;if(h.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ae(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){rE(d,u);const b=[];for(const A of d)b.push(nE(l,a,A));f={arrayValue:{values:b}}}else f=nE(l,a,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||rE(d,u),f=nj(o,s,d,u==="in"||u==="not-in");return $t.create(h,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Hy extends By{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Fr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const l of o)mS(s,l),s=pg(s,l)}(e._query,n),new $s(e.firestore,e.converter,pg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function nE(t,e,n){if(typeof(n=rt(n))=="string"){if(n==="")throw new ae(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dA(e)&&n.indexOf("/")!==-1)throw new ae(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ct.fromString(n));if(!fe.isDocumentKey(r))throw new ae(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return y1(t,new fe(r))}if(n instanceof Vt)return y1(t,n._key);throw new ae(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sf(n)}.`)}function rE(t,e){if(!Array.isArray(t)||t.length===0)throw new ae(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mS(t,e){const n=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ae(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class oj{convertValue(e,n="none"){switch(Ga(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ja(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Od].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Lt(s.doubleValue));return new ci(a)}convertGeoPoint(e){return new li(Lt(e.latitude),Lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Nf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qc(e));default:return null}}convertTimestamp(e){const n=Ha(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ct.fromString(e);Ge(kA(r),9688,{name:e});const i=new Gc(r.get(1),r.get(3)),a=new fe(r.popFirst(5));return i.isEqual(n)||qi(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class rc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class As extends hS{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=As._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}As._jsonSchemaVersion="firestore/documentSnapshot/1.0",As._jsonSchema={type:Xt("string",As._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Bh extends As{data(e={}){return super.data(e)}}class Ss{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new rc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Bh(this._firestore,this._userDataWriter,r.key,r,new rc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const l=new Bh(i._firestore,i._userDataWriter,o.doc.key,o.doc,new rc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new Bh(i._firestore,i._userDataWriter,o.doc.key,o.doc,new rc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,u=-1;return o.type!==0&&(h=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:lj(o.type),doc:l,oldIndex:h,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ss._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=cy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(t){t=Rr(t,Vt);const e=Rr(t.firestore,Xa);return Gk(Nu(e),t._key).then(n=>gS(e,t,n))}Ss._jsonSchemaVersion="firestore/querySnapshot/1.0",Ss._jsonSchema={type:Xt("string",Ss._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class qy extends oj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function uj(t){t=Rr(t,$s);const e=Rr(t.firestore,Xa),n=Nu(e),r=new qy(e);return fS(t._query),$k(n,t._query).then(i=>new Ss(e,r,t,i))}function hj(t,e,n){t=Rr(t,Vt);const r=Rr(t.firestore,Xa),i=pS(t.converter,e,n);return Gy(r,[oS(Ly(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,fr.none())])}function dj(t){return Gy(Rr(t.firestore,Xa),[new jf(t._key,fr.none())])}function fj(t,...e){var n,r,i;t=rt(t);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||tE(e[s])||(a=e[s++]);const o={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(tE(e[s])){const d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,h,u;if(t instanceof Vt)h=Rr(t.firestore,Xa),u=If(t._key.path),l={next:d=>{e[s]&&e[s](gS(h,t,d))},error:e[s+1],complete:e[s+2]};else{const d=Rr(t,$s);h=Rr(d.firestore,Xa),u=d._query;const f=new qy(h);l={next:m=>{e[s]&&e[s](new Ss(h,f,d,m))},error:e[s+1],complete:e[s+2]},fS(t._query)}return function(f,m,b,A){const D=new jy(A),E=new Oy(m,D,b);return f.asyncQueue.enqueueAndForget(async()=>Ny(await Bd(f),E)),()=>{D.Ou(),f.asyncQueue.enqueueAndForget(async()=>Iy(await Bd(f),E))}}(Nu(h),u,o,l)}function Gy(t,e){return function(r,i){const a=new Pi;return r.asyncQueue.enqueueAndForget(async()=>Mk(await qk(r),i,a)),a.promise}(Nu(t),e)}function gS(t,e,n){const r=n.docs.get(e._key),i=new qy(t);return new As(t,i,e._key,r,new rc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ly(e)}set(e,n,r){this._verifyNotCommitted();const i=$m(e,this._firestore),a=pS(i.converter,n,r),s=oS(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,fr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=$m(e,this._firestore);let s;return s=typeof(n=rt(n))=="string"||n instanceof Bf?tj(this._dataReader,"WriteBatch.update",a._key,n,r,i):ej(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=$m(e,this._firestore);return this._mutations=this._mutations.concat(new jf(n._key,fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ae(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $m(t,e){if((t=rt(t)).firestore!==e)throw new ae(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(t){return Nu(t=Rr(t,Xa)),new mj(t,e=>Gy(t,e))}(function(e,n=!0){(function(i){bl=i})(Fs),za(new Bi("firestore",(r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new Xa(new nM(r.getProvider("auth-internal")),new aM(s,r.getProvider("app-check-internal")),function(h,u){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ae(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gc(h.options.projectId,u)}(s,i),s);return a=Object.assign({useFetchStreams:n},a),o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),Sr(i1,a1,e),Sr(i1,a1,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="firebasestorage.googleapis.com",yS="storageBucket",gj=2*60*1e3,vj=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot extends qr{constructor(e,n,r=0){super(Ym(e),`Firebase Storage: ${n} (${Ym(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ym(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Dt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Dt||(Dt={}));function Ym(t){return"storage/"+t}function $y(){const t="An unknown error occurred, please check the error payload for server response.";return new Ot(Dt.UNKNOWN,t)}function yj(t){return new Ot(Dt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function _j(t){return new Ot(Dt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function bj(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ot(Dt.UNAUTHENTICATED,t)}function Ej(){return new Ot(Dt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function wj(t){return new Ot(Dt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Tj(){return new Ot(Dt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xj(){return new Ot(Dt.CANCELED,"User canceled the upload/download.")}function Aj(t){return new Ot(Dt.INVALID_URL,"Invalid URL '"+t+"'.")}function Sj(t){return new Ot(Dt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Rj(){return new Ot(Dt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yS+"' property when initializing the app?")}function Cj(){return new Ot(Dt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Nj(){return new Ot(Dt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Ij(t){return new Ot(Dt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Rg(t){return new Ot(Dt.INVALID_ARGUMENT,t)}function _S(){return new Ot(Dt.APP_DELETED,"The Firebase app was deleted.")}function Dj(t){return new Ot(Dt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ac(t,e){return new Ot(Dt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ql(t){throw new Ot(Dt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=lr.makeFromUrl(e,n)}catch{return new lr(e,"")}if(r.path==="")return r;throw Sj(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const s="(/(.*))?$",o=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function h(O){O.path_=decodeURIComponent(O.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${u}/b/${i}/o${f}`,"i"),b={bucket:1,path:3},A=n===vS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",E=new RegExp(`^https?://${A}/${i}/${D}`,"i"),N=[{regex:o,indices:l,postModify:a},{regex:m,indices:b,postModify:h},{regex:E,indices:{bucket:1,path:2},postModify:h}];for(let O=0;O<N.length;O++){const P=N[O],R=P.regex.exec(e);if(R){const _=R[P.indices.bucket];let g=R[P.indices.path];g||(g=""),r=new lr(_,g),P.postModify(r);break}}if(r==null)throw Aj(e);return r}}class Oj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t,e,n){let r=1,i=null,a=null,s=!1,o=0;function l(){return o===2}let h=!1;function u(...D){h||(h=!0,e.apply(null,D))}function d(D){i=setTimeout(()=>{i=null,t(m,l())},D)}function f(){a&&clearTimeout(a)}function m(D,...E){if(h){f();return}if(D){f(),u.call(null,D,...E);return}if(l()||s){f(),u.call(null,D,...E);return}r<64&&(r*=2);let N;o===1?(o=2,N=0):N=(r+Math.random())*1e3,d(N)}let b=!1;function A(D){b||(b=!0,f(),!h&&(i!==null?(D||(o=2),clearTimeout(i),d(0)):D||(o=1)))}return d(0),a=setTimeout(()=>{s=!0,A(!0)},n),A}function kj(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(t){return t!==void 0}function Pj(t){return typeof t=="object"&&!Array.isArray(t)}function Yy(t){return typeof t=="string"||t instanceof String}function iE(t){return Xy()&&t instanceof Blob}function Xy(){return typeof Blob<"u"}function aE(t,e,n,r){if(r<e)throw Rg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Rg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function bS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Rs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Rs||(Rs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,n,r,i,a,s,o,l,h,u,d,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,A)=>{this.resolve_=b,this.reject_=A,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new mh(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const s=o=>{const l=o.loaded,h=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,h)};this.progressCallback_!==null&&a.addUploadProgressListener(s),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(s),this.pendingConnection_=null;const o=a.getErrorCode()===Rs.NO_ERROR,l=a.getStatus();if(!o||Uj(l,this.additionalRetryCodes_)&&this.retry){const u=a.getErrorCode()===Rs.ABORT;r(!1,new mh(!1,null,u));return}const h=this.successCodes_.indexOf(l)!==-1;r(!0,new mh(h,a))})},n=(r,i)=>{const a=this.resolve_,s=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());jj(l)?a(l):a()}catch(l){s(l)}else if(o!==null){const l=$y();l.serverResponse=o.getErrorText(),this.errorCallback_?s(this.errorCallback_(o,l)):s(l)}else if(i.canceled){const l=this.appDelete_?_S():xj();s(l)}else{const l=Tj();s(l)}};this.canceled_?n(!1,new mh(!1,null,!0)):this.backoffId_=Mj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Vj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function zj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Bj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Fj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Hj(t,e,n,r,i,a,s=!0,o=!1){const l=bS(t.urlParams),h=t.url+l,u=Object.assign({},t.headers);return Bj(u,e),Vj(u,n),zj(u,a),Fj(u,r),new Lj(h,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Gj(...t){const e=qj();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Xy())return new Blob(t);throw new Ot(Dt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function $j(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(t){if(typeof atob>"u")throw Ij("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Xm{constructor(e,n){this.data=e,this.contentType=n||null}}function ES(t,e){switch(t){case Ar.RAW:return new Xm(wS(e));case Ar.BASE64:case Ar.BASE64URL:return new Xm(TS(t,e));case Ar.DATA_URL:return new Xm(Qj(e),Kj(e))}throw $y()}function wS(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,s=t.charCodeAt(++n);r=65536|(a&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Xj(t){let e;try{e=decodeURIComponent(t)}catch{throw Ac(Ar.DATA_URL,"Malformed data URL.")}return wS(e)}function TS(t,e){switch(t){case Ar.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Ac(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ar.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Ac(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Yj(e)}catch(i){throw i.message.includes("polyfill")?i:Ac(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class xS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ac(Ar.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Wj(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Qj(t){const e=new xS(t);return e.base64?TS(Ar.BASE64,e.rest):Xj(e.rest)}function Kj(t){return new xS(t).contentType}function Wj(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n){let r=0,i="";iE(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(iE(this.data_)){const r=this.data_,i=$j(r,e,n);return i===null?null:new pa(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new pa(r,!0)}}static getBlob(...e){if(Xy()){const n=e.map(r=>r instanceof pa?r.data_:r);return new pa(Gj.apply(null,n))}else{const n=e.map(s=>Yy(s)?ES(Ar.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(s=>{for(let o=0;o<s.length;o++)i[a++]=s[o]}),new pa(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t){let e;try{e=JSON.parse(t)}catch{return null}return Pj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Jj(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function SS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(t,e){return e}class jn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||eP}}let ph=null;function tP(t){return!Yy(t)||t.length<2?t:SS(t)}function RS(){if(ph)return ph;const t=[];t.push(new jn("bucket")),t.push(new jn("generation")),t.push(new jn("metageneration")),t.push(new jn("name","fullPath",!0));function e(a,s){return tP(s)}const n=new jn("name");n.xform=e,t.push(n);function r(a,s){return s!==void 0?Number(s):s}const i=new jn("size");return i.xform=r,t.push(i),t.push(new jn("timeCreated")),t.push(new jn("updated")),t.push(new jn("md5Hash",null,!0)),t.push(new jn("cacheControl",null,!0)),t.push(new jn("contentDisposition",null,!0)),t.push(new jn("contentEncoding",null,!0)),t.push(new jn("contentLanguage",null,!0)),t.push(new jn("contentType",null,!0)),t.push(new jn("metadata","customMetadata",!0)),ph=t,ph}function nP(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new lr(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function rP(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const s=n[a];r[s.local]=s.xform(r,e[s.server])}return nP(r,t),r}function CS(t,e,n){const r=AS(e);return r===null?null:rP(t,r,n)}function iP(t,e,n,r){const i=AS(e);if(i===null||!Yy(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const s=encodeURIComponent;return a.split(",").map(h=>{const u=t.bucket,d=t.fullPath,f="/b/"+s(u)+"/o/"+s(d),m=Qy(f,n,r),b=bS({alt:"media",token:h});return m+b})[0]}function aP(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class NS{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(t){if(!t)throw $y()}function sP(t,e){function n(r,i){const a=CS(t,i,e);return IS(a!==null),a}return n}function oP(t,e){function n(r,i){const a=CS(t,i,e);return IS(a!==null),iP(a,i,t.host,t._protocol)}return n}function DS(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Ej():i=bj():n.getStatus()===402?i=_j(t.bucket):n.getStatus()===403?i=wj(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function lP(t){const e=DS(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=yj(t.path)),a.serverResponse=i.serverResponse,a}return n}function cP(t,e,n){const r=e.fullServerUrl(),i=Qy(r,t.host,t._protocol),a="GET",s=t.maxOperationRetryTime,o=new NS(i,a,oP(t,n),s);return o.errorHandler=lP(e),o}function uP(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function hP(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=uP(null,e)),r}function dP(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function o(){let N="";for(let O=0;O<2;O++)N=N+Math.random().toString().slice(2);return N}const l=o();s["Content-Type"]="multipart/related; boundary="+l;const h=hP(e,r,i),u=aP(h,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=pa.getBlob(d,r,f);if(m===null)throw Cj();const b={name:h.fullPath},A=Qy(a,t.host,t._protocol),D="POST",E=t.maxUploadRetryTime,x=new NS(A,D,sP(t,n),E);return x.urlParams=b,x.headers=s,x.body=m.uploadData(),x.errorHandler=DS(e),x}class fP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Rs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Rs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Rs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,a){if(this.sent_)throw ql("cannot .send() more than once");if(Yi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const s in a)a.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,a[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ql("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ql("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ql("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ql("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class mP extends fP{initXhr(){this.xhr_.responseType="text"}}function OS(){return new mP}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n){this._service=e,n instanceof lr?this._location=n:this._location=lr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ps(e,n)}get root(){const e=new lr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return SS(this._location.path)}get storage(){return this._service}get parent(){const e=Zj(this._location.path);if(e===null)return null;const n=new lr(this._location.bucket,e);return new Ps(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Dj(e)}}function MS(t,e,n){t._throwIfRoot("uploadBytes");const r=dP(t.storage,t._location,RS(),new pa(e,!0),n);return t.storage.makeRequestWithTokens(r,OS).then(i=>({metadata:i,ref:t}))}function pP(t,e,n=Ar.RAW,r){t._throwIfRoot("uploadString");const i=ES(n,e),a=Object.assign({},r);return a.contentType==null&&i.contentType!=null&&(a.contentType=i.contentType),MS(t,i.data,a)}function gP(t){t._throwIfRoot("getDownloadURL");const e=cP(t.storage,t._location,RS());return t.storage.makeRequestWithTokens(e,OS).then(n=>{if(n===null)throw Nj();return n})}function vP(t,e){const n=Jj(t._location.path,e),r=new lr(t._location.bucket,n);return new Ps(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(t){return/^[A-Za-z]+:\/\//.test(t)}function _P(t,e){return new Ps(t,e)}function kS(t,e){if(t instanceof Ky){const n=t;if(n._bucket==null)throw Rj();const r=new Ps(n,n._bucket);return e!=null?kS(r,e):r}else return e!==void 0?vP(t,e):t}function bP(t,e){if(e&&yP(e)){if(t instanceof Ky)return _P(t,e);throw Rg("To use ref(service, url), the first argument must be a Storage instance.")}else return kS(t,e)}function sE(t,e){const n=e==null?void 0:e[yS];return n==null?null:lr.makeFromBucketSpec(n,t)}function EP(t,e,n,r={}){t.host=`${e}:${n}`;const i=Yi(e);i&&(bf(`https://${t.host}/b`),Ef("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:r2(a,t.app.options.projectId))}class Ky{constructor(e,n,r,i,a,s=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=s,this._bucket=null,this._host=vS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=gj,this._maxUploadRetryTime=vj,this._requests=new Set,i!=null?this._bucket=lr.makeFromBucketSpec(i,this._host):this._bucket=sE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=lr.makeFromBucketSpec(this._url,e):this._bucket=sE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ps(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new Oj(_S());{const s=Hj(e,this._appId,r,i,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const oE="@firebase/storage",lE="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="storage";function wP(t,e,n){return t=rt(t),MS(t,e,n)}function TP(t,e,n,r){return t=rt(t),pP(t,e,n,r)}function PS(t){return t=rt(t),gP(t)}function US(t,e){return t=rt(t),bP(t,e)}function LS(t=wf(),e){t=rt(t);const r=_u(t,jS).getImmediate({identifier:e}),i=Xv("storage");return i&&xP(r,...i),r}function xP(t,e,n,r={}){EP(t,e,n,r)}function AP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Ky(n,r,i,e,Fs)}function SP(){za(new Bi(jS,AP,"PUBLIC").setMultipleInstances(!0)),Sr(oE,lE,""),Sr(oE,lE,"esm2017")}SP();const Qm={apiKey:"AIzaSyBivqXghVKoxfSsJVXxmNi3n2yO1l2U9zU",authDomain:"runica-heros-folio.firebaseapp.com",projectId:"runica-heros-folio",storageBucket:"runica-heros-folio.firebasestorage.app",messagingSenderId:"1092943227692",appId:"1:1092943227692:web:342ed3d5e7c682b7eb9a89",measurementId:"G-GKS7XV7YEW"};let Ro,Cg,Ng,Ig;if(Qm.apiKey&&Qm.projectId)try{Ro=s2(Qm),Cg=K5(Ro),Ng=Qk(Ro,"runica-db"),Ig=LS(Ro),console.log("Firebase initialized successfully.")}catch(t){console.error("Error initializing Firebase. Please check your configuration.",t)}else console.warn("Firebase configuration environment variables are not set. Cloud features are disabled.");const Ys=()=>{if(!Ro||!Cg||!Ng||!Ig)throw new Error("Firebase is not initialized. Make sure your environment variables are set.");return{app:Ro,auth:Cg,db:Ng,storage:Ig}},RP=new Si,CP=()=>{try{const{auth:t}=Ys();return a5(t,RP).then(()=>{})}catch{return alert("Firebase is not configured. Cloud sign-in is disabled. Please update firebaseConfig.ts."),Promise.resolve()}},NP=()=>{try{const{auth:t}=Ys();return VO(t)}catch{return Promise.resolve()}},IP=t=>{try{const{auth:e}=Ys();return LO(e,t)}catch{return t(null),()=>{}}};function DP(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function VS(t,e){return new Promise(function(n,r){let i;return OP(t).then(function(a){try{return i=a,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(s){return r(s)}},r)})}const OP=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const a=new DataView(i);let s=0;if(a.getUint16(s)!==65496)return n("not a valid JPEG");for(s+=2;;){const o=a.getUint16(s);if(o===65498)break;const l=a.getUint16(s+2);if(o===65505&&a.getUint32(s+4)===1165519206){const h=s+10;let u;switch(a.getUint16(h)){case 18761:u=!0;break;case 19789:u=!1;break;default:return n("TIFF header contains invalid endian")}if(a.getUint16(h+2,u)!==42)return n("TIFF header contains invalid version");const d=a.getUint32(h+4,u),f=h+d+2+12*a.getUint16(h+d,u);for(let m=h+d+2;m<f;m+=12)if(a.getUint16(m,u)==274){if(a.getUint16(m+2,u)!==3)return n("Orientation data type is invalid");if(a.getUint32(m+4,u)!==1)return n("Orientation data count is invalid");a.setUint16(m+8,1,u);break}return e(i.slice(s,s+2+l))}s+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var Hd={},MP={get exports(){return Hd},set exports(t){Hd=t}};(function(t){var e,n,r={};MP.exports=r,r.parse=function(i,a){for(var s=r.bin.readUshort,o=r.bin.readUint,l=0,h={},u=new Uint8Array(i),d=u.length-4;o(u,d)!=101010256;)d--;l=d,l+=4;var f=s(u,l+=4);s(u,l+=2);var m=o(u,l+=2),b=o(u,l+=4);l+=4,l=b;for(var A=0;A<f;A++){o(u,l),l+=4,l+=4,l+=4,o(u,l+=4),m=o(u,l+=4);var D=o(u,l+=4),E=s(u,l+=4),x=s(u,l+2),N=s(u,l+4);l+=6;var O=o(u,l+=8);l+=4,l+=E+x+N,r._readLocal(u,O,h,m,D,a)}return h},r._readLocal=function(i,a,s,o,l,h){var u=r.bin.readUshort,d=r.bin.readUint;d(i,a),u(i,a+=4),u(i,a+=2);var f=u(i,a+=2);d(i,a+=2),d(i,a+=4),a+=4;var m=u(i,a+=8),b=u(i,a+=2);a+=2;var A=r.bin.readUTF8(i,a,m);if(a+=m,a+=b,h)s[A]={size:l,csize:o};else{var D=new Uint8Array(i.buffer,a);if(f==0)s[A]=new Uint8Array(D.buffer.slice(a,a+o));else{if(f!=8)throw"unknown compression method: "+f;var E=new Uint8Array(l);r.inflateRaw(D,E),s[A]=E}}},r.inflateRaw=function(i,a){return r.F.inflate(i,a)},r.inflate=function(i,a){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),a)},r.deflate=function(i,a){a==null&&(a={level:6});var s=0,o=new Uint8Array(50+Math.floor(1.1*i.length));o[s]=120,o[s+1]=156,s+=2,s=r.F.deflateRaw(i,o,s,a.level);var l=r.adler(i,0,i.length);return o[s+0]=l>>>24&255,o[s+1]=l>>>16&255,o[s+2]=l>>>8&255,o[s+3]=l>>>0&255,new Uint8Array(o.buffer,0,s+4)},r.deflateRaw=function(i,a){a==null&&(a={level:6});var s=new Uint8Array(50+Math.floor(1.1*i.length)),o=r.F.deflateRaw(i,s,o,a.level);return new Uint8Array(s.buffer,0,o)},r.encode=function(i,a){a==null&&(a=!1);var s=0,o=r.bin.writeUint,l=r.bin.writeUshort,h={};for(var u in i){var d=!r._noNeed(u)&&!a,f=i[u],m=r.crc.crc(f,0,f.length);h[u]={cpr:d,usize:f.length,crc:m,file:d?r.deflateRaw(f):f}}for(var u in h)s+=h[u].file.length+30+46+2*r.bin.sizeUTF8(u);s+=22;var b=new Uint8Array(s),A=0,D=[];for(var u in h){var E=h[u];D.push(A),A=r._writeHeader(b,A,u,E,0)}var x=0,N=A;for(var u in h)E=h[u],D.push(A),A=r._writeHeader(b,A,u,E,1,D[x++]);var O=A-N;return o(b,A,101010256),A+=4,l(b,A+=4,x),l(b,A+=2,x),o(b,A+=2,O),o(b,A+=4,N),A+=4,A+=2,b.buffer},r._noNeed=function(i){var a=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},r._writeHeader=function(i,a,s,o,l,h){var u=r.bin.writeUint,d=r.bin.writeUshort,f=o.file;return u(i,a,l==0?67324752:33639248),a+=4,l==1&&(a+=2),d(i,a,20),d(i,a+=2,0),d(i,a+=2,o.cpr?8:0),u(i,a+=2,0),u(i,a+=4,o.crc),u(i,a+=4,f.length),u(i,a+=4,o.usize),d(i,a+=4,r.bin.sizeUTF8(s)),d(i,a+=2,0),a+=2,l==1&&(a+=2,a+=2,u(i,a+=6,h),a+=4),a+=r.bin.writeUTF8(i,a,s),l==0&&(i.set(f,a),a+=f.length),a},r.crc={table:function(){for(var i=new Uint32Array(256),a=0;a<256;a++){for(var s=a,o=0;o<8;o++)1&s?s=3988292384^s>>>1:s>>>=1;i[a]=s}return i}(),update:function(i,a,s,o){for(var l=0;l<o;l++)i=r.crc.table[255&(i^a[s+l])]^i>>>8;return i},crc:function(i,a,s){return 4294967295^r.crc.update(4294967295,i,a,s)}},r.adler=function(i,a,s){for(var o=1,l=0,h=a,u=a+s;h<u;){for(var d=Math.min(h+5552,u);h<d;)l+=o+=i[h++];o%=65521,l%=65521}return l<<16|o},r.bin={readUshort:function(i,a){return i[a]|i[a+1]<<8},writeUshort:function(i,a,s){i[a]=255&s,i[a+1]=s>>8&255},readUint:function(i,a){return 16777216*i[a+3]+(i[a+2]<<16|i[a+1]<<8|i[a])},writeUint:function(i,a,s){i[a]=255&s,i[a+1]=s>>8&255,i[a+2]=s>>16&255,i[a+3]=s>>24&255},readASCII:function(i,a,s){for(var o="",l=0;l<s;l++)o+=String.fromCharCode(i[a+l]);return o},writeASCII:function(i,a,s){for(var o=0;o<s.length;o++)i[a+o]=s.charCodeAt(o)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,a,s){for(var o,l="",h=0;h<s;h++)l+="%"+r.bin.pad(i[a+h].toString(16));try{o=decodeURIComponent(l)}catch{return r.bin.readASCII(i,a,s)}return o},writeUTF8:function(i,a,s){for(var o=s.length,l=0,h=0;h<o;h++){var u=s.charCodeAt(h);if(!(4294967168&u))i[a+l]=u,l++;else if(!(4294965248&u))i[a+l]=192|u>>6,i[a+l+1]=128|u>>0&63,l+=2;else if(!(4294901760&u))i[a+l]=224|u>>12,i[a+l+1]=128|u>>6&63,i[a+l+2]=128|u>>0&63,l+=3;else{if(4292870144&u)throw"e";i[a+l]=240|u>>18,i[a+l+1]=128|u>>12&63,i[a+l+2]=128|u>>6&63,i[a+l+3]=128|u>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var a=i.length,s=0,o=0;o<a;o++){var l=i.charCodeAt(o);if(!(4294967168&l))s++;else if(!(4294965248&l))s+=2;else if(!(4294901760&l))s+=3;else{if(4292870144&l)throw"e";s+=4}}return s}},r.F={},r.F.deflateRaw=function(i,a,s,o){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],h=r.F.U,u=r.F._goodIndex;r.F._hash;var d=r.F._putsE,f=0,m=s<<3,b=0,A=i.length;if(o==0){for(;f<A;)d(a,m,f+(C=Math.min(65535,A-f))==A?1:0),m=r.F._copyExact(i,f,C,a,m+8),f+=C;return m>>>3}var D=h.lits,E=h.strt,x=h.prev,N=0,O=0,P=0,R=0,_=0,g=0;for(A>2&&(E[g=r.F._hash(i,0)]=0),f=0;f<A;f++){if(_=g,f+1<A-2){g=r.F._hash(i,f+1);var y=f+1&32767;x[y]=E[g],E[g]=y}if(b<=f){(N>14e3||O>26697)&&A-f>100&&(b<f&&(D[N]=f-b,N+=2,b=f),m=r.F._writeBlock(f==A-1||b==A?1:0,D,N,R,i,P,f-P,a,m),N=O=R=0,P=f);var T=0;f<A-2&&(T=r.F._bestMatch(i,f,x,_,Math.min(l[2],A-f),l[3]));var C=T>>>16,I=65535&T;if(T!=0){I=65535&T;var S=u(C=T>>>16,h.of0);h.lhst[257+S]++;var U=u(I,h.df0);h.dhst[U]++,R+=h.exb[S]+h.dxb[U],D[N]=C<<23|f-b,D[N+1]=I<<16|S<<8|U,N+=2,b=f+C}else h.lhst[i[f]]++;O++}}for(P==f&&i.length!=0||(b<f&&(D[N]=f-b,N+=2,b=f),m=r.F._writeBlock(1,D,N,R,i,P,f-P,a,m),N=0,O=0,N=O=R=0,P=f);7&m;)m++;return m>>>3},r.F._bestMatch=function(i,a,s,o,l,h){var u=32767&a,d=s[u],f=u-d+32768&32767;if(d==u||o!=r.F._hash(i,a-f))return 0;for(var m=0,b=0,A=Math.min(32767,a);f<=A&&--h!=0&&d!=u;){if(m==0||i[a+m]==i[a+m-f]){var D=r.F._howLong(i,a,f);if(D>m){if(b=f,(m=D)>=l)break;f+2<D&&(D=f+2);for(var E=0,x=0;x<D-2;x++){var N=a-f+x+32768&32767,O=N-s[N]+32768&32767;O>E&&(E=O,d=N)}}}f+=(u=d)-(d=s[u])+32768&32767}return m<<16|b},r.F._howLong=function(i,a,s){if(i[a]!=i[a-s]||i[a+1]!=i[a+1-s]||i[a+2]!=i[a+2-s])return 0;var o=a,l=Math.min(i.length,a+258);for(a+=3;a<l&&i[a]==i[a-s];)a++;return a-o},r.F._hash=function(i,a){return(i[a]<<8|i[a+1])+(i[a+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,a,s,o,l,h,u,d,f){var m,b,A,D,E,x,N,O,P,R=r.F.U,_=r.F._putsF,g=r.F._putsE;R.lhst[256]++,b=(m=r.F.getTrees())[0],A=m[1],D=m[2],E=m[3],x=m[4],N=m[5],O=m[6],P=m[7];var y=32+(f+3&7?8-(f+3&7):0)+(u<<3),T=o+r.F.contSize(R.fltree,R.lhst)+r.F.contSize(R.fdtree,R.dhst),C=o+r.F.contSize(R.ltree,R.lhst)+r.F.contSize(R.dtree,R.dhst);C+=14+3*N+r.F.contSize(R.itree,R.ihst)+(2*R.ihst[16]+3*R.ihst[17]+7*R.ihst[18]);for(var I=0;I<286;I++)R.lhst[I]=0;for(I=0;I<30;I++)R.dhst[I]=0;for(I=0;I<19;I++)R.ihst[I]=0;var S=y<T&&y<C?0:T<C?1:2;if(_(d,f,i),_(d,f+1,S),f+=3,S==0){for(;7&f;)f++;f=r.F._copyExact(l,h,u,d,f)}else{var U,z;if(S==1&&(U=R.fltree,z=R.fdtree),S==2){r.F.makeCodes(R.ltree,b),r.F.revCodes(R.ltree,b),r.F.makeCodes(R.dtree,A),r.F.revCodes(R.dtree,A),r.F.makeCodes(R.itree,D),r.F.revCodes(R.itree,D),U=R.ltree,z=R.dtree,g(d,f,E-257),g(d,f+=5,x-1),g(d,f+=5,N-4),f+=4;for(var k=0;k<N;k++)g(d,f+3*k,R.itree[1+(R.ordr[k]<<1)]);f+=3*N,f=r.F._codeTiny(O,R.itree,d,f),f=r.F._codeTiny(P,R.itree,d,f)}for(var M=h,H=0;H<s;H+=2){for(var B=a[H],X=B>>>23,re=M+(8388607&B);M<re;)f=r.F._writeLit(l[M++],U,d,f);if(X!=0){var V=a[H+1],K=V>>16,$=V>>8&255,Y=255&V;g(d,f=r.F._writeLit(257+$,U,d,f),X-R.of0[$]),f+=R.exb[$],_(d,f=r.F._writeLit(Y,z,d,f),K-R.df0[Y]),f+=R.dxb[Y],M+=X}}f=r.F._writeLit(256,U,d,f)}return f},r.F._copyExact=function(i,a,s,o,l){var h=l>>>3;return o[h]=s,o[h+1]=s>>>8,o[h+2]=255-o[h],o[h+3]=255-o[h+1],h+=4,o.set(new Uint8Array(i.buffer,a,s),h),l+(s+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,a=r.F._hufTree(i.lhst,i.ltree,15),s=r.F._hufTree(i.dhst,i.dtree,15),o=[],l=r.F._lenCodes(i.ltree,o),h=[],u=r.F._lenCodes(i.dtree,h),d=0;d<o.length;d+=2)i.ihst[o[d]]++;for(d=0;d<h.length;d+=2)i.ihst[h[d]]++;for(var f=r.F._hufTree(i.ihst,i.itree,7),m=19;m>4&&i.itree[1+(i.ordr[m-1]<<1)]==0;)m--;return[a,s,f,l,u,m,o,h]},r.F.getSecond=function(i){for(var a=[],s=0;s<i.length;s+=2)a.push(i[s+1]);return a},r.F.nonZero=function(i){for(var a="",s=0;s<i.length;s+=2)i[s+1]!=0&&(a+=(s>>1)+",");return a},r.F.contSize=function(i,a){for(var s=0,o=0;o<a.length;o++)s+=a[o]*i[1+(o<<1)];return s},r.F._codeTiny=function(i,a,s,o){for(var l=0;l<i.length;l+=2){var h=i[l],u=i[l+1];o=r.F._writeLit(h,a,s,o);var d=h==16?2:h==17?3:7;h>15&&(r.F._putsE(s,o,u,d),o+=d)}return o},r.F._lenCodes=function(i,a){for(var s=i.length;s!=2&&i[s-1]==0;)s-=2;for(var o=0;o<s;o+=2){var l=i[o+1],h=o+3<s?i[o+3]:-1,u=o+5<s?i[o+5]:-1,d=o==0?-1:i[o-1];if(l==0&&h==l&&u==l){for(var f=o+5;f+2<s&&i[f+2]==l;)f+=2;(m=Math.min(f+1-o>>>1,138))<11?a.push(17,m-3):a.push(18,m-11),o+=2*m-2}else if(l==d&&h==l&&u==l){for(f=o+5;f+2<s&&i[f+2]==l;)f+=2;var m=Math.min(f+1-o>>>1,6);a.push(16,m-3),o+=2*m-2}else a.push(l,0)}return s>>>1},r.F._hufTree=function(i,a,s){var o=[],l=i.length,h=a.length,u=0;for(u=0;u<h;u+=2)a[u]=0,a[u+1]=0;for(u=0;u<l;u++)i[u]!=0&&o.push({lit:u,f:i[u]});var d=o.length,f=o.slice(0);if(d==0)return 0;if(d==1){var m=o[0].lit;return f=m==0?1:0,a[1+(m<<1)]=1,a[1+(f<<1)]=1,1}o.sort(function(O,P){return O.f-P.f});var b=o[0],A=o[1],D=0,E=1,x=2;for(o[0]={lit:-1,f:b.f+A.f,l:b,r:A,d:0};E!=d-1;)b=D!=E&&(x==d||o[D].f<o[x].f)?o[D++]:o[x++],A=D!=E&&(x==d||o[D].f<o[x].f)?o[D++]:o[x++],o[E++]={lit:-1,f:b.f+A.f,l:b,r:A};var N=r.F.setDepth(o[E-1],0);for(N>s&&(r.F.restrictDepth(f,s,N),N=s),u=0;u<d;u++)a[1+(f[u].lit<<1)]=f[u].d;return N},r.F.setDepth=function(i,a){return i.lit!=-1?(i.d=a,a):Math.max(r.F.setDepth(i.l,a+1),r.F.setDepth(i.r,a+1))},r.F.restrictDepth=function(i,a,s){var o=0,l=1<<s-a,h=0;for(i.sort(function(d,f){return f.d==d.d?d.f-f.f:f.d-d.d}),o=0;o<i.length&&i[o].d>a;o++){var u=i[o].d;i[o].d=a,h+=l-(1<<s-u)}for(h>>>=s-a;h>0;)(u=i[o].d)<a?(i[o].d++,h-=1<<a-u-1):o++;for(;o>=0;o--)i[o].d==a&&h<0&&(i[o].d--,h++);h!=0&&console.log("debt left")},r.F._goodIndex=function(i,a){var s=0;return a[16|s]<=i&&(s|=16),a[8|s]<=i&&(s|=8),a[4|s]<=i&&(s|=4),a[2|s]<=i&&(s|=2),a[1|s]<=i&&(s|=1),s},r.F._writeLit=function(i,a,s,o){return r.F._putsF(s,o,a[i<<1]),o+a[1+(i<<1)]},r.F.inflate=function(i,a){var s=Uint8Array;if(i[0]==3&&i[1]==0)return a||new s(0);var o=r.F,l=o._bitsF,h=o._bitsE,u=o._decodeTiny,d=o.makeCodes,f=o.codes2map,m=o._get17,b=o.U,A=a==null;A&&(a=new s(i.length>>>2<<3));for(var D,E,x=0,N=0,O=0,P=0,R=0,_=0,g=0,y=0,T=0;x==0;)if(x=l(i,T,1),N=l(i,T+1,2),T+=3,N!=0){if(A&&(a=r.F._check(a,y+(1<<17))),N==1&&(D=b.flmap,E=b.fdmap,_=511,g=31),N==2){O=h(i,T,5)+257,P=h(i,T+5,5)+1,R=h(i,T+10,4)+4,T+=14;for(var C=0;C<38;C+=2)b.itree[C]=0,b.itree[C+1]=0;var I=1;for(C=0;C<R;C++){var S=h(i,T+3*C,3);b.itree[1+(b.ordr[C]<<1)]=S,S>I&&(I=S)}T+=3*R,d(b.itree,I),f(b.itree,I,b.imap),D=b.lmap,E=b.dmap,T=u(b.imap,(1<<I)-1,O+P,i,T,b.ttree);var U=o._copyOut(b.ttree,0,O,b.ltree);_=(1<<U)-1;var z=o._copyOut(b.ttree,O,P,b.dtree);g=(1<<z)-1,d(b.ltree,U),f(b.ltree,U,D),d(b.dtree,z),f(b.dtree,z,E)}for(;;){var k=D[m(i,T)&_];T+=15&k;var M=k>>>4;if(!(M>>>8))a[y++]=M;else{if(M==256)break;var H=y+M-254;if(M>264){var B=b.ldef[M-257];H=y+(B>>>3)+h(i,T,7&B),T+=7&B}var X=E[m(i,T)&g];T+=15&X;var re=X>>>4,V=b.ddef[re],K=(V>>>4)+l(i,T,15&V);for(T+=15&V,A&&(a=r.F._check(a,y+(1<<17)));y<H;)a[y]=a[y++-K],a[y]=a[y++-K],a[y]=a[y++-K],a[y]=a[y++-K];y=H}}}else{7&T&&(T+=8-(7&T));var $=4+(T>>>3),Y=i[$-4]|i[$-3]<<8;A&&(a=r.F._check(a,y+Y)),a.set(new s(i.buffer,i.byteOffset+$,Y),y),T=$+Y<<3,y+=Y}return a.length==y?a:a.slice(0,y)},r.F._check=function(i,a){var s=i.length;if(a<=s)return i;var o=new Uint8Array(Math.max(s<<1,a));return o.set(i,0),o},r.F._decodeTiny=function(i,a,s,o,l,h){for(var u=r.F._bitsE,d=r.F._get17,f=0;f<s;){var m=i[d(o,l)&a];l+=15&m;var b=m>>>4;if(b<=15)h[f]=b,f++;else{var A=0,D=0;b==16?(D=3+u(o,l,2),l+=2,A=h[f-1]):b==17?(D=3+u(o,l,3),l+=3):b==18&&(D=11+u(o,l,7),l+=7);for(var E=f+D;f<E;)h[f]=A,f++}}return l},r.F._copyOut=function(i,a,s,o){for(var l=0,h=0,u=o.length>>>1;h<s;){var d=i[h+a];o[h<<1]=0,o[1+(h<<1)]=d,d>l&&(l=d),h++}for(;h<u;)o[h<<1]=0,o[1+(h<<1)]=0,h++;return l},r.F.makeCodes=function(i,a){for(var s,o,l,h,u=r.F.U,d=i.length,f=u.bl_count,m=0;m<=a;m++)f[m]=0;for(m=1;m<d;m+=2)f[i[m]]++;var b=u.next_code;for(s=0,f[0]=0,o=1;o<=a;o++)s=s+f[o-1]<<1,b[o]=s;for(l=0;l<d;l+=2)(h=i[l+1])!=0&&(i[l]=b[h],b[h]++)},r.F.codes2map=function(i,a,s){for(var o=i.length,l=r.F.U.rev15,h=0;h<o;h+=2)if(i[h+1]!=0)for(var u=h>>1,d=i[h+1],f=u<<4|d,m=a-d,b=i[h]<<m,A=b+(1<<m);b!=A;)s[l[b]>>>15-a]=f,b++},r.F.revCodes=function(i,a){for(var s=r.F.U.rev15,o=15-a,l=0;l<i.length;l+=2){var h=i[l]<<a-i[l+1];i[l]=s[h]>>>o}},r.F._putsE=function(i,a,s){s<<=7&a;var o=a>>>3;i[o]|=s,i[o+1]|=s>>>8},r.F._putsF=function(i,a,s){s<<=7&a;var o=a>>>3;i[o]|=s,i[o+1]|=s>>>8,i[o+2]|=s>>>16},r.F._bitsE=function(i,a,s){return(i[a>>>3]|i[1+(a>>>3)]<<8)>>>(7&a)&(1<<s)-1},r.F._bitsF=function(i,a,s){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)&(1<<s)-1},r.F._get17=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)},r.F._get25=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16|i[3+(a>>>3)]<<24)>>>(7&a)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,a=0;a<32768;a++){var s=a;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,i.rev15[a]=(s>>>16|s<<16)>>>17}function o(l,h,u){for(;h--!=0;)l.push(0,u)}for(a=0;a<32;a++)i.ldef[a]=i.of0[a]<<3|i.exb[a],i.ddef[a]=i.df0[a]<<4|i.dxb[a];o(i.fltree,144,8),o(i.fltree,112,9),o(i.fltree,24,7),o(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),o(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),o(i.itree,19,0),o(i.ltree,286,0),o(i.dtree,30,0),o(i.ttree,320,0)}()})();var kP=DP({__proto__:null,default:Hd},[Hd]);const jr=function(){var t={nextZero(u,d){for(;u[d]!=0;)d++;return d},readUshort:(u,d)=>u[d]<<8|u[d+1],writeUshort(u,d,f){u[d]=f>>8&255,u[d+1]=255&f},readUint:(u,d)=>16777216*u[d]+(u[d+1]<<16|u[d+2]<<8|u[d+3]),writeUint(u,d,f){u[d]=f>>24&255,u[d+1]=f>>16&255,u[d+2]=f>>8&255,u[d+3]=255&f},readASCII(u,d,f){let m="";for(let b=0;b<f;b++)m+=String.fromCharCode(u[d+b]);return m},writeASCII(u,d,f){for(let m=0;m<f.length;m++)u[d+m]=f.charCodeAt(m)},readBytes(u,d,f){const m=[];for(let b=0;b<f;b++)m.push(u[d+b]);return m},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,d,f){let m,b="";for(let A=0;A<f;A++)b+=`%${t.pad(u[d+A].toString(16))}`;try{m=decodeURIComponent(b)}catch{return t.readASCII(u,d,f)}return m}};function e(u,d,f,m){const b=d*f,A=a(m),D=Math.ceil(d*A/8),E=new Uint8Array(4*b),x=new Uint32Array(E.buffer),{ctype:N}=m,{depth:O}=m,P=t.readUshort;if(N==6){const B=b<<2;if(O==8)for(var R=0;R<B;R+=4)E[R]=u[R],E[R+1]=u[R+1],E[R+2]=u[R+2],E[R+3]=u[R+3];if(O==16)for(R=0;R<B;R++)E[R]=u[R<<1]}else if(N==2){const B=m.tabs.tRNS;if(B==null){if(O==8)for(R=0;R<b;R++){var _=3*R;x[R]=255<<24|u[_+2]<<16|u[_+1]<<8|u[_]}if(O==16)for(R=0;R<b;R++)_=6*R,x[R]=255<<24|u[_+4]<<16|u[_+2]<<8|u[_]}else{var g=B[0];const X=B[1],re=B[2];if(O==8)for(R=0;R<b;R++){var y=R<<2;_=3*R,x[R]=255<<24|u[_+2]<<16|u[_+1]<<8|u[_],u[_]==g&&u[_+1]==X&&u[_+2]==re&&(E[y+3]=0)}if(O==16)for(R=0;R<b;R++)y=R<<2,_=6*R,x[R]=255<<24|u[_+4]<<16|u[_+2]<<8|u[_],P(u,_)==g&&P(u,_+2)==X&&P(u,_+4)==re&&(E[y+3]=0)}}else if(N==3){const B=m.tabs.PLTE,X=m.tabs.tRNS,re=X?X.length:0;if(O==1)for(var T=0;T<f;T++){var C=T*D,I=T*d;for(R=0;R<d;R++){y=I+R<<2;var S=3*(U=u[C+(R>>3)]>>7-((7&R)<<0)&1);E[y]=B[S],E[y+1]=B[S+1],E[y+2]=B[S+2],E[y+3]=U<re?X[U]:255}}if(O==2)for(T=0;T<f;T++)for(C=T*D,I=T*d,R=0;R<d;R++)y=I+R<<2,S=3*(U=u[C+(R>>2)]>>6-((3&R)<<1)&3),E[y]=B[S],E[y+1]=B[S+1],E[y+2]=B[S+2],E[y+3]=U<re?X[U]:255;if(O==4)for(T=0;T<f;T++)for(C=T*D,I=T*d,R=0;R<d;R++)y=I+R<<2,S=3*(U=u[C+(R>>1)]>>4-((1&R)<<2)&15),E[y]=B[S],E[y+1]=B[S+1],E[y+2]=B[S+2],E[y+3]=U<re?X[U]:255;if(O==8)for(R=0;R<b;R++){var U;y=R<<2,S=3*(U=u[R]),E[y]=B[S],E[y+1]=B[S+1],E[y+2]=B[S+2],E[y+3]=U<re?X[U]:255}}else if(N==4){if(O==8)for(R=0;R<b;R++){y=R<<2;var z=u[k=R<<1];E[y]=z,E[y+1]=z,E[y+2]=z,E[y+3]=u[k+1]}if(O==16)for(R=0;R<b;R++){var k;y=R<<2,z=u[k=R<<2],E[y]=z,E[y+1]=z,E[y+2]=z,E[y+3]=u[k+2]}}else if(N==0)for(g=m.tabs.tRNS?m.tabs.tRNS:-1,T=0;T<f;T++){const B=T*D,X=T*d;if(O==1)for(var M=0;M<d;M++){var H=(z=255*(u[B+(M>>>3)]>>>7-(7&M)&1))==255*g?0:255;x[X+M]=H<<24|z<<16|z<<8|z}else if(O==2)for(M=0;M<d;M++)H=(z=85*(u[B+(M>>>2)]>>>6-((3&M)<<1)&3))==85*g?0:255,x[X+M]=H<<24|z<<16|z<<8|z;else if(O==4)for(M=0;M<d;M++)H=(z=17*(u[B+(M>>>1)]>>>4-((1&M)<<2)&15))==17*g?0:255,x[X+M]=H<<24|z<<16|z<<8|z;else if(O==8)for(M=0;M<d;M++)H=(z=u[B+M])==g?0:255,x[X+M]=H<<24|z<<16|z<<8|z;else if(O==16)for(M=0;M<d;M++)z=u[B+(M<<1)],H=P(u,B+(M<<1))==g?0:255,x[X+M]=H<<24|z<<16|z<<8|z}return E}function n(u,d,f,m){const b=a(u),A=Math.ceil(f*b/8),D=new Uint8Array((A+1+u.interlace)*m);return d=u.tabs.CgBI?i(d,D):r(d,D),u.interlace==0?d=s(d,u,0,f,m):u.interlace==1&&(d=function(x,N){const O=N.width,P=N.height,R=a(N),_=R>>3,g=Math.ceil(O*R/8),y=new Uint8Array(P*g);let T=0;const C=[0,0,4,0,2,0,1],I=[0,4,0,2,0,1,0],S=[8,8,8,4,4,2,2],U=[8,8,4,4,2,2,1];let z=0;for(;z<7;){const M=S[z],H=U[z];let B=0,X=0,re=C[z];for(;re<P;)re+=M,X++;let V=I[z];for(;V<O;)V+=H,B++;const K=Math.ceil(B*R/8);s(x,N,T,B,X);let $=0,Y=C[z];for(;Y<P;){let le=I[z],Te=T+$*K<<3;for(;le<O;){var k;if(R==1&&(k=(k=x[Te>>3])>>7-(7&Te)&1,y[Y*g+(le>>3)]|=k<<7-((7&le)<<0)),R==2&&(k=(k=x[Te>>3])>>6-(7&Te)&3,y[Y*g+(le>>2)]|=k<<6-((3&le)<<1)),R==4&&(k=(k=x[Te>>3])>>4-(7&Te)&15,y[Y*g+(le>>1)]|=k<<4-((1&le)<<2)),R>=8){const me=Y*g+le*_;for(let De=0;De<_;De++)y[me+De]=x[(Te>>3)+De]}Te+=R,le+=H}$++,Y+=M}B*X!=0&&(T+=X*(1+K)),z+=1}return y}(d,u)),d}function r(u,d){return i(new Uint8Array(u.buffer,2,u.length-6),d)}var i=function(){const u={H:{}};return u.H.N=function(d,f){const m=Uint8Array;let b,A,D=0,E=0,x=0,N=0,O=0,P=0,R=0,_=0,g=0;if(d[0]==3&&d[1]==0)return f||new m(0);const y=u.H,T=y.b,C=y.e,I=y.R,S=y.n,U=y.A,z=y.Z,k=y.m,M=f==null;for(M&&(f=new m(d.length>>>2<<5));D==0;)if(D=T(d,g,1),E=T(d,g+1,2),g+=3,E!=0){if(M&&(f=u.H.W(f,_+(1<<17))),E==1&&(b=k.J,A=k.h,P=511,R=31),E==2){x=C(d,g,5)+257,N=C(d,g+5,5)+1,O=C(d,g+10,4)+4,g+=14;let B=1;for(var H=0;H<38;H+=2)k.Q[H]=0,k.Q[H+1]=0;for(H=0;H<O;H++){const V=C(d,g+3*H,3);k.Q[1+(k.X[H]<<1)]=V,V>B&&(B=V)}g+=3*O,S(k.Q,B),U(k.Q,B,k.u),b=k.w,A=k.d,g=I(k.u,(1<<B)-1,x+N,d,g,k.v);const X=y.V(k.v,0,x,k.C);P=(1<<X)-1;const re=y.V(k.v,x,N,k.D);R=(1<<re)-1,S(k.C,X),U(k.C,X,b),S(k.D,re),U(k.D,re,A)}for(;;){const B=b[z(d,g)&P];g+=15&B;const X=B>>>4;if(!(X>>>8))f[_++]=X;else{if(X==256)break;{let re=_+X-254;if(X>264){const le=k.q[X-257];re=_+(le>>>3)+C(d,g,7&le),g+=7&le}const V=A[z(d,g)&R];g+=15&V;const K=V>>>4,$=k.c[K],Y=($>>>4)+T(d,g,15&$);for(g+=15&$;_<re;)f[_]=f[_++-Y],f[_]=f[_++-Y],f[_]=f[_++-Y],f[_]=f[_++-Y];_=re}}}}else{7&g&&(g+=8-(7&g));const B=4+(g>>>3),X=d[B-4]|d[B-3]<<8;M&&(f=u.H.W(f,_+X)),f.set(new m(d.buffer,d.byteOffset+B,X),_),g=B+X<<3,_+=X}return f.length==_?f:f.slice(0,_)},u.H.W=function(d,f){const m=d.length;if(f<=m)return d;const b=new Uint8Array(m<<1);return b.set(d,0),b},u.H.R=function(d,f,m,b,A,D){const E=u.H.e,x=u.H.Z;let N=0;for(;N<m;){const O=d[x(b,A)&f];A+=15&O;const P=O>>>4;if(P<=15)D[N]=P,N++;else{let R=0,_=0;P==16?(_=3+E(b,A,2),A+=2,R=D[N-1]):P==17?(_=3+E(b,A,3),A+=3):P==18&&(_=11+E(b,A,7),A+=7);const g=N+_;for(;N<g;)D[N]=R,N++}}return A},u.H.V=function(d,f,m,b){let A=0,D=0;const E=b.length>>>1;for(;D<m;){const x=d[D+f];b[D<<1]=0,b[1+(D<<1)]=x,x>A&&(A=x),D++}for(;D<E;)b[D<<1]=0,b[1+(D<<1)]=0,D++;return A},u.H.n=function(d,f){const m=u.H.m,b=d.length;let A,D,E,x;const N=m.j;for(var O=0;O<=f;O++)N[O]=0;for(O=1;O<b;O+=2)N[d[O]]++;const P=m.K;for(A=0,N[0]=0,D=1;D<=f;D++)A=A+N[D-1]<<1,P[D]=A;for(E=0;E<b;E+=2)x=d[E+1],x!=0&&(d[E]=P[x],P[x]++)},u.H.A=function(d,f,m){const b=d.length,A=u.H.m.r;for(let D=0;D<b;D+=2)if(d[D+1]!=0){const E=D>>1,x=d[D+1],N=E<<4|x,O=f-x;let P=d[D]<<O;const R=P+(1<<O);for(;P!=R;)m[A[P]>>>15-f]=N,P++}},u.H.l=function(d,f){const m=u.H.m.r,b=15-f;for(let A=0;A<d.length;A+=2){const D=d[A]<<f-d[A+1];d[A]=m[D]>>>b}},u.H.M=function(d,f,m){m<<=7&f;const b=f>>>3;d[b]|=m,d[b+1]|=m>>>8},u.H.I=function(d,f,m){m<<=7&f;const b=f>>>3;d[b]|=m,d[b+1]|=m>>>8,d[b+2]|=m>>>16},u.H.e=function(d,f,m){return(d[f>>>3]|d[1+(f>>>3)]<<8)>>>(7&f)&(1<<m)-1},u.H.b=function(d,f,m){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16)>>>(7&f)&(1<<m)-1},u.H.Z=function(d,f){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16)>>>(7&f)},u.H.i=function(d,f){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16|d[3+(f>>>3)]<<24)>>>(7&f)},u.H.m=function(){const d=Uint16Array,f=Uint32Array;return{K:new d(16),j:new d(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new d(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new f(32),J:new d(512),_:[],h:new d(32),$:[],w:new d(32768),C:[],v:[],d:new d(32768),D:[],u:new d(512),Q:[],r:new d(32768),s:new f(286),Y:new f(30),a:new f(19),t:new f(15e3),k:new d(65536),g:new d(32768)}}(),function(){const d=u.H.m;for(var f=0;f<32768;f++){let b=f;b=(2863311530&b)>>>1|(1431655765&b)<<1,b=(3435973836&b)>>>2|(858993459&b)<<2,b=(4042322160&b)>>>4|(252645135&b)<<4,b=(4278255360&b)>>>8|(16711935&b)<<8,d.r[f]=(b>>>16|b<<16)>>>17}function m(b,A,D){for(;A--!=0;)b.push(0,D)}for(f=0;f<32;f++)d.q[f]=d.S[f]<<3|d.T[f],d.c[f]=d.p[f]<<4|d.z[f];m(d._,144,8),m(d._,112,9),m(d._,24,7),m(d._,8,8),u.H.n(d._,9),u.H.A(d._,9,d.J),u.H.l(d._,9),m(d.$,32,5),u.H.n(d.$,5),u.H.A(d.$,5,d.h),u.H.l(d.$,5),m(d.Q,19,0),m(d.C,286,0),m(d.D,30,0),m(d.v,320,0)}(),u.H.N}();function a(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function s(u,d,f,m,b){let A=a(d);const D=Math.ceil(m*A/8);let E,x;A=Math.ceil(A/8);let N=u[f],O=0;if(N>1&&(u[f]=[0,0,1][N-2]),N==3)for(O=A;O<D;O++)u[O+1]=u[O+1]+(u[O+1-A]>>>1)&255;for(let P=0;P<b;P++)if(E=f+P*D,x=E+P+1,N=u[x-1],O=0,N==0)for(;O<D;O++)u[E+O]=u[x+O];else if(N==1){for(;O<A;O++)u[E+O]=u[x+O];for(;O<D;O++)u[E+O]=u[x+O]+u[E+O-A]}else if(N==2)for(;O<D;O++)u[E+O]=u[x+O]+u[E+O-D];else if(N==3){for(;O<A;O++)u[E+O]=u[x+O]+(u[E+O-D]>>>1);for(;O<D;O++)u[E+O]=u[x+O]+(u[E+O-D]+u[E+O-A]>>>1)}else{for(;O<A;O++)u[E+O]=u[x+O]+o(0,u[E+O-D],0);for(;O<D;O++)u[E+O]=u[x+O]+o(u[E+O-A],u[E+O-D],u[E+O-A-D])}return u}function o(u,d,f){const m=u+d-f,b=m-u,A=m-d,D=m-f;return b*b<=A*A&&b*b<=D*D?u:A*A<=D*D?d:f}function l(u,d,f){f.width=t.readUint(u,d),d+=4,f.height=t.readUint(u,d),d+=4,f.depth=u[d],d++,f.ctype=u[d],d++,f.compress=u[d],d++,f.filter=u[d],d++,f.interlace=u[d],d++}function h(u,d,f,m,b,A,D,E,x){const N=Math.min(d,b),O=Math.min(f,A);let P=0,R=0;for(let z=0;z<O;z++)for(let k=0;k<N;k++)if(D>=0&&E>=0?(P=z*d+k<<2,R=(E+z)*b+D+k<<2):(P=(-E+z)*d-D+k<<2,R=z*b+k<<2),x==0)m[R]=u[P],m[R+1]=u[P+1],m[R+2]=u[P+2],m[R+3]=u[P+3];else if(x==1){var _=u[P+3]*.00392156862745098,g=u[P]*_,y=u[P+1]*_,T=u[P+2]*_,C=m[R+3]*(1/255),I=m[R]*C,S=m[R+1]*C,U=m[R+2]*C;const M=1-_,H=_+C*M,B=H==0?0:1/H;m[R+3]=255*H,m[R+0]=(g+I*M)*B,m[R+1]=(y+S*M)*B,m[R+2]=(T+U*M)*B}else if(x==2)_=u[P+3],g=u[P],y=u[P+1],T=u[P+2],C=m[R+3],I=m[R],S=m[R+1],U=m[R+2],_==C&&g==I&&y==S&&T==U?(m[R]=0,m[R+1]=0,m[R+2]=0,m[R+3]=0):(m[R]=g,m[R+1]=y,m[R+2]=T,m[R+3]=_);else if(x==3){if(_=u[P+3],g=u[P],y=u[P+1],T=u[P+2],C=m[R+3],I=m[R],S=m[R+1],U=m[R+2],_==C&&g==I&&y==S&&T==U)continue;if(_<220&&C>20)return!1}return!0}return{decode:function(d){const f=new Uint8Array(d);let m=8;const b=t,A=b.readUshort,D=b.readUint,E={tabs:{},frames:[]},x=new Uint8Array(f.length);let N,O=0,P=0;const R=[137,80,78,71,13,10,26,10];for(var _=0;_<8;_++)if(f[_]!=R[_])throw"The input is not a PNG file!";for(;m<f.length;){const z=b.readUint(f,m);m+=4;const k=b.readASCII(f,m,4);if(m+=4,k=="IHDR")l(f,m,E);else if(k=="iCCP"){for(var g=m;f[g]!=0;)g++;b.readASCII(f,m,g-m),f[g+1];const M=f.slice(g+2,m+z);let H=null;try{H=r(M)}catch{H=i(M)}E.tabs[k]=H}else if(k=="CgBI")E.tabs[k]=f.slice(m,m+4);else if(k=="IDAT"){for(_=0;_<z;_++)x[O+_]=f[m+_];O+=z}else if(k=="acTL")E.tabs[k]={num_frames:D(f,m),num_plays:D(f,m+4)},N=new Uint8Array(f.length);else if(k=="fcTL"){P!=0&&((U=E.frames[E.frames.length-1]).data=n(E,N.slice(0,P),U.rect.width,U.rect.height),P=0);const M={x:D(f,m+12),y:D(f,m+16),width:D(f,m+4),height:D(f,m+8)};let H=A(f,m+22);H=A(f,m+20)/(H==0?100:H);const B={rect:M,delay:Math.round(1e3*H),dispose:f[m+24],blend:f[m+25]};E.frames.push(B)}else if(k=="fdAT"){for(_=0;_<z-4;_++)N[P+_]=f[m+_+4];P+=z-4}else if(k=="pHYs")E.tabs[k]=[b.readUint(f,m),b.readUint(f,m+4),f[m+8]];else if(k=="cHRM")for(E.tabs[k]=[],_=0;_<8;_++)E.tabs[k].push(b.readUint(f,m+4*_));else if(k=="tEXt"||k=="zTXt"){E.tabs[k]==null&&(E.tabs[k]={});var y=b.nextZero(f,m),T=b.readASCII(f,m,y-m),C=m+z-y-1;if(k=="tEXt")S=b.readASCII(f,y+1,C);else{var I=r(f.slice(y+2,y+2+C));S=b.readUTF8(I,0,I.length)}E.tabs[k][T]=S}else if(k=="iTXt"){E.tabs[k]==null&&(E.tabs[k]={}),y=0,g=m,y=b.nextZero(f,g),T=b.readASCII(f,g,y-g);const M=f[g=y+1];var S;f[g+1],g+=2,y=b.nextZero(f,g),b.readASCII(f,g,y-g),g=y+1,y=b.nextZero(f,g),b.readUTF8(f,g,y-g),C=z-((g=y+1)-m),M==0?S=b.readUTF8(f,g,C):(I=r(f.slice(g,g+C)),S=b.readUTF8(I,0,I.length)),E.tabs[k][T]=S}else if(k=="PLTE")E.tabs[k]=b.readBytes(f,m,z);else if(k=="hIST"){const M=E.tabs.PLTE.length/3;for(E.tabs[k]=[],_=0;_<M;_++)E.tabs[k].push(A(f,m+2*_))}else if(k=="tRNS")E.ctype==3?E.tabs[k]=b.readBytes(f,m,z):E.ctype==0?E.tabs[k]=A(f,m):E.ctype==2&&(E.tabs[k]=[A(f,m),A(f,m+2),A(f,m+4)]);else if(k=="gAMA")E.tabs[k]=b.readUint(f,m)/1e5;else if(k=="sRGB")E.tabs[k]=f[m];else if(k=="bKGD")E.ctype==0||E.ctype==4?E.tabs[k]=[A(f,m)]:E.ctype==2||E.ctype==6?E.tabs[k]=[A(f,m),A(f,m+2),A(f,m+4)]:E.ctype==3&&(E.tabs[k]=f[m]);else if(k=="IEND")break;m+=z,b.readUint(f,m),m+=4}var U;return P!=0&&((U=E.frames[E.frames.length-1]).data=n(E,N.slice(0,P),U.rect.width,U.rect.height)),E.data=n(E,x,E.width,E.height),delete E.compress,delete E.interlace,delete E.filter,E},toRGBA8:function(d){const f=d.width,m=d.height;if(d.tabs.acTL==null)return[e(d.data,f,m,d).buffer];const b=[];d.frames[0].data==null&&(d.frames[0].data=d.data);const A=f*m*4,D=new Uint8Array(A),E=new Uint8Array(A),x=new Uint8Array(A);for(let O=0;O<d.frames.length;O++){const P=d.frames[O],R=P.rect.x,_=P.rect.y,g=P.rect.width,y=P.rect.height,T=e(P.data,g,y,d);if(O!=0)for(var N=0;N<A;N++)x[N]=D[N];if(P.blend==0?h(T,g,y,D,f,m,R,_,0):P.blend==1&&h(T,g,y,D,f,m,R,_,1),b.push(D.buffer.slice(0)),P.dispose!=0){if(P.dispose==1)h(E,g,y,D,f,m,R,_,0);else if(P.dispose==2)for(N=0;N<A;N++)D[N]=x[N]}}return b},_paeth:o,_copyTile:h,_bin:t}}();(function(){const{_copyTile:t}=jr,{_bin:e}=jr,n=jr._paeth;var r={table:function(){const g=new Uint32Array(256);for(let y=0;y<256;y++){let T=y;for(let C=0;C<8;C++)1&T?T=3988292384^T>>>1:T>>>=1;g[y]=T}return g}(),update(g,y,T,C){for(let I=0;I<C;I++)g=r.table[255&(g^y[T+I])]^g>>>8;return g},crc:(g,y,T)=>4294967295^r.update(4294967295,g,y,T)};function i(g,y,T,C){y[T]+=g[0]*C>>4,y[T+1]+=g[1]*C>>4,y[T+2]+=g[2]*C>>4,y[T+3]+=g[3]*C>>4}function a(g){return Math.max(0,Math.min(255,g))}function s(g,y){const T=g[0]-y[0],C=g[1]-y[1],I=g[2]-y[2],S=g[3]-y[3];return T*T+C*C+I*I+S*S}function o(g,y,T,C,I,S,U){U==null&&(U=1);const z=C.length,k=[];for(var M=0;M<z;M++){const Y=C[M];k.push([Y>>>0&255,Y>>>8&255,Y>>>16&255,Y>>>24&255])}for(M=0;M<z;M++){let Y=4294967295;for(var H=0,B=0;B<z;B++){var X=s(k[M],k[B]);B!=M&&X<Y&&(Y=X,H=B)}}const re=new Uint32Array(I.buffer),V=new Int16Array(y*T*4),K=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(M=0;M<K.length;M++)K[M]=255*((K[M]+.5)/16-.5);for(let Y=0;Y<T;Y++)for(let le=0;le<y;le++){var $;M=4*(Y*y+le),U!=2?$=[a(g[M]+V[M]),a(g[M+1]+V[M+1]),a(g[M+2]+V[M+2]),a(g[M+3]+V[M+3])]:(X=K[4*(3&Y)+(3&le)],$=[a(g[M]+X),a(g[M+1]+X),a(g[M+2]+X),a(g[M+3]+X)]),H=0;let Te=16777215;for(B=0;B<z;B++){const ze=s($,k[B]);ze<Te&&(Te=ze,H=B)}const me=k[H],De=[$[0]-me[0],$[1]-me[1],$[2]-me[2],$[3]-me[3]];U==1&&(le!=y-1&&i(De,V,M+4,7),Y!=T-1&&(le!=0&&i(De,V,M+4*y-4,3),i(De,V,M+4*y,5),le!=y-1&&i(De,V,M+4*y+4,1))),S[M>>2]=H,re[M>>2]=C[H]}}function l(g,y,T,C,I){I==null&&(I={});const{crc:S}=r,U=e.writeUint,z=e.writeUshort,k=e.writeASCII;let M=8;const H=g.frames.length>1;let B,X=!1,re=33+(H?20:0);if(I.sRGB!=null&&(re+=13),I.pHYs!=null&&(re+=21),I.iCCP!=null&&(B=pako.deflate(I.iCCP),re+=21+B.length+4),g.ctype==3){for(var V=g.plte.length,K=0;K<V;K++)g.plte[K]>>>24!=255&&(X=!0);re+=8+3*V+4+(X?8+1*V+4:0)}for(var $=0;$<g.frames.length;$++)H&&(re+=38),re+=(me=g.frames[$]).cimg.length+12,$!=0&&(re+=4);re+=12;const Y=new Uint8Array(re),le=[137,80,78,71,13,10,26,10];for(K=0;K<8;K++)Y[K]=le[K];if(U(Y,M,13),M+=4,k(Y,M,"IHDR"),M+=4,U(Y,M,y),M+=4,U(Y,M,T),M+=4,Y[M]=g.depth,M++,Y[M]=g.ctype,M++,Y[M]=0,M++,Y[M]=0,M++,Y[M]=0,M++,U(Y,M,S(Y,M-17,17)),M+=4,I.sRGB!=null&&(U(Y,M,1),M+=4,k(Y,M,"sRGB"),M+=4,Y[M]=I.sRGB,M++,U(Y,M,S(Y,M-5,5)),M+=4),I.iCCP!=null){const De=13+B.length;U(Y,M,De),M+=4,k(Y,M,"iCCP"),M+=4,k(Y,M,"ICC profile"),M+=11,M+=2,Y.set(B,M),M+=B.length,U(Y,M,S(Y,M-(De+4),De+4)),M+=4}if(I.pHYs!=null&&(U(Y,M,9),M+=4,k(Y,M,"pHYs"),M+=4,U(Y,M,I.pHYs[0]),M+=4,U(Y,M,I.pHYs[1]),M+=4,Y[M]=I.pHYs[2],M++,U(Y,M,S(Y,M-13,13)),M+=4),H&&(U(Y,M,8),M+=4,k(Y,M,"acTL"),M+=4,U(Y,M,g.frames.length),M+=4,U(Y,M,I.loop!=null?I.loop:0),M+=4,U(Y,M,S(Y,M-12,12)),M+=4),g.ctype==3){for(U(Y,M,3*(V=g.plte.length)),M+=4,k(Y,M,"PLTE"),M+=4,K=0;K<V;K++){const De=3*K,ze=g.plte[K],We=255&ze,Ae=ze>>>8&255,en=ze>>>16&255;Y[M+De+0]=We,Y[M+De+1]=Ae,Y[M+De+2]=en}if(M+=3*V,U(Y,M,S(Y,M-3*V-4,3*V+4)),M+=4,X){for(U(Y,M,V),M+=4,k(Y,M,"tRNS"),M+=4,K=0;K<V;K++)Y[M+K]=g.plte[K]>>>24&255;M+=V,U(Y,M,S(Y,M-V-4,V+4)),M+=4}}let Te=0;for($=0;$<g.frames.length;$++){var me=g.frames[$];H&&(U(Y,M,26),M+=4,k(Y,M,"fcTL"),M+=4,U(Y,M,Te++),M+=4,U(Y,M,me.rect.width),M+=4,U(Y,M,me.rect.height),M+=4,U(Y,M,me.rect.x),M+=4,U(Y,M,me.rect.y),M+=4,z(Y,M,C[$]),M+=2,z(Y,M,1e3),M+=2,Y[M]=me.dispose,M++,Y[M]=me.blend,M++,U(Y,M,S(Y,M-30,30)),M+=4);const De=me.cimg;U(Y,M,(V=De.length)+($==0?0:4)),M+=4;const ze=M;k(Y,M,$==0?"IDAT":"fdAT"),M+=4,$!=0&&(U(Y,M,Te++),M+=4),Y.set(De,M),M+=V,U(Y,M,S(Y,ze,M-ze)),M+=4}return U(Y,M,0),M+=4,k(Y,M,"IEND"),M+=4,U(Y,M,S(Y,M-4,4)),M+=4,Y.buffer}function h(g,y,T){for(let C=0;C<g.frames.length;C++){const I=g.frames[C];I.rect.width;const S=I.rect.height,U=new Uint8Array(S*I.bpl+S);I.cimg=m(I.img,S,I.bpp,I.bpl,U,y,T)}}function u(g,y,T,C,I){const S=I[0],U=I[1],z=I[2],k=I[3],M=I[4],H=I[5];let B=6,X=8,re=255;for(var V=0;V<g.length;V++){const it=new Uint8Array(g[V]);for(var K=it.length,$=0;$<K;$+=4)re&=it[$+3]}const Y=re!=255,le=function(Je,$e,xt,Mt,ht,hn){const ot=[];for(var Ce=0;Ce<Je.length;Ce++){const kt=new Uint8Array(Je[Ce]),tn=new Uint32Array(kt.buffer);var Rt;let Bt=0,jt=0,wn=$e,Vn=xt,Xi=Mt?1:0;if(Ce!=0){const xl=hn||Mt||Ce==1||ot[Ce-2].dispose!=0?1:2;let Gr=0,$r=1e9;for(let Ir=0;Ir<xl;Ir++){var et=new Uint8Array(Je[Ce-1-Ir]);const Dr=new Uint32Array(Je[Ce-1-Ir]);let Tn=$e,zn=xt,dn=-1,Yr=-1;for(let Mn=0;Mn<xt;Mn++)for(let nn=0;nn<$e;nn++)tn[qe=Mn*$e+nn]!=Dr[qe]&&(nn<Tn&&(Tn=nn),nn>dn&&(dn=nn),Mn<zn&&(zn=Mn),Mn>Yr&&(Yr=Mn));dn==-1&&(Tn=zn=dn=Yr=0),ht&&((1&Tn)==1&&Tn--,(1&zn)==1&&zn--);const Xr=(dn-Tn+1)*(Yr-zn+1);Xr<$r&&($r=Xr,Gr=Ir,Bt=Tn,jt=zn,wn=dn-Tn+1,Vn=Yr-zn+1)}et=new Uint8Array(Je[Ce-1-Gr]),Gr==1&&(ot[Ce-1].dispose=2),Rt=new Uint8Array(wn*Vn*4),t(et,$e,xt,Rt,wn,Vn,-Bt,-jt,0),Xi=t(kt,$e,xt,Rt,wn,Vn,-Bt,-jt,3)?1:0,Xi==1?f(kt,$e,xt,Rt,{x:Bt,y:jt,width:wn,height:Vn}):t(kt,$e,xt,Rt,wn,Vn,-Bt,-jt,0)}else Rt=kt.slice(0);ot.push({rect:{x:Bt,y:jt,width:wn,height:Vn},img:Rt,blend:Xi,dispose:0})}if(Mt)for(Ce=0;Ce<ot.length;Ce++){if((zt=ot[Ce]).blend==1)continue;const kt=zt.rect,tn=ot[Ce-1].rect,Bt=Math.min(kt.x,tn.x),jt=Math.min(kt.y,tn.y),wn={x:Bt,y:jt,width:Math.max(kt.x+kt.width,tn.x+tn.width)-Bt,height:Math.max(kt.y+kt.height,tn.y+tn.height)-jt};ot[Ce-1].dispose=1,Ce-1!=0&&d(Je,$e,xt,ot,Ce-1,wn,ht),d(Je,$e,xt,ot,Ce,wn,ht)}let gt=0;if(Je.length!=1)for(var qe=0;qe<ot.length;qe++){var zt;gt+=(zt=ot[qe]).rect.width*zt.rect.height}return ot}(g,y,T,S,U,z),Te={},me=[],De=[];if(C!=0){const it=[];for($=0;$<le.length;$++)it.push(le[$].img.buffer);const Je=function(ht){let hn=0;for(var ot=0;ot<ht.length;ot++)hn+=ht[ot].byteLength;const Ce=new Uint8Array(hn);let Rt=0;for(ot=0;ot<ht.length;ot++){const et=new Uint8Array(ht[ot]),gt=et.length;for(let qe=0;qe<gt;qe+=4){let zt=et[qe],kt=et[qe+1],tn=et[qe+2];const Bt=et[qe+3];Bt==0&&(zt=kt=tn=0),Ce[Rt+qe]=zt,Ce[Rt+qe+1]=kt,Ce[Rt+qe+2]=tn,Ce[Rt+qe+3]=Bt}Rt+=gt}return Ce.buffer}(it),$e=A(Je,C);for($=0;$<$e.plte.length;$++)me.push($e.plte[$].est.rgba);let xt=0;for($=0;$<le.length;$++){const Mt=(We=le[$]).img.length;var ze=new Uint8Array($e.inds.buffer,xt>>2,Mt>>2);De.push(ze);const ht=new Uint8Array($e.abuf,xt,Mt);H&&o(We.img,We.rect.width,We.rect.height,me,ht,ze),We.img.set(ht),xt+=Mt}}else for(V=0;V<le.length;V++){var We=le[V];const it=new Uint32Array(We.img.buffer);var Ae=We.rect.width;for(K=it.length,ze=new Uint8Array(K),De.push(ze),$=0;$<K;$++){const Je=it[$];if($!=0&&Je==it[$-1])ze[$]=ze[$-1];else if($>Ae&&Je==it[$-Ae])ze[$]=ze[$-Ae];else{let $e=Te[Je];if($e==null&&(Te[Je]=$e=me.length,me.push(Je),me.length>=300))break;ze[$]=$e}}}const en=me.length;for(en<=256&&M==0&&(X=en<=2?1:en<=4?2:en<=16?4:8,X=Math.max(X,k)),V=0;V<le.length;V++){(We=le[V]).rect.x,We.rect.y,Ae=We.rect.width;const it=We.rect.height;let Je=We.img;new Uint32Array(Je.buffer);let $e=4*Ae,xt=4;if(en<=256&&M==0){$e=Math.ceil(X*Ae/8);var un=new Uint8Array($e*it);const Mt=De[V];for(let ht=0;ht<it;ht++){$=ht*$e;const hn=ht*Ae;if(X==8)for(var Ze=0;Ze<Ae;Ze++)un[$+Ze]=Mt[hn+Ze];else if(X==4)for(Ze=0;Ze<Ae;Ze++)un[$+(Ze>>1)]|=Mt[hn+Ze]<<4-4*(1&Ze);else if(X==2)for(Ze=0;Ze<Ae;Ze++)un[$+(Ze>>2)]|=Mt[hn+Ze]<<6-2*(3&Ze);else if(X==1)for(Ze=0;Ze<Ae;Ze++)un[$+(Ze>>3)]|=Mt[hn+Ze]<<7-1*(7&Ze)}Je=un,B=3,xt=1}else if(Y==0&&le.length==1){un=new Uint8Array(Ae*it*3);const Mt=Ae*it;for($=0;$<Mt;$++){const ht=3*$,hn=4*$;un[ht]=Je[hn],un[ht+1]=Je[hn+1],un[ht+2]=Je[hn+2]}Je=un,B=2,xt=3,$e=3*Ae}We.img=Je,We.bpl=$e,We.bpp=xt}return{ctype:B,depth:X,plte:me,frames:le}}function d(g,y,T,C,I,S,U){const z=Uint8Array,k=Uint32Array,M=new z(g[I-1]),H=new k(g[I-1]),B=I+1<g.length?new z(g[I+1]):null,X=new z(g[I]),re=new k(X.buffer);let V=y,K=T,$=-1,Y=-1;for(let Te=0;Te<S.height;Te++)for(let me=0;me<S.width;me++){const De=S.x+me,ze=S.y+Te,We=ze*y+De,Ae=re[We];Ae==0||C[I-1].dispose==0&&H[We]==Ae&&(B==null||B[4*We+3]!=0)||(De<V&&(V=De),De>$&&($=De),ze<K&&(K=ze),ze>Y&&(Y=ze))}$==-1&&(V=K=$=Y=0),U&&((1&V)==1&&V--,(1&K)==1&&K--),S={x:V,y:K,width:$-V+1,height:Y-K+1};const le=C[I];le.rect=S,le.blend=1,le.img=new Uint8Array(S.width*S.height*4),C[I-1].dispose==0?(t(M,y,T,le.img,S.width,S.height,-S.x,-S.y,0),f(X,y,T,le.img,S)):t(X,y,T,le.img,S.width,S.height,-S.x,-S.y,0)}function f(g,y,T,C,I){t(g,y,T,C,I.width,I.height,-I.x,-I.y,2)}function m(g,y,T,C,I,S,U){const z=[];let k,M=[0,1,2,3,4];S!=-1?M=[S]:(y*C>5e5||T==1)&&(M=[0]),U&&(k={level:0});const H=kP;for(var B=0;B<M.length;B++){for(let V=0;V<y;V++)b(I,g,V,C,T,M[B]);z.push(H.deflate(I,k))}let X,re=1e9;for(B=0;B<z.length;B++)z[B].length<re&&(X=B,re=z[B].length);return z[X]}function b(g,y,T,C,I,S){const U=T*C;let z=U+T;if(g[z]=S,z++,S==0)if(C<500)for(var k=0;k<C;k++)g[z+k]=y[U+k];else g.set(new Uint8Array(y.buffer,U,C),z);else if(S==1){for(k=0;k<I;k++)g[z+k]=y[U+k];for(k=I;k<C;k++)g[z+k]=y[U+k]-y[U+k-I]+256&255}else if(T==0){for(k=0;k<I;k++)g[z+k]=y[U+k];if(S==2)for(k=I;k<C;k++)g[z+k]=y[U+k];if(S==3)for(k=I;k<C;k++)g[z+k]=y[U+k]-(y[U+k-I]>>1)+256&255;if(S==4)for(k=I;k<C;k++)g[z+k]=y[U+k]-n(y[U+k-I],0,0)+256&255}else{if(S==2)for(k=0;k<C;k++)g[z+k]=y[U+k]+256-y[U+k-C]&255;if(S==3){for(k=0;k<I;k++)g[z+k]=y[U+k]+256-(y[U+k-C]>>1)&255;for(k=I;k<C;k++)g[z+k]=y[U+k]+256-(y[U+k-C]+y[U+k-I]>>1)&255}if(S==4){for(k=0;k<I;k++)g[z+k]=y[U+k]+256-n(0,y[U+k-C],0)&255;for(k=I;k<C;k++)g[z+k]=y[U+k]+256-n(y[U+k-I],y[U+k-C],y[U+k-I-C])&255}}}function A(g,y){const T=new Uint8Array(g),C=T.slice(0),I=new Uint32Array(C.buffer),S=D(C,y),U=S[0],z=S[1],k=T.length,M=new Uint8Array(k>>2);let H;if(T.length<2e7)for(var B=0;B<k;B+=4)H=E(U,X=T[B]*(1/255),re=T[B+1]*(1/255),V=T[B+2]*(1/255),K=T[B+3]*(1/255)),M[B>>2]=H.ind,I[B>>2]=H.est.rgba;else for(B=0;B<k;B+=4){var X=T[B]*.00392156862745098,re=T[B+1]*(1/255),V=T[B+2]*(1/255),K=T[B+3]*(1/255);for(H=U;H.left;)H=x(H.est,X,re,V,K)<=0?H.left:H.right;M[B>>2]=H.ind,I[B>>2]=H.est.rgba}return{abuf:C.buffer,inds:M,plte:z}}function D(g,y,T){T==null&&(T=1e-4);const C=new Uint32Array(g.buffer),I={i0:0,i1:g.length,bst:null,est:null,tdst:0,left:null,right:null};I.bst=P(g,I.i0,I.i1),I.est=R(I.bst);const S=[I];for(;S.length<y;){let z=0,k=0;for(var U=0;U<S.length;U++)S[U].est.L>z&&(z=S[U].est.L,k=U);if(z<T)break;const M=S[k],H=N(g,C,M.i0,M.i1,M.est.e,M.est.eMq255);if(M.i0>=H||M.i1<=H){M.est.L=0;continue}const B={i0:M.i0,i1:H,bst:null,est:null,tdst:0,left:null,right:null};B.bst=P(g,B.i0,B.i1),B.est=R(B.bst);const X={i0:H,i1:M.i1,bst:null,est:null,tdst:0,left:null,right:null};for(X.bst={R:[],m:[],N:M.bst.N-B.bst.N},U=0;U<16;U++)X.bst.R[U]=M.bst.R[U]-B.bst.R[U];for(U=0;U<4;U++)X.bst.m[U]=M.bst.m[U]-B.bst.m[U];X.est=R(X.bst),M.left=B,M.right=X,S[k]=B,S.push(X)}for(S.sort((z,k)=>k.bst.N-z.bst.N),U=0;U<S.length;U++)S[U].ind=U;return[I,S]}function E(g,y,T,C,I){if(g.left==null)return g.tdst=function(B,X,re,V,K){const $=X-B[0],Y=re-B[1],le=V-B[2],Te=K-B[3];return $*$+Y*Y+le*le+Te*Te}(g.est.q,y,T,C,I),g;const S=x(g.est,y,T,C,I);let U=g.left,z=g.right;S>0&&(U=g.right,z=g.left);const k=E(U,y,T,C,I);if(k.tdst<=S*S)return k;const M=E(z,y,T,C,I);return M.tdst<k.tdst?M:k}function x(g,y,T,C,I){const{e:S}=g;return S[0]*y+S[1]*T+S[2]*C+S[3]*I-g.eMq}function N(g,y,T,C,I,S){for(C-=4;T<C;){for(;O(g,T,I)<=S;)T+=4;for(;O(g,C,I)>S;)C-=4;if(T>=C)break;const U=y[T>>2];y[T>>2]=y[C>>2],y[C>>2]=U,T+=4,C-=4}for(;O(g,T,I)>S;)T-=4;return T+4}function O(g,y,T){return g[y]*T[0]+g[y+1]*T[1]+g[y+2]*T[2]+g[y+3]*T[3]}function P(g,y,T){const C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=[0,0,0,0],S=T-y>>2;for(let U=y;U<T;U+=4){const z=g[U]*.00392156862745098,k=g[U+1]*(1/255),M=g[U+2]*(1/255),H=g[U+3]*(1/255);I[0]+=z,I[1]+=k,I[2]+=M,I[3]+=H,C[0]+=z*z,C[1]+=z*k,C[2]+=z*M,C[3]+=z*H,C[5]+=k*k,C[6]+=k*M,C[7]+=k*H,C[10]+=M*M,C[11]+=M*H,C[15]+=H*H}return C[4]=C[1],C[8]=C[2],C[9]=C[6],C[12]=C[3],C[13]=C[7],C[14]=C[11],{R:C,m:I,N:S}}function R(g){const{R:y}=g,{m:T}=g,{N:C}=g,I=T[0],S=T[1],U=T[2],z=T[3],k=C==0?0:1/C,M=[y[0]-I*I*k,y[1]-I*S*k,y[2]-I*U*k,y[3]-I*z*k,y[4]-S*I*k,y[5]-S*S*k,y[6]-S*U*k,y[7]-S*z*k,y[8]-U*I*k,y[9]-U*S*k,y[10]-U*U*k,y[11]-U*z*k,y[12]-z*I*k,y[13]-z*S*k,y[14]-z*U*k,y[15]-z*z*k],H=M,B=_;let X=[Math.random(),Math.random(),Math.random(),Math.random()],re=0,V=0;if(C!=0)for(let $=0;$<16&&(X=B.multVec(H,X),V=Math.sqrt(B.dot(X,X)),X=B.sml(1/V,X),!($!=0&&Math.abs(V-re)<1e-9));$++)re=V;const K=[I*k,S*k,U*k,z*k];return{Cov:M,q:K,e:X,L:re,eMq255:B.dot(B.sml(255,K),X),eMq:B.dot(X,K),rgba:(Math.round(255*K[3])<<24|Math.round(255*K[2])<<16|Math.round(255*K[1])<<8|Math.round(255*K[0])<<0)>>>0}}var _={multVec:(g,y)=>[g[0]*y[0]+g[1]*y[1]+g[2]*y[2]+g[3]*y[3],g[4]*y[0]+g[5]*y[1]+g[6]*y[2]+g[7]*y[3],g[8]*y[0]+g[9]*y[1]+g[10]*y[2]+g[11]*y[3],g[12]*y[0]+g[13]*y[1]+g[14]*y[2]+g[15]*y[3]],dot:(g,y)=>g[0]*y[0]+g[1]*y[1]+g[2]*y[2]+g[3]*y[3],sml:(g,y)=>[g*y[0],g*y[1],g*y[2],g*y[3]]};jr.encode=function(y,T,C,I,S,U,z){I==null&&(I=0),z==null&&(z=!1);const k=u(y,T,C,I,[!1,!1,!1,0,z,!1]);return h(k,-1),l(k,T,C,S,U)},jr.encodeLL=function(y,T,C,I,S,U,z,k){const M={ctype:0+(I==1?0:2)+(S==0?0:4),depth:U,frames:[]},H=(I+S)*U,B=H*T;for(let X=0;X<y.length;X++)M.frames.push({rect:{x:0,y:0,width:T,height:C},img:new Uint8Array(y[X]),blend:0,dispose:1,bpp:Math.ceil(H/8),bpl:Math.ceil(B/8)});return h(M,0,!0),l(M,T,C,z,k)},jr.encode.compress=u,jr.encode.dither=o,jr.quantize=A,jr.quantize.getKDtree=D,jr.quantize.getNearest=E})();const zS={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,a=t.getContext("2d").getImageData(0,0,n,r),s=new Uint32Array(a.data.buffer),o=(32*n+31)/32<<2,l=o*r,h=122+l,u=new ArrayBuffer(h),d=new DataView(u),f=1<<20;let m,b,A,D,E=f,x=0,N=0,O=0;function P(g){d.setUint16(N,g,!0),N+=2}function R(g){d.setUint32(N,g,!0),N+=4}function _(g){N+=g}P(19778),R(h),_(4),R(122),R(108),R(n),R(-r>>>0),P(1),P(32),R(3),R(l),R(2835),R(2835),_(8),R(16711680),R(65280),R(255),R(4278190080),R(1466527264),function g(){for(;x<r&&E>0;){for(D=122+x*o,m=0;m<i;)E--,b=s[O++],A=b>>>24,d.setUint32(D+m,b<<8|A),m+=4;x++}O<s.length?(E=f,setTimeout(g,zS._dly)):e(u)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var Xn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},jP={[Xn.CHROME]:16384,[Xn.FIREFOX]:11180,[Xn.DESKTOP_SAFARI]:16384,[Xn.IE]:8192,[Xn.IOS]:4096,[Xn.ETC]:8192};const Wy=typeof window<"u",BS=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,qd=Wy&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),PP=(Wy||BS)&&(qd&&qd.getOriginalSymbol(window,"File")||typeof File<"u"&&File),FS=(Wy||BS)&&(qd&&qd.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Zy(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),a=i[0].match(/:(.*?);/)[1],s=globalThis.atob(i[1]);let o=s.length;const l=new Uint8Array(o);for(;o--;)l[o]=s.charCodeAt(o);const h=new Blob([l],{type:a});h.name=e,h.lastModified=n,r(h)})}function HS(t){return new Promise((e,n)=>{const r=new FS;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function qS(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function gs(){if(gs.cachedResult!==void 0)return gs.cachedResult;let t=Xn.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=Xn.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=Xn.IOS:/Safari/i.test(e)?t=Xn.DESKTOP_SAFARI:/Firefox/i.test(e)?t=Xn.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=Xn.IE),gs.cachedResult=t,gs.cachedResult}function GS(t,e){const n=gs(),r=jP[n];let i=t,a=e,s=i*a;const o=i>a?a/i:i/a;for(;s>r*r;){const l=(r+i)/2,h=(r+a)/2;l<h?(a=h,i=h*o):(a=l*o,i=l),s=i*a}return{width:i,height:a}}function Hf(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function $S(t,e){const{width:n,height:r}=GS(t.width,t.height),[i,a]=Hf(n,r);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,i.width,i.height)),a.drawImage(t,0,0,i.width,i.height),i}function Fh(){return Fh.cachedResult!==void 0||(Fh.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Fh.cachedResult}function Gd(t,e={}){return new Promise(function(n,r){let i,a;var s=function(){try{return a=$S(i,e.fileType||t.type),n([i,a])}catch(l){return r(l)}},o=function(l){try{var h=function(u){try{throw u}catch(d){return r(d)}};try{let u;return HS(t).then(function(d){try{return u=d,qS(u).then(function(f){try{return i=f,function(){try{return s()}catch(m){return r(m)}}()}catch(m){return h(m)}},h)}catch(f){return h(f)}},h)}catch(u){h(u)}}catch(u){return r(u)}};try{if(Fh()||[Xn.DESKTOP_SAFARI,Xn.MOBILE_SAFARI].includes(gs()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return i=l,s()}catch{return o()}},o)}catch{o()}})}function $d(t,e,n,r,i=1){return new Promise(function(a,s){let o;if(e==="image/png"){let d,f,m;return d=t.getContext("2d"),{data:f}=d.getImageData(0,0,t.width,t.height),m=jr.encode([f.buffer],t.width,t.height,4096*i),o=new Blob([m],{type:e}),o.name=n,o.lastModified=r,l.call(this)}{let d=function(){return l.call(this)};var h=d;if(e==="image/bmp")return new Promise(f=>zS.toBlob(t,f)).then((function(f){try{return o=f,o.name=n,o.lastModified=r,d.call(this)}catch(m){return s(m)}}).bind(this),s);{let f=function(){return d.call(this)};var u=f;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(m){try{return o=m,o.name=n,o.lastModified=r,f.call(this)}catch(b){return s(b)}}).bind(this),s);{let m;return m=t.toDataURL(e,i),Zy(m,n,r).then((function(b){try{return o=b,f.call(this)}catch(A){return s(A)}}).bind(this),s)}}}function l(){return a(o)}})}function Jr(t){t.width=0,t.height=0}function Co(){return new Promise(function(t,e){let n,r,i,a;return Co.cachedResult!==void 0?t(Co.cachedResult):Zy("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return n=s,Gd(n).then(function(o){try{return r=o[1],$d(r,n.type,n.name,n.lastModified).then(function(l){try{return i=l,Jr(r),Gd(i).then(function(h){try{return a=h[0],Co.cachedResult=a.width===1&&a.height===2,t(Co.cachedResult)}catch(u){return e(u)}},e)}catch(h){return e(h)}},e)}catch(l){return e(l)}},e)}catch(o){return e(o)}},e)})}function YS(t){return new Promise((e,n)=>{const r=new FS;r.onload=i=>{const a=new DataView(i.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const s=a.byteLength;let o=2;for(;o<s;){if(a.getUint16(o+2,!1)<=8)return e(-1);const l=a.getUint16(o,!1);if(o+=2,l==65505){if(a.getUint32(o+=2,!1)!=1165519206)return e(-1);const h=a.getUint16(o+=6,!1)==18761;o+=a.getUint32(o+4,h);const u=a.getUint16(o,h);o+=2;for(let d=0;d<u;d++)if(a.getUint16(o+12*d,h)==274)return e(a.getUint16(o+12*d+8,h))}else{if((65280&l)!=65280)break;o+=a.getUint16(o,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function XS(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let a,s=t;return isFinite(i)&&(n>i||r>i)&&([s,a]=Hf(n,r),n>r?(s.width=i,s.height=r/n*i):(s.width=n/r*i,s.height=i),a.drawImage(t,0,0,s.width,s.height),Jr(t)),s}function QS(t,e){const{width:n}=t,{height:r}=t,[i,a]=Hf(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:a.transform(-1,0,0,1,n,0);break;case 3:a.transform(-1,0,0,-1,n,r);break;case 4:a.transform(1,0,0,-1,0,r);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,r,0);break;case 7:a.transform(0,-1,-1,0,r,n);break;case 8:a.transform(0,-1,1,0,0,n)}return a.drawImage(t,0,0,n,r),Jr(t),i}function cE(t,e,n=0){return new Promise(function(r,i){let a,s,o,l,h,u,d,f,m,b,A,D,E,x,N,O,P,R,_,g;function y(C=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=C,e.onProgress(Math.min(a,100))}function T(C){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(C,a),100),e.onProgress(a)}return a=n,s=e.maxIteration||10,o=1024*e.maxSizeMB*1024,y(),Gd(t,e).then((function(C){try{return[,l]=C,y(),h=XS(l,e),y(),new Promise(function(I,S){var U;if(!(U=e.exifOrientation))return YS(t).then((function(k){try{return U=k,z.call(this)}catch(M){return S(M)}}).bind(this),S);function z(){return I(U)}return z.call(this)}).then((function(I){try{return u=I,y(),Co().then((function(S){try{return d=S?h:QS(h,u),y(),f=e.initialQuality||1,m=e.fileType||t.type,$d(d,m,t.name,t.lastModified,f).then((function(U){try{{let H=function(){if(s--&&(N>o||N>E)){let X,re;return X=g?.95*_.width:_.width,re=g?.95*_.height:_.height,[P,R]=Hf(X,re),R.drawImage(_,0,0,X,re),f*=m==="image/png"?.85:.95,$d(P,m,t.name,t.lastModified,f).then(function(V){try{return O=V,Jr(_),_=P,N=O.size,T(Math.min(99,Math.floor((x-N)/(x-o)*100))),H}catch(K){return i(K)}},i)}return[1]},B=function(){return Jr(_),Jr(P),Jr(h),Jr(d),Jr(l),T(100),r(O)};var k=H,M=B;if(b=U,y(),A=b.size>o,D=b.size>t.size,!A&&!D)return T(100),r(b);var z;return E=t.size,x=b.size,N=x,_=d,g=!e.alwaysKeepResolution&&A,(z=(function(X){for(;X;){if(X.then)return void X.then(z,i);try{if(X.pop){if(X.length)return X.pop()?B.call(this):X;X=H}else X=X.call(this)}catch(re){return i(re)}}}).bind(this))(H)}}catch(H){return i(H)}}).bind(this),i)}catch(U){return i(U)}}).bind(this),i)}catch(S){return i(S)}}).bind(this),i)}catch(I){return i(I)}}).bind(this),i)})}const UP=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Km;function LP(t,e){return new Promise((n,r)=>{Km||(Km=function(s){const o=[];return o.push(s),URL.createObjectURL(new Blob(o))}(UP));const i=new Worker(Km);i.addEventListener("message",function(s){if(e.signal&&e.signal.aborted)i.terminate();else if(s.data.progress===void 0){if(s.data.error)return r(new Error(s.data.error)),void i.terminate();n(s.data.file),i.terminate()}else e.onProgress(s.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function pn(t,e){return new Promise(function(n,r){let i,a,s,o,l,h;if(i={...e},s=0,{onProgress:o}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=m=>{s=m,typeof o=="function"&&o(s)},!(t instanceof Blob||t instanceof PP))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(h=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||h)return cE(t,i).then((function(m){try{return a=m,f.call(this)}catch(b){return r(b)}}).bind(this),r);var u=(function(){try{return f.call(this)}catch(m){return r(m)}}).bind(this),d=function(m){try{return cE(t,i).then(function(b){try{return a=b,u()}catch(A){return r(A)}},r)}catch(b){return r(b)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",LP(t,i).then(function(m){try{return a=m,u()}catch{return d()}},d)}catch{d()}function f(){try{a.name=t.name,a.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(a=VS(t,a))}catch{}return n(a)}})}pn.getDataUrlFromFile=HS,pn.getFilefromDataUrl=Zy,pn.loadImage=qS,pn.drawImageInCanvas=$S,pn.drawFileInCanvas=Gd,pn.canvasToFile=$d,pn.getExifOrientation=YS,pn.handleMaxWidthOrHeight=XS,pn.followExifOrientation=QS,pn.cleanupCanvasMemory=Jr,pn.isAutoOrientationInBrowser=Co,pn.approximateBelowMaximumCanvasSizeOfBrowser=GS,pn.copyExifWithoutOrientation=VS,pn.getBrowserName=gs,pn.version="2.0.2";async function VP(t,e){try{return await pn(t,e)}catch(n){return console.error("Image compression failed:",n),t}}const uE=async(t,e,n)=>{const{storage:r}=Ys(),i=US(r,`users/${e}/character-portraits/${n}`);return await TP(i,t,Ar.DATA_URL),PS(i)},zP=t=>Math.ceil(t/4)+1,Dg=t=>Math.floor((t-10)/2),BP=t=>[{name:"Acrobatics",ability:"dexterity",proficient:!1,expertise:!1},{name:"Animal Handling",ability:"wisdom",proficient:!1,expertise:!1},{name:"Arcana",ability:"intelligence",proficient:!1,expertise:!1},{name:"Athletics",ability:"strength",proficient:!1,expertise:!1},{name:"Deception",ability:"charisma",proficient:!1,expertise:!1},{name:"History",ability:"intelligence",proficient:!1,expertise:!1},{name:"Insight",ability:"wisdom",proficient:!1,expertise:!1},{name:"Intimidation",ability:"charisma",proficient:!1,expertise:!1},{name:"Investigation",ability:"intelligence",proficient:!1,expertise:!1},{name:"Medicine",ability:"wisdom",proficient:!1,expertise:!1},{name:"Nature",ability:"intelligence",proficient:!1,expertise:!1},{name:"Perception",ability:"wisdom",proficient:!1,expertise:!1},{name:"Performance",ability:"charisma",proficient:!1,expertise:!1},{name:"Persuasion",ability:"charisma",proficient:!1,expertise:!1},{name:"Religion",ability:"intelligence",proficient:!1,expertise:!1},{name:"Sleight of Hand",ability:"dexterity",proficient:!1,expertise:!1},{name:"Stealth",ability:"dexterity",proficient:!1,expertise:!1},{name:"Survival",ability:"wisdom",proficient:!1,expertise:!1}],Qc=()=>{const t={strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10};return{id:`new_${Date.now()}`,lastUpdated:Date.now(),name:"",class:"",subclass:"",level:1,race:"",alignment:"",background:"",playerName:"",experiencePoints:0,abilityScores:t,inspiration:0,proficiencyBonus:zP(1),savingThrows:{strength:{proficient:!1},dexterity:{proficient:!1},constitution:{proficient:!1},intelligence:{proficient:!1},wisdom:{proficient:!1},charisma:{proficient:!1}},skills:BP(),unarmoredDefense:{base:10,abilities:["dexterity"]},initiative:Dg(t.dexterity),speed:30,hp:{max:10,current:10,temporary:0},hitDice:{total:"1d8",used:0},deathSaves:{successes:0,failures:0},personalityTraits:"",ideals:"",bonds:"",flaws:"",languages:"Common",attacks:[],currency:{cp:0,sp:0,ep:0,gp:0,pp:0},equipment:[],featuresAndTraits:[],notes:"",dmNotes:"",spellcastingAbility:"",spells:[],spellSlots:{1:{max:0,used:0},2:{max:0,used:0},3:{max:0,used:0},4:{max:0,used:0},5:{max:0,used:0},6:{max:0,used:0},7:{max:0,used:0},8:{max:0,used:0},9:{max:0,used:0}},customResources:[],imageUrl:""}},KS=t=>{var a,s;if(!t)return 10;const e=Dg(t.abilityScores.dexterity);let n=0;const r=(a=t.equipment)==null?void 0:a.find(o=>o.equipped&&["light","medium","heavy"].includes(o.armorType||"")),i=(s=t.equipment)==null?void 0:s.find(o=>o.equipped&&o.armorType==="shield");if(r){const o=r.armorClass||0;switch(r.armorType){case"light":n=o+e;break;case"medium":n=o+Math.min(2,e);break;case"heavy":n=o;break}}else{const o=t.unarmoredDefense||{base:10,abilities:[]};let l=o.base;o.abilities.forEach(h=>{l+=Dg(t.abilityScores[h])}),n=l}return i&&(n+=i.armorClass||2),n},WS="runica-characters",Du=()=>{try{const t=localStorage.getItem(WS);return t?JSON.parse(t).map(e=>({...Qc(),...e})):[]}catch(t){return console.error("Error reading from local storage",t),[]}},Yd=t=>{try{localStorage.setItem(WS,JSON.stringify(t))}catch(e){console.error("Error saving to local storage",e)}},Jy=()=>{try{const{db:t,auth:e}=Ys();return e.currentUser?Xk(t,"users",e.currentUser.uid,"characters"):null}catch{return null}},e0=t=>{const e=Jy();return e?iS(e,t):null},FP=t=>{const e=Jy();return e?fj(sj(e),n=>{const r=n.docs.map(i=>i.data());t(r)}):(t(Du()),()=>{})},ZS=async t=>{if(t==="new")return Qc();const e=e0(t);if(e){const n=await cj(e);return n.exists()?n.data():null}else return Du().find(n=>n.id===t)||null},JS=async t=>{const e={...t,lastUpdated:Date.now()},n=e0(e.id);if(n)await hj(n,e);else{const r=Du(),i=r.findIndex(a=>a.id===e.id);i>-1?r[i]=e:r.push(e),Yd(r)}return e},HP=async t=>{const e=e0(t);if(e)await dj(e);else{const n=Du();Yd(n.filter(r=>r.id!==t))}},qP=async()=>{let t,e;try{({db:t,auth:e}=Ys())}catch{return}if(!e.currentUser||!uE)return;const n=Du();if(n.length===0||!window.confirm("You have local characters saved on this device. Do you want to move them to your account? This will merge them with any existing characters on your account."))return;const r=Jy();if(!r)return;const i=pj(t),s=(await uj(r)).docs.map(l=>l.data());let o=0;for(const l of n){const h=s.find(u=>u.id===l.id);if(!h||l.lastUpdated>(h.lastUpdated||0)){const u={...l};if(u.imageUrl&&u.imageUrl.startsWith("data:image"))try{const f=e.currentUser.uid;u.imageUrl=await uE(u.imageUrl,f,u.id)}catch(f){console.error(`Failed to upload image for character ${u.name}. It will be saved with the local data URL.`,f),u.imageUrl=""}const d=iS(r,l.id);i.set(d,u),o++}}if(o>0)try{await i.commit(),alert(`${o} character(s) migrated to your account.`),Yd([])}catch(l){console.error("Failed to migrate characters:",l),alert("There was an error migrating your characters. They remain on this device for now.")}else alert("No characters needed to be migrated. Your cloud data is up to date."),Yd([])},eR=q.createContext({currentUser:null,loading:!0,signInWithGoogle:()=>Promise.reject("Auth provider not initialized"),signOutUser:()=>Promise.reject("Auth provider not initialized")}),qf=()=>q.useContext(eR),GP=({children:t})=>{const[e,n]=q.useState(null),[r,i]=q.useState(!0);q.useEffect(()=>IP(async l=>{n(l),l&&(await l.getIdToken(),await qP()),i(!1)}),[]);const a={currentUser:e,loading:r,signInWithGoogle:CP,signOutUser:NP};return p.jsx(eR.Provider,{value:a,children:t})},$P=["theme-amber","theme-sapphire","theme-twilight","theme-evergreen","theme-crimson","theme-rose","theme-veridian","theme-obsidian","theme-solaris","theme-aether","theme-grove","theme-celestial","theme-nocturne"],tR=q.createContext(void 0),YP=({children:t})=>{const[e,n]=q.useState(()=>localStorage.getItem("app-theme")||"theme-amber");q.useEffect(()=>{const i=window.document.documentElement;i.classList.remove(...$P),i.classList.add(e),localStorage.setItem("app-theme",e)},[e]);const r=q.useMemo(()=>({theme:e,setTheme:n}),[e]);return p.jsx(tR.Provider,{value:r,children:t})},XP=()=>{const t=q.useContext(tR);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},nR=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),t0=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),QP=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),KP=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.5 21.75l-.398-1.188a3.375 3.375 0 00-2.924-2.924l-1.188-.398 1.188-.398a3.375 3.375 0 002.924-2.924l.398-1.188.398 1.188a3.375 3.375 0 002.924 2.924l1.188.398-1.188.398a3.375 3.375 0 00-2.924 2.924z"})}),rR=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})}),WP=t=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",...t,children:[p.jsx("path",{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V7l-4-4z"}),p.jsx("path",{d:"M17 3v5H7V3"}),p.jsx("rect",{x:"9",y:"13",width:"6",height:"5",rx:"1"})]}),Xs=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.134H8.09a2.09 2.09 0 00-2.09 2.134v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),Qs=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),iR=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),ZP=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),JP=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 100-2.186m0 2.186c-.18.324-.283.696-.283 1.093s.103.77.283 1.093m-7.5-12.28a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093"})}),eU=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),Ou=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),tU=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 12l4.5 4.5L18.75 9"})}),nU=t=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.242 1.417l-1.07 1.07c-.127.127-.213.289-.27.461a4.5 4.5 0 010 .752c.057.172.143.334.27.461l1.07 1.07c.48.48.577 1.232.242 1.417l-1.296 2.247a1.125 1.125 0 01-1.37.49l-1.217-.456a4.5 4.5 0 01-1.075-.124.938.938 0 01-.22.127c-.332.183-.582.495-.645.87l-.213 1.281c-.09.543-.56.94-1.11.94h-2.593c-.55 0-1.02-.398-1.11-.94l-.213-1.281a4.5 4.5 0 01-.645-.87.938.938 0 01-.22-.127 4.5 4.5 0 01-1.075-.124l-1.217.456a1.125 1.125 0 01-1.37-.49l-1.296-2.247a1.125 1.125 0 01.242-1.417l1.07-1.07c.127-.127.213-.289.27-.461a4.5 4.5 0 010-.752 4.49 4.49 0 01-.27-.461l-1.07-1.07a1.125 1.125 0 01-.242-1.417l1.296-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.075-.124.073-.044.146-.087.22-.127.332-.183-.582-.495-.645-.87l.213-1.281z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),rU=t=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"48px",height:"48px",...t,children:[p.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),p.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),p.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),p.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.574l6.19,5.238C39.99,36.62,44,30.638,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),iU=()=>{const[t,e]=q.useState(null),[n,r]=q.useState(!1),[i,a]=q.useState(!1);return q.useEffect(()=>{const o=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;r(o);const l=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;a(l);const h=u=>{u.preventDefault(),o||e(u)};return window.addEventListener("beforeinstallprompt",h),()=>window.removeEventListener("beforeinstallprompt",h)},[n]),{canInstall:!!t&&!n,isIos:i,isStandalone:n,promptInstall:async()=>{if(!t)return;await t.prompt(),e(null)}}},aU=({onSettingsClick:t})=>{const{currentUser:e}=qf(),n=gu(),{canInstall:r,isIos:i,isStandalone:a,promptInstall:s}=iU();return p.jsxs("header",{className:"sticky top-0 z-50 flex justify-between items-center h-20 px-6 bg-background/80 backdrop-blur-lg border-b border-white/10 [box-shadow:0_1px_10px_rgb(var(--color-accent)/0.3)] transition-all duration-300",children:[p.jsxs("h1",{onClick:()=>n("/"),className:"font-norse font-bold text-accent cursor-pointer flex items-baseline transition-all duration-300 hover:opacity-80",style:{textShadow:"0 0 8px rgb(var(--color-accent) / 0.7)"},children:[p.jsx("span",{className:"text-6xl",children:"R"}),p.jsx("span",{className:"text-4xl",children:"unica"})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[r&&p.jsxs("button",{onClick:s,className:"px-3 py-2 flex items-center gap-2 font-semibold text-accent bg-accent/10 rounded-lg border border-accent/30 hover:bg-accent/20 hover:border-accent/70 transition-all duration-300",title:"Installa Runica sul tuo dispositivo",children:[p.jsx(ZP,{className:"w-5 h-5"}),p.jsx("span",{className:"hidden sm:inline",children:"Installa App"})]}),i&&!r&&!a&&p.jsxs("div",{className:"px-3 py-2 flex items-center gap-2 font-semibold text-accent bg-accent/10 rounded-lg border border-accent/30 cursor-help",title:"Per installare: tocca l'icona Condividi e poi 'Aggiungi a Home'",children:[p.jsx(JP,{className:"w-5 h-5"}),p.jsx("span",{className:"hidden sm:inline",children:"Installa App"})]}),e?p.jsx("img",{src:e.photoURL||`https://api.dicebear.com/8.x/lorelei/svg?seed=${e.uid}`,alt:e.displayName||"User Avatar",onClick:()=>n("/login"),className:"w-12 h-12 rounded-full cursor-pointer ring-2 ring-transparent hover:ring-accent transition-all duration-300 hover:scale-105",title:"Account Settings"}):p.jsx("button",{onClick:()=>n("/login"),className:"px-5 py-2 font-semibold text-accent bg-accent/10 rounded-lg border border-accent/30 hover:bg-accent/20 hover:border-accent/70 transition-all duration-300",children:"Login"}),p.jsx("button",{onClick:t,className:"w-12 h-12 flex items-center justify-center rounded-lg text-accent bg-accent/10 border border-accent/30 hover:bg-accent/20 hover:border-accent/70 transition-all duration-300","aria-label":"Open settings",children:p.jsx(nU,{className:"w-6 h-6"})})]})]})},sU=[{id:"theme-amber",name:"Ambra",color:"bg-amber-400"},{id:"theme-sapphire",name:"Zaffiro",color:"bg-cyan-400"},{id:"theme-twilight",name:"Crepuscolo",color:"bg-violet-400"},{id:"theme-evergreen",name:"Foresta",color:"bg-emerald-400"},{id:"theme-crimson",name:"Cremisi",color:"bg-red-500"},{id:"theme-rose",name:"Rosato",color:"bg-rose-500"},{id:"theme-veridian",name:"Veridiano",color:"bg-green-400"},{id:"theme-obsidian",name:"Ossidiana",color:"bg-gray-300"},{id:"theme-solaris",name:"Solaris",color:"bg-orange-500"},{id:"theme-aether",name:"Etere",color:"bg-fuchsia-500"},{id:"theme-grove",name:"Bosco",color:"bg-lime-500"},{id:"theme-nocturne",name:"Notturno",color:"bg-violet-500"},{id:"theme-celestial",name:"Celeste",color:"bg-indigo-600"}],oU=({isOpen:t,onClose:e})=>{const{theme:n,setTheme:r}=XP(),i=q.useRef(null);return q.useEffect(()=>{const a=i.current;a&&(t?a.showModal():a.close())},[t]),p.jsxs("dialog",{ref:i,onClose:e,className:"bg-zinc-800 text-zinc-200 p-0 rounded-lg shadow-2xl w-full max-w-sm border border-zinc-700 backdrop:bg-black/50",children:[p.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Settings"}),p.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-zinc-700 transition-colors",children:p.jsx(nR,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"p-6",children:[p.jsx("h4",{className:"text-md font-semibold text-text-main mb-3",children:"Theme"}),p.jsx("div",{className:"grid grid-cols-2 gap-3",children:sU.map(a=>p.jsxs("button",{onClick:()=>r(a.id),className:`flex items-center justify-between p-3 rounded-md border-2 transition-colors ${n===a.id?"border-accent":"border-zinc-600 hover:border-zinc-500"}`,children:[p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx("span",{className:`w-5 h-5 rounded-full ${a.color}`})," ",a.name]}),n===a.id&&p.jsx(tU,{className:"w-5 h-5 text-accent"})]},a.id))})]})]})};function lU(){const[t,e]=q.useState(!1);return p.jsxs("div",{className:"bg-background min-h-screen text-text-main",children:[p.jsx(aU,{onSettingsClick:()=>e(!0)}),p.jsx("main",{children:p.jsx(Kx,{})}),p.jsx(oU,{isOpen:t,onClose:()=>e(!1)})]})}const aR=q.createContext(void 0),On=()=>{const t=q.useContext(aR);if(!t)throw new Error("useCharacter must be used within a CharacterProvider");return t},cU=({children:t})=>{const[e,n]=q.useState(null),[r,i]=q.useState([]),[a,s]=q.useState(!0),{currentUser:o}=qf(),l=q.useCallback(f=>{n(m=>m?{...m,...f}:null)},[]);q.useEffect(()=>{s(!0);const f=FP(m=>{const b=m.map(A=>({...Qc(),...A}));i(b.sort((A,D)=>A.name.localeCompare(D.name))),s(!1)});return()=>f()},[o]);const h=q.useCallback(async f=>{await HP(f),i(m=>m.filter(b=>b.id!==f))},[]),u=q.useCallback(async f=>(i(m=>{const b=m.findIndex(A=>A.id===f.id);if(b>-1){const A=[...m];return A[b]=f,A.sort((D,E)=>D.name.localeCompare(E.name))}else return[...m,f].sort((A,D)=>A.name.localeCompare(D.name))}),await JS(f)),[]),d={character:e,setCharacter:n,updateCharacter:l,characters:r,loading:a,deleteCharacter:h,saveCharacter:u};return p.jsx(aR.Provider,{value:d,children:t})},uU=({character:t,onSelect:e,onDelete:n,onEdit:r})=>p.jsxs("div",{onClick:e,className:"bg-card rounded-lg shadow-lg overflow-hidden transition-all duration-300 md:hover:shadow-accent/20 group relative cursor-pointer",role:"button",tabIndex:0,children:[p.jsx("div",{className:"relative w-full max-h-32 md:group-hover:max-h-96 transition-all duration-500 ease-in-out overflow-hidden",children:t.imageUrl?p.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-auto"}):p.jsx("div",{className:"w-full h-32 flex items-center justify-center text-muted-foreground bg-muted/50",children:p.jsx(t0,{className:"w-16 h-16"})})}),p.jsxs("div",{className:"p-5",children:[p.jsx("h3",{className:"text-xl font-bold font-cinzel text-accent truncate",children:t.name||"Unnamed Adventurer"}),p.jsxs("p",{className:"text-muted-foreground capitalize text-sm",children:[t.race||"Race"," ",t.class||"Class","  Level ",t.level]}),p.jsxs("div",{className:"mt-4 flex items-center gap-4 text-sm text-foreground border-t border-border pt-4",children:[p.jsxs("div",{className:"flex items-center gap-1.5",title:"Hit Points",children:[p.jsx("span",{className:"font-bold text-destructive",children:"HP"}),p.jsxs("span",{children:[t.hp.current,"/",t.hp.max]})]}),p.jsxs("div",{className:"flex items-center gap-1.5",title:"Armor Class",children:[p.jsx("span",{className:"font-bold text-accent",children:"AC"}),p.jsx("span",{children:KS(t)})]})]})]}),p.jsxs("div",{className:"absolute top-3 right-3 flex items-center space-x-2 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity duration-300",children:[p.jsx("button",{onClick:r,className:"p-2 rounded-full bg-secondary hover:bg-accent text-secondary-foreground hover:text-accent-foreground transition-colors","aria-label":`Edit ${t.name}`,children:p.jsx(Qs,{className:"w-4 h-4"})}),p.jsx("button",{onClick:n,className:"p-2 rounded-full bg-secondary hover:bg-destructive text-secondary-foreground hover:text-destructive-foreground transition-colors","aria-label":`Delete ${t.name}`,children:p.jsx(Xs,{className:"w-4 h-4"})})]})]}),hU=()=>{const{characters:t,loading:e,deleteCharacter:n}=On(),{currentUser:r}=qf(),i=gu(),a=l=>{i(l==="new"?"/character/new":`/character/${l}`)},s=l=>{i(`/character/${l}/edit`)},o=async(l,h)=>{window.confirm(`Are you sure you want to delete ${h}? This cannot be undone.`)&&await n(l)};return e?p.jsx("div",{className:"flex justify-center items-center h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-accent"})}):p.jsxs("div",{className:"p-4 sm:p-8 max-w-7xl mx-auto pt-12",children:[p.jsx("h2",{className:"text-3xl font-cinzel text-center text-foreground mb-8",children:"Your Characters"}),p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsxs("button",{onClick:()=>a("new"),className:"mb-10 flex items-center gap-2 px-6 py-3 bg-accent-dark text-white font-bold rounded-lg shadow-md hover:bg-accent transition-all duration-300 transform hover:scale-105",children:[p.jsx(eU,{className:"w-5 h-5"}),"Create New Character"]}),t.length>0?p.jsx("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(l=>p.jsx(uU,{character:l,onSelect:()=>a(l.id),onDelete:h=>{h.stopPropagation(),o(l.id,l.name)},onEdit:h=>{h.stopPropagation(),s(l.id)}},l.id))}):p.jsxs("div",{className:"text-center w-full max-w-2xl mt-8 py-16 px-6 bg-card/50 rounded-lg border border-border",children:[p.jsx("h2",{className:"text-2xl font-semibold text-foreground font-cinzel",children:"Your adventure awaits!"}),p.jsxs("p",{className:"text-text-muted mt-2",children:[r?"You have no characters synced to this account.":"You have no local characters.",p.jsx("br",{}),"Click the button above to forge your first hero."]})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU="type.googleapis.com/google.protobuf.Int64Value",fU="type.googleapis.com/google.protobuf.UInt64Value";function sR(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Xd(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Xd(e));if(typeof t=="function"||typeof t=="object")return sR(t,e=>Xd(e));throw new Error("Data cannot be encoded in JSON: "+t)}function dl(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case dU:case fU:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>dl(e)):typeof t=="function"||typeof t=="object"?sR(t,e=>dl(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Kn extends qr{constructor(e,n,r){super(`${n0}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Kn.prototype)}}function mU(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Qd(t,e){let n=mU(t),r=n,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!hE[s])return new Kn("internal","internal");n=hE[s],r=s}const o=a.message;typeof o=="string"&&(r=o),i=a.details,i!==void 0&&(i=dl(i))}}catch{}return n==="ok"?null:new Kn(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,sr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i==null||i.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="us-central1",gU=/^data: (.*?)(?:\n|$)/;function vU(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Kn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class yU{constructor(e,n,r,i,a=Og,s=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new pU(e,n,r,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=Og}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function _U(t,e,n){const r=Yi(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(bf(t.emulatorOrigin),Ef("Functions",!0))}function bU(t,e,n){const r=i=>wU(t,e,i,{});return r.stream=(i,a)=>xU(t,e,i,a),r}async function EU(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let a=null;try{a=await i.json()}catch{}return{status:i.status,json:a}}async function oR(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function wU(t,e,n,r){const i=t._url(e);return TU(t,i,n,r)}async function TU(t,e,n,r){n=Xd(n);const i={data:n},a=await oR(t,r),s=r.timeout||7e4,o=vU(s),l=await Promise.race([EU(e,i,a,t.fetchImpl),o.promise,t.cancelAllRequests]);if(o.cancel(),!l)throw new Kn("cancelled","Firebase Functions instance was deleted.");const h=Qd(l.status,l.json);if(h)throw h;if(!l.json)throw new Kn("internal","Response is not valid JSON object.");let u=l.json.data;if(typeof u>"u"&&(u=l.json.result),typeof u>"u")throw new Kn("internal","Response is missing data field.");return{data:dl(u)}}function xU(t,e,n,r){const i=t._url(e);return AU(t,i,n,r||{})}async function AU(t,e,n,r){var i;n=Xd(n);const a={data:n},s=await oR(t,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:s,signal:r==null?void 0:r.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const A=new Kn("cancelled","Request was cancelled.");return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}const b=Qd(0,null);return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}let l,h;const u=new Promise((m,b)=>{l=m,h=b});(i=r==null?void 0:r.signal)===null||i===void 0||i.addEventListener("abort",()=>{const m=new Kn("cancelled","Request was cancelled.");h(m)});const d=o.body.getReader(),f=SU(d,l,h,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=f.getReader();return{async next(){const{value:b,done:A}=await m.read();return{value:b,done:A}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function SU(t,e,n,r){const i=(s,o)=>{const l=s.match(gU);if(!l)return;const h=l[1];try{const u=JSON.parse(h);if("result"in u){e(dl(u.result));return}if("message"in u){o.enqueue(dl(u.message));return}if("error"in u){const d=Qd(0,u);o.error(d),n(d);return}}catch(u){if(u instanceof Kn){o.error(u),n(u);return}}},a=new TextDecoder;return new ReadableStream({start(s){let o="";return l();async function l(){if(r!=null&&r.aborted){const h=new Kn("cancelled","Request was cancelled");return s.error(h),n(h),Promise.resolve()}try{const{value:h,done:u}=await t.read();if(u){o.trim()&&i(o.trim(),s),s.close();return}if(r!=null&&r.aborted){const f=new Kn("cancelled","Request was cancelled");s.error(f),n(f),await t.cancel();return}o+=a.decode(h,{stream:!0});const d=o.split(`
`);o=d.pop()||"";for(const f of d)f.trim()&&i(f.trim(),s);return l()}catch(h){const u=h instanceof Kn?h:Qd(0,null);s.error(u),n(u)}}},cancel(){return t.cancel()}})}const dE="@firebase/functions",fE="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU="auth-internal",CU="app-check-internal",NU="messaging-internal";function IU(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(RU),s=n.getProvider(NU),o=n.getProvider(CU);return new yU(i,a,s,o,r)};za(new Bi(n0,e,"PUBLIC").setMultipleInstances(!0)),Sr(dE,fE,t),Sr(dE,fE,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DU(t=wf(),e=Og){const r=_u(rt(t),n0).getImmediate({identifier:e}),i=Xv("functions");return i&&OU(r,...i),r}function OU(t,e,n){_U(rt(t),e,n)}function MU(t,e,n){return bU(rt(t),e)}IU();const kU={personalityTraits:"Generazione AI fallita. Impossibile contattare il servizio.",ideals:"Errore.",bonds:"Errore.",flaws:"Errore."},jU=()=>{const{app:t}=Ys(),e=DU(t,"europe-west1");return MU(e,"callGemini")},PU=async(t,e)=>{const{name:n,race:r,class:i,background:a,alignment:s}=t,o=`
     Generate personality aspects for a Dungeons & Dragons character.
     Based on the following details:
     - Name: ${n}
     - Race: ${r}
     - Class: ${i}
     - Background: ${a}
     - Alignment: ${s}
     ${e?`
- Additional Theme: "${e}"`:""}

     Return a JSON object with four keys: "personalityTraits", "ideals", "bonds", and "flaws".
     - "personalityTraits": A short paragraph describing the character's general demeanor.
     - "ideals": A sentence describing a core belief.
     - "bonds": A sentence about something or someone the character cares deeply about.
     - "flaws": A sentence describing a significant weakness or fear.
   `;try{console.log("Calling Cloud Function 'callGemini'...");const h=await jU()(o);if(!h.data.success||!h.data.response)throw new Error("La Cloud Function ha riportato un errore: "+h.data.response);const u=h.data.response.trim(),d=JSON.parse(u);return{personalityTraits:d.personalityTraits||"",ideals:d.ideals||"",bonds:d.bonds||"",flaws:d.flaws||""}}catch(l){return console.error("Errore durante la chiamata alla Cloud Function 'callGemini':",l),kU}};/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function mE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mE(Object(n),!0).forEach(function(r){zU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UU(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function cR(t){var e=UU(t,"string");return typeof e=="symbol"?e:e+""}function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}function LU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cR(r.key),r)}}function VU(t,e,n){return e&&pE(t.prototype,e),n&&pE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zU(t,e,n){return e=cR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uR(t){return BU(t)||FU(t)||HU(t)||qU()}function BU(t){if(Array.isArray(t))return kg(t)}function FU(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function HU(t,e){if(t){if(typeof t=="string")return kg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kg(t,e)}}function kg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Gf=typeof window<"u"&&typeof window.document<"u",fi=Gf?window:{},r0=Gf&&fi.document.documentElement?"ontouchstart"in fi.document.documentElement:!1,i0=Gf?"PointerEvent"in fi:!1,_t="cropper",a0="all",hR="crop",dR="move",fR="zoom",is="e",as="w",ro="s",ra="n",Gl="ne",$l="nw",Yl="se",Xl="sw",jg="".concat(_t,"-crop"),gE="".concat(_t,"-disabled"),Yn="".concat(_t,"-hidden"),vE="".concat(_t,"-hide"),GU="".concat(_t,"-invisible"),Kd="".concat(_t,"-modal"),Pg="".concat(_t,"-move"),Kc="".concat(_t,"Action"),gh="".concat(_t,"Preview"),s0="crop",mR="move",pR="none",Ug="crop",Lg="cropend",Vg="cropmove",zg="cropstart",yE="dblclick",$U=r0?"touchstart":"mousedown",YU=r0?"touchmove":"mousemove",XU=r0?"touchend touchcancel":"mouseup",_E=i0?"pointerdown":$U,bE=i0?"pointermove":YU,EE=i0?"pointerup pointercancel":XU,wE="ready",TE="resize",xE="wheel",Bg="zoom",AE="image/jpeg",QU=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,KU=/^data:/,WU=/^data:image\/jpeg;base64,/,ZU=/^img|canvas$/i,gR=200,vR=100,SE={viewMode:0,dragMode:s0,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:gR,minContainerHeight:vR,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},JU='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',eL=Number.isNaN||fi.isNaN;function Oe(t){return typeof t=="number"&&!eL(t)}var RE=function(e){return e>0&&e<1/0};function Wm(t){return typeof t>"u"}function Us(t){return Mg(t)==="object"&&t!==null}var tL=Object.prototype.hasOwnProperty;function No(t){if(!Us(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&tL.call(n,"isPrototypeOf")}catch{return!1}}function qn(t){return typeof t=="function"}var nL=Array.prototype.slice;function yR(t){return Array.from?Array.from(t):nL.call(t)}function Yt(t,e){return t&&qn(e)&&(Array.isArray(t)||Oe(t.length)?yR(t).forEach(function(n,r){e.call(t,n,r,t)}):Us(t)&&Object.keys(t).forEach(function(n){e.call(t,t[n],n,t)})),t}var Et=Object.assign||function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Us(e)&&r.length>0&&r.forEach(function(a){Us(a)&&Object.keys(a).forEach(function(s){e[s]=a[s]})}),e},rL=/\.\d*(?:0|9){12}\d*$/;function Ho(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return rL.test(t)?Math.round(t*e)/e:t}var iL=/^width|height|left|top|marginLeft|marginTop$/;function wa(t,e){var n=t.style;Yt(e,function(r,i){iL.test(i)&&Oe(r)&&(r="".concat(r,"px")),n[i]=r})}function aL(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function rn(t,e){if(e){if(Oe(t.length)){Yt(t,function(r){rn(r,e)});return}if(t.classList){t.classList.add(e);return}var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function ui(t,e){if(e){if(Oe(t.length)){Yt(t,function(n){ui(n,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function Io(t,e,n){if(e){if(Oe(t.length)){Yt(t,function(r){Io(r,e,n)});return}n?rn(t,e):ui(t,e)}}var sL=/([a-z\d])([A-Z])/g;function o0(t){return t.replace(sL,"$1-$2").toLowerCase()}function Fg(t,e){return Us(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(o0(e)))}function Wc(t,e,n){Us(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(o0(e)),n)}function oL(t,e){if(Us(t[e]))try{delete t[e]}catch{t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch{t.dataset[e]=void 0}else t.removeAttribute("data-".concat(o0(e)))}var _R=/\s\s*/,bR=function(){var t=!1;if(Gf){var e=!1,n=function(){},r=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(a){e=a}});fi.addEventListener("test",n,r),fi.removeEventListener("test",n,r)}return t}();function kr(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=n;e.trim().split(_R).forEach(function(a){if(!bR){var s=t.listeners;s&&s[a]&&s[a][n]&&(i=s[a][n],delete s[a][n],Object.keys(s[a]).length===0&&delete s[a],Object.keys(s).length===0&&delete t.listeners)}t.removeEventListener(a,i,r)})}function gr(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=n;e.trim().split(_R).forEach(function(a){if(r.once&&!bR){var s=t.listeners,o=s===void 0?{}:s;i=function(){delete o[a][n],t.removeEventListener(a,i,r);for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];n.apply(t,u)},o[a]||(o[a]={}),o[a][n]&&t.removeEventListener(a,o[a][n],r),o[a][n]=i,t.listeners=o}t.addEventListener(a,i,r)})}function qo(t,e,n){var r;return qn(Event)&&qn(CustomEvent)?r=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(r)}function ER(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Zm=fi.location,lL=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function CE(t){var e=t.match(lL);return e!==null&&(e[1]!==Zm.protocol||e[2]!==Zm.hostname||e[3]!==Zm.port)}function NE(t){var e="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+e}function Sc(t){var e=t.rotate,n=t.scaleX,r=t.scaleY,i=t.translateX,a=t.translateY,s=[];Oe(i)&&i!==0&&s.push("translateX(".concat(i,"px)")),Oe(a)&&a!==0&&s.push("translateY(".concat(a,"px)")),Oe(e)&&e!==0&&s.push("rotate(".concat(e,"deg)")),Oe(n)&&n!==1&&s.push("scaleX(".concat(n,")")),Oe(r)&&r!==1&&s.push("scaleY(".concat(r,")"));var o=s.length?s.join(" "):"none";return{WebkitTransform:o,msTransform:o,transform:o}}function cL(t){var e=lR({},t),n=0;return Yt(t,function(r,i){delete e[i],Yt(e,function(a){var s=Math.abs(r.startX-a.startX),o=Math.abs(r.startY-a.startY),l=Math.abs(r.endX-a.endX),h=Math.abs(r.endY-a.endY),u=Math.sqrt(s*s+o*o),d=Math.sqrt(l*l+h*h),f=(d-u)/u;Math.abs(f)>Math.abs(n)&&(n=f)})}),n}function vh(t,e){var n=t.pageX,r=t.pageY,i={endX:n,endY:r};return e?i:lR({startX:n,startY:r},i)}function uL(t){var e=0,n=0,r=0;return Yt(t,function(i){var a=i.startX,s=i.startY;e+=a,n+=s,r+=1}),e/=r,n/=r,{pageX:e,pageY:n}}function Ta(t){var e=t.aspectRatio,n=t.height,r=t.width,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",a=RE(r),s=RE(n);if(a&&s){var o=n*e;i==="contain"&&o>r||i==="cover"&&o<r?n=r/e:r=n*e}else a?n=r/e:s&&(r=n*e);return{width:r,height:n}}function hL(t){var e=t.width,n=t.height,r=t.degree;if(r=Math.abs(r)%180,r===90)return{width:n,height:e};var i=r%90*Math.PI/180,a=Math.sin(i),s=Math.cos(i),o=e*s+n*a,l=e*a+n*s;return r>90?{width:l,height:o}:{width:o,height:l}}function dL(t,e,n,r){var i=e.aspectRatio,a=e.naturalWidth,s=e.naturalHeight,o=e.rotate,l=o===void 0?0:o,h=e.scaleX,u=h===void 0?1:h,d=e.scaleY,f=d===void 0?1:d,m=n.aspectRatio,b=n.naturalWidth,A=n.naturalHeight,D=r.fillColor,E=D===void 0?"transparent":D,x=r.imageSmoothingEnabled,N=x===void 0?!0:x,O=r.imageSmoothingQuality,P=O===void 0?"low":O,R=r.maxWidth,_=R===void 0?1/0:R,g=r.maxHeight,y=g===void 0?1/0:g,T=r.minWidth,C=T===void 0?0:T,I=r.minHeight,S=I===void 0?0:I,U=document.createElement("canvas"),z=U.getContext("2d"),k=Ta({aspectRatio:m,width:_,height:y}),M=Ta({aspectRatio:m,width:C,height:S},"cover"),H=Math.min(k.width,Math.max(M.width,b)),B=Math.min(k.height,Math.max(M.height,A)),X=Ta({aspectRatio:i,width:_,height:y}),re=Ta({aspectRatio:i,width:C,height:S},"cover"),V=Math.min(X.width,Math.max(re.width,a)),K=Math.min(X.height,Math.max(re.height,s)),$=[-V/2,-K/2,V,K];return U.width=Ho(H),U.height=Ho(B),z.fillStyle=E,z.fillRect(0,0,H,B),z.save(),z.translate(H/2,B/2),z.rotate(l*Math.PI/180),z.scale(u,f),z.imageSmoothingEnabled=N,z.imageSmoothingQuality=P,z.drawImage.apply(z,[t].concat(uR($.map(function(Y){return Math.floor(Ho(Y))})))),z.restore(),U}var wR=String.fromCharCode;function fL(t,e,n){var r="";n+=e;for(var i=e;i<n;i+=1)r+=wR(t.getUint8(i));return r}var mL=/^data:.*,/;function pL(t){var e=t.replace(mL,""),n=atob(e),r=new ArrayBuffer(n.length),i=new Uint8Array(r);return Yt(i,function(a,s){i[s]=n.charCodeAt(s)}),r}function gL(t,e){for(var n=[],r=8192,i=new Uint8Array(t);i.length>0;)n.push(wR.apply(null,yR(i.subarray(0,r)))),i=i.subarray(r);return"data:".concat(e,";base64,").concat(btoa(n.join("")))}function vL(t){var e=new DataView(t),n;try{var r,i,a;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var s=e.byteLength,o=2;o+1<s;){if(e.getUint8(o)===255&&e.getUint8(o+1)===225){i=o;break}o+=1}if(i){var l=i+4,h=i+10;if(fL(e,l,4)==="Exif"){var u=e.getUint16(h);if(r=u===18761,(r||u===19789)&&e.getUint16(h+2,r)===42){var d=e.getUint32(h+4,r);d>=8&&(a=h+d)}}}if(a){var f=e.getUint16(a,r),m,b;for(b=0;b<f;b+=1)if(m=a+b*12+2,e.getUint16(m,r)===274){m+=8,n=e.getUint16(m,r),e.setUint16(m,1,r);break}}}catch{n=1}return n}function yL(t){var e=0,n=1,r=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:r=-1;break;case 5:e=90,r=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:n,scaleY:r}}var _L={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,n=this.options,r=this.container,i=this.cropper,a=Number(n.minContainerWidth),s=Number(n.minContainerHeight);rn(i,Yn),ui(e,Yn);var o={width:Math.max(r.offsetWidth,a>=0?a:gR),height:Math.max(r.offsetHeight,s>=0?s:vR)};this.containerData=o,wa(i,{width:o.width,height:o.height}),rn(e,Yn),ui(i,Yn)},initCanvas:function(){var e=this.containerData,n=this.imageData,r=this.options.viewMode,i=Math.abs(n.rotate)%180===90,a=i?n.naturalHeight:n.naturalWidth,s=i?n.naturalWidth:n.naturalHeight,o=a/s,l=e.width,h=e.height;e.height*o>e.width?r===3?l=e.height*o:h=e.width/o:r===3?h=e.width/o:l=e.height*o;var u={aspectRatio:o,naturalWidth:a,naturalHeight:s,width:l,height:h};this.canvasData=u,this.limited=r===1||r===2,this.limitCanvas(!0,!0),u.width=Math.min(Math.max(u.width,u.minWidth),u.maxWidth),u.height=Math.min(Math.max(u.height,u.minHeight),u.maxHeight),u.left=(e.width-u.width)/2,u.top=(e.height-u.height)/2,u.oldLeft=u.left,u.oldTop=u.top,this.initialCanvasData=Et({},u)},limitCanvas:function(e,n){var r=this.options,i=this.containerData,a=this.canvasData,s=this.cropBoxData,o=r.viewMode,l=a.aspectRatio,h=this.cropped&&s;if(e){var u=Number(r.minCanvasWidth)||0,d=Number(r.minCanvasHeight)||0;o>1?(u=Math.max(u,i.width),d=Math.max(d,i.height),o===3&&(d*l>u?u=d*l:d=u/l)):o>0&&(u?u=Math.max(u,h?s.width:0):d?d=Math.max(d,h?s.height:0):h&&(u=s.width,d=s.height,d*l>u?u=d*l:d=u/l));var f=Ta({aspectRatio:l,width:u,height:d});u=f.width,d=f.height,a.minWidth=u,a.minHeight=d,a.maxWidth=1/0,a.maxHeight=1/0}if(n)if(o>(h?0:1)){var m=i.width-a.width,b=i.height-a.height;a.minLeft=Math.min(0,m),a.minTop=Math.min(0,b),a.maxLeft=Math.max(0,m),a.maxTop=Math.max(0,b),h&&this.limited&&(a.minLeft=Math.min(s.left,s.left+(s.width-a.width)),a.minTop=Math.min(s.top,s.top+(s.height-a.height)),a.maxLeft=s.left,a.maxTop=s.top,o===2&&(a.width>=i.width&&(a.minLeft=Math.min(0,m),a.maxLeft=Math.max(0,m)),a.height>=i.height&&(a.minTop=Math.min(0,b),a.maxTop=Math.max(0,b))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=i.width,a.maxTop=i.height},renderCanvas:function(e,n){var r=this.canvasData,i=this.imageData;if(n){var a=hL({width:i.naturalWidth*Math.abs(i.scaleX||1),height:i.naturalHeight*Math.abs(i.scaleY||1),degree:i.rotate||0}),s=a.width,o=a.height,l=r.width*(s/r.naturalWidth),h=r.height*(o/r.naturalHeight);r.left-=(l-r.width)/2,r.top-=(h-r.height)/2,r.width=l,r.height=h,r.aspectRatio=s/o,r.naturalWidth=s,r.naturalHeight=o,this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCanvas(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,wa(this.canvas,Et({width:r.width,height:r.height},Sc({translateX:r.left,translateY:r.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var n=this.canvasData,r=this.imageData,i=r.naturalWidth*(n.width/n.naturalWidth),a=r.naturalHeight*(n.height/n.naturalHeight);Et(r,{width:i,height:a,left:(n.width-i)/2,top:(n.height-a)/2}),wa(this.image,Et({width:r.width,height:r.height},Sc(Et({translateX:r.left,translateY:r.top},r)))),e&&this.output()},initCropBox:function(){var e=this.options,n=this.canvasData,r=e.aspectRatio||e.initialAspectRatio,i=Number(e.autoCropArea)||.8,a={width:n.width,height:n.height};r&&(n.height*r>n.width?a.height=a.width/r:a.width=a.height*r),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*i),a.height=Math.max(a.minHeight,a.height*i),a.left=n.left+(n.width-a.width)/2,a.top=n.top+(n.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=Et({},a)},limitCropBox:function(e,n){var r=this.options,i=this.containerData,a=this.canvasData,s=this.cropBoxData,o=this.limited,l=r.aspectRatio;if(e){var h=Number(r.minCropBoxWidth)||0,u=Number(r.minCropBoxHeight)||0,d=o?Math.min(i.width,a.width,a.width+a.left,i.width-a.left):i.width,f=o?Math.min(i.height,a.height,a.height+a.top,i.height-a.top):i.height;h=Math.min(h,i.width),u=Math.min(u,i.height),l&&(h&&u?u*l>h?u=h/l:h=u*l:h?u=h/l:u&&(h=u*l),f*l>d?f=d/l:d=f*l),s.minWidth=Math.min(h,d),s.minHeight=Math.min(u,f),s.maxWidth=d,s.maxHeight=f}n&&(o?(s.minLeft=Math.max(0,a.left),s.minTop=Math.max(0,a.top),s.maxLeft=Math.min(i.width,a.left+a.width)-s.width,s.maxTop=Math.min(i.height,a.top+a.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=i.width-s.width,s.maxTop=i.height-s.height))},renderCropBox:function(){var e=this.options,n=this.containerData,r=this.cropBoxData;(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCropBox(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,e.movable&&e.cropBoxMovable&&Wc(this.face,Kc,r.width>=n.width&&r.height>=n.height?dR:a0),wa(this.cropBox,Et({width:r.width,height:r.height},Sc({translateX:r.left,translateY:r.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),qo(this.element,Ug,this.getData())}},bL={initPreview:function(){var e=this.element,n=this.crossOrigin,r=this.options.preview,i=n?this.crossOriginUrl:this.url,a=e.alt||"The image to preview",s=document.createElement("img");if(n&&(s.crossOrigin=n),s.src=i,s.alt=a,this.viewBox.appendChild(s),this.viewBoxImage=s,!!r){var o=r;typeof r=="string"?o=e.ownerDocument.querySelectorAll(r):r.querySelector&&(o=[r]),this.previews=o,Yt(o,function(l){var h=document.createElement("img");Wc(l,gh,{width:l.offsetWidth,height:l.offsetHeight,html:l.innerHTML}),n&&(h.crossOrigin=n),h.src=i,h.alt=a,h.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',l.innerHTML="",l.appendChild(h)})}},resetPreview:function(){Yt(this.previews,function(e){var n=Fg(e,gh);wa(e,{width:n.width,height:n.height}),e.innerHTML=n.html,oL(e,gh)})},preview:function(){var e=this.imageData,n=this.canvasData,r=this.cropBoxData,i=r.width,a=r.height,s=e.width,o=e.height,l=r.left-n.left-e.left,h=r.top-n.top-e.top;!this.cropped||this.disabled||(wa(this.viewBoxImage,Et({width:s,height:o},Sc(Et({translateX:-l,translateY:-h},e)))),Yt(this.previews,function(u){var d=Fg(u,gh),f=d.width,m=d.height,b=f,A=m,D=1;i&&(D=f/i,A=a*D),a&&A>m&&(D=m/a,b=i*D,A=m),wa(u,{width:b,height:A}),wa(u.getElementsByTagName("img")[0],Et({width:s*D,height:o*D},Sc(Et({translateX:-l*D,translateY:-h*D},e))))}))}},EL={bind:function(){var e=this.element,n=this.options,r=this.cropper;qn(n.cropstart)&&gr(e,zg,n.cropstart),qn(n.cropmove)&&gr(e,Vg,n.cropmove),qn(n.cropend)&&gr(e,Lg,n.cropend),qn(n.crop)&&gr(e,Ug,n.crop),qn(n.zoom)&&gr(e,Bg,n.zoom),gr(r,_E,this.onCropStart=this.cropStart.bind(this)),n.zoomable&&n.zoomOnWheel&&gr(r,xE,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&gr(r,yE,this.onDblclick=this.dblclick.bind(this)),gr(e.ownerDocument,bE,this.onCropMove=this.cropMove.bind(this)),gr(e.ownerDocument,EE,this.onCropEnd=this.cropEnd.bind(this)),n.responsive&&gr(window,TE,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,n=this.options,r=this.cropper;qn(n.cropstart)&&kr(e,zg,n.cropstart),qn(n.cropmove)&&kr(e,Vg,n.cropmove),qn(n.cropend)&&kr(e,Lg,n.cropend),qn(n.crop)&&kr(e,Ug,n.crop),qn(n.zoom)&&kr(e,Bg,n.zoom),kr(r,_E,this.onCropStart),n.zoomable&&n.zoomOnWheel&&kr(r,xE,this.onWheel,{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&kr(r,yE,this.onDblclick),kr(e.ownerDocument,bE,this.onCropMove),kr(e.ownerDocument,EE,this.onCropEnd),n.responsive&&kr(window,TE,this.onResize)}},wL={resize:function(){if(!this.disabled){var e=this.options,n=this.container,r=this.containerData,i=n.offsetWidth/r.width,a=n.offsetHeight/r.height,s=Math.abs(i-1)>Math.abs(a-1)?i:a;if(s!==1){var o,l;e.restore&&(o=this.getCanvasData(),l=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(Yt(o,function(h,u){o[u]=h*s})),this.setCropBoxData(Yt(l,function(h,u){l[u]=h*s})))}}},dblclick:function(){this.disabled||this.options.dragMode===pR||this.setDragMode(aL(this.dragBox,jg)?mR:s0)},wheel:function(e){var n=this,r=Number(this.options.wheelZoomRatio)||.1,i=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50),e.deltaY?i=e.deltaY>0?1:-1:e.wheelDelta?i=-e.wheelDelta/120:e.detail&&(i=e.detail>0?1:-1),this.zoom(-i*r,e)))},cropStart:function(e){var n=e.buttons,r=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(Oe(n)&&n!==1||Oe(r)&&r!==0||e.ctrlKey))){var i=this.options,a=this.pointers,s;e.changedTouches?Yt(e.changedTouches,function(o){a[o.identifier]=vh(o)}):a[e.pointerId||0]=vh(e),Object.keys(a).length>1&&i.zoomable&&i.zoomOnTouch?s=fR:s=Fg(e.target,Kc),QU.test(s)&&qo(this.element,zg,{originalEvent:e,action:s})!==!1&&(e.preventDefault(),this.action=s,this.cropping=!1,s===hR&&(this.cropping=!0,rn(this.dragBox,Kd)))}},cropMove:function(e){var n=this.action;if(!(this.disabled||!n)){var r=this.pointers;e.preventDefault(),qo(this.element,Vg,{originalEvent:e,action:n})!==!1&&(e.changedTouches?Yt(e.changedTouches,function(i){Et(r[i.identifier]||{},vh(i,!0))}):Et(r[e.pointerId||0]||{},vh(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var n=this.action,r=this.pointers;e.changedTouches?Yt(e.changedTouches,function(i){delete r[i.identifier]}):delete r[e.pointerId||0],n&&(e.preventDefault(),Object.keys(r).length||(this.action=""),this.cropping&&(this.cropping=!1,Io(this.dragBox,Kd,this.cropped&&this.options.modal)),qo(this.element,Lg,{originalEvent:e,action:n}))}}},TL={change:function(e){var n=this.options,r=this.canvasData,i=this.containerData,a=this.cropBoxData,s=this.pointers,o=this.action,l=n.aspectRatio,h=a.left,u=a.top,d=a.width,f=a.height,m=h+d,b=u+f,A=0,D=0,E=i.width,x=i.height,N=!0,O;!l&&e.shiftKey&&(l=d&&f?d/f:1),this.limited&&(A=a.minLeft,D=a.minTop,E=A+Math.min(i.width,r.width,r.left+r.width),x=D+Math.min(i.height,r.height,r.top+r.height));var P=s[Object.keys(s)[0]],R={x:P.endX-P.startX,y:P.endY-P.startY},_=function(y){switch(y){case is:m+R.x>E&&(R.x=E-m);break;case as:h+R.x<A&&(R.x=A-h);break;case ra:u+R.y<D&&(R.y=D-u);break;case ro:b+R.y>x&&(R.y=x-b);break}};switch(o){case a0:h+=R.x,u+=R.y;break;case is:if(R.x>=0&&(m>=E||l&&(u<=D||b>=x))){N=!1;break}_(is),d+=R.x,d<0&&(o=as,d=-d,h-=d),l&&(f=d/l,u+=(a.height-f)/2);break;case ra:if(R.y<=0&&(u<=D||l&&(h<=A||m>=E))){N=!1;break}_(ra),f-=R.y,u+=R.y,f<0&&(o=ro,f=-f,u-=f),l&&(d=f*l,h+=(a.width-d)/2);break;case as:if(R.x<=0&&(h<=A||l&&(u<=D||b>=x))){N=!1;break}_(as),d-=R.x,h+=R.x,d<0&&(o=is,d=-d,h-=d),l&&(f=d/l,u+=(a.height-f)/2);break;case ro:if(R.y>=0&&(b>=x||l&&(h<=A||m>=E))){N=!1;break}_(ro),f+=R.y,f<0&&(o=ra,f=-f,u-=f),l&&(d=f*l,h+=(a.width-d)/2);break;case Gl:if(l){if(R.y<=0&&(u<=D||m>=E)){N=!1;break}_(ra),f-=R.y,u+=R.y,d=f*l}else _(ra),_(is),R.x>=0?m<E?d+=R.x:R.y<=0&&u<=D&&(N=!1):d+=R.x,R.y<=0?u>D&&(f-=R.y,u+=R.y):(f-=R.y,u+=R.y);d<0&&f<0?(o=Xl,f=-f,d=-d,u-=f,h-=d):d<0?(o=$l,d=-d,h-=d):f<0&&(o=Yl,f=-f,u-=f);break;case $l:if(l){if(R.y<=0&&(u<=D||h<=A)){N=!1;break}_(ra),f-=R.y,u+=R.y,d=f*l,h+=a.width-d}else _(ra),_(as),R.x<=0?h>A?(d-=R.x,h+=R.x):R.y<=0&&u<=D&&(N=!1):(d-=R.x,h+=R.x),R.y<=0?u>D&&(f-=R.y,u+=R.y):(f-=R.y,u+=R.y);d<0&&f<0?(o=Yl,f=-f,d=-d,u-=f,h-=d):d<0?(o=Gl,d=-d,h-=d):f<0&&(o=Xl,f=-f,u-=f);break;case Xl:if(l){if(R.x<=0&&(h<=A||b>=x)){N=!1;break}_(as),d-=R.x,h+=R.x,f=d/l}else _(ro),_(as),R.x<=0?h>A?(d-=R.x,h+=R.x):R.y>=0&&b>=x&&(N=!1):(d-=R.x,h+=R.x),R.y>=0?b<x&&(f+=R.y):f+=R.y;d<0&&f<0?(o=Gl,f=-f,d=-d,u-=f,h-=d):d<0?(o=Yl,d=-d,h-=d):f<0&&(o=$l,f=-f,u-=f);break;case Yl:if(l){if(R.x>=0&&(m>=E||b>=x)){N=!1;break}_(is),d+=R.x,f=d/l}else _(ro),_(is),R.x>=0?m<E?d+=R.x:R.y>=0&&b>=x&&(N=!1):d+=R.x,R.y>=0?b<x&&(f+=R.y):f+=R.y;d<0&&f<0?(o=$l,f=-f,d=-d,u-=f,h-=d):d<0?(o=Xl,d=-d,h-=d):f<0&&(o=Gl,f=-f,u-=f);break;case dR:this.move(R.x,R.y),N=!1;break;case fR:this.zoom(cL(s),e),N=!1;break;case hR:if(!R.x||!R.y){N=!1;break}O=ER(this.cropper),h=P.startX-O.left,u=P.startY-O.top,d=a.minWidth,f=a.minHeight,R.x>0?o=R.y>0?Yl:Gl:R.x<0&&(h-=d,o=R.y>0?Xl:$l),R.y<0&&(u-=f),this.cropped||(ui(this.cropBox,Yn),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}N&&(a.width=d,a.height=f,a.left=h,a.top=u,this.action=o,this.renderCropBox()),Yt(s,function(g){g.startX=g.endX,g.startY=g.endY})}},xL={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&rn(this.dragBox,Kd),ui(this.cropBox,Yn),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Et({},this.initialImageData),this.canvasData=Et({},this.initialCanvasData),this.cropBoxData=Et({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Et(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ui(this.dragBox,Kd),rn(this.cropBox,Yn)),this},replace:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),n?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,Yt(this.previews,function(r){r.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ui(this.cropper,gE)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,rn(this.cropper,gE)),this},destroy:function(){var e=this.element;return e[_t]?(e[_t]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.canvasData,i=r.left,a=r.top;return this.moveTo(Wm(e)?e:i+Number(e),Wm(n)?n:a+Number(n))},moveTo:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.canvasData,i=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.movable&&(Oe(e)&&(r.left=e,i=!0),Oe(n)&&(r.top=n,i=!0),i&&this.renderCanvas(!0)),this},zoom:function(e,n){var r=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(r.width*e/r.naturalWidth,null,n)},zoomTo:function(e,n,r){var i=this.options,a=this.canvasData,s=a.width,o=a.height,l=a.naturalWidth,h=a.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&i.zoomable){var u=l*e,d=h*e;if(qo(this.element,Bg,{ratio:e,oldRatio:s/l,originalEvent:r})===!1)return this;if(r){var f=this.pointers,m=ER(this.cropper),b=f&&Object.keys(f).length?uL(f):{pageX:r.pageX,pageY:r.pageY};a.left-=(u-s)*((b.pageX-m.left-a.left)/s),a.top-=(d-o)*((b.pageY-m.top-a.top)/o)}else No(n)&&Oe(n.x)&&Oe(n.y)?(a.left-=(u-s)*((n.x-a.left)/s),a.top-=(d-o)*((n.y-a.top)/o)):(a.left-=(u-s)/2,a.top-=(d-o)/2);a.width=u,a.height=d,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),Oe(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var n=this.imageData.scaleY;return this.scale(e,Oe(n)?n:1)},scaleY:function(e){var n=this.imageData.scaleX;return this.scale(Oe(n)?n:1,e)},scale:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.imageData,i=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.scalable&&(Oe(e)&&(r.scaleX=e,i=!0),Oe(n)&&(r.scaleY=n,i=!0),i&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.options,r=this.imageData,i=this.canvasData,a=this.cropBoxData,s;if(this.ready&&this.cropped){s={x:a.left-i.left,y:a.top-i.top,width:a.width,height:a.height};var o=r.width/r.naturalWidth;if(Yt(s,function(u,d){s[d]=u/o}),e){var l=Math.round(s.y+s.height),h=Math.round(s.x+s.width);s.x=Math.round(s.x),s.y=Math.round(s.y),s.width=h-s.x,s.height=l-s.y}}else s={x:0,y:0,width:0,height:0};return n.rotatable&&(s.rotate=r.rotate||0),n.scalable&&(s.scaleX=r.scaleX||1,s.scaleY=r.scaleY||1),s},setData:function(e){var n=this.options,r=this.imageData,i=this.canvasData,a={};if(this.ready&&!this.disabled&&No(e)){var s=!1;n.rotatable&&Oe(e.rotate)&&e.rotate!==r.rotate&&(r.rotate=e.rotate,s=!0),n.scalable&&(Oe(e.scaleX)&&e.scaleX!==r.scaleX&&(r.scaleX=e.scaleX,s=!0),Oe(e.scaleY)&&e.scaleY!==r.scaleY&&(r.scaleY=e.scaleY,s=!0)),s&&this.renderCanvas(!0,!0);var o=r.width/r.naturalWidth;Oe(e.x)&&(a.left=e.x*o+i.left),Oe(e.y)&&(a.top=e.y*o+i.top),Oe(e.width)&&(a.width=e.width*o),Oe(e.height)&&(a.height=e.height*o),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?Et({},this.containerData):{}},getImageData:function(){return this.sized?Et({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,n={};return this.ready&&Yt(["left","top","width","height","naturalWidth","naturalHeight"],function(r){n[r]=e[r]}),n},setCanvasData:function(e){var n=this.canvasData,r=n.aspectRatio;return this.ready&&!this.disabled&&No(e)&&(Oe(e.left)&&(n.left=e.left),Oe(e.top)&&(n.top=e.top),Oe(e.width)?(n.width=e.width,n.height=e.width/r):Oe(e.height)&&(n.height=e.height,n.width=e.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,n;return this.ready&&this.cropped&&(n={left:e.left,top:e.top,width:e.width,height:e.height}),n||{}},setCropBoxData:function(e){var n=this.cropBoxData,r=this.options.aspectRatio,i,a;return this.ready&&this.cropped&&!this.disabled&&No(e)&&(Oe(e.left)&&(n.left=e.left),Oe(e.top)&&(n.top=e.top),Oe(e.width)&&e.width!==n.width&&(i=!0,n.width=e.width),Oe(e.height)&&e.height!==n.height&&(a=!0,n.height=e.height),r&&(i?n.height=n.width/r:a&&(n.width=n.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var n=this.canvasData,r=dL(this.image,this.imageData,n,e);if(!this.cropped)return r;var i=this.getData(e.rounded),a=i.x,s=i.y,o=i.width,l=i.height,h=r.width/Math.floor(n.naturalWidth);h!==1&&(a*=h,s*=h,o*=h,l*=h);var u=o/l,d=Ta({aspectRatio:u,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),f=Ta({aspectRatio:u,width:e.minWidth||0,height:e.minHeight||0},"cover"),m=Ta({aspectRatio:u,width:e.width||(h!==1?r.width:o),height:e.height||(h!==1?r.height:l)}),b=m.width,A=m.height;b=Math.min(d.width,Math.max(f.width,b)),A=Math.min(d.height,Math.max(f.height,A));var D=document.createElement("canvas"),E=D.getContext("2d");D.width=Ho(b),D.height=Ho(A),E.fillStyle=e.fillColor||"transparent",E.fillRect(0,0,b,A);var x=e.imageSmoothingEnabled,N=x===void 0?!0:x,O=e.imageSmoothingQuality;E.imageSmoothingEnabled=N,O&&(E.imageSmoothingQuality=O);var P=r.width,R=r.height,_=a,g=s,y,T,C,I,S,U;_<=-o||_>P?(_=0,y=0,C=0,S=0):_<=0?(C=-_,_=0,y=Math.min(P,o+_),S=y):_<=P&&(C=0,y=Math.min(o,P-_),S=y),y<=0||g<=-l||g>R?(g=0,T=0,I=0,U=0):g<=0?(I=-g,g=0,T=Math.min(R,l+g),U=T):g<=R&&(I=0,T=Math.min(l,R-g),U=T);var z=[_,g,y,T];if(S>0&&U>0){var k=b/o;z.push(C*k,I*k,S*k,U*k)}return E.drawImage.apply(E,[r].concat(uR(z.map(function(M){return Math.floor(Ho(M))})))),D},setAspectRatio:function(e){var n=this.options;return!this.disabled&&!Wm(e)&&(n.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var n=this.options,r=this.dragBox,i=this.face;if(this.ready&&!this.disabled){var a=e===s0,s=n.movable&&e===mR;e=a||s?e:pR,n.dragMode=e,Wc(r,Kc,e),Io(r,jg,a),Io(r,Pg,s),n.cropBoxMovable||(Wc(i,Kc,e),Io(i,jg,a),Io(i,Pg,s))}return this}},AL=fi.Cropper,TR=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(LU(this,t),!e||!ZU.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=Et({},SE,No(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return VU(t,[{key:"init",value:function(){var n=this.element,r=n.tagName.toLowerCase(),i;if(!n[_t]){if(n[_t]=this,r==="img"){if(this.isImg=!0,i=n.getAttribute("src")||"",this.originalUrl=i,!i)return;i=n.src}else r==="canvas"&&window.HTMLCanvasElement&&(i=n.toDataURL());this.load(i)}}},{key:"load",value:function(n){var r=this;if(n){this.url=n,this.imageData={};var i=this.element,a=this.options;if(!a.rotatable&&!a.scalable&&(a.checkOrientation=!1),!a.checkOrientation||!window.ArrayBuffer){this.clone();return}if(KU.test(n)){WU.test(n)?this.read(pL(n)):this.clone();return}var s=new XMLHttpRequest,o=this.clone.bind(this);this.reloading=!0,this.xhr=s,s.onabort=o,s.onerror=o,s.ontimeout=o,s.onprogress=function(){s.getResponseHeader("content-type")!==AE&&s.abort()},s.onload=function(){r.read(s.response)},s.onloadend=function(){r.reloading=!1,r.xhr=null},a.checkCrossOrigin&&CE(n)&&i.crossOrigin&&(n=NE(n)),s.open("GET",n,!0),s.responseType="arraybuffer",s.withCredentials=i.crossOrigin==="use-credentials",s.send()}}},{key:"read",value:function(n){var r=this.options,i=this.imageData,a=vL(n),s=0,o=1,l=1;if(a>1){this.url=gL(n,AE);var h=yL(a);s=h.rotate,o=h.scaleX,l=h.scaleY}r.rotatable&&(i.rotate=s),r.scalable&&(i.scaleX=o,i.scaleY=l),this.clone()}},{key:"clone",value:function(){var n=this.element,r=this.url,i=n.crossOrigin,a=r;this.options.checkCrossOrigin&&CE(r)&&(i||(i="anonymous"),a=NE(r)),this.crossOrigin=i,this.crossOriginUrl=a;var s=document.createElement("img");i&&(s.crossOrigin=i),s.src=a||r,s.alt=n.alt||"The image to crop",this.image=s,s.onload=this.start.bind(this),s.onerror=this.stop.bind(this),rn(s,vE),n.parentNode.insertBefore(s,n.nextSibling)}},{key:"start",value:function(){var n=this,r=this.image;r.onload=null,r.onerror=null,this.sizing=!0;var i=fi.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(fi.navigator.userAgent),a=function(h,u){Et(n.imageData,{naturalWidth:h,naturalHeight:u,aspectRatio:h/u}),n.initialImageData=Et({},n.imageData),n.sizing=!1,n.sized=!0,n.build()};if(r.naturalWidth&&!i){a(r.naturalWidth,r.naturalHeight);return}var s=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=s,s.onload=function(){a(s.width,s.height),i||o.removeChild(s)},s.src=r.src,i||(s.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(s))}},{key:"stop",value:function(){var n=this.image;n.onload=null,n.onerror=null,n.parentNode.removeChild(n),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var n=this.element,r=this.options,i=this.image,a=n.parentNode,s=document.createElement("div");s.innerHTML=JU;var o=s.querySelector(".".concat(_t,"-container")),l=o.querySelector(".".concat(_t,"-canvas")),h=o.querySelector(".".concat(_t,"-drag-box")),u=o.querySelector(".".concat(_t,"-crop-box")),d=u.querySelector(".".concat(_t,"-face"));this.container=a,this.cropper=o,this.canvas=l,this.dragBox=h,this.cropBox=u,this.viewBox=o.querySelector(".".concat(_t,"-view-box")),this.face=d,l.appendChild(i),rn(n,Yn),a.insertBefore(o,n.nextSibling),ui(i,vE),this.initPreview(),this.bind(),r.initialAspectRatio=Math.max(0,r.initialAspectRatio)||NaN,r.aspectRatio=Math.max(0,r.aspectRatio)||NaN,r.viewMode=Math.max(0,Math.min(3,Math.round(r.viewMode)))||0,rn(u,Yn),r.guides||rn(u.getElementsByClassName("".concat(_t,"-dashed")),Yn),r.center||rn(u.getElementsByClassName("".concat(_t,"-center")),Yn),r.background&&rn(o,"".concat(_t,"-bg")),r.highlight||rn(d,GU),r.cropBoxMovable&&(rn(d,Pg),Wc(d,Kc,a0)),r.cropBoxResizable||(rn(u.getElementsByClassName("".concat(_t,"-line")),Yn),rn(u.getElementsByClassName("".concat(_t,"-point")),Yn)),this.render(),this.ready=!0,this.setDragMode(r.dragMode),r.autoCrop&&this.crop(),this.setData(r.data),qn(r.ready)&&gr(n,wE,r.ready,{once:!0}),qo(n,wE)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var n=this.cropper.parentNode;n&&n.removeChild(this.cropper),ui(this.element,Yn)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=AL,t}},{key:"setDefaults",value:function(n){Et(SE,No(n)&&n)}}])}();Et(TR.prototype,_L,bL,EL,wL,TL,xL);var ds=function(){return ds=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ds.apply(this,arguments)};function Jm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}var SL=["aspectRatio","autoCrop","autoCropArea","background","center","checkCrossOrigin","checkOrientation","cropBoxMovable","cropBoxResizable","data","dragMode","guides","highlight","initialAspectRatio","minCanvasHeight","minCanvasWidth","minContainerHeight","minContainerWidth","minCropBoxHeight","minCropBoxWidth","modal","movable","preview","responsive","restore","rotatable","scalable","toggleDragModeOnDblclick","viewMode","wheelZoomRatio","zoomOnTouch","zoomOnWheel","zoomable","cropstart","cropmove","cropend","crop","zoom","ready"],RL={opacity:0,maxWidth:"100%"},CL=mo.forwardRef(function(t,e){var n=Jm(t,[]),r=n.dragMode,i=r===void 0?"crop":r,a=n.src,s=n.style,o=n.className,l=n.crossOrigin,h=n.scaleX,u=n.scaleY,d=n.enable,f=n.zoomTo,m=n.rotateTo,b=n.alt,A=b===void 0?"picture":b,D=n.ready,E=n.onInitialized,x=Jm(n,["dragMode","src","style","className","crossOrigin","scaleX","scaleY","enable","zoomTo","rotateTo","alt","ready","onInitialized"]),N={scaleY:u,scaleX:h,enable:d,zoomTo:f,rotateTo:m},O=function(){for(var R=[],_=0;_<arguments.length;_++)R[_]=arguments[_];var g=q.useRef(null);return mo.useEffect(function(){R.forEach(function(y){y&&(typeof y=="function"?y(g.current):y.current=g.current)})},[R]),g}(e,q.useRef(null));q.useEffect(function(){var R;!((R=O.current)===null||R===void 0)&&R.cropper&&typeof f=="number"&&O.current.cropper.zoomTo(f)},[n.zoomTo]),q.useEffect(function(){var R;!((R=O.current)===null||R===void 0)&&R.cropper&&a!==void 0&&O.current.cropper.reset().clear().replace(a)},[a]),q.useEffect(function(){if(O.current!==null){var R=new TR(O.current,ds(ds({dragMode:i},x),{ready:function(_){_.currentTarget!==null&&function(g,y){y===void 0&&(y={});var T=y.enable,C=T===void 0||T,I=y.scaleX,S=I===void 0?1:I,U=y.scaleY,z=U===void 0?1:U,k=y.zoomTo,M=k===void 0?0:k,H=y.rotateTo;C?g.enable():g.disable(),g.scaleX(S),g.scaleY(z),H!==void 0&&g.rotateTo(H),M>0&&g.zoomTo(M)}(_.currentTarget.cropper,N),D&&D(_)}}));E&&E(R)}return function(){var _,g;(g=(_=O.current)===null||_===void 0?void 0:_.cropper)===null||g===void 0||g.destroy()}},[O]);var P=function(R){return SL.reduce(function(_,g){var y=_,T=g;return y[T],Jm(y,[typeof T=="symbol"?T:T+""])},R)}(ds(ds({},x),{crossOrigin:l,src:a,alt:A}));return mo.createElement("div",{style:s,className:o},mo.createElement("img",ds({},P,{style:RL,ref:O})))});const NL=({isOpen:t,onClose:e,onImageReady:n})=>{const[r,i]=q.useState(null),[a,s]=q.useState(!1),[o,l]=q.useState(null),h=q.useRef(null),u=q.useRef(null);q.useEffect(()=>{const A=u.current;A&&(t?A.showModal():A.close())},[t]);const d=()=>{i(null),s(!1),l(null)},f=()=>{d(),e()},m=async A=>{if(l(null),A.target.files&&A.target.files.length>0){const D=A.target.files[0];s(!0);try{const E=await VP(D,{maxSizeMB:1,maxWidthOrHeight:1024,useWebWorker:!0}),x=new FileReader;x.onload=()=>{i(x.result),s(!1)},x.readAsDataURL(E)}catch(E){l(E instanceof Error?E.message:"Image processing failed"),s(!1)}}},b=()=>{var D;if(!((D=h.current)!=null&&D.cropper)){l("Cropper not available.");return}s(!0);const A=h.current.cropper.getCroppedCanvas({width:256,height:256,imageSmoothingQuality:"high"}).toDataURL("image/jpeg",.9);n(A),f()};return p.jsxs("dialog",{ref:u,onClose:f,className:"bg-zinc-800 text-zinc-200 p-0 rounded-lg shadow-2xl w-full max-w-md border border-zinc-700 backdrop:bg-black/50",children:[p.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Upload Portrait"}),p.jsx("button",{onClick:f,className:"p-1 rounded-full hover:bg-zinc-700 transition-colors",children:p.jsx(nR,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"p-6",children:[r?p.jsx("div",{children:p.jsx(CL,{ref:h,src:r,style:{height:400,width:"100%"},aspectRatio:1/1,guides:!1,viewMode:1,autoCropArea:.8,movable:!0,zoomable:!0,background:!1,className:"bg-zinc-900 rounded-md"})}):p.jsxs("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-zinc-600 rounded-lg p-8 text-center",children:[p.jsx(t0,{className:"w-12 h-12 text-zinc-500 mb-2"}),p.jsx("label",{htmlFor:"image-upload-input",className:"cursor-pointer bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition-colors duration-200",children:"Select an Image"}),p.jsx("input",{id:"image-upload-input",type:"file",accept:"image/*",onChange:m,className:"hidden"}),p.jsx("p",{className:"text-xs text-zinc-400 mt-2",children:"PNG, JPG, WEBP up to 1MB."}),a&&p.jsx("p",{className:"mt-2 text-zinc-400 animate-pulse",children:"Processing..."})]}),o&&p.jsx("p",{className:"text-red-400 text-sm mt-4",children:o})]}),p.jsxs("footer",{className:"flex justify-end gap-2 p-4 bg-zinc-900/50 border-t border-zinc-700",children:[p.jsx("button",{onClick:f,disabled:a,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition-colors disabled:bg-zinc-500 disabled:cursor-not-allowed",children:"Cancel"}),p.jsxs("button",{onClick:b,disabled:a||!r,className:"flex items-center gap-2 bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded transition-colors disabled:bg-zinc-600 disabled:cursor-not-allowed",children:[p.jsx(QP,{className:"w-5 h-5"}),a?"Saving...":"Save Cropped Image"]})]})]})},IL={name:"",level:0,school:"Evocation",castingTime:"1 Action",range:"60 feet",components:"V, S",duration:"Instantaneous",description:""},DL=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=q.useState(t),a=(h,u)=>{i(d=>({...d,[h]:u}))},s=h=>{h.preventDefault(),r.name.trim()&&e(r)},o=["Abjuration","Conjuration","Divination","Enchantment","Evocation","Illusion","Necromancy","Transmutation"],l="w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent";return p.jsxs("form",{onSubmit:s,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-6",children:[p.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Spell":"Add New Spell"}),p.jsx("input",{type:"text",placeholder:"Spell Name",value:r.name,onChange:h=>a("name",h.target.value),required:!0,className:l}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsx("input",{type:"number",placeholder:"Level",value:r.level,onChange:h=>a("level",parseInt(h.target.value)),min:"0",max:"9",className:l}),p.jsx("select",{value:r.school,onChange:h=>a("school",h.target.value),className:l,children:o.map(h=>p.jsx("option",{value:h,children:h},h))})]}),p.jsx("textarea",{placeholder:"Description",value:r.description,onChange:h=>a("description",h.target.value),rows:4,className:`${l} resize-y`}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition",children:"Save Spell"})]})]})},OL=({spell:t,onEdit:e,onDelete:n,onToggleExpand:r,isExpanded:i})=>p.jsxs("div",{className:"bg-card/50 rounded-lg",children:[p.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-3",onClick:r,children:[p.jsx("h4",{className:"font-bold text-accent",children:t.name}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("span",{className:"text-sm text-muted-foreground capitalize",children:t.school}),p.jsx("button",{onClick:a=>{a.stopPropagation(),e()},className:"text-muted-foreground hover:text-accent p-1",children:p.jsx(Qs,{className:"w-4 h-4"})}),p.jsx("button",{onClick:a=>{a.stopPropagation(),n()},className:"text-muted-foreground hover:text-destructive p-1",children:p.jsx(Xs,{className:"w-4 h-4"})})]})]}),i&&p.jsxs("div",{className:"mt-2 pt-3 border-t border-border/50 space-y-2 text-sm p-3 bg-muted/30",children:[p.jsxs("p",{children:[p.jsx("strong",{className:"text-muted-foreground",children:"Casting Time:"})," ",t.castingTime]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-muted-foreground",children:"Range:"})," ",t.range]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-muted-foreground",children:"Components:"})," ",t.components]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-muted-foreground",children:"Duration:"})," ",t.duration]}),p.jsx("p",{className:"text-foreground mt-2 whitespace-pre-wrap",children:t.description})]})]}),ML=()=>{const{character:t,updateCharacter:e}=On(),[n,r]=q.useState(null),[i,a]=q.useState({});if(!t)return null;const s=d=>{let f;if("id"in d)f=t.spells.map(m=>m.id===d.id?d:m);else{const m={...d,id:`spell_${Date.now()}`};f=[...t.spells,m]}e({spells:f}),r(null)},o=d=>{if(window.confirm("Are you sure you want to delete this spell?")){const f=t.spells.filter(m=>m.id!==d);e({spells:f})}},l=d=>{a(f=>({...f,[d]:!f[d]}))},h=q.useMemo(()=>t.spells.reduce((d,f)=>(d[f.level]=[...d[f.level]||[],f],d[f.level].sort((m,b)=>m.name.localeCompare(b.name)),d),{}),[t.spells]),u=Object.keys(h).map(Number).sort((d,f)=>d-f);return p.jsxs("div",{className:"bg-card/80 p-4 rounded-lg border border-border flex flex-col h-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Spellbook"}),p.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[p.jsx(Ou,{className:"w-5 h-5"})," Add Spell"]})]}),n&&p.jsx(DL,{initialData:n==="new"?IL:n,onSave:s,onCancel:()=>r(null)}),p.jsxs("div",{className:"space-y-6 overflow-y-auto pr-2 -mr-2",children:[t.spells.length===0&&!n&&p.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"This character knows no spells. Add one to get started!"}),u.map(d=>p.jsxs("div",{children:[p.jsx("h4",{className:"text-xl font-serif text-foreground border-b border-border pb-1 mb-3",children:d===0?"Cantrips":`Level ${d}`}),p.jsx("div",{className:"space-y-3",children:h[d].map(f=>p.jsx(OL,{spell:f,isExpanded:!!i[f.id],onToggleExpand:()=>l(f.id),onEdit:()=>r(f),onDelete:()=>o(f.id)},f.id))})]},d))]})]})},kL={name:"",description:""},jL=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=q.useState(t),a=(o,l)=>{i(h=>({...h,[o]:l}))},s=o=>{o.preventDefault(),r.name.trim()&&e(r)};return p.jsxs("form",{onSubmit:s,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-4",children:[p.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Feature":"Add New Feature"}),p.jsx("input",{type:"text",placeholder:"Feature or Trait Name",value:r.name,onChange:o=>a("name",o.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent"}),p.jsx("textarea",{placeholder:"Description",value:r.description,onChange:o=>a("description",o.target.value),rows:4,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent resize-y"}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition",children:"Save Feature"})]})]})},PL=()=>{const{character:t,updateCharacter:e}=On(),[n,r]=q.useState(null),[i,a]=q.useState({});if(!t)return null;const s=u=>{let d;if("id"in u)d=t.featuresAndTraits.map(f=>f.id===u.id?u:f);else{const f={...u,id:`feat_${Date.now()}`};d=[...t.featuresAndTraits,f]}e({featuresAndTraits:d}),r(null)},o=u=>{if(window.confirm("Are you sure you want to delete this feature?")){const d=t.featuresAndTraits.filter(f=>f.id!==u);e({featuresAndTraits:d})}},l=u=>{a(d=>({...d,[u]:!d[u]}))},h=q.useMemo(()=>[...t.featuresAndTraits].sort((u,d)=>u.name.localeCompare(d.name)),[t.featuresAndTraits]);return p.jsxs("div",{className:"bg-card/80 p-4 rounded-lg border border-border flex flex-col h-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Features & Traits"}),p.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[p.jsx(Ou,{className:"w-5 h-5"})," Add Feature"]})]}),n&&p.jsx(jL,{initialData:n==="new"?kL:n,onSave:s,onCancel:()=>r(null)}),p.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[h.length===0&&!n&&p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-center text-muted-foreground text-sm py-4",children:"No features or traits have been added."})}),h.map(u=>p.jsxs("div",{className:"bg-card/50 rounded-lg text-sm",children:[p.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer",onClick:()=>l(u.id),children:[p.jsx("span",{className:"font-semibold text-accent",children:u.name}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:d=>{d.stopPropagation(),r(u)},className:"text-muted-foreground hover:text-accent p-1",children:p.jsx(Qs,{className:"w-4 h-4"})}),p.jsx("button",{onClick:d=>{d.stopPropagation(),o(u.id)},className:"text-muted-foreground hover:text-destructive p-1",children:p.jsx(Xs,{className:"w-4 h-4"})})]})]}),i[u.id]&&p.jsx("div",{className:"p-3 border-t border-border/50 bg-muted/30",children:p.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:u.description})})]},u.id))]})]})},UL={name:"",quantity:1,description:"",equipped:!1},LL=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=q.useState(t),a=(h,u)=>{i(d=>({...d,[h]:u}))},s=h=>{h.preventDefault(),r.name.trim()&&e(r)},o="w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent text-sm",l="block text-xs font-medium text-muted-foreground mb-1";return p.jsxs("form",{onSubmit:s,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-4",children:[p.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Item":"Add New Item"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"md:col-span-2",children:[p.jsx("label",{htmlFor:"name",className:l,children:"Item Name"}),p.jsx("input",{id:"name",type:"text",placeholder:"e.g., Longsword",value:r.name,onChange:h=>a("name",h.target.value),required:!0,className:o})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"quantity",className:l,children:"Quantity"}),p.jsx("input",{id:"quantity",type:"number",value:r.quantity,onChange:h=>a("quantity",parseInt(h.target.value)||1),min:"1",className:`${o} text-center`})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"description",className:l,children:"Description"}),p.jsx("textarea",{id:"description",value:r.description,onChange:h=>a("description",h.target.value),className:o,rows:3})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"armorType",className:l,children:"Armor Type"}),p.jsxs("select",{id:"armorType",value:r.armorType||"",onChange:h=>a("armorType",h.target.value||void 0),className:o,children:[p.jsx("option",{value:"",children:"Not Armor"}),p.jsx("option",{value:"light",children:"Light Armor"}),p.jsx("option",{value:"medium",children:"Medium Armor"}),p.jsx("option",{value:"heavy",children:"Heavy Armor"}),p.jsx("option",{value:"shield",children:"Shield"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"armorClass",className:l,children:"Armor Class (AC)"}),p.jsx("input",{id:"armorClass",type:"number",placeholder:"e.g., 14",value:r.armorClass||"",onChange:h=>a("armorClass",parseInt(h.target.value)||void 0),className:o})]})]}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition text-sm",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition text-sm",children:"Save Item"})]})]})},IE=({title:t,items:e,expandedItem:n,onToggleExpand:r,onEdit:i,onDelete:a})=>p.jsxs("div",{children:[p.jsx("h4",{className:"text-base font-semibold text-foreground border-b border-border pb-2 mb-3",children:t}),p.jsxs("div",{className:"space-y-2",children:[e.length===0&&p.jsx("p",{className:"text-center text-muted-foreground text-xs py-2",children:"Empty"}),e.map(s=>p.jsxs("div",{className:"bg-card/50 rounded-lg text-sm",children:[p.jsxs("div",{className:"p-3 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[p.jsx("button",{onClick:()=>r(s.id),className:"flex-shrink-0 text-muted-foreground hover:text-foreground",children:p.jsx(iR,{className:`w-5 h-5 transition-transform ${n===s.id?"rotate-180":""}`})}),p.jsxs("p",{className:"font-semibold text-accent truncate",title:s.name,children:[s.name," ",p.jsxs("span",{className:"text-xs text-muted-foreground",children:["(x",s.quantity,")"]})]})]}),p.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[p.jsx("button",{onClick:()=>i(s),className:"text-muted-foreground hover:text-accent p-1",children:p.jsx(Qs,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>a(s.id),className:"text-muted-foreground hover:text-destructive p-1",children:p.jsx(Xs,{className:"w-4 h-4"})})]})]}),n===s.id&&p.jsxs("div",{className:"p-3 border-t border-border/50 bg-muted/30 space-y-2",children:[s.armorType&&p.jsxs("p",{children:[p.jsxs("strong",{className:"text-muted-foreground capitalize",children:[s.armorType," Armor"]}),s.armorClass?p.jsxs("span",{className:"text-foreground",children:[" (AC: ",s.armorClass,")"]}):""]}),p.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:s.description||"No description."})]})]},s.id))]})]}),VL=()=>{const{character:t,updateCharacter:e}=On(),[n,r]=q.useState(null),[i,a]=q.useState(null),s=d=>{let f;if("id"in d)f=(t.equipment||[]).map(m=>m.id===d.id?d:m);else{const m={...d,id:`item_${Date.now()}`};f=[...t.equipment||[],m]}e({equipment:f}),r(null)},o=d=>{if(window.confirm("Are you sure you want to delete this item?")){const f=(t.equipment||[]).filter(m=>m.id!==d);e({equipment:f})}},l=d=>{a(f=>f===d?null:d)},{equippableItems:h,backpackItems:u}=q.useMemo(()=>{const d=[],f=[];return(t.equipment||[]).forEach(m=>{m.armorType?d.push(m):f.push(m)}),{equippableItems:d.sort((m,b)=>m.name.localeCompare(b.name)),backpackItems:f.sort((m,b)=>m.name.localeCompare(b.name))}},[t.equipment]);return p.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Inventory"}),p.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[p.jsx(Ou,{className:"w-5 h-5"})," Add Item"]})]}),n&&p.jsx(LL,{initialData:n==="new"?UL:n,onSave:s,onCancel:()=>r(null)}),p.jsxs("div",{className:"space-y-6",children:[p.jsx(IE,{title:"Equippable Gear",items:h,expandedItem:i,onToggleExpand:l,onEdit:r,onDelete:o}),p.jsx(IE,{title:"Backpack",items:u,expandedItem:i,onToggleExpand:l,onEdit:r,onDelete:o})]})]})},zL={name:"",bonus:"+0",damage:"1d4"},BL=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=q.useState(t),a=(o,l)=>{i(h=>({...h,[o]:l}))},s=o=>{o.preventDefault(),r.name.trim()&&e(r)};return p.jsxs("form",{onSubmit:s,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-4",children:[p.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Attack":"Add New Attack"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsx("input",{type:"text",placeholder:"Attack Name",value:r.name,onChange:o=>a("name",o.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent sm:col-span-1"}),p.jsx("input",{type:"text",placeholder:"e.g. +5",value:r.bonus,onChange:o=>a("bonus",o.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent text-center"}),p.jsx("input",{type:"text",placeholder:"e.g. (2d6)+(1d4)+3",value:r.damage,onChange:o=>a("damage",o.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent text-center"})]}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition",children:"Save Attack"})]})]})},FL=()=>{const{character:t,updateCharacter:e}=On(),[n,r]=q.useState(null);if(!t)return null;const i=o=>{let l;if("id"in o)l=t.attacks.map(h=>h.id===o.id?o:h);else{const h={...o,id:`attack_${Date.now()}`};l=[...t.attacks,h]}e({attacks:l}),r(null)},a=o=>{if(window.confirm("Are you sure you want to delete this attack?")){const l=t.attacks.filter(h=>h.id!==o);e({attacks:l})}},s=q.useMemo(()=>[...t.attacks||[]].sort((o,l)=>o.name.localeCompare(l.name)),[t.attacks]);return p.jsxs("div",{className:"bg-card/80 p-4 rounded-lg border border-border flex flex-col h-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Attacks & Cantrips"}),p.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[p.jsx(Ou,{className:"w-5 h-5"})," Add Attack"]})]}),n&&p.jsx(BL,{initialData:n==="new"?zL:n,onSave:i,onCancel:()=>r(null)}),p.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[s.length===0&&!n&&p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-center text-muted-foreground text-sm py-4",children:"No attacks have been defined."})}),s.map(o=>p.jsx("div",{className:"bg-card/50 rounded-lg text-sm",children:p.jsxs("div",{className:"grid grid-cols-6 items-center p-3",children:[p.jsx("span",{className:"font-semibold text-accent col-span-3",children:o.name}),p.jsx("span",{className:"font-mono text-foreground col-span-1 text-center",children:o.bonus}),p.jsx("span",{className:"font-mono text-foreground col-span-1 text-center",children:o.damage}),p.jsxs("div",{className:"flex items-center gap-2 justify-end col-span-1",children:[p.jsx("button",{onClick:()=>r(o),className:"text-muted-foreground hover:text-accent p-1",children:p.jsx(Qs,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>a(o.id),className:"text-muted-foreground hover:text-destructive p-1",children:p.jsx(Xs,{className:"w-4 h-4"})})]})]})},o.id))]})]})},HL={name:"",max:1},qL=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=q.useState(t),a=(o,l)=>{i(h=>({...h,[o]:l}))},s=o=>{o.preventDefault(),r.name.trim()&&e(r)};return p.jsxs("form",{onSubmit:s,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-4",children:[p.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Resource":"Add New Resource"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsx("input",{type:"text",placeholder:"Resource Name",value:r.name,onChange:o=>a("name",o.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent sm:col-span-2"}),p.jsx("input",{type:"number",placeholder:"Max",value:r.max,onChange:o=>a("max",parseInt(o.target.value)||1),min:"1",className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent text-center"})]}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition",children:"Save"})]})]})},GL=({character:t,onUpdateCharacter:e})=>{const[n,r]=q.useState(null),i=s=>{let o;if("id"in s)o=(t.customResources||[]).map(l=>l.id===s.id?{...l,name:s.name,max:s.max}:l);else{const l={...s,id:`resource_${Date.now()}`,used:0};o=[...t.customResources||[],l]}e({customResources:o}),r(null)},a=s=>{if(window.confirm("Are you sure you want to delete this resource?")){const o=(t.customResources||[]).filter(l=>l.id!==s);e({customResources:o})}};return p.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Other Resources"}),p.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[p.jsx(Ou,{className:"w-5 h-5"})," Add Resource"]})]}),n&&p.jsx(qL,{initialData:n==="new"?HL:n,onSave:i,onCancel:()=>r(null)}),p.jsxs("div",{className:"space-y-2",children:[(t.customResources||[]).length===0&&!n&&p.jsx("p",{className:"text-center text-muted-foreground text-sm py-4",children:"No custom resources defined."}),(t.customResources||[]).map(s=>p.jsxs("div",{className:"bg-card/50 rounded-lg text-sm p-3 flex items-center justify-between",children:[p.jsx("span",{className:"font-semibold text-accent",children:s.name}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("span",{className:"text-muted-foreground",children:["Max: ",s.max]}),p.jsx("button",{onClick:()=>r(s),className:"text-muted-foreground hover:text-accent p-1",children:p.jsx(Qs,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>a(s.id),className:"text-muted-foreground hover:text-destructive p-1",children:p.jsx(Xs,{className:"w-4 h-4"})})]})]},s.id))]})]})},Lr=({label:t,value:e,subValue:n,className:r})=>p.jsxs("div",{className:`flex flex-col items-center justify-center p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-center ${r}`,children:[p.jsx("span",{className:"text-2xl sm:text-3xl font-bold font-mono text-white",children:e}),p.jsx("span",{className:"text-xs uppercase tracking-wider text-zinc-400 mt-1",children:t}),n&&p.jsx("span",{className:"text-xs text-zinc-500",children:n})]}),Go=t=>Math.floor((t-10)/2),xi=t=>t>=0?`+${t}`:String(t),ep=["strength","dexterity","constitution","intelligence","wisdom","charisma"],$L=({label:t,isActive:e,onClick:n,controls:r,id:i})=>p.jsx("button",{id:i,role:"tab","aria-selected":e,"aria-controls":r,onClick:n,className:`px-3 py-2 text-sm font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-card text-accent border-b-2 border-accent":"text-muted-foreground hover:bg-muted border-b-2 border-transparent"}`,children:t}),Wr=({label:t,name:e,type:n,value:r,onChange:i,placeholder:a,className:s})=>p.jsxs("div",{className:s,children:[p.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-muted-foreground capitalize",children:t}),p.jsx("input",{type:n,id:e,name:e,value:r,onChange:i,placeholder:a,className:"mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent sm:text-sm"})]}),io=({label:t,name:e,value:n,onChange:r,placeholder:i})=>p.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col",children:[p.jsx("h3",{className:"text-lg font-semibold text-accent mb-2",children:t}),p.jsx("textarea",{name:e,value:n,onChange:r,className:"w-full bg-input border border-border rounded-md p-3 text-foreground focus:ring-ring focus:border-accent resize-y flex-grow min-h-[100px]",placeholder:i||`Your character's ${t.toLowerCase()}...`})]}),YL=[{key:"main",label:"Main"},{key:"stats",label:"Stats & Skills"},{key:"combat",label:"Combat & Features"},{key:"bio",label:"Biography & Notes"},{key:"inventory",label:"Inventory"},{key:"spells",label:"Spells"}],DE=()=>{var re;const{characterId:t}=Gx(),e=gu(),{character:n,setCharacter:r,updateCharacter:i,deleteCharacter:a,saveCharacter:s}=On(),[o,l]=q.useState(!1),[h,u]=q.useState(!1),[d,f]=q.useState(""),[m,b]=q.useState("main"),[A,D]=q.useState(!1),E=window.location.pathname.endsWith("/character/new");q.useEffect(()=>{let V=!0;return(async()=>{let $;t?$=await ZS(t):$={...Qc(),id:"temp_new"};const Y={...Qc(),...$};V&&r(Y)})(),()=>{V=!1}},[t,r]);const x=q.useMemo(()=>n?Math.ceil(n.level/4)+1:0,[n==null?void 0:n.level]),N=async()=>{if(n){l(!0);try{const V=E?`char_${Date.now()}`:n.id,K={...n,id:V,proficiencyBonus:x,initiative:H,lastUpdated:Date.now()},$=await s(K);E?e(`/character/${$.id}/edit`,{replace:!0}):e(`/character/${$.id}`)}catch(V){console.error("Failed to save character:",V),alert("An error occurred while saving. Please try again.")}finally{l(!1)}}},O=async()=>{if(n&&!E&&window.confirm(`Are you sure you want to permanently delete ${n.name}?`))try{await a(n.id),e("/")}catch(V){console.error("Failed to delete character:",V),alert("An error occurred while deleting the character.")}},P=()=>{e(E?"/":n?`/character/${n.id}`:-1)},R=V=>{if(!n)return;const{name:K,value:$,type:Y}=V.target;let le=$;Y==="number"&&(le=parseInt($)||0),i({[K]:le})},_=(V,K)=>{n&&r($=>({...$,currency:{...$.currency,[V]:K}}))},g=(V,K)=>{n&&r($=>({...$,hp:{...$.hp,[V]:K}}))},y=V=>{if(!n)return;const{value:K}=V.target;r($=>({...$,hitDice:{...$.hitDice,total:K}}))},T=(V,K)=>{n&&r($=>({...$,abilityScores:{...$.abilityScores,[V]:K}}))},C=V=>{if(!n)return;const K={...n.savingThrows};K[V].proficient=!K[V].proficient,r($=>({...$,savingThrows:K}))},I=V=>{if(!n)return;const K=n.skills.map($=>{if($.name===V){const Y=!$.proficient,le=Y?$.expertise:!1;return{...$,proficient:Y,expertise:le}}return $});r($=>({...$,skills:K}))},S=V=>{if(!n)return;const K=n.skills.map($=>{if($.name===V){const Y=!$.expertise,le=Y||$.proficient;return{...$,proficient:le,expertise:Y}}return $});r($=>({...$,skills:K}))},U=V=>{var $;if(!n)return;const K=parseInt(V.target.value,10)||0;i({unarmoredDefense:{base:K,abilities:(($=n.unarmoredDefense)==null?void 0:$.abilities)||[]}})},z=V=>{var Y,le;if(!n)return;const K=((Y=n.unarmoredDefense)==null?void 0:Y.abilities)||[],$=K.includes(V)?K.filter(Te=>Te!==V):[...K,V];i({unarmoredDefense:{base:((le=n.unarmoredDefense)==null?void 0:le.base)??10,abilities:$}})},k=(V,K)=>{if(!n)return;const $={...n.spellSlots};$[V]={...$[V],max:K},r(Y=>({...Y,spellSlots:$}))},M=async()=>{if(!n)return;u(!0);const V=await PU(n,d);r(K=>({...K,...V})),u(!1)},H=q.useMemo(()=>n?Go(n.abilityScores.dexterity):0,[n==null?void 0:n.abilityScores.dexterity]),{spellSaveDC:B,spellAttackBonus:X}=q.useMemo(()=>{if(!n||!n.spellcastingAbility)return{spellSaveDC:"-",spellAttackBonus:"-"};const V=Go(n.abilityScores[n.spellcastingAbility]);return{spellSaveDC:8+x+V,spellAttackBonus:xi(x+V)}},[n==null?void 0:n.spellcastingAbility,n==null?void 0:n.abilityScores,x]);return n?p.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:pt-8",children:[p.jsxs("header",{className:"flex justify-between items-center mb-4 border-b border-border pb-4",children:[p.jsxs("button",{onClick:P,className:"flex items-center gap-2 text-muted-foreground hover:text-accent transition-colors",children:[p.jsx(rR,{className:"w-5 h-5"}),E?"Cancel Creation":"Back to Play"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[!E&&p.jsx("button",{onClick:O,className:"p-2 rounded-full bg-destructive/50 hover:bg-destructive text-destructive-foreground transition-colors","aria-label":"Delete Character",children:p.jsx(Xs,{className:"w-5 h-5"})}),p.jsxs("button",{onClick:N,disabled:o,className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-bold rounded-lg shadow-md hover:bg-primary/90 transition-colors disabled:bg-muted disabled:text-muted-foreground",children:[p.jsx(WP,{className:"w-5 h-5"}),o?"Saving...":"Save Changes"]})]})]}),p.jsxs("div",{className:"bg-card border border-border shadow-2xl shadow-accent/10 rounded-lg p-4 sm:p-6",children:[p.jsx("div",{role:"tablist","aria-label":"Character Sheet Sections",className:"flex space-x-1 mb-6 border-b border-border overflow-x-auto",children:YL.map(V=>p.jsx($L,{id:`tab-${V.key}`,label:V.label,isActive:m===V.key,onClick:()=>b(V.key),controls:`panel-${V.key}`},V.key))}),p.jsx("div",{id:"panel-main",role:"tabpanel","aria-labelledby":"tab-main",hidden:m!=="main",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsx("div",{className:"space-y-6",children:p.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"block text-sm font-medium text-muted-foreground",children:"Character Portrait"}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("span",{className:"inline-block h-24 w-24 rounded-lg overflow-hidden bg-muted",children:n.imageUrl?p.jsx("img",{src:n.imageUrl,alt:"Character portrait",className:"h-full w-full object-cover"}):p.jsx(t0,{className:"h-full w-full text-muted-foreground p-4"})}),p.jsx("button",{type:"button",onClick:()=>D(!0),disabled:E,className:"cursor-pointer rounded-md bg-secondary px-3 py-2 text-sm font-semibold text-secondary-foreground shadow-sm hover:bg-secondary/80 transition-colors disabled:bg-muted disabled:text-muted-foreground disabled:cursor-not-allowed",children:"Change"})]}),E&&p.jsx("p",{className:"text-xs text-muted-foreground",children:"Save the character to enable the image uploader."})]}),p.jsx(Wr,{label:"Character Name",name:"name",type:"text",value:n.name,onChange:R,placeholder:"e.g., Eldrin"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx(Wr,{label:"Class",name:"class",type:"text",value:n.class,onChange:R,placeholder:"e.g., Wizard"}),p.jsx(Wr,{label:"Subclass",name:"subclass",type:"text",value:n.subclass,onChange:R,placeholder:"e.g., School of Evocation"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx(Wr,{label:"Race",name:"race",type:"text",value:n.race,onChange:R,placeholder:"e.g., High-Elf"}),p.jsx(Wr,{label:"Background",name:"background",type:"text",value:n.background,onChange:R,placeholder:"e.g., Sage"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx(Wr,{label:"Alignment",name:"alignment",type:"text",value:n.alignment,onChange:R,placeholder:"e.g., Chaotic Good"}),p.jsx(Wr,{label:"Level",name:"level",type:"number",value:n.level,onChange:R})]}),p.jsx(Wr,{label:"Languages",name:"languages",type:"text",value:n.languages,onChange:R,placeholder:"e.g., Common, Elvish"})]})}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Hit Points"}),p.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"hp-current",className:"block text-xs font-medium text-muted-foreground text-center",children:"Current"}),p.jsx("input",{id:"hp-current",type:"number",value:n.hp.current,onChange:V=>g("current",parseInt(V.target.value)||0),className:"mt-1 w-full bg-input border border-border rounded-md py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"hp-max",className:"block text-xs font-medium text-muted-foreground text-center",children:"Max"}),p.jsx("input",{id:"hp-max",type:"number",value:n.hp.max,onChange:V=>g("max",parseInt(V.target.value)||0),className:"mt-1 w-full bg-input border border-border rounded-md py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"hp-temporary",className:"block text-xs font-medium text-muted-foreground text-center",children:"Temporary"}),p.jsx("input",{id:"hp-temporary",type:"number",value:n.hp.temporary,onChange:V=>g("temporary",parseInt(V.target.value)||0),className:"mt-1 w-full bg-input border border-border rounded-md py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]})]})]}),p.jsx(Wr,{label:"Hit Dice",name:"hitDice",type:"text",value:n.hitDice.total,onChange:y,placeholder:"e.g. 1d8"})]}),p.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-2",children:[p.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Unarmored Defense"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsx("input",{id:"unarmoredBase",type:"number",name:"unarmoredBase",value:((re=n.unarmoredDefense)==null?void 0:re.base)??10,onChange:U,className:"w-24 bg-input border border-border rounded-md py-1 px-2 text-foreground text-center focus:outline-none focus:ring-ring focus:border-accent","aria-label":"Base Armor Class"}),p.jsx("label",{htmlFor:"unarmoredBase",className:"text-xs text-muted-foreground mt-1",children:"Base AC"})]}),p.jsx("span",{className:"text-xl text-muted-foreground",children:" + "}),p.jsx("div",{className:"flex-1",children:p.jsx("div",{className:"grid grid-cols-3 gap-2",children:ep.map(V=>{var K;return p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsx("input",{type:"checkbox",id:`unarmored-${V}`,checked:(K=n.unarmoredDefense)==null?void 0:K.abilities.includes(V),onChange:()=>z(V),className:"w-4 h-4 rounded-full text-primary bg-input border-border focus:ring-ring cursor-pointer"}),p.jsx("label",{htmlFor:`unarmored-${V}`,className:"text-xs text-muted-foreground mt-1 uppercase",children:V.substring(0,3)})]},V)})})})]})]})]}),p.jsx("div",{className:"space-y-6",children:p.jsxs("div",{className:"p-4 border border-border rounded-lg grid grid-cols-2 gap-4",children:[p.jsx(Lr,{label:"Initiative",value:xi(H)}),p.jsx(Wr,{label:"Speed",name:"speed",type:"number",value:n.speed,onChange:R}),p.jsx(Lr,{label:"Proficiency",value:xi(x)}),p.jsxs("div",{className:"col-span-2",children:[p.jsx("label",{htmlFor:"spellcastingAbility",className:"block text-sm font-medium text-muted-foreground",children:"Spellcasting Ability"}),p.jsxs("select",{id:"spellcastingAbility",name:"spellcastingAbility",value:n.spellcastingAbility,onChange:R,className:"mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent sm:text-sm",children:[p.jsx("option",{value:"",children:"None"}),ep.map(V=>p.jsx("option",{value:V,className:"capitalize",children:V},V))]})]}),p.jsx(Lr,{label:"Spell Save DC",value:String(B)}),p.jsx(Lr,{label:"Spell Attack",value:String(X)})]})})]})}),p.jsx("div",{id:"panel-stats",role:"tabpanel","aria-labelledby":"tab-stats",hidden:m!=="stats",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ep.map(V=>{const K=n.abilityScores[V],$=Go(K),Y=n.savingThrows[V],le=$+(Y.proficient?x:0),Te=n.skills.filter(me=>me.ability===V);return p.jsxs("div",{className:"bg-card p-3 rounded-lg flex flex-col gap-3 border border-border",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"flex flex-col items-center justify-center bg-muted p-2 rounded-lg w-20",children:[p.jsx("span",{className:"text-3xl font-bold font-mono text-foreground",children:xi($)}),p.jsx("span",{className:"text-xs uppercase tracking-wider text-muted-foreground",children:V.substring(0,3)})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-xl font-cinzel text-accent capitalize",children:V}),p.jsx("input",{type:"number",value:K,onChange:me=>T(V,parseInt(me.target.value)||0),className:"w-full bg-input text-center text-lg rounded border border-border p-1 focus:ring-ring","aria-label":`${V} score`})]})]}),p.jsxs("div",{className:"bg-muted/60 p-2 rounded-md space-y-2",children:[p.jsxs("label",{htmlFor:`saving-throw-${V}`,className:"flex items-center justify-between cursor-pointer text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",id:`saving-throw-${V}`,checked:Y.proficient,onChange:()=>C(V),className:"w-4 h-4 rounded-full text-primary bg-input border-border focus:ring-ring"}),p.jsx("span",{className:"text-foreground",children:"Saving Throw"})]}),p.jsx("span",{className:"font-mono font-bold text-lg text-foreground",children:xi(le)})]}),Te.map(me=>{const De=$+(me.proficient?x:0)+(me.expertise?x:0);return p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",id:`skill-prof-${me.name}`,checked:me.proficient,onChange:()=>I(me.name),className:"w-4 h-4 rounded-full text-primary bg-input border-border focus:ring-ring cursor-pointer"}),p.jsx("input",{type:"checkbox",id:`skill-exp-${me.name}`,checked:me.expertise,onChange:()=>S(me.name),className:"w-4 h-4 rounded-sm text-accent bg-input border-border focus:ring-ring cursor-pointer",title:"Expertise"}),p.jsx("label",{htmlFor:`skill-prof-${me.name}`,className:"cursor-pointer text-foreground",children:me.name})]}),p.jsx("span",{className:"font-mono font-bold text-lg text-foreground",children:xi(De)})]},me.name)})]})]},V)})})}),p.jsx("div",{id:"panel-combat",role:"tabpanel","aria-labelledby":"tab-combat",hidden:m!=="combat",className:"min-h-[60vh]",children:p.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-full",children:[p.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col p-4 border border-border rounded-lg",children:p.jsx(FL,{})}),p.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col p-4 border border-border rounded-lg",children:p.jsx(PL,{})})]})}),p.jsx("div",{id:"panel-bio",role:"tabpanel","aria-labelledby":"tab-bio",hidden:m!=="bio",className:"min-h-[60vh]",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsx(io,{label:"Personality Traits",name:"personalityTraits",value:n.personalityTraits,onChange:R}),p.jsx(io,{label:"Ideals",name:"ideals",value:n.ideals,onChange:R}),p.jsx(io,{label:"Bonds",name:"bonds",value:n.bonds,onChange:R}),p.jsx(io,{label:"Flaws",name:"flaws",value:n.flaws,onChange:R})]}),p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col",children:[p.jsx("h3",{className:"text-lg font-semibold text-accent mb-2",children:"AI Personality Generator"}),p.jsx("input",{type:"text",placeholder:"Optional: Add a keyword (e.g., 'tragic', 'grew up an orphan')",value:d,onChange:V=>f(V.target.value),className:"w-full bg-input border border-border rounded-md p-2 text-sm mb-2 focus:ring-ring focus:border-accent"}),p.jsxs("button",{onClick:M,disabled:h,className:"flex w-full justify-center items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition disabled:bg-muted disabled:text-muted-foreground",children:[p.jsx(KP,{className:"w-4 h-4"}),h?"Generating...":"Generate with AI"]})]}),p.jsx(io,{label:"Notes",name:"notes",value:n.notes,onChange:R,placeholder:"Campaign notes, important NPCs, etc."}),p.jsx(io,{label:"DM Notes",name:"dmNotes",value:n.dmNotes,onChange:R,placeholder:"Notes from your DM, or secrets your character knows."})]})]})}),p.jsx("div",{id:"panel-inventory",role:"tabpanel","aria-labelledby":"tab-inventory",hidden:m!=="inventory",className:"min-h-[60vh]",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"lg:col-span-1",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent mb-4",children:"Currency"}),p.jsx("div",{className:"bg-muted/50 p-4 rounded-lg grid grid-cols-3 sm:grid-cols-5 gap-3 border border-border",children:Object.entries(n.currency).map(([V,K])=>p.jsxs("div",{children:[p.jsx("label",{className:"block text-center text-sm font-medium text-muted-foreground uppercase",children:V}),p.jsx("input",{type:"number",value:K,onChange:$=>_(V,parseInt($.target.value,10)||0),className:"mt-1 block w-full bg-input border border-border rounded-md py-1 px-2 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]},V))})]}),p.jsx("div",{className:"lg:col-span-2 p-4 border border-border rounded-lg",children:p.jsx(VL,{})})]})}),p.jsxs("div",{id:"panel-spells",role:"tabpanel","aria-labelledby":"tab-spells",hidden:m!=="spells",className:"min-h-[60vh] space-y-6",children:[p.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg border border-border",children:[p.jsx("h4",{className:"text-lg font-cinzel text-accent mb-3",children:"Maximum Spell Slots"}),p.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-5 md:grid-cols-9 gap-3",children:Array.from({length:9},(V,K)=>K+1).map(V=>{var K;return p.jsxs("div",{children:[p.jsxs("label",{className:"block text-center text-sm font-medium text-muted-foreground",children:["Lvl ",V]}),p.jsx("input",{type:"number",min:"0",value:((K=n.spellSlots[V])==null?void 0:K.max)??0,onChange:$=>k(V,parseInt($.target.value,10)||0),className:"mt-1 block w-full bg-input border border-border rounded-md py-1 px-2 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]},V)})})]}),p.jsx("div",{className:"p-4 border border-border rounded-lg",children:p.jsx(GL,{character:n,onUpdateCharacter:i})}),p.jsx("div",{className:"p-4 border border-border rounded-lg",children:p.jsx(ML,{})})]})]}),p.jsx(NL,{isOpen:A,onClose:()=>D(!1),onImageReady:V=>i({imageUrl:V})})]}):p.jsx("div",{className:"flex justify-center items-center h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-accent"})})},XL=t=>Math.floor((t-10)/2),tp=t=>t>=0?`+${t}`:String(t),QL=["strength","dexterity","constitution","intelligence","wisdom","charisma"],KL=()=>{const{character:t}=On();if(!t)return null;const{proficiencyBonus:e,abilityScores:n,savingThrows:r,skills:i}=t;return p.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3 text-center",children:"Abilities"}),p.jsx("div",{className:"space-y-3",children:QL.map(a=>{const s=n[a],o=XL(s),l=r[a],h=o+(l.proficient?e:0),u=i.filter(d=>d.ability===a);return p.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg border border-border/50",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("h4",{className:"text-lg font-cinzel text-accent capitalize",children:a}),p.jsxs("div",{className:"flex items-baseline gap-2",children:[p.jsx("span",{className:"text-3xl font-mono text-foreground font-bold",children:s}),p.jsxs("span",{className:"text-2xl font-mono text-accent font-bold",children:["(",tp(o),")"]})]})]}),p.jsxs("div",{className:"bg-muted/60 p-2 rounded-md space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between text-sm text-foreground",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:`w-3 h-3 rounded-full border-2 transition-colors ${l.proficient?"bg-primary border-primary":"bg-transparent border-border"}`}),p.jsx("span",{children:"Saving Throw"})]}),p.jsx("span",{className:"font-mono font-bold text-base text-foreground",children:tp(h)})]}),p.jsx("hr",{className:"border-border"}),u.map(d=>{const f=o+(d.proficient?e:0)+(d.expertise?e:0);let m="bg-transparent border-border";return d.expertise?m="bg-accent border-accent ring-2 ring-offset-2 ring-offset-muted/60 ring-accent":d.proficient&&(m="bg-primary border-primary"),p.jsxs("div",{className:"flex items-center justify-between text-sm text-foreground",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:`w-3 h-3 rounded-full border-2 transition-all ${m}`}),p.jsx("span",{children:d.name})]}),p.jsx("span",{className:"font-mono font-bold text-base text-foreground",children:tp(f)})]},d.name)})]})]},a)})})]})},WL=({spell:t,onToggleExpand:e,isExpanded:n})=>p.jsxs("div",{className:"bg-card/50 rounded-lg",children:[p.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-3",onClick:e,children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h4",{className:"font-bold text-accent truncate",title:t.name,children:t.name}),p.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-1",children:[p.jsx("span",{className:"truncate",title:t.castingTime,children:t.castingTime}),p.jsx("span",{className:"opacity-50",children:"|"}),p.jsx("span",{className:"truncate",title:t.range,children:t.range})]})]}),p.jsx("div",{className:"flex items-center gap-2 pl-2 flex-shrink-0",children:p.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:t.school})})]}),n&&p.jsxs("div",{className:"mt-2 pt-3 border-t border-border/50 space-y-2 text-sm p-3 bg-muted/30",children:[p.jsxs("p",{children:[p.jsx("strong",{className:"text-muted-foreground",children:"Components:"})," ",t.components]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-muted-foreground",children:"Duration:"})," ",t.duration]}),p.jsx("p",{className:"text-foreground mt-2 whitespace-pre-wrap",children:t.description})]})]}),ZL=()=>{const{character:t}=On(),[e,n]=q.useState({}),[r,i]=q.useState(""),a=l=>{n(h=>({...h,[l]:!h[l]}))},s=q.useMemo(()=>t?t.spells.filter(h=>h.name.toLowerCase().includes(r.toLowerCase())).reduce((h,u)=>(h[u.level]=[...h[u.level]||[],u],h[u.level].sort((d,f)=>d.name.localeCompare(f.name)),h),{}):{},[t,r]),o=Object.keys(s).map(Number).sort((l,h)=>l-h);return t?p.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col h-auto max-h-[calc(100vh-10rem)]",children:[p.jsx("div",{className:"flex justify-between items-center mb-2",children:p.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Spellbook"})}),p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"text",placeholder:"Search spells...",value:r,onChange:l=>i(l.target.value),className:"w-full bg-input p-2 rounded-md border border-border text-sm focus:ring-ring focus:border-accent"})}),p.jsx("div",{className:"space-y-6 overflow-y-auto pr-2 -mr-2 flex-grow",children:t.spells.length===0?p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"This character knows no spells."})}):o.length===0?p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"No spells match your search."})}):o.map(l=>p.jsxs("div",{children:[p.jsx("h4",{className:"text-xl font-serif text-foreground border-b border-border pb-1 mb-3",children:l===0?"Cantrips":`Level ${l}`}),p.jsx("div",{className:"space-y-3",children:s[l].map(h=>p.jsx(WL,{spell:h,isExpanded:!!e[h.id],onToggleExpand:()=>a(h.id)},h.id))})]},l))})]}):null},JL=({label:t,isActive:e,onClick:n,id:r,controls:i})=>p.jsx("button",{id:r,role:"tab","aria-selected":e,"aria-controls":i,onClick:n,className:`px-4 py-2 text-sm sm:text-base font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-card text-accent border-b-2 border-accent":"text-muted-foreground hover:bg-muted border-b-2 border-transparent"}`,children:t}),xR=t=>{if(!t||typeof t!="string")return{total:0,pretty:"Invalid input"};const e=t.replace(/[\s()]/g,"").split("+");let n=0;const r=[],i=/(\d+)d(\d+)/i;for(const a of e){if(!a)continue;const s=a.match(i);if(s){const o=parseInt(s[1],10),l=parseInt(s[2],10);if(isNaN(o)||isNaN(l))continue;const h=Array.from({length:o},()=>Math.floor(Math.random()*l)+1),u=h.reduce((d,f)=>d+f,0);n+=u,r.push(`[${h.join("+")}]`)}else{const o=parseInt(a,10);isNaN(o)||(n+=o,r.push(String(o)))}}return r.length===0?{total:0,pretty:"Invalid Format"}:{total:n,pretty:`${r.join(" + ")} = ${n}`}},e9=()=>{const[t,e]=q.useState(null),{character:n,updateCharacter:r}=On(),i=Go(n.abilityScores.constitution),a=q.useMemo(()=>{const l=Go(n.abilityScores.wisdom),h=n.skills.find(d=>d.name==="Perception");let u=0;return h&&(h.expertise?u=n.proficiencyBonus*2:h.proficient&&(u=n.proficiencyBonus)),10+l+u},[n]),s=()=>{if(n.hitDice.used>=n.level)return;const{total:l,pretty:h}=xR(`${n.hitDice.total}+${i}`),u=Math.min(n.hp.max,n.hp.current+Math.max(1,l));e(`${h} HP`),r({hp:{...n.hp,current:u},hitDice:{...n.hitDice,used:n.hitDice.used+1}})},o=()=>{r({hitDice:{...n.hitDice,used:0}}),e(null)};return p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"md:col-span-2 lg:col-span-3 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:[p.jsx(Lr,{label:"Armor Class",value:q.useMemo(()=>KS(n),[n])}),p.jsx(Lr,{label:"Initiative",value:xi(n.initiative)}),p.jsx(Lr,{label:"Speed",value:`${n.speed}ft`,subValue:` ${Math.round(n.speed*.3)}m`}),p.jsx(Lr,{label:"Proficiency",value:xi(n.proficiencyBonus)}),p.jsx(Lr,{label:"Passive Perception",value:a,className:"col-span-2 sm:col-span-1"})]}),p.jsx(o9,{}),p.jsx(l9,{}),p.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:"Hit Dice"}),p.jsxs("p",{className:"text-center text-3xl font-bold font-mono text-foreground mb-3",children:[n.level-n.hitDice.used," / ",n.level]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:s,disabled:n.hitDice.used>=n.level,className:"w-full bg-primary/80 hover:bg-primary text-primary-foreground font-bold py-2 px-4 rounded-md transition-colors disabled:bg-muted disabled:text-muted-foreground disabled:cursor-not-allowed",children:["Spend (",n.hitDice.total,")"]}),p.jsx("button",{onClick:o,className:"bg-secondary/80 hover:bg-secondary text-secondary-foreground font-bold py-2 px-4 rounded-md transition-colors",children:"Reset"})]}),t&&p.jsx("p",{className:"text-center text-accent font-mono mt-3 p-2 bg-muted/50 rounded-md",children:t})]}),p.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:"Languages"}),p.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:n.languages||"None"})]})]})},t9=()=>{const{character:t}=On();return p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsx(c9,{items:t.attacks||[]}),p.jsx(u9,{title:"Features & Traits",items:t.featuresAndTraits||[]})]})},n9=()=>{const{character:t,updateCharacter:e}=On(),n=t.spellcastingAbility,r=n?Go(t.abilityScores[n]):0,i=n?8+t.proficiencyBonus+r:"-",a=n?t.proficiencyBonus+r:0;return p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[p.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3 text-center",children:"Spellcasting"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx(Lr,{label:"Save DC",value:i}),p.jsx(Lr,{label:"Attack Bonus",value:xi(a)}),p.jsxs("div",{className:"col-span-2 text-center",children:[p.jsx("p",{className:"text-xs uppercase tracking-wider text-muted-foreground",children:"Ability"}),p.jsx("p",{className:"text-xl font-bold text-foreground capitalize",children:n||"None"})]})]})]}),p.jsx(OE,{title:"Spell Slots",slots:t.spellSlots,onSlotChange:s=>e({spellSlots:s})}),t.customResources&&t.customResources.length>0&&p.jsx(OE,{title:"Other Resources",slots:t.customResources,onSlotChange:s=>e({customResources:s}),isCustom:!0})]}),p.jsx("div",{className:"lg:col-span-2",children:p.jsx(ZL,{})})]})},r9=()=>{const{character:t,updateCharacter:e}=On(),[n,r]=q.useState(null),i=h=>{const u=t.equipment.find(m=>m.id===h);if(!u)return;const d=!u.equipped,f=t.equipment.map(m=>{if(m.id===h)return{...m,equipped:d};if(d){const b=u.armorType&&u.armorType!=="shield",A=m.equipped&&m.armorType&&m.armorType!=="shield";if(b&&A)return{...m,equipped:!1};if(u.armorType==="shield"&&m.equipped&&m.armorType==="shield")return{...m,equipped:!1}}return m});e({equipment:f})},a=h=>{r(u=>u===h?null:h)},{equippableItems:s,backpackItems:o}=q.useMemo(()=>{const h=[],u=[];return(t.equipment||[]).forEach(d=>{d.armorType?h.push(d):u.push(d)}),{equippableItems:h.sort((d,f)=>d.name.localeCompare(f.name)),backpackItems:u.sort((d,f)=>d.name.localeCompare(f.name))}},[t.equipment]),l=({title:h,items:u})=>p.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:h}),u.length===0?p.jsx("p",{className:"text-muted-foreground text-sm text-center py-4",children:"None."}):p.jsx("div",{className:"space-y-2",children:u.map(d=>p.jsxs("div",{className:"bg-card/50 rounded-lg text-sm",children:[p.jsxs("div",{className:"p-3 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[p.jsx("button",{onClick:()=>a(d.id),className:"flex-shrink-0 text-muted-foreground hover:text-foreground",children:p.jsx(iR,{className:`w-5 h-5 transition-transform ${n===d.id?"rotate-180":""}`})}),p.jsxs("p",{className:"font-semibold text-accent truncate",title:d.name,children:[d.name," ",p.jsxs("span",{className:"text-xs text-muted-foreground",children:["(x",d.quantity,")"]})]})]}),d.armorType&&p.jsx("button",{onClick:()=>i(d.id),className:`px-3 py-1 text-xs font-bold rounded ${d.equipped?"bg-primary text-primary-foreground":"bg-secondary hover:bg-secondary/80"}`,children:d.equipped?"Equipped":"Equip"})]}),n===d.id&&p.jsxs("div",{className:"p-3 border-t border-border/50 bg-muted/30 space-y-2",children:[d.armorType&&p.jsxs("p",{children:[p.jsxs("strong",{className:"text-muted-foreground capitalize",children:[d.armorType," Armor"]}),d.armorClass?p.jsxs("span",{className:"text-foreground",children:[" (AC: ",d.armorClass,")"]}):""]}),p.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:d.description||"No description."})]})]},d.id))})]});return p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[p.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:"Currency"}),p.jsx("div",{className:"grid grid-cols-3 gap-2 text-center",children:Object.keys(t.currency).map(h=>p.jsxs("div",{children:[p.jsx("p",{className:"text-xl font-mono text-foreground",children:t.currency[h]}),p.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:h})]},h))})]}),p.jsx(l,{title:"Equippable Gear",items:s})]}),p.jsx("div",{className:"lg:col-span-2",children:p.jsx(l,{title:"Backpack",items:o})})]})},i9=()=>{const{character:t}=On(),e=({title:n,content:r})=>p.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex-grow",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent mb-2",children:n}),p.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:r||"Not set."})]});return p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-6 flex flex-col",children:[p.jsx(e,{title:"Personality Traits",content:t.personalityTraits}),p.jsx(e,{title:"Ideals",content:t.ideals}),p.jsx(e,{title:"Bonds",content:t.bonds}),p.jsx(e,{title:"Flaws",content:t.flaws})]}),p.jsxs("div",{className:"space-y-6 flex flex-col",children:[p.jsx(e,{title:"Character Notes",content:t.notes}),p.jsx(e,{title:"Campaign Info",content:t.dmNotes})]})]})},a9=[{key:"main",label:"Main"},{key:"abilities",label:"Abilities"},{key:"combat",label:"Combat"},{key:"spells",label:"Spells"},{key:"inventory",label:"Inventory"},{key:"info",label:"Info"}],s9=()=>{const{characterId:t}=Gx(),e=gu(),{character:n,setCharacter:r,updateCharacter:i}=On(),[a,s]=q.useState("main"),o=q.useRef(!0);return q.useEffect(()=>{if(!t)return;(async()=>{const h=await ZS(t);r(h)})()},[t,r]),q.useEffect(()=>{if(o.current){o.current=!1;return}if(n){const l=setTimeout(()=>{JS(n)},1500);return()=>{clearTimeout(l)}}},[n]),n?p.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:pt-8",children:[p.jsxs("header",{className:"flex justify-between items-center mb-6 border-b border-border pb-4",children:[p.jsxs("button",{onClick:()=>e("/"),className:"flex items-center gap-2 text-muted-foreground hover:text-accent transition-colors",children:[p.jsx(rR,{className:"w-5 h-5"})," Back to List"]}),p.jsxs("div",{className:"flex items-center gap-4 text-center",children:[n.imageUrl&&p.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border-2 border-border shadow-md"}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl sm:text-3xl font-cinzel text-accent",children:n.name}),p.jsxs("p",{className:"text-muted-foreground capitalize text-sm",children:[n.race," ",n.class," ",n.subclass&&`(${n.subclass})`,"  Level ",n.level,"  ",n.alignment]})]})]}),p.jsxs("button",{onClick:()=>e(`/character/${t}/edit`),className:"flex items-center gap-2 px-4 py-2 bg-secondary text-secondary-foreground font-bold rounded-lg shadow-md hover:bg-secondary/80 transition-colors",children:[p.jsx(Qs,{className:"w-5 h-5"})," Edit Sheet"]})]}),p.jsx("div",{role:"tablist","aria-label":"Character View Sections",className:"flex space-x-1 mb-6 border-b border-border overflow-x-auto",children:a9.map(l=>p.jsx(JL,{id:`play-tab-${l.key}`,controls:`play-panel-${l.key}`,label:l.label,isActive:a===l.key,onClick:()=>s(l.key)},l.key))}),p.jsxs("div",{className:"bg-muted/50 p-4 sm:p-6 rounded-b-lg rounded-tr-lg",children:[p.jsx("div",{id:"play-panel-main",role:"tabpanel","aria-labelledby":"play-tab-main",style:{display:a==="main"?"block":"none"},children:p.jsx(e9,{})}),p.jsx("div",{id:"play-panel-abilities",role:"tabpanel","aria-labelledby":"play-tab-abilities",style:{display:a==="abilities"?"block":"none"},children:p.jsx(KL,{})}),p.jsx("div",{id:"play-panel-combat",role:"tabpanel","aria-labelledby":"play-tab-combat",style:{display:a==="combat"?"block":"none"},children:p.jsx(t9,{})}),p.jsx("div",{id:"play-panel-spells",role:"tabpanel","aria-labelledby":"play-tab-spells",style:{display:a==="spells"?"block":"none"},children:p.jsx(n9,{})}),p.jsx("div",{id:"play-panel-inventory",role:"tabpanel","aria-labelledby":"play-tab-inventory",style:{display:a==="inventory"?"block":"none"},children:p.jsx(r9,{})}),p.jsx("div",{id:"play-panel-info",role:"tabpanel","aria-labelledby":"play-tab-info",style:{display:a==="info"?"block":"none"},children:p.jsx(i9,{})})]})]}):p.jsx("div",{className:"flex justify-center items-center h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-accent"})})},o9=()=>{const{character:t,updateCharacter:e}=On(),{hp:n}=t,[r,i]=q.useState(""),[a,s]=q.useState(""),[o,l]=q.useState(""),h=()=>{const f=parseInt(r,10);if(!isNaN(f)&&f>0){const m=Math.min(f,n.temporary),b=n.temporary-m,A=f-m,D=Math.max(0,n.current-A);e({hp:{...n,current:D,temporary:b}}),i("")}},u=()=>{const f=parseInt(a,10);if(!isNaN(f)&&f>0){const m=Math.min(n.max,n.current+f);e({hp:{...n,current:m}}),s("")}},d=()=>{const f=parseInt(o,10);!isNaN(f)&&f>=0&&(e({hp:{...n,temporary:f}}),l(""))};return p.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3 text-center",children:"Hit Points"}),p.jsxs("div",{className:"text-center mb-4",children:[p.jsx("span",{className:"text-5xl font-bold text-destructive",children:n.current}),n.temporary>0&&p.jsxs("span",{className:"text-3xl font-bold text-accent",title:"Temporary HP",children:[" +",n.temporary]}),p.jsxs("span",{className:"text-2xl text-muted-foreground",children:[" / ",n.max]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("input",{type:"number",value:r,onChange:f=>i(f.target.value),onKeyDown:f=>f.key==="Enter"&&h(),placeholder:"Damage",className:"bg-input text-center rounded-md p-2 border border-border focus:ring-destructive focus:border-destructive"}),p.jsx("button",{onClick:h,className:"bg-destructive/80 hover:bg-destructive text-destructive-foreground font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Apply"})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("input",{type:"number",value:a,onChange:f=>s(f.target.value),onKeyDown:f=>f.key==="Enter"&&u(),placeholder:"Healing",className:"bg-input text-center rounded-md p-2 border border-border focus:ring-primary focus:border-primary"}),p.jsx("button",{onClick:u,className:"bg-primary/80 hover:bg-primary text-primary-foreground font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Apply"})]})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("input",{type:"number",value:o,onChange:f=>l(f.target.value),onKeyDown:f=>f.key==="Enter"&&d(),placeholder:"Set/Replace Temp HP",className:"bg-input text-center rounded-md p-2 border border-border focus:ring-accent focus:border-accent"}),p.jsx("button",{onClick:d,className:"bg-accent/80 hover:bg-accent text-accent-foreground font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Set Temp HP"})]})]})},OE=({title:t,slots:e,onSlotChange:n,isCustom:r})=>{const i=(o,l)=>{if(r){const h=e,u=h.findIndex(b=>b.id===o);if(u===-1)return;const d=h[u],f=l<d.used?l:l+1,m=[...h];m[u]={...d,used:f},n(m)}else{const h=e,u=h[o],d=l<u.used?l:l+1;n({...h,[o]:{...u,used:d}})}},a=r?e:Object.entries(e),s=a.some(o=>r?o.max>0:o[1].max>0);return p.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:t}),!s&&p.jsx("p",{className:"text-muted-foreground text-sm text-center",children:"No resources available."}),p.jsx("div",{className:"space-y-3",children:a.map(o=>{const[l,h]=r?[o.id,o]:o,u=r?h.name:`Lvl ${l}`;return h.max===0?null:p.jsxs("div",{className:"flex items-center",children:[p.jsxs("span",{className:"font-bold text-muted-foreground w-24 truncate",title:u,children:[u,":"]}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:h.max}).map((d,f)=>p.jsx("button",{onClick:()=>i(l,f),className:`w-5 h-5 rounded-md border-2 transition-colors ${f<h.used?"bg-primary border-primary/80":"bg-muted border-border hover:border-accent"}`,"aria-label":`Slot ${f+1} for ${u}. ${f<h.used?"Used":"Available"}`},f))})]},l)})})]})},l9=()=>{const{character:t,updateCharacter:e}=On(),{deathSaves:n}=t,r=(i,a)=>{const s=n[i],o=a<s?a:a+1;e({deathSaves:{...n,[i]:o}})};return p.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:"Death Saves"}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"font-semibold text-foreground",children:"Successes"}),p.jsx("div",{className:"flex gap-2",children:Array.from({length:3}).map((i,a)=>p.jsx("input",{type:"checkbox",checked:a<n.successes,onChange:()=>r("successes",a),className:"w-5 h-5 rounded-full text-primary bg-input border-border focus:ring-primary"},a))})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"font-semibold text-foreground",children:"Failures"}),p.jsx("div",{className:"flex gap-2",children:Array.from({length:3}).map((i,a)=>p.jsx("input",{type:"checkbox",checked:a<n.failures,onChange:()=>r("failures",a),className:"w-5 h-5 rounded-full text-destructive bg-input border-border focus:ring-destructive"},a))})]})]})]})},c9=({items:t})=>{const[e,n]=q.useState({}),r=a=>{const s=parseInt(a.bonus)||0,o=Math.floor(Math.random()*20)+1,l=o+s,h=`${o} ${s>=0?"+":"-"} ${Math.abs(s)} = ${l}`;n(u=>({...u,[a.id]:{...u[a.id],atk:h}}))},i=a=>{const{pretty:s}=xR(a.damage);n(o=>({...o,[a.id]:{...o[a.id],dmg:s}}))};return p.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col h-full",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:"Attacks & Cantrips"}),p.jsxs("div",{className:"space-y-3 flex-grow overflow-y-auto pr-2 -mr-2 max-h-[calc(50vh-5rem)]",children:[t.length===0&&p.jsx("p",{className:"text-muted-foreground text-sm text-center py-4",children:"None."}),t.map(a=>{var s,o;return p.jsxs("div",{className:"bg-card/50 rounded-lg text-sm p-3 space-y-2",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsx("span",{className:"font-semibold text-accent text-base",children:a.name}),p.jsxs("div",{className:"flex gap-4 font-mono text-foreground text-right",children:[p.jsx("span",{title:"Attack Bonus",children:a.bonus}),p.jsx("span",{title:"Damage",children:a.damage})]})]}),p.jsxs("div",{className:"flex justify-end items-center gap-2",children:[p.jsx("button",{onClick:()=>r(a),className:"text-xs bg-secondary hover:bg-secondary/80 rounded px-3 py-1.5 transition-colors font-bold",children:"ATK"}),p.jsx("button",{onClick:()=>i(a),className:"text-xs bg-destructive/80 hover:bg-destructive rounded px-3 py-1.5 transition-colors font-bold",children:"DMG"})]}),(((s=e[a.id])==null?void 0:s.atk)||((o=e[a.id])==null?void 0:o.dmg))&&p.jsxs("div",{className:"text-xs text-foreground bg-muted/50 p-2 rounded-md border-l-2 border-accent space-y-1",children:[e[a.id].atk&&p.jsxs("div",{children:[p.jsx("strong",{children:"Attack:"})," ",p.jsx("span",{className:"font-mono text-accent",children:e[a.id].atk})]}),e[a.id].dmg&&p.jsxs("div",{children:[p.jsx("strong",{children:"Damage:"})," ",p.jsx("span",{className:"font-mono text-destructive",children:e[a.id].dmg})]})]})]},a.id)})]})]})},u9=({title:t,items:e})=>{const[n,r]=q.useState({});return p.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col h-full",children:[p.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3",children:t}),p.jsxs("div",{className:"space-y-2 flex-grow overflow-y-auto pr-2 -mr-2 max-h-[calc(50vh-5rem)]",children:[e.length===0&&p.jsx("p",{className:"text-muted-foreground text-sm text-center py-4",children:"None."}),e.map(i=>p.jsxs("div",{className:"bg-card/50 rounded-lg text-sm",children:[p.jsx("div",{className:"flex items-center justify-between p-3 cursor-pointer w-full text-left",onClick:()=>i.description&&r(a=>({...a,[i.id]:!a[i.id]})),children:p.jsx("span",{className:"font-semibold text-accent",children:i.name})}),n[i.id]&&i.description&&p.jsx("div",{className:"p-3 border-t border-border/50 bg-muted/30",children:p.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:i.description})})]},i.id))]})]})},h9=()=>{const{currentUser:t,signInWithGoogle:e,signOutUser:n}=qf(),r=gu(),[i,a]=q.useState(""),[s,o]=q.useState(null),[l,h]=q.useState(null),[u,d]=q.useState(!1),[f,m]=q.useState(""),b=async()=>{try{await e(),r("/")}catch(x){console.error("Error during sign-in:",x)}};q.useEffect(()=>{t&&(a(t.displayName||""),h(t.photoURL||null))},[t]);const A=async x=>{if(x.target.files&&x.target.files[0]){const N=x.target.files[0];o(N),h(URL.createObjectURL(N))}},D=async()=>{if(t){d(!0),m("");try{let x=t.photoURL;if(s){const N=await pn(s,{maxSizeMB:.5,maxWidthOrHeight:512,useWebWorker:!0}),O=LS(),P=US(O,`users/${t.uid}/profile.jpg`);await wP(P,N),x=await PS(P)}await jO(t,{displayName:i,photoURL:x}),alert("Profile updated successfully!"),o(null)}catch(x){console.error("Error updating profile:",x),m("Failed to update profile. Please try again.")}finally{d(!1)}}},E=async()=>{try{await n(),r("/")}catch(x){console.error("Error during sign-out:",x)}};return p.jsx("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-100px)] p-4 text-center",children:p.jsxs("div",{className:"bg-card p-8 rounded-lg shadow-lg max-w-md w-full border border-border",children:[p.jsx("h1",{className:"text-3xl font-cinzel text-accent mb-4",children:t?`Welcome, ${t.displayName||"Adventurer"}`:"Join the Adventure"}),p.jsx("p",{className:"text-muted-foreground mb-8",children:t?"Manage your account details below or go to your characters.":"Sign in with Google to sync your characters across devices."}),t?p.jsxs("div",{className:"flex flex-col space-y-4 w-full",children:[p.jsxs("div",{className:"flex flex-col items-center gap-4 mb-4",children:[p.jsxs("label",{htmlFor:"profile-image-upload",className:"cursor-pointer group relative",children:[p.jsx("img",{src:l||`https://api.dicebear.com/8.x/lorelei/svg?seed=${t.uid}`,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-2 border-accent/50 group-hover:opacity-75 transition-opacity"}),p.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx("span",{className:"text-white text-sm",children:"Change"})})]}),p.jsx("input",{id:"profile-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:A})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"nickname",className:"block text-sm font-medium text-muted-foreground text-left mb-1",children:"Nickname"}),p.jsx("input",{id:"nickname",type:"text",value:i,onChange:x=>a(x.target.value),placeholder:"Enter your nickname",className:"mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent sm:text-sm"})]}),p.jsx("button",{onClick:D,disabled:u,className:"px-6 py-3 bg-primary text-primary-foreground font-bold rounded-lg shadow-md hover:bg-primary/90 transition-colors disabled:bg-muted disabled:text-muted-foreground",children:u?"Saving...":"Save Profile"}),f&&p.jsx("p",{className:"text-destructive text-sm",children:f}),p.jsx("hr",{className:"border-border my-2"}),p.jsx("button",{onClick:()=>r("/"),className:"px-6 py-3 bg-secondary text-secondary-foreground font-bold rounded-lg shadow-md hover:bg-secondary/80 transition-colors",children:"Go to Your Characters"}),p.jsx("button",{onClick:E,className:"px-6 py-3 bg-transparent border border-destructive/50 text-destructive font-bold rounded-lg shadow-md hover:bg-destructive/10 transition-colors",children:"Sign Out"})]}):p.jsxs("button",{onClick:b,className:"flex items-center justify-center gap-3 w-full px-6 py-3 bg-white text-zinc-700 font-bold rounded-lg shadow-md hover:bg-zinc-200 transition-colors",children:[p.jsx(rU,{className:"w-6 h-6"}),"Sign In with Google"]})]})})};function d9(){const t=Qx();if(il(t))return p.jsxs("div",{className:"text-center p-8",children:[p.jsxs("h1",{className:"text-2xl font-bold text-red-500",children:[t.status," ",t.statusText]}),p.jsx("p",{className:"text-zinc-400",children:t.data})]});const e=t instanceof Error?t.message:"Unknown error";return p.jsxs("div",{className:"text-center p-8",children:[p.jsx("h1",{className:"text-2xl font-bold text-red-500",children:"Something went wrong"}),p.jsx("p",{className:"text-zinc-400",children:e})]})}function f9(){return p.jsxs("div",{className:"text-center p-8",children:[p.jsx("h1",{className:"text-2xl font-bold text-red-500",children:"404 Not Found"}),p.jsx("p",{className:"text-zinc-400",children:"The page you are looking for does not exist."})]})}const m9=()=>p.jsx(cU,{children:p.jsx(Kx,{})}),p9={element:p.jsx(m9,{}),children:[{index:!0,element:p.jsx(hU,{})},{path:"character/new",element:p.jsx(DE,{})},{path:"character/:characterId/edit",element:p.jsx(DE,{})},{path:"character/:characterId",element:p.jsx(s9,{})}]},g9=nD([{path:"/",element:p.jsx(lU,{}),errorElement:p.jsx(d9,{}),children:[p9,{path:"login",element:p.jsx(h9,{})},{path:"*",element:p.jsx(f9,{})}]}]),AR=document.getElementById("root");if(!AR)throw new Error("Could not find root element to mount to");BI.createRoot(AR).render(p.jsx(mo.StrictMode,{children:p.jsx(YP,{children:p.jsx(GP,{children:p.jsx(hD,{router:g9})})})}));
