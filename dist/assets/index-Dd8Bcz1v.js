(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function M_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var k_={exports:{}},ah={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F2=Symbol.for("react.transitional.element"),q2=Symbol.for("react.fragment");function V_(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:F2,type:t,key:i,ref:e!==void 0?e:null,props:n}}ah.Fragment=q2;ah.jsx=V_;ah.jsxs=V_;k_.exports=ah;var g=k_.exports,j_={exports:{}},ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm=Symbol.for("react.transitional.element"),H2=Symbol.for("react.portal"),G2=Symbol.for("react.fragment"),$2=Symbol.for("react.strict_mode"),Q2=Symbol.for("react.profiler"),Y2=Symbol.for("react.consumer"),K2=Symbol.for("react.context"),X2=Symbol.for("react.forward_ref"),Z2=Symbol.for("react.suspense"),W2=Symbol.for("react.memo"),U_=Symbol.for("react.lazy"),T0=Symbol.iterator;function J2(t){return t===null||typeof t!="object"?null:(t=T0&&t[T0]||t["@@iterator"],typeof t=="function"?t:null)}var P_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z_=Object.assign,L_={};function Ua(t,e,n){this.props=t,this.context=e,this.refs=L_,this.updater=n||P_}Ua.prototype.isReactComponent={};Ua.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ua.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function B_(){}B_.prototype=Ua.prototype;function Dm(t,e,n){this.props=t,this.context=e,this.refs=L_,this.updater=n||P_}var Om=Dm.prototype=new B_;Om.constructor=Dm;z_(Om,Ua.prototype);Om.isPureReactComponent=!0;var E0=Array.isArray,Ge={H:null,A:null,T:null,S:null,V:null},F_=Object.prototype.hasOwnProperty;function Mm(t,e,n,i,r,s){return n=s.ref,{$$typeof:Nm,type:t,key:e,ref:n!==void 0?n:null,props:s}}function ew(t,e){return Mm(t.type,e,void 0,void 0,void 0,t.props)}function km(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nm}function tw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var A0=/\/+/g;function uf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tw(""+t.key):e.toString(36)}function w0(){}function nw(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(w0,w0):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Ls(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Nm:case H2:a=!0;break;case U_:return a=t._init,Ls(a(t._payload),e,n,i,r)}}if(a)return r=r(t),a=i===""?"."+uf(t,0):i,E0(r)?(n="",a!=null&&(n=a.replace(A0,"$&/")+"/"),Ls(r,e,n,"",function(h){return h})):r!=null&&(km(r)&&(r=ew(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(A0,"$&/")+"/")+a)),e.push(r)),1;a=0;var o=i===""?".":i+":";if(E0(t))for(var u=0;u<t.length;u++)i=t[u],s=o+uf(i,u),a+=Ls(i,e,n,s,r);else if(u=J2(t),typeof u=="function")for(t=u.call(t),u=0;!(i=t.next()).done;)i=i.value,s=o+uf(i,u++),a+=Ls(i,e,n,s,r);else if(s==="object"){if(typeof t.then=="function")return Ls(nw(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function au(t,e,n){if(t==null)return t;var i=[],r=0;return Ls(t,i,"","",function(s){return e.call(n,s,r++)}),i}function iw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var S0=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function rw(){}ce.Children={map:au,forEach:function(t,e,n){au(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return au(t,function(){e++}),e},toArray:function(t){return au(t,function(e){return e})||[]},only:function(t){if(!km(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=Ua;ce.Fragment=G2;ce.Profiler=Q2;ce.PureComponent=Dm;ce.StrictMode=$2;ce.Suspense=Z2;ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ge;ce.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ge.H.useMemoCache(t)}};ce.cache=function(t){return function(){return t.apply(null,arguments)}};ce.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=z_({},t.props),r=t.key,s=void 0;if(e!=null)for(a in e.ref!==void 0&&(s=void 0),e.key!==void 0&&(r=""+e.key),e)!F_.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(i[a]=e[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var o=Array(a),u=0;u<a;u++)o[u]=arguments[u+2];i.children=o}return Mm(t.type,r,void 0,void 0,s,i)};ce.createContext=function(t){return t={$$typeof:K2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:Y2,_context:t},t};ce.createElement=function(t,e,n){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)F_.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),u=0;u<a;u++)o[u]=arguments[u+2];r.children=o}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return Mm(t,s,void 0,void 0,null,r)};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:X2,render:t}};ce.isValidElement=km;ce.lazy=function(t){return{$$typeof:U_,_payload:{_status:-1,_result:t},_init:iw}};ce.memo=function(t,e){return{$$typeof:W2,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Ge.T,n={};Ge.T=n;try{var i=t(),r=Ge.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(rw,S0)}catch(s){S0(s)}finally{Ge.T=e}};ce.unstable_useCacheRefresh=function(){return Ge.H.useCacheRefresh()};ce.use=function(t){return Ge.H.use(t)};ce.useActionState=function(t,e,n){return Ge.H.useActionState(t,e,n)};ce.useCallback=function(t,e){return Ge.H.useCallback(t,e)};ce.useContext=function(t){return Ge.H.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t,e){return Ge.H.useDeferredValue(t,e)};ce.useEffect=function(t,e,n){var i=Ge.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(t,e)};ce.useId=function(){return Ge.H.useId()};ce.useImperativeHandle=function(t,e,n){return Ge.H.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Ge.H.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Ge.H.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Ge.H.useMemo(t,e)};ce.useOptimistic=function(t,e){return Ge.H.useOptimistic(t,e)};ce.useReducer=function(t,e,n){return Ge.H.useReducer(t,e,n)};ce.useRef=function(t){return Ge.H.useRef(t)};ce.useState=function(t){return Ge.H.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Ge.H.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Ge.H.useTransition()};ce.version="19.1.0";j_.exports=ce;var ne=j_.exports;const sw=M_(ne);var q_={exports:{}},oh={},H_={exports:{}},G_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,I){var q=N.length;N.push(I);e:for(;0<q;){var z=q-1>>>1,G=N[z];if(0<r(G,I))N[z]=I,N[q]=G,q=z;else break e}}function n(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var I=N[0],q=N.pop();if(q!==I){N[0]=q;e:for(var z=0,G=N.length,ee=G>>>1;z<ee;){var P=2*(z+1)-1,Q=N[P],F=P+1,H=N[F];if(0>r(Q,q))F<G&&0>r(H,Q)?(N[z]=H,N[F]=q,z=F):(N[z]=Q,N[P]=q,z=P);else if(F<G&&0>r(H,q))N[z]=H,N[F]=q,z=F;else break e}}return I}function r(N,I){var q=N.sortIndex-I.sortIndex;return q!==0?q:N.id-I.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var u=[],h=[],c=1,d=null,f=3,p=!1,E=!1,O=!1,V=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function M(N){for(var I=n(h);I!==null;){if(I.callback===null)i(h);else if(I.startTime<=N)i(h),I.sortIndex=I.expirationTime,e(u,I);else break;I=n(h)}}function j(N){if(O=!1,M(N),!E)if(n(u)!==null)E=!0,k||(k=!0,R());else{var I=n(h);I!==null&&B(j,I.startTime-N)}}var k=!1,S=-1,y=5,v=-1;function T(){return V?!0:!(t.unstable_now()-v<y)}function w(){if(V=!1,k){var N=t.unstable_now();v=N;var I=!0;try{e:{E=!1,O&&(O=!1,x(S),S=-1),p=!0;var q=f;try{t:{for(M(N),d=n(u);d!==null&&!(d.expirationTime>N&&T());){var z=d.callback;if(typeof z=="function"){d.callback=null,f=d.priorityLevel;var G=z(d.expirationTime<=N);if(N=t.unstable_now(),typeof G=="function"){d.callback=G,M(N),I=!0;break t}d===n(u)&&i(u),M(N)}else i(u);d=n(u)}if(d!==null)I=!0;else{var ee=n(h);ee!==null&&B(j,ee.startTime-N),I=!1}}break e}finally{d=null,f=q,p=!1}I=void 0}}finally{I?R():k=!1}}}var R;if(typeof C=="function")R=function(){C(w)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,U=A.port2;A.port1.onmessage=w,R=function(){U.postMessage(null)}}else R=function(){b(w,0)};function B(N,I){S=b(function(){N(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(N){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var q=f;f=I;try{return N()}finally{f=q}},t.unstable_requestPaint=function(){V=!0},t.unstable_runWithPriority=function(N,I){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var q=f;f=N;try{return I()}finally{f=q}},t.unstable_scheduleCallback=function(N,I,q){var z=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?z+q:z):q=z,N){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=q+G,N={id:c++,callback:I,priorityLevel:N,startTime:q,expirationTime:G,sortIndex:-1},q>z?(N.sortIndex=q,e(h,N),n(u)===null&&N===n(h)&&(O?(x(S),S=-1):O=!0,B(j,q-z))):(N.sortIndex=G,e(u,N),E||p||(E=!0,k||(k=!0,R()))),N},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(N){var I=f;return function(){var q=f;f=I;try{return N.apply(this,arguments)}finally{f=q}}}})(G_);H_.exports=G_;var aw=H_.exports,$_={exports:{}},Qt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ow=ne;function Q_(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Xi(){}var $t={d:{f:Xi,r:function(){throw Error(Q_(522))},D:Xi,C:Xi,L:Xi,m:Xi,X:Xi,S:Xi,M:Xi},p:0,findDOMNode:null},lw=Symbol.for("react.portal");function uw(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lw,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var wo=ow.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function lh(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$t;Qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(Q_(299));return uw(t,e,null,n)};Qt.flushSync=function(t){var e=wo.T,n=$t.p;try{if(wo.T=null,$t.p=2,t)return t()}finally{wo.T=e,$t.p=n,$t.d.f()}};Qt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,$t.d.C(t,e))};Qt.prefetchDNS=function(t){typeof t=="string"&&$t.d.D(t)};Qt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=lh(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?$t.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&$t.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Qt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=lh(e.as,e.crossOrigin);$t.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&$t.d.M(t)};Qt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=lh(n,e.crossOrigin);$t.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Qt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=lh(e.as,e.crossOrigin);$t.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else $t.d.m(t)};Qt.requestFormReset=function(t){$t.d.r(t)};Qt.unstable_batchedUpdates=function(t,e){return t(e)};Qt.useFormState=function(t,e,n){return wo.H.useFormState(t,e,n)};Qt.useFormStatus=function(){return wo.H.useHostTransitionStatus()};Qt.version="19.1.0";function Y_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y_)}catch(t){console.error(t)}}Y_(),$_.exports=Qt;var cw=$_.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vt=aw,K_=ne,hw=cw;function X(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function X_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ml(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Z_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function x0(t){if(ml(t)!==t)throw Error(X(188))}function fw(t){var e=t.alternate;if(!e){if(e=ml(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return x0(r),t;if(s===i)return x0(r),e;s=s.sibling}throw Error(X(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===n){a=!0,n=r,i=s;break}if(o===i){a=!0,i=r,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,i=r;break}if(o===i){a=!0,i=s,n=r;break}o=o.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==i)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function W_(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=W_(t),e!==null)return e;t=t.sibling}return null}var Fe=Object.assign,dw=Symbol.for("react.element"),ou=Symbol.for("react.transitional.element"),go=Symbol.for("react.portal"),Ys=Symbol.for("react.fragment"),J_=Symbol.for("react.strict_mode"),od=Symbol.for("react.profiler"),mw=Symbol.for("react.provider"),e1=Symbol.for("react.consumer"),Si=Symbol.for("react.context"),Vm=Symbol.for("react.forward_ref"),ld=Symbol.for("react.suspense"),ud=Symbol.for("react.suspense_list"),jm=Symbol.for("react.memo"),er=Symbol.for("react.lazy"),cd=Symbol.for("react.activity"),pw=Symbol.for("react.memo_cache_sentinel"),R0=Symbol.iterator;function oo(t){return t===null||typeof t!="object"?null:(t=R0&&t[R0]||t["@@iterator"],typeof t=="function"?t:null)}var gw=Symbol.for("react.client.reference");function hd(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===gw?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ys:return"Fragment";case od:return"Profiler";case J_:return"StrictMode";case ld:return"Suspense";case ud:return"SuspenseList";case cd:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case go:return"Portal";case Si:return(t.displayName||"Context")+".Provider";case e1:return(t._context.displayName||"Context")+".Consumer";case Vm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jm:return e=t.displayName||null,e!==null?e:hd(t.type)||"Memo";case er:e=t._payload,t=t._init;try{return hd(t(e))}catch{}}return null}var yo=Array.isArray,se=K_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae=hw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rs={pending:!1,data:null,method:null,action:null},fd=[],Ks=-1;function pi(t){return{current:t}}function St(t){0>Ks||(t.current=fd[Ks],fd[Ks]=null,Ks--)}function $e(t,e){Ks++,fd[Ks]=t.current,t.current=e}var ri=pi(null),Go=pi(null),mr=pi(null),tc=pi(null);function nc(t,e){switch($e(mr,e),$e(Go,t),$e(ri,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Oy(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Oy(e),t=yT(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}St(ri),$e(ri,t)}function _a(){St(ri),St(Go),St(mr)}function dd(t){t.memoizedState!==null&&$e(tc,t);var e=ri.current,n=yT(e,t.type);e!==n&&($e(Go,t),$e(ri,n))}function ic(t){Go.current===t&&(St(ri),St(Go)),tc.current===t&&(St(tc),tl._currentValue=rs)}var md=Object.prototype.hasOwnProperty,Um=vt.unstable_scheduleCallback,cf=vt.unstable_cancelCallback,yw=vt.unstable_shouldYield,vw=vt.unstable_requestPaint,si=vt.unstable_now,_w=vt.unstable_getCurrentPriorityLevel,t1=vt.unstable_ImmediatePriority,n1=vt.unstable_UserBlockingPriority,rc=vt.unstable_NormalPriority,bw=vt.unstable_LowPriority,i1=vt.unstable_IdlePriority,Tw=vt.log,Ew=vt.unstable_setDisableYieldValue,pl=null,yn=null;function ur(t){if(typeof Tw=="function"&&Ew(t),yn&&typeof yn.setStrictMode=="function")try{yn.setStrictMode(pl,t)}catch{}}var vn=Math.clz32?Math.clz32:Sw,Aw=Math.log,ww=Math.LN2;function Sw(t){return t>>>=0,t===0?32:31-(Aw(t)/ww|0)|0}var lu=256,uu=4194304;function Xr(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function uh(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=i&134217727;return o!==0?(i=o&~s,i!==0?r=Xr(i):(a&=o,a!==0?r=Xr(a):n||(n=o&~t,n!==0&&(r=Xr(n))))):(o=i&~s,o!==0?r=Xr(o):a!==0?r=Xr(a):n||(n=i&~t,n!==0&&(r=Xr(n)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:r}function gl(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function xw(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r1(){var t=lu;return lu<<=1,!(lu&4194048)&&(lu=256),t}function s1(){var t=uu;return uu<<=1,!(uu&62914560)&&(uu=4194304),t}function hf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yl(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Rw(t,e,n,i,r,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,u=t.expirationTimes,h=t.hiddenUpdates;for(n=a&~n;0<n;){var c=31-vn(n),d=1<<c;o[c]=0,u[c]=-1;var f=h[c];if(f!==null)for(h[c]=null,c=0;c<f.length;c++){var p=f[c];p!==null&&(p.lane&=-536870913)}n&=~d}i!==0&&a1(t,i,0),s!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function a1(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-vn(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&4194090}function o1(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-vn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function Pm(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function zm(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function l1(){var t=Ae.p;return t!==0?t:(t=window.event,t===void 0?32:RT(t.type))}function Cw(t,e){var n=Ae.p;try{return Ae.p=t,e()}finally{Ae.p=n}}var Pr=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Pr,sn="__reactProps$"+Pr,Pa="__reactContainer$"+Pr,pd="__reactEvents$"+Pr,Iw="__reactListeners$"+Pr,Nw="__reactHandles$"+Pr,C0="__reactResources$"+Pr,vl="__reactMarker$"+Pr;function Lm(t){delete t[Lt],delete t[sn],delete t[pd],delete t[Iw],delete t[Nw]}function Xs(t){var e=t[Lt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Pa]||n[Lt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Vy(t);t!==null;){if(n=t[Lt])return n;t=Vy(t)}return e}t=n,n=t.parentNode}return null}function za(t){if(t=t[Lt]||t[Pa]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function vo(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(X(33))}function oa(t){var e=t[C0];return e||(e=t[C0]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function At(t){t[vl]=!0}var u1=new Set,c1={};function Es(t,e){ba(t,e),ba(t+"Capture",e)}function ba(t,e){for(c1[t]=e,t=0;t<e.length;t++)u1.add(e[t])}var Dw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),I0={},N0={};function Ow(t){return md.call(N0,t)?!0:md.call(I0,t)?!1:Dw.test(t)?N0[t]=!0:(I0[t]=!0,!1)}function Nu(t,e,n){if(Ow(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function cu(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function bi(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}var ff,D0;function Bs(t){if(ff===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ff=e&&e[1]||"",D0=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ff+t+D0}var df=!1;function mf(t,e){if(!t||df)return"";df=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(p){var f=p}Reflect.construct(t,[],d)}else{try{d.call()}catch(p){f=p}t.call(d.prototype)}}else{try{throw Error()}catch(p){f=p}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(p){if(p&&f&&typeof p.stack=="string")return[p.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var u=a.split(`
`),h=o.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var c=`
`+u[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=r);break}}}finally{df=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Bs(n):""}function Mw(t){switch(t.tag){case 26:case 27:case 5:return Bs(t.type);case 16:return Bs("Lazy");case 13:return Bs("Suspense");case 19:return Bs("SuspenseList");case 0:case 15:return mf(t.type,!1);case 11:return mf(t.type.render,!1);case 1:return mf(t.type,!0);case 31:return Bs("Activity");default:return""}}function O0(t){try{var e="";do e+=Mw(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Rn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function h1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kw(t){var e=h1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sc(t){t._valueTracker||(t._valueTracker=kw(t))}function f1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=h1(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ac(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Vw=/[\n"\\]/g;function Nn(t){return t.replace(Vw,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gd(t,e,n,i,r,s,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Rn(e)):t.value!==""+Rn(e)&&(t.value=""+Rn(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?yd(t,a,Rn(e)):n!=null?yd(t,a,Rn(n)):i!=null&&t.removeAttribute("value"),r==null&&s!=null&&(t.defaultChecked=!!s),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+Rn(o):t.removeAttribute("name")}function d1(t,e,n,i,r,s,a,o){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null))return;n=n!=null?""+Rn(n):"",e=e!=null?""+Rn(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=o?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a)}function yd(t,e,n){e==="number"&&ac(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function la(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Rn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function m1(t,e,n){if(e!=null&&(e=""+Rn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Rn(n):""}function p1(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(X(92));if(yo(i)){if(1<i.length)throw Error(X(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Rn(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i)}function Ta(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var jw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function M0(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||jw.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function g1(t,e,n){if(e!=null&&typeof e!="object")throw Error(X(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&M0(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&M0(t,s,e[s])}function Bm(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Du(t){return Pw.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var vd=null;function Fm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zs=null,ua=null;function k0(t){var e=za(t);if(e&&(t=e.stateNode)){var n=t[sn]||null;e:switch(t=e.stateNode,e.type){case"input":if(gd(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Nn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[sn]||null;if(!r)throw Error(X(90));gd(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&f1(i)}break e;case"textarea":m1(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&la(t,!!n.multiple,e,!1)}}}var pf=!1;function y1(t,e,n){if(pf)return t(e,n);pf=!0;try{var i=t(e);return i}finally{if(pf=!1,(Zs!==null||ua!==null)&&(_h(),Zs&&(e=Zs,t=ua,ua=Zs=null,k0(e),t)))for(e=0;e<t.length;e++)k0(t[e])}}function $o(t,e){var n=t.stateNode;if(n===null)return null;var i=n[sn]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_d=!1;if(Vi)try{var lo={};Object.defineProperty(lo,"passive",{get:function(){_d=!0}}),window.addEventListener("test",lo,lo),window.removeEventListener("test",lo,lo)}catch{_d=!1}var cr=null,qm=null,Ou=null;function v1(){if(Ou)return Ou;var t,e=qm,n=e.length,i,r="value"in cr?cr.value:cr.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return Ou=r.slice(t,1<i?1-i:void 0)}function Mu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hu(){return!0}function V0(){return!1}function an(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?hu:V0,this.isPropagationStopped=V0,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hu)},persist:function(){},isPersistent:hu}),e}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ch=an(As),_l=Fe({},As,{view:0,detail:0}),zw=an(_l),gf,yf,uo,hh=Fe({},_l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uo&&(uo&&t.type==="mousemove"?(gf=t.screenX-uo.screenX,yf=t.screenY-uo.screenY):yf=gf=0,uo=t),gf)},movementY:function(t){return"movementY"in t?t.movementY:yf}}),j0=an(hh),Lw=Fe({},hh,{dataTransfer:0}),Bw=an(Lw),Fw=Fe({},_l,{relatedTarget:0}),vf=an(Fw),qw=Fe({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),Hw=an(qw),Gw=Fe({},As,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$w=an(Gw),Qw=Fe({},As,{data:0}),U0=an(Qw),Yw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Xw[t])?!!e[t]:!1}function Hm(){return Zw}var Ww=Fe({},_l,{key:function(t){if(t.key){var e=Yw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Kw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hm,charCode:function(t){return t.type==="keypress"?Mu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Jw=an(Ww),eS=Fe({},hh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),P0=an(eS),tS=Fe({},_l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hm}),nS=an(tS),iS=Fe({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),rS=an(iS),sS=Fe({},hh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aS=an(sS),oS=Fe({},As,{newState:0,oldState:0}),lS=an(oS),uS=[9,13,27,32],Gm=Vi&&"CompositionEvent"in window,So=null;Vi&&"documentMode"in document&&(So=document.documentMode);var cS=Vi&&"TextEvent"in window&&!So,_1=Vi&&(!Gm||So&&8<So&&11>=So),z0=" ",L0=!1;function b1(t,e){switch(t){case"keyup":return uS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ws=!1;function hS(t,e){switch(t){case"compositionend":return T1(e);case"keypress":return e.which!==32?null:(L0=!0,z0);case"textInput":return t=e.data,t===z0&&L0?null:t;default:return null}}function fS(t,e){if(Ws)return t==="compositionend"||!Gm&&b1(t,e)?(t=v1(),Ou=qm=cr=null,Ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _1&&e.locale!=="ko"?null:e.data;default:return null}}var dS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function B0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dS[t.type]:e==="textarea"}function E1(t,e,n,i){Zs?ua?ua.push(i):ua=[i]:Zs=i,e=wc(e,"onChange"),0<e.length&&(n=new ch("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var xo=null,Qo=null;function mS(t){mT(t,0)}function fh(t){var e=vo(t);if(f1(e))return t}function F0(t,e){if(t==="change")return e}var A1=!1;if(Vi){var _f;if(Vi){var bf="oninput"in document;if(!bf){var q0=document.createElement("div");q0.setAttribute("oninput","return;"),bf=typeof q0.oninput=="function"}_f=bf}else _f=!1;A1=_f&&(!document.documentMode||9<document.documentMode)}function H0(){xo&&(xo.detachEvent("onpropertychange",w1),Qo=xo=null)}function w1(t){if(t.propertyName==="value"&&fh(Qo)){var e=[];E1(e,Qo,t,Fm(t)),y1(mS,e)}}function pS(t,e,n){t==="focusin"?(H0(),xo=e,Qo=n,xo.attachEvent("onpropertychange",w1)):t==="focusout"&&H0()}function gS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fh(Qo)}function yS(t,e){if(t==="click")return fh(e)}function vS(t,e){if(t==="input"||t==="change")return fh(e)}function _S(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var En=typeof Object.is=="function"?Object.is:_S;function Yo(t,e){if(En(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!md.call(e,r)||!En(t[r],e[r]))return!1}return!0}function G0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $0(t,e){var n=G0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=G0(n)}}function S1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?S1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function x1(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=ac(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ac(t.document)}return e}function $m(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var bS=Vi&&"documentMode"in document&&11>=document.documentMode,Js=null,bd=null,Ro=null,Td=!1;function Q0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Td||Js==null||Js!==ac(i)||(i=Js,"selectionStart"in i&&$m(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ro&&Yo(Ro,i)||(Ro=i,i=wc(bd,"onSelect"),0<i.length&&(e=new ch("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Js)))}function Kr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ea={animationend:Kr("Animation","AnimationEnd"),animationiteration:Kr("Animation","AnimationIteration"),animationstart:Kr("Animation","AnimationStart"),transitionrun:Kr("Transition","TransitionRun"),transitionstart:Kr("Transition","TransitionStart"),transitioncancel:Kr("Transition","TransitionCancel"),transitionend:Kr("Transition","TransitionEnd")},Tf={},R1={};Vi&&(R1=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function ws(t){if(Tf[t])return Tf[t];if(!ea[t])return t;var e=ea[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in R1)return Tf[t]=e[n];return t}var C1=ws("animationend"),I1=ws("animationiteration"),N1=ws("animationstart"),TS=ws("transitionrun"),ES=ws("transitionstart"),AS=ws("transitioncancel"),D1=ws("transitionend"),O1=new Map,Ed="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ed.push("scrollEnd");function Kn(t,e){O1.set(t,e),Es(e,[t])}var Y0=new WeakMap;function Dn(t,e){if(typeof t=="object"&&t!==null){var n=Y0.get(t);return n!==void 0?n:(e={value:t,source:e,stack:O0(e)},Y0.set(t,e),e)}return{value:t,source:e,stack:O0(e)}}var xn=[],ta=0,Qm=0;function dh(){for(var t=ta,e=Qm=ta=0;e<t;){var n=xn[e];xn[e++]=null;var i=xn[e];xn[e++]=null;var r=xn[e];xn[e++]=null;var s=xn[e];if(xn[e++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&M1(n,r,s)}}function mh(t,e,n,i){xn[ta++]=t,xn[ta++]=e,xn[ta++]=n,xn[ta++]=i,Qm|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Ym(t,e,n,i){return mh(t,e,n,i),oc(t)}function La(t,e){return mh(t,null,null,e),oc(t)}function M1(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(r=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,r&&e!==null&&(r=31-vn(n),t=s.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),s):null}function oc(t){if(50<Uo)throw Uo=0,qd=null,Error(X(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var na={};function wS(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(t,e,n,i){return new wS(t,e,n,i)}function Km(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Oi(t,e){var n=t.alternate;return n===null?(n=mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function k1(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function ku(t,e,n,i,r,s){var a=0;if(i=t,typeof t=="function")Km(t)&&(a=1);else if(typeof t=="string")a=xx(t,n,ri.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case cd:return t=mn(31,n,e,r),t.elementType=cd,t.lanes=s,t;case Ys:return ss(n.children,r,s,e);case J_:a=8,r|=24;break;case od:return t=mn(12,n,e,r|2),t.elementType=od,t.lanes=s,t;case ld:return t=mn(13,n,e,r),t.elementType=ld,t.lanes=s,t;case ud:return t=mn(19,n,e,r),t.elementType=ud,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mw:case Si:a=10;break e;case e1:a=9;break e;case Vm:a=11;break e;case jm:a=14;break e;case er:a=16,i=null;break e}a=29,n=Error(X(130,t===null?"null":typeof t,"")),i=null}return e=mn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function ss(t,e,n,i){return t=mn(7,t,i,e),t.lanes=n,t}function Ef(t,e,n){return t=mn(6,t,null,e),t.lanes=n,t}function Af(t,e,n){return e=mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var ia=[],ra=0,lc=null,uc=0,Cn=[],In=0,as=null,xi=1,Ri="";function Zr(t,e){ia[ra++]=uc,ia[ra++]=lc,lc=t,uc=e}function V1(t,e,n){Cn[In++]=xi,Cn[In++]=Ri,Cn[In++]=as,as=t;var i=xi;t=Ri;var r=32-vn(i)-1;i&=~(1<<r),n+=1;var s=32-vn(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,xi=1<<32-vn(e)+r|n<<r|i,Ri=s+t}else xi=1<<s|n<<r|i,Ri=t}function Xm(t){t.return!==null&&(Zr(t,1),V1(t,1,0))}function Zm(t){for(;t===lc;)lc=ia[--ra],ia[ra]=null,uc=ia[--ra],ia[ra]=null;for(;t===as;)as=Cn[--In],Cn[In]=null,Ri=Cn[--In],Cn[In]=null,xi=Cn[--In],Cn[In]=null}var Gt=null,Je=null,Ee=!1,os=null,ni=!1,Ad=Error(X(519));function ms(t){var e=Error(X(418,""));throw Ko(Dn(e,t)),Ad}function K0(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Lt]=t,e[sn]=i,n){case"dialog":de("cancel",e),de("close",e);break;case"iframe":case"object":case"embed":de("load",e);break;case"video":case"audio":for(n=0;n<Wo.length;n++)de(Wo[n],e);break;case"source":de("error",e);break;case"img":case"image":case"link":de("error",e),de("load",e);break;case"details":de("toggle",e);break;case"input":de("invalid",e),d1(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),sc(e);break;case"select":de("invalid",e);break;case"textarea":de("invalid",e),p1(e,i.value,i.defaultValue,i.children),sc(e)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||gT(e.textContent,n)?(i.popover!=null&&(de("beforetoggle",e),de("toggle",e)),i.onScroll!=null&&de("scroll",e),i.onScrollEnd!=null&&de("scrollend",e),i.onClick!=null&&(e.onclick=Eh),e=!0):e=!1,e||ms(t)}function X0(t){for(Gt=t.return;Gt;)switch(Gt.tag){case 5:case 13:ni=!1;return;case 27:case 3:ni=!0;return;default:Gt=Gt.return}}function co(t){if(t!==Gt)return!1;if(!Ee)return X0(t),Ee=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Kd(t.type,t.memoizedProps)),n=!n),n&&Je&&ms(t),X0(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){Je=$n(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}Je=null}}else e===27?(e=Je,zr(t.type)?(t=Wd,Wd=null,Je=t):Je=e):Je=Gt?$n(t.stateNode.nextSibling):null;return!0}function bl(){Je=Gt=null,Ee=!1}function Z0(){var t=os;return t!==null&&(Wt===null?Wt=t:Wt.push.apply(Wt,t),os=null),t}function Ko(t){os===null?os=[t]:os.push(t)}var wd=pi(null),Ss=null,Ci=null;function nr(t,e,n){$e(wd,e._currentValue),e._currentValue=n}function Mi(t){t._currentValue=wd.current,St(wd)}function Sd(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function xd(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;e:for(;s!==null;){var o=s;s=r;for(var u=0;u<e.length;u++)if(o.context===e[u]){s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Sd(s.return,n,t),i||(a=null);break e}s=o.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(X(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Sd(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Tl(t,e,n,i){t=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(X(387));if(a=a.memoizedProps,a!==null){var o=r.type;En(r.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(r===tc.current){if(a=r.alternate,a===null)throw Error(X(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(tl):t=[tl])}r=r.return}t!==null&&xd(e,t,n,i),e.flags|=262144}function cc(t){for(t=t.firstContext;t!==null;){if(!En(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ps(t){Ss=t,Ci=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Bt(t){return j1(Ss,t)}function fu(t,e){return Ss===null&&ps(t),j1(t,e)}function j1(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Ci===null){if(t===null)throw Error(X(308));Ci=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Ci=Ci.next=e;return n}var SS=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},xS=vt.unstable_scheduleCallback,RS=vt.unstable_NormalPriority,pt={$$typeof:Si,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wm(){return{controller:new SS,data:new Map,refCount:0}}function El(t){t.refCount--,t.refCount===0&&xS(RS,function(){t.controller.abort()})}var Co=null,Rd=0,Ea=0,ca=null;function CS(t,e){if(Co===null){var n=Co=[];Rd=0,Ea=Tp(),ca={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Rd++,e.then(W0,W0),e}function W0(){if(--Rd===0&&Co!==null){ca!==null&&(ca.status="fulfilled");var t=Co;Co=null,Ea=0,ca=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function IS(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var J0=se.S;se.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&CS(t,e),J0!==null&&J0(t,e)};var ls=pi(null);function Jm(){var t=ls.current;return t!==null?t:Pe.pooledCache}function Vu(t,e){e===null?$e(ls,ls.current):$e(ls,e.pool)}function U1(){var t=Jm();return t===null?null:{parent:pt._currentValue,pool:t}}var Al=Error(X(460)),P1=Error(X(474)),ph=Error(X(542)),Cd={then:function(){}};function ey(t){return t=t.status,t==="fulfilled"||t==="rejected"}function du(){}function z1(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(du,du),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,ny(t),t;default:if(typeof e.status=="string")e.then(du,du);else{if(t=Pe,t!==null&&100<t.shellSuspendCounter)throw Error(X(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,ny(t),t}throw Io=e,Al}}var Io=null;function ty(){if(Io===null)throw Error(X(459));var t=Io;return Io=null,t}function ny(t){if(t===Al||t===ph)throw Error(X(483))}var tr=!1;function ep(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Id(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function pr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function gr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ce&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=oc(t),M1(t,null,n),e}return mh(t,i,e,n),oc(t)}function No(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,o1(t,n)}}function wf(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Nd=!1;function Do(){if(Nd){var t=ca;if(t!==null)throw t}}function Oo(t,e,n,i){Nd=!1;var r=t.updateQueue;tr=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var u=o,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=h:o.next=h,c.lastBaseUpdate=u))}if(s!==null){var d=r.baseState;a=0,c=h=u=null,o=s;do{var f=o.lane&-536870913,p=f!==o.lane;if(p?(_e&f)===f:(i&f)===f){f!==0&&f===Ea&&(Nd=!0),c!==null&&(c=c.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var E=t,O=o;f=e;var V=n;switch(O.tag){case 1:if(E=O.payload,typeof E=="function"){d=E.call(V,d,f);break e}d=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=O.payload,f=typeof E=="function"?E.call(V,d,f):E,f==null)break e;d=Fe({},d,f);break e;case 2:tr=!0}}f=o.callback,f!==null&&(t.flags|=64,p&&(t.flags|=8192),p=r.callbacks,p===null?r.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(h=c=p,u=d):c=c.next=p,a|=f;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;p=o,o=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);c===null&&(u=d),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=c,s===null&&(r.shared.lanes=0),Cr|=a,t.lanes=a,t.memoizedState=d}}function L1(t,e){if(typeof t!="function")throw Error(X(191,t));t.call(e)}function B1(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)L1(n[t],e)}var Aa=pi(null),hc=pi(0);function iy(t,e){t=Pi,$e(hc,t),$e(Aa,e),Pi=t|e.baseLanes}function Dd(){$e(hc,Pi),$e(Aa,Aa.current)}function tp(){Pi=hc.current,St(Aa),St(hc)}var xr=0,fe=null,Ne=null,ut=null,fc=!1,ha=!1,gs=!1,dc=0,Xo=0,fa=null,NS=0;function nt(){throw Error(X(321))}function np(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!En(t[n],e[n]))return!1;return!0}function ip(t,e,n,i,r,s){return xr=s,fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,se.H=t===null||t.memoizedState===null?vb:_b,gs=!1,s=n(i,r),gs=!1,ha&&(s=q1(e,n,i,r)),F1(t),s}function F1(t){se.H=mc;var e=Ne!==null&&Ne.next!==null;if(xr=0,ut=Ne=fe=null,fc=!1,Xo=0,fa=null,e)throw Error(X(300));t===null||wt||(t=t.dependencies,t!==null&&cc(t)&&(wt=!0))}function q1(t,e,n,i){fe=t;var r=0;do{if(ha&&(fa=null),Xo=0,ha=!1,25<=r)throw Error(X(301));if(r+=1,ut=Ne=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}se.H=US,s=e(n,i)}while(ha);return s}function DS(){var t=se.H,e=t.useState()[0];return e=typeof e.then=="function"?wl(e):e,t=t.useState()[0],(Ne!==null?Ne.memoizedState:null)!==t&&(fe.flags|=1024),e}function rp(){var t=dc!==0;return dc=0,t}function sp(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function ap(t){if(fc){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}fc=!1}xr=0,ut=Ne=fe=null,ha=!1,Xo=dc=0,fa=null}function Xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?fe.memoizedState=ut=t:ut=ut.next=t,ut}function ft(){if(Ne===null){var t=fe.alternate;t=t!==null?t.memoizedState:null}else t=Ne.next;var e=ut===null?fe.memoizedState:ut.next;if(e!==null)ut=e,Ne=t;else{if(t===null)throw fe.alternate===null?Error(X(467)):Error(X(310));Ne=t,t={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},ut===null?fe.memoizedState=ut=t:ut=ut.next=t}return ut}function op(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(t){var e=Xo;return Xo+=1,fa===null&&(fa=[]),t=z1(fa,t,e),e=fe,(ut===null?e.memoizedState:ut.next)===null&&(e=e.alternate,se.H=e===null||e.memoizedState===null?vb:_b),t}function gh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wl(t);if(t.$$typeof===Si)return Bt(t)}throw Error(X(438,String(t)))}function lp(t){var e=null,n=fe.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=fe.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=op(),fe.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=pw;return e.index++,n}function ji(t,e){return typeof e=="function"?e(t):e}function ju(t){var e=ft();return up(e,Ne,t)}function up(t,e,n){var i=t.queue;if(i===null)throw Error(X(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,r===null)t.memoizedState=s;else{e=r.next;var o=a=null,u=null,h=e,c=!1;do{var d=h.lane&-536870913;if(d!==h.lane?(_e&d)===d:(xr&d)===d){var f=h.revertLane;if(f===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),d===Ea&&(c=!0);else if((xr&f)===f){h=h.next,f===Ea&&(c=!0);continue}else d={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(o=u=d,a=s):u=u.next=d,fe.lanes|=f,Cr|=f;d=h.action,gs&&n(s,d),s=h.hasEagerState?h.eagerState:n(s,d)}else f={lane:d,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(o=u=f,a=s):u=u.next=f,fe.lanes|=d,Cr|=d;h=h.next}while(h!==null&&h!==e);if(u===null?a=s:u.next=o,!En(s,t.memoizedState)&&(wt=!0,c&&(n=ca,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Sf(t){var e=ft(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);En(s,e.memoizedState)||(wt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function H1(t,e,n){var i=fe,r=ft(),s=Ee;if(s){if(n===void 0)throw Error(X(407));n=n()}else n=e();var a=!En((Ne||r).memoizedState,n);a&&(r.memoizedState=n,wt=!0),r=r.queue;var o=Q1.bind(null,i,r,t);if(Sl(2048,8,o,[t]),r.getSnapshot!==e||a||ut!==null&&ut.memoizedState.tag&1){if(i.flags|=2048,wa(9,yh(),$1.bind(null,i,r,n,e),null),Pe===null)throw Error(X(349));s||xr&124||G1(i,e,n)}return n}function G1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=fe.updateQueue,e===null?(e=op(),fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $1(t,e,n,i){e.value=n,e.getSnapshot=i,Y1(e)&&K1(t)}function Q1(t,e,n){return n(function(){Y1(e)&&K1(t)})}function Y1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!En(t,n)}catch{return!0}}function K1(t){var e=La(t,2);e!==null&&bn(e,t,2)}function Od(t){var e=Xt();if(typeof t=="function"){var n=t;if(t=n(),gs){ur(!0);try{n()}finally{ur(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:t},e}function X1(t,e,n,i){return t.baseState=n,up(t,Ne,typeof i=="function"?i:ji)}function OS(t,e,n,i,r){if(vh(t))throw Error(X(485));if(t=e.action,t!==null){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};se.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,Z1(e,s)):(s.next=n.next,e.pending=n.next=s)}}function Z1(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=se.T,a={};se.T=a;try{var o=n(r,i),u=se.S;u!==null&&u(a,o),ry(t,e,o)}catch(h){Md(t,e,h)}finally{se.T=s}}else try{s=n(r,i),ry(t,e,s)}catch(h){Md(t,e,h)}}function ry(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){sy(t,e,i)},function(i){return Md(t,e,i)}):sy(t,e,n)}function sy(t,e,n){e.status="fulfilled",e.value=n,W1(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Z1(t,n)))}function Md(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,W1(e),e=e.next;while(e!==i)}t.action=null}function W1(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function J1(t,e){return e}function ay(t,e){if(Ee){var n=Pe.formState;if(n!==null){e:{var i=fe;if(Ee){if(Je){t:{for(var r=Je,s=ni;r.nodeType!==8;){if(!s){r=null;break t}if(r=$n(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Je=$n(r.nextSibling),i=r.data==="F!";break e}}ms(i)}i=!1}i&&(e=n[0])}}return n=Xt(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:J1,lastRenderedState:e},n.queue=i,n=pb.bind(null,fe,i),i.dispatch=n,i=Od(!1),s=dp.bind(null,fe,!1,i.queue),i=Xt(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=OS.bind(null,fe,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function oy(t){var e=ft();return eb(e,Ne,t)}function eb(t,e,n){if(e=up(t,e,J1)[0],t=ju(ji)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=wl(e)}catch(a){throw a===Al?ph:a}else i=e;e=ft();var r=e.queue,s=r.dispatch;return n!==e.memoizedState&&(fe.flags|=2048,wa(9,yh(),MS.bind(null,r,n),null)),[i,s,t]}function MS(t,e){t.action=e}function ly(t){var e=ft(),n=Ne;if(n!==null)return eb(e,n,t);ft(),e=e.memoizedState,n=ft();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function wa(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=fe.updateQueue,e===null&&(e=op(),fe.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function yh(){return{destroy:void 0,resource:void 0}}function tb(){return ft().memoizedState}function Uu(t,e,n,i){var r=Xt();i=i===void 0?null:i,fe.flags|=t,r.memoizedState=wa(1|e,yh(),n,i)}function Sl(t,e,n,i){var r=ft();i=i===void 0?null:i;var s=r.memoizedState.inst;Ne!==null&&i!==null&&np(i,Ne.memoizedState.deps)?r.memoizedState=wa(e,s,n,i):(fe.flags|=t,r.memoizedState=wa(1|e,s,n,i))}function uy(t,e){Uu(8390656,8,t,e)}function nb(t,e){Sl(2048,8,t,e)}function ib(t,e){return Sl(4,2,t,e)}function rb(t,e){return Sl(4,4,t,e)}function sb(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ab(t,e,n){n=n!=null?n.concat([t]):null,Sl(4,4,sb.bind(null,e,t),n)}function cp(){}function ob(t,e){var n=ft();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&np(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function lb(t,e){var n=ft();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&np(e,i[1]))return i[0];if(i=t(),gs){ur(!0);try{t()}finally{ur(!1)}}return n.memoizedState=[i,e],i}function hp(t,e,n){return n===void 0||xr&1073741824?t.memoizedState=e:(t.memoizedState=n,t=Wb(),fe.lanes|=t,Cr|=t,n)}function ub(t,e,n,i){return En(n,e)?n:Aa.current!==null?(t=hp(t,n,i),En(t,e)||(wt=!0),t):xr&42?(t=Wb(),fe.lanes|=t,Cr|=t,e):(wt=!0,t.memoizedState=n)}function cb(t,e,n,i,r){var s=Ae.p;Ae.p=s!==0&&8>s?s:8;var a=se.T,o={};se.T=o,dp(t,!1,e,n);try{var u=r(),h=se.S;if(h!==null&&h(o,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=IS(u,i);Mo(t,e,c,_n(t))}else Mo(t,e,i,_n(t))}catch(d){Mo(t,e,{then:function(){},status:"rejected",reason:d},_n())}finally{Ae.p=s,se.T=a}}function kS(){}function kd(t,e,n,i){if(t.tag!==5)throw Error(X(476));var r=hb(t).queue;cb(t,r,e,rs,n===null?kS:function(){return fb(t),n(i)})}function hb(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:rs,baseState:rs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:rs},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function fb(t){var e=hb(t).next.queue;Mo(t,e,{},_n())}function fp(){return Bt(tl)}function db(){return ft().memoizedState}function mb(){return ft().memoizedState}function VS(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=_n();t=pr(n);var i=gr(e,t,n);i!==null&&(bn(i,e,n),No(i,e,n)),e={cache:Wm()},t.payload=e;return}e=e.return}}function jS(t,e,n){var i=_n();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},vh(t)?gb(e,n):(n=Ym(t,e,n,i),n!==null&&(bn(n,t,i),yb(n,e,i)))}function pb(t,e,n){var i=_n();Mo(t,e,n,i)}function Mo(t,e,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(vh(t))gb(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,En(o,a))return mh(t,e,r,0),Pe===null&&dh(),!1}catch{}finally{}if(n=Ym(t,e,r,i),n!==null)return bn(n,t,i),yb(n,e,i),!0}return!1}function dp(t,e,n,i){if(i={lane:2,revertLane:Tp(),action:i,hasEagerState:!1,eagerState:null,next:null},vh(t)){if(e)throw Error(X(479))}else e=Ym(t,n,i,2),e!==null&&bn(e,t,2)}function vh(t){var e=t.alternate;return t===fe||e!==null&&e===fe}function gb(t,e){ha=fc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yb(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,o1(t,n)}}var mc={readContext:Bt,use:gh,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useLayoutEffect:nt,useInsertionEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useSyncExternalStore:nt,useId:nt,useHostTransitionStatus:nt,useFormState:nt,useActionState:nt,useOptimistic:nt,useMemoCache:nt,useCacheRefresh:nt},vb={readContext:Bt,use:gh,useCallback:function(t,e){return Xt().memoizedState=[t,e===void 0?null:e],t},useContext:Bt,useEffect:uy,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Uu(4194308,4,sb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uu(4194308,4,t,e)},useInsertionEffect:function(t,e){Uu(4,2,t,e)},useMemo:function(t,e){var n=Xt();e=e===void 0?null:e;var i=t();if(gs){ur(!0);try{t()}finally{ur(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Xt();if(n!==void 0){var r=n(e);if(gs){ur(!0);try{n(e)}finally{ur(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=jS.bind(null,fe,t),[i.memoizedState,t]},useRef:function(t){var e=Xt();return t={current:t},e.memoizedState=t},useState:function(t){t=Od(t);var e=t.queue,n=pb.bind(null,fe,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:cp,useDeferredValue:function(t,e){var n=Xt();return hp(n,t,e)},useTransition:function(){var t=Od(!1);return t=cb.bind(null,fe,t.queue,!0,!1),Xt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=fe,r=Xt();if(Ee){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Pe===null)throw Error(X(349));_e&124||G1(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,uy(Q1.bind(null,i,s,t),[t]),i.flags|=2048,wa(9,yh(),$1.bind(null,i,s,n,e),null),n},useId:function(){var t=Xt(),e=Pe.identifierPrefix;if(Ee){var n=Ri,i=xi;n=(i&~(1<<32-vn(i)-1)).toString(32)+n,e="«"+e+"R"+n,n=dc++,0<n&&(e+="H"+n.toString(32)),e+="»"}else n=NS++,e="«"+e+"r"+n.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:fp,useFormState:ay,useActionState:ay,useOptimistic:function(t){var e=Xt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=dp.bind(null,fe,!0,n),n.dispatch=e,[t,e]},useMemoCache:lp,useCacheRefresh:function(){return Xt().memoizedState=VS.bind(null,fe)}},_b={readContext:Bt,use:gh,useCallback:ob,useContext:Bt,useEffect:nb,useImperativeHandle:ab,useInsertionEffect:ib,useLayoutEffect:rb,useMemo:lb,useReducer:ju,useRef:tb,useState:function(){return ju(ji)},useDebugValue:cp,useDeferredValue:function(t,e){var n=ft();return ub(n,Ne.memoizedState,t,e)},useTransition:function(){var t=ju(ji)[0],e=ft().memoizedState;return[typeof t=="boolean"?t:wl(t),e]},useSyncExternalStore:H1,useId:db,useHostTransitionStatus:fp,useFormState:oy,useActionState:oy,useOptimistic:function(t,e){var n=ft();return X1(n,Ne,t,e)},useMemoCache:lp,useCacheRefresh:mb},US={readContext:Bt,use:gh,useCallback:ob,useContext:Bt,useEffect:nb,useImperativeHandle:ab,useInsertionEffect:ib,useLayoutEffect:rb,useMemo:lb,useReducer:Sf,useRef:tb,useState:function(){return Sf(ji)},useDebugValue:cp,useDeferredValue:function(t,e){var n=ft();return Ne===null?hp(n,t,e):ub(n,Ne.memoizedState,t,e)},useTransition:function(){var t=Sf(ji)[0],e=ft().memoizedState;return[typeof t=="boolean"?t:wl(t),e]},useSyncExternalStore:H1,useId:db,useHostTransitionStatus:fp,useFormState:ly,useActionState:ly,useOptimistic:function(t,e){var n=ft();return Ne!==null?X1(n,Ne,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:lp,useCacheRefresh:mb},da=null,Zo=0;function mu(t){var e=Zo;return Zo+=1,da===null&&(da=[]),z1(da,t,e)}function ho(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function pu(t,e){throw e.$$typeof===dw?Error(X(525)):(t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function cy(t){var e=t._init;return e(t._payload)}function bb(t){function e(b,x){if(t){var C=b.deletions;C===null?(b.deletions=[x],b.flags|=16):C.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function i(b){for(var x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function r(b,x){return b=Oi(b,x),b.index=0,b.sibling=null,b}function s(b,x,C){return b.index=C,t?(C=b.alternate,C!==null?(C=C.index,C<x?(b.flags|=67108866,x):C):(b.flags|=67108866,x)):(b.flags|=1048576,x)}function a(b){return t&&b.alternate===null&&(b.flags|=67108866),b}function o(b,x,C,M){return x===null||x.tag!==6?(x=Ef(C,b.mode,M),x.return=b,x):(x=r(x,C),x.return=b,x)}function u(b,x,C,M){var j=C.type;return j===Ys?c(b,x,C.props.children,M,C.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===er&&cy(j)===x.type)?(x=r(x,C.props),ho(x,C),x.return=b,x):(x=ku(C.type,C.key,C.props,null,b.mode,M),ho(x,C),x.return=b,x)}function h(b,x,C,M){return x===null||x.tag!==4||x.stateNode.containerInfo!==C.containerInfo||x.stateNode.implementation!==C.implementation?(x=Af(C,b.mode,M),x.return=b,x):(x=r(x,C.children||[]),x.return=b,x)}function c(b,x,C,M,j){return x===null||x.tag!==7?(x=ss(C,b.mode,M,j),x.return=b,x):(x=r(x,C),x.return=b,x)}function d(b,x,C){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=Ef(""+x,b.mode,C),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ou:return C=ku(x.type,x.key,x.props,null,b.mode,C),ho(C,x),C.return=b,C;case go:return x=Af(x,b.mode,C),x.return=b,x;case er:var M=x._init;return x=M(x._payload),d(b,x,C)}if(yo(x)||oo(x))return x=ss(x,b.mode,C,null),x.return=b,x;if(typeof x.then=="function")return d(b,mu(x),C);if(x.$$typeof===Si)return d(b,fu(b,x),C);pu(b,x)}return null}function f(b,x,C,M){var j=x!==null?x.key:null;if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return j!==null?null:o(b,x,""+C,M);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ou:return C.key===j?u(b,x,C,M):null;case go:return C.key===j?h(b,x,C,M):null;case er:return j=C._init,C=j(C._payload),f(b,x,C,M)}if(yo(C)||oo(C))return j!==null?null:c(b,x,C,M,null);if(typeof C.then=="function")return f(b,x,mu(C),M);if(C.$$typeof===Si)return f(b,x,fu(b,C),M);pu(b,C)}return null}function p(b,x,C,M,j){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return b=b.get(C)||null,o(x,b,""+M,j);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ou:return b=b.get(M.key===null?C:M.key)||null,u(x,b,M,j);case go:return b=b.get(M.key===null?C:M.key)||null,h(x,b,M,j);case er:var k=M._init;return M=k(M._payload),p(b,x,C,M,j)}if(yo(M)||oo(M))return b=b.get(C)||null,c(x,b,M,j,null);if(typeof M.then=="function")return p(b,x,C,mu(M),j);if(M.$$typeof===Si)return p(b,x,C,fu(x,M),j);pu(x,M)}return null}function E(b,x,C,M){for(var j=null,k=null,S=x,y=x=0,v=null;S!==null&&y<C.length;y++){S.index>y?(v=S,S=null):v=S.sibling;var T=f(b,S,C[y],M);if(T===null){S===null&&(S=v);break}t&&S&&T.alternate===null&&e(b,S),x=s(T,x,y),k===null?j=T:k.sibling=T,k=T,S=v}if(y===C.length)return n(b,S),Ee&&Zr(b,y),j;if(S===null){for(;y<C.length;y++)S=d(b,C[y],M),S!==null&&(x=s(S,x,y),k===null?j=S:k.sibling=S,k=S);return Ee&&Zr(b,y),j}for(S=i(S);y<C.length;y++)v=p(S,b,y,C[y],M),v!==null&&(t&&v.alternate!==null&&S.delete(v.key===null?y:v.key),x=s(v,x,y),k===null?j=v:k.sibling=v,k=v);return t&&S.forEach(function(w){return e(b,w)}),Ee&&Zr(b,y),j}function O(b,x,C,M){if(C==null)throw Error(X(151));for(var j=null,k=null,S=x,y=x=0,v=null,T=C.next();S!==null&&!T.done;y++,T=C.next()){S.index>y?(v=S,S=null):v=S.sibling;var w=f(b,S,T.value,M);if(w===null){S===null&&(S=v);break}t&&S&&w.alternate===null&&e(b,S),x=s(w,x,y),k===null?j=w:k.sibling=w,k=w,S=v}if(T.done)return n(b,S),Ee&&Zr(b,y),j;if(S===null){for(;!T.done;y++,T=C.next())T=d(b,T.value,M),T!==null&&(x=s(T,x,y),k===null?j=T:k.sibling=T,k=T);return Ee&&Zr(b,y),j}for(S=i(S);!T.done;y++,T=C.next())T=p(S,b,y,T.value,M),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?y:T.key),x=s(T,x,y),k===null?j=T:k.sibling=T,k=T);return t&&S.forEach(function(R){return e(b,R)}),Ee&&Zr(b,y),j}function V(b,x,C,M){if(typeof C=="object"&&C!==null&&C.type===Ys&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case ou:e:{for(var j=C.key;x!==null;){if(x.key===j){if(j=C.type,j===Ys){if(x.tag===7){n(b,x.sibling),M=r(x,C.props.children),M.return=b,b=M;break e}}else if(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===er&&cy(j)===x.type){n(b,x.sibling),M=r(x,C.props),ho(M,C),M.return=b,b=M;break e}n(b,x);break}else e(b,x);x=x.sibling}C.type===Ys?(M=ss(C.props.children,b.mode,M,C.key),M.return=b,b=M):(M=ku(C.type,C.key,C.props,null,b.mode,M),ho(M,C),M.return=b,b=M)}return a(b);case go:e:{for(j=C.key;x!==null;){if(x.key===j)if(x.tag===4&&x.stateNode.containerInfo===C.containerInfo&&x.stateNode.implementation===C.implementation){n(b,x.sibling),M=r(x,C.children||[]),M.return=b,b=M;break e}else{n(b,x);break}else e(b,x);x=x.sibling}M=Af(C,b.mode,M),M.return=b,b=M}return a(b);case er:return j=C._init,C=j(C._payload),V(b,x,C,M)}if(yo(C))return E(b,x,C,M);if(oo(C)){if(j=oo(C),typeof j!="function")throw Error(X(150));return C=j.call(C),O(b,x,C,M)}if(typeof C.then=="function")return V(b,x,mu(C),M);if(C.$$typeof===Si)return V(b,x,fu(b,C),M);pu(b,C)}return typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint"?(C=""+C,x!==null&&x.tag===6?(n(b,x.sibling),M=r(x,C),M.return=b,b=M):(n(b,x),M=Ef(C,b.mode,M),M.return=b,b=M),a(b)):n(b,x)}return function(b,x,C,M){try{Zo=0;var j=V(b,x,C,M);return da=null,j}catch(S){if(S===Al||S===ph)throw S;var k=mn(29,S,null,b.mode);return k.lanes=M,k.return=b,k}finally{}}}var Sa=bb(!0),Tb=bb(!1),jn=pi(null),ai=null;function ir(t){var e=t.alternate;$e(gt,gt.current&1),$e(jn,t),ai===null&&(e===null||Aa.current!==null||e.memoizedState!==null)&&(ai=t)}function Eb(t){if(t.tag===22){if($e(gt,gt.current),$e(jn,t),ai===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(ai=t)}}else rr()}function rr(){$e(gt,gt.current),$e(jn,jn.current)}function Ii(t){St(jn),ai===t&&(ai=null),St(gt)}var gt=pi(0);function pc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Zd(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function xf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vd={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=_n(),r=pr(i);r.payload=e,n!=null&&(r.callback=n),e=gr(t,r,i),e!==null&&(bn(e,t,i),No(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=_n(),r=pr(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=gr(t,r,i),e!==null&&(bn(e,t,i),No(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_n(),i=pr(n);i.tag=2,e!=null&&(i.callback=e),e=gr(t,i,n),e!==null&&(bn(e,t,n),No(e,t,n))}};function hy(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!Yo(n,i)||!Yo(r,s):!0}function fy(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Vd.enqueueReplaceState(e,e.state,null)}function ys(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Fe({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}var gc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Ab(t){gc(t)}function wb(t){console.error(t)}function Sb(t){gc(t)}function yc(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function dy(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function jd(t,e,n){return n=pr(n),n.tag=3,n.payload={element:null},n.callback=function(){yc(t,e)},n}function xb(t){return t=pr(t),t.tag=3,t}function Rb(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){dy(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){dy(e,n,i),typeof r!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function PS(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&Tl(e,n,r,!0),n=jn.current,n!==null){switch(n.tag){case 13:return ai===null?Hd():n.alternate===null&&et===0&&(et=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Cd?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Uf(t,i,r)),!1;case 22:return n.flags|=65536,i===Cd?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Uf(t,i,r)),!1}throw Error(X(435,n.tag))}return Uf(t,i,r),Hd(),!1}if(Ee)return e=jn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==Ad&&(t=Error(X(422),{cause:i}),Ko(Dn(t,n)))):(i!==Ad&&(e=Error(X(423),{cause:i}),Ko(Dn(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=Dn(i,n),r=jd(t.stateNode,i,r),wf(t,r),et!==4&&(et=2)),!1;var s=Error(X(520),{cause:i});if(s=Dn(s,n),jo===null?jo=[s]:jo.push(s),et!==4&&(et=2),e===null)return!0;i=Dn(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=jd(n.stateNode,i,t),wf(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(yr===null||!yr.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=xb(r),Rb(r,t,n,i),wf(n,r),!1}n=n.return}while(n!==null);return!1}var Cb=Error(X(461)),wt=!1;function Rt(t,e,n,i){e.child=t===null?Tb(e,null,n,i):Sa(e,t.child,n,i)}function my(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}else a=i;return ps(e),i=ip(t,e,n,a,s,r),o=rp(),t!==null&&!wt?(sp(t,e,r),Ui(t,e,r)):(Ee&&o&&Xm(e),e.flags|=1,Rt(t,e,i,r),e.child)}function py(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Km(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,Ib(t,e,s,i,r)):(t=ku(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!mp(t,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Yo,n(a,i)&&t.ref===e.ref)return Ui(t,e,r)}return e.flags|=1,t=Oi(s,i),t.ref=e.ref,t.return=e,e.child=t}function Ib(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Yo(s,i)&&t.ref===e.ref)if(wt=!1,e.pendingProps=i=s,mp(t,r))t.flags&131072&&(wt=!0);else return e.lanes=t.lanes,Ui(t,e,r)}return Ud(t,e,n,i,r)}function Nb(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden"){if(e.flags&128){if(i=s!==null?s.baseLanes|n:n,t!==null){for(r=e.child=t.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;e.childLanes=s&~i}else e.childLanes=0,e.child=null;return gy(t,e,i,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Vu(e,s!==null?s.cachePool:null),s!==null?iy(e,s):Dd(),Eb(e);else return e.lanes=e.childLanes=536870912,gy(t,e,s!==null?s.baseLanes|n:n,n)}else s!==null?(Vu(e,s.cachePool),iy(e,s),rr(),e.memoizedState=null):(t!==null&&Vu(e,null),Dd(),rr());return Rt(t,e,r,n),e.child}function gy(t,e,n,i){var r=Jm();return r=r===null?null:{parent:pt._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&Vu(e,null),Dd(),Eb(e),t!==null&&Tl(t,e,i,!0),null}function Pu(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(X(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Ud(t,e,n,i,r){return ps(e),n=ip(t,e,n,i,void 0,r),i=rp(),t!==null&&!wt?(sp(t,e,r),Ui(t,e,r)):(Ee&&i&&Xm(e),e.flags|=1,Rt(t,e,n,r),e.child)}function yy(t,e,n,i,r,s){return ps(e),e.updateQueue=null,n=q1(e,i,n,r),F1(t),i=rp(),t!==null&&!wt?(sp(t,e,s),Ui(t,e,s)):(Ee&&i&&Xm(e),e.flags|=1,Rt(t,e,n,s),e.child)}function vy(t,e,n,i,r){if(ps(e),e.stateNode===null){var s=na,a=n.contextType;typeof a=="object"&&a!==null&&(s=Bt(a)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Vd,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},ep(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?Bt(a):na,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(xf(e,n,a,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&Vd.enqueueReplaceState(s,s.state,null),Oo(e,i,s,r),Do(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var o=e.memoizedProps,u=ys(n,o);s.props=u;var h=s.context,c=n.contextType;a=na,typeof c=="object"&&c!==null&&(a=Bt(c));var d=n.getDerivedStateFromProps;c=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,c||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o||h!==a)&&fy(e,s,i,a),tr=!1;var f=e.memoizedState;s.state=f,Oo(e,i,s,r),Do(),h=e.memoizedState,o||f!==h||tr?(typeof d=="function"&&(xf(e,n,d,i),h=e.memoizedState),(u=tr||hy(e,n,u,i,f,h,a))?(c||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Id(t,e),a=e.memoizedProps,c=ys(n,a),s.props=c,d=e.pendingProps,f=s.context,h=n.contextType,u=na,typeof h=="object"&&h!==null&&(u=Bt(h)),o=n.getDerivedStateFromProps,(h=typeof o=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==u)&&fy(e,s,i,u),tr=!1,f=e.memoizedState,s.state=f,Oo(e,i,s,r),Do();var p=e.memoizedState;a!==d||f!==p||tr||t!==null&&t.dependencies!==null&&cc(t.dependencies)?(typeof o=="function"&&(xf(e,n,o,i),p=e.memoizedState),(c=tr||hy(e,n,c,i,f,p,u)||t!==null&&t.dependencies!==null&&cc(t.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,p,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,p,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),s.props=i,s.state=p,s.context=u,i=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,Pu(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=Sa(e,t.child,null,r),e.child=Sa(e,null,n,r)):Rt(t,e,n,r),e.memoizedState=s.state,t=e.child):t=Ui(t,e,r),t}function _y(t,e,n,i){return bl(),e.flags|=256,Rt(t,e,n,i),e.child}var Rf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cf(t){return{baseLanes:t,cachePool:U1()}}function If(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Mn),t}function Db(t,e,n){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(gt.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(Ee){if(r?ir(e):rr(),Ee){var o=Je,u;if(u=o){e:{for(u=o,o=ni;u.nodeType!==8;){if(!o){o=null;break e}if(u=$n(u.nextSibling),u===null){o=null;break e}}o=u}o!==null?(e.memoizedState={dehydrated:o,treeContext:as!==null?{id:xi,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},u=mn(18,null,null,0),u.stateNode=o,u.return=e,e.child=u,Gt=e,Je=null,u=!0):u=!1}u||ms(e)}if(o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return Zd(o)?e.lanes=32:e.lanes=536870912,null;Ii(e)}return o=i.children,i=i.fallback,r?(rr(),r=e.mode,o=vc({mode:"hidden",children:o},r),i=ss(i,r,n,null),o.return=e,i.return=e,o.sibling=i,e.child=o,r=e.child,r.memoizedState=Cf(n),r.childLanes=If(t,a,n),e.memoizedState=Rf,i):(ir(e),Pd(e,o))}if(u=t.memoizedState,u!==null&&(o=u.dehydrated,o!==null)){if(s)e.flags&256?(ir(e),e.flags&=-257,e=Nf(t,e,n)):e.memoizedState!==null?(rr(),e.child=t.child,e.flags|=128,e=null):(rr(),r=i.fallback,o=e.mode,i=vc({mode:"visible",children:i.children},o),r=ss(r,o,n,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,Sa(e,t.child,null,n),i=e.child,i.memoizedState=Cf(n),i.childLanes=If(t,a,n),e.memoizedState=Rf,e=r);else if(ir(e),Zd(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(X(419)),i.stack="",i.digest=a,Ko({value:i,source:null,stack:null}),e=Nf(t,e,n)}else if(wt||Tl(t,e,n,!1),a=(n&t.childLanes)!==0,wt||a){if(a=Pe,a!==null&&(i=n&-n,i=i&42?1:Pm(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,La(t,i),bn(a,t,i),Cb;o.data==="$?"||Hd(),e=Nf(t,e,n)}else o.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,Je=$n(o.nextSibling),Gt=e,Ee=!0,os=null,ni=!1,t!==null&&(Cn[In++]=xi,Cn[In++]=Ri,Cn[In++]=as,xi=t.id,Ri=t.overflow,as=e),e=Pd(e,i.children),e.flags|=4096);return e}return r?(rr(),r=i.fallback,o=e.mode,u=t.child,h=u.sibling,i=Oi(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,h!==null?r=Oi(h,r):(r=ss(r,o,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=t.child.memoizedState,o===null?o=Cf(n):(u=o.cachePool,u!==null?(h=pt._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=U1(),o={baseLanes:o.baseLanes|n,cachePool:u}),r.memoizedState=o,r.childLanes=If(t,a,n),e.memoizedState=Rf,i):(ir(e),n=t.child,t=n.sibling,n=Oi(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Pd(t,e){return e=vc({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function vc(t,e){return t=mn(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Nf(t,e,n){return Sa(e,t.child,null,n),t=Pd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function by(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Sd(t.return,e,n)}function Df(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ob(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Rt(t,e,i.children,n),i=gt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&by(t,n,e);else if(t.tag===19)by(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}switch($e(gt,i),r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&pc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Df(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&pc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Df(e,!0,n,null,s);break;case"together":Df(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ui(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Cr|=e.lanes,!(n&e.childLanes))if(t!==null){if(Tl(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Oi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Oi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mp(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&cc(t)))}function zS(t,e,n){switch(e.tag){case 3:nc(e,e.stateNode.containerInfo),nr(e,pt,t.memoizedState.cache),bl();break;case 27:case 5:dd(e);break;case 4:nc(e,e.stateNode.containerInfo);break;case 10:nr(e,e.type,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(ir(e),e.flags|=128,null):n&e.child.childLanes?Db(t,e,n):(ir(e),t=Ui(t,e,n),t!==null?t.sibling:null);ir(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(Tl(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return Ob(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),$e(gt,gt.current),i)break;return null;case 22:case 23:return e.lanes=0,Nb(t,e,n);case 24:nr(e,pt,t.memoizedState.cache)}return Ui(t,e,n)}function Mb(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)wt=!0;else{if(!mp(t,n)&&!(e.flags&128))return wt=!1,zS(t,e,n);wt=!!(t.flags&131072)}else wt=!1,Ee&&e.flags&1048576&&V1(e,uc,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var i=e.elementType,r=i._init;if(i=r(i._payload),e.type=i,typeof i=="function")Km(i)?(t=ys(i,t),e.tag=1,e=vy(null,e,i,t,n)):(e.tag=0,e=Ud(null,e,i,t,n));else{if(i!=null){if(r=i.$$typeof,r===Vm){e.tag=11,e=my(null,e,i,t,n);break e}else if(r===jm){e.tag=14,e=py(null,e,i,t,n);break e}}throw e=hd(i)||i,Error(X(306,e,""))}}return e;case 0:return Ud(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=ys(i,e.pendingProps),vy(t,e,i,r,n);case 3:e:{if(nc(e,e.stateNode.containerInfo),t===null)throw Error(X(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,Id(t,e),Oo(e,i,null,n);var a=e.memoizedState;if(i=a.cache,nr(e,pt,i),i!==s.cache&&xd(e,[pt],n,!0),Do(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=_y(t,e,i,n);break e}else if(i!==r){r=Dn(Error(X(424)),e),Ko(r),e=_y(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Je=$n(t.firstChild),Gt=e,Ee=!0,os=null,ni=!0,n=Tb(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(bl(),i===r){e=Ui(t,e,n);break e}Rt(t,e,i,n)}e=e.child}return e;case 26:return Pu(t,e),t===null?(n=Uy(e.type,null,e.pendingProps,null))?e.memoizedState=n:Ee||(n=e.type,t=e.pendingProps,i=Sc(mr.current).createElement(n),i[Lt]=e,i[sn]=t,Dt(i,n,t),At(i),e.stateNode=i):e.memoizedState=Uy(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return dd(e),t===null&&Ee&&(i=e.stateNode=_T(e.type,e.pendingProps,mr.current),Gt=e,ni=!0,r=Je,zr(e.type)?(Wd=r,Je=$n(i.firstChild)):Je=r),Rt(t,e,e.pendingProps.children,n),Pu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Ee&&((r=i=Je)&&(i=dx(i,e.type,e.pendingProps,ni),i!==null?(e.stateNode=i,Gt=e,Je=$n(i.firstChild),ni=!1,r=!0):r=!1),r||ms(e)),dd(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,i=s.children,Kd(r,s)?i=null:a!==null&&Kd(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=ip(t,e,DS,null,null,n),tl._currentValue=r),Pu(t,e),Rt(t,e,i,n),e.child;case 6:return t===null&&Ee&&((t=n=Je)&&(n=mx(n,e.pendingProps,ni),n!==null?(e.stateNode=n,Gt=e,Je=null,t=!0):t=!1),t||ms(e)),null;case 13:return Db(t,e,n);case 4:return nc(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Sa(e,null,i,n):Rt(t,e,i,n),e.child;case 11:return my(t,e,e.type,e.pendingProps,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,nr(e,e.type,i.value),Rt(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,ps(e),r=Bt(r),i=i(r),e.flags|=1,Rt(t,e,i,n),e.child;case 14:return py(t,e,e.type,e.pendingProps,n);case 15:return Ib(t,e,e.type,e.pendingProps,n);case 19:return Ob(t,e,n);case 31:return i=e.pendingProps,n=e.mode,i={mode:i.mode,children:i.children},t===null?(n=vc(i,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=Oi(t.child,i),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return Nb(t,e,n);case 24:return ps(e),i=Bt(pt),t===null?(r=Jm(),r===null&&(r=Pe,s=Wm(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},ep(e),nr(e,pt,r)):(t.lanes&n&&(Id(t,e),Oo(e,null,null,n),Do()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),nr(e,pt,i)):(i=s.cache,nr(e,pt,i),i!==r.cache&&xd(e,[pt],n,!0))),Rt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(X(156,e.tag))}function Ti(t){t.flags|=4}function Ty(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!ET(e)){if(e=jn.current,e!==null&&((_e&4194048)===_e?ai!==null:(_e&62914560)!==_e&&!(_e&536870912)||e!==ai))throw Io=Cd,P1;t.flags|=8192}}function gu(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?s1():536870912,t.lanes|=e,xa|=e)}function fo(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function LS(t,e,n){var i=e.pendingProps;switch(Zm(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(e),null;case 1:return Ke(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Mi(pt),_a(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(co(e)?Ti(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Z0())),Ke(e),null;case 26:return n=e.memoizedState,t===null?(Ti(e),n!==null?(Ke(e),Ty(e,n)):(Ke(e),e.flags&=-16777217)):n?n!==t.memoizedState?(Ti(e),Ke(e),Ty(e,n)):(Ke(e),e.flags&=-16777217):(t.memoizedProps!==i&&Ti(e),Ke(e),e.flags&=-16777217),null;case 27:ic(e),n=mr.current;var r=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Ti(e);else{if(!i){if(e.stateNode===null)throw Error(X(166));return Ke(e),null}t=ri.current,co(e)?K0(e):(t=_T(r,i,n),e.stateNode=t,Ti(e))}return Ke(e),null;case 5:if(ic(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Ti(e);else{if(!i){if(e.stateNode===null)throw Error(X(166));return Ke(e),null}if(t=ri.current,co(e))K0(e);else{switch(r=Sc(mr.current),t){case 1:t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=r.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?t.multiple=!0:i.size&&(t.size=i.size);break;default:t=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}t[Lt]=e,t[sn]=i;e:for(r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=t;e:switch(Dt(t,n,i),n){case"button":case"input":case"select":case"textarea":t=!!i.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Ti(e)}}return Ke(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&Ti(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(X(166));if(t=mr.current,co(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=Gt,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[Lt]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||gT(t.nodeValue,n)),t||ms(e)}else t=Sc(t).createTextNode(i),t[Lt]=e,e.stateNode=t}return Ke(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=co(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(X(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(X(317));r[Lt]=e}else bl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ke(e),r=!1}else r=Z0(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(Ii(e),e):(Ii(e),null)}if(Ii(e),e.flags&128)return e.lanes=n,e;if(n=i!==null,t=t!==null&&t.memoizedState!==null,n){i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),gu(e,e.updateQueue),Ke(e),null;case 4:return _a(),t===null&&Ep(e.stateNode.containerInfo),Ke(e),null;case 10:return Mi(e.type),Ke(e),null;case 19:if(St(gt),r=e.memoizedState,r===null)return Ke(e),null;if(i=(e.flags&128)!==0,s=r.rendering,s===null)if(i)fo(r,!1);else{if(et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=pc(t),s!==null){for(e.flags|=128,fo(r,!1),t=s.updateQueue,e.updateQueue=t,gu(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)k1(n,t),n=n.sibling;return $e(gt,gt.current&1|2),e.child}t=t.sibling}r.tail!==null&&si()>bc&&(e.flags|=128,i=!0,fo(r,!1),e.lanes=4194304)}else{if(!i)if(t=pc(s),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,gu(e,t),fo(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!Ee)return Ke(e),null}else 2*si()-r.renderingStartTime>bc&&n!==536870912&&(e.flags|=128,i=!0,fo(r,!1),e.lanes=4194304);r.isBackwards?(s.sibling=e.child,e.child=s):(t=r.last,t!==null?t.sibling=s:e.child=s,r.last=s)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=si(),e.sibling=null,t=gt.current,$e(gt,i?t&1|2:t&1),e):(Ke(e),null);case 22:case 23:return Ii(e),tp(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Ke(e),e.subtreeFlags&6&&(e.flags|=8192)):Ke(e),n=e.updateQueue,n!==null&&gu(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&St(ls),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Mi(pt),Ke(e),null;case 25:return null;case 30:return null}throw Error(X(156,e.tag))}function BS(t,e){switch(Zm(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mi(pt),_a(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return ic(e),null;case 13:if(Ii(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));bl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return St(gt),null;case 4:return _a(),null;case 10:return Mi(e.type),null;case 22:case 23:return Ii(e),tp(),t!==null&&St(ls),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Mi(pt),null;case 25:return null;default:return null}}function kb(t,e){switch(Zm(e),e.tag){case 3:Mi(pt),_a();break;case 26:case 27:case 5:ic(e);break;case 4:_a();break;case 13:Ii(e);break;case 19:St(gt);break;case 10:Mi(e.type);break;case 22:case 23:Ii(e),tp(),t!==null&&St(ls);break;case 24:Mi(pt)}}function xl(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(o){Me(e,e.return,o)}}function Rr(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&t)===t){var a=i.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,r=e;var u=n,h=o;try{h()}catch(c){Me(r,u,c)}}}i=i.next}while(i!==s)}}catch(c){Me(e,e.return,c)}}function Vb(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{B1(e,n)}catch(i){Me(t,t.return,i)}}}function jb(t,e,n){n.props=ys(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Me(t,e,i)}}function ko(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){Me(t,e,r)}}function ii(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Me(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function Ub(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Me(t,t.return,r)}}function Of(t,e,n){try{var i=t.stateNode;lx(i,t.type,n,e),i[sn]=e}catch(r){Me(t,t.return,r)}}function Pb(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&zr(t.type)||t.tag===4}function Mf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Pb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&zr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zd(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Eh));else if(i!==4&&(i===27&&zr(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(zd(t,e,n),t=t.sibling;t!==null;)zd(t,e,n),t=t.sibling}function _c(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&zr(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(_c(t,e,n),t=t.sibling;t!==null;)_c(t,e,n),t=t.sibling}function zb(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Dt(e,i,n),e[Lt]=t,e[sn]=n}catch(s){Me(t,t.return,s)}}var Ai=!1,it=!1,kf=!1,Ey=typeof WeakSet=="function"?WeakSet:Set,Et=null;function FS(t,e){if(t=t.containerInfo,Qd=Ic,t=x1(t),$m(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,u=-1,h=0,c=0,d=t,f=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(o=a+r),d!==s||i!==0&&d.nodeType!==3||(u=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++h===r&&(o=a),f===s&&++c===i&&(u=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yd={focusedElem:t,selectionRange:n},Ic=!1,Et=e;Et!==null;)if(e=Et,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,Et=t;else for(;Et!==null;){switch(e=Et,s=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var E=ys(n.type,r,n.elementType===n.type);t=i.getSnapshotBeforeUpdate(E,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(O){Me(n,n.return,O)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Xd(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Xd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(X(163))}if(t=e.sibling,t!==null){t.return=e.return,Et=t;break}Et=e.return}}function Lb(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Zi(t,n),i&4&&xl(5,n);break;case 1:if(Zi(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Me(n,n.return,a)}else{var r=ys(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Me(n,n.return,a)}}i&64&&Vb(n),i&512&&ko(n,n.return);break;case 3:if(Zi(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{B1(t,e)}catch(a){Me(n,n.return,a)}}break;case 27:e===null&&i&4&&zb(n);case 26:case 5:Zi(t,n),e===null&&i&4&&Ub(n),i&512&&ko(n,n.return);break;case 12:Zi(t,n);break;case 13:Zi(t,n),i&4&&qb(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=ZS.bind(null,n),px(t,n))));break;case 22:if(i=n.memoizedState!==null||Ai,!i){e=e!==null&&e.memoizedState!==null||it,r=Ai;var s=it;Ai=i,(it=e)&&!s?Ji(t,n,(n.subtreeFlags&8772)!==0):Zi(t,n),Ai=r,it=s}break;case 30:break;default:Zi(t,n)}}function Bb(t){var e=t.alternate;e!==null&&(t.alternate=null,Bb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Lm(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var He=null,Zt=!1;function Ei(t,e,n){for(n=n.child;n!==null;)Fb(t,e,n),n=n.sibling}function Fb(t,e,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(pl,n)}catch{}switch(n.tag){case 26:it||ii(n,e),Ei(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:it||ii(n,e);var i=He,r=Zt;zr(n.type)&&(He=n.stateNode,Zt=!1),Ei(t,e,n),Po(n.stateNode),He=i,Zt=r;break;case 5:it||ii(n,e);case 6:if(i=He,r=Zt,He=null,Ei(t,e,n),He=i,Zt=r,He!==null)if(Zt)try{(He.nodeType===9?He.body:He.nodeName==="HTML"?He.ownerDocument.body:He).removeChild(n.stateNode)}catch(s){Me(n,e,s)}else try{He.removeChild(n.stateNode)}catch(s){Me(n,e,s)}break;case 18:He!==null&&(Zt?(t=He,ky(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),rl(t)):ky(He,n.stateNode));break;case 4:i=He,r=Zt,He=n.stateNode.containerInfo,Zt=!0,Ei(t,e,n),He=i,Zt=r;break;case 0:case 11:case 14:case 15:it||Rr(2,n,e),it||Rr(4,n,e),Ei(t,e,n);break;case 1:it||(ii(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&jb(n,e,i)),Ei(t,e,n);break;case 21:Ei(t,e,n);break;case 22:it=(i=it)||n.memoizedState!==null,Ei(t,e,n),it=i;break;default:Ei(t,e,n)}}function qb(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{rl(t)}catch(n){Me(e,e.return,n)}}function qS(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Ey),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Ey),e;default:throw Error(X(435,t.tag))}}function Vf(t,e){var n=qS(t);e.forEach(function(i){var r=WS.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}function hn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(zr(o.type)){He=o.stateNode,Zt=!1;break e}break;case 5:He=o.stateNode,Zt=!1;break e;case 3:case 4:He=o.stateNode.containerInfo,Zt=!0;break e}o=o.return}if(He===null)throw Error(X(160));Fb(s,a,r),He=null,Zt=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)Hb(e,t),e=e.sibling}var qn=null;function Hb(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:hn(e,t),fn(t),i&4&&(Rr(3,t,t.return),xl(3,t),Rr(5,t,t.return));break;case 1:hn(e,t),fn(t),i&512&&(it||n===null||ii(n,n.return)),i&64&&Ai&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=qn;if(hn(e,t),fn(t),i&512&&(it||n===null||ii(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[vl]||s[Lt]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Dt(s,i,n),s[Lt]=t,At(s),i=s;break e;case"link":var a=zy("link","href",r).get(i+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(s=a[o],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}s=r.createElement(i),Dt(s,i,n),r.head.appendChild(s);break;case"meta":if(a=zy("meta","content",r).get(i+(n.content||""))){for(o=0;o<a.length;o++)if(s=a[o],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}s=r.createElement(i),Dt(s,i,n),r.head.appendChild(s);break;default:throw Error(X(468,i))}s[Lt]=t,At(s),i=s}t.stateNode=i}else Ly(r,t.type,t.stateNode);else t.stateNode=Py(r,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?Ly(r,t.type,t.stateNode):Py(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Of(t,t.memoizedProps,n.memoizedProps)}break;case 27:hn(e,t),fn(t),i&512&&(it||n===null||ii(n,n.return)),n!==null&&i&4&&Of(t,t.memoizedProps,n.memoizedProps);break;case 5:if(hn(e,t),fn(t),i&512&&(it||n===null||ii(n,n.return)),t.flags&32){r=t.stateNode;try{Ta(r,"")}catch(p){Me(t,t.return,p)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,Of(t,r,n!==null?n.memoizedProps:r)),i&1024&&(kf=!0);break;case 6:if(hn(e,t),fn(t),i&4){if(t.stateNode===null)throw Error(X(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(p){Me(t,t.return,p)}}break;case 3:if(Bu=null,r=qn,qn=xc(e.containerInfo),hn(e,t),qn=r,fn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{rl(e.containerInfo)}catch(p){Me(t,t.return,p)}kf&&(kf=!1,Gb(t));break;case 4:i=qn,qn=xc(t.stateNode.containerInfo),hn(e,t),fn(t),qn=i;break;case 12:hn(e,t),fn(t);break;case 13:hn(e,t),fn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(_p=si()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Vf(t,i)));break;case 22:r=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,h=Ai,c=it;if(Ai=h||r,it=c||u,hn(e,t),it=c,Ai=h,fn(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||u||Ai||it||Wr(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(s=u.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=u.stateNode;var d=u.memoizedProps.style,f=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(p){Me(u,u.return,p)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(p){Me(u,u.return,p)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Vf(t,n))));break;case 19:hn(e,t),fn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Vf(t,i)));break;case 30:break;case 21:break;default:hn(e,t),fn(t)}}function fn(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(Pb(i)){n=i;break}i=i.return}if(n==null)throw Error(X(160));switch(n.tag){case 27:var r=n.stateNode,s=Mf(t);_c(t,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(Ta(a,""),n.flags&=-33);var o=Mf(t);_c(t,o,a);break;case 3:case 4:var u=n.stateNode.containerInfo,h=Mf(t);zd(t,h,u);break;default:throw Error(X(161))}}catch(c){Me(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Gb(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Gb(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Zi(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Lb(t,e.alternate,e),e=e.sibling}function Wr(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Rr(4,e,e.return),Wr(e);break;case 1:ii(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&jb(e,e.return,n),Wr(e);break;case 27:Po(e.stateNode);case 26:case 5:ii(e,e.return),Wr(e);break;case 22:e.memoizedState===null&&Wr(e);break;case 30:Wr(e);break;default:Wr(e)}t=t.sibling}}function Ji(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:Ji(r,s,n),xl(4,s);break;case 1:if(Ji(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){Me(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var o=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)L1(u[r],o)}catch(h){Me(i,i.return,h)}}n&&a&64&&Vb(s),ko(s,s.return);break;case 27:zb(s);case 26:case 5:Ji(r,s,n),n&&i===null&&a&4&&Ub(s),ko(s,s.return);break;case 12:Ji(r,s,n);break;case 13:Ji(r,s,n),n&&a&4&&qb(r,s);break;case 22:s.memoizedState===null&&Ji(r,s,n),ko(s,s.return);break;case 30:break;default:Ji(r,s,n)}e=e.sibling}}function pp(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&El(n))}function gp(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&El(t))}function Jn(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)$b(t,e,n,i),e=e.sibling}function $b(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:Jn(t,e,n,i),r&2048&&xl(9,e);break;case 1:Jn(t,e,n,i);break;case 3:Jn(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&El(t)));break;case 12:if(r&2048){Jn(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,o=s.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){Me(e,e.return,u)}}else Jn(t,e,n,i);break;case 13:Jn(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?Jn(t,e,n,i):Vo(t,e):s._visibility&2?Jn(t,e,n,i):(s._visibility|=2,Fs(t,e,n,i,(e.subtreeFlags&10256)!==0)),r&2048&&pp(a,e);break;case 24:Jn(t,e,n,i),r&2048&&gp(e.alternate,e);break;default:Jn(t,e,n,i)}}function Fs(t,e,n,i,r){for(r=r&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var s=t,a=e,o=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:Fs(s,a,o,u,r),xl(8,a);break;case 23:break;case 22:var c=a.stateNode;a.memoizedState!==null?c._visibility&2?Fs(s,a,o,u,r):Vo(s,a):(c._visibility|=2,Fs(s,a,o,u,r)),r&&h&2048&&pp(a.alternate,a);break;case 24:Fs(s,a,o,u,r),r&&h&2048&&gp(a.alternate,a);break;default:Fs(s,a,o,u,r)}e=e.sibling}}function Vo(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:Vo(n,i),r&2048&&pp(i.alternate,i);break;case 24:Vo(n,i),r&2048&&gp(i.alternate,i);break;default:Vo(n,i)}e=e.sibling}}var _o=8192;function js(t){if(t.subtreeFlags&_o)for(t=t.child;t!==null;)Qb(t),t=t.sibling}function Qb(t){switch(t.tag){case 26:js(t),t.flags&_o&&t.memoizedState!==null&&Cx(qn,t.memoizedState,t.memoizedProps);break;case 5:js(t);break;case 3:case 4:var e=qn;qn=xc(t.stateNode.containerInfo),js(t),qn=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=_o,_o=16777216,js(t),_o=e):js(t));break;default:js(t)}}function Yb(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function mo(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Et=i,Xb(i,t)}Yb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Kb(t),t=t.sibling}function Kb(t){switch(t.tag){case 0:case 11:case 15:mo(t),t.flags&2048&&Rr(9,t,t.return);break;case 3:mo(t);break;case 12:mo(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,zu(t)):mo(t);break;default:mo(t)}}function zu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Et=i,Xb(i,t)}Yb(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Rr(8,e,e.return),zu(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,zu(e));break;default:zu(e)}t=t.sibling}}function Xb(t,e){for(;Et!==null;){var n=Et;switch(n.tag){case 0:case 11:case 15:Rr(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:El(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Et=i;else e:for(n=t;Et!==null;){i=Et;var r=i.sibling,s=i.return;if(Bb(i),i===n){Et=null;break e}if(r!==null){r.return=s,Et=r;break e}Et=s}}}var HS={getCacheForType:function(t){var e=Bt(pt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},GS=typeof WeakMap=="function"?WeakMap:Map,Ce=0,Pe=null,me=null,_e=0,Re=0,dn=null,hr=!1,Ba=!1,yp=!1,Pi=0,et=0,Cr=0,us=0,vp=0,Mn=0,xa=0,jo=null,Wt=null,Ld=!1,_p=0,bc=1/0,Tc=null,yr=null,It=0,vr=null,Ra=null,ma=0,Bd=0,Fd=null,Zb=null,Uo=0,qd=null;function _n(){if(Ce&2&&_e!==0)return _e&-_e;if(se.T!==null){var t=Ea;return t!==0?t:Tp()}return l1()}function Wb(){Mn===0&&(Mn=!(_e&536870912)||Ee?r1():536870912);var t=jn.current;return t!==null&&(t.flags|=32),Mn}function bn(t,e,n){(t===Pe&&(Re===2||Re===9)||t.cancelPendingCommit!==null)&&(Ca(t,0),fr(t,_e,Mn,!1)),yl(t,n),(!(Ce&2)||t!==Pe)&&(t===Pe&&(!(Ce&2)&&(us|=n),et===4&&fr(t,_e,Mn,!1)),gi(t))}function Jb(t,e,n){if(Ce&6)throw Error(X(327));var i=!n&&(e&124)===0&&(e&t.expiredLanes)===0||gl(t,e),r=i?YS(t,e):jf(t,e,!0),s=i;do{if(r===0){Ba&&!i&&fr(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!$S(n)){r=jf(t,e,!1),s=!1;continue}if(r===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;r=jo;var u=o.current.memoizedState.isDehydrated;if(u&&(Ca(o,a).flags|=256),a=jf(o,a,!1),a!==2){if(yp&&!u){o.errorRecoveryDisabledLanes|=s,us|=s,r=4;break e}s=Wt,Wt=r,s!==null&&(Wt===null?Wt=s:Wt.push.apply(Wt,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){Ca(t,0),fr(t,e,0,!0);break}e:{switch(i=t,s=r,s){case 0:case 1:throw Error(X(345));case 4:if((e&4194048)!==e)break;case 6:fr(i,e,Mn,!hr);break e;case 2:Wt=null;break;case 3:case 5:break;default:throw Error(X(329))}if((e&62914560)===e&&(r=_p+300-si(),10<r)){if(fr(i,e,Mn,!hr),uh(i,0,!0)!==0)break e;i.timeoutHandle=vT(Ay.bind(null,i,n,Wt,Tc,Ld,e,Mn,us,xa,hr,s,2,-0,0),r);break e}Ay(i,n,Wt,Tc,Ld,e,Mn,us,xa,hr,s,0,-0,0)}}break}while(!0);gi(t)}function Ay(t,e,n,i,r,s,a,o,u,h,c,d,f,p){if(t.timeoutHandle=-1,d=e.subtreeFlags,(d&8192||(d&16785408)===16785408)&&(el={stylesheets:null,count:0,unsuspend:Rx},Qb(e),d=Ix(),d!==null)){t.cancelPendingCommit=d(Sy.bind(null,t,e,s,n,i,r,a,o,u,c,1,f,p)),fr(t,s,a,!h);return}Sy(t,e,s,n,i,r,a,o,u)}function $S(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!En(s(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fr(t,e,n,i){e&=~vp,e&=~us,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-vn(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&a1(t,n,e)}function _h(){return Ce&6?!0:(Rl(0),!1)}function bp(){if(me!==null){if(Re===0)var t=me.return;else t=me,Ci=Ss=null,ap(t),da=null,Zo=0,t=me;for(;t!==null;)kb(t.alternate,t),t=t.return;me=null}}function Ca(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,cx(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),bp(),Pe=t,me=n=Oi(t.current,null),_e=e,Re=0,dn=null,hr=!1,Ba=gl(t,e),yp=!1,xa=Mn=vp=us=Cr=et=0,Wt=jo=null,Ld=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-vn(i),s=1<<r;e|=t[r],i&=~s}return Pi=e,dh(),n}function eT(t,e){fe=null,se.H=mc,e===Al||e===ph?(e=ty(),Re=3):e===P1?(e=ty(),Re=4):Re=e===Cb?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,dn=e,me===null&&(et=1,yc(t,Dn(e,t.current)))}function tT(){var t=se.H;return se.H=mc,t===null?mc:t}function nT(){var t=se.A;return se.A=HS,t}function Hd(){et=4,hr||(_e&4194048)!==_e&&jn.current!==null||(Ba=!0),!(Cr&134217727)&&!(us&134217727)||Pe===null||fr(Pe,_e,Mn,!1)}function jf(t,e,n){var i=Ce;Ce|=2;var r=tT(),s=nT();(Pe!==t||_e!==e)&&(Tc=null,Ca(t,e)),e=!1;var a=et;e:do try{if(Re!==0&&me!==null){var o=me,u=dn;switch(Re){case 8:bp(),a=6;break e;case 3:case 2:case 9:case 6:jn.current===null&&(e=!0);var h=Re;if(Re=0,dn=null,sa(t,o,u,h),n&&Ba){a=0;break e}break;default:h=Re,Re=0,dn=null,sa(t,o,u,h)}}QS(),a=et;break}catch(c){eT(t,c)}while(!0);return e&&t.shellSuspendCounter++,Ci=Ss=null,Ce=i,se.H=r,se.A=s,me===null&&(Pe=null,_e=0,dh()),a}function QS(){for(;me!==null;)iT(me)}function YS(t,e){var n=Ce;Ce|=2;var i=tT(),r=nT();Pe!==t||_e!==e?(Tc=null,bc=si()+500,Ca(t,e)):Ba=gl(t,e);e:do try{if(Re!==0&&me!==null){e=me;var s=dn;t:switch(Re){case 1:Re=0,dn=null,sa(t,e,s,1);break;case 2:case 9:if(ey(s)){Re=0,dn=null,wy(e);break}e=function(){Re!==2&&Re!==9||Pe!==t||(Re=7),gi(t)},s.then(e,e);break e;case 3:Re=7;break e;case 4:Re=5;break e;case 7:ey(s)?(Re=0,dn=null,wy(e)):(Re=0,dn=null,sa(t,e,s,7));break;case 5:var a=null;switch(me.tag){case 26:a=me.memoizedState;case 5:case 27:var o=me;if(!a||ET(a)){Re=0,dn=null;var u=o.sibling;if(u!==null)me=u;else{var h=o.return;h!==null?(me=h,bh(h)):me=null}break t}}Re=0,dn=null,sa(t,e,s,5);break;case 6:Re=0,dn=null,sa(t,e,s,6);break;case 8:bp(),et=6;break e;default:throw Error(X(462))}}KS();break}catch(c){eT(t,c)}while(!0);return Ci=Ss=null,se.H=i,se.A=r,Ce=n,me!==null?0:(Pe=null,_e=0,dh(),et)}function KS(){for(;me!==null&&!yw();)iT(me)}function iT(t){var e=Mb(t.alternate,t,Pi);t.memoizedProps=t.pendingProps,e===null?bh(t):me=e}function wy(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=yy(n,e,e.pendingProps,e.type,void 0,_e);break;case 11:e=yy(n,e,e.pendingProps,e.type.render,e.ref,_e);break;case 5:ap(e);default:kb(n,e),e=me=k1(e,Pi),e=Mb(n,e,Pi)}t.memoizedProps=t.pendingProps,e===null?bh(t):me=e}function sa(t,e,n,i){Ci=Ss=null,ap(e),da=null,Zo=0;var r=e.return;try{if(PS(t,r,e,n,_e)){et=1,yc(t,Dn(n,t.current)),me=null;return}}catch(s){if(r!==null)throw me=r,s;et=1,yc(t,Dn(n,t.current)),me=null;return}e.flags&32768?(Ee||i===1?t=!0:Ba||_e&536870912?t=!1:(hr=t=!0,(i===2||i===9||i===3||i===6)&&(i=jn.current,i!==null&&i.tag===13&&(i.flags|=16384))),rT(e,t)):bh(e)}function bh(t){var e=t;do{if(e.flags&32768){rT(e,hr);return}t=e.return;var n=LS(e.alternate,e,Pi);if(n!==null){me=n;return}if(e=e.sibling,e!==null){me=e;return}me=e=t}while(e!==null);et===0&&(et=5)}function rT(t,e){do{var n=BS(t.alternate,t);if(n!==null){n.flags&=32767,me=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){me=t;return}me=t=n}while(t!==null);et=6,me=null}function Sy(t,e,n,i,r,s,a,o,u){t.cancelPendingCommit=null;do Th();while(It!==0);if(Ce&6)throw Error(X(327));if(e!==null){if(e===t.current)throw Error(X(177));if(s=e.lanes|e.childLanes,s|=Qm,Rw(t,n,s,a,o,u),t===Pe&&(me=Pe=null,_e=0),Ra=e,vr=t,ma=n,Bd=s,Fd=r,Zb=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,JS(rc,function(){return uT(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=se.T,se.T=null,r=Ae.p,Ae.p=2,a=Ce,Ce|=4;try{FS(t,e,n)}finally{Ce=a,Ae.p=r,se.T=i}}It=1,sT(),aT(),oT()}}function sT(){if(It===1){It=0;var t=vr,e=Ra,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=se.T,se.T=null;var i=Ae.p;Ae.p=2;var r=Ce;Ce|=4;try{Hb(e,t);var s=Yd,a=x1(t.containerInfo),o=s.focusedElem,u=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&S1(o.ownerDocument.documentElement,o)){if(u!==null&&$m(o)){var h=u.start,c=u.end;if(c===void 0&&(c=h),"selectionStart"in o)o.selectionStart=h,o.selectionEnd=Math.min(c,o.value.length);else{var d=o.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),E=o.textContent.length,O=Math.min(u.start,E),V=u.end===void 0?O:Math.min(u.end,E);!p.extend&&O>V&&(a=V,V=O,O=a);var b=$0(o,O),x=$0(o,V);if(b&&x&&(p.rangeCount!==1||p.anchorNode!==b.node||p.anchorOffset!==b.offset||p.focusNode!==x.node||p.focusOffset!==x.offset)){var C=d.createRange();C.setStart(b.node,b.offset),p.removeAllRanges(),O>V?(p.addRange(C),p.extend(x.node,x.offset)):(C.setEnd(x.node,x.offset),p.addRange(C))}}}}for(d=[],p=o;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var M=d[o];M.element.scrollLeft=M.left,M.element.scrollTop=M.top}}Ic=!!Qd,Yd=Qd=null}finally{Ce=r,Ae.p=i,se.T=n}}t.current=e,It=2}}function aT(){if(It===2){It=0;var t=vr,e=Ra,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=se.T,se.T=null;var i=Ae.p;Ae.p=2;var r=Ce;Ce|=4;try{Lb(t,e.alternate,e)}finally{Ce=r,Ae.p=i,se.T=n}}It=3}}function oT(){if(It===4||It===3){It=0,vw();var t=vr,e=Ra,n=ma,i=Zb;e.subtreeFlags&10256||e.flags&10256?It=5:(It=0,Ra=vr=null,lT(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(yr=null),zm(n),e=e.stateNode,yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(pl,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=se.T,r=Ae.p,Ae.p=2,se.T=null;try{for(var s=t.onRecoverableError,a=0;a<i.length;a++){var o=i[a];s(o.value,{componentStack:o.stack})}}finally{se.T=e,Ae.p=r}}ma&3&&Th(),gi(t),r=t.pendingLanes,n&4194090&&r&42?t===qd?Uo++:(Uo=0,qd=t):Uo=0,Rl(0)}}function lT(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,El(e)))}function Th(t){return sT(),aT(),oT(),uT()}function uT(){if(It!==5)return!1;var t=vr,e=Bd;Bd=0;var n=zm(ma),i=se.T,r=Ae.p;try{Ae.p=32>n?32:n,se.T=null,n=Fd,Fd=null;var s=vr,a=ma;if(It=0,Ra=vr=null,ma=0,Ce&6)throw Error(X(331));var o=Ce;if(Ce|=4,Kb(s.current),$b(s,s.current,a,n),Ce=o,Rl(0,!1),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(pl,s)}catch{}return!0}finally{Ae.p=r,se.T=i,lT(t,e)}}function xy(t,e,n){e=Dn(n,e),e=jd(t.stateNode,e,2),t=gr(t,e,2),t!==null&&(yl(t,2),gi(t))}function Me(t,e,n){if(t.tag===3)xy(t,t,n);else for(;e!==null;){if(e.tag===3){xy(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(yr===null||!yr.has(i))){t=Dn(n,t),n=xb(2),i=gr(e,n,2),i!==null&&(Rb(n,i,e,t),yl(i,2),gi(i));break}}e=e.return}}function Uf(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new GS;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(yp=!0,r.add(n),t=XS.bind(null,t,e,n),e.then(t,t))}function XS(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Pe===t&&(_e&n)===n&&(et===4||et===3&&(_e&62914560)===_e&&300>si()-_p?!(Ce&2)&&Ca(t,0):vp|=n,xa===_e&&(xa=0)),gi(t)}function cT(t,e){e===0&&(e=s1()),t=La(t,e),t!==null&&(yl(t,e),gi(t))}function ZS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cT(t,n)}function WS(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(X(314))}i!==null&&i.delete(e),cT(t,n)}function JS(t,e){return Um(t,e)}var Ec=null,qs=null,Gd=!1,Ac=!1,Pf=!1,cs=0;function gi(t){t!==qs&&t.next===null&&(qs===null?Ec=qs=t:qs=qs.next=t),Ac=!0,Gd||(Gd=!0,tx())}function Rl(t,e){if(!Pf&&Ac){Pf=!0;do for(var n=!1,i=Ec;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,o=i.pingedLanes;s=(1<<31-vn(42|t)+1)-1,s&=r&~(a&~o),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Ry(i,s))}else s=_e,s=uh(i,i===Pe?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||gl(i,s)||(n=!0,Ry(i,s));i=i.next}while(n);Pf=!1}}function ex(){hT()}function hT(){Ac=Gd=!1;var t=0;cs!==0&&(ux()&&(t=cs),cs=0);for(var e=si(),n=null,i=Ec;i!==null;){var r=i.next,s=fT(i,e);s===0?(i.next=null,n===null?Ec=r:n.next=r,r===null&&(qs=n)):(n=i,(t!==0||s&3)&&(Ac=!0)),i=r}Rl(t)}function fT(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-vn(s),o=1<<a,u=r[a];u===-1?(!(o&n)||o&i)&&(r[a]=xw(o,e)):u<=e&&(t.expiredLanes|=o),s&=~o}if(e=Pe,n=_e,n=uh(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(Re===2||Re===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&cf(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||gl(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&cf(i),zm(n)){case 2:case 8:n=n1;break;case 32:n=rc;break;case 268435456:n=i1;break;default:n=rc}return i=dT.bind(null,t),n=Um(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&cf(i),t.callbackPriority=2,t.callbackNode=null,2}function dT(t,e){if(It!==0&&It!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Th()&&t.callbackNode!==n)return null;var i=_e;return i=uh(t,t===Pe?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(Jb(t,i,e),fT(t,si()),t.callbackNode!=null&&t.callbackNode===n?dT.bind(null,t):null)}function Ry(t,e){if(Th())return null;Jb(t,e,!0)}function tx(){hx(function(){Ce&6?Um(t1,ex):hT()})}function Tp(){return cs===0&&(cs=r1()),cs}function Cy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Du(""+t)}function Iy(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function nx(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var s=Cy((r[sn]||null).action),a=i.submitter;a&&(e=(e=a[sn]||null)?Cy(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var o=new ch("action","action",null,i,r);t.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(cs!==0){var u=a?Iy(r,a):new FormData(r);kd(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(o.preventDefault(),u=a?Iy(r,a):new FormData(r),kd(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var zf=0;zf<Ed.length;zf++){var Lf=Ed[zf],ix=Lf.toLowerCase(),rx=Lf[0].toUpperCase()+Lf.slice(1);Kn(ix,"on"+rx)}Kn(C1,"onAnimationEnd");Kn(I1,"onAnimationIteration");Kn(N1,"onAnimationStart");Kn("dblclick","onDoubleClick");Kn("focusin","onFocus");Kn("focusout","onBlur");Kn(TS,"onTransitionRun");Kn(ES,"onTransitionStart");Kn(AS,"onTransitionCancel");Kn(D1,"onTransitionEnd");ba("onMouseEnter",["mouseout","mouseover"]);ba("onMouseLeave",["mouseout","mouseover"]);ba("onPointerEnter",["pointerout","pointerover"]);ba("onPointerLeave",["pointerout","pointerover"]);Es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Es("onBeforeInput",["compositionend","keypress","textInput","paste"]);Es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wo));function mT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],u=o.instance,h=o.currentTarget;if(o=o.listener,u!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=h;try{s(r)}catch(c){gc(c)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(o=i[a],u=o.instance,h=o.currentTarget,o=o.listener,u!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=h;try{s(r)}catch(c){gc(c)}r.currentTarget=null,s=u}}}}function de(t,e){var n=e[pd];n===void 0&&(n=e[pd]=new Set);var i=t+"__bubble";n.has(i)||(pT(e,t,2,!1),n.add(i))}function Bf(t,e,n){var i=0;e&&(i|=4),pT(n,t,i,e)}var yu="_reactListening"+Math.random().toString(36).slice(2);function Ep(t){if(!t[yu]){t[yu]=!0,u1.forEach(function(n){n!=="selectionchange"&&(sx.has(n)||Bf(n,!1,t),Bf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yu]||(e[yu]=!0,Bf("selectionchange",!1,e))}}function pT(t,e,n,i){switch(RT(e)){case 2:var r=Ox;break;case 8:r=Mx;break;default:r=xp}n=r.bind(null,e,n,t),r=void 0,!_d||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Ff(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;o!==null;){if(a=Xs(o),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue e}o=o.parentNode}}i=i.return}y1(function(){var h=s,c=Fm(n),d=[];e:{var f=O1.get(t);if(f!==void 0){var p=ch,E=t;switch(t){case"keypress":if(Mu(n)===0)break e;case"keydown":case"keyup":p=Jw;break;case"focusin":E="focus",p=vf;break;case"focusout":E="blur",p=vf;break;case"beforeblur":case"afterblur":p=vf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=j0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Bw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=nS;break;case C1:case I1:case N1:p=Hw;break;case D1:p=rS;break;case"scroll":case"scrollend":p=zw;break;case"wheel":p=aS;break;case"copy":case"cut":case"paste":p=$w;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=P0;break;case"toggle":case"beforetoggle":p=lS}var O=(e&4)!==0,V=!O&&(t==="scroll"||t==="scrollend"),b=O?f!==null?f+"Capture":null:f;O=[];for(var x=h,C;x!==null;){var M=x;if(C=M.stateNode,M=M.tag,M!==5&&M!==26&&M!==27||C===null||b===null||(M=$o(x,b),M!=null&&O.push(Jo(x,M,C))),V)break;x=x.return}0<O.length&&(f=new p(f,E,null,n,c),d.push({event:f,listeners:O}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==vd&&(E=n.relatedTarget||n.fromElement)&&(Xs(E)||E[Pa]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(E=n.relatedTarget||n.toElement,p=h,E=E?Xs(E):null,E!==null&&(V=ml(E),O=E.tag,E!==V||O!==5&&O!==27&&O!==6)&&(E=null)):(p=null,E=h),p!==E)){if(O=j0,M="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(O=P0,M="onPointerLeave",b="onPointerEnter",x="pointer"),V=p==null?f:vo(p),C=E==null?f:vo(E),f=new O(M,x+"leave",p,n,c),f.target=V,f.relatedTarget=C,M=null,Xs(c)===h&&(O=new O(b,x+"enter",E,n,c),O.target=C,O.relatedTarget=V,M=O),V=M,p&&E)t:{for(O=p,b=E,x=0,C=O;C;C=Us(C))x++;for(C=0,M=b;M;M=Us(M))C++;for(;0<x-C;)O=Us(O),x--;for(;0<C-x;)b=Us(b),C--;for(;x--;){if(O===b||b!==null&&O===b.alternate)break t;O=Us(O),b=Us(b)}O=null}else O=null;p!==null&&Ny(d,f,p,O,!1),E!==null&&V!==null&&Ny(d,V,E,O,!0)}}e:{if(f=h?vo(h):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var j=F0;else if(B0(f))if(A1)j=vS;else{j=gS;var k=pS}else p=f.nodeName,!p||p.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?h&&Bm(h.elementType)&&(j=F0):j=yS;if(j&&(j=j(t,h))){E1(d,j,n,c);break e}k&&k(t,f,h),t==="focusout"&&h&&f.type==="number"&&h.memoizedProps.value!=null&&yd(f,"number",f.value)}switch(k=h?vo(h):window,t){case"focusin":(B0(k)||k.contentEditable==="true")&&(Js=k,bd=h,Ro=null);break;case"focusout":Ro=bd=Js=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,Q0(d,n,c);break;case"selectionchange":if(bS)break;case"keydown":case"keyup":Q0(d,n,c)}var S;if(Gm)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ws?b1(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(_1&&n.locale!=="ko"&&(Ws||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ws&&(S=v1()):(cr=c,qm="value"in cr?cr.value:cr.textContent,Ws=!0)),k=wc(h,y),0<k.length&&(y=new U0(y,t,null,n,c),d.push({event:y,listeners:k}),S?y.data=S:(S=T1(n),S!==null&&(y.data=S)))),(S=cS?hS(t,n):fS(t,n))&&(y=wc(h,"onBeforeInput"),0<y.length&&(k=new U0("onBeforeInput","beforeinput",null,n,c),d.push({event:k,listeners:y}),k.data=S)),nx(d,t,h,n,c)}mT(d,e)})}function Jo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=$o(t,n),r!=null&&i.unshift(Jo(t,r,s)),r=$o(t,e),r!=null&&i.push(Jo(t,r,s))),t.tag===3)return i;t=t.return}return[]}function Us(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ny(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var o=n,u=o.alternate,h=o.stateNode;if(o=o.tag,u!==null&&u===i)break;o!==5&&o!==26&&o!==27||h===null||(u=h,r?(h=$o(n,s),h!=null&&a.unshift(Jo(n,h,u))):r||(h=$o(n,s),h!=null&&a.push(Jo(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var ax=/\r\n?/g,ox=/\u0000|\uFFFD/g;function Dy(t){return(typeof t=="string"?t:""+t).replace(ax,`
`).replace(ox,"")}function gT(t,e){return e=Dy(e),Dy(t)===e}function Eh(){}function Ie(t,e,n,i,r,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Ta(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Ta(t,""+i);break;case"className":cu(t,"class",i);break;case"tabIndex":cu(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":cu(t,n,i);break;case"style":g1(t,i,s);break;case"data":if(e!=="object"){cu(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Du(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&Ie(t,e,"name",r.name,r,null),Ie(t,e,"formEncType",r.formEncType,r,null),Ie(t,e,"formMethod",r.formMethod,r,null),Ie(t,e,"formTarget",r.formTarget,r,null)):(Ie(t,e,"encType",r.encType,r,null),Ie(t,e,"method",r.method,r,null),Ie(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Du(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Eh);break;case"onScroll":i!=null&&de("scroll",t);break;case"onScrollEnd":i!=null&&de("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(X(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(X(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Du(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":de("beforetoggle",t),de("toggle",t),Nu(t,"popover",i);break;case"xlinkActuate":bi(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":bi(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":bi(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":bi(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":bi(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":bi(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":bi(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":bi(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":bi(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Nu(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Uw.get(n)||n,Nu(t,n,i))}}function $d(t,e,n,i,r,s){switch(n){case"style":g1(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(X(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(X(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Ta(t,i):(typeof i=="number"||typeof i=="bigint")&&Ta(t,""+i);break;case"onScroll":i!=null&&de("scroll",t);break;case"onScrollEnd":i!=null&&de("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Eh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!c1.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),s=t[sn]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):Nu(t,n,i)}}}function Dt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":de("error",t),de("load",t);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(X(137,e));default:Ie(t,e,s,a,n,null)}}r&&Ie(t,e,"srcSet",n.srcSet,n,null),i&&Ie(t,e,"src",n.src,n,null);return;case"input":de("invalid",t);var o=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var c=n[i];if(c!=null)switch(i){case"name":r=c;break;case"type":a=c;break;case"checked":u=c;break;case"defaultChecked":h=c;break;case"value":s=c;break;case"defaultValue":o=c;break;case"children":case"dangerouslySetInnerHTML":if(c!=null)throw Error(X(137,e));break;default:Ie(t,e,i,c,n,null)}}d1(t,s,o,u,h,a,r,!1),sc(t);return;case"select":de("invalid",t),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":s=o;break;case"defaultValue":a=o;break;case"multiple":i=o;default:Ie(t,e,r,o,n,null)}e=s,n=a,t.multiple=!!i,e!=null?la(t,!!i,e,!1):n!=null&&la(t,!!i,n,!0);return;case"textarea":de("invalid",t),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":i=o;break;case"defaultValue":r=o;break;case"children":s=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(X(91));break;default:Ie(t,e,a,o,n,null)}p1(t,i,r,s),sc(t);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ie(t,e,u,i,n,null)}return;case"dialog":de("beforetoggle",t),de("toggle",t),de("cancel",t),de("close",t);break;case"iframe":case"object":de("load",t);break;case"video":case"audio":for(i=0;i<Wo.length;i++)de(Wo[i],t);break;case"image":de("error",t),de("load",t);break;case"details":de("toggle",t);break;case"embed":case"source":case"link":de("error",t),de("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(X(137,e));default:Ie(t,e,h,i,n,null)}return;default:if(Bm(e)){for(c in n)n.hasOwnProperty(c)&&(i=n[c],i!==void 0&&$d(t,e,c,i,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(i=n[o],i!=null&&Ie(t,e,o,i,n,null))}function lx(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,o=null,u=null,h=null,c=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&d!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":u=d;default:i.hasOwnProperty(p)||Ie(t,e,p,null,i,d)}}for(var f in i){var p=i[f];if(d=n[f],i.hasOwnProperty(f)&&(p!=null||d!=null))switch(f){case"type":s=p;break;case"name":r=p;break;case"checked":h=p;break;case"defaultChecked":c=p;break;case"value":a=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(X(137,e));break;default:p!==d&&Ie(t,e,f,p,i,d)}}gd(t,a,o,u,h,c,s,r);return;case"select":p=a=o=f=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":p=u;default:i.hasOwnProperty(s)||Ie(t,e,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":f=s;break;case"defaultValue":o=s;break;case"multiple":a=s;default:s!==u&&Ie(t,e,r,s,i,u)}e=o,n=a,i=p,f!=null?la(t,!!n,f,!1):!!i!=!!n&&(e!=null?la(t,!!n,e,!0):la(t,!!n,n?[]:"",!1));return;case"textarea":p=f=null;for(o in n)if(r=n[o],n.hasOwnProperty(o)&&r!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Ie(t,e,o,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":f=r;break;case"defaultValue":p=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(X(91));break;default:r!==s&&Ie(t,e,a,r,i,s)}m1(t,f,p);return;case"option":for(var E in n)if(f=n[E],n.hasOwnProperty(E)&&f!=null&&!i.hasOwnProperty(E))switch(E){case"selected":t.selected=!1;break;default:Ie(t,e,E,null,i,f)}for(u in i)if(f=i[u],p=n[u],i.hasOwnProperty(u)&&f!==p&&(f!=null||p!=null))switch(u){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ie(t,e,u,f,i,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)f=n[O],n.hasOwnProperty(O)&&f!=null&&!i.hasOwnProperty(O)&&Ie(t,e,O,null,i,f);for(h in i)if(f=i[h],p=n[h],i.hasOwnProperty(h)&&f!==p&&(f!=null||p!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(X(137,e));break;default:Ie(t,e,h,f,i,p)}return;default:if(Bm(e)){for(var V in n)f=n[V],n.hasOwnProperty(V)&&f!==void 0&&!i.hasOwnProperty(V)&&$d(t,e,V,void 0,i,f);for(c in i)f=i[c],p=n[c],!i.hasOwnProperty(c)||f===p||f===void 0&&p===void 0||$d(t,e,c,f,i,p);return}}for(var b in n)f=n[b],n.hasOwnProperty(b)&&f!=null&&!i.hasOwnProperty(b)&&Ie(t,e,b,null,i,f);for(d in i)f=i[d],p=n[d],!i.hasOwnProperty(d)||f===p||f==null&&p==null||Ie(t,e,d,f,i,p)}var Qd=null,Yd=null;function Sc(t){return t.nodeType===9?t:t.ownerDocument}function Oy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yT(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Kd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qf=null;function ux(){var t=window.event;return t&&t.type==="popstate"?t===qf?!1:(qf=t,!0):(qf=null,!1)}var vT=typeof setTimeout=="function"?setTimeout:void 0,cx=typeof clearTimeout=="function"?clearTimeout:void 0,My=typeof Promise=="function"?Promise:void 0,hx=typeof queueMicrotask=="function"?queueMicrotask:typeof My<"u"?function(t){return My.resolve(null).then(t).catch(fx)}:vT;function fx(t){setTimeout(function(){throw t})}function zr(t){return t==="head"}function ky(t,e){var n=e,i=0,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<i&&8>i){n=i;var a=t.ownerDocument;if(n&1&&Po(a.documentElement),n&2&&Po(a.body),n&4)for(n=a.head,Po(n),a=n.firstChild;a;){var o=a.nextSibling,u=a.nodeName;a[vl]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=o}}if(r===0){t.removeChild(s),rl(e);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);rl(e)}function Xd(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Xd(n),Lm(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function dx(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[vl])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=$n(t.nextSibling),t===null)break}return null}function mx(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=$n(t.nextSibling),t===null))return null;return t}function Zd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function px(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function $n(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var Wd=null;function Vy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function _T(t,e,n){switch(e=Sc(n),t){case"html":if(t=e.documentElement,!t)throw Error(X(452));return t;case"head":if(t=e.head,!t)throw Error(X(453));return t;case"body":if(t=e.body,!t)throw Error(X(454));return t;default:throw Error(X(451))}}function Po(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Lm(t)}var Un=new Map,jy=new Set;function xc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Hi=Ae.d;Ae.d={f:gx,r:yx,D:vx,C:_x,L:bx,m:Tx,X:Ax,S:Ex,M:wx};function gx(){var t=Hi.f(),e=_h();return t||e}function yx(t){var e=za(t);e!==null&&e.tag===5&&e.type==="form"?fb(e):Hi.r(t)}var Fa=typeof document>"u"?null:document;function bT(t,e,n){var i=Fa;if(i&&typeof e=="string"&&e){var r=Nn(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),jy.has(r)||(jy.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),Dt(e,"link",t),At(e),i.head.appendChild(e)))}}function vx(t){Hi.D(t),bT("dns-prefetch",t,null)}function _x(t,e){Hi.C(t,e),bT("preconnect",t,e)}function bx(t,e,n){Hi.L(t,e,n);var i=Fa;if(i&&t&&e){var r='link[rel="preload"][as="'+Nn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Nn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Nn(n.imageSizes)+'"]')):r+='[href="'+Nn(t)+'"]';var s=r;switch(e){case"style":s=Ia(t);break;case"script":s=qa(t)}Un.has(s)||(t=Fe({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Un.set(s,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(Cl(s))||e==="script"&&i.querySelector(Il(s))||(e=i.createElement("link"),Dt(e,"link",t),At(e),i.head.appendChild(e)))}}function Tx(t,e){Hi.m(t,e);var n=Fa;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+Nn(i)+'"][href="'+Nn(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=qa(t)}if(!Un.has(s)&&(t=Fe({rel:"modulepreload",href:t},e),Un.set(s,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Il(s)))return}i=n.createElement("link"),Dt(i,"link",t),At(i),n.head.appendChild(i)}}}function Ex(t,e,n){Hi.S(t,e,n);var i=Fa;if(i&&t){var r=oa(i).hoistableStyles,s=Ia(t);e=e||"default";var a=r.get(s);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(Cl(s)))o.loading=5;else{t=Fe({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Un.get(s))&&Ap(t,n);var u=a=i.createElement("link");At(u),Dt(u,"link",t),u._p=new Promise(function(h,c){u.onload=h,u.onerror=c}),u.addEventListener("load",function(){o.loading|=1}),u.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Lu(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(s,a)}}}function Ax(t,e){Hi.X(t,e);var n=Fa;if(n&&t){var i=oa(n).hoistableScripts,r=qa(t),s=i.get(r);s||(s=n.querySelector(Il(r)),s||(t=Fe({src:t,async:!0},e),(e=Un.get(r))&&wp(t,e),s=n.createElement("script"),At(s),Dt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function wx(t,e){Hi.M(t,e);var n=Fa;if(n&&t){var i=oa(n).hoistableScripts,r=qa(t),s=i.get(r);s||(s=n.querySelector(Il(r)),s||(t=Fe({src:t,async:!0,type:"module"},e),(e=Un.get(r))&&wp(t,e),s=n.createElement("script"),At(s),Dt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function Uy(t,e,n,i){var r=(r=mr.current)?xc(r):null;if(!r)throw Error(X(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Ia(n.href),n=oa(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Ia(n.href);var s=oa(r).hoistableStyles,a=s.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=r.querySelector(Cl(t)))&&!s._p&&(a.instance=s,a.state.loading=5),Un.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Un.set(t,n),s||Sx(r,t,n,a.state))),e&&i===null)throw Error(X(528,""));return a}if(e&&i!==null)throw Error(X(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=qa(n),n=oa(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(X(444,t))}}function Ia(t){return'href="'+Nn(t)+'"'}function Cl(t){return'link[rel="stylesheet"]['+t+"]"}function TT(t){return Fe({},t,{"data-precedence":t.precedence,precedence:null})}function Sx(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Dt(e,"link",n),At(e),t.head.appendChild(e))}function qa(t){return'[src="'+Nn(t)+'"]'}function Il(t){return"script[async]"+t}function Py(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+Nn(n.href)+'"]');if(i)return e.instance=i,At(i),i;var r=Fe({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),At(i),Dt(i,"style",r),Lu(i,n.precedence,t),e.instance=i;case"stylesheet":r=Ia(n.href);var s=t.querySelector(Cl(r));if(s)return e.state.loading|=4,e.instance=s,At(s),s;i=TT(n),(r=Un.get(r))&&Ap(i,r),s=(t.ownerDocument||t).createElement("link"),At(s);var a=s;return a._p=new Promise(function(o,u){a.onload=o,a.onerror=u}),Dt(s,"link",i),e.state.loading|=4,Lu(s,n.precedence,t),e.instance=s;case"script":return s=qa(n.src),(r=t.querySelector(Il(s)))?(e.instance=r,At(r),r):(i=n,(r=Un.get(s))&&(i=Fe({},n),wp(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),At(r),Dt(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(X(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Lu(i,n.precedence,t));return e.instance}function Lu(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===e)s=o;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Ap(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function wp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Bu=null;function zy(t,e,n){if(Bu===null){var i=new Map,r=Bu=new Map;r.set(n,i)}else r=Bu,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[vl]||s[Lt]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var o=i.get(a);o?o.push(s):i.set(a,[s])}}return i}function Ly(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function xx(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function ET(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var el=null;function Rx(){}function Cx(t,e,n){if(el===null)throw Error(X(475));var i=el;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var r=Ia(n.href),s=t.querySelector(Cl(r));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(i.count++,i=Rc.bind(i),t.then(i,i)),e.state.loading|=4,e.instance=s,At(s);return}s=t.ownerDocument||t,n=TT(n),(r=Un.get(r))&&Ap(n,r),s=s.createElement("link"),At(s);var a=s;a._p=new Promise(function(o,u){a.onload=o,a.onerror=u}),Dt(s,"link",n),e.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(i.count++,e=Rc.bind(i),t.addEventListener("load",e),t.addEventListener("error",e))}}function Ix(){if(el===null)throw Error(X(475));var t=el;return t.stylesheets&&t.count===0&&Jd(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&Jd(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function Rc(){if(this.count--,this.count===0){if(this.stylesheets)Jd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Cc=null;function Jd(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Cc=new Map,e.forEach(Nx,t),Cc=null,Rc.call(t))}function Nx(t,e){if(!(e.state.loading&4)){var n=Cc.get(t);if(n)var i=n.get(null);else{n=new Map,Cc.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=e.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=Rc.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var tl={$$typeof:Si,Provider:null,Consumer:null,_currentValue:rs,_currentValue2:rs,_threadCount:0};function Dx(t,e,n,i,r,s,a,o){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hf(0),this.hiddenUpdates=hf(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function AT(t,e,n,i,r,s,a,o,u,h,c,d){return t=new Dx(t,e,n,a,o,u,h,d),e=1,s===!0&&(e|=24),s=mn(3,null,null,e),t.current=s,s.stateNode=t,e=Wm(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},ep(s),t}function wT(t){return t?(t=na,t):na}function ST(t,e,n,i,r,s){r=wT(r),i.context===null?i.context=r:i.pendingContext=r,i=pr(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=gr(t,i,e),n!==null&&(bn(n,t,e),No(n,t,e))}function By(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Sp(t,e){By(t,e),(t=t.alternate)&&By(t,e)}function xT(t){if(t.tag===13){var e=La(t,67108864);e!==null&&bn(e,t,67108864),Sp(t,67108864)}}var Ic=!0;function Ox(t,e,n,i){var r=se.T;se.T=null;var s=Ae.p;try{Ae.p=2,xp(t,e,n,i)}finally{Ae.p=s,se.T=r}}function Mx(t,e,n,i){var r=se.T;se.T=null;var s=Ae.p;try{Ae.p=8,xp(t,e,n,i)}finally{Ae.p=s,se.T=r}}function xp(t,e,n,i){if(Ic){var r=em(i);if(r===null)Ff(t,e,i,Nc,n),Fy(t,i);else if(Vx(r,t,e,n,i))i.stopPropagation();else if(Fy(t,i),e&4&&-1<kx.indexOf(t)){for(;r!==null;){var s=za(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=Xr(s.pendingLanes);if(a!==0){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var u=1<<31-vn(a);o.entanglements[1]|=u,a&=~u}gi(s),!(Ce&6)&&(bc=si()+500,Rl(0))}}break;case 13:o=La(s,2),o!==null&&bn(o,s,2),_h(),Sp(s,2)}if(s=em(i),s===null&&Ff(t,e,i,Nc,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Ff(t,e,i,null,n)}}function em(t){return t=Fm(t),Rp(t)}var Nc=null;function Rp(t){if(Nc=null,t=Xs(t),t!==null){var e=ml(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=Z_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Nc=t,null}function RT(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_w()){case t1:return 2;case n1:return 8;case rc:case bw:return 32;case i1:return 268435456;default:return 32}default:return 32}}var tm=!1,_r=null,br=null,Tr=null,nl=new Map,il=new Map,sr=[],kx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fy(t,e){switch(t){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":nl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":il.delete(e.pointerId)}}function po(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=za(e),e!==null&&xT(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Vx(t,e,n,i,r){switch(e){case"focusin":return _r=po(_r,t,e,n,i,r),!0;case"dragenter":return br=po(br,t,e,n,i,r),!0;case"mouseover":return Tr=po(Tr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return nl.set(s,po(nl.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,il.set(s,po(il.get(s)||null,t,e,n,i,r)),!0}return!1}function CT(t){var e=Xs(t.target);if(e!==null){var n=ml(e);if(n!==null){if(e=n.tag,e===13){if(e=Z_(n),e!==null){t.blockedOn=e,Cw(t.priority,function(){if(n.tag===13){var i=_n();i=Pm(i);var r=La(n,i);r!==null&&bn(r,n,i),Sp(n,i)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=em(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);vd=i,n.target.dispatchEvent(i),vd=null}else return e=za(n),e!==null&&xT(e),t.blockedOn=n,!1;e.shift()}return!0}function qy(t,e,n){Fu(t)&&n.delete(e)}function jx(){tm=!1,_r!==null&&Fu(_r)&&(_r=null),br!==null&&Fu(br)&&(br=null),Tr!==null&&Fu(Tr)&&(Tr=null),nl.forEach(qy),il.forEach(qy)}function vu(t,e){t.blockedOn===e&&(t.blockedOn=null,tm||(tm=!0,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,jx)))}var _u=null;function Hy(t){_u!==t&&(_u=t,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,function(){_u===t&&(_u=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(Rp(i||n)===null)continue;break}var s=za(n);s!==null&&(t.splice(e,3),e-=3,kd(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function rl(t){function e(u){return vu(u,t)}_r!==null&&vu(_r,t),br!==null&&vu(br,t),Tr!==null&&vu(Tr,t),nl.forEach(e),il.forEach(e);for(var n=0;n<sr.length;n++){var i=sr[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<sr.length&&(n=sr[0],n.blockedOn===null);)CT(n),n.blockedOn===null&&sr.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[sn]||null;if(typeof s=="function")a||Hy(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[sn]||null)o=a.formAction;else if(Rp(r)!==null)continue}else o=a.action;typeof o=="function"?n[i+1]=o:(n.splice(i,3),i-=3),Hy(n)}}}function Cp(t){this._internalRoot=t}Ah.prototype.render=Cp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));var n=e.current,i=_n();ST(n,i,t,e,null,null)};Ah.prototype.unmount=Cp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ST(t.current,2,null,t,null,null),_h(),e[Pa]=null}};function Ah(t){this._internalRoot=t}Ah.prototype.unstable_scheduleHydration=function(t){if(t){var e=l1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<sr.length&&e!==0&&e<sr[n].priority;n++);sr.splice(n,0,t),n===0&&CT(t)}};var Gy=K_.version;if(Gy!=="19.1.0")throw Error(X(527,Gy,"19.1.0"));Ae.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=fw(e),t=t!==null?W_(t):null,t=t===null?null:t.stateNode,t};var Ux={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bu.isDisabled&&bu.supportsFiber)try{pl=bu.inject(Ux),yn=bu}catch{}}oh.createRoot=function(t,e){if(!X_(t))throw Error(X(299));var n=!1,i="",r=Ab,s=wb,a=Sb,o=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(o=e.unstable_transitionCallbacks)),e=AT(t,1,!1,null,null,n,i,r,s,a,o,null),t[Pa]=e.current,Ep(t),new Cp(e)};oh.hydrateRoot=function(t,e,n){if(!X_(t))throw Error(X(299));var i=!1,r="",s=Ab,a=wb,o=Sb,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),e=AT(t,1,!0,e,n??null,i,r,s,a,o,u,h),e.context=wT(null),n=e.current,i=_n(),i=Pm(i),r=pr(i),r.callback=null,gr(n,r,i),n=i,e.current.lanes=n,yl(e,n),gi(e),t[Pa]=e.current,Ep(t),new Ah(e)};oh.version="19.1.0";function IT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(IT)}catch(t){console.error(t)}}IT(),q_.exports=oh;var Px=q_.exports;const zx=M_(Px),Lx=()=>{};var $y={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Bx=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],o=t[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},DT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,o=a?t[r+1]:0,u=r+2<t.length,h=u?t[r+2]:0,c=s>>2,d=(s&3)<<4|o>>4;let f=(o&15)<<2|h>>6,p=h&63;u||(p=64,a||(f=64)),i.push(n[c],n[d],n[f],n[p])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(NT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Bx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||o==null||h==null||d==null)throw new Fx;const f=s<<2|o>>4;if(i.push(f),h!==64){const p=o<<4&240|h>>2;if(i.push(p),d!==64){const E=h<<6&192|d;i.push(E)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Fx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qx=function(t){const e=NT(t);return DT.encodeByteArray(e,!0)},Dc=function(t){return qx(t).replace(/\./g,"")},OT=function(t){try{return DT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=()=>Hx().__FIREBASE_DEFAULTS__,$x=()=>{if(typeof process>"u"||typeof $y>"u")return;const t=$y.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Qx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&OT(t[1]);return e&&JSON.parse(e)},wh=()=>{try{return Lx()||Gx()||$x()||Qx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},MT=t=>{var e,n;return(n=(e=wh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ip=t=>{const e=MT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},kT=()=>{var t;return(t=wh())===null||t===void 0?void 0:t.config},VT=t=>{var e;return(e=wh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sh(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Dc(JSON.stringify(n)),Dc(JSON.stringify(a)),""].join(".")}const zo={};function Kx(){const t={prod:[],emulator:[]};for(const e of Object.keys(zo))zo[e]?t.emulator.push(e):t.prod.push(e);return t}function Xx(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Qy=!1;function xh(t,e){if(typeof window>"u"||typeof document>"u"||!Lr(window.location.host)||zo[t]===e||zo[t]||Qy)return;zo[t]=e;function n(f){return`__firebase__banner__${f}`}const i="__firebase__banner",s=Kx().prod.length>0;function a(){const f=document.getElementById(i);f&&f.remove()}function o(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function u(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function h(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Qy=!0,a()},f}function c(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=Xx(i),p=n("text"),E=document.getElementById(p)||document.createElement("span"),O=n("learnmore"),V=document.getElementById(O)||document.createElement("a"),b=n("preprendIcon"),x=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const C=f.element;o(C),c(V,O);const M=h();u(x,b),C.append(x,E,V,M),document.body.appendChild(C)}s?(E.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function Wx(){var t;const e=(t=wh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Jx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nR(){const t=Ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iR(){return!Wx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rR(){try{return typeof indexedDB=="object"}catch{return!1}}function sR(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="FirebaseError";class Xn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=aR,Object.setPrototypeOf(this,Xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nl.prototype.create)}}class Nl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?oR(s,i):"Error",o=`${this.serviceName}: ${a} (${r}).`;return new Xn(r,o,i)}}function oR(t,e){return t.replace(lR,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const lR=/\{\$([^}]+)}/g;function uR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vs(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(Yy(s)&&Yy(a)){if(!vs(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Yy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function cR(t,e){const n=new hR(t,e);return n.subscribe.bind(n)}class hR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");fR(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Hf),r.error===void 0&&(r.error=Hf),r.complete===void 0&&(r.complete=Hf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Hf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t){return t&&t._delegate?t._delegate:t}class zi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Yx;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pR(e))try{this.getOrInitializeService({instanceIdentifier:Jr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jr){return this.instances.has(e)}getOptions(e=Jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);i===o&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:mR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Jr){return this.component?this.component.multipleInstances?e:Jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mR(t){return t===Jr?void 0:t}function pR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const yR={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},vR=pe.INFO,_R={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},bR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=_R[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Np{constructor(e){this.name=e,this._logLevel=vR,this._logHandler=bR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const TR=(t,e)=>e.some(n=>t instanceof n);let Ky,Xy;function ER(){return Ky||(Ky=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AR(){return Xy||(Xy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UT=new WeakMap,nm=new WeakMap,PT=new WeakMap,Gf=new WeakMap,Dp=new WeakMap;function wR(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Er(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&UT.set(n,t)}).catch(()=>{}),Dp.set(e,t),e}function SR(t){if(nm.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});nm.set(t,e)}let im={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||PT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Er(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xR(t){im=t(im)}function RR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call($f(this),e,...n);return PT.set(i,e.sort?e.sort():[e]),Er(i)}:AR().includes(t)?function(...e){return t.apply($f(this),e),Er(UT.get(this))}:function(...e){return Er(t.apply($f(this),e))}}function CR(t){return typeof t=="function"?RR(t):(t instanceof IDBTransaction&&SR(t),TR(t,ER())?new Proxy(t,im):t)}function Er(t){if(t instanceof IDBRequest)return wR(t);if(Gf.has(t))return Gf.get(t);const e=CR(t);return e!==t&&(Gf.set(t,e),Dp.set(e,t)),e}const $f=t=>Dp.get(t);function IR(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),o=Er(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Er(a.result),u.oldVersion,u.newVersion,Er(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),o.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),o}const NR=["get","getKey","getAll","getAllKeys","count"],DR=["put","add","delete","clear"],Qf=new Map;function Zy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qf.get(e))return Qf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=DR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||NR.includes(n)))return;const s=async function(a,...o){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(o.shift())),(await Promise.all([h[n](...o),r&&u.done]))[0]};return Qf.set(e,s),s}xR(t=>({...t,get:(e,n,i)=>Zy(e,n)||t.get(e,n,i),has:(e,n)=>!!Zy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function MR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rm="@firebase/app",Wy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new Np("@firebase/app"),kR="@firebase/app-compat",VR="@firebase/analytics-compat",jR="@firebase/analytics",UR="@firebase/app-check-compat",PR="@firebase/app-check",zR="@firebase/auth",LR="@firebase/auth-compat",BR="@firebase/database",FR="@firebase/data-connect",qR="@firebase/database-compat",HR="@firebase/functions",GR="@firebase/functions-compat",$R="@firebase/installations",QR="@firebase/installations-compat",YR="@firebase/messaging",KR="@firebase/messaging-compat",XR="@firebase/performance",ZR="@firebase/performance-compat",WR="@firebase/remote-config",JR="@firebase/remote-config-compat",eC="@firebase/storage",tC="@firebase/storage-compat",nC="@firebase/firestore",iC="@firebase/ai",rC="@firebase/firestore-compat",sC="firebase",aC="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="[DEFAULT]",oC={[rm]:"fire-core",[kR]:"fire-core-compat",[jR]:"fire-analytics",[VR]:"fire-analytics-compat",[PR]:"fire-app-check",[UR]:"fire-app-check-compat",[zR]:"fire-auth",[LR]:"fire-auth-compat",[BR]:"fire-rtdb",[FR]:"fire-data-connect",[qR]:"fire-rtdb-compat",[HR]:"fire-fn",[GR]:"fire-fn-compat",[$R]:"fire-iid",[QR]:"fire-iid-compat",[YR]:"fire-fcm",[KR]:"fire-fcm-compat",[XR]:"fire-perf",[ZR]:"fire-perf-compat",[WR]:"fire-rc",[JR]:"fire-rc-compat",[eC]:"fire-gcs",[tC]:"fire-gcs-compat",[nC]:"fire-fst",[rC]:"fire-fst-compat",[iC]:"fire-vertex","fire-js":"fire-js",[sC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new Map,lC=new Map,am=new Map;function Jy(t,e){try{t.container.addComponent(e)}catch(n){Li.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ir(t){const e=t.name;if(am.has(e))return Li.debug(`There were multiple attempts to register component ${e}.`),!1;am.set(e,t);for(const n of Oc.values())Jy(n,t);for(const n of lC.values())Jy(n,t);return!0}function Ol(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new Nl("app","Firebase",uC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=aC;function zT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:sm,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw Ar.create("bad-app-name",{appName:String(r)});if(n||(n=kT()),!n)throw Ar.create("no-options");const s=Oc.get(r);if(s){if(vs(n,s.options)&&vs(i,s.config))return s;throw Ar.create("duplicate-app",{appName:r})}const a=new gR(r);for(const u of am.values())a.addComponent(u);const o=new cC(n,i,a);return Oc.set(r,o),o}function Rh(t=sm){const e=Oc.get(t);if(!e&&t===sm&&kT())return zT();if(!e)throw Ar.create("no-app",{appName:t});return e}function kn(t,e,n){var i;let r=(i=oC[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Li.warn(o.join(" "));return}Ir(new zi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="firebase-heartbeat-database",fC=1,sl="firebase-heartbeat-store";let Yf=null;function LT(){return Yf||(Yf=IR(hC,fC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ar.create("idb-open",{originalErrorMessage:t.message})})),Yf}async function dC(t){try{const n=(await LT()).transaction(sl),i=await n.objectStore(sl).get(BT(t));return await n.done,i}catch(e){if(e instanceof Xn)Li.warn(e.message);else{const n=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Li.warn(n.message)}}}async function ev(t,e){try{const i=(await LT()).transaction(sl,"readwrite");await i.objectStore(sl).put(e,BT(t)),await i.done}catch(n){if(n instanceof Xn)Li.warn(n.message);else{const i=Ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Li.warn(i.message)}}}function BT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=1024,pC=30;class gC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vC(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>pC){const a=_C(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Li.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tv(),{heartbeatsToSend:i,unsentEntries:r}=yC(this._heartbeatsCache.heartbeats),s=Dc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Li.warn(n),""}}}function tv(){return new Date().toISOString().substring(0,10)}function yC(t,e=mC){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),nv(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),nv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class vC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rR()?sR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return ev(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return ev(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function nv(t){return Dc(JSON.stringify({version:2,heartbeats:t})).length}function _C(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){Ir(new zi("platform-logger",e=>new OR(e),"PRIVATE")),Ir(new zi("heartbeat",e=>new gC(e),"PRIVATE")),kn(rm,Wy,t),kn(rm,Wy,"esm2017"),kn("fire-js","")}bC("");var TC="firebase",EC="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn(TC,EC,"app");function Op(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function FT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AC=FT,qT=new Nl("auth","Firebase",FT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new Np("@firebase/auth");function wC(t,...e){Mc.logLevel<=pe.WARN&&Mc.warn(`Auth (${xs}): ${t}`,...e)}function qu(t,...e){Mc.logLevel<=pe.ERROR&&Mc.error(`Auth (${xs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t,...e){throw kp(t,...e)}function Qn(t,...e){return kp(t,...e)}function Mp(t,e,n){const i=Object.assign(Object.assign({},AC()),{[e]:n});return new Nl("auth","Firebase",i).create(e,{appName:t.name})}function hs(t){return Mp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function SC(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&fi(t,"argument-error"),Mp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kp(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return qT.create(t,...e)}function ae(t,e,...n){if(!t)throw kp(e,...n)}function Ni(t){const e="INTERNAL ASSERTION FAILED: "+t;throw qu(e),new Error(e)}function Bi(t,e){t||Ni(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function xC(){return iv()==="http:"||iv()==="https:"}function iv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xC()||eR()||"connection"in navigator)?navigator.onLine:!0}function CC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n){this.shortDelay=e,this.longDelay=n,Bi(n>e,"Short delay should be less than long delay!"),this.isMobile=Zx()||tR()}get(){return RC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(t,e){Bi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DC=new Ml(3e4,6e4);function jp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ha(t,e,n,i,r={}){return GT(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const o=Dl(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},s);return Jx()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Lr(t.emulatorConfig.host)&&(h.credentials="include"),HT.fetch()(await $T(t,t.config.apiHost,n,o),h)})}async function GT(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},IC),e);try{const r=new MC(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Tu(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[u,h]=o.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tu(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Tu(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Tu(t,"user-disabled",a);const c=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Mp(t,c,h);fi(t,c)}}catch(r){if(r instanceof Xn)throw r;fi(t,"network-request-failed",{message:String(r)})}}async function OC(t,e,n,i,r={}){const s=await Ha(t,e,n,i,r);return"mfaPendingCredential"in s&&fi(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function $T(t,e,n,i){const r=`${e}${n}?${i}`,s=t,a=s.config.emulator?Vp(t.config,r):`${t.config.apiScheme}://${r}`;return NC.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class MC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Qn(this.auth,"network-request-failed")),DC.get())})}}function Tu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Qn(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kC(t,e){return Ha(t,"POST","/v1/accounts:delete",e)}async function kc(t,e){return Ha(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VC(t,e=!1){const n=Xe(t),i=await n.getIdToken(e),r=Up(i);ae(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Lo(Kf(r.auth_time)),issuedAtTime:Lo(Kf(r.iat)),expirationTime:Lo(Kf(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Kf(t){return Number(t)*1e3}function Up(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return qu("JWT malformed, contained fewer than 3 sections"),null;try{const r=OT(n);return r?JSON.parse(r):(qu("Failed to decode base64 JWT payload"),null)}catch(r){return qu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function rv(t){const e=Up(t);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function al(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Xn&&jC(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function jC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lo(this.lastLoginAt),this.creationTime=Lo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await al(t,kc(n,{idToken:i}));ae(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?QT(s.providerUserInfo):[],o=zC(t.providerData,a),u=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=u?h:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new lm(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function PC(t){const e=Xe(t);await Vc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zC(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function QT(t){return t.map(e=>{var{providerId:n}=e,i=Op(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(t,e){const n=await GT(t,{},async()=>{const i=Dl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=await $T(t,r,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:o,body:i};return t.emulatorConfig&&Lr(t.emulatorConfig.host)&&(u.credentials="include"),HT.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function BC(t,e){return Ha(t,"POST","/v2/accounts:revokeToken",jp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ae(e.length!==0,"internal-error");const n=rv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await LC(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new pa;return i&&(ae(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(ae(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(ae(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pa,this.toJSON())}_performRefresh(){return Ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(t,e){ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hn{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Op(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new lm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await al(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return VC(this,e)}reload(){return PC(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Vc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pn(this.auth.app))return Promise.reject(hs(this.auth));const e=await this.getIdToken();return await al(this,kC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,a,o,u,h,c;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(a=n.photoURL)!==null&&a!==void 0?a:void 0,O=(o=n.tenantId)!==null&&o!==void 0?o:void 0,V=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,b=(h=n.createdAt)!==null&&h!==void 0?h:void 0,x=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:C,emailVerified:M,isAnonymous:j,providerData:k,stsTokenManager:S}=n;ae(C&&S,e,"internal-error");const y=pa.fromJSON(this.name,S);ae(typeof C=="string",e,"internal-error"),Wi(d,e.name),Wi(f,e.name),ae(typeof M=="boolean",e,"internal-error"),ae(typeof j=="boolean",e,"internal-error"),Wi(p,e.name),Wi(E,e.name),Wi(O,e.name),Wi(V,e.name),Wi(b,e.name),Wi(x,e.name);const v=new Hn({uid:C,auth:e,email:f,emailVerified:M,displayName:d,isAnonymous:j,photoURL:E,phoneNumber:p,tenantId:O,stsTokenManager:y,createdAt:b,lastLoginAt:x});return k&&Array.isArray(k)&&(v.providerData=k.map(T=>Object.assign({},T))),V&&(v._redirectEventId=V),v}static async _fromIdTokenResponse(e,n,i=!1){const r=new pa;r.updateFromServerResponse(n);const s=new Hn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Vc(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ae(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?QT(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),o=new pa;o.updateFromIdToken(i);const u=new Hn({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new lm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=new Map;function Di(t){Bi(t instanceof Function,"Expected a class definition");let e=sv.get(t);return e?(Bi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}YT.type="NONE";const av=YT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(t,e,n){return`firebase:${t}:${e}:${n}`}class ga{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Hu(this.userKey,r.apiKey,s),this.fullPersistenceKey=Hu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await kc(this.auth,{idToken:e}).catch(()=>{});return n?Hn._fromGetAccountInfoResponse(this.auth,n,e):null}return Hn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ga(Di(av),e,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||Di(av);const a=Hu(i,e.config.apiKey,e.name);let o=null;for(const h of n)try{const c=await h._get(a);if(c){let d;if(typeof c=="string"){const f=await kc(e,{idToken:c}).catch(()=>{});if(!f)break;d=await Hn._fromGetAccountInfoResponse(e,f,c)}else d=Hn._fromJSON(e,c);h!==s&&(o=d),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new ga(s,e,i):(s=u[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new ga(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eE(e))return"Blackberry";if(tE(e))return"Webos";if(XT(e))return"Safari";if((e.includes("chrome/")||ZT(e))&&!e.includes("edge/"))return"Chrome";if(JT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function KT(t=Ft()){return/firefox\//i.test(t)}function XT(t=Ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZT(t=Ft()){return/crios\//i.test(t)}function WT(t=Ft()){return/iemobile/i.test(t)}function JT(t=Ft()){return/android/i.test(t)}function eE(t=Ft()){return/blackberry/i.test(t)}function tE(t=Ft()){return/webos/i.test(t)}function Pp(t=Ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function FC(t=Ft()){var e;return Pp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qC(){return nR()&&document.documentMode===10}function nE(t=Ft()){return Pp(t)||JT(t)||tE(t)||eE(t)||/windows phone/i.test(t)||WT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(t,e=[]){let n;switch(t){case"Browser":n=ov(Ft());break;case"Worker":n=`${ov(Ft())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xs}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,o)=>{try{const u=e(s);a(u)}catch(u){o(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(t,e={}){return Ha(t,"GET","/v2/passwordPolicy",jp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=6;class QC{constructor(e){var n,i,r,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:$C,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,a,o;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),u}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lv(this),this.idTokenSubscription=new lv(this),this.beforeStateQueue=new HC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Di(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await ga.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await kc(this,{idToken:e}),i=await Hn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(pn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===o)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pn(this.app))return Promise.reject(hs(this));const n=e?Xe(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pn(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pn(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GC(this),n=new QC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await BC(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Di(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await ga.create(this,[Di(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&wC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ch(t){return Xe(t)}class lv{constructor(e){this.auth=e,this.observer=null,this.addObserver=cR(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KC(t){zp=t}function XC(t){return zp.loadJS(t)}function ZC(){return zp.gapiScript}function WC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(t,e){const n=Ol(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(vs(s,e??{}))return r;fi(r,"already-initialized")}return n.initialize({options:e})}function eI(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Di);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function tI(t,e,n){const i=Ch(t);ae(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=rE(e),{host:a,port:o}=nI(e),u=o===null?"":`:${o}`,h={url:`${s}//${a}${u}/`},c=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){ae(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ae(vs(h,i.config.emulator)&&vs(c,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=c,i.settings.appVerificationDisabledForTesting=!0,Lr(a)?(Sh(`${s}//${a}${u}`),xh("Auth",!0)):iI()}function rE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nI(t){const e=rE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:uv(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:uv(a)}}}function uv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function iI(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ni("not implemented")}_getIdTokenResponse(e){return Ni("not implemented")}_linkToIdToken(e,n){return Ni("not implemented")}_getReauthenticationResolver(e){return Ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(t,e){return OC(t,"POST","/v1/accounts:signInWithIdp",jp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="http://localhost";class _s extends sE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Op(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new _s(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ya(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ya(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ya(e,n)}buildRequest(){const e={requestUri:rI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Dl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl extends Lp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends kl{constructor(){super("facebook.com")}static credential(e){return _s._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.FACEBOOK_SIGN_IN_METHOD="facebook.com";ar.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends kl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _s._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return wi.credential(n,i)}catch{return null}}}wi.GOOGLE_SIGN_IN_METHOD="google.com";wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends kl{constructor(){super("github.com")}static credential(e){return _s._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.GITHUB_SIGN_IN_METHOD="github.com";or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends kl{constructor(){super("twitter.com")}static credential(e,n){return _s._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return lr.credential(n,i)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Hn._fromIdTokenResponse(e,i,r),a=cv(i);return new Na({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=cv(i);return new Na({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function cv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends Xn{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,jc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new jc(e,n,i,r)}}function aE(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?jc._fromErrorAndOperation(t,s,e,i):s})}async function sI(t,e,n=!1){const i=await al(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Na._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(t,e,n=!1){const{auth:i}=t;if(pn(i.app))return Promise.reject(hs(i));const r="reauthenticate";try{const s=await al(t,aE(i,r,e,t),n);ae(s.idToken,i,"internal-error");const a=Up(s.idToken);ae(a,i,"internal-error");const{sub:o}=a;return ae(t.uid===o,i,"user-mismatch"),Na._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&fi(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oI(t,e,n=!1){if(pn(t.app))return Promise.reject(hs(t));const i="signIn",r=await aE(t,i,e),s=await Na._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}function lI(t,e,n,i){return Xe(t).onIdTokenChanged(e,n,i)}function uI(t,e,n){return Xe(t).beforeAuthStateChanged(e,n)}function cI(t,e,n,i){return Xe(t).onAuthStateChanged(e,n,i)}function hI(t){return Xe(t).signOut()}const Uc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uc,"1"),this.storage.removeItem(Uc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=1e3,dI=10;class lE extends oE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,u)=>{this.notifyListeners(a,u)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);qC()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,dI):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},fI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lE.type="LOCAL";const mI=lE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE extends oE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}uE.type="SESSION";const cE=uE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Ih(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const o=Array.from(a).map(async h=>h(n.origin,s)),u=await pI(o);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ih.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((o,u)=>{const h=Bp("",20);r.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===h)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(f.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(){return window}function yI(t){oi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(){return typeof oi().WorkerGlobalScope<"u"&&typeof oi().importScripts=="function"}async function vI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _I(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function bI(){return hE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="firebaseLocalStorageDb",TI=1,Pc="firebaseLocalStorage",dE="fbase_key";class Vl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nh(t,e){return t.transaction([Pc],e?"readwrite":"readonly").objectStore(Pc)}function EI(){const t=indexedDB.deleteDatabase(fE);return new Vl(t).toPromise()}function um(){const t=indexedDB.open(fE,TI);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Pc,{keyPath:dE})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Pc)?e(i):(i.close(),await EI(),e(await um()))})})}async function hv(t,e,n){const i=Nh(t,!0).put({[dE]:e,value:n});return new Vl(i).toPromise()}async function AI(t,e){const n=Nh(t,!1).get(e),i=await new Vl(n).toPromise();return i===void 0?null:i.value}function fv(t,e){const n=Nh(t,!0).delete(e);return new Vl(n).toPromise()}const wI=800,SI=3;class mE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>SI)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ih._getInstance(bI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await vI(),!this.activeServiceWorker)return;this.sender=new gI(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_I()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await um();return await hv(e,Uc,"1"),await fv(e,Uc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>hv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>AI(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Nh(r,!1).getAll();return new Vl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mE.type="LOCAL";const xI=mE;new Ml(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(t,e){return e?Di(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp extends sE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ya(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ya(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ya(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function RI(t){return oI(t.auth,new Fp(t),t.bypassAuthState)}function CI(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),aI(n,new Fp(t),t.bypassAuthState)}async function II(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),sI(n,new Fp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RI;case"linkViaPopup":case"linkViaRedirect":return II;case"reauthViaPopup":case"reauthViaRedirect":return CI;default:fi(this.auth,"internal-error")}}resolve(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=new Ml(2e3,1e4);async function DI(t,e,n){if(pn(t.app))return Promise.reject(Qn(t,"operation-not-supported-in-this-environment"));const i=Ch(t);SC(t,e,Lp);const r=pE(i,n);return new ts(i,"signInViaPopup",e,r).executeNotNull()}class ts extends gE{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,ts.currentPopupAction&&ts.currentPopupAction.cancel(),ts.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){Bi(this.filter.length===1,"Popup operations only handle one event");const e=Bp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ts.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NI.get())};e()}}ts.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="pendingRedirect",Gu=new Map;class MI extends gE{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Gu.get(this.auth._key());if(!e){try{const i=await kI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Gu.set(this.auth._key(),e)}return this.bypassAuthState||Gu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kI(t,e){const n=UI(e),i=jI(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function VI(t,e){Gu.set(t._key(),e)}function jI(t){return Di(t._redirectPersistence)}function UI(t){return Hu(OI,t.config.apiKey,t.name)}async function PI(t,e,n=!1){if(pn(t.app))return Promise.reject(hs(t));const i=Ch(t),r=pE(i,e),a=await new MI(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=10*60*1e3;class LI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!yE(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Qn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zI&&this.cachedEventUids.clear(),this.cachedEventUids.has(dv(e))}saveEventToCache(e){this.cachedEventUids.add(dv(e)),this.lastProcessedEventTime=Date.now()}}function dv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function BI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(t,e={}){return Ha(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HI=/^https?/;async function GI(t){if(t.config.emulator)return;const{authorizedDomains:e}=await FI(t);for(const n of e)try{if($I(n))return}catch{}fi(t,"unauthorized-domain")}function $I(t){const e=om(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!HI.test(n))return!1;if(qI.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=new Ml(3e4,6e4);function mv(){const t=oi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function YI(t){return new Promise((e,n)=>{var i,r,s;function a(){mv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mv(),n(Qn(t,"network-request-failed"))},timeout:QI.get()})}if(!((r=(i=oi().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=oi().gapi)===null||s===void 0)&&s.load)a();else{const o=WC("iframefcb");return oi()[o]=()=>{gapi.load?a():n(Qn(t,"network-request-failed"))},XC(`${ZC()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw $u=null,e})}let $u=null;function KI(t){return $u=$u||YI(t),$u}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=new Ml(5e3,15e3),ZI="__/auth/iframe",WI="emulator/auth/iframe",JI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tN(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vp(e,WI):`https://${t.config.authDomain}/${ZI}`,i={apiKey:e.apiKey,appName:t.name,v:xs},r=eN.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Dl(i).slice(1)}`}async function nN(t){const e=await KI(t),n=oi().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:tN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JI,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Qn(t,"network-request-failed"),o=oi().setTimeout(()=>{s(a)},XI.get());function u(){oi().clearTimeout(o),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rN=500,sN=600,aN="_blank",oN="http://localhost";class pv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lN(t,e,n,i=rN,r=sN){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const u=Object.assign(Object.assign({},iN),{width:i.toString(),height:r.toString(),top:s,left:a}),h=Ft().toLowerCase();n&&(o=ZT(h)?aN:n),KT(h)&&(e=e||oN,u.scrollbars="yes");const c=Object.entries(u).reduce((f,[p,E])=>`${f}${p}=${E},`,"");if(FC(h)&&o!=="_self")return uN(e||"",o),new pv(null);const d=window.open(e||"",o,c);ae(d,t,"popup-blocked");try{d.focus()}catch{}return new pv(d)}function uN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="__/auth/handler",hN="emulator/auth/handler",fN=encodeURIComponent("fac");async function gv(t,e,n,i,r,s){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:xs,eventId:r};if(e instanceof Lp){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",uR(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries({}))a[c]=d}if(e instanceof kl){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(a.scopes=c.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const c of Object.keys(o))o[c]===void 0&&delete o[c];const u=await t._getAppCheckToken(),h=u?`#${fN}=${encodeURIComponent(u)}`:"";return`${dN(t)}?${Dl(o).slice(1)}${h}`}function dN({config:t}){return t.emulator?Vp(t,hN):`https://${t.authDomain}/${cN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="webStorageSupport";class mN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cE,this._completeRedirectFn=PI,this._overrideRedirectResult=VI}async _openPopup(e,n,i,r){var s;Bi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await gv(e,n,i,om(),r);return lN(e,a,Bp())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await gv(e,n,i,om(),r);return yI(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Bi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await nN(e),i=new LI(e);return n.register("authEvent",r=>(ae(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xf,{type:Xf},r=>{var s;const a=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Xf];a!==void 0&&n(!!a),fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=GI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nE()||XT()||Pp()}}const pN=mN;var yv="@firebase/auth",vv="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vN(t){Ir(new zi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;ae(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iE(t)},h=new YC(i,r,s,u);return eI(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ir(new zi("auth-internal",e=>{const n=Ch(e.getProvider("auth").getImmediate());return(i=>new gN(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kn(yv,vv,yN(t)),kn(yv,vv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=5*60,bN=VT("authIdTokenMaxAge")||_N;let _v=null;const TN=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>bN)return;const r=n==null?void 0:n.token;_v!==r&&(_v=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function EN(t=Rh()){const e=Ol(t,"auth");if(e.isInitialized())return e.getImmediate();const n=JC(t,{popupRedirectResolver:pN,persistence:[xI,mI,cE]}),i=VT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=TN(s.toString());uI(n,a,()=>a(n.currentUser)),lI(n,o=>a(o))}}const r=MT("auth");return r&&tI(n,`http://${r}`),n}function AN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}KC({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Qn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",AN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vN("Browser");var bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wr,vE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,y){function v(){}v.prototype=y.prototype,S.D=y.prototype,S.prototype=new v,S.prototype.constructor=S,S.C=function(T,w,R){for(var A=Array(arguments.length-2),U=2;U<arguments.length;U++)A[U-2]=arguments[U];return y.prototype[w].apply(T,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,y,v){v||(v=0);var T=Array(16);if(typeof y=="string")for(var w=0;16>w;++w)T[w]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(w=0;16>w;++w)T[w]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=S.g[0],v=S.g[1],w=S.g[2];var R=S.g[3],A=y+(R^v&(w^R))+T[0]+3614090360&4294967295;y=v+(A<<7&4294967295|A>>>25),A=R+(w^y&(v^w))+T[1]+3905402710&4294967295,R=y+(A<<12&4294967295|A>>>20),A=w+(v^R&(y^v))+T[2]+606105819&4294967295,w=R+(A<<17&4294967295|A>>>15),A=v+(y^w&(R^y))+T[3]+3250441966&4294967295,v=w+(A<<22&4294967295|A>>>10),A=y+(R^v&(w^R))+T[4]+4118548399&4294967295,y=v+(A<<7&4294967295|A>>>25),A=R+(w^y&(v^w))+T[5]+1200080426&4294967295,R=y+(A<<12&4294967295|A>>>20),A=w+(v^R&(y^v))+T[6]+2821735955&4294967295,w=R+(A<<17&4294967295|A>>>15),A=v+(y^w&(R^y))+T[7]+4249261313&4294967295,v=w+(A<<22&4294967295|A>>>10),A=y+(R^v&(w^R))+T[8]+1770035416&4294967295,y=v+(A<<7&4294967295|A>>>25),A=R+(w^y&(v^w))+T[9]+2336552879&4294967295,R=y+(A<<12&4294967295|A>>>20),A=w+(v^R&(y^v))+T[10]+4294925233&4294967295,w=R+(A<<17&4294967295|A>>>15),A=v+(y^w&(R^y))+T[11]+2304563134&4294967295,v=w+(A<<22&4294967295|A>>>10),A=y+(R^v&(w^R))+T[12]+1804603682&4294967295,y=v+(A<<7&4294967295|A>>>25),A=R+(w^y&(v^w))+T[13]+4254626195&4294967295,R=y+(A<<12&4294967295|A>>>20),A=w+(v^R&(y^v))+T[14]+2792965006&4294967295,w=R+(A<<17&4294967295|A>>>15),A=v+(y^w&(R^y))+T[15]+1236535329&4294967295,v=w+(A<<22&4294967295|A>>>10),A=y+(w^R&(v^w))+T[1]+4129170786&4294967295,y=v+(A<<5&4294967295|A>>>27),A=R+(v^w&(y^v))+T[6]+3225465664&4294967295,R=y+(A<<9&4294967295|A>>>23),A=w+(y^v&(R^y))+T[11]+643717713&4294967295,w=R+(A<<14&4294967295|A>>>18),A=v+(R^y&(w^R))+T[0]+3921069994&4294967295,v=w+(A<<20&4294967295|A>>>12),A=y+(w^R&(v^w))+T[5]+3593408605&4294967295,y=v+(A<<5&4294967295|A>>>27),A=R+(v^w&(y^v))+T[10]+38016083&4294967295,R=y+(A<<9&4294967295|A>>>23),A=w+(y^v&(R^y))+T[15]+3634488961&4294967295,w=R+(A<<14&4294967295|A>>>18),A=v+(R^y&(w^R))+T[4]+3889429448&4294967295,v=w+(A<<20&4294967295|A>>>12),A=y+(w^R&(v^w))+T[9]+568446438&4294967295,y=v+(A<<5&4294967295|A>>>27),A=R+(v^w&(y^v))+T[14]+3275163606&4294967295,R=y+(A<<9&4294967295|A>>>23),A=w+(y^v&(R^y))+T[3]+4107603335&4294967295,w=R+(A<<14&4294967295|A>>>18),A=v+(R^y&(w^R))+T[8]+1163531501&4294967295,v=w+(A<<20&4294967295|A>>>12),A=y+(w^R&(v^w))+T[13]+2850285829&4294967295,y=v+(A<<5&4294967295|A>>>27),A=R+(v^w&(y^v))+T[2]+4243563512&4294967295,R=y+(A<<9&4294967295|A>>>23),A=w+(y^v&(R^y))+T[7]+1735328473&4294967295,w=R+(A<<14&4294967295|A>>>18),A=v+(R^y&(w^R))+T[12]+2368359562&4294967295,v=w+(A<<20&4294967295|A>>>12),A=y+(v^w^R)+T[5]+4294588738&4294967295,y=v+(A<<4&4294967295|A>>>28),A=R+(y^v^w)+T[8]+2272392833&4294967295,R=y+(A<<11&4294967295|A>>>21),A=w+(R^y^v)+T[11]+1839030562&4294967295,w=R+(A<<16&4294967295|A>>>16),A=v+(w^R^y)+T[14]+4259657740&4294967295,v=w+(A<<23&4294967295|A>>>9),A=y+(v^w^R)+T[1]+2763975236&4294967295,y=v+(A<<4&4294967295|A>>>28),A=R+(y^v^w)+T[4]+1272893353&4294967295,R=y+(A<<11&4294967295|A>>>21),A=w+(R^y^v)+T[7]+4139469664&4294967295,w=R+(A<<16&4294967295|A>>>16),A=v+(w^R^y)+T[10]+3200236656&4294967295,v=w+(A<<23&4294967295|A>>>9),A=y+(v^w^R)+T[13]+681279174&4294967295,y=v+(A<<4&4294967295|A>>>28),A=R+(y^v^w)+T[0]+3936430074&4294967295,R=y+(A<<11&4294967295|A>>>21),A=w+(R^y^v)+T[3]+3572445317&4294967295,w=R+(A<<16&4294967295|A>>>16),A=v+(w^R^y)+T[6]+76029189&4294967295,v=w+(A<<23&4294967295|A>>>9),A=y+(v^w^R)+T[9]+3654602809&4294967295,y=v+(A<<4&4294967295|A>>>28),A=R+(y^v^w)+T[12]+3873151461&4294967295,R=y+(A<<11&4294967295|A>>>21),A=w+(R^y^v)+T[15]+530742520&4294967295,w=R+(A<<16&4294967295|A>>>16),A=v+(w^R^y)+T[2]+3299628645&4294967295,v=w+(A<<23&4294967295|A>>>9),A=y+(w^(v|~R))+T[0]+4096336452&4294967295,y=v+(A<<6&4294967295|A>>>26),A=R+(v^(y|~w))+T[7]+1126891415&4294967295,R=y+(A<<10&4294967295|A>>>22),A=w+(y^(R|~v))+T[14]+2878612391&4294967295,w=R+(A<<15&4294967295|A>>>17),A=v+(R^(w|~y))+T[5]+4237533241&4294967295,v=w+(A<<21&4294967295|A>>>11),A=y+(w^(v|~R))+T[12]+1700485571&4294967295,y=v+(A<<6&4294967295|A>>>26),A=R+(v^(y|~w))+T[3]+2399980690&4294967295,R=y+(A<<10&4294967295|A>>>22),A=w+(y^(R|~v))+T[10]+4293915773&4294967295,w=R+(A<<15&4294967295|A>>>17),A=v+(R^(w|~y))+T[1]+2240044497&4294967295,v=w+(A<<21&4294967295|A>>>11),A=y+(w^(v|~R))+T[8]+1873313359&4294967295,y=v+(A<<6&4294967295|A>>>26),A=R+(v^(y|~w))+T[15]+4264355552&4294967295,R=y+(A<<10&4294967295|A>>>22),A=w+(y^(R|~v))+T[6]+2734768916&4294967295,w=R+(A<<15&4294967295|A>>>17),A=v+(R^(w|~y))+T[13]+1309151649&4294967295,v=w+(A<<21&4294967295|A>>>11),A=y+(w^(v|~R))+T[4]+4149444226&4294967295,y=v+(A<<6&4294967295|A>>>26),A=R+(v^(y|~w))+T[11]+3174756917&4294967295,R=y+(A<<10&4294967295|A>>>22),A=w+(y^(R|~v))+T[2]+718787259&4294967295,w=R+(A<<15&4294967295|A>>>17),A=v+(R^(w|~y))+T[9]+3951481745&4294967295,S.g[0]=S.g[0]+y&4294967295,S.g[1]=S.g[1]+(w+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+w&4294967295,S.g[3]=S.g[3]+R&4294967295}i.prototype.u=function(S,y){y===void 0&&(y=S.length);for(var v=y-this.blockSize,T=this.B,w=this.h,R=0;R<y;){if(w==0)for(;R<=v;)r(this,S,R),R+=this.blockSize;if(typeof S=="string"){for(;R<y;)if(T[w++]=S.charCodeAt(R++),w==this.blockSize){r(this,T),w=0;break}}else for(;R<y;)if(T[w++]=S[R++],w==this.blockSize){r(this,T),w=0;break}}this.h=w,this.o+=y},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var y=1;y<S.length-8;++y)S[y]=0;var v=8*this.o;for(y=S.length-8;y<S.length;++y)S[y]=v&255,v/=256;for(this.u(S),S=Array(16),y=v=0;4>y;++y)for(var T=0;32>T;T+=8)S[v++]=this.g[y]>>>T&255;return S};function s(S,y){var v=o;return Object.prototype.hasOwnProperty.call(v,S)?v[S]:v[S]=y(S)}function a(S,y){this.h=y;for(var v=[],T=!0,w=S.length-1;0<=w;w--){var R=S[w]|0;T&&R==y||(v[w]=R,T=!1)}this.g=v}var o={};function u(S){return-128<=S&&128>S?s(S,function(y){return new a([y|0],0>y?-1:0)}):new a([S|0],0>S?-1:0)}function h(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return V(h(-S));for(var y=[],v=1,T=0;S>=v;T++)y[T]=S/v|0,v*=4294967296;return new a(y,0)}function c(S,y){if(S.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(S.charAt(0)=="-")return V(c(S.substring(1),y));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=h(Math.pow(y,8)),T=d,w=0;w<S.length;w+=8){var R=Math.min(8,S.length-w),A=parseInt(S.substring(w,w+R),y);8>R?(R=h(Math.pow(y,R)),T=T.j(R).add(h(A))):(T=T.j(v),T=T.add(h(A)))}return T}var d=u(0),f=u(1),p=u(16777216);t=a.prototype,t.m=function(){if(O(this))return-V(this).m();for(var S=0,y=1,v=0;v<this.g.length;v++){var T=this.i(v);S+=(0<=T?T:4294967296+T)*y,y*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(E(this))return"0";if(O(this))return"-"+V(this).toString(S);for(var y=h(Math.pow(S,6)),v=this,T="";;){var w=M(v,y).g;v=b(v,w.j(y));var R=((0<v.g.length?v.g[0]:v.h)>>>0).toString(S);if(v=w,E(v))return R+T;for(;6>R.length;)R="0"+R;T=R+T}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function E(S){if(S.h!=0)return!1;for(var y=0;y<S.g.length;y++)if(S.g[y]!=0)return!1;return!0}function O(S){return S.h==-1}t.l=function(S){return S=b(this,S),O(S)?-1:E(S)?0:1};function V(S){for(var y=S.g.length,v=[],T=0;T<y;T++)v[T]=~S.g[T];return new a(v,~S.h).add(f)}t.abs=function(){return O(this)?V(this):this},t.add=function(S){for(var y=Math.max(this.g.length,S.g.length),v=[],T=0,w=0;w<=y;w++){var R=T+(this.i(w)&65535)+(S.i(w)&65535),A=(R>>>16)+(this.i(w)>>>16)+(S.i(w)>>>16);T=A>>>16,R&=65535,A&=65535,v[w]=A<<16|R}return new a(v,v[v.length-1]&-2147483648?-1:0)};function b(S,y){return S.add(V(y))}t.j=function(S){if(E(this)||E(S))return d;if(O(this))return O(S)?V(this).j(V(S)):V(V(this).j(S));if(O(S))return V(this.j(V(S)));if(0>this.l(p)&&0>S.l(p))return h(this.m()*S.m());for(var y=this.g.length+S.g.length,v=[],T=0;T<2*y;T++)v[T]=0;for(T=0;T<this.g.length;T++)for(var w=0;w<S.g.length;w++){var R=this.i(T)>>>16,A=this.i(T)&65535,U=S.i(w)>>>16,B=S.i(w)&65535;v[2*T+2*w]+=A*B,x(v,2*T+2*w),v[2*T+2*w+1]+=R*B,x(v,2*T+2*w+1),v[2*T+2*w+1]+=A*U,x(v,2*T+2*w+1),v[2*T+2*w+2]+=R*U,x(v,2*T+2*w+2)}for(T=0;T<y;T++)v[T]=v[2*T+1]<<16|v[2*T];for(T=y;T<2*y;T++)v[T]=0;return new a(v,0)};function x(S,y){for(;(S[y]&65535)!=S[y];)S[y+1]+=S[y]>>>16,S[y]&=65535,y++}function C(S,y){this.g=S,this.h=y}function M(S,y){if(E(y))throw Error("division by zero");if(E(S))return new C(d,d);if(O(S))return y=M(V(S),y),new C(V(y.g),V(y.h));if(O(y))return y=M(S,V(y)),new C(V(y.g),y.h);if(30<S.g.length){if(O(S)||O(y))throw Error("slowDivide_ only works with positive integers.");for(var v=f,T=y;0>=T.l(S);)v=j(v),T=j(T);var w=k(v,1),R=k(T,1);for(T=k(T,2),v=k(v,2);!E(T);){var A=R.add(T);0>=A.l(S)&&(w=w.add(v),R=A),T=k(T,1),v=k(v,1)}return y=b(S,w.j(y)),new C(w,y)}for(w=d;0<=S.l(y);){for(v=Math.max(1,Math.floor(S.m()/y.m())),T=Math.ceil(Math.log(v)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),R=h(v),A=R.j(y);O(A)||0<A.l(S);)v-=T,R=h(v),A=R.j(y);E(R)&&(R=f),w=w.add(R),S=b(S,A)}return new C(w,S)}t.A=function(S){return M(this,S).h},t.and=function(S){for(var y=Math.max(this.g.length,S.g.length),v=[],T=0;T<y;T++)v[T]=this.i(T)&S.i(T);return new a(v,this.h&S.h)},t.or=function(S){for(var y=Math.max(this.g.length,S.g.length),v=[],T=0;T<y;T++)v[T]=this.i(T)|S.i(T);return new a(v,this.h|S.h)},t.xor=function(S){for(var y=Math.max(this.g.length,S.g.length),v=[],T=0;T<y;T++)v[T]=this.i(T)^S.i(T);return new a(v,this.h^S.h)};function j(S){for(var y=S.g.length+1,v=[],T=0;T<y;T++)v[T]=S.i(T)<<1|S.i(T-1)>>>31;return new a(v,S.h)}function k(S,y){var v=y>>5;y%=32;for(var T=S.g.length-v,w=[],R=0;R<T;R++)w[R]=0<y?S.i(R+v)>>>y|S.i(R+v+1)<<32-y:S.i(R+v);return new a(w,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,vE=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=c,wr=a}).apply(typeof bv<"u"?bv:typeof self<"u"?self:typeof window<"u"?window:{});var Eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _E,bo,bE,Qu,cm,TE,EE,AE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,m,_){return l==Array.prototype||l==Object.prototype||(l[m]=_.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Eu=="object"&&Eu];for(var m=0;m<l.length;++m){var _=l[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function r(l,m){if(m)e:{var _=i;l=l.split(".");for(var D=0;D<l.length-1;D++){var L=l[D];if(!(L in _))break e;_=_[L]}l=l[l.length-1],D=_[l],m=m(D),m!=D&&m!=null&&e(_,l,{configurable:!0,writable:!0,value:m})}}function s(l,m){l instanceof String&&(l+="");var _=0,D=!1,L={next:function(){if(!D&&_<l.length){var $=_++;return{value:m($,l[$]),done:!1}}return D=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}r("Array.prototype.values",function(l){return l||function(){return s(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function u(l){var m=typeof l;return m=m!="object"?m:l?Array.isArray(l)?"array":m:"null",m=="array"||m=="object"&&typeof l.length=="number"}function h(l){var m=typeof l;return m=="object"&&l!=null||m=="function"}function c(l,m,_){return l.call.apply(l.bind,arguments)}function d(l,m,_){if(!l)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,D),l.apply(m,L)}}return function(){return l.apply(m,arguments)}}function f(l,m,_){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,f.apply(null,arguments)}function p(l,m){var _=Array.prototype.slice.call(arguments,1);return function(){var D=_.slice();return D.push.apply(D,arguments),l.apply(this,D)}}function E(l,m){function _(){}_.prototype=m.prototype,l.aa=m.prototype,l.prototype=new _,l.prototype.constructor=l,l.Qb=function(D,L,$){for(var Z=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)Z[Oe-2]=arguments[Oe];return m.prototype[L].apply(D,Z)}}function O(l){const m=l.length;if(0<m){const _=Array(m);for(let D=0;D<m;D++)_[D]=l[D];return _}return[]}function V(l,m){for(let _=1;_<arguments.length;_++){const D=arguments[_];if(u(D)){const L=l.length||0,$=D.length||0;l.length=L+$;for(let Z=0;Z<$;Z++)l[L+Z]=D[Z]}else l.push(D)}}class b{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function x(l){return/^[\s\xa0]*$/.test(l)}function C(){var l=o.navigator;return l&&(l=l.userAgent)?l:""}function M(l){return M[" "](l),l}M[" "]=function(){};var j=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function k(l,m,_){for(const D in l)m.call(_,l[D],D,l)}function S(l,m){for(const _ in l)m.call(void 0,l[_],_,l)}function y(l){const m={};for(const _ in l)m[_]=l[_];return m}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(l,m){let _,D;for(let L=1;L<arguments.length;L++){D=arguments[L];for(_ in D)l[_]=D[_];for(let $=0;$<v.length;$++)_=v[$],Object.prototype.hasOwnProperty.call(D,_)&&(l[_]=D[_])}}function w(l){var m=1;l=l.split(":");const _=[];for(;0<m&&l.length;)_.push(l.shift()),m--;return l.length&&_.push(l.join(":")),_}function R(l){o.setTimeout(()=>{throw l},0)}function A(){var l=z;let m=null;return l.g&&(m=l.g,l.g=l.g.next,l.g||(l.h=null),m.next=null),m}class U{constructor(){this.h=this.g=null}add(m,_){const D=B.get();D.set(m,_),this.h?this.h.next=D:this.g=D,this.h=D}}var B=new b(()=>new N,l=>l.reset());class N{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let I,q=!1,z=new U,G=()=>{const l=o.Promise.resolve(void 0);I=()=>{l.then(ee)}};var ee=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(_){R(_)}var m=B;m.j(l),100>m.h&&(m.h++,l.next=m.g,m.g=l)}q=!1};function P(){this.s=this.s,this.C=this.C}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(l,m){this.type=l,this.g=this.target=m,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var F=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,m=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const _=()=>{};o.addEventListener("test",_,m),o.removeEventListener("test",_,m)}catch{}return l}();function H(l,m){if(Q.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var _=this.type=l.type,D=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=m,m=l.relatedTarget){if(j){e:{try{M(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else _=="mouseover"?m=l.fromElement:_=="mouseout"&&(m=l.toElement);this.relatedTarget=m,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:te[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&H.aa.h.call(this)}}E(H,Q);var te={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),oe=0;function ye(l,m,_,D,L){this.listener=l,this.proxy=null,this.src=m,this.type=_,this.capture=!!D,this.ha=L,this.key=++oe,this.da=this.fa=!1}function we(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ke(l){this.src=l,this.g={},this.h=0}ke.prototype.add=function(l,m,_,D,L){var $=l.toString();l=this.g[$],l||(l=this.g[$]=[],this.h++);var Z=Pn(l,m,D,L);return-1<Z?(m=l[Z],_||(m.fa=!1)):(m=new ye(m,this.src,$,!!D,L),m.fa=_,l.push(m)),m};function Qe(l,m){var _=m.type;if(_ in l.g){var D=l.g[_],L=Array.prototype.indexOf.call(D,m,void 0),$;($=0<=L)&&Array.prototype.splice.call(D,L,1),$&&(we(m),l.g[_].length==0&&(delete l.g[_],l.h--))}}function Pn(l,m,_,D){for(var L=0;L<l.length;++L){var $=l[L];if(!$.da&&$.listener==m&&$.capture==!!_&&$.ha==D)return L}return-1}var Yt="closure_lm_"+(1e6*Math.random()|0),Ve={};function dt(l,m,_,D,L){if(Array.isArray(m)){for(var $=0;$<m.length;$++)dt(l,m[$],_,D,L);return null}return _=Mt(_),l&&l[be]?l.K(m,_,h(D)?!!D.capture:!1,L):je(l,m,_,!1,D,L)}function je(l,m,_,D,L,$){if(!m)throw Error("Invalid event type");var Z=h(L)?!!L.capture:!!L,Oe=qe(l);if(Oe||(l[Yt]=Oe=new ke(l)),_=Oe.add(m,_,D,Z,$),_.proxy)return _;if(D=De(),_.proxy=D,D.src=l,D.listener=_,l.addEventListener)F||(L=Z),L===void 0&&(L=!1),l.addEventListener(m.toString(),D,L);else if(l.attachEvent)l.attachEvent(Ye(m.toString()),D);else if(l.addListener&&l.removeListener)l.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return _}function De(){function l(_){return m.call(l.src,l.listener,_)}const m=qt;return l}function at(l,m,_,D,L){if(Array.isArray(m))for(var $=0;$<m.length;$++)at(l,m[$],_,D,L);else D=h(D)?!!D.capture:!!D,_=Mt(_),l&&l[be]?(l=l.i,m=String(m).toString(),m in l.g&&($=l.g[m],_=Pn($,_,D,L),-1<_&&(we($[_]),Array.prototype.splice.call($,_,1),$.length==0&&(delete l.g[m],l.h--)))):l&&(l=qe(l))&&(m=l.g[m.toString()],l=-1,m&&(l=Pn(m,_,D,L)),(_=-1<l?m[l]:null)&&mt(_))}function mt(l){if(typeof l!="number"&&l&&!l.da){var m=l.src;if(m&&m[be])Qe(m.i,l);else{var _=l.type,D=l.proxy;m.removeEventListener?m.removeEventListener(_,D,l.capture):m.detachEvent?m.detachEvent(Ye(_),D):m.addListener&&m.removeListener&&m.removeListener(D),(_=qe(m))?(Qe(_,l),_.h==0&&(_.src=null,m[Yt]=null)):we(l)}}}function Ye(l){return l in Ve?Ve[l]:Ve[l]="on"+l}function qt(l,m){if(l.da)l=!0;else{m=new H(m,this);var _=l.listener,D=l.ha||l.src;l.fa&&mt(l),l=_.call(D,m)}return l}function qe(l){return l=l[Yt],l instanceof ke?l:null}var xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mt(l){return typeof l=="function"?l:(l[xe]||(l[xe]=function(m){return l.handleEvent(m)}),l[xe])}function ze(){P.call(this),this.i=new ke(this),this.M=this,this.F=null}E(ze,P),ze.prototype[be]=!0,ze.prototype.removeEventListener=function(l,m,_,D){at(this,l,m,_,D)};function ot(l,m){var _,D=l.F;if(D)for(_=[];D;D=D.F)_.push(D);if(l=l.M,D=m.type||m,typeof m=="string")m=new Q(m,l);else if(m instanceof Q)m.target=m.target||l;else{var L=m;m=new Q(D,l),T(m,L)}if(L=!0,_)for(var $=_.length-1;0<=$;$--){var Z=m.g=_[$];L=tt(Z,D,!0,m)&&L}if(Z=m.g=l,L=tt(Z,D,!0,m)&&L,L=tt(Z,D,!1,m)&&L,_)for($=0;$<_.length;$++)Z=m.g=_[$],L=tt(Z,D,!1,m)&&L}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var l=this.i,m;for(m in l.g){for(var _=l.g[m],D=0;D<_.length;D++)we(_[D]);delete l.g[m],l.h--}}this.F=null},ze.prototype.K=function(l,m,_,D){return this.i.add(String(l),m,!1,_,D)},ze.prototype.L=function(l,m,_,D){return this.i.add(String(l),m,!0,_,D)};function tt(l,m,_,D){if(m=l.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,$=0;$<m.length;++$){var Z=m[$];if(Z&&!Z.da&&Z.capture==_){var Oe=Z.listener,xt=Z.ha||Z.src;Z.fa&&Qe(l.i,Z),L=Oe.call(xt,D)!==!1&&L}}return L&&!D.defaultPrevented}function Zn(l,m,_){if(typeof l=="function")_&&(l=f(l,_));else if(l&&typeof l.handleEvent=="function")l=f(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:o.setTimeout(l,m||0)}function _t(l){l.g=Zn(()=>{l.g=null,l.i&&(l.i=!1,_t(l))},l.l);const m=l.h;l.h=null,l.m.apply(null,m)}class on extends P{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bt(l){P.call(this),this.h=l,this.g={}}E(bt,P);var An=[];function ln(l){k(l.g,function(m,_){this.g.hasOwnProperty(_)&&mt(m)},l),l.g={}}bt.prototype.N=function(){bt.aa.N.call(this),ln(this)},bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zn=o.JSON.stringify,Ka=o.JSON.parse,Kh=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function qr(){}qr.prototype.h=null;function Xa(l){return l.h||(l.h=l.i())}function Gi(){}var Hr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wn(){Q.call(this,"d")}E(wn,Q);function Sn(){Q.call(this,"c")}E(Sn,Q);var Kt={},$i=null;function Gr(){return $i=$i||new ze}Kt.La="serverreachability";function Wn(l){Q.call(this,Kt.La,l)}E(Wn,Q);function un(l){const m=Gr();ot(m,new Wn(m))}Kt.STAT_EVENT="statevent";function kg(l,m){Q.call(this,Kt.STAT_EVENT,l),this.stat=m}E(kg,Q);function Ht(l){const m=Gr();ot(m,new kg(m,l))}Kt.Ma="timingevent";function Vg(l,m){Q.call(this,Kt.Ma,l),this.size=m}E(Vg,Q);function Za(l,m){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},m)}function Wa(){this.g=!0}Wa.prototype.xa=function(){this.g=!1};function _2(l,m,_,D,L,$){l.info(function(){if(l.g)if($)for(var Z="",Oe=$.split("&"),xt=0;xt<Oe.length;xt++){var Te=Oe[xt].split("=");if(1<Te.length){var kt=Te[0];Te=Te[1];var Vt=kt.split("_");Z=2<=Vt.length&&Vt[1]=="type"?Z+(kt+"="+Te+"&"):Z+(kt+"=redacted&")}}else Z=null;else Z=$;return"XMLHTTP REQ ("+D+") [attempt "+L+"]: "+m+`
`+_+`
`+Z})}function b2(l,m,_,D,L,$,Z){l.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+L+"]: "+m+`
`+_+`
`+$+" "+Z})}function Os(l,m,_,D){l.info(function(){return"XMLHTTP TEXT ("+m+"): "+E2(l,_)+(D?" "+D:"")})}function T2(l,m){l.info(function(){return"TIMEOUT: "+m})}Wa.prototype.info=function(){};function E2(l,m){if(!l.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(l=0;l<_.length;l++)if(Array.isArray(_[l])){var D=_[l];if(!(2>D.length)){var L=D[1];if(Array.isArray(L)&&!(1>L.length)){var $=L[0];if($!="noop"&&$!="stop"&&$!="close")for(var Z=1;Z<L.length;Z++)L[Z]=""}}}}return zn(_)}catch{return m}}var $l={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xh;function Ql(){}E(Ql,qr),Ql.prototype.g=function(){return new XMLHttpRequest},Ql.prototype.i=function(){return{}},Xh=new Ql;function Qi(l,m,_,D){this.j=l,this.i=m,this.l=_,this.R=D||1,this.U=new bt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ug}function Ug(){this.i=null,this.g="",this.h=!1}var Pg={},Zh={};function Wh(l,m,_){l.L=1,l.v=Zl(vi(m)),l.m=_,l.P=!0,zg(l,null)}function zg(l,m){l.F=Date.now(),Yl(l),l.A=vi(l.v);var _=l.A,D=l.R;Array.isArray(D)||(D=[String(D)]),Jg(_.i,"t",D),l.C=0,_=l.j.J,l.h=new Ug,l.g=y0(l.j,_?m:null,!l.m),0<l.O&&(l.M=new on(f(l.Y,l,l.g),l.O)),m=l.U,_=l.g,D=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(An[0]=L.toString()),L=An);for(var $=0;$<L.length;$++){var Z=dt(_,L[$],D||m.handleEvent,!1,m.h||m);if(!Z)break;m.g[Z.key]=Z}m=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,m)):(l.u="GET",l.g.ea(l.A,l.u,null,m)),un(),_2(l.i,l.u,l.A,l.l,l.R,l.m)}Qi.prototype.ca=function(l){l=l.target;const m=this.M;m&&_i(l)==3?m.j():this.Y(l)},Qi.prototype.Y=function(l){try{if(l==this.g)e:{const Vt=_i(this.g);var m=this.g.Ba();const Vs=this.g.Z();if(!(3>Vt)&&(Vt!=3||this.g&&(this.h.h||this.g.oa()||a0(this.g)))){this.J||Vt!=4||m==7||(m==8||0>=Vs?un(3):un(2)),Jh(this);var _=this.g.Z();this.X=_;t:if(Lg(this)){var D=a0(this.g);l="";var L=D.length,$=_i(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$r(this),Ja(this);var Z="";break t}this.h.i=new o.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,l+=this.h.i.decode(D[m],{stream:!($&&m==L-1)});D.length=0,this.h.g+=l,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=_==200,b2(this.i,this.u,this.A,this.l,this.R,Vt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,xt=this.g;if((Oe=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Oe)){var Te=Oe;break t}}Te=null}if(_=Te)Os(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ef(this,_);else{this.o=!1,this.s=3,Ht(12),$r(this),Ja(this);break e}}if(this.P){_=!0;let Ln;for(;!this.J&&this.C<Z.length;)if(Ln=A2(this,Z),Ln==Zh){Vt==4&&(this.s=4,Ht(14),_=!1),Os(this.i,this.l,null,"[Incomplete Response]");break}else if(Ln==Pg){this.s=4,Ht(15),Os(this.i,this.l,Z,"[Invalid Chunk]"),_=!1;break}else Os(this.i,this.l,Ln,null),ef(this,Ln);if(Lg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||Z.length!=0||this.h.h||(this.s=1,Ht(16),_=!1),this.o=this.o&&_,!_)Os(this.i,this.l,Z,"[Invalid Chunked Response]"),$r(this),Ja(this);else if(0<Z.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),of(kt),kt.M=!0,Ht(11))}}else Os(this.i,this.l,Z,null),ef(this,Z);Vt==4&&$r(this),this.o&&!this.J&&(Vt==4?d0(this.j,this):(this.o=!1,Yl(this)))}else L2(this.g),_==400&&0<Z.indexOf("Unknown SID")?(this.s=3,Ht(12)):(this.s=0,Ht(13)),$r(this),Ja(this)}}}catch{}finally{}};function Lg(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function A2(l,m){var _=l.C,D=m.indexOf(`
`,_);return D==-1?Zh:(_=Number(m.substring(_,D)),isNaN(_)?Pg:(D+=1,D+_>m.length?Zh:(m=m.slice(D,D+_),l.C=D+_,m)))}Qi.prototype.cancel=function(){this.J=!0,$r(this)};function Yl(l){l.S=Date.now()+l.I,Bg(l,l.I)}function Bg(l,m){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Za(f(l.ba,l),m)}function Jh(l){l.B&&(o.clearTimeout(l.B),l.B=null)}Qi.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(T2(this.i,this.A),this.L!=2&&(un(),Ht(17)),$r(this),this.s=2,Ja(this)):Bg(this,this.S-l)};function Ja(l){l.j.G==0||l.J||d0(l.j,l)}function $r(l){Jh(l);var m=l.M;m&&typeof m.ma=="function"&&m.ma(),l.M=null,ln(l.U),l.g&&(m=l.g,l.g=null,m.abort(),m.ma())}function ef(l,m){try{var _=l.j;if(_.G!=0&&(_.g==l||tf(_.h,l))){if(!l.K&&tf(_.h,l)&&_.G==3){try{var D=_.Da.g.parse(m)}catch{D=null}if(Array.isArray(D)&&D.length==3){var L=D;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<l.F)iu(_),tu(_);else break e;af(_),Ht(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=Za(f(_.Za,_),6e3));if(1>=Hg(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Yr(_,11)}else if((l.K||_.g==l)&&iu(_),!x(m))for(L=_.Da.g.parse(m),m=0;m<L.length;m++){let Te=L[m];if(_.T=Te[0],Te=Te[1],_.G==2)if(Te[0]=="c"){_.K=Te[1],_.ia=Te[2];const kt=Te[3];kt!=null&&(_.la=kt,_.j.info("VER="+_.la));const Vt=Te[4];Vt!=null&&(_.Aa=Vt,_.j.info("SVER="+_.Aa));const Vs=Te[5];Vs!=null&&typeof Vs=="number"&&0<Vs&&(D=1.5*Vs,_.L=D,_.j.info("backChannelRequestTimeoutMs_="+D)),D=_;const Ln=l.g;if(Ln){const su=Ln.g?Ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(su){var $=D.h;$.g||su.indexOf("spdy")==-1&&su.indexOf("quic")==-1&&su.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(nf($,$.h),$.h=null))}if(D.D){const lf=Ln.g?Ln.g.getResponseHeader("X-HTTP-Session-Id"):null;lf&&(D.ya=lf,Le(D.I,D.D,lf))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-l.F,_.j.info("Handshake RTT: "+_.R+"ms")),D=_;var Z=l;if(D.qa=g0(D,D.J?D.ia:null,D.W),Z.K){Gg(D.h,Z);var Oe=Z,xt=D.L;xt&&(Oe.I=xt),Oe.B&&(Jh(Oe),Yl(Oe)),D.g=Z}else h0(D);0<_.i.length&&nu(_)}else Te[0]!="stop"&&Te[0]!="close"||Yr(_,7);else _.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?Yr(_,7):sf(_):Te[0]!="noop"&&_.l&&_.l.ta(Te),_.v=0)}}un(4)}catch{}}var w2=class{constructor(l,m){this.g=l,this.map=m}};function Fg(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Hg(l){return l.h?1:l.g?l.g.size:0}function tf(l,m){return l.h?l.h==m:l.g?l.g.has(m):!1}function nf(l,m){l.g?l.g.add(m):l.h=m}function Gg(l,m){l.h&&l.h==m?l.h=null:l.g&&l.g.has(m)&&l.g.delete(m)}Fg.prototype.cancel=function(){if(this.i=$g(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function $g(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let m=l.i;for(const _ of l.g.values())m=m.concat(_.D);return m}return O(l.i)}function S2(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var m=[],_=l.length,D=0;D<_;D++)m.push(l[D]);return m}m=[],_=0;for(D in l)m[_++]=l[D];return m}function x2(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var m=[];l=l.length;for(var _=0;_<l;_++)m.push(_);return m}m=[],_=0;for(const D in l)m[_++]=D;return m}}}function Qg(l,m){if(l.forEach&&typeof l.forEach=="function")l.forEach(m,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,m,void 0);else for(var _=x2(l),D=S2(l),L=D.length,$=0;$<L;$++)m.call(void 0,D[$],_&&_[$],l)}var Yg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function R2(l,m){if(l){l=l.split("&");for(var _=0;_<l.length;_++){var D=l[_].indexOf("="),L=null;if(0<=D){var $=l[_].substring(0,D);L=l[_].substring(D+1)}else $=l[_];m($,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Qr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Qr){this.h=l.h,Kl(this,l.j),this.o=l.o,this.g=l.g,Xl(this,l.s),this.l=l.l;var m=l.i,_=new no;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Kg(this,_),this.m=l.m}else l&&(m=String(l).match(Yg))?(this.h=!1,Kl(this,m[1]||"",!0),this.o=eo(m[2]||""),this.g=eo(m[3]||"",!0),Xl(this,m[4]),this.l=eo(m[5]||"",!0),Kg(this,m[6]||"",!0),this.m=eo(m[7]||"")):(this.h=!1,this.i=new no(null,this.h))}Qr.prototype.toString=function(){var l=[],m=this.j;m&&l.push(to(m,Xg,!0),":");var _=this.g;return(_||m=="file")&&(l.push("//"),(m=this.o)&&l.push(to(m,Xg,!0),"@"),l.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&l.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push(to(_,_.charAt(0)=="/"?N2:I2,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",to(_,O2)),l.join("")};function vi(l){return new Qr(l)}function Kl(l,m,_){l.j=_?eo(m,!0):m,l.j&&(l.j=l.j.replace(/:$/,""))}function Xl(l,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);l.s=m}else l.s=null}function Kg(l,m,_){m instanceof no?(l.i=m,M2(l.i,l.h)):(_||(m=to(m,D2)),l.i=new no(m,l.h))}function Le(l,m,_){l.i.set(m,_)}function Zl(l){return Le(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function eo(l,m){return l?m?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function to(l,m,_){return typeof l=="string"?(l=encodeURI(l).replace(m,C2),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function C2(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Xg=/[#\/\?@]/g,I2=/[#\?:]/g,N2=/[#\?]/g,D2=/[#\?@]/g,O2=/#/g;function no(l,m){this.h=this.g=null,this.i=l||null,this.j=!!m}function Yi(l){l.g||(l.g=new Map,l.h=0,l.i&&R2(l.i,function(m,_){l.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}t=no.prototype,t.add=function(l,m){Yi(this),this.i=null,l=Ms(this,l);var _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(m),this.h+=1,this};function Zg(l,m){Yi(l),m=Ms(l,m),l.g.has(m)&&(l.i=null,l.h-=l.g.get(m).length,l.g.delete(m))}function Wg(l,m){return Yi(l),m=Ms(l,m),l.g.has(m)}t.forEach=function(l,m){Yi(this),this.g.forEach(function(_,D){_.forEach(function(L){l.call(m,L,D,this)},this)},this)},t.na=function(){Yi(this);const l=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let D=0;D<m.length;D++){const L=l[D];for(let $=0;$<L.length;$++)_.push(m[D])}return _},t.V=function(l){Yi(this);let m=[];if(typeof l=="string")Wg(this,l)&&(m=m.concat(this.g.get(Ms(this,l))));else{l=Array.from(this.g.values());for(let _=0;_<l.length;_++)m=m.concat(l[_])}return m},t.set=function(l,m){return Yi(this),this.i=null,l=Ms(this,l),Wg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[m]),this.h+=1,this},t.get=function(l,m){return l?(l=this.V(l),0<l.length?String(l[0]):m):m};function Jg(l,m,_){Zg(l,m),0<_.length&&(l.i=null,l.g.set(Ms(l,m),O(_)),l.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var D=m[_];const $=encodeURIComponent(String(D)),Z=this.V(D);for(D=0;D<Z.length;D++){var L=$;Z[D]!==""&&(L+="="+encodeURIComponent(String(Z[D]))),l.push(L)}}return this.i=l.join("&")};function Ms(l,m){return m=String(m),l.j&&(m=m.toLowerCase()),m}function M2(l,m){m&&!l.j&&(Yi(l),l.i=null,l.g.forEach(function(_,D){var L=D.toLowerCase();D!=L&&(Zg(this,D),Jg(this,L,_))},l)),l.j=m}function k2(l,m){const _=new Wa;if(o.Image){const D=new Image;D.onload=p(Ki,_,"TestLoadImage: loaded",!0,m,D),D.onerror=p(Ki,_,"TestLoadImage: error",!1,m,D),D.onabort=p(Ki,_,"TestLoadImage: abort",!1,m,D),D.ontimeout=p(Ki,_,"TestLoadImage: timeout",!1,m,D),o.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=l}else m(!1)}function V2(l,m){const _=new Wa,D=new AbortController,L=setTimeout(()=>{D.abort(),Ki(_,"TestPingServer: timeout",!1,m)},1e4);fetch(l,{signal:D.signal}).then($=>{clearTimeout(L),$.ok?Ki(_,"TestPingServer: ok",!0,m):Ki(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Ki(_,"TestPingServer: error",!1,m)})}function Ki(l,m,_,D,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),D(_)}catch{}}function j2(){this.g=new Kh}function U2(l,m,_){const D=_||"";try{Qg(l,function(L,$){let Z=L;h(L)&&(Z=zn(L)),m.push(D+$+"="+encodeURIComponent(Z))})}catch(L){throw m.push(D+"type="+encodeURIComponent("_badmap")),L}}function Wl(l){this.l=l.Ub||null,this.j=l.eb||!1}E(Wl,qr),Wl.prototype.g=function(){return new Jl(this.l,this.j)},Wl.prototype.i=function(l){return function(){return l}}({});function Jl(l,m){ze.call(this),this.D=l,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Jl,ze),t=Jl.prototype,t.open=function(l,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=m,this.readyState=1,ro(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(m.body=l),(this.D||o).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,io(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ro(this)),this.g&&(this.readyState=3,ro(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;e0(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function e0(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var m=l.value?l.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!l.done}))&&(this.response=this.responseText+=m)}l.done?io(this):ro(this),this.readyState==3&&e0(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,io(this))},t.Qa=function(l){this.g&&(this.response=l,io(this))},t.ga=function(){this.g&&io(this)};function io(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ro(l)}t.setRequestHeader=function(l,m){this.u.append(l,m)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=m.next();return l.join(`\r
`)};function ro(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Jl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function t0(l){let m="";return k(l,function(_,D){m+=D,m+=":",m+=_,m+=`\r
`}),m}function rf(l,m,_){e:{for(D in _){var D=!1;break e}D=!0}D||(_=t0(_),typeof l=="string"?_!=null&&encodeURIComponent(String(_)):Le(l,m,_))}function We(l){ze.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(We,ze);var P2=/^https?$/i,z2=["POST","PUT"];t=We.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,m,_,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);m=m?m.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xh.g(),this.v=this.o?Xa(this.o):Xa(Xh),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(m,String(l),!0),this.B=!1}catch($){n0(this,$);return}if(l=_||"",_=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var L in D)_.set(L,D[L]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const $ of D.keys())_.set($,D.get($));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),L=o.FormData&&l instanceof o.FormData,!(0<=Array.prototype.indexOf.call(z2,m,void 0))||D||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,Z]of _)this.g.setRequestHeader($,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{s0(this),this.u=!0,this.g.send(l),this.u=!1}catch($){n0(this,$)}};function n0(l,m){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=m,l.m=5,i0(l),eu(l)}function i0(l){l.A||(l.A=!0,ot(l,"complete"),ot(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ot(this,"complete"),ot(this,"abort"),eu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),eu(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?r0(this):this.bb())},t.bb=function(){r0(this)};function r0(l){if(l.h&&typeof a<"u"&&(!l.v[1]||_i(l)!=4||l.Z()!=2)){if(l.u&&_i(l)==4)Zn(l.Ea,0,l);else if(ot(l,"readystatechange"),_i(l)==4){l.h=!1;try{const Z=l.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var D;if(D=Z===0){var L=String(l.D).match(Yg)[1]||null;!L&&o.self&&o.self.location&&(L=o.self.location.protocol.slice(0,-1)),D=!P2.test(L?L.toLowerCase():"")}_=D}if(_)ot(l,"complete"),ot(l,"success");else{l.m=6;try{var $=2<_i(l)?l.g.statusText:""}catch{$=""}l.l=$+" ["+l.Z()+"]",i0(l)}}finally{eu(l)}}}}function eu(l,m){if(l.g){s0(l);const _=l.g,D=l.v[0]?()=>{}:null;l.g=null,l.v=null,m||ot(l,"ready");try{_.onreadystatechange=D}catch{}}}function s0(l){l.I&&(o.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function _i(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<_i(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var m=this.g.responseText;return l&&m.indexOf(l)==0&&(m=m.substring(l.length)),Ka(m)}};function a0(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function L2(l){const m={};l=(l.g&&2<=_i(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<l.length;D++){if(x(l[D]))continue;var _=w(l[D]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=m[L]||[];m[L]=$,$.push(_)}S(m,function(D){return D.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function so(l,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||m}function o0(l){this.Aa=0,this.i=[],this.j=new Wa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=so("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=so("baseRetryDelayMs",5e3,l),this.cb=so("retryDelaySeedMs",1e4,l),this.Wa=so("forwardChannelMaxRetries",2,l),this.wa=so("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Fg(l&&l.concurrentRequestLimit),this.Da=new j2,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=o0.prototype,t.la=8,t.G=1,t.connect=function(l,m,_,D){Ht(0),this.W=l,this.H=m||{},_&&D!==void 0&&(this.H.OSID=_,this.H.OAID=D),this.F=this.X,this.I=g0(this,null,this.W),nu(this)};function sf(l){if(l0(l),l.G==3){var m=l.U++,_=vi(l.I);if(Le(_,"SID",l.K),Le(_,"RID",m),Le(_,"TYPE","terminate"),ao(l,_),m=new Qi(l,l.j,m),m.L=2,m.v=Zl(vi(_)),_=!1,o.navigator&&o.navigator.sendBeacon)try{_=o.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&o.Image&&(new Image().src=m.v,_=!0),_||(m.g=y0(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Yl(m)}p0(l)}function tu(l){l.g&&(of(l),l.g.cancel(),l.g=null)}function l0(l){tu(l),l.u&&(o.clearTimeout(l.u),l.u=null),iu(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&o.clearTimeout(l.s),l.s=null)}function nu(l){if(!qg(l.h)&&!l.s){l.s=!0;var m=l.Ga;I||G(),q||(I(),q=!0),z.add(m,l),l.B=0}}function B2(l,m){return Hg(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=m.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Za(f(l.Ga,l,m),m0(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Qi(this,this.j,l);let $=this.o;if(this.S&&($?($=y($),T($,this.S)):$=this.S),this.m!==null||this.O||(L.H=$,$=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var D=this.i[_];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(m+=D,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=c0(this,L,m),_=vi(this.I),Le(_,"RID",l),Le(_,"CVER",22),this.D&&Le(_,"X-HTTP-Session-Id",this.D),ao(this,_),$&&(this.O?m="headers="+encodeURIComponent(String(t0($)))+"&"+m:this.m&&rf(_,this.m,$)),nf(this.h,L),this.Ua&&Le(_,"TYPE","init"),this.P?(Le(_,"$req",m),Le(_,"SID","null"),L.T=!0,Wh(L,_,null)):Wh(L,_,m),this.G=2}}else this.G==3&&(l?u0(this,l):this.i.length==0||qg(this.h)||u0(this))};function u0(l,m){var _;m?_=m.l:_=l.U++;const D=vi(l.I);Le(D,"SID",l.K),Le(D,"RID",_),Le(D,"AID",l.T),ao(l,D),l.m&&l.o&&rf(D,l.m,l.o),_=new Qi(l,l.j,_,l.B+1),l.m===null&&(_.H=l.o),m&&(l.i=m.D.concat(l.i)),m=c0(l,_,1e3),_.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),nf(l.h,_),Wh(_,D,m)}function ao(l,m){l.H&&k(l.H,function(_,D){Le(m,D,_)}),l.l&&Qg({},function(_,D){Le(m,D,_)})}function c0(l,m,_){_=Math.min(l.i.length,_);var D=l.l?f(l.l.Na,l.l,l):null;e:{var L=l.i;let $=-1;for(;;){const Z=["count="+_];$==-1?0<_?($=L[0].g,Z.push("ofs="+$)):$=0:Z.push("ofs="+$);let Oe=!0;for(let xt=0;xt<_;xt++){let Te=L[xt].g;const kt=L[xt].map;if(Te-=$,0>Te)$=Math.max(0,L[xt].g-100),Oe=!1;else try{U2(kt,Z,"req"+Te+"_")}catch{D&&D(kt)}}if(Oe){D=Z.join("&");break e}}}return l=l.i.splice(0,_),m.D=l,D}function h0(l){if(!l.g&&!l.u){l.Y=1;var m=l.Fa;I||G(),q||(I(),q=!0),z.add(m,l),l.v=0}}function af(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Za(f(l.Fa,l),m0(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,f0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Za(f(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ht(10),tu(this),f0(this))};function of(l){l.A!=null&&(o.clearTimeout(l.A),l.A=null)}function f0(l){l.g=new Qi(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var m=vi(l.qa);Le(m,"RID","rpc"),Le(m,"SID",l.K),Le(m,"AID",l.T),Le(m,"CI",l.F?"0":"1"),!l.F&&l.ja&&Le(m,"TO",l.ja),Le(m,"TYPE","xmlhttp"),ao(l,m),l.m&&l.o&&rf(m,l.m,l.o),l.L&&(l.g.I=l.L);var _=l.g;l=l.ia,_.L=1,_.v=Zl(vi(m)),_.m=null,_.P=!0,zg(_,l)}t.Za=function(){this.C!=null&&(this.C=null,tu(this),af(this),Ht(19))};function iu(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function d0(l,m){var _=null;if(l.g==m){iu(l),of(l),l.g=null;var D=2}else if(tf(l.h,m))_=m.D,Gg(l.h,m),D=1;else return;if(l.G!=0){if(m.o)if(D==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var L=l.B;D=Gr(),ot(D,new Vg(D,_)),nu(l)}else h0(l);else if(L=m.s,L==3||L==0&&0<m.X||!(D==1&&B2(l,m)||D==2&&af(l)))switch(_&&0<_.length&&(m=l.h,m.i=m.i.concat(_)),L){case 1:Yr(l,5);break;case 4:Yr(l,10);break;case 3:Yr(l,6);break;default:Yr(l,2)}}}function m0(l,m){let _=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(_*=2),_*m}function Yr(l,m){if(l.j.info("Error code "+m),m==2){var _=f(l.fb,l),D=l.Xa;const L=!D;D=new Qr(D||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Kl(D,"https"),Zl(D),L?k2(D.toString(),_):V2(D.toString(),_)}else Ht(2);l.G=0,l.l&&l.l.sa(m),p0(l),l0(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function p0(l){if(l.G=0,l.ka=[],l.l){const m=$g(l.h);(m.length!=0||l.i.length!=0)&&(V(l.ka,m),V(l.ka,l.i),l.h.i.length=0,O(l.i),l.i.length=0),l.l.ra()}}function g0(l,m,_){var D=_ instanceof Qr?vi(_):new Qr(_);if(D.g!="")m&&(D.g=m+"."+D.g),Xl(D,D.s);else{var L=o.location;D=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var $=new Qr(null);D&&Kl($,D),m&&($.g=m),L&&Xl($,L),_&&($.l=_),D=$}return _=l.D,m=l.ya,_&&m&&Le(D,_,m),Le(D,"VER",l.la),ao(l,D),D}function y0(l,m,_){if(m&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=l.Ca&&!l.pa?new We(new Wl({eb:_})):new We(l.pa),m.Ha(l.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function v0(){}t=v0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ru(){}ru.prototype.g=function(l,m){return new cn(l,m)};function cn(l,m){ze.call(this),this.g=new o0(m),this.l=l,this.h=m&&m.messageUrlParams||null,l=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(l?l["X-WebChannel-Content-Type"]=m.messageContentType:l={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(l?l["X-WebChannel-Client-Profile"]=m.va:l={"X-WebChannel-Client-Profile":m.va}),this.g.S=l,(l=m&&m.Sb)&&!x(l)&&(this.g.m=l),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!x(m)&&(this.g.D=m,l=this.h,l!==null&&m in l&&(l=this.h,m in l&&delete l[m])),this.j=new ks(this)}E(cn,ze),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){sf(this.g)},cn.prototype.o=function(l){var m=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.u&&(_={},_.__data__=zn(l),l=_);m.i.push(new w2(m.Ya++,l)),m.G==3&&nu(m)},cn.prototype.N=function(){this.g.l=null,delete this.j,sf(this.g),delete this.g,cn.aa.N.call(this)};function _0(l){wn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var m=l.__sm__;if(m){e:{for(const _ in m){l=_;break e}l=void 0}(this.i=l)&&(l=this.i,m=m!==null&&l in m?m[l]:void 0),this.data=m}else this.data=l}E(_0,wn);function b0(){Sn.call(this),this.status=1}E(b0,Sn);function ks(l){this.g=l}E(ks,v0),ks.prototype.ua=function(){ot(this.g,"a")},ks.prototype.ta=function(l){ot(this.g,new _0(l))},ks.prototype.sa=function(l){ot(this.g,new b0)},ks.prototype.ra=function(){ot(this.g,"b")},ru.prototype.createWebChannel=ru.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,AE=function(){return new ru},EE=function(){return Gr()},TE=Kt,cm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$l.NO_ERROR=0,$l.TIMEOUT=8,$l.HTTP_ERROR=6,Qu=$l,jg.COMPLETE="complete",bE=jg,Gi.EventType=Hr,Hr.OPEN="a",Hr.CLOSE="b",Hr.ERROR="c",Hr.MESSAGE="d",ze.prototype.listen=ze.prototype.K,bo=Gi,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,_E=We}).apply(typeof Eu<"u"?Eu:typeof self<"u"?self:typeof window<"u"?window:{});const Tv="@firebase/firestore",Ev="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pt.UNAUTHENTICATED=new Pt(null),Pt.GOOGLE_CREDENTIALS=new Pt("google-credentials-uid"),Pt.FIRST_PARTY=new Pt("first-party-uid"),Pt.MOCK_USER=new Pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new Np("@firebase/firestore");function Hs(){return bs.logLevel}function J(t,...e){if(bs.logLevel<=pe.DEBUG){const n=e.map(qp);bs.debug(`Firestore (${Ga}): ${t}`,...n)}}function Fi(t,...e){if(bs.logLevel<=pe.ERROR){const n=e.map(qp);bs.error(`Firestore (${Ga}): ${t}`,...n)}}function Nr(t,...e){if(bs.logLevel<=pe.WARN){const n=e.map(qp);bs.warn(`Firestore (${Ga}): ${t}`,...n)}}function qp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,wE(t,i,n)}function wE(t,e,n){let i=`FIRESTORE (${Ga}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Fi(i),new Error(i)}function Se(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||wE(e,r,i)}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Xn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Pt.UNAUTHENTICATED))}shutdown(){}}class SN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class xN{constructor(e){this.t=e,this.currentUser=Pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new ki;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ki,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},o=u=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>o(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?o(u):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ki)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Se(typeof i.accessToken=="string",31837,{l:i}),new SE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new Pt(e)}}class RN{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class CN{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new RN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Av{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Se(this.o===void 0,3512);const i=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,J("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Av(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Av(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=NN(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function he(t,e){return t<e?-1:t>e?1:0}function hm(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return he(i,r);{const s=xE(),a=DN(s.encode(wv(t,n)),s.encode(wv(e,n)));return a!==0?a:he(i,r)}}n+=i>65535?2:1}return he(t.length,e.length)}function wv(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function DN(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return he(t[n],e[n]);return he(t.length,e.length)}function Da(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="__name__";class ei{constructor(e,n,i){n===void 0?n=0:n>e.length&&re(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&re(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ei.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ei?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=ei.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return he(e.length,n.length)}static compareSegments(e,n){const i=ei.isNumericId(e),r=ei.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?ei.extractNumericId(e).compare(ei.extractNumericId(n)):hm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wr.fromString(e.substring(4,e.length-2))}}class Ue extends ei{construct(e,n,i){return new Ue(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new W(Y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const ON=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends ei{construct(e,n,i){return new Nt(e,n,i)}static isValidIdentifier(e){return ON.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sv}static keyField(){return new Nt([Sv])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new W(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const o=e[r];if(o==="\\"){if(r+1===e.length)throw new W(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else o==="`"?(a=!a,r++):o!=="."||a?(i+=o,r++):(s(),r++)}if(s(),a)throw new W(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Ue.fromString(e))}static fromName(e){return new ie(Ue.fromString(e).popFirst(5))}static empty(){return new ie(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Ue(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(t,e,n){if(!n)throw new W(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MN(t,e,n,i){if(e===!0&&i===!0)throw new W(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xv(t){if(!ie.isDocumentKey(t))throw new W(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Rv(t){if(ie.isDocumentKey(t))throw new W(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function CE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Dh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re(12329,{type:typeof t})}function Vn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dh(t);throw new W(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t,e){const n={typeString:t};return e&&(n.value=e),n}function jl(t,e){if(!CE(t))throw new W(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new W(Y.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=-62135596800,Iv=1e6;class Be{static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Iv);return new Be(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Cv)throw new W(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Iv}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Be._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jl(e,Be._jsonSchema))return new Be(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Cv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Be._jsonSchemaVersion="firestore/timestamp/1.0",Be._jsonSchema={type:ht("string",Be._jsonSchemaVersion),seconds:ht("number"),nanoseconds:ht("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new Be(0,0))}static max(){return new le(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=-1;function kN(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=le.fromTimestamp(i===1e9?new Be(n+1,0):new Be(n,i));return new Dr(r,ie.empty(),e)}function VN(t){return new Dr(t.readTime,t.key,ol)}class Dr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Dr(le.min(),ie.empty(),ol)}static max(){return new Dr(le.max(),ie.empty(),ol)}}function jN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==UN)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let r=0,s=0,a=!1;e.forEach(o=>{++r,o.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(r=>r?K.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new K((i,r)=>{const s=e.length,a=new Array(s);let o=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(c=>{a[h]=c,++o,o===s&&i(a)},c=>r(c))}})}static doWhile(e,n){return new K((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function zN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Oh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp=-1;function Mh(t){return t==null}function zc(t){return t===0&&1/t==-1/0}function LN(t){return typeof t=="number"&&Number.isInteger(t)&&!zc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="";function BN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Nv(e)),e=FN(t.get(n),e);return Nv(e)}function FN(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case IE:n+="";break;default:n+=s}}return n}function Nv(t){return t+IE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Br(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function NE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Au(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Au(this.root,e,this.comparator,!1)}getReverseIterator(){return new Au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Au(this.root,e,this.comparator,!0)}}class Au{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??Ct.RED,this.left=r??Ct.EMPTY,this.right=s??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new Ct(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ct.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new Ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ov(this.data.getIterator())}getIteratorFrom(e){return new Ov(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yt(this.comparator);return n.data=e,n}}class Ov{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new gn([])}unionWith(e){let n=new yt(Nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Da(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new DE("Invalid base64 string: "+s):s}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const qN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(Se(!!t,39018),typeof t=="string"){let e=0;const n=qN.exec(t);if(Se(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mr(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="server_timestamp",ME="__type__",kE="__previous_value__",VE="__local_write_time__";function $p(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[ME])===null||n===void 0?void 0:n.stringValue)===OE}function kh(t){const e=t.mapValue.fields[kE];return $p(e)?kh(e):e}function ll(t){const e=Or(t.mapValue.fields[VE].timestampValue);return new Be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,n,i,r,s,a,o,u,h,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=c}}const Lc="(default)";class ul{constructor(e,n){this.projectId=e,this.database=n||Lc}static empty(){return new ul("","")}get isDefaultDatabase(){return this.database===Lc}isEqual(e){return e instanceof ul&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="__type__",GN="__max__",wu={mapValue:{}},UE="__vector__",Bc="value";function kr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$p(t)?4:QN(t)?9007199254740991:$N(t)?10:11:re(28295,{value:t})}function di(t,e){if(t===e)return!0;const n=kr(t);if(n!==kr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ll(t).isEqual(ll(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Or(r.timestampValue),o=Or(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Mr(r.bytesValue).isEqual(Mr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return rt(r.geoPointValue.latitude)===rt(s.geoPointValue.latitude)&&rt(r.geoPointValue.longitude)===rt(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return rt(r.integerValue)===rt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=rt(r.doubleValue),o=rt(s.doubleValue);return a===o?zc(a)===zc(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Da(t.arrayValue.values||[],e.arrayValue.values||[],di);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},o=s.mapValue.fields||{};if(Dv(a)!==Dv(o))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(o[u]===void 0||!di(a[u],o[u])))return!1;return!0}(t,e);default:return re(52216,{left:t})}}function cl(t,e){return(t.values||[]).find(n=>di(n,e))!==void 0}function Oa(t,e){if(t===e)return 0;const n=kr(t),i=kr(e);if(n!==i)return he(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=rt(s.integerValue||s.doubleValue),u=rt(a.integerValue||a.doubleValue);return o<u?-1:o>u?1:o===u?0:isNaN(o)?isNaN(u)?0:-1:1}(t,e);case 3:return Mv(t.timestampValue,e.timestampValue);case 4:return Mv(ll(t),ll(e));case 5:return hm(t.stringValue,e.stringValue);case 6:return function(s,a){const o=Mr(s),u=Mr(a);return o.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),u=a.split("/");for(let h=0;h<o.length&&h<u.length;h++){const c=he(o[h],u[h]);if(c!==0)return c}return he(o.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=he(rt(s.latitude),rt(a.latitude));return o!==0?o:he(rt(s.longitude),rt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return kv(t.arrayValue,e.arrayValue);case 10:return function(s,a){var o,u,h,c;const d=s.fields||{},f=a.fields||{},p=(o=d[Bc])===null||o===void 0?void 0:o.arrayValue,E=(u=f[Bc])===null||u===void 0?void 0:u.arrayValue,O=he(((h=p==null?void 0:p.values)===null||h===void 0?void 0:h.length)||0,((c=E==null?void 0:E.values)===null||c===void 0?void 0:c.length)||0);return O!==0?O:kv(p,E)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===wu.mapValue&&a===wu.mapValue)return 0;if(s===wu.mapValue)return 1;if(a===wu.mapValue)return-1;const o=s.fields||{},u=Object.keys(o),h=a.fields||{},c=Object.keys(h);u.sort(),c.sort();for(let d=0;d<u.length&&d<c.length;++d){const f=hm(u[d],c[d]);if(f!==0)return f;const p=Oa(o[u[d]],h[c[d]]);if(p!==0)return p}return he(u.length,c.length)}(t.mapValue,e.mapValue);default:throw re(23264,{le:n})}}function Mv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=Or(t),i=Or(e),r=he(n.seconds,i.seconds);return r!==0?r:he(n.nanos,i.nanos)}function kv(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Oa(n[r],i[r]);if(s)return s}return he(n.length,i.length)}function Ma(t){return fm(t)}function fm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Or(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Mr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=fm(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${fm(n.fields[a])}`;return r+"}"}(t.mapValue):re(61005,{value:t})}function Yu(t){switch(kr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kh(t);return e?16+Yu(e):16;case 5:return 2*t.stringValue.length;case 6:return Mr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Yu(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Br(i.fields,(s,a)=>{r+=s.length+Yu(a)}),r}(t.mapValue);default:throw re(13486,{value:t})}}function Vv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dm(t){return!!t&&"integerValue"in t}function Qp(t){return!!t&&"arrayValue"in t}function jv(t){return!!t&&"nullValue"in t}function Uv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ku(t){return!!t&&"mapValue"in t}function $N(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[jE])===null||n===void 0?void 0:n.stringValue)===UE}function Bo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Br(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Bo(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function QN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===GN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Ku(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bo(n)}setAll(e){let n=Nt.emptyPath(),i={},r=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=o.popLast()}a?i[o.lastSegment()]=Bo(a):r.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Ku(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return di(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Ku(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Br(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new tn(Bo(this.value))}}function PE(t){const e=[];return Br(t.fields,(n,i)=>{const r=new Nt([n]);if(Ku(i)){const s=PE(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n,i,r,s,a,o){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new zt(e,0,le.min(),le.min(),le.min(),tn.empty(),0)}static newFoundDocument(e,n,i,r){return new zt(e,1,n,le.min(),i,r,0)}static newNoDocument(e,n){return new zt(e,2,n,le.min(),le.min(),tn.empty(),0)}static newUnknownDocument(e,n){return new zt(e,3,n,le.min(),le.min(),tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){this.position=e,this.inclusive=n}}function Pv(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=ie.comparator(ie.fromName(a.referenceValue),n.key):i=Oa(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function zv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!di(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n="asc"){this.field=e,this.dir=n}}function YN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{}class ct extends zE{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new XN(e,n,i):n==="array-contains"?new JN(e,i):n==="in"?new e4(e,i):n==="not-in"?new t4(e,i):n==="array-contains-any"?new n4(e,i):new ct(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new ZN(e,i):new WN(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Oa(n,this.value)):n!==null&&kr(this.value)===kr(n)&&this.matchesComparison(Oa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends zE{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Yn(e,n)}matches(e){return LE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function LE(t){return t.op==="and"}function BE(t){return KN(t)&&LE(t)}function KN(t){for(const e of t.filters)if(e instanceof Yn)return!1;return!0}function mm(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+Ma(t.value);if(BE(t))return t.filters.map(e=>mm(e)).join(",");{const e=t.filters.map(n=>mm(n)).join(",");return`${t.op}(${e})`}}function FE(t,e){return t instanceof ct?function(i,r){return r instanceof ct&&i.op===r.op&&i.field.isEqual(r.field)&&di(i.value,r.value)}(t,e):t instanceof Yn?function(i,r){return r instanceof Yn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,o)=>s&&FE(a,r.filters[o]),!0):!1}(t,e):void re(19439)}function qE(t){return t instanceof ct?function(n){return`${n.field.canonicalString()} ${n.op} ${Ma(n.value)}`}(t):t instanceof Yn?function(n){return n.op.toString()+" {"+n.getFilters().map(qE).join(" ,")+"}"}(t):"Filter"}class XN extends ct{constructor(e,n,i){super(e,n,i),this.key=ie.fromName(i.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class ZN extends ct{constructor(e,n){super(e,"in",n),this.keys=HE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class WN extends ct{constructor(e,n){super(e,"not-in",n),this.keys=HE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function HE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ie.fromName(i.referenceValue))}class JN extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qp(n)&&cl(n.arrayValue,this.value)}}class e4 extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&cl(this.value.arrayValue,n)}}class t4 extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!cl(this.value.arrayValue,n)}}class n4 extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>cl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,n=null,i=[],r=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=o,this.Pe=null}}function Lv(t,e=null,n=[],i=[],r=null,s=null,a=null){return new i4(t,e,n,i,r,s,a)}function Yp(t){const e=ue(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>mm(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Mh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ma(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ma(i)).join(",")),e.Pe=n}return e.Pe}function Kp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zv(t.startAt,e.startAt)&&zv(t.endAt,e.endAt)}function pm(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n=null,i=[],r=[],s=null,a="F",o=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function r4(t,e,n,i,r,s,a,o){return new Ul(t,e,n,i,r,s,a,o)}function Vh(t){return new Ul(t)}function Bv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GE(t){return t.collectionGroup!==null}function Fo(t){const e=ue(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new yt(Nt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(o=o.add(h.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new qc(s,i))}),n.has(Nt.keyField().canonicalString())||e.Te.push(new qc(Nt.keyField(),i))}return e.Te}function li(t){const e=ue(t);return e.Ie||(e.Ie=s4(e,Fo(t))),e.Ie}function s4(t,e){if(t.limitType==="F")return Lv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new qc(r.field,s)});const n=t.endAt?new Fc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Fc(t.startAt.position,t.startAt.inclusive):null;return Lv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function gm(t,e){const n=t.filters.concat([e]);return new Ul(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ym(t,e,n){return new Ul(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jh(t,e){return Kp(li(t),li(e))&&t.limitType===e.limitType}function $E(t){return`${Yp(li(t))}|lt:${t.limitType}`}function Gs(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>qE(r)).join(", ")}]`),Mh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ma(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ma(r)).join(",")),`Target(${i})`}(li(t))}; limitType=${t.limitType})`}function Uh(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):ie.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Fo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,o,u){const h=Pv(a,o,u);return a.inclusive?h<=0:h<0}(i.startAt,Fo(i),r)||i.endAt&&!function(a,o,u){const h=Pv(a,o,u);return a.inclusive?h>=0:h>0}(i.endAt,Fo(i),r))}(t,e)}function a4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function QE(t){return(e,n)=>{let i=!1;for(const r of Fo(t)){const s=o4(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function o4(t,e,n){const i=t.field.isKeyField()?ie.comparator(e.key,n.key):function(s,a,o){const u=a.data.field(s),h=o.data.field(s);return u!==null&&h!==null?Oa(u,h):re(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Br(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return NE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=new Ze(ie.comparator);function qi(){return l4}const YE=new Ze(ie.comparator);function To(...t){let e=YE;for(const n of t)e=e.insert(n.key,n);return e}function KE(t){let e=YE;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ns(){return qo()}function XE(){return qo()}function qo(){return new Rs(t=>t.toString(),(t,e)=>t.isEqual(e))}const u4=new Ze(ie.comparator),c4=new yt(ie.comparator);function ge(...t){let e=c4;for(const n of t)e=e.add(n);return e}const h4=new yt(he);function f4(){return h4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function ZE(t){return{integerValue:""+t}}function d4(t,e){return LN(e)?ZE(e):Xp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(){this._=void 0}}function m4(t,e,n){return t instanceof Hc?function(r,s){const a={fields:{[ME]:{stringValue:OE},[VE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&$p(s)&&(s=kh(s)),s&&(a.fields[kE]=s),{mapValue:a}}(n,e):t instanceof hl?JE(t,e):t instanceof fl?eA(t,e):function(r,s){const a=WE(r,s),o=Fv(a)+Fv(r.Ee);return dm(a)&&dm(r.Ee)?ZE(o):Xp(r.serializer,o)}(t,e)}function p4(t,e,n){return t instanceof hl?JE(t,e):t instanceof fl?eA(t,e):n}function WE(t,e){return t instanceof Gc?function(i){return dm(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Hc extends Ph{}class hl extends Ph{constructor(e){super(),this.elements=e}}function JE(t,e){const n=tA(e);for(const i of t.elements)n.some(r=>di(r,i))||n.push(i);return{arrayValue:{values:n}}}class fl extends Ph{constructor(e){super(),this.elements=e}}function eA(t,e){let n=tA(e);for(const i of t.elements)n=n.filter(r=>!di(r,i));return{arrayValue:{values:n}}}class Gc extends Ph{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Fv(t){return rt(t.integerValue||t.doubleValue)}function tA(t){return Qp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function g4(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof hl&&r instanceof hl||i instanceof fl&&r instanceof fl?Da(i.elements,r.elements,di):i instanceof Gc&&r instanceof Gc?di(i.Ee,r.Ee):i instanceof Hc&&r instanceof Hc}(t.transform,e.transform)}class y4{constructor(e,n){this.version=e,this.transformResults=n}}class Tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zh{}function nA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lh(t.key,Tn.none()):new Pl(t.key,t.data,Tn.none());{const n=t.data,i=tn.empty();let r=new yt(Nt.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new Fr(t.key,i,new gn(r.toArray()),Tn.none())}}function v4(t,e,n){t instanceof Pl?function(r,s,a){const o=r.value.clone(),u=Hv(r.fieldTransforms,s,a.transformResults);o.setAll(u),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Fr?function(r,s,a){if(!Xu(r.precondition,s))return void s.convertToUnknownDocument(a.version);const o=Hv(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(iA(r)),u.setAll(o),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ho(t,e,n,i){return t instanceof Pl?function(s,a,o,u){if(!Xu(s.precondition,a))return o;const h=s.value.clone(),c=Gv(s.fieldTransforms,u,a);return h.setAll(c),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,i):t instanceof Fr?function(s,a,o,u){if(!Xu(s.precondition,a))return o;const h=Gv(s.fieldTransforms,u,a),c=a.data;return c.setAll(iA(s)),c.setAll(h),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,a,o){return Xu(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function _4(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=WE(i.transform,r||null);s!=null&&(n===null&&(n=tn.empty()),n.set(i.field,s))}return n||null}function qv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Da(i,r,(s,a)=>g4(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pl extends zh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Fr extends zh{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function iA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Hv(t,e,n){const i=new Map;Se(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,o=e.data.field(s.field);i.set(s.field,p4(a,o,n[r]))}return i}function Gv(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,m4(s,a,e))}return i}class Lh extends zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class b4 extends zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&v4(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ho(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ho(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=XE();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(r.key)?null:o;const u=nA(a,o);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(le.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Da(this.mutations,e.mutations,(n,i)=>qv(n,i))&&Da(this.baseMutations,e.baseMutations,(n,i)=>qv(n,i))}}class Zp{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Se(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=function(){return u4}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new Zp(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,ve;function w4(t){switch(t){case Y.OK:return re(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return re(15467,{code:t})}}function rA(t){if(t===void 0)return Fi("GRPC error has no .code"),Y.UNKNOWN;switch(t){case lt.OK:return Y.OK;case lt.CANCELLED:return Y.CANCELLED;case lt.UNKNOWN:return Y.UNKNOWN;case lt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case lt.INTERNAL:return Y.INTERNAL;case lt.UNAVAILABLE:return Y.UNAVAILABLE;case lt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case lt.NOT_FOUND:return Y.NOT_FOUND;case lt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case lt.ABORTED:return Y.ABORTED;case lt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case lt.DATA_LOSS:return Y.DATA_LOSS;default:return re(39323,{code:t})}}(ve=lt||(lt={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=new wr([4294967295,4294967295],0);function $v(t){const e=xE().encode(t),n=new vE;return n.update(e),new Uint8Array(n.digest())}function Qv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new wr([n,i],0),new wr([r,s],0)]}class Wp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Eo(`Invalid padding: ${n}`);if(i<0)throw new Eo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Eo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Eo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=wr.fromNumber(this.fe)}pe(e,n,i){let r=e.add(n.multiply(wr.fromNumber(i)));return r.compare(S4)===1&&(r=new wr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=$v(e),[i,r]=Qv(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(i,r,s);if(!this.ye(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Wp(s,r,n);return i.forEach(o=>a.insert(o)),a}insert(e){if(this.fe===0)return;const n=$v(e),[i,r]=Qv(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(i,r,s);this.we(a)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Eo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,zl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Bh(le.min(),r,new Ze(he),qi(),ge())}}class zl{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new zl(i,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n,i,r){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=r}}class sA{constructor(e,n){this.targetId=e,this.De=n}}class aA{constructor(e,n,i=Ot.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Yv{constructor(){this.ve=0,this.Ce=Kv(),this.Fe=Ot.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ge(),n=ge(),i=ge();return this.Ce.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:re(38017,{changeType:s})}}),new zl(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=Kv()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Se(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class x4{constructor(e){this.We=e,this.Ge=new Map,this.ze=qi(),this.je=Su(),this.Je=Su(),this.He=new Ze(he)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((i,r)=>{this.nt(r)&&n(r)})}it(e){const n=e.targetId,i=e.De.count,r=this.st(n);if(r){const s=r.target;if(pm(s))if(i===0){const a=new ie(s.path);this.Xe(n,a,zt.newNoDocument(a,le.min()))}else Se(i===1,20013,{expectedCount:i});else{const a=this.ot(n);if(a!==i){const o=this._t(e),u=o?this.ut(o,e,a):1;if(u!==0){this.rt(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,o;try{a=Mr(i).toUint8Array()}catch(u){if(u instanceof DE)return Nr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{o=new Wp(a,r,s)}catch(u){return Nr(u instanceof Eo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return o.fe===0?null:o}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.We.lt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Xe(n,s,null),r++)}),r}Pt(e){const n=new Map;this.Ge.forEach((s,a)=>{const o=this.st(a);if(o){if(s.current&&pm(o.target)){const u=new ie(o.target.path);this.Tt(u).has(a)||this.It(a,u)||this.Xe(a,u,zt.newNoDocument(u,e))}s.Ne&&(n.set(a,s.Le()),s.ke())}});let i=ge();this.Je.forEach((s,a)=>{let o=!0;a.forEachWhile(u=>{const h=this.st(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(i=i.add(s))}),this.ze.forEach((s,a)=>a.setReadTime(e));const r=new Bh(e,n,this.He,this.ze,i);return this.ze=qi(),this.je=Su(),this.Je=Su(),this.He=new Ze(he),r}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const r=this.tt(e);this.It(e,n)?r.qe(n,1):r.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Yv,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new yt(he),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new yt(he),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Yv),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Su(){return new Ze(ie.comparator)}function Kv(){return new Ze(ie.comparator)}const R4={asc:"ASCENDING",desc:"DESCENDING"},C4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},I4={and:"AND",or:"OR"};class N4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vm(t,e){return t.useProto3Json||Mh(e)?e:{value:e}}function $c(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function D4(t,e){return $c(t,e.toTimestamp())}function ui(t){return Se(!!t,49232),le.fromTimestamp(function(n){const i=Or(n);return new Be(i.seconds,i.nanos)}(t))}function Jp(t,e){return _m(t,e).canonicalString()}function _m(t,e){const n=function(r){return new Ue(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function lA(t){const e=Ue.fromString(t);return Se(dA(e),10190,{key:e.toString()}),e}function bm(t,e){return Jp(t.databaseId,e.path)}function Zf(t,e){const n=lA(e);if(n.get(1)!==t.databaseId.projectId)throw new W(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(cA(n))}function uA(t,e){return Jp(t.databaseId,e)}function O4(t){const e=lA(t);return e.length===4?Ue.emptyPath():cA(e)}function Tm(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cA(t){return Se(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Xv(t,e,n){return{name:bm(t,e),fields:n.value.mapValue.fields}}function M4(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:re(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(h,c){return h.useProto3Json?(Se(c===void 0||typeof c=="string",58123),Ot.fromBase64String(c||"")):(Se(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),Ot.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(h){const c=h.code===void 0?Y.UNKNOWN:rA(h.code);return new W(c,h.message||"")}(a);n=new aA(i,r,s,o||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Zf(t,i.document.name),s=ui(i.document.updateTime),a=i.document.createTime?ui(i.document.createTime):le.min(),o=new tn({mapValue:{fields:i.document.fields}}),u=zt.newFoundDocument(r,s,a,o),h=i.targetIds||[],c=i.removedTargetIds||[];n=new Zu(h,c,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Zf(t,i.document),s=i.readTime?ui(i.readTime):le.min(),a=zt.newNoDocument(r,s),o=i.removedTargetIds||[];n=new Zu([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Zf(t,i.document),s=i.removedTargetIds||[];n=new Zu([],s,r,null)}else{if(!("filter"in e))return re(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new A4(r,s),o=i.targetId;n=new sA(o,a)}}return n}function k4(t,e){let n;if(e instanceof Pl)n={update:Xv(t,e.key,e.value)};else if(e instanceof Lh)n={delete:bm(t,e.key)};else if(e instanceof Fr)n={update:Xv(t,e.key,e.data),updateMask:q4(e.fieldMask)};else{if(!(e instanceof b4))return re(16599,{Rt:e.type});n={verify:bm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const o=a.transform;if(o instanceof Hc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof hl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof fl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Gc)return{fieldPath:a.field.canonicalString(),increment:o.Ee};throw re(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:D4(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:re(27497)}(t,e.precondition)),n}function V4(t,e){return t&&t.length>0?(Se(e!==void 0,14353),t.map(n=>function(r,s){let a=r.updateTime?ui(r.updateTime):ui(s);return a.isEqual(le.min())&&(a=ui(s)),new y4(a,r.transformResults||[])}(n,e))):[]}function j4(t,e){return{documents:[uA(t,e.path)]}}function U4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=uA(t,r);const s=function(h){if(h.length!==0)return fA(Yn.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(c=>function(f){return{field:$s(f.field),direction:L4(f.dir)}}(c))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=vm(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{Vt:n,parent:r}}function P4(t){let e=O4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Se(i===1,65062);const c=n.from[0];c.allDescendants?r=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(d){const f=hA(d);return f instanceof Yn&&BE(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(d){return d.map(f=>function(E){return new qc(Qs(E.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(d){let f;return f=typeof d=="object"?d.value:d,Mh(f)?null:f}(n.limit));let u=null;n.startAt&&(u=function(d){const f=!!d.before,p=d.values||[];return new Fc(p,f)}(n.startAt));let h=null;return n.endAt&&(h=function(d){const f=!d.before,p=d.values||[];return new Fc(p,f)}(n.endAt)),r4(e,r,a,s,o,"F",u,h)}function z4(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function hA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Qs(n.unaryFilter.field);return ct.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Qs(n.unaryFilter.field);return ct.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qs(n.unaryFilter.field);return ct.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Qs(n.unaryFilter.field);return ct.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}}(t):t.fieldFilter!==void 0?function(n){return ct.create(Qs(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yn.create(n.compositeFilter.filters.map(i=>hA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return re(1026)}}(n.compositeFilter.op))}(t):re(30097,{filter:t})}function L4(t){return R4[t]}function B4(t){return C4[t]}function F4(t){return I4[t]}function $s(t){return{fieldPath:t.canonicalString()}}function Qs(t){return Nt.fromServerFormat(t.fieldPath)}function fA(t){return t instanceof ct?function(n){if(n.op==="=="){if(Uv(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NAN"}};if(jv(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Uv(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NAN"}};if(jv(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$s(n.field),op:B4(n.op),value:n.value}}}(t):t instanceof Yn?function(n){const i=n.getFilters().map(r=>fA(r));return i.length===1?i[0]:{compositeFilter:{op:F4(n.op),filters:i}}}(t):re(54877,{filter:t})}function q4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function dA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n,i,r,s=le.min(),a=le.min(),o=Ot.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=u}withSequenceNumber(e){return new dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.gt=e}}function G4(t){const e=P4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ym(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(){this.Dn=new Q4}addToCollectionParentIndex(e,n){return this.Dn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(Dr.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(Dr.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class Q4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new yt(Ue.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new yt(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mA=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(mA,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ka(0)}static ur(){return new ka(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="LruGarbageCollector",Y4=1048576;function Jv([t,e],[n,i]){const r=he(t,n);return r===0?he(e,i):r}class K4{constructor(e){this.Tr=e,this.buffer=new yt(Jv),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Jv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class X4{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){J(Wv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qa(n)?J(Wv,"Ignoring IndexedDB error during garbage collection: ",n):await $a(n)}await this.Rr(3e5)})}}class Z4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return K.resolve(Oh.ue);const i=new K4(n);return this.Vr.forEachTarget(e,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Zv)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zv):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,r,s,a,o,u,h;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,a=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,o=Date.now(),this.removeTargets(e,i,n))).next(d=>(s=d,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(h=Date.now(),Hs()<=pe.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-c}ms
	Determined least recently used ${r} in `+(o-a)+`ms
	Removed ${s} targets in `+(u-o)+`ms
	Removed ${d} documents in `+(h-u)+`ms
Total Duration: ${h-c}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function W4(t,e){return new Z4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(){this.changes=new Rs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Ho(i.mutation,r,gn.empty(),Be.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ge()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ge()){const r=ns();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=To();return s.forEach((o,u)=>{a=a.insert(o,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=ns();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ge()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,i,r){let s=qi();const a=qo(),o=function(){return qo()}();return n.forEach((u,h)=>{const c=i.get(h.key);r.has(h.key)&&(c===void 0||c.mutation instanceof Fr)?s=s.insert(h.key,h):c!==void 0?(a.set(h.key,c.mutation.getFieldMask()),Ho(c.mutation,h,c.mutation.getFieldMask(),Be.now())):a.set(h.key,gn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,c)=>a.set(h,c)),n.forEach((h,c)=>{var d;return o.set(h,new e3(c,(d=a.get(h))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,n){const i=qo();let r=new Ze((a,o)=>a-o),s=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let c=i.get(u)||gn.empty();c=o.applyToLocalView(h,c),i.set(u,c);const d=(r.get(o.batchId)||ge()).add(u);r=r.insert(o.batchId,d)})}).next(()=>{const a=[],o=r.getReverseIterator();for(;o.hasNext();){const u=o.getNext(),h=u.key,c=u.value,d=XE();c.forEach(f=>{if(!s.has(f)){const p=nA(n.get(f),i.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,d))}return K.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ie.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):GE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):K.resolve(ns());let o=ol,u=s;return a.next(h=>K.forEach(h,(c,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(c)?K.resolve():this.remoteDocumentCache.getEntry(e,c).next(f=>{u=u.insert(c,f)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ge())).next(c=>({batchId:o,changes:KE(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(i=>{let r=To();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=To();return this.indexManager.getCollectionParents(e,s).next(o=>K.forEach(o,u=>{const h=function(d,f){return new Ul(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next(c=>{c.forEach((d,f)=>{a=a.insert(d,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const c=h.getKey();a.get(c)===null&&(a=a.insert(c,zt.newInvalidDocument(c)))});let o=To();return a.forEach((u,h)=>{const c=s.get(u);c!==void 0&&Ho(c.mutation,h,gn.empty(),Be.now()),Uh(n,h)&&(o=o.insert(u,h))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return K.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ui(r.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(r){return{name:r.name,query:G4(r.bundledQuery),readTime:ui(r.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(){this.overlays=new Ze(ie.comparator),this.kr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ns();return K.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.wt(e,n,s)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const r=ns(),s=n.length+1,a=new ie(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const u=o.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return K.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Ze((h,c)=>h-c);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let c=s.get(h.largestBatchId);c===null&&(c=ns(),s=s.insert(h.largestBatchId,c)),c.set(h.getKey(),h)}}const o=ns(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,c)=>o.set(h,c)),!(o.size()>=r)););return K.resolve(o)}wt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new E4(n,i));let s=this.kr.get(n);s===void 0&&(s=ge(),this.kr.set(n,s)),this.kr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(){this.qr=new yt(Tt.Qr),this.$r=new yt(Tt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new Tt(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Wr(new Tt(e,n))}Gr(e,n){e.forEach(i=>this.removeReference(i,n))}zr(e){const n=new ie(new Ue([])),i=new Tt(n,e),r=new Tt(n,e+1),s=[];return this.$r.forEachInRange([i,r],a=>{this.Wr(a),s.push(a.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ie(new Ue([])),i=new Tt(n,e),r=new Tt(n,e+1);let s=ge();return this.$r.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Tt(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Tt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ie.comparator(e.key,n.key)||he(e.Hr,n.Hr)}static Ur(e,n){return he(e.Hr,n.Hr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new yt(Tt.Qr)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new T4(s,n,i,r);this.mutationQueue.push(a);for(const o of r)this.Yr=this.Yr.add(new Tt(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,n){return K.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Xr(i),s=r<0?0:r;return K.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?Gp:this.er-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Tt(n,0),r=new Tt(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([i,r],a=>{const o=this.Zr(a.Hr);s.push(o)}),K.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new yt(he);return n.forEach(r=>{const s=new Tt(r,0),a=new Tt(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,a],o=>{i=i.add(o.Hr)})}),K.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;ie.isDocumentKey(s)||(s=s.child(""));const a=new Tt(new ie(s),0);let o=new yt(he);return this.Yr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(o=o.add(u.Hr)),!0)},a),K.resolve(this.ei(o))}ei(e){const n=[];return e.forEach(i=>{const r=this.Zr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Se(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return K.forEach(n.mutations,r=>{const s=new Tt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,n){const i=new Tt(n,0),r=this.Yr.firstAfterOrEqual(i);return K.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e){this.ni=e,this.docs=function(){return new Ze(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(e,n){let i=qi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():zt.newInvalidDocument(r))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=qi();const a=n.path,o=new ie(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(o);for(;u.hasNext();){const{key:h,value:{document:c}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||jN(VN(c),i)<=0||(r.has(c.key)||Uh(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return K.resolve(s)}getAllFromCollectionGroup(e,n,i,r){re(9500)}ri(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new o3(this)}getSize(e){return K.resolve(this.size)}}class o3 extends J4{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e){this.persistence=e,this.ii=new Rs(n=>Yp(n),Kp),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.si=0,this.oi=new eg,this.targetCount=0,this._i=ka.ar()}forEachTarget(e,n){return this.ii.forEach((i,r)=>n(r)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),K.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new ka(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.hr(n),K.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.ii.forEach((a,o)=>{o.sequenceNumber<=n&&i.get(o.targetId)===null&&(this.ii.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),K.waitFor(s).next(()=>r)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),K.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,n){this.ai={},this.overlays={},this.ui=new Oh(0),this.ci=!1,this.ci=!0,this.li=new r3,this.referenceDelegate=e(this),this.hi=new l3(this),this.indexManager=new $4,this.remoteDocumentCache=function(r){return new a3(r)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new H4(n),this.Ti=new n3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new i3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new s3(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){J("MemoryPersistence","Starting transaction:",e);const r=new u3(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ei(e,n){return K.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,n)))}}class u3 extends PN{constructor(e){super(),this.currentSequenceNumber=e}}class tg{constructor(e){this.persistence=e,this.Ai=new eg,this.Ri=null}static Vi(e){return new tg(e)}get mi(){if(this.Ri)return this.Ri;throw re(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(r=>this.mi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.mi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.mi,i=>{const r=ie.fromPath(i);return this.fi(e,r).next(s=>{s||n.removeEntry(r,le.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return K.or([()=>K.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Qc{constructor(e,n){this.persistence=e,this.gi=new Rs(i=>BN(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=W4(this,n)}static Vi(e,n){return new Qc(e,n)}Ii(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}yr(e){let n=0;return this.gr(e,i=>{n++}).next(()=>n)}gr(e,n){return K.forEach(this.gi,(i,r)=>this.Sr(e,i,r).next(s=>s?K.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ri(e,a=>this.Sr(e,a,n).next(o=>{o||(i++,s.removeEntry(a,le.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),K.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Yu(e.data.value)),n}Sr(e,n,i){return K.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.gi.get(n);return K.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=r}static Es(e,n){let i=ge(),r=ge();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ng(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return iR()?8:zN(Ft())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ps(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ys(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new c3;return this.ws(e,n,a).next(o=>{if(s.result=o,this.Rs)return this.Ss(e,n,a,o.size)})}).next(()=>s.result)}Ss(e,n,i,r){return i.documentReadCount<this.Vs?(Hs()<=pe.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Gs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),K.resolve()):(Hs()<=pe.DEBUG&&J("QueryEngine","Query:",Gs(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Hs()<=pe.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Gs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,li(n))):K.resolve())}ps(e,n){if(Bv(n))return K.resolve(null);let i=li(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=ym(n,null,"F"),i=li(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=ge(...s);return this.gs.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,i).next(u=>{const h=this.bs(n,o);return this.Ds(n,h,a,u.readTime)?this.ps(e,ym(n,null,"F")):this.vs(e,h,n,u)}))})))}ys(e,n,i,r){return Bv(n)||r.isEqual(le.min())?K.resolve(null):this.gs.getDocuments(e,i).next(s=>{const a=this.bs(n,s);return this.Ds(n,a,i,r)?K.resolve(null):(Hs()<=pe.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Gs(n)),this.vs(e,a,n,kN(r,ol)).next(o=>o))})}bs(e,n){let i=new yt(QE(e));return n.forEach((r,s)=>{Uh(e,s)&&(i=i.add(s))}),i}Ds(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ws(e,n,i){return Hs()<=pe.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Gs(n)),this.gs.getDocumentsMatchingQuery(e,n,Dr.min(),i)}vs(e,n,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="LocalStore",f3=3e8;class d3{constructor(e,n,i,r){this.persistence=e,this.Cs=n,this.serializer=r,this.Fs=new Ze(he),this.Ms=new Rs(s=>Yp(s),Kp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new t3(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function m3(t,e,n,i){return new d3(t,e,n,i)}async function gA(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],o=[];let u=ge();for(const h of r){a.push(h.batchId);for(const c of h.mutations)u=u.add(c.key)}for(const h of s){o.push(h.batchId);for(const c of h.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Bs:h,removedBatchIds:a,addedBatchIds:o}))})})}function p3(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(o,u,h,c){const d=h.batch,f=d.keys();let p=K.resolve();return f.forEach(E=>{p=p.next(()=>c.getEntry(u,E)).next(O=>{const V=h.docVersions.get(E);Se(V!==null,48541),O.version.compareTo(V)<0&&(d.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),c.addEntry(O)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(u,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let u=ge();for(let h=0;h<o.mutationResults.length;++h)o.mutationResults[h].transformResults.length>0&&(u=u.add(o.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function yA(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function g3(t,e){const n=ue(t),i=e.snapshotVersion;let r=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});r=n.Fs;const o=[];e.targetChanges.forEach((c,d)=>{const f=r.get(d);if(!f)return;o.push(n.hi.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.hi.addMatchingKeys(s,c.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(Ot.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,i)),r=r.insert(d,p),function(O,V,b){return O.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=f3?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,p,c)&&o.push(n.hi.updateTargetData(s,p))});let u=qi(),h=ge();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),o.push(y3(s,a,e.documentUpdates).next(c=>{u=c.Ls,h=c.ks})),!i.isEqual(le.min())){const c=n.hi.getLastRemoteSnapshotVersion(s).next(d=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,i));o.push(c)}return K.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Fs=r,s))}function y3(t,e,n){let i=ge(),r=ge();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=qi();return n.forEach((o,u)=>{const h=s.get(o);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(o)),u.isNoDocument()&&u.version.isEqual(le.min())?(e.removeEntry(o,u.readTime),a=a.insert(o,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(o,u)):J(ig,"Ignoring outdated watch update for ",o,". Current version:",h.version," Watch version:",u.version)}),{Ls:a,ks:r}})}function v3(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Gp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function _3(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.hi.getTargetData(i,e).next(s=>s?(r=s,K.resolve(r)):n.hi.allocateTargetId(i).next(a=>(r=new dr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i})}async function Em(t,e,n){const i=ue(t),r=i.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Qa(a))throw a;J(ig,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function e_(t,e,n){const i=ue(t);let r=le.min(),s=ge();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,c){const d=ue(u),f=d.Ms.get(c);return f!==void 0?K.resolve(d.Fs.get(f)):d.hi.getTargetData(h,c)}(i,a,li(e)).next(o=>{if(o)return r=o.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(a,o.targetId).next(u=>{s=u})}).next(()=>i.Cs.getDocumentsMatchingQuery(a,e,n?r:le.min(),n?s:ge())).next(o=>(b3(i,a4(e),o),{documents:o,qs:s})))}function b3(t,e,n){let i=t.xs.get(e)||le.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.xs.set(e,i)}class t_{constructor(){this.activeTargetIds=f4()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class T3{constructor(){this.Fo=new t_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new t_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="ConnectivityMonitor";class i_{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){J(n_,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){J(n_,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu=null;function Am(){return xu===null?xu=function(){return 268435456+Math.round(2147483648*Math.random())}():xu++,"0x"+xu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="RestConnection",A3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class w3{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===Lc?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,n,i,r,s){const a=Am(),o=this.Go(e,n.toUriEncodedString());J(Wf,`Sending RPC '${e}' ${a}:`,o,i);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,r,s);const{host:h}=new URL(o),c=Lr(h);return this.jo(e,o,u,i,c).then(d=>(J(Wf,`Received RPC '${e}' ${a}: `,d),d),d=>{throw Nr(Wf,`RPC '${e}' ${a} failed with error: `,d,"url: ",o,"request:",i),d})}Jo(e,n,i,r,s,a){return this.Wo(e,n,i,r,s)}zo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ga}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}Go(e,n){const i=A3[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection";class x3 extends w3{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,r,s){const a=Am();return new Promise((o,u)=>{const h=new _E;h.setWithCredentials(!0),h.listenOnce(bE.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Qu.NO_ERROR:const d=h.getResponseJson();J(jt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case Qu.TIMEOUT:J(jt,`RPC '${e}' ${a} timed out`),u(new W(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Qu.HTTP_ERROR:const f=h.getStatus();if(J(jt,`RPC '${e}' ${a} failed with status:`,f,"response text:",h.getResponseText()),f>0){let p=h.getResponseJson();Array.isArray(p)&&(p=p[0]);const E=p==null?void 0:p.error;if(E&&E.status&&E.message){const O=function(b){const x=b.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(x)>=0?x:Y.UNKNOWN}(E.status);u(new W(O,E.message))}else u(new W(Y.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new W(Y.UNAVAILABLE,"Connection failed."));break;default:re(9055,{c_:e,streamId:a,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{J(jt,`RPC '${e}' ${a} completed.`)}});const c=JSON.stringify(r);J(jt,`RPC '${e}' ${a} sending request:`,r),h.send(n,"POST",c,i,15)})}P_(e,n,i){const r=Am(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=AE(),o=EE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const c=s.join("");J(jt,`Creating RPC '${e}' stream ${r}: ${c}`,u);const d=a.createWebChannel(c,u);this.T_(d);let f=!1,p=!1;const E=new S3({Ho:V=>{p?J(jt,`Not sending because RPC '${e}' stream ${r} is closed:`,V):(f||(J(jt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),J(jt,`RPC '${e}' stream ${r} sending:`,V),d.send(V))},Yo:()=>d.close()}),O=(V,b,x)=>{V.listen(b,C=>{try{x(C)}catch(M){setTimeout(()=>{throw M},0)}})};return O(d,bo.EventType.OPEN,()=>{p||(J(jt,`RPC '${e}' stream ${r} transport opened.`),E.s_())}),O(d,bo.EventType.CLOSE,()=>{p||(p=!0,J(jt,`RPC '${e}' stream ${r} transport closed`),E.__(),this.I_(d))}),O(d,bo.EventType.ERROR,V=>{p||(p=!0,Nr(jt,`RPC '${e}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),E.__(new W(Y.UNAVAILABLE,"The operation could not be completed")))}),O(d,bo.EventType.MESSAGE,V=>{var b;if(!p){const x=V.data[0];Se(!!x,16349);const C=x,M=(C==null?void 0:C.error)||((b=C[0])===null||b===void 0?void 0:b.error);if(M){J(jt,`RPC '${e}' stream ${r} received error:`,M);const j=M.status;let k=function(v){const T=lt[v];if(T!==void 0)return rA(T)}(j),S=M.message;k===void 0&&(k=Y.INTERNAL,S="Unknown error status: "+j+" with message "+M.message),p=!0,E.__(new W(k,S)),d.close()}else J(jt,`RPC '${e}' stream ${r} received:`,x),E.a_(x)}}),O(o,TE.STAT_EVENT,V=>{V.stat===cm.PROXY?J(jt,`RPC '${e}' stream ${r} detected buffering proxy`):V.stat===cm.NOPROXY&&J(jt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{E.o_()},0),E}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Jf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t){return new N4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-i);r>0&&J("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="PersistentStream";class _A{constructor(e,n,i,r,s,a,o,u){this.Fi=e,this.w_=i,this.S_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new vA(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(Fi(n.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===n&&this.W_(i,r)},i=>{e(()=>{const r=new W(Y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return J(r_,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(J(r_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class R3 extends _A{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=M4(this.serializer,e),i=function(s){if(!("targetChange"in s))return le.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?le.min():a.readTime?ui(a.readTime):le.min()}(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=Tm(this.serializer),n.addTarget=function(s,a){let o;const u=a.target;if(o=pm(u)?{documents:j4(s,u)}:{query:U4(s,u).Vt},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=oA(s,a.resumeToken);const h=vm(s,a.expectedCount);h!==null&&(o.expectedCount=h)}else if(a.snapshotVersion.compareTo(le.min())>0){o.readTime=$c(s,a.snapshotVersion.toTimestamp());const h=vm(s,a.expectedCount);h!==null&&(o.expectedCount=h)}return o}(this.serializer,e);const i=z4(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=Tm(this.serializer),n.removeTarget=e,this.k_(n)}}class C3 extends _A{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=V4(e.writeResults,e.commitTime),i=ui(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=Tm(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>k4(this.serializer,i))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{}class N3 extends I3{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new W(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,_m(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(Y.UNKNOWN,s.toString())})}Jo(e,n,i,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Jo(e,_m(n,i),r,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new W(Y.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class D3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Fi(n),this._a=!1):J("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="RemoteStore";class O3{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(a=>{i.enqueueAndForget(async()=>{Cs(this)&&(J(Ts,"Restarting streams for network reachability change."),await async function(u){const h=ue(u);h.Ia.add(4),await Ll(h),h.Aa.set("Unknown"),h.Ia.delete(4),await qh(h)}(this))})}),this.Aa=new D3(i,r)}}async function qh(t){if(Cs(t))for(const e of t.da)await e(!0)}async function Ll(t){for(const e of t.da)await e(!1)}function bA(t,e){const n=ue(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),og(n)?ag(n):Ya(n).x_()&&sg(n,e))}function rg(t,e){const n=ue(t),i=Ya(n);n.Ta.delete(e),i.x_()&&TA(n,e),n.Ta.size===0&&(i.x_()?i.B_():Cs(n)&&n.Aa.set("Unknown"))}function sg(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ya(t).H_(e)}function TA(t,e){t.Ra.$e(e),Ya(t).Y_(e)}function ag(t){t.Ra=new x4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ya(t).start(),t.Aa.aa()}function og(t){return Cs(t)&&!Ya(t).M_()&&t.Ta.size>0}function Cs(t){return ue(t).Ia.size===0}function EA(t){t.Ra=void 0}async function M3(t){t.Aa.set("Online")}async function k3(t){t.Ta.forEach((e,n)=>{sg(t,e)})}async function V3(t,e){EA(t),og(t)?(t.Aa.la(e),ag(t)):t.Aa.set("Unknown")}async function j3(t,e,n){if(t.Aa.set("Online"),e instanceof aA&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const o of s.targetIds)r.Ta.has(o)&&(await r.remoteSyncer.rejectListen(o,a),r.Ta.delete(o),r.Ra.removeTarget(o))}(t,e)}catch(i){J(Ts,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Yc(t,i)}else if(e instanceof Zu?t.Ra.Ye(e):e instanceof sA?t.Ra.it(e):t.Ra.et(e),!n.isEqual(le.min()))try{const i=await yA(t.localStore);n.compareTo(i)>=0&&await function(s,a){const o=s.Ra.Pt(a);return o.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.Ta.get(h);c&&s.Ta.set(h,c.withResumeToken(u.resumeToken,a))}}),o.targetMismatches.forEach((u,h)=>{const c=s.Ta.get(u);if(!c)return;s.Ta.set(u,c.withResumeToken(Ot.EMPTY_BYTE_STRING,c.snapshotVersion)),TA(s,u);const d=new dr(c.target,u,h,c.sequenceNumber);sg(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){J(Ts,"Failed to raise snapshot:",i),await Yc(t,i)}}async function Yc(t,e,n){if(!Qa(e))throw e;t.Ia.add(1),await Ll(t),t.Aa.set("Offline"),n||(n=()=>yA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(Ts,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await qh(t)})}function AA(t,e){return e().catch(n=>Yc(t,n,e))}async function Hh(t){const e=ue(t),n=Vr(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Gp;for(;U3(e);)try{const r=await v3(e.localStore,i);if(r===null){e.Pa.length===0&&n.B_();break}i=r.batchId,P3(e,r)}catch(r){await Yc(e,r)}wA(e)&&SA(e)}function U3(t){return Cs(t)&&t.Pa.length<10}function P3(t,e){t.Pa.push(e);const n=Vr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function wA(t){return Cs(t)&&!Vr(t).M_()&&t.Pa.length>0}function SA(t){Vr(t).start()}async function z3(t){Vr(t).na()}async function L3(t){const e=Vr(t);for(const n of t.Pa)e.X_(n.mutations)}async function B3(t,e,n){const i=t.Pa.shift(),r=Zp.from(i,e,n);await AA(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Hh(t)}async function F3(t,e){e&&Vr(t).Z_&&await async function(i,r){if(function(a){return w4(a)&&a!==Y.ABORTED}(r.code)){const s=i.Pa.shift();Vr(i).N_(),await AA(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Hh(i)}}(t,e),wA(t)&&SA(t)}async function s_(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),J(Ts,"RemoteStore received new credentials");const i=Cs(n);n.Ia.add(3),await Ll(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await qh(n)}async function q3(t,e){const n=ue(t);e?(n.Ia.delete(2),await qh(n)):e||(n.Ia.add(2),await Ll(n),n.Aa.set("Unknown"))}function Ya(t){return t.Va||(t.Va=function(n,i,r){const s=ue(n);return s.ia(),new R3(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Zo:M3.bind(null,t),e_:k3.bind(null,t),n_:V3.bind(null,t),J_:j3.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),og(t)?ag(t):t.Aa.set("Unknown")):(await t.Va.stop(),EA(t))})),t.Va}function Vr(t){return t.ma||(t.ma=function(n,i,r){const s=ue(n);return s.ia(),new C3(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:z3.bind(null,t),n_:F3.bind(null,t),ea:L3.bind(null,t),ta:B3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Hh(t)):(await t.ma.stop(),t.Pa.length>0&&(J(Ts,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,o=new lg(e,n,a,r,s);return o.start(i),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ug(t,e){if(Fi("AsyncQueue",`${e}: ${t}`),Qa(t))return new W(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{static emptySet(e){return new va(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ie.comparator(n.key,i.key):(n,i)=>ie.comparator(n.key,i.key),this.keyedMap=To(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof va)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new va;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(){this.fa=new Ze(ie.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):re(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,i)=>{e.push(i)}),e}}class Va{constructor(e,n,i,r,s,a,o,u,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new Va(e,n,va.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class G3{constructor(){this.queries=o_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const r=ue(n),s=r.queries;r.queries=o_(),s.forEach((a,o)=>{for(const u of o.wa)u.onError(i)})})(this,new W(Y.ABORTED,"Firestore shutting down"))}}function o_(){return new Rs(t=>$E(t),jh)}async function cg(t,e){const n=ue(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.Sa()&&e.ba()&&(i=2):(s=new H3,i=e.ba()?0:1);try{switch(i){case 0:s.ya=await n.onListen(r,!0);break;case 1:s.ya=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const o=ug(a,`Initialization of query '${Gs(e.query)}' failed`);return void e.onError(o)}n.queries.set(r,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&fg(n)}async function hg(t,e){const n=ue(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const a=s.wa.indexOf(e);a>=0&&(s.wa.splice(a,1),s.wa.length===0?r=e.ba()?0:1:!s.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function $3(t,e){const n=ue(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const o of a.wa)o.Ca(r)&&(i=!0);a.ya=r}}i&&fg(n)}function Q3(t,e,n){const i=ue(t),r=i.queries.get(e);if(r)for(const s of r.wa)s.onError(n);i.queries.delete(e)}function fg(t){t.Da.forEach(e=>{e.next()})}var wm,l_;(l_=wm||(wm={})).Fa="default",l_.Cache="cache";class dg{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Va(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==wm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.key=e}}class RA{constructor(e){this.key=e}}class Y3{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ge(),this.mutatedKeys=ge(),this.Xa=QE(e),this.eu=new va(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new a_,r=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,o=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((c,d)=>{const f=r.get(c),p=Uh(this.query,d)?d:null,E=!!f&&this.mutatedKeys.has(f.key),O=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let V=!1;f&&p?f.data.isEqual(p.data)?E!==O&&(i.track({type:3,doc:p}),V=!0):this.iu(f,p)||(i.track({type:2,doc:p}),V=!0,(u&&this.Xa(p,u)>0||h&&this.Xa(p,h)<0)&&(o=!0)):!f&&p?(i.track({type:0,doc:p}),V=!0):f&&!p&&(i.track({type:1,doc:f}),V=!0,(u||h)&&(o=!0)),V&&(p?(a=a.add(p),s=O?s.add(c):s.delete(c)):(a=a.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const c=this.query.limitType==="F"?a.last():a.first();a=a.delete(c.key),s=s.delete(c.key),i.track({type:1,doc:c})}return{eu:a,ru:i,Ds:o,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort((c,d)=>function(p,E){const O=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{At:V})}};return O(p)-O(E)}(c.type,d.type)||this.Xa(c.doc,d.doc)),this.su(i),r=r!=null&&r;const o=n&&!r?this.ou():[],u=this.Za.size===0&&this.current&&!r?1:0,h=u!==this.Ya;return this.Ya=u,a.length!==0||h?{snapshot:new Va(this.query,e.eu,s,a,e.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new a_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ge(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const n=[];return e.forEach(i=>{this.Za.has(i)||n.push(new RA(i))}),this.Za.forEach(i=>{e.has(i)||n.push(new xA(i))}),n}uu(e){this.Ha=e.qs,this.Za=ge();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Va.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const mg="SyncEngine";class K3{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class X3{constructor(e){this.key=e,this.lu=!1}}class Z3{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new Rs(o=>$E(o),jh),this.Tu=new Map,this.Iu=new Set,this.du=new Ze(ie.comparator),this.Eu=new Map,this.Au=new eg,this.Ru={},this.Vu=new Map,this.mu=ka.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function W3(t,e,n=!0){const i=MA(t);let r;const s=i.Pu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.cu()):r=await CA(i,e,n,!0),r}async function J3(t,e){const n=MA(t);await CA(n,e,!0,!1)}async function CA(t,e,n,i){const r=await _3(t.localStore,li(e)),s=r.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return i&&(o=await e5(t,e,s,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&bA(t.remoteStore,r),o}async function e5(t,e,n,i,r){t.gu=(d,f,p)=>async function(O,V,b,x){let C=V.view.nu(b);C.Ds&&(C=await e_(O.localStore,V.query,!1).then(({documents:S})=>V.view.nu(S,C)));const M=x&&x.targetChanges.get(V.targetId),j=x&&x.targetMismatches.get(V.targetId)!=null,k=V.view.applyChanges(C,O.isPrimaryClient,M,j);return c_(O,V.targetId,k._u),k.snapshot}(t,d,f,p);const s=await e_(t.localStore,e,!0),a=new Y3(e,s.qs),o=a.nu(s.documents),u=zl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),h=a.applyChanges(o,t.isPrimaryClient,u);c_(t,n,h._u);const c=new K3(e,n,a);return t.Pu.set(e,c),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function t5(t,e,n){const i=ue(t),r=i.Pu.get(e),s=i.Tu.get(r.targetId);if(s.length>1)return i.Tu.set(r.targetId,s.filter(a=>!jh(a,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Em(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&rg(i.remoteStore,r.targetId),Sm(i,r.targetId)}).catch($a)):(Sm(i,r.targetId),await Em(i.localStore,r.targetId,!0))}async function n5(t,e){const n=ue(t),i=n.Pu.get(e),r=n.Tu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),rg(n.remoteStore,i.targetId))}async function i5(t,e,n){const i=c5(t);try{const r=await function(a,o){const u=ue(a),h=Be.now(),c=o.reduce((p,E)=>p.add(E.key),ge());let d,f;return u.persistence.runTransaction("Locally write mutations","readwrite",p=>{let E=qi(),O=ge();return u.Os.getEntries(p,c).next(V=>{E=V,E.forEach((b,x)=>{x.isValidDocument()||(O=O.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(p,E)).next(V=>{d=V;const b=[];for(const x of o){const C=_4(x,d.get(x.key).overlayedDocument);C!=null&&b.push(new Fr(x.key,C,PE(C.value.mapValue),Tn.exists(!0)))}return u.mutationQueue.addMutationBatch(p,h,b,o)}).next(V=>{f=V;const b=V.applyToLocalDocumentSet(d,O);return u.documentOverlayCache.saveOverlays(p,V.batchId,b)})}).then(()=>({batchId:f.batchId,changes:KE(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,o,u){let h=a.Ru[a.currentUser.toKey()];h||(h=new Ze(he)),h=h.insert(o,u),a.Ru[a.currentUser.toKey()]=h}(i,r.batchId,n),await Bl(i,r.changes),await Hh(i.remoteStore)}catch(r){const s=ug(r,"Failed to persist write");n.reject(s)}}async function IA(t,e){const n=ue(t);try{const i=await g3(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.Eu.get(s);a&&(Se(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.lu=!0:r.modifiedDocuments.size>0?Se(a.lu,14607):r.removedDocuments.size>0&&(Se(a.lu,42227),a.lu=!1))}),await Bl(n,i,e)}catch(i){await $a(i)}}function u_(t,e,n){const i=ue(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Pu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&r.push(o.snapshot)}),function(a,o){const u=ue(a);u.onlineState=o;let h=!1;u.queries.forEach((c,d)=>{for(const f of d.wa)f.va(o)&&(h=!0)}),h&&fg(u)}(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function r5(t,e,n){const i=ue(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),s=r&&r.key;if(s){let a=new Ze(ie.comparator);a=a.insert(s,zt.newNoDocument(s,le.min()));const o=ge().add(s),u=new Bh(le.min(),new Map,new Ze(he),a,o);await IA(i,u),i.du=i.du.remove(s),i.Eu.delete(e),pg(i)}else await Em(i.localStore,e,!1).then(()=>Sm(i,e,n)).catch($a)}async function s5(t,e){const n=ue(t),i=e.batch.batchId;try{const r=await p3(n.localStore,e);DA(n,i,null),NA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Bl(n,r)}catch(r){await $a(r)}}async function a5(t,e,n){const i=ue(t);try{const r=await function(a,o){const u=ue(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let c;return u.mutationQueue.lookupMutationBatch(h,o).next(d=>(Se(d!==null,37113),c=d.keys(),u.mutationQueue.removeMutationBatch(h,d))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,c,o)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,c)).next(()=>u.localDocuments.getDocuments(h,c))})}(i.localStore,e);DA(i,e,n),NA(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Bl(i,r)}catch(r){await $a(r)}}function NA(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function DA(t,e,n){const i=ue(t);let r=i.Ru[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function Sm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(i=>{t.Au.containsKey(i)||OA(t,i)})}function OA(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(rg(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),pg(t))}function c_(t,e,n){for(const i of n)i instanceof xA?(t.Au.addReference(i.key,e),o5(t,i)):i instanceof RA?(J(mg,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||OA(t,i.key)):re(19791,{yu:i})}function o5(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(J(mg,"New document in limbo: "+n),t.Iu.add(i),pg(t))}function pg(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ie(Ue.fromString(e)),i=t.mu.next();t.Eu.set(i,new X3(n)),t.du=t.du.insert(n,i),bA(t.remoteStore,new dr(li(Vh(n.path)),i,"TargetPurposeLimboResolution",Oh.ue))}}async function Bl(t,e,n){const i=ue(t),r=[],s=[],a=[];i.Pu.isEmpty()||(i.Pu.forEach((o,u)=>{a.push(i.gu(u,e,n).then(h=>{var c;if((h||n)&&i.isPrimaryClient){const d=h?!h.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;i.sharedClientState.updateQueryState(u.targetId,d?"current":"not-current")}if(h){r.push(h);const d=ng.Es(u.targetId,h);s.push(d)}}))}),await Promise.all(a),i.hu.J_(r),await async function(u,h){const c=ue(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>K.forEach(h,f=>K.forEach(f.Is,p=>c.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>K.forEach(f.ds,p=>c.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!Qa(d))throw d;J(ig,"Failed to update sequence numbers: "+d)}for(const d of h){const f=d.targetId;if(!d.fromCache){const p=c.Fs.get(f),E=p.snapshotVersion,O=p.withLastLimboFreeSnapshotVersion(E);c.Fs=c.Fs.insert(f,O)}}}(i.localStore,s))}async function l5(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){J(mg,"User change. New user:",e.toKey());const i=await gA(n.localStore,e);n.currentUser=e,function(s,a){s.Vu.forEach(o=>{o.forEach(u=>{u.reject(new W(Y.CANCELLED,a))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Bl(n,i.Bs)}}function u5(t,e){const n=ue(t),i=n.Eu.get(e);if(i&&i.lu)return ge().add(i.key);{let r=ge();const s=n.Tu.get(e);if(!s)return r;for(const a of s){const o=n.Pu.get(a);r=r.unionWith(o.view.tu)}return r}}function MA(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=IA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=u5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r5.bind(null,e),e.hu.J_=$3.bind(null,e.eventManager),e.hu.pu=Q3.bind(null,e.eventManager),e}function c5(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=a5.bind(null,e),e}class Kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return m3(this.persistence,new h3,e.initialUser,this.serializer)}Du(e){return new pA(tg.Vi,this.serializer)}bu(e){return new T3}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kc.provider={build:()=>new Kc};class h5 extends Kc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Se(this.persistence.referenceDelegate instanceof Qc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new X4(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new pA(i=>Qc.Vi(i,n),this.serializer)}}class xm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>u_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=l5.bind(null,this.syncEngine),await q3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new G3}()}createDatastore(e){const n=Fh(e.databaseInfo.databaseId),i=function(s){return new x3(s)}(e.databaseInfo);return function(s,a,o,u){return new N3(s,a,o,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,o){return new O3(i,r,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>u_(this.syncEngine,n,0),function(){return i_.C()?new i_:new E3}())}createSyncEngine(e,n){return function(r,s,a,o,u,h,c){const d=new Z3(r,s,a,o,u,h);return c&&(d.fu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=ue(r);J(Ts,"RemoteStore shutting down."),s.Ia.add(5),await Ll(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}xm.provider={build:()=>new xm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Fi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="FirestoreClient";class f5{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Pt.UNAUTHENTICATED,this.clientId=Hp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{J(jr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(J(jr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ug(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function ed(t,e){t.asyncQueue.verifyOperationInProgress(),J(jr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await gA(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>{Nr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{J("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{Nr("Terminating Firestore due to IndexedDb database deletion failed",r)})}),t._offlineComponents=e}async function h_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await d5(t);J(jr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>s_(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>s_(e.remoteStore,r)),t._onlineComponents=e}async function d5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(jr,"Using user provided OfflineComponentProvider");try{await ed(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===Y.FAILED_PRECONDITION||r.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Nr("Error using user provided cache. Falling back to memory cache: "+n),await ed(t,new Kc)}}else J(jr,"Using default OfflineComponentProvider"),await ed(t,new h5(void 0));return t._offlineComponents}async function kA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(jr,"Using user provided OnlineComponentProvider"),await h_(t,t._uninitializedComponentsProvider._online)):(J(jr,"Using default OnlineComponentProvider"),await h_(t,new xm))),t._onlineComponents}function m5(t){return kA(t).then(e=>e.syncEngine)}async function Xc(t){const e=await kA(t),n=e.eventManager;return n.onListen=W3.bind(null,e.syncEngine),n.onUnlisten=t5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=J3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=n5.bind(null,e.syncEngine),n}function p5(t,e,n={}){const i=new ki;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,u,h){const c=new gg({next:f=>{c.Ou(),a.enqueueAndForget(()=>hg(s,d));const p=f.docs.has(o);!p&&f.fromCache?h.reject(new W(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&u&&u.source==="server"?h.reject(new W(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(f)},error:f=>h.reject(f)}),d=new dg(Vh(o.path),c,{includeMetadataChanges:!0,ka:!0});return cg(s,d)}(await Xc(t),t.asyncQueue,e,n,i)),i.promise}function g5(t,e,n={}){const i=new ki;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,u,h){const c=new gg({next:f=>{c.Ou(),a.enqueueAndForget(()=>hg(s,d)),f.fromCache&&u.source==="server"?h.reject(new W(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(f)},error:f=>h.reject(f)}),d=new dg(o,c,{includeMetadataChanges:!0,ka:!0});return cg(s,d)}(await Xc(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="firestore.googleapis.com",d_=!0;class m_{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new W(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jA,this.ssl=d_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:d_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Y4)throw new W(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VA((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gh{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new wN;switch(i.type){case"firstParty":return new CN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new W(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=f_.get(n);i&&(J("ComponentProvider","Removing Datastore"),f_.delete(n),i.terminate())}(this),Promise.resolve()}}function y5(t,e,n,i={}){var r;t=Vn(t,Gh);const s=Lr(e),a=t._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;s&&(Sh(`https://${u}`),xh("Firestore",!0)),a.host!==jA&&a.host!==u&&Nr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},a),{host:u,ssl:s,emulatorOptions:i});if(!vs(h,o)&&(t._setSettings(h),i.mockUserToken)){let c,d;if(typeof i.mockUserToken=="string")c=i.mockUserToken,d=Pt.MOCK_USER;else{c=jT(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new W(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Pt(f)}t._authCredentials=new SN(new SE(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Is(this.firestore,e,this._query)}}class st{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new st(this.firestore,e,this._key)}toJSON(){return{type:st._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(jl(n,st._jsonSchema))return new st(e,i||null,new ie(Ue.fromString(n.referencePath)))}}st._jsonSchemaVersion="firestore/documentReference/1.0",st._jsonSchema={type:ht("string",st._jsonSchemaVersion),referencePath:ht("string")};class Sr extends Is{constructor(e,n,i){super(e,n,Vh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new ie(e))}withConverter(e){return new Sr(this.firestore,e,this._path)}}function v5(t,e,...n){if(t=Xe(t),RE("collection","path",e),t instanceof Gh){const i=Ue.fromString(e,...n);return Rv(i),new Sr(t,null,i)}{if(!(t instanceof st||t instanceof Sr))throw new W(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return Rv(i),new Sr(t.firestore,null,i)}}function UA(t,e,...n){if(t=Xe(t),arguments.length===1&&(e=Hp.newId()),RE("doc","path",e),t instanceof Gh){const i=Ue.fromString(e,...n);return xv(i),new st(t,null,new ie(i))}{if(!(t instanceof st||t instanceof Sr))throw new W(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return xv(i),new st(t.firestore,t instanceof Sr?t.converter:null,new ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="AsyncQueue";class g_{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new vA(this,"async_queue_retry"),this.oc=()=>{const i=Jf();i&&J(p_,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=Jf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Jf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new ki;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Qa(e))throw e;J(p_,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,Fi("INTERNAL UNHANDLED ERROR: ",y_(i)),i}).then(i=>(this.nc=!1,i))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const r=lg.createAndSchedule(this,e,n,i,s=>this.lc(s));return this.ec.push(r),r}ac(){this.tc&&re(47125,{hc:y_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function y_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ur extends Gh{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new g_,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new g_(e),this._firestoreClient=void 0,await e}}}function _5(t,e){const n=typeof t=="object"?t:Rh(),i=typeof t=="string"?t:Lc,r=Ol(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=Ip("firestore");s&&y5(r,...s)}return r}function Fl(t){if(t._terminated)throw new W(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||b5(t),t._firestoreClient}function b5(t){var e,n,i;const r=t._freezeSettings(),s=function(o,u,h,c){return new HN(o,u,h,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,VA(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new f5(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const u=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this._byteString=e}static fromBase64String(e){try{return new On(Ot.fromBase64String(e))}catch(n){throw new W(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new On(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:On._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jl(e,On._jsonSchema))return On.fromBase64String(e.bytes)}}On._jsonSchemaVersion="firestore/bytes/1.0",On._jsonSchema={type:ht("string",On._jsonSchemaVersion),bytes:ht("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ci._jsonSchemaVersion}}static fromJSON(e){if(jl(e,ci._jsonSchema))return new ci(e.latitude,e.longitude)}}ci._jsonSchemaVersion="firestore/geoPoint/1.0",ci._jsonSchema={type:ht("string",ci._jsonSchemaVersion),latitude:ht("number"),longitude:ht("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:hi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jl(e,hi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new hi(e.vectorValues);throw new W(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hi._jsonSchemaVersion="firestore/vectorValue/1.0",hi._jsonSchema={type:ht("string",hi._jsonSchemaVersion),vectorValues:ht("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=/^__.*__$/;class E5{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pl(e,this.data,n,this.fieldTransforms)}}class PA{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{Ec:t})}}class vg{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new vg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Zc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(zA(this.Ec)&&T5.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class A5{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Fh(e)}Dc(e,n,i,r=!1){return new vg({Ec:e,methodName:n,bc:i,path:Nt.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _g(t){const e=t._freezeSettings(),n=Fh(t._databaseId);return new A5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function LA(t,e,n,i,r,s={}){const a=t.Dc(s.merge||s.mergeFields?2:0,e,n,r);bg("Data must be an object, but it was:",a,i);const o=BA(i,a);let u,h;if(s.merge)u=new gn(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const f=Rm(e,d,n);if(!a.contains(f))throw new W(Y.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);qA(c,f)||c.push(f)}u=new gn(c),h=a.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,h=a.fieldTransforms;return new E5(new tn(o),u,h)}class Qh extends yg{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qh}}function w5(t,e,n,i){const r=t.Dc(1,e,n);bg("Data must be an object, but it was:",r,i);const s=[],a=tn.empty();Br(i,(u,h)=>{const c=Tg(e,u,n);h=Xe(h);const d=r.gc(c);if(h instanceof Qh)s.push(c);else{const f=ql(h,d);f!=null&&(s.push(c),a.set(c,f))}});const o=new gn(s);return new PA(a,o,r.fieldTransforms)}function S5(t,e,n,i,r,s){const a=t.Dc(1,e,n),o=[Rm(e,i,n)],u=[r];if(s.length%2!=0)throw new W(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)o.push(Rm(e,s[f])),u.push(s[f+1]);const h=[],c=tn.empty();for(let f=o.length-1;f>=0;--f)if(!qA(h,o[f])){const p=o[f];let E=u[f];E=Xe(E);const O=a.gc(p);if(E instanceof Qh)h.push(p);else{const V=ql(E,O);V!=null&&(h.push(p),c.set(p,V))}}const d=new gn(h);return new PA(c,d,a.fieldTransforms)}function x5(t,e,n,i=!1){return ql(n,t.Dc(i?4:3,e))}function ql(t,e){if(FA(t=Xe(t)))return bg("Unsupported field value:",e,t),BA(t,e);if(t instanceof yg)return function(i,r){if(!zA(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const o of i){let u=ql(o,r.yc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Xe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return d4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Be.fromDate(i);return{timestampValue:$c(r.serializer,s)}}if(i instanceof Be){const s=new Be(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:$c(r.serializer,s)}}if(i instanceof ci)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof On)return{bytesValue:oA(r.serializer,i._byteString)};if(i instanceof st){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Jp(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof hi)return function(a,o){return{mapValue:{fields:{[jE]:{stringValue:UE},[Bc]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw o.wc("VectorValues must only contain numeric values.");return Xp(o.serializer,h)})}}}}}}(i,r);throw r.wc(`Unsupported field value: ${Dh(i)}`)}(t,e)}function BA(t,e){const n={};return NE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Br(t,(i,r)=>{const s=ql(r,e.Vc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function FA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof ci||t instanceof On||t instanceof st||t instanceof yg||t instanceof hi)}function bg(t,e,n){if(!FA(n)||!CE(n)){const i=Dh(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function Rm(t,e,n){if((e=Xe(e))instanceof $h)return e._internalPath;if(typeof e=="string")return Tg(t,e);throw Zc("Field path arguments must be of type string or ",t,!1,void 0,n)}const R5=new RegExp("[~\\*/\\[\\]]");function Tg(t,e,n){if(e.search(R5)>=0)throw Zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $h(...e.split("."))._internalPath}catch{throw Zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zc(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new W(Y.INVALID_ARGUMENT,o+t+u)}function qA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new C5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(GA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class C5 extends HA{data(){return super.data()}}function GA(t,e){return typeof e=="string"?Tg(t,e):e instanceof $h?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Eg{}class I5 extends Eg{}function N5(t,e,...n){let i=[];e instanceof Eg&&i.push(e),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof wg).length,o=s.filter(u=>u instanceof Ag).length;if(a>1||a>0&&o>0)throw new W(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Ag extends I5{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Ag(e,n,i)}_apply(e){const n=this._parse(e);return QA(e._query,n),new Is(e.firestore,e.converter,gm(e._query,n))}_parse(e){const n=_g(e.firestore);return function(s,a,o,u,h,c,d){let f;if(h.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new W(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){b_(d,c);const E=[];for(const O of d)E.push(__(u,s,O));f={arrayValue:{values:E}}}else f=__(u,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||b_(d,c),f=x5(o,a,d,c==="in"||c==="not-in");return ct.create(h,c,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class wg extends Eg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Yn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let a=r;const o=s.getFlattenedFilters();for(const u of o)QA(a,u),a=gm(a,u)}(e._query,n),new Is(e.firestore,e.converter,gm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function __(t,e,n){if(typeof(n=Xe(n))=="string"){if(n==="")throw new W(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GE(e)&&n.indexOf("/")!==-1)throw new W(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ue.fromString(n));if(!ie.isDocumentKey(i))throw new W(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Vv(t,new ie(i))}if(n instanceof st)return Vv(t,n._key);throw new W(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dh(n)}.`)}function b_(t,e){if(!Array.isArray(t)||t.length===0)throw new W(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QA(t,e){const n=function(r,s){for(const a of r)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class D5{convertValue(e,n="none"){switch(kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Br(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[Bc].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>rt(a.doubleValue));return new hi(s)}convertGeoPoint(e){return new ci(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=kh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ll(e));default:return null}}convertTimestamp(e){const n=Or(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ue.fromString(e);Se(dA(i),9688,{name:e});const r=new ul(i.get(1),i.get(3)),s=new ie(i.popFirst(5));return r.isEqual(n)||Fi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Ao{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fs extends HA{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(GA("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=fs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fs._jsonSchemaVersion="firestore/documentSnapshot/1.0",fs._jsonSchema={type:ht("string",fs._jsonSchemaVersion),bundleSource:ht("string","DocumentSnapshot"),bundleName:ht("string"),bundle:ht("string")};class Wu extends fs{data(e={}){return super.data(e)}}class ds{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ao(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Wu(this._firestore,this._userDataWriter,i.key,i,new Ao(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(o=>{const u=new Wu(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ao(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const u=new Wu(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ao(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,c=-1;return o.type!==0&&(h=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),c=a.indexOf(o.doc.key)),{type:O5(o.type),doc:u,oldIndex:h,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ds._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function O5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(t){t=Vn(t,st);const e=Vn(t.firestore,Ur);return p5(Fl(e),t._key).then(n=>KA(e,t,n))}ds._jsonSchemaVersion="firestore/querySnapshot/1.0",ds._jsonSchema={type:ht("string",ds._jsonSchemaVersion),bundleSource:ht("string","QuerySnapshot"),bundleName:ht("string"),bundle:ht("string")};class Sg extends D5{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}}function k5(t){t=Vn(t,Is);const e=Vn(t.firestore,Ur),n=Fl(e),i=new Sg(e);return $A(t._query),g5(n,t._query).then(r=>new ds(e,i,t,r))}function V5(t,e,n){t=Vn(t,st);const i=Vn(t.firestore,Ur),r=YA(t.converter,e,n);return xg(i,[LA(_g(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Tn.none())])}function j5(t){return xg(Vn(t.firestore,Ur),[new Lh(t._key,Tn.none())])}function U5(t,...e){var n,i,r;t=Xe(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||v_(e[a])||(s=e[a++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(v_(e[a])){const d=e[a];e[a]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[a+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[a+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let u,h,c;if(t instanceof st)h=Vn(t.firestore,Ur),c=Vh(t._key.path),u={next:d=>{e[a]&&e[a](KA(h,t,d))},error:e[a+1],complete:e[a+2]};else{const d=Vn(t,Is);h=Vn(d.firestore,Ur),c=d._query;const f=new Sg(h);u={next:p=>{e[a]&&e[a](new ds(h,f,d,p))},error:e[a+1],complete:e[a+2]},$A(t._query)}return function(f,p,E,O){const V=new gg(O),b=new dg(p,V,E);return f.asyncQueue.enqueueAndForget(async()=>cg(await Xc(f),b)),()=>{V.Ou(),f.asyncQueue.enqueueAndForget(async()=>hg(await Xc(f),b))}}(Fl(h),c,o,u)}function xg(t,e){return function(i,r){const s=new ki;return i.asyncQueue.enqueueAndForget(async()=>i5(await m5(i),r,s)),s.promise}(Fl(t),e)}function KA(t,e,n){const i=n.docs.get(e._key),r=new Sg(t);return new fs(t,r,e._key,i,new Ao(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=_g(e)}set(e,n,i){this._verifyNotCommitted();const r=td(e,this._firestore),s=YA(r.converter,n,i),a=LA(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,Tn.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=td(e,this._firestore);let a;return a=typeof(n=Xe(n))=="string"||n instanceof $h?S5(this._dataReader,"WriteBatch.update",s._key,n,i,r):w5(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,Tn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=td(e,this._firestore);return this._mutations=this._mutations.concat(new Lh(n._key,Tn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(Y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function td(t,e){if((t=Xe(t)).firestore!==e)throw new W(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(t){return Fl(t=Vn(t,Ur)),new P5(t,e=>xg(t,e))}(function(e,n=!0){(function(r){Ga=r})(xs),Ir(new zi("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),o=new Ur(new xN(i.getProvider("auth-internal")),new IN(a,i.getProvider("app-check-internal")),function(h,c){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new W(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ul(h.options.projectId,c)}(a,r),a);return s=Object.assign({useFetchStreams:n},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),kn(Tv,Ev,e),kn(Tv,Ev,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="firebasestorage.googleapis.com",L5="storageBucket",B5=2*60*1e3,F5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Xn{constructor(e,n,i=0){super(nd(e),`Firebase Storage: ${n} (${nd(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mi;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mi||(mi={}));function nd(t){return"storage/"+t}function q5(){const t="An unknown error occurred, please check the error payload for server response.";return new yi(mi.UNKNOWN,t)}function H5(){return new yi(mi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function G5(){return new yi(mi.CANCELED,"User canceled the upload/download.")}function $5(t){return new yi(mi.INVALID_URL,"Invalid URL '"+t+"'.")}function Q5(t){return new yi(mi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function T_(t){return new yi(mi.INVALID_ARGUMENT,t)}function ZA(){return new yi(mi.APP_DELETED,"The Firebase app was deleted.")}function Y5(t){return new yi(mi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Gn.makeFromUrl(e,n)}catch{return new Gn(e,"")}if(i.path==="")return i;throw Q5(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+r+a,"i"),u={bucket:1,path:3};function h(M){M.path_=decodeURIComponent(M.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${c}/b/${r}/o${f}`,"i"),E={bucket:1,path:3},O=n===XA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,V="([^?#]*)",b=new RegExp(`^https?://${O}/${r}/${V}`,"i"),C=[{regex:o,indices:u,postModify:s},{regex:p,indices:E,postModify:h},{regex:b,indices:{bucket:1,path:2},postModify:h}];for(let M=0;M<C.length;M++){const j=C[M],k=j.regex.exec(e);if(k){const S=k[j.indices.bucket];let y=k[j.indices.path];y||(y=""),i=new Gn(S,y),j.postModify(i);break}}if(i==null)throw $5(e);return i}}class K5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(t,e,n){let i=1,r=null,s=null,a=!1,o=0;function u(){return o===2}let h=!1;function c(...V){h||(h=!0,e.apply(null,V))}function d(V){r=setTimeout(()=>{r=null,t(p,u())},V)}function f(){s&&clearTimeout(s)}function p(V,...b){if(h){f();return}if(V){f(),c.call(null,V,...b);return}if(u()||a){f(),c.call(null,V,...b);return}i<64&&(i*=2);let C;o===1?(o=2,C=0):C=(i+Math.random())*1e3,d(C)}let E=!1;function O(V){E||(E=!0,f(),!h&&(r!==null?(V||(o=2),clearTimeout(r),d(0)):V||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,O(!0)},n),O}function Z5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(t){return t!==void 0}function E_(t,e,n,i){if(i<e)throw T_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw T_(`Invalid value for '${t}'. Expected ${n} or less.`)}function J5(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Wc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Wc||(Wc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,n,i,r,s,a,o,u,h,c,d,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=c,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,O)=>{this.resolve_=E,this.reject_=O,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Ru(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const u=o.loaded,h=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===Wc.NO_ERROR,u=s.getStatus();if(!o||eD(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Wc.ABORT;i(!1,new Ru(!1,null,c));return}const h=this.successCodes_.indexOf(u)!==-1;i(!0,new Ru(h,s))})},n=(i,r)=>{const s=this.resolve_,a=this.reject_,o=r.connection;if(r.wasSuccessCode)try{const u=this.callback_(o,o.getResponse());W5(u)?s(u):s()}catch(u){a(u)}else if(o!==null){const u=q5();u.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,u)):a(u)}else if(r.canceled){const u=this.appDelete_?ZA():G5();a(u)}else{const u=H5();a(u)}};this.canceled_?n(!1,new Ru(!1,null,!0)):this.backoffId_=X5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Z5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ru{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function nD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function iD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function aD(t,e,n,i,r,s,a=!0,o=!1){const u=J5(t.urlParams),h=t.url+u,c=Object.assign({},t.headers);return rD(c,e),nD(c,n),iD(c,s),sD(c,i),new tD(h,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function lD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n){this._service=e,n instanceof Gn?this._location=n:this._location=Gn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Jc(e,n)}get root(){const e=new Gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lD(this._location.path)}get storage(){return this._service}get parent(){const e=oD(this._location.path);if(e===null)return null;const n=new Gn(this._location.bucket,e);return new Jc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Y5(e)}}function A_(t,e){const n=e==null?void 0:e[L5];return n==null?null:Gn.makeFromBucketSpec(n,t)}function uD(t,e,n,i={}){t.host=`${e}:${n}`;const r=Lr(e);r&&(Sh(`https://${t.host}/b`),xh("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:s}=i;s&&(t._overrideAuthToken=typeof s=="string"?s:jT(s,t.app.options.projectId))}class cD{constructor(e,n,i,r,s,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=XA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=B5,this._maxUploadRetryTime=F5,this._requests=new Set,r!=null?this._bucket=Gn.makeFromBucketSpec(r,this._host):this._bucket=A_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gn.makeFromBucketSpec(this._url,e):this._bucket=A_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){E_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){E_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jc(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new K5(ZA());{const a=aD(e,this._appId,i,r,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const w_="@firebase/storage",S_="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="storage";function hD(t=Rh(),e){t=Xe(t);const i=Ol(t,WA).getImmediate({identifier:e}),r=Ip("storage");return r&&fD(i,...r),i}function fD(t,e,n,i={}){uD(t,e,n,i)}function dD(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new cD(n,i,r,e,xs)}function mD(){Ir(new zi(WA,dD,"PUBLIC").setMultipleInstances(!0)),kn(w_,S_,""),kn(w_,S_,"esm2017")}mD();const id={apiKey:"AIzaSyCZgDjIHYpvLnIGbMPfp4bbRAqtp0rrrQM",authDomain:"runica-dndcompanion.firebaseapp.com",projectId:"runica-dndcompanion",storageBucket:"runica-dndcompanion.firebasestorage.app",messagingSenderId:"1044992835319",appId:"1:1044992835319:web:3ce18324c445ed5e001df2",measurementId:"G-9KC2DBMXK4"};let Cu,nn,dl,pD;if(id.apiKey&&id.projectId)try{Cu=zT(id),nn=EN(Cu),dl=_5(Cu),pD=hD(Cu),console.log("Firebase initialized successfully.")}catch(t){console.error("Error initializing Firebase. Please check your configuration.",t)}else console.warn("Firebase configuration environment variables are not set. Cloud features are disabled.");const gD=t=>Math.ceil(t/4)+1,x_=t=>Math.floor((t-10)/2),yD=t=>[{name:"Acrobatics",ability:"dexterity",proficient:!1,expertise:!1},{name:"Animal Handling",ability:"wisdom",proficient:!1,expertise:!1},{name:"Arcana",ability:"intelligence",proficient:!1,expertise:!1},{name:"Athletics",ability:"strength",proficient:!1,expertise:!1},{name:"Deception",ability:"charisma",proficient:!1,expertise:!1},{name:"History",ability:"intelligence",proficient:!1,expertise:!1},{name:"Insight",ability:"wisdom",proficient:!1,expertise:!1},{name:"Intimidation",ability:"charisma",proficient:!1,expertise:!1},{name:"Investigation",ability:"intelligence",proficient:!1,expertise:!1},{name:"Medicine",ability:"wisdom",proficient:!1,expertise:!1},{name:"Nature",ability:"intelligence",proficient:!1,expertise:!1},{name:"Perception",ability:"wisdom",proficient:!1,expertise:!1},{name:"Performance",ability:"charisma",proficient:!1,expertise:!1},{name:"Persuasion",ability:"charisma",proficient:!1,expertise:!1},{name:"Religion",ability:"intelligence",proficient:!1,expertise:!1},{name:"Sleight of Hand",ability:"dexterity",proficient:!1,expertise:!1},{name:"Stealth",ability:"dexterity",proficient:!1,expertise:!1},{name:"Survival",ability:"wisdom",proficient:!1,expertise:!1}],Rg=()=>{const t={strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10};return{id:`new_${Date.now()}`,lastUpdated:Date.now(),name:"",class:"",subclass:"",level:1,race:"",alignment:"",background:"",playerName:"",experiencePoints:0,abilityScores:t,inspiration:0,proficiencyBonus:gD(1),savingThrows:{strength:{proficient:!1},dexterity:{proficient:!1},constitution:{proficient:!1},intelligence:{proficient:!1},wisdom:{proficient:!1},charisma:{proficient:!1}},skills:yD(),armorClass:10+x_(t.dexterity),initiative:x_(t.dexterity),speed:30,hp:{max:10,current:10,temporary:0},hitDice:{total:"1d8",used:0},deathSaves:{successes:0,failures:0},personalityTraits:"",ideals:"",bonds:"",flaws:"",languages:"Common",attacks:[],currency:{cp:0,sp:0,ep:0,gp:0,pp:0},equipment:[],featuresAndTraits:[],notes:"",dmNotes:"",spellcastingAbility:"",spells:[],spellSlots:{1:{max:0,used:0},2:{max:0,used:0},3:{max:0,used:0},4:{max:0,used:0},5:{max:0,used:0},6:{max:0,used:0},7:{max:0,used:0},8:{max:0,used:0},9:{max:0,used:0}},customResources:[]}},JA="runica-characters",Hl=()=>{try{const t=localStorage.getItem(JA);return t?JSON.parse(t).map(e=>({...Rg(),...e})):[]}catch(t){return console.error("Error reading from local storage",t),[]}},Cg=t=>{try{localStorage.setItem(JA,JSON.stringify(t))}catch(e){console.error("Error saving to local storage",e)}},Ig=()=>!dl||!(nn!=null&&nn.currentUser)?null:v5(dl,"users",nn.currentUser.uid,"characters"),Ng=t=>{const e=Ig();return e?UA(e,t):null},vD=t=>{const e=Ig();return e?U5(N5(e),n=>{const i=n.docs.map(r=>r.data());t(i)}):(t(Hl()),()=>{})},e2=async t=>{if(t==="new")return Rg();const e=Ng(t);if(e){const n=await M5(e);return n.exists()?n.data():null}else return Hl().find(n=>n.id===t)||null},t2=async t=>{const e={...t,lastUpdated:Date.now()},n=Ng(e.id);if(n)await V5(n,e);else{const i=Hl(),r=i.findIndex(s=>s.id===e.id);r>-1?i[r]=e:i.push(e),Cg(i)}return e},n2=async t=>{const e=Ng(t);if(e)await j5(e);else{const n=Hl();Cg(n.filter(i=>i.id!==t))}},_D=async()=>{if(!dl||!(nn!=null&&nn.currentUser))return;const t=Hl();if(t.length===0||!window.confirm("You have local characters saved on this device. Do you want to move them to your account? This will merge them with any existing characters on your account."))return;const e=Ig();if(!e)return;const n=z5(dl),r=(await k5(e)).docs.map(a=>a.data());let s=0;for(const a of t){const o=r.find(u=>u.id===a.id);if(!o||a.lastUpdated>(o.lastUpdated||0)){const u=UA(e,a.id);n.set(u,a),s++}}if(s>0)try{await n.commit(),alert(`${s} character(s) migrated to your account.`),Cg([])}catch(a){console.error("Failed to migrate characters:",a),alert("There was an error migrating your characters. They remain on this device for now.")}else alert("No characters needed to be migrated. Your cloud data is up to date.")},bD=new wi,TD=()=>nn?DI(nn,bD).then(()=>{}):(alert("Firebase is not configured. Cloud sign-in is disabled. Please update firebaseConfig.ts."),Promise.resolve()),ED=()=>nn?hI(nn):Promise.resolve(),AD=t=>nn?cI(nn,t):(t(null),()=>{}),wD=({className:t})=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor",children:[g.jsx("path",{fillRule:"evenodd",d:"M9.315 7.584C12.195 3.883 19.695 4.032 22.425 8.133c.225.33.015.765-.36.765h-2.19c-.39 0-.683-.404-.509-.757C17.58 4.568 11.535 4.818 9.315 7.584zM10.035 15c-2.88 3.701-10.38 3.552-13.11-0.549a.6.6 0 01.36-.765h2.19c.39 0 .683.404.509.757 1.785 3.552 7.83 3.302 10.05-0.21z",clipRule:"evenodd"}),g.jsx("path",{d:"M11.25 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75V12zM12 4.5a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75V4.5zM12 18a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75V18zM4.5 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H5.25a.75.75 0 01-.75-.75V12zM18 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75V12z"})]}),Ns=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.256 1.478l-.209-.035-1.005 13.006a.75.75 0 01-.75.742H5.625a.75.75 0 01-.75-.742L3.87 6.66l-.209.035a.75.75 0 01-.256-1.478A48.567 48.567 0 017.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 013.369 0c1.603.051 2.815 1.387 2.815 2.951zm-6.136-1.452a51.196 51.196 0 013.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 00-6 0v-.113c0-.794.609-1.428 1.364-1.452z",clipRule:"evenodd"})}),Ds=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:t,children:g.jsx("path",{d:"M2.695 14.763l-1.262 3.154a.5.5 0 00.65.65l3.155-1.262a4 4 0 001.343-.885L17.5 5.5a2.121 2.121 0 00-3-3L3.58 13.42a4 4 0 00-.885 1.343z"})}),i2=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),r2=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),SD=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),Gl=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),xD=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),RD=({character:t,onSelect:e,onDelete:n})=>{const i=r=>{r.stopPropagation(),e()};return g.jsxs("div",{onClick:e,className:"bg-zinc-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 hover:shadow-amber-500/20 hover:scale-105 group relative cursor-pointer",children:[g.jsx("div",{className:"h-32 bg-zinc-700/50 relative",children:t.imageUrl?g.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}):g.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-600",children:g.jsx(r2,{className:"w-16 h-16"})})}),g.jsxs("div",{className:"p-5",children:[g.jsx("h3",{className:"text-xl font-bold font-cinzel text-amber-400 truncate",children:t.name||"Unnamed Adventurer"}),g.jsxs("p",{className:"text-zinc-400 capitalize text-sm",children:[t.race||"Race"," ",t.class||"Class"," • Level ",t.level]}),g.jsxs("div",{className:"mt-4 flex items-center gap-4 text-sm text-zinc-300 border-t border-zinc-700 pt-4",children:[g.jsxs("div",{className:"flex items-center gap-1.5",title:"Hit Points",children:[g.jsx("span",{className:"font-bold text-red-400",children:"HP"}),g.jsxs("span",{children:[t.hp.current,"/",t.hp.max]})]}),g.jsxs("div",{className:"flex items-center gap-1.5",title:"Armor Class",children:[g.jsx("span",{className:"font-bold text-sky-400",children:"AC"}),g.jsx("span",{children:t.armorClass})]})]})]}),g.jsxs("div",{className:"absolute top-3 right-3 flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[g.jsx("button",{onClick:i,className:"p-2 rounded-full bg-zinc-700 hover:bg-amber-500 text-zinc-300 hover:text-white transition-colors","aria-label":`Edit ${t.name}`,children:g.jsx(Ds,{className:"w-4 h-4"})}),g.jsx("button",{onClick:n,className:"p-2 rounded-full bg-zinc-700 hover:bg-red-600 text-zinc-300 hover:text-white transition-colors","aria-label":`Delete ${t.name}`,children:g.jsx(Ns,{className:"w-4 h-4"})})]})]})},CD=({user:t})=>t?g.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("img",{src:t.photoURL||void 0,alt:"User",className:"w-8 h-8 rounded-full"}),g.jsx("span",{className:"text-zinc-300 hidden sm:inline",children:t.displayName||t.email})]}),g.jsx("button",{onClick:()=>ED(),className:"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 rounded-md text-white transition-colors",children:"Sign Out"})]}):g.jsxs("button",{onClick:()=>TD(),className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 rounded-md text-white font-bold transition-colors flex items-center gap-2",children:[g.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("path",{d:"M22.56,12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26,1.37-1.04,2.53-2.21,3.31v2.77h3.57c2.08-1.92,3.28-4.74,3.28-8.09Z"}),g.jsx("path",{d:"M12,23c2.97,0,5.46-.98,7.28-2.66l-3.57-2.77c-.98.66-2.23,1.06-3.71,1.06-2.86,0-5.29-1.93-6.16-4.53H2.18v2.84C3.99,20.53,7.7,23,12,23Z"}),g.jsx("path",{d:"M5.84,14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43,8.55,1,10.22,1,12s.43,3.45,1.18,4.93l3.66-2.84Z"}),g.jsx("path",{d:"M12,5.38c1.62,0,3.06.56,4.21,1.64l3.15-3.15C17.45,2.09,14.97,1,12,1,7.7,1,3.99,3.47,2.18,7.07l3.66,2.84c.87-2.6,3.3-4.53,6.16-4.53Z"})]}),"Sign in with Google"]}),ID=({onSelectCharacter:t,currentUser:e})=>{const[n,i]=ne.useState([]),[r,s]=ne.useState(!0);ne.useEffect(()=>{s(!0);const u=vD(h=>{i(h.sort((c,d)=>c.name.localeCompare(d.name))),s(!1)});return()=>u()},[e]);const a=()=>{t("new")},o=async(u,h)=>{window.confirm(`Are you sure you want to delete ${h}? This cannot be undone.`)&&await n2(u)};return r?g.jsx("div",{className:"flex justify-center items-center h-screen",children:g.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})}):g.jsxs("div",{className:"p-4 sm:p-8 max-w-7xl mx-auto",children:[g.jsxs("header",{className:"flex justify-between items-center mb-8",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-amber-400 font-cinzel tracking-wider",children:"RUNICA"}),g.jsx("p",{className:"text-zinc-400 mt-1",children:"Your D&D Companion"})]}),g.jsx(CD,{user:e})]}),g.jsxs("div",{className:"flex flex-col items-center",children:[g.jsxs("button",{onClick:a,className:"mb-10 flex items-center gap-2 px-6 py-3 bg-amber-600 text-white font-bold rounded-lg shadow-md hover:bg-amber-500 transition-all duration-300 transform hover:scale-105",children:[g.jsx(xD,{className:"w-5 h-5"}),"Create New Character"]}),n.length>0?g.jsx("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(u=>g.jsx(RD,{character:u,onSelect:()=>t(u.id),onDelete:h=>{h.stopPropagation(),o(u.id,u.name)}},u.id))}):g.jsxs("div",{className:"text-center w-full max-w-2xl mt-8 py-16 px-6 bg-zinc-800/50 rounded-lg",children:[g.jsx("h2",{className:"text-2xl font-semibold text-zinc-300 font-cinzel",children:"Your adventure awaits!"}),g.jsxs("p",{className:"text-zinc-400 mt-2",children:[e?"You have no characters synced to this account.":"You have no local characters.",g.jsx("br",{}),"Click the button above to forge your first hero."]})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND="type.googleapis.com/google.protobuf.Int64Value",DD="type.googleapis.com/google.protobuf.UInt64Value";function s2(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function eh(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>eh(e));if(typeof t=="function"||typeof t=="object")return s2(t,e=>eh(e));throw new Error("Data cannot be encoded in JSON: "+t)}function ja(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case ND:case DD:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>ja(e)):typeof t=="function"||typeof t=="object"?s2(t,e=>ja(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rn extends Xn{constructor(e,n,i){super(`${Dg}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,rn.prototype)}}function OD(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function th(t,e){let n=OD(t),i=n,r;try{const s=e&&e.error;if(s){const a=s.status;if(typeof a=="string"){if(!R_[a])return new rn("internal","internal");n=R_[a],i=a}const o=s.message;typeof o=="string"&&(i=o),r=s.details,r!==void 0&&(r=ja(r))}}catch{}return n==="ok"?null:new rn(n,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n,i,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,pn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(s=>this.auth=s,()=>{}),this.messaging||i.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r==null||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="us-central1",kD=/^data: (.*?)(?:\n|$)/;function VD(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new rn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class jD{constructor(e,n,i,r,s=Cm,a=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new MD(e,n,i,r),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=Cm}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function UD(t,e,n){const i=Lr(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(Sh(t.emulatorOrigin),xh("Functions",!0))}function PD(t,e,n){const i=r=>LD(t,e,r,{});return i.stream=(r,s)=>FD(t,e,r,s),i}async function zD(t,e,n,i){n["Content-Type"]="application/json";let r;try{r=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await r.json()}catch{}return{status:r.status,json:s}}async function a2(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function LD(t,e,n,i){const r=t._url(e);return BD(t,r,n,i)}async function BD(t,e,n,i){n=eh(n);const r={data:n},s=await a2(t,i),a=i.timeout||7e4,o=VD(a),u=await Promise.race([zD(e,r,s,t.fetchImpl),o.promise,t.cancelAllRequests]);if(o.cancel(),!u)throw new rn("cancelled","Firebase Functions instance was deleted.");const h=th(u.status,u.json);if(h)throw h;if(!u.json)throw new rn("internal","Response is not valid JSON object.");let c=u.json.data;if(typeof c>"u"&&(c=u.json.result),typeof c>"u")throw new rn("internal","Response is missing data field.");return{data:ja(c)}}function FD(t,e,n,i){const r=t._url(e);return qD(t,r,n,i||{})}async function qD(t,e,n,i){var r;n=eh(n);const s={data:n},a=await a2(t,i);a["Content-Type"]="application/json",a.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:a,signal:i==null?void 0:i.signal})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const O=new rn("cancelled","Request was cancelled.");return{data:Promise.reject(O),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(O)}}}}}}const E=th(0,null);return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}let u,h;const c=new Promise((p,E)=>{u=p,h=E});(r=i==null?void 0:i.signal)===null||r===void 0||r.addEventListener("abort",()=>{const p=new rn("cancelled","Request was cancelled.");h(p)});const d=o.body.getReader(),f=HD(d,u,h,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const p=f.getReader();return{async next(){const{value:E,done:O}=await p.read();return{value:E,done:O}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:c}}function HD(t,e,n,i){const r=(a,o)=>{const u=a.match(kD);if(!u)return;const h=u[1];try{const c=JSON.parse(h);if("result"in c){e(ja(c.result));return}if("message"in c){o.enqueue(ja(c.message));return}if("error"in c){const d=th(0,c);o.error(d),n(d);return}}catch(c){if(c instanceof rn){o.error(c),n(c);return}}},s=new TextDecoder;return new ReadableStream({start(a){let o="";return u();async function u(){if(i!=null&&i.aborted){const h=new rn("cancelled","Request was cancelled");return a.error(h),n(h),Promise.resolve()}try{const{value:h,done:c}=await t.read();if(c){o.trim()&&r(o.trim(),a),a.close();return}if(i!=null&&i.aborted){const f=new rn("cancelled","Request was cancelled");a.error(f),n(f),await t.cancel();return}o+=s.decode(h,{stream:!0});const d=o.split(`
`);o=d.pop()||"";for(const f of d)f.trim()&&r(f.trim(),a);return u()}catch(h){const c=h instanceof rn?h:th(0,null);a.error(c),n(c)}}},cancel(){return t.cancel()}})}const C_="@firebase/functions",I_="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="auth-internal",$D="app-check-internal",QD="messaging-internal";function YD(t){const e=(n,{instanceIdentifier:i})=>{const r=n.getProvider("app").getImmediate(),s=n.getProvider(GD),a=n.getProvider(QD),o=n.getProvider($D);return new jD(r,s,a,o,i)};Ir(new zi(Dg,e,"PUBLIC").setMultipleInstances(!0)),kn(C_,I_,t),kn(C_,I_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t=Rh(),e=Cm){const i=Ol(Xe(t),Dg).getImmediate({identifier:e}),r=Ip("functions");return r&&XD(i,...r),i}function XD(t,e,n){UD(Xe(t),e,n)}function ZD(t,e,n){return PD(Xe(t),e)}YD();const WD={personalityTraits:"Generazione AI fallita. Impossibile contattare il servizio.",ideals:"Errore.",bonds:"Errore.",flaws:"Errore."},JD=ZD(KD(),"callGemini"),e6=async(t,e)=>{const{name:n,race:i,class:r,background:s,alignment:a}=t,o=`
     Generate personality aspects for a Dungeons & Dragons character.
     Based on the following details:
     - Name: ${n}
     - Race: ${i}
     - Class: ${r}
     - Background: ${s}
     - Alignment: ${a}
     ${e?`
- Additional Theme: "${e}"`:""}

     Return a JSON object with four keys: "personalityTraits", "ideals", "bonds", and "flaws".
     - "personalityTraits": A short paragraph describing the character's general demeanor.
     - "ideals": A sentence describing a core belief.
     - "bonds": A sentence about something or someone the character cares deeply about.
     - "flaws": A sentence describing a significant weakness or fear.
   `;try{console.log("Calling Cloud Function 'callGemini'...");const u=await JD(o);if(!u.data.success||!u.data.response)throw new Error("La Cloud Function ha riportato un errore: "+u.data.response);const h=u.data.response.trim(),c=JSON.parse(h);return{personalityTraits:c.personalityTraits||"",ideals:c.ideals||"",bonds:c.bonds||"",flaws:c.flaws||""}}catch(u){return console.error("Errore durante la chiamata alla Cloud Function 'callGemini':",u),WD}};function t6(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in t)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(t)}function o2(t,e){return new Promise(function(n,i){let r;return n6(t).then(function(s){try{return r=s,n(new Blob([e.slice(0,2),r,e.slice(2)],{type:"image/jpeg"}))}catch(a){return i(a)}},i)})}const n6=t=>new Promise((e,n)=>{const i=new FileReader;i.addEventListener("load",({target:{result:r}})=>{const s=new DataView(r);let a=0;if(s.getUint16(a)!==65496)return n("not a valid JPEG");for(a+=2;;){const o=s.getUint16(a);if(o===65498)break;const u=s.getUint16(a+2);if(o===65505&&s.getUint32(a+4)===1165519206){const h=a+10;let c;switch(s.getUint16(h)){case 18761:c=!0;break;case 19789:c=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(h+2,c)!==42)return n("TIFF header contains invalid version");const d=s.getUint32(h+4,c),f=h+d+2+12*s.getUint16(h+d,c);for(let p=h+d+2;p<f;p+=12)if(s.getUint16(p,c)==274){if(s.getUint16(p+2,c)!==3)return n("Orientation data type is invalid");if(s.getUint32(p+4,c)!==1)return n("Orientation data count is invalid");s.setUint16(p+8,1,c);break}return e(r.slice(a,a+2+u))}a+=2+u}return e(new Blob)}),i.readAsArrayBuffer(t)});var nh={},i6={get exports(){return nh},set exports(t){nh=t}};(function(t){var e,n,i={};i6.exports=i,i.parse=function(r,s){for(var a=i.bin.readUshort,o=i.bin.readUint,u=0,h={},c=new Uint8Array(r),d=c.length-4;o(c,d)!=101010256;)d--;u=d,u+=4;var f=a(c,u+=4);a(c,u+=2);var p=o(c,u+=2),E=o(c,u+=4);u+=4,u=E;for(var O=0;O<f;O++){o(c,u),u+=4,u+=4,u+=4,o(c,u+=4),p=o(c,u+=4);var V=o(c,u+=4),b=a(c,u+=4),x=a(c,u+2),C=a(c,u+4);u+=6;var M=o(c,u+=8);u+=4,u+=b+x+C,i._readLocal(c,M,h,p,V,s)}return h},i._readLocal=function(r,s,a,o,u,h){var c=i.bin.readUshort,d=i.bin.readUint;d(r,s),c(r,s+=4),c(r,s+=2);var f=c(r,s+=2);d(r,s+=2),d(r,s+=4),s+=4;var p=c(r,s+=8),E=c(r,s+=2);s+=2;var O=i.bin.readUTF8(r,s,p);if(s+=p,s+=E,h)a[O]={size:u,csize:o};else{var V=new Uint8Array(r.buffer,s);if(f==0)a[O]=new Uint8Array(V.buffer.slice(s,s+o));else{if(f!=8)throw"unknown compression method: "+f;var b=new Uint8Array(u);i.inflateRaw(V,b),a[O]=b}}},i.inflateRaw=function(r,s){return i.F.inflate(r,s)},i.inflate=function(r,s){return r[0],r[1],i.inflateRaw(new Uint8Array(r.buffer,r.byteOffset+2,r.length-6),s)},i.deflate=function(r,s){s==null&&(s={level:6});var a=0,o=new Uint8Array(50+Math.floor(1.1*r.length));o[a]=120,o[a+1]=156,a+=2,a=i.F.deflateRaw(r,o,a,s.level);var u=i.adler(r,0,r.length);return o[a+0]=u>>>24&255,o[a+1]=u>>>16&255,o[a+2]=u>>>8&255,o[a+3]=u>>>0&255,new Uint8Array(o.buffer,0,a+4)},i.deflateRaw=function(r,s){s==null&&(s={level:6});var a=new Uint8Array(50+Math.floor(1.1*r.length)),o=i.F.deflateRaw(r,a,o,s.level);return new Uint8Array(a.buffer,0,o)},i.encode=function(r,s){s==null&&(s=!1);var a=0,o=i.bin.writeUint,u=i.bin.writeUshort,h={};for(var c in r){var d=!i._noNeed(c)&&!s,f=r[c],p=i.crc.crc(f,0,f.length);h[c]={cpr:d,usize:f.length,crc:p,file:d?i.deflateRaw(f):f}}for(var c in h)a+=h[c].file.length+30+46+2*i.bin.sizeUTF8(c);a+=22;var E=new Uint8Array(a),O=0,V=[];for(var c in h){var b=h[c];V.push(O),O=i._writeHeader(E,O,c,b,0)}var x=0,C=O;for(var c in h)b=h[c],V.push(O),O=i._writeHeader(E,O,c,b,1,V[x++]);var M=O-C;return o(E,O,101010256),O+=4,u(E,O+=4,x),u(E,O+=2,x),o(E,O+=2,M),o(E,O+=4,C),O+=4,O+=2,E.buffer},i._noNeed=function(r){var s=r.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},i._writeHeader=function(r,s,a,o,u,h){var c=i.bin.writeUint,d=i.bin.writeUshort,f=o.file;return c(r,s,u==0?67324752:33639248),s+=4,u==1&&(s+=2),d(r,s,20),d(r,s+=2,0),d(r,s+=2,o.cpr?8:0),c(r,s+=2,0),c(r,s+=4,o.crc),c(r,s+=4,f.length),c(r,s+=4,o.usize),d(r,s+=4,i.bin.sizeUTF8(a)),d(r,s+=2,0),s+=2,u==1&&(s+=2,s+=2,c(r,s+=6,h),s+=4),s+=i.bin.writeUTF8(r,s,a),u==0&&(r.set(f,s),s+=f.length),s},i.crc={table:function(){for(var r=new Uint32Array(256),s=0;s<256;s++){for(var a=s,o=0;o<8;o++)1&a?a=3988292384^a>>>1:a>>>=1;r[s]=a}return r}(),update:function(r,s,a,o){for(var u=0;u<o;u++)r=i.crc.table[255&(r^s[a+u])]^r>>>8;return r},crc:function(r,s,a){return 4294967295^i.crc.update(4294967295,r,s,a)}},i.adler=function(r,s,a){for(var o=1,u=0,h=s,c=s+a;h<c;){for(var d=Math.min(h+5552,c);h<d;)u+=o+=r[h++];o%=65521,u%=65521}return u<<16|o},i.bin={readUshort:function(r,s){return r[s]|r[s+1]<<8},writeUshort:function(r,s,a){r[s]=255&a,r[s+1]=a>>8&255},readUint:function(r,s){return 16777216*r[s+3]+(r[s+2]<<16|r[s+1]<<8|r[s])},writeUint:function(r,s,a){r[s]=255&a,r[s+1]=a>>8&255,r[s+2]=a>>16&255,r[s+3]=a>>24&255},readASCII:function(r,s,a){for(var o="",u=0;u<a;u++)o+=String.fromCharCode(r[s+u]);return o},writeASCII:function(r,s,a){for(var o=0;o<a.length;o++)r[s+o]=a.charCodeAt(o)},pad:function(r){return r.length<2?"0"+r:r},readUTF8:function(r,s,a){for(var o,u="",h=0;h<a;h++)u+="%"+i.bin.pad(r[s+h].toString(16));try{o=decodeURIComponent(u)}catch{return i.bin.readASCII(r,s,a)}return o},writeUTF8:function(r,s,a){for(var o=a.length,u=0,h=0;h<o;h++){var c=a.charCodeAt(h);if(!(4294967168&c))r[s+u]=c,u++;else if(!(4294965248&c))r[s+u]=192|c>>6,r[s+u+1]=128|c>>0&63,u+=2;else if(!(4294901760&c))r[s+u]=224|c>>12,r[s+u+1]=128|c>>6&63,r[s+u+2]=128|c>>0&63,u+=3;else{if(4292870144&c)throw"e";r[s+u]=240|c>>18,r[s+u+1]=128|c>>12&63,r[s+u+2]=128|c>>6&63,r[s+u+3]=128|c>>0&63,u+=4}}return u},sizeUTF8:function(r){for(var s=r.length,a=0,o=0;o<s;o++){var u=r.charCodeAt(o);if(!(4294967168&u))a++;else if(!(4294965248&u))a+=2;else if(!(4294901760&u))a+=3;else{if(4292870144&u)throw"e";a+=4}}return a}},i.F={},i.F.deflateRaw=function(r,s,a,o){var u=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],h=i.F.U,c=i.F._goodIndex;i.F._hash;var d=i.F._putsE,f=0,p=a<<3,E=0,O=r.length;if(o==0){for(;f<O;)d(s,p,f+(w=Math.min(65535,O-f))==O?1:0),p=i.F._copyExact(r,f,w,s,p+8),f+=w;return p>>>3}var V=h.lits,b=h.strt,x=h.prev,C=0,M=0,j=0,k=0,S=0,y=0;for(O>2&&(b[y=i.F._hash(r,0)]=0),f=0;f<O;f++){if(S=y,f+1<O-2){y=i.F._hash(r,f+1);var v=f+1&32767;x[v]=b[y],b[y]=v}if(E<=f){(C>14e3||M>26697)&&O-f>100&&(E<f&&(V[C]=f-E,C+=2,E=f),p=i.F._writeBlock(f==O-1||E==O?1:0,V,C,k,r,j,f-j,s,p),C=M=k=0,j=f);var T=0;f<O-2&&(T=i.F._bestMatch(r,f,x,S,Math.min(u[2],O-f),u[3]));var w=T>>>16,R=65535&T;if(T!=0){R=65535&T;var A=c(w=T>>>16,h.of0);h.lhst[257+A]++;var U=c(R,h.df0);h.dhst[U]++,k+=h.exb[A]+h.dxb[U],V[C]=w<<23|f-E,V[C+1]=R<<16|A<<8|U,C+=2,E=f+w}else h.lhst[r[f]]++;M++}}for(j==f&&r.length!=0||(E<f&&(V[C]=f-E,C+=2,E=f),p=i.F._writeBlock(1,V,C,k,r,j,f-j,s,p),C=0,M=0,C=M=k=0,j=f);7&p;)p++;return p>>>3},i.F._bestMatch=function(r,s,a,o,u,h){var c=32767&s,d=a[c],f=c-d+32768&32767;if(d==c||o!=i.F._hash(r,s-f))return 0;for(var p=0,E=0,O=Math.min(32767,s);f<=O&&--h!=0&&d!=c;){if(p==0||r[s+p]==r[s+p-f]){var V=i.F._howLong(r,s,f);if(V>p){if(E=f,(p=V)>=u)break;f+2<V&&(V=f+2);for(var b=0,x=0;x<V-2;x++){var C=s-f+x+32768&32767,M=C-a[C]+32768&32767;M>b&&(b=M,d=C)}}}f+=(c=d)-(d=a[c])+32768&32767}return p<<16|E},i.F._howLong=function(r,s,a){if(r[s]!=r[s-a]||r[s+1]!=r[s+1-a]||r[s+2]!=r[s+2-a])return 0;var o=s,u=Math.min(r.length,s+258);for(s+=3;s<u&&r[s]==r[s-a];)s++;return s-o},i.F._hash=function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(r,s,a,o,u,h,c,d,f){var p,E,O,V,b,x,C,M,j,k=i.F.U,S=i.F._putsF,y=i.F._putsE;k.lhst[256]++,E=(p=i.F.getTrees())[0],O=p[1],V=p[2],b=p[3],x=p[4],C=p[5],M=p[6],j=p[7];var v=32+(f+3&7?8-(f+3&7):0)+(c<<3),T=o+i.F.contSize(k.fltree,k.lhst)+i.F.contSize(k.fdtree,k.dhst),w=o+i.F.contSize(k.ltree,k.lhst)+i.F.contSize(k.dtree,k.dhst);w+=14+3*C+i.F.contSize(k.itree,k.ihst)+(2*k.ihst[16]+3*k.ihst[17]+7*k.ihst[18]);for(var R=0;R<286;R++)k.lhst[R]=0;for(R=0;R<30;R++)k.dhst[R]=0;for(R=0;R<19;R++)k.ihst[R]=0;var A=v<T&&v<w?0:T<w?1:2;if(S(d,f,r),S(d,f+1,A),f+=3,A==0){for(;7&f;)f++;f=i.F._copyExact(u,h,c,d,f)}else{var U,B;if(A==1&&(U=k.fltree,B=k.fdtree),A==2){i.F.makeCodes(k.ltree,E),i.F.revCodes(k.ltree,E),i.F.makeCodes(k.dtree,O),i.F.revCodes(k.dtree,O),i.F.makeCodes(k.itree,V),i.F.revCodes(k.itree,V),U=k.ltree,B=k.dtree,y(d,f,b-257),y(d,f+=5,x-1),y(d,f+=5,C-4),f+=4;for(var N=0;N<C;N++)y(d,f+3*N,k.itree[1+(k.ordr[N]<<1)]);f+=3*C,f=i.F._codeTiny(M,k.itree,d,f),f=i.F._codeTiny(j,k.itree,d,f)}for(var I=h,q=0;q<a;q+=2){for(var z=s[q],G=z>>>23,ee=I+(8388607&z);I<ee;)f=i.F._writeLit(u[I++],U,d,f);if(G!=0){var P=s[q+1],Q=P>>16,F=P>>8&255,H=255&P;y(d,f=i.F._writeLit(257+F,U,d,f),G-k.of0[F]),f+=k.exb[F],S(d,f=i.F._writeLit(H,B,d,f),Q-k.df0[H]),f+=k.dxb[H],I+=G}}f=i.F._writeLit(256,U,d,f)}return f},i.F._copyExact=function(r,s,a,o,u){var h=u>>>3;return o[h]=a,o[h+1]=a>>>8,o[h+2]=255-o[h],o[h+3]=255-o[h+1],h+=4,o.set(new Uint8Array(r.buffer,s,a),h),u+(a+4<<3)},i.F.getTrees=function(){for(var r=i.F.U,s=i.F._hufTree(r.lhst,r.ltree,15),a=i.F._hufTree(r.dhst,r.dtree,15),o=[],u=i.F._lenCodes(r.ltree,o),h=[],c=i.F._lenCodes(r.dtree,h),d=0;d<o.length;d+=2)r.ihst[o[d]]++;for(d=0;d<h.length;d+=2)r.ihst[h[d]]++;for(var f=i.F._hufTree(r.ihst,r.itree,7),p=19;p>4&&r.itree[1+(r.ordr[p-1]<<1)]==0;)p--;return[s,a,f,u,c,p,o,h]},i.F.getSecond=function(r){for(var s=[],a=0;a<r.length;a+=2)s.push(r[a+1]);return s},i.F.nonZero=function(r){for(var s="",a=0;a<r.length;a+=2)r[a+1]!=0&&(s+=(a>>1)+",");return s},i.F.contSize=function(r,s){for(var a=0,o=0;o<s.length;o++)a+=s[o]*r[1+(o<<1)];return a},i.F._codeTiny=function(r,s,a,o){for(var u=0;u<r.length;u+=2){var h=r[u],c=r[u+1];o=i.F._writeLit(h,s,a,o);var d=h==16?2:h==17?3:7;h>15&&(i.F._putsE(a,o,c,d),o+=d)}return o},i.F._lenCodes=function(r,s){for(var a=r.length;a!=2&&r[a-1]==0;)a-=2;for(var o=0;o<a;o+=2){var u=r[o+1],h=o+3<a?r[o+3]:-1,c=o+5<a?r[o+5]:-1,d=o==0?-1:r[o-1];if(u==0&&h==u&&c==u){for(var f=o+5;f+2<a&&r[f+2]==u;)f+=2;(p=Math.min(f+1-o>>>1,138))<11?s.push(17,p-3):s.push(18,p-11),o+=2*p-2}else if(u==d&&h==u&&c==u){for(f=o+5;f+2<a&&r[f+2]==u;)f+=2;var p=Math.min(f+1-o>>>1,6);s.push(16,p-3),o+=2*p-2}else s.push(u,0)}return a>>>1},i.F._hufTree=function(r,s,a){var o=[],u=r.length,h=s.length,c=0;for(c=0;c<h;c+=2)s[c]=0,s[c+1]=0;for(c=0;c<u;c++)r[c]!=0&&o.push({lit:c,f:r[c]});var d=o.length,f=o.slice(0);if(d==0)return 0;if(d==1){var p=o[0].lit;return f=p==0?1:0,s[1+(p<<1)]=1,s[1+(f<<1)]=1,1}o.sort(function(M,j){return M.f-j.f});var E=o[0],O=o[1],V=0,b=1,x=2;for(o[0]={lit:-1,f:E.f+O.f,l:E,r:O,d:0};b!=d-1;)E=V!=b&&(x==d||o[V].f<o[x].f)?o[V++]:o[x++],O=V!=b&&(x==d||o[V].f<o[x].f)?o[V++]:o[x++],o[b++]={lit:-1,f:E.f+O.f,l:E,r:O};var C=i.F.setDepth(o[b-1],0);for(C>a&&(i.F.restrictDepth(f,a,C),C=a),c=0;c<d;c++)s[1+(f[c].lit<<1)]=f[c].d;return C},i.F.setDepth=function(r,s){return r.lit!=-1?(r.d=s,s):Math.max(i.F.setDepth(r.l,s+1),i.F.setDepth(r.r,s+1))},i.F.restrictDepth=function(r,s,a){var o=0,u=1<<a-s,h=0;for(r.sort(function(d,f){return f.d==d.d?d.f-f.f:f.d-d.d}),o=0;o<r.length&&r[o].d>s;o++){var c=r[o].d;r[o].d=s,h+=u-(1<<a-c)}for(h>>>=a-s;h>0;)(c=r[o].d)<s?(r[o].d++,h-=1<<s-c-1):o++;for(;o>=0;o--)r[o].d==s&&h<0&&(r[o].d--,h++);h!=0&&console.log("debt left")},i.F._goodIndex=function(r,s){var a=0;return s[16|a]<=r&&(a|=16),s[8|a]<=r&&(a|=8),s[4|a]<=r&&(a|=4),s[2|a]<=r&&(a|=2),s[1|a]<=r&&(a|=1),a},i.F._writeLit=function(r,s,a,o){return i.F._putsF(a,o,s[r<<1]),o+s[1+(r<<1)]},i.F.inflate=function(r,s){var a=Uint8Array;if(r[0]==3&&r[1]==0)return s||new a(0);var o=i.F,u=o._bitsF,h=o._bitsE,c=o._decodeTiny,d=o.makeCodes,f=o.codes2map,p=o._get17,E=o.U,O=s==null;O&&(s=new a(r.length>>>2<<3));for(var V,b,x=0,C=0,M=0,j=0,k=0,S=0,y=0,v=0,T=0;x==0;)if(x=u(r,T,1),C=u(r,T+1,2),T+=3,C!=0){if(O&&(s=i.F._check(s,v+(1<<17))),C==1&&(V=E.flmap,b=E.fdmap,S=511,y=31),C==2){M=h(r,T,5)+257,j=h(r,T+5,5)+1,k=h(r,T+10,4)+4,T+=14;for(var w=0;w<38;w+=2)E.itree[w]=0,E.itree[w+1]=0;var R=1;for(w=0;w<k;w++){var A=h(r,T+3*w,3);E.itree[1+(E.ordr[w]<<1)]=A,A>R&&(R=A)}T+=3*k,d(E.itree,R),f(E.itree,R,E.imap),V=E.lmap,b=E.dmap,T=c(E.imap,(1<<R)-1,M+j,r,T,E.ttree);var U=o._copyOut(E.ttree,0,M,E.ltree);S=(1<<U)-1;var B=o._copyOut(E.ttree,M,j,E.dtree);y=(1<<B)-1,d(E.ltree,U),f(E.ltree,U,V),d(E.dtree,B),f(E.dtree,B,b)}for(;;){var N=V[p(r,T)&S];T+=15&N;var I=N>>>4;if(!(I>>>8))s[v++]=I;else{if(I==256)break;var q=v+I-254;if(I>264){var z=E.ldef[I-257];q=v+(z>>>3)+h(r,T,7&z),T+=7&z}var G=b[p(r,T)&y];T+=15&G;var ee=G>>>4,P=E.ddef[ee],Q=(P>>>4)+u(r,T,15&P);for(T+=15&P,O&&(s=i.F._check(s,v+(1<<17)));v<q;)s[v]=s[v++-Q],s[v]=s[v++-Q],s[v]=s[v++-Q],s[v]=s[v++-Q];v=q}}}else{7&T&&(T+=8-(7&T));var F=4+(T>>>3),H=r[F-4]|r[F-3]<<8;O&&(s=i.F._check(s,v+H)),s.set(new a(r.buffer,r.byteOffset+F,H),v),T=F+H<<3,v+=H}return s.length==v?s:s.slice(0,v)},i.F._check=function(r,s){var a=r.length;if(s<=a)return r;var o=new Uint8Array(Math.max(a<<1,s));return o.set(r,0),o},i.F._decodeTiny=function(r,s,a,o,u,h){for(var c=i.F._bitsE,d=i.F._get17,f=0;f<a;){var p=r[d(o,u)&s];u+=15&p;var E=p>>>4;if(E<=15)h[f]=E,f++;else{var O=0,V=0;E==16?(V=3+c(o,u,2),u+=2,O=h[f-1]):E==17?(V=3+c(o,u,3),u+=3):E==18&&(V=11+c(o,u,7),u+=7);for(var b=f+V;f<b;)h[f]=O,f++}}return u},i.F._copyOut=function(r,s,a,o){for(var u=0,h=0,c=o.length>>>1;h<a;){var d=r[h+s];o[h<<1]=0,o[1+(h<<1)]=d,d>u&&(u=d),h++}for(;h<c;)o[h<<1]=0,o[1+(h<<1)]=0,h++;return u},i.F.makeCodes=function(r,s){for(var a,o,u,h,c=i.F.U,d=r.length,f=c.bl_count,p=0;p<=s;p++)f[p]=0;for(p=1;p<d;p+=2)f[r[p]]++;var E=c.next_code;for(a=0,f[0]=0,o=1;o<=s;o++)a=a+f[o-1]<<1,E[o]=a;for(u=0;u<d;u+=2)(h=r[u+1])!=0&&(r[u]=E[h],E[h]++)},i.F.codes2map=function(r,s,a){for(var o=r.length,u=i.F.U.rev15,h=0;h<o;h+=2)if(r[h+1]!=0)for(var c=h>>1,d=r[h+1],f=c<<4|d,p=s-d,E=r[h]<<p,O=E+(1<<p);E!=O;)a[u[E]>>>15-s]=f,E++},i.F.revCodes=function(r,s){for(var a=i.F.U.rev15,o=15-s,u=0;u<r.length;u+=2){var h=r[u]<<s-r[u+1];r[u]=a[h]>>>o}},i.F._putsE=function(r,s,a){a<<=7&s;var o=s>>>3;r[o]|=a,r[o+1]|=a>>>8},i.F._putsF=function(r,s,a){a<<=7&s;var o=s>>>3;r[o]|=a,r[o+1]|=a>>>8,r[o+2]|=a>>>16},i.F._bitsE=function(r,s,a){return(r[s>>>3]|r[1+(s>>>3)]<<8)>>>(7&s)&(1<<a)-1},i.F._bitsF=function(r,s,a){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16)>>>(7&s)&(1<<a)-1},i.F._get17=function(r,s){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16)>>>(7&s)},i.F._get25=function(r,s){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16|r[3+(s>>>3)]<<24)>>>(7&s)},i.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var r=i.F.U,s=0;s<32768;s++){var a=s;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,r.rev15[s]=(a>>>16|a<<16)>>>17}function o(u,h,c){for(;h--!=0;)u.push(0,c)}for(s=0;s<32;s++)r.ldef[s]=r.of0[s]<<3|r.exb[s],r.ddef[s]=r.df0[s]<<4|r.dxb[s];o(r.fltree,144,8),o(r.fltree,112,9),o(r.fltree,24,7),o(r.fltree,8,8),i.F.makeCodes(r.fltree,9),i.F.codes2map(r.fltree,9,r.flmap),i.F.revCodes(r.fltree,9),o(r.fdtree,32,5),i.F.makeCodes(r.fdtree,5),i.F.codes2map(r.fdtree,5,r.fdmap),i.F.revCodes(r.fdtree,5),o(r.itree,19,0),o(r.ltree,286,0),o(r.dtree,30,0),o(r.ttree,320,0)}()})();var r6=t6({__proto__:null,default:nh},[nh]);const Fn=function(){var t={nextZero(c,d){for(;c[d]!=0;)d++;return d},readUshort:(c,d)=>c[d]<<8|c[d+1],writeUshort(c,d,f){c[d]=f>>8&255,c[d+1]=255&f},readUint:(c,d)=>16777216*c[d]+(c[d+1]<<16|c[d+2]<<8|c[d+3]),writeUint(c,d,f){c[d]=f>>24&255,c[d+1]=f>>16&255,c[d+2]=f>>8&255,c[d+3]=255&f},readASCII(c,d,f){let p="";for(let E=0;E<f;E++)p+=String.fromCharCode(c[d+E]);return p},writeASCII(c,d,f){for(let p=0;p<f.length;p++)c[d+p]=f.charCodeAt(p)},readBytes(c,d,f){const p=[];for(let E=0;E<f;E++)p.push(c[d+E]);return p},pad:c=>c.length<2?`0${c}`:c,readUTF8(c,d,f){let p,E="";for(let O=0;O<f;O++)E+=`%${t.pad(c[d+O].toString(16))}`;try{p=decodeURIComponent(E)}catch{return t.readASCII(c,d,f)}return p}};function e(c,d,f,p){const E=d*f,O=s(p),V=Math.ceil(d*O/8),b=new Uint8Array(4*E),x=new Uint32Array(b.buffer),{ctype:C}=p,{depth:M}=p,j=t.readUshort;if(C==6){const z=E<<2;if(M==8)for(var k=0;k<z;k+=4)b[k]=c[k],b[k+1]=c[k+1],b[k+2]=c[k+2],b[k+3]=c[k+3];if(M==16)for(k=0;k<z;k++)b[k]=c[k<<1]}else if(C==2){const z=p.tabs.tRNS;if(z==null){if(M==8)for(k=0;k<E;k++){var S=3*k;x[k]=255<<24|c[S+2]<<16|c[S+1]<<8|c[S]}if(M==16)for(k=0;k<E;k++)S=6*k,x[k]=255<<24|c[S+4]<<16|c[S+2]<<8|c[S]}else{var y=z[0];const G=z[1],ee=z[2];if(M==8)for(k=0;k<E;k++){var v=k<<2;S=3*k,x[k]=255<<24|c[S+2]<<16|c[S+1]<<8|c[S],c[S]==y&&c[S+1]==G&&c[S+2]==ee&&(b[v+3]=0)}if(M==16)for(k=0;k<E;k++)v=k<<2,S=6*k,x[k]=255<<24|c[S+4]<<16|c[S+2]<<8|c[S],j(c,S)==y&&j(c,S+2)==G&&j(c,S+4)==ee&&(b[v+3]=0)}}else if(C==3){const z=p.tabs.PLTE,G=p.tabs.tRNS,ee=G?G.length:0;if(M==1)for(var T=0;T<f;T++){var w=T*V,R=T*d;for(k=0;k<d;k++){v=R+k<<2;var A=3*(U=c[w+(k>>3)]>>7-((7&k)<<0)&1);b[v]=z[A],b[v+1]=z[A+1],b[v+2]=z[A+2],b[v+3]=U<ee?G[U]:255}}if(M==2)for(T=0;T<f;T++)for(w=T*V,R=T*d,k=0;k<d;k++)v=R+k<<2,A=3*(U=c[w+(k>>2)]>>6-((3&k)<<1)&3),b[v]=z[A],b[v+1]=z[A+1],b[v+2]=z[A+2],b[v+3]=U<ee?G[U]:255;if(M==4)for(T=0;T<f;T++)for(w=T*V,R=T*d,k=0;k<d;k++)v=R+k<<2,A=3*(U=c[w+(k>>1)]>>4-((1&k)<<2)&15),b[v]=z[A],b[v+1]=z[A+1],b[v+2]=z[A+2],b[v+3]=U<ee?G[U]:255;if(M==8)for(k=0;k<E;k++){var U;v=k<<2,A=3*(U=c[k]),b[v]=z[A],b[v+1]=z[A+1],b[v+2]=z[A+2],b[v+3]=U<ee?G[U]:255}}else if(C==4){if(M==8)for(k=0;k<E;k++){v=k<<2;var B=c[N=k<<1];b[v]=B,b[v+1]=B,b[v+2]=B,b[v+3]=c[N+1]}if(M==16)for(k=0;k<E;k++){var N;v=k<<2,B=c[N=k<<2],b[v]=B,b[v+1]=B,b[v+2]=B,b[v+3]=c[N+2]}}else if(C==0)for(y=p.tabs.tRNS?p.tabs.tRNS:-1,T=0;T<f;T++){const z=T*V,G=T*d;if(M==1)for(var I=0;I<d;I++){var q=(B=255*(c[z+(I>>>3)]>>>7-(7&I)&1))==255*y?0:255;x[G+I]=q<<24|B<<16|B<<8|B}else if(M==2)for(I=0;I<d;I++)q=(B=85*(c[z+(I>>>2)]>>>6-((3&I)<<1)&3))==85*y?0:255,x[G+I]=q<<24|B<<16|B<<8|B;else if(M==4)for(I=0;I<d;I++)q=(B=17*(c[z+(I>>>1)]>>>4-((1&I)<<2)&15))==17*y?0:255,x[G+I]=q<<24|B<<16|B<<8|B;else if(M==8)for(I=0;I<d;I++)q=(B=c[z+I])==y?0:255,x[G+I]=q<<24|B<<16|B<<8|B;else if(M==16)for(I=0;I<d;I++)B=c[z+(I<<1)],q=j(c,z+(I<<1))==y?0:255,x[G+I]=q<<24|B<<16|B<<8|B}return b}function n(c,d,f,p){const E=s(c),O=Math.ceil(f*E/8),V=new Uint8Array((O+1+c.interlace)*p);return d=c.tabs.CgBI?r(d,V):i(d,V),c.interlace==0?d=a(d,c,0,f,p):c.interlace==1&&(d=function(x,C){const M=C.width,j=C.height,k=s(C),S=k>>3,y=Math.ceil(M*k/8),v=new Uint8Array(j*y);let T=0;const w=[0,0,4,0,2,0,1],R=[0,4,0,2,0,1,0],A=[8,8,8,4,4,2,2],U=[8,8,4,4,2,2,1];let B=0;for(;B<7;){const I=A[B],q=U[B];let z=0,G=0,ee=w[B];for(;ee<j;)ee+=I,G++;let P=R[B];for(;P<M;)P+=q,z++;const Q=Math.ceil(z*k/8);a(x,C,T,z,G);let F=0,H=w[B];for(;H<j;){let te=R[B],be=T+F*Q<<3;for(;te<M;){var N;if(k==1&&(N=(N=x[be>>3])>>7-(7&be)&1,v[H*y+(te>>3)]|=N<<7-((7&te)<<0)),k==2&&(N=(N=x[be>>3])>>6-(7&be)&3,v[H*y+(te>>2)]|=N<<6-((3&te)<<1)),k==4&&(N=(N=x[be>>3])>>4-(7&be)&15,v[H*y+(te>>1)]|=N<<4-((1&te)<<2)),k>=8){const oe=H*y+te*S;for(let ye=0;ye<S;ye++)v[oe+ye]=x[(be>>3)+ye]}be+=k,te+=q}F++,H+=I}z*G!=0&&(T+=G*(1+Q)),B+=1}return v}(d,c)),d}function i(c,d){return r(new Uint8Array(c.buffer,2,c.length-6),d)}var r=function(){const c={H:{}};return c.H.N=function(d,f){const p=Uint8Array;let E,O,V=0,b=0,x=0,C=0,M=0,j=0,k=0,S=0,y=0;if(d[0]==3&&d[1]==0)return f||new p(0);const v=c.H,T=v.b,w=v.e,R=v.R,A=v.n,U=v.A,B=v.Z,N=v.m,I=f==null;for(I&&(f=new p(d.length>>>2<<5));V==0;)if(V=T(d,y,1),b=T(d,y+1,2),y+=3,b!=0){if(I&&(f=c.H.W(f,S+(1<<17))),b==1&&(E=N.J,O=N.h,j=511,k=31),b==2){x=w(d,y,5)+257,C=w(d,y+5,5)+1,M=w(d,y+10,4)+4,y+=14;let z=1;for(var q=0;q<38;q+=2)N.Q[q]=0,N.Q[q+1]=0;for(q=0;q<M;q++){const P=w(d,y+3*q,3);N.Q[1+(N.X[q]<<1)]=P,P>z&&(z=P)}y+=3*M,A(N.Q,z),U(N.Q,z,N.u),E=N.w,O=N.d,y=R(N.u,(1<<z)-1,x+C,d,y,N.v);const G=v.V(N.v,0,x,N.C);j=(1<<G)-1;const ee=v.V(N.v,x,C,N.D);k=(1<<ee)-1,A(N.C,G),U(N.C,G,E),A(N.D,ee),U(N.D,ee,O)}for(;;){const z=E[B(d,y)&j];y+=15&z;const G=z>>>4;if(!(G>>>8))f[S++]=G;else{if(G==256)break;{let ee=S+G-254;if(G>264){const te=N.q[G-257];ee=S+(te>>>3)+w(d,y,7&te),y+=7&te}const P=O[B(d,y)&k];y+=15&P;const Q=P>>>4,F=N.c[Q],H=(F>>>4)+T(d,y,15&F);for(y+=15&F;S<ee;)f[S]=f[S++-H],f[S]=f[S++-H],f[S]=f[S++-H],f[S]=f[S++-H];S=ee}}}}else{7&y&&(y+=8-(7&y));const z=4+(y>>>3),G=d[z-4]|d[z-3]<<8;I&&(f=c.H.W(f,S+G)),f.set(new p(d.buffer,d.byteOffset+z,G),S),y=z+G<<3,S+=G}return f.length==S?f:f.slice(0,S)},c.H.W=function(d,f){const p=d.length;if(f<=p)return d;const E=new Uint8Array(p<<1);return E.set(d,0),E},c.H.R=function(d,f,p,E,O,V){const b=c.H.e,x=c.H.Z;let C=0;for(;C<p;){const M=d[x(E,O)&f];O+=15&M;const j=M>>>4;if(j<=15)V[C]=j,C++;else{let k=0,S=0;j==16?(S=3+b(E,O,2),O+=2,k=V[C-1]):j==17?(S=3+b(E,O,3),O+=3):j==18&&(S=11+b(E,O,7),O+=7);const y=C+S;for(;C<y;)V[C]=k,C++}}return O},c.H.V=function(d,f,p,E){let O=0,V=0;const b=E.length>>>1;for(;V<p;){const x=d[V+f];E[V<<1]=0,E[1+(V<<1)]=x,x>O&&(O=x),V++}for(;V<b;)E[V<<1]=0,E[1+(V<<1)]=0,V++;return O},c.H.n=function(d,f){const p=c.H.m,E=d.length;let O,V,b,x;const C=p.j;for(var M=0;M<=f;M++)C[M]=0;for(M=1;M<E;M+=2)C[d[M]]++;const j=p.K;for(O=0,C[0]=0,V=1;V<=f;V++)O=O+C[V-1]<<1,j[V]=O;for(b=0;b<E;b+=2)x=d[b+1],x!=0&&(d[b]=j[x],j[x]++)},c.H.A=function(d,f,p){const E=d.length,O=c.H.m.r;for(let V=0;V<E;V+=2)if(d[V+1]!=0){const b=V>>1,x=d[V+1],C=b<<4|x,M=f-x;let j=d[V]<<M;const k=j+(1<<M);for(;j!=k;)p[O[j]>>>15-f]=C,j++}},c.H.l=function(d,f){const p=c.H.m.r,E=15-f;for(let O=0;O<d.length;O+=2){const V=d[O]<<f-d[O+1];d[O]=p[V]>>>E}},c.H.M=function(d,f,p){p<<=7&f;const E=f>>>3;d[E]|=p,d[E+1]|=p>>>8},c.H.I=function(d,f,p){p<<=7&f;const E=f>>>3;d[E]|=p,d[E+1]|=p>>>8,d[E+2]|=p>>>16},c.H.e=function(d,f,p){return(d[f>>>3]|d[1+(f>>>3)]<<8)>>>(7&f)&(1<<p)-1},c.H.b=function(d,f,p){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16)>>>(7&f)&(1<<p)-1},c.H.Z=function(d,f){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16)>>>(7&f)},c.H.i=function(d,f){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16|d[3+(f>>>3)]<<24)>>>(7&f)},c.H.m=function(){const d=Uint16Array,f=Uint32Array;return{K:new d(16),j:new d(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new d(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new f(32),J:new d(512),_:[],h:new d(32),$:[],w:new d(32768),C:[],v:[],d:new d(32768),D:[],u:new d(512),Q:[],r:new d(32768),s:new f(286),Y:new f(30),a:new f(19),t:new f(15e3),k:new d(65536),g:new d(32768)}}(),function(){const d=c.H.m;for(var f=0;f<32768;f++){let E=f;E=(2863311530&E)>>>1|(1431655765&E)<<1,E=(3435973836&E)>>>2|(858993459&E)<<2,E=(4042322160&E)>>>4|(252645135&E)<<4,E=(4278255360&E)>>>8|(16711935&E)<<8,d.r[f]=(E>>>16|E<<16)>>>17}function p(E,O,V){for(;O--!=0;)E.push(0,V)}for(f=0;f<32;f++)d.q[f]=d.S[f]<<3|d.T[f],d.c[f]=d.p[f]<<4|d.z[f];p(d._,144,8),p(d._,112,9),p(d._,24,7),p(d._,8,8),c.H.n(d._,9),c.H.A(d._,9,d.J),c.H.l(d._,9),p(d.$,32,5),c.H.n(d.$,5),c.H.A(d.$,5,d.h),c.H.l(d.$,5),p(d.Q,19,0),p(d.C,286,0),p(d.D,30,0),p(d.v,320,0)}(),c.H.N}();function s(c){return[1,null,3,1,2,null,4][c.ctype]*c.depth}function a(c,d,f,p,E){let O=s(d);const V=Math.ceil(p*O/8);let b,x;O=Math.ceil(O/8);let C=c[f],M=0;if(C>1&&(c[f]=[0,0,1][C-2]),C==3)for(M=O;M<V;M++)c[M+1]=c[M+1]+(c[M+1-O]>>>1)&255;for(let j=0;j<E;j++)if(b=f+j*V,x=b+j+1,C=c[x-1],M=0,C==0)for(;M<V;M++)c[b+M]=c[x+M];else if(C==1){for(;M<O;M++)c[b+M]=c[x+M];for(;M<V;M++)c[b+M]=c[x+M]+c[b+M-O]}else if(C==2)for(;M<V;M++)c[b+M]=c[x+M]+c[b+M-V];else if(C==3){for(;M<O;M++)c[b+M]=c[x+M]+(c[b+M-V]>>>1);for(;M<V;M++)c[b+M]=c[x+M]+(c[b+M-V]+c[b+M-O]>>>1)}else{for(;M<O;M++)c[b+M]=c[x+M]+o(0,c[b+M-V],0);for(;M<V;M++)c[b+M]=c[x+M]+o(c[b+M-O],c[b+M-V],c[b+M-O-V])}return c}function o(c,d,f){const p=c+d-f,E=p-c,O=p-d,V=p-f;return E*E<=O*O&&E*E<=V*V?c:O*O<=V*V?d:f}function u(c,d,f){f.width=t.readUint(c,d),d+=4,f.height=t.readUint(c,d),d+=4,f.depth=c[d],d++,f.ctype=c[d],d++,f.compress=c[d],d++,f.filter=c[d],d++,f.interlace=c[d],d++}function h(c,d,f,p,E,O,V,b,x){const C=Math.min(d,E),M=Math.min(f,O);let j=0,k=0;for(let B=0;B<M;B++)for(let N=0;N<C;N++)if(V>=0&&b>=0?(j=B*d+N<<2,k=(b+B)*E+V+N<<2):(j=(-b+B)*d-V+N<<2,k=B*E+N<<2),x==0)p[k]=c[j],p[k+1]=c[j+1],p[k+2]=c[j+2],p[k+3]=c[j+3];else if(x==1){var S=c[j+3]*.00392156862745098,y=c[j]*S,v=c[j+1]*S,T=c[j+2]*S,w=p[k+3]*(1/255),R=p[k]*w,A=p[k+1]*w,U=p[k+2]*w;const I=1-S,q=S+w*I,z=q==0?0:1/q;p[k+3]=255*q,p[k+0]=(y+R*I)*z,p[k+1]=(v+A*I)*z,p[k+2]=(T+U*I)*z}else if(x==2)S=c[j+3],y=c[j],v=c[j+1],T=c[j+2],w=p[k+3],R=p[k],A=p[k+1],U=p[k+2],S==w&&y==R&&v==A&&T==U?(p[k]=0,p[k+1]=0,p[k+2]=0,p[k+3]=0):(p[k]=y,p[k+1]=v,p[k+2]=T,p[k+3]=S);else if(x==3){if(S=c[j+3],y=c[j],v=c[j+1],T=c[j+2],w=p[k+3],R=p[k],A=p[k+1],U=p[k+2],S==w&&y==R&&v==A&&T==U)continue;if(S<220&&w>20)return!1}return!0}return{decode:function(d){const f=new Uint8Array(d);let p=8;const E=t,O=E.readUshort,V=E.readUint,b={tabs:{},frames:[]},x=new Uint8Array(f.length);let C,M=0,j=0;const k=[137,80,78,71,13,10,26,10];for(var S=0;S<8;S++)if(f[S]!=k[S])throw"The input is not a PNG file!";for(;p<f.length;){const B=E.readUint(f,p);p+=4;const N=E.readASCII(f,p,4);if(p+=4,N=="IHDR")u(f,p,b);else if(N=="iCCP"){for(var y=p;f[y]!=0;)y++;E.readASCII(f,p,y-p),f[y+1];const I=f.slice(y+2,p+B);let q=null;try{q=i(I)}catch{q=r(I)}b.tabs[N]=q}else if(N=="CgBI")b.tabs[N]=f.slice(p,p+4);else if(N=="IDAT"){for(S=0;S<B;S++)x[M+S]=f[p+S];M+=B}else if(N=="acTL")b.tabs[N]={num_frames:V(f,p),num_plays:V(f,p+4)},C=new Uint8Array(f.length);else if(N=="fcTL"){j!=0&&((U=b.frames[b.frames.length-1]).data=n(b,C.slice(0,j),U.rect.width,U.rect.height),j=0);const I={x:V(f,p+12),y:V(f,p+16),width:V(f,p+4),height:V(f,p+8)};let q=O(f,p+22);q=O(f,p+20)/(q==0?100:q);const z={rect:I,delay:Math.round(1e3*q),dispose:f[p+24],blend:f[p+25]};b.frames.push(z)}else if(N=="fdAT"){for(S=0;S<B-4;S++)C[j+S]=f[p+S+4];j+=B-4}else if(N=="pHYs")b.tabs[N]=[E.readUint(f,p),E.readUint(f,p+4),f[p+8]];else if(N=="cHRM")for(b.tabs[N]=[],S=0;S<8;S++)b.tabs[N].push(E.readUint(f,p+4*S));else if(N=="tEXt"||N=="zTXt"){b.tabs[N]==null&&(b.tabs[N]={});var v=E.nextZero(f,p),T=E.readASCII(f,p,v-p),w=p+B-v-1;if(N=="tEXt")A=E.readASCII(f,v+1,w);else{var R=i(f.slice(v+2,v+2+w));A=E.readUTF8(R,0,R.length)}b.tabs[N][T]=A}else if(N=="iTXt"){b.tabs[N]==null&&(b.tabs[N]={}),v=0,y=p,v=E.nextZero(f,y),T=E.readASCII(f,y,v-y);const I=f[y=v+1];var A;f[y+1],y+=2,v=E.nextZero(f,y),E.readASCII(f,y,v-y),y=v+1,v=E.nextZero(f,y),E.readUTF8(f,y,v-y),w=B-((y=v+1)-p),I==0?A=E.readUTF8(f,y,w):(R=i(f.slice(y,y+w)),A=E.readUTF8(R,0,R.length)),b.tabs[N][T]=A}else if(N=="PLTE")b.tabs[N]=E.readBytes(f,p,B);else if(N=="hIST"){const I=b.tabs.PLTE.length/3;for(b.tabs[N]=[],S=0;S<I;S++)b.tabs[N].push(O(f,p+2*S))}else if(N=="tRNS")b.ctype==3?b.tabs[N]=E.readBytes(f,p,B):b.ctype==0?b.tabs[N]=O(f,p):b.ctype==2&&(b.tabs[N]=[O(f,p),O(f,p+2),O(f,p+4)]);else if(N=="gAMA")b.tabs[N]=E.readUint(f,p)/1e5;else if(N=="sRGB")b.tabs[N]=f[p];else if(N=="bKGD")b.ctype==0||b.ctype==4?b.tabs[N]=[O(f,p)]:b.ctype==2||b.ctype==6?b.tabs[N]=[O(f,p),O(f,p+2),O(f,p+4)]:b.ctype==3&&(b.tabs[N]=f[p]);else if(N=="IEND")break;p+=B,E.readUint(f,p),p+=4}var U;return j!=0&&((U=b.frames[b.frames.length-1]).data=n(b,C.slice(0,j),U.rect.width,U.rect.height)),b.data=n(b,x,b.width,b.height),delete b.compress,delete b.interlace,delete b.filter,b},toRGBA8:function(d){const f=d.width,p=d.height;if(d.tabs.acTL==null)return[e(d.data,f,p,d).buffer];const E=[];d.frames[0].data==null&&(d.frames[0].data=d.data);const O=f*p*4,V=new Uint8Array(O),b=new Uint8Array(O),x=new Uint8Array(O);for(let M=0;M<d.frames.length;M++){const j=d.frames[M],k=j.rect.x,S=j.rect.y,y=j.rect.width,v=j.rect.height,T=e(j.data,y,v,d);if(M!=0)for(var C=0;C<O;C++)x[C]=V[C];if(j.blend==0?h(T,y,v,V,f,p,k,S,0):j.blend==1&&h(T,y,v,V,f,p,k,S,1),E.push(V.buffer.slice(0)),j.dispose!=0){if(j.dispose==1)h(b,y,v,V,f,p,k,S,0);else if(j.dispose==2)for(C=0;C<O;C++)V[C]=x[C]}}return E},_paeth:o,_copyTile:h,_bin:t}}();(function(){const{_copyTile:t}=Fn,{_bin:e}=Fn,n=Fn._paeth;var i={table:function(){const y=new Uint32Array(256);for(let v=0;v<256;v++){let T=v;for(let w=0;w<8;w++)1&T?T=3988292384^T>>>1:T>>>=1;y[v]=T}return y}(),update(y,v,T,w){for(let R=0;R<w;R++)y=i.table[255&(y^v[T+R])]^y>>>8;return y},crc:(y,v,T)=>4294967295^i.update(4294967295,y,v,T)};function r(y,v,T,w){v[T]+=y[0]*w>>4,v[T+1]+=y[1]*w>>4,v[T+2]+=y[2]*w>>4,v[T+3]+=y[3]*w>>4}function s(y){return Math.max(0,Math.min(255,y))}function a(y,v){const T=y[0]-v[0],w=y[1]-v[1],R=y[2]-v[2],A=y[3]-v[3];return T*T+w*w+R*R+A*A}function o(y,v,T,w,R,A,U){U==null&&(U=1);const B=w.length,N=[];for(var I=0;I<B;I++){const H=w[I];N.push([H>>>0&255,H>>>8&255,H>>>16&255,H>>>24&255])}for(I=0;I<B;I++){let H=4294967295;for(var q=0,z=0;z<B;z++){var G=a(N[I],N[z]);z!=I&&G<H&&(H=G,q=z)}}const ee=new Uint32Array(R.buffer),P=new Int16Array(v*T*4),Q=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(I=0;I<Q.length;I++)Q[I]=255*((Q[I]+.5)/16-.5);for(let H=0;H<T;H++)for(let te=0;te<v;te++){var F;I=4*(H*v+te),U!=2?F=[s(y[I]+P[I]),s(y[I+1]+P[I+1]),s(y[I+2]+P[I+2]),s(y[I+3]+P[I+3])]:(G=Q[4*(3&H)+(3&te)],F=[s(y[I]+G),s(y[I+1]+G),s(y[I+2]+G),s(y[I+3]+G)]),q=0;let be=16777215;for(z=0;z<B;z++){const we=a(F,N[z]);we<be&&(be=we,q=z)}const oe=N[q],ye=[F[0]-oe[0],F[1]-oe[1],F[2]-oe[2],F[3]-oe[3]];U==1&&(te!=v-1&&r(ye,P,I+4,7),H!=T-1&&(te!=0&&r(ye,P,I+4*v-4,3),r(ye,P,I+4*v,5),te!=v-1&&r(ye,P,I+4*v+4,1))),A[I>>2]=q,ee[I>>2]=w[q]}}function u(y,v,T,w,R){R==null&&(R={});const{crc:A}=i,U=e.writeUint,B=e.writeUshort,N=e.writeASCII;let I=8;const q=y.frames.length>1;let z,G=!1,ee=33+(q?20:0);if(R.sRGB!=null&&(ee+=13),R.pHYs!=null&&(ee+=21),R.iCCP!=null&&(z=pako.deflate(R.iCCP),ee+=21+z.length+4),y.ctype==3){for(var P=y.plte.length,Q=0;Q<P;Q++)y.plte[Q]>>>24!=255&&(G=!0);ee+=8+3*P+4+(G?8+1*P+4:0)}for(var F=0;F<y.frames.length;F++)q&&(ee+=38),ee+=(oe=y.frames[F]).cimg.length+12,F!=0&&(ee+=4);ee+=12;const H=new Uint8Array(ee),te=[137,80,78,71,13,10,26,10];for(Q=0;Q<8;Q++)H[Q]=te[Q];if(U(H,I,13),I+=4,N(H,I,"IHDR"),I+=4,U(H,I,v),I+=4,U(H,I,T),I+=4,H[I]=y.depth,I++,H[I]=y.ctype,I++,H[I]=0,I++,H[I]=0,I++,H[I]=0,I++,U(H,I,A(H,I-17,17)),I+=4,R.sRGB!=null&&(U(H,I,1),I+=4,N(H,I,"sRGB"),I+=4,H[I]=R.sRGB,I++,U(H,I,A(H,I-5,5)),I+=4),R.iCCP!=null){const ye=13+z.length;U(H,I,ye),I+=4,N(H,I,"iCCP"),I+=4,N(H,I,"ICC profile"),I+=11,I+=2,H.set(z,I),I+=z.length,U(H,I,A(H,I-(ye+4),ye+4)),I+=4}if(R.pHYs!=null&&(U(H,I,9),I+=4,N(H,I,"pHYs"),I+=4,U(H,I,R.pHYs[0]),I+=4,U(H,I,R.pHYs[1]),I+=4,H[I]=R.pHYs[2],I++,U(H,I,A(H,I-13,13)),I+=4),q&&(U(H,I,8),I+=4,N(H,I,"acTL"),I+=4,U(H,I,y.frames.length),I+=4,U(H,I,R.loop!=null?R.loop:0),I+=4,U(H,I,A(H,I-12,12)),I+=4),y.ctype==3){for(U(H,I,3*(P=y.plte.length)),I+=4,N(H,I,"PLTE"),I+=4,Q=0;Q<P;Q++){const ye=3*Q,we=y.plte[Q],ke=255&we,Qe=we>>>8&255,Pn=we>>>16&255;H[I+ye+0]=ke,H[I+ye+1]=Qe,H[I+ye+2]=Pn}if(I+=3*P,U(H,I,A(H,I-3*P-4,3*P+4)),I+=4,G){for(U(H,I,P),I+=4,N(H,I,"tRNS"),I+=4,Q=0;Q<P;Q++)H[I+Q]=y.plte[Q]>>>24&255;I+=P,U(H,I,A(H,I-P-4,P+4)),I+=4}}let be=0;for(F=0;F<y.frames.length;F++){var oe=y.frames[F];q&&(U(H,I,26),I+=4,N(H,I,"fcTL"),I+=4,U(H,I,be++),I+=4,U(H,I,oe.rect.width),I+=4,U(H,I,oe.rect.height),I+=4,U(H,I,oe.rect.x),I+=4,U(H,I,oe.rect.y),I+=4,B(H,I,w[F]),I+=2,B(H,I,1e3),I+=2,H[I]=oe.dispose,I++,H[I]=oe.blend,I++,U(H,I,A(H,I-30,30)),I+=4);const ye=oe.cimg;U(H,I,(P=ye.length)+(F==0?0:4)),I+=4;const we=I;N(H,I,F==0?"IDAT":"fdAT"),I+=4,F!=0&&(U(H,I,be++),I+=4),H.set(ye,I),I+=P,U(H,I,A(H,we,I-we)),I+=4}return U(H,I,0),I+=4,N(H,I,"IEND"),I+=4,U(H,I,A(H,I-4,4)),I+=4,H.buffer}function h(y,v,T){for(let w=0;w<y.frames.length;w++){const R=y.frames[w];R.rect.width;const A=R.rect.height,U=new Uint8Array(A*R.bpl+A);R.cimg=p(R.img,A,R.bpp,R.bpl,U,v,T)}}function c(y,v,T,w,R){const A=R[0],U=R[1],B=R[2],N=R[3],I=R[4],q=R[5];let z=6,G=8,ee=255;for(var P=0;P<y.length;P++){const dt=new Uint8Array(y[P]);for(var Q=dt.length,F=0;F<Q;F+=4)ee&=dt[F+3]}const H=ee!=255,te=function(je,De,at,mt,Ye,qt){const qe=[];for(var xe=0;xe<je.length;xe++){const _t=new Uint8Array(je[xe]),on=new Uint32Array(_t.buffer);var Mt;let bt=0,An=0,ln=De,zn=at,Ka=mt?1:0;if(xe!=0){const Kh=qt||mt||xe==1||qe[xe-2].dispose!=0?1:2;let qr=0,Xa=1e9;for(let Gi=0;Gi<Kh;Gi++){var ze=new Uint8Array(je[xe-1-Gi]);const Hr=new Uint32Array(je[xe-1-Gi]);let wn=De,Sn=at,Kt=-1,$i=-1;for(let Wn=0;Wn<at;Wn++)for(let un=0;un<De;un++)on[tt=Wn*De+un]!=Hr[tt]&&(un<wn&&(wn=un),un>Kt&&(Kt=un),Wn<Sn&&(Sn=Wn),Wn>$i&&($i=Wn));Kt==-1&&(wn=Sn=Kt=$i=0),Ye&&((1&wn)==1&&wn--,(1&Sn)==1&&Sn--);const Gr=(Kt-wn+1)*($i-Sn+1);Gr<Xa&&(Xa=Gr,qr=Gi,bt=wn,An=Sn,ln=Kt-wn+1,zn=$i-Sn+1)}ze=new Uint8Array(je[xe-1-qr]),qr==1&&(qe[xe-1].dispose=2),Mt=new Uint8Array(ln*zn*4),t(ze,De,at,Mt,ln,zn,-bt,-An,0),Ka=t(_t,De,at,Mt,ln,zn,-bt,-An,3)?1:0,Ka==1?f(_t,De,at,Mt,{x:bt,y:An,width:ln,height:zn}):t(_t,De,at,Mt,ln,zn,-bt,-An,0)}else Mt=_t.slice(0);qe.push({rect:{x:bt,y:An,width:ln,height:zn},img:Mt,blend:Ka,dispose:0})}if(mt)for(xe=0;xe<qe.length;xe++){if((Zn=qe[xe]).blend==1)continue;const _t=Zn.rect,on=qe[xe-1].rect,bt=Math.min(_t.x,on.x),An=Math.min(_t.y,on.y),ln={x:bt,y:An,width:Math.max(_t.x+_t.width,on.x+on.width)-bt,height:Math.max(_t.y+_t.height,on.y+on.height)-An};qe[xe-1].dispose=1,xe-1!=0&&d(je,De,at,qe,xe-1,ln,Ye),d(je,De,at,qe,xe,ln,Ye)}let ot=0;if(je.length!=1)for(var tt=0;tt<qe.length;tt++){var Zn;ot+=(Zn=qe[tt]).rect.width*Zn.rect.height}return qe}(y,v,T,A,U,B),be={},oe=[],ye=[];if(w!=0){const dt=[];for(F=0;F<te.length;F++)dt.push(te[F].img.buffer);const je=function(Ye){let qt=0;for(var qe=0;qe<Ye.length;qe++)qt+=Ye[qe].byteLength;const xe=new Uint8Array(qt);let Mt=0;for(qe=0;qe<Ye.length;qe++){const ze=new Uint8Array(Ye[qe]),ot=ze.length;for(let tt=0;tt<ot;tt+=4){let Zn=ze[tt],_t=ze[tt+1],on=ze[tt+2];const bt=ze[tt+3];bt==0&&(Zn=_t=on=0),xe[Mt+tt]=Zn,xe[Mt+tt+1]=_t,xe[Mt+tt+2]=on,xe[Mt+tt+3]=bt}Mt+=ot}return xe.buffer}(dt),De=O(je,w);for(F=0;F<De.plte.length;F++)oe.push(De.plte[F].est.rgba);let at=0;for(F=0;F<te.length;F++){const mt=(ke=te[F]).img.length;var we=new Uint8Array(De.inds.buffer,at>>2,mt>>2);ye.push(we);const Ye=new Uint8Array(De.abuf,at,mt);q&&o(ke.img,ke.rect.width,ke.rect.height,oe,Ye,we),ke.img.set(Ye),at+=mt}}else for(P=0;P<te.length;P++){var ke=te[P];const dt=new Uint32Array(ke.img.buffer);var Qe=ke.rect.width;for(Q=dt.length,we=new Uint8Array(Q),ye.push(we),F=0;F<Q;F++){const je=dt[F];if(F!=0&&je==dt[F-1])we[F]=we[F-1];else if(F>Qe&&je==dt[F-Qe])we[F]=we[F-Qe];else{let De=be[je];if(De==null&&(be[je]=De=oe.length,oe.push(je),oe.length>=300))break;we[F]=De}}}const Pn=oe.length;for(Pn<=256&&I==0&&(G=Pn<=2?1:Pn<=4?2:Pn<=16?4:8,G=Math.max(G,N)),P=0;P<te.length;P++){(ke=te[P]).rect.x,ke.rect.y,Qe=ke.rect.width;const dt=ke.rect.height;let je=ke.img;new Uint32Array(je.buffer);let De=4*Qe,at=4;if(Pn<=256&&I==0){De=Math.ceil(G*Qe/8);var Yt=new Uint8Array(De*dt);const mt=ye[P];for(let Ye=0;Ye<dt;Ye++){F=Ye*De;const qt=Ye*Qe;if(G==8)for(var Ve=0;Ve<Qe;Ve++)Yt[F+Ve]=mt[qt+Ve];else if(G==4)for(Ve=0;Ve<Qe;Ve++)Yt[F+(Ve>>1)]|=mt[qt+Ve]<<4-4*(1&Ve);else if(G==2)for(Ve=0;Ve<Qe;Ve++)Yt[F+(Ve>>2)]|=mt[qt+Ve]<<6-2*(3&Ve);else if(G==1)for(Ve=0;Ve<Qe;Ve++)Yt[F+(Ve>>3)]|=mt[qt+Ve]<<7-1*(7&Ve)}je=Yt,z=3,at=1}else if(H==0&&te.length==1){Yt=new Uint8Array(Qe*dt*3);const mt=Qe*dt;for(F=0;F<mt;F++){const Ye=3*F,qt=4*F;Yt[Ye]=je[qt],Yt[Ye+1]=je[qt+1],Yt[Ye+2]=je[qt+2]}je=Yt,z=2,at=3,De=3*Qe}ke.img=je,ke.bpl=De,ke.bpp=at}return{ctype:z,depth:G,plte:oe,frames:te}}function d(y,v,T,w,R,A,U){const B=Uint8Array,N=Uint32Array,I=new B(y[R-1]),q=new N(y[R-1]),z=R+1<y.length?new B(y[R+1]):null,G=new B(y[R]),ee=new N(G.buffer);let P=v,Q=T,F=-1,H=-1;for(let be=0;be<A.height;be++)for(let oe=0;oe<A.width;oe++){const ye=A.x+oe,we=A.y+be,ke=we*v+ye,Qe=ee[ke];Qe==0||w[R-1].dispose==0&&q[ke]==Qe&&(z==null||z[4*ke+3]!=0)||(ye<P&&(P=ye),ye>F&&(F=ye),we<Q&&(Q=we),we>H&&(H=we))}F==-1&&(P=Q=F=H=0),U&&((1&P)==1&&P--,(1&Q)==1&&Q--),A={x:P,y:Q,width:F-P+1,height:H-Q+1};const te=w[R];te.rect=A,te.blend=1,te.img=new Uint8Array(A.width*A.height*4),w[R-1].dispose==0?(t(I,v,T,te.img,A.width,A.height,-A.x,-A.y,0),f(G,v,T,te.img,A)):t(G,v,T,te.img,A.width,A.height,-A.x,-A.y,0)}function f(y,v,T,w,R){t(y,v,T,w,R.width,R.height,-R.x,-R.y,2)}function p(y,v,T,w,R,A,U){const B=[];let N,I=[0,1,2,3,4];A!=-1?I=[A]:(v*w>5e5||T==1)&&(I=[0]),U&&(N={level:0});const q=r6;for(var z=0;z<I.length;z++){for(let P=0;P<v;P++)E(R,y,P,w,T,I[z]);B.push(q.deflate(R,N))}let G,ee=1e9;for(z=0;z<B.length;z++)B[z].length<ee&&(G=z,ee=B[z].length);return B[G]}function E(y,v,T,w,R,A){const U=T*w;let B=U+T;if(y[B]=A,B++,A==0)if(w<500)for(var N=0;N<w;N++)y[B+N]=v[U+N];else y.set(new Uint8Array(v.buffer,U,w),B);else if(A==1){for(N=0;N<R;N++)y[B+N]=v[U+N];for(N=R;N<w;N++)y[B+N]=v[U+N]-v[U+N-R]+256&255}else if(T==0){for(N=0;N<R;N++)y[B+N]=v[U+N];if(A==2)for(N=R;N<w;N++)y[B+N]=v[U+N];if(A==3)for(N=R;N<w;N++)y[B+N]=v[U+N]-(v[U+N-R]>>1)+256&255;if(A==4)for(N=R;N<w;N++)y[B+N]=v[U+N]-n(v[U+N-R],0,0)+256&255}else{if(A==2)for(N=0;N<w;N++)y[B+N]=v[U+N]+256-v[U+N-w]&255;if(A==3){for(N=0;N<R;N++)y[B+N]=v[U+N]+256-(v[U+N-w]>>1)&255;for(N=R;N<w;N++)y[B+N]=v[U+N]+256-(v[U+N-w]+v[U+N-R]>>1)&255}if(A==4){for(N=0;N<R;N++)y[B+N]=v[U+N]+256-n(0,v[U+N-w],0)&255;for(N=R;N<w;N++)y[B+N]=v[U+N]+256-n(v[U+N-R],v[U+N-w],v[U+N-R-w])&255}}}function O(y,v){const T=new Uint8Array(y),w=T.slice(0),R=new Uint32Array(w.buffer),A=V(w,v),U=A[0],B=A[1],N=T.length,I=new Uint8Array(N>>2);let q;if(T.length<2e7)for(var z=0;z<N;z+=4)q=b(U,G=T[z]*(1/255),ee=T[z+1]*(1/255),P=T[z+2]*(1/255),Q=T[z+3]*(1/255)),I[z>>2]=q.ind,R[z>>2]=q.est.rgba;else for(z=0;z<N;z+=4){var G=T[z]*.00392156862745098,ee=T[z+1]*(1/255),P=T[z+2]*(1/255),Q=T[z+3]*(1/255);for(q=U;q.left;)q=x(q.est,G,ee,P,Q)<=0?q.left:q.right;I[z>>2]=q.ind,R[z>>2]=q.est.rgba}return{abuf:w.buffer,inds:I,plte:B}}function V(y,v,T){T==null&&(T=1e-4);const w=new Uint32Array(y.buffer),R={i0:0,i1:y.length,bst:null,est:null,tdst:0,left:null,right:null};R.bst=j(y,R.i0,R.i1),R.est=k(R.bst);const A=[R];for(;A.length<v;){let B=0,N=0;for(var U=0;U<A.length;U++)A[U].est.L>B&&(B=A[U].est.L,N=U);if(B<T)break;const I=A[N],q=C(y,w,I.i0,I.i1,I.est.e,I.est.eMq255);if(I.i0>=q||I.i1<=q){I.est.L=0;continue}const z={i0:I.i0,i1:q,bst:null,est:null,tdst:0,left:null,right:null};z.bst=j(y,z.i0,z.i1),z.est=k(z.bst);const G={i0:q,i1:I.i1,bst:null,est:null,tdst:0,left:null,right:null};for(G.bst={R:[],m:[],N:I.bst.N-z.bst.N},U=0;U<16;U++)G.bst.R[U]=I.bst.R[U]-z.bst.R[U];for(U=0;U<4;U++)G.bst.m[U]=I.bst.m[U]-z.bst.m[U];G.est=k(G.bst),I.left=z,I.right=G,A[N]=z,A.push(G)}for(A.sort((B,N)=>N.bst.N-B.bst.N),U=0;U<A.length;U++)A[U].ind=U;return[R,A]}function b(y,v,T,w,R){if(y.left==null)return y.tdst=function(z,G,ee,P,Q){const F=G-z[0],H=ee-z[1],te=P-z[2],be=Q-z[3];return F*F+H*H+te*te+be*be}(y.est.q,v,T,w,R),y;const A=x(y.est,v,T,w,R);let U=y.left,B=y.right;A>0&&(U=y.right,B=y.left);const N=b(U,v,T,w,R);if(N.tdst<=A*A)return N;const I=b(B,v,T,w,R);return I.tdst<N.tdst?I:N}function x(y,v,T,w,R){const{e:A}=y;return A[0]*v+A[1]*T+A[2]*w+A[3]*R-y.eMq}function C(y,v,T,w,R,A){for(w-=4;T<w;){for(;M(y,T,R)<=A;)T+=4;for(;M(y,w,R)>A;)w-=4;if(T>=w)break;const U=v[T>>2];v[T>>2]=v[w>>2],v[w>>2]=U,T+=4,w-=4}for(;M(y,T,R)>A;)T-=4;return T+4}function M(y,v,T){return y[v]*T[0]+y[v+1]*T[1]+y[v+2]*T[2]+y[v+3]*T[3]}function j(y,v,T){const w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R=[0,0,0,0],A=T-v>>2;for(let U=v;U<T;U+=4){const B=y[U]*.00392156862745098,N=y[U+1]*(1/255),I=y[U+2]*(1/255),q=y[U+3]*(1/255);R[0]+=B,R[1]+=N,R[2]+=I,R[3]+=q,w[0]+=B*B,w[1]+=B*N,w[2]+=B*I,w[3]+=B*q,w[5]+=N*N,w[6]+=N*I,w[7]+=N*q,w[10]+=I*I,w[11]+=I*q,w[15]+=q*q}return w[4]=w[1],w[8]=w[2],w[9]=w[6],w[12]=w[3],w[13]=w[7],w[14]=w[11],{R:w,m:R,N:A}}function k(y){const{R:v}=y,{m:T}=y,{N:w}=y,R=T[0],A=T[1],U=T[2],B=T[3],N=w==0?0:1/w,I=[v[0]-R*R*N,v[1]-R*A*N,v[2]-R*U*N,v[3]-R*B*N,v[4]-A*R*N,v[5]-A*A*N,v[6]-A*U*N,v[7]-A*B*N,v[8]-U*R*N,v[9]-U*A*N,v[10]-U*U*N,v[11]-U*B*N,v[12]-B*R*N,v[13]-B*A*N,v[14]-B*U*N,v[15]-B*B*N],q=I,z=S;let G=[Math.random(),Math.random(),Math.random(),Math.random()],ee=0,P=0;if(w!=0)for(let F=0;F<16&&(G=z.multVec(q,G),P=Math.sqrt(z.dot(G,G)),G=z.sml(1/P,G),!(F!=0&&Math.abs(P-ee)<1e-9));F++)ee=P;const Q=[R*N,A*N,U*N,B*N];return{Cov:I,q:Q,e:G,L:ee,eMq255:z.dot(z.sml(255,Q),G),eMq:z.dot(G,Q),rgba:(Math.round(255*Q[3])<<24|Math.round(255*Q[2])<<16|Math.round(255*Q[1])<<8|Math.round(255*Q[0])<<0)>>>0}}var S={multVec:(y,v)=>[y[0]*v[0]+y[1]*v[1]+y[2]*v[2]+y[3]*v[3],y[4]*v[0]+y[5]*v[1]+y[6]*v[2]+y[7]*v[3],y[8]*v[0]+y[9]*v[1]+y[10]*v[2]+y[11]*v[3],y[12]*v[0]+y[13]*v[1]+y[14]*v[2]+y[15]*v[3]],dot:(y,v)=>y[0]*v[0]+y[1]*v[1]+y[2]*v[2]+y[3]*v[3],sml:(y,v)=>[y*v[0],y*v[1],y*v[2],y*v[3]]};Fn.encode=function(v,T,w,R,A,U,B){R==null&&(R=0),B==null&&(B=!1);const N=c(v,T,w,R,[!1,!1,!1,0,B,!1]);return h(N,-1),u(N,T,w,A,U)},Fn.encodeLL=function(v,T,w,R,A,U,B,N){const I={ctype:0+(R==1?0:2)+(A==0?0:4),depth:U,frames:[]},q=(R+A)*U,z=q*T;for(let G=0;G<v.length;G++)I.frames.push({rect:{x:0,y:0,width:T,height:w},img:new Uint8Array(v[G]),blend:0,dispose:1,bpp:Math.ceil(q/8),bpl:Math.ceil(z/8)});return h(I,0,!0),u(I,T,w,B,N)},Fn.encode.compress=c,Fn.encode.dither=o,Fn.quantize=O,Fn.quantize.getKDtree=V,Fn.quantize.getNearest=b})();const l2={toArrayBuffer(t,e){const n=t.width,i=t.height,r=n<<2,s=t.getContext("2d").getImageData(0,0,n,i),a=new Uint32Array(s.data.buffer),o=(32*n+31)/32<<2,u=o*i,h=122+u,c=new ArrayBuffer(h),d=new DataView(c),f=1<<20;let p,E,O,V,b=f,x=0,C=0,M=0;function j(y){d.setUint16(C,y,!0),C+=2}function k(y){d.setUint32(C,y,!0),C+=4}function S(y){C+=y}j(19778),k(h),S(4),k(122),k(108),k(n),k(-i>>>0),j(1),j(32),k(3),k(u),k(2835),k(2835),S(8),k(16711680),k(65280),k(255),k(4278190080),k(1466527264),function y(){for(;x<i&&b>0;){for(V=122+x*o,p=0;p<r;)b--,E=a[M++],O=E>>>24,d.setUint32(V+p,E<<8|O),p+=4;x++}M<a.length?(b=f,setTimeout(y,l2._dly)):e(c)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var en={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},s6={[en.CHROME]:16384,[en.FIREFOX]:11180,[en.DESKTOP_SAFARI]:16384,[en.IE]:8192,[en.IOS]:4096,[en.ETC]:8192};const Og=typeof window<"u",u2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,ih=Og&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),a6=(Og||u2)&&(ih&&ih.getOriginalSymbol(window,"File")||typeof File<"u"&&File),c2=(Og||u2)&&(ih&&ih.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Mg(t,e,n=Date.now()){return new Promise(i=>{const r=t.split(","),s=r[0].match(/:(.*?);/)[1],a=globalThis.atob(r[1]);let o=a.length;const u=new Uint8Array(o);for(;o--;)u[o]=a.charCodeAt(o);const h=new Blob([u],{type:s});h.name=e,h.lastModified=n,i(h)})}function h2(t){return new Promise((e,n)=>{const i=new c2;i.onload=()=>e(i.result),i.onerror=r=>n(r),i.readAsDataURL(t)})}function f2(t){return new Promise((e,n)=>{const i=new Image;i.onload=()=>e(i),i.onerror=r=>n(r),i.src=t})}function is(){if(is.cachedResult!==void 0)return is.cachedResult;let t=en.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=en.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=en.IOS:/Safari/i.test(e)?t=en.DESKTOP_SAFARI:/Firefox/i.test(e)?t=en.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=en.IE),is.cachedResult=t,is.cachedResult}function d2(t,e){const n=is(),i=s6[n];let r=t,s=e,a=r*s;const o=r>s?s/r:r/s;for(;a>i*i;){const u=(i+r)/2,h=(i+s)/2;u<h?(s=h,r=h*o):(s=u*o,r=u),a=r*s}return{width:r,height:s}}function Yh(t,e){let n,i;try{if(n=new OffscreenCanvas(t,e),i=n.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),i=n.getContext("2d")}return n.width=t,n.height=e,[n,i]}function m2(t,e){const{width:n,height:i}=d2(t.width,t.height),[r,s]=Yh(n,i);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,r.width,r.height)),s.drawImage(t,0,0,r.width,r.height),r}function Ju(){return Ju.cachedResult!==void 0||(Ju.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Ju.cachedResult}function rh(t,e={}){return new Promise(function(n,i){let r,s;var a=function(){try{return s=m2(r,e.fileType||t.type),n([r,s])}catch(u){return i(u)}},o=function(u){try{var h=function(c){try{throw c}catch(d){return i(d)}};try{let c;return h2(t).then(function(d){try{return c=d,f2(c).then(function(f){try{return r=f,function(){try{return a()}catch(p){return i(p)}}()}catch(p){return h(p)}},h)}catch(f){return h(f)}},h)}catch(c){h(c)}}catch(c){return i(c)}};try{if(Ju()||[en.DESKTOP_SAFARI,en.MOBILE_SAFARI].includes(is()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(u){try{return r=u,a()}catch{return o()}},o)}catch{o()}})}function sh(t,e,n,i,r=1){return new Promise(function(s,a){let o;if(e==="image/png"){let d,f,p;return d=t.getContext("2d"),{data:f}=d.getImageData(0,0,t.width,t.height),p=Fn.encode([f.buffer],t.width,t.height,4096*r),o=new Blob([p],{type:e}),o.name=n,o.lastModified=i,u.call(this)}{let d=function(){return u.call(this)};var h=d;if(e==="image/bmp")return new Promise(f=>l2.toBlob(t,f)).then((function(f){try{return o=f,o.name=n,o.lastModified=i,d.call(this)}catch(p){return a(p)}}).bind(this),a);{let f=function(){return d.call(this)};var c=f;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:r}).then((function(p){try{return o=p,o.name=n,o.lastModified=i,f.call(this)}catch(E){return a(E)}}).bind(this),a);{let p;return p=t.toDataURL(e,r),Mg(p,n,i).then((function(E){try{return o=E,f.call(this)}catch(O){return a(O)}}).bind(this),a)}}}function u(){return s(o)}})}function ti(t){t.width=0,t.height=0}function aa(){return new Promise(function(t,e){let n,i,r,s;return aa.cachedResult!==void 0?t(aa.cachedResult):Mg("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(a){try{return n=a,rh(n).then(function(o){try{return i=o[1],sh(i,n.type,n.name,n.lastModified).then(function(u){try{return r=u,ti(i),rh(r).then(function(h){try{return s=h[0],aa.cachedResult=s.width===1&&s.height===2,t(aa.cachedResult)}catch(c){return e(c)}},e)}catch(h){return e(h)}},e)}catch(u){return e(u)}},e)}catch(o){return e(o)}},e)})}function p2(t){return new Promise((e,n)=>{const i=new c2;i.onload=r=>{const s=new DataView(r.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const a=s.byteLength;let o=2;for(;o<a;){if(s.getUint16(o+2,!1)<=8)return e(-1);const u=s.getUint16(o,!1);if(o+=2,u==65505){if(s.getUint32(o+=2,!1)!=1165519206)return e(-1);const h=s.getUint16(o+=6,!1)==18761;o+=s.getUint32(o+4,h);const c=s.getUint16(o,h);o+=2;for(let d=0;d<c;d++)if(s.getUint16(o+12*d,h)==274)return e(s.getUint16(o+12*d+8,h))}else{if((65280&u)!=65280)break;o+=s.getUint16(o,!1)}}return e(-1)},i.onerror=r=>n(r),i.readAsArrayBuffer(t)})}function g2(t,e){const{width:n}=t,{height:i}=t,{maxWidthOrHeight:r}=e;let s,a=t;return isFinite(r)&&(n>r||i>r)&&([a,s]=Yh(n,i),n>i?(a.width=r,a.height=i/n*r):(a.width=n/i*r,a.height=r),s.drawImage(t,0,0,a.width,a.height),ti(t)),a}function y2(t,e){const{width:n}=t,{height:i}=t,[r,s]=Yh(n,i);switch(e>4&&e<9?(r.width=i,r.height=n):(r.width=n,r.height=i),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,i);break;case 4:s.transform(1,0,0,-1,0,i);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,i,0);break;case 7:s.transform(0,-1,-1,0,i,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,i),ti(t),r}function N_(t,e,n=0){return new Promise(function(i,r){let s,a,o,u,h,c,d,f,p,E,O,V,b,x,C,M,j,k,S,y;function v(w=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=w,e.onProgress(Math.min(s,100))}function T(w){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(w,s),100),e.onProgress(s)}return s=n,a=e.maxIteration||10,o=1024*e.maxSizeMB*1024,v(),rh(t,e).then((function(w){try{return[,u]=w,v(),h=g2(u,e),v(),new Promise(function(R,A){var U;if(!(U=e.exifOrientation))return p2(t).then((function(N){try{return U=N,B.call(this)}catch(I){return A(I)}}).bind(this),A);function B(){return R(U)}return B.call(this)}).then((function(R){try{return c=R,v(),aa().then((function(A){try{return d=A?h:y2(h,c),v(),f=e.initialQuality||1,p=e.fileType||t.type,sh(d,p,t.name,t.lastModified,f).then((function(U){try{{let q=function(){if(a--&&(C>o||C>b)){let G,ee;return G=y?.95*S.width:S.width,ee=y?.95*S.height:S.height,[j,k]=Yh(G,ee),k.drawImage(S,0,0,G,ee),f*=p==="image/png"?.85:.95,sh(j,p,t.name,t.lastModified,f).then(function(P){try{return M=P,ti(S),S=j,C=M.size,T(Math.min(99,Math.floor((x-C)/(x-o)*100))),q}catch(Q){return r(Q)}},r)}return[1]},z=function(){return ti(S),ti(j),ti(h),ti(d),ti(u),T(100),i(M)};var N=q,I=z;if(E=U,v(),O=E.size>o,V=E.size>t.size,!O&&!V)return T(100),i(E);var B;return b=t.size,x=E.size,C=x,S=d,y=!e.alwaysKeepResolution&&O,(B=(function(G){for(;G;){if(G.then)return void G.then(B,r);try{if(G.pop){if(G.length)return G.pop()?z.call(this):G;G=q}else G=G.call(this)}catch(ee){return r(ee)}}}).bind(this))(q)}}catch(q){return r(q)}}).bind(this),r)}catch(U){return r(U)}}).bind(this),r)}catch(A){return r(A)}}).bind(this),r)}catch(R){return r(R)}}).bind(this),r)})}const o6=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let rd;function l6(t,e){return new Promise((n,i)=>{rd||(rd=function(a){const o=[];return o.push(a),URL.createObjectURL(new Blob(o))}(o6));const r=new Worker(rd);r.addEventListener("message",function(a){if(e.signal&&e.signal.aborted)r.terminate();else if(a.data.progress===void 0){if(a.data.error)return i(new Error(a.data.error)),void r.terminate();n(a.data.file),r.terminate()}else e.onProgress(a.data.progress)}),r.addEventListener("error",i),e.signal&&e.signal.addEventListener("abort",()=>{i(e.signal.reason),r.terminate()}),r.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function Ut(t,e){return new Promise(function(n,i){let r,s,a,o,u,h;if(r={...e},a=0,{onProgress:o}=r,r.maxSizeMB=r.maxSizeMB||Number.POSITIVE_INFINITY,u=typeof r.useWebWorker!="boolean"||r.useWebWorker,delete r.useWebWorker,r.onProgress=p=>{a=p,typeof o=="function"&&o(a)},!(t instanceof Blob||t instanceof a6))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return i(new Error("The file given is not an image"));if(h=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!u||typeof Worker!="function"||h)return N_(t,r).then((function(p){try{return s=p,f.call(this)}catch(E){return i(E)}}).bind(this),i);var c=(function(){try{return f.call(this)}catch(p){return i(p)}}).bind(this),d=function(p){try{return N_(t,r).then(function(E){try{return s=E,c()}catch(O){return i(O)}},i)}catch(E){return i(E)}};try{return r.libURL=r.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",l6(t,r).then(function(p){try{return s=p,c()}catch{return d()}},d)}catch{d()}function f(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{r.preserveExif&&t.type==="image/jpeg"&&(!r.fileType||r.fileType&&r.fileType===t.type)&&(s=o2(t,s))}catch{}return n(s)}})}Ut.getDataUrlFromFile=h2,Ut.getFilefromDataUrl=Mg,Ut.loadImage=f2,Ut.drawImageInCanvas=m2,Ut.drawFileInCanvas=rh,Ut.canvasToFile=sh,Ut.getExifOrientation=p2,Ut.handleMaxWidthOrHeight=g2,Ut.followExifOrientation=y2,Ut.cleanupCanvasMemory=ti,Ut.isAutoOrientationInBrowser=aa,Ut.approximateBelowMaximumCanvasSizeOfBrowser=d2,Ut.copyExifWithoutOrientation=o2,Ut.getBrowserName=is,Ut.version="2.0.2";const u6=t=>new Promise((e,n)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=()=>e(i.result),i.onerror=r=>n(r)}),c6=async(t,e)=>{if(!t)throw new Error("No file provided for upload.");const n={maxSizeMB:.75,maxWidthOrHeight:1024,useWebWorker:!0};try{console.log(`Original image size: ${(t.size/1024).toFixed(2)} KB`);const i=await Ut(t,n);return console.log(`Compressed image size: ${(i.size/1024).toFixed(2)} KB`),u6(i)}catch(i){throw console.error("Error during image compression:",i),new Error("Failed to process the image. Please try again or select a different one.")}},h6={name:"",level:0,school:"Evocation",castingTime:"1 Action",range:"60 feet",components:"V, S",duration:"Instantaneous",description:""},f6=({initialData:t,onSave:e,onCancel:n})=>{const[i,r]=ne.useState(t),s=(h,c)=>{r(d=>({...d,[h]:c}))},a=h=>{h.preventDefault(),i.name.trim()&&e(i)},o=["Abjuration","Conjuration","Divination","Enchantment","Evocation","Illusion","Necromancy","Transmutation"],u="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return g.jsxs("form",{onSubmit:a,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-6",children:[g.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Spell":"Add New Spell"}),g.jsx("input",{type:"text",placeholder:"Spell Name",value:i.name,onChange:h=>s("name",h.target.value),required:!0,className:u}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[g.jsx("input",{type:"number",placeholder:"Level",value:i.level,onChange:h=>s("level",parseInt(h.target.value)),min:"0",max:"9",className:u}),g.jsx("select",{value:i.school,onChange:h=>s("school",h.target.value),className:u,children:o.map(h=>g.jsx("option",{value:h,children:h},h))})]}),g.jsx("textarea",{placeholder:"Description",value:i.description,onChange:h=>s("description",h.target.value),rows:4,className:`${u} resize-y`}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),g.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Spell"})]})]})},d6=({spell:t,onEdit:e,onDelete:n,onToggleExpand:i,isExpanded:r})=>g.jsxs("div",{className:"bg-zinc-700/50 rounded-lg",children:[g.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-3",onClick:i,children:[g.jsx("h4",{className:"font-bold text-amber-300",children:t.name}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("span",{className:"text-sm text-zinc-400 capitalize",children:t.school}),g.jsx("button",{onClick:s=>{s.stopPropagation(),e()},className:"text-zinc-400 hover:text-amber-400 p-1",children:g.jsx(Ds,{className:"w-4 h-4"})}),g.jsx("button",{onClick:s=>{s.stopPropagation(),n()},className:"text-zinc-500 hover:text-red-400 p-1",children:g.jsx(Ns,{className:"w-4 h-4"})})]})]}),r&&g.jsxs("div",{className:"mt-2 pt-3 border-t border-zinc-600/50 space-y-2 text-sm p-3 bg-zinc-900/30",children:[g.jsxs("p",{children:[g.jsx("strong",{className:"text-zinc-400",children:"Casting Time:"})," ",t.castingTime]}),g.jsxs("p",{children:[g.jsx("strong",{className:"text-zinc-400",children:"Range:"})," ",t.range]}),g.jsxs("p",{children:[g.jsx("strong",{className:"text-zinc-400",children:"Components:"})," ",t.components]}),g.jsxs("p",{children:[g.jsx("strong",{className:"text-zinc-400",children:"Duration:"})," ",t.duration]}),g.jsx("p",{className:"text-zinc-300 mt-2 whitespace-pre-wrap",children:t.description})]})]}),m6=({character:t,onUpdateCharacter:e})=>{const[n,i]=ne.useState(null),[r,s]=ne.useState({}),a=d=>{let f;if("id"in d)f=t.spells.map(p=>p.id===d.id?d:p);else{const p={...d,id:`spell_${Date.now()}`};f=[...t.spells,p]}e({...t,spells:f}),i(null)},o=d=>{if(window.confirm("Are you sure you want to delete this spell?")){const f=t.spells.filter(p=>p.id!==d);e({...t,spells:f})}},u=d=>{s(f=>({...f,[d]:!f[d]}))},h=ne.useMemo(()=>t.spells.reduce((d,f)=>(d[f.level]=[...d[f.level]||[],f],d[f.level].sort((p,E)=>p.name.localeCompare(E.name)),d),{}),[t.spells]),c=Object.keys(h).map(Number).sort((d,f)=>d-f);return g.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Spellbook"}),g.jsxs("button",{onClick:()=>i("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[g.jsx(Gl,{className:"w-5 h-5"})," Add Spell"]})]}),n&&g.jsx(f6,{initialData:n==="new"?h6:n,onSave:a,onCancel:()=>i(null)}),g.jsxs("div",{className:"space-y-6 overflow-y-auto pr-2 -mr-2",children:[t.spells.length===0&&!n&&g.jsx("p",{className:"text-center text-zinc-500 text-sm py-8",children:"This character knows no spells. Add one to get started!"}),c.map(d=>g.jsxs("div",{children:[g.jsx("h4",{className:"text-xl font-serif text-zinc-300 border-b border-zinc-600 pb-1 mb-3",children:d===0?"Cantrips":`Level ${d}`}),g.jsx("div",{className:"space-y-3",children:h[d].map(f=>g.jsx(d6,{spell:f,isExpanded:!!r[f.id],onToggleExpand:()=>u(f.id),onEdit:()=>i(f),onDelete:()=>o(f.id)},f.id))})]},d))]})]})},p6={name:"",description:""},g6=({initialData:t,onSave:e,onCancel:n})=>{const[i,r]=ne.useState(t),s=(u,h)=>{r(c=>({...c,[u]:h}))},a=u=>{u.preventDefault(),i.name.trim()&&e(i)},o="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return g.jsxs("form",{onSubmit:a,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[g.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Feature":"Add New Feature"}),g.jsx("input",{type:"text",placeholder:"Feature or Trait Name",value:i.name,onChange:u=>s("name",u.target.value),required:!0,className:o}),g.jsx("textarea",{placeholder:"Description",value:i.description,onChange:u=>s("description",u.target.value),rows:4,className:`${o} resize-y`}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),g.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Feature"})]})]})},y6=({character:t,onUpdateCharacter:e})=>{const[n,i]=ne.useState(null),[r,s]=ne.useState({}),a=c=>{let d;if("id"in c)d=t.featuresAndTraits.map(f=>f.id===c.id?c:f);else{const f={...c,id:`feat_${Date.now()}`};d=[...t.featuresAndTraits,f]}e({...t,featuresAndTraits:d}),i(null)},o=c=>{if(window.confirm("Are you sure you want to delete this feature?")){const d=t.featuresAndTraits.filter(f=>f.id!==c);e({...t,featuresAndTraits:d})}},u=c=>{s(d=>({...d,[c]:!d[c]}))},h=ne.useMemo(()=>[...t.featuresAndTraits].sort((c,d)=>c.name.localeCompare(d.name)),[t.featuresAndTraits]);return g.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Features & Traits"}),g.jsxs("button",{onClick:()=>i("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[g.jsx(Gl,{className:"w-5 h-5"})," Add Feature"]})]}),n&&g.jsx(g6,{initialData:n==="new"?p6:n,onSave:a,onCancel:()=>i(null)}),g.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[h.length===0&&!n&&g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"No features or traits have been added."})}),h.map(c=>g.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:[g.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer",onClick:()=>u(c.id),children:[g.jsx("span",{className:"font-semibold text-amber-300",children:c.name}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:d=>{d.stopPropagation(),i(c)},className:"text-zinc-400 hover:text-amber-400 p-1",children:g.jsx(Ds,{className:"w-4 h-4"})}),g.jsx("button",{onClick:d=>{d.stopPropagation(),o(c.id)},className:"text-zinc-500 hover:text-red-400 p-1",children:g.jsx(Ns,{className:"w-4 h-4"})})]})]}),r[c.id]&&g.jsx("div",{className:"p-3 border-t border-zinc-600/50 bg-zinc-900/30",children:g.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:c.description})})]},c.id))]})]})},v6={name:"",quantity:1,description:"",equipped:!1},_6=({initialData:t,onSave:e,onCancel:n})=>{const[i,r]=ne.useState(t),s=(h,c)=>{r(d=>({...d,[h]:c}))},a=h=>{h.preventDefault(),i.name.trim()&&e(i)},o="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500",u=["light","medium","heavy","shield"];return g.jsxs("form",{onSubmit:a,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[g.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Item":"Add New Item"}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[g.jsx("input",{type:"text",placeholder:"Item Name",value:i.name,onChange:h=>s("name",h.target.value),required:!0,className:`${o} sm:col-span-2`}),g.jsx("input",{type:"number",placeholder:"Qty",value:i.quantity,onChange:h=>s("quantity",parseInt(h.target.value)),min:"1",className:`${o} text-center`})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-zinc-400",children:"Armor Type"}),g.jsxs("select",{value:i.armorType||"",onChange:h=>s("armorType",h.target.value||void 0),className:o,children:[g.jsx("option",{value:"",children:"Not Armor"}),u.map(h=>g.jsx("option",{value:h,className:"capitalize",children:h},h))]})]}),i.armorType&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-zinc-400",children:i.armorType==="shield"?"AC Bonus":"Base AC"}),g.jsx("input",{type:"number",placeholder:"AC",value:i.armorClass||"",onChange:h=>s("armorClass",parseInt(h.target.value)||0),className:o})]})]}),g.jsx("textarea",{placeholder:"Description (optional)",value:i.description,onChange:h=>s("description",h.target.value),rows:3,className:`${o} resize-y`}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),g.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Item"})]})]})},b6=({character:t,onUpdateCharacter:e})=>{const[n,i]=ne.useState(null),[r,s]=ne.useState({}),a=c=>{let d;if("id"in c)d=t.equipment.map(f=>f.id===c.id?c:f);else{const f={...c,id:`item_${Date.now()}`};d=[...t.equipment,f]}e({...t,equipment:d}),i(null)},o=c=>{if(window.confirm("Are you sure you want to delete this item?")){const d=t.equipment.filter(f=>f.id!==c);e({...t,equipment:d})}},u=c=>{s(d=>({...d,[c]:!d[c]}))},h=ne.useMemo(()=>[...t.equipment||[]].sort((c,d)=>c.name.localeCompare(d.name)),[t.equipment]);return g.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Equipment"}),g.jsxs("button",{onClick:()=>i("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[g.jsx(Gl,{className:"w-5 h-5"})," Add Item"]})]}),n&&g.jsx(_6,{initialData:n==="new"?v6:n,onSave:a,onCancel:()=>i(null)}),g.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[h.length===0&&!n&&g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"Your backpack is empty."})}),h.map(c=>g.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:[g.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer",onClick:()=>u(c.id),children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"font-semibold text-amber-300",children:c.name}),g.jsxs("span",{className:"text-zinc-400 text-xs",children:["(x",c.quantity,")"]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:d=>{d.stopPropagation(),i(c)},className:"text-zinc-400 hover:text-amber-400 p-1",children:g.jsx(Ds,{className:"w-4 h-4"})}),g.jsx("button",{onClick:d=>{d.stopPropagation(),o(c.id)},className:"text-zinc-500 hover:text-red-400 p-1",children:g.jsx(Ns,{className:"w-4 h-4"})})]})]}),r[c.id]&&(c.description||c.armorType)&&g.jsxs("div",{className:"p-3 border-t border-zinc-600/50 bg-zinc-900/30",children:[c.armorType&&g.jsxs("p",{className:"text-xs text-sky-300 capitalize mb-1",children:["Type: ",c.armorType," ",c.armorType!=="shield"?`(Base AC ${c.armorClass})`:`(AC Bonus +${c.armorClass})`]}),c.description&&g.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:c.description})]})]},c.id))]})]})},T6={name:"",bonus:"+0",damage:"1d4"},E6=({initialData:t,onSave:e,onCancel:n})=>{const[i,r]=ne.useState(t),s=(u,h)=>{r(c=>({...c,[u]:h}))},a=u=>{u.preventDefault(),i.name.trim()&&e(i)},o="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return g.jsxs("form",{onSubmit:a,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[g.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Attack":"Add New Attack"}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[g.jsx("input",{type:"text",placeholder:"Attack Name",value:i.name,onChange:u=>s("name",u.target.value),required:!0,className:`${o} sm:col-span-1`}),g.jsx("input",{type:"text",placeholder:"e.g. +5",value:i.bonus,onChange:u=>s("bonus",u.target.value),required:!0,className:`${o} text-center`}),g.jsx("input",{type:"text",placeholder:"e.g. (2d6)+(1d4)+3",value:i.damage,onChange:u=>s("damage",u.target.value),required:!0,className:`${o} text-center`})]}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),g.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Attack"})]})]})},A6=({character:t,onUpdateCharacter:e})=>{const[n,i]=ne.useState(null),r=o=>{let u;if("id"in o)u=t.attacks.map(h=>h.id===o.id?o:h);else{const h={...o,id:`attack_${Date.now()}`};u=[...t.attacks,h]}e({...t,attacks:u}),i(null)},s=o=>{if(window.confirm("Are you sure you want to delete this attack?")){const u=t.attacks.filter(h=>h.id!==o);e({...t,attacks:u})}},a=ne.useMemo(()=>[...t.attacks||[]].sort((o,u)=>o.name.localeCompare(u.name)),[t.attacks]);return g.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Attacks & Cantrips"}),g.jsxs("button",{onClick:()=>i("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[g.jsx(Gl,{className:"w-5 h-5"})," Add Attack"]})]}),n&&g.jsx(E6,{initialData:n==="new"?T6:n,onSave:r,onCancel:()=>i(null)}),g.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[a.length===0&&!n&&g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"No attacks have been defined."})}),a.map(o=>g.jsx("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:g.jsxs("div",{className:"grid grid-cols-6 items-center p-3",children:[g.jsx("span",{className:"font-semibold text-amber-300 col-span-3",children:o.name}),g.jsx("span",{className:"font-mono text-zinc-300 col-span-1 text-center",children:o.bonus}),g.jsx("span",{className:"font-mono text-zinc-300 col-span-1 text-center",children:o.damage}),g.jsxs("div",{className:"flex items-center gap-2 justify-end col-span-1",children:[g.jsx("button",{onClick:()=>i(o),className:"text-zinc-400 hover:text-amber-400 p-1",children:g.jsx(Ds,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>s(o.id),className:"text-zinc-500 hover:text-red-400 p-1",children:g.jsx(Ns,{className:"w-4 h-4"})})]})]})},o.id))]})]})},w6={name:"",max:1},S6=({initialData:t,onSave:e,onCancel:n})=>{const[i,r]=ne.useState(t),s=(u,h)=>{r(c=>({...c,[u]:h}))},a=u=>{u.preventDefault(),i.name.trim()&&e(i)},o="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return g.jsxs("form",{onSubmit:a,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[g.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Resource":"Add New Resource"}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[g.jsx("input",{type:"text",placeholder:"Resource Name",value:i.name,onChange:u=>s("name",u.target.value),required:!0,className:`${o} sm:col-span-2`}),g.jsx("input",{type:"number",placeholder:"Max",value:i.max,onChange:u=>s("max",parseInt(u.target.value)||1),min:"1",className:`${o} text-center`})]}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),g.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save"})]})]})},x6=({character:t,onUpdateCharacter:e})=>{const[n,i]=ne.useState(null),r=a=>{let o;if("id"in a)o=t.customResources.map(u=>u.id===a.id?{...u,name:a.name,max:a.max}:u);else{const u={...a,id:`resource_${Date.now()}`,used:0};o=[...t.customResources,u]}e({...t,customResources:o}),i(null)},s=a=>{if(window.confirm("Are you sure you want to delete this resource?")){const o=t.customResources.filter(u=>u.id!==a);e({...t,customResources:o})}};return g.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-lg",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Other Resources"}),g.jsxs("button",{onClick:()=>i("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[g.jsx(Gl,{className:"w-5 h-5"})," Add Resource"]})]}),n&&g.jsx(S6,{initialData:n==="new"?w6:n,onSave:r,onCancel:()=>i(null)}),g.jsxs("div",{className:"space-y-2",children:[(t.customResources||[]).length===0&&!n&&g.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"No custom resources defined."}),(t.customResources||[]).map(a=>g.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm p-3 flex items-center justify-between",children:[g.jsx("span",{className:"font-semibold text-amber-300",children:a.name}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("span",{className:"text-zinc-400",children:["Max: ",a.max]}),g.jsx("button",{onClick:()=>i(a),className:"text-zinc-400 hover:text-amber-400 p-1",children:g.jsx(Ds,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>s(a.id),className:"text-zinc-500 hover:text-red-400 p-1",children:g.jsx(Ns,{className:"w-4 h-4"})})]})]},a.id))]})]})},sd=t=>Math.floor((t-10)/2),Ps=t=>t>=0?`+${t}`:String(t),D_=["strength","dexterity","constitution","intelligence","wisdom","charisma"],R6=({label:t,isActive:e,onClick:n,controls:i,id:r})=>g.jsx("button",{id:r,role:"tab","aria-selected":e,"aria-controls":i,onClick:n,className:`px-3 py-2 text-sm font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-zinc-700 text-amber-400 border-b-2 border-amber-400":"text-zinc-400 hover:bg-zinc-800/60 border-b-2 border-transparent"}`,children:t}),Bn=({label:t,name:e,type:n,value:i,onChange:r,placeholder:s,className:a})=>g.jsxs("div",{className:a,children:[g.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-zinc-400 capitalize",children:t}),g.jsx("input",{type:n,id:e,name:e,value:i,onChange:r,placeholder:s,className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md shadow-sm py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm"})]}),Iu=({label:t,value:e,className:n})=>g.jsxs("div",{className:`flex flex-col items-center justify-center p-3 bg-zinc-700/50 rounded-lg text-center ${n}`,children:[g.jsx("span",{className:"text-3xl font-bold font-mono text-white",children:e}),g.jsx("span",{className:"text-xs uppercase tracking-wider text-zinc-400 mt-1",children:t})]}),zs=({label:t,name:e,value:n,onChange:i,placeholder:r})=>g.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col flex-1 h-full",children:[g.jsx("h3",{className:"text-lg font-semibold text-amber-400 mb-2",children:t}),g.jsx("textarea",{name:e,value:n,onChange:i,className:"w-full bg-zinc-700 border border-zinc-600 rounded-md p-3 text-zinc-200 focus:ring-amber-500 focus:border-amber-500 resize-y flex-grow min-h-[100px]",placeholder:r||`Your character's ${t.toLowerCase()}...`})]}),C6=[{key:"main",label:"Main"},{key:"stats",label:"Stats & Skills"},{key:"combat",label:"Combat & Features"},{key:"bio",label:"Biography & Notes"},{key:"inventory",label:"Inventory"},{key:"spells",label:"Spells"}],I6=({characterId:t,onBack:e,onSaveComplete:n,onDelete:i})=>{const[r,s]=ne.useState(null),[a,o]=ne.useState(!0),[u,h]=ne.useState(!1),[c,d]=ne.useState(!1),[f,p]=ne.useState(""),[E,O]=ne.useState("main"),[V,b]=ne.useState(null),[x,C]=ne.useState(null),M=t==="new";ne.useEffect(()=>{(async()=>{o(!0);let Q;M?Q={...Rg(),id:"temp_new"}:Q=await e2(t),s(Q),Q!=null&&Q.imageUrl&&C(Q.imageUrl),o(!1)})()},[t,M]);const j=ne.useMemo(()=>r?Math.ceil(r.level/4)+1:0,[r==null?void 0:r.level]),k=async()=>{if(r){h(!0);try{const P=M?`char_${Date.now()}`:r.id;let Q=r.imageUrl||"";V&&(Q=await c6(V,P));const F={...r,id:P,imageUrl:Q,proficiencyBonus:j,lastUpdated:Date.now()},H=await t2(F);n(H.id)}catch(P){console.error("Failed to save character:",P),alert("An error occurred while saving. Please try again.")}finally{h(!1)}}},S=async()=>{r&&!M&&window.confirm(`Are you sure you want to permanently delete ${r.name}?`)&&i(r.id)},y=P=>{if(P.target.files&&P.target.files[0]){const Q=P.target.files[0];b(Q);const F=new FileReader;F.onloadend=()=>{C(F.result)},F.readAsDataURL(Q)}},v=P=>{if(!r)return;const{name:Q,value:F,type:H}=P.target;let te=F;H==="number"&&(te=parseInt(F)||0),s(be=>({...be,[Q]:te}))},T=(P,Q)=>{r&&s(F=>({...F,currency:{...F.currency,[P]:Q}}))},w=(P,Q)=>{r&&s(F=>({...F,hp:{...F.hp,[P]:Q}}))},R=P=>{if(!r)return;const{value:Q}=P.target;s(F=>({...F,hitDice:{...F.hitDice,total:Q}}))},A=(P,Q)=>{r&&s(F=>({...F,abilityScores:{...F.abilityScores,[P]:Q}}))},U=P=>{if(!r)return;const Q={...r.savingThrows};Q[P].proficient=!Q[P].proficient,s(F=>({...F,savingThrows:Q}))},B=P=>{if(!r)return;const Q=r.skills.map(F=>{if(F.name===P){const H=!F.proficient,te=H?F.expertise:!1;return{...F,proficient:H,expertise:te}}return F});s(F=>({...F,skills:Q}))},N=P=>{if(!r)return;const Q=r.skills.map(F=>{if(F.name===P){const H=!F.expertise,te=H||F.proficient;return{...F,proficient:te,expertise:H}}return F});s(F=>({...F,skills:Q}))},I=(P,Q)=>{if(!r)return;const F={...r.spellSlots};F[P]={...F[P],max:Q},s(H=>({...H,spellSlots:F}))},q=async()=>{if(!r)return;d(!0);const P=await e6(r,f);s(Q=>({...Q,...P})),d(!1)},z=ne.useMemo(()=>r?sd(r.abilityScores.dexterity):0,[r==null?void 0:r.abilityScores.dexterity]),{spellSaveDC:G,spellAttackBonus:ee}=ne.useMemo(()=>{if(!r||!r.spellcastingAbility)return{spellSaveDC:"-",spellAttackBonus:"-"};const P=sd(r.abilityScores[r.spellcastingAbility]);return{spellSaveDC:8+j+P,spellAttackBonus:Ps(j+P)}},[r==null?void 0:r.spellcastingAbility,r==null?void 0:r.abilityScores,j]);return a||!r?g.jsx("div",{className:"flex justify-center items-center h-screen",children:g.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})}):g.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:[g.jsxs("header",{className:"flex justify-between items-center mb-4 border-b border-zinc-700 pb-4",children:[g.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-zinc-300 hover:text-amber-400 transition-colors",children:[g.jsx(i2,{className:"w-5 h-5"}),M?"Cancel Creation":"Back to Play View"]}),g.jsxs("div",{className:"flex items-center gap-2",children:[!M&&g.jsx("button",{onClick:S,className:"p-2 rounded-full bg-red-800/50 hover:bg-red-600 text-red-300 hover:text-white transition-colors","aria-label":"Delete Character",children:g.jsx(Ns,{className:"w-5 h-5"})}),g.jsxs("button",{onClick:k,disabled:u,className:"flex items-center gap-2 px-4 py-2 bg-amber-600 text-white font-bold rounded-lg shadow-md hover:bg-amber-500 transition-colors disabled:bg-zinc-600",children:[g.jsx(SD,{className:"w-5 h-5"}),u?"Saving...":"Save Changes"]})]})]}),g.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 shadow-2xl shadow-amber-900/10 rounded-lg p-4 sm:p-6",children:[g.jsx("div",{role:"tablist","aria-label":"Character Sheet Sections",className:"flex space-x-1 mb-6 border-b border-zinc-700 overflow-x-auto",children:C6.map(P=>g.jsx(R6,{id:`tab-${P.key}`,label:P.label,isActive:E===P.key,onClick:()=>O(P.key),controls:`panel-${P.key}`},P.key))}),g.jsx("div",{id:"panel-main",role:"tabpanel","aria-labelledby":"tab-main",hidden:E!=="main",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"space-y-4 md:col-span-1",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-zinc-400",children:"Character Portrait"}),g.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[g.jsx("span",{className:"inline-block h-24 w-24 rounded-lg overflow-hidden bg-zinc-700",children:x?g.jsx("img",{src:x,alt:"Character portrait",className:"h-full w-full object-cover"}):g.jsx(r2,{className:"h-full w-full text-zinc-500 p-4"})}),g.jsx("input",{type:"file",id:"imageUpload",className:"hidden",accept:"image/png, image/jpeg, image/webp, image/gif",onChange:y}),g.jsx("label",{htmlFor:"imageUpload",className:"cursor-pointer rounded-md bg-zinc-700 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-zinc-600",children:"Change"})]})]}),g.jsx(Bn,{label:"Character Name",name:"name",type:"text",value:r.name,onChange:v,placeholder:"e.g., Eldrin"}),g.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[g.jsx(Bn,{label:"Class",name:"class",type:"text",value:r.class,onChange:v,placeholder:"e.g., Wizard"}),g.jsx(Bn,{label:"Subclass",name:"subclass",type:"text",value:r.subclass,onChange:v,placeholder:"e.g., School of Evocation"})]}),g.jsx(Bn,{label:"Race",name:"race",type:"text",value:r.race,onChange:v,placeholder:"e.g., High-Elf"}),g.jsx(Bn,{label:"Background",name:"background",type:"text",value:r.background,onChange:v,placeholder:"e.g., Sage"}),g.jsx(Bn,{label:"Languages",name:"languages",type:"text",value:r.languages,onChange:v,placeholder:"e.g., Common, Elvish"})]}),g.jsxs("div",{className:"space-y-4 md:col-span-1",children:[g.jsx(Bn,{label:"Level",name:"level",type:"number",value:r.level,onChange:v}),g.jsx(Bn,{label:"Alignment",name:"alignment",type:"text",value:r.alignment,onChange:v,placeholder:"e.g., Chaotic Good"}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Hit Points"}),g.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"hp-current",className:"block text-xs font-medium text-zinc-500 text-center",children:"Current"}),g.jsx("input",{id:"hp-current",type:"number",value:r.hp.current,onChange:P=>w("current",parseInt(P.target.value)||0),className:"mt-1 w-full bg-zinc-700 border border-zinc-600 rounded-md py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"hp-max",className:"block text-xs font-medium text-zinc-500 text-center",children:"Max"}),g.jsx("input",{id:"hp-max",type:"number",value:r.hp.max,onChange:P=>w("max",parseInt(P.target.value)||0),className:"mt-1 w-full bg-zinc-700 border border-zinc-600 rounded-md py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"hp-temporary",className:"block text-xs font-medium text-zinc-500 text-center",children:"Temporary"}),g.jsx("input",{id:"hp-temporary",type:"number",value:r.hp.temporary,onChange:P=>w("temporary",parseInt(P.target.value)||0),className:"mt-1 w-full bg-zinc-700 border border-zinc-600 rounded-md py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]})]})]}),g.jsx(Bn,{label:"Hit Dice",name:"hitDice",type:"text",value:r.hitDice.total,onChange:R,placeholder:"e.g. 1d8"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 md:col-span-1",children:[g.jsx(Bn,{label:"Armor Class",name:"armorClass",type:"number",value:r.armorClass,onChange:v,className:"col-span-1"}),g.jsx(Iu,{label:"Initiative",value:Ps(z)}),g.jsx(Bn,{label:"Speed",name:"speed",type:"number",value:r.speed,onChange:v,className:"col-span-1"}),g.jsx(Iu,{label:"Proficiency",value:Ps(j)}),g.jsxs("div",{className:"col-span-2",children:[g.jsx("label",{htmlFor:"spellcastingAbility",className:"block text-sm font-medium text-zinc-400",children:"Spellcasting Ability"}),g.jsxs("select",{id:"spellcastingAbility",name:"spellcastingAbility",value:r.spellcastingAbility,onChange:v,className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md shadow-sm py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm",children:[g.jsx("option",{value:"",children:"None"}),D_.map(P=>g.jsx("option",{value:P,className:"capitalize",children:P},P))]})]}),g.jsx(Iu,{label:"Spell Save DC",value:String(G)}),g.jsx(Iu,{label:"Spell Attack",value:String(ee)})]})]})}),g.jsx("div",{id:"panel-stats",role:"tabpanel","aria-labelledby":"tab-stats",hidden:E!=="stats",children:g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D_.map(P=>{const Q=r.abilityScores[P],F=sd(Q),H=r.savingThrows[P],te=F+(H.proficient?j:0),be=r.skills.filter(oe=>oe.ability===P);return g.jsxs("div",{className:"bg-zinc-700/50 p-3 rounded-lg flex flex-col gap-3",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("div",{className:"flex flex-col items-center justify-center bg-zinc-900/50 p-2 rounded-lg w-20",children:[g.jsx("span",{className:"text-3xl font-bold font-mono text-white",children:Ps(F)}),g.jsx("span",{className:"text-xs uppercase tracking-wider text-zinc-400",children:P.substring(0,3)})]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-xl font-cinzel text-amber-400 capitalize",children:P}),g.jsx("input",{type:"number",value:Q,onChange:oe=>A(P,parseInt(oe.target.value)||0),className:"w-full bg-zinc-800 text-center text-lg rounded border border-zinc-600 p-1 focus:ring-amber-500","aria-label":`${P} score`})]})]}),g.jsxs("div",{className:"bg-zinc-800/60 p-2 rounded-md space-y-2",children:[g.jsxs("label",{htmlFor:`saving-throw-${P}`,className:"flex items-center justify-between cursor-pointer text-sm",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:`saving-throw-${P}`,checked:H.proficient,onChange:()=>U(P),className:"w-4 h-4 rounded-full text-amber-600 bg-zinc-900 border-zinc-600 focus:ring-amber-500"}),g.jsx("span",{children:"Saving Throw"})]}),g.jsx("span",{className:"font-mono font-bold text-lg text-white",children:Ps(te)})]}),be.map(oe=>{const ye=F+(oe.proficient?j:0)+(oe.expertise?j:0);return g.jsxs("div",{className:"flex items-center justify-between text-sm",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:`skill-prof-${oe.name}`,checked:oe.proficient,onChange:()=>B(oe.name),className:"w-4 h-4 rounded-full text-amber-600 bg-zinc-900 border-zinc-600 focus:ring-amber-500 cursor-pointer"}),g.jsx("input",{type:"checkbox",id:`skill-exp-${oe.name}`,checked:oe.expertise,onChange:()=>N(oe.name),className:"w-4 h-4 rounded-sm text-yellow-300 bg-zinc-900 border-zinc-600 focus:ring-yellow-400 cursor-pointer",title:"Expertise"}),g.jsx("label",{htmlFor:`skill-prof-${oe.name}`,className:"cursor-pointer",children:oe.name})]}),g.jsx("span",{className:"font-mono font-bold text-lg text-white",children:Ps(ye)})]},oe.name)})]})]},P)})})}),g.jsx("div",{id:"panel-combat",role:"tabpanel","aria-labelledby":"tab-combat",hidden:E!=="combat",className:"min-h-[60vh]",children:g.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-full",children:[g.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col",children:g.jsx(A6,{character:r,onUpdateCharacter:s})}),g.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col",children:g.jsx(y6,{character:r,onUpdateCharacter:P=>s(P)})})]})}),g.jsx("div",{id:"panel-bio",role:"tabpanel","aria-labelledby":"tab-bio",hidden:E!=="bio",className:"min-h-[60vh]",children:g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"flex flex-col gap-6",children:[g.jsx(zs,{label:"Personality Traits",name:"personalityTraits",value:r.personalityTraits,onChange:v}),g.jsx(zs,{label:"Ideals",name:"ideals",value:r.ideals,onChange:v}),g.jsx(zs,{label:"Bonds",name:"bonds",value:r.bonds,onChange:v}),g.jsx(zs,{label:"Flaws",name:"flaws",value:r.flaws,onChange:v})]}),g.jsxs("div",{className:"flex flex-col gap-6",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-amber-400 mb-2",children:"AI Personality Generator"}),g.jsxs("div",{className:"p-4 bg-zinc-800 border border-zinc-700 rounded-lg",children:[g.jsx("input",{type:"text",placeholder:"Optional: Add a keyword (e.g., 'tragic', 'grew up an orphan')",value:f,onChange:P=>p(P.target.value),className:"w-full bg-zinc-700 border border-zinc-600 rounded-md p-2 text-sm mb-2 focus:ring-amber-500 focus:border-amber-500"}),g.jsxs("button",{onClick:q,disabled:c,className:"flex w-full justify-center items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition disabled:bg-zinc-600",children:[g.jsx(wD,{className:"w-4 h-4"}),c?"Generating...":"Generate with AI"]})]})]}),g.jsx(zs,{label:"Notes",name:"notes",value:r.notes,onChange:v,placeholder:"Campaign notes, important NPCs, etc."}),g.jsx(zs,{label:"DM Notes",name:"dmNotes",value:r.dmNotes,onChange:v,placeholder:"Notes from your DM, or secrets your character knows."})]})]})}),g.jsx("div",{id:"panel-inventory",role:"tabpanel","aria-labelledby":"tab-inventory",hidden:E!=="inventory",className:"min-h-[60vh]",children:g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"lg:col-span-1",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-4",children:"Currency"}),g.jsx("div",{className:"bg-zinc-900/50 p-4 rounded-lg grid grid-cols-3 sm:grid-cols-5 gap-3",children:Object.entries(r.currency).map(([P,Q])=>g.jsxs("div",{children:[g.jsx("label",{className:"block text-center text-sm font-medium text-zinc-400 uppercase",children:P}),g.jsx("input",{type:"number",value:Q,onChange:F=>T(P,parseInt(F.target.value,10)||0),className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md py-1 px-2 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]},P))})]}),g.jsx("div",{className:"lg:col-span-2",children:g.jsx(b6,{character:r,onUpdateCharacter:s})})]})}),g.jsxs("div",{id:"panel-spells",role:"tabpanel","aria-labelledby":"tab-spells",hidden:E!=="spells",className:"min-h-[60vh] space-y-6",children:[g.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-lg",children:[g.jsx("h4",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Maximum Spell Slots"}),g.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-5 md:grid-cols-9 gap-3",children:Array.from({length:9},(P,Q)=>Q+1).map(P=>{var Q;return g.jsxs("div",{children:[g.jsxs("label",{className:"block text-center text-sm font-medium text-zinc-400",children:["Lvl ",P]}),g.jsx("input",{type:"number",min:"0",value:((Q=r.spellSlots[P])==null?void 0:Q.max)??0,onChange:F=>I(P,parseInt(F.target.value,10)||0),className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md py-1 px-2 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]},P)})})]}),g.jsx(x6,{character:r,onUpdateCharacter:s}),g.jsx(m6,{character:r,onUpdateCharacter:P=>s(P)})]})]})]})},N6=t=>Math.floor((t-10)/2),ad=t=>t>=0?`+${t}`:String(t),D6=["strength","dexterity","constitution","intelligence","wisdom","charisma"],O6=({character:t})=>{const{proficiencyBonus:e,abilityScores:n,savingThrows:i,skills:r}=t;return g.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3 text-center",children:"Abilities"}),g.jsx("div",{className:"space-y-3",children:D6.map(s=>{const a=n[s],o=N6(a),u=i[s],h=o+(u.proficient?e:0),c=r.filter(d=>d.ability===s);return g.jsxs("div",{className:"bg-zinc-900/50 p-3 rounded-lg border border-zinc-700/50",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("h4",{className:"text-lg font-cinzel text-amber-400 capitalize",children:s}),g.jsxs("div",{className:"flex items-baseline gap-2",children:[g.jsx("span",{className:"text-3xl font-mono text-white font-bold",children:a}),g.jsxs("span",{className:"text-2xl font-mono text-amber-300 font-bold",children:["(",ad(o),")"]})]})]}),g.jsxs("div",{className:"bg-zinc-800/60 p-2 rounded-md space-y-2",children:[g.jsxs("div",{className:"flex items-center justify-between text-sm",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:`w-3 h-3 rounded-full border-2 ${u.proficient?"bg-amber-400 border-amber-200":"border-zinc-500"}`}),g.jsx("span",{children:"Saving Throw"})]}),g.jsx("span",{className:"font-mono font-bold text-base text-white",children:ad(h)})]}),g.jsx("hr",{className:"border-zinc-700"}),c.map(d=>{const f=o+(d.proficient?e:0)+(d.expertise?e:0);let p="border-zinc-500";return d.expertise?p="bg-white border-white":d.proficient&&(p="bg-amber-400 border-amber-200"),g.jsxs("div",{className:"flex items-center justify-between text-sm",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:`w-3 h-3 rounded-full border-2 ${p}`}),g.jsx("span",{children:d.name})]}),g.jsx("span",{className:"font-mono font-bold text-base text-white",children:ad(f)})]},d.name)})]})]},s)})})]})},M6=({spell:t,onToggleExpand:e,isExpanded:n})=>g.jsxs("div",{className:"bg-zinc-700/50 rounded-lg",children:[g.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-3",onClick:e,children:[g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("h4",{className:"font-bold text-amber-300 truncate",title:t.name,children:t.name}),g.jsxs("div",{className:"flex items-center gap-2 text-xs text-zinc-400 mt-1",children:[g.jsx("span",{className:"truncate",title:t.castingTime,children:t.castingTime}),g.jsx("span",{className:"opacity-50",children:"|"}),g.jsx("span",{className:"truncate",title:t.range,children:t.range})]})]}),g.jsx("div",{className:"flex items-center gap-2 pl-2 flex-shrink-0",children:g.jsx("span",{className:"text-xs text-zinc-400 capitalize",children:t.school})})]}),n&&g.jsxs("div",{className:"mt-2 pt-3 border-t border-zinc-600/50 space-y-2 text-sm p-3 bg-zinc-900/30",children:[g.jsxs("p",{children:[g.jsx("strong",{className:"text-zinc-400",children:"Components:"})," ",t.components]}),g.jsxs("p",{children:[g.jsx("strong",{className:"text-zinc-400",children:"Duration:"})," ",t.duration]}),g.jsx("p",{className:"text-zinc-300 mt-2 whitespace-pre-wrap",children:t.description})]})]}),k6=({character:t})=>{const[e,n]=ne.useState({}),[i,r]=ne.useState(""),s=u=>{n(h=>({...h,[u]:!h[u]}))},a=ne.useMemo(()=>t.spells.filter(h=>h.name.toLowerCase().includes(i.toLowerCase())).reduce((h,c)=>(h[c.level]=[...h[c.level]||[],c],h[c.level].sort((d,f)=>d.name.localeCompare(f.name)),h),{}),[t.spells,i]),o=Object.keys(a).map(Number).sort((u,h)=>u-h);return g.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col h-auto max-h-[calc(100vh-10rem)]",children:[g.jsx("div",{className:"flex justify-between items-center mb-2",children:g.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Spellbook"})}),g.jsx("div",{className:"mb-4",children:g.jsx("input",{type:"text",placeholder:"Search spells...",value:i,onChange:u=>r(u.target.value),className:"w-full bg-zinc-700 p-2 rounded-md border border-zinc-600 text-sm focus:ring-amber-500 focus:border-amber-500"})}),g.jsx("div",{className:"space-y-6 overflow-y-auto pr-2 -mr-2 flex-grow",children:t.spells.length===0?g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("p",{className:"text-center text-zinc-500 text-sm py-8",children:"This character knows no spells."})}):o.length===0?g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("p",{className:"text-center text-zinc-500 text-sm py-8",children:"No spells match your search."})}):o.map(u=>g.jsxs("div",{children:[g.jsx("h4",{className:"text-xl font-serif text-zinc-300 border-b border-zinc-600 pb-1 mb-3",children:u===0?"Cantrips":`Level ${u}`}),g.jsx("div",{className:"space-y-3",children:a[u].map(h=>g.jsx(M6,{spell:h,isExpanded:!!e[h.id],onToggleExpand:()=>s(h.id)},h.id))})]},u))})]})},ec=t=>Math.floor((t-10)/2),Im=t=>t>=0?`+${t}`:String(t),V6=({label:t,isActive:e,onClick:n,id:i,controls:r})=>g.jsx("button",{id:i,role:"tab","aria-selected":e,"aria-controls":r,onClick:n,className:`px-4 py-2 text-sm sm:text-base font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-zinc-800 text-amber-400 border-b-2 border-amber-400":"text-zinc-400 hover:bg-zinc-800/60 border-b-2 border-transparent"}`,children:t}),es=({label:t,value:e,subValue:n,className:i})=>g.jsxs("div",{className:`flex flex-col items-center justify-center p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-center ${i}`,children:[g.jsx("span",{className:"text-2xl sm:text-3xl font-bold font-mono text-white",children:e}),g.jsx("span",{className:"text-xs uppercase tracking-wider text-zinc-400 mt-1",children:t}),n&&g.jsx("span",{className:"text-xs text-zinc-500",children:n})]}),j6=t=>{if(!t||typeof t!="string")return{total:0,pretty:"Invalid"};const e=t.match(/(\d+)d(\d+)/);if(!e)return{total:0,pretty:"Invalid"};const n=parseInt(e[1],10),i=parseInt(e[2],10);let r=0;const s=[];for(let a=0;a<n;a++){const o=Math.floor(Math.random()*i)+1;s.push(o),r+=o}return{total:r,pretty:`[${s.join("+")}]`}},U6=({character:t,onUpdate:e})=>{const[n,i]=ne.useState(null),r=ec(t.abilityScores.constitution),s=ne.useMemo(()=>{const h=ec(t.abilityScores.wisdom),c=t.skills.find(f=>f.name==="Perception");let d=0;return c&&(c.expertise?d=t.proficiencyBonus*2:c.proficient&&(d=t.proficiencyBonus)),10+h+d},[t]),a=ne.useMemo(()=>{const h=ec(t.abilityScores.dexterity);let c=10+h,d=0;const f=t.equipment.find(E=>E.equipped&&["light","medium","heavy"].includes(E.armorType||"")),p=t.equipment.find(E=>E.equipped&&E.armorType==="shield");if(p&&(d=p.armorClass||2),f){const E=f.armorClass||0;switch(f.armorType){case"light":c=E+h;break;case"medium":c=E+Math.min(h,2);break;case"heavy":c=E;break}}return c+d},[t.abilityScores,t.equipment]),o=()=>{if(t.hitDice.used>=t.level)return;const{total:h,pretty:c}=j6(t.hitDice.total),d=Math.max(1,h+r),f=Math.min(t.hp.max,t.hp.current+d);i(`${c} + ${r} = ${d} HP`),e({hp:{...t.hp,current:f},hitDice:{...t.hitDice,used:t.hitDice.used+1}})},u=()=>{e({hitDice:{...t.hitDice,used:0}}),i(null)};return g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"md:col-span-2 lg:col-span-3 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:[g.jsx(es,{label:"Armor Class",value:a}),g.jsx(es,{label:"Initiative",value:Im(t.initiative)}),g.jsx(es,{label:"Speed",value:`${t.speed}ft`,subValue:`≈ ${Math.round(t.speed*.3)}m`}),g.jsx(es,{label:"Proficiency",value:Im(t.proficiencyBonus)}),g.jsx(es,{label:"Passive Perception",value:s,className:"col-span-2 sm:col-span-1"})]}),g.jsx(H6,{hp:t.hp,onHpChange:h=>e({hp:h})}),g.jsx(G6,{saves:t.deathSaves,onSaveChange:h=>e({deathSaves:h})}),g.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Hit Dice"}),g.jsxs("p",{className:"text-center text-3xl font-bold font-mono text-white mb-3",children:[t.level-t.hitDice.used," / ",t.level]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:o,disabled:t.hitDice.used>=t.level,className:"w-full bg-green-800/80 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md transition-colors disabled:bg-zinc-600 disabled:cursor-not-allowed",children:["Spend (",t.hitDice.total,")"]}),g.jsx("button",{onClick:u,className:"bg-sky-800/80 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-md transition-colors",children:"Reset"})]}),n&&g.jsx("p",{className:"text-center text-amber-300 font-mono mt-3 p-2 bg-zinc-900/50 rounded-md",children:n})]}),g.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Languages"}),g.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:t.languages||"None"})]})]})},P6=({character:t})=>g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[g.jsx($6,{items:t.attacks||[]}),g.jsx(Q6,{title:"Features & Traits",items:t.featuresAndTraits||[]})]}),z6=({character:t,onUpdate:e})=>{const n=t.spellcastingAbility,i=n?ec(t.abilityScores[n]):0,r=n?8+t.proficiencyBonus+i:"-",s=n?t.proficiencyBonus+i:0;return g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[g.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3 text-center",children:"Spellcasting"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsx(es,{label:"Save DC",value:r}),g.jsx(es,{label:"Attack Bonus",value:Im(s)}),g.jsxs("div",{className:"col-span-2 text-center",children:[g.jsx("p",{className:"text-xs uppercase tracking-wider text-zinc-400",children:"Ability"}),g.jsx("p",{className:"text-xl font-bold text-white capitalize",children:n||"None"})]})]})]}),g.jsx(O_,{title:"Spell Slots",slots:t.spellSlots,onSlotChange:a=>e({spellSlots:a})}),t.customResources&&t.customResources.length>0&&g.jsx(O_,{title:"Other Resources",slots:t.customResources,onSlotChange:a=>e({customResources:a}),isCustom:!0})]}),g.jsx("div",{className:"lg:col-span-2",children:g.jsx(k6,{character:t})})]})},L6=({character:t,onUpdate:e})=>{const n=o=>{const u=t.equipment.map(h=>{var c;return h.id===o?{...h,equipped:!h.equipped}:h.id!==o&&h.armorType&&h.armorType!=="shield"&&((c=t.equipment.find(d=>d.id===o))==null?void 0:c.armorType)!=="shield"?{...h,equipped:!1}:h});e({equipment:u})},i=t.equipment.filter(o=>o.armorType&&o.armorType!=="shield"),r=t.equipment.filter(o=>o.armorType==="shield"),s=t.equipment.filter(o=>!o.armorType),a=({title:o,items:u})=>g.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:o}),u.length===0?g.jsx("p",{className:"text-zinc-500 text-sm text-center py-4",children:"None."}):g.jsx("div",{className:"space-y-2",children:u.map(h=>g.jsxs("div",{className:"bg-zinc-700/50 rounded-lg p-3 text-sm flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsxs("p",{className:"font-semibold text-amber-300",children:[h.name," ",g.jsxs("span",{className:"text-xs text-zinc-400",children:["(x",h.quantity,")"]})]}),h.description&&g.jsx("p",{className:"text-xs text-zinc-300",children:h.description})]}),h.armorType&&g.jsx("button",{onClick:()=>n(h.id),className:`px-3 py-1 text-xs font-bold rounded ${h.equipped?"bg-amber-500 text-white":"bg-zinc-600 hover:bg-zinc-500"}`,children:h.equipped?"Equipped":"Equip"})]},h.id))})]});return g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[g.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Currency"}),g.jsx("div",{className:"grid grid-cols-3 gap-2 text-center",children:Object.keys(t.currency).map(o=>g.jsxs("div",{children:[g.jsx("p",{className:"text-xl font-mono text-white",children:t.currency[o]}),g.jsx("p",{className:"text-xs uppercase text-zinc-400",children:o})]},o))})]}),g.jsx(a,{title:"Armor",items:i}),g.jsx(a,{title:"Shields",items:r})]}),g.jsx("div",{className:"lg:col-span-2",children:g.jsx(a,{title:"Backpack",items:s})})]})},B6=({character:t})=>{const e=({title:n,content:i})=>g.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex-grow",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-2",children:n}),g.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:i||"Not set."})]});return g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"space-y-6 flex flex-col",children:[g.jsx(e,{title:"Personality Traits",content:t.personalityTraits}),g.jsx(e,{title:"Ideals",content:t.ideals}),g.jsx(e,{title:"Bonds",content:t.bonds}),g.jsx(e,{title:"Flaws",content:t.flaws})]}),g.jsxs("div",{className:"space-y-6 flex flex-col",children:[g.jsx(e,{title:"Character Notes",content:t.notes}),g.jsx(e,{title:"Campaign Info",content:t.dmNotes})]})]})},F6=[{key:"main",label:"Main"},{key:"abilities",label:"Abilities"},{key:"combat",label:"Combat"},{key:"spells",label:"Spells"},{key:"inventory",label:"Inventory"},{key:"info",label:"Info"}],q6=({characterId:t,onGoToEdit:e,onBack:n})=>{const[i,r]=ne.useState(null),[s,a]=ne.useState(!0),[o,u]=ne.useState("main");ne.useEffect(()=>{(async()=>{a(!0);const d=await e2(t);r(d),a(!1)})()},[t]);const h=c=>{if(!i)return;const d={...i,...c};r(d),t2(d)};return s||!i?g.jsx("div",{className:"flex justify-center items-center h-screen",children:g.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})}):g.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:[g.jsxs("header",{className:"flex justify-between items-center mb-6 border-b border-zinc-700 pb-4",children:[g.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-zinc-300 hover:text-amber-400 transition-colors",children:[g.jsx(i2,{className:"w-5 h-5"})," Back to List"]}),g.jsxs("div",{className:"text-center",children:[g.jsx("h1",{className:"text-2xl sm:text-3xl font-cinzel text-amber-400",children:i.name}),g.jsxs("p",{className:"text-zinc-400 capitalize text-sm",children:[i.race," ",i.class," ",i.subclass&&`(${i.subclass})`," • Level ",i.level," • ",i.alignment]})]}),g.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-zinc-700 text-white font-bold rounded-lg shadow-md hover:bg-zinc-600 transition-colors",children:[g.jsx(Ds,{className:"w-5 h-5"})," Edit Sheet"]})]}),g.jsx("div",{role:"tablist","aria-label":"Character View Sections",className:"flex space-x-1 mb-6 border-b border-zinc-700 overflow-x-auto",children:F6.map(c=>g.jsx(V6,{id:`play-tab-${c.key}`,controls:`play-panel-${c.key}`,label:c.label,isActive:o===c.key,onClick:()=>u(c.key)},c.key))}),g.jsxs("div",{className:"bg-zinc-900/50 p-4 sm:p-6 rounded-b-lg rounded-tr-lg",children:[g.jsx("div",{id:"play-panel-main",role:"tabpanel","aria-labelledby":"play-tab-main",hidden:o!=="main",children:g.jsx(U6,{character:i,onUpdate:h})}),g.jsx("div",{id:"play-panel-abilities",role:"tabpanel","aria-labelledby":"play-tab-abilities",hidden:o!=="abilities",children:g.jsx(O6,{character:i})}),g.jsx("div",{id:"play-panel-combat",role:"tabpanel","aria-labelledby":"play-tab-combat",hidden:o!=="combat",children:g.jsx(P6,{character:i})}),g.jsx("div",{id:"play-panel-spells",role:"tabpanel","aria-labelledby":"play-tab-spells",hidden:o!=="spells",children:g.jsx(z6,{character:i,onUpdate:h})}),g.jsx("div",{id:"play-panel-inventory",role:"tabpanel","aria-labelledby":"play-tab-inventory",hidden:o!=="inventory",children:g.jsx(L6,{character:i,onUpdate:h})}),g.jsx("div",{id:"play-panel-info",role:"tabpanel","aria-labelledby":"play-tab-info",hidden:o!=="info",children:g.jsx(B6,{character:i})})]})]})},H6=({hp:t,onHpChange:e})=>{const[n,i]=ne.useState(""),[r,s]=ne.useState(""),[a,o]=ne.useState(""),u=()=>{const d=parseInt(n,10);if(!isNaN(d)&&d>0){const f=Math.min(d,t.temporary),p=t.temporary-f,E=d-f,O=Math.max(0,t.current-E);e({...t,current:O,temporary:p}),i("")}},h=()=>{const d=parseInt(r,10);if(!isNaN(d)&&d>0){const f=Math.min(t.max,t.current+d);e({...t,current:f}),s("")}},c=()=>{const d=parseInt(a,10);!isNaN(d)&&d>=0&&(e({...t,temporary:d}),o(""))};return g.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3 text-center",children:"Hit Points"}),g.jsxs("div",{className:"text-center mb-4",children:[g.jsx("span",{className:"text-5xl font-bold text-red-400",children:t.current}),t.temporary>0&&g.jsxs("span",{className:"text-3xl font-bold text-sky-400",title:"Temporary HP",children:[" +",t.temporary]}),g.jsxs("span",{className:"text-2xl text-zinc-400",children:[" / ",t.max]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[g.jsxs("div",{className:"flex flex-col",children:[g.jsx("input",{type:"number",value:n,onChange:d=>i(d.target.value),onKeyDown:d=>d.key==="Enter"&&u(),placeholder:"Damage",className:"bg-zinc-700 text-center rounded-md p-2 border border-zinc-600 focus:ring-red-500 focus:border-red-500"}),g.jsx("button",{onClick:u,className:"bg-red-800/80 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Apply"})]}),g.jsxs("div",{className:"flex flex-col",children:[g.jsx("input",{type:"number",value:r,onChange:d=>s(d.target.value),onKeyDown:d=>d.key==="Enter"&&h(),placeholder:"Healing",className:"bg-zinc-700 text-center rounded-md p-2 border border-zinc-600 focus:ring-green-500 focus:border-green-500"}),g.jsx("button",{onClick:h,className:"bg-green-800/80 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Apply"})]})]}),g.jsxs("div",{className:"flex flex-col",children:[g.jsx("input",{type:"number",value:a,onChange:d=>o(d.target.value),onKeyDown:d=>d.key==="Enter"&&c(),placeholder:"Set/Replace Temp HP",className:"bg-zinc-700 text-center rounded-md p-2 border border-zinc-600 focus:ring-sky-500 focus:border-sky-500"}),g.jsx("button",{onClick:c,className:"bg-sky-800/80 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Set Temp HP"})]})]})},O_=({title:t,slots:e,onSlotChange:n,isCustom:i})=>{const r=(o,u)=>{if(i){const h=e,c=h.findIndex(E=>E.id===o);if(c===-1)return;const d=h[c],f=u<d.used?u:u+1,p=[...h];p[c]={...d,used:f},n(p)}else{const h=e,c=h[o],d=u<c.used?u:u+1;n({...h,[o]:{...c,used:d}})}},s=i?e:Object.entries(e),a=s.some(o=>i?o.max>0:o[1].max>0);return g.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:t}),!a&&g.jsx("p",{className:"text-zinc-500 text-sm text-center",children:"No resources available."}),g.jsx("div",{className:"space-y-3",children:s.map(o=>{const[u,h]=i?[o.id,o]:o,c=i?h.name:`Lvl ${u}`;return h.max===0?null:g.jsxs("div",{className:"flex items-center",children:[g.jsxs("span",{className:"font-bold text-zinc-400 w-24 truncate",title:c,children:[c,":"]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:h.max}).map((d,f)=>g.jsx("button",{onClick:()=>r(u,f),className:`w-5 h-5 rounded-md border-2 transition-colors ${f<h.used?"bg-amber-500 border-amber-400":"bg-zinc-600 border-zinc-500 hover:border-amber-400"}`,"aria-label":`Slot ${f+1} for ${c}. ${f<h.used?"Used":"Available"}`},f))})]},u)})})]})},G6=({saves:t,onSaveChange:e})=>{const n=(i,r)=>{const s=t[i],a=r<s?r:r+1;e({...t,[i]:a})};return g.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Death Saves"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"font-semibold text-zinc-300",children:"Successes"}),g.jsx("div",{className:"flex gap-2",children:Array.from({length:3}).map((i,r)=>g.jsx("input",{type:"checkbox",checked:r<t.successes,onChange:()=>n("successes",r),className:"w-5 h-5 rounded-full text-green-500 bg-zinc-600 border-zinc-500 focus:ring-green-500"},r))})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"font-semibold text-zinc-300",children:"Failures"}),g.jsx("div",{className:"flex gap-2",children:Array.from({length:3}).map((i,r)=>g.jsx("input",{type:"checkbox",checked:r<t.failures,onChange:()=>n("failures",r),className:"w-5 h-5 rounded-full text-red-500 bg-zinc-600 border-zinc-500 focus:ring-red-500"},r))})]})]})]})},$6=({items:t})=>{const[e,n]=ne.useState({}),i=a=>{if(!a||typeof a!="string")return{total:0,pretty:"Invalid input"};const o=a.replace(/[\s()]/g,"").split("+");let u=0;const h=[],c=/(\d+)d(\d+)/;for(const d of o){if(!d)continue;const f=d.match(c);if(f){const p=parseInt(f[1],10),E=parseInt(f[2],10);let O=0;const V=Array.from({length:p},()=>Math.floor(Math.random()*E)+1);O=V.reduce((b,x)=>b+x,0),u+=O,h.push(`[${V.join("+")}]`)}else{const p=parseInt(d,10);isNaN(p)||(u+=p,h.push(String(p)))}}return h.length===0?{total:0,pretty:"Invalid Format"}:{total:u,pretty:`${h.join(" + ")} = ${u}`}},r=a=>{const o=parseInt(a.bonus)||0,u=Math.floor(Math.random()*20)+1,h=u+o,c=`${u} ${o>=0?"+":"-"} ${Math.abs(o)} = ${h}`;n(d=>({...d,[a.id]:{...d[a.id],atk:c}}))},s=a=>{const{pretty:o}=i(a.damage);n(u=>({...u,[a.id]:{...u[a.id],dmg:o}}))};return g.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Attacks & Cantrips"}),g.jsxs("div",{className:"space-y-3 flex-grow overflow-y-auto pr-2 -mr-2 max-h-[calc(50vh-5rem)]",children:[t.length===0&&g.jsx("p",{className:"text-zinc-500 text-sm text-center py-4",children:"None."}),t.map(a=>{var o,u;return g.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm p-3 space-y-2",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsx("span",{className:"font-semibold text-amber-300 text-base",children:a.name}),g.jsxs("div",{className:"flex gap-4 font-mono text-zinc-300 text-right",children:[g.jsx("span",{title:"Attack Bonus",children:a.bonus}),g.jsx("span",{title:"Damage",children:a.damage})]})]}),g.jsxs("div",{className:"flex justify-end items-center gap-2",children:[g.jsx("button",{onClick:()=>r(a),className:"text-xs bg-zinc-600 hover:bg-zinc-500 rounded px-3 py-1.5 transition-colors font-bold",children:"ATK"}),g.jsx("button",{onClick:()=>s(a),className:"text-xs bg-red-800/80 hover:bg-red-700 rounded px-3 py-1.5 transition-colors font-bold",children:"DMG"})]}),(((o=e[a.id])==null?void 0:o.atk)||((u=e[a.id])==null?void 0:u.dmg))&&g.jsxs("div",{className:"text-xs text-zinc-300 bg-zinc-900/50 p-2 rounded-md border-l-2 border-amber-500 space-y-1",children:[e[a.id].atk&&g.jsxs("div",{children:[g.jsx("strong",{children:"Attack:"})," ",g.jsx("span",{className:"font-mono text-amber-300",children:e[a.id].atk})]}),e[a.id].dmg&&g.jsxs("div",{children:[g.jsx("strong",{children:"Damage:"})," ",g.jsx("span",{className:"font-mono text-red-400",children:e[a.id].dmg})]})]})]},a.id)})]})]})},Q6=({title:t,items:e})=>{const[n,i]=ne.useState({});return g.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[g.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:t}),g.jsxs("div",{className:"space-y-2 flex-grow overflow-y-auto pr-2 -mr-2 max-h-[calc(50vh-5rem)]",children:[e.length===0&&g.jsx("p",{className:"text-zinc-500 text-sm text-center py-4",children:"None."}),e.map(r=>g.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:[g.jsx("div",{className:"flex items-center justify-between p-3 cursor-pointer w-full text-left",onClick:()=>r.description&&i(s=>({...s,[r.id]:!s[r.id]})),children:g.jsx("span",{className:"font-semibold text-amber-300",children:r.name})}),n[r.id]&&r.description&&g.jsx("div",{className:"p-3 border-t border-zinc-600/50 bg-zinc-900/30",children:g.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:r.description})})]},r.id))]})]})},Y6=()=>{const[t,e]=ne.useState("list"),[n,i]=ne.useState(null),[r,s]=ne.useState(null),[a,o]=ne.useState(!1);ne.useEffect(()=>AD(V=>{s(V),V&&_D(),o(!0)}),[]);const u=O=>{i(O),e(O==="new"?"edit":"play")},h=()=>{n&&e("edit")},c=()=>{i(null),e("list")},d=()=>{n==="new"?c():e("play")},f=O=>{i(O),e("play")},p=async O=>{!O||O==="new"||O==="temp_new"||(await n2(O),c())};if(!a)return g.jsx("div",{className:"flex justify-center items-center h-screen",children:g.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})});const E=()=>{switch(t){case"edit":return g.jsx(I6,{characterId:n,onSaveComplete:f,onDelete:p,onBack:d});case"play":return g.jsx(q6,{characterId:n,onGoToEdit:h,onBack:c});case"list":default:return g.jsx(ID,{onSelectCharacter:u,currentUser:r})}};return g.jsx("main",{className:"min-h-screen",children:E()})},v2=document.getElementById("root");if(!v2)throw new Error("Could not find root element to mount to");const K6=zx.createRoot(v2);K6.render(g.jsx(sw.StrictMode,{children:g.jsx(Y6,{})}));
