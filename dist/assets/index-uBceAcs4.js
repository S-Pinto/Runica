function $S(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function P1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var YS={exports:{}},Bg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oj=Symbol.for("react.transitional.element"),lj=Symbol.for("react.fragment");function WS(t,e,n){var r=null;if(n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:oj,type:t,key:r,ref:e!==void 0?e:null,props:n}}Bg.Fragment=lj;Bg.jsx=WS;Bg.jsxs=WS;YS.exports=Bg;var v=YS.exports,XS={exports:{}},Je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U1=Symbol.for("react.transitional.element"),uj=Symbol.for("react.portal"),cj=Symbol.for("react.fragment"),hj=Symbol.for("react.strict_mode"),fj=Symbol.for("react.profiler"),dj=Symbol.for("react.consumer"),mj=Symbol.for("react.context"),pj=Symbol.for("react.forward_ref"),gj=Symbol.for("react.suspense"),vj=Symbol.for("react.memo"),KS=Symbol.for("react.lazy"),XE=Symbol.iterator;function yj(t){return t===null||typeof t!="object"?null:(t=XE&&t[XE]||t["@@iterator"],typeof t=="function"?t:null)}var QS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ZS=Object.assign,JS={};function Yc(t,e,n){this.props=t,this.context=e,this.refs=JS,this.updater=n||QS}Yc.prototype.isReactComponent={};Yc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eR(){}eR.prototype=Yc.prototype;function V1(t,e,n){this.props=t,this.context=e,this.refs=JS,this.updater=n||QS}var z1=V1.prototype=new eR;z1.constructor=V1;ZS(z1,Yc.prototype);z1.isPureReactComponent=!0;var KE=Array.isArray,gn={H:null,A:null,T:null,S:null,V:null},tR=Object.prototype.hasOwnProperty;function B1(t,e,n,r,i,s){return n=s.ref,{$$typeof:U1,type:t,key:e,ref:n!==void 0?n:null,props:s}}function _j(t,e){return B1(t.type,e,void 0,void 0,void 0,t.props)}function F1(t){return typeof t=="object"&&t!==null&&t.$$typeof===U1}function bj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var QE=/\/+/g;function F0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bj(""+t.key):e.toString(36)}function ZE(){}function wj(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(ZE,ZE):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Bu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case U1:case uj:a=!0;break;case KS:return a=t._init,Bu(a(t._payload),e,n,r,i)}}if(a)return i=i(t),a=r===""?"."+F0(t,0):r,KE(i)?(n="",a!=null&&(n=a.replace(QE,"$&/")+"/"),Bu(i,e,n,"",function(d){return d})):i!=null&&(F1(i)&&(i=_j(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(QE,"$&/")+"/")+a)),e.push(i)),1;a=0;var l=r===""?".":r+":";if(KE(t))for(var c=0;c<t.length;c++)r=t[c],s=l+F0(r,c),a+=Bu(r,e,n,s,i);else if(c=yj(t),typeof c=="function")for(t=c.call(t),c=0;!(r=t.next()).done;)r=r.value,s=l+F0(r,c++),a+=Bu(r,e,n,s,i);else if(s==="object"){if(typeof t.then=="function")return Bu(wj(t),e,n,r,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Mm(t,e,n){if(t==null)return t;var r=[],i=0;return Bu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function xj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var JE=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Ej(){}Je.Children={map:Mm,forEach:function(t,e,n){Mm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mm(t,function(){e++}),e},toArray:function(t){return Mm(t,function(e){return e})||[]},only:function(t){if(!F1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Je.Component=Yc;Je.Fragment=cj;Je.Profiler=fj;Je.PureComponent=V1;Je.StrictMode=hj;Je.Suspense=gj;Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=gn;Je.__COMPILER_RUNTIME={__proto__:null,c:function(t){return gn.H.useMemoCache(t)}};Je.cache=function(t){return function(){return t.apply(null,arguments)}};Je.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var r=ZS({},t.props),i=t.key,s=void 0;if(e!=null)for(a in e.ref!==void 0&&(s=void 0),e.key!==void 0&&(i=""+e.key),e)!tR.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(r[a]=e[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return B1(t.type,i,void 0,void 0,s,r)};Je.createContext=function(t){return t={$$typeof:mj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:dj,_context:t},t};Je.createElement=function(t,e,n){var r,i={},s=null;if(e!=null)for(r in e.key!==void 0&&(s=""+e.key),e)tR.call(e,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return B1(t,s,void 0,void 0,null,i)};Je.createRef=function(){return{current:null}};Je.forwardRef=function(t){return{$$typeof:pj,render:t}};Je.isValidElement=F1;Je.lazy=function(t){return{$$typeof:KS,_payload:{_status:-1,_result:t},_init:xj}};Je.memo=function(t,e){return{$$typeof:vj,type:t,compare:e===void 0?null:e}};Je.startTransition=function(t){var e=gn.T,n={};gn.T=n;try{var r=t(),i=gn.S;i!==null&&i(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(Ej,JE)}catch(s){JE(s)}finally{gn.T=e}};Je.unstable_useCacheRefresh=function(){return gn.H.useCacheRefresh()};Je.use=function(t){return gn.H.use(t)};Je.useActionState=function(t,e,n){return gn.H.useActionState(t,e,n)};Je.useCallback=function(t,e){return gn.H.useCallback(t,e)};Je.useContext=function(t){return gn.H.useContext(t)};Je.useDebugValue=function(){};Je.useDeferredValue=function(t,e){return gn.H.useDeferredValue(t,e)};Je.useEffect=function(t,e,n){var r=gn.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(t,e)};Je.useId=function(){return gn.H.useId()};Je.useImperativeHandle=function(t,e,n){return gn.H.useImperativeHandle(t,e,n)};Je.useInsertionEffect=function(t,e){return gn.H.useInsertionEffect(t,e)};Je.useLayoutEffect=function(t,e){return gn.H.useLayoutEffect(t,e)};Je.useMemo=function(t,e){return gn.H.useMemo(t,e)};Je.useOptimistic=function(t,e){return gn.H.useOptimistic(t,e)};Je.useReducer=function(t,e,n){return gn.H.useReducer(t,e,n)};Je.useRef=function(t){return gn.H.useRef(t)};Je.useState=function(t){return gn.H.useState(t)};Je.useSyncExternalStore=function(t,e,n){return gn.H.useSyncExternalStore(t,e,n)};Je.useTransition=function(){return gn.H.useTransition()};Je.version="19.1.0";XS.exports=Je;var K=XS.exports;const Ol=P1(K),Tj=$S({__proto__:null,default:Ol},[K]);var nR={exports:{}},Fg={},rR={exports:{}},iR={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,U){var Q=z.length;z.push(U);e:for(;0<Q;){var ee=Q-1>>>1,ae=z[ee];if(0<i(ae,U))z[ee]=U,z[Q]=ae,Q=ee;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var U=z[0],Q=z.pop();if(Q!==U){z[0]=Q;e:for(var ee=0,ae=z.length,be=ae>>>1;ee<be;){var pe=2*(ee+1)-1,ye=z[pe],W=pe+1,X=z[W];if(0>i(ye,Q))W<ae&&0>i(X,ye)?(z[ee]=X,z[W]=Q,ee=W):(z[ee]=ye,z[pe]=Q,ee=pe);else if(W<ae&&0>i(X,Q))z[ee]=X,z[W]=Q,ee=W;else break e}}return U}function i(z,U){var Q=z.sortIndex-U.sortIndex;return Q!==0?Q:z.id-U.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],f=1,p=null,m=3,y=!1,E=!1,C=!1,I=!1,A=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function P(z){for(var U=n(d);U!==null;){if(U.callback===null)r(d);else if(U.startTime<=z)r(d),U.sortIndex=U.expirationTime,e(c,U);else break;U=n(d)}}function q(z){if(C=!1,P(z),!E)if(n(c)!==null)E=!0,L||(L=!0,j());else{var U=n(d);U!==null&&J(q,U.startTime-z)}}var L=!1,T=-1,_=5,x=-1;function S(){return I?!0:!(t.unstable_now()-x<_)}function k(){if(I=!1,L){var z=t.unstable_now();x=z;var U=!0;try{e:{E=!1,C&&(C=!1,N(T),T=-1),y=!0;var Q=m;try{t:{for(P(z),p=n(c);p!==null&&!(p.expirationTime>z&&S());){var ee=p.callback;if(typeof ee=="function"){p.callback=null,m=p.priorityLevel;var ae=ee(p.expirationTime<=z);if(z=t.unstable_now(),typeof ae=="function"){p.callback=ae,P(z),U=!0;break t}p===n(c)&&r(c),P(z)}else r(c);p=n(c)}if(p!==null)U=!0;else{var be=n(d);be!==null&&J(q,be.startTime-z),U=!1}}break e}finally{p=null,m=Q,y=!1}U=void 0}}finally{U?j():L=!1}}}var j;if(typeof M=="function")j=function(){M(k)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,G=O.port2;O.port1.onmessage=k,j=function(){G.postMessage(null)}}else j=function(){A(k,0)};function J(z,U){T=A(function(){z(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var Q=m;m=U;try{return z()}finally{m=Q}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(z,U){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=m;m=z;try{return U()}finally{m=Q}},t.unstable_scheduleCallback=function(z,U,Q){var ee=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ee+Q:ee):Q=ee,z){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Q+ae,z={id:f++,callback:U,priorityLevel:z,startTime:Q,expirationTime:ae,sortIndex:-1},Q>ee?(z.sortIndex=Q,e(d,z),n(c)===null&&z===n(d)&&(C?(N(T),T=-1):C=!0,J(q,Q-ee))):(z.sortIndex=ae,e(c,z),E||y||(E=!0,L||(L=!0,j()))),z},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(z){var U=m;return function(){var Q=m;m=U;try{return z.apply(this,arguments)}finally{m=Q}}}})(iR);rR.exports=iR;var Aj=rR.exports,sR={exports:{}},Hr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sj=K;function aR(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ro(){}var Fr={d:{f:ro,r:function(){throw Error(aR(522))},D:ro,C:ro,L:ro,m:ro,X:ro,S:ro,M:ro},p:0,findDOMNode:null},Rj=Symbol.for("react.portal");function Cj(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rj,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}var of=Sj.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Hg(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Hr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Fr;Hr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(aR(299));return Cj(t,e,null,n)};Hr.flushSync=function(t){var e=of.T,n=Fr.p;try{if(of.T=null,Fr.p=2,t)return t()}finally{of.T=e,Fr.p=n,Fr.d.f()}};Hr.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Fr.d.C(t,e))};Hr.prefetchDNS=function(t){typeof t=="string"&&Fr.d.D(t)};Hr.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,r=Hg(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Fr.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):n==="script"&&Fr.d.X(t,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Hr.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Hg(e.as,e.crossOrigin);Fr.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Fr.d.M(t)};Hr.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,r=Hg(n,e.crossOrigin);Fr.d.L(t,n,{crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Hr.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Hg(e.as,e.crossOrigin);Fr.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Fr.d.m(t)};Hr.requestFormReset=function(t){Fr.d.r(t)};Hr.unstable_batchedUpdates=function(t,e){return t(e)};Hr.useFormState=function(t,e,n){return of.H.useFormState(t,e,n)};Hr.useFormStatus=function(){return of.H.useHostTransitionStatus()};Hr.version="19.1.0";function oR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oR)}catch(t){console.error(t)}}oR(),sR.exports=Hr;var H1=sR.exports;const Nj=P1(H1),Ij=$S({__proto__:null,default:Nj},[H1]);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rr=Aj,lR=K,Dj=H1;function me(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function uR(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ed(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function cR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function e2(t){if(ed(t)!==t)throw Error(me(188))}function Oj(t){var e=t.alternate;if(!e){if(e=ed(t),e===null)throw Error(me(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return e2(i),t;if(s===r)return e2(i),e;s=s.sibling}throw Error(me(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(me(189))}}if(n.alternate!==r)throw Error(me(190))}if(n.tag!==3)throw Error(me(188));return n.stateNode.current===n?t:e}function hR(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=hR(t),e!==null)return e;t=t.sibling}return null}var ln=Object.assign,Mj=Symbol.for("react.element"),km=Symbol.for("react.transitional.element"),Qh=Symbol.for("react.portal"),Xu=Symbol.for("react.fragment"),fR=Symbol.for("react.strict_mode"),Xy=Symbol.for("react.profiler"),kj=Symbol.for("react.provider"),dR=Symbol.for("react.consumer"),_a=Symbol.for("react.context"),q1=Symbol.for("react.forward_ref"),Ky=Symbol.for("react.suspense"),Qy=Symbol.for("react.suspense_list"),G1=Symbol.for("react.memo"),uo=Symbol.for("react.lazy"),Zy=Symbol.for("react.activity"),Lj=Symbol.for("react.memo_cache_sentinel"),t2=Symbol.iterator;function Mh(t){return t===null||typeof t!="object"?null:(t=t2&&t[t2]||t["@@iterator"],typeof t=="function"?t:null)}var jj=Symbol.for("react.client.reference");function Jy(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===jj?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xu:return"Fragment";case Xy:return"Profiler";case fR:return"StrictMode";case Ky:return"Suspense";case Qy:return"SuspenseList";case Zy:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Qh:return"Portal";case _a:return(t.displayName||"Context")+".Provider";case dR:return(t._context.displayName||"Context")+".Consumer";case q1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case G1:return e=t.displayName||null,e!==null?e:Jy(t.type)||"Memo";case uo:e=t._payload,t=t._init;try{return Jy(t(e))}catch{}}return null}var Zh=Array.isArray,Fe=lR.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Dt=Dj.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pl={pending:!1,data:null,method:null,action:null},e_=[],Ku=-1;function Ks(t){return{current:t}}function dr(t){0>Ku||(t.current=e_[Ku],e_[Ku]=null,Ku--)}function vn(t,e){Ku++,e_[Ku]=t.current,t.current=e}var Us=Ks(null),If=Ks(null),Co=Ks(null),Op=Ks(null);function Mp(t,e){switch(vn(Co,e),vn(If,t),vn(Us,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?aT(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=aT(e),t=IN(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}dr(Us),vn(Us,t)}function Ac(){dr(Us),dr(If),dr(Co)}function t_(t){t.memoizedState!==null&&vn(Op,t);var e=Us.current,n=IN(e,t.type);e!==n&&(vn(If,t),vn(Us,n))}function kp(t){If.current===t&&(dr(Us),dr(If)),Op.current===t&&(dr(Op),zf._currentValue=Pl)}var n_=Object.prototype.hasOwnProperty,$1=rr.unstable_scheduleCallback,H0=rr.unstable_cancelCallback,Pj=rr.unstable_shouldYield,Uj=rr.unstable_requestPaint,Vs=rr.unstable_now,Vj=rr.unstable_getCurrentPriorityLevel,mR=rr.unstable_ImmediatePriority,pR=rr.unstable_UserBlockingPriority,Lp=rr.unstable_NormalPriority,zj=rr.unstable_LowPriority,gR=rr.unstable_IdlePriority,Bj=rr.log,Fj=rr.unstable_setDisableYieldValue,td=null,Ti=null;function bo(t){if(typeof Bj=="function"&&Fj(t),Ti&&typeof Ti.setStrictMode=="function")try{Ti.setStrictMode(td,t)}catch{}}var Ai=Math.clz32?Math.clz32:Gj,Hj=Math.log,qj=Math.LN2;function Gj(t){return t>>>=0,t===0?32:31-(Hj(t)/qj|0)|0}var Lm=256,jm=4194304;function Al(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function qg(t,e,n){var r=t.pendingLanes;if(r===0)return 0;var i=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var l=r&134217727;return l!==0?(r=l&~s,r!==0?i=Al(r):(a&=l,a!==0?i=Al(a):n||(n=l&~t,n!==0&&(i=Al(n))))):(l=r&~s,l!==0?i=Al(l):a!==0?i=Al(a):n||(n=r&~t,n!==0&&(i=Al(n)))),i===0?0:e!==0&&e!==i&&!(e&s)&&(s=i&-i,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:i}function nd(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function $j(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vR(){var t=Lm;return Lm<<=1,!(Lm&4194048)&&(Lm=256),t}function yR(){var t=jm;return jm<<=1,!(jm&62914560)&&(jm=4194304),t}function q0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rd(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Yj(t,e,n,r,i,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,c=t.expirationTimes,d=t.hiddenUpdates;for(n=a&~n;0<n;){var f=31-Ai(n),p=1<<f;l[f]=0,c[f]=-1;var m=d[f];if(m!==null)for(d[f]=null,f=0;f<m.length;f++){var y=m[f];y!==null&&(y.lane&=-536870913)}n&=~p}r!==0&&_R(t,r,0),s!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function _R(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var r=31-Ai(e);t.entangledLanes|=e,t.entanglements[r]=t.entanglements[r]|1073741824|n&4194090}function bR(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ai(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}function Y1(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function W1(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function wR(){var t=Dt.p;return t!==0?t:(t=window.event,t===void 0?32:zN(t.type))}function Wj(t,e){var n=Dt.p;try{return Dt.p=t,e()}finally{Dt.p=n}}var Jo=Math.random().toString(36).slice(2),Dr="__reactFiber$"+Jo,ai="__reactProps$"+Jo,Wc="__reactContainer$"+Jo,r_="__reactEvents$"+Jo,Xj="__reactListeners$"+Jo,Kj="__reactHandles$"+Jo,n2="__reactResources$"+Jo,id="__reactMarker$"+Jo;function X1(t){delete t[Dr],delete t[ai],delete t[r_],delete t[Xj],delete t[Kj]}function Qu(t){var e=t[Dr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wc]||n[Dr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uT(t);t!==null;){if(n=t[Dr])return n;t=uT(t)}return e}t=n,n=t.parentNode}return null}function Xc(t){if(t=t[Dr]||t[Wc]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function Jh(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(me(33))}function hc(t){var e=t[n2];return e||(e=t[n2]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function hr(t){t[id]=!0}var xR=new Set,ER={};function au(t,e){Sc(t,e),Sc(t+"Capture",e)}function Sc(t,e){for(ER[t]=e,t=0;t<e.length;t++)xR.add(e[t])}var Qj=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),r2={},i2={};function Zj(t){return n_.call(i2,t)?!0:n_.call(r2,t)?!1:Qj.test(t)?i2[t]=!0:(r2[t]=!0,!1)}function op(t,e,n){if(Zj(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var r=e.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Pm(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function ma(t,e,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+r)}}var G0,s2;function Fu(t){if(G0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);G0=e&&e[1]||"",s2=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+G0+t+s2}var $0=!1;function Y0(t,e){if(!t||$0)return"";$0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(e){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(y){var m=y}Reflect.construct(t,[],p)}else{try{p.call()}catch(y){m=y}t.call(p.prototype)}}else{try{throw Error()}catch(y){m=y}(p=t())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(y){if(y&&m&&typeof y.stack=="string")return[y.stack,m.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var c=a.split(`
`),d=l.split(`
`);for(i=r=0;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;for(;i<d.length&&!d[i].includes("DetermineComponentFrameRoot");)i++;if(r===c.length||i===d.length)for(r=c.length-1,i=d.length-1;1<=r&&0<=i&&c[r]!==d[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==d[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==d[i]){var f=`
`+c[r].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=r&&0<=i);break}}}finally{$0=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Fu(n):""}function Jj(t){switch(t.tag){case 26:case 27:case 5:return Fu(t.type);case 16:return Fu("Lazy");case 13:return Fu("Suspense");case 19:return Fu("SuspenseList");case 0:case 15:return Y0(t.type,!1);case 11:return Y0(t.type.render,!1);case 1:return Y0(t.type,!0);case 31:return Fu("Activity");default:return""}}function a2(t){try{var e="";do e+=Jj(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Wi(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function TR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eP(t){var e=TR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jp(t){t._valueTracker||(t._valueTracker=eP(t))}function AR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=TR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Pp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var tP=/[\n"\\]/g;function Qi(t){return t.replace(tP,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function i_(t,e,n,r,i,s,a,l){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Wi(e)):t.value!==""+Wi(e)&&(t.value=""+Wi(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?s_(t,a,Wi(e)):n!=null?s_(t,a,Wi(n)):r!=null&&t.removeAttribute("value"),i==null&&s!=null&&(t.defaultChecked=!!s),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+Wi(l):t.removeAttribute("name")}function SR(t,e,n,r,i,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null))return;n=n!=null?""+Wi(n):"",e=e!=null?""+Wi(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}r=r??i,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=l?t.checked:!!r,t.defaultChecked=!!r,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a)}function s_(t,e,n){e==="number"&&Pp(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function fc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function RR(t,e,n){if(e!=null&&(e=""+Wi(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Wi(n):""}function CR(t,e,n,r){if(e==null){if(r!=null){if(n!=null)throw Error(me(92));if(Zh(r)){if(1<r.length)throw Error(me(93));r=r[0]}n=r}n==null&&(n=""),e=n}n=Wi(e),t.defaultValue=n,r=t.textContent,r===n&&r!==""&&r!==null&&(t.value=r)}function Rc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nP=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function o2(t,e,n){var r=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":r?t.setProperty(e,n):typeof n!="number"||n===0||nP.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function NR(t,e,n){if(e!=null&&typeof e!="object")throw Error(me(62));if(t=t.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||e!=null&&e.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var i in e)r=e[i],e.hasOwnProperty(i)&&n[i]!==r&&o2(t,i,r)}else for(var s in e)e.hasOwnProperty(s)&&o2(t,s,e[s])}function K1(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rP=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),iP=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function lp(t){return iP.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var a_=null;function Q1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zu=null,dc=null;function l2(t){var e=Xc(t);if(e&&(t=e.stateNode)){var n=t[ai]||null;e:switch(t=e.stateNode,e.type){case"input":if(i_(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Qi(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=r[ai]||null;if(!i)throw Error(me(90));i_(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)r=n[e],r.form===t.form&&AR(r)}break e;case"textarea":RR(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&fc(t,!!n.multiple,e,!1)}}}var W0=!1;function IR(t,e,n){if(W0)return t(e,n);W0=!0;try{var r=t(e);return r}finally{if(W0=!1,(Zu!==null||dc!==null)&&(ev(),Zu&&(e=Zu,t=dc,dc=Zu=null,l2(e),t)))for(e=0;e<t.length;e++)l2(t[e])}}function Df(t,e){var n=t.stateNode;if(n===null)return null;var r=n[ai]||null;if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(me(231,e,typeof n));return n}var Na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),o_=!1;if(Na)try{var kh={};Object.defineProperty(kh,"passive",{get:function(){o_=!0}}),window.addEventListener("test",kh,kh),window.removeEventListener("test",kh,kh)}catch{o_=!1}var wo=null,Z1=null,up=null;function DR(){if(up)return up;var t,e=Z1,n=e.length,r,i="value"in wo?wo.value:wo.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return up=i.slice(t,1<r?1-r:void 0)}function cp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Um(){return!0}function u2(){return!1}function oi(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Um:u2,this.isPropagationStopped=u2,this}return ln(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Um)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Um)},persist:function(){},isPersistent:Um}),e}var ou={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gg=oi(ou),sd=ln({},ou,{view:0,detail:0}),sP=oi(sd),X0,K0,Lh,$g=ln({},sd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:J1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lh&&(Lh&&t.type==="mousemove"?(X0=t.screenX-Lh.screenX,K0=t.screenY-Lh.screenY):K0=X0=0,Lh=t),X0)},movementY:function(t){return"movementY"in t?t.movementY:K0}}),c2=oi($g),aP=ln({},$g,{dataTransfer:0}),oP=oi(aP),lP=ln({},sd,{relatedTarget:0}),Q0=oi(lP),uP=ln({},ou,{animationName:0,elapsedTime:0,pseudoElement:0}),cP=oi(uP),hP=ln({},ou,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fP=oi(hP),dP=ln({},ou,{data:0}),h2=oi(dP),mP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gP[t])?!!e[t]:!1}function J1(){return vP}var yP=ln({},sd,{key:function(t){if(t.key){var e=mP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?pP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:J1,charCode:function(t){return t.type==="keypress"?cp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_P=oi(yP),bP=ln({},$g,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f2=oi(bP),wP=ln({},sd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:J1}),xP=oi(wP),EP=ln({},ou,{propertyName:0,elapsedTime:0,pseudoElement:0}),TP=oi(EP),AP=ln({},$g,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),SP=oi(AP),RP=ln({},ou,{newState:0,oldState:0}),CP=oi(RP),NP=[9,13,27,32],eb=Na&&"CompositionEvent"in window,lf=null;Na&&"documentMode"in document&&(lf=document.documentMode);var IP=Na&&"TextEvent"in window&&!lf,OR=Na&&(!eb||lf&&8<lf&&11>=lf),d2=" ",m2=!1;function MR(t,e){switch(t){case"keyup":return NP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ju=!1;function DP(t,e){switch(t){case"compositionend":return kR(e);case"keypress":return e.which!==32?null:(m2=!0,d2);case"textInput":return t=e.data,t===d2&&m2?null:t;default:return null}}function OP(t,e){if(Ju)return t==="compositionend"||!eb&&MR(t,e)?(t=DR(),up=Z1=wo=null,Ju=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return OR&&e.locale!=="ko"?null:e.data;default:return null}}var MP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function p2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!MP[t.type]:e==="textarea"}function LR(t,e,n,r){Zu?dc?dc.push(r):dc=[r]:Zu=r,e=tg(e,"onChange"),0<e.length&&(n=new Gg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var uf=null,Of=null;function kP(t){RN(t,0)}function Yg(t){var e=Jh(t);if(AR(e))return t}function g2(t,e){if(t==="change")return e}var jR=!1;if(Na){var Z0;if(Na){var J0="oninput"in document;if(!J0){var v2=document.createElement("div");v2.setAttribute("oninput","return;"),J0=typeof v2.oninput=="function"}Z0=J0}else Z0=!1;jR=Z0&&(!document.documentMode||9<document.documentMode)}function y2(){uf&&(uf.detachEvent("onpropertychange",PR),Of=uf=null)}function PR(t){if(t.propertyName==="value"&&Yg(Of)){var e=[];LR(e,Of,t,Q1(t)),IR(kP,e)}}function LP(t,e,n){t==="focusin"?(y2(),uf=e,Of=n,uf.attachEvent("onpropertychange",PR)):t==="focusout"&&y2()}function jP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yg(Of)}function PP(t,e){if(t==="click")return Yg(e)}function UP(t,e){if(t==="input"||t==="change")return Yg(e)}function VP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ni=typeof Object.is=="function"?Object.is:VP;function Mf(t,e){if(Ni(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!n_.call(e,i)||!Ni(t[i],e[i]))return!1}return!0}function _2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function b2(t,e){var n=_2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_2(n)}}function UR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?UR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function VR(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Pp(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Pp(t.document)}return e}function tb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var zP=Na&&"documentMode"in document&&11>=document.documentMode,ec=null,l_=null,cf=null,u_=!1;function w2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;u_||ec==null||ec!==Pp(r)||(r=ec,"selectionStart"in r&&tb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cf&&Mf(cf,r)||(cf=r,r=tg(l_,"onSelect"),0<r.length&&(e=new Gg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ec)))}function xl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var tc={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionrun:xl("Transition","TransitionRun"),transitionstart:xl("Transition","TransitionStart"),transitioncancel:xl("Transition","TransitionCancel"),transitionend:xl("Transition","TransitionEnd")},ey={},zR={};Na&&(zR=document.createElement("div").style,"AnimationEvent"in window||(delete tc.animationend.animation,delete tc.animationiteration.animation,delete tc.animationstart.animation),"TransitionEvent"in window||delete tc.transitionend.transition);function lu(t){if(ey[t])return ey[t];if(!tc[t])return t;var e=tc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zR)return ey[t]=e[n];return t}var BR=lu("animationend"),FR=lu("animationiteration"),HR=lu("animationstart"),BP=lu("transitionrun"),FP=lu("transitionstart"),HP=lu("transitioncancel"),qR=lu("transitionend"),GR=new Map,c_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");c_.push("scrollEnd");function As(t,e){GR.set(t,e),au(e,[t])}var x2=new WeakMap;function Zi(t,e){if(typeof t=="object"&&t!==null){var n=x2.get(t);return n!==void 0?n:(e={value:t,source:e,stack:a2(e)},x2.set(t,e),e)}return{value:t,source:e,stack:a2(e)}}var Yi=[],nc=0,nb=0;function Wg(){for(var t=nc,e=nb=nc=0;e<t;){var n=Yi[e];Yi[e++]=null;var r=Yi[e];Yi[e++]=null;var i=Yi[e];Yi[e++]=null;var s=Yi[e];if(Yi[e++]=null,r!==null&&i!==null){var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}s!==0&&$R(n,i,s)}}function Xg(t,e,n,r){Yi[nc++]=t,Yi[nc++]=e,Yi[nc++]=n,Yi[nc++]=r,nb|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function rb(t,e,n,r){return Xg(t,e,n,r),Up(t)}function Kc(t,e){return Xg(t,null,null,e),Up(t)}function $R(t,e,n){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n);for(var i=!1,s=t.return;s!==null;)s.childLanes|=n,r=s.alternate,r!==null&&(r.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(i=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,i&&e!==null&&(i=31-Ai(n),t=s.hiddenUpdates,r=t[i],r===null?t[i]=[e]:r.push(e),e.lane=n|536870912),s):null}function Up(t){if(50<bf)throw bf=0,D_=null,Error(me(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var rc={};function qP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bi(t,e,n,r){return new qP(t,e,n,r)}function ib(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Sa(t,e){var n=t.alternate;return n===null?(n=bi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function YR(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function hp(t,e,n,r,i,s){var a=0;if(r=t,typeof t=="function")ib(t)&&(a=1);else if(typeof t=="string")a=$U(t,n,Us.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Zy:return t=bi(31,n,e,i),t.elementType=Zy,t.lanes=s,t;case Xu:return Ul(n.children,i,s,e);case fR:a=8,i|=24;break;case Xy:return t=bi(12,n,e,i|2),t.elementType=Xy,t.lanes=s,t;case Ky:return t=bi(13,n,e,i),t.elementType=Ky,t.lanes=s,t;case Qy:return t=bi(19,n,e,i),t.elementType=Qy,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kj:case _a:a=10;break e;case dR:a=9;break e;case q1:a=11;break e;case G1:a=14;break e;case uo:a=16,r=null;break e}a=29,n=Error(me(130,t===null?"null":typeof t,"")),r=null}return e=bi(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ul(t,e,n,r){return t=bi(7,t,r,e),t.lanes=n,t}function ty(t,e,n){return t=bi(6,t,null,e),t.lanes=n,t}function ny(t,e,n){return e=bi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var ic=[],sc=0,Vp=null,zp=0,Xi=[],Ki=0,Vl=null,ba=1,wa="";function Sl(t,e){ic[sc++]=zp,ic[sc++]=Vp,Vp=t,zp=e}function WR(t,e,n){Xi[Ki++]=ba,Xi[Ki++]=wa,Xi[Ki++]=Vl,Vl=t;var r=ba;t=wa;var i=32-Ai(r)-1;r&=~(1<<i),n+=1;var s=32-Ai(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ba=1<<32-Ai(e)+i|n<<i|r,wa=s+t}else ba=1<<s|n<<i|r,wa=t}function sb(t){t.return!==null&&(Sl(t,1),WR(t,1,0))}function ab(t){for(;t===Vp;)Vp=ic[--sc],ic[sc]=null,zp=ic[--sc],ic[sc]=null;for(;t===Vl;)Vl=Xi[--Ki],Xi[Ki]=null,wa=Xi[--Ki],Xi[Ki]=null,ba=Xi[--Ki],Xi[Ki]=null}var Br=null,Sn=null,It=!1,zl=null,js=!1,h_=Error(me(519));function Xl(t){var e=Error(me(418,""));throw kf(Zi(e,t)),h_}function E2(t){var e=t.stateNode,n=t.type,r=t.memoizedProps;switch(e[Dr]=t,e[ai]=r,n){case"dialog":ct("cancel",e),ct("close",e);break;case"iframe":case"object":case"embed":ct("load",e);break;case"video":case"audio":for(n=0;n<Pf.length;n++)ct(Pf[n],e);break;case"source":ct("error",e);break;case"img":case"image":case"link":ct("error",e),ct("load",e);break;case"details":ct("toggle",e);break;case"input":ct("invalid",e),SR(e,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),jp(e);break;case"select":ct("invalid",e);break;case"textarea":ct("invalid",e),CR(e,r.value,r.defaultValue,r.children),jp(e)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||r.suppressHydrationWarning===!0||NN(e.textContent,n)?(r.popover!=null&&(ct("beforetoggle",e),ct("toggle",e)),r.onScroll!=null&&ct("scroll",e),r.onScrollEnd!=null&&ct("scrollend",e),r.onClick!=null&&(e.onclick=rv),e=!0):e=!1,e||Xl(t)}function T2(t){for(Br=t.return;Br;)switch(Br.tag){case 5:case 13:js=!1;return;case 27:case 3:js=!0;return;default:Br=Br.return}}function jh(t){if(t!==Br)return!1;if(!It)return T2(t),It=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||P_(t.type,t.memoizedProps)),n=!n),n&&Sn&&Xl(t),T2(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(me(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){Sn=xs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}Sn=null}}else e===27?(e=Sn,el(t.type)?(t=z_,z_=null,Sn=t):Sn=e):Sn=Br?xs(t.stateNode.nextSibling):null;return!0}function ad(){Sn=Br=null,It=!1}function A2(){var t=zl;return t!==null&&(ei===null?ei=t:ei.push.apply(ei,t),zl=null),t}function kf(t){zl===null?zl=[t]:zl.push(t)}var f_=Ks(null),uu=null,xa=null;function ho(t,e,n){vn(f_,e._currentValue),e._currentValue=n}function Ra(t){t._currentValue=f_.current,dr(f_)}function d_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function m_(t,e,n,r){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){var a=i.child;s=s.firstContext;e:for(;s!==null;){var l=s;s=i;for(var c=0;c<e.length;c++)if(l.context===e[c]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),d_(s.return,n,t),r||(a=null);break e}s=l.next}}else if(i.tag===18){if(a=i.return,a===null)throw Error(me(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),d_(a,n,t),a=null}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}}function od(t,e,n,r){t=null;for(var i=e,s=!1;i!==null;){if(!s){if(i.flags&524288)s=!0;else if(i.flags&262144)break}if(i.tag===10){var a=i.alternate;if(a===null)throw Error(me(387));if(a=a.memoizedProps,a!==null){var l=i.type;Ni(i.pendingProps.value,a.value)||(t!==null?t.push(l):t=[l])}}else if(i===Op.current){if(a=i.alternate,a===null)throw Error(me(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(zf):t=[zf])}i=i.return}t!==null&&m_(e,t,n,r),e.flags|=262144}function Bp(t){for(t=t.firstContext;t!==null;){if(!Ni(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Kl(t){uu=t,xa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Or(t){return XR(uu,t)}function Vm(t,e){return uu===null&&Kl(t),XR(t,e)}function XR(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},xa===null){if(t===null)throw Error(me(308));xa=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else xa=xa.next=e;return n}var GP=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,r){t.push(r)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},$P=rr.unstable_scheduleCallback,YP=rr.unstable_NormalPriority,er={$$typeof:_a,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ob(){return{controller:new GP,data:new Map,refCount:0}}function ld(t){t.refCount--,t.refCount===0&&$P(YP,function(){t.controller.abort()})}var hf=null,p_=0,Cc=0,mc=null;function WP(t,e){if(hf===null){var n=hf=[];p_=0,Cc=Ib(),mc={status:"pending",value:void 0,then:function(r){n.push(r)}}}return p_++,e.then(S2,S2),e}function S2(){if(--p_===0&&hf!==null){mc!==null&&(mc.status="fulfilled");var t=hf;hf=null,Cc=0,mc=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function XP(t,e){var n=[],r={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){r.status="fulfilled",r.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(r.status="rejected",r.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),r}var R2=Fe.S;Fe.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&WP(t,e),R2!==null&&R2(t,e)};var Bl=Ks(null);function lb(){var t=Bl.current;return t!==null?t:nn.pooledCache}function fp(t,e){e===null?vn(Bl,Bl.current):vn(Bl,e.pool)}function KR(){var t=lb();return t===null?null:{parent:er._currentValue,pool:t}}var ud=Error(me(460)),QR=Error(me(474)),Kg=Error(me(542)),g_={then:function(){}};function C2(t){return t=t.status,t==="fulfilled"||t==="rejected"}function zm(){}function ZR(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(zm,zm),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,I2(t),t;default:if(typeof e.status=="string")e.then(zm,zm);else{if(t=nn,t!==null&&100<t.shellSuspendCounter)throw Error(me(482));t=e,t.status="pending",t.then(function(r){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=r}},function(r){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=r}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,I2(t),t}throw ff=e,ud}}var ff=null;function N2(){if(ff===null)throw Error(me(459));var t=ff;return ff=null,t}function I2(t){if(t===ud||t===Kg)throw Error(me(483))}var co=!1;function ub(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function v_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function No(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Io(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ft&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,e=Up(t),$R(t,null,n),e}return Xg(t,r,e,n),Up(t)}function df(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bR(t,n)}}function ry(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var y_=!1;function mf(){if(y_){var t=mc;if(t!==null)throw t}}function pf(t,e,n,r){y_=!1;var i=t.updateQueue;co=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?s=d:a.next=d,a=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(s!==null){var p=i.baseState;a=0,f=d=c=null,l=s;do{var m=l.lane&-536870913,y=m!==l.lane;if(y?(xt&m)===m:(r&m)===m){m!==0&&m===Cc&&(y_=!0),f!==null&&(f=f.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var E=t,C=l;m=e;var I=n;switch(C.tag){case 1:if(E=C.payload,typeof E=="function"){p=E.call(I,p,m);break e}p=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=C.payload,m=typeof E=="function"?E.call(I,p,m):E,m==null)break e;p=ln({},p,m);break e;case 2:co=!0}}m=l.callback,m!==null&&(t.flags|=64,y&&(t.flags|=8192),y=i.callbacks,y===null?i.callbacks=[m]:y.push(m))}else y={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=y,c=p):f=f.next=y,a|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;y=l,l=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);f===null&&(c=p),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=f,s===null&&(i.shared.lanes=0),Ho|=a,t.lanes=a,t.memoizedState=p}}function JR(t,e){if(typeof t!="function")throw Error(me(191,t));t.call(e)}function eC(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)JR(n[t],e)}var Nc=Ks(null),Fp=Ks(0);function D2(t,e){t=Oa,vn(Fp,t),vn(Nc,e),Oa=t|e.baseLanes}function __(){vn(Fp,Oa),vn(Nc,Nc.current)}function cb(){Oa=Fp.current,dr(Nc),dr(Fp)}var Bo=0,rt=null,Yt=null,Hn=null,Hp=!1,pc=!1,Ql=!1,qp=0,Lf=0,gc=null,KP=0;function Mn(){throw Error(me(321))}function hb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ni(t[n],e[n]))return!1;return!0}function fb(t,e,n,r,i,s){return Bo=s,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fe.H=t===null||t.memoizedState===null?DC:OC,Ql=!1,s=n(r,i),Ql=!1,pc&&(s=nC(e,n,r,i)),tC(t),s}function tC(t){Fe.H=Gp;var e=Yt!==null&&Yt.next!==null;if(Bo=0,Hn=Yt=rt=null,Hp=!1,Lf=0,gc=null,e)throw Error(me(300));t===null||fr||(t=t.dependencies,t!==null&&Bp(t)&&(fr=!0))}function nC(t,e,n,r){rt=t;var i=0;do{if(pc&&(gc=null),Lf=0,pc=!1,25<=i)throw Error(me(301));if(i+=1,Hn=Yt=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}Fe.H=rU,s=e(n,r)}while(pc);return s}function QP(){var t=Fe.H,e=t.useState()[0];return e=typeof e.then=="function"?cd(e):e,t=t.useState()[0],(Yt!==null?Yt.memoizedState:null)!==t&&(rt.flags|=1024),e}function db(){var t=qp!==0;return qp=0,t}function mb(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function pb(t){if(Hp){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Hp=!1}Bo=0,Hn=Yt=rt=null,pc=!1,Lf=qp=0,gc=null}function Kr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?rt.memoizedState=Hn=t:Hn=Hn.next=t,Hn}function Yn(){if(Yt===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=Yt.next;var e=Hn===null?rt.memoizedState:Hn.next;if(e!==null)Hn=e,Yt=t;else{if(t===null)throw rt.alternate===null?Error(me(467)):Error(me(310));Yt=t,t={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},Hn===null?rt.memoizedState=Hn=t:Hn=Hn.next=t}return Hn}function gb(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cd(t){var e=Lf;return Lf+=1,gc===null&&(gc=[]),t=ZR(gc,t,e),e=rt,(Hn===null?e.memoizedState:Hn.next)===null&&(e=e.alternate,Fe.H=e===null||e.memoizedState===null?DC:OC),t}function Qg(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return cd(t);if(t.$$typeof===_a)return Or(t)}throw Error(me(438,String(t)))}function vb(t){var e=null,n=rt.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var r=rt.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(e={data:r.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=gb(),rt.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),r=0;r<t;r++)n[r]=Lj;return e.index++,n}function Ia(t,e){return typeof e=="function"?e(t):e}function dp(t){var e=Yn();return yb(e,Yt,t)}function yb(t,e,n){var r=t.queue;if(r===null)throw Error(me(311));r.lastRenderedReducer=n;var i=t.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}e.baseQueue=i=s,r.pending=null}if(s=t.baseState,i===null)t.memoizedState=s;else{e=i.next;var l=a=null,c=null,d=e,f=!1;do{var p=d.lane&-536870913;if(p!==d.lane?(xt&p)===p:(Bo&p)===p){var m=d.revertLane;if(m===0)c!==null&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),p===Cc&&(f=!0);else if((Bo&m)===m){d=d.next,m===Cc&&(f=!0);continue}else p={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=p,a=s):c=c.next=p,rt.lanes|=m,Ho|=m;p=d.action,Ql&&n(s,p),s=d.hasEagerState?d.eagerState:n(s,p)}else m={lane:p,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=m,a=s):c=c.next=m,rt.lanes|=p,Ho|=p;d=d.next}while(d!==null&&d!==e);if(c===null?a=s:c.next=l,!Ni(s,t.memoizedState)&&(fr=!0,f&&(n=mc,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=c,r.lastRenderedState=s}return i===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function iy(t){var e=Yn(),n=e.queue;if(n===null)throw Error(me(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Ni(s,e.memoizedState)||(fr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function rC(t,e,n){var r=rt,i=Yn(),s=It;if(s){if(n===void 0)throw Error(me(407));n=n()}else n=e();var a=!Ni((Yt||i).memoizedState,n);a&&(i.memoizedState=n,fr=!0),i=i.queue;var l=aC.bind(null,r,i,t);if(hd(2048,8,l,[t]),i.getSnapshot!==e||a||Hn!==null&&Hn.memoizedState.tag&1){if(r.flags|=2048,Ic(9,Zg(),sC.bind(null,r,i,n,e),null),nn===null)throw Error(me(349));s||Bo&124||iC(r,e,n)}return n}function iC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rt.updateQueue,e===null?(e=gb(),rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sC(t,e,n,r){e.value=n,e.getSnapshot=r,oC(e)&&lC(t)}function aC(t,e,n){return n(function(){oC(e)&&lC(t)})}function oC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ni(t,n)}catch{return!0}}function lC(t){var e=Kc(t,2);e!==null&&Ri(e,t,2)}function b_(t){var e=Kr();if(typeof t=="function"){var n=t;if(t=n(),Ql){bo(!0);try{n()}finally{bo(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:t},e}function uC(t,e,n,r){return t.baseState=n,yb(t,Yt,typeof r=="function"?r:Ia)}function ZP(t,e,n,r,i){if(Jg(t))throw Error(me(485));if(t=e.action,t!==null){var s={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};Fe.T!==null?n(!0):s.isTransition=!1,r(s),n=e.pending,n===null?(s.next=e.pending=s,cC(e,s)):(s.next=n.next,e.pending=n.next=s)}}function cC(t,e){var n=e.action,r=e.payload,i=t.state;if(e.isTransition){var s=Fe.T,a={};Fe.T=a;try{var l=n(i,r),c=Fe.S;c!==null&&c(a,l),O2(t,e,l)}catch(d){w_(t,e,d)}finally{Fe.T=s}}else try{s=n(i,r),O2(t,e,s)}catch(d){w_(t,e,d)}}function O2(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){M2(t,e,r)},function(r){return w_(t,e,r)}):M2(t,e,n)}function M2(t,e,n){e.status="fulfilled",e.value=n,hC(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,cC(t,n)))}function w_(t,e,n){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do e.status="rejected",e.reason=n,hC(e),e=e.next;while(e!==r)}t.action=null}function hC(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function fC(t,e){return e}function k2(t,e){if(It){var n=nn.formState;if(n!==null){e:{var r=rt;if(It){if(Sn){t:{for(var i=Sn,s=js;i.nodeType!==8;){if(!s){i=null;break t}if(i=xs(i.nextSibling),i===null){i=null;break t}}s=i.data,i=s==="F!"||s==="F"?i:null}if(i){Sn=xs(i.nextSibling),r=i.data==="F!";break e}}Xl(r)}r=!1}r&&(e=n[0])}}return n=Kr(),n.memoizedState=n.baseState=e,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fC,lastRenderedState:e},n.queue=r,n=CC.bind(null,rt,r),r.dispatch=n,r=b_(!1),s=xb.bind(null,rt,!1,r.queue),r=Kr(),i={state:e,dispatch:null,action:t,pending:null},r.queue=i,n=ZP.bind(null,rt,i,s,n),i.dispatch=n,r.memoizedState=t,[e,n,!1]}function L2(t){var e=Yn();return dC(e,Yt,t)}function dC(t,e,n){if(e=yb(t,e,fC)[0],t=dp(Ia)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var r=cd(e)}catch(a){throw a===ud?Kg:a}else r=e;e=Yn();var i=e.queue,s=i.dispatch;return n!==e.memoizedState&&(rt.flags|=2048,Ic(9,Zg(),JP.bind(null,i,n),null)),[r,s,t]}function JP(t,e){t.action=e}function j2(t){var e=Yn(),n=Yt;if(n!==null)return dC(e,n,t);Yn(),e=e.memoizedState,n=Yn();var r=n.queue.dispatch;return n.memoizedState=t,[e,r,!1]}function Ic(t,e,n,r){return t={tag:t,create:n,deps:r,inst:e,next:null},e=rt.updateQueue,e===null&&(e=gb(),rt.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Zg(){return{destroy:void 0,resource:void 0}}function mC(){return Yn().memoizedState}function mp(t,e,n,r){var i=Kr();r=r===void 0?null:r,rt.flags|=t,i.memoizedState=Ic(1|e,Zg(),n,r)}function hd(t,e,n,r){var i=Yn();r=r===void 0?null:r;var s=i.memoizedState.inst;Yt!==null&&r!==null&&hb(r,Yt.memoizedState.deps)?i.memoizedState=Ic(e,s,n,r):(rt.flags|=t,i.memoizedState=Ic(1|e,s,n,r))}function P2(t,e){mp(8390656,8,t,e)}function pC(t,e){hd(2048,8,t,e)}function gC(t,e){return hd(4,2,t,e)}function vC(t,e){return hd(4,4,t,e)}function yC(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _C(t,e,n){n=n!=null?n.concat([t]):null,hd(4,4,yC.bind(null,e,t),n)}function _b(){}function bC(t,e){var n=Yn();e=e===void 0?null:e;var r=n.memoizedState;return e!==null&&hb(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function wC(t,e){var n=Yn();e=e===void 0?null:e;var r=n.memoizedState;if(e!==null&&hb(e,r[1]))return r[0];if(r=t(),Ql){bo(!0);try{t()}finally{bo(!1)}}return n.memoizedState=[r,e],r}function bb(t,e,n){return n===void 0||Bo&1073741824?t.memoizedState=e:(t.memoizedState=n,t=hN(),rt.lanes|=t,Ho|=t,n)}function xC(t,e,n,r){return Ni(n,e)?n:Nc.current!==null?(t=bb(t,n,r),Ni(t,e)||(fr=!0),t):Bo&42?(t=hN(),rt.lanes|=t,Ho|=t,e):(fr=!0,t.memoizedState=n)}function EC(t,e,n,r,i){var s=Dt.p;Dt.p=s!==0&&8>s?s:8;var a=Fe.T,l={};Fe.T=l,xb(t,!1,e,n);try{var c=i(),d=Fe.S;if(d!==null&&d(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=XP(c,r);gf(t,e,f,Si(t))}else gf(t,e,r,Si(t))}catch(p){gf(t,e,{then:function(){},status:"rejected",reason:p},Si())}finally{Dt.p=s,Fe.T=a}}function eU(){}function x_(t,e,n,r){if(t.tag!==5)throw Error(me(476));var i=TC(t).queue;EC(t,i,e,Pl,n===null?eU:function(){return AC(t),n(r)})}function TC(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Pl,baseState:Pl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:Pl},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function AC(t){var e=TC(t).next.queue;gf(t,e,{},Si())}function wb(){return Or(zf)}function SC(){return Yn().memoizedState}function RC(){return Yn().memoizedState}function tU(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Si();t=No(n);var r=Io(e,t,n);r!==null&&(Ri(r,e,n),df(r,e,n)),e={cache:ob()},t.payload=e;return}e=e.return}}function nU(t,e,n){var r=Si();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Jg(t)?NC(e,n):(n=rb(t,e,n,r),n!==null&&(Ri(n,t,r),IC(n,e,r)))}function CC(t,e,n){var r=Si();gf(t,e,n,r)}function gf(t,e,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jg(t))NC(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,Ni(l,a))return Xg(t,e,i,0),nn===null&&Wg(),!1}catch{}finally{}if(n=rb(t,e,i,r),n!==null)return Ri(n,t,r),IC(n,e,r),!0}return!1}function xb(t,e,n,r){if(r={lane:2,revertLane:Ib(),action:r,hasEagerState:!1,eagerState:null,next:null},Jg(t)){if(e)throw Error(me(479))}else e=rb(t,n,r,2),e!==null&&Ri(e,t,2)}function Jg(t){var e=t.alternate;return t===rt||e!==null&&e===rt}function NC(t,e){pc=Hp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function IC(t,e,n){if(n&4194048){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bR(t,n)}}var Gp={readContext:Or,use:Qg,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useLayoutEffect:Mn,useInsertionEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useSyncExternalStore:Mn,useId:Mn,useHostTransitionStatus:Mn,useFormState:Mn,useActionState:Mn,useOptimistic:Mn,useMemoCache:Mn,useCacheRefresh:Mn},DC={readContext:Or,use:Qg,useCallback:function(t,e){return Kr().memoizedState=[t,e===void 0?null:e],t},useContext:Or,useEffect:P2,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,mp(4194308,4,yC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return mp(4194308,4,t,e)},useInsertionEffect:function(t,e){mp(4,2,t,e)},useMemo:function(t,e){var n=Kr();e=e===void 0?null:e;var r=t();if(Ql){bo(!0);try{t()}finally{bo(!1)}}return n.memoizedState=[r,e],r},useReducer:function(t,e,n){var r=Kr();if(n!==void 0){var i=n(e);if(Ql){bo(!0);try{n(e)}finally{bo(!1)}}}else i=e;return r.memoizedState=r.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},r.queue=t,t=t.dispatch=nU.bind(null,rt,t),[r.memoizedState,t]},useRef:function(t){var e=Kr();return t={current:t},e.memoizedState=t},useState:function(t){t=b_(t);var e=t.queue,n=CC.bind(null,rt,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:_b,useDeferredValue:function(t,e){var n=Kr();return bb(n,t,e)},useTransition:function(){var t=b_(!1);return t=EC.bind(null,rt,t.queue,!0,!1),Kr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var r=rt,i=Kr();if(It){if(n===void 0)throw Error(me(407));n=n()}else{if(n=e(),nn===null)throw Error(me(349));xt&124||iC(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,P2(aC.bind(null,r,s,t),[t]),r.flags|=2048,Ic(9,Zg(),sC.bind(null,r,s,n,e),null),n},useId:function(){var t=Kr(),e=nn.identifierPrefix;if(It){var n=wa,r=ba;n=(r&~(1<<32-Ai(r)-1)).toString(32)+n,e=""+e+"R"+n,n=qp++,0<n&&(e+="H"+n.toString(32)),e+=""}else n=KP++,e=""+e+"r"+n.toString(32)+"";return t.memoizedState=e},useHostTransitionStatus:wb,useFormState:k2,useActionState:k2,useOptimistic:function(t){var e=Kr();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=xb.bind(null,rt,!0,n),n.dispatch=e,[t,e]},useMemoCache:vb,useCacheRefresh:function(){return Kr().memoizedState=tU.bind(null,rt)}},OC={readContext:Or,use:Qg,useCallback:bC,useContext:Or,useEffect:pC,useImperativeHandle:_C,useInsertionEffect:gC,useLayoutEffect:vC,useMemo:wC,useReducer:dp,useRef:mC,useState:function(){return dp(Ia)},useDebugValue:_b,useDeferredValue:function(t,e){var n=Yn();return xC(n,Yt.memoizedState,t,e)},useTransition:function(){var t=dp(Ia)[0],e=Yn().memoizedState;return[typeof t=="boolean"?t:cd(t),e]},useSyncExternalStore:rC,useId:SC,useHostTransitionStatus:wb,useFormState:L2,useActionState:L2,useOptimistic:function(t,e){var n=Yn();return uC(n,Yt,t,e)},useMemoCache:vb,useCacheRefresh:RC},rU={readContext:Or,use:Qg,useCallback:bC,useContext:Or,useEffect:pC,useImperativeHandle:_C,useInsertionEffect:gC,useLayoutEffect:vC,useMemo:wC,useReducer:iy,useRef:mC,useState:function(){return iy(Ia)},useDebugValue:_b,useDeferredValue:function(t,e){var n=Yn();return Yt===null?bb(n,t,e):xC(n,Yt.memoizedState,t,e)},useTransition:function(){var t=iy(Ia)[0],e=Yn().memoizedState;return[typeof t=="boolean"?t:cd(t),e]},useSyncExternalStore:rC,useId:SC,useHostTransitionStatus:wb,useFormState:j2,useActionState:j2,useOptimistic:function(t,e){var n=Yn();return Yt!==null?uC(n,Yt,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:vb,useCacheRefresh:RC},vc=null,jf=0;function Bm(t){var e=jf;return jf+=1,vc===null&&(vc=[]),ZR(vc,t,e)}function Ph(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Fm(t,e){throw e.$$typeof===Mj?Error(me(525)):(t=Object.prototype.toString.call(e),Error(me(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function U2(t){var e=t._init;return e(t._payload)}function MC(t){function e(A,N){if(t){var M=A.deletions;M===null?(A.deletions=[N],A.flags|=16):M.push(N)}}function n(A,N){if(!t)return null;for(;N!==null;)e(A,N),N=N.sibling;return null}function r(A){for(var N=new Map;A!==null;)A.key!==null?N.set(A.key,A):N.set(A.index,A),A=A.sibling;return N}function i(A,N){return A=Sa(A,N),A.index=0,A.sibling=null,A}function s(A,N,M){return A.index=M,t?(M=A.alternate,M!==null?(M=M.index,M<N?(A.flags|=67108866,N):M):(A.flags|=67108866,N)):(A.flags|=1048576,N)}function a(A){return t&&A.alternate===null&&(A.flags|=67108866),A}function l(A,N,M,P){return N===null||N.tag!==6?(N=ty(M,A.mode,P),N.return=A,N):(N=i(N,M),N.return=A,N)}function c(A,N,M,P){var q=M.type;return q===Xu?f(A,N,M.props.children,P,M.key):N!==null&&(N.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===uo&&U2(q)===N.type)?(N=i(N,M.props),Ph(N,M),N.return=A,N):(N=hp(M.type,M.key,M.props,null,A.mode,P),Ph(N,M),N.return=A,N)}function d(A,N,M,P){return N===null||N.tag!==4||N.stateNode.containerInfo!==M.containerInfo||N.stateNode.implementation!==M.implementation?(N=ny(M,A.mode,P),N.return=A,N):(N=i(N,M.children||[]),N.return=A,N)}function f(A,N,M,P,q){return N===null||N.tag!==7?(N=Ul(M,A.mode,P,q),N.return=A,N):(N=i(N,M),N.return=A,N)}function p(A,N,M){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=ty(""+N,A.mode,M),N.return=A,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case km:return M=hp(N.type,N.key,N.props,null,A.mode,M),Ph(M,N),M.return=A,M;case Qh:return N=ny(N,A.mode,M),N.return=A,N;case uo:var P=N._init;return N=P(N._payload),p(A,N,M)}if(Zh(N)||Mh(N))return N=Ul(N,A.mode,M,null),N.return=A,N;if(typeof N.then=="function")return p(A,Bm(N),M);if(N.$$typeof===_a)return p(A,Vm(A,N),M);Fm(A,N)}return null}function m(A,N,M,P){var q=N!==null?N.key:null;if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return q!==null?null:l(A,N,""+M,P);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case km:return M.key===q?c(A,N,M,P):null;case Qh:return M.key===q?d(A,N,M,P):null;case uo:return q=M._init,M=q(M._payload),m(A,N,M,P)}if(Zh(M)||Mh(M))return q!==null?null:f(A,N,M,P,null);if(typeof M.then=="function")return m(A,N,Bm(M),P);if(M.$$typeof===_a)return m(A,N,Vm(A,M),P);Fm(A,M)}return null}function y(A,N,M,P,q){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return A=A.get(M)||null,l(N,A,""+P,q);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case km:return A=A.get(P.key===null?M:P.key)||null,c(N,A,P,q);case Qh:return A=A.get(P.key===null?M:P.key)||null,d(N,A,P,q);case uo:var L=P._init;return P=L(P._payload),y(A,N,M,P,q)}if(Zh(P)||Mh(P))return A=A.get(M)||null,f(N,A,P,q,null);if(typeof P.then=="function")return y(A,N,M,Bm(P),q);if(P.$$typeof===_a)return y(A,N,M,Vm(N,P),q);Fm(N,P)}return null}function E(A,N,M,P){for(var q=null,L=null,T=N,_=N=0,x=null;T!==null&&_<M.length;_++){T.index>_?(x=T,T=null):x=T.sibling;var S=m(A,T,M[_],P);if(S===null){T===null&&(T=x);break}t&&T&&S.alternate===null&&e(A,T),N=s(S,N,_),L===null?q=S:L.sibling=S,L=S,T=x}if(_===M.length)return n(A,T),It&&Sl(A,_),q;if(T===null){for(;_<M.length;_++)T=p(A,M[_],P),T!==null&&(N=s(T,N,_),L===null?q=T:L.sibling=T,L=T);return It&&Sl(A,_),q}for(T=r(T);_<M.length;_++)x=y(T,A,_,M[_],P),x!==null&&(t&&x.alternate!==null&&T.delete(x.key===null?_:x.key),N=s(x,N,_),L===null?q=x:L.sibling=x,L=x);return t&&T.forEach(function(k){return e(A,k)}),It&&Sl(A,_),q}function C(A,N,M,P){if(M==null)throw Error(me(151));for(var q=null,L=null,T=N,_=N=0,x=null,S=M.next();T!==null&&!S.done;_++,S=M.next()){T.index>_?(x=T,T=null):x=T.sibling;var k=m(A,T,S.value,P);if(k===null){T===null&&(T=x);break}t&&T&&k.alternate===null&&e(A,T),N=s(k,N,_),L===null?q=k:L.sibling=k,L=k,T=x}if(S.done)return n(A,T),It&&Sl(A,_),q;if(T===null){for(;!S.done;_++,S=M.next())S=p(A,S.value,P),S!==null&&(N=s(S,N,_),L===null?q=S:L.sibling=S,L=S);return It&&Sl(A,_),q}for(T=r(T);!S.done;_++,S=M.next())S=y(T,A,_,S.value,P),S!==null&&(t&&S.alternate!==null&&T.delete(S.key===null?_:S.key),N=s(S,N,_),L===null?q=S:L.sibling=S,L=S);return t&&T.forEach(function(j){return e(A,j)}),It&&Sl(A,_),q}function I(A,N,M,P){if(typeof M=="object"&&M!==null&&M.type===Xu&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case km:e:{for(var q=M.key;N!==null;){if(N.key===q){if(q=M.type,q===Xu){if(N.tag===7){n(A,N.sibling),P=i(N,M.props.children),P.return=A,A=P;break e}}else if(N.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===uo&&U2(q)===N.type){n(A,N.sibling),P=i(N,M.props),Ph(P,M),P.return=A,A=P;break e}n(A,N);break}else e(A,N);N=N.sibling}M.type===Xu?(P=Ul(M.props.children,A.mode,P,M.key),P.return=A,A=P):(P=hp(M.type,M.key,M.props,null,A.mode,P),Ph(P,M),P.return=A,A=P)}return a(A);case Qh:e:{for(q=M.key;N!==null;){if(N.key===q)if(N.tag===4&&N.stateNode.containerInfo===M.containerInfo&&N.stateNode.implementation===M.implementation){n(A,N.sibling),P=i(N,M.children||[]),P.return=A,A=P;break e}else{n(A,N);break}else e(A,N);N=N.sibling}P=ny(M,A.mode,P),P.return=A,A=P}return a(A);case uo:return q=M._init,M=q(M._payload),I(A,N,M,P)}if(Zh(M))return E(A,N,M,P);if(Mh(M)){if(q=Mh(M),typeof q!="function")throw Error(me(150));return M=q.call(M),C(A,N,M,P)}if(typeof M.then=="function")return I(A,N,Bm(M),P);if(M.$$typeof===_a)return I(A,N,Vm(A,M),P);Fm(A,M)}return typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint"?(M=""+M,N!==null&&N.tag===6?(n(A,N.sibling),P=i(N,M),P.return=A,A=P):(n(A,N),P=ty(M,A.mode,P),P.return=A,A=P),a(A)):n(A,N)}return function(A,N,M,P){try{jf=0;var q=I(A,N,M,P);return vc=null,q}catch(T){if(T===ud||T===Kg)throw T;var L=bi(29,T,null,A.mode);return L.lanes=P,L.return=A,L}finally{}}}var Dc=MC(!0),kC=MC(!1),is=Ks(null),zs=null;function fo(t){var e=t.alternate;vn(tr,tr.current&1),vn(is,t),zs===null&&(e===null||Nc.current!==null||e.memoizedState!==null)&&(zs=t)}function LC(t){if(t.tag===22){if(vn(tr,tr.current),vn(is,t),zs===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(zs=t)}}else mo()}function mo(){vn(tr,tr.current),vn(is,is.current)}function Ea(t){dr(is),zs===t&&(zs=null),dr(tr)}var tr=Ks(0);function $p(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||V_(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function sy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ln({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var E_={enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Si(),i=No(r);i.payload=e,n!=null&&(i.callback=n),e=Io(t,i,r),e!==null&&(Ri(e,t,r),df(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Si(),i=No(r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Io(t,i,r),e!==null&&(Ri(e,t,r),df(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Si(),r=No(n);r.tag=2,e!=null&&(r.callback=e),e=Io(t,r,n),e!==null&&(Ri(e,t,n),df(e,t,n))}};function V2(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Mf(n,r)||!Mf(i,s):!0}function z2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&E_.enqueueReplaceState(e,e.state,null)}function Zl(t,e){var n=e;if("ref"in e){n={};for(var r in e)r!=="ref"&&(n[r]=e[r])}if(t=t.defaultProps){n===e&&(n=ln({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}var Yp=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function jC(t){Yp(t)}function PC(t){console.error(t)}function UC(t){Yp(t)}function Wp(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(r){setTimeout(function(){throw r})}}function B2(t,e,n){try{var r=t.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function T_(t,e,n){return n=No(n),n.tag=3,n.payload={element:null},n.callback=function(){Wp(t,e)},n}function VC(t){return t=No(t),t.tag=3,t}function zC(t,e,n,r){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=r.value;t.payload=function(){return i(s)},t.callback=function(){B2(e,n,r)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){B2(e,n,r),typeof i!="function"&&(Do===null?Do=new Set([this]):Do.add(this));var l=r.stack;this.componentDidCatch(r.value,{componentStack:l!==null?l:""})})}function iU(t,e,n,r,i){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(e=n.alternate,e!==null&&od(e,n,i,!0),n=is.current,n!==null){switch(n.tag){case 13:return zs===null?O_():n.alternate===null&&Rn===0&&(Rn=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===g_?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([r]):e.add(r),gy(t,r,i)),!1;case 22:return n.flags|=65536,r===g_?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([r]):n.add(r)),gy(t,r,i)),!1}throw Error(me(435,n.tag))}return gy(t,r,i),O_(),!1}if(It)return e=is.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,r!==h_&&(t=Error(me(422),{cause:r}),kf(Zi(t,n)))):(r!==h_&&(e=Error(me(423),{cause:r}),kf(Zi(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,r=Zi(r,n),i=T_(t.stateNode,r,i),ry(t,i),Rn!==4&&(Rn=2)),!1;var s=Error(me(520),{cause:r});if(s=Zi(s,n),_f===null?_f=[s]:_f.push(s),Rn!==4&&(Rn=2),e===null)return!0;r=Zi(r,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=T_(n.stateNode,r,t),ry(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Do===null||!Do.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,i=VC(i),zC(i,t,n,r),ry(n,i),!1}n=n.return}while(n!==null);return!1}var BC=Error(me(461)),fr=!1;function vr(t,e,n,r){e.child=t===null?kC(e,null,n,r):Dc(e,t.child,n,r)}function F2(t,e,n,r,i){n=n.render;var s=e.ref;if("ref"in r){var a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}else a=r;return Kl(e),r=fb(t,e,n,a,s,i),l=db(),t!==null&&!fr?(mb(t,e,i),Da(t,e,i)):(It&&l&&sb(e),e.flags|=1,vr(t,e,r,i),e.child)}function H2(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!ib(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,FC(t,e,s,r,i)):(t=hp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!Eb(t,i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Mf,n(a,r)&&t.ref===e.ref)return Da(t,e,i)}return e.flags|=1,t=Sa(s,r),t.ref=e.ref,t.return=e,e.child=t}function FC(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Mf(s,r)&&t.ref===e.ref)if(fr=!1,e.pendingProps=r=s,Eb(t,i))t.flags&131072&&(fr=!0);else return e.lanes=t.lanes,Da(t,e,i)}return A_(t,e,n,r,i)}function HC(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden"){if(e.flags&128){if(r=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,s=0;i!==null;)s=s|i.lanes|i.childLanes,i=i.sibling;e.childLanes=s&~r}else e.childLanes=0,e.child=null;return q2(t,e,r,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&fp(e,s!==null?s.cachePool:null),s!==null?D2(e,s):__(),LC(e);else return e.lanes=e.childLanes=536870912,q2(t,e,s!==null?s.baseLanes|n:n,n)}else s!==null?(fp(e,s.cachePool),D2(e,s),mo(),e.memoizedState=null):(t!==null&&fp(e,null),__(),mo());return vr(t,e,i,n),e.child}function q2(t,e,n,r){var i=lb();return i=i===null?null:{parent:er._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},t!==null&&fp(e,null),__(),LC(e),t!==null&&od(t,e,r,!0),null}function pp(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(me(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function A_(t,e,n,r,i){return Kl(e),n=fb(t,e,n,r,void 0,i),r=db(),t!==null&&!fr?(mb(t,e,i),Da(t,e,i)):(It&&r&&sb(e),e.flags|=1,vr(t,e,n,i),e.child)}function G2(t,e,n,r,i,s){return Kl(e),e.updateQueue=null,n=nC(e,r,n,i),tC(t),r=db(),t!==null&&!fr?(mb(t,e,s),Da(t,e,s)):(It&&r&&sb(e),e.flags|=1,vr(t,e,n,s),e.child)}function $2(t,e,n,r,i){if(Kl(e),e.stateNode===null){var s=rc,a=n.contextType;typeof a=="object"&&a!==null&&(s=Or(a)),s=new n(r,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=E_,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=r,s.state=e.memoizedState,s.refs={},ub(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?Or(a):rc,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(sy(e,n,a,r),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&E_.enqueueReplaceState(s,s.state,null),pf(e,r,s,i),mf(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!0}else if(t===null){s=e.stateNode;var l=e.memoizedProps,c=Zl(n,l);s.props=c;var d=s.context,f=n.contextType;a=rc,typeof f=="object"&&f!==null&&(a=Or(f));var p=n.getDerivedStateFromProps;f=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||d!==a)&&z2(e,s,r,a),co=!1;var m=e.memoizedState;s.state=m,pf(e,r,s,i),mf(),d=e.memoizedState,l||m!==d||co?(typeof p=="function"&&(sy(e,n,p,r),d=e.memoizedState),(c=co||V2(e,n,c,r,m,d,a))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),s.props=r,s.state=d,s.context=a,r=c):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,v_(t,e),a=e.memoizedProps,f=Zl(n,a),s.props=f,p=e.pendingProps,m=s.context,d=n.contextType,c=rc,typeof d=="object"&&d!==null&&(c=Or(d)),l=n.getDerivedStateFromProps,(d=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||m!==c)&&z2(e,s,r,c),co=!1,m=e.memoizedState,s.state=m,pf(e,r,s,i),mf();var y=e.memoizedState;a!==p||m!==y||co||t!==null&&t.dependencies!==null&&Bp(t.dependencies)?(typeof l=="function"&&(sy(e,n,l,r),y=e.memoizedState),(f=co||V2(e,n,f,r,m,y,c)||t!==null&&t.dependencies!==null&&Bp(t.dependencies))?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,y,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,y,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),s.props=r,s.state=y,s.context=c,r=f):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return s=r,pp(t,e),r=(e.flags&128)!==0,s||r?(s=e.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&r?(e.child=Dc(e,t.child,null,i),e.child=Dc(e,null,n,i)):vr(t,e,n,i),e.memoizedState=s.state,t=e.child):t=Da(t,e,i),t}function Y2(t,e,n,r){return ad(),e.flags|=256,vr(t,e,n,r),e.child}var ay={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function oy(t){return{baseLanes:t,cachePool:KR()}}function ly(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=es),t}function qC(t,e,n){var r=e.pendingProps,i=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(tr.current&2)!==0),a&&(i=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(It){if(i?fo(e):mo(),It){var l=Sn,c;if(c=l){e:{for(c=l,l=js;c.nodeType!==8;){if(!l){l=null;break e}if(c=xs(c.nextSibling),c===null){l=null;break e}}l=c}l!==null?(e.memoizedState={dehydrated:l,treeContext:Vl!==null?{id:ba,overflow:wa}:null,retryLane:536870912,hydrationErrors:null},c=bi(18,null,null,0),c.stateNode=l,c.return=e,e.child=c,Br=e,Sn=null,c=!0):c=!1}c||Xl(e)}if(l=e.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return V_(l)?e.lanes=32:e.lanes=536870912,null;Ea(e)}return l=r.children,r=r.fallback,i?(mo(),i=e.mode,l=Xp({mode:"hidden",children:l},i),r=Ul(r,i,n,null),l.return=e,r.return=e,l.sibling=r,e.child=l,i=e.child,i.memoizedState=oy(n),i.childLanes=ly(t,a,n),e.memoizedState=ay,r):(fo(e),S_(e,l))}if(c=t.memoizedState,c!==null&&(l=c.dehydrated,l!==null)){if(s)e.flags&256?(fo(e),e.flags&=-257,e=uy(t,e,n)):e.memoizedState!==null?(mo(),e.child=t.child,e.flags|=128,e=null):(mo(),i=r.fallback,l=e.mode,r=Xp({mode:"visible",children:r.children},l),i=Ul(i,l,n,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,Dc(e,t.child,null,n),r=e.child,r.memoizedState=oy(n),r.childLanes=ly(t,a,n),e.memoizedState=ay,e=i);else if(fo(e),V_(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var d=a.dgst;a=d,r=Error(me(419)),r.stack="",r.digest=a,kf({value:r,source:null,stack:null}),e=uy(t,e,n)}else if(fr||od(t,e,n,!1),a=(n&t.childLanes)!==0,fr||a){if(a=nn,a!==null&&(r=n&-n,r=r&42?1:Y1(r),r=r&(a.suspendedLanes|n)?0:r,r!==0&&r!==c.retryLane))throw c.retryLane=r,Kc(t,r),Ri(a,t,r),BC;l.data==="$?"||O_(),e=uy(t,e,n)}else l.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,Sn=xs(l.nextSibling),Br=e,It=!0,zl=null,js=!1,t!==null&&(Xi[Ki++]=ba,Xi[Ki++]=wa,Xi[Ki++]=Vl,ba=t.id,wa=t.overflow,Vl=e),e=S_(e,r.children),e.flags|=4096);return e}return i?(mo(),i=r.fallback,l=e.mode,c=t.child,d=c.sibling,r=Sa(c,{mode:"hidden",children:r.children}),r.subtreeFlags=c.subtreeFlags&65011712,d!==null?i=Sa(d,i):(i=Ul(i,l,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,l=t.child.memoizedState,l===null?l=oy(n):(c=l.cachePool,c!==null?(d=er._currentValue,c=c.parent!==d?{parent:d,pool:d}:c):c=KR(),l={baseLanes:l.baseLanes|n,cachePool:c}),i.memoizedState=l,i.childLanes=ly(t,a,n),e.memoizedState=ay,r):(fo(e),n=t.child,t=n.sibling,n=Sa(n,{mode:"visible",children:r.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function S_(t,e){return e=Xp({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Xp(t,e){return t=bi(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function uy(t,e,n){return Dc(e,t.child,null,n),t=S_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function W2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),d_(t.return,e,n)}function cy(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function GC(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(vr(t,e,r.children,n),r=tr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&W2(t,n,e);else if(t.tag===19)W2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}switch(vn(tr,r),i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$p(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),cy(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$p(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}cy(e,!0,n,null,s);break;case"together":cy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Da(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ho|=e.lanes,!(n&e.childLanes))if(t!==null){if(od(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(me(153));if(e.child!==null){for(t=e.child,n=Sa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Sa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Eb(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Bp(t)))}function sU(t,e,n){switch(e.tag){case 3:Mp(e,e.stateNode.containerInfo),ho(e,er,t.memoizedState.cache),ad();break;case 27:case 5:t_(e);break;case 4:Mp(e,e.stateNode.containerInfo);break;case 10:ho(e,e.type,e.memoizedProps.value);break;case 13:var r=e.memoizedState;if(r!==null)return r.dehydrated!==null?(fo(e),e.flags|=128,null):n&e.child.childLanes?qC(t,e,n):(fo(e),t=Da(t,e,n),t!==null?t.sibling:null);fo(e);break;case 19:var i=(t.flags&128)!==0;if(r=(n&e.childLanes)!==0,r||(od(t,e,n,!1),r=(n&e.childLanes)!==0),i){if(r)return GC(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),vn(tr,tr.current),r)break;return null;case 22:case 23:return e.lanes=0,HC(t,e,n);case 24:ho(e,er,t.memoizedState.cache)}return Da(t,e,n)}function $C(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)fr=!0;else{if(!Eb(t,n)&&!(e.flags&128))return fr=!1,sU(t,e,n);fr=!!(t.flags&131072)}else fr=!1,It&&e.flags&1048576&&WR(e,zp,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var r=e.elementType,i=r._init;if(r=i(r._payload),e.type=r,typeof r=="function")ib(r)?(t=Zl(r,t),e.tag=1,e=$2(null,e,r,t,n)):(e.tag=0,e=A_(null,e,r,t,n));else{if(r!=null){if(i=r.$$typeof,i===q1){e.tag=11,e=F2(null,e,r,t,n);break e}else if(i===G1){e.tag=14,e=H2(null,e,r,t,n);break e}}throw e=Jy(r)||r,Error(me(306,e,""))}}return e;case 0:return A_(t,e,e.type,e.pendingProps,n);case 1:return r=e.type,i=Zl(r,e.pendingProps),$2(t,e,r,i,n);case 3:e:{if(Mp(e,e.stateNode.containerInfo),t===null)throw Error(me(387));r=e.pendingProps;var s=e.memoizedState;i=s.element,v_(t,e),pf(e,r,null,n);var a=e.memoizedState;if(r=a.cache,ho(e,er,r),r!==s.cache&&m_(e,[er],n,!0),mf(),r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=Y2(t,e,r,n);break e}else if(r!==i){i=Zi(Error(me(424)),e),kf(i),e=Y2(t,e,r,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Sn=xs(t.firstChild),Br=e,It=!0,zl=null,js=!0,n=kC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ad(),r===i){e=Da(t,e,n);break e}vr(t,e,r,n)}e=e.child}return e;case 26:return pp(t,e),t===null?(n=hT(e.type,null,e.pendingProps,null))?e.memoizedState=n:It||(n=e.type,t=e.pendingProps,r=ng(Co.current).createElement(n),r[Dr]=e,r[ai]=t,wr(r,n,t),hr(r),e.stateNode=r):e.memoizedState=hT(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return t_(e),t===null&&It&&(r=e.stateNode=ON(e.type,e.pendingProps,Co.current),Br=e,js=!0,i=Sn,el(e.type)?(z_=i,Sn=xs(r.firstChild)):Sn=i),vr(t,e,e.pendingProps.children,n),pp(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&It&&((i=r=Sn)&&(r=MU(r,e.type,e.pendingProps,js),r!==null?(e.stateNode=r,Br=e,Sn=xs(r.firstChild),js=!1,i=!0):i=!1),i||Xl(e)),t_(e),i=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,r=s.children,P_(i,s)?r=null:a!==null&&P_(i,a)&&(e.flags|=32),e.memoizedState!==null&&(i=fb(t,e,QP,null,null,n),zf._currentValue=i),pp(t,e),vr(t,e,r,n),e.child;case 6:return t===null&&It&&((t=n=Sn)&&(n=kU(n,e.pendingProps,js),n!==null?(e.stateNode=n,Br=e,Sn=null,t=!0):t=!1),t||Xl(e)),null;case 13:return qC(t,e,n);case 4:return Mp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Dc(e,null,r,n):vr(t,e,r,n),e.child;case 11:return F2(t,e,e.type,e.pendingProps,n);case 7:return vr(t,e,e.pendingProps,n),e.child;case 8:return vr(t,e,e.pendingProps.children,n),e.child;case 12:return vr(t,e,e.pendingProps.children,n),e.child;case 10:return r=e.pendingProps,ho(e,e.type,r.value),vr(t,e,r.children,n),e.child;case 9:return i=e.type._context,r=e.pendingProps.children,Kl(e),i=Or(i),r=r(i),e.flags|=1,vr(t,e,r,n),e.child;case 14:return H2(t,e,e.type,e.pendingProps,n);case 15:return FC(t,e,e.type,e.pendingProps,n);case 19:return GC(t,e,n);case 31:return r=e.pendingProps,n=e.mode,r={mode:r.mode,children:r.children},t===null?(n=Xp(r,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=Sa(t.child,r),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return HC(t,e,n);case 24:return Kl(e),r=Or(er),t===null?(i=lb(),i===null&&(i=nn,s=ob(),i.pooledCache=s,s.refCount++,s!==null&&(i.pooledCacheLanes|=n),i=s),e.memoizedState={parent:r,cache:i},ub(e),ho(e,er,i)):(t.lanes&n&&(v_(t,e),pf(e,null,null,n),mf()),i=t.memoizedState,s=e.memoizedState,i.parent!==r?(i={parent:r,cache:r},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),ho(e,er,r)):(r=s.cache,ho(e,er,r),r!==i.cache&&m_(e,[er],n,!0))),vr(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(me(156,e.tag))}function pa(t){t.flags|=4}function X2(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!LN(e)){if(e=is.current,e!==null&&((xt&4194048)===xt?zs!==null:(xt&62914560)!==xt&&!(xt&536870912)||e!==zs))throw ff=g_,QR;t.flags|=8192}}function Hm(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?yR():536870912,t.lanes|=e,Oc|=e)}function Uh(t,e){if(!It)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function bn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function aU(t,e,n){var r=e.pendingProps;switch(ab(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(e),null;case 1:return bn(e),null;case 3:return n=e.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),Ra(er),Ac(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(jh(e)?pa(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,A2())),bn(e),null;case 26:return n=e.memoizedState,t===null?(pa(e),n!==null?(bn(e),X2(e,n)):(bn(e),e.flags&=-16777217)):n?n!==t.memoizedState?(pa(e),bn(e),X2(e,n)):(bn(e),e.flags&=-16777217):(t.memoizedProps!==r&&pa(e),bn(e),e.flags&=-16777217),null;case 27:kp(e),n=Co.current;var i=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==r&&pa(e);else{if(!r){if(e.stateNode===null)throw Error(me(166));return bn(e),null}t=Us.current,jh(e)?E2(e):(t=ON(i,r,n),e.stateNode=t,pa(e))}return bn(e),null;case 5:if(kp(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==r&&pa(e);else{if(!r){if(e.stateNode===null)throw Error(me(166));return bn(e),null}if(t=Us.current,jh(e))E2(e);else{switch(i=ng(Co.current),t){case 1:t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof r.is=="string"?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?t.multiple=!0:r.size&&(t.size=r.size);break;default:t=typeof r.is=="string"?i.createElement(n,{is:r.is}):i.createElement(n)}}t[Dr]=e,t[ai]=r;e:for(i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}e.stateNode=t;e:switch(wr(t,n,r),n){case"button":case"input":case"select":case"textarea":t=!!r.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&pa(e)}}return bn(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==r&&pa(e);else{if(typeof r!="string"&&e.stateNode===null)throw Error(me(166));if(t=Co.current,jh(e)){if(t=e.stateNode,n=e.memoizedProps,r=null,i=Br,i!==null)switch(i.tag){case 27:case 5:r=i.memoizedProps}t[Dr]=e,t=!!(t.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||NN(t.nodeValue,n)),t||Xl(e)}else t=ng(t).createTextNode(r),t[Dr]=e,e.stateNode=t}return bn(e),null;case 13:if(r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=jh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(me(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(me(317));i[Dr]=e}else ad(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bn(e),i=!1}else i=A2(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(Ea(e),e):(Ea(e),null)}if(Ea(e),e.flags&128)return e.lanes=n,e;if(n=r!==null,t=t!==null&&t.memoizedState!==null,n){r=e.child,i=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),Hm(e,e.updateQueue),bn(e),null;case 4:return Ac(),t===null&&Db(e.stateNode.containerInfo),bn(e),null;case 10:return Ra(e.type),bn(e),null;case 19:if(dr(tr),i=e.memoizedState,i===null)return bn(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)Uh(i,!1);else{if(Rn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=$p(t),s!==null){for(e.flags|=128,Uh(i,!1),t=s.updateQueue,e.updateQueue=t,Hm(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)YR(n,t),n=n.sibling;return vn(tr,tr.current&1|2),e.child}t=t.sibling}i.tail!==null&&Vs()>Qp&&(e.flags|=128,r=!0,Uh(i,!1),e.lanes=4194304)}else{if(!r)if(t=$p(s),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,Hm(e,t),Uh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!It)return bn(e),null}else 2*Vs()-i.renderingStartTime>Qp&&n!==536870912&&(e.flags|=128,r=!0,Uh(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Vs(),e.sibling=null,t=tr.current,vn(tr,r?t&1|2:t&1),e):(bn(e),null);case 22:case 23:return Ea(e),cb(),r=e.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(e.flags|=8192):r&&(e.flags|=8192),r?n&536870912&&!(e.flags&128)&&(bn(e),e.subtreeFlags&6&&(e.flags|=8192)):bn(e),n=e.updateQueue,n!==null&&Hm(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),r=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),r!==n&&(e.flags|=2048),t!==null&&dr(Bl),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Ra(er),bn(e),null;case 25:return null;case 30:return null}throw Error(me(156,e.tag))}function oU(t,e){switch(ab(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ra(er),Ac(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return kp(e),null;case 13:if(Ea(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(me(340));ad()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return dr(tr),null;case 4:return Ac(),null;case 10:return Ra(e.type),null;case 22:case 23:return Ea(e),cb(),t!==null&&dr(Bl),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Ra(er),null;case 25:return null;default:return null}}function YC(t,e){switch(ab(e),e.tag){case 3:Ra(er),Ac();break;case 26:case 27:case 5:kp(e);break;case 4:Ac();break;case 13:Ea(e);break;case 19:dr(tr);break;case 10:Ra(e.type);break;case 22:case 23:Ea(e),cb(),t!==null&&dr(Bl);break;case 24:Ra(er)}}function fd(t,e){try{var n=e.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var i=r.next;n=i;do{if((n.tag&t)===t){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(l){Jt(e,e.return,l)}}function Fo(t,e,n){try{var r=e.updateQueue,i=r!==null?r.lastEffect:null;if(i!==null){var s=i.next;r=s;do{if((r.tag&t)===t){var a=r.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,i=e;var c=n,d=l;try{d()}catch(f){Jt(i,c,f)}}}r=r.next}while(r!==s)}}catch(f){Jt(e,e.return,f)}}function WC(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{eC(e,n)}catch(r){Jt(t,t.return,r)}}}function XC(t,e,n){n.props=Zl(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(r){Jt(t,e,r)}}function vf(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof n=="function"?t.refCleanup=n(r):n.current=r}}catch(i){Jt(t,e,i)}}function Ps(t,e){var n=t.ref,r=t.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(i){Jt(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){Jt(t,e,i)}else n.current=null}function KC(t){var e=t.type,n=t.memoizedProps,r=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){Jt(t,t.return,i)}}function hy(t,e,n){try{var r=t.stateNode;CU(r,t.type,n,e),r[ai]=e}catch(i){Jt(t,t.return,i)}}function QC(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&el(t.type)||t.tag===4}function fy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||QC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&el(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function R_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rv));else if(r!==4&&(r===27&&el(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(R_(t,e,n),t=t.sibling;t!==null;)R_(t,e,n),t=t.sibling}function Kp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(r===27&&el(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Kp(t,e,n),t=t.sibling;t!==null;)Kp(t,e,n),t=t.sibling}function ZC(t){var e=t.stateNode,n=t.memoizedProps;try{for(var r=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);wr(e,r,n),e[Dr]=t,e[ai]=n}catch(s){Jt(t,t.return,s)}}var va=!1,kn=!1,dy=!1,K2=typeof WeakSet=="function"?WeakSet:Set,cr=null;function lU(t,e){if(t=t.containerInfo,L_=ag,t=VR(t),tb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,f=0,p=t,m=null;t:for(;;){for(var y;p!==n||i!==0&&p.nodeType!==3||(l=a+i),p!==s||r!==0&&p.nodeType!==3||(c=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===t)break t;if(m===n&&++d===i&&(l=a),m===s&&++f===r&&(c=a),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(j_={focusedElem:t,selectionRange:n},ag=!1,cr=e;cr!==null;)if(e=cr,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,cr=t;else for(;cr!==null;){switch(e=cr,s=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var E=Zl(n.type,i,n.elementType===n.type);t=r.getSnapshotBeforeUpdate(E,s),r.__reactInternalSnapshotBeforeUpdate=t}catch(C){Jt(n,n.return,C)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)U_(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":U_(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(me(163))}if(t=e.sibling,t!==null){t.return=e.return,cr=t;break}cr=e.return}}function JC(t,e,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:io(t,n),r&4&&fd(5,n);break;case 1:if(io(t,n),r&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Jt(n,n.return,a)}else{var i=Zl(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Jt(n,n.return,a)}}r&64&&WC(n),r&512&&vf(n,n.return);break;case 3:if(io(t,n),r&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{eC(t,e)}catch(a){Jt(n,n.return,a)}}break;case 27:e===null&&r&4&&ZC(n);case 26:case 5:io(t,n),e===null&&r&4&&KC(n),r&512&&vf(n,n.return);break;case 12:io(t,n);break;case 13:io(t,n),r&4&&nN(t,n),r&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=vU.bind(null,n),LU(t,n))));break;case 22:if(r=n.memoizedState!==null||va,!r){e=e!==null&&e.memoizedState!==null||kn,i=va;var s=kn;va=r,(kn=e)&&!s?oo(t,n,(n.subtreeFlags&8772)!==0):io(t,n),va=i,kn=s}break;case 30:break;default:io(t,n)}}function eN(t){var e=t.alternate;e!==null&&(t.alternate=null,eN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&X1(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var fn=null,Qr=!1;function ga(t,e,n){for(n=n.child;n!==null;)tN(t,e,n),n=n.sibling}function tN(t,e,n){if(Ti&&typeof Ti.onCommitFiberUnmount=="function")try{Ti.onCommitFiberUnmount(td,n)}catch{}switch(n.tag){case 26:kn||Ps(n,e),ga(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:kn||Ps(n,e);var r=fn,i=Qr;el(n.type)&&(fn=n.stateNode,Qr=!1),ga(t,e,n),wf(n.stateNode),fn=r,Qr=i;break;case 5:kn||Ps(n,e);case 6:if(r=fn,i=Qr,fn=null,ga(t,e,n),fn=r,Qr=i,fn!==null)if(Qr)try{(fn.nodeType===9?fn.body:fn.nodeName==="HTML"?fn.ownerDocument.body:fn).removeChild(n.stateNode)}catch(s){Jt(n,e,s)}else try{fn.removeChild(n.stateNode)}catch(s){Jt(n,e,s)}break;case 18:fn!==null&&(Qr?(t=fn,lT(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Hf(t)):lT(fn,n.stateNode));break;case 4:r=fn,i=Qr,fn=n.stateNode.containerInfo,Qr=!0,ga(t,e,n),fn=r,Qr=i;break;case 0:case 11:case 14:case 15:kn||Fo(2,n,e),kn||Fo(4,n,e),ga(t,e,n);break;case 1:kn||(Ps(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"&&XC(n,e,r)),ga(t,e,n);break;case 21:ga(t,e,n);break;case 22:kn=(r=kn)||n.memoizedState!==null,ga(t,e,n),kn=r;break;default:ga(t,e,n)}}function nN(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Hf(t)}catch(n){Jt(e,e.return,n)}}function uU(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new K2),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new K2),e;default:throw Error(me(435,t.tag))}}function my(t,e){var n=uU(t);e.forEach(function(r){var i=yU.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}function gi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r],s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 27:if(el(l.type)){fn=l.stateNode,Qr=!1;break e}break;case 5:fn=l.stateNode,Qr=!1;break e;case 3:case 4:fn=l.stateNode.containerInfo,Qr=!0;break e}l=l.return}if(fn===null)throw Error(me(160));tN(s,a,i),fn=null,Qr=!1,s=i.alternate,s!==null&&(s.return=null),i.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)rN(e,t),e=e.sibling}var ys=null;function rN(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:gi(e,t),vi(t),r&4&&(Fo(3,t,t.return),fd(3,t),Fo(5,t,t.return));break;case 1:gi(e,t),vi(t),r&512&&(kn||n===null||Ps(n,n.return)),r&64&&va&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var i=ys;if(gi(e,t),vi(t),r&512&&(kn||n===null||Ps(n,n.return)),r&4){var s=n!==null?n.memoizedState:null;if(r=t.memoizedState,n===null)if(r===null)if(t.stateNode===null){e:{r=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":s=i.getElementsByTagName("title")[0],(!s||s[id]||s[Dr]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),wr(s,r,n),s[Dr]=t,hr(s),r=s;break e;case"link":var a=dT("link","href",i).get(r+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break t}}s=i.createElement(r),wr(s,r,n),i.head.appendChild(s);break;case"meta":if(a=dT("meta","content",i).get(r+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break t}}s=i.createElement(r),wr(s,r,n),i.head.appendChild(s);break;default:throw Error(me(468,r))}s[Dr]=t,hr(s),r=s}t.stateNode=r}else mT(i,t.type,t.stateNode);else t.stateNode=fT(i,r,t.memoizedProps);else s!==r?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,r===null?mT(i,t.type,t.stateNode):fT(i,r,t.memoizedProps)):r===null&&t.stateNode!==null&&hy(t,t.memoizedProps,n.memoizedProps)}break;case 27:gi(e,t),vi(t),r&512&&(kn||n===null||Ps(n,n.return)),n!==null&&r&4&&hy(t,t.memoizedProps,n.memoizedProps);break;case 5:if(gi(e,t),vi(t),r&512&&(kn||n===null||Ps(n,n.return)),t.flags&32){i=t.stateNode;try{Rc(i,"")}catch(y){Jt(t,t.return,y)}}r&4&&t.stateNode!=null&&(i=t.memoizedProps,hy(t,i,n!==null?n.memoizedProps:i)),r&1024&&(dy=!0);break;case 6:if(gi(e,t),vi(t),r&4){if(t.stateNode===null)throw Error(me(162));r=t.memoizedProps,n=t.stateNode;try{n.nodeValue=r}catch(y){Jt(t,t.return,y)}}break;case 3:if(yp=null,i=ys,ys=rg(e.containerInfo),gi(e,t),ys=i,vi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hf(e.containerInfo)}catch(y){Jt(t,t.return,y)}dy&&(dy=!1,iN(t));break;case 4:r=ys,ys=rg(t.stateNode.containerInfo),gi(e,t),vi(t),ys=r;break;case 12:gi(e,t),vi(t);break;case 13:gi(e,t),vi(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Cb=Vs()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,my(t,r)));break;case 22:i=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,d=va,f=kn;if(va=d||i,kn=f||c,gi(e,t),kn=f,va=d,vi(t),r&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||c||va||kn||Rl(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(s=c.stateNode,i)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var p=c.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(y){Jt(c,c.return,y)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(y){Jt(c,c.return,y)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}r&4&&(r=t.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,my(t,n))));break;case 19:gi(e,t),vi(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,my(t,r)));break;case 30:break;case 21:break;default:gi(e,t),vi(t)}}function vi(t){var e=t.flags;if(e&2){try{for(var n,r=t.return;r!==null;){if(QC(r)){n=r;break}r=r.return}if(n==null)throw Error(me(160));switch(n.tag){case 27:var i=n.stateNode,s=fy(t);Kp(t,s,i);break;case 5:var a=n.stateNode;n.flags&32&&(Rc(a,""),n.flags&=-33);var l=fy(t);Kp(t,l,a);break;case 3:case 4:var c=n.stateNode.containerInfo,d=fy(t);R_(t,d,c);break;default:throw Error(me(161))}}catch(f){Jt(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iN(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;iN(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function io(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)JC(t,e.alternate,e),e=e.sibling}function Rl(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Fo(4,e,e.return),Rl(e);break;case 1:Ps(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&XC(e,e.return,n),Rl(e);break;case 27:wf(e.stateNode);case 26:case 5:Ps(e,e.return),Rl(e);break;case 22:e.memoizedState===null&&Rl(e);break;case 30:Rl(e);break;default:Rl(e)}t=t.sibling}}function oo(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var r=e.alternate,i=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:oo(i,s,n),fd(4,s);break;case 1:if(oo(i,s,n),r=s,i=r.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(d){Jt(r,r.return,d)}if(r=s,i=r.updateQueue,i!==null){var l=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)JR(c[i],l)}catch(d){Jt(r,r.return,d)}}n&&a&64&&WC(s),vf(s,s.return);break;case 27:ZC(s);case 26:case 5:oo(i,s,n),n&&r===null&&a&4&&KC(s),vf(s,s.return);break;case 12:oo(i,s,n);break;case 13:oo(i,s,n),n&&a&4&&nN(i,s);break;case 22:s.memoizedState===null&&oo(i,s,n),vf(s,s.return);break;case 30:break;default:oo(i,s,n)}e=e.sibling}}function Tb(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&ld(n))}function Ab(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ld(t))}function Os(t,e,n,r){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)sN(t,e,n,r),e=e.sibling}function sN(t,e,n,r){var i=e.flags;switch(e.tag){case 0:case 11:case 15:Os(t,e,n,r),i&2048&&fd(9,e);break;case 1:Os(t,e,n,r);break;case 3:Os(t,e,n,r),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ld(t)));break;case 12:if(i&2048){Os(t,e,n,r),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){Jt(e,e.return,c)}}else Os(t,e,n,r);break;case 13:Os(t,e,n,r);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?Os(t,e,n,r):yf(t,e):s._visibility&2?Os(t,e,n,r):(s._visibility|=2,Hu(t,e,n,r,(e.subtreeFlags&10256)!==0)),i&2048&&Tb(a,e);break;case 24:Os(t,e,n,r),i&2048&&Ab(e.alternate,e);break;default:Os(t,e,n,r)}}function Hu(t,e,n,r,i){for(i=i&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var s=t,a=e,l=n,c=r,d=a.flags;switch(a.tag){case 0:case 11:case 15:Hu(s,a,l,c,i),fd(8,a);break;case 23:break;case 22:var f=a.stateNode;a.memoizedState!==null?f._visibility&2?Hu(s,a,l,c,i):yf(s,a):(f._visibility|=2,Hu(s,a,l,c,i)),i&&d&2048&&Tb(a.alternate,a);break;case 24:Hu(s,a,l,c,i),i&&d&2048&&Ab(a.alternate,a);break;default:Hu(s,a,l,c,i)}e=e.sibling}}function yf(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,r=e,i=r.flags;switch(r.tag){case 22:yf(n,r),i&2048&&Tb(r.alternate,r);break;case 24:yf(n,r),i&2048&&Ab(r.alternate,r);break;default:yf(n,r)}e=e.sibling}}var ef=8192;function ju(t){if(t.subtreeFlags&ef)for(t=t.child;t!==null;)aN(t),t=t.sibling}function aN(t){switch(t.tag){case 26:ju(t),t.flags&ef&&t.memoizedState!==null&&WU(ys,t.memoizedState,t.memoizedProps);break;case 5:ju(t);break;case 3:case 4:var e=ys;ys=rg(t.stateNode.containerInfo),ju(t),ys=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=ef,ef=16777216,ju(t),ef=e):ju(t));break;default:ju(t)}}function oN(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Vh(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];cr=r,uN(r,t)}oN(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)lN(t),t=t.sibling}function lN(t){switch(t.tag){case 0:case 11:case 15:Vh(t),t.flags&2048&&Fo(9,t,t.return);break;case 3:Vh(t);break;case 12:Vh(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,gp(t)):Vh(t);break;default:Vh(t)}}function gp(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];cr=r,uN(r,t)}oN(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Fo(8,e,e.return),gp(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,gp(e));break;default:gp(e)}t=t.sibling}}function uN(t,e){for(;cr!==null;){var n=cr;switch(n.tag){case 0:case 11:case 15:Fo(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ld(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,cr=r;else e:for(n=t;cr!==null;){r=cr;var i=r.sibling,s=r.return;if(eN(r),r===n){cr=null;break e}if(i!==null){i.return=s,cr=i;break e}cr=s}}}var cU={getCacheForType:function(t){var e=Or(er),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},hU=typeof WeakMap=="function"?WeakMap:Map,Ft=0,nn=null,ht=null,xt=0,zt=0,yi=null,xo=!1,Qc=!1,Sb=!1,Oa=0,Rn=0,Ho=0,Fl=0,Rb=0,es=0,Oc=0,_f=null,ei=null,C_=!1,Cb=0,Qp=1/0,Zp=null,Do=null,_r=0,Oo=null,Mc=null,yc=0,N_=0,I_=null,cN=null,bf=0,D_=null;function Si(){if(Ft&2&&xt!==0)return xt&-xt;if(Fe.T!==null){var t=Cc;return t!==0?t:Ib()}return wR()}function hN(){es===0&&(es=!(xt&536870912)||It?vR():536870912);var t=is.current;return t!==null&&(t.flags|=32),es}function Ri(t,e,n){(t===nn&&(zt===2||zt===9)||t.cancelPendingCommit!==null)&&(kc(t,0),Eo(t,xt,es,!1)),rd(t,n),(!(Ft&2)||t!==nn)&&(t===nn&&(!(Ft&2)&&(Fl|=n),Rn===4&&Eo(t,xt,es,!1)),Qs(t))}function fN(t,e,n){if(Ft&6)throw Error(me(327));var r=!n&&(e&124)===0&&(e&t.expiredLanes)===0||nd(t,e),i=r?mU(t,e):py(t,e,!0),s=r;do{if(i===0){Qc&&!r&&Eo(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!fU(n)){i=py(t,e,!1),s=!1;continue}if(i===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var l=t;i=_f;var c=l.current.memoizedState.isDehydrated;if(c&&(kc(l,a).flags|=256),a=py(l,a,!1),a!==2){if(Sb&&!c){l.errorRecoveryDisabledLanes|=s,Fl|=s,i=4;break e}s=ei,ei=i,s!==null&&(ei===null?ei=s:ei.push.apply(ei,s))}i=a}if(s=!1,i!==2)continue}}if(i===1){kc(t,0),Eo(t,e,0,!0);break}e:{switch(r=t,s=i,s){case 0:case 1:throw Error(me(345));case 4:if((e&4194048)!==e)break;case 6:Eo(r,e,es,!xo);break e;case 2:ei=null;break;case 3:case 5:break;default:throw Error(me(329))}if((e&62914560)===e&&(i=Cb+300-Vs(),10<i)){if(Eo(r,e,es,!xo),qg(r,0,!0)!==0)break e;r.timeoutHandle=DN(Q2.bind(null,r,n,ei,Zp,C_,e,es,Fl,Oc,xo,s,2,-0,0),i);break e}Q2(r,n,ei,Zp,C_,e,es,Fl,Oc,xo,s,0,-0,0)}}break}while(!0);Qs(t)}function Q2(t,e,n,r,i,s,a,l,c,d,f,p,m,y){if(t.timeoutHandle=-1,p=e.subtreeFlags,(p&8192||(p&16785408)===16785408)&&(Vf={stylesheets:null,count:0,unsuspend:YU},aN(e),p=XU(),p!==null)){t.cancelPendingCommit=p(J2.bind(null,t,e,s,n,r,i,a,l,c,f,1,m,y)),Eo(t,s,a,!d);return}J2(t,e,s,n,r,i,a,l,c)}function fU(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ni(s(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Eo(t,e,n,r){e&=~Rb,e&=~Fl,t.suspendedLanes|=e,t.pingedLanes&=~e,r&&(t.warmLanes|=e),r=t.expirationTimes;for(var i=e;0<i;){var s=31-Ai(i),a=1<<s;r[s]=-1,i&=~a}n!==0&&_R(t,n,e)}function ev(){return Ft&6?!0:(dd(0),!1)}function Nb(){if(ht!==null){if(zt===0)var t=ht.return;else t=ht,xa=uu=null,pb(t),vc=null,jf=0,t=ht;for(;t!==null;)YC(t.alternate,t),t=t.return;ht=null}}function kc(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,IU(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Nb(),nn=t,ht=n=Sa(t.current,null),xt=e,zt=0,yi=null,xo=!1,Qc=nd(t,e),Sb=!1,Oc=es=Rb=Fl=Ho=Rn=0,ei=_f=null,C_=!1,e&8&&(e|=e&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=e;0<r;){var i=31-Ai(r),s=1<<i;e|=t[i],r&=~s}return Oa=e,Wg(),n}function dN(t,e){rt=null,Fe.H=Gp,e===ud||e===Kg?(e=N2(),zt=3):e===QR?(e=N2(),zt=4):zt=e===BC?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,yi=e,ht===null&&(Rn=1,Wp(t,Zi(e,t.current)))}function mN(){var t=Fe.H;return Fe.H=Gp,t===null?Gp:t}function pN(){var t=Fe.A;return Fe.A=cU,t}function O_(){Rn=4,xo||(xt&4194048)!==xt&&is.current!==null||(Qc=!0),!(Ho&134217727)&&!(Fl&134217727)||nn===null||Eo(nn,xt,es,!1)}function py(t,e,n){var r=Ft;Ft|=2;var i=mN(),s=pN();(nn!==t||xt!==e)&&(Zp=null,kc(t,e)),e=!1;var a=Rn;e:do try{if(zt!==0&&ht!==null){var l=ht,c=yi;switch(zt){case 8:Nb(),a=6;break e;case 3:case 2:case 9:case 6:is.current===null&&(e=!0);var d=zt;if(zt=0,yi=null,ac(t,l,c,d),n&&Qc){a=0;break e}break;default:d=zt,zt=0,yi=null,ac(t,l,c,d)}}dU(),a=Rn;break}catch(f){dN(t,f)}while(!0);return e&&t.shellSuspendCounter++,xa=uu=null,Ft=r,Fe.H=i,Fe.A=s,ht===null&&(nn=null,xt=0,Wg()),a}function dU(){for(;ht!==null;)gN(ht)}function mU(t,e){var n=Ft;Ft|=2;var r=mN(),i=pN();nn!==t||xt!==e?(Zp=null,Qp=Vs()+500,kc(t,e)):Qc=nd(t,e);e:do try{if(zt!==0&&ht!==null){e=ht;var s=yi;t:switch(zt){case 1:zt=0,yi=null,ac(t,e,s,1);break;case 2:case 9:if(C2(s)){zt=0,yi=null,Z2(e);break}e=function(){zt!==2&&zt!==9||nn!==t||(zt=7),Qs(t)},s.then(e,e);break e;case 3:zt=7;break e;case 4:zt=5;break e;case 7:C2(s)?(zt=0,yi=null,Z2(e)):(zt=0,yi=null,ac(t,e,s,7));break;case 5:var a=null;switch(ht.tag){case 26:a=ht.memoizedState;case 5:case 27:var l=ht;if(!a||LN(a)){zt=0,yi=null;var c=l.sibling;if(c!==null)ht=c;else{var d=l.return;d!==null?(ht=d,tv(d)):ht=null}break t}}zt=0,yi=null,ac(t,e,s,5);break;case 6:zt=0,yi=null,ac(t,e,s,6);break;case 8:Nb(),Rn=6;break e;default:throw Error(me(462))}}pU();break}catch(f){dN(t,f)}while(!0);return xa=uu=null,Fe.H=r,Fe.A=i,Ft=n,ht!==null?0:(nn=null,xt=0,Wg(),Rn)}function pU(){for(;ht!==null&&!Pj();)gN(ht)}function gN(t){var e=$C(t.alternate,t,Oa);t.memoizedProps=t.pendingProps,e===null?tv(t):ht=e}function Z2(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=G2(n,e,e.pendingProps,e.type,void 0,xt);break;case 11:e=G2(n,e,e.pendingProps,e.type.render,e.ref,xt);break;case 5:pb(e);default:YC(n,e),e=ht=YR(e,Oa),e=$C(n,e,Oa)}t.memoizedProps=t.pendingProps,e===null?tv(t):ht=e}function ac(t,e,n,r){xa=uu=null,pb(e),vc=null,jf=0;var i=e.return;try{if(iU(t,i,e,n,xt)){Rn=1,Wp(t,Zi(n,t.current)),ht=null;return}}catch(s){if(i!==null)throw ht=i,s;Rn=1,Wp(t,Zi(n,t.current)),ht=null;return}e.flags&32768?(It||r===1?t=!0:Qc||xt&536870912?t=!1:(xo=t=!0,(r===2||r===9||r===3||r===6)&&(r=is.current,r!==null&&r.tag===13&&(r.flags|=16384))),vN(e,t)):tv(e)}function tv(t){var e=t;do{if(e.flags&32768){vN(e,xo);return}t=e.return;var n=aU(e.alternate,e,Oa);if(n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);Rn===0&&(Rn=5)}function vN(t,e){do{var n=oU(t.alternate,t);if(n!==null){n.flags&=32767,ht=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ht=t;return}ht=t=n}while(t!==null);Rn=6,ht=null}function J2(t,e,n,r,i,s,a,l,c){t.cancelPendingCommit=null;do nv();while(_r!==0);if(Ft&6)throw Error(me(327));if(e!==null){if(e===t.current)throw Error(me(177));if(s=e.lanes|e.childLanes,s|=nb,Yj(t,n,s,a,l,c),t===nn&&(ht=nn=null,xt=0),Mc=e,Oo=t,yc=n,N_=s,I_=i,cN=r,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,_U(Lp,function(){return xN(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(e.flags&13878)!==0,e.subtreeFlags&13878||r){r=Fe.T,Fe.T=null,i=Dt.p,Dt.p=2,a=Ft,Ft|=4;try{lU(t,e,n)}finally{Ft=a,Dt.p=i,Fe.T=r}}_r=1,yN(),_N(),bN()}}function yN(){if(_r===1){_r=0;var t=Oo,e=Mc,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=Fe.T,Fe.T=null;var r=Dt.p;Dt.p=2;var i=Ft;Ft|=4;try{rN(e,t);var s=j_,a=VR(t.containerInfo),l=s.focusedElem,c=s.selectionRange;if(a!==l&&l&&l.ownerDocument&&UR(l.ownerDocument.documentElement,l)){if(c!==null&&tb(l)){var d=c.start,f=c.end;if(f===void 0&&(f=d),"selectionStart"in l)l.selectionStart=d,l.selectionEnd=Math.min(f,l.value.length);else{var p=l.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var y=m.getSelection(),E=l.textContent.length,C=Math.min(c.start,E),I=c.end===void 0?C:Math.min(c.end,E);!y.extend&&C>I&&(a=I,I=C,C=a);var A=b2(l,C),N=b2(l,I);if(A&&N&&(y.rangeCount!==1||y.anchorNode!==A.node||y.anchorOffset!==A.offset||y.focusNode!==N.node||y.focusOffset!==N.offset)){var M=p.createRange();M.setStart(A.node,A.offset),y.removeAllRanges(),C>I?(y.addRange(M),y.extend(N.node,N.offset)):(M.setEnd(N.node,N.offset),y.addRange(M))}}}}for(p=[],y=l;y=y.parentNode;)y.nodeType===1&&p.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<p.length;l++){var P=p[l];P.element.scrollLeft=P.left,P.element.scrollTop=P.top}}ag=!!L_,j_=L_=null}finally{Ft=i,Dt.p=r,Fe.T=n}}t.current=e,_r=2}}function _N(){if(_r===2){_r=0;var t=Oo,e=Mc,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=Fe.T,Fe.T=null;var r=Dt.p;Dt.p=2;var i=Ft;Ft|=4;try{JC(t,e.alternate,e)}finally{Ft=i,Dt.p=r,Fe.T=n}}_r=3}}function bN(){if(_r===4||_r===3){_r=0,Uj();var t=Oo,e=Mc,n=yc,r=cN;e.subtreeFlags&10256||e.flags&10256?_r=5:(_r=0,Mc=Oo=null,wN(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(Do=null),W1(n),e=e.stateNode,Ti&&typeof Ti.onCommitFiberRoot=="function")try{Ti.onCommitFiberRoot(td,e,void 0,(e.current.flags&128)===128)}catch{}if(r!==null){e=Fe.T,i=Dt.p,Dt.p=2,Fe.T=null;try{for(var s=t.onRecoverableError,a=0;a<r.length;a++){var l=r[a];s(l.value,{componentStack:l.stack})}}finally{Fe.T=e,Dt.p=i}}yc&3&&nv(),Qs(t),i=t.pendingLanes,n&4194090&&i&42?t===D_?bf++:(bf=0,D_=t):bf=0,dd(0)}}function wN(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,ld(e)))}function nv(t){return yN(),_N(),bN(),xN()}function xN(){if(_r!==5)return!1;var t=Oo,e=N_;N_=0;var n=W1(yc),r=Fe.T,i=Dt.p;try{Dt.p=32>n?32:n,Fe.T=null,n=I_,I_=null;var s=Oo,a=yc;if(_r=0,Mc=Oo=null,yc=0,Ft&6)throw Error(me(331));var l=Ft;if(Ft|=4,lN(s.current),sN(s,s.current,a,n),Ft=l,dd(0,!1),Ti&&typeof Ti.onPostCommitFiberRoot=="function")try{Ti.onPostCommitFiberRoot(td,s)}catch{}return!0}finally{Dt.p=i,Fe.T=r,wN(t,e)}}function eT(t,e,n){e=Zi(n,e),e=T_(t.stateNode,e,2),t=Io(t,e,2),t!==null&&(rd(t,2),Qs(t))}function Jt(t,e,n){if(t.tag===3)eT(t,t,n);else for(;e!==null;){if(e.tag===3){eT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Do===null||!Do.has(r))){t=Zi(n,t),n=VC(2),r=Io(e,n,2),r!==null&&(zC(n,r,e,t),rd(r,2),Qs(r));break}}e=e.return}}function gy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hU;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(Sb=!0,i.add(n),t=gU.bind(null,t,e,n),e.then(t,t))}function gU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,nn===t&&(xt&n)===n&&(Rn===4||Rn===3&&(xt&62914560)===xt&&300>Vs()-Cb?!(Ft&2)&&kc(t,0):Rb|=n,Oc===xt&&(Oc=0)),Qs(t)}function EN(t,e){e===0&&(e=yR()),t=Kc(t,e),t!==null&&(rd(t,e),Qs(t))}function vU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),EN(t,n)}function yU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(me(314))}r!==null&&r.delete(e),EN(t,n)}function _U(t,e){return $1(t,e)}var Jp=null,qu=null,M_=!1,eg=!1,vy=!1,Hl=0;function Qs(t){t!==qu&&t.next===null&&(qu===null?Jp=qu=t:qu=qu.next=t),eg=!0,M_||(M_=!0,wU())}function dd(t,e){if(!vy&&eg){vy=!0;do for(var n=!1,r=Jp;r!==null;){if(t!==0){var i=r.pendingLanes;if(i===0)var s=0;else{var a=r.suspendedLanes,l=r.pingedLanes;s=(1<<31-Ai(42|t)+1)-1,s&=i&~(a&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,tT(r,s))}else s=xt,s=qg(r,r===nn?s:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(s&3)||nd(r,s)||(n=!0,tT(r,s));r=r.next}while(n);vy=!1}}function bU(){TN()}function TN(){eg=M_=!1;var t=0;Hl!==0&&(NU()&&(t=Hl),Hl=0);for(var e=Vs(),n=null,r=Jp;r!==null;){var i=r.next,s=AN(r,e);s===0?(r.next=null,n===null?Jp=i:n.next=i,i===null&&(qu=n)):(n=r,(t!==0||s&3)&&(eg=!0)),r=i}dd(t)}function AN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-Ai(s),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=$j(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}if(e=nn,n=xt,n=qg(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,n===0||t===e&&(zt===2||zt===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&H0(r),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||nd(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(r!==null&&H0(r),W1(n)){case 2:case 8:n=pR;break;case 32:n=Lp;break;case 268435456:n=gR;break;default:n=Lp}return r=SN.bind(null,t),n=$1(n,r),t.callbackPriority=e,t.callbackNode=n,e}return r!==null&&r!==null&&H0(r),t.callbackPriority=2,t.callbackNode=null,2}function SN(t,e){if(_r!==0&&_r!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(nv()&&t.callbackNode!==n)return null;var r=xt;return r=qg(t,t===nn?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(fN(t,r,e),AN(t,Vs()),t.callbackNode!=null&&t.callbackNode===n?SN.bind(null,t):null)}function tT(t,e){if(nv())return null;fN(t,e,!0)}function wU(){DU(function(){Ft&6?$1(mR,bU):TN()})}function Ib(){return Hl===0&&(Hl=vR()),Hl}function nT(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:lp(""+t)}function rT(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function xU(t,e,n,r,i){if(e==="submit"&&n&&n.stateNode===i){var s=nT((i[ai]||null).action),a=r.submitter;a&&(e=(e=a[ai]||null)?nT(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var l=new Gg("action","action",null,r,i);t.push({event:l,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Hl!==0){var c=a?rT(i,a):new FormData(i);x_(n,{pending:!0,data:c,method:i.method,action:s},null,c)}}else typeof s=="function"&&(l.preventDefault(),c=a?rT(i,a):new FormData(i),x_(n,{pending:!0,data:c,method:i.method,action:s},s,c))},currentTarget:i}]})}}for(var yy=0;yy<c_.length;yy++){var _y=c_[yy],EU=_y.toLowerCase(),TU=_y[0].toUpperCase()+_y.slice(1);As(EU,"on"+TU)}As(BR,"onAnimationEnd");As(FR,"onAnimationIteration");As(HR,"onAnimationStart");As("dblclick","onDoubleClick");As("focusin","onFocus");As("focusout","onBlur");As(BP,"onTransitionRun");As(FP,"onTransitionStart");As(HP,"onTransitionCancel");As(qR,"onTransitionEnd");Sc("onMouseEnter",["mouseout","mouseover"]);Sc("onMouseLeave",["mouseout","mouseover"]);Sc("onPointerEnter",["pointerout","pointerover"]);Sc("onPointerLeave",["pointerout","pointerover"]);au("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));au("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));au("onBeforeInput",["compositionend","keypress","textInput","paste"]);au("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));au("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));au("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pf));function RN(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;s=l,i.currentTarget=d;try{s(i)}catch(f){Yp(f)}i.currentTarget=null,s=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;s=l,i.currentTarget=d;try{s(i)}catch(f){Yp(f)}i.currentTarget=null,s=c}}}}function ct(t,e){var n=e[r_];n===void 0&&(n=e[r_]=new Set);var r=t+"__bubble";n.has(r)||(CN(e,t,2,!1),n.add(r))}function by(t,e,n){var r=0;e&&(r|=4),CN(n,t,r,e)}var qm="_reactListening"+Math.random().toString(36).slice(2);function Db(t){if(!t[qm]){t[qm]=!0,xR.forEach(function(n){n!=="selectionchange"&&(AU.has(n)||by(n,!1,t),by(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qm]||(e[qm]=!0,by("selectionchange",!1,e))}}function CN(t,e,n,r){switch(zN(e)){case 2:var i=ZU;break;case 8:i=JU;break;default:i=Lb}n=i.bind(null,e,n,t),i=void 0,!o_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wy(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&a.stateNode.containerInfo===i)return;a=a.return}for(;l!==null;){if(a=Qu(l),a===null)return;if(c=a.tag,c===5||c===6||c===26||c===27){r=s=a;continue e}l=l.parentNode}}r=r.return}IR(function(){var d=s,f=Q1(n),p=[];e:{var m=GR.get(t);if(m!==void 0){var y=Gg,E=t;switch(t){case"keypress":if(cp(n)===0)break e;case"keydown":case"keyup":y=_P;break;case"focusin":E="focus",y=Q0;break;case"focusout":E="blur",y=Q0;break;case"beforeblur":case"afterblur":y=Q0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=c2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=oP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=xP;break;case BR:case FR:case HR:y=cP;break;case qR:y=TP;break;case"scroll":case"scrollend":y=sP;break;case"wheel":y=SP;break;case"copy":case"cut":case"paste":y=fP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=f2;break;case"toggle":case"beforetoggle":y=CP}var C=(e&4)!==0,I=!C&&(t==="scroll"||t==="scrollend"),A=C?m!==null?m+"Capture":null:m;C=[];for(var N=d,M;N!==null;){var P=N;if(M=P.stateNode,P=P.tag,P!==5&&P!==26&&P!==27||M===null||A===null||(P=Df(N,A),P!=null&&C.push(Uf(N,P,M))),I)break;N=N.return}0<C.length&&(m=new y(m,E,null,n,f),p.push({event:m,listeners:C}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==a_&&(E=n.relatedTarget||n.fromElement)&&(Qu(E)||E[Wc]))break e;if((y||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,y?(E=n.relatedTarget||n.toElement,y=d,E=E?Qu(E):null,E!==null&&(I=ed(E),C=E.tag,E!==I||C!==5&&C!==27&&C!==6)&&(E=null)):(y=null,E=d),y!==E)){if(C=c2,P="onMouseLeave",A="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(C=f2,P="onPointerLeave",A="onPointerEnter",N="pointer"),I=y==null?m:Jh(y),M=E==null?m:Jh(E),m=new C(P,N+"leave",y,n,f),m.target=I,m.relatedTarget=M,P=null,Qu(f)===d&&(C=new C(A,N+"enter",E,n,f),C.target=M,C.relatedTarget=I,P=C),I=P,y&&E)t:{for(C=y,A=E,N=0,M=C;M;M=Pu(M))N++;for(M=0,P=A;P;P=Pu(P))M++;for(;0<N-M;)C=Pu(C),N--;for(;0<M-N;)A=Pu(A),M--;for(;N--;){if(C===A||A!==null&&C===A.alternate)break t;C=Pu(C),A=Pu(A)}C=null}else C=null;y!==null&&iT(p,m,y,C,!1),E!==null&&I!==null&&iT(p,I,E,C,!0)}}e:{if(m=d?Jh(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var q=g2;else if(p2(m))if(jR)q=UP;else{q=jP;var L=LP}else y=m.nodeName,!y||y.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?d&&K1(d.elementType)&&(q=g2):q=PP;if(q&&(q=q(t,d))){LR(p,q,n,f);break e}L&&L(t,m,d),t==="focusout"&&d&&m.type==="number"&&d.memoizedProps.value!=null&&s_(m,"number",m.value)}switch(L=d?Jh(d):window,t){case"focusin":(p2(L)||L.contentEditable==="true")&&(ec=L,l_=d,cf=null);break;case"focusout":cf=l_=ec=null;break;case"mousedown":u_=!0;break;case"contextmenu":case"mouseup":case"dragend":u_=!1,w2(p,n,f);break;case"selectionchange":if(zP)break;case"keydown":case"keyup":w2(p,n,f)}var T;if(eb)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ju?MR(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(OR&&n.locale!=="ko"&&(Ju||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ju&&(T=DR()):(wo=f,Z1="value"in wo?wo.value:wo.textContent,Ju=!0)),L=tg(d,_),0<L.length&&(_=new h2(_,t,null,n,f),p.push({event:_,listeners:L}),T?_.data=T:(T=kR(n),T!==null&&(_.data=T)))),(T=IP?DP(t,n):OP(t,n))&&(_=tg(d,"onBeforeInput"),0<_.length&&(L=new h2("onBeforeInput","beforeinput",null,n,f),p.push({event:L,listeners:_}),L.data=T)),xU(p,t,d,n,f)}RN(p,e)})}function Uf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tg(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||s===null||(i=Df(t,n),i!=null&&r.unshift(Uf(t,i,s)),i=Df(t,e),i!=null&&r.push(Uf(t,i,s))),t.tag===3)return r;t=t.return}return[]}function Pu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function iT(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(l=l.tag,c!==null&&c===r)break;l!==5&&l!==26&&l!==27||d===null||(c=d,i?(d=Df(n,s),d!=null&&a.unshift(Uf(n,d,c))):i||(d=Df(n,s),d!=null&&a.push(Uf(n,d,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var SU=/\r\n?/g,RU=/\u0000|\uFFFD/g;function sT(t){return(typeof t=="string"?t:""+t).replace(SU,`
`).replace(RU,"")}function NN(t,e){return e=sT(e),sT(t)===e}function rv(){}function $t(t,e,n,r,i,s){switch(n){case"children":typeof r=="string"?e==="body"||e==="textarea"&&r===""||Rc(t,r):(typeof r=="number"||typeof r=="bigint")&&e!=="body"&&Rc(t,""+r);break;case"className":Pm(t,"class",r);break;case"tabIndex":Pm(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Pm(t,n,r);break;case"style":NR(t,r,s);break;case"data":if(e!=="object"){Pm(t,"data",r);break}case"src":case"href":if(r===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=lp(""+r),t.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&$t(t,e,"name",i.name,i,null),$t(t,e,"formEncType",i.formEncType,i,null),$t(t,e,"formMethod",i.formMethod,i,null),$t(t,e,"formTarget",i.formTarget,i,null)):($t(t,e,"encType",i.encType,i,null),$t(t,e,"method",i.method,i,null),$t(t,e,"target",i.target,i,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=lp(""+r),t.setAttribute(n,r);break;case"onClick":r!=null&&(t.onclick=rv);break;case"onScroll":r!=null&&ct("scroll",t);break;case"onScrollEnd":r!=null&&ct("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(me(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(me(60));t.innerHTML=n}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}n=lp(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""+r):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":r===!0?t.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,r):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(n,r):t.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(n):t.setAttribute(n,r);break;case"popover":ct("beforetoggle",t),ct("toggle",t),op(t,"popover",r);break;case"xlinkActuate":ma(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ma(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ma(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ma(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ma(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ma(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ma(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ma(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ma(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":op(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=rP.get(n)||n,op(t,n,r))}}function k_(t,e,n,r,i,s){switch(n){case"style":NR(t,r,s);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(me(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(me(60));t.innerHTML=n}}break;case"children":typeof r=="string"?Rc(t,r):(typeof r=="number"||typeof r=="bigint")&&Rc(t,""+r);break;case"onScroll":r!=null&&ct("scroll",t);break;case"onScrollEnd":r!=null&&ct("scrollend",t);break;case"onClick":r!=null&&(t.onclick=rv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ER.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),s=t[ai]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,i),typeof r=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,r,i);break e}n in t?t[n]=r:r===!0?t.setAttribute(n,""):op(t,n,r)}}}function wr(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",t),ct("load",t);var r=!1,i=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":r=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(me(137,e));default:$t(t,e,s,a,n,null)}}i&&$t(t,e,"srcSet",n.srcSet,n,null),r&&$t(t,e,"src",n.src,n,null);return;case"input":ct("invalid",t);var l=s=a=i=null,c=null,d=null;for(r in n)if(n.hasOwnProperty(r)){var f=n[r];if(f!=null)switch(r){case"name":i=f;break;case"type":a=f;break;case"checked":c=f;break;case"defaultChecked":d=f;break;case"value":s=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(me(137,e));break;default:$t(t,e,r,f,n,null)}}SR(t,s,l,c,d,a,i,!1),jp(t);return;case"select":ct("invalid",t),r=a=s=null;for(i in n)if(n.hasOwnProperty(i)&&(l=n[i],l!=null))switch(i){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":r=l;default:$t(t,e,i,l,n,null)}e=s,n=a,t.multiple=!!r,e!=null?fc(t,!!r,e,!1):n!=null&&fc(t,!!r,n,!0);return;case"textarea":ct("invalid",t),s=i=r=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":r=l;break;case"defaultValue":i=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(me(91));break;default:$t(t,e,a,l,n,null)}CR(t,r,i,s),jp(t);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(r=n[c],r!=null))switch(c){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:$t(t,e,c,r,n,null)}return;case"dialog":ct("beforetoggle",t),ct("toggle",t),ct("cancel",t),ct("close",t);break;case"iframe":case"object":ct("load",t);break;case"video":case"audio":for(r=0;r<Pf.length;r++)ct(Pf[r],t);break;case"image":ct("error",t),ct("load",t);break;case"details":ct("toggle",t);break;case"embed":case"source":case"link":ct("error",t),ct("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(r=n[d],r!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(me(137,e));default:$t(t,e,d,r,n,null)}return;default:if(K1(e)){for(f in n)n.hasOwnProperty(f)&&(r=n[f],r!==void 0&&k_(t,e,f,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(r=n[l],r!=null&&$t(t,e,l,r,n,null))}function CU(t,e,n,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,c=null,d=null,f=null;for(y in n){var p=n[y];if(n.hasOwnProperty(y)&&p!=null)switch(y){case"checked":break;case"value":break;case"defaultValue":c=p;default:r.hasOwnProperty(y)||$t(t,e,y,null,r,p)}}for(var m in r){var y=r[m];if(p=n[m],r.hasOwnProperty(m)&&(y!=null||p!=null))switch(m){case"type":s=y;break;case"name":i=y;break;case"checked":d=y;break;case"defaultChecked":f=y;break;case"value":a=y;break;case"defaultValue":l=y;break;case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(me(137,e));break;default:y!==p&&$t(t,e,m,y,r,p)}}i_(t,a,l,c,d,f,s,i);return;case"select":y=a=l=m=null;for(s in n)if(c=n[s],n.hasOwnProperty(s)&&c!=null)switch(s){case"value":break;case"multiple":y=c;default:r.hasOwnProperty(s)||$t(t,e,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(s!=null||c!=null))switch(i){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==c&&$t(t,e,i,s,r,c)}e=l,n=a,r=y,m!=null?fc(t,!!n,m,!1):!!r!=!!n&&(e!=null?fc(t,!!n,e,!0):fc(t,!!n,n?[]:"",!1));return;case"textarea":y=m=null;for(l in n)if(i=n[l],n.hasOwnProperty(l)&&i!=null&&!r.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:$t(t,e,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(i!=null||s!=null))switch(a){case"value":m=i;break;case"defaultValue":y=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(me(91));break;default:i!==s&&$t(t,e,a,i,r,s)}RR(t,m,y);return;case"option":for(var E in n)if(m=n[E],n.hasOwnProperty(E)&&m!=null&&!r.hasOwnProperty(E))switch(E){case"selected":t.selected=!1;break;default:$t(t,e,E,null,r,m)}for(c in r)if(m=r[c],y=n[c],r.hasOwnProperty(c)&&m!==y&&(m!=null||y!=null))switch(c){case"selected":t.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:$t(t,e,c,m,r,y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var C in n)m=n[C],n.hasOwnProperty(C)&&m!=null&&!r.hasOwnProperty(C)&&$t(t,e,C,null,r,m);for(d in r)if(m=r[d],y=n[d],r.hasOwnProperty(d)&&m!==y&&(m!=null||y!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(me(137,e));break;default:$t(t,e,d,m,r,y)}return;default:if(K1(e)){for(var I in n)m=n[I],n.hasOwnProperty(I)&&m!==void 0&&!r.hasOwnProperty(I)&&k_(t,e,I,void 0,r,m);for(f in r)m=r[f],y=n[f],!r.hasOwnProperty(f)||m===y||m===void 0&&y===void 0||k_(t,e,f,m,r,y);return}}for(var A in n)m=n[A],n.hasOwnProperty(A)&&m!=null&&!r.hasOwnProperty(A)&&$t(t,e,A,null,r,m);for(p in r)m=r[p],y=n[p],!r.hasOwnProperty(p)||m===y||m==null&&y==null||$t(t,e,p,m,r,y)}var L_=null,j_=null;function ng(t){return t.nodeType===9?t:t.ownerDocument}function aT(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function IN(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function P_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xy=null;function NU(){var t=window.event;return t&&t.type==="popstate"?t===xy?!1:(xy=t,!0):(xy=null,!1)}var DN=typeof setTimeout=="function"?setTimeout:void 0,IU=typeof clearTimeout=="function"?clearTimeout:void 0,oT=typeof Promise=="function"?Promise:void 0,DU=typeof queueMicrotask=="function"?queueMicrotask:typeof oT<"u"?function(t){return oT.resolve(null).then(t).catch(OU)}:DN;function OU(t){setTimeout(function(){throw t})}function el(t){return t==="head"}function lT(t,e){var n=e,r=0,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<r&&8>r){n=r;var a=t.ownerDocument;if(n&1&&wf(a.documentElement),n&2&&wf(a.body),n&4)for(n=a.head,wf(n),a=n.firstChild;a;){var l=a.nextSibling,c=a.nodeName;a[id]||c==="SCRIPT"||c==="STYLE"||c==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=l}}if(i===0){t.removeChild(s),Hf(e);return}i--}else n==="$"||n==="$?"||n==="$!"?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);Hf(e)}function U_(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":U_(n),X1(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function MU(t,e,n,r){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[id])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=xs(t.nextSibling),t===null)break}return null}function kU(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=xs(t.nextSibling),t===null))return null;return t}function V_(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function LU(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var r=function(){e(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function xs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var z_=null;function uT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function ON(t,e,n){switch(e=ng(n),t){case"html":if(t=e.documentElement,!t)throw Error(me(452));return t;case"head":if(t=e.head,!t)throw Error(me(453));return t;case"body":if(t=e.body,!t)throw Error(me(454));return t;default:throw Error(me(451))}}function wf(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);X1(t)}var ss=new Map,cT=new Set;function rg(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Va=Dt.d;Dt.d={f:jU,r:PU,D:UU,C:VU,L:zU,m:BU,X:HU,S:FU,M:qU};function jU(){var t=Va.f(),e=ev();return t||e}function PU(t){var e=Xc(t);e!==null&&e.tag===5&&e.type==="form"?AC(e):Va.r(t)}var Zc=typeof document>"u"?null:document;function MN(t,e,n){var r=Zc;if(r&&typeof e=="string"&&e){var i=Qi(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),cT.has(i)||(cT.add(i),t={rel:t,crossOrigin:n,href:e},r.querySelector(i)===null&&(e=r.createElement("link"),wr(e,"link",t),hr(e),r.head.appendChild(e)))}}function UU(t){Va.D(t),MN("dns-prefetch",t,null)}function VU(t,e){Va.C(t,e),MN("preconnect",t,e)}function zU(t,e,n){Va.L(t,e,n);var r=Zc;if(r&&t&&e){var i='link[rel="preload"][as="'+Qi(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+Qi(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+Qi(n.imageSizes)+'"]')):i+='[href="'+Qi(t)+'"]';var s=i;switch(e){case"style":s=Lc(t);break;case"script":s=Jc(t)}ss.has(s)||(t=ln({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),ss.set(s,t),r.querySelector(i)!==null||e==="style"&&r.querySelector(md(s))||e==="script"&&r.querySelector(pd(s))||(e=r.createElement("link"),wr(e,"link",t),hr(e),r.head.appendChild(e)))}}function BU(t,e){Va.m(t,e);var n=Zc;if(n&&t){var r=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+Qi(r)+'"][href="'+Qi(t)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Jc(t)}if(!ss.has(s)&&(t=ln({rel:"modulepreload",href:t},e),ss.set(s,t),n.querySelector(i)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(pd(s)))return}r=n.createElement("link"),wr(r,"link",t),hr(r),n.head.appendChild(r)}}}function FU(t,e,n){Va.S(t,e,n);var r=Zc;if(r&&t){var i=hc(r).hoistableStyles,s=Lc(t);e=e||"default";var a=i.get(s);if(!a){var l={loading:0,preload:null};if(a=r.querySelector(md(s)))l.loading=5;else{t=ln({rel:"stylesheet",href:t,"data-precedence":e},n),(n=ss.get(s))&&Ob(t,n);var c=a=r.createElement("link");hr(c),wr(c,"link",t),c._p=new Promise(function(d,f){c.onload=d,c.onerror=f}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,vp(a,e,r)}a={type:"stylesheet",instance:a,count:1,state:l},i.set(s,a)}}}function HU(t,e){Va.X(t,e);var n=Zc;if(n&&t){var r=hc(n).hoistableScripts,i=Jc(t),s=r.get(i);s||(s=n.querySelector(pd(i)),s||(t=ln({src:t,async:!0},e),(e=ss.get(i))&&Mb(t,e),s=n.createElement("script"),hr(s),wr(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}function qU(t,e){Va.M(t,e);var n=Zc;if(n&&t){var r=hc(n).hoistableScripts,i=Jc(t),s=r.get(i);s||(s=n.querySelector(pd(i)),s||(t=ln({src:t,async:!0,type:"module"},e),(e=ss.get(i))&&Mb(t,e),s=n.createElement("script"),hr(s),wr(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}function hT(t,e,n,r){var i=(i=Co.current)?rg(i):null;if(!i)throw Error(me(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Lc(n.href),n=hc(i).hoistableStyles,r=n.get(e),r||(r={type:"style",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Lc(n.href);var s=hc(i).hoistableStyles,a=s.get(t);if(a||(i=i.ownerDocument||i,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=i.querySelector(md(t)))&&!s._p&&(a.instance=s,a.state.loading=5),ss.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ss.set(t,n),s||GU(i,t,n,a.state))),e&&r===null)throw Error(me(528,""));return a}if(e&&r!==null)throw Error(me(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Jc(n),n=hc(i).hoistableScripts,r=n.get(e),r||(r={type:"script",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(me(444,t))}}function Lc(t){return'href="'+Qi(t)+'"'}function md(t){return'link[rel="stylesheet"]['+t+"]"}function kN(t){return ln({},t,{"data-precedence":t.precedence,precedence:null})}function GU(t,e,n,r){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?r.loading=1:(e=t.createElement("link"),r.preload=e,e.addEventListener("load",function(){return r.loading|=1}),e.addEventListener("error",function(){return r.loading|=2}),wr(e,"link",n),hr(e),t.head.appendChild(e))}function Jc(t){return'[src="'+Qi(t)+'"]'}function pd(t){return"script[async]"+t}function fT(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var r=t.querySelector('style[data-href~="'+Qi(n.href)+'"]');if(r)return e.instance=r,hr(r),r;var i=ln({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),hr(r),wr(r,"style",i),vp(r,n.precedence,t),e.instance=r;case"stylesheet":i=Lc(n.href);var s=t.querySelector(md(i));if(s)return e.state.loading|=4,e.instance=s,hr(s),s;r=kN(n),(i=ss.get(i))&&Ob(r,i),s=(t.ownerDocument||t).createElement("link"),hr(s);var a=s;return a._p=new Promise(function(l,c){a.onload=l,a.onerror=c}),wr(s,"link",r),e.state.loading|=4,vp(s,n.precedence,t),e.instance=s;case"script":return s=Jc(n.src),(i=t.querySelector(pd(s)))?(e.instance=i,hr(i),i):(r=n,(i=ss.get(s))&&(r=ln({},n),Mb(r,i)),t=t.ownerDocument||t,i=t.createElement("script"),hr(i),wr(i,"link",r),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(me(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(r=e.instance,e.state.loading|=4,vp(r,n.precedence,t));return e.instance}function vp(t,e,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var l=r[a];if(l.dataset.precedence===e)s=l;else if(s!==i)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Ob(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Mb(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var yp=null;function dT(t,e,n){if(yp===null){var r=new Map,i=yp=new Map;i.set(n,r)}else i=yp,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(t))return r;for(r.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var s=n[i];if(!(s[id]||s[Dr]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var l=r.get(a);l?l.push(s):r.set(a,[s])}}return r}function mT(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function $U(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function LN(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Vf=null;function YU(){}function WU(t,e,n){if(Vf===null)throw Error(me(475));var r=Vf;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var i=Lc(n.href),s=t.querySelector(md(i));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(r.count++,r=ig.bind(r),t.then(r,r)),e.state.loading|=4,e.instance=s,hr(s);return}s=t.ownerDocument||t,n=kN(n),(i=ss.get(i))&&Ob(n,i),s=s.createElement("link"),hr(s);var a=s;a._p=new Promise(function(l,c){a.onload=l,a.onerror=c}),wr(s,"link",n),e.instance=s}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(r.count++,e=ig.bind(r),t.addEventListener("load",e),t.addEventListener("error",e))}}function XU(){if(Vf===null)throw Error(me(475));var t=Vf;return t.stylesheets&&t.count===0&&B_(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&B_(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function ig(){if(this.count--,this.count===0){if(this.stylesheets)B_(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var sg=null;function B_(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,sg=new Map,e.forEach(KU,t),sg=null,ig.call(t))}function KU(t,e){if(!(e.state.loading&4)){var n=sg.get(t);if(n)var r=n.get(null);else{n=new Map,sg.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}i=e.instance,a=i.getAttribute("data-precedence"),s=n.get(a)||r,s===r&&n.set(null,i),n.set(a,i),this.count++,r=ig.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var zf={$$typeof:_a,Provider:null,Consumer:null,_currentValue:Pl,_currentValue2:Pl,_threadCount:0};function QU(t,e,n,r,i,s,a,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=q0(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=q0(0),this.hiddenUpdates=q0(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function jN(t,e,n,r,i,s,a,l,c,d,f,p){return t=new QU(t,e,n,a,l,c,d,p),e=1,s===!0&&(e|=24),s=bi(3,null,null,e),t.current=s,s.stateNode=t,e=ob(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:e},ub(s),t}function PN(t){return t?(t=rc,t):rc}function UN(t,e,n,r,i,s){i=PN(i),r.context===null?r.context=i:r.pendingContext=i,r=No(e),r.payload={element:n},s=s===void 0?null:s,s!==null&&(r.callback=s),n=Io(t,r,e),n!==null&&(Ri(n,t,e),df(n,t,e))}function pT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kb(t,e){pT(t,e),(t=t.alternate)&&pT(t,e)}function VN(t){if(t.tag===13){var e=Kc(t,67108864);e!==null&&Ri(e,t,67108864),kb(t,67108864)}}var ag=!0;function ZU(t,e,n,r){var i=Fe.T;Fe.T=null;var s=Dt.p;try{Dt.p=2,Lb(t,e,n,r)}finally{Dt.p=s,Fe.T=i}}function JU(t,e,n,r){var i=Fe.T;Fe.T=null;var s=Dt.p;try{Dt.p=8,Lb(t,e,n,r)}finally{Dt.p=s,Fe.T=i}}function Lb(t,e,n,r){if(ag){var i=F_(r);if(i===null)wy(t,e,r,og,n),gT(t,r);else if(t9(i,t,e,n,r))r.stopPropagation();else if(gT(t,r),e&4&&-1<e9.indexOf(t)){for(;i!==null;){var s=Xc(i);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=Al(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var c=1<<31-Ai(a);l.entanglements[1]|=c,a&=~c}Qs(s),!(Ft&6)&&(Qp=Vs()+500,dd(0))}}break;case 13:l=Kc(s,2),l!==null&&Ri(l,s,2),ev(),kb(s,2)}if(s=F_(r),s===null&&wy(t,e,r,og,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else wy(t,e,r,null,n)}}function F_(t){return t=Q1(t),jb(t)}var og=null;function jb(t){if(og=null,t=Qu(t),t!==null){var e=ed(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=cR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return og=t,null}function zN(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vj()){case mR:return 2;case pR:return 8;case Lp:case zj:return 32;case gR:return 268435456;default:return 32}default:return 32}}var H_=!1,Mo=null,ko=null,Lo=null,Bf=new Map,Ff=new Map,po=[],e9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gT(t,e){switch(t){case"focusin":case"focusout":Mo=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":Lo=null;break;case"pointerover":case"pointerout":Bf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ff.delete(e.pointerId)}}function zh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Xc(e),e!==null&&VN(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function t9(t,e,n,r,i){switch(e){case"focusin":return Mo=zh(Mo,t,e,n,r,i),!0;case"dragenter":return ko=zh(ko,t,e,n,r,i),!0;case"mouseover":return Lo=zh(Lo,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Bf.set(s,zh(Bf.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ff.set(s,zh(Ff.get(s)||null,t,e,n,r,i)),!0}return!1}function BN(t){var e=Qu(t.target);if(e!==null){var n=ed(e);if(n!==null){if(e=n.tag,e===13){if(e=cR(n),e!==null){t.blockedOn=e,Wj(t.priority,function(){if(n.tag===13){var r=Si();r=Y1(r);var i=Kc(n,r);i!==null&&Ri(i,n,r),kb(n,r)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _p(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=F_(t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);a_=r,n.target.dispatchEvent(r),a_=null}else return e=Xc(n),e!==null&&VN(e),t.blockedOn=n,!1;e.shift()}return!0}function vT(t,e,n){_p(t)&&n.delete(e)}function n9(){H_=!1,Mo!==null&&_p(Mo)&&(Mo=null),ko!==null&&_p(ko)&&(ko=null),Lo!==null&&_p(Lo)&&(Lo=null),Bf.forEach(vT),Ff.forEach(vT)}function Gm(t,e){t.blockedOn===e&&(t.blockedOn=null,H_||(H_=!0,rr.unstable_scheduleCallback(rr.unstable_NormalPriority,n9)))}var $m=null;function yT(t){$m!==t&&($m=t,rr.unstable_scheduleCallback(rr.unstable_NormalPriority,function(){$m===t&&($m=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],i=t[e+2];if(typeof r!="function"){if(jb(r||n)===null)continue;break}var s=Xc(n);s!==null&&(t.splice(e,3),e-=3,x_(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Hf(t){function e(c){return Gm(c,t)}Mo!==null&&Gm(Mo,t),ko!==null&&Gm(ko,t),Lo!==null&&Gm(Lo,t),Bf.forEach(e),Ff.forEach(e);for(var n=0;n<po.length;n++){var r=po[n];r.blockedOn===t&&(r.blockedOn=null)}for(;0<po.length&&(n=po[0],n.blockedOn===null);)BN(n),n.blockedOn===null&&po.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[ai]||null;if(typeof s=="function")a||yT(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[ai]||null)l=a.formAction;else if(jb(i)!==null)continue}else l=a.action;typeof l=="function"?n[r+1]=l:(n.splice(r,3),r-=3),yT(n)}}}function Pb(t){this._internalRoot=t}iv.prototype.render=Pb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(me(409));var n=e.current,r=Si();UN(n,r,t,e,null,null)};iv.prototype.unmount=Pb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;UN(t.current,2,null,t,null,null),ev(),e[Wc]=null}};function iv(t){this._internalRoot=t}iv.prototype.unstable_scheduleHydration=function(t){if(t){var e=wR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<po.length&&e!==0&&e<po[n].priority;n++);po.splice(n,0,t),n===0&&BN(t)}};var _T=lR.version;if(_T!=="19.1.0")throw Error(me(527,_T,"19.1.0"));Dt.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(me(188)):(t=Object.keys(t).join(","),Error(me(268,t)));return t=Oj(e),t=t!==null?hR(t):null,t=t===null?null:t.stateNode,t};var r9={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Fe,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ym=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ym.isDisabled&&Ym.supportsFiber)try{td=Ym.inject(r9),Ti=Ym}catch{}}Fg.createRoot=function(t,e){if(!uR(t))throw Error(me(299));var n=!1,r="",i=jC,s=PC,a=UC,l=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(l=e.unstable_transitionCallbacks)),e=jN(t,1,!1,null,null,n,r,i,s,a,l,null),t[Wc]=e.current,Db(t),new Pb(e)};Fg.hydrateRoot=function(t,e,n){if(!uR(t))throw Error(me(299));var r=!1,i="",s=jC,a=PC,l=UC,c=null,d=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(c=n.unstable_transitionCallbacks),n.formState!==void 0&&(d=n.formState)),e=jN(t,1,!0,e,n??null,r,i,s,a,l,c,d),e.context=PN(null),n=e.current,r=Si(),r=Y1(r),i=No(r),i.callback=null,Io(n,i,r),n=r,e.current.lanes=n,rd(e,n),Qs(e),t[Wc]=e.current,Db(t),new iv(e)};Fg.version="19.1.0";function FN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FN)}catch(t){console.error(t)}}FN(),nR.exports=Fg;var i9=nR.exports;const s9=P1(i9);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mn(){return mn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mn.apply(this,arguments)}var Fn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fn||(Fn={}));const bT="popstate";function a9(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:l}=r.location;return qf("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:gd(i)}return l9(e,n,null,t)}function _t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function o9(){return Math.random().toString(36).substr(2,8)}function wT(t,e){return{usr:t.state,key:t.key,idx:e}}function qf(t,e,n,r){return n===void 0&&(n=null),mn({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?tl(e):e,{state:n,key:e&&e.key||r||o9()})}function gd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function tl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function l9(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l=Fn.Pop,c=null,d=f();d==null&&(d=0,a.replaceState(mn({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function p(){l=Fn.Pop;let I=f(),A=I==null?null:I-d;d=I,c&&c({action:l,location:C.location,delta:A})}function m(I,A){l=Fn.Push;let N=qf(C.location,I,A);d=f()+1;let M=wT(N,d),P=C.createHref(N);try{a.pushState(M,"",P)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(P)}s&&c&&c({action:l,location:C.location,delta:1})}function y(I,A){l=Fn.Replace;let N=qf(C.location,I,A);d=f();let M=wT(N,d),P=C.createHref(N);a.replaceState(M,"",P),s&&c&&c({action:l,location:C.location,delta:0})}function E(I){let A=i.location.origin!=="null"?i.location.origin:i.location.href,N=typeof I=="string"?I:gd(I);return N=N.replace(/ $/,"%20"),_t(A,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,A)}let C={get action(){return l},get location(){return t(i,a)},listen(I){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(bT,p),c=I,()=>{i.removeEventListener(bT,p),c=null}},createHref(I){return e(i,I)},createURL:E,encodeLocation(I){let A=E(I);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:m,replace:y,go(I){return a.go(I)}};return C}var Bt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Bt||(Bt={}));const u9=new Set(["lazy","caseSensitive","path","id","index","children"]);function c9(t){return t.index===!0}function lg(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let a=[...n,String(s)],l=typeof i.id=="string"?i.id:a.join("-");if(_t(i.index!==!0||!i.children,"Cannot specify children on an index route"),_t(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),c9(i)){let c=mn({},i,e(i),{id:l});return r[l]=c,c}else{let c=mn({},i,e(i),{id:l,children:void 0});return r[l]=c,i.children&&(c.children=lg(i.children,e,a,r)),c}})}function Nl(t,e,n){return n===void 0&&(n="/"),bp(t,e,n,!1)}function bp(t,e,n,r){let i=typeof e=="string"?tl(e):e,s=vd(i.pathname||"/",n);if(s==null)return null;let a=HN(t);f9(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=E9(s);l=w9(a[c],d,r)}return l}function h9(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function HN(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(_t(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=jo([r,c.relativePath]),f=n.concat(c);s.children&&s.children.length>0&&(_t(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),HN(s.children,e,f,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:_9(d,s.index),routesMeta:f})};return t.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,a);else for(let c of qN(s.path))i(s,a,c)}),e}function qN(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=qN(r.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function f9(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:b9(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const d9=/^:[\w-]+$/,m9=3,p9=2,g9=1,v9=10,y9=-2,xT=t=>t==="*";function _9(t,e){let n=t.split("/"),r=n.length;return n.some(xT)&&(r+=y9),e&&(r+=p9),n.filter(i=>!xT(i)).reduce((i,s)=>i+(d9.test(s)?m9:s===""?g9:v9),r)}function b9(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function w9(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=ET({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),m=c.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=ET({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:jo([s,p.pathname]),pathnameBase:S9(jo([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=jo([s,p.pathnameBase]))}return a}function ET(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=x9(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:m,isOptional:y}=f;if(m==="*"){let C=l[p]||"";a=s.slice(0,s.length-C.length).replace(/(.)\/+$/,"$1")}const E=l[p];return y&&!E?d[m]=void 0:d[m]=(E||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:a,pattern:t}}function x9(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),jc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function E9(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function vd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function T9(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?tl(t):t;return{pathname:n?n.startsWith("/")?n:A9(n,e):e,search:R9(r),hash:C9(i)}}function A9(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ey(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $N(t,e){let n=GN(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function YN(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=tl(t):(i=mn({},t),_t(!i.pathname||!i.pathname.includes("?"),Ey("?","pathname","search",i)),_t(!i.pathname||!i.pathname.includes("#"),Ey("#","pathname","hash",i)),_t(!i.search||!i.search.includes("#"),Ey("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}l=p>=0?e[p]:"/"}let c=T9(i,l),d=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const jo=t=>t.join("/").replace(/\/\/+/g,"/"),S9=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),R9=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,C9=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class ug{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Pc(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const WN=["post","put","patch","delete"],N9=new Set(WN),I9=["get",...WN],D9=new Set(I9),O9=new Set([301,302,303,307,308]),M9=new Set([307,308]),Ty={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},k9={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Bh={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Ub=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,L9=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),XN="remix-router-transitions";function j9(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;_t(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let $=t.detectErrorBoundary;i=te=>({hasErrorBoundary:$(te)})}else i=L9;let s={},a=lg(t.routes,i,void 0,s),l,c=t.basename||"/",d=t.dataStrategy||z9,f=t.patchRoutesOnNavigation,p=mn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),m=null,y=new Set,E=null,C=null,I=null,A=t.hydrationData!=null,N=Nl(a,t.history.location,c),M=!1,P=null;if(N==null&&!f){let $=Zr(404,{pathname:t.history.location.pathname}),{matches:te,route:ie}=kT(a);N=te,P={[ie.id]:$}}N&&!t.hydrationData&&sr(N,a,t.history.location.pathname).active&&(N=null);let q;if(N)if(N.some($=>$.route.lazy))q=!1;else if(!N.some($=>$.route.loader))q=!0;else if(p.v7_partialHydration){let $=t.hydrationData?t.hydrationData.loaderData:null,te=t.hydrationData?t.hydrationData.errors:null;if(te){let ie=N.findIndex(ge=>te[ge.route.id]!==void 0);q=N.slice(0,ie+1).every(ge=>!G_(ge.route,$,te))}else q=N.every(ie=>!G_(ie.route,$,te))}else q=t.hydrationData!=null;else if(q=!1,N=[],p.v7_partialHydration){let $=sr(null,a,t.history.location.pathname);$.active&&$.matches&&(M=!0,N=$.matches)}let L,T={historyAction:t.history.action,location:t.history.location,matches:N,initialized:q,navigation:Ty,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||P,fetchers:new Map,blockers:new Map},_=Fn.Pop,x=!1,S,k=!1,j=new Map,O=null,G=!1,J=!1,z=[],U=new Set,Q=new Map,ee=0,ae=-1,be=new Map,pe=new Set,ye=new Map,W=new Map,X=new Set,ce=new Map,Oe=new Map,ke;function $e(){if(m=t.history.listen($=>{let{action:te,location:ie,delta:ge}=$;if(ke){ke(),ke=void 0;return}jc(Oe.size===0||ge!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let we=li({currentLocation:T.location,nextLocation:ie,historyAction:te});if(we&&ge!=null){let Ne=new Promise(Pe=>{ke=Pe});t.history.go(ge*-1),Oi(we,{state:"blocked",location:ie,proceed(){Oi(we,{state:"proceeding",proceed:void 0,reset:void 0,location:ie}),Ne.then(()=>t.history.go(ge))},reset(){let Pe=new Map(T.blockers);Pe.set(we,Bh),Ye({blockers:Pe})}});return}return Ut(te,ie)}),n){e8(e,j);let $=()=>t8(e,j);e.addEventListener("pagehide",$),O=()=>e.removeEventListener("pagehide",$)}return T.initialized||Ut(Fn.Pop,T.location,{initialHydration:!0}),L}function je(){m&&m(),O&&O(),y.clear(),S&&S.abort(),T.fetchers.forEach(($,te)=>xn(te)),T.blockers.forEach(($,te)=>Di(te))}function gt($){return y.add($),()=>y.delete($)}function Ye($,te){te===void 0&&(te={}),T=mn({},T,$);let ie=[],ge=[];p.v7_fetcherPersist&&T.fetchers.forEach((we,Ne)=>{we.state==="idle"&&(X.has(Ne)?ge.push(Ne):ie.push(Ne))}),X.forEach(we=>{!T.fetchers.has(we)&&!Q.has(we)&&ge.push(we)}),[...y].forEach(we=>we(T,{deletedFetchers:ge,viewTransitionOpts:te.viewTransitionOpts,flushSync:te.flushSync===!0})),p.v7_fetcherPersist?(ie.forEach(we=>T.fetchers.delete(we)),ge.forEach(we=>xn(we))):ge.forEach(we=>X.delete(we))}function In($,te,ie){var ge,we;let{flushSync:Ne}=ie===void 0?{}:ie,Pe=T.actionData!=null&&T.navigation.formMethod!=null&&_s(T.navigation.formMethod)&&T.navigation.state==="loading"&&((ge=$.state)==null?void 0:ge._isRedirect)!==!0,Ce;te.actionData?Object.keys(te.actionData).length>0?Ce=te.actionData:Ce=null:Pe?Ce=T.actionData:Ce=null;let Se=te.loaderData?OT(T.loaderData,te.loaderData,te.matches||[],te.errors):T.loaderData,Te=T.blockers;Te.size>0&&(Te=new Map(Te),Te.forEach((qe,En)=>Te.set(En,Bh)));let Ie=x===!0||T.navigation.formMethod!=null&&_s(T.navigation.formMethod)&&((we=$.state)==null?void 0:we._isRedirect)!==!0;l&&(a=l,l=void 0),G||_===Fn.Pop||(_===Fn.Push?t.history.push($,$.state):_===Fn.Replace&&t.history.replace($,$.state));let ze;if(_===Fn.Pop){let qe=j.get(T.location.pathname);qe&&qe.has($.pathname)?ze={currentLocation:T.location,nextLocation:$}:j.has($.pathname)&&(ze={currentLocation:$,nextLocation:T.location})}else if(k){let qe=j.get(T.location.pathname);qe?qe.add($.pathname):(qe=new Set([$.pathname]),j.set(T.location.pathname,qe)),ze={currentLocation:T.location,nextLocation:$}}Ye(mn({},te,{actionData:Ce,loaderData:Se,historyAction:_,location:$,initialized:!0,navigation:Ty,revalidation:"idle",restoreScrollPosition:ki($,te.matches||T.matches),preventScrollReset:Ie,blockers:Te}),{viewTransitionOpts:ze,flushSync:Ne===!0}),_=Fn.Pop,x=!1,k=!1,G=!1,J=!1,z=[]}async function Pt($,te){if(typeof $=="number"){t.history.go($);return}let ie=q_(T.location,T.matches,c,p.v7_prependBasename,$,p.v7_relativeSplatPath,te==null?void 0:te.fromRouteId,te==null?void 0:te.relative),{path:ge,submission:we,error:Ne}=TT(p.v7_normalizeFormMethod,!1,ie,te),Pe=T.location,Ce=qf(T.location,ge,te&&te.state);Ce=mn({},Ce,t.history.encodeLocation(Ce));let Se=te&&te.replace!=null?te.replace:void 0,Te=Fn.Push;Se===!0?Te=Fn.Replace:Se===!1||we!=null&&_s(we.formMethod)&&we.formAction===T.location.pathname+T.location.search&&(Te=Fn.Replace);let Ie=te&&"preventScrollReset"in te?te.preventScrollReset===!0:void 0,ze=(te&&te.flushSync)===!0,qe=li({currentLocation:Pe,nextLocation:Ce,historyAction:Te});if(qe){Oi(qe,{state:"blocked",location:Ce,proceed(){Oi(qe,{state:"proceeding",proceed:void 0,reset:void 0,location:Ce}),Pt($,te)},reset(){let En=new Map(T.blockers);En.set(qe,Bh),Ye({blockers:En})}});return}return await Ut(Te,Ce,{submission:we,pendingError:Ne,preventScrollReset:Ie,replace:te&&te.replace,enableViewTransition:te&&te.viewTransition,flushSync:ze})}function bt(){if(Mt(),Ye({revalidation:"loading"}),T.navigation.state!=="submitting"){if(T.navigation.state==="idle"){Ut(T.historyAction,T.location,{startUninterruptedRevalidation:!0});return}Ut(_||T.historyAction,T.navigation.location,{overrideNavigation:T.navigation,enableViewTransition:k===!0})}}async function Ut($,te,ie){S&&S.abort(),S=null,_=$,G=(ie&&ie.startUninterruptedRevalidation)===!0,Mi(T.location,T.matches),x=(ie&&ie.preventScrollReset)===!0,k=(ie&&ie.enableViewTransition)===!0;let ge=l||a,we=ie&&ie.overrideNavigation,Ne=ie!=null&&ie.initialHydration&&T.matches&&T.matches.length>0&&!M?T.matches:Nl(ge,te,c),Pe=(ie&&ie.flushSync)===!0;if(Ne&&T.initialized&&!J&&$9(T.location,te)&&!(ie&&ie.submission&&_s(ie.submission.formMethod))){In(te,{matches:Ne},{flushSync:Pe});return}let Ce=sr(Ne,ge,te.pathname);if(Ce.active&&Ce.matches&&(Ne=Ce.matches),!Ne){let{error:St,notFoundMatches:ot,route:qt}=qr(te.pathname);In(te,{matches:ot,loaderData:{},errors:{[qt.id]:St}},{flushSync:Pe});return}S=new AbortController;let Se=Uu(t.history,te,S.signal,ie&&ie.submission),Te;if(ie&&ie.pendingError)Te=[Il(Ne).route.id,{type:Bt.error,error:ie.pendingError}];else if(ie&&ie.submission&&_s(ie.submission.formMethod)){let St=await it(Se,te,ie.submission,Ne,Ce.active,{replace:ie.replace,flushSync:Pe});if(St.shortCircuited)return;if(St.pendingActionResult){let[ot,qt]=St.pendingActionResult;if(_i(qt)&&Pc(qt.error)&&qt.error.status===404){S=null,In(te,{matches:St.matches,loaderData:{},errors:{[ot]:qt.error}});return}}Ne=St.matches||Ne,Te=St.pendingActionResult,we=Ay(te,ie.submission),Pe=!1,Ce.active=!1,Se=Uu(t.history,Se.url,Se.signal)}let{shortCircuited:Ie,matches:ze,loaderData:qe,errors:En}=await Et(Se,te,Ne,Ce.active,we,ie&&ie.submission,ie&&ie.fetcherSubmission,ie&&ie.replace,ie&&ie.initialHydration===!0,Pe,Te);Ie||(S=null,In(te,mn({matches:ze||Ne},MT(Te),{loaderData:qe,errors:En})))}async function it($,te,ie,ge,we,Ne){Ne===void 0&&(Ne={}),Mt();let Pe=Z9(te,ie);if(Ye({navigation:Pe},{flushSync:Ne.flushSync===!0}),we){let Te=await Un(ge,te.pathname,$.signal);if(Te.type==="aborted")return{shortCircuited:!0};if(Te.type==="error"){let Ie=Il(Te.partialMatches).route.id;return{matches:Te.partialMatches,pendingActionResult:[Ie,{type:Bt.error,error:Te.error}]}}else if(Te.matches)ge=Te.matches;else{let{notFoundMatches:Ie,error:ze,route:qe}=qr(te.pathname);return{matches:Ie,pendingActionResult:[qe.id,{type:Bt.error,error:ze}]}}}let Ce,Se=tf(ge,te);if(!Se.route.action&&!Se.route.lazy)Ce={type:Bt.error,error:Zr(405,{method:$.method,pathname:te.pathname,routeId:Se.route.id})};else if(Ce=(await Ht("action",T,$,[Se],ge,null))[Se.route.id],$.signal.aborted)return{shortCircuited:!0};if(Ml(Ce)){let Te;return Ne&&Ne.replace!=null?Te=Ne.replace:Te=NT(Ce.response.headers.get("Location"),new URL($.url),c)===T.location.pathname+T.location.search,await et($,Ce,!0,{submission:ie,replace:Te}),{shortCircuited:!0}}if(To(Ce))throw Zr(400,{type:"defer-action"});if(_i(Ce)){let Te=Il(ge,Se.route.id);return(Ne&&Ne.replace)!==!0&&(_=Fn.Push),{matches:ge,pendingActionResult:[Te.route.id,Ce]}}return{matches:ge,pendingActionResult:[Se.route.id,Ce]}}async function Et($,te,ie,ge,we,Ne,Pe,Ce,Se,Te,Ie){let ze=we||Ay(te,Ne),qe=Ne||Pe||jT(ze),En=!G&&(!p.v7_partialHydration||!Se);if(ge){if(En){let Kt=rn(Ie);Ye(mn({navigation:ze},Kt!==void 0?{actionData:Kt}:{}),{flushSync:Te})}let lt=await Un(ie,te.pathname,$.signal);if(lt.type==="aborted")return{shortCircuited:!0};if(lt.type==="error"){let Kt=Il(lt.partialMatches).route.id;return{matches:lt.partialMatches,loaderData:{},errors:{[Kt]:lt.error}}}else if(lt.matches)ie=lt.matches;else{let{error:Kt,notFoundMatches:us,route:Rs}=qr(te.pathname);return{matches:us,loaderData:{},errors:{[Rs.id]:Kt}}}}let St=l||a,[ot,qt]=ST(t.history,T,ie,qe,te,p.v7_partialHydration&&Se===!0,p.v7_skipActionErrorRevalidation,J,z,U,X,ye,pe,St,c,Ie);if(Wn(lt=>!(ie&&ie.some(Kt=>Kt.route.id===lt))||ot&&ot.some(Kt=>Kt.route.id===lt)),ae=++ee,ot.length===0&&qt.length===0){let lt=ir();return In(te,mn({matches:ie,loaderData:{},errors:Ie&&_i(Ie[1])?{[Ie[0]]:Ie[1].error}:null},MT(Ie),lt?{fetchers:new Map(T.fetchers)}:{}),{flushSync:Te}),{shortCircuited:!0}}if(En){let lt={};if(!ge){lt.navigation=ze;let Kt=rn(Ie);Kt!==void 0&&(lt.actionData=Kt)}qt.length>0&&(lt.fetchers=Xt(qt)),Ye(lt,{flushSync:Te})}qt.forEach(lt=>{an(lt.key),lt.controller&&Q.set(lt.key,lt.controller)});let as=()=>qt.forEach(lt=>an(lt.key));S&&S.signal.addEventListener("abort",as);let{loaderResults:ui,fetcherResults:ci}=await Ot(T,ie,ot,qt,$);if($.signal.aborted)return{shortCircuited:!0};S&&S.signal.removeEventListener("abort",as),qt.forEach(lt=>Q.delete(lt.key));let Vn=Wm(ui);if(Vn)return await et($,Vn.result,!0,{replace:Ce}),{shortCircuited:!0};if(Vn=Wm(ci),Vn)return pe.add(Vn.key),await et($,Vn.result,!0,{replace:Ce}),{shortCircuited:!0};let{loaderData:Fa,errors:os}=DT(T,ie,ui,Ie,qt,ci,ce);ce.forEach((lt,Kt)=>{lt.subscribe(us=>{(us||lt.done)&&ce.delete(Kt)})}),p.v7_partialHydration&&Se&&T.errors&&(os=mn({},T.errors,os));let kr=ir(),Lr=Ii(ae),ls=kr||Lr||qt.length>0;return mn({matches:ie,loaderData:Fa,errors:os},ls?{fetchers:new Map(T.fetchers)}:{})}function rn($){if($&&!_i($[1]))return{[$[0]]:$[1].data};if(T.actionData)return Object.keys(T.actionData).length===0?null:T.actionData}function Xt($){return $.forEach(te=>{let ie=T.fetchers.get(te.key),ge=Fh(void 0,ie?ie.data:void 0);T.fetchers.set(te.key,ge)}),new Map(T.fetchers)}function st($,te,ie,ge){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");an($);let we=(ge&&ge.flushSync)===!0,Ne=l||a,Pe=q_(T.location,T.matches,c,p.v7_prependBasename,ie,p.v7_relativeSplatPath,te,ge==null?void 0:ge.relative),Ce=Nl(Ne,Pe,c),Se=sr(Ce,Ne,Pe);if(Se.active&&Se.matches&&(Ce=Se.matches),!Ce){un($,te,Zr(404,{pathname:Pe}),{flushSync:we});return}let{path:Te,submission:Ie,error:ze}=TT(p.v7_normalizeFormMethod,!0,Pe,ge);if(ze){un($,te,ze,{flushSync:we});return}let qe=tf(Ce,Te),En=(ge&&ge.preventScrollReset)===!0;if(Ie&&_s(Ie.formMethod)){yn($,te,Te,qe,Ce,Se.active,we,En,Ie);return}ye.set($,{routeId:te,path:Te}),At($,te,Te,qe,Ce,Se.active,we,En,Ie)}async function yn($,te,ie,ge,we,Ne,Pe,Ce,Se){Mt(),ye.delete($);function Te(en){if(!en.route.action&&!en.route.lazy){let hi=Zr(405,{method:Se.formMethod,pathname:ie,routeId:te});return un($,te,hi,{flushSync:Pe}),!0}return!1}if(!Ne&&Te(ge))return;let Ie=T.fetchers.get($);at($,J9(Se,Ie),{flushSync:Pe});let ze=new AbortController,qe=Uu(t.history,ie,ze.signal,Se);if(Ne){let en=await Un(we,new URL(qe.url).pathname,qe.signal,$);if(en.type==="aborted")return;if(en.type==="error"){un($,te,en.error,{flushSync:Pe});return}else if(en.matches){if(we=en.matches,ge=tf(we,ie),Te(ge))return}else{un($,te,Zr(404,{pathname:ie}),{flushSync:Pe});return}}Q.set($,ze);let En=ee,ot=(await Ht("action",T,qe,[ge],we,$))[ge.route.id];if(qe.signal.aborted){Q.get($)===ze&&Q.delete($);return}if(p.v7_fetcherPersist&&X.has($)){if(Ml(ot)||_i(ot)){at($,lo(void 0));return}}else{if(Ml(ot))if(Q.delete($),ae>En){at($,lo(void 0));return}else return pe.add($),at($,Fh(Se)),et(qe,ot,!1,{fetcherSubmission:Se,preventScrollReset:Ce});if(_i(ot)){un($,te,ot.error);return}}if(To(ot))throw Zr(400,{type:"defer-action"});let qt=T.navigation.location||T.location,as=Uu(t.history,qt,ze.signal),ui=l||a,ci=T.navigation.state!=="idle"?Nl(ui,T.navigation.location,c):T.matches;_t(ci,"Didn't find any matches after fetcher action");let Vn=++ee;be.set($,Vn);let Fa=Fh(Se,ot.data);T.fetchers.set($,Fa);let[os,kr]=ST(t.history,T,ci,Se,qt,!1,p.v7_skipActionErrorRevalidation,J,z,U,X,ye,pe,ui,c,[ge.route.id,ot]);kr.filter(en=>en.key!==$).forEach(en=>{let hi=en.key,Ha=T.fetchers.get(hi),sl=Fh(void 0,Ha?Ha.data:void 0);T.fetchers.set(hi,sl),an(hi),en.controller&&Q.set(hi,en.controller)}),Ye({fetchers:new Map(T.fetchers)});let Lr=()=>kr.forEach(en=>an(en.key));ze.signal.addEventListener("abort",Lr);let{loaderResults:ls,fetcherResults:lt}=await Ot(T,ci,os,kr,as);if(ze.signal.aborted)return;ze.signal.removeEventListener("abort",Lr),be.delete($),Q.delete($),kr.forEach(en=>Q.delete(en.key));let Kt=Wm(ls);if(Kt)return et(as,Kt.result,!1,{preventScrollReset:Ce});if(Kt=Wm(lt),Kt)return pe.add(Kt.key),et(as,Kt.result,!1,{preventScrollReset:Ce});let{loaderData:us,errors:Rs}=DT(T,ci,ls,void 0,kr,lt,ce);if(T.fetchers.has($)){let en=lo(ot.data);T.fetchers.set($,en)}Ii(Vn),T.navigation.state==="loading"&&Vn>ae?(_t(_,"Expected pending action"),S&&S.abort(),In(T.navigation.location,{matches:ci,loaderData:us,errors:Rs,fetchers:new Map(T.fetchers)})):(Ye({errors:Rs,loaderData:OT(T.loaderData,us,ci,Rs),fetchers:new Map(T.fetchers)}),J=!1)}async function At($,te,ie,ge,we,Ne,Pe,Ce,Se){let Te=T.fetchers.get($);at($,Fh(Se,Te?Te.data:void 0),{flushSync:Pe});let Ie=new AbortController,ze=Uu(t.history,ie,Ie.signal);if(Ne){let ot=await Un(we,new URL(ze.url).pathname,ze.signal,$);if(ot.type==="aborted")return;if(ot.type==="error"){un($,te,ot.error,{flushSync:Pe});return}else if(ot.matches)we=ot.matches,ge=tf(we,ie);else{un($,te,Zr(404,{pathname:ie}),{flushSync:Pe});return}}Q.set($,Ie);let qe=ee,St=(await Ht("loader",T,ze,[ge],we,$))[ge.route.id];if(To(St)&&(St=await Vb(St,ze.signal,!0)||St),Q.get($)===Ie&&Q.delete($),!ze.signal.aborted){if(X.has($)){at($,lo(void 0));return}if(Ml(St))if(ae>qe){at($,lo(void 0));return}else{pe.add($),await et(ze,St,!1,{preventScrollReset:Ce});return}if(_i(St)){un($,te,St.error);return}_t(!To(St),"Unhandled fetcher deferred data"),at($,lo(St.data))}}async function et($,te,ie,ge){let{submission:we,fetcherSubmission:Ne,preventScrollReset:Pe,replace:Ce}=ge===void 0?{}:ge;te.response.headers.has("X-Remix-Revalidate")&&(J=!0);let Se=te.response.headers.get("Location");_t(Se,"Expected a Location header on the redirect Response"),Se=NT(Se,new URL($.url),c);let Te=qf(T.location,Se,{_isRedirect:!0});if(n){let ot=!1;if(te.response.headers.has("X-Remix-Reload-Document"))ot=!0;else if(Ub.test(Se)){const qt=t.history.createURL(Se);ot=qt.origin!==e.location.origin||vd(qt.pathname,c)==null}if(ot){Ce?e.location.replace(Se):e.location.assign(Se);return}}S=null;let Ie=Ce===!0||te.response.headers.has("X-Remix-Replace")?Fn.Replace:Fn.Push,{formMethod:ze,formAction:qe,formEncType:En}=T.navigation;!we&&!Ne&&ze&&qe&&En&&(we=jT(T.navigation));let St=we||Ne;if(M9.has(te.response.status)&&St&&_s(St.formMethod))await Ut(Ie,Te,{submission:mn({},St,{formAction:Se}),preventScrollReset:Pe||x,enableViewTransition:ie?k:void 0});else{let ot=Ay(Te,we);await Ut(Ie,Te,{overrideNavigation:ot,fetcherSubmission:Ne,preventScrollReset:Pe||x,enableViewTransition:ie?k:void 0})}}async function Ht($,te,ie,ge,we,Ne){let Pe,Ce={};try{Pe=await B9(d,$,te,ie,ge,we,Ne,s,i)}catch(Se){return ge.forEach(Te=>{Ce[Te.route.id]={type:Bt.error,error:Se}}),Ce}for(let[Se,Te]of Object.entries(Pe))if(Y9(Te)){let Ie=Te.result;Ce[Se]={type:Bt.redirect,response:q9(Ie,ie,Se,we,c,p.v7_relativeSplatPath)}}else Ce[Se]=await H9(Te);return Ce}async function Ot($,te,ie,ge,we){let Ne=$.matches,Pe=Ht("loader",$,we,ie,te,null),Ce=Promise.all(ge.map(async Ie=>{if(Ie.matches&&Ie.match&&Ie.controller){let qe=(await Ht("loader",$,Uu(t.history,Ie.path,Ie.controller.signal),[Ie.match],Ie.matches,Ie.key))[Ie.match.route.id];return{[Ie.key]:qe}}else return Promise.resolve({[Ie.key]:{type:Bt.error,error:Zr(404,{pathname:Ie.path})}})})),Se=await Pe,Te=(await Ce).reduce((Ie,ze)=>Object.assign(Ie,ze),{});return await Promise.all([K9(te,Se,we.signal,Ne,$.loaderData),Q9(te,Te,ge)]),{loaderResults:Se,fetcherResults:Te}}function Mt(){J=!0,z.push(...Wn()),ye.forEach(($,te)=>{Q.has(te)&&U.add(te),an(te)})}function at($,te,ie){ie===void 0&&(ie={}),T.fetchers.set($,te),Ye({fetchers:new Map(T.fetchers)},{flushSync:(ie&&ie.flushSync)===!0})}function un($,te,ie,ge){ge===void 0&&(ge={});let we=Il(T.matches,te);xn($),Ye({errors:{[we.route.id]:ie},fetchers:new Map(T.fetchers)},{flushSync:(ge&&ge.flushSync)===!0})}function sn($){return W.set($,(W.get($)||0)+1),X.has($)&&X.delete($),T.fetchers.get($)||k9}function xn($){let te=T.fetchers.get($);Q.has($)&&!(te&&te.state==="loading"&&be.has($))&&an($),ye.delete($),be.delete($),pe.delete($),p.v7_fetcherPersist&&X.delete($),U.delete($),T.fetchers.delete($)}function cn($){let te=(W.get($)||0)-1;te<=0?(W.delete($),X.add($),p.v7_fetcherPersist||xn($)):W.set($,te),Ye({fetchers:new Map(T.fetchers)})}function an($){let te=Q.get($);te&&(te.abort(),Q.delete($))}function Pn($){for(let te of $){let ie=sn(te),ge=lo(ie.data);T.fetchers.set(te,ge)}}function ir(){let $=[],te=!1;for(let ie of pe){let ge=T.fetchers.get(ie);_t(ge,"Expected fetcher: "+ie),ge.state==="loading"&&(pe.delete(ie),$.push(ie),te=!0)}return Pn($),te}function Ii($){let te=[];for(let[ie,ge]of be)if(ge<$){let we=T.fetchers.get(ie);_t(we,"Expected fetcher: "+ie),we.state==="loading"&&(an(ie),be.delete(ie),te.push(ie))}return Pn(te),te.length>0}function ta($,te){let ie=T.blockers.get($)||Bh;return Oe.get($)!==te&&Oe.set($,te),ie}function Di($){T.blockers.delete($),Oe.delete($)}function Oi($,te){let ie=T.blockers.get($)||Bh;_t(ie.state==="unblocked"&&te.state==="blocked"||ie.state==="blocked"&&te.state==="blocked"||ie.state==="blocked"&&te.state==="proceeding"||ie.state==="blocked"&&te.state==="unblocked"||ie.state==="proceeding"&&te.state==="unblocked","Invalid blocker state transition: "+ie.state+" -> "+te.state);let ge=new Map(T.blockers);ge.set($,te),Ye({blockers:ge})}function li($){let{currentLocation:te,nextLocation:ie,historyAction:ge}=$;if(Oe.size===0)return;Oe.size>1&&jc(!1,"A router only supports one blocker at a time");let we=Array.from(Oe.entries()),[Ne,Pe]=we[we.length-1],Ce=T.blockers.get(Ne);if(!(Ce&&Ce.state==="proceeding")&&Pe({currentLocation:te,nextLocation:ie,historyAction:ge}))return Ne}function qr($){let te=Zr(404,{pathname:$}),ie=l||a,{matches:ge,route:we}=kT(ie);return Wn(),{notFoundMatches:ge,route:we,error:te}}function Wn($){let te=[];return ce.forEach((ie,ge)=>{(!$||$(ge))&&(ie.cancel(),te.push(ge),ce.delete(ge))}),te}function Er($,te,ie){if(E=$,I=te,C=ie||null,!A&&T.navigation===Ty){A=!0;let ge=ki(T.location,T.matches);ge!=null&&Ye({restoreScrollPosition:ge})}return()=>{E=null,I=null,C=null}}function Xn($,te){return C&&C($,te.map(ge=>h9(ge,T.loaderData)))||$.key}function Mi($,te){if(E&&I){let ie=Xn($,te);E[ie]=I()}}function ki($,te){if(E){let ie=Xn($,te),ge=E[ie];if(typeof ge=="number")return ge}return null}function sr($,te,ie){if(f)if($){if(Object.keys($[0].params).length>0)return{active:!0,matches:bp(te,ie,c,!0)}}else return{active:!0,matches:bp(te,ie,c,!0)||[]};return{active:!1,matches:null}}async function Un($,te,ie,ge){if(!f)return{type:"success",matches:$};let we=$;for(;;){let Ne=l==null,Pe=l||a,Ce=s;try{await f({signal:ie,path:te,matches:we,fetcherKey:ge,patch:(Ie,ze)=>{ie.aborted||CT(Ie,ze,Pe,Ce,i)}})}catch(Ie){return{type:"error",error:Ie,partialMatches:we}}finally{Ne&&!ie.aborted&&(a=[...a])}if(ie.aborted)return{type:"aborted"};let Se=Nl(Pe,te,c);if(Se)return{type:"success",matches:Se};let Te=bp(Pe,te,c,!0);if(!Te||we.length===Te.length&&we.every((Ie,ze)=>Ie.route.id===Te[ze].route.id))return{type:"success",matches:null};we=Te}}function gu($){s={},l=lg($,i,void 0,s)}function Kn($,te){let ie=l==null;CT($,te,l||a,s,i),ie&&(a=[...a],Ye({}))}return L={get basename(){return c},get future(){return p},get state(){return T},get routes(){return a},get window(){return e},initialize:$e,subscribe:gt,enableScrollRestoration:Er,navigate:Pt,fetch:st,revalidate:bt,createHref:$=>t.history.createHref($),encodeLocation:$=>t.history.encodeLocation($),getFetcher:sn,deleteFetcher:cn,dispose:je,getBlocker:ta,deleteBlocker:Di,patchRoutes:Kn,_internalFetchControllers:Q,_internalActiveDeferreds:ce,_internalSetRoutes:gu},L}function P9(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function q_(t,e,n,r,i,s,a,l){let c,d;if(a){c=[];for(let p of e)if(c.push(p),p.route.id===a){d=p;break}}else c=e,d=e[e.length-1];let f=YN(i||".",$N(c,s),vd(t.pathname,n)||t.pathname,l==="path");if(i==null&&(f.search=t.search,f.hash=t.hash),(i==null||i===""||i===".")&&d){let p=zb(f.search);if(d.route.index&&!p)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&p){let m=new URLSearchParams(f.search),y=m.getAll("index");m.delete("index"),y.filter(C=>C).forEach(C=>m.append("index",C));let E=m.toString();f.search=E?"?"+E:""}}return r&&n!=="/"&&(f.pathname=f.pathname==="/"?n:jo([n,f.pathname])),gd(f)}function TT(t,e,n,r){if(!r||!P9(r))return{path:n};if(r.formMethod&&!X9(r.formMethod))return{path:n,error:Zr(405,{method:r.formMethod})};let i=()=>({path:n,error:Zr(400,{type:"invalid-body"})}),s=r.formMethod||"get",a=t?s.toUpperCase():s.toLowerCase(),l=ZN(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!_s(a))return i();let m=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((y,E)=>{let[C,I]=E;return""+y+C+"="+I+`
`},""):String(r.body);return{path:n,submission:{formMethod:a,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:m}}}else if(r.formEncType==="application/json"){if(!_s(a))return i();try{let m=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:a,formAction:l,formEncType:r.formEncType,formData:void 0,json:m,text:void 0}}}catch{return i()}}}_t(typeof FormData=="function","FormData is not available in this environment");let c,d;if(r.formData)c=$_(r.formData),d=r.formData;else if(r.body instanceof FormData)c=$_(r.body),d=r.body;else if(r.body instanceof URLSearchParams)c=r.body,d=IT(c);else if(r.body==null)c=new URLSearchParams,d=new FormData;else try{c=new URLSearchParams(r.body),d=IT(c)}catch{return i()}let f={formMethod:a,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(_s(f.formMethod))return{path:n,submission:f};let p=tl(n);return e&&p.search&&zb(p.search)&&c.append("index",""),p.search="?"+c,{path:gd(p),submission:f}}function AT(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function ST(t,e,n,r,i,s,a,l,c,d,f,p,m,y,E,C){let I=C?_i(C[1])?C[1].error:C[1].data:void 0,A=t.createURL(e.location),N=t.createURL(i),M=n;s&&e.errors?M=AT(n,Object.keys(e.errors)[0],!0):C&&_i(C[1])&&(M=AT(n,C[0]));let P=C?C[1].statusCode:void 0,q=a&&P&&P>=400,L=M.filter((_,x)=>{let{route:S}=_;if(S.lazy)return!0;if(S.loader==null)return!1;if(s)return G_(S,e.loaderData,e.errors);if(U9(e.loaderData,e.matches[x],_)||c.some(O=>O===_.route.id))return!0;let k=e.matches[x],j=_;return RT(_,mn({currentUrl:A,currentParams:k.params,nextUrl:N,nextParams:j.params},r,{actionResult:I,actionStatus:P,defaultShouldRevalidate:q?!1:l||A.pathname+A.search===N.pathname+N.search||A.search!==N.search||KN(k,j)}))}),T=[];return p.forEach((_,x)=>{if(s||!n.some(G=>G.route.id===_.routeId)||f.has(x))return;let S=Nl(y,_.path,E);if(!S){T.push({key:x,routeId:_.routeId,path:_.path,matches:null,match:null,controller:null});return}let k=e.fetchers.get(x),j=tf(S,_.path),O=!1;m.has(x)?O=!1:d.has(x)?(d.delete(x),O=!0):k&&k.state!=="idle"&&k.data===void 0?O=l:O=RT(j,mn({currentUrl:A,currentParams:e.matches[e.matches.length-1].params,nextUrl:N,nextParams:n[n.length-1].params},r,{actionResult:I,actionStatus:P,defaultShouldRevalidate:q?!1:l})),O&&T.push({key:x,routeId:_.routeId,path:_.path,matches:S,match:j,controller:new AbortController})}),[L,T]}function G_(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function U9(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function KN(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function RT(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function CT(t,e,n,r,i){var s;let a;if(t){let d=r[t];_t(d,"No route found to patch children into: routeId = "+t),d.children||(d.children=[]),a=d.children}else a=n;let l=e.filter(d=>!a.some(f=>QN(d,f))),c=lg(l,i,[t||"_","patch",String(((s=a)==null?void 0:s.length)||"0")],r);a.push(...c)}function QN(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>QN(n,s))}):!1}async function V9(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];_t(i,"No route found in manifest");let s={};for(let a in r){let c=i[a]!==void 0&&a!=="hasErrorBoundary";jc(!c,'Route "'+i.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+a+'" will be ignored.')),!c&&!u9.has(a)&&(s[a]=r[a])}Object.assign(i,s),Object.assign(i,mn({},e(i),{lazy:void 0}))}async function z9(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,a)=>Object.assign(i,{[n[a].route.id]:s}),{})}async function B9(t,e,n,r,i,s,a,l,c,d){let f=s.map(y=>y.route.lazy?V9(y.route,c,l):void 0),p=s.map((y,E)=>{let C=f[E],I=i.some(N=>N.route.id===y.route.id);return mn({},y,{shouldLoad:I,resolve:async N=>(N&&r.method==="GET"&&(y.route.lazy||y.route.loader)&&(I=!0),I?F9(e,r,y,C,N,d):Promise.resolve({type:Bt.data,result:void 0}))})}),m=await t({matches:p,request:r,params:s[0].params,fetcherKey:a,context:d});try{await Promise.all(f)}catch{}return m}async function F9(t,e,n,r,i,s){let a,l,c=d=>{let f,p=new Promise((E,C)=>f=C);l=()=>f(),e.signal.addEventListener("abort",l);let m=E=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):d({request:e,params:n.params,context:s},...E!==void 0?[E]:[]),y=(async()=>{try{return{type:"data",result:await(i?i(C=>m(C)):m())}}catch(E){return{type:"error",result:E}}})();return Promise.race([y,p])};try{let d=n.route[t];if(r)if(d){let f,[p]=await Promise.all([c(d).catch(m=>{f=m}),r]);if(f!==void 0)throw f;a=p}else if(await r,d=n.route[t],d)a=await c(d);else if(t==="action"){let f=new URL(e.url),p=f.pathname+f.search;throw Zr(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:Bt.data,result:void 0};else if(d)a=await c(d);else{let f=new URL(e.url),p=f.pathname+f.search;throw Zr(404,{pathname:p})}_t(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:Bt.error,result:d}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function H9(t){let{result:e,type:n}=t;if(JN(e)){let p;try{let m=e.headers.get("Content-Type");m&&/\bapplication\/json\b/.test(m)?e.body==null?p=null:p=await e.json():p=await e.text()}catch(m){return{type:Bt.error,error:m}}return n===Bt.error?{type:Bt.error,error:new ug(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:Bt.data,data:p,statusCode:e.status,headers:e.headers}}if(n===Bt.error){if(LT(e)){var r,i;if(e.data instanceof Error){var s,a;return{type:Bt.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}}return{type:Bt.error,error:new ug(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:Pc(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:Bt.error,error:e,statusCode:Pc(e)?e.status:void 0}}if(W9(e)){var l,c;return{type:Bt.deferred,deferredData:e,statusCode:(l=e.init)==null?void 0:l.status,headers:((c=e.init)==null?void 0:c.headers)&&new Headers(e.init.headers)}}if(LT(e)){var d,f;return{type:Bt.data,data:e.data,statusCode:(d=e.init)==null?void 0:d.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}}return{type:Bt.data,data:e}}function q9(t,e,n,r,i,s){let a=t.headers.get("Location");if(_t(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!Ub.test(a)){let l=r.slice(0,r.findIndex(c=>c.route.id===n)+1);a=q_(new URL(e.url),l,i,!0,a,s),t.headers.set("Location",a)}return t}function NT(t,e,n){if(Ub.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=vd(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Uu(t,e,n,r){let i=t.createURL(ZN(e)).toString(),s={signal:n};if(r&&_s(r.formMethod)){let{formMethod:a,formEncType:l}=r;s.method=a.toUpperCase(),l==="application/json"?(s.headers=new Headers({"Content-Type":l}),s.body=JSON.stringify(r.json)):l==="text/plain"?s.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?s.body=$_(r.formData):s.body=r.formData}return new Request(i,s)}function $_(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function IT(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function G9(t,e,n,r,i){let s={},a=null,l,c=!1,d={},f=n&&_i(n[1])?n[1].error:void 0;return t.forEach(p=>{if(!(p.route.id in e))return;let m=p.route.id,y=e[m];if(_t(!Ml(y),"Cannot handle redirect results in processLoaderData"),_i(y)){let E=y.error;f!==void 0&&(E=f,f=void 0),a=a||{};{let C=Il(t,m);a[C.route.id]==null&&(a[C.route.id]=E)}s[m]=void 0,c||(c=!0,l=Pc(y.error)?y.error.status:500),y.headers&&(d[m]=y.headers)}else To(y)?(r.set(m,y.deferredData),s[m]=y.deferredData.data,y.statusCode!=null&&y.statusCode!==200&&!c&&(l=y.statusCode),y.headers&&(d[m]=y.headers)):(s[m]=y.data,y.statusCode&&y.statusCode!==200&&!c&&(l=y.statusCode),y.headers&&(d[m]=y.headers))}),f!==void 0&&n&&(a={[n[0]]:f},s[n[0]]=void 0),{loaderData:s,errors:a,statusCode:l||200,loaderHeaders:d}}function DT(t,e,n,r,i,s,a){let{loaderData:l,errors:c}=G9(e,n,r,a);return i.forEach(d=>{let{key:f,match:p,controller:m}=d,y=s[f];if(_t(y,"Did not find corresponding fetcher result"),!(m&&m.signal.aborted))if(_i(y)){let E=Il(t.matches,p==null?void 0:p.route.id);c&&c[E.route.id]||(c=mn({},c,{[E.route.id]:y.error})),t.fetchers.delete(f)}else if(Ml(y))_t(!1,"Unhandled fetcher revalidation redirect");else if(To(y))_t(!1,"Unhandled fetcher deferred data");else{let E=lo(y.data);t.fetchers.set(f,E)}}),{loaderData:l,errors:c}}function OT(t,e,n,r){let i=mn({},e);for(let s of n){let a=s.route.id;if(e.hasOwnProperty(a)?e[a]!==void 0&&(i[a]=e[a]):t[a]!==void 0&&s.route.loader&&(i[a]=t[a]),r&&r.hasOwnProperty(a))break}return i}function MT(t){return t?_i(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Il(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function kT(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Zr(t,e){let{pathname:n,routeId:r,method:i,type:s,message:a}=e===void 0?{}:e,l="Unknown Server Error",c="Unknown @remix-run/router error";return t===400?(l="Bad Request",i&&n&&r?c="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?c="defer() is not supported in actions":s==="invalid-body"&&(c="Unable to encode submission body")):t===403?(l="Forbidden",c='Route "'+r+'" does not match URL "'+n+'"'):t===404?(l="Not Found",c='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",i&&n&&r?c="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(c='Invalid request method "'+i.toUpperCase()+'"')),new ug(t||500,l,new Error(c),!0)}function Wm(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(Ml(i))return{key:r,result:i}}}function ZN(t){let e=typeof t=="string"?tl(t):t;return gd(mn({},e,{hash:""}))}function $9(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Y9(t){return JN(t.result)&&O9.has(t.result.status)}function To(t){return t.type===Bt.deferred}function _i(t){return t.type===Bt.error}function Ml(t){return(t&&t.type)===Bt.redirect}function LT(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function W9(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function JN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function X9(t){return D9.has(t.toLowerCase())}function _s(t){return N9.has(t.toLowerCase())}async function K9(t,e,n,r,i){let s=Object.entries(e);for(let a=0;a<s.length;a++){let[l,c]=s[a],d=t.find(m=>(m==null?void 0:m.route.id)===l);if(!d)continue;let f=r.find(m=>m.route.id===d.route.id),p=f!=null&&!KN(f,d)&&(i&&i[d.route.id])!==void 0;To(c)&&p&&await Vb(c,n,!1).then(m=>{m&&(e[l]=m)})}}async function Q9(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:a}=n[r],l=e[i];t.find(d=>(d==null?void 0:d.route.id)===s)&&To(l)&&(_t(a,"Expected an AbortController for revalidating fetcher deferred result"),await Vb(l,a.signal,!0).then(d=>{d&&(e[i]=d)}))}}async function Vb(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Bt.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Bt.error,error:i}}return{type:Bt.data,data:t.deferredData.data}}}function zb(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function tf(t,e){let n=typeof e=="string"?tl(e).search:e.search;if(t[t.length-1].route.index&&zb(n||""))return t[t.length-1];let r=GN(t);return r[r.length-1]}function jT(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:a}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:a,text:void 0}}}function Ay(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Z9(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Fh(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function J9(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function lo(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function e8(t,e){try{let n=t.sessionStorage.getItem(XN);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function t8(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(XN,JSON.stringify(n))}catch(r){jc(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cg(){return cg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cg.apply(this,arguments)}const sv=K.createContext(null),eI=K.createContext(null),av=K.createContext(null),Bb=K.createContext(null),nl=K.createContext({outlet:null,matches:[],isDataRoute:!1}),tI=K.createContext(null);function ov(){return K.useContext(Bb)!=null}function nI(){return ov()||_t(!1),K.useContext(Bb).location}function rI(t){K.useContext(av).static||K.useLayoutEffect(t)}function eh(){let{isDataRoute:t}=K.useContext(nl);return t?m8():n8()}function n8(){ov()||_t(!1);let t=K.useContext(sv),{basename:e,future:n,navigator:r}=K.useContext(av),{matches:i}=K.useContext(nl),{pathname:s}=nI(),a=JSON.stringify($N(i,n.v7_relativeSplatPath)),l=K.useRef(!1);return rI(()=>{l.current=!0}),K.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=YN(d,JSON.parse(a),s,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:jo([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,a,s,t])}const r8=K.createContext(null);function i8(t){let e=K.useContext(nl).outlet;return e&&K.createElement(r8.Provider,{value:t},e)}function iI(){let{matches:t}=K.useContext(nl),e=t[t.length-1];return e?e.params:{}}function s8(t,e,n,r){ov()||_t(!1);let{navigator:i}=K.useContext(av),{matches:s}=K.useContext(nl),a=s[s.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=nI(),f;f=d;let p=f.pathname||"/",m=p;if(c!=="/"){let C=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(C.length).join("/")}let y=Nl(t,{pathname:m});return c8(y&&y.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:jo([c,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:jo([c,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,n,r)}function a8(){let t=lI(),e=Pc(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),n?K.createElement("pre",{style:i},n):null,null)}const o8=K.createElement(a8,null);class l8 extends K.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?K.createElement(nl.Provider,{value:this.props.routeContext},K.createElement(tI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function u8(t){let{routeContext:e,match:n,children:r}=t,i=K.useContext(sv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),K.createElement(nl.Provider,{value:e},r)}function c8(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let f=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||_t(!1),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:m,errors:y}=n,E=p.route.loader&&m[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||E){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,p,m)=>{let y,E=!1,C=null,I=null;n&&(y=l&&p.route.id?l[p.route.id]:void 0,C=p.route.errorElement||o8,c&&(d<0&&m===0?(p8("route-fallback"),E=!0,I=null):d===m&&(E=!0,I=p.route.hydrateFallbackElement||null)));let A=e.concat(a.slice(0,m+1)),N=()=>{let M;return y?M=C:E?M=I:p.route.Component?M=K.createElement(p.route.Component,null):p.route.element?M=p.route.element:M=f,K.createElement(u8,{match:p,routeContext:{outlet:f,matches:A,isDataRoute:n!=null},children:M})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?K.createElement(l8,{location:n.location,revalidation:n.revalidation,component:C,error:y,children:N(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):N()},null)}var sI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(sI||{}),aI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(aI||{});function h8(t){let e=K.useContext(sv);return e||_t(!1),e}function f8(t){let e=K.useContext(eI);return e||_t(!1),e}function d8(t){let e=K.useContext(nl);return e||_t(!1),e}function oI(t){let e=d8(),n=e.matches[e.matches.length-1];return n.route.id||_t(!1),n.route.id}function lI(){var t;let e=K.useContext(tI),n=f8(aI.UseRouteError),r=oI();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function m8(){let{router:t}=h8(sI.UseNavigateStable),e=oI(),n=K.useRef(!1);return rI(()=>{n.current=!0}),K.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,cg({fromRouteId:e},s)))},[t,e])}const PT={};function p8(t,e,n){PT[t]||(PT[t]=!0)}function g8(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function uI(t){return i8(t.context)}function v8(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Fn.Pop,navigator:s,static:a=!1,future:l}=t;ov()&&_t(!1);let c=e.replace(/^\/*/,"/"),d=K.useMemo(()=>({basename:c,navigator:s,static:a,future:cg({v7_relativeSplatPath:!1},l)}),[c,l,s,a]);typeof r=="string"&&(r=tl(r));let{pathname:f="/",search:p="",hash:m="",state:y=null,key:E="default"}=r,C=K.useMemo(()=>{let I=vd(f,c);return I==null?null:{location:{pathname:I,search:p,hash:m,state:y,key:E},navigationType:i}},[c,f,p,m,y,E,i]);return C==null?null:K.createElement(av.Provider,{value:d},K.createElement(Bb.Provider,{children:n,value:C}))}new Promise(()=>{});function y8(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:K.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:K.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:K.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hg(){return hg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hg.apply(this,arguments)}const _8="6";try{window.__reactRouterVersion=_8}catch{}function b8(t,e){return j9({basename:void 0,future:hg({},void 0,{v7_prependBasename:!0}),history:a9({window:void 0}),hydrationData:w8(),routes:t,mapRouteProperties:y8,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function w8(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=hg({},e,{errors:x8(e.errors)})),e}function x8(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new ug(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let a=new s(i.message);a.stack="",n[r]=a}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const E8=K.createContext({isTransitioning:!1}),T8=K.createContext(new Map),A8="startTransition",UT=Tj[A8],S8="flushSync",VT=Ij[S8];function R8(t){UT?UT(t):t()}function Hh(t){VT?VT(t):t()}let C8=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function N8(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=K.useState(n.state),[a,l]=K.useState(),[c,d]=K.useState({isTransitioning:!1}),[f,p]=K.useState(),[m,y]=K.useState(),[E,C]=K.useState(),I=K.useRef(new Map),{v7_startTransition:A}=r||{},N=K.useCallback(_=>{A?R8(_):_()},[A]),M=K.useCallback((_,x)=>{let{deletedFetchers:S,flushSync:k,viewTransitionOpts:j}=x;_.fetchers.forEach((G,J)=>{G.data!==void 0&&I.current.set(J,G.data)}),S.forEach(G=>I.current.delete(G));let O=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!j||O){k?Hh(()=>s(_)):N(()=>s(_));return}if(k){Hh(()=>{m&&(f&&f.resolve(),m.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:j.currentLocation,nextLocation:j.nextLocation})});let G=n.window.document.startViewTransition(()=>{Hh(()=>s(_))});G.finished.finally(()=>{Hh(()=>{p(void 0),y(void 0),l(void 0),d({isTransitioning:!1})})}),Hh(()=>y(G));return}m?(f&&f.resolve(),m.skipTransition(),C({state:_,currentLocation:j.currentLocation,nextLocation:j.nextLocation})):(l(_),d({isTransitioning:!0,flushSync:!1,currentLocation:j.currentLocation,nextLocation:j.nextLocation}))},[n.window,m,f,I,N]);K.useLayoutEffect(()=>n.subscribe(M),[n,M]),K.useEffect(()=>{c.isTransitioning&&!c.flushSync&&p(new C8)},[c]),K.useEffect(()=>{if(f&&a&&n.window){let _=a,x=f.promise,S=n.window.document.startViewTransition(async()=>{N(()=>s(_)),await x});S.finished.finally(()=>{p(void 0),y(void 0),l(void 0),d({isTransitioning:!1})}),y(S)}},[N,a,f,n.window]),K.useEffect(()=>{f&&a&&i.location.key===a.location.key&&f.resolve()},[f,m,i.location,a]),K.useEffect(()=>{!c.isTransitioning&&E&&(l(E.state),d({isTransitioning:!0,flushSync:!1,currentLocation:E.currentLocation,nextLocation:E.nextLocation}),C(void 0))},[c.isTransitioning,E]),K.useEffect(()=>{},[]);let P=K.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:_=>n.navigate(_),push:(_,x,S)=>n.navigate(_,{state:x,preventScrollReset:S==null?void 0:S.preventScrollReset}),replace:(_,x,S)=>n.navigate(_,{replace:!0,state:x,preventScrollReset:S==null?void 0:S.preventScrollReset})}),[n]),q=n.basename||"/",L=K.useMemo(()=>({router:n,navigator:P,static:!1,basename:q}),[n,P,q]),T=K.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return K.useEffect(()=>g8(r,n.future),[r,n.future]),K.createElement(K.Fragment,null,K.createElement(sv.Provider,{value:L},K.createElement(eI.Provider,{value:i},K.createElement(T8.Provider,{value:I.current},K.createElement(E8.Provider,{value:c},K.createElement(v8,{basename:q,location:i.location,navigationType:i.historyAction,navigator:P,future:T},i.initialized||n.future.v7_partialHydration?K.createElement(I8,{routes:n.routes,future:n.future,state:i}):e))))),null)}const I8=K.memo(D8);function D8(t){let{routes:e,future:n,state:r}=t;return s8(e,void 0,r,n)}var zT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(zT||(zT={}));var BT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(BT||(BT={}));const O8=()=>{};var FT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},M8=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},hI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,f=s>>2,p=(s&3)<<4|l>>4;let m=(l&15)<<2|d>>6,y=d&63;c||(y=64,a||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):M8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||d==null||p==null)throw new k8;const m=s<<2|l>>4;if(r.push(m),d!==64){const y=l<<4&240|d>>2;if(r.push(y),p!==64){const E=d<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class k8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const L8=function(t){const e=cI(t);return hI.encodeByteArray(e,!0)},fg=function(t){return L8(t).replace(/\./g,"")},fI=function(t){try{return hI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8=()=>j8().__FIREBASE_DEFAULTS__,U8=()=>{if(typeof process>"u"||typeof FT>"u")return;const t=FT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},V8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fI(t[1]);return e&&JSON.parse(e)},lv=()=>{try{return O8()||P8()||U8()||V8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dI=t=>{var e,n;return(n=(e=lv())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Fb=t=>{const e=dI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mI=()=>{var t;return(t=lv())===null||t===void 0?void 0:t.config},pI=t=>{var e;return(e=lv())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function uv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fg(JSON.stringify(n)),fg(JSON.stringify(a)),""].join(".")}const xf={};function B8(){const t={prod:[],emulator:[]};for(const e of Object.keys(xf))xf[e]?t.emulator.push(e):t.prod.push(e);return t}function F8(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let HT=!1;function cv(t,e){if(typeof window>"u"||typeof document>"u"||!za(window.location.host)||xf[t]===e||xf[t]||HT)return;xf[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=B8().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{HT=!0,a()},m}function f(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=F8(r),y=n("text"),E=document.getElementById(y)||document.createElement("span"),C=n("learnmore"),I=document.getElementById(C)||document.createElement("a"),A=n("preprendIcon"),N=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const M=m.element;l(M),f(I,C);const P=d();c(N,A),M.append(N,E,I,P),document.body.appendChild(M)}s?(E.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function H8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mr())}function q8(){var t;const e=(t=lv())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function G8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Y8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function W8(){const t=Mr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function X8(){return!q8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function K8(){try{return typeof indexedDB=="object"}catch{return!1}}function Q8(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8="FirebaseError";class Ss extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Z8,Object.setPrototypeOf(this,Ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yd.prototype.create)}}class yd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?J8(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new Ss(i,l,r)}}function J8(t,e){return t.replace(eV,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const eV=/\{\$([^}]+)}/g;function tV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(qT(s)&&qT(a)){if(!Jl(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function qT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nV(t,e){const n=new rV(t,e);return n.subscribe.bind(n)}class rV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");iV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Sy),i.error===void 0&&(i.error=Sy),i.complete===void 0&&(i.complete=Sy);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(t){return t&&t._delegate?t._delegate:t}class Ma{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new z8;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oV(e))try{this.getOrInitializeService({instanceIdentifier:Cl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Cl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cl){return this.instances.has(e)}getOptions(e=Cl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cl){return this.component?this.component.multipleInstances?e:Cl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aV(t){return t===Cl?void 0:t}function oV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new sV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(mt||(mt={}));const uV={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},cV=mt.INFO,hV={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},fV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=hV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hb{constructor(e){this.name=e,this._logLevel=cV,this._logHandler=fV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...e),this._logHandler(this,mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...e),this._logHandler(this,mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...e),this._logHandler(this,mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...e),this._logHandler(this,mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...e),this._logHandler(this,mt.ERROR,...e)}}const dV=(t,e)=>e.some(n=>t instanceof n);let GT,$T;function mV(){return GT||(GT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pV(){return $T||($T=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vI=new WeakMap,Y_=new WeakMap,yI=new WeakMap,Ry=new WeakMap,qb=new WeakMap;function gV(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Po(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&vI.set(n,t)}).catch(()=>{}),qb.set(e,t),e}function vV(t){if(Y_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Y_.set(t,e)}let W_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Y_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Po(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yV(t){W_=t(W_)}function _V(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Cy(this),e,...n);return yI.set(r,e.sort?e.sort():[e]),Po(r)}:pV().includes(t)?function(...e){return t.apply(Cy(this),e),Po(vI.get(this))}:function(...e){return Po(t.apply(Cy(this),e))}}function bV(t){return typeof t=="function"?_V(t):(t instanceof IDBTransaction&&vV(t),dV(t,mV())?new Proxy(t,W_):t)}function Po(t){if(t instanceof IDBRequest)return gV(t);if(Ry.has(t))return Ry.get(t);const e=bV(t);return e!==t&&(Ry.set(t,e),qb.set(e,t)),e}const Cy=t=>qb.get(t);function wV(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=Po(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Po(a.result),c.oldVersion,c.newVersion,Po(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const xV=["get","getKey","getAll","getAllKeys","count"],EV=["put","add","delete","clear"],Ny=new Map;function YT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ny.get(e))return Ny.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=EV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||xV.includes(n)))return;const s=async function(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&c.done]))[0]};return Ny.set(e,s),s}yV(t=>({...t,get:(e,n,r)=>YT(e,n)||t.get(e,n,r),has:(e,n)=>!!YT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function AV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const X_="@firebase/app",WT="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=new Hb("@firebase/app"),SV="@firebase/app-compat",RV="@firebase/analytics-compat",CV="@firebase/analytics",NV="@firebase/app-check-compat",IV="@firebase/app-check",DV="@firebase/auth",OV="@firebase/auth-compat",MV="@firebase/database",kV="@firebase/data-connect",LV="@firebase/database-compat",jV="@firebase/functions",PV="@firebase/functions-compat",UV="@firebase/installations",VV="@firebase/installations-compat",zV="@firebase/messaging",BV="@firebase/messaging-compat",FV="@firebase/performance",HV="@firebase/performance-compat",qV="@firebase/remote-config",GV="@firebase/remote-config-compat",$V="@firebase/storage",YV="@firebase/storage-compat",WV="@firebase/firestore",XV="@firebase/ai",KV="@firebase/firestore-compat",QV="firebase",ZV="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="[DEFAULT]",JV={[X_]:"fire-core",[SV]:"fire-core-compat",[CV]:"fire-analytics",[RV]:"fire-analytics-compat",[IV]:"fire-app-check",[NV]:"fire-app-check-compat",[DV]:"fire-auth",[OV]:"fire-auth-compat",[MV]:"fire-rtdb",[kV]:"fire-data-connect",[LV]:"fire-rtdb-compat",[jV]:"fire-fn",[PV]:"fire-fn-compat",[UV]:"fire-iid",[VV]:"fire-iid-compat",[zV]:"fire-fcm",[BV]:"fire-fcm-compat",[FV]:"fire-perf",[HV]:"fire-perf-compat",[qV]:"fire-rc",[GV]:"fire-rc-compat",[$V]:"fire-gcs",[YV]:"fire-gcs-compat",[WV]:"fire-fst",[KV]:"fire-fst-compat",[XV]:"fire-vertex","fire-js":"fire-js",[QV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg=new Map,e7=new Map,Q_=new Map;function XT(t,e){try{t.container.addComponent(e)}catch(n){ka.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qo(t){const e=t.name;if(Q_.has(e))return ka.debug(`There were multiple attempts to register component ${e}.`),!1;Q_.set(e,t);for(const n of dg.values())XT(n,t);for(const n of e7.values())XT(n,t);return!0}function bd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Uo=new yd("app","Firebase",t7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Uo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=ZV;function _I(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:K_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Uo.create("bad-app-name",{appName:String(i)});if(n||(n=mI()),!n)throw Uo.create("no-options");const s=dg.get(i);if(s){if(Jl(n,s.options)&&Jl(r,s.config))return s;throw Uo.create("duplicate-app",{appName:i})}const a=new lV(i);for(const c of Q_.values())a.addComponent(c);const l=new n7(n,r,a);return dg.set(i,l),l}function hv(t=K_){const e=dg.get(t);if(!e&&t===K_&&mI())return _I();if(!e)throw Uo.create("no-app",{appName:t});return e}function ns(t,e,n){var r;let i=(r=JV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ka.warn(l.join(" "));return}qo(new Ma(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7="firebase-heartbeat-database",i7=1,Gf="firebase-heartbeat-store";let Iy=null;function bI(){return Iy||(Iy=wV(r7,i7,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gf)}catch(n){console.warn(n)}}}}).catch(t=>{throw Uo.create("idb-open",{originalErrorMessage:t.message})})),Iy}async function s7(t){try{const n=(await bI()).transaction(Gf),r=await n.objectStore(Gf).get(wI(t));return await n.done,r}catch(e){if(e instanceof Ss)ka.warn(e.message);else{const n=Uo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ka.warn(n.message)}}}async function KT(t,e){try{const r=(await bI()).transaction(Gf,"readwrite");await r.objectStore(Gf).put(e,wI(t)),await r.done}catch(n){if(n instanceof Ss)ka.warn(n.message);else{const r=Uo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ka.warn(r.message)}}}function wI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7=1024,o7=30;class l7{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new c7(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=QT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>o7){const a=h7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ka.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=QT(),{heartbeatsToSend:r,unsentEntries:i}=u7(this._heartbeatsCache.heartbeats),s=fg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ka.warn(n),""}}}function QT(){return new Date().toISOString().substring(0,10)}function u7(t,e=a7){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),ZT(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ZT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class c7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return K8()?Q8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await s7(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return KT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return KT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ZT(t){return fg(JSON.stringify({version:2,heartbeats:t})).length}function h7(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f7(t){qo(new Ma("platform-logger",e=>new TV(e),"PRIVATE")),qo(new Ma("heartbeat",e=>new l7(e),"PRIVATE")),ns(X_,WT,t),ns(X_,WT,"esm2017"),ns("fire-js","")}f7("");function Gb(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function xI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const d7=xI,EI=new yd("auth","Firebase",xI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=new Hb("@firebase/auth");function m7(t,...e){mg.logLevel<=mt.WARN&&mg.warn(`Auth (${cu}): ${t}`,...e)}function wp(t,...e){mg.logLevel<=mt.ERROR&&mg.error(`Auth (${cu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(t,...e){throw Yb(t,...e)}function Es(t,...e){return Yb(t,...e)}function $b(t,e,n){const r=Object.assign(Object.assign({},d7()),{[e]:n});return new yd("auth","Firebase",r).create(e,{appName:t.name})}function ql(t){return $b(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function p7(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ys(t,"argument-error"),$b(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yb(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return EI.create(t,...e)}function He(t,e,...n){if(!t)throw Yb(e,...n)}function Ta(t){const e="INTERNAL ASSERTION FAILED: "+t;throw wp(e),new Error(e)}function La(t,e){t||Ta(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function g7(){return JT()==="http:"||JT()==="https:"}function JT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(g7()||$8()||"connection"in navigator)?navigator.onLine:!0}function y7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n){this.shortDelay=e,this.longDelay=n,La(n>e,"Short delay should be less than long delay!"),this.isMobile=H8()||Y8()}get(){return v7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t,e){La(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ta("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ta("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ta("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],w7=new wd(3e4,6e4);function Xb(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function hu(t,e,n,r,i={}){return AI(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const l=_d(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},s);return G8()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&za(t.emulatorConfig.host)&&(d.credentials="include"),TI.fetch()(await SI(t,t.config.apiHost,n,l),d)})}async function AI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},_7),e);try{const i=new E7(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Xm(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xm(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Xm(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Xm(t,"user-disabled",a);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw $b(t,f,d);Ys(t,f)}}catch(i){if(i instanceof Ss)throw i;Ys(t,"network-request-failed",{message:String(i)})}}async function x7(t,e,n,r,i={}){const s=await hu(t,e,n,r,i);return"mfaPendingCredential"in s&&Ys(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function SI(t,e,n,r){const i=`${e}${n}?${r}`,s=t,a=s.config.emulator?Wb(t.config,i):`${t.config.apiScheme}://${i}`;return b7.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class E7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Es(this.auth,"network-request-failed")),w7.get())})}}function Xm(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Es(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T7(t,e){return hu(t,"POST","/v1/accounts:delete",e)}async function pg(t,e){return hu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function A7(t,e=!1){const n=Wt(t),r=await n.getIdToken(e),i=Kb(r);He(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ef(Dy(i.auth_time)),issuedAtTime:Ef(Dy(i.iat)),expirationTime:Ef(Dy(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Dy(t){return Number(t)*1e3}function Kb(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return wp("JWT malformed, contained fewer than 3 sections"),null;try{const i=fI(n);return i?JSON.parse(i):(wp("Failed to decode base64 JWT payload"),null)}catch(i){return wp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function eA(t){const e=Kb(t);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ss&&S7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function S7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ef(this.lastLoginAt),this.creationTime=Ef(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gg(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Uc(t,pg(n,{idToken:r}));He(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?RI(s.providerUserInfo):[],l=N7(t.providerData,a),c=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),f=c?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new J_(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function C7(t){const e=Wt(t);await gg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function N7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function RI(t){return t.map(e=>{var{providerId:n}=e,r=Gb(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I7(t,e){const n=await AI(t,{},async()=>{const r=_d({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=await SI(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&za(t.emulatorConfig.host)&&(c.credentials="include"),TI.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function D7(t,e){return hu(t,"POST","/v2/accounts:revokeToken",Xb(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){He(e.length!==0,"internal-error");const n=eA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await I7(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new _c;return r&&(He(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(He(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(He(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _c,this.toJSON())}_performRefresh(){return Ta("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t,e){He(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ws{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Gb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new R7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new J_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Uc(this,this.stsTokenManager.getToken(this.auth,e));return He(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return A7(this,e)}reload(){return C7(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ws(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await gg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wi(this.auth.app))return Promise.reject(ql(this.auth));const e=await this.getIdToken();return await Uc(this,T7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,l,c,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(a=n.photoURL)!==null&&a!==void 0?a:void 0,C=(l=n.tenantId)!==null&&l!==void 0?l:void 0,I=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,A=(d=n.createdAt)!==null&&d!==void 0?d:void 0,N=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:M,emailVerified:P,isAnonymous:q,providerData:L,stsTokenManager:T}=n;He(M&&T,e,"internal-error");const _=_c.fromJSON(this.name,T);He(typeof M=="string",e,"internal-error"),so(p,e.name),so(m,e.name),He(typeof P=="boolean",e,"internal-error"),He(typeof q=="boolean",e,"internal-error"),so(y,e.name),so(E,e.name),so(C,e.name),so(I,e.name),so(A,e.name),so(N,e.name);const x=new ws({uid:M,auth:e,email:m,emailVerified:P,displayName:p,isAnonymous:q,photoURL:E,phoneNumber:y,tenantId:C,stsTokenManager:_,createdAt:A,lastLoginAt:N});return L&&Array.isArray(L)&&(x.providerData=L.map(S=>Object.assign({},S))),I&&(x._redirectEventId=I),x}static async _fromIdTokenResponse(e,n,r=!1){const i=new _c;i.updateFromServerResponse(n);const s=new ws({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await gg(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];He(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?RI(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new _c;l.updateFromIdToken(r);const c=new ws({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new J_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=new Map;function Aa(t){La(t instanceof Function,"Expected a class definition");let e=tA.get(t);return e?(La(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}CI.type="NONE";const nA=CI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(t,e,n){return`firebase:${t}:${e}:${n}`}class bc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=xp(this.userKey,i.apiKey,s),this.fullPersistenceKey=xp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await pg(this.auth,{idToken:e}).catch(()=>{});return n?ws._fromGetAccountInfoResponse(this.auth,n,e):null}return ws._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new bc(Aa(nA),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Aa(nA);const a=xp(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(a);if(f){let p;if(typeof f=="string"){const m=await pg(e,{idToken:f}).catch(()=>{});if(!m)break;p=await ws._fromGetAccountInfoResponse(e,m,f)}else p=ws._fromJSON(e,f);d!==s&&(l=p),s=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new bc(s,e,r):(s=c[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new bc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kI(e))return"Blackberry";if(LI(e))return"Webos";if(II(e))return"Safari";if((e.includes("chrome/")||DI(e))&&!e.includes("edge/"))return"Chrome";if(MI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function NI(t=Mr()){return/firefox\//i.test(t)}function II(t=Mr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DI(t=Mr()){return/crios\//i.test(t)}function OI(t=Mr()){return/iemobile/i.test(t)}function MI(t=Mr()){return/android/i.test(t)}function kI(t=Mr()){return/blackberry/i.test(t)}function LI(t=Mr()){return/webos/i.test(t)}function Qb(t=Mr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function O7(t=Mr()){var e;return Qb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function M7(){return W8()&&document.documentMode===10}function jI(t=Mr()){return Qb(t)||MI(t)||LI(t)||kI(t)||/windows phone/i.test(t)||OI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t,e=[]){let n;switch(t){case"Browser":n=rA(Mr());break;case"Worker":n=`${rA(Mr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,l)=>{try{const c=e(s);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L7(t,e={}){return hu(t,"GET","/v2/passwordPolicy",Xb(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7=6;class P7{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:j7,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iA(this),this.idTokenSubscription=new iA(this),this.beforeStateQueue=new k7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Aa(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await bc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await pg(this,{idToken:e}),r=await ws._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(wi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await gg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=y7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wi(this.app))return Promise.reject(ql(this));const n=e?Wt(e):null;return n&&He(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wi(this.app)?Promise.reject(ql(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wi(this.app)?Promise.reject(ql(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Aa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await L7(this),n=new P7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await D7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Aa(e)||this._popupRedirectResolver;He(n,this,"argument-error"),this.redirectPersistenceManager=await bc.create(this,[Aa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(wi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&m7(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function fv(t){return Wt(t)}class iA{constructor(e){this.auth=e,this.observer=null,this.addObserver=nV(n=>this.observer=n)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function V7(t){Zb=t}function z7(t){return Zb.loadJS(t)}function B7(){return Zb.gapiScript}function F7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H7(t,e){const n=bd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Jl(s,e??{}))return i;Ys(i,"already-initialized")}return n.initialize({options:e})}function q7(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Aa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function G7(t,e,n){const r=fv(t);He(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=UI(e),{host:a,port:l}=$7(e),c=l===null?"":`:${l}`,d={url:`${s}//${a}${c}/`},f=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){He(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),He(Jl(d,r.config.emulator)&&Jl(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,za(a)?(uv(`${s}//${a}${c}`),cv("Auth",!0)):Y7()}function UI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $7(t){const e=UI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:sA(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:sA(a)}}}function sA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Y7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ta("not implemented")}_getIdTokenResponse(e){return Ta("not implemented")}_linkToIdToken(e,n){return Ta("not implemented")}_getReauthenticationResolver(e){return Ta("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wc(t,e){return x7(t,"POST","/v1/accounts:signInWithIdp",Xb(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W7="http://localhost";class eu extends VI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new eu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ys("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Gb(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new eu(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return wc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,wc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wc(e,n)}buildRequest(){const e={requestUri:W7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_d(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd extends Jb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go extends xd{constructor(){super("facebook.com")}static credential(e){return eu._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return go.credentialFromTaggedObject(e)}static credentialFromError(e){return go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return go.credential(e.oauthAccessToken)}catch{return null}}}go.FACEBOOK_SIGN_IN_METHOD="facebook.com";go.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends xd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return eu._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ya.credential(n,r)}catch{return null}}}ya.GOOGLE_SIGN_IN_METHOD="google.com";ya.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends xd{constructor(){super("github.com")}static credential(e){return eu._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vo.credentialFromTaggedObject(e)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vo.credential(e.oauthAccessToken)}catch{return null}}}vo.GITHUB_SIGN_IN_METHOD="github.com";vo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends xd{constructor(){super("twitter.com")}static credential(e,n){return eu._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return yo.credential(n,r)}catch{return null}}}yo.TWITTER_SIGN_IN_METHOD="twitter.com";yo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ws._fromIdTokenResponse(e,r,i),a=aA(r);return new Vc({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=aA(r);return new Vc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function aA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg extends Ss{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,vg.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new vg(e,n,r,i)}}function zI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?vg._fromErrorAndOperation(t,s,e,r):s})}async function X7(t,e,n=!1){const r=await Uc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Vc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K7(t,e,n=!1){const{auth:r}=t;if(wi(r.app))return Promise.reject(ql(r));const i="reauthenticate";try{const s=await Uc(t,zI(r,i,e,t),n);He(s.idToken,r,"internal-error");const a=Kb(s.idToken);He(a,r,"internal-error");const{sub:l}=a;return He(t.uid===l,r,"user-mismatch"),Vc._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ys(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q7(t,e,n=!1){if(wi(t.app))return Promise.reject(ql(t));const r="signIn",i=await zI(t,r,e),s=await Vc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z7(t,e){return hu(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J7(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Wt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Uc(r,Z7(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function ez(t,e,n,r){return Wt(t).onIdTokenChanged(e,n,r)}function tz(t,e,n){return Wt(t).beforeAuthStateChanged(e,n)}function nz(t,e,n,r){return Wt(t).onAuthStateChanged(e,n,r)}function rz(t){return Wt(t).signOut()}const yg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yg,"1"),this.storage.removeItem(yg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz=1e3,sz=10;class FI extends BI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);M7()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,sz):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},iz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}FI.type="LOCAL";const az=FI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI extends BI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}HI.type="SESSION";const qI=HI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oz(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new dv(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(a).map(async d=>d(n.origin,s)),c=await oz(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((l,c)=>{const d=ew("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(f),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(){return window}function uz(t){Bs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(){return typeof Bs().WorkerGlobalScope<"u"&&typeof Bs().importScripts=="function"}async function cz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hz(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function fz(){return GI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="firebaseLocalStorageDb",dz=1,_g="firebaseLocalStorage",YI="fbase_key";class Ed{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mv(t,e){return t.transaction([_g],e?"readwrite":"readonly").objectStore(_g)}function mz(){const t=indexedDB.deleteDatabase($I);return new Ed(t).toPromise()}function e1(){const t=indexedDB.open($I,dz);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(_g,{keyPath:YI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(_g)?e(r):(r.close(),await mz(),e(await e1()))})})}async function oA(t,e,n){const r=mv(t,!0).put({[YI]:e,value:n});return new Ed(r).toPromise()}async function pz(t,e){const n=mv(t,!1).get(e),r=await new Ed(n).toPromise();return r===void 0?null:r.value}function lA(t,e){const n=mv(t,!0).delete(e);return new Ed(n).toPromise()}const gz=800,vz=3;class WI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await e1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vz)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dv._getInstance(fz()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await cz(),!this.activeServiceWorker)return;this.sender=new lz(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await e1();return await oA(e,yg,"1"),await lA(e,yg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>oA(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>pz(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>lA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=mv(i,!1).getAll();return new Ed(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WI.type="LOCAL";const yz=WI;new wd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t,e){return e?Aa(e):(He(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw extends VI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _z(t){return Q7(t.auth,new tw(t),t.bypassAuthState)}function bz(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),K7(n,new tw(t),t.bypassAuthState)}async function wz(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),X7(n,new tw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _z;case"linkViaPopup":case"linkViaRedirect":return wz;case"reauthViaPopup":case"reauthViaRedirect":return bz;default:Ys(this.auth,"internal-error")}}resolve(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz=new wd(2e3,1e4);async function Ez(t,e,n){if(wi(t.app))return Promise.reject(Es(t,"operation-not-supported-in-this-environment"));const r=fv(t);p7(t,e,Jb);const i=XI(r,n);return new kl(r,"signInViaPopup",e,i).executeNotNull()}class kl extends KI{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,kl.currentPopupAction&&kl.currentPopupAction.cancel(),kl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return He(e,this.auth,"internal-error"),e}async onExecution(){La(this.filter.length===1,"Popup operations only handle one event");const e=ew();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xz.get())};e()}}kl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tz="pendingRedirect",Ep=new Map;class Az extends KI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ep.get(this.auth._key());if(!e){try{const r=await Sz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ep.set(this.auth._key(),e)}return this.bypassAuthState||Ep.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Sz(t,e){const n=Nz(e),r=Cz(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Rz(t,e){Ep.set(t._key(),e)}function Cz(t){return Aa(t._redirectPersistence)}function Nz(t){return xp(Tz,t.config.apiKey,t.name)}async function Iz(t,e,n=!1){if(wi(t.app))return Promise.reject(ql(t));const r=fv(t),i=XI(r,e),a=await new Az(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dz=10*60*1e3;class Oz{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Mz(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!QI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Es(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Dz&&this.cachedEventUids.clear(),this.cachedEventUids.has(uA(e))}saveEventToCache(e){this.cachedEventUids.add(uA(e)),this.lastProcessedEventTime=Date.now()}}function uA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Mz(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kz(t,e={}){return hu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jz=/^https?/;async function Pz(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kz(t);for(const n of e)try{if(Uz(n))return}catch{}Ys(t,"unauthorized-domain")}function Uz(t){const e=Z_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!jz.test(n))return!1;if(Lz.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vz=new wd(3e4,6e4);function cA(){const t=Bs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function zz(t){return new Promise((e,n)=>{var r,i,s;function a(){cA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cA(),n(Es(t,"network-request-failed"))},timeout:Vz.get()})}if(!((i=(r=Bs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Bs().gapi)===null||s===void 0)&&s.load)a();else{const l=F7("iframefcb");return Bs()[l]=()=>{gapi.load?a():n(Es(t,"network-request-failed"))},z7(`${B7()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Tp=null,e})}let Tp=null;function Bz(t){return Tp=Tp||zz(t),Tp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fz=new wd(5e3,15e3),Hz="__/auth/iframe",qz="emulator/auth/iframe",Gz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$z=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yz(t){const e=t.config;He(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Wb(e,qz):`https://${t.config.authDomain}/${Hz}`,r={apiKey:e.apiKey,appName:t.name,v:cu},i=$z.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_d(r).slice(1)}`}async function Wz(t){const e=await Bz(t),n=Bs().gapi;return He(n,t,"internal-error"),e.open({where:document.body,url:Yz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gz,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Es(t,"network-request-failed"),l=Bs().setTimeout(()=>{s(a)},Fz.get());function c(){Bs().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Kz=500,Qz=600,Zz="_blank",Jz="http://localhost";class hA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eB(t,e,n,r=Kz,i=Qz){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Xz),{width:r.toString(),height:i.toString(),top:s,left:a}),d=Mr().toLowerCase();n&&(l=DI(d)?Zz:n),NI(d)&&(e=e||Jz,c.scrollbars="yes");const f=Object.entries(c).reduce((m,[y,E])=>`${m}${y}=${E},`,"");if(O7(d)&&l!=="_self")return tB(e||"",l),new hA(null);const p=window.open(e||"",l,f);He(p,t,"popup-blocked");try{p.focus()}catch{}return new hA(p)}function tB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB="__/auth/handler",rB="emulator/auth/handler",iB=encodeURIComponent("fac");async function fA(t,e,n,r,i,s){He(t.config.authDomain,t,"auth-domain-config-required"),He(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:cu,eventId:i};if(e instanceof Jb){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",tV(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))a[f]=p}if(e instanceof xd){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),d=c?`#${iB}=${encodeURIComponent(c)}`:"";return`${sB(t)}?${_d(l).slice(1)}${d}`}function sB({config:t}){return t.emulator?Wb(t,rB):`https://${t.authDomain}/${nB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="webStorageSupport";class aB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qI,this._completeRedirectFn=Iz,this._overrideRedirectResult=Rz}async _openPopup(e,n,r,i){var s;La((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await fA(e,n,r,Z_(),i);return eB(e,a,ew())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await fA(e,n,r,Z_(),i);return uz(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(La(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Wz(e),r=new Oz(e);return n.register("authEvent",i=>(He(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Oy,{type:Oy},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Oy];a!==void 0&&n(!!a),Ys(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Pz(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jI()||II()||Qb()}}const oB=aB;var dA="@firebase/auth",mA="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cB(t){qo(new Ma("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;He(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PI(t)},d=new U7(r,i,s,c);return q7(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qo(new Ma("auth-internal",e=>{const n=fv(e.getProvider("auth").getImmediate());return(r=>new lB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ns(dA,mA,uB(t)),ns(dA,mA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hB=5*60,fB=pI("authIdTokenMaxAge")||hB;let pA=null;const dB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>fB)return;const i=n==null?void 0:n.token;pA!==i&&(pA=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function mB(t=hv()){const e=bd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=H7(t,{popupRedirectResolver:oB,persistence:[yz,az,qI]}),r=pI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=dB(s.toString());tz(n,a,()=>a(n.currentUser)),ez(n,l=>a(l))}}const i=dI("auth");return i&&G7(n,`http://${i}`),n}function pB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}V7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Es("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",pB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cB("Browser");var gB="firebase",vB="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ns(gB,vB,"app");var gA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vo,ZI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,_){function x(){}x.prototype=_.prototype,T.D=_.prototype,T.prototype=new x,T.prototype.constructor=T,T.C=function(S,k,j){for(var O=Array(arguments.length-2),G=2;G<arguments.length;G++)O[G-2]=arguments[G];return _.prototype[k].apply(S,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,x){x||(x=0);var S=Array(16);if(typeof _=="string")for(var k=0;16>k;++k)S[k]=_.charCodeAt(x++)|_.charCodeAt(x++)<<8|_.charCodeAt(x++)<<16|_.charCodeAt(x++)<<24;else for(k=0;16>k;++k)S[k]=_[x++]|_[x++]<<8|_[x++]<<16|_[x++]<<24;_=T.g[0],x=T.g[1],k=T.g[2];var j=T.g[3],O=_+(j^x&(k^j))+S[0]+3614090360&4294967295;_=x+(O<<7&4294967295|O>>>25),O=j+(k^_&(x^k))+S[1]+3905402710&4294967295,j=_+(O<<12&4294967295|O>>>20),O=k+(x^j&(_^x))+S[2]+606105819&4294967295,k=j+(O<<17&4294967295|O>>>15),O=x+(_^k&(j^_))+S[3]+3250441966&4294967295,x=k+(O<<22&4294967295|O>>>10),O=_+(j^x&(k^j))+S[4]+4118548399&4294967295,_=x+(O<<7&4294967295|O>>>25),O=j+(k^_&(x^k))+S[5]+1200080426&4294967295,j=_+(O<<12&4294967295|O>>>20),O=k+(x^j&(_^x))+S[6]+2821735955&4294967295,k=j+(O<<17&4294967295|O>>>15),O=x+(_^k&(j^_))+S[7]+4249261313&4294967295,x=k+(O<<22&4294967295|O>>>10),O=_+(j^x&(k^j))+S[8]+1770035416&4294967295,_=x+(O<<7&4294967295|O>>>25),O=j+(k^_&(x^k))+S[9]+2336552879&4294967295,j=_+(O<<12&4294967295|O>>>20),O=k+(x^j&(_^x))+S[10]+4294925233&4294967295,k=j+(O<<17&4294967295|O>>>15),O=x+(_^k&(j^_))+S[11]+2304563134&4294967295,x=k+(O<<22&4294967295|O>>>10),O=_+(j^x&(k^j))+S[12]+1804603682&4294967295,_=x+(O<<7&4294967295|O>>>25),O=j+(k^_&(x^k))+S[13]+4254626195&4294967295,j=_+(O<<12&4294967295|O>>>20),O=k+(x^j&(_^x))+S[14]+2792965006&4294967295,k=j+(O<<17&4294967295|O>>>15),O=x+(_^k&(j^_))+S[15]+1236535329&4294967295,x=k+(O<<22&4294967295|O>>>10),O=_+(k^j&(x^k))+S[1]+4129170786&4294967295,_=x+(O<<5&4294967295|O>>>27),O=j+(x^k&(_^x))+S[6]+3225465664&4294967295,j=_+(O<<9&4294967295|O>>>23),O=k+(_^x&(j^_))+S[11]+643717713&4294967295,k=j+(O<<14&4294967295|O>>>18),O=x+(j^_&(k^j))+S[0]+3921069994&4294967295,x=k+(O<<20&4294967295|O>>>12),O=_+(k^j&(x^k))+S[5]+3593408605&4294967295,_=x+(O<<5&4294967295|O>>>27),O=j+(x^k&(_^x))+S[10]+38016083&4294967295,j=_+(O<<9&4294967295|O>>>23),O=k+(_^x&(j^_))+S[15]+3634488961&4294967295,k=j+(O<<14&4294967295|O>>>18),O=x+(j^_&(k^j))+S[4]+3889429448&4294967295,x=k+(O<<20&4294967295|O>>>12),O=_+(k^j&(x^k))+S[9]+568446438&4294967295,_=x+(O<<5&4294967295|O>>>27),O=j+(x^k&(_^x))+S[14]+3275163606&4294967295,j=_+(O<<9&4294967295|O>>>23),O=k+(_^x&(j^_))+S[3]+4107603335&4294967295,k=j+(O<<14&4294967295|O>>>18),O=x+(j^_&(k^j))+S[8]+1163531501&4294967295,x=k+(O<<20&4294967295|O>>>12),O=_+(k^j&(x^k))+S[13]+2850285829&4294967295,_=x+(O<<5&4294967295|O>>>27),O=j+(x^k&(_^x))+S[2]+4243563512&4294967295,j=_+(O<<9&4294967295|O>>>23),O=k+(_^x&(j^_))+S[7]+1735328473&4294967295,k=j+(O<<14&4294967295|O>>>18),O=x+(j^_&(k^j))+S[12]+2368359562&4294967295,x=k+(O<<20&4294967295|O>>>12),O=_+(x^k^j)+S[5]+4294588738&4294967295,_=x+(O<<4&4294967295|O>>>28),O=j+(_^x^k)+S[8]+2272392833&4294967295,j=_+(O<<11&4294967295|O>>>21),O=k+(j^_^x)+S[11]+1839030562&4294967295,k=j+(O<<16&4294967295|O>>>16),O=x+(k^j^_)+S[14]+4259657740&4294967295,x=k+(O<<23&4294967295|O>>>9),O=_+(x^k^j)+S[1]+2763975236&4294967295,_=x+(O<<4&4294967295|O>>>28),O=j+(_^x^k)+S[4]+1272893353&4294967295,j=_+(O<<11&4294967295|O>>>21),O=k+(j^_^x)+S[7]+4139469664&4294967295,k=j+(O<<16&4294967295|O>>>16),O=x+(k^j^_)+S[10]+3200236656&4294967295,x=k+(O<<23&4294967295|O>>>9),O=_+(x^k^j)+S[13]+681279174&4294967295,_=x+(O<<4&4294967295|O>>>28),O=j+(_^x^k)+S[0]+3936430074&4294967295,j=_+(O<<11&4294967295|O>>>21),O=k+(j^_^x)+S[3]+3572445317&4294967295,k=j+(O<<16&4294967295|O>>>16),O=x+(k^j^_)+S[6]+76029189&4294967295,x=k+(O<<23&4294967295|O>>>9),O=_+(x^k^j)+S[9]+3654602809&4294967295,_=x+(O<<4&4294967295|O>>>28),O=j+(_^x^k)+S[12]+3873151461&4294967295,j=_+(O<<11&4294967295|O>>>21),O=k+(j^_^x)+S[15]+530742520&4294967295,k=j+(O<<16&4294967295|O>>>16),O=x+(k^j^_)+S[2]+3299628645&4294967295,x=k+(O<<23&4294967295|O>>>9),O=_+(k^(x|~j))+S[0]+4096336452&4294967295,_=x+(O<<6&4294967295|O>>>26),O=j+(x^(_|~k))+S[7]+1126891415&4294967295,j=_+(O<<10&4294967295|O>>>22),O=k+(_^(j|~x))+S[14]+2878612391&4294967295,k=j+(O<<15&4294967295|O>>>17),O=x+(j^(k|~_))+S[5]+4237533241&4294967295,x=k+(O<<21&4294967295|O>>>11),O=_+(k^(x|~j))+S[12]+1700485571&4294967295,_=x+(O<<6&4294967295|O>>>26),O=j+(x^(_|~k))+S[3]+2399980690&4294967295,j=_+(O<<10&4294967295|O>>>22),O=k+(_^(j|~x))+S[10]+4293915773&4294967295,k=j+(O<<15&4294967295|O>>>17),O=x+(j^(k|~_))+S[1]+2240044497&4294967295,x=k+(O<<21&4294967295|O>>>11),O=_+(k^(x|~j))+S[8]+1873313359&4294967295,_=x+(O<<6&4294967295|O>>>26),O=j+(x^(_|~k))+S[15]+4264355552&4294967295,j=_+(O<<10&4294967295|O>>>22),O=k+(_^(j|~x))+S[6]+2734768916&4294967295,k=j+(O<<15&4294967295|O>>>17),O=x+(j^(k|~_))+S[13]+1309151649&4294967295,x=k+(O<<21&4294967295|O>>>11),O=_+(k^(x|~j))+S[4]+4149444226&4294967295,_=x+(O<<6&4294967295|O>>>26),O=j+(x^(_|~k))+S[11]+3174756917&4294967295,j=_+(O<<10&4294967295|O>>>22),O=k+(_^(j|~x))+S[2]+718787259&4294967295,k=j+(O<<15&4294967295|O>>>17),O=x+(j^(k|~_))+S[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(k+(O<<21&4294967295|O>>>11))&4294967295,T.g[2]=T.g[2]+k&4294967295,T.g[3]=T.g[3]+j&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var x=_-this.blockSize,S=this.B,k=this.h,j=0;j<_;){if(k==0)for(;j<=x;)i(this,T,j),j+=this.blockSize;if(typeof T=="string"){for(;j<_;)if(S[k++]=T.charCodeAt(j++),k==this.blockSize){i(this,S),k=0;break}}else for(;j<_;)if(S[k++]=T[j++],k==this.blockSize){i(this,S),k=0;break}}this.h=k,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var x=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=x&255,x/=256;for(this.u(T),T=Array(16),_=x=0;4>_;++_)for(var S=0;32>S;S+=8)T[x++]=this.g[_]>>>S&255;return T};function s(T,_){var x=l;return Object.prototype.hasOwnProperty.call(x,T)?x[T]:x[T]=_(T)}function a(T,_){this.h=_;for(var x=[],S=!0,k=T.length-1;0<=k;k--){var j=T[k]|0;S&&j==_||(x[k]=j,S=!1)}this.g=x}var l={};function c(T){return-128<=T&&128>T?s(T,function(_){return new a([_|0],0>_?-1:0)}):new a([T|0],0>T?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return I(d(-T));for(var _=[],x=1,S=0;T>=x;S++)_[S]=T/x|0,x*=4294967296;return new a(_,0)}function f(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return I(f(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=d(Math.pow(_,8)),S=p,k=0;k<T.length;k+=8){var j=Math.min(8,T.length-k),O=parseInt(T.substring(k,k+j),_);8>j?(j=d(Math.pow(_,j)),S=S.j(j).add(d(O))):(S=S.j(x),S=S.add(d(O)))}return S}var p=c(0),m=c(1),y=c(16777216);t=a.prototype,t.m=function(){if(C(this))return-I(this).m();for(var T=0,_=1,x=0;x<this.g.length;x++){var S=this.i(x);T+=(0<=S?S:4294967296+S)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(C(this))return"-"+I(this).toString(T);for(var _=d(Math.pow(T,6)),x=this,S="";;){var k=P(x,_).g;x=A(x,k.j(_));var j=((0<x.g.length?x.g[0]:x.h)>>>0).toString(T);if(x=k,E(x))return j+S;for(;6>j.length;)j="0"+j;S=j+S}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function C(T){return T.h==-1}t.l=function(T){return T=A(this,T),C(T)?-1:E(T)?0:1};function I(T){for(var _=T.g.length,x=[],S=0;S<_;S++)x[S]=~T.g[S];return new a(x,~T.h).add(m)}t.abs=function(){return C(this)?I(this):this},t.add=function(T){for(var _=Math.max(this.g.length,T.g.length),x=[],S=0,k=0;k<=_;k++){var j=S+(this.i(k)&65535)+(T.i(k)&65535),O=(j>>>16)+(this.i(k)>>>16)+(T.i(k)>>>16);S=O>>>16,j&=65535,O&=65535,x[k]=O<<16|j}return new a(x,x[x.length-1]&-2147483648?-1:0)};function A(T,_){return T.add(I(_))}t.j=function(T){if(E(this)||E(T))return p;if(C(this))return C(T)?I(this).j(I(T)):I(I(this).j(T));if(C(T))return I(this.j(I(T)));if(0>this.l(y)&&0>T.l(y))return d(this.m()*T.m());for(var _=this.g.length+T.g.length,x=[],S=0;S<2*_;S++)x[S]=0;for(S=0;S<this.g.length;S++)for(var k=0;k<T.g.length;k++){var j=this.i(S)>>>16,O=this.i(S)&65535,G=T.i(k)>>>16,J=T.i(k)&65535;x[2*S+2*k]+=O*J,N(x,2*S+2*k),x[2*S+2*k+1]+=j*J,N(x,2*S+2*k+1),x[2*S+2*k+1]+=O*G,N(x,2*S+2*k+1),x[2*S+2*k+2]+=j*G,N(x,2*S+2*k+2)}for(S=0;S<_;S++)x[S]=x[2*S+1]<<16|x[2*S];for(S=_;S<2*_;S++)x[S]=0;return new a(x,0)};function N(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function M(T,_){this.g=T,this.h=_}function P(T,_){if(E(_))throw Error("division by zero");if(E(T))return new M(p,p);if(C(T))return _=P(I(T),_),new M(I(_.g),I(_.h));if(C(_))return _=P(T,I(_)),new M(I(_.g),_.h);if(30<T.g.length){if(C(T)||C(_))throw Error("slowDivide_ only works with positive integers.");for(var x=m,S=_;0>=S.l(T);)x=q(x),S=q(S);var k=L(x,1),j=L(S,1);for(S=L(S,2),x=L(x,2);!E(S);){var O=j.add(S);0>=O.l(T)&&(k=k.add(x),j=O),S=L(S,1),x=L(x,1)}return _=A(T,k.j(_)),new M(k,_)}for(k=p;0<=T.l(_);){for(x=Math.max(1,Math.floor(T.m()/_.m())),S=Math.ceil(Math.log(x)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),j=d(x),O=j.j(_);C(O)||0<O.l(T);)x-=S,j=d(x),O=j.j(_);E(j)&&(j=m),k=k.add(j),T=A(T,O)}return new M(k,T)}t.A=function(T){return P(this,T).h},t.and=function(T){for(var _=Math.max(this.g.length,T.g.length),x=[],S=0;S<_;S++)x[S]=this.i(S)&T.i(S);return new a(x,this.h&T.h)},t.or=function(T){for(var _=Math.max(this.g.length,T.g.length),x=[],S=0;S<_;S++)x[S]=this.i(S)|T.i(S);return new a(x,this.h|T.h)},t.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),x=[],S=0;S<_;S++)x[S]=this.i(S)^T.i(S);return new a(x,this.h^T.h)};function q(T){for(var _=T.g.length+1,x=[],S=0;S<_;S++)x[S]=T.i(S)<<1|T.i(S-1)>>>31;return new a(x,T.h)}function L(T,_){var x=_>>5;_%=32;for(var S=T.g.length-x,k=[],j=0;j<S;j++)k[j]=0<_?T.i(j+x)>>>_|T.i(j+x+1)<<32-_:T.i(j+x);return new a(k,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ZI=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,Vo=a}).apply(typeof gA<"u"?gA:typeof self<"u"?self:typeof window<"u"?window:{});var Km=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JI,nf,e4,Ap,t1,t4,n4,r4;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,b,R){return h==Array.prototype||h==Object.prototype||(h[b]=R.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Km=="object"&&Km];for(var b=0;b<h.length;++b){var R=h[b];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=n(this);function i(h,b){if(b)e:{var R=r;h=h.split(".");for(var B=0;B<h.length-1;B++){var re=h[B];if(!(re in R))break e;R=R[re]}h=h[h.length-1],B=R[h],b=b(B),b!=B&&b!=null&&e(R,h,{configurable:!0,writable:!0,value:b})}}function s(h,b){h instanceof String&&(h+="");var R=0,B=!1,re={next:function(){if(!B&&R<h.length){var oe=R++;return{value:b(oe,h[oe]),done:!1}}return B=!0,{done:!0,value:void 0}}};return re[Symbol.iterator]=function(){return re},re}i("Array.prototype.values",function(h){return h||function(){return s(this,function(b,R){return R})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(h){var b=typeof h;return b=b!="object"?b:h?Array.isArray(h)?"array":b:"null",b=="array"||b=="object"&&typeof h.length=="number"}function d(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function f(h,b,R){return h.call.apply(h.bind,arguments)}function p(h,b,R){if(!h)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var re=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(re,B),h.apply(b,re)}}return function(){return h.apply(b,arguments)}}function m(h,b,R){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function y(h,b){var R=Array.prototype.slice.call(arguments,1);return function(){var B=R.slice();return B.push.apply(B,arguments),h.apply(this,B)}}function E(h,b){function R(){}R.prototype=b.prototype,h.aa=b.prototype,h.prototype=new R,h.prototype.constructor=h,h.Qb=function(B,re,oe){for(var _e=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)_e[Ct-2]=arguments[Ct];return b.prototype[re].apply(B,_e)}}function C(h){const b=h.length;if(0<b){const R=Array(b);for(let B=0;B<b;B++)R[B]=h[B];return R}return[]}function I(h,b){for(let R=1;R<arguments.length;R++){const B=arguments[R];if(c(B)){const re=h.length||0,oe=B.length||0;h.length=re+oe;for(let _e=0;_e<oe;_e++)h[re+_e]=B[_e]}else h.push(B)}}class A{constructor(b,R){this.i=b,this.j=R,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function N(h){return/^[\s\xa0]*$/.test(h)}function M(){var h=l.navigator;return h&&(h=h.userAgent)?h:""}function P(h){return P[" "](h),h}P[" "]=function(){};var q=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function L(h,b,R){for(const B in h)b.call(R,h[B],B,h)}function T(h,b){for(const R in h)b.call(void 0,h[R],R,h)}function _(h){const b={};for(const R in h)b[R]=h[R];return b}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(h,b){let R,B;for(let re=1;re<arguments.length;re++){B=arguments[re];for(R in B)h[R]=B[R];for(let oe=0;oe<x.length;oe++)R=x[oe],Object.prototype.hasOwnProperty.call(B,R)&&(h[R]=B[R])}}function k(h){var b=1;h=h.split(":");const R=[];for(;0<b&&h.length;)R.push(h.shift()),b--;return h.length&&R.push(h.join(":")),R}function j(h){l.setTimeout(()=>{throw h},0)}function O(){var h=ee;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class G{constructor(){this.h=this.g=null}add(b,R){const B=J.get();B.set(b,R),this.h?this.h.next=B:this.g=B,this.h=B}}var J=new A(()=>new z,h=>h.reset());class z{constructor(){this.next=this.g=this.h=null}set(b,R){this.h=b,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let U,Q=!1,ee=new G,ae=()=>{const h=l.Promise.resolve(void 0);U=()=>{h.then(be)}};var be=()=>{for(var h;h=O();){try{h.h.call(h.g)}catch(R){j(R)}var b=J;b.j(h),100>b.h&&(b.h++,h.next=b.g,b.g=h)}Q=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const R=()=>{};l.addEventListener("test",R,b),l.removeEventListener("test",R,b)}catch{}return h}();function X(h,b){if(ye.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var R=this.type=h.type,B=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget){if(q){e:{try{P(b.nodeName);var re=!0;break e}catch{}re=!1}re||(b=null)}}else R=="mouseover"?b=h.fromElement:R=="mouseout"&&(b=h.toElement);this.relatedTarget=b,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ce[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&X.aa.h.call(this)}}E(X,ye);var ce={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),ke=0;function $e(h,b,R,B,re){this.listener=h,this.proxy=null,this.src=b,this.type=R,this.capture=!!B,this.ha=re,this.key=++ke,this.da=this.fa=!1}function je(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function gt(h){this.src=h,this.g={},this.h=0}gt.prototype.add=function(h,b,R,B,re){var oe=h.toString();h=this.g[oe],h||(h=this.g[oe]=[],this.h++);var _e=In(h,b,B,re);return-1<_e?(b=h[_e],R||(b.fa=!1)):(b=new $e(b,this.src,oe,!!B,re),b.fa=R,h.push(b)),b};function Ye(h,b){var R=b.type;if(R in h.g){var B=h.g[R],re=Array.prototype.indexOf.call(B,b,void 0),oe;(oe=0<=re)&&Array.prototype.splice.call(B,re,1),oe&&(je(b),h.g[R].length==0&&(delete h.g[R],h.h--))}}function In(h,b,R,B){for(var re=0;re<h.length;++re){var oe=h[re];if(!oe.da&&oe.listener==b&&oe.capture==!!R&&oe.ha==B)return re}return-1}var Pt="closure_lm_"+(1e6*Math.random()|0),bt={};function Ut(h,b,R,B,re){if(Array.isArray(b)){for(var oe=0;oe<b.length;oe++)Ut(h,b[oe],R,B,re);return null}return R=Ht(R),h&&h[Oe]?h.K(b,R,d(B)?!!B.capture:!1,re):it(h,b,R,!1,B,re)}function it(h,b,R,B,re,oe){if(!b)throw Error("Invalid event type");var _e=d(re)?!!re.capture:!!re,Ct=At(h);if(Ct||(h[Pt]=Ct=new gt(h)),R=Ct.add(b,R,B,_e,oe),R.proxy)return R;if(B=Et(),R.proxy=B,B.src=h,B.listener=R,h.addEventListener)W||(re=_e),re===void 0&&(re=!1),h.addEventListener(b.toString(),B,re);else if(h.attachEvent)h.attachEvent(st(b.toString()),B);else if(h.addListener&&h.removeListener)h.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Et(){function h(R){return b.call(h.src,h.listener,R)}const b=yn;return h}function rn(h,b,R,B,re){if(Array.isArray(b))for(var oe=0;oe<b.length;oe++)rn(h,b[oe],R,B,re);else B=d(B)?!!B.capture:!!B,R=Ht(R),h&&h[Oe]?(h=h.i,b=String(b).toString(),b in h.g&&(oe=h.g[b],R=In(oe,R,B,re),-1<R&&(je(oe[R]),Array.prototype.splice.call(oe,R,1),oe.length==0&&(delete h.g[b],h.h--)))):h&&(h=At(h))&&(b=h.g[b.toString()],h=-1,b&&(h=In(b,R,B,re)),(R=-1<h?b[h]:null)&&Xt(R))}function Xt(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[Oe])Ye(b.i,h);else{var R=h.type,B=h.proxy;b.removeEventListener?b.removeEventListener(R,B,h.capture):b.detachEvent?b.detachEvent(st(R),B):b.addListener&&b.removeListener&&b.removeListener(B),(R=At(b))?(Ye(R,h),R.h==0&&(R.src=null,b[Pt]=null)):je(h)}}}function st(h){return h in bt?bt[h]:bt[h]="on"+h}function yn(h,b){if(h.da)h=!0;else{b=new X(b,this);var R=h.listener,B=h.ha||h.src;h.fa&&Xt(h),h=R.call(B,b)}return h}function At(h){return h=h[Pt],h instanceof gt?h:null}var et="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ht(h){return typeof h=="function"?h:(h[et]||(h[et]=function(b){return h.handleEvent(b)}),h[et])}function Ot(){pe.call(this),this.i=new gt(this),this.M=this,this.F=null}E(Ot,pe),Ot.prototype[Oe]=!0,Ot.prototype.removeEventListener=function(h,b,R,B){rn(this,h,b,R,B)};function Mt(h,b){var R,B=h.F;if(B)for(R=[];B;B=B.F)R.push(B);if(h=h.M,B=b.type||b,typeof b=="string")b=new ye(b,h);else if(b instanceof ye)b.target=b.target||h;else{var re=b;b=new ye(B,h),S(b,re)}if(re=!0,R)for(var oe=R.length-1;0<=oe;oe--){var _e=b.g=R[oe];re=at(_e,B,!0,b)&&re}if(_e=b.g=h,re=at(_e,B,!0,b)&&re,re=at(_e,B,!1,b)&&re,R)for(oe=0;oe<R.length;oe++)_e=b.g=R[oe],re=at(_e,B,!1,b)&&re}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var h=this.i,b;for(b in h.g){for(var R=h.g[b],B=0;B<R.length;B++)je(R[B]);delete h.g[b],h.h--}}this.F=null},Ot.prototype.K=function(h,b,R,B){return this.i.add(String(h),b,!1,R,B)},Ot.prototype.L=function(h,b,R,B){return this.i.add(String(h),b,!0,R,B)};function at(h,b,R,B){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();for(var re=!0,oe=0;oe<b.length;++oe){var _e=b[oe];if(_e&&!_e.da&&_e.capture==R){var Ct=_e.listener,Qn=_e.ha||_e.src;_e.fa&&Ye(h.i,_e),re=Ct.call(Qn,B)!==!1&&re}}return re&&!B.defaultPrevented}function un(h,b,R){if(typeof h=="function")R&&(h=m(h,R));else if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:l.setTimeout(h,b||0)}function sn(h){h.g=un(()=>{h.g=null,h.i&&(h.i=!1,sn(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class xn extends pe{constructor(b,R){super(),this.m=b,this.l=R,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:sn(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cn(h){pe.call(this),this.h=h,this.g={}}E(cn,pe);var an=[];function Pn(h){L(h.g,function(b,R){this.g.hasOwnProperty(R)&&Xt(b)},h),h.g={}}cn.prototype.N=function(){cn.aa.N.call(this),Pn(this)},cn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ir=l.JSON.stringify,Ii=l.JSON.parse,ta=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function Di(){}Di.prototype.h=null;function Oi(h){return h.h||(h.h=h.i())}function li(){}var qr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wn(){ye.call(this,"d")}E(Wn,ye);function Er(){ye.call(this,"c")}E(Er,ye);var Xn={},Mi=null;function ki(){return Mi=Mi||new Ot}Xn.La="serverreachability";function sr(h){ye.call(this,Xn.La,h)}E(sr,ye);function Un(h){const b=ki();Mt(b,new sr(b))}Xn.STAT_EVENT="statevent";function gu(h,b){ye.call(this,Xn.STAT_EVENT,h),this.stat=b}E(gu,ye);function Kn(h){const b=ki();Mt(b,new gu(b,h))}Xn.Ma="timingevent";function $(h,b){ye.call(this,Xn.Ma,h),this.size=b}E($,ye);function te(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},b)}function ie(){this.g=!0}ie.prototype.xa=function(){this.g=!1};function ge(h,b,R,B,re,oe){h.info(function(){if(h.g)if(oe)for(var _e="",Ct=oe.split("&"),Qn=0;Qn<Ct.length;Qn++){var vt=Ct[Qn].split("=");if(1<vt.length){var kt=vt[0];vt=vt[1];var zn=kt.split("_");_e=2<=zn.length&&zn[1]=="type"?_e+(kt+"="+vt+"&"):_e+(kt+"=redacted&")}}else _e=null;else _e=oe;return"XMLHTTP REQ ("+B+") [attempt "+re+"]: "+b+`
`+R+`
`+_e})}function we(h,b,R,B,re,oe,_e){h.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+re+"]: "+b+`
`+R+`
`+oe+" "+_e})}function Ne(h,b,R,B){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+Ce(h,R)+(B?" "+B:"")})}function Pe(h,b){h.info(function(){return"TIMEOUT: "+b})}ie.prototype.info=function(){};function Ce(h,b){if(!h.g)return b;if(!b)return null;try{var R=JSON.parse(b);if(R){for(h=0;h<R.length;h++)if(Array.isArray(R[h])){var B=R[h];if(!(2>B.length)){var re=B[1];if(Array.isArray(re)&&!(1>re.length)){var oe=re[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(var _e=1;_e<re.length;_e++)re[_e]=""}}}}return ir(R)}catch{return b}}var Se={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Te={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ie;function ze(){}E(ze,Di),ze.prototype.g=function(){return new XMLHttpRequest},ze.prototype.i=function(){return{}},Ie=new ze;function qe(h,b,R,B){this.j=h,this.i=b,this.l=R,this.R=B||1,this.U=new cn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new En}function En(){this.i=null,this.g="",this.h=!1}var St={},ot={};function qt(h,b,R){h.L=1,h.v=Ga(Li(b)),h.m=R,h.P=!0,as(h,null)}function as(h,b){h.F=Date.now(),Vn(h),h.A=Li(h.v);var R=h.A,B=h.R;Array.isArray(B)||(B=[String(B)]),ch(R.i,"t",B),h.C=0,R=h.j.J,h.h=new En,h.g=Wd(h.j,R?b:null,!h.m),0<h.O&&(h.M=new xn(m(h.Y,h,h.g),h.O)),b=h.U,R=h.g,B=h.ca;var re="readystatechange";Array.isArray(re)||(re&&(an[0]=re.toString()),re=an);for(var oe=0;oe<re.length;oe++){var _e=Ut(R,re[oe],B||b.handleEvent,!1,b.h||b);if(!_e)break;b.g[_e.key]=_e}b=h.H?_(h.H):{},h.m?(h.u||(h.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,b)):(h.u="GET",h.g.ea(h.A,h.u,null,b)),Un(),ge(h.i,h.u,h.A,h.l,h.R,h.m)}qe.prototype.ca=function(h){h=h.target;const b=this.M;b&&mr(h)==3?b.j():this.Y(h)},qe.prototype.Y=function(h){try{if(h==this.g)e:{const zn=mr(this.g);var b=this.g.Ba();const Vi=this.g.Z();if(!(3>zn)&&(zn!=3||this.g&&(this.h.h||this.g.oa()||dh(this.g)))){this.J||zn!=4||b==7||(b==8||0>=Vi?Un(3):Un(2)),os(this);var R=this.g.Z();this.X=R;t:if(ui(this)){var B=dh(this.g);h="";var re=B.length,oe=mr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lr(this),kr(this);var _e="";break t}this.h.i=new l.TextDecoder}for(b=0;b<re;b++)this.h.h=!0,h+=this.h.i.decode(B[b],{stream:!(oe&&b==re-1)});B.length=0,this.h.g+=h,this.C=0,_e=this.h.g}else _e=this.g.oa();if(this.o=R==200,we(this.i,this.u,this.A,this.l,this.R,zn,R),this.o){if(this.T&&!this.K){t:{if(this.g){var Ct,Qn=this.g;if((Ct=Qn.g?Qn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(Ct)){var vt=Ct;break t}}vt=null}if(R=vt)Ne(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ls(this,R);else{this.o=!1,this.s=3,Kn(12),Lr(this),kr(this);break e}}if(this.P){R=!0;let Gr;for(;!this.J&&this.C<_e.length;)if(Gr=ci(this,_e),Gr==ot){zn==4&&(this.s=4,Kn(14),R=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}else if(Gr==St){this.s=4,Kn(15),Ne(this.i,this.l,_e,"[Invalid Chunk]"),R=!1;break}else Ne(this.i,this.l,Gr,null),ls(this,Gr);if(ui(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zn!=4||_e.length!=0||this.h.h||(this.s=1,Kn(16),R=!1),this.o=this.o&&R,!R)Ne(this.i,this.l,_e,"[Invalid Chunked Response]"),Lr(this),kr(this);else if(0<_e.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+_e.length),Ui(kt),kt.M=!0,Kn(11))}}else Ne(this.i,this.l,_e,null),ls(this,_e);zn==4&&Lr(this),this.o&&!this.J&&(zn==4?Qt(this.j,this):(this.o=!1,Vn(this)))}else mh(this.g),R==400&&0<_e.indexOf("Unknown SID")?(this.s=3,Kn(12)):(this.s=0,Kn(13)),Lr(this),kr(this)}}}catch{}finally{}};function ui(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ci(h,b){var R=h.C,B=b.indexOf(`
`,R);return B==-1?ot:(R=Number(b.substring(R,B)),isNaN(R)?St:(B+=1,B+R>b.length?ot:(b=b.slice(B,B+R),h.C=B+R,b)))}qe.prototype.cancel=function(){this.J=!0,Lr(this)};function Vn(h){h.S=Date.now()+h.I,Fa(h,h.I)}function Fa(h,b){if(h.B!=null)throw Error("WatchDog timer not null");h.B=te(m(h.ba,h),b)}function os(h){h.B&&(l.clearTimeout(h.B),h.B=null)}qe.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Pe(this.i,this.A),this.L!=2&&(Un(),Kn(17)),Lr(this),this.s=2,kr(this)):Fa(this,this.S-h)};function kr(h){h.j.G==0||h.J||Qt(h.j,h)}function Lr(h){os(h);var b=h.M;b&&typeof b.ma=="function"&&b.ma(),h.M=null,Pn(h.U),h.g&&(b=h.g,h.g=null,b.abort(),b.ma())}function ls(h,b){try{var R=h.j;if(R.G!=0&&(R.g==h||en(R.h,h))){if(!h.K&&en(R.h,h)&&R.G==3){try{var B=R.Da.g.parse(b)}catch{B=null}if(Array.isArray(B)&&B.length==3){var re=B;if(re[0]==0){e:if(!R.u){if(R.g)if(R.g.F+3e3<h.F)Wa(R),ll(R);else break e;wu(R),Kn(18)}}else R.za=re[1],0<R.za-R.T&&37500>re[2]&&R.F&&R.v==0&&!R.C&&(R.C=te(m(R.Za,R),6e3));if(1>=Rs(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else hs(R,11)}else if((h.K||R.g==h)&&Wa(R),!N(b))for(re=R.Da.g.parse(b),b=0;b<re.length;b++){let vt=re[b];if(R.T=vt[0],vt=vt[1],R.G==2)if(vt[0]=="c"){R.K=vt[1],R.ia=vt[2];const kt=vt[3];kt!=null&&(R.la=kt,R.j.info("VER="+R.la));const zn=vt[4];zn!=null&&(R.Aa=zn,R.j.info("SVER="+R.Aa));const Vi=vt[5];Vi!=null&&typeof Vi=="number"&&0<Vi&&(B=1.5*Vi,R.L=B,R.j.info("backChannelRequestTimeoutMs_="+B)),B=R;const Gr=h.g;if(Gr){const dl=Gr.g?Gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dl){var oe=B.h;oe.g||dl.indexOf("spdy")==-1&&dl.indexOf("quic")==-1&&dl.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(hi(oe,oe.h),oe.h=null))}if(B.D){const vh=Gr.g?Gr.g.getResponseHeader("X-HTTP-Session-Id"):null;vh&&(B.ya=vh,Gt(B.I,B.D,vh))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-h.F,R.j.info("Handshake RTT: "+R.R+"ms")),B=R;var _e=h;if(B.qa=xu(B,B.J?B.ia:null,B.W),_e.K){Ha(B.h,_e);var Ct=_e,Qn=B.L;Qn&&(Ct.I=Qn),Ct.B&&(os(Ct),Vn(Ct)),B.g=_e}else $d(B);0<R.i.length&&ul(R)}else vt[0]!="stop"&&vt[0]!="close"||hs(R,7);else R.G==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?hs(R,7):bu(R):vt[0]!="noop"&&R.l&&R.l.ta(vt),R.v=0)}}Un(4)}catch{}}var lt=class{constructor(h,b){this.g=h,this.map=b}};function Kt(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function us(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Rs(h){return h.h?1:h.g?h.g.size:0}function en(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function hi(h,b){h.g?h.g.add(b):h.h=b}function Ha(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}Kt.prototype.cancel=function(){if(this.i=sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function sl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const R of h.g.values())b=b.concat(R.D);return b}return C(h.i)}function oh(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var b=[],R=h.length,B=0;B<R;B++)b.push(h[B]);return b}b=[],R=0;for(B in h)b[R++]=h[B];return b}function Uv(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var b=[];h=h.length;for(var R=0;R<h;R++)b.push(R);return b}b=[],R=0;for(const B in h)b[R++]=B;return b}}}function lh(h,b){if(h.forEach&&typeof h.forEach=="function")h.forEach(b,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,b,void 0);else for(var R=Uv(h),B=oh(h),re=B.length,oe=0;oe<re;oe++)b.call(void 0,B[oe],R&&R[oe],h)}var al=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Md(h,b){if(h){h=h.split("&");for(var R=0;R<h.length;R++){var B=h[R].indexOf("="),re=null;if(0<=B){var oe=h[R].substring(0,B);re=h[R].substring(B+1)}else oe=h[R];b(oe,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function na(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof na){this.h=h.h,ol(this,h.j),this.o=h.o,this.g=h.g,qa(this,h.s),this.l=h.l;var b=h.i,R=new $a;R.i=b.i,b.g&&(R.g=new Map(b.g),R.h=b.h),kd(this,R),this.m=h.m}else h&&(b=String(h).match(al))?(this.h=!1,ol(this,b[1]||"",!0),this.o=ra(b[2]||""),this.g=ra(b[3]||"",!0),qa(this,b[4]),this.l=ra(b[5]||"",!0),kd(this,b[6]||"",!0),this.m=ra(b[7]||"")):(this.h=!1,this.i=new $a(null,this.h))}na.prototype.toString=function(){var h=[],b=this.j;b&&h.push(ji(b,uh,!0),":");var R=this.g;return(R||b=="file")&&(h.push("//"),(b=this.o)&&h.push(ji(b,uh,!0),"@"),h.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.s,R!=null&&h.push(":",String(R))),(R=this.l)&&(this.g&&R.charAt(0)!="/"&&h.push("/"),h.push(ji(R,R.charAt(0)=="/"?jd:Vv,!0))),(R=this.i.toString())&&h.push("?",R),(R=this.m)&&h.push("#",ji(R,Ud)),h.join("")};function Li(h){return new na(h)}function ol(h,b,R){h.j=R?ra(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function qa(h,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);h.s=b}else h.s=null}function kd(h,b,R){b instanceof $a?(h.i=b,zv(h.i,h.h)):(R||(b=ji(b,Pd)),h.i=new $a(b,h.h))}function Gt(h,b,R){h.i.set(b,R)}function Ga(h){return Gt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ra(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ji(h,b,R){return typeof h=="string"?(h=encodeURI(h).replace(b,Ld),R&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Ld(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var uh=/[#\/\?@]/g,Vv=/[#\?:]/g,jd=/[#\?]/g,Pd=/[#\?@]/g,Ud=/#/g;function $a(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function Cs(h){h.g||(h.g=new Map,h.h=0,h.i&&Md(h.i,function(b,R){h.add(decodeURIComponent(b.replace(/\+/g," ")),R)}))}t=$a.prototype,t.add=function(h,b){Cs(this),this.i=null,h=Ya(this,h);var R=this.g.get(h);return R||this.g.set(h,R=[]),R.push(b),this.h+=1,this};function Vd(h,b){Cs(h),b=Ya(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function zd(h,b){return Cs(h),b=Ya(h,b),h.g.has(b)}t.forEach=function(h,b){Cs(this),this.g.forEach(function(R,B){R.forEach(function(re){h.call(b,re,B,this)},this)},this)},t.na=function(){Cs(this);const h=Array.from(this.g.values()),b=Array.from(this.g.keys()),R=[];for(let B=0;B<b.length;B++){const re=h[B];for(let oe=0;oe<re.length;oe++)R.push(b[B])}return R},t.V=function(h){Cs(this);let b=[];if(typeof h=="string")zd(this,h)&&(b=b.concat(this.g.get(Ya(this,h))));else{h=Array.from(this.g.values());for(let R=0;R<h.length;R++)b=b.concat(h[R])}return b},t.set=function(h,b){return Cs(this),this.i=null,h=Ya(this,h),zd(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},t.get=function(h,b){return h?(h=this.V(h),0<h.length?String(h[0]):b):b};function ch(h,b,R){Vd(h,b),0<R.length&&(h.i=null,h.g.set(Ya(h,b),C(R)),h.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(var R=0;R<b.length;R++){var B=b[R];const oe=encodeURIComponent(String(B)),_e=this.V(B);for(B=0;B<_e.length;B++){var re=oe;_e[B]!==""&&(re+="="+encodeURIComponent(String(_e[B]))),h.push(re)}}return this.i=h.join("&")};function Ya(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function zv(h,b){b&&!h.j&&(Cs(h),h.i=null,h.g.forEach(function(R,B){var re=B.toLowerCase();B!=re&&(Vd(this,B),ch(this,re,R))},h)),h.j=b}function Bv(h,b){const R=new ie;if(l.Image){const B=new Image;B.onload=y(Pi,R,"TestLoadImage: loaded",!0,b,B),B.onerror=y(Pi,R,"TestLoadImage: error",!1,b,B),B.onabort=y(Pi,R,"TestLoadImage: abort",!1,b,B),B.ontimeout=y(Pi,R,"TestLoadImage: timeout",!1,b,B),l.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=h}else b(!1)}function Fv(h,b){const R=new ie,B=new AbortController,re=setTimeout(()=>{B.abort(),Pi(R,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:B.signal}).then(oe=>{clearTimeout(re),oe.ok?Pi(R,"TestPingServer: ok",!0,b):Pi(R,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(re),Pi(R,"TestPingServer: error",!1,b)})}function Pi(h,b,R,B,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),B(R)}catch{}}function Hv(){this.g=new ta}function qv(h,b,R){const B=R||"";try{lh(h,function(re,oe){let _e=re;d(re)&&(_e=ir(re)),b.push(B+oe+"="+encodeURIComponent(_e))})}catch(re){throw b.push(B+"type="+encodeURIComponent("_badmap")),re}}function vu(h){this.l=h.Ub||null,this.j=h.eb||!1}E(vu,Di),vu.prototype.g=function(){return new yu(this.l,this.j)},vu.prototype.i=function(h){return function(){return h}}({});function yu(h,b){Ot.call(this),this.D=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(yu,Ot),t=yu.prototype,t.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=b,this.readyState=1,Tt(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(b.body=h),(this.D||l).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rt(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Tt(this)),this.g&&(this.readyState=3,Tt(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bd(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bd(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?Rt(this):Tt(this),this.readyState==3&&Bd(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Rt(this))},t.Qa=function(h){this.g&&(this.response=h,Rt(this))},t.ga=function(){this.g&&Rt(this)};function Rt(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Tt(h)}t.setRequestHeader=function(h,b){this.u.append(h,b)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var R=b.next();!R.done;)R=R.value,h.push(R[0]+": "+R[1]),R=b.next();return h.join(`\r
`)};function Tt(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(yu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Fd(h){let b="";return L(h,function(R,B){b+=B,b+=":",b+=R,b+=`\r
`}),b}function hh(h,b,R){e:{for(B in R){var B=!1;break e}B=!0}B||(R=Fd(R),typeof h=="string"?R!=null&&encodeURIComponent(String(R)):Gt(h,b,R))}function hn(h){Ot.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(hn,Ot);var Gv=/^https?$/i,$v=["POST","PUT"];t=hn.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,b,R,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ie.g(),this.v=this.o?Oi(this.o):Oi(Ie),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(oe){Hd(this,oe);return}if(h=R||"",R=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var re in B)R.set(re,B[re]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const oe of B.keys())R.set(oe,B.get(oe));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(R.keys()).find(oe=>oe.toLowerCase()=="content-type"),re=l.FormData&&h instanceof l.FormData,!(0<=Array.prototype.indexOf.call($v,b,void 0))||B||re||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,_e]of R)this.g.setRequestHeader(oe,_e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_u(this),this.u=!0,this.g.send(h),this.u=!1}catch(oe){Hd(this,oe)}};function Hd(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.m=5,fh(h),Tn(h)}function fh(h){h.A||(h.A=!0,Mt(h,"complete"),Mt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Mt(this,"complete"),Mt(this,"abort"),Tn(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tn(this,!0)),hn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?qd(this):this.bb())},t.bb=function(){qd(this)};function qd(h){if(h.h&&typeof a<"u"&&(!h.v[1]||mr(h)!=4||h.Z()!=2)){if(h.u&&mr(h)==4)un(h.Ea,0,h);else if(Mt(h,"readystatechange"),mr(h)==4){h.h=!1;try{const _e=h.Z();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var R;if(!(R=b)){var B;if(B=_e===0){var re=String(h.D).match(al)[1]||null;!re&&l.self&&l.self.location&&(re=l.self.location.protocol.slice(0,-1)),B=!Gv.test(re?re.toLowerCase():"")}R=B}if(R)Mt(h,"complete"),Mt(h,"success");else{h.m=6;try{var oe=2<mr(h)?h.g.statusText:""}catch{oe=""}h.l=oe+" ["+h.Z()+"]",fh(h)}}finally{Tn(h)}}}}function Tn(h,b){if(h.g){_u(h);const R=h.g,B=h.v[0]?()=>{}:null;h.g=null,h.v=null,b||Mt(h,"ready");try{R.onreadystatechange=B}catch{}}}function _u(h){h.I&&(l.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function mr(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<mr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),Ii(b)}};function dh(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function mh(h){const b={};h=(h.g&&2<=mr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<h.length;B++){if(N(h[B]))continue;var R=k(h[B]);const re=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const oe=b[re]||[];b[re]=oe,oe.push(R)}T(b,function(B){return B.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ar(h,b,R){return R&&R.internalChannelParams&&R.internalChannelParams[h]||b}function ph(h){this.Aa=0,this.i=[],this.j=new ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ar("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ar("baseRetryDelayMs",5e3,h),this.cb=ar("retryDelaySeedMs",1e4,h),this.Wa=ar("forwardChannelMaxRetries",2,h),this.wa=ar("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Kt(h&&h.concurrentRequestLimit),this.Da=new Hv,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ph.prototype,t.la=8,t.G=1,t.connect=function(h,b,R,B){Kn(0),this.W=h,this.H=b||{},R&&B!==void 0&&(this.H.OSID=R,this.H.OAID=B),this.F=this.X,this.I=xu(this,null,this.W),ul(this)};function bu(h){if(gh(h),h.G==3){var b=h.U++,R=Li(h.I);if(Gt(R,"SID",h.K),Gt(R,"RID",b),Gt(R,"TYPE","terminate"),cl(h,R),b=new qe(h,h.j,b),b.L=2,b.v=Ga(Li(R)),R=!1,l.navigator&&l.navigator.sendBeacon)try{R=l.navigator.sendBeacon(b.v.toString(),"")}catch{}!R&&l.Image&&(new Image().src=b.v,R=!0),R||(b.g=Wd(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Vn(b)}Yd(h)}function ll(h){h.g&&(Ui(h),h.g.cancel(),h.g=null)}function gh(h){ll(h),h.u&&(l.clearTimeout(h.u),h.u=null),Wa(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&l.clearTimeout(h.s),h.s=null)}function ul(h){if(!us(h.h)&&!h.s){h.s=!0;var b=h.Ga;U||ae(),Q||(U(),Q=!0),ee.add(b,h),h.B=0}}function Gd(h,b){return Rs(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=b.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=te(m(h.Ga,h,b),cs(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const re=new qe(this,this.j,h);let oe=this.o;if(this.S&&(oe?(oe=_(oe),S(oe,this.S)):oe=this.S),this.m!==null||this.O||(re.H=oe,oe=null),this.P)e:{for(var b=0,R=0;R<this.i.length;R++){t:{var B=this.i[R];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(b+=B,4096<b){b=R;break e}if(b===4096||R===this.i.length-1){b=R+1;break e}}b=1e3}else b=1e3;b=jr(this,re,b),R=Li(this.I),Gt(R,"RID",h),Gt(R,"CVER",22),this.D&&Gt(R,"X-HTTP-Session-Id",this.D),cl(this,R),oe&&(this.O?b="headers="+encodeURIComponent(String(Fd(oe)))+"&"+b:this.m&&hh(R,this.m,oe)),hi(this.h,re),this.Ua&&Gt(R,"TYPE","init"),this.P?(Gt(R,"$req",b),Gt(R,"SID","null"),re.T=!0,qt(re,R,null)):qt(re,R,b),this.G=2}}else this.G==3&&(h?Tr(this,h):this.i.length==0||us(this.h)||Tr(this))};function Tr(h,b){var R;b?R=b.l:R=h.U++;const B=Li(h.I);Gt(B,"SID",h.K),Gt(B,"RID",R),Gt(B,"AID",h.T),cl(h,B),h.m&&h.o&&hh(B,h.m,h.o),R=new qe(h,h.j,R,h.B+1),h.m===null&&(R.H=h.o),b&&(h.i=b.D.concat(h.i)),b=jr(h,R,1e3),R.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),hi(h.h,R),qt(R,B,b)}function cl(h,b){h.H&&L(h.H,function(R,B){Gt(b,B,R)}),h.l&&lh({},function(R,B){Gt(b,B,R)})}function jr(h,b,R){R=Math.min(h.i.length,R);var B=h.l?m(h.l.Na,h.l,h):null;e:{var re=h.i;let oe=-1;for(;;){const _e=["count="+R];oe==-1?0<R?(oe=re[0].g,_e.push("ofs="+oe)):oe=0:_e.push("ofs="+oe);let Ct=!0;for(let Qn=0;Qn<R;Qn++){let vt=re[Qn].g;const kt=re[Qn].map;if(vt-=oe,0>vt)oe=Math.max(0,re[Qn].g-100),Ct=!1;else try{qv(kt,_e,"req"+vt+"_")}catch{B&&B(kt)}}if(Ct){B=_e.join("&");break e}}}return h=h.i.splice(0,R),b.D=h,B}function $d(h){if(!h.g&&!h.u){h.Y=1;var b=h.Fa;U||ae(),Q||(U(),Q=!0),ee.add(b,h),h.v=0}}function wu(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=te(m(h.Fa,h),cs(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,hl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=te(m(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kn(10),ll(this),hl(this))};function Ui(h){h.A!=null&&(l.clearTimeout(h.A),h.A=null)}function hl(h){h.g=new qe(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var b=Li(h.qa);Gt(b,"RID","rpc"),Gt(b,"SID",h.K),Gt(b,"AID",h.T),Gt(b,"CI",h.F?"0":"1"),!h.F&&h.ja&&Gt(b,"TO",h.ja),Gt(b,"TYPE","xmlhttp"),cl(h,b),h.m&&h.o&&hh(b,h.m,h.o),h.L&&(h.g.I=h.L);var R=h.g;h=h.ia,R.L=1,R.v=Ga(Li(b)),R.m=null,R.P=!0,as(R,h)}t.Za=function(){this.C!=null&&(this.C=null,ll(this),wu(this),Kn(19))};function Wa(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function Qt(h,b){var R=null;if(h.g==b){Wa(h),Ui(h),h.g=null;var B=2}else if(en(h.h,b))R=b.D,Ha(h.h,b),B=1;else return;if(h.G!=0){if(b.o)if(B==1){R=b.m?b.m.length:0,b=Date.now()-b.F;var re=h.B;B=ki(),Mt(B,new $(B,R)),ul(h)}else $d(h);else if(re=b.s,re==3||re==0&&0<b.X||!(B==1&&Gd(h,b)||B==2&&wu(h)))switch(R&&0<R.length&&(b=h.h,b.i=b.i.concat(R)),re){case 1:hs(h,5);break;case 4:hs(h,10);break;case 3:hs(h,6);break;default:hs(h,2)}}}function cs(h,b){let R=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(R*=2),R*b}function hs(h,b){if(h.j.info("Error code "+b),b==2){var R=m(h.fb,h),B=h.Xa;const re=!B;B=new na(B||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ol(B,"https"),Ga(B),re?Bv(B.toString(),R):Fv(B.toString(),R)}else Kn(2);h.G=0,h.l&&h.l.sa(b),Yd(h),gh(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Kn(2)):(this.j.info("Failed to ping google.com"),Kn(1))};function Yd(h){if(h.G=0,h.ka=[],h.l){const b=sl(h.h);(b.length!=0||h.i.length!=0)&&(I(h.ka,b),I(h.ka,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.ra()}}function xu(h,b,R){var B=R instanceof na?Li(R):new na(R);if(B.g!="")b&&(B.g=b+"."+B.g),qa(B,B.s);else{var re=l.location;B=re.protocol,b=b?b+"."+re.hostname:re.hostname,re=+re.port;var oe=new na(null);B&&ol(oe,B),b&&(oe.g=b),re&&qa(oe,re),R&&(oe.l=R),B=oe}return R=h.D,b=h.ya,R&&b&&Gt(B,R,b),Gt(B,"VER",h.la),cl(h,B),B}function Wd(h,b,R){if(b&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Ca&&!h.pa?new hn(new vu({eb:R})):new hn(h.pa),b.Ha(h.J),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xd(){}t=Xd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Eu(){}Eu.prototype.g=function(h,b){return new Ar(h,b)};function Ar(h,b){Ot.call(this),this.g=new ph(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(h?h["X-WebChannel-Client-Profile"]=b.va:h={"X-WebChannel-Client-Profile":b.va}),this.g.S=h,(h=b&&b.Sb)&&!N(h)&&(this.g.m=h),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!N(b)&&(this.g.D=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new Xa(this)}E(Ar,Ot),Ar.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ar.prototype.close=function(){bu(this.g)},Ar.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var R={};R.__data__=h,h=R}else this.u&&(R={},R.__data__=ir(h),h=R);b.i.push(new lt(b.Ya++,h)),b.G==3&&ul(b)},Ar.prototype.N=function(){this.g.l=null,delete this.j,bu(this.g),delete this.g,Ar.aa.N.call(this)};function fl(h){Wn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const R in b){h=R;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}E(fl,Wn);function ia(){Er.call(this),this.status=1}E(ia,Er);function Xa(h){this.g=h}E(Xa,Xd),Xa.prototype.ua=function(){Mt(this.g,"a")},Xa.prototype.ta=function(h){Mt(this.g,new fl(h))},Xa.prototype.sa=function(h){Mt(this.g,new ia)},Xa.prototype.ra=function(){Mt(this.g,"b")},Eu.prototype.createWebChannel=Eu.prototype.g,Ar.prototype.send=Ar.prototype.o,Ar.prototype.open=Ar.prototype.m,Ar.prototype.close=Ar.prototype.close,r4=function(){return new Eu},n4=function(){return ki()},t4=Xn,t1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,Ap=Se,Te.COMPLETE="complete",e4=Te,li.EventType=qr,qr.OPEN="a",qr.CLOSE="b",qr.ERROR="c",qr.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,nf=li,hn.prototype.listenOnce=hn.prototype.L,hn.prototype.getLastError=hn.prototype.Ka,hn.prototype.getLastErrorCode=hn.prototype.Ba,hn.prototype.getStatus=hn.prototype.Z,hn.prototype.getResponseJson=hn.prototype.Oa,hn.prototype.getResponseText=hn.prototype.oa,hn.prototype.send=hn.prototype.ea,hn.prototype.setWithCredentials=hn.prototype.Ha,JI=hn}).apply(typeof Km<"u"?Km:typeof self<"u"?self:typeof window<"u"?window:{});const vA="@firebase/firestore",yA="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nr.UNAUTHENTICATED=new Nr(null),Nr.GOOGLE_CREDENTIALS=new Nr("google-credentials-uid"),Nr.FIRST_PARTY=new Nr("first-party-uid"),Nr.MOCK_USER=new Nr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let th="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=new Hb("@firebase/firestore");function Gu(){return tu.logLevel}function Ae(t,...e){if(tu.logLevel<=mt.DEBUG){const n=e.map(nw);tu.debug(`Firestore (${th}): ${t}`,...n)}}function ja(t,...e){if(tu.logLevel<=mt.ERROR){const n=e.map(nw);tu.error(`Firestore (${th}): ${t}`,...n)}}function Go(t,...e){if(tu.logLevel<=mt.WARN){const n=e.map(nw);tu.warn(`Firestore (${th}): ${t}`,...n)}}function nw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,i4(t,r,n)}function i4(t,e,n){let r=`FIRESTORE (${th}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ja(r),new Error(r)}function jt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||i4(e,i,r)}function Xe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Ss{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nr.UNAUTHENTICATED))}shutdown(){}}class _B{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bB{constructor(e){this.t=e,this.currentUser=Nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){jt(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Ca;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ca,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ca)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(jt(typeof r.accessToken=="string",31837,{l:r}),new s4(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return jt(e===null||typeof e=="string",2055,{h:e}),new Nr(e)}}class wB{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Nr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xB{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new wB(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _A{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EB{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){jt(this.o===void 0,3512);const r=s=>{s.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Ae("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _A(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(jt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new _A(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=TB(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function nt(t,e){return t<e?-1:t>e?1:0}function n1(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return nt(r,i);{const s=a4(),a=AB(s.encode(bA(t,n)),s.encode(bA(e,n)));return a!==0?a:nt(r,i)}}n+=r>65535?2:1}return nt(t.length,e.length)}function bA(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function AB(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return nt(t[n],e[n]);return nt(t.length,e.length)}function zc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="__name__";class ks{constructor(e,n,r){n===void 0?n=0:n>e.length&&Be(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Be(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ks.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ks?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=ks.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return nt(e.length,n.length)}static compareSegments(e,n){const r=ks.isNumericId(e),i=ks.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ks.extractNumericId(e).compare(ks.extractNumericId(n)):n1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vo.fromString(e.substring(4,e.length-2))}}class tn extends ks{construct(e,n,r){return new tn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new tn(n)}static emptyPath(){return new tn([])}}const SB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class br extends ks{construct(e,n,r){return new br(e,n,r)}static isValidIdentifier(e){return SB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),br.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wA}static keyField(){return new br([wA])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ee(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Ee(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ee(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new Ee(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new br(n)}static emptyPath(){return new br([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(tn.fromString(e))}static fromName(e){return new Me(tn.fromString(e).popFirst(5))}static empty(){return new Me(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new tn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(t,e,n){if(!n)throw new Ee(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RB(t,e,n,r){if(e===!0&&r===!0)throw new Ee(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xA(t){if(!Me.isDocumentKey(t))throw new Ee(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function EA(t){if(Me.isDocumentKey(t))throw new Ee(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function l4(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function pv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Be(12329,{type:typeof t})}function rs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pv(t);throw new Ee(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,e){const n={typeString:t};return e&&(n.value=e),n}function Td(t,e){if(!l4(t))throw new Ee(ue.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Ee(ue.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=-62135596800,AA=1e6;class on{static now(){return on.fromMillis(Date.now())}static fromDate(e){return on.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*AA);return new on(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<TA)throw new Ee(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/AA}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:on._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Td(e,on._jsonSchema))return new on(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-TA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}on._jsonSchemaVersion="firestore/timestamp/1.0",on._jsonSchema={type:$n("string",on._jsonSchemaVersion),seconds:$n("number"),nanoseconds:$n("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new on(0,0))}static max(){return new Ge(new on(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=-1;function CB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ge.fromTimestamp(r===1e9?new on(n+1,0):new on(n,r));return new $o(i,Me.empty(),e)}function NB(t){return new $o(t.readTime,t.key,$f)}class $o{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new $o(Ge.min(),Me.empty(),$f)}static max(){return new $o(Ge.max(),Me.empty(),$f)}}function IB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Me.comparator(t.documentKey,e.documentKey),n!==0?n:nt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nh(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==DB)throw t;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):de.reject(n)}static resolve(e){return new de((n,r)=>{n(e)})}static reject(e){return new de((n,r)=>{r(e)})}static waitFor(e){return new de((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},c=>r(c))}),a=!0,s===i&&n()})}static or(e){let n=de.resolve(!1);for(const r of e)n=n.next(i=>i?de.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new de((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(f=>{a[d]=f,++l,l===s&&r(a)},f=>i(f))}})}static doWhile(e,n){return new de((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function MB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function rh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}gv.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=-1;function vv(t){return t==null}function bg(t){return t===0&&1/t==-1/0}function kB(t){return typeof t=="number"&&Number.isInteger(t)&&!bg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4="";function LB(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=SA(e)),e=jB(t.get(n),e);return SA(e)}function jB(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case u4:n+="";break;default:n+=s}}return n}function SA(t){return t+u4+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function rl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function c4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n){this.comparator=e,this.root=n||yr.EMPTY}insert(e,n){return new wn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yr.BLACK,null,null))}remove(e){return new wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qm(this.root,e,this.comparator,!0)}}class Qm{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??yr.RED,this.left=i??yr.EMPTY,this.right=s??yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new yr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return yr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}yr.EMPTY=null,yr.RED=!0,yr.BLACK=!1;yr.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new yr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.comparator=e,this.data=new wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new CA(this.data.getIterator())}getIteratorFrom(e){return new CA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof nr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new nr(this.comparator);return n.data=e,n}}class CA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.fields=e,e.sort(br.comparator)}static empty(){return new xi([])}unionWith(e){let n=new nr(br.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new h4("Invalid base64 string: "+s):s}}(e);return new xr(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new xr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xr.EMPTY_BYTE_STRING=new xr("");const PB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yo(t){if(jt(!!t,39018),typeof t=="string"){let e=0;const n=PB.exec(t);if(jt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ln(t.seconds),nanos:Ln(t.nanos)}}function Ln(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wo(t){return typeof t=="string"?xr.fromBase64String(t):xr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4="server_timestamp",d4="__type__",m4="__previous_value__",p4="__local_write_time__";function sw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[d4])===null||n===void 0?void 0:n.stringValue)===f4}function yv(t){const e=t.mapValue.fields[m4];return sw(e)?yv(e):e}function Yf(t){const e=Yo(t.mapValue.fields[p4].timestampValue);return new on(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e,n,r,i,s,a,l,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const r1="(default)";class Wf{constructor(e,n){this.projectId=e,this.database=n||r1}static empty(){return new Wf("","")}get isDefaultDatabase(){return this.database===r1}isEqual(e){return e instanceof Wf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4="__type__",VB="__max__",Zm={mapValue:{}},v4="__vector__",wg="value";function Xo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sw(t)?4:BB(t)?9007199254740991:zB(t)?10:11:Be(28295,{value:t})}function Ws(t,e){if(t===e)return!0;const n=Xo(t);if(n!==Xo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yf(t).isEqual(Yf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Yo(i.timestampValue),l=Yo(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Wo(i.bytesValue).isEqual(Wo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ln(i.geoPointValue.latitude)===Ln(s.geoPointValue.latitude)&&Ln(i.geoPointValue.longitude)===Ln(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ln(i.integerValue)===Ln(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Ln(i.doubleValue),l=Ln(s.doubleValue);return a===l?bg(a)===bg(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return zc(t.arrayValue.values||[],e.arrayValue.values||[],Ws);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(RA(a)!==RA(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Ws(a[c],l[c])))return!1;return!0}(t,e);default:return Be(52216,{left:t})}}function Xf(t,e){return(t.values||[]).find(n=>Ws(n,e))!==void 0}function Bc(t,e){if(t===e)return 0;const n=Xo(t),r=Xo(e);if(n!==r)return nt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return nt(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Ln(s.integerValue||s.doubleValue),c=Ln(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return NA(t.timestampValue,e.timestampValue);case 4:return NA(Yf(t),Yf(e));case 5:return n1(t.stringValue,e.stringValue);case 6:return function(s,a){const l=Wo(s),c=Wo(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const f=nt(l[d],c[d]);if(f!==0)return f}return nt(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=nt(Ln(s.latitude),Ln(a.latitude));return l!==0?l:nt(Ln(s.longitude),Ln(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return IA(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,c,d,f;const p=s.fields||{},m=a.fields||{},y=(l=p[wg])===null||l===void 0?void 0:l.arrayValue,E=(c=m[wg])===null||c===void 0?void 0:c.arrayValue,C=nt(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((f=E==null?void 0:E.values)===null||f===void 0?void 0:f.length)||0);return C!==0?C:IA(y,E)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Zm.mapValue&&a===Zm.mapValue)return 0;if(s===Zm.mapValue)return 1;if(a===Zm.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),d=a.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const m=n1(c[p],f[p]);if(m!==0)return m;const y=Bc(l[c[p]],d[f[p]]);if(y!==0)return y}return nt(c.length,f.length)}(t.mapValue,e.mapValue);default:throw Be(23264,{le:n})}}function NA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return nt(t,e);const n=Yo(t),r=Yo(e),i=nt(n.seconds,r.seconds);return i!==0?i:nt(n.nanos,r.nanos)}function IA(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Bc(n[i],r[i]);if(s)return s}return nt(n.length,r.length)}function Fc(t){return i1(t)}function i1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Me.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=i1(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${i1(n.fields[a])}`;return i+"}"}(t.mapValue):Be(61005,{value:t})}function Sp(t){switch(Xo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yv(t);return e?16+Sp(e):16;case 5:return 2*t.stringValue.length;case 6:return Wo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Sp(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return rl(r.fields,(s,a)=>{i+=s.length+Sp(a)}),i}(t.mapValue);default:throw Be(13486,{value:t})}}function DA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function s1(t){return!!t&&"integerValue"in t}function aw(t){return!!t&&"arrayValue"in t}function OA(t){return!!t&&"nullValue"in t}function MA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rp(t){return!!t&&"mapValue"in t}function zB(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[g4])===null||n===void 0?void 0:n.stringValue)===v4}function Tf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return rl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Tf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Tf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function BB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===VB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.value=e}static empty(){return new ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Rp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tf(n)}setAll(e){let n=br.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=Tf(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Rp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ws(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Rp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){rl(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ii(Tf(this.value))}}function y4(t){const e=[];return rl(t.fields,(n,r)=>{const i=new br([n]);if(Rp(r)){const s=y4(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new xi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Ir(e,0,Ge.min(),Ge.min(),Ge.min(),ii.empty(),0)}static newFoundDocument(e,n,r,i){return new Ir(e,1,n,Ge.min(),r,i,0)}static newNoDocument(e,n){return new Ir(e,2,n,Ge.min(),Ge.min(),ii.empty(),0)}static newUnknownDocument(e,n){return new Ir(e,3,n,Ge.min(),Ge.min(),ii.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n){this.position=e,this.inclusive=n}}function kA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=Me.comparator(Me.fromName(a.referenceValue),n.key):r=Bc(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function LA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ws(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n="asc"){this.field=e,this.dir=n}}function FB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{}class qn extends _4{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new qB(e,n,r):n==="array-contains"?new YB(e,r):n==="in"?new WB(e,r):n==="not-in"?new XB(e,r):n==="array-contains-any"?new KB(e,r):new qn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new GB(e,r):new $B(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Bc(n,this.value)):n!==null&&Xo(this.value)===Xo(n)&&this.matchesComparison(Bc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ts extends _4{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ts(e,n)}matches(e){return b4(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function b4(t){return t.op==="and"}function w4(t){return HB(t)&&b4(t)}function HB(t){for(const e of t.filters)if(e instanceof Ts)return!1;return!0}function a1(t){if(t instanceof qn)return t.field.canonicalString()+t.op.toString()+Fc(t.value);if(w4(t))return t.filters.map(e=>a1(e)).join(",");{const e=t.filters.map(n=>a1(n)).join(",");return`${t.op}(${e})`}}function x4(t,e){return t instanceof qn?function(r,i){return i instanceof qn&&r.op===i.op&&r.field.isEqual(i.field)&&Ws(r.value,i.value)}(t,e):t instanceof Ts?function(r,i){return i instanceof Ts&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&x4(a,i.filters[l]),!0):!1}(t,e):void Be(19439)}function E4(t){return t instanceof qn?function(n){return`${n.field.canonicalString()} ${n.op} ${Fc(n.value)}`}(t):t instanceof Ts?function(n){return n.op.toString()+" {"+n.getFilters().map(E4).join(" ,")+"}"}(t):"Filter"}class qB extends qn{constructor(e,n,r){super(e,n,r),this.key=Me.fromName(r.referenceValue)}matches(e){const n=Me.comparator(e.key,this.key);return this.matchesComparison(n)}}class GB extends qn{constructor(e,n){super(e,"in",n),this.keys=T4("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $B extends qn{constructor(e,n){super(e,"not-in",n),this.keys=T4("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function T4(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Me.fromName(r.referenceValue))}class YB extends qn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return aw(n)&&Xf(n.arrayValue,this.value)}}class WB extends qn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xf(this.value.arrayValue,n)}}class XB extends qn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Xf(this.value.arrayValue,n)}}class KB extends qn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!aw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Xf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.Pe=null}}function jA(t,e=null,n=[],r=[],i=null,s=null,a=null){return new QB(t,e,n,r,i,s,a)}function ow(t){const e=Xe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>a1(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),vv(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fc(r)).join(",")),e.Pe=n}return e.Pe}function lw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!FB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!x4(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!LA(t.startAt,e.startAt)&&LA(t.endAt,e.endAt)}function o1(t){return Me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function ZB(t,e,n,r,i,s,a,l){return new Ad(t,e,n,r,i,s,a,l)}function _v(t){return new Ad(t)}function PA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function A4(t){return t.collectionGroup!==null}function Af(t){const e=Xe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new nr(br.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Eg(s,r))}),n.has(br.keyField().canonicalString())||e.Te.push(new Eg(br.keyField(),r))}return e.Te}function Fs(t){const e=Xe(t);return e.Ie||(e.Ie=JB(e,Af(t))),e.Ie}function JB(t,e){if(t.limitType==="F")return jA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Eg(i.field,s)});const n=t.endAt?new xg(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new xg(t.startAt.position,t.startAt.inclusive):null;return jA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function l1(t,e){const n=t.filters.concat([e]);return new Ad(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function u1(t,e,n){return new Ad(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bv(t,e){return lw(Fs(t),Fs(e))&&t.limitType===e.limitType}function S4(t){return`${ow(Fs(t))}|lt:${t.limitType}`}function $u(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>E4(i)).join(", ")}]`),vv(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Fc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Fc(i)).join(",")),`Target(${r})`}(Fs(t))}; limitType=${t.limitType})`}function wv(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Me.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Af(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,c){const d=kA(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,Af(r),i)||r.endAt&&!function(a,l,c){const d=kA(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,Af(r),i))}(t,e)}function eF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function R4(t){return(e,n)=>{let r=!1;for(const i of Af(t)){const s=tF(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function tF(t,e,n){const r=t.field.isKeyField()?Me.comparator(e.key,n.key):function(s,a,l){const c=a.data.field(s),d=l.data.field(s);return c!==null&&d!==null?Bc(c,d):Be(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Be(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){rl(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return c4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF=new wn(Me.comparator);function Pa(){return nF}const C4=new wn(Me.comparator);function rf(...t){let e=C4;for(const n of t)e=e.insert(n.key,n);return e}function N4(t){let e=C4;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ll(){return Sf()}function I4(){return Sf()}function Sf(){return new fu(t=>t.toString(),(t,e)=>t.isEqual(e))}const rF=new wn(Me.comparator),iF=new nr(Me.comparator);function pt(...t){let e=iF;for(const n of t)e=e.add(n);return e}const sF=new nr(nt);function aF(){return sF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bg(e)?"-0":e}}function D4(t){return{integerValue:""+t}}function oF(t,e){return kB(e)?D4(e):uw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this._=void 0}}function lF(t,e,n){return t instanceof Tg?function(i,s){const a={fields:{[d4]:{stringValue:f4},[p4]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&sw(s)&&(s=yv(s)),s&&(a.fields[m4]=s),{mapValue:a}}(n,e):t instanceof Kf?M4(t,e):t instanceof Qf?k4(t,e):function(i,s){const a=O4(i,s),l=UA(a)+UA(i.Ee);return s1(a)&&s1(i.Ee)?D4(l):uw(i.serializer,l)}(t,e)}function uF(t,e,n){return t instanceof Kf?M4(t,e):t instanceof Qf?k4(t,e):n}function O4(t,e){return t instanceof Ag?function(r){return s1(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Tg extends xv{}class Kf extends xv{constructor(e){super(),this.elements=e}}function M4(t,e){const n=L4(e);for(const r of t.elements)n.some(i=>Ws(i,r))||n.push(r);return{arrayValue:{values:n}}}class Qf extends xv{constructor(e){super(),this.elements=e}}function k4(t,e){let n=L4(e);for(const r of t.elements)n=n.filter(i=>!Ws(i,r));return{arrayValue:{values:n}}}class Ag extends xv{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function UA(t){return Ln(t.integerValue||t.doubleValue)}function L4(t){return aw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function cF(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Kf&&i instanceof Kf||r instanceof Qf&&i instanceof Qf?zc(r.elements,i.elements,Ws):r instanceof Ag&&i instanceof Ag?Ws(r.Ee,i.Ee):r instanceof Tg&&i instanceof Tg}(t.transform,e.transform)}class hF{constructor(e,n){this.version=e,this.transformResults=n}}class Ci{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ci}static exists(e){return new Ci(void 0,e)}static updateTime(e){return new Ci(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ev{}function j4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Tv(t.key,Ci.none()):new Sd(t.key,t.data,Ci.none());{const n=t.data,r=ii.empty();let i=new nr(br.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new il(t.key,r,new xi(i.toArray()),Ci.none())}}function fF(t,e,n){t instanceof Sd?function(i,s,a){const l=i.value.clone(),c=zA(i.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof il?function(i,s,a){if(!Cp(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=zA(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(P4(i)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Rf(t,e,n,r){return t instanceof Sd?function(s,a,l,c){if(!Cp(s.precondition,a))return l;const d=s.value.clone(),f=BA(s.fieldTransforms,c,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof il?function(s,a,l,c){if(!Cp(s.precondition,a))return l;const d=BA(s.fieldTransforms,c,a),f=a.data;return f.setAll(P4(s)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,a,l){return Cp(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function dF(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=O4(r.transform,i||null);s!=null&&(n===null&&(n=ii.empty()),n.set(r.field,s))}return n||null}function VA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&zc(r,i,(s,a)=>cF(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Sd extends Ev{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class il extends Ev{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function P4(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zA(t,e,n){const r=new Map;jt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,uF(a,l,n[i]))}return r}function BA(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,lF(s,a,e))}return r}class Tv extends Ev{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mF extends Ev{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&fF(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Rf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Rf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=I4();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const c=j4(a,l);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(Ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pt())}isEqual(e){return this.batchId===e.batchId&&zc(this.mutations,e.mutations,(n,r)=>VA(n,r))&&zc(this.baseMutations,e.baseMutations,(n,r)=>VA(n,r))}}class cw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){jt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return rF}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new cw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn,wt;function yF(t){switch(t){case ue.OK:return Be(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Be(15467,{code:t})}}function U4(t){if(t===void 0)return ja("GRPC error has no .code"),ue.UNKNOWN;switch(t){case Bn.OK:return ue.OK;case Bn.CANCELLED:return ue.CANCELLED;case Bn.UNKNOWN:return ue.UNKNOWN;case Bn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Bn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Bn.INTERNAL:return ue.INTERNAL;case Bn.UNAVAILABLE:return ue.UNAVAILABLE;case Bn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Bn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Bn.NOT_FOUND:return ue.NOT_FOUND;case Bn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Bn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Bn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Bn.ABORTED:return ue.ABORTED;case Bn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Bn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Bn.DATA_LOSS:return ue.DATA_LOSS;default:return Be(39323,{code:t})}}(wt=Bn||(Bn={}))[wt.OK=0]="OK",wt[wt.CANCELLED=1]="CANCELLED",wt[wt.UNKNOWN=2]="UNKNOWN",wt[wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wt[wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wt[wt.NOT_FOUND=5]="NOT_FOUND",wt[wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",wt[wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",wt[wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",wt[wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wt[wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wt[wt.ABORTED=10]="ABORTED",wt[wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",wt[wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",wt[wt.INTERNAL=13]="INTERNAL",wt[wt.UNAVAILABLE=14]="UNAVAILABLE",wt[wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F=new Vo([4294967295,4294967295],0);function FA(t){const e=a4().encode(t),n=new ZI;return n.update(e),new Uint8Array(n.digest())}function HA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Vo([n,r],0),new Vo([i,s],0)]}class hw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new sf(`Invalid padding: ${n}`);if(r<0)throw new sf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new sf(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new sf(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Vo.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Vo.fromNumber(r)));return i.compare(_F)===1&&(i=new Vo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=FA(e),[r,i]=HA(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(r,i,s);if(!this.ye(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new hw(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.fe===0)return;const n=FA(e),[r,i]=HA(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(r,i,s);this.we(a)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class sf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Rd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Av(Ge.min(),i,new wn(nt),Pa(),pt())}}class Rd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Rd(r,n,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class V4{constructor(e,n){this.targetId=e,this.De=n}}class z4{constructor(e,n,r=xr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class qA{constructor(){this.ve=0,this.Ce=GA(),this.Fe=xr.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=pt(),n=pt(),r=pt();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Be(38017,{changeType:s})}}),new Rd(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=GA()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,jt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class bF{constructor(e){this.We=e,this.Ge=new Map,this.ze=Pa(),this.je=Jm(),this.Je=Jm(),this.He=new wn(nt)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Be(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const s=i.target;if(o1(s))if(r===0){const a=new Me(s.path);this.Xe(n,a,Ir.newNoDocument(a,Ge.min()))}else jt(r===1,20013,{expectedCount:r});else{const a=this.ot(n);if(a!==r){const l=this._t(e),c=l?this.ut(l,e,a):1;if(c!==0){this.rt(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=Wo(r).toUint8Array()}catch(c){if(c instanceof h4)return Go("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new hw(a,i,s)}catch(c){return Go(c instanceof sf?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Xe(n,s,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((s,a)=>{const l=this.st(a);if(l){if(s.current&&o1(l.target)){const c=new Me(l.target.path);this.Tt(c).has(a)||this.It(a,c)||this.Xe(a,c,Ir.newNoDocument(c,e))}s.Ne&&(n.set(a,s.Le()),s.ke())}});let r=pt();this.Je.forEach((s,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ze.forEach((s,a)=>a.setReadTime(e));const i=new Av(e,n,this.He,this.ze,r);return this.ze=Pa(),this.je=Jm(),this.Je=Jm(),this.He=new wn(nt),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new qA,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new nr(nt),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new nr(nt),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Ae("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new qA),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Jm(){return new wn(Me.comparator)}function GA(){return new wn(Me.comparator)}const wF={asc:"ASCENDING",desc:"DESCENDING"},xF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EF={and:"AND",or:"OR"};class TF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function c1(t,e){return t.useProto3Json||vv(e)?e:{value:e}}function Sg(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function B4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AF(t,e){return Sg(t,e.toTimestamp())}function Hs(t){return jt(!!t,49232),Ge.fromTimestamp(function(n){const r=Yo(n);return new on(r.seconds,r.nanos)}(t))}function fw(t,e){return h1(t,e).canonicalString()}function h1(t,e){const n=function(i){return new tn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function F4(t){const e=tn.fromString(t);return jt(Y4(e),10190,{key:e.toString()}),e}function f1(t,e){return fw(t.databaseId,e.path)}function My(t,e){const n=F4(e);if(n.get(1)!==t.databaseId.projectId)throw new Ee(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ee(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Me(q4(n))}function H4(t,e){return fw(t.databaseId,e)}function SF(t){const e=F4(t);return e.length===4?tn.emptyPath():q4(e)}function d1(t){return new tn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function q4(t){return jt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function $A(t,e,n){return{name:f1(t,e),fields:n.value.mapValue.fields}}function RF(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Be(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(jt(f===void 0||typeof f=="string",58123),xr.fromBase64String(f||"")):(jt(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),xr.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const f=d.code===void 0?ue.UNKNOWN:U4(d.code);return new Ee(f,d.message||"")}(a);n=new z4(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=My(t,r.document.name),s=Hs(r.document.updateTime),a=r.document.createTime?Hs(r.document.createTime):Ge.min(),l=new ii({mapValue:{fields:r.document.fields}}),c=Ir.newFoundDocument(i,s,a,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Np(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=My(t,r.document),s=r.readTime?Hs(r.readTime):Ge.min(),a=Ir.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Np([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=My(t,r.document),s=r.removedTargetIds||[];n=new Np([],s,i,null)}else{if(!("filter"in e))return Be(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new vF(i,s),l=r.targetId;n=new V4(l,a)}}return n}function CF(t,e){let n;if(e instanceof Sd)n={update:$A(t,e.key,e.value)};else if(e instanceof Tv)n={delete:f1(t,e.key)};else if(e instanceof il)n={update:$A(t,e.key,e.data),updateMask:PF(e.fieldMask)};else{if(!(e instanceof mF))return Be(16599,{Rt:e.type});n={verify:f1(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof Tg)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Kf)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Qf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ag)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw Be(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:AF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Be(27497)}(t,e.precondition)),n}function NF(t,e){return t&&t.length>0?(jt(e!==void 0,14353),t.map(n=>function(i,s){let a=i.updateTime?Hs(i.updateTime):Hs(s);return a.isEqual(Ge.min())&&(a=Hs(s)),new hF(a,i.transformResults||[])}(n,e))):[]}function IF(t,e){return{documents:[H4(t,e.path)]}}function DF(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=H4(t,i);const s=function(d){if(d.length!==0)return $4(Ts.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(d){if(d.length!==0)return d.map(f=>function(m){return{field:Yu(m.field),direction:kF(m.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=c1(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:n,parent:i}}function OF(t){let e=SF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){jt(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){const m=G4(p);return m instanceof Ts&&w4(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(m=>function(E){return new Eg(Wu(E.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,vv(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,y=p.values||[];return new xg(y,m)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const m=!p.before,y=p.values||[];return new xg(y,m)}(n.endAt)),ZB(e,i,a,s,l,"F",c,d)}function MF(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function G4(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wu(n.unaryFilter.field);return qn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Wu(n.unaryFilter.field);return qn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Wu(n.unaryFilter.field);return qn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Wu(n.unaryFilter.field);return qn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}}(t):t.fieldFilter!==void 0?function(n){return qn.create(Wu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ts.create(n.compositeFilter.filters.map(r=>G4(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Be(1026)}}(n.compositeFilter.op))}(t):Be(30097,{filter:t})}function kF(t){return wF[t]}function LF(t){return xF[t]}function jF(t){return EF[t]}function Yu(t){return{fieldPath:t.canonicalString()}}function Wu(t){return br.fromServerFormat(t.fieldPath)}function $4(t){return t instanceof qn?function(n){if(n.op==="=="){if(MA(n.value))return{unaryFilter:{field:Yu(n.field),op:"IS_NAN"}};if(OA(n.value))return{unaryFilter:{field:Yu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(MA(n.value))return{unaryFilter:{field:Yu(n.field),op:"IS_NOT_NAN"}};if(OA(n.value))return{unaryFilter:{field:Yu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yu(n.field),op:LF(n.op),value:n.value}}}(t):t instanceof Ts?function(n){const r=n.getFilters().map(i=>$4(i));return r.length===1?r[0]:{compositeFilter:{op:jF(n.op),filters:r}}}(t):Be(54877,{filter:t})}function PF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Y4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n,r,i,s=Ge.min(),a=Ge.min(),l=xr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Ao(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ao(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e){this.gt=e}}function VF(t){const e=OF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?u1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(){this.Dn=new BF}addToCollectionParentIndex(e,n){return this.Dn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve($o.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve($o.min())}updateCollectionGroup(e,n,r){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class BF{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new nr(tn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nr(tn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},W4=41943040;class ti{static withCacheSize(e){return new ti(e,ti.DEFAULT_COLLECTION_PERCENTILE,ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ti.DEFAULT_COLLECTION_PERCENTILE=10,ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ti.DEFAULT=new ti(W4,ti.DEFAULT_COLLECTION_PERCENTILE,ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ti.DISABLED=new ti(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Hc(0)}static ur(){return new Hc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="LruGarbageCollector",FF=1048576;function XA([t,e],[n,r]){const i=nt(t,n);return i===0?nt(e,r):i}class HF{constructor(e){this.Tr=e,this.buffer=new nr(XA),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();XA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qF{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ae(WA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){rh(n)?Ae(WA,"Ignoring IndexedDB error during garbage collection: ",n):await nh(n)}await this.Rr(3e5)})}}class GF{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return de.resolve(gv.ue);const r=new HF(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(YA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YA):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,a,l,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,a=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Gu()<=mt.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function $F(t,e){return new GF(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(){this.changes=new fu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ir.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?de.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Rf(r.mutation,i,xi.empty(),on.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pt()){const i=Ll();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=rf();return s.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Ll();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=Pa();const a=Sf(),l=function(){return Sf()}();return n.forEach((c,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof il)?s=s.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),Rf(f.mutation,d,f.mutation.getFieldMask(),on.now())):a.set(d.key,xi.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,f)=>a.set(d,f)),n.forEach((d,f)=>{var p;return l.set(d,new WF(f,(p=a.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Sf();let i=new wn((a,l)=>a-l),s=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||xi.empty();f=l.applyToLocalView(d,f),r.set(c,f);const p=(i.get(l.batchId)||pt()).add(c);i=i.insert(l.batchId,p)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,f=c.value,p=I4();f.forEach(m=>{if(!s.has(m)){const y=j4(n.get(m),r.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,p))}return de.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return Me.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):A4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):de.resolve(Ll());let l=$f,c=s;return a.next(d=>de.forEach(d,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(f)?de.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{c=c.insert(f,m)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,pt())).next(f=>({batchId:l,changes:N4(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Me(n)).next(r=>{let i=rf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=rf();return this.indexManager.getCollectionParents(e,s).next(l=>de.forEach(l,c=>{const d=function(p,m){return new Ad(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((c,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,Ir.newInvalidDocument(f)))});let l=rf();return a.forEach((c,d)=>{const f=s.get(c);f!==void 0&&Rf(f.mutation,d,xi.empty(),on.now()),wv(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return de.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Hs(i.createTime)}}(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:VF(i.bundledQuery),readTime:Hs(i.readTime)}}(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(){this.overlays=new wn(Me.comparator),this.kr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ll();return de.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),de.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),de.resolve()}getOverlaysForCollection(e,n,r){const i=Ll(),s=n.length+1,a=new Me(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return de.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new wn((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=Ll(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=Ll(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=i)););return de.resolve(l)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new gF(n,r));let s=this.kr.get(n);s===void 0&&(s=pt(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(){this.sessionToken=xr.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(){this.qr=new nr(ur.Qr),this.$r=new nr(ur.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new ur(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new ur(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Me(new tn([])),r=new ur(n,e),i=new ur(n,e+1),s=[];return this.$r.forEachInRange([r,i],a=>{this.Wr(a),s.push(a.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Me(new tn([])),r=new ur(n,e),i=new ur(n,e+1);let s=pt();return this.$r.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new ur(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ur{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Me.comparator(e.key,n.key)||nt(e.Hr,n.Hr)}static Ur(e,n){return nt(e.Hr,n.Hr)||Me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new nr(ur.Qr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new pF(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.Yr=this.Yr.add(new ur(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return de.resolve(a)}lookupMutationBatch(e,n){return de.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return de.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?iw:this.er-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ur(n,0),i=new ur(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],a=>{const l=this.Zr(a.Hr);s.push(l)}),de.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nr(nt);return n.forEach(i=>{const s=new ur(i,0),a=new ur(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,a],l=>{r=r.add(l.Hr)})}),de.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Me.isDocumentKey(s)||(s=s.child(""));const a=new ur(new Me(s),0);let l=new nr(nt);return this.Yr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(c.Hr)),!0)},a),de.resolve(this.ei(l))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){jt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return de.forEach(n.mutations,i=>{const s=new ur(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new ur(n,0),i=this.Yr.firstAfterOrEqual(r);return de.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(e){this.ni=e,this.docs=function(){return new wn(Me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return de.resolve(r?r.document.mutableCopy():Ir.newInvalidDocument(n))}getEntries(e,n){let r=Pa();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ir.newInvalidDocument(i))}),de.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Pa();const a=n.path,l=new Me(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||IB(NB(f),r)<=0||(i.has(f.key)||wv(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return de.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Be(9500)}ri(e,n){return de.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new tH(this)}getSize(e){return de.resolve(this.size)}}class tH extends YF{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),de.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nH{constructor(e){this.persistence=e,this.ii=new fu(n=>ow(n),lw),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.si=0,this.oi=new dw,this.targetCount=0,this._i=Hc.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),de.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Hc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.hr(n),de.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ii.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ii.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),de.waitFor(s).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return de.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),de.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),de.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return de.resolve(r)}containsKey(e,n){return de.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,n){this.ai={},this.overlays={},this.ui=new gv(0),this.ci=!1,this.ci=!0,this.li=new ZF,this.referenceDelegate=e(this),this.hi=new nH(this),this.indexManager=new zF,this.remoteDocumentCache=function(i){return new eH(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new UF(n),this.Ti=new KF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QF,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new JF(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Ae("MemoryPersistence","Starting transaction:",e);const i=new rH(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return de.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class rH extends OB{constructor(e){super(),this.currentSequenceNumber=e}}class mw{constructor(e){this.persistence=e,this.Ai=new dw,this.Ri=null}static Vi(e){return new mw(e)}get mi(){if(this.Ri)return this.Ri;throw Be(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),de.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),de.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.mi,r=>{const i=Me.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,Ge.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return de.or([()=>de.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Rg{constructor(e,n){this.persistence=e,this.gi=new fu(r=>LB(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=$F(this,n)}static Vi(e,n){return new Rg(e,n)}Ii(){}di(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return de.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?de.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,a=>this.Sr(e,a,n).next(l=>{l||(r++,s.removeEntry(a,Ge.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),de.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Sp(e.data.value)),n}Sr(e,n,r){return de.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return de.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=pt(),i=pt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new pw(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return X8()?8:MB(Mr())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ps(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new iH;return this.ws(e,n,a).next(l=>{if(s.result=l,this.Rs)return this.Ss(e,n,a,l.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Gu()<=mt.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",$u(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),de.resolve()):(Gu()<=mt.DEBUG&&Ae("QueryEngine","Query:",$u(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Gu()<=mt.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",$u(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fs(n))):de.resolve())}ps(e,n){if(PA(n))return de.resolve(null);let r=Fs(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=u1(n,null,"F"),r=Fs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=pt(...s);return this.gs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.bs(n,l);return this.Ds(n,d,a,c.readTime)?this.ps(e,u1(n,null,"F")):this.vs(e,d,n,c)}))})))}ys(e,n,r,i){return PA(n)||i.isEqual(Ge.min())?de.resolve(null):this.gs.getDocuments(e,r).next(s=>{const a=this.bs(n,s);return this.Ds(n,a,r,i)?de.resolve(null):(Gu()<=mt.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$u(n)),this.vs(e,a,n,CB(i,$f)).next(l=>l))})}bs(e,n){let r=new nr(R4(e));return n.forEach((i,s)=>{wv(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return Gu()<=mt.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",$u(n)),this.gs.getDocumentsMatchingQuery(e,n,$o.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="LocalStore",aH=3e8;class oH{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new wn(nt),this.Ms=new fu(s=>ow(s),lw),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XF(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function lH(t,e,n,r){return new oH(t,e,n,r)}async function K4(t,e){const n=Xe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let c=pt();for(const d of i){a.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of s){l.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:a,addedBatchIds:l}))})})}function uH(t,e){const n=Xe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(l,c,d,f){const p=d.batch,m=p.keys();let y=de.resolve();return m.forEach(E=>{y=y.next(()=>f.getEntry(c,E)).next(C=>{const I=d.docVersions.get(E);jt(I!==null,48541),C.version.compareTo(I)<0&&(p.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),f.addEntry(C)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=pt();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Q4(t){const e=Xe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function cH(t,e){const n=Xe(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const l=[];e.targetChanges.forEach((f,p)=>{const m=i.get(p);if(!m)return;l.push(n.hi.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.hi.addMatchingKeys(s,f.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(xr.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),function(C,I,A){return C.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=aH?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(m,y,f)&&l.push(n.hi.updateTargetData(s,y))});let c=Pa(),d=pt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(hH(s,a,e.documentUpdates).next(f=>{c=f.Ls,d=f.ks})),!r.isEqual(Ge.min())){const f=n.hi.getLastRemoteSnapshotVersion(s).next(p=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return de.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.Fs=i,s))}function hH(t,e,n){let r=pt(),i=pt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Pa();return n.forEach((l,c)=>{const d=s.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Ge.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):Ae(gw,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ls:a,ks:i}})}function fH(t,e){const n=Xe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=iw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dH(t,e){const n=Xe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,de.resolve(i)):n.hi.allocateTargetId(r).next(a=>(i=new Ao(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function m1(t,e,n){const r=Xe(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!rh(a))throw a;Ae(gw,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function KA(t,e,n){const r=Xe(t);let i=Ge.min(),s=pt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,f){const p=Xe(c),m=p.Ms.get(f);return m!==void 0?de.resolve(p.Fs.get(m)):p.hi.getTargetData(d,f)}(r,a,Fs(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,n?i:Ge.min(),n?s:pt())).next(l=>(mH(r,eF(e),l),{documents:l,qs:s})))}function mH(t,e,n){let r=t.xs.get(e)||Ge.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}class QA{constructor(){this.activeTargetIds=aF()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pH{constructor(){this.Fo=new QA,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new QA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="ConnectivityMonitor";class JA{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ae(ZA,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ae(ZA,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ep=null;function p1(){return ep===null?ep=function(){return 268435456+Math.round(2147483648*Math.random())}():ep++,"0x"+ep.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="RestConnection",vH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yH{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===r1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const a=p1(),l=this.Go(e,n.toUriEncodedString());Ae(ky,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);const{host:d}=new URL(l),f=za(d);return this.jo(e,l,c,r,f).then(p=>(Ae(ky,`Received RPC '${e}' ${a}: `,p),p),p=>{throw Go(ky,`RPC '${e}' ${a} failed with error: `,p,"url: ",l,"request:",r),p})}Jo(e,n,r,i,s,a){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+th}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){const r=vH[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _H{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="WebChannelConnection";class bH extends yH{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){const a=p1();return new Promise((l,c)=>{const d=new JI;d.setWithCredentials(!0),d.listenOnce(e4.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Ap.NO_ERROR:const p=d.getResponseJson();Ae(Cr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),l(p);break;case Ap.TIMEOUT:Ae(Cr,`RPC '${e}' ${a} timed out`),c(new Ee(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Ap.HTTP_ERROR:const m=d.getStatus();if(Ae(Cr,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const E=y==null?void 0:y.error;if(E&&E.status&&E.message){const C=function(A){const N=A.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(N)>=0?N:ue.UNKNOWN}(E.status);c(new Ee(C,E.message))}else c(new Ee(ue.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Ee(ue.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{c_:e,streamId:a,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{Ae(Cr,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(i);Ae(Cr,`RPC '${e}' ${a} sending request:`,i),d.send(n,"POST",f,r,15)})}P_(e,n,r){const i=p1(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=r4(),l=n4(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=s.join("");Ae(Cr,`Creating RPC '${e}' stream ${i}: ${f}`,c);const p=a.createWebChannel(f,c);this.T_(p);let m=!1,y=!1;const E=new _H({Ho:I=>{y?Ae(Cr,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(m||(Ae(Cr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),Ae(Cr,`RPC '${e}' stream ${i} sending:`,I),p.send(I))},Yo:()=>p.close()}),C=(I,A,N)=>{I.listen(A,M=>{try{N(M)}catch(P){setTimeout(()=>{throw P},0)}})};return C(p,nf.EventType.OPEN,()=>{y||(Ae(Cr,`RPC '${e}' stream ${i} transport opened.`),E.s_())}),C(p,nf.EventType.CLOSE,()=>{y||(y=!0,Ae(Cr,`RPC '${e}' stream ${i} transport closed`),E.__(),this.I_(p))}),C(p,nf.EventType.ERROR,I=>{y||(y=!0,Go(Cr,`RPC '${e}' stream ${i} transport errored. Name:`,I.name,"Message:",I.message),E.__(new Ee(ue.UNAVAILABLE,"The operation could not be completed")))}),C(p,nf.EventType.MESSAGE,I=>{var A;if(!y){const N=I.data[0];jt(!!N,16349);const M=N,P=(M==null?void 0:M.error)||((A=M[0])===null||A===void 0?void 0:A.error);if(P){Ae(Cr,`RPC '${e}' stream ${i} received error:`,P);const q=P.status;let L=function(x){const S=Bn[x];if(S!==void 0)return U4(S)}(q),T=P.message;L===void 0&&(L=ue.INTERNAL,T="Unknown error status: "+q+" with message "+P.message),y=!0,E.__(new Ee(L,T)),p.close()}else Ae(Cr,`RPC '${e}' stream ${i} received:`,N),E.a_(N)}}),C(l,t4.STAT_EVENT,I=>{I.stat===t1.PROXY?Ae(Cr,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===t1.NOPROXY&&Ae(Cr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.o_()},0),E}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Ly(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(t){return new TF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&Ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="PersistentStream";class J4{constructor(e,n,r,i,s,a,l,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Z4(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(ja(n.toString()),ja("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new Ee(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Ae(eS,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Ae(eS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wH extends J4{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=RF(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ge.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ge.min():a.readTime?Hs(a.readTime):Ge.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=d1(this.serializer),n.addTarget=function(s,a){let l;const c=a.target;if(l=o1(c)?{documents:IF(s,c)}:{query:DF(s,c).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=B4(s,a.resumeToken);const d=c1(s,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(Ge.min())>0){l.readTime=Sg(s,a.snapshotVersion.toTimestamp());const d=c1(s,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=MF(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=d1(this.serializer),n.removeTarget=e,this.k_(n)}}class xH extends J4{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return jt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,jt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){jt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=NF(e.writeResults,e.commitTime),r=Hs(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=d1(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>CF(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EH{}class TH extends EH{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Ee(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,h1(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ee(ue.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Jo(e,h1(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(ue.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class AH{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ja(n),this._a=!1):Ae("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu="RemoteStore";class SH{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(a=>{r.enqueueAndForget(async()=>{du(this)&&(Ae(nu,"Restarting streams for network reachability change."),await async function(c){const d=Xe(c);d.Ia.add(4),await Cd(d),d.Aa.set("Unknown"),d.Ia.delete(4),await Rv(d)}(this))})}),this.Aa=new AH(r,i)}}async function Rv(t){if(du(t))for(const e of t.da)await e(!0)}async function Cd(t){for(const e of t.da)await e(!1)}function e3(t,e){const n=Xe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),bw(n)?_w(n):ih(n).x_()&&yw(n,e))}function vw(t,e){const n=Xe(t),r=ih(n);n.Ta.delete(e),r.x_()&&t3(n,e),n.Ta.size===0&&(r.x_()?r.B_():du(n)&&n.Aa.set("Unknown"))}function yw(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ih(t).H_(e)}function t3(t,e){t.Ra.$e(e),ih(t).Y_(e)}function _w(t){t.Ra=new bF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ih(t).start(),t.Aa.aa()}function bw(t){return du(t)&&!ih(t).M_()&&t.Ta.size>0}function du(t){return Xe(t).Ia.size===0}function n3(t){t.Ra=void 0}async function RH(t){t.Aa.set("Online")}async function CH(t){t.Ta.forEach((e,n)=>{yw(t,e)})}async function NH(t,e){n3(t),bw(t)?(t.Aa.la(e),_w(t)):t.Aa.set("Unknown")}async function IH(t,e,n){if(t.Aa.set("Online"),e instanceof z4&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.Ta.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ta.delete(l),i.Ra.removeTarget(l))}(t,e)}catch(r){Ae(nu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Cg(t,r)}else if(e instanceof Np?t.Ra.Ye(e):e instanceof V4?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Ge.min()))try{const r=await Q4(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.Ra.Pt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.Ta.get(d);f&&s.Ta.set(d,f.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const f=s.Ta.get(c);if(!f)return;s.Ta.set(c,f.withResumeToken(xr.EMPTY_BYTE_STRING,f.snapshotVersion)),t3(s,c);const p=new Ao(f.target,c,d,f.sequenceNumber);yw(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Ae(nu,"Failed to raise snapshot:",r),await Cg(t,r)}}async function Cg(t,e,n){if(!rh(e))throw e;t.Ia.add(1),await Cd(t),t.Aa.set("Offline"),n||(n=()=>Q4(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ae(nu,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Rv(t)})}function r3(t,e){return e().catch(n=>Cg(t,n,e))}async function Cv(t){const e=Xe(t),n=Ko(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:iw;for(;DH(e);)try{const i=await fH(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,OH(e,i)}catch(i){await Cg(e,i)}i3(e)&&s3(e)}function DH(t){return du(t)&&t.Pa.length<10}function OH(t,e){t.Pa.push(e);const n=Ko(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function i3(t){return du(t)&&!Ko(t).M_()&&t.Pa.length>0}function s3(t){Ko(t).start()}async function MH(t){Ko(t).na()}async function kH(t){const e=Ko(t);for(const n of t.Pa)e.X_(n.mutations)}async function LH(t,e,n){const r=t.Pa.shift(),i=cw.from(r,e,n);await r3(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Cv(t)}async function jH(t,e){e&&Ko(t).Z_&&await async function(r,i){if(function(a){return yF(a)&&a!==ue.ABORTED}(i.code)){const s=r.Pa.shift();Ko(r).N_(),await r3(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Cv(r)}}(t,e),i3(t)&&s3(t)}async function tS(t,e){const n=Xe(t);n.asyncQueue.verifyOperationInProgress(),Ae(nu,"RemoteStore received new credentials");const r=du(n);n.Ia.add(3),await Cd(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Rv(n)}async function PH(t,e){const n=Xe(t);e?(n.Ia.delete(2),await Rv(n)):e||(n.Ia.add(2),await Cd(n),n.Aa.set("Unknown"))}function ih(t){return t.Va||(t.Va=function(n,r,i){const s=Xe(n);return s.ia(),new wH(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:RH.bind(null,t),e_:CH.bind(null,t),n_:NH.bind(null,t),J_:IH.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),bw(t)?_w(t):t.Aa.set("Unknown")):(await t.Va.stop(),n3(t))})),t.Va}function Ko(t){return t.ma||(t.ma=function(n,r,i){const s=Xe(n);return s.ia(),new xH(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:MH.bind(null,t),n_:jH.bind(null,t),ea:kH.bind(null,t),ta:LH.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Cv(t)):(await t.ma.stop(),t.Pa.length>0&&(Ae(nu,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new ww(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xw(t,e){if(ja("AsyncQueue",`${e}: ${t}`),rh(t))return new Ee(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{static emptySet(e){return new xc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Me.comparator(n.key,r.key):(n,r)=>Me.comparator(n.key,r.key),this.keyedMap=rf(),this.sortedSet=new wn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new xc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this.fa=new wn(Me.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Be(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class qc{constructor(e,n,r,i,s,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new qc(e,n,xc.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UH{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class VH{constructor(){this.queries=rS(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=Xe(n),s=i.queries;i.queries=rS(),s.forEach((a,l)=>{for(const c of l.wa)c.onError(r)})})(this,new Ee(ue.ABORTED,"Firestore shutting down"))}}function rS(){return new fu(t=>S4(t),bv)}async function Ew(t,e){const n=Xe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new UH,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=xw(a,`Initialization of query '${$u(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&Aw(n)}async function Tw(t,e){const n=Xe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.wa.indexOf(e);a>=0&&(s.wa.splice(a,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function zH(t,e){const n=Xe(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.wa)l.Ca(i)&&(r=!0);a.ya=i}}r&&Aw(n)}function BH(t,e,n){const r=Xe(t),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(e)}function Aw(t){t.Da.forEach(e=>{e.next()})}var g1,iS;(iS=g1||(g1={})).Fa="default",iS.Cache="cache";class Sw{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new qc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=qc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==g1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e){this.key=e}}class o3{constructor(e){this.key=e}}class FH{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=pt(),this.mutatedKeys=pt(),this.Xa=R4(e),this.eu=new xc(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new nS,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const m=i.get(f),y=wv(this.query,p)?p:null,E=!!m&&this.mutatedKeys.has(m.key),C=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let I=!1;m&&y?m.data.isEqual(y.data)?E!==C&&(r.track({type:3,doc:y}),I=!0):this.iu(m,y)||(r.track({type:2,doc:y}),I=!0,(c&&this.Xa(y,c)>0||d&&this.Xa(y,d)<0)&&(l=!0)):!m&&y?(r.track({type:0,doc:y}),I=!0):m&&!y&&(r.track({type:1,doc:m}),I=!0,(c||d)&&(l=!0)),I&&(y?(a=a.add(y),s=C?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{eu:a,ru:r,Ds:l,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort((f,p)=>function(y,E){const C=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{At:I})}};return C(y)-C(E)}(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),i=i!=null&&i;const l=n&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,d=c!==this.Ya;return this.Ya=c,a.length!==0||d?{snapshot:new qc(this.query,e.eu,s,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new nS,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=pt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new o3(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new a3(r))}),n}uu(e){this.Ha=e.qs,this.Za=pt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return qc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Rw="SyncEngine";class HH{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class qH{constructor(e){this.key=e,this.lu=!1}}class GH{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new fu(l=>S4(l),bv),this.Tu=new Map,this.Iu=new Set,this.du=new wn(Me.comparator),this.Eu=new Map,this.Au=new dw,this.Ru={},this.Vu=new Map,this.mu=Hc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function $H(t,e,n=!0){const r=d3(t);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await l3(r,e,n,!0),i}async function YH(t,e){const n=d3(t);await l3(n,e,!0,!1)}async function l3(t,e,n,r){const i=await dH(t.localStore,Fs(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await WH(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&e3(t.remoteStore,i),l}async function WH(t,e,n,r,i){t.gu=(p,m,y)=>async function(C,I,A,N){let M=I.view.nu(A);M.Ds&&(M=await KA(C.localStore,I.query,!1).then(({documents:T})=>I.view.nu(T,M)));const P=N&&N.targetChanges.get(I.targetId),q=N&&N.targetMismatches.get(I.targetId)!=null,L=I.view.applyChanges(M,C.isPrimaryClient,P,q);return aS(C,I.targetId,L._u),L.snapshot}(t,p,m,y);const s=await KA(t.localStore,e,!0),a=new FH(e,s.qs),l=a.nu(s.documents),c=Rd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=a.applyChanges(l,t.isPrimaryClient,c);aS(t,n,d._u);const f=new HH(e,n,a);return t.Pu.set(e,f),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function XH(t,e,n){const r=Xe(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(a=>!bv(a,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await m1(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&vw(r.remoteStore,i.targetId),v1(r,i.targetId)}).catch(nh)):(v1(r,i.targetId),await m1(r.localStore,i.targetId,!0))}async function KH(t,e){const n=Xe(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vw(n.remoteStore,r.targetId))}async function QH(t,e,n){const r=iq(t);try{const i=await function(a,l){const c=Xe(a),d=on.now(),f=l.reduce((y,E)=>y.add(E.key),pt());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=Pa(),C=pt();return c.Os.getEntries(y,f).next(I=>{E=I,E.forEach((A,N)=>{N.isValidDocument()||(C=C.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,E)).next(I=>{p=I;const A=[];for(const N of l){const M=dF(N,p.get(N.key).overlayedDocument);M!=null&&A.push(new il(N.key,M,y4(M.value.mapValue),Ci.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,A,l)}).next(I=>{m=I;const A=I.applyToLocalDocumentSet(p,C);return c.documentOverlayCache.saveOverlays(y,I.batchId,A)})}).then(()=>({batchId:m.batchId,changes:N4(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,c){let d=a.Ru[a.currentUser.toKey()];d||(d=new wn(nt)),d=d.insert(l,c),a.Ru[a.currentUser.toKey()]=d}(r,i.batchId,n),await Nd(r,i.changes),await Cv(r.remoteStore)}catch(i){const s=xw(i,"Failed to persist write");n.reject(s)}}async function u3(t,e){const n=Xe(t);try{const r=await cH(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Eu.get(s);a&&(jt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.lu=!0:i.modifiedDocuments.size>0?jt(a.lu,14607):i.removedDocuments.size>0&&(jt(a.lu,42227),a.lu=!1))}),await Nd(n,r,e)}catch(r){await nh(r)}}function sS(t,e,n){const r=Xe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,a)=>{const l=a.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const c=Xe(a);c.onlineState=l;let d=!1;c.queries.forEach((f,p)=>{for(const m of p.wa)m.va(l)&&(d=!0)}),d&&Aw(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ZH(t,e,n){const r=Xe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),s=i&&i.key;if(s){let a=new wn(Me.comparator);a=a.insert(s,Ir.newNoDocument(s,Ge.min()));const l=pt().add(s),c=new Av(Ge.min(),new Map,new wn(nt),a,l);await u3(r,c),r.du=r.du.remove(s),r.Eu.delete(e),Cw(r)}else await m1(r.localStore,e,!1).then(()=>v1(r,e,n)).catch(nh)}async function JH(t,e){const n=Xe(t),r=e.batch.batchId;try{const i=await uH(n.localStore,e);h3(n,r,null),c3(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Nd(n,i)}catch(i){await nh(i)}}async function eq(t,e,n){const r=Xe(t);try{const i=await function(a,l){const c=Xe(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,l).next(p=>(jt(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);h3(r,e,n),c3(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Nd(r,i)}catch(i){await nh(i)}}function c3(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function h3(t,e,n){const r=Xe(t);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function v1(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||f3(t,r)})}function f3(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(vw(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Cw(t))}function aS(t,e,n){for(const r of n)r instanceof a3?(t.Au.addReference(r.key,e),tq(t,r)):r instanceof o3?(Ae(Rw,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||f3(t,r.key)):Be(19791,{yu:r})}function tq(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Ae(Rw,"New document in limbo: "+n),t.Iu.add(r),Cw(t))}function Cw(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Me(tn.fromString(e)),r=t.mu.next();t.Eu.set(r,new qH(n)),t.du=t.du.insert(n,r),e3(t.remoteStore,new Ao(Fs(_v(n.path)),r,"TargetPurposeLimboResolution",gv.ue))}}async function Nd(t,e,n){const r=Xe(t),i=[],s=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((l,c)=>{a.push(r.gu(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);const p=pw.Es(c.targetId,d);s.push(p)}}))}),await Promise.all(a),r.hu.J_(i),await async function(c,d){const f=Xe(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>de.forEach(d,m=>de.forEach(m.Is,y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>de.forEach(m.ds,y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!rh(p))throw p;Ae(gw,"Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const y=f.Fs.get(m),E=y.snapshotVersion,C=y.withLastLimboFreeSnapshotVersion(E);f.Fs=f.Fs.insert(m,C)}}}(r.localStore,s))}async function nq(t,e){const n=Xe(t);if(!n.currentUser.isEqual(e)){Ae(Rw,"User change. New user:",e.toKey());const r=await K4(n.localStore,e);n.currentUser=e,function(s,a){s.Vu.forEach(l=>{l.forEach(c=>{c.reject(new Ee(ue.CANCELLED,a))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nd(n,r.Bs)}}function rq(t,e){const n=Xe(t),r=n.Eu.get(e);if(r&&r.lu)return pt().add(r.key);{let i=pt();const s=n.Tu.get(e);if(!s)return i;for(const a of s){const l=n.Pu.get(a);i=i.unionWith(l.view.tu)}return i}}function d3(t){const e=Xe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=u3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZH.bind(null,e),e.hu.J_=zH.bind(null,e.eventManager),e.hu.pu=BH.bind(null,e.eventManager),e}function iq(t){const e=Xe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eq.bind(null,e),e}class Ng{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sv(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return lH(this.persistence,new sH,e.initialUser,this.serializer)}Du(e){return new X4(mw.Vi,this.serializer)}bu(e){return new pH}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ng.provider={build:()=>new Ng};class sq extends Ng{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){jt(this.persistence.referenceDelegate instanceof Rg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new qF(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?ti.withCacheSize(this.cacheSizeBytes):ti.DEFAULT;return new X4(r=>Rg.Vi(r,n),this.serializer)}}class y1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nq.bind(null,this.syncEngine),await PH(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VH}()}createDatastore(e){const n=Sv(e.databaseInfo.databaseId),r=function(s){return new bH(s)}(e.databaseInfo);return function(s,a,l,c){return new TH(s,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new SH(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>sS(this.syncEngine,n,0),function(){return JA.C()?new JA:new gH}())}createSyncEngine(e,n){return function(i,s,a,l,c,d,f){const p=new GH(i,s,a,l,c,d);return f&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Xe(i);Ae(nu,"RemoteStore shutting down."),s.Ia.add(5),await Cd(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}y1.provider={build:()=>new y1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ja("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo="FirestoreClient";class aq{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Nr.UNAUTHENTICATED,this.clientId=rw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Ae(Qo,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Ae(Qo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jy(t,e){t.asyncQueue.verifyOperationInProgress(),Ae(Qo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await K4(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Go("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Ae("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Go("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function oS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oq(t);Ae(Qo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>tS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>tS(e.remoteStore,i)),t._onlineComponents=e}async function oq(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ae(Qo,"Using user provided OfflineComponentProvider");try{await jy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ue.FAILED_PRECONDITION||i.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Go("Error using user provided cache. Falling back to memory cache: "+n),await jy(t,new Ng)}}else Ae(Qo,"Using default OfflineComponentProvider"),await jy(t,new sq(void 0));return t._offlineComponents}async function m3(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ae(Qo,"Using user provided OnlineComponentProvider"),await oS(t,t._uninitializedComponentsProvider._online)):(Ae(Qo,"Using default OnlineComponentProvider"),await oS(t,new y1))),t._onlineComponents}function lq(t){return m3(t).then(e=>e.syncEngine)}async function Ig(t){const e=await m3(t),n=e.eventManager;return n.onListen=$H.bind(null,e.syncEngine),n.onUnlisten=XH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=YH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KH.bind(null,e.syncEngine),n}function uq(t,e,n={}){const r=new Ca;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,d){const f=new Nw({next:m=>{f.Ou(),a.enqueueAndForget(()=>Tw(s,p));const y=m.docs.has(l);!y&&m.fromCache?d.reject(new Ee(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?d.reject(new Ee(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new Sw(_v(l.path),f,{includeMetadataChanges:!0,ka:!0});return Ew(s,p)}(await Ig(t),t.asyncQueue,e,n,r)),r.promise}function cq(t,e,n={}){const r=new Ca;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,d){const f=new Nw({next:m=>{f.Ou(),a.enqueueAndForget(()=>Tw(s,p)),m.fromCache&&c.source==="server"?d.reject(new Ee(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new Sw(l,f,{includeMetadataChanges:!0,ka:!0});return Ew(s,p)}(await Ig(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3="firestore.googleapis.com",uS=!0;class cS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=g3,this.ssl=uS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:uS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=W4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FF)throw new Ee(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=p3((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ee(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ee(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ee(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nv{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yB;switch(r.type){case"firstParty":return new xB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=lS.get(n);r&&(Ae("ComponentProvider","Removing Datastore"),lS.delete(n),r.terminate())}(this),Promise.resolve()}}function hq(t,e,n,r={}){var i;t=rs(t,Nv);const s=za(e),a=t._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;s&&(uv(`https://${c}`),cv("Firestore",!0)),a.host!==g3&&a.host!==c&&Go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},a),{host:c,ssl:s,emulatorOptions:r});if(!Jl(d,l)&&(t._setSettings(d),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=Nr.MOCK_USER;else{f=gI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ee(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Nr(m)}t._authCredentials=new _B(new s4(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mu(this.firestore,e,this._query)}}class jn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jn(this.firestore,e,this._key)}toJSON(){return{type:jn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Td(n,jn._jsonSchema))return new jn(e,r||null,new Me(tn.fromString(n.referencePath)))}}jn._jsonSchemaVersion="firestore/documentReference/1.0",jn._jsonSchema={type:$n("string",jn._jsonSchemaVersion),referencePath:$n("string")};class zo extends mu{constructor(e,n,r){super(e,n,_v(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new Me(e))}withConverter(e){return new zo(this.firestore,e,this._path)}}function fq(t,e,...n){if(t=Wt(t),o4("collection","path",e),t instanceof Nv){const r=tn.fromString(e,...n);return EA(r),new zo(t,null,r)}{if(!(t instanceof jn||t instanceof zo))throw new Ee(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tn.fromString(e,...n));return EA(r),new zo(t.firestore,null,r)}}function Iw(t,e,...n){if(t=Wt(t),arguments.length===1&&(e=rw.newId()),o4("doc","path",e),t instanceof Nv){const r=tn.fromString(e,...n);return xA(r),new jn(t,null,new Me(r))}{if(!(t instanceof jn||t instanceof zo))throw new Ee(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tn.fromString(e,...n));return xA(r),new jn(t.firestore,t instanceof zo?t.converter:null,new Me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="AsyncQueue";class fS{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Z4(this,"async_queue_retry"),this.oc=()=>{const r=Ly();r&&Ae(hS,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Ly();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Ly();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Ca;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!rh(e))throw e;Ae(hS,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ja("INTERNAL UNHANDLED ERROR: ",dS(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=ww.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&Be(47125,{hc:dS(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function dS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Zo extends Nv{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new fS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fS(e),this._firestoreClient=void 0,await e}}}function dq(t,e){const n=typeof t=="object"?t:hv(),r=typeof t=="string"?t:e,i=bd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Fb("firestore");s&&hq(i,...s)}return i}function Id(t){if(t._terminated)throw new Ee(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||mq(t),t._firestoreClient}function mq(t){var e,n,r;const i=t._freezeSettings(),s=function(l,c,d,f){return new UB(l,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,p3(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new aq(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ji(xr.fromBase64String(e))}catch(n){throw new Ee(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ji(xr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ji._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Td(e,Ji._jsonSchema))return Ji.fromBase64String(e.bytes)}}Ji._jsonSchemaVersion="firestore/bytes/1.0",Ji._jsonSchema={type:$n("string",Ji._jsonSchemaVersion),bytes:$n("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new br(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qs._jsonSchemaVersion}}static fromJSON(e){if(Td(e,qs._jsonSchema))return new qs(e.latitude,e.longitude)}}qs._jsonSchemaVersion="firestore/geoPoint/1.0",qs._jsonSchema={type:$n("string",qs._jsonSchemaVersion),latitude:$n("number"),longitude:$n("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Gs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Td(e,Gs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Gs(e.vectorValues);throw new Ee(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gs._jsonSchemaVersion="firestore/vectorValue/1.0",Gs._jsonSchema={type:$n("string",Gs._jsonSchemaVersion),vectorValues:$n("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pq=/^__.*__$/;class gq{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new il(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sd(e,this.data,n,this.fieldTransforms)}}class v3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new il(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function y3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ec:t})}}class Ow{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Ow(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Dg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(y3(this.Ec)&&pq.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class vq{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Sv(e)}Dc(e,n,r,i=!1){return new Ow({Ec:e,methodName:n,bc:r,path:br.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mw(t){const e=t._freezeSettings(),n=Sv(t._databaseId);return new vq(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _3(t,e,n,r,i,s={}){const a=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);kw("Data must be an object, but it was:",a,r);const l=b3(r,a);let c,d;if(s.merge)c=new xi(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const m=_1(e,p,n);if(!a.contains(m))throw new Ee(ue.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);x3(f,m)||f.push(m)}c=new xi(f),d=a.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=a.fieldTransforms;return new gq(new ii(l),c,d)}class Dv extends Dw{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dv}}function yq(t,e,n,r){const i=t.Dc(1,e,n);kw("Data must be an object, but it was:",i,r);const s=[],a=ii.empty();rl(r,(c,d)=>{const f=Lw(e,c,n);d=Wt(d);const p=i.gc(f);if(d instanceof Dv)s.push(f);else{const m=Dd(d,p);m!=null&&(s.push(f),a.set(f,m))}});const l=new xi(s);return new v3(a,l,i.fieldTransforms)}function _q(t,e,n,r,i,s){const a=t.Dc(1,e,n),l=[_1(e,r,n)],c=[i];if(s.length%2!=0)throw new Ee(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(_1(e,s[m])),c.push(s[m+1]);const d=[],f=ii.empty();for(let m=l.length-1;m>=0;--m)if(!x3(d,l[m])){const y=l[m];let E=c[m];E=Wt(E);const C=a.gc(y);if(E instanceof Dv)d.push(y);else{const I=Dd(E,C);I!=null&&(d.push(y),f.set(y,I))}}const p=new xi(d);return new v3(f,p,a.fieldTransforms)}function bq(t,e,n,r=!1){return Dd(n,t.Dc(r?4:3,e))}function Dd(t,e){if(w3(t=Wt(t)))return kw("Unsupported field value:",e,t),b3(t,e);if(t instanceof Dw)return function(r,i){if(!y3(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let c=Dd(l,i.yc(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=on.fromDate(r);return{timestampValue:Sg(i.serializer,s)}}if(r instanceof on){const s=new on(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sg(i.serializer,s)}}if(r instanceof qs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ji)return{bytesValue:B4(i.serializer,r._byteString)};if(r instanceof jn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Gs)return function(a,l){return{mapValue:{fields:{[g4]:{stringValue:v4},[wg]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.wc("VectorValues must only contain numeric values.");return uw(l.serializer,d)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${pv(r)}`)}(t,e)}function b3(t,e){const n={};return c4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rl(t,(r,i)=>{const s=Dd(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function w3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof on||t instanceof qs||t instanceof Ji||t instanceof jn||t instanceof Dw||t instanceof Gs)}function kw(t,e,n){if(!w3(n)||!l4(n)){const r=pv(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function _1(t,e,n){if((e=Wt(e))instanceof Iv)return e._internalPath;if(typeof e=="string")return Lw(t,e);throw Dg("Field path arguments must be of type string or ",t,!1,void 0,n)}const wq=new RegExp("[~\\*/\\[\\]]");function Lw(t,e,n){if(e.search(wq)>=0)throw Dg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Iv(...e.split("."))._internalPath}catch{throw Dg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dg(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new Ee(ue.INVALID_ARGUMENT,l+t+c)}function x3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(T3("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xq extends E3{data(){return super.data()}}function T3(t,e){return typeof e=="string"?Lw(t,e):e instanceof Iv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jw{}class Eq extends jw{}function Tq(t,e,...n){let r=[];e instanceof jw&&r.push(e),r=r.concat(n),function(s){const a=s.filter(c=>c instanceof Uw).length,l=s.filter(c=>c instanceof Pw).length;if(a>1||a>0&&l>0)throw new Ee(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Pw extends Eq{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Pw(e,n,r)}_apply(e){const n=this._parse(e);return S3(e._query,n),new mu(e.firestore,e.converter,l1(e._query,n))}_parse(e){const n=Mw(e.firestore);return function(s,a,l,c,d,f,p){let m;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Ee(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){gS(p,f);const E=[];for(const C of p)E.push(pS(c,s,C));m={arrayValue:{values:E}}}else m=pS(c,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||gS(p,f),m=bq(l,a,p,f==="in"||f==="not-in");return qn.create(d,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Uw extends jw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Uw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ts.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const l=s.getFlattenedFilters();for(const c of l)S3(a,c),a=l1(a,c)}(e._query,n),new mu(e.firestore,e.converter,l1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function pS(t,e,n){if(typeof(n=Wt(n))=="string"){if(n==="")throw new Ee(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!A4(e)&&n.indexOf("/")!==-1)throw new Ee(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(tn.fromString(n));if(!Me.isDocumentKey(r))throw new Ee(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return DA(t,new Me(r))}if(n instanceof jn)return DA(t,n._key);throw new Ee(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pv(n)}.`)}function gS(t,e){if(!Array.isArray(t)||t.length===0)throw new Ee(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function S3(t,e){const n=function(i,s){for(const a of i)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ee(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Aq{convertValue(e,n="none"){switch(Xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return rl(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[wg].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Ln(a.doubleValue));return new Gs(s)}convertGeoPoint(e){return new qs(Ln(e.latitude),Ln(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=yv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yf(e));default:return null}}convertTimestamp(e){const n=Yo(e);return new on(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=tn.fromString(e);jt(Y4(r),9688,{name:e});const i=new Wf(r.get(1),r.get(3)),s=new Me(r.popFirst(5));return i.isEqual(n)||ja(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class af{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gl extends E3{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ip(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(T3("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Gl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Gl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gl._jsonSchema={type:$n("string",Gl._jsonSchemaVersion),bundleSource:$n("string","DocumentSnapshot"),bundleName:$n("string"),bundle:$n("string")};class Ip extends Gl{data(e={}){return super.data(e)}}class $l{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new af(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ip(this._firestore,this._userDataWriter,r.key,r,new af(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const c=new Ip(i._firestore,i._userDataWriter,l.doc.key,l.doc,new af(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new Ip(i._firestore,i._userDataWriter,l.doc.key,l.doc,new af(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:Sq(l.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$l._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Sq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rq(t){t=rs(t,jn);const e=rs(t.firestore,Zo);return uq(Id(e),t._key).then(n=>C3(e,t,n))}$l._jsonSchemaVersion="firestore/querySnapshot/1.0",$l._jsonSchema={type:$n("string",$l._jsonSchemaVersion),bundleSource:$n("string","QuerySnapshot"),bundleName:$n("string"),bundle:$n("string")};class Vw extends Aq{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ji(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,n)}}function Ov(t){t=rs(t,mu);const e=rs(t.firestore,Zo),n=Id(e),r=new Vw(e);return A3(t._query),cq(n,t._query).then(i=>new $l(e,r,t,i))}function Cq(t,e,n){t=rs(t,jn);const r=rs(t.firestore,Zo),i=R3(t.converter,e,n);return zw(r,[_3(Mw(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ci.none())])}function Nq(t){return zw(rs(t.firestore,Zo),[new Tv(t._key,Ci.none())])}function Iq(t,...e){var n,r,i;t=Wt(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||mS(e[a])||(s=e[a++]);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(mS(e[a])){const p=e[a];e[a]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[a+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[a+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,d,f;if(t instanceof jn)d=rs(t.firestore,Zo),f=_v(t._key.path),c={next:p=>{e[a]&&e[a](C3(d,t,p))},error:e[a+1],complete:e[a+2]};else{const p=rs(t,mu);d=rs(p.firestore,Zo),f=p._query;const m=new Vw(d);c={next:y=>{e[a]&&e[a](new $l(d,m,p,y))},error:e[a+1],complete:e[a+2]},A3(t._query)}return function(m,y,E,C){const I=new Nw(C),A=new Sw(y,I,E);return m.asyncQueue.enqueueAndForget(async()=>Ew(await Ig(m),A)),()=>{I.Ou(),m.asyncQueue.enqueueAndForget(async()=>Tw(await Ig(m),A))}}(Id(d),f,l,c)}function zw(t,e){return function(r,i){const s=new Ca;return r.asyncQueue.enqueueAndForget(async()=>QH(await lq(r),i,s)),s.promise}(Id(t),e)}function C3(t,e,n){const r=n.docs.get(e._key),i=new Vw(t);return new Gl(t,i,e._key,r,new af(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dq{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Mw(e)}set(e,n,r){this._verifyNotCommitted();const i=Py(e,this._firestore),s=R3(i.converter,n,r),a=_3(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Ci.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Py(e,this._firestore);let a;return a=typeof(n=Wt(n))=="string"||n instanceof Iv?_q(this._dataReader,"WriteBatch.update",s._key,n,r,i):yq(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,Ci.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Py(e,this._firestore);return this._mutations=this._mutations.concat(new Tv(n._key,Ci.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ee(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Py(t,e){if((t=Wt(t)).firestore!==e)throw new Ee(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(t){return Id(t=rs(t,Zo)),new Dq(t,e=>zw(t,e))}(function(e,n=!0){(function(i){th=i})(cu),qo(new Ma("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new Zo(new bB(r.getProvider("auth-internal")),new EB(a,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ee(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wf(d.options.projectId,f)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),ns(vA,yA,e),ns(vA,yA,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3="firebasestorage.googleapis.com",I3="storageBucket",Oq=2*60*1e3,Mq=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn extends Ss{constructor(e,n,r=0){super(Uy(e),`Firebase Storage: ${n} (${Uy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Uy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Cn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Cn||(Cn={}));function Uy(t){return"storage/"+t}function Fw(){const t="An unknown error occurred, please check the error payload for server response.";return new Nn(Cn.UNKNOWN,t)}function kq(t){return new Nn(Cn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Lq(t){return new Nn(Cn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function jq(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Nn(Cn.UNAUTHENTICATED,t)}function Pq(){return new Nn(Cn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Uq(t){return new Nn(Cn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Vq(){return new Nn(Cn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zq(){return new Nn(Cn.CANCELED,"User canceled the upload/download.")}function Bq(t){return new Nn(Cn.INVALID_URL,"Invalid URL '"+t+"'.")}function Fq(t){return new Nn(Cn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Hq(){return new Nn(Cn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+I3+"' property when initializing the app?")}function qq(){return new Nn(Cn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Gq(){return new Nn(Cn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function $q(t){return new Nn(Cn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function b1(t){return new Nn(Cn.INVALID_ARGUMENT,t)}function D3(){return new Nn(Cn.APP_DELETED,"The Firebase app was deleted.")}function Yq(t){return new Nn(Cn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cf(t,e){return new Nn(Cn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function qh(t){throw new Nn(Cn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ei.makeFromUrl(e,n)}catch{return new Ei(e,"")}if(r.path==="")return r;throw Fq(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+i+a,"i"),c={bucket:1,path:3};function d(P){P.path_=decodeURIComponent(P.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${f}/b/${i}/o${m}`,"i"),E={bucket:1,path:3},C=n===N3?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",A=new RegExp(`^https?://${C}/${i}/${I}`,"i"),M=[{regex:l,indices:c,postModify:s},{regex:y,indices:E,postModify:d},{regex:A,indices:{bucket:1,path:2},postModify:d}];for(let P=0;P<M.length;P++){const q=M[P],L=q.regex.exec(e);if(L){const T=L[q.indices.bucket];let _=L[q.indices.path];_||(_=""),r=new Ei(T,_),q.postModify(r);break}}if(r==null)throw Bq(e);return r}}class Wq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xq(t,e,n){let r=1,i=null,s=null,a=!1,l=0;function c(){return l===2}let d=!1;function f(...I){d||(d=!0,e.apply(null,I))}function p(I){i=setTimeout(()=>{i=null,t(y,c())},I)}function m(){s&&clearTimeout(s)}function y(I,...A){if(d){m();return}if(I){m(),f.call(null,I,...A);return}if(c()||a){m(),f.call(null,I,...A);return}r<64&&(r*=2);let M;l===1?(l=2,M=0):M=(r+Math.random())*1e3,p(M)}let E=!1;function C(I){E||(E=!0,m(),!d&&(i!==null?(I||(l=2),clearTimeout(i),p(0)):I||(l=1)))}return p(0),s=setTimeout(()=>{a=!0,C(!0)},n),C}function Kq(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qq(t){return t!==void 0}function Zq(t){return typeof t=="object"&&!Array.isArray(t)}function Hw(t){return typeof t=="string"||t instanceof String}function vS(t){return qw()&&t instanceof Blob}function qw(){return typeof Blob<"u"}function yS(t,e,n,r){if(r<e)throw b1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw b1(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function O3(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Yl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Yl||(Yl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jq(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{constructor(e,n,r,i,s,a,l,c,d,f,p,m=!0,y=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=p,this.retry=m,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,C)=>{this.resolve_=E,this.reject_=C,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new tp(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const l=s.getErrorCode()===Yl.NO_ERROR,c=s.getStatus();if(!l||Jq(c,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Yl.ABORT;r(!1,new tp(!1,null,f));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new tp(d,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());Qq(c)?s(c):s()}catch(c){a(c)}else if(l!==null){const c=Fw();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(i.canceled){const c=this.appDelete_?D3():zq();a(c)}else{const c=Vq();a(c)}};this.canceled_?n(!1,new tp(!1,null,!0)):this.backoffId_=Xq(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Kq(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function tG(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function nG(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rG(t,e){e&&(t["X-Firebase-GMPID"]=e)}function iG(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function sG(t,e,n,r,i,s,a=!0,l=!1){const c=O3(t.urlParams),d=t.url+c,f=Object.assign({},t.headers);return rG(f,e),tG(f,n),nG(f,s),iG(f,r),new eG(d,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aG(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function oG(...t){const e=aG();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(qw())return new Blob(t);throw new Nn(Cn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function lG(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uG(t){if(typeof atob>"u")throw $q("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Vy{constructor(e,n){this.data=e,this.contentType=n||null}}function M3(t,e){switch(t){case ts.RAW:return new Vy(k3(e));case ts.BASE64:case ts.BASE64URL:return new Vy(L3(t,e));case ts.DATA_URL:return new Vy(hG(e),fG(e))}throw Fw()}function k3(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=t.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function cG(t){let e;try{e=decodeURIComponent(t)}catch{throw Cf(ts.DATA_URL,"Malformed data URL.")}return k3(e)}function L3(t,e){switch(t){case ts.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Cf(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ts.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Cf(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=uG(e)}catch(i){throw i.message.includes("polyfill")?i:Cf(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class j3{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Cf(ts.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=dG(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function hG(t){const e=new j3(t);return e.base64?L3(ts.BASE64,e.rest):cG(e.rest)}function fG(t){return new j3(t).contentType}function dG(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n){let r=0,i="";vS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(vS(this.data_)){const r=this.data_,i=lG(r,e,n);return i===null?null:new _o(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new _o(r,!0)}}static getBlob(...e){if(qw()){const n=e.map(r=>r instanceof _o?r.data_:r);return new _o(oG.apply(null,n))}else{const n=e.map(a=>Hw(a)?M3(ts.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(a=>{for(let l=0;l<a.length;l++)i[s++]=a[l]}),new _o(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(t){let e;try{e=JSON.parse(t)}catch{return null}return Zq(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mG(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function pG(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function U3(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gG(t,e){return e}class zr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||gG}}let np=null;function vG(t){return!Hw(t)||t.length<2?t:U3(t)}function V3(){if(np)return np;const t=[];t.push(new zr("bucket")),t.push(new zr("generation")),t.push(new zr("metageneration")),t.push(new zr("name","fullPath",!0));function e(s,a){return vG(a)}const n=new zr("name");n.xform=e,t.push(n);function r(s,a){return a!==void 0?Number(a):a}const i=new zr("size");return i.xform=r,t.push(i),t.push(new zr("timeCreated")),t.push(new zr("updated")),t.push(new zr("md5Hash",null,!0)),t.push(new zr("cacheControl",null,!0)),t.push(new zr("contentDisposition",null,!0)),t.push(new zr("contentEncoding",null,!0)),t.push(new zr("contentLanguage",null,!0)),t.push(new zr("contentType",null,!0)),t.push(new zr("metadata","customMetadata",!0)),np=t,np}function yG(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Ei(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function _G(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const a=n[s];r[a.local]=a.xform(r,e[a.server])}return yG(r,t),r}function z3(t,e,n){const r=P3(e);return r===null?null:_G(t,r,n)}function bG(t,e,n,r){const i=P3(e);if(i===null||!Hw(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(d=>{const f=t.bucket,p=t.fullPath,m="/b/"+a(f)+"/o/"+a(p),y=Gw(m,n,r),E=O3({alt:"media",token:d});return y+E})[0]}function wG(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class B3{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(t){if(!t)throw Fw()}function xG(t,e){function n(r,i){const s=z3(t,i,e);return F3(s!==null),s}return n}function EG(t,e){function n(r,i){const s=z3(t,i,e);return F3(s!==null),bG(s,i,t.host,t._protocol)}return n}function H3(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Pq():i=jq():n.getStatus()===402?i=Lq(t.bucket):n.getStatus()===403?i=Uq(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function TG(t){const e=H3(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=kq(t.path)),s.serverResponse=i.serverResponse,s}return n}function AG(t,e,n){const r=e.fullServerUrl(),i=Gw(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,l=new B3(i,s,EG(t,n),a);return l.errorHandler=TG(e),l}function SG(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function RG(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=SG(null,e)),r}function CG(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let M="";for(let P=0;P<2;P++)M=M+Math.random().toString().slice(2);return M}const c=l();a["Content-Type"]="multipart/related; boundary="+c;const d=RG(e,r,i),f=wG(d,n),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,m=`\r
--`+c+"--",y=_o.getBlob(p,r,m);if(y===null)throw qq();const E={name:d.fullPath},C=Gw(s,t.host,t._protocol),I="POST",A=t.maxUploadRetryTime,N=new B3(C,I,xG(t,n),A);return N.urlParams=E,N.headers=a,N.body=y.uploadData(),N.errorHandler=H3(e),N}class NG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw qh("cannot .send() more than once");if(za(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class IG extends NG{initXhr(){this.xhr_.responseType="text"}}function q3(){return new IG}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n){this._service=e,n instanceof Ei?this._location=n:this._location=Ei.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ru(e,n)}get root(){const e=new Ei(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return U3(this._location.path)}get storage(){return this._service}get parent(){const e=mG(this._location.path);if(e===null)return null;const n=new Ei(this._location.bucket,e);return new ru(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Yq(e)}}function G3(t,e,n){t._throwIfRoot("uploadBytes");const r=CG(t.storage,t._location,V3(),new _o(e,!0),n);return t.storage.makeRequestWithTokens(r,q3).then(i=>({metadata:i,ref:t}))}function DG(t,e,n=ts.RAW,r){t._throwIfRoot("uploadString");const i=M3(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),G3(t,i.data,s)}function OG(t){t._throwIfRoot("getDownloadURL");const e=AG(t.storage,t._location,V3());return t.storage.makeRequestWithTokens(e,q3).then(n=>{if(n===null)throw Gq();return n})}function MG(t,e){const n=pG(t._location.path,e),r=new Ei(t._location.bucket,n);return new ru(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kG(t){return/^[A-Za-z]+:\/\//.test(t)}function LG(t,e){return new ru(t,e)}function $3(t,e){if(t instanceof $w){const n=t;if(n._bucket==null)throw Hq();const r=new ru(n,n._bucket);return e!=null?$3(r,e):r}else return e!==void 0?MG(t,e):t}function jG(t,e){if(e&&kG(e)){if(t instanceof $w)return LG(t,e);throw b1("To use ref(service, url), the first argument must be a Storage instance.")}else return $3(t,e)}function _S(t,e){const n=e==null?void 0:e[I3];return n==null?null:Ei.makeFromBucketSpec(n,t)}function PG(t,e,n,r={}){t.host=`${e}:${n}`;const i=za(e);i&&(uv(`https://${t.host}/b`),cv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:gI(s,t.app.options.projectId))}class $w{constructor(e,n,r,i,s,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=N3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Oq,this._maxUploadRetryTime=Mq,this._requests=new Set,i!=null?this._bucket=Ei.makeFromBucketSpec(i,this._host):this._bucket=_S(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ei.makeFromBucketSpec(this._url,e):this._bucket=_S(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(wi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ru(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Wq(D3());{const a=sG(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const bS="@firebase/storage",wS="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3="storage";function UG(t,e,n){return t=Wt(t),G3(t,e,n)}function W3(t,e,n,r){return t=Wt(t),DG(t,e,n,r)}function Yw(t){return t=Wt(t),OG(t)}function Ww(t,e){return t=Wt(t),jG(t,e)}function X3(t=hv(),e){t=Wt(t);const r=bd(t,Y3).getImmediate({identifier:e}),i=Fb("storage");return i&&VG(r,...i),r}function VG(t,e,n,r={}){PG(t,e,n,r)}function zG(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new $w(n,r,i,e,cu)}function BG(){qo(new Ma(Y3,zG,"PUBLIC").setMultipleInstances(!0)),ns(bS,wS,""),ns(bS,wS,"esm2017")}BG();const zy={apiKey:"AIzaSyBivqXghVKoxfSsJVXxmNi3n2yO1l2U9zU",authDomain:"runica-heros-folio.firebaseapp.com",projectId:"runica-heros-folio",storageBucket:"runica-heros-folio.firebasestorage.app",messagingSenderId:"1092943227692",appId:"1:1092943227692:web:342ed3d5e7c682b7eb9a89",measurementId:"G-GKS7XV7YEW"};let oc,w1,x1,E1;if(zy.apiKey&&zy.projectId)try{oc=_I(zy),w1=mB(oc),x1=dq(oc,"runica-db"),E1=X3(oc),console.log("Firebase initialized successfully.")}catch(t){console.error("Error initializing Firebase. Please check your configuration.",t)}else console.warn("Firebase configuration environment variables are not set. Cloud features are disabled.");const Zs=()=>{if(!oc||!w1||!x1||!E1)throw new Error("Firebase is not initialized. Make sure your environment variables are set.");return{app:oc,auth:w1,db:x1,storage:E1}},FG=new ya,HG=()=>{try{const{auth:t}=Zs();return Ez(t,FG).then(()=>{})}catch{return alert("Firebase is not configured. Cloud sign-in is disabled. Please update firebaseConfig.ts."),Promise.resolve()}},qG=()=>{try{const{auth:t}=Zs();return rz(t)}catch{return Promise.resolve()}},GG=t=>{try{const{auth:e}=Zs();return nz(e,t)}catch{return t(null),()=>{}}};function $G(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function K3(t,e){return new Promise(function(n,r){let i;return YG(t).then(function(s){try{return i=s,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(a){return r(a)}},r)})}const YG=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const s=new DataView(i);let a=0;if(s.getUint16(a)!==65496)return n("not a valid JPEG");for(a+=2;;){const l=s.getUint16(a);if(l===65498)break;const c=s.getUint16(a+2);if(l===65505&&s.getUint32(a+4)===1165519206){const d=a+10;let f;switch(s.getUint16(d)){case 18761:f=!0;break;case 19789:f=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(d+2,f)!==42)return n("TIFF header contains invalid version");const p=s.getUint32(d+4,f),m=d+p+2+12*s.getUint16(d+p,f);for(let y=d+p+2;y<m;y+=12)if(s.getUint16(y,f)==274){if(s.getUint16(y+2,f)!==3)return n("Orientation data type is invalid");if(s.getUint32(y+4,f)!==1)return n("Orientation data count is invalid");s.setUint16(y+8,1,f);break}return e(i.slice(a,a+2+c))}a+=2+c}return e(new Blob)}),r.readAsArrayBuffer(t)});var Og={},WG={get exports(){return Og},set exports(t){Og=t}};(function(t){var e,n,r={};WG.exports=r,r.parse=function(i,s){for(var a=r.bin.readUshort,l=r.bin.readUint,c=0,d={},f=new Uint8Array(i),p=f.length-4;l(f,p)!=101010256;)p--;c=p,c+=4;var m=a(f,c+=4);a(f,c+=2);var y=l(f,c+=2),E=l(f,c+=4);c+=4,c=E;for(var C=0;C<m;C++){l(f,c),c+=4,c+=4,c+=4,l(f,c+=4),y=l(f,c+=4);var I=l(f,c+=4),A=a(f,c+=4),N=a(f,c+2),M=a(f,c+4);c+=6;var P=l(f,c+=8);c+=4,c+=A+N+M,r._readLocal(f,P,d,y,I,s)}return d},r._readLocal=function(i,s,a,l,c,d){var f=r.bin.readUshort,p=r.bin.readUint;p(i,s),f(i,s+=4),f(i,s+=2);var m=f(i,s+=2);p(i,s+=2),p(i,s+=4),s+=4;var y=f(i,s+=8),E=f(i,s+=2);s+=2;var C=r.bin.readUTF8(i,s,y);if(s+=y,s+=E,d)a[C]={size:c,csize:l};else{var I=new Uint8Array(i.buffer,s);if(m==0)a[C]=new Uint8Array(I.buffer.slice(s,s+l));else{if(m!=8)throw"unknown compression method: "+m;var A=new Uint8Array(c);r.inflateRaw(I,A),a[C]=A}}},r.inflateRaw=function(i,s){return r.F.inflate(i,s)},r.inflate=function(i,s){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),s)},r.deflate=function(i,s){s==null&&(s={level:6});var a=0,l=new Uint8Array(50+Math.floor(1.1*i.length));l[a]=120,l[a+1]=156,a+=2,a=r.F.deflateRaw(i,l,a,s.level);var c=r.adler(i,0,i.length);return l[a+0]=c>>>24&255,l[a+1]=c>>>16&255,l[a+2]=c>>>8&255,l[a+3]=c>>>0&255,new Uint8Array(l.buffer,0,a+4)},r.deflateRaw=function(i,s){s==null&&(s={level:6});var a=new Uint8Array(50+Math.floor(1.1*i.length)),l=r.F.deflateRaw(i,a,l,s.level);return new Uint8Array(a.buffer,0,l)},r.encode=function(i,s){s==null&&(s=!1);var a=0,l=r.bin.writeUint,c=r.bin.writeUshort,d={};for(var f in i){var p=!r._noNeed(f)&&!s,m=i[f],y=r.crc.crc(m,0,m.length);d[f]={cpr:p,usize:m.length,crc:y,file:p?r.deflateRaw(m):m}}for(var f in d)a+=d[f].file.length+30+46+2*r.bin.sizeUTF8(f);a+=22;var E=new Uint8Array(a),C=0,I=[];for(var f in d){var A=d[f];I.push(C),C=r._writeHeader(E,C,f,A,0)}var N=0,M=C;for(var f in d)A=d[f],I.push(C),C=r._writeHeader(E,C,f,A,1,I[N++]);var P=C-M;return l(E,C,101010256),C+=4,c(E,C+=4,N),c(E,C+=2,N),l(E,C+=2,P),l(E,C+=4,M),C+=4,C+=2,E.buffer},r._noNeed=function(i){var s=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},r._writeHeader=function(i,s,a,l,c,d){var f=r.bin.writeUint,p=r.bin.writeUshort,m=l.file;return f(i,s,c==0?67324752:33639248),s+=4,c==1&&(s+=2),p(i,s,20),p(i,s+=2,0),p(i,s+=2,l.cpr?8:0),f(i,s+=2,0),f(i,s+=4,l.crc),f(i,s+=4,m.length),f(i,s+=4,l.usize),p(i,s+=4,r.bin.sizeUTF8(a)),p(i,s+=2,0),s+=2,c==1&&(s+=2,s+=2,f(i,s+=6,d),s+=4),s+=r.bin.writeUTF8(i,s,a),c==0&&(i.set(m,s),s+=m.length),s},r.crc={table:function(){for(var i=new Uint32Array(256),s=0;s<256;s++){for(var a=s,l=0;l<8;l++)1&a?a=3988292384^a>>>1:a>>>=1;i[s]=a}return i}(),update:function(i,s,a,l){for(var c=0;c<l;c++)i=r.crc.table[255&(i^s[a+c])]^i>>>8;return i},crc:function(i,s,a){return 4294967295^r.crc.update(4294967295,i,s,a)}},r.adler=function(i,s,a){for(var l=1,c=0,d=s,f=s+a;d<f;){for(var p=Math.min(d+5552,f);d<p;)c+=l+=i[d++];l%=65521,c%=65521}return c<<16|l},r.bin={readUshort:function(i,s){return i[s]|i[s+1]<<8},writeUshort:function(i,s,a){i[s]=255&a,i[s+1]=a>>8&255},readUint:function(i,s){return 16777216*i[s+3]+(i[s+2]<<16|i[s+1]<<8|i[s])},writeUint:function(i,s,a){i[s]=255&a,i[s+1]=a>>8&255,i[s+2]=a>>16&255,i[s+3]=a>>24&255},readASCII:function(i,s,a){for(var l="",c=0;c<a;c++)l+=String.fromCharCode(i[s+c]);return l},writeASCII:function(i,s,a){for(var l=0;l<a.length;l++)i[s+l]=a.charCodeAt(l)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,s,a){for(var l,c="",d=0;d<a;d++)c+="%"+r.bin.pad(i[s+d].toString(16));try{l=decodeURIComponent(c)}catch{return r.bin.readASCII(i,s,a)}return l},writeUTF8:function(i,s,a){for(var l=a.length,c=0,d=0;d<l;d++){var f=a.charCodeAt(d);if(!(4294967168&f))i[s+c]=f,c++;else if(!(4294965248&f))i[s+c]=192|f>>6,i[s+c+1]=128|f>>0&63,c+=2;else if(!(4294901760&f))i[s+c]=224|f>>12,i[s+c+1]=128|f>>6&63,i[s+c+2]=128|f>>0&63,c+=3;else{if(4292870144&f)throw"e";i[s+c]=240|f>>18,i[s+c+1]=128|f>>12&63,i[s+c+2]=128|f>>6&63,i[s+c+3]=128|f>>0&63,c+=4}}return c},sizeUTF8:function(i){for(var s=i.length,a=0,l=0;l<s;l++){var c=i.charCodeAt(l);if(!(4294967168&c))a++;else if(!(4294965248&c))a+=2;else if(!(4294901760&c))a+=3;else{if(4292870144&c)throw"e";a+=4}}return a}},r.F={},r.F.deflateRaw=function(i,s,a,l){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],d=r.F.U,f=r.F._goodIndex;r.F._hash;var p=r.F._putsE,m=0,y=a<<3,E=0,C=i.length;if(l==0){for(;m<C;)p(s,y,m+(k=Math.min(65535,C-m))==C?1:0),y=r.F._copyExact(i,m,k,s,y+8),m+=k;return y>>>3}var I=d.lits,A=d.strt,N=d.prev,M=0,P=0,q=0,L=0,T=0,_=0;for(C>2&&(A[_=r.F._hash(i,0)]=0),m=0;m<C;m++){if(T=_,m+1<C-2){_=r.F._hash(i,m+1);var x=m+1&32767;N[x]=A[_],A[_]=x}if(E<=m){(M>14e3||P>26697)&&C-m>100&&(E<m&&(I[M]=m-E,M+=2,E=m),y=r.F._writeBlock(m==C-1||E==C?1:0,I,M,L,i,q,m-q,s,y),M=P=L=0,q=m);var S=0;m<C-2&&(S=r.F._bestMatch(i,m,N,T,Math.min(c[2],C-m),c[3]));var k=S>>>16,j=65535&S;if(S!=0){j=65535&S;var O=f(k=S>>>16,d.of0);d.lhst[257+O]++;var G=f(j,d.df0);d.dhst[G]++,L+=d.exb[O]+d.dxb[G],I[M]=k<<23|m-E,I[M+1]=j<<16|O<<8|G,M+=2,E=m+k}else d.lhst[i[m]]++;P++}}for(q==m&&i.length!=0||(E<m&&(I[M]=m-E,M+=2,E=m),y=r.F._writeBlock(1,I,M,L,i,q,m-q,s,y),M=0,P=0,M=P=L=0,q=m);7&y;)y++;return y>>>3},r.F._bestMatch=function(i,s,a,l,c,d){var f=32767&s,p=a[f],m=f-p+32768&32767;if(p==f||l!=r.F._hash(i,s-m))return 0;for(var y=0,E=0,C=Math.min(32767,s);m<=C&&--d!=0&&p!=f;){if(y==0||i[s+y]==i[s+y-m]){var I=r.F._howLong(i,s,m);if(I>y){if(E=m,(y=I)>=c)break;m+2<I&&(I=m+2);for(var A=0,N=0;N<I-2;N++){var M=s-m+N+32768&32767,P=M-a[M]+32768&32767;P>A&&(A=P,p=M)}}}m+=(f=p)-(p=a[f])+32768&32767}return y<<16|E},r.F._howLong=function(i,s,a){if(i[s]!=i[s-a]||i[s+1]!=i[s+1-a]||i[s+2]!=i[s+2-a])return 0;var l=s,c=Math.min(i.length,s+258);for(s+=3;s<c&&i[s]==i[s-a];)s++;return s-l},r.F._hash=function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,s,a,l,c,d,f,p,m){var y,E,C,I,A,N,M,P,q,L=r.F.U,T=r.F._putsF,_=r.F._putsE;L.lhst[256]++,E=(y=r.F.getTrees())[0],C=y[1],I=y[2],A=y[3],N=y[4],M=y[5],P=y[6],q=y[7];var x=32+(m+3&7?8-(m+3&7):0)+(f<<3),S=l+r.F.contSize(L.fltree,L.lhst)+r.F.contSize(L.fdtree,L.dhst),k=l+r.F.contSize(L.ltree,L.lhst)+r.F.contSize(L.dtree,L.dhst);k+=14+3*M+r.F.contSize(L.itree,L.ihst)+(2*L.ihst[16]+3*L.ihst[17]+7*L.ihst[18]);for(var j=0;j<286;j++)L.lhst[j]=0;for(j=0;j<30;j++)L.dhst[j]=0;for(j=0;j<19;j++)L.ihst[j]=0;var O=x<S&&x<k?0:S<k?1:2;if(T(p,m,i),T(p,m+1,O),m+=3,O==0){for(;7&m;)m++;m=r.F._copyExact(c,d,f,p,m)}else{var G,J;if(O==1&&(G=L.fltree,J=L.fdtree),O==2){r.F.makeCodes(L.ltree,E),r.F.revCodes(L.ltree,E),r.F.makeCodes(L.dtree,C),r.F.revCodes(L.dtree,C),r.F.makeCodes(L.itree,I),r.F.revCodes(L.itree,I),G=L.ltree,J=L.dtree,_(p,m,A-257),_(p,m+=5,N-1),_(p,m+=5,M-4),m+=4;for(var z=0;z<M;z++)_(p,m+3*z,L.itree[1+(L.ordr[z]<<1)]);m+=3*M,m=r.F._codeTiny(P,L.itree,p,m),m=r.F._codeTiny(q,L.itree,p,m)}for(var U=d,Q=0;Q<a;Q+=2){for(var ee=s[Q],ae=ee>>>23,be=U+(8388607&ee);U<be;)m=r.F._writeLit(c[U++],G,p,m);if(ae!=0){var pe=s[Q+1],ye=pe>>16,W=pe>>8&255,X=255&pe;_(p,m=r.F._writeLit(257+W,G,p,m),ae-L.of0[W]),m+=L.exb[W],T(p,m=r.F._writeLit(X,J,p,m),ye-L.df0[X]),m+=L.dxb[X],U+=ae}}m=r.F._writeLit(256,G,p,m)}return m},r.F._copyExact=function(i,s,a,l,c){var d=c>>>3;return l[d]=a,l[d+1]=a>>>8,l[d+2]=255-l[d],l[d+3]=255-l[d+1],d+=4,l.set(new Uint8Array(i.buffer,s,a),d),c+(a+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,s=r.F._hufTree(i.lhst,i.ltree,15),a=r.F._hufTree(i.dhst,i.dtree,15),l=[],c=r.F._lenCodes(i.ltree,l),d=[],f=r.F._lenCodes(i.dtree,d),p=0;p<l.length;p+=2)i.ihst[l[p]]++;for(p=0;p<d.length;p+=2)i.ihst[d[p]]++;for(var m=r.F._hufTree(i.ihst,i.itree,7),y=19;y>4&&i.itree[1+(i.ordr[y-1]<<1)]==0;)y--;return[s,a,m,c,f,y,l,d]},r.F.getSecond=function(i){for(var s=[],a=0;a<i.length;a+=2)s.push(i[a+1]);return s},r.F.nonZero=function(i){for(var s="",a=0;a<i.length;a+=2)i[a+1]!=0&&(s+=(a>>1)+",");return s},r.F.contSize=function(i,s){for(var a=0,l=0;l<s.length;l++)a+=s[l]*i[1+(l<<1)];return a},r.F._codeTiny=function(i,s,a,l){for(var c=0;c<i.length;c+=2){var d=i[c],f=i[c+1];l=r.F._writeLit(d,s,a,l);var p=d==16?2:d==17?3:7;d>15&&(r.F._putsE(a,l,f,p),l+=p)}return l},r.F._lenCodes=function(i,s){for(var a=i.length;a!=2&&i[a-1]==0;)a-=2;for(var l=0;l<a;l+=2){var c=i[l+1],d=l+3<a?i[l+3]:-1,f=l+5<a?i[l+5]:-1,p=l==0?-1:i[l-1];if(c==0&&d==c&&f==c){for(var m=l+5;m+2<a&&i[m+2]==c;)m+=2;(y=Math.min(m+1-l>>>1,138))<11?s.push(17,y-3):s.push(18,y-11),l+=2*y-2}else if(c==p&&d==c&&f==c){for(m=l+5;m+2<a&&i[m+2]==c;)m+=2;var y=Math.min(m+1-l>>>1,6);s.push(16,y-3),l+=2*y-2}else s.push(c,0)}return a>>>1},r.F._hufTree=function(i,s,a){var l=[],c=i.length,d=s.length,f=0;for(f=0;f<d;f+=2)s[f]=0,s[f+1]=0;for(f=0;f<c;f++)i[f]!=0&&l.push({lit:f,f:i[f]});var p=l.length,m=l.slice(0);if(p==0)return 0;if(p==1){var y=l[0].lit;return m=y==0?1:0,s[1+(y<<1)]=1,s[1+(m<<1)]=1,1}l.sort(function(P,q){return P.f-q.f});var E=l[0],C=l[1],I=0,A=1,N=2;for(l[0]={lit:-1,f:E.f+C.f,l:E,r:C,d:0};A!=p-1;)E=I!=A&&(N==p||l[I].f<l[N].f)?l[I++]:l[N++],C=I!=A&&(N==p||l[I].f<l[N].f)?l[I++]:l[N++],l[A++]={lit:-1,f:E.f+C.f,l:E,r:C};var M=r.F.setDepth(l[A-1],0);for(M>a&&(r.F.restrictDepth(m,a,M),M=a),f=0;f<p;f++)s[1+(m[f].lit<<1)]=m[f].d;return M},r.F.setDepth=function(i,s){return i.lit!=-1?(i.d=s,s):Math.max(r.F.setDepth(i.l,s+1),r.F.setDepth(i.r,s+1))},r.F.restrictDepth=function(i,s,a){var l=0,c=1<<a-s,d=0;for(i.sort(function(p,m){return m.d==p.d?p.f-m.f:m.d-p.d}),l=0;l<i.length&&i[l].d>s;l++){var f=i[l].d;i[l].d=s,d+=c-(1<<a-f)}for(d>>>=a-s;d>0;)(f=i[l].d)<s?(i[l].d++,d-=1<<s-f-1):l++;for(;l>=0;l--)i[l].d==s&&d<0&&(i[l].d--,d++);d!=0&&console.log("debt left")},r.F._goodIndex=function(i,s){var a=0;return s[16|a]<=i&&(a|=16),s[8|a]<=i&&(a|=8),s[4|a]<=i&&(a|=4),s[2|a]<=i&&(a|=2),s[1|a]<=i&&(a|=1),a},r.F._writeLit=function(i,s,a,l){return r.F._putsF(a,l,s[i<<1]),l+s[1+(i<<1)]},r.F.inflate=function(i,s){var a=Uint8Array;if(i[0]==3&&i[1]==0)return s||new a(0);var l=r.F,c=l._bitsF,d=l._bitsE,f=l._decodeTiny,p=l.makeCodes,m=l.codes2map,y=l._get17,E=l.U,C=s==null;C&&(s=new a(i.length>>>2<<3));for(var I,A,N=0,M=0,P=0,q=0,L=0,T=0,_=0,x=0,S=0;N==0;)if(N=c(i,S,1),M=c(i,S+1,2),S+=3,M!=0){if(C&&(s=r.F._check(s,x+(1<<17))),M==1&&(I=E.flmap,A=E.fdmap,T=511,_=31),M==2){P=d(i,S,5)+257,q=d(i,S+5,5)+1,L=d(i,S+10,4)+4,S+=14;for(var k=0;k<38;k+=2)E.itree[k]=0,E.itree[k+1]=0;var j=1;for(k=0;k<L;k++){var O=d(i,S+3*k,3);E.itree[1+(E.ordr[k]<<1)]=O,O>j&&(j=O)}S+=3*L,p(E.itree,j),m(E.itree,j,E.imap),I=E.lmap,A=E.dmap,S=f(E.imap,(1<<j)-1,P+q,i,S,E.ttree);var G=l._copyOut(E.ttree,0,P,E.ltree);T=(1<<G)-1;var J=l._copyOut(E.ttree,P,q,E.dtree);_=(1<<J)-1,p(E.ltree,G),m(E.ltree,G,I),p(E.dtree,J),m(E.dtree,J,A)}for(;;){var z=I[y(i,S)&T];S+=15&z;var U=z>>>4;if(!(U>>>8))s[x++]=U;else{if(U==256)break;var Q=x+U-254;if(U>264){var ee=E.ldef[U-257];Q=x+(ee>>>3)+d(i,S,7&ee),S+=7&ee}var ae=A[y(i,S)&_];S+=15&ae;var be=ae>>>4,pe=E.ddef[be],ye=(pe>>>4)+c(i,S,15&pe);for(S+=15&pe,C&&(s=r.F._check(s,x+(1<<17)));x<Q;)s[x]=s[x++-ye],s[x]=s[x++-ye],s[x]=s[x++-ye],s[x]=s[x++-ye];x=Q}}}else{7&S&&(S+=8-(7&S));var W=4+(S>>>3),X=i[W-4]|i[W-3]<<8;C&&(s=r.F._check(s,x+X)),s.set(new a(i.buffer,i.byteOffset+W,X),x),S=W+X<<3,x+=X}return s.length==x?s:s.slice(0,x)},r.F._check=function(i,s){var a=i.length;if(s<=a)return i;var l=new Uint8Array(Math.max(a<<1,s));return l.set(i,0),l},r.F._decodeTiny=function(i,s,a,l,c,d){for(var f=r.F._bitsE,p=r.F._get17,m=0;m<a;){var y=i[p(l,c)&s];c+=15&y;var E=y>>>4;if(E<=15)d[m]=E,m++;else{var C=0,I=0;E==16?(I=3+f(l,c,2),c+=2,C=d[m-1]):E==17?(I=3+f(l,c,3),c+=3):E==18&&(I=11+f(l,c,7),c+=7);for(var A=m+I;m<A;)d[m]=C,m++}}return c},r.F._copyOut=function(i,s,a,l){for(var c=0,d=0,f=l.length>>>1;d<a;){var p=i[d+s];l[d<<1]=0,l[1+(d<<1)]=p,p>c&&(c=p),d++}for(;d<f;)l[d<<1]=0,l[1+(d<<1)]=0,d++;return c},r.F.makeCodes=function(i,s){for(var a,l,c,d,f=r.F.U,p=i.length,m=f.bl_count,y=0;y<=s;y++)m[y]=0;for(y=1;y<p;y+=2)m[i[y]]++;var E=f.next_code;for(a=0,m[0]=0,l=1;l<=s;l++)a=a+m[l-1]<<1,E[l]=a;for(c=0;c<p;c+=2)(d=i[c+1])!=0&&(i[c]=E[d],E[d]++)},r.F.codes2map=function(i,s,a){for(var l=i.length,c=r.F.U.rev15,d=0;d<l;d+=2)if(i[d+1]!=0)for(var f=d>>1,p=i[d+1],m=f<<4|p,y=s-p,E=i[d]<<y,C=E+(1<<y);E!=C;)a[c[E]>>>15-s]=m,E++},r.F.revCodes=function(i,s){for(var a=r.F.U.rev15,l=15-s,c=0;c<i.length;c+=2){var d=i[c]<<s-i[c+1];i[c]=a[d]>>>l}},r.F._putsE=function(i,s,a){a<<=7&s;var l=s>>>3;i[l]|=a,i[l+1]|=a>>>8},r.F._putsF=function(i,s,a){a<<=7&s;var l=s>>>3;i[l]|=a,i[l+1]|=a>>>8,i[l+2]|=a>>>16},r.F._bitsE=function(i,s,a){return(i[s>>>3]|i[1+(s>>>3)]<<8)>>>(7&s)&(1<<a)-1},r.F._bitsF=function(i,s,a){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)&(1<<a)-1},r.F._get17=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)},r.F._get25=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16|i[3+(s>>>3)]<<24)>>>(7&s)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,s=0;s<32768;s++){var a=s;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,i.rev15[s]=(a>>>16|a<<16)>>>17}function l(c,d,f){for(;d--!=0;)c.push(0,f)}for(s=0;s<32;s++)i.ldef[s]=i.of0[s]<<3|i.exb[s],i.ddef[s]=i.df0[s]<<4|i.dxb[s];l(i.fltree,144,8),l(i.fltree,112,9),l(i.fltree,24,7),l(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),l(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),l(i.itree,19,0),l(i.ltree,286,0),l(i.dtree,30,0),l(i.ttree,320,0)}()})();var XG=$G({__proto__:null,default:Og},[Og]);const vs=function(){var t={nextZero(f,p){for(;f[p]!=0;)p++;return p},readUshort:(f,p)=>f[p]<<8|f[p+1],writeUshort(f,p,m){f[p]=m>>8&255,f[p+1]=255&m},readUint:(f,p)=>16777216*f[p]+(f[p+1]<<16|f[p+2]<<8|f[p+3]),writeUint(f,p,m){f[p]=m>>24&255,f[p+1]=m>>16&255,f[p+2]=m>>8&255,f[p+3]=255&m},readASCII(f,p,m){let y="";for(let E=0;E<m;E++)y+=String.fromCharCode(f[p+E]);return y},writeASCII(f,p,m){for(let y=0;y<m.length;y++)f[p+y]=m.charCodeAt(y)},readBytes(f,p,m){const y=[];for(let E=0;E<m;E++)y.push(f[p+E]);return y},pad:f=>f.length<2?`0${f}`:f,readUTF8(f,p,m){let y,E="";for(let C=0;C<m;C++)E+=`%${t.pad(f[p+C].toString(16))}`;try{y=decodeURIComponent(E)}catch{return t.readASCII(f,p,m)}return y}};function e(f,p,m,y){const E=p*m,C=s(y),I=Math.ceil(p*C/8),A=new Uint8Array(4*E),N=new Uint32Array(A.buffer),{ctype:M}=y,{depth:P}=y,q=t.readUshort;if(M==6){const ee=E<<2;if(P==8)for(var L=0;L<ee;L+=4)A[L]=f[L],A[L+1]=f[L+1],A[L+2]=f[L+2],A[L+3]=f[L+3];if(P==16)for(L=0;L<ee;L++)A[L]=f[L<<1]}else if(M==2){const ee=y.tabs.tRNS;if(ee==null){if(P==8)for(L=0;L<E;L++){var T=3*L;N[L]=255<<24|f[T+2]<<16|f[T+1]<<8|f[T]}if(P==16)for(L=0;L<E;L++)T=6*L,N[L]=255<<24|f[T+4]<<16|f[T+2]<<8|f[T]}else{var _=ee[0];const ae=ee[1],be=ee[2];if(P==8)for(L=0;L<E;L++){var x=L<<2;T=3*L,N[L]=255<<24|f[T+2]<<16|f[T+1]<<8|f[T],f[T]==_&&f[T+1]==ae&&f[T+2]==be&&(A[x+3]=0)}if(P==16)for(L=0;L<E;L++)x=L<<2,T=6*L,N[L]=255<<24|f[T+4]<<16|f[T+2]<<8|f[T],q(f,T)==_&&q(f,T+2)==ae&&q(f,T+4)==be&&(A[x+3]=0)}}else if(M==3){const ee=y.tabs.PLTE,ae=y.tabs.tRNS,be=ae?ae.length:0;if(P==1)for(var S=0;S<m;S++){var k=S*I,j=S*p;for(L=0;L<p;L++){x=j+L<<2;var O=3*(G=f[k+(L>>3)]>>7-((7&L)<<0)&1);A[x]=ee[O],A[x+1]=ee[O+1],A[x+2]=ee[O+2],A[x+3]=G<be?ae[G]:255}}if(P==2)for(S=0;S<m;S++)for(k=S*I,j=S*p,L=0;L<p;L++)x=j+L<<2,O=3*(G=f[k+(L>>2)]>>6-((3&L)<<1)&3),A[x]=ee[O],A[x+1]=ee[O+1],A[x+2]=ee[O+2],A[x+3]=G<be?ae[G]:255;if(P==4)for(S=0;S<m;S++)for(k=S*I,j=S*p,L=0;L<p;L++)x=j+L<<2,O=3*(G=f[k+(L>>1)]>>4-((1&L)<<2)&15),A[x]=ee[O],A[x+1]=ee[O+1],A[x+2]=ee[O+2],A[x+3]=G<be?ae[G]:255;if(P==8)for(L=0;L<E;L++){var G;x=L<<2,O=3*(G=f[L]),A[x]=ee[O],A[x+1]=ee[O+1],A[x+2]=ee[O+2],A[x+3]=G<be?ae[G]:255}}else if(M==4){if(P==8)for(L=0;L<E;L++){x=L<<2;var J=f[z=L<<1];A[x]=J,A[x+1]=J,A[x+2]=J,A[x+3]=f[z+1]}if(P==16)for(L=0;L<E;L++){var z;x=L<<2,J=f[z=L<<2],A[x]=J,A[x+1]=J,A[x+2]=J,A[x+3]=f[z+2]}}else if(M==0)for(_=y.tabs.tRNS?y.tabs.tRNS:-1,S=0;S<m;S++){const ee=S*I,ae=S*p;if(P==1)for(var U=0;U<p;U++){var Q=(J=255*(f[ee+(U>>>3)]>>>7-(7&U)&1))==255*_?0:255;N[ae+U]=Q<<24|J<<16|J<<8|J}else if(P==2)for(U=0;U<p;U++)Q=(J=85*(f[ee+(U>>>2)]>>>6-((3&U)<<1)&3))==85*_?0:255,N[ae+U]=Q<<24|J<<16|J<<8|J;else if(P==4)for(U=0;U<p;U++)Q=(J=17*(f[ee+(U>>>1)]>>>4-((1&U)<<2)&15))==17*_?0:255,N[ae+U]=Q<<24|J<<16|J<<8|J;else if(P==8)for(U=0;U<p;U++)Q=(J=f[ee+U])==_?0:255,N[ae+U]=Q<<24|J<<16|J<<8|J;else if(P==16)for(U=0;U<p;U++)J=f[ee+(U<<1)],Q=q(f,ee+(U<<1))==_?0:255,N[ae+U]=Q<<24|J<<16|J<<8|J}return A}function n(f,p,m,y){const E=s(f),C=Math.ceil(m*E/8),I=new Uint8Array((C+1+f.interlace)*y);return p=f.tabs.CgBI?i(p,I):r(p,I),f.interlace==0?p=a(p,f,0,m,y):f.interlace==1&&(p=function(N,M){const P=M.width,q=M.height,L=s(M),T=L>>3,_=Math.ceil(P*L/8),x=new Uint8Array(q*_);let S=0;const k=[0,0,4,0,2,0,1],j=[0,4,0,2,0,1,0],O=[8,8,8,4,4,2,2],G=[8,8,4,4,2,2,1];let J=0;for(;J<7;){const U=O[J],Q=G[J];let ee=0,ae=0,be=k[J];for(;be<q;)be+=U,ae++;let pe=j[J];for(;pe<P;)pe+=Q,ee++;const ye=Math.ceil(ee*L/8);a(N,M,S,ee,ae);let W=0,X=k[J];for(;X<q;){let ce=j[J],Oe=S+W*ye<<3;for(;ce<P;){var z;if(L==1&&(z=(z=N[Oe>>3])>>7-(7&Oe)&1,x[X*_+(ce>>3)]|=z<<7-((7&ce)<<0)),L==2&&(z=(z=N[Oe>>3])>>6-(7&Oe)&3,x[X*_+(ce>>2)]|=z<<6-((3&ce)<<1)),L==4&&(z=(z=N[Oe>>3])>>4-(7&Oe)&15,x[X*_+(ce>>1)]|=z<<4-((1&ce)<<2)),L>=8){const ke=X*_+ce*T;for(let $e=0;$e<T;$e++)x[ke+$e]=N[(Oe>>3)+$e]}Oe+=L,ce+=Q}W++,X+=U}ee*ae!=0&&(S+=ae*(1+ye)),J+=1}return x}(p,f)),p}function r(f,p){return i(new Uint8Array(f.buffer,2,f.length-6),p)}var i=function(){const f={H:{}};return f.H.N=function(p,m){const y=Uint8Array;let E,C,I=0,A=0,N=0,M=0,P=0,q=0,L=0,T=0,_=0;if(p[0]==3&&p[1]==0)return m||new y(0);const x=f.H,S=x.b,k=x.e,j=x.R,O=x.n,G=x.A,J=x.Z,z=x.m,U=m==null;for(U&&(m=new y(p.length>>>2<<5));I==0;)if(I=S(p,_,1),A=S(p,_+1,2),_+=3,A!=0){if(U&&(m=f.H.W(m,T+(1<<17))),A==1&&(E=z.J,C=z.h,q=511,L=31),A==2){N=k(p,_,5)+257,M=k(p,_+5,5)+1,P=k(p,_+10,4)+4,_+=14;let ee=1;for(var Q=0;Q<38;Q+=2)z.Q[Q]=0,z.Q[Q+1]=0;for(Q=0;Q<P;Q++){const pe=k(p,_+3*Q,3);z.Q[1+(z.X[Q]<<1)]=pe,pe>ee&&(ee=pe)}_+=3*P,O(z.Q,ee),G(z.Q,ee,z.u),E=z.w,C=z.d,_=j(z.u,(1<<ee)-1,N+M,p,_,z.v);const ae=x.V(z.v,0,N,z.C);q=(1<<ae)-1;const be=x.V(z.v,N,M,z.D);L=(1<<be)-1,O(z.C,ae),G(z.C,ae,E),O(z.D,be),G(z.D,be,C)}for(;;){const ee=E[J(p,_)&q];_+=15&ee;const ae=ee>>>4;if(!(ae>>>8))m[T++]=ae;else{if(ae==256)break;{let be=T+ae-254;if(ae>264){const ce=z.q[ae-257];be=T+(ce>>>3)+k(p,_,7&ce),_+=7&ce}const pe=C[J(p,_)&L];_+=15&pe;const ye=pe>>>4,W=z.c[ye],X=(W>>>4)+S(p,_,15&W);for(_+=15&W;T<be;)m[T]=m[T++-X],m[T]=m[T++-X],m[T]=m[T++-X],m[T]=m[T++-X];T=be}}}}else{7&_&&(_+=8-(7&_));const ee=4+(_>>>3),ae=p[ee-4]|p[ee-3]<<8;U&&(m=f.H.W(m,T+ae)),m.set(new y(p.buffer,p.byteOffset+ee,ae),T),_=ee+ae<<3,T+=ae}return m.length==T?m:m.slice(0,T)},f.H.W=function(p,m){const y=p.length;if(m<=y)return p;const E=new Uint8Array(y<<1);return E.set(p,0),E},f.H.R=function(p,m,y,E,C,I){const A=f.H.e,N=f.H.Z;let M=0;for(;M<y;){const P=p[N(E,C)&m];C+=15&P;const q=P>>>4;if(q<=15)I[M]=q,M++;else{let L=0,T=0;q==16?(T=3+A(E,C,2),C+=2,L=I[M-1]):q==17?(T=3+A(E,C,3),C+=3):q==18&&(T=11+A(E,C,7),C+=7);const _=M+T;for(;M<_;)I[M]=L,M++}}return C},f.H.V=function(p,m,y,E){let C=0,I=0;const A=E.length>>>1;for(;I<y;){const N=p[I+m];E[I<<1]=0,E[1+(I<<1)]=N,N>C&&(C=N),I++}for(;I<A;)E[I<<1]=0,E[1+(I<<1)]=0,I++;return C},f.H.n=function(p,m){const y=f.H.m,E=p.length;let C,I,A,N;const M=y.j;for(var P=0;P<=m;P++)M[P]=0;for(P=1;P<E;P+=2)M[p[P]]++;const q=y.K;for(C=0,M[0]=0,I=1;I<=m;I++)C=C+M[I-1]<<1,q[I]=C;for(A=0;A<E;A+=2)N=p[A+1],N!=0&&(p[A]=q[N],q[N]++)},f.H.A=function(p,m,y){const E=p.length,C=f.H.m.r;for(let I=0;I<E;I+=2)if(p[I+1]!=0){const A=I>>1,N=p[I+1],M=A<<4|N,P=m-N;let q=p[I]<<P;const L=q+(1<<P);for(;q!=L;)y[C[q]>>>15-m]=M,q++}},f.H.l=function(p,m){const y=f.H.m.r,E=15-m;for(let C=0;C<p.length;C+=2){const I=p[C]<<m-p[C+1];p[C]=y[I]>>>E}},f.H.M=function(p,m,y){y<<=7&m;const E=m>>>3;p[E]|=y,p[E+1]|=y>>>8},f.H.I=function(p,m,y){y<<=7&m;const E=m>>>3;p[E]|=y,p[E+1]|=y>>>8,p[E+2]|=y>>>16},f.H.e=function(p,m,y){return(p[m>>>3]|p[1+(m>>>3)]<<8)>>>(7&m)&(1<<y)-1},f.H.b=function(p,m,y){return(p[m>>>3]|p[1+(m>>>3)]<<8|p[2+(m>>>3)]<<16)>>>(7&m)&(1<<y)-1},f.H.Z=function(p,m){return(p[m>>>3]|p[1+(m>>>3)]<<8|p[2+(m>>>3)]<<16)>>>(7&m)},f.H.i=function(p,m){return(p[m>>>3]|p[1+(m>>>3)]<<8|p[2+(m>>>3)]<<16|p[3+(m>>>3)]<<24)>>>(7&m)},f.H.m=function(){const p=Uint16Array,m=Uint32Array;return{K:new p(16),j:new p(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new p(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new m(32),J:new p(512),_:[],h:new p(32),$:[],w:new p(32768),C:[],v:[],d:new p(32768),D:[],u:new p(512),Q:[],r:new p(32768),s:new m(286),Y:new m(30),a:new m(19),t:new m(15e3),k:new p(65536),g:new p(32768)}}(),function(){const p=f.H.m;for(var m=0;m<32768;m++){let E=m;E=(2863311530&E)>>>1|(1431655765&E)<<1,E=(3435973836&E)>>>2|(858993459&E)<<2,E=(4042322160&E)>>>4|(252645135&E)<<4,E=(4278255360&E)>>>8|(16711935&E)<<8,p.r[m]=(E>>>16|E<<16)>>>17}function y(E,C,I){for(;C--!=0;)E.push(0,I)}for(m=0;m<32;m++)p.q[m]=p.S[m]<<3|p.T[m],p.c[m]=p.p[m]<<4|p.z[m];y(p._,144,8),y(p._,112,9),y(p._,24,7),y(p._,8,8),f.H.n(p._,9),f.H.A(p._,9,p.J),f.H.l(p._,9),y(p.$,32,5),f.H.n(p.$,5),f.H.A(p.$,5,p.h),f.H.l(p.$,5),y(p.Q,19,0),y(p.C,286,0),y(p.D,30,0),y(p.v,320,0)}(),f.H.N}();function s(f){return[1,null,3,1,2,null,4][f.ctype]*f.depth}function a(f,p,m,y,E){let C=s(p);const I=Math.ceil(y*C/8);let A,N;C=Math.ceil(C/8);let M=f[m],P=0;if(M>1&&(f[m]=[0,0,1][M-2]),M==3)for(P=C;P<I;P++)f[P+1]=f[P+1]+(f[P+1-C]>>>1)&255;for(let q=0;q<E;q++)if(A=m+q*I,N=A+q+1,M=f[N-1],P=0,M==0)for(;P<I;P++)f[A+P]=f[N+P];else if(M==1){for(;P<C;P++)f[A+P]=f[N+P];for(;P<I;P++)f[A+P]=f[N+P]+f[A+P-C]}else if(M==2)for(;P<I;P++)f[A+P]=f[N+P]+f[A+P-I];else if(M==3){for(;P<C;P++)f[A+P]=f[N+P]+(f[A+P-I]>>>1);for(;P<I;P++)f[A+P]=f[N+P]+(f[A+P-I]+f[A+P-C]>>>1)}else{for(;P<C;P++)f[A+P]=f[N+P]+l(0,f[A+P-I],0);for(;P<I;P++)f[A+P]=f[N+P]+l(f[A+P-C],f[A+P-I],f[A+P-C-I])}return f}function l(f,p,m){const y=f+p-m,E=y-f,C=y-p,I=y-m;return E*E<=C*C&&E*E<=I*I?f:C*C<=I*I?p:m}function c(f,p,m){m.width=t.readUint(f,p),p+=4,m.height=t.readUint(f,p),p+=4,m.depth=f[p],p++,m.ctype=f[p],p++,m.compress=f[p],p++,m.filter=f[p],p++,m.interlace=f[p],p++}function d(f,p,m,y,E,C,I,A,N){const M=Math.min(p,E),P=Math.min(m,C);let q=0,L=0;for(let J=0;J<P;J++)for(let z=0;z<M;z++)if(I>=0&&A>=0?(q=J*p+z<<2,L=(A+J)*E+I+z<<2):(q=(-A+J)*p-I+z<<2,L=J*E+z<<2),N==0)y[L]=f[q],y[L+1]=f[q+1],y[L+2]=f[q+2],y[L+3]=f[q+3];else if(N==1){var T=f[q+3]*.00392156862745098,_=f[q]*T,x=f[q+1]*T,S=f[q+2]*T,k=y[L+3]*(1/255),j=y[L]*k,O=y[L+1]*k,G=y[L+2]*k;const U=1-T,Q=T+k*U,ee=Q==0?0:1/Q;y[L+3]=255*Q,y[L+0]=(_+j*U)*ee,y[L+1]=(x+O*U)*ee,y[L+2]=(S+G*U)*ee}else if(N==2)T=f[q+3],_=f[q],x=f[q+1],S=f[q+2],k=y[L+3],j=y[L],O=y[L+1],G=y[L+2],T==k&&_==j&&x==O&&S==G?(y[L]=0,y[L+1]=0,y[L+2]=0,y[L+3]=0):(y[L]=_,y[L+1]=x,y[L+2]=S,y[L+3]=T);else if(N==3){if(T=f[q+3],_=f[q],x=f[q+1],S=f[q+2],k=y[L+3],j=y[L],O=y[L+1],G=y[L+2],T==k&&_==j&&x==O&&S==G)continue;if(T<220&&k>20)return!1}return!0}return{decode:function(p){const m=new Uint8Array(p);let y=8;const E=t,C=E.readUshort,I=E.readUint,A={tabs:{},frames:[]},N=new Uint8Array(m.length);let M,P=0,q=0;const L=[137,80,78,71,13,10,26,10];for(var T=0;T<8;T++)if(m[T]!=L[T])throw"The input is not a PNG file!";for(;y<m.length;){const J=E.readUint(m,y);y+=4;const z=E.readASCII(m,y,4);if(y+=4,z=="IHDR")c(m,y,A);else if(z=="iCCP"){for(var _=y;m[_]!=0;)_++;E.readASCII(m,y,_-y),m[_+1];const U=m.slice(_+2,y+J);let Q=null;try{Q=r(U)}catch{Q=i(U)}A.tabs[z]=Q}else if(z=="CgBI")A.tabs[z]=m.slice(y,y+4);else if(z=="IDAT"){for(T=0;T<J;T++)N[P+T]=m[y+T];P+=J}else if(z=="acTL")A.tabs[z]={num_frames:I(m,y),num_plays:I(m,y+4)},M=new Uint8Array(m.length);else if(z=="fcTL"){q!=0&&((G=A.frames[A.frames.length-1]).data=n(A,M.slice(0,q),G.rect.width,G.rect.height),q=0);const U={x:I(m,y+12),y:I(m,y+16),width:I(m,y+4),height:I(m,y+8)};let Q=C(m,y+22);Q=C(m,y+20)/(Q==0?100:Q);const ee={rect:U,delay:Math.round(1e3*Q),dispose:m[y+24],blend:m[y+25]};A.frames.push(ee)}else if(z=="fdAT"){for(T=0;T<J-4;T++)M[q+T]=m[y+T+4];q+=J-4}else if(z=="pHYs")A.tabs[z]=[E.readUint(m,y),E.readUint(m,y+4),m[y+8]];else if(z=="cHRM")for(A.tabs[z]=[],T=0;T<8;T++)A.tabs[z].push(E.readUint(m,y+4*T));else if(z=="tEXt"||z=="zTXt"){A.tabs[z]==null&&(A.tabs[z]={});var x=E.nextZero(m,y),S=E.readASCII(m,y,x-y),k=y+J-x-1;if(z=="tEXt")O=E.readASCII(m,x+1,k);else{var j=r(m.slice(x+2,x+2+k));O=E.readUTF8(j,0,j.length)}A.tabs[z][S]=O}else if(z=="iTXt"){A.tabs[z]==null&&(A.tabs[z]={}),x=0,_=y,x=E.nextZero(m,_),S=E.readASCII(m,_,x-_);const U=m[_=x+1];var O;m[_+1],_+=2,x=E.nextZero(m,_),E.readASCII(m,_,x-_),_=x+1,x=E.nextZero(m,_),E.readUTF8(m,_,x-_),k=J-((_=x+1)-y),U==0?O=E.readUTF8(m,_,k):(j=r(m.slice(_,_+k)),O=E.readUTF8(j,0,j.length)),A.tabs[z][S]=O}else if(z=="PLTE")A.tabs[z]=E.readBytes(m,y,J);else if(z=="hIST"){const U=A.tabs.PLTE.length/3;for(A.tabs[z]=[],T=0;T<U;T++)A.tabs[z].push(C(m,y+2*T))}else if(z=="tRNS")A.ctype==3?A.tabs[z]=E.readBytes(m,y,J):A.ctype==0?A.tabs[z]=C(m,y):A.ctype==2&&(A.tabs[z]=[C(m,y),C(m,y+2),C(m,y+4)]);else if(z=="gAMA")A.tabs[z]=E.readUint(m,y)/1e5;else if(z=="sRGB")A.tabs[z]=m[y];else if(z=="bKGD")A.ctype==0||A.ctype==4?A.tabs[z]=[C(m,y)]:A.ctype==2||A.ctype==6?A.tabs[z]=[C(m,y),C(m,y+2),C(m,y+4)]:A.ctype==3&&(A.tabs[z]=m[y]);else if(z=="IEND")break;y+=J,E.readUint(m,y),y+=4}var G;return q!=0&&((G=A.frames[A.frames.length-1]).data=n(A,M.slice(0,q),G.rect.width,G.rect.height)),A.data=n(A,N,A.width,A.height),delete A.compress,delete A.interlace,delete A.filter,A},toRGBA8:function(p){const m=p.width,y=p.height;if(p.tabs.acTL==null)return[e(p.data,m,y,p).buffer];const E=[];p.frames[0].data==null&&(p.frames[0].data=p.data);const C=m*y*4,I=new Uint8Array(C),A=new Uint8Array(C),N=new Uint8Array(C);for(let P=0;P<p.frames.length;P++){const q=p.frames[P],L=q.rect.x,T=q.rect.y,_=q.rect.width,x=q.rect.height,S=e(q.data,_,x,p);if(P!=0)for(var M=0;M<C;M++)N[M]=I[M];if(q.blend==0?d(S,_,x,I,m,y,L,T,0):q.blend==1&&d(S,_,x,I,m,y,L,T,1),E.push(I.buffer.slice(0)),q.dispose!=0){if(q.dispose==1)d(A,_,x,I,m,y,L,T,0);else if(q.dispose==2)for(M=0;M<C;M++)I[M]=N[M]}}return E},_paeth:l,_copyTile:d,_bin:t}}();(function(){const{_copyTile:t}=vs,{_bin:e}=vs,n=vs._paeth;var r={table:function(){const _=new Uint32Array(256);for(let x=0;x<256;x++){let S=x;for(let k=0;k<8;k++)1&S?S=3988292384^S>>>1:S>>>=1;_[x]=S}return _}(),update(_,x,S,k){for(let j=0;j<k;j++)_=r.table[255&(_^x[S+j])]^_>>>8;return _},crc:(_,x,S)=>4294967295^r.update(4294967295,_,x,S)};function i(_,x,S,k){x[S]+=_[0]*k>>4,x[S+1]+=_[1]*k>>4,x[S+2]+=_[2]*k>>4,x[S+3]+=_[3]*k>>4}function s(_){return Math.max(0,Math.min(255,_))}function a(_,x){const S=_[0]-x[0],k=_[1]-x[1],j=_[2]-x[2],O=_[3]-x[3];return S*S+k*k+j*j+O*O}function l(_,x,S,k,j,O,G){G==null&&(G=1);const J=k.length,z=[];for(var U=0;U<J;U++){const X=k[U];z.push([X>>>0&255,X>>>8&255,X>>>16&255,X>>>24&255])}for(U=0;U<J;U++){let X=4294967295;for(var Q=0,ee=0;ee<J;ee++){var ae=a(z[U],z[ee]);ee!=U&&ae<X&&(X=ae,Q=ee)}}const be=new Uint32Array(j.buffer),pe=new Int16Array(x*S*4),ye=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(U=0;U<ye.length;U++)ye[U]=255*((ye[U]+.5)/16-.5);for(let X=0;X<S;X++)for(let ce=0;ce<x;ce++){var W;U=4*(X*x+ce),G!=2?W=[s(_[U]+pe[U]),s(_[U+1]+pe[U+1]),s(_[U+2]+pe[U+2]),s(_[U+3]+pe[U+3])]:(ae=ye[4*(3&X)+(3&ce)],W=[s(_[U]+ae),s(_[U+1]+ae),s(_[U+2]+ae),s(_[U+3]+ae)]),Q=0;let Oe=16777215;for(ee=0;ee<J;ee++){const je=a(W,z[ee]);je<Oe&&(Oe=je,Q=ee)}const ke=z[Q],$e=[W[0]-ke[0],W[1]-ke[1],W[2]-ke[2],W[3]-ke[3]];G==1&&(ce!=x-1&&i($e,pe,U+4,7),X!=S-1&&(ce!=0&&i($e,pe,U+4*x-4,3),i($e,pe,U+4*x,5),ce!=x-1&&i($e,pe,U+4*x+4,1))),O[U>>2]=Q,be[U>>2]=k[Q]}}function c(_,x,S,k,j){j==null&&(j={});const{crc:O}=r,G=e.writeUint,J=e.writeUshort,z=e.writeASCII;let U=8;const Q=_.frames.length>1;let ee,ae=!1,be=33+(Q?20:0);if(j.sRGB!=null&&(be+=13),j.pHYs!=null&&(be+=21),j.iCCP!=null&&(ee=pako.deflate(j.iCCP),be+=21+ee.length+4),_.ctype==3){for(var pe=_.plte.length,ye=0;ye<pe;ye++)_.plte[ye]>>>24!=255&&(ae=!0);be+=8+3*pe+4+(ae?8+1*pe+4:0)}for(var W=0;W<_.frames.length;W++)Q&&(be+=38),be+=(ke=_.frames[W]).cimg.length+12,W!=0&&(be+=4);be+=12;const X=new Uint8Array(be),ce=[137,80,78,71,13,10,26,10];for(ye=0;ye<8;ye++)X[ye]=ce[ye];if(G(X,U,13),U+=4,z(X,U,"IHDR"),U+=4,G(X,U,x),U+=4,G(X,U,S),U+=4,X[U]=_.depth,U++,X[U]=_.ctype,U++,X[U]=0,U++,X[U]=0,U++,X[U]=0,U++,G(X,U,O(X,U-17,17)),U+=4,j.sRGB!=null&&(G(X,U,1),U+=4,z(X,U,"sRGB"),U+=4,X[U]=j.sRGB,U++,G(X,U,O(X,U-5,5)),U+=4),j.iCCP!=null){const $e=13+ee.length;G(X,U,$e),U+=4,z(X,U,"iCCP"),U+=4,z(X,U,"ICC profile"),U+=11,U+=2,X.set(ee,U),U+=ee.length,G(X,U,O(X,U-($e+4),$e+4)),U+=4}if(j.pHYs!=null&&(G(X,U,9),U+=4,z(X,U,"pHYs"),U+=4,G(X,U,j.pHYs[0]),U+=4,G(X,U,j.pHYs[1]),U+=4,X[U]=j.pHYs[2],U++,G(X,U,O(X,U-13,13)),U+=4),Q&&(G(X,U,8),U+=4,z(X,U,"acTL"),U+=4,G(X,U,_.frames.length),U+=4,G(X,U,j.loop!=null?j.loop:0),U+=4,G(X,U,O(X,U-12,12)),U+=4),_.ctype==3){for(G(X,U,3*(pe=_.plte.length)),U+=4,z(X,U,"PLTE"),U+=4,ye=0;ye<pe;ye++){const $e=3*ye,je=_.plte[ye],gt=255&je,Ye=je>>>8&255,In=je>>>16&255;X[U+$e+0]=gt,X[U+$e+1]=Ye,X[U+$e+2]=In}if(U+=3*pe,G(X,U,O(X,U-3*pe-4,3*pe+4)),U+=4,ae){for(G(X,U,pe),U+=4,z(X,U,"tRNS"),U+=4,ye=0;ye<pe;ye++)X[U+ye]=_.plte[ye]>>>24&255;U+=pe,G(X,U,O(X,U-pe-4,pe+4)),U+=4}}let Oe=0;for(W=0;W<_.frames.length;W++){var ke=_.frames[W];Q&&(G(X,U,26),U+=4,z(X,U,"fcTL"),U+=4,G(X,U,Oe++),U+=4,G(X,U,ke.rect.width),U+=4,G(X,U,ke.rect.height),U+=4,G(X,U,ke.rect.x),U+=4,G(X,U,ke.rect.y),U+=4,J(X,U,k[W]),U+=2,J(X,U,1e3),U+=2,X[U]=ke.dispose,U++,X[U]=ke.blend,U++,G(X,U,O(X,U-30,30)),U+=4);const $e=ke.cimg;G(X,U,(pe=$e.length)+(W==0?0:4)),U+=4;const je=U;z(X,U,W==0?"IDAT":"fdAT"),U+=4,W!=0&&(G(X,U,Oe++),U+=4),X.set($e,U),U+=pe,G(X,U,O(X,je,U-je)),U+=4}return G(X,U,0),U+=4,z(X,U,"IEND"),U+=4,G(X,U,O(X,U-4,4)),U+=4,X.buffer}function d(_,x,S){for(let k=0;k<_.frames.length;k++){const j=_.frames[k];j.rect.width;const O=j.rect.height,G=new Uint8Array(O*j.bpl+O);j.cimg=y(j.img,O,j.bpp,j.bpl,G,x,S)}}function f(_,x,S,k,j){const O=j[0],G=j[1],J=j[2],z=j[3],U=j[4],Q=j[5];let ee=6,ae=8,be=255;for(var pe=0;pe<_.length;pe++){const Ut=new Uint8Array(_[pe]);for(var ye=Ut.length,W=0;W<ye;W+=4)be&=Ut[W+3]}const X=be!=255,ce=function(it,Et,rn,Xt,st,yn){const At=[];for(var et=0;et<it.length;et++){const sn=new Uint8Array(it[et]),xn=new Uint32Array(sn.buffer);var Ht;let cn=0,an=0,Pn=Et,ir=rn,Ii=Xt?1:0;if(et!=0){const ta=yn||Xt||et==1||At[et-2].dispose!=0?1:2;let Di=0,Oi=1e9;for(let li=0;li<ta;li++){var Ot=new Uint8Array(it[et-1-li]);const qr=new Uint32Array(it[et-1-li]);let Wn=Et,Er=rn,Xn=-1,Mi=-1;for(let sr=0;sr<rn;sr++)for(let Un=0;Un<Et;Un++)xn[at=sr*Et+Un]!=qr[at]&&(Un<Wn&&(Wn=Un),Un>Xn&&(Xn=Un),sr<Er&&(Er=sr),sr>Mi&&(Mi=sr));Xn==-1&&(Wn=Er=Xn=Mi=0),st&&((1&Wn)==1&&Wn--,(1&Er)==1&&Er--);const ki=(Xn-Wn+1)*(Mi-Er+1);ki<Oi&&(Oi=ki,Di=li,cn=Wn,an=Er,Pn=Xn-Wn+1,ir=Mi-Er+1)}Ot=new Uint8Array(it[et-1-Di]),Di==1&&(At[et-1].dispose=2),Ht=new Uint8Array(Pn*ir*4),t(Ot,Et,rn,Ht,Pn,ir,-cn,-an,0),Ii=t(sn,Et,rn,Ht,Pn,ir,-cn,-an,3)?1:0,Ii==1?m(sn,Et,rn,Ht,{x:cn,y:an,width:Pn,height:ir}):t(sn,Et,rn,Ht,Pn,ir,-cn,-an,0)}else Ht=sn.slice(0);At.push({rect:{x:cn,y:an,width:Pn,height:ir},img:Ht,blend:Ii,dispose:0})}if(Xt)for(et=0;et<At.length;et++){if((un=At[et]).blend==1)continue;const sn=un.rect,xn=At[et-1].rect,cn=Math.min(sn.x,xn.x),an=Math.min(sn.y,xn.y),Pn={x:cn,y:an,width:Math.max(sn.x+sn.width,xn.x+xn.width)-cn,height:Math.max(sn.y+sn.height,xn.y+xn.height)-an};At[et-1].dispose=1,et-1!=0&&p(it,Et,rn,At,et-1,Pn,st),p(it,Et,rn,At,et,Pn,st)}let Mt=0;if(it.length!=1)for(var at=0;at<At.length;at++){var un;Mt+=(un=At[at]).rect.width*un.rect.height}return At}(_,x,S,O,G,J),Oe={},ke=[],$e=[];if(k!=0){const Ut=[];for(W=0;W<ce.length;W++)Ut.push(ce[W].img.buffer);const it=function(st){let yn=0;for(var At=0;At<st.length;At++)yn+=st[At].byteLength;const et=new Uint8Array(yn);let Ht=0;for(At=0;At<st.length;At++){const Ot=new Uint8Array(st[At]),Mt=Ot.length;for(let at=0;at<Mt;at+=4){let un=Ot[at],sn=Ot[at+1],xn=Ot[at+2];const cn=Ot[at+3];cn==0&&(un=sn=xn=0),et[Ht+at]=un,et[Ht+at+1]=sn,et[Ht+at+2]=xn,et[Ht+at+3]=cn}Ht+=Mt}return et.buffer}(Ut),Et=C(it,k);for(W=0;W<Et.plte.length;W++)ke.push(Et.plte[W].est.rgba);let rn=0;for(W=0;W<ce.length;W++){const Xt=(gt=ce[W]).img.length;var je=new Uint8Array(Et.inds.buffer,rn>>2,Xt>>2);$e.push(je);const st=new Uint8Array(Et.abuf,rn,Xt);Q&&l(gt.img,gt.rect.width,gt.rect.height,ke,st,je),gt.img.set(st),rn+=Xt}}else for(pe=0;pe<ce.length;pe++){var gt=ce[pe];const Ut=new Uint32Array(gt.img.buffer);var Ye=gt.rect.width;for(ye=Ut.length,je=new Uint8Array(ye),$e.push(je),W=0;W<ye;W++){const it=Ut[W];if(W!=0&&it==Ut[W-1])je[W]=je[W-1];else if(W>Ye&&it==Ut[W-Ye])je[W]=je[W-Ye];else{let Et=Oe[it];if(Et==null&&(Oe[it]=Et=ke.length,ke.push(it),ke.length>=300))break;je[W]=Et}}}const In=ke.length;for(In<=256&&U==0&&(ae=In<=2?1:In<=4?2:In<=16?4:8,ae=Math.max(ae,z)),pe=0;pe<ce.length;pe++){(gt=ce[pe]).rect.x,gt.rect.y,Ye=gt.rect.width;const Ut=gt.rect.height;let it=gt.img;new Uint32Array(it.buffer);let Et=4*Ye,rn=4;if(In<=256&&U==0){Et=Math.ceil(ae*Ye/8);var Pt=new Uint8Array(Et*Ut);const Xt=$e[pe];for(let st=0;st<Ut;st++){W=st*Et;const yn=st*Ye;if(ae==8)for(var bt=0;bt<Ye;bt++)Pt[W+bt]=Xt[yn+bt];else if(ae==4)for(bt=0;bt<Ye;bt++)Pt[W+(bt>>1)]|=Xt[yn+bt]<<4-4*(1&bt);else if(ae==2)for(bt=0;bt<Ye;bt++)Pt[W+(bt>>2)]|=Xt[yn+bt]<<6-2*(3&bt);else if(ae==1)for(bt=0;bt<Ye;bt++)Pt[W+(bt>>3)]|=Xt[yn+bt]<<7-1*(7&bt)}it=Pt,ee=3,rn=1}else if(X==0&&ce.length==1){Pt=new Uint8Array(Ye*Ut*3);const Xt=Ye*Ut;for(W=0;W<Xt;W++){const st=3*W,yn=4*W;Pt[st]=it[yn],Pt[st+1]=it[yn+1],Pt[st+2]=it[yn+2]}it=Pt,ee=2,rn=3,Et=3*Ye}gt.img=it,gt.bpl=Et,gt.bpp=rn}return{ctype:ee,depth:ae,plte:ke,frames:ce}}function p(_,x,S,k,j,O,G){const J=Uint8Array,z=Uint32Array,U=new J(_[j-1]),Q=new z(_[j-1]),ee=j+1<_.length?new J(_[j+1]):null,ae=new J(_[j]),be=new z(ae.buffer);let pe=x,ye=S,W=-1,X=-1;for(let Oe=0;Oe<O.height;Oe++)for(let ke=0;ke<O.width;ke++){const $e=O.x+ke,je=O.y+Oe,gt=je*x+$e,Ye=be[gt];Ye==0||k[j-1].dispose==0&&Q[gt]==Ye&&(ee==null||ee[4*gt+3]!=0)||($e<pe&&(pe=$e),$e>W&&(W=$e),je<ye&&(ye=je),je>X&&(X=je))}W==-1&&(pe=ye=W=X=0),G&&((1&pe)==1&&pe--,(1&ye)==1&&ye--),O={x:pe,y:ye,width:W-pe+1,height:X-ye+1};const ce=k[j];ce.rect=O,ce.blend=1,ce.img=new Uint8Array(O.width*O.height*4),k[j-1].dispose==0?(t(U,x,S,ce.img,O.width,O.height,-O.x,-O.y,0),m(ae,x,S,ce.img,O)):t(ae,x,S,ce.img,O.width,O.height,-O.x,-O.y,0)}function m(_,x,S,k,j){t(_,x,S,k,j.width,j.height,-j.x,-j.y,2)}function y(_,x,S,k,j,O,G){const J=[];let z,U=[0,1,2,3,4];O!=-1?U=[O]:(x*k>5e5||S==1)&&(U=[0]),G&&(z={level:0});const Q=XG;for(var ee=0;ee<U.length;ee++){for(let pe=0;pe<x;pe++)E(j,_,pe,k,S,U[ee]);J.push(Q.deflate(j,z))}let ae,be=1e9;for(ee=0;ee<J.length;ee++)J[ee].length<be&&(ae=ee,be=J[ee].length);return J[ae]}function E(_,x,S,k,j,O){const G=S*k;let J=G+S;if(_[J]=O,J++,O==0)if(k<500)for(var z=0;z<k;z++)_[J+z]=x[G+z];else _.set(new Uint8Array(x.buffer,G,k),J);else if(O==1){for(z=0;z<j;z++)_[J+z]=x[G+z];for(z=j;z<k;z++)_[J+z]=x[G+z]-x[G+z-j]+256&255}else if(S==0){for(z=0;z<j;z++)_[J+z]=x[G+z];if(O==2)for(z=j;z<k;z++)_[J+z]=x[G+z];if(O==3)for(z=j;z<k;z++)_[J+z]=x[G+z]-(x[G+z-j]>>1)+256&255;if(O==4)for(z=j;z<k;z++)_[J+z]=x[G+z]-n(x[G+z-j],0,0)+256&255}else{if(O==2)for(z=0;z<k;z++)_[J+z]=x[G+z]+256-x[G+z-k]&255;if(O==3){for(z=0;z<j;z++)_[J+z]=x[G+z]+256-(x[G+z-k]>>1)&255;for(z=j;z<k;z++)_[J+z]=x[G+z]+256-(x[G+z-k]+x[G+z-j]>>1)&255}if(O==4){for(z=0;z<j;z++)_[J+z]=x[G+z]+256-n(0,x[G+z-k],0)&255;for(z=j;z<k;z++)_[J+z]=x[G+z]+256-n(x[G+z-j],x[G+z-k],x[G+z-j-k])&255}}}function C(_,x){const S=new Uint8Array(_),k=S.slice(0),j=new Uint32Array(k.buffer),O=I(k,x),G=O[0],J=O[1],z=S.length,U=new Uint8Array(z>>2);let Q;if(S.length<2e7)for(var ee=0;ee<z;ee+=4)Q=A(G,ae=S[ee]*(1/255),be=S[ee+1]*(1/255),pe=S[ee+2]*(1/255),ye=S[ee+3]*(1/255)),U[ee>>2]=Q.ind,j[ee>>2]=Q.est.rgba;else for(ee=0;ee<z;ee+=4){var ae=S[ee]*.00392156862745098,be=S[ee+1]*(1/255),pe=S[ee+2]*(1/255),ye=S[ee+3]*(1/255);for(Q=G;Q.left;)Q=N(Q.est,ae,be,pe,ye)<=0?Q.left:Q.right;U[ee>>2]=Q.ind,j[ee>>2]=Q.est.rgba}return{abuf:k.buffer,inds:U,plte:J}}function I(_,x,S){S==null&&(S=1e-4);const k=new Uint32Array(_.buffer),j={i0:0,i1:_.length,bst:null,est:null,tdst:0,left:null,right:null};j.bst=q(_,j.i0,j.i1),j.est=L(j.bst);const O=[j];for(;O.length<x;){let J=0,z=0;for(var G=0;G<O.length;G++)O[G].est.L>J&&(J=O[G].est.L,z=G);if(J<S)break;const U=O[z],Q=M(_,k,U.i0,U.i1,U.est.e,U.est.eMq255);if(U.i0>=Q||U.i1<=Q){U.est.L=0;continue}const ee={i0:U.i0,i1:Q,bst:null,est:null,tdst:0,left:null,right:null};ee.bst=q(_,ee.i0,ee.i1),ee.est=L(ee.bst);const ae={i0:Q,i1:U.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ae.bst={R:[],m:[],N:U.bst.N-ee.bst.N},G=0;G<16;G++)ae.bst.R[G]=U.bst.R[G]-ee.bst.R[G];for(G=0;G<4;G++)ae.bst.m[G]=U.bst.m[G]-ee.bst.m[G];ae.est=L(ae.bst),U.left=ee,U.right=ae,O[z]=ee,O.push(ae)}for(O.sort((J,z)=>z.bst.N-J.bst.N),G=0;G<O.length;G++)O[G].ind=G;return[j,O]}function A(_,x,S,k,j){if(_.left==null)return _.tdst=function(ee,ae,be,pe,ye){const W=ae-ee[0],X=be-ee[1],ce=pe-ee[2],Oe=ye-ee[3];return W*W+X*X+ce*ce+Oe*Oe}(_.est.q,x,S,k,j),_;const O=N(_.est,x,S,k,j);let G=_.left,J=_.right;O>0&&(G=_.right,J=_.left);const z=A(G,x,S,k,j);if(z.tdst<=O*O)return z;const U=A(J,x,S,k,j);return U.tdst<z.tdst?U:z}function N(_,x,S,k,j){const{e:O}=_;return O[0]*x+O[1]*S+O[2]*k+O[3]*j-_.eMq}function M(_,x,S,k,j,O){for(k-=4;S<k;){for(;P(_,S,j)<=O;)S+=4;for(;P(_,k,j)>O;)k-=4;if(S>=k)break;const G=x[S>>2];x[S>>2]=x[k>>2],x[k>>2]=G,S+=4,k-=4}for(;P(_,S,j)>O;)S-=4;return S+4}function P(_,x,S){return _[x]*S[0]+_[x+1]*S[1]+_[x+2]*S[2]+_[x+3]*S[3]}function q(_,x,S){const k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=[0,0,0,0],O=S-x>>2;for(let G=x;G<S;G+=4){const J=_[G]*.00392156862745098,z=_[G+1]*(1/255),U=_[G+2]*(1/255),Q=_[G+3]*(1/255);j[0]+=J,j[1]+=z,j[2]+=U,j[3]+=Q,k[0]+=J*J,k[1]+=J*z,k[2]+=J*U,k[3]+=J*Q,k[5]+=z*z,k[6]+=z*U,k[7]+=z*Q,k[10]+=U*U,k[11]+=U*Q,k[15]+=Q*Q}return k[4]=k[1],k[8]=k[2],k[9]=k[6],k[12]=k[3],k[13]=k[7],k[14]=k[11],{R:k,m:j,N:O}}function L(_){const{R:x}=_,{m:S}=_,{N:k}=_,j=S[0],O=S[1],G=S[2],J=S[3],z=k==0?0:1/k,U=[x[0]-j*j*z,x[1]-j*O*z,x[2]-j*G*z,x[3]-j*J*z,x[4]-O*j*z,x[5]-O*O*z,x[6]-O*G*z,x[7]-O*J*z,x[8]-G*j*z,x[9]-G*O*z,x[10]-G*G*z,x[11]-G*J*z,x[12]-J*j*z,x[13]-J*O*z,x[14]-J*G*z,x[15]-J*J*z],Q=U,ee=T;let ae=[Math.random(),Math.random(),Math.random(),Math.random()],be=0,pe=0;if(k!=0)for(let W=0;W<16&&(ae=ee.multVec(Q,ae),pe=Math.sqrt(ee.dot(ae,ae)),ae=ee.sml(1/pe,ae),!(W!=0&&Math.abs(pe-be)<1e-9));W++)be=pe;const ye=[j*z,O*z,G*z,J*z];return{Cov:U,q:ye,e:ae,L:be,eMq255:ee.dot(ee.sml(255,ye),ae),eMq:ee.dot(ae,ye),rgba:(Math.round(255*ye[3])<<24|Math.round(255*ye[2])<<16|Math.round(255*ye[1])<<8|Math.round(255*ye[0])<<0)>>>0}}var T={multVec:(_,x)=>[_[0]*x[0]+_[1]*x[1]+_[2]*x[2]+_[3]*x[3],_[4]*x[0]+_[5]*x[1]+_[6]*x[2]+_[7]*x[3],_[8]*x[0]+_[9]*x[1]+_[10]*x[2]+_[11]*x[3],_[12]*x[0]+_[13]*x[1]+_[14]*x[2]+_[15]*x[3]],dot:(_,x)=>_[0]*x[0]+_[1]*x[1]+_[2]*x[2]+_[3]*x[3],sml:(_,x)=>[_*x[0],_*x[1],_*x[2],_*x[3]]};vs.encode=function(x,S,k,j,O,G,J){j==null&&(j=0),J==null&&(J=!1);const z=f(x,S,k,j,[!1,!1,!1,0,J,!1]);return d(z,-1),c(z,S,k,O,G)},vs.encodeLL=function(x,S,k,j,O,G,J,z){const U={ctype:0+(j==1?0:2)+(O==0?0:4),depth:G,frames:[]},Q=(j+O)*G,ee=Q*S;for(let ae=0;ae<x.length;ae++)U.frames.push({rect:{x:0,y:0,width:S,height:k},img:new Uint8Array(x[ae]),blend:0,dispose:1,bpp:Math.ceil(Q/8),bpl:Math.ceil(ee/8)});return d(U,0,!0),c(U,S,k,J,z)},vs.encode.compress=f,vs.encode.dither=l,vs.quantize=C,vs.quantize.getKDtree=I,vs.quantize.getNearest=A})();const Q3={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,s=t.getContext("2d").getImageData(0,0,n,r),a=new Uint32Array(s.data.buffer),l=(32*n+31)/32<<2,c=l*r,d=122+c,f=new ArrayBuffer(d),p=new DataView(f),m=1<<20;let y,E,C,I,A=m,N=0,M=0,P=0;function q(_){p.setUint16(M,_,!0),M+=2}function L(_){p.setUint32(M,_,!0),M+=4}function T(_){M+=_}q(19778),L(d),T(4),L(122),L(108),L(n),L(-r>>>0),q(1),q(32),L(3),L(c),L(2835),L(2835),T(8),L(16711680),L(65280),L(255),L(4278190080),L(1466527264),function _(){for(;N<r&&A>0;){for(I=122+N*l,y=0;y<i;)A--,E=a[P++],C=E>>>24,p.setUint32(I+y,E<<8|C),y+=4;N++}P<a.length?(A=m,setTimeout(_,Q3._dly)):e(f)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var ri={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},KG={[ri.CHROME]:16384,[ri.FIREFOX]:11180,[ri.DESKTOP_SAFARI]:16384,[ri.IE]:8192,[ri.IOS]:4096,[ri.ETC]:8192};const Xw=typeof window<"u",Z3=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Mg=Xw&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),QG=(Xw||Z3)&&(Mg&&Mg.getOriginalSymbol(window,"File")||typeof File<"u"&&File),J3=(Xw||Z3)&&(Mg&&Mg.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Kw(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),s=i[0].match(/:(.*?);/)[1],a=globalThis.atob(i[1]);let l=a.length;const c=new Uint8Array(l);for(;l--;)c[l]=a.charCodeAt(l);const d=new Blob([c],{type:s});d.name=e,d.lastModified=n,r(d)})}function eD(t){return new Promise((e,n)=>{const r=new J3;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function tD(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function jl(){if(jl.cachedResult!==void 0)return jl.cachedResult;let t=ri.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=ri.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=ri.IOS:/Safari/i.test(e)?t=ri.DESKTOP_SAFARI:/Firefox/i.test(e)?t=ri.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=ri.IE),jl.cachedResult=t,jl.cachedResult}function nD(t,e){const n=jl(),r=KG[n];let i=t,s=e,a=i*s;const l=i>s?s/i:i/s;for(;a>r*r;){const c=(r+i)/2,d=(r+s)/2;c<d?(s=d,i=d*l):(s=c*l,i=c),a=i*s}return{width:i,height:s}}function Mv(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function rD(t,e){const{width:n,height:r}=nD(t.width,t.height),[i,s]=Mv(n,r);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(t,0,0,i.width,i.height),i}function Dp(){return Dp.cachedResult!==void 0||(Dp.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Dp.cachedResult}function kg(t,e={}){return new Promise(function(n,r){let i,s;var a=function(){try{return s=rD(i,e.fileType||t.type),n([i,s])}catch(c){return r(c)}},l=function(c){try{var d=function(f){try{throw f}catch(p){return r(p)}};try{let f;return eD(t).then(function(p){try{return f=p,tD(f).then(function(m){try{return i=m,function(){try{return a()}catch(y){return r(y)}}()}catch(y){return d(y)}},d)}catch(m){return d(m)}},d)}catch(f){d(f)}}catch(f){return r(f)}};try{if(Dp()||[ri.DESKTOP_SAFARI,ri.MOBILE_SAFARI].includes(jl()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(c){try{return i=c,a()}catch{return l()}},l)}catch{l()}})}function Lg(t,e,n,r,i=1){return new Promise(function(s,a){let l;if(e==="image/png"){let d,f,p;return d=t.getContext("2d"),{data:f}=d.getImageData(0,0,t.width,t.height),p=vs.encode([f.buffer],t.width,t.height,4096*i),l=new Blob([p],{type:e}),l.name=n,l.lastModified=r,c.call(this)}{let d=function(){return c.call(this)};if(e==="image/bmp")return new Promise(f=>Q3.toBlob(t,f)).then((function(f){try{return l=f,l.name=n,l.lastModified=r,d.call(this)}catch(p){return a(p)}}).bind(this),a);{let f=function(){return d.call(this)};if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(p){try{return l=p,l.name=n,l.lastModified=r,f.call(this)}catch(m){return a(m)}}).bind(this),a);{let p;return p=t.toDataURL(e,i),Kw(p,n,r).then((function(m){try{return l=m,f.call(this)}catch(y){return a(y)}}).bind(this),a)}}}function c(){return s(l)}})}function Ls(t){t.width=0,t.height=0}function lc(){return new Promise(function(t,e){let n,r,i,s;return lc.cachedResult!==void 0?t(lc.cachedResult):Kw("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(a){try{return n=a,kg(n).then(function(l){try{return r=l[1],Lg(r,n.type,n.name,n.lastModified).then(function(c){try{return i=c,Ls(r),kg(i).then(function(d){try{return s=d[0],lc.cachedResult=s.width===1&&s.height===2,t(lc.cachedResult)}catch(f){return e(f)}},e)}catch(d){return e(d)}},e)}catch(c){return e(c)}},e)}catch(l){return e(l)}},e)})}function iD(t){return new Promise((e,n)=>{const r=new J3;r.onload=i=>{const s=new DataView(i.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const a=s.byteLength;let l=2;for(;l<a;){if(s.getUint16(l+2,!1)<=8)return e(-1);const c=s.getUint16(l,!1);if(l+=2,c==65505){if(s.getUint32(l+=2,!1)!=1165519206)return e(-1);const d=s.getUint16(l+=6,!1)==18761;l+=s.getUint32(l+4,d);const f=s.getUint16(l,d);l+=2;for(let p=0;p<f;p++)if(s.getUint16(l+12*p,d)==274)return e(s.getUint16(l+12*p+8,d))}else{if((65280&c)!=65280)break;l+=s.getUint16(l,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function sD(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let s,a=t;return isFinite(i)&&(n>i||r>i)&&([a,s]=Mv(n,r),n>r?(a.width=i,a.height=r/n*i):(a.width=n/r*i,a.height=i),s.drawImage(t,0,0,a.width,a.height),Ls(t)),a}function aD(t,e){const{width:n}=t,{height:r}=t,[i,s]=Mv(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,r),Ls(t),i}function xS(t,e,n=0){return new Promise(function(r,i){let s,a,l,c,d,f,p,m,y,E,C,I,A,N,M,P,q,L,T,_;function x(k=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=k,e.onProgress(Math.min(s,100))}function S(k){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(k,s),100),e.onProgress(s)}return s=n,a=e.maxIteration||10,l=1024*e.maxSizeMB*1024,x(),kg(t,e).then((function(k){try{return[,c]=k,x(),d=sD(c,e),x(),new Promise(function(j,O){var G;if(!(G=e.exifOrientation))return iD(t).then((function(z){try{return G=z,J.call(this)}catch(U){return O(U)}}).bind(this),O);function J(){return j(G)}return J.call(this)}).then((function(j){try{return f=j,x(),lc().then((function(O){try{return p=O?d:aD(d,f),x(),m=e.initialQuality||1,y=e.fileType||t.type,Lg(p,y,t.name,t.lastModified,m).then((function(G){try{{let z=function(){if(a--&&(M>l||M>A)){let Q,ee;return Q=_?.95*T.width:T.width,ee=_?.95*T.height:T.height,[q,L]=Mv(Q,ee),L.drawImage(T,0,0,Q,ee),m*=y==="image/png"?.85:.95,Lg(q,y,t.name,t.lastModified,m).then(function(ae){try{return P=ae,Ls(T),T=q,M=P.size,S(Math.min(99,Math.floor((N-M)/(N-l)*100))),z}catch(be){return i(be)}},i)}return[1]},U=function(){return Ls(T),Ls(q),Ls(d),Ls(p),Ls(c),S(100),r(P)};if(E=G,x(),C=E.size>l,I=E.size>t.size,!C&&!I)return S(100),r(E);var J;return A=t.size,N=E.size,M=N,T=p,_=!e.alwaysKeepResolution&&C,(J=(function(Q){for(;Q;){if(Q.then)return void Q.then(J,i);try{if(Q.pop){if(Q.length)return Q.pop()?U.call(this):Q;Q=z}else Q=Q.call(this)}catch(ee){return i(ee)}}}).bind(this))(z)}}catch(z){return i(z)}}).bind(this),i)}catch(G){return i(G)}}).bind(this),i)}catch(O){return i(O)}}).bind(this),i)}catch(j){return i(j)}}).bind(this),i)})}const ZG=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let By;function JG(t,e){return new Promise((n,r)=>{By||(By=function(a){const l=[];return l.push(a),URL.createObjectURL(new Blob(l))}(ZG));const i=new Worker(By);i.addEventListener("message",function(a){if(e.signal&&e.signal.aborted)i.terminate();else if(a.data.progress===void 0){if(a.data.error)return r(new Error(a.data.error)),void i.terminate();n(a.data.file),i.terminate()}else e.onProgress(a.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function gr(t,e){return new Promise(function(n,r){let i,s,a,l,c,d;if(i={...e},a=0,{onProgress:l}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=y=>{a=y,typeof l=="function"&&l(a)},!(t instanceof Blob||t instanceof QG))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(d=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||d)return xS(t,i).then((function(y){try{return s=y,m.call(this)}catch(E){return r(E)}}).bind(this),r);var f=(function(){try{return m.call(this)}catch(y){return r(y)}}).bind(this),p=function(y){try{return xS(t,i).then(function(E){try{return s=E,f()}catch(C){return r(C)}},r)}catch(E){return r(E)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",JG(t,i).then(function(y){try{return s=y,f()}catch{return p()}},p)}catch{p()}function m(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(s=K3(t,s))}catch{}return n(s)}})}gr.getDataUrlFromFile=eD,gr.getFilefromDataUrl=Kw,gr.loadImage=tD,gr.drawImageInCanvas=rD,gr.drawFileInCanvas=kg,gr.canvasToFile=Lg,gr.getExifOrientation=iD,gr.handleMaxWidthOrHeight=sD,gr.followExifOrientation=aD,gr.cleanupCanvasMemory=Ls,gr.isAutoOrientationInBrowser=lc,gr.approximateBelowMaximumCanvasSizeOfBrowser=nD,gr.copyExifWithoutOrientation=K3,gr.getBrowserName=jl,gr.version="2.0.2";async function e$(t,e){try{return await gr(t,e)}catch(n){return console.error("Image compression failed:",n),t}}const T1=async(t,e,n)=>{const{storage:r}=Zs(),i=Ww(r,`users/${e}/character-portraits/${n}`);return await W3(i,t,ts.DATA_URL),Yw(i)},t$=async(t,e,n,r)=>{if(!e||!n||!r)throw new Error("User, character, or companion ID is missing for image upload.");const{storage:i}=Zs(),s=`users/${e}/characters/${n}/companions/${r}/portrait.jpg`,a=Ww(i,s),l=await W3(a,t,"data_url");return await Yw(l.ref)},n$=t=>Math.ceil(t/4)+1,A1=t=>Math.floor((t-10)/2),r$=t=>[{name:"Acrobatics",ability:"dexterity",proficient:!1,expertise:!1},{name:"Animal Handling",ability:"wisdom",proficient:!1,expertise:!1},{name:"Arcana",ability:"intelligence",proficient:!1,expertise:!1},{name:"Athletics",ability:"strength",proficient:!1,expertise:!1},{name:"Deception",ability:"charisma",proficient:!1,expertise:!1},{name:"History",ability:"intelligence",proficient:!1,expertise:!1},{name:"Insight",ability:"wisdom",proficient:!1,expertise:!1},{name:"Intimidation",ability:"charisma",proficient:!1,expertise:!1},{name:"Investigation",ability:"intelligence",proficient:!1,expertise:!1},{name:"Medicine",ability:"wisdom",proficient:!1,expertise:!1},{name:"Nature",ability:"intelligence",proficient:!1,expertise:!1},{name:"Perception",ability:"wisdom",proficient:!1,expertise:!1},{name:"Performance",ability:"charisma",proficient:!1,expertise:!1},{name:"Persuasion",ability:"charisma",proficient:!1,expertise:!1},{name:"Religion",ability:"intelligence",proficient:!1,expertise:!1},{name:"Sleight of Hand",ability:"dexterity",proficient:!1,expertise:!1},{name:"Stealth",ability:"dexterity",proficient:!1,expertise:!1},{name:"Survival",ability:"wisdom",proficient:!1,expertise:!1}],Ua=()=>{const t={strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10};return{id:`new_${Date.now()}`,lastUpdated:Date.now(),name:"",class:"",subclass:"",level:1,race:"",alignment:"",background:"",playerName:"",experiencePoints:0,abilityScores:t,inspiration:0,proficiencyBonus:n$(1),savingThrows:{strength:{proficient:!1},dexterity:{proficient:!1},constitution:{proficient:!1},intelligence:{proficient:!1},wisdom:{proficient:!1},charisma:{proficient:!1}},skills:r$(),unarmoredDefense:{base:10,abilities:["dexterity"]},initiative:A1(t.dexterity),speed:30,hp:{max:10,current:10,temporary:0},hitDice:{total:"1d8",used:0},deathSaves:{successes:0,failures:0},personalityTraits:"",ideals:"",bonds:"",flaws:"",languages:"Common",attacks:[],currency:{cp:0,sp:0,ep:0,gp:0,pp:0},equipment:[],featuresAndTraits:[],notes:"",dmNotes:"",spellcastingAbility:"",spells:[],spellSlots:{1:{max:0,used:0},2:{max:0,used:0},3:{max:0,used:0},4:{max:0,used:0},5:{max:0,used:0},6:{max:0,used:0},7:{max:0,used:0},8:{max:0,used:0},9:{max:0,used:0}},customResources:[],imageUrl:"",companions:[]}},i$=t=>{var s,a;if(!t)return 10;const e=A1(t.abilityScores.dexterity);let n=0;const r=(s=t.equipment)==null?void 0:s.find(l=>l.equipped&&["light","medium","heavy"].includes(l.armorType||"")),i=(a=t.equipment)==null?void 0:a.find(l=>l.equipped&&l.armorType==="shield");if(r){const l=r.armorClass||0;switch(r.armorType){case"light":n=l+e;break;case"medium":n=l+Math.min(2,e);break;case"heavy":n=l;break}}else{const l=t.unarmoredDefense||{base:10,abilities:[]};let c=l.base;l.abilities.forEach(d=>{c+=A1(t.abilityScores[d])}),n=c}return i&&(n+=i.armorClass||2),n},oD="runica-characters",sh=()=>{try{const t=localStorage.getItem(oD);return t?JSON.parse(t).map(e=>({...Ua(),...e})):[]}catch(t){return console.error("Error reading from local storage",t),[]}},Gc=t=>{try{localStorage.setItem(oD,JSON.stringify(t))}catch(e){console.error("Error saving to local storage",e)}},ah=()=>{try{const{db:t,auth:e}=Zs();return e.currentUser?fq(t,"users",e.currentUser.uid,"characters"):null}catch{return null}},Qw=t=>{const e=ah();return e?Iw(e,t):null},s$=t=>{const e=ah();return e?Iq(Tq(e),n=>{const r=n.docs.map(i=>({...Ua(),...i.data()}));t(r)}):(t(sh()),()=>{})},lD=async t=>{if(t==="new")return Ua();const e=Qw(t);if(e){const n=await Rq(e);if(n.exists()){const r=n.data();return{...Ua(),...r}}return null}else return sh().find(n=>n.id===t)||null},uD=async t=>{const e={...t,lastUpdated:Date.now()},n=Qw(e.id);if(n)await Cq(n,e);else{const r=sh(),i=r.findIndex(s=>s.id===e.id);i>-1?r[i]=e:r.push(e),Gc(r)}return e},a$=async t=>{const e=Qw(t);if(e)await Nq(e);else{const n=sh();Gc(n.filter(r=>r.id!==t))}},o$=async()=>{let t,e;try{({db:t,auth:e}=Zs())}catch{return}if(!e.currentUser||!T1)return;const n=sh();if(n.length===0||!window.confirm("You have local characters saved on this device. Do you want to move them to your account? This will merge them with any existing characters on your account."))return;const r=ah();if(!r)return;const i=Bw(t),a=(await Ov(r)).docs.map(c=>c.data());let l=0;for(const c of n){const d=a.find(f=>f.id===c.id);if(!d||c.lastUpdated>(d.lastUpdated||0)){const f={...c};if(f.imageUrl&&f.imageUrl.startsWith("data:image"))try{const m=e.currentUser.uid;f.imageUrl=await T1(f.imageUrl,m,f.id)}catch(m){console.error(`Failed to upload image for character ${f.name}. It will be saved with the local data URL.`,m),f.imageUrl=""}const p=Iw(r,c.id);i.set(p,f),l++}}if(l>0)try{await i.commit(),alert(`${l} character(s) migrated to your account.`),Gc([])}catch(c){console.error("Failed to migrate characters:",c),alert("There was an error migrating your characters. They remain on this device for now.")}else alert("No characters needed to be migrated. Your cloud data is up to date."),Gc([])},l$=async()=>{const t=ah();return t?(await Ov(t)).docs.map(n=>n.data()):sh()},u$=async t=>{const e=ah();if(e){const{db:n}=Zs(),r=Bw(n);(await Ov(e)).forEach(a=>r.delete(a.ref)),t.map(a=>({...Ua(),...a})).forEach(a=>{const l=Iw(e,a.id);r.set(l,a)}),await r.commit()}else Gc(t.map(n=>({...Ua(),...n})))},c$=async()=>{const t=ah();if(t){const{db:e}=Zs(),n=Bw(e);(await Ov(t)).forEach(i=>n.delete(i.ref)),await n.commit()}else Gc([])},cD=K.createContext({currentUser:null,loading:!0,signInWithGoogle:()=>Promise.reject("Auth provider not initialized"),logout:()=>Promise.reject("Auth provider not initialized")}),pu=()=>K.useContext(cD),h$=({children:t})=>{const[e,n]=K.useState(null),[r,i]=K.useState(!0);K.useEffect(()=>GG(async c=>{n(c),c&&(await c.getIdToken(),await o$()),i(!1)}),[]);const s={currentUser:e,loading:r,signInWithGoogle:HG,logout:qG};return r?v.jsx("div",{className:"flex justify-center items-center h-screen w-screen bg-background",children:v.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-accent"})}):v.jsx(cD.Provider,{value:s,children:t})},f$=["theme-amber","theme-sapphire","theme-twilight","theme-evergreen","theme-crimson","theme-rose","theme-veridian","theme-obsidian","theme-solaris","theme-aether","theme-grove","theme-celestial","theme-nocturne"],hD=K.createContext(void 0),d$=({children:t})=>{const[e,n]=K.useState(()=>localStorage.getItem("app-theme")||"theme-amber");K.useEffect(()=>{const i=window.document.documentElement;i.classList.remove(...f$),i.classList.add(e),localStorage.setItem("app-theme",e)},[e]);const r=K.useMemo(()=>({theme:e,setTheme:n}),[e]);return v.jsx(hD.Provider,{value:r,children:t})},m$=()=>{const t=K.useContext(hD);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},kv=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Lv=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),p$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),jg=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.5 21.75l-.398-1.188a3.375 3.375 0 00-2.924-2.924l-1.188-.398 1.188-.398a3.375 3.375 0 002.924-2.924l.398-1.188.398 1.188a3.375 3.375 0 002.924 2.924l1.188.398-1.188.398a3.375 3.375 0 00-2.924 2.924z"})}),fD=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})}),dD=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V7l-4-4z"}),v.jsx("path",{d:"M17 3v5H7V3"}),v.jsx("rect",{x:"9",y:"13",width:"6",height:"5",rx:"1"})]}),Js=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.134H8.09a2.09 2.09 0 00-2.09 2.134v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),g$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m9.375 0V9.375M9.375 6.375v3.5"})}),Ba=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),v$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),y$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),_$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),b$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),iu=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),w$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 12l4.5 4.5L18.75 9"})}),x$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 19.5l7.5-7.5-7.5-7.5"})}),E$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5l-7.5-7.5 7.5-7.5"})}),mD=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),rX=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 4.5v5h5M19.5 19.5v-5h-5M19.5 9a7.5 7.5 0 00-13.5-4.5M4.5 15a7.5 7.5 0 0013.5 4.5"})}),T$=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.242 1.417l-1.07 1.07c-.127.127-.213.289-.27.461a4.5 4.5 0 010 .752c.057.172.143.334.27.461l1.07 1.07c.48.48.577 1.232.242 1.417l-1.296 2.247a1.125 1.125 0 01-1.37.49l-1.217-.456a4.5 4.5 0 01-1.075-.124.938.938 0 01-.22.127c-.332.183-.582.495-.645.87l-.213 1.281c-.09.543-.56.94-1.11.94h-2.593c-.55 0-1.02-.398-1.11-.94l-.213-1.281a4.5 4.5 0 01-.645-.87.938.938 0 01-.22-.127 4.5 4.5 0 01-1.075-.124l-1.217.456a1.125 1.125 0 01-1.37-.49l-1.296-2.247a1.125 1.125 0 01.242-1.417l1.07-1.07c.127-.127.213-.289.27-.461a4.5 4.5 0 010-.752 4.49 4.49 0 01-.27-.461l-1.07-1.07a1.125 1.125 0 01-.242-1.417l1.296-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.075-.124.073-.044.146-.087.22-.127.332-.183-.582-.495-.645-.87l.213-1.281z"}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),A$=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"48px",height:"48px",...t,children:[v.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),v.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),v.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),v.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.574l6.19,5.238C39.99,36.62,44,30.638,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),S$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),R$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),C$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),N$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),I$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),D$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"})}),jv=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m6-6H6"})}),pD=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12h12"})}),O$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 3L6 12h6l-3 9 9-9h-6l7.5-9z"})}),M$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.249-8.25-3.286Z"})}),k$=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.306a11.95 11.95 0 015.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"})}),L$=()=>{const[t,e]=K.useState(null),[n,r]=K.useState(!1),[i,s]=K.useState(!1);return K.useEffect(()=>{const l=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;r(l);const c=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;s(c);const d=f=>{f.preventDefault(),l||e(f)};return window.addEventListener("beforeinstallprompt",d),()=>window.removeEventListener("beforeinstallprompt",d)},[n]),{canInstall:!!t&&!n,isIos:i,isStandalone:n,promptInstall:async()=>{if(!t)return;await t.prompt(),e(null)}}},j$=({onSettingsClick:t})=>{const{currentUser:e,logout:n}=pu(),r=eh(),{canInstall:i,isIos:s,isStandalone:a,promptInstall:l}=L$(),[c,d]=K.useState(!1),f=K.useRef(null);K.useEffect(()=>{const y=E=>{f.current&&!f.current.contains(E.target)&&d(!1)};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[]);const p=async()=>{d(!1),await n(),r("/")},m=()=>{d(!1),r("/account")};return v.jsxs("header",{className:"sticky top-0 z-50 flex justify-between items-center h-20 px-6 bg-background/80 backdrop-blur-lg border-b border-white/10 [box-shadow:0_1px_10px_rgb(var(--color-accent)/0.3)] transition-all duration-300",children:[v.jsxs("h1",{onClick:()=>r("/"),className:"font-norse font-bold text-accent cursor-pointer flex items-baseline transition-all duration-300 hover:opacity-80",style:{textShadow:"0 0 8px rgb(var(--color-accent) / 0.7)"},children:[v.jsx("span",{className:"text-6xl",children:"R"}),v.jsx("span",{className:"text-4xl",children:"unica"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[i&&v.jsxs("button",{onClick:l,className:"px-3 py-2 flex items-center gap-2 font-semibold text-accent bg-accent/10 rounded-lg border border-accent/30 hover:bg-accent/20 hover:border-accent/70 transition-all duration-300",title:"Installa Runica sul tuo dispositivo",children:[v.jsx(y$,{className:"w-5 h-5"}),v.jsx("span",{className:"hidden sm:inline",children:"Installa App"})]}),s&&!i&&!a&&v.jsxs("div",{className:"px-3 py-2 flex items-center gap-2 font-semibold text-accent bg-accent/10 rounded-lg border border-accent/30 cursor-help",title:"Per installare: tocca l'icona Condividi e poi 'Aggiungi a Home'",children:[v.jsx(_$,{className:"w-5 h-5"}),v.jsx("span",{className:"hidden sm:inline",children:"Installa App"})]}),e?v.jsxs("div",{className:"relative",ref:f,children:[v.jsx("img",{src:e.photoURL||`https://api.dicebear.com/8.x/lorelei/svg?seed=${e.uid}`,alt:e.displayName||"User Avatar",onClick:()=>d(y=>!y),className:"w-12 h-12 rounded-full cursor-pointer ring-2 ring-transparent hover:ring-accent transition-all duration-300 hover:scale-105",title:"Account"}),c&&v.jsx("div",{className:"absolute right-0 mt-2 w-56 origin-top-right rounded-md bg-zinc-800 shadow-lg ring-1 ring-white/10 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu-button",children:v.jsxs("div",{className:"py-1",role:"none",children:[v.jsxs("div",{className:"px-4 py-3 border-b border-zinc-700",children:[v.jsx("p",{className:"text-sm text-zinc-300",role:"none",children:"Signed in as"}),v.jsx("p",{className:"text-sm font-medium text-accent truncate",role:"none",children:e.displayName||e.email})]}),v.jsxs("button",{onClick:m,className:"w-full text-left flex items-center gap-3 px-4 py-3 text-sm text-zinc-200 hover:bg-zinc-700 transition-colors",role:"menuitem",children:[v.jsx(I$,{className:"w-5 h-5"}),"Account Settings"]}),v.jsxs("button",{onClick:p,className:"w-full text-left flex items-center gap-3 px-4 py-3 text-sm text-red-400 hover:bg-zinc-700 transition-colors",role:"menuitem",children:[v.jsx(N$,{className:"w-5 h-5"}),"Logout"]})]})})]}):v.jsx("button",{onClick:()=>r("/login"),className:"px-5 py-2 font-semibold text-accent bg-accent/10 rounded-lg border border-accent/30 hover:bg-accent/20 hover:border-accent/70 transition-all duration-300",children:"Login"}),v.jsx("button",{onClick:t,className:"w-12 h-12 flex items-center justify-center rounded-lg text-accent bg-accent/10 border border-accent/30 hover:bg-accent/20 hover:border-accent/70 transition-all duration-300","aria-label":"Open settings",children:v.jsx(T$,{className:"w-6 h-6"})})]})]})},Fy=({title:t,children:e})=>v.jsxs("div",{className:"border-t border-zinc-700 pt-4 mt-4 first:border-t-0 first:mt-0 first:pt-0",children:[v.jsx("h4",{className:"text-md font-semibold text-zinc-400 mb-3",children:t}),e]}),P$=[{id:"theme-amber",name:"Ambra",color:"bg-amber-400"},{id:"theme-sapphire",name:"Zaffiro",color:"bg-cyan-400"},{id:"theme-twilight",name:"Crepuscolo",color:"bg-violet-400"},{id:"theme-evergreen",name:"Foresta",color:"bg-emerald-400"},{id:"theme-crimson",name:"Cremisi",color:"bg-red-500"},{id:"theme-rose",name:"Rosato",color:"bg-rose-500"},{id:"theme-veridian",name:"Veridiano",color:"bg-green-400"},{id:"theme-obsidian",name:"Ossidiana",color:"bg-gray-300"},{id:"theme-solaris",name:"Solaris",color:"bg-orange-500"},{id:"theme-aether",name:"Etere",color:"bg-fuchsia-500"},{id:"theme-grove",name:"Bosco",color:"bg-lime-500"},{id:"theme-nocturne",name:"Notturno",color:"bg-violet-500"},{id:"theme-celestial",name:"Celeste",color:"bg-indigo-600"}],U$=({isOpen:t,onClose:e})=>{const{theme:n,setTheme:r}=m$(),i=K.useRef(null),s=K.useRef(null);K.useEffect(()=>{const f=i.current;f&&(t?f.showModal():f.close())},[t]);const a=async()=>{try{const f=await l$(),p={version:1,exportedAt:new Date().toISOString(),characters:f,settings:{theme:n}},m=JSON.stringify(p,null,2),y=new Blob([m],{type:"application/json"}),E=URL.createObjectURL(y),C=document.createElement("a");C.href=E,C.download=`runica-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(E),alert("Data exported successfully!")}catch(f){console.error("Failed to export data:",f),alert("Error exporting data. Check the console for details.")}},l=()=>{var f;(f=s.current)==null||f.click()},c=async f=>{var y;const p=(y=f.target.files)==null?void 0:y[0];if(!p||!window.confirm("Are you sure you want to import data? This will overwrite all current characters."))return;const m=new FileReader;m.onload=async E=>{var C,I;try{const A=(C=E.target)==null?void 0:C.result;if(typeof A!="string")throw new Error("Invalid file content");const N=JSON.parse(A);if(!N.characters||!Array.isArray(N.characters))throw new Error("Invalid backup file format.");await u$(N.characters),(I=N.settings)!=null&&I.theme&&r(N.settings.theme),alert("Data imported successfully! The page will now reload."),window.location.reload()}catch(A){console.error("Failed to import data:",A),alert("Error importing data. Make sure it is a valid backup file.")}},m.readAsText(p)},d=async()=>{if(window.confirm("DANGER! This will permanently delete ALL your characters. This action cannot be undone. Are you absolutely sure?"))try{await c$(),alert("All data has been cleared. The app will now reload."),window.location.reload()}catch(f){console.error("Failed to clear data:",f),alert("An error occurred while clearing data.")}};return v.jsxs("dialog",{ref:i,onClose:e,className:"bg-zinc-800 text-zinc-200 p-0 rounded-lg shadow-2xl w-full max-w-sm border border-zinc-700 backdrop:bg-black/50",children:[v.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-zinc-700",children:[v.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Settings"}),v.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-zinc-700 transition-colors",children:v.jsx(kv,{className:"w-5 h-5"})})]}),v.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:[v.jsx(Fy,{title:"Appearance",children:v.jsx("div",{className:"grid grid-cols-2 gap-3",children:P$.map(f=>v.jsxs("button",{onClick:()=>r(f.id),className:`flex items-center justify-between p-3 rounded-md border-2 transition-colors ${n===f.id?"border-accent":"border-zinc-600 hover:border-zinc-500"}`,children:[v.jsxs("span",{className:"flex items-center gap-2",children:[v.jsx("span",{className:`w-5 h-5 rounded-full ${f.color}`})," ",f.name]}),n===f.id&&v.jsx(w$,{className:"w-5 h-5 text-accent"})]},f.id))})}),v.jsx(Fy,{title:"Data Management",children:v.jsxs("div",{className:"space-y-3",children:[v.jsxs("button",{onClick:a,className:"w-full flex items-center justify-center gap-2 bg-zinc-700 hover:bg-zinc-600 text-zinc-200 font-semibold py-2 px-4 rounded-md transition-colors",children:[v.jsx(S$,{className:"w-5 h-5"}),"Export All Data"]}),v.jsxs("button",{onClick:l,className:"w-full flex items-center justify-center gap-2 bg-zinc-700 hover:bg-zinc-600 text-zinc-200 font-semibold py-2 px-4 rounded-md transition-colors",children:[v.jsx(R$,{className:"w-5 h-5"}),"Import from Backup"]}),v.jsx("input",{type:"file",ref:s,onChange:c,accept:".json",className:"hidden"})]})}),v.jsx(Fy,{title:"Danger Zone",children:v.jsxs("button",{onClick:d,className:"w-full flex items-center justify-center gap-2 bg-destructive/20 hover:bg-destructive/40 text-destructive font-semibold py-2 px-4 rounded-md transition-colors border border-destructive/50",children:[v.jsx(C$,{className:"w-5 h-5"}),"Clear All Data"]})})]})]})};function V$(){const[t,e]=K.useState(!1);return v.jsxs("div",{className:"bg-background min-h-screen text-text-main",children:[v.jsx(j$,{onSettingsClick:()=>e(!0)}),v.jsx("main",{children:v.jsx(uI,{})}),v.jsx(U$,{isOpen:t,onClose:()=>e(!1)})]})}const gD=K.createContext(void 0),ea=()=>{const t=K.useContext(gD);if(!t)throw new Error("useCharacter must be used within a CharacterProvider");return t},z$=({children:t})=>{const[e,n]=K.useState(null),[r,i]=K.useState([]),[s,a]=K.useState(!0),{currentUser:l}=pu(),c=K.useCallback(m=>{n(y=>y?{...y,...m}:null)},[]);K.useEffect(()=>{a(!0);const m=s$(y=>{const E=y.map(C=>({...Ua(),...C}));i(E.sort((C,I)=>C.name.localeCompare(I.name))),a(!1)});return()=>m()},[l]);const d=K.useCallback(async m=>{await a$(m),i(y=>y.filter(E=>E.id!==m))},[]),f=K.useCallback(async m=>(i(y=>{const E=y.findIndex(C=>C.id===m.id);if(E>-1){const C=[...y];return C[E]=m,C.sort((I,A)=>I.name.localeCompare(A.name))}else return[...y,m].sort((C,I)=>C.name.localeCompare(I.name))}),await uD(m)),[]),p={character:e,setCharacter:n,updateCharacter:c,characters:r,loading:s,deleteCharacter:d,saveCharacter:f};return v.jsx(gD.Provider,{value:p,children:t})},B$=({character:t,onSelect:e,onDelete:n,onEdit:r})=>v.jsxs("div",{onClick:e,className:"bg-card rounded-lg shadow-lg overflow-hidden transition-all duration-300 md:hover:shadow-accent/20 group relative cursor-pointer",role:"button",tabIndex:0,children:[v.jsx("div",{className:"relative w-full max-h-32 md:group-hover:max-h-96 transition-all duration-500 ease-in-out overflow-hidden",children:t.imageUrl?v.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-auto"}):v.jsx("div",{className:"w-full h-32 flex items-center justify-center text-muted-foreground bg-muted/50",children:v.jsx(Lv,{className:"w-16 h-16"})})}),v.jsxs("div",{className:"p-5",children:[v.jsx("h3",{className:"text-xl font-bold font-cinzel text-accent truncate",children:t.name||"Unnamed Adventurer"}),v.jsxs("p",{className:"text-muted-foreground capitalize text-sm",children:[t.race||"Race"," ",t.class||"Class","  Level ",t.level]}),v.jsxs("div",{className:"mt-4 flex items-center gap-4 text-sm text-foreground border-t border-border pt-4",children:[v.jsxs("div",{className:"flex items-center gap-1.5",title:"Hit Points",children:[v.jsx("span",{className:"font-bold text-destructive",children:"HP"}),v.jsxs("span",{children:[t.hp.current,"/",t.hp.max]})]}),v.jsxs("div",{className:"flex items-center gap-1.5",title:"Armor Class",children:[v.jsx("span",{className:"font-bold text-accent",children:"AC"}),v.jsx("span",{children:i$(t)})]})]})]}),v.jsxs("div",{className:"absolute top-3 right-3 flex items-center space-x-2 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity duration-300",children:[v.jsx("button",{onClick:r,className:"p-2 rounded-full bg-secondary hover:bg-accent text-secondary-foreground hover:text-accent-foreground transition-colors","aria-label":`Edit ${t.name}`,children:v.jsx(Ba,{className:"w-4 h-4"})}),v.jsx("button",{onClick:n,className:"p-2 rounded-full bg-secondary hover:bg-accent text-secondary-foreground hover:text-destructive-foreground transition-colors","aria-label":`Delete ${t.name}`,children:v.jsx(Js,{className:"w-4 h-4"})})]})]}),F$=()=>{const{characters:t,loading:e,deleteCharacter:n}=ea(),{currentUser:r}=pu(),i=eh(),s=c=>{i(c==="new"?"/character/new":`/character/${c}`)},a=c=>{i(`/character/${c}/edit`)},l=async(c,d)=>{window.confirm(`Are you sure you want to delete ${d}? This cannot be undone.`)&&await n(c)};return e?v.jsx("div",{className:"flex justify-center items-center h-screen",children:v.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-accent"})}):v.jsxs("div",{className:"p-4 sm:p-8 max-w-7xl mx-auto pt-12",children:[v.jsx("h2",{className:"text-3xl font-cinzel text-center text-foreground mb-8",children:"Your Characters"}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsxs("button",{onClick:()=>s("new"),className:"mb-10 flex items-center gap-2 px-6 py-3 bg-accent-dark text-white font-bold rounded-lg shadow-md hover:bg-accent transition-all duration-300 transform hover:scale-105",children:[v.jsx(b$,{className:"w-5 h-5"}),"Create New Character"]}),t.length>0?v.jsx("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(c=>v.jsx(B$,{character:c,onSelect:()=>s(c.id),onDelete:d=>{d.stopPropagation(),l(c.id,c.name)},onEdit:d=>{d.stopPropagation(),a(c.id)}},c.id))}):v.jsxs("div",{className:"text-center w-full max-w-2xl mt-8 py-16 px-6 bg-card/50 rounded-lg border border-border",children:[v.jsx("h2",{className:"text-2xl font-semibold text-foreground font-cinzel",children:"Your adventure awaits!"}),v.jsxs("p",{className:"text-text-muted mt-2",children:[r?"You have no characters synced to this account.":"You have no local characters.",v.jsx("br",{}),"Click the button above to forge your first hero."]})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$="type.googleapis.com/google.protobuf.Int64Value",q$="type.googleapis.com/google.protobuf.UInt64Value";function vD(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Pg(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Pg(e));if(typeof t=="function"||typeof t=="object")return vD(t,e=>Pg(e));throw new Error("Data cannot be encoded in JSON: "+t)}function $c(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case H$:case q$:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>$c(e)):typeof t=="function"||typeof t=="object"?vD(t,e=>$c(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class si extends Ss{constructor(e,n,r){super(`${Zw}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,si.prototype)}}function G$(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Ug(t,e){let n=G$(t),r=n,i;try{const s=e&&e.error;if(s){const a=s.status;if(typeof a=="string"){if(!ES[a])return new si("internal","internal");n=ES[a],r=a}const l=s.message;typeof l=="string"&&(r=l),i=s.details,i!==void 0&&(i=$c(i))}}catch{}return n==="ok"?null:new si(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,wi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="us-central1",Y$=/^data: (.*?)(?:\n|$)/;function W$(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new si("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class X${constructor(e,n,r,i,s=S1,a=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new $$(e,n,r,i),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=S1}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function K$(t,e,n){const r=za(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(uv(t.emulatorOrigin),cv("Functions",!0))}function Q$(t,e,n){const r=i=>J$(t,e,i,{});return r.stream=(i,s)=>tY(t,e,i,s),r}async function Z$(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}async function yD(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function J$(t,e,n,r){const i=t._url(e);return eY(t,i,n,r)}async function eY(t,e,n,r){n=Pg(n);const i={data:n},s=await yD(t,r),a=r.timeout||7e4,l=W$(a),c=await Promise.race([Z$(e,i,s,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new si("cancelled","Firebase Functions instance was deleted.");const d=Ug(c.status,c.json);if(d)throw d;if(!c.json)throw new si("internal","Response is not valid JSON object.");let f=c.json.data;if(typeof f>"u"&&(f=c.json.result),typeof f>"u")throw new si("internal","Response is missing data field.");return{data:$c(f)}}function tY(t,e,n,r){const i=t._url(e);return nY(t,i,n,r||{})}async function nY(t,e,n,r){var i;n=Pg(n);const s={data:n},a=await yD(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let l;try{l=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:a,signal:r==null?void 0:r.signal})}catch(y){if(y instanceof Error&&y.name==="AbortError"){const C=new si("cancelled","Request was cancelled.");return{data:Promise.reject(C),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(C)}}}}}}const E=Ug(0,null);return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}let c,d;const f=new Promise((y,E)=>{c=y,d=E});(i=r==null?void 0:r.signal)===null||i===void 0||i.addEventListener("abort",()=>{const y=new si("cancelled","Request was cancelled.");d(y)});const p=l.body.getReader(),m=rY(p,c,d,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const y=m.getReader();return{async next(){const{value:E,done:C}=await y.read();return{value:E,done:C}},async return(){return await y.cancel(),{done:!0,value:void 0}}}}},data:f}}function rY(t,e,n,r){const i=(a,l)=>{const c=a.match(Y$);if(!c)return;const d=c[1];try{const f=JSON.parse(d);if("result"in f){e($c(f.result));return}if("message"in f){l.enqueue($c(f.message));return}if("error"in f){const p=Ug(0,f);l.error(p),n(p);return}}catch(f){if(f instanceof si){l.error(f),n(f);return}}},s=new TextDecoder;return new ReadableStream({start(a){let l="";return c();async function c(){if(r!=null&&r.aborted){const d=new si("cancelled","Request was cancelled");return a.error(d),n(d),Promise.resolve()}try{const{value:d,done:f}=await t.read();if(f){l.trim()&&i(l.trim(),a),a.close();return}if(r!=null&&r.aborted){const m=new si("cancelled","Request was cancelled");a.error(m),n(m),await t.cancel();return}l+=s.decode(d,{stream:!0});const p=l.split(`
`);l=p.pop()||"";for(const m of p)m.trim()&&i(m.trim(),a);return c()}catch(d){const f=d instanceof si?d:Ug(0,null);a.error(f),n(f)}}},cancel(){return t.cancel()}})}const TS="@firebase/functions",AS="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iY="auth-internal",sY="app-check-internal",aY="messaging-internal";function oY(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),s=n.getProvider(iY),a=n.getProvider(aY),l=n.getProvider(sY);return new X$(i,s,a,l,r)};qo(new Ma(Zw,e,"PUBLIC").setMultipleInstances(!0)),ns(TS,AS,t),ns(TS,AS,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lY(t=hv(),e=S1){const r=bd(Wt(t),Zw).getImmediate({identifier:e}),i=Fb("functions");return i&&uY(r,...i),r}function uY(t,e,n){K$(Wt(t),e,n)}function cY(t,e,n){return Q$(Wt(t),e)}oY();const hY={personalityTraits:"Generazione AI fallita. Impossibile contattare il servizio.",ideals:"Errore.",bonds:"Errore.",flaws:"Errore."},fY=()=>{const{app:t}=Zs(),e=lY(t,"europe-west1");return cY(e,"callGemini")},dY=async(t,e)=>{const{name:n,race:r,class:i,background:s,alignment:a}=t,l=`
     Generate personality aspects for a Dungeons & Dragons character.
     Based on the following details:
     - Name: ${n}
     - Race: ${r}
     - Class: ${i}
     - Background: ${s}
     - Alignment: ${a}
     ${e?`
- Additional Theme: "${e}"`:""}

     Return a JSON object with four keys: "personalityTraits", "ideals", "bonds", and "flaws".
     - "personalityTraits": A short paragraph describing the character's general demeanor.
     - "ideals": A sentence describing a core belief.
     - "bonds": A sentence about something or someone the character cares deeply about.
     - "flaws": A sentence describing a significant weakness or fear.
   `;try{console.log("Calling Cloud Function 'callGemini'...");const d=await fY()(l);if(!d.data.success||!d.data.response)throw new Error("La Cloud Function ha riportato un errore: "+d.data.response);const f=d.data.response.trim(),p=JSON.parse(f);return{personalityTraits:p.personalityTraits||"",ideals:p.ideals||"",bonds:p.bonds||"",flaws:p.flaws||""}}catch(c){return console.error("Errore durante la chiamata alla Cloud Function 'callGemini':",c),hY}};/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function SS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _D(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SS(Object(n),!0).forEach(function(r){vY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function bD(t){var e=mY(t,"string");return typeof e=="symbol"?e:e+""}function R1(t){"@babel/helpers - typeof";return R1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R1(t)}function pY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bD(r.key),r)}}function gY(t,e,n){return e&&RS(t.prototype,e),n&&RS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vY(t,e,n){return e=bD(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wD(t){return yY(t)||_Y(t)||bY(t)||wY()}function yY(t){if(Array.isArray(t))return C1(t)}function _Y(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function bY(t,e){if(t){if(typeof t=="string")return C1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C1(t,e)}}function C1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Pv=typeof window<"u"&&typeof window.document<"u",Xs=Pv?window:{},Jw=Pv&&Xs.document.documentElement?"ontouchstart"in Xs.document.documentElement:!1,ex=Pv?"PointerEvent"in Xs:!1,dn="cropper",tx="all",xD="crop",ED="move",TD="zoom",El="e",Tl="w",Vu="s",ao="n",Gh="ne",$h="nw",Yh="se",Wh="sw",N1="".concat(dn,"-crop"),CS="".concat(dn,"-disabled"),ni="".concat(dn,"-hidden"),NS="".concat(dn,"-hide"),xY="".concat(dn,"-invisible"),Vg="".concat(dn,"-modal"),I1="".concat(dn,"-move"),Zf="".concat(dn,"Action"),rp="".concat(dn,"Preview"),nx="crop",AD="move",SD="none",D1="crop",O1="cropend",M1="cropmove",k1="cropstart",IS="dblclick",EY=Jw?"touchstart":"mousedown",TY=Jw?"touchmove":"mousemove",AY=Jw?"touchend touchcancel":"mouseup",DS=ex?"pointerdown":EY,OS=ex?"pointermove":TY,MS=ex?"pointerup pointercancel":AY,kS="ready",LS="resize",jS="wheel",L1="zoom",PS="image/jpeg",SY=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,RY=/^data:/,CY=/^data:image\/jpeg;base64,/,NY=/^img|canvas$/i,RD=200,CD=100,US={viewMode:0,dragMode:nx,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:RD,minContainerHeight:CD,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},IY='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',DY=Number.isNaN||Xs.isNaN;function dt(t){return typeof t=="number"&&!DY(t)}var VS=function(e){return e>0&&e<1/0};function Hy(t){return typeof t>"u"}function su(t){return R1(t)==="object"&&t!==null}var OY=Object.prototype.hasOwnProperty;function uc(t){if(!su(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&OY.call(n,"isPrototypeOf")}catch{return!1}}function Jr(t){return typeof t=="function"}var MY=Array.prototype.slice;function ND(t){return Array.from?Array.from(t):MY.call(t)}function Gn(t,e){return t&&Jr(e)&&(Array.isArray(t)||dt(t.length)?ND(t).forEach(function(n,r){e.call(t,n,r,t)}):su(t)&&Object.keys(t).forEach(function(n){e.call(t,t[n],n,t)})),t}var pn=Object.assign||function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return su(e)&&r.length>0&&r.forEach(function(s){su(s)&&Object.keys(s).forEach(function(a){e[a]=s[a]})}),e},kY=/\.\d*(?:0|9){12}\d*$/;function Ec(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return kY.test(t)?Math.round(t*e)/e:t}var LY=/^width|height|left|top|marginLeft|marginTop$/;function So(t,e){var n=t.style;Gn(e,function(r,i){LY.test(i)&&dt(r)&&(r="".concat(r,"px")),n[i]=r})}function jY(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function lr(t,e){if(e){if(dt(t.length)){Gn(t,function(r){lr(r,e)});return}if(t.classList){t.classList.add(e);return}var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function $s(t,e){if(e){if(dt(t.length)){Gn(t,function(n){$s(n,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function cc(t,e,n){if(e){if(dt(t.length)){Gn(t,function(r){cc(r,e,n)});return}n?lr(t,e):$s(t,e)}}var PY=/([a-z\d])([A-Z])/g;function rx(t){return t.replace(PY,"$1-$2").toLowerCase()}function j1(t,e){return su(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(rx(e)))}function Jf(t,e,n){su(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(rx(e)),n)}function UY(t,e){if(su(t[e]))try{delete t[e]}catch{t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch{t.dataset[e]=void 0}else t.removeAttribute("data-".concat(rx(e)))}var ID=/\s\s*/,DD=function(){var t=!1;if(Pv){var e=!1,n=function(){},r=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(s){e=s}});Xs.addEventListener("test",n,r),Xs.removeEventListener("test",n,r)}return t}();function gs(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=n;e.trim().split(ID).forEach(function(s){if(!DD){var a=t.listeners;a&&a[s]&&a[s][n]&&(i=a[s][n],delete a[s][n],Object.keys(a[s]).length===0&&delete a[s],Object.keys(a).length===0&&delete t.listeners)}t.removeEventListener(s,i,r)})}function $i(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=n;e.trim().split(ID).forEach(function(s){if(r.once&&!DD){var a=t.listeners,l=a===void 0?{}:a;i=function(){delete l[s][n],t.removeEventListener(s,i,r);for(var d=arguments.length,f=new Array(d),p=0;p<d;p++)f[p]=arguments[p];n.apply(t,f)},l[s]||(l[s]={}),l[s][n]&&t.removeEventListener(s,l[s][n],r),l[s][n]=i,t.listeners=l}t.addEventListener(s,i,r)})}function Tc(t,e,n){var r;return Jr(Event)&&Jr(CustomEvent)?r=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(r)}function OD(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var qy=Xs.location,VY=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function zS(t){var e=t.match(VY);return e!==null&&(e[1]!==qy.protocol||e[2]!==qy.hostname||e[3]!==qy.port)}function BS(t){var e="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+e}function Nf(t){var e=t.rotate,n=t.scaleX,r=t.scaleY,i=t.translateX,s=t.translateY,a=[];dt(i)&&i!==0&&a.push("translateX(".concat(i,"px)")),dt(s)&&s!==0&&a.push("translateY(".concat(s,"px)")),dt(e)&&e!==0&&a.push("rotate(".concat(e,"deg)")),dt(n)&&n!==1&&a.push("scaleX(".concat(n,")")),dt(r)&&r!==1&&a.push("scaleY(".concat(r,")"));var l=a.length?a.join(" "):"none";return{WebkitTransform:l,msTransform:l,transform:l}}function zY(t){var e=_D({},t),n=0;return Gn(t,function(r,i){delete e[i],Gn(e,function(s){var a=Math.abs(r.startX-s.startX),l=Math.abs(r.startY-s.startY),c=Math.abs(r.endX-s.endX),d=Math.abs(r.endY-s.endY),f=Math.sqrt(a*a+l*l),p=Math.sqrt(c*c+d*d),m=(p-f)/f;Math.abs(m)>Math.abs(n)&&(n=m)})}),n}function ip(t,e){var n=t.pageX,r=t.pageY,i={endX:n,endY:r};return e?i:_D({startX:n,startY:r},i)}function BY(t){var e=0,n=0,r=0;return Gn(t,function(i){var s=i.startX,a=i.startY;e+=s,n+=a,r+=1}),e/=r,n/=r,{pageX:e,pageY:n}}function Ro(t){var e=t.aspectRatio,n=t.height,r=t.width,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",s=VS(r),a=VS(n);if(s&&a){var l=n*e;i==="contain"&&l>r||i==="cover"&&l<r?n=r/e:r=n*e}else s?n=r/e:a&&(r=n*e);return{width:r,height:n}}function FY(t){var e=t.width,n=t.height,r=t.degree;if(r=Math.abs(r)%180,r===90)return{width:n,height:e};var i=r%90*Math.PI/180,s=Math.sin(i),a=Math.cos(i),l=e*a+n*s,c=e*s+n*a;return r>90?{width:c,height:l}:{width:l,height:c}}function HY(t,e,n,r){var i=e.aspectRatio,s=e.naturalWidth,a=e.naturalHeight,l=e.rotate,c=l===void 0?0:l,d=e.scaleX,f=d===void 0?1:d,p=e.scaleY,m=p===void 0?1:p,y=n.aspectRatio,E=n.naturalWidth,C=n.naturalHeight,I=r.fillColor,A=I===void 0?"transparent":I,N=r.imageSmoothingEnabled,M=N===void 0?!0:N,P=r.imageSmoothingQuality,q=P===void 0?"low":P,L=r.maxWidth,T=L===void 0?1/0:L,_=r.maxHeight,x=_===void 0?1/0:_,S=r.minWidth,k=S===void 0?0:S,j=r.minHeight,O=j===void 0?0:j,G=document.createElement("canvas"),J=G.getContext("2d"),z=Ro({aspectRatio:y,width:T,height:x}),U=Ro({aspectRatio:y,width:k,height:O},"cover"),Q=Math.min(z.width,Math.max(U.width,E)),ee=Math.min(z.height,Math.max(U.height,C)),ae=Ro({aspectRatio:i,width:T,height:x}),be=Ro({aspectRatio:i,width:k,height:O},"cover"),pe=Math.min(ae.width,Math.max(be.width,s)),ye=Math.min(ae.height,Math.max(be.height,a)),W=[-pe/2,-ye/2,pe,ye];return G.width=Ec(Q),G.height=Ec(ee),J.fillStyle=A,J.fillRect(0,0,Q,ee),J.save(),J.translate(Q/2,ee/2),J.rotate(c*Math.PI/180),J.scale(f,m),J.imageSmoothingEnabled=M,J.imageSmoothingQuality=q,J.drawImage.apply(J,[t].concat(wD(W.map(function(X){return Math.floor(Ec(X))})))),J.restore(),G}var MD=String.fromCharCode;function qY(t,e,n){var r="";n+=e;for(var i=e;i<n;i+=1)r+=MD(t.getUint8(i));return r}var GY=/^data:.*,/;function $Y(t){var e=t.replace(GY,""),n=atob(e),r=new ArrayBuffer(n.length),i=new Uint8Array(r);return Gn(i,function(s,a){i[a]=n.charCodeAt(a)}),r}function YY(t,e){for(var n=[],r=8192,i=new Uint8Array(t);i.length>0;)n.push(MD.apply(null,ND(i.subarray(0,r)))),i=i.subarray(r);return"data:".concat(e,";base64,").concat(btoa(n.join("")))}function WY(t){var e=new DataView(t),n;try{var r,i,s;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var a=e.byteLength,l=2;l+1<a;){if(e.getUint8(l)===255&&e.getUint8(l+1)===225){i=l;break}l+=1}if(i){var c=i+4,d=i+10;if(qY(e,c,4)==="Exif"){var f=e.getUint16(d);if(r=f===18761,(r||f===19789)&&e.getUint16(d+2,r)===42){var p=e.getUint32(d+4,r);p>=8&&(s=d+p)}}}if(s){var m=e.getUint16(s,r),y,E;for(E=0;E<m;E+=1)if(y=s+E*12+2,e.getUint16(y,r)===274){y+=8,n=e.getUint16(y,r),e.setUint16(y,1,r);break}}}catch{n=1}return n}function XY(t){var e=0,n=1,r=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:r=-1;break;case 5:e=90,r=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:n,scaleY:r}}var KY={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,n=this.options,r=this.container,i=this.cropper,s=Number(n.minContainerWidth),a=Number(n.minContainerHeight);lr(i,ni),$s(e,ni);var l={width:Math.max(r.offsetWidth,s>=0?s:RD),height:Math.max(r.offsetHeight,a>=0?a:CD)};this.containerData=l,So(i,{width:l.width,height:l.height}),lr(e,ni),$s(i,ni)},initCanvas:function(){var e=this.containerData,n=this.imageData,r=this.options.viewMode,i=Math.abs(n.rotate)%180===90,s=i?n.naturalHeight:n.naturalWidth,a=i?n.naturalWidth:n.naturalHeight,l=s/a,c=e.width,d=e.height;e.height*l>e.width?r===3?c=e.height*l:d=e.width/l:r===3?d=e.width/l:c=e.height*l;var f={aspectRatio:l,naturalWidth:s,naturalHeight:a,width:c,height:d};this.canvasData=f,this.limited=r===1||r===2,this.limitCanvas(!0,!0),f.width=Math.min(Math.max(f.width,f.minWidth),f.maxWidth),f.height=Math.min(Math.max(f.height,f.minHeight),f.maxHeight),f.left=(e.width-f.width)/2,f.top=(e.height-f.height)/2,f.oldLeft=f.left,f.oldTop=f.top,this.initialCanvasData=pn({},f)},limitCanvas:function(e,n){var r=this.options,i=this.containerData,s=this.canvasData,a=this.cropBoxData,l=r.viewMode,c=s.aspectRatio,d=this.cropped&&a;if(e){var f=Number(r.minCanvasWidth)||0,p=Number(r.minCanvasHeight)||0;l>1?(f=Math.max(f,i.width),p=Math.max(p,i.height),l===3&&(p*c>f?f=p*c:p=f/c)):l>0&&(f?f=Math.max(f,d?a.width:0):p?p=Math.max(p,d?a.height:0):d&&(f=a.width,p=a.height,p*c>f?f=p*c:p=f/c));var m=Ro({aspectRatio:c,width:f,height:p});f=m.width,p=m.height,s.minWidth=f,s.minHeight=p,s.maxWidth=1/0,s.maxHeight=1/0}if(n)if(l>(d?0:1)){var y=i.width-s.width,E=i.height-s.height;s.minLeft=Math.min(0,y),s.minTop=Math.min(0,E),s.maxLeft=Math.max(0,y),s.maxTop=Math.max(0,E),d&&this.limited&&(s.minLeft=Math.min(a.left,a.left+(a.width-s.width)),s.minTop=Math.min(a.top,a.top+(a.height-s.height)),s.maxLeft=a.left,s.maxTop=a.top,l===2&&(s.width>=i.width&&(s.minLeft=Math.min(0,y),s.maxLeft=Math.max(0,y)),s.height>=i.height&&(s.minTop=Math.min(0,E),s.maxTop=Math.max(0,E))))}else s.minLeft=-s.width,s.minTop=-s.height,s.maxLeft=i.width,s.maxTop=i.height},renderCanvas:function(e,n){var r=this.canvasData,i=this.imageData;if(n){var s=FY({width:i.naturalWidth*Math.abs(i.scaleX||1),height:i.naturalHeight*Math.abs(i.scaleY||1),degree:i.rotate||0}),a=s.width,l=s.height,c=r.width*(a/r.naturalWidth),d=r.height*(l/r.naturalHeight);r.left-=(c-r.width)/2,r.top-=(d-r.height)/2,r.width=c,r.height=d,r.aspectRatio=a/l,r.naturalWidth=a,r.naturalHeight=l,this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCanvas(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,So(this.canvas,pn({width:r.width,height:r.height},Nf({translateX:r.left,translateY:r.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var n=this.canvasData,r=this.imageData,i=r.naturalWidth*(n.width/n.naturalWidth),s=r.naturalHeight*(n.height/n.naturalHeight);pn(r,{width:i,height:s,left:(n.width-i)/2,top:(n.height-s)/2}),So(this.image,pn({width:r.width,height:r.height},Nf(pn({translateX:r.left,translateY:r.top},r)))),e&&this.output()},initCropBox:function(){var e=this.options,n=this.canvasData,r=e.aspectRatio||e.initialAspectRatio,i=Number(e.autoCropArea)||.8,s={width:n.width,height:n.height};r&&(n.height*r>n.width?s.height=s.width/r:s.width=s.height*r),this.cropBoxData=s,this.limitCropBox(!0,!0),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),s.width=Math.max(s.minWidth,s.width*i),s.height=Math.max(s.minHeight,s.height*i),s.left=n.left+(n.width-s.width)/2,s.top=n.top+(n.height-s.height)/2,s.oldLeft=s.left,s.oldTop=s.top,this.initialCropBoxData=pn({},s)},limitCropBox:function(e,n){var r=this.options,i=this.containerData,s=this.canvasData,a=this.cropBoxData,l=this.limited,c=r.aspectRatio;if(e){var d=Number(r.minCropBoxWidth)||0,f=Number(r.minCropBoxHeight)||0,p=l?Math.min(i.width,s.width,s.width+s.left,i.width-s.left):i.width,m=l?Math.min(i.height,s.height,s.height+s.top,i.height-s.top):i.height;d=Math.min(d,i.width),f=Math.min(f,i.height),c&&(d&&f?f*c>d?f=d/c:d=f*c:d?f=d/c:f&&(d=f*c),m*c>p?m=p/c:p=m*c),a.minWidth=Math.min(d,p),a.minHeight=Math.min(f,m),a.maxWidth=p,a.maxHeight=m}n&&(l?(a.minLeft=Math.max(0,s.left),a.minTop=Math.max(0,s.top),a.maxLeft=Math.min(i.width,s.left+s.width)-a.width,a.maxTop=Math.min(i.height,s.top+s.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=i.width-a.width,a.maxTop=i.height-a.height))},renderCropBox:function(){var e=this.options,n=this.containerData,r=this.cropBoxData;(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCropBox(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,e.movable&&e.cropBoxMovable&&Jf(this.face,Zf,r.width>=n.width&&r.height>=n.height?ED:tx),So(this.cropBox,pn({width:r.width,height:r.height},Nf({translateX:r.left,translateY:r.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Tc(this.element,D1,this.getData())}},QY={initPreview:function(){var e=this.element,n=this.crossOrigin,r=this.options.preview,i=n?this.crossOriginUrl:this.url,s=e.alt||"The image to preview",a=document.createElement("img");if(n&&(a.crossOrigin=n),a.src=i,a.alt=s,this.viewBox.appendChild(a),this.viewBoxImage=a,!!r){var l=r;typeof r=="string"?l=e.ownerDocument.querySelectorAll(r):r.querySelector&&(l=[r]),this.previews=l,Gn(l,function(c){var d=document.createElement("img");Jf(c,rp,{width:c.offsetWidth,height:c.offsetHeight,html:c.innerHTML}),n&&(d.crossOrigin=n),d.src=i,d.alt=s,d.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',c.innerHTML="",c.appendChild(d)})}},resetPreview:function(){Gn(this.previews,function(e){var n=j1(e,rp);So(e,{width:n.width,height:n.height}),e.innerHTML=n.html,UY(e,rp)})},preview:function(){var e=this.imageData,n=this.canvasData,r=this.cropBoxData,i=r.width,s=r.height,a=e.width,l=e.height,c=r.left-n.left-e.left,d=r.top-n.top-e.top;!this.cropped||this.disabled||(So(this.viewBoxImage,pn({width:a,height:l},Nf(pn({translateX:-c,translateY:-d},e)))),Gn(this.previews,function(f){var p=j1(f,rp),m=p.width,y=p.height,E=m,C=y,I=1;i&&(I=m/i,C=s*I),s&&C>y&&(I=y/s,E=i*I,C=y),So(f,{width:E,height:C}),So(f.getElementsByTagName("img")[0],pn({width:a*I,height:l*I},Nf(pn({translateX:-c*I,translateY:-d*I},e))))}))}},ZY={bind:function(){var e=this.element,n=this.options,r=this.cropper;Jr(n.cropstart)&&$i(e,k1,n.cropstart),Jr(n.cropmove)&&$i(e,M1,n.cropmove),Jr(n.cropend)&&$i(e,O1,n.cropend),Jr(n.crop)&&$i(e,D1,n.crop),Jr(n.zoom)&&$i(e,L1,n.zoom),$i(r,DS,this.onCropStart=this.cropStart.bind(this)),n.zoomable&&n.zoomOnWheel&&$i(r,jS,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&$i(r,IS,this.onDblclick=this.dblclick.bind(this)),$i(e.ownerDocument,OS,this.onCropMove=this.cropMove.bind(this)),$i(e.ownerDocument,MS,this.onCropEnd=this.cropEnd.bind(this)),n.responsive&&$i(window,LS,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,n=this.options,r=this.cropper;Jr(n.cropstart)&&gs(e,k1,n.cropstart),Jr(n.cropmove)&&gs(e,M1,n.cropmove),Jr(n.cropend)&&gs(e,O1,n.cropend),Jr(n.crop)&&gs(e,D1,n.crop),Jr(n.zoom)&&gs(e,L1,n.zoom),gs(r,DS,this.onCropStart),n.zoomable&&n.zoomOnWheel&&gs(r,jS,this.onWheel,{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&gs(r,IS,this.onDblclick),gs(e.ownerDocument,OS,this.onCropMove),gs(e.ownerDocument,MS,this.onCropEnd),n.responsive&&gs(window,LS,this.onResize)}},JY={resize:function(){if(!this.disabled){var e=this.options,n=this.container,r=this.containerData,i=n.offsetWidth/r.width,s=n.offsetHeight/r.height,a=Math.abs(i-1)>Math.abs(s-1)?i:s;if(a!==1){var l,c;e.restore&&(l=this.getCanvasData(),c=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(Gn(l,function(d,f){l[f]=d*a})),this.setCropBoxData(Gn(c,function(d,f){c[f]=d*a})))}}},dblclick:function(){this.disabled||this.options.dragMode===SD||this.setDragMode(jY(this.dragBox,N1)?AD:nx)},wheel:function(e){var n=this,r=Number(this.options.wheelZoomRatio)||.1,i=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50),e.deltaY?i=e.deltaY>0?1:-1:e.wheelDelta?i=-e.wheelDelta/120:e.detail&&(i=e.detail>0?1:-1),this.zoom(-i*r,e)))},cropStart:function(e){var n=e.buttons,r=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(dt(n)&&n!==1||dt(r)&&r!==0||e.ctrlKey))){var i=this.options,s=this.pointers,a;e.changedTouches?Gn(e.changedTouches,function(l){s[l.identifier]=ip(l)}):s[e.pointerId||0]=ip(e),Object.keys(s).length>1&&i.zoomable&&i.zoomOnTouch?a=TD:a=j1(e.target,Zf),SY.test(a)&&Tc(this.element,k1,{originalEvent:e,action:a})!==!1&&(e.preventDefault(),this.action=a,this.cropping=!1,a===xD&&(this.cropping=!0,lr(this.dragBox,Vg)))}},cropMove:function(e){var n=this.action;if(!(this.disabled||!n)){var r=this.pointers;e.preventDefault(),Tc(this.element,M1,{originalEvent:e,action:n})!==!1&&(e.changedTouches?Gn(e.changedTouches,function(i){pn(r[i.identifier]||{},ip(i,!0))}):pn(r[e.pointerId||0]||{},ip(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var n=this.action,r=this.pointers;e.changedTouches?Gn(e.changedTouches,function(i){delete r[i.identifier]}):delete r[e.pointerId||0],n&&(e.preventDefault(),Object.keys(r).length||(this.action=""),this.cropping&&(this.cropping=!1,cc(this.dragBox,Vg,this.cropped&&this.options.modal)),Tc(this.element,O1,{originalEvent:e,action:n}))}}},eW={change:function(e){var n=this.options,r=this.canvasData,i=this.containerData,s=this.cropBoxData,a=this.pointers,l=this.action,c=n.aspectRatio,d=s.left,f=s.top,p=s.width,m=s.height,y=d+p,E=f+m,C=0,I=0,A=i.width,N=i.height,M=!0,P;!c&&e.shiftKey&&(c=p&&m?p/m:1),this.limited&&(C=s.minLeft,I=s.minTop,A=C+Math.min(i.width,r.width,r.left+r.width),N=I+Math.min(i.height,r.height,r.top+r.height));var q=a[Object.keys(a)[0]],L={x:q.endX-q.startX,y:q.endY-q.startY},T=function(x){switch(x){case El:y+L.x>A&&(L.x=A-y);break;case Tl:d+L.x<C&&(L.x=C-d);break;case ao:f+L.y<I&&(L.y=I-f);break;case Vu:E+L.y>N&&(L.y=N-E);break}};switch(l){case tx:d+=L.x,f+=L.y;break;case El:if(L.x>=0&&(y>=A||c&&(f<=I||E>=N))){M=!1;break}T(El),p+=L.x,p<0&&(l=Tl,p=-p,d-=p),c&&(m=p/c,f+=(s.height-m)/2);break;case ao:if(L.y<=0&&(f<=I||c&&(d<=C||y>=A))){M=!1;break}T(ao),m-=L.y,f+=L.y,m<0&&(l=Vu,m=-m,f-=m),c&&(p=m*c,d+=(s.width-p)/2);break;case Tl:if(L.x<=0&&(d<=C||c&&(f<=I||E>=N))){M=!1;break}T(Tl),p-=L.x,d+=L.x,p<0&&(l=El,p=-p,d-=p),c&&(m=p/c,f+=(s.height-m)/2);break;case Vu:if(L.y>=0&&(E>=N||c&&(d<=C||y>=A))){M=!1;break}T(Vu),m+=L.y,m<0&&(l=ao,m=-m,f-=m),c&&(p=m*c,d+=(s.width-p)/2);break;case Gh:if(c){if(L.y<=0&&(f<=I||y>=A)){M=!1;break}T(ao),m-=L.y,f+=L.y,p=m*c}else T(ao),T(El),L.x>=0?y<A?p+=L.x:L.y<=0&&f<=I&&(M=!1):p+=L.x,L.y<=0?f>I&&(m-=L.y,f+=L.y):(m-=L.y,f+=L.y);p<0&&m<0?(l=Wh,m=-m,p=-p,f-=m,d-=p):p<0?(l=$h,p=-p,d-=p):m<0&&(l=Yh,m=-m,f-=m);break;case $h:if(c){if(L.y<=0&&(f<=I||d<=C)){M=!1;break}T(ao),m-=L.y,f+=L.y,p=m*c,d+=s.width-p}else T(ao),T(Tl),L.x<=0?d>C?(p-=L.x,d+=L.x):L.y<=0&&f<=I&&(M=!1):(p-=L.x,d+=L.x),L.y<=0?f>I&&(m-=L.y,f+=L.y):(m-=L.y,f+=L.y);p<0&&m<0?(l=Yh,m=-m,p=-p,f-=m,d-=p):p<0?(l=Gh,p=-p,d-=p):m<0&&(l=Wh,m=-m,f-=m);break;case Wh:if(c){if(L.x<=0&&(d<=C||E>=N)){M=!1;break}T(Tl),p-=L.x,d+=L.x,m=p/c}else T(Vu),T(Tl),L.x<=0?d>C?(p-=L.x,d+=L.x):L.y>=0&&E>=N&&(M=!1):(p-=L.x,d+=L.x),L.y>=0?E<N&&(m+=L.y):m+=L.y;p<0&&m<0?(l=Gh,m=-m,p=-p,f-=m,d-=p):p<0?(l=Yh,p=-p,d-=p):m<0&&(l=$h,m=-m,f-=m);break;case Yh:if(c){if(L.x>=0&&(y>=A||E>=N)){M=!1;break}T(El),p+=L.x,m=p/c}else T(Vu),T(El),L.x>=0?y<A?p+=L.x:L.y>=0&&E>=N&&(M=!1):p+=L.x,L.y>=0?E<N&&(m+=L.y):m+=L.y;p<0&&m<0?(l=$h,m=-m,p=-p,f-=m,d-=p):p<0?(l=Wh,p=-p,d-=p):m<0&&(l=Gh,m=-m,f-=m);break;case ED:this.move(L.x,L.y),M=!1;break;case TD:this.zoom(zY(a),e),M=!1;break;case xD:if(!L.x||!L.y){M=!1;break}P=OD(this.cropper),d=q.startX-P.left,f=q.startY-P.top,p=s.minWidth,m=s.minHeight,L.x>0?l=L.y>0?Yh:Gh:L.x<0&&(d-=p,l=L.y>0?Wh:$h),L.y<0&&(f-=m),this.cropped||($s(this.cropBox,ni),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}M&&(s.width=p,s.height=m,s.left=d,s.top=f,this.action=l,this.renderCropBox()),Gn(a,function(_){_.startX=_.endX,_.startY=_.endY})}},tW={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&lr(this.dragBox,Vg),$s(this.cropBox,ni),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=pn({},this.initialImageData),this.canvasData=pn({},this.initialCanvasData),this.cropBoxData=pn({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(pn(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),$s(this.dragBox,Vg),lr(this.cropBox,ni)),this},replace:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),n?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,Gn(this.previews,function(r){r.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,$s(this.cropper,CS)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,lr(this.cropper,CS)),this},destroy:function(){var e=this.element;return e[dn]?(e[dn]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.canvasData,i=r.left,s=r.top;return this.moveTo(Hy(e)?e:i+Number(e),Hy(n)?n:s+Number(n))},moveTo:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.canvasData,i=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.movable&&(dt(e)&&(r.left=e,i=!0),dt(n)&&(r.top=n,i=!0),i&&this.renderCanvas(!0)),this},zoom:function(e,n){var r=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(r.width*e/r.naturalWidth,null,n)},zoomTo:function(e,n,r){var i=this.options,s=this.canvasData,a=s.width,l=s.height,c=s.naturalWidth,d=s.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&i.zoomable){var f=c*e,p=d*e;if(Tc(this.element,L1,{ratio:e,oldRatio:a/c,originalEvent:r})===!1)return this;if(r){var m=this.pointers,y=OD(this.cropper),E=m&&Object.keys(m).length?BY(m):{pageX:r.pageX,pageY:r.pageY};s.left-=(f-a)*((E.pageX-y.left-s.left)/a),s.top-=(p-l)*((E.pageY-y.top-s.top)/l)}else uc(n)&&dt(n.x)&&dt(n.y)?(s.left-=(f-a)*((n.x-s.left)/a),s.top-=(p-l)*((n.y-s.top)/l)):(s.left-=(f-a)/2,s.top-=(p-l)/2);s.width=f,s.height=p,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),dt(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var n=this.imageData.scaleY;return this.scale(e,dt(n)?n:1)},scaleY:function(e){var n=this.imageData.scaleX;return this.scale(dt(n)?n:1,e)},scale:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=this.imageData,i=!1;return e=Number(e),n=Number(n),this.ready&&!this.disabled&&this.options.scalable&&(dt(e)&&(r.scaleX=e,i=!0),dt(n)&&(r.scaleY=n,i=!0),i&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.options,r=this.imageData,i=this.canvasData,s=this.cropBoxData,a;if(this.ready&&this.cropped){a={x:s.left-i.left,y:s.top-i.top,width:s.width,height:s.height};var l=r.width/r.naturalWidth;if(Gn(a,function(f,p){a[p]=f/l}),e){var c=Math.round(a.y+a.height),d=Math.round(a.x+a.width);a.x=Math.round(a.x),a.y=Math.round(a.y),a.width=d-a.x,a.height=c-a.y}}else a={x:0,y:0,width:0,height:0};return n.rotatable&&(a.rotate=r.rotate||0),n.scalable&&(a.scaleX=r.scaleX||1,a.scaleY=r.scaleY||1),a},setData:function(e){var n=this.options,r=this.imageData,i=this.canvasData,s={};if(this.ready&&!this.disabled&&uc(e)){var a=!1;n.rotatable&&dt(e.rotate)&&e.rotate!==r.rotate&&(r.rotate=e.rotate,a=!0),n.scalable&&(dt(e.scaleX)&&e.scaleX!==r.scaleX&&(r.scaleX=e.scaleX,a=!0),dt(e.scaleY)&&e.scaleY!==r.scaleY&&(r.scaleY=e.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var l=r.width/r.naturalWidth;dt(e.x)&&(s.left=e.x*l+i.left),dt(e.y)&&(s.top=e.y*l+i.top),dt(e.width)&&(s.width=e.width*l),dt(e.height)&&(s.height=e.height*l),this.setCropBoxData(s)}return this},getContainerData:function(){return this.ready?pn({},this.containerData):{}},getImageData:function(){return this.sized?pn({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,n={};return this.ready&&Gn(["left","top","width","height","naturalWidth","naturalHeight"],function(r){n[r]=e[r]}),n},setCanvasData:function(e){var n=this.canvasData,r=n.aspectRatio;return this.ready&&!this.disabled&&uc(e)&&(dt(e.left)&&(n.left=e.left),dt(e.top)&&(n.top=e.top),dt(e.width)?(n.width=e.width,n.height=e.width/r):dt(e.height)&&(n.height=e.height,n.width=e.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,n;return this.ready&&this.cropped&&(n={left:e.left,top:e.top,width:e.width,height:e.height}),n||{}},setCropBoxData:function(e){var n=this.cropBoxData,r=this.options.aspectRatio,i,s;return this.ready&&this.cropped&&!this.disabled&&uc(e)&&(dt(e.left)&&(n.left=e.left),dt(e.top)&&(n.top=e.top),dt(e.width)&&e.width!==n.width&&(i=!0,n.width=e.width),dt(e.height)&&e.height!==n.height&&(s=!0,n.height=e.height),r&&(i?n.height=n.width/r:s&&(n.width=n.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var n=this.canvasData,r=HY(this.image,this.imageData,n,e);if(!this.cropped)return r;var i=this.getData(e.rounded),s=i.x,a=i.y,l=i.width,c=i.height,d=r.width/Math.floor(n.naturalWidth);d!==1&&(s*=d,a*=d,l*=d,c*=d);var f=l/c,p=Ro({aspectRatio:f,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),m=Ro({aspectRatio:f,width:e.minWidth||0,height:e.minHeight||0},"cover"),y=Ro({aspectRatio:f,width:e.width||(d!==1?r.width:l),height:e.height||(d!==1?r.height:c)}),E=y.width,C=y.height;E=Math.min(p.width,Math.max(m.width,E)),C=Math.min(p.height,Math.max(m.height,C));var I=document.createElement("canvas"),A=I.getContext("2d");I.width=Ec(E),I.height=Ec(C),A.fillStyle=e.fillColor||"transparent",A.fillRect(0,0,E,C);var N=e.imageSmoothingEnabled,M=N===void 0?!0:N,P=e.imageSmoothingQuality;A.imageSmoothingEnabled=M,P&&(A.imageSmoothingQuality=P);var q=r.width,L=r.height,T=s,_=a,x,S,k,j,O,G;T<=-l||T>q?(T=0,x=0,k=0,O=0):T<=0?(k=-T,T=0,x=Math.min(q,l+T),O=x):T<=q&&(k=0,x=Math.min(l,q-T),O=x),x<=0||_<=-c||_>L?(_=0,S=0,j=0,G=0):_<=0?(j=-_,_=0,S=Math.min(L,c+_),G=S):_<=L&&(j=0,S=Math.min(c,L-_),G=S);var J=[T,_,x,S];if(O>0&&G>0){var z=E/l;J.push(k*z,j*z,O*z,G*z)}return A.drawImage.apply(A,[r].concat(wD(J.map(function(U){return Math.floor(Ec(U))})))),I},setAspectRatio:function(e){var n=this.options;return!this.disabled&&!Hy(e)&&(n.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var n=this.options,r=this.dragBox,i=this.face;if(this.ready&&!this.disabled){var s=e===nx,a=n.movable&&e===AD;e=s||a?e:SD,n.dragMode=e,Jf(r,Zf,e),cc(r,N1,s),cc(r,I1,a),n.cropBoxMovable||(Jf(i,Zf,e),cc(i,N1,s),cc(i,I1,a))}return this}},nW=Xs.Cropper,kD=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(pY(this,t),!e||!NY.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=pn({},US,uc(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return gY(t,[{key:"init",value:function(){var n=this.element,r=n.tagName.toLowerCase(),i;if(!n[dn]){if(n[dn]=this,r==="img"){if(this.isImg=!0,i=n.getAttribute("src")||"",this.originalUrl=i,!i)return;i=n.src}else r==="canvas"&&window.HTMLCanvasElement&&(i=n.toDataURL());this.load(i)}}},{key:"load",value:function(n){var r=this;if(n){this.url=n,this.imageData={};var i=this.element,s=this.options;if(!s.rotatable&&!s.scalable&&(s.checkOrientation=!1),!s.checkOrientation||!window.ArrayBuffer){this.clone();return}if(RY.test(n)){CY.test(n)?this.read($Y(n)):this.clone();return}var a=new XMLHttpRequest,l=this.clone.bind(this);this.reloading=!0,this.xhr=a,a.onabort=l,a.onerror=l,a.ontimeout=l,a.onprogress=function(){a.getResponseHeader("content-type")!==PS&&a.abort()},a.onload=function(){r.read(a.response)},a.onloadend=function(){r.reloading=!1,r.xhr=null},s.checkCrossOrigin&&zS(n)&&i.crossOrigin&&(n=BS(n)),a.open("GET",n,!0),a.responseType="arraybuffer",a.withCredentials=i.crossOrigin==="use-credentials",a.send()}}},{key:"read",value:function(n){var r=this.options,i=this.imageData,s=WY(n),a=0,l=1,c=1;if(s>1){this.url=YY(n,PS);var d=XY(s);a=d.rotate,l=d.scaleX,c=d.scaleY}r.rotatable&&(i.rotate=a),r.scalable&&(i.scaleX=l,i.scaleY=c),this.clone()}},{key:"clone",value:function(){var n=this.element,r=this.url,i=n.crossOrigin,s=r;this.options.checkCrossOrigin&&zS(r)&&(i||(i="anonymous"),s=BS(r)),this.crossOrigin=i,this.crossOriginUrl=s;var a=document.createElement("img");i&&(a.crossOrigin=i),a.src=s||r,a.alt=n.alt||"The image to crop",this.image=a,a.onload=this.start.bind(this),a.onerror=this.stop.bind(this),lr(a,NS),n.parentNode.insertBefore(a,n.nextSibling)}},{key:"start",value:function(){var n=this,r=this.image;r.onload=null,r.onerror=null,this.sizing=!0;var i=Xs.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Xs.navigator.userAgent),s=function(d,f){pn(n.imageData,{naturalWidth:d,naturalHeight:f,aspectRatio:d/f}),n.initialImageData=pn({},n.imageData),n.sizing=!1,n.sized=!0,n.build()};if(r.naturalWidth&&!i){s(r.naturalWidth,r.naturalHeight);return}var a=document.createElement("img"),l=document.body||document.documentElement;this.sizingImage=a,a.onload=function(){s(a.width,a.height),i||l.removeChild(a)},a.src=r.src,i||(a.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",l.appendChild(a))}},{key:"stop",value:function(){var n=this.image;n.onload=null,n.onerror=null,n.parentNode.removeChild(n),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var n=this.element,r=this.options,i=this.image,s=n.parentNode,a=document.createElement("div");a.innerHTML=IY;var l=a.querySelector(".".concat(dn,"-container")),c=l.querySelector(".".concat(dn,"-canvas")),d=l.querySelector(".".concat(dn,"-drag-box")),f=l.querySelector(".".concat(dn,"-crop-box")),p=f.querySelector(".".concat(dn,"-face"));this.container=s,this.cropper=l,this.canvas=c,this.dragBox=d,this.cropBox=f,this.viewBox=l.querySelector(".".concat(dn,"-view-box")),this.face=p,c.appendChild(i),lr(n,ni),s.insertBefore(l,n.nextSibling),$s(i,NS),this.initPreview(),this.bind(),r.initialAspectRatio=Math.max(0,r.initialAspectRatio)||NaN,r.aspectRatio=Math.max(0,r.aspectRatio)||NaN,r.viewMode=Math.max(0,Math.min(3,Math.round(r.viewMode)))||0,lr(f,ni),r.guides||lr(f.getElementsByClassName("".concat(dn,"-dashed")),ni),r.center||lr(f.getElementsByClassName("".concat(dn,"-center")),ni),r.background&&lr(l,"".concat(dn,"-bg")),r.highlight||lr(p,xY),r.cropBoxMovable&&(lr(p,I1),Jf(p,Zf,tx)),r.cropBoxResizable||(lr(f.getElementsByClassName("".concat(dn,"-line")),ni),lr(f.getElementsByClassName("".concat(dn,"-point")),ni)),this.render(),this.ready=!0,this.setDragMode(r.dragMode),r.autoCrop&&this.crop(),this.setData(r.data),Jr(r.ready)&&$i(n,kS,r.ready,{once:!0}),Tc(n,kS)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var n=this.cropper.parentNode;n&&n.removeChild(this.cropper),$s(this.element,ni)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=nW,t}},{key:"setDefaults",value:function(n){pn(US,uc(n)&&n)}}])}();pn(kD.prototype,KY,QY,ZY,JY,eW,tW);var Dl=function(){return Dl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Dl.apply(this,arguments)};function Gy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}var rW=["aspectRatio","autoCrop","autoCropArea","background","center","checkCrossOrigin","checkOrientation","cropBoxMovable","cropBoxResizable","data","dragMode","guides","highlight","initialAspectRatio","minCanvasHeight","minCanvasWidth","minContainerHeight","minContainerWidth","minCropBoxHeight","minCropBoxWidth","modal","movable","preview","responsive","restore","rotatable","scalable","toggleDragModeOnDblclick","viewMode","wheelZoomRatio","zoomOnTouch","zoomOnWheel","zoomable","cropstart","cropmove","cropend","crop","zoom","ready"],iW={opacity:0,maxWidth:"100%"},sW=Ol.forwardRef(function(t,e){var n=Gy(t,[]),r=n.dragMode,i=r===void 0?"crop":r,s=n.src,a=n.style,l=n.className,c=n.crossOrigin,d=n.scaleX,f=n.scaleY,p=n.enable,m=n.zoomTo,y=n.rotateTo,E=n.alt,C=E===void 0?"picture":E,I=n.ready,A=n.onInitialized,N=Gy(n,["dragMode","src","style","className","crossOrigin","scaleX","scaleY","enable","zoomTo","rotateTo","alt","ready","onInitialized"]),M={scaleY:f,scaleX:d,enable:p,zoomTo:m,rotateTo:y},P=function(){for(var L=[],T=0;T<arguments.length;T++)L[T]=arguments[T];var _=K.useRef(null);return Ol.useEffect(function(){L.forEach(function(x){x&&(typeof x=="function"?x(_.current):x.current=_.current)})},[L]),_}(e,K.useRef(null));K.useEffect(function(){var L;!((L=P.current)===null||L===void 0)&&L.cropper&&typeof m=="number"&&P.current.cropper.zoomTo(m)},[n.zoomTo]),K.useEffect(function(){var L;!((L=P.current)===null||L===void 0)&&L.cropper&&s!==void 0&&P.current.cropper.reset().clear().replace(s)},[s]),K.useEffect(function(){if(P.current!==null){var L=new kD(P.current,Dl(Dl({dragMode:i},N),{ready:function(T){T.currentTarget!==null&&function(_,x){x===void 0&&(x={});var S=x.enable,k=S===void 0||S,j=x.scaleX,O=j===void 0?1:j,G=x.scaleY,J=G===void 0?1:G,z=x.zoomTo,U=z===void 0?0:z,Q=x.rotateTo;k?_.enable():_.disable(),_.scaleX(O),_.scaleY(J),Q!==void 0&&_.rotateTo(Q),U>0&&_.zoomTo(U)}(T.currentTarget.cropper,M),I&&I(T)}}));A&&A(L)}return function(){var T,_;(_=(T=P.current)===null||T===void 0?void 0:T.cropper)===null||_===void 0||_.destroy()}},[P]);var q=function(L){return rW.reduce(function(T,_){var x=T,S=_;return x[S],Gy(x,[typeof S=="symbol"?S:S+""])},L)}(Dl(Dl({},N),{crossOrigin:c,src:s,alt:C}));return Ol.createElement("div",{style:a,className:l},Ol.createElement("img",Dl({},q,{style:iW,ref:P})))});const LD=({isOpen:t,onClose:e,onImageReady:n})=>{const[r,i]=K.useState(null),[s,a]=K.useState(!1),[l,c]=K.useState(null),d=K.useRef(null),f=K.useRef(null);K.useEffect(()=>{const C=f.current;C&&(t?C.showModal():C.close())},[t]);const p=()=>{i(null),a(!1),c(null)},m=()=>{p(),e()},y=async C=>{if(c(null),C.target.files&&C.target.files.length>0){const I=C.target.files[0];a(!0);try{const A=await e$(I,{maxSizeMB:1,maxWidthOrHeight:1024,useWebWorker:!0}),N=new FileReader;N.onload=()=>{i(N.result),a(!1)},N.readAsDataURL(A)}catch(A){c(A instanceof Error?A.message:"Image processing failed."),a(!1)}}},E=async()=>{var I;if(!((I=d.current)!=null&&I.cropper)){c("Cropper not available.");return}a(!0),c(null);const C=d.current.cropper.getCroppedCanvas({width:256,height:256,imageSmoothingQuality:"high"}).toDataURL("image/jpeg",.9);try{await n(C),m()}catch(A){c(A instanceof Error?A.message:"Upload failed. Please try again.")}finally{a(!1)}};return v.jsxs("dialog",{ref:f,onClose:m,className:"bg-zinc-800 text-zinc-200 p-0 rounded-lg shadow-2xl w-full max-w-md border border-zinc-700 backdrop:bg-black/50",children:[v.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-zinc-700",children:[v.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Upload Portrait"}),v.jsx("button",{onClick:m,className:"p-1 rounded-full hover:bg-zinc-700 transition-colors",children:v.jsx(kv,{className:"w-5 h-5"})})]}),v.jsxs("div",{className:"p-6",children:[r?v.jsx("div",{children:v.jsx(sW,{ref:d,src:r,style:{height:400,width:"100%"},aspectRatio:1/1,guides:!1,viewMode:1,autoCropArea:.8,movable:!0,zoomable:!0,background:!1,className:"bg-zinc-900 rounded-md"})}):v.jsxs("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-zinc-600 rounded-lg p-8 text-center",children:[v.jsx(Lv,{className:"w-12 h-12 text-zinc-500 mb-2"}),v.jsx("label",{htmlFor:"image-upload-input",className:"cursor-pointer bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition-colors duration-200",children:"Select an Image"}),v.jsx("input",{id:"image-upload-input",type:"file",accept:"image/*",onChange:y,className:"hidden"}),v.jsx("p",{className:"text-xs text-zinc-400 mt-2",children:"PNG, JPG, WEBP up to 1MB."}),s&&v.jsx("p",{className:"mt-2 text-zinc-400 animate-pulse",children:"Processing..."})]}),l&&v.jsx("p",{className:"text-red-400 text-sm mt-4",children:l})]}),v.jsxs("footer",{className:"flex justify-end gap-2 p-4 bg-zinc-900/50 border-t border-zinc-700",children:[v.jsx("button",{onClick:m,disabled:s,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition-colors disabled:bg-zinc-500 disabled:cursor-not-allowed",children:"Cancel"}),v.jsxs("button",{onClick:E,disabled:s||!r,className:"flex items-center gap-2 bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded transition-colors disabled:bg-zinc-600 disabled:cursor-not-allowed",children:[v.jsx(p$,{className:"w-5 h-5"}),s?"Saving...":"Save Cropped Image"]})]})]})},aW={name:"",level:0,school:"Evocation",castingTime:"1 Action",range:"60 feet",components:"V, S",duration:"Instantaneous",description:""},oW=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=K.useState(t),s=(d,f)=>{i(p=>({...p,[d]:f}))},a=d=>{d.preventDefault(),r.name.trim()&&e(r)},l=["Abjuration","Conjuration","Divination","Enchantment","Evocation","Illusion","Necromancy","Transmutation"],c="w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent";return v.jsxs("form",{onSubmit:a,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-6",children:[v.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Spell":"Add New Spell"}),v.jsx("input",{type:"text",placeholder:"Spell Name",value:r.name,onChange:d=>s("name",d.target.value),required:!0,className:c}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[v.jsx("input",{type:"number",placeholder:"Level",value:r.level,onChange:d=>s("level",parseInt(d.target.value)),min:"0",max:"9",className:c}),v.jsx("select",{value:r.school,onChange:d=>s("school",d.target.value),className:c,children:l.map(d=>v.jsx("option",{value:d,children:d},d))})]}),v.jsx("textarea",{placeholder:"Description",value:r.description,onChange:d=>s("description",d.target.value),rows:4,className:`${c} resize-y`}),v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition",children:"Cancel"}),v.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition",children:"Save Spell"})]})]})},lW=({spell:t,onEdit:e,onDelete:n,onToggleExpand:r,isExpanded:i})=>v.jsxs("div",{className:"bg-card/50 rounded-lg",children:[v.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-3",onClick:r,children:[v.jsx("h4",{className:"font-bold text-accent",children:t.name}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("span",{className:"text-sm text-muted-foreground capitalize",children:t.school}),v.jsx("button",{onClick:s=>{s.stopPropagation(),e()},className:"text-muted-foreground hover:text-accent p-1",children:v.jsx(Ba,{className:"w-4 h-4"})}),v.jsx("button",{onClick:s=>{s.stopPropagation(),n()},className:"text-muted-foreground hover:text-destructive p-1",children:v.jsx(Js,{className:"w-4 h-4"})})]})]}),i&&v.jsxs("div",{className:"mt-2 pt-3 border-t border-border/50 space-y-2 text-sm p-3 bg-muted/30",children:[v.jsxs("p",{children:[v.jsx("strong",{className:"text-muted-foreground",children:"Casting Time:"})," ",t.castingTime]}),v.jsxs("p",{children:[v.jsx("strong",{className:"text-muted-foreground",children:"Range:"})," ",t.range]}),v.jsxs("p",{children:[v.jsx("strong",{className:"text-muted-foreground",children:"Components:"})," ",t.components]}),v.jsxs("p",{children:[v.jsx("strong",{className:"text-muted-foreground",children:"Duration:"})," ",t.duration]}),v.jsx("p",{className:"text-foreground mt-2 whitespace-pre-wrap",children:t.description})]})]}),uW=()=>{const{character:t,updateCharacter:e}=ea(),[n,r]=K.useState(null),[i,s]=K.useState({});if(!t)return null;const a=p=>{let m;if("id"in p)m=t.spells.map(y=>y.id===p.id?p:y);else{const y={...p,id:`spell_${Date.now()}`};m=[...t.spells,y]}e({spells:m}),r(null)},l=p=>{if(window.confirm("Are you sure you want to delete this spell?")){const m=t.spells.filter(y=>y.id!==p);e({spells:m})}},c=p=>{s(m=>({...m,[p]:!m[p]}))},d=K.useMemo(()=>t.spells.reduce((p,m)=>(p[m.level]=[...p[m.level]||[],m],p[m.level].sort((y,E)=>y.name.localeCompare(E.name)),p),{}),[t.spells]),f=Object.keys(d).map(Number).sort((p,m)=>p-m);return v.jsxs("div",{className:"bg-card/80 p-4 rounded-lg border border-border flex flex-col h-full",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Spellbook"}),v.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[v.jsx(iu,{className:"w-5 h-5"})," Add Spell"]})]}),n&&v.jsx(oW,{initialData:n==="new"?aW:n,onSave:a,onCancel:()=>r(null)}),v.jsxs("div",{className:"space-y-6 overflow-y-auto pr-2 -mr-2",children:[t.spells.length===0&&!n&&v.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"This character knows no spells. Add one to get started!"}),f.map(p=>v.jsxs("div",{children:[v.jsx("h4",{className:"text-xl font-serif text-foreground border-b border-border pb-1 mb-3",children:p===0?"Cantrips":`Level ${p}`}),v.jsx("div",{className:"space-y-3",children:d[p].map(m=>v.jsx(lW,{spell:m,isExpanded:!!i[m.id],onToggleExpand:()=>c(m.id),onEdit:()=>r(m),onDelete:()=>l(m.id)},m.id))})]},p))]})]})},cW={name:"",description:""},hW=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=K.useState(t),s=(l,c)=>{i(d=>({...d,[l]:c}))},a=l=>{l.preventDefault(),r.name.trim()&&e(r)};return v.jsxs("form",{onSubmit:a,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-4",children:[v.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Feature":"Add New Feature"}),v.jsx("input",{type:"text",placeholder:"Feature or Trait Name",value:r.name,onChange:l=>s("name",l.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent"}),v.jsx("textarea",{placeholder:"Description",value:r.description,onChange:l=>s("description",l.target.value),rows:4,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent resize-y"}),v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition",children:"Cancel"}),v.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition",children:"Save Feature"})]})]})},fW=()=>{const{character:t,updateCharacter:e}=ea(),[n,r]=K.useState(null),[i,s]=K.useState({});if(!t)return null;const a=f=>{let p;if("id"in f)p=t.featuresAndTraits.map(m=>m.id===f.id?f:m);else{const m={...f,id:`feat_${Date.now()}`};p=[...t.featuresAndTraits,m]}e({featuresAndTraits:p}),r(null)},l=f=>{if(window.confirm("Are you sure you want to delete this feature?")){const p=t.featuresAndTraits.filter(m=>m.id!==f);e({featuresAndTraits:p})}},c=f=>{s(p=>({...p,[f]:!p[f]}))},d=K.useMemo(()=>[...t.featuresAndTraits].sort((f,p)=>f.name.localeCompare(p.name)),[t.featuresAndTraits]);return v.jsxs("div",{className:"bg-card/80 p-4 rounded-lg border border-border flex flex-col h-full",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Features & Traits"}),v.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[v.jsx(iu,{className:"w-5 h-5"})," Add Feature"]})]}),n&&v.jsx(hW,{initialData:n==="new"?cW:n,onSave:a,onCancel:()=>r(null)}),v.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[d.length===0&&!n&&v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("p",{className:"text-center text-muted-foreground text-sm py-4",children:"No features or traits have been added."})}),d.map(f=>v.jsxs("div",{className:"bg-card/50 rounded-lg text-sm",children:[v.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer",onClick:()=>c(f.id),children:[v.jsx("span",{className:"font-semibold text-accent",children:f.name}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("button",{onClick:p=>{p.stopPropagation(),r(f)},className:"text-muted-foreground hover:text-accent p-1",children:v.jsx(Ba,{className:"w-4 h-4"})}),v.jsx("button",{onClick:p=>{p.stopPropagation(),l(f.id)},className:"text-muted-foreground hover:text-destructive p-1",children:v.jsx(Js,{className:"w-4 h-4"})})]})]}),i[f.id]&&v.jsx("div",{className:"p-3 border-t border-border/50 bg-muted/30",children:v.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:f.description})})]},f.id))]})]})},dW={name:"",quantity:1,description:"",equipped:!1},mW=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=K.useState(t),s=(d,f)=>{i(p=>({...p,[d]:f}))},a=d=>{d.preventDefault(),r.name.trim()&&e(r)},l="w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent text-sm",c="block text-xs font-medium text-muted-foreground mb-1";return v.jsxs("form",{onSubmit:a,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-4",children:[v.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Item":"Add New Item"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[v.jsxs("div",{className:"md:col-span-2",children:[v.jsx("label",{htmlFor:"name",className:c,children:"Item Name"}),v.jsx("input",{id:"name",type:"text",placeholder:"e.g., Longsword",value:r.name,onChange:d=>s("name",d.target.value),required:!0,className:l})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"quantity",className:c,children:"Quantity"}),v.jsx("input",{id:"quantity",type:"number",value:r.quantity,onChange:d=>s("quantity",parseInt(d.target.value)||1),min:"1",className:`${l} text-center`})]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"description",className:c,children:"Description"}),v.jsx("textarea",{id:"description",value:r.description,onChange:d=>s("description",d.target.value),className:l,rows:3})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"armorType",className:c,children:"Armor Type"}),v.jsxs("select",{id:"armorType",value:r.armorType||"",onChange:d=>s("armorType",d.target.value||void 0),className:l,children:[v.jsx("option",{value:"",children:"Not Armor"}),v.jsx("option",{value:"light",children:"Light Armor"}),v.jsx("option",{value:"medium",children:"Medium Armor"}),v.jsx("option",{value:"heavy",children:"Heavy Armor"}),v.jsx("option",{value:"shield",children:"Shield"})]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"armorClass",className:c,children:"Armor Class (AC)"}),v.jsx("input",{id:"armorClass",type:"number",placeholder:"e.g., 14",value:r.armorClass||"",onChange:d=>s("armorClass",parseInt(d.target.value)||void 0),className:l})]})]}),v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition text-sm",children:"Cancel"}),v.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition text-sm",children:"Save Item"})]})]})},FS=({title:t,items:e,expandedItem:n,onToggleExpand:r,onEdit:i,onDelete:s})=>v.jsxs("div",{children:[v.jsx("h4",{className:"text-base font-semibold text-foreground border-b border-border pb-2 mb-3",children:t}),v.jsxs("div",{className:"space-y-2",children:[e.length===0&&v.jsx("p",{className:"text-center text-muted-foreground text-xs py-2",children:"Empty"}),e.map(a=>v.jsxs("div",{className:"bg-card/50 rounded-lg text-sm",children:[v.jsxs("div",{className:"p-3 flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[v.jsx("button",{onClick:()=>r(a.id),className:"flex-shrink-0 text-muted-foreground hover:text-foreground",children:v.jsx(v$,{className:`w-5 h-5 transition-transform ${n===a.id?"rotate-180":""}`})}),v.jsxs("p",{className:"font-semibold text-accent truncate",title:a.name,children:[a.name," ",v.jsxs("span",{className:"text-xs text-muted-foreground",children:["(x",a.quantity,")"]})]})]}),v.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[v.jsx("button",{onClick:()=>i(a),className:"text-muted-foreground hover:text-accent p-1",children:v.jsx(Ba,{className:"w-4 h-4"})}),v.jsx("button",{onClick:()=>s(a.id),className:"text-muted-foreground hover:text-destructive p-1",children:v.jsx(Js,{className:"w-4 h-4"})})]})]}),n===a.id&&v.jsxs("div",{className:"p-3 border-t border-border/50 bg-muted/30 space-y-2",children:[a.armorType&&v.jsxs("p",{children:[v.jsxs("strong",{className:"text-muted-foreground capitalize",children:[a.armorType," Armor"]}),a.armorClass?v.jsxs("span",{className:"text-foreground",children:[" (AC: ",a.armorClass,")"]}):""]}),v.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:a.description||"No description."})]})]},a.id))]})]}),pW=()=>{const{character:t,updateCharacter:e}=ea(),[n,r]=K.useState(null),[i,s]=K.useState(null),a=p=>{let m;if("id"in p)m=(t.equipment||[]).map(y=>y.id===p.id?p:y);else{const y={...p,id:`item_${Date.now()}`};m=[...t.equipment||[],y]}e({equipment:m}),r(null)},l=p=>{if(window.confirm("Are you sure you want to delete this item?")){const m=(t.equipment||[]).filter(y=>y.id!==p);e({equipment:m})}},c=p=>{s(m=>m===p?null:p)},{equippableItems:d,backpackItems:f}=K.useMemo(()=>{const p=[],m=[];return(t.equipment||[]).forEach(y=>{y.armorType?p.push(y):m.push(y)}),{equippableItems:p.sort((y,E)=>y.name.localeCompare(E.name)),backpackItems:m.sort((y,E)=>y.name.localeCompare(E.name))}},[t.equipment]);return v.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Inventory"}),v.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[v.jsx(iu,{className:"w-5 h-5"})," Add Item"]})]}),n&&v.jsx(mW,{initialData:n==="new"?dW:n,onSave:a,onCancel:()=>r(null)}),v.jsxs("div",{className:"space-y-6",children:[v.jsx(FS,{title:"Equippable Gear",items:d,expandedItem:i,onToggleExpand:c,onEdit:r,onDelete:l}),v.jsx(FS,{title:"Backpack",items:f,expandedItem:i,onToggleExpand:c,onEdit:r,onDelete:l})]})]})},gW={name:"",bonus:"+0",damage:"1d4"},vW=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=K.useState(t),s=(l,c)=>{i(d=>({...d,[l]:c}))},a=l=>{l.preventDefault(),r.name.trim()&&e(r)};return v.jsxs("form",{onSubmit:a,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-4",children:[v.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Attack":"Add New Attack"}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[v.jsx("input",{type:"text",placeholder:"Attack Name",value:r.name,onChange:l=>s("name",l.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent sm:col-span-1"}),v.jsx("input",{type:"text",placeholder:"e.g. +5",value:r.bonus,onChange:l=>s("bonus",l.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent text-center"}),v.jsx("input",{type:"text",placeholder:"e.g. (2d6)+(1d4)+3",value:r.damage,onChange:l=>s("damage",l.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent text-center"})]}),v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition",children:"Cancel"}),v.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition",children:"Save Attack"})]})]})},yW=()=>{const{character:t,updateCharacter:e}=ea(),[n,r]=K.useState(null);if(!t)return null;const i=l=>{let c;if("id"in l)c=t.attacks.map(d=>d.id===l.id?l:d);else{const d={...l,id:`attack_${Date.now()}`};c=[...t.attacks,d]}e({attacks:c}),r(null)},s=l=>{if(window.confirm("Are you sure you want to delete this attack?")){const c=t.attacks.filter(d=>d.id!==l);e({attacks:c})}},a=K.useMemo(()=>[...t.attacks||[]].sort((l,c)=>l.name.localeCompare(c.name)),[t.attacks]);return v.jsxs("div",{className:"bg-card/80 p-4 rounded-lg border border-border flex flex-col h-full",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Attacks & Cantrips"}),v.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[v.jsx(iu,{className:"w-5 h-5"})," Add Attack"]})]}),n&&v.jsx(vW,{initialData:n==="new"?gW:n,onSave:i,onCancel:()=>r(null)}),v.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[a.length===0&&!n&&v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("p",{className:"text-center text-muted-foreground text-sm py-4",children:"No attacks have been defined."})}),a.map(l=>v.jsx("div",{className:"bg-card/50 rounded-lg text-sm",children:v.jsxs("div",{className:"grid grid-cols-6 items-center p-3",children:[v.jsx("span",{className:"font-semibold text-accent col-span-3",children:l.name}),v.jsx("span",{className:"font-mono text-foreground col-span-1 text-center",children:l.bonus}),v.jsx("span",{className:"font-mono text-foreground col-span-1 text-center",children:l.damage}),v.jsxs("div",{className:"flex items-center gap-2 justify-end col-span-1",children:[v.jsx("button",{onClick:()=>r(l),className:"text-muted-foreground hover:text-accent p-1",children:v.jsx(Ba,{className:"w-4 h-4"})}),v.jsx("button",{onClick:()=>s(l.id),className:"text-muted-foreground hover:text-destructive p-1",children:v.jsx(Js,{className:"w-4 h-4"})})]})]})},l.id))]})]})},_W={name:"",max:1},bW=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=K.useState(t),s=(l,c)=>{i(d=>({...d,[l]:c}))},a=l=>{l.preventDefault(),r.name.trim()&&e(r)};return v.jsxs("form",{onSubmit:a,className:"bg-card/80 p-4 rounded-lg border border-accent/30 space-y-4 mb-4",children:[v.jsx("h3",{className:"font-cinzel text-lg text-accent",children:"id"in t?"Edit Resource":"Add New Resource"}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[v.jsx("input",{type:"text",placeholder:"Resource Name",value:r.name,onChange:l=>s("name",l.target.value),required:!0,className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent sm:col-span-2"}),v.jsx("input",{type:"number",placeholder:"Max",value:r.max,onChange:l=>s("max",parseInt(l.target.value)||1),min:"1",className:"w-full bg-input p-2 rounded border border-border focus:ring-ring focus:border-accent text-center"})]}),v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx("button",{type:"button",onClick:n,className:"bg-secondary hover:bg-secondary/80 text-secondary-foreground font-bold py-2 px-4 rounded transition",children:"Cancel"}),v.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded transition",children:"Save"})]})]})},wW=({character:t,onUpdateCharacter:e})=>{const[n,r]=K.useState(null),i=a=>{let l;if("id"in a)l=(t.customResources||[]).map(c=>c.id===a.id?{...c,name:a.name,max:a.max}:c);else{const c={...a,id:`resource_${Date.now()}`,used:0};l=[...t.customResources||[],c]}e({customResources:l}),r(null)},s=a=>{if(window.confirm("Are you sure you want to delete this resource?")){const l=(t.customResources||[]).filter(c=>c.id!==a);e({customResources:l})}};return v.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h3",{className:"text-lg font-cinzel text-accent",children:"Other Resources"}),v.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition",children:[v.jsx(iu,{className:"w-5 h-5"})," Add Resource"]})]}),n&&v.jsx(bW,{initialData:n==="new"?_W:n,onSave:i,onCancel:()=>r(null)}),v.jsxs("div",{className:"space-y-2",children:[(t.customResources||[]).length===0&&!n&&v.jsx("p",{className:"text-center text-muted-foreground text-sm py-4",children:"No custom resources defined."}),(t.customResources||[]).map(a=>v.jsxs("div",{className:"bg-card/50 rounded-lg text-sm p-3 flex items-center justify-between",children:[v.jsx("span",{className:"font-semibold text-accent",children:a.name}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("span",{className:"text-muted-foreground",children:["Max: ",a.max]}),v.jsx("button",{onClick:()=>r(a),className:"text-muted-foreground hover:text-accent p-1",children:v.jsx(Ba,{className:"w-4 h-4"})}),v.jsx("button",{onClick:()=>s(a.id),className:"text-muted-foreground hover:text-destructive p-1",children:v.jsx(Js,{className:"w-4 h-4"})})]})]},a.id))]})]})},sp=({label:t,value:e,subValue:n,className:r})=>v.jsxs("div",{className:`flex flex-col items-center justify-center p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-center ${r}`,children:[v.jsx("span",{className:"text-2xl sm:text-3xl font-bold font-mono text-white",children:e}),v.jsx("span",{className:"text-xs uppercase tracking-wider text-zinc-400 mt-1",children:t}),n&&v.jsx("span",{className:"text-xs text-zinc-500",children:n})]}),Wl=t=>Math.floor((t-10)/2),bs=t=>t>=0?`+${t}`:String(t),iX=t=>{if(!t||typeof t!="string")return{total:0,pretty:"Invalid input"};const e=t.replace(/[\s()]/g,"").split("+");let n=0;const r=[],i=/(\d+)d(\d+)/i;for(const s of e){if(!s)continue;const a=s.match(i);if(a){const l=parseInt(a[1],10),c=parseInt(a[2],10);if(isNaN(l)||isNaN(c))continue;const d=Array.from({length:l},()=>Math.floor(Math.random()*c)+1),f=d.reduce((p,m)=>p+m,0);n+=f,r.push(`[${d.join("+")}]`)}else{const l=parseInt(s,10);isNaN(l)||(n+=l,r.push(String(l)))}}return r.length===0?{total:0,pretty:"Invalid Format"}:{total:n,pretty:`${r.join(" + ")} = ${n}`}},xW=t=>{if(typeof t!="string")return null;const e=parseInt(t,10);return isNaN(e)?null:`${Math.round(e/5*1.5)}m`},EW=({companion:t,onEdit:e,onDelete:n,onDuplicate:r,onView:i,readOnly:s=!1})=>{const[a,l]=K.useState(!1),c=K.useRef(null),d=t.hp.max>0?t.hp.current/t.hp.max*100:0,f=d>50?"bg-green-500":d>25?"bg-yellow-500":"bg-red-500",m=Wl(t.abilityScores.dexterity),y=xW(t.speed);return K.useEffect(()=>{const E=C=>{c.current&&!c.current.contains(C.target)&&l(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),s?v.jsxs("div",{onClick:i,className:"bg-card-alt border border-border rounded-lg shadow-lg transition-all duration-300 relative overflow-hidden group cursor-pointer hover:shadow-accent/20 hover:border-accent/30 hover:scale-[1.02]",role:"button",tabIndex:0,onKeyDown:E=>(E.key==="Enter"||E.key===" ")&&i&&i(),children:[v.jsx("div",{className:"w-full aspect-video bg-muted overflow-hidden",children:t.imageUrl?v.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}):v.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted/50",children:v.jsx(jg,{className:"w-16 h-16 text-muted-foreground/30"})})}),v.jsxs("div",{className:"p-4",children:[v.jsx("h3",{className:"text-xl font-cinzel font-bold text-accent truncate",children:t.name}),v.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:t.type||"Companion"}),v.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-center",children:[v.jsxs("div",{title:"Hit Points",children:[v.jsx(mD,{className:"w-6 h-6 mx-auto text-destructive/80 mb-1"}),v.jsxs("div",{className:"font-bold text-xl sm:text-2xl text-foreground",children:[t.hp.current," / ",t.hp.max]}),v.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"HP"})]}),v.jsxs("div",{title:"Armor Class",children:[v.jsx(M$,{className:"w-6 h-6 mx-auto text-accent/80 mb-1"}),v.jsx("div",{className:"font-bold text-2xl text-foreground",children:t.armorClass}),v.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"AC"})]}),v.jsxs("div",{title:"Speed",children:[v.jsx(k$,{className:"w-6 h-6 mx-auto text-primary/80 mb-1"}),v.jsxs("div",{className:"font-bold text-xl sm:text-2xl text-foreground",children:[t.speed,y&&v.jsxs("span",{className:"text-base font-normal",children:[" (",y,")"]})]}),v.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Speed"})]}),v.jsxs("div",{title:"Initiative",children:[v.jsx(O$,{className:"w-6 h-6 mx-auto text-yellow-400/80 mb-1"}),v.jsx("div",{className:"font-bold text-2xl text-foreground",children:bs(m)}),v.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Initiative"})]})]}),v.jsx("div",{className:"w-full bg-muted rounded-full h-2.5 mt-4",children:v.jsx("div",{className:`${f} h-2.5 rounded-full transition-all duration-500`,style:{width:`${d}%`}})})]})]}):v.jsxs("div",{onClick:s?i:void 0,className:`bg-card-alt border border-border rounded-lg p-4 flex flex-col gap-3 shadow-lg transition-shadow duration-300 relative ${s?"cursor-pointer hover:shadow-accent/20":""}`,role:s?"button":void 0,tabIndex:s?0:void 0,onKeyDown:s?E=>(E.key==="Enter"||E.key===" ")&&i&&i():void 0,children:[v.jsxs("div",{className:"flex items-start gap-4",children:[v.jsx("div",{className:"w-20 h-20 bg-muted rounded-md overflow-hidden flex-shrink-0",children:t.imageUrl?v.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}):v.jsx(jg,{className:"w-full h-full text-muted-foreground/50 p-4"})}),v.jsxs("div",{className:"flex-grow min-w-0",children:[v.jsx("h3",{className:"text-lg font-bold text-accent truncate",children:t.name}),v.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:t.type})]}),!s&&v.jsxs("div",{className:"absolute top-2 right-2",ref:c,children:[v.jsx("button",{onClick:()=>l(E=>!E),className:"p-1 rounded-full text-muted-foreground hover:bg-muted",children:v.jsx(D$,{className:"w-5 h-5"})}),a&&v.jsxs("div",{className:"absolute right-0 mt-1 w-32 bg-zinc-800 border border-border rounded-md shadow-xl z-10",children:[v.jsxs("button",{onClick:()=>{e(),l(!1)},className:"w-full text-left flex items-center gap-2 px-3 py-2 text-sm hover:bg-zinc-700",children:[v.jsx(Ba,{className:"w-4 h-4"})," Edit"]}),v.jsxs("button",{onClick:()=>{r(),l(!1)},className:"w-full text-left flex items-center gap-2 px-3 py-2 text-sm hover:bg-zinc-700",children:[v.jsx(g$,{className:"w-4 h-4"})," Duplicate"]}),v.jsxs("button",{onClick:()=>{n(),l(!1)},className:"w-full text-left flex items-center gap-2 px-3 py-2 text-sm text-destructive hover:bg-zinc-700",children:[v.jsx(Js,{className:"w-4 h-4"})," Delete"]})]})]})]}),v.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"font-bold text-lg",children:[t.hp.current," / ",t.hp.max]}),v.jsx("div",{className:"text-xs text-muted-foreground",children:"HP"})]}),v.jsxs("div",{children:[v.jsx("div",{className:"font-bold text-lg",children:t.armorClass}),v.jsx("div",{className:"text-xs text-muted-foreground",children:"AC"})]}),v.jsxs("div",{children:[v.jsx("div",{className:"font-bold text-lg",children:t.speed}),v.jsxs("div",{className:"text-xs text-muted-foreground",children:["Speed ",y&&`(${y})`]})]}),v.jsxs("div",{children:[v.jsx("div",{className:"font-bold text-lg",children:bs(m)}),v.jsx("div",{className:"text-xs text-muted-foreground",children:"Init"})]})]}),v.jsx("div",{className:"w-full bg-muted rounded-full h-1.5 mt-1",children:v.jsx("div",{className:`${f} h-1.5 rounded-full transition-all duration-500`,style:{width:`${d}%`}})})]})},jD=({imageUrl:t,altText:e,onClose:n})=>{const r=i=>{i.target===i.currentTarget&&n()};return v.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex justify-center items-center p-4 animate-fade-in",onClick:r,"aria-modal":"true",role:"dialog",children:v.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] bg-card p-2 rounded-lg shadow-2xl",onClick:i=>i.stopPropagation(),children:[v.jsx("img",{src:t,alt:e,className:"w-full h-full max-h-[inherit] object-contain"}),v.jsx("button",{onClick:n,className:"absolute top-2 right-2 bg-card/50 text-foreground rounded-full p-2 hover:bg-destructive hover:text-white transition-colors","aria-label":"Close image view",children:v.jsx(kv,{className:"w-6 h-6"})})]})})},TW=()=>({id:`atk_${Date.now()}_${Math.random()}`,name:"",bonus:"",damage:""}),AW=({companion:t,setCompanion:e,readOnly:n=!1})=>{if(n)return v.jsxs("div",{className:"space-y-2",children:[v.jsx("h4",{className:"text-md font-semibold text-zinc-400 mb-2",children:"Attacks"}),v.jsx("div",{className:"space-y-3 p-3 bg-muted/30 rounded-md border border-border",children:t.attacks.length===0?v.jsx("p",{className:"text-muted-foreground text-sm text-center italic",children:"No attacks defined."}):t.attacks.map((a,l)=>v.jsxs("div",{className:"grid grid-cols-[1fr_auto_auto] gap-2 items-center text-sm",children:[v.jsx("p",{className:"font-semibold",children:a.name}),v.jsx("p",{className:"w-20 text-center font-mono",children:a.bonus}),v.jsx("p",{className:"w-24 text-center font-mono",children:a.damage})]},l))})]});const r=(a,l,c)=>{const d=[...t.attacks];d[a]={...d[a],[l]:c},e(f=>({...f,attacks:d}))},i=()=>{e(a=>({...a,attacks:[...a.attacks,TW()]}))},s=a=>{e(l=>({...l,attacks:l.attacks.filter((c,d)=>d!==a)}))};return v.jsxs("div",{className:"space-y-2",children:[v.jsx("h4",{className:"text-md font-semibold text-zinc-400 mb-2",children:"Attacks"}),v.jsxs("div",{className:"space-y-3 p-3 bg-muted/30 rounded-md border border-border",children:[t.attacks.map((a,l)=>v.jsxs("div",{className:"grid grid-cols-[1fr_auto_auto_auto] gap-2 items-center",children:[v.jsx("input",{type:"text",placeholder:"Attack Name",value:a.name,onChange:c=>r(l,"name",c.target.value),className:"w-full bg-input border border-border rounded-md py-1 px-2 text-sm"}),v.jsx("input",{type:"text",placeholder:"Bonus",value:a.bonus,onChange:c=>r(l,"bonus",c.target.value),className:"w-20 bg-input border border-border rounded-md py-1 px-2 text-sm text-center"}),v.jsx("input",{type:"text",placeholder:"Damage",value:a.damage,onChange:c=>r(l,"damage",c.target.value),className:"w-24 bg-input border border-border rounded-md py-1 px-2 text-sm text-center"}),v.jsx("button",{onClick:()=>s(l),className:"p-1 text-muted-foreground hover:text-destructive",children:v.jsx(Js,{className:"w-4 h-4"})})]},l)),v.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-1 text-sm text-accent hover:text-primary transition-colors py-1 border border-dashed border-border rounded-md",children:[v.jsx(jv,{className:"w-4 h-4"})," Add Attack"]})]})]})},SW=()=>({id:`spell_${Date.now()}_${Math.random()}`,name:"",description:"",level:0,school:"",castingTime:"",range:"",components:"",duration:""}),ap=({label:t,onClick:e,isActive:n})=>v.jsx("button",{onClick:e,className:`px-2 py-1 text-xs rounded-md transition-colors ${n?"bg-accent text-accent-foreground":"bg-muted/50 hover:bg-muted"}`,children:t}),RW=({companion:t,setCompanion:e,readOnly:n=!1})=>{const[r,i]=K.useState("level"),[s,a]=K.useState(null),l=K.useMemo(()=>{const m=[...t.spells];return m.length===0?[]:(m.sort((y,E)=>r==="level"&&y.level-E.level||y.name.localeCompare(E.name)),m)},[t.spells,r]);if(n)return v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("h4",{className:"text-md font-semibold text-muted-foreground",children:"Spells & Special Abilities"}),v.jsxs("div",{className:"flex gap-1",children:[v.jsx(ap,{label:"Level",onClick:()=>i("level"),isActive:r==="level"}),v.jsx(ap,{label:"Alphabetical",onClick:()=>i("alpha"),isActive:r==="alpha"})]})]}),v.jsx("div",{className:"space-y-4",children:l.length===0?v.jsx("p",{className:"text-muted-foreground text-sm text-center italic",children:"No special abilities defined."}):l.map(m=>v.jsxs("div",{className:"text-sm p-3 bg-background rounded-lg border border-border",children:[v.jsx("p",{className:"font-bold text-foreground",children:m.name}),v.jsx("div",{className:"text-xs text-muted-foreground/80 mt-1",children:m.level>0?`Level ${m.level} ${m.school}`:m.school||"Special Ability"}),v.jsxs("div",{className:"text-xs text-muted-foreground/80 mt-1 space-x-2",children:[m.castingTime&&v.jsxs("span",{children:[v.jsx("span",{className:"font-semibold",children:"Cast:"})," ",m.castingTime]}),m.range&&v.jsxs("span",{children:["| ",v.jsx("span",{className:"font-semibold",children:"Range:"})," ",m.range]}),m.duration&&v.jsxs("span",{children:["| ",v.jsx("span",{className:"font-semibold",children:"Duration:"})," ",m.duration]})]}),v.jsx("p",{className:"text-sm text-foreground/90 whitespace-pre-wrap mt-2",children:m.description})]},m.id))})]});const c=(m,y,E)=>{const C=t.spells.map(I=>{if(I.id===m){const A={...I};return y==="level"?A[y]=parseInt(E,10)||0:A[y]=E,A}return I});e(I=>({...I,spells:C}))},d=()=>{const m=SW();e(y=>({...y,spells:[...y.spells,m]})),a(m.id)},f=m=>{m===s&&a(null),e(y=>({...y,spells:y.spells.filter(E=>E.id!==m)}))},p="w-full bg-input border border-border rounded-md py-1 px-2 text-sm focus:ring-1 focus:ring-ring focus:outline-none";return v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("h4",{className:"text-md font-semibold text-muted-foreground",children:"Spells & Special Abilities"}),v.jsxs("div",{className:"flex gap-1",children:[v.jsx(ap,{label:"Level",onClick:()=>i("level"),isActive:r==="level"}),v.jsx(ap,{label:"Alphabetical",onClick:()=>i("alpha"),isActive:r==="alpha"})]})]}),v.jsxs("div",{className:"space-y-4",children:[t.spells.length===0?v.jsx("p",{className:"text-muted-foreground text-sm text-center italic",children:"No special abilities defined."}):v.jsxs(v.Fragment,{children:[l.filter(m=>m.id!==s).map(m=>v.jsx(HS,{spell:m,onSpellChange:c,onDelete:f,inputClass:p},m.id)),s&&l.find(m=>m.id===s)&&v.jsx("div",{onBlur:m=>{m.currentTarget.contains(m.relatedTarget)||a(null)},children:v.jsx(HS,{spell:l.find(m=>m.id===s),onSpellChange:c,onDelete:f,inputClass:p},s)})]}),v.jsxs("button",{onClick:d,className:"w-full flex items-center justify-center gap-1 text-sm text-accent hover:text-primary transition-colors py-1 border border-dashed border-border rounded-md",children:[v.jsx(jv,{className:"w-4 h-4"})," Add Spell/Ability"]})]})]})},HS=({spell:t,onSpellChange:e,onDelete:n,inputClass:r})=>v.jsxs("div",{className:"p-3 bg-background rounded-lg border border-border space-y-2",children:[v.jsxs("div",{className:"flex justify-between items-start gap-2",children:[v.jsx("input",{type:"text",placeholder:"Spell or Ability Name",value:t.name,onChange:i=>e(t.id,"name",i.target.value),className:`${r} font-bold`}),v.jsx("button",{onClick:()=>n(t.id),className:"p-1.5 text-muted-foreground hover:text-destructive transition-colors flex-shrink-0",children:v.jsx(Js,{className:"w-4 h-4"})})]}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2",children:[v.jsx("input",{type:"number",placeholder:"Level (0 for cantrip)",value:t.level,onChange:i=>e(t.id,"level",i.target.value),className:`${r} no-spinner`}),v.jsx("input",{type:"text",placeholder:"School (e.g. Evocation)",value:t.school,onChange:i=>e(t.id,"school",i.target.value),className:r}),v.jsx("input",{type:"text",placeholder:"Casting Time",value:t.castingTime,onChange:i=>e(t.id,"castingTime",i.target.value),className:r}),v.jsx("input",{type:"text",placeholder:"Range",value:t.range,onChange:i=>e(t.id,"range",i.target.value),className:r}),v.jsx("input",{type:"text",placeholder:"Components (V, S, M)",value:t.components,onChange:i=>e(t.id,"components",i.target.value),className:r}),v.jsx("input",{type:"text",placeholder:"Duration",value:t.duration,onChange:i=>e(t.id,"duration",i.target.value),className:r})]}),v.jsx("textarea",{placeholder:"Description, effects, damage, etc.",value:t.description,onChange:i=>e(t.id,"description",i.target.value),rows:3,className:`${r} text-xs resize-y`})]}),PD=({label:t,value:e,onChange:n,placeholder:r,className:i="",inputClassName:s="",showModifier:a})=>{const l=()=>n((Number(e)||0)+1),c=()=>{const m=Number(e)||0;m>0&&n(m-1)},d=bs(Wl(Number(e))),f=K.useId(),p="p-2 bg-secondary hover:bg-accent text-secondary-foreground hover:text-accent-foreground rounded-full transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2";return v.jsxs("div",{className:`flex flex-col items-center gap-2 w-full ${i}`,children:[t&&v.jsx("label",{htmlFor:f,className:"block text-sm font-medium text-muted-foreground",children:t}),a&&v.jsx("div",{className:"text-2xl font-bold text-accent h-8 flex items-center",children:d}),v.jsxs("div",{className:"flex items-center justify-between w-full max-w-[180px] bg-background border border-input rounded-full p-1",children:[v.jsx("button",{type:"button",onClick:c,className:p,children:v.jsx(pD,{className:"w-5 h-5"})}),v.jsx("input",{id:f,type:"number",value:e,onChange:m=>{const y=m.target.value;n(y===""?"":parseInt(y,10))},placeholder:r,className:`no-spinner flex-1 min-w-0 bg-transparent border-0 text-center text-4xl font-bold text-foreground focus:ring-0 focus:outline-none placeholder:text-muted-foreground/50 placeholder:font-normal placeholder:text-base ${s}`}),v.jsx("button",{type:"button",onClick:l,className:p,children:v.jsx(jv,{className:"w-5 h-5"})})]})]})},CW=({hp:t,onHpChange:e})=>{const[n,r]=K.useState(""),i=c=>{if(isNaN(c)||c===0)return;let d=t.current,f=t.temporary;if(c<0){const p=Math.abs(c);if(f>0){const m=Math.min(p,f);f-=m,d-=p-m}else d-=p}else d+=c;d=Math.max(0,Math.min(d,t.max||d)),e({...t,current:d,temporary:f}),r("")},s=()=>{const c=Number(n);isNaN(c)||c<0||(e({...t,temporary:Math.max(t.temporary,c)}),r(""))},a=t.max>0?t.current/t.max*100:100,l=a>50?"bg-green-500":a>25?"bg-yellow-500":"bg-red-500";return v.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg border border-border space-y-3",children:[v.jsxs("div",{className:"flex justify-between items-center text-lg font-bold",children:[v.jsx("span",{className:"text-muted-foreground text-sm uppercase",children:"Punti Ferita"}),v.jsxs("div",{children:[v.jsx("span",{children:t.current}),t.temporary>0&&v.jsxs("span",{className:"text-blue-400",children:[" + ",t.temporary]}),v.jsxs("span",{className:"text-muted-foreground",children:[" / ",t.max||"??"]})]})]}),v.jsx("div",{className:"w-full bg-muted rounded-full h-2.5",children:v.jsx("div",{className:`${l} h-2.5 rounded-full transition-all duration-500`,style:{width:`${a}%`}})}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center",children:[v.jsx(PD,{value:n,onChange:c=>r(c===""?"":Number(c)),placeholder:"Valore",inputClassName:"w-16",showModifier:!1}),v.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[v.jsxs("button",{onClick:()=>i(-(Number(n)||0)),className:"flex-1 sm:flex-auto flex items-center justify-center gap-2 px-3 py-2 bg-red-800/50 text-red-200 font-bold rounded-lg shadow-md hover:bg-red-700/60 transition-colors",children:[v.jsx(pD,{className:"w-5 h-5"})," Danno"]}),v.jsxs("button",{onClick:()=>i(Number(n)||0),className:"flex-1 sm:flex-auto flex items-center justify-center gap-2 px-3 py-2 bg-green-800/50 text-green-200 font-bold rounded-lg shadow-md hover:bg-green-700/60 transition-colors",children:[v.jsx(jv,{className:"w-5 h-5"})," Cura"]}),v.jsxs("button",{onClick:s,className:"flex-1 sm:flex-auto flex items-center justify-center gap-2 px-3 py-2 bg-blue-800/50 text-blue-200 font-bold rounded-lg shadow-md hover:bg-blue-700/60 transition-colors",children:[v.jsx(mD,{className:"w-5 h-5"})," Temp"]})]})]})]})};var zg={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */zg.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",d=500,f="__lodash_placeholder__",p=1,m=2,y=4,E=1,C=2,I=1,A=2,N=4,M=8,P=16,q=32,L=64,T=128,_=256,x=512,S=30,k="...",j=800,O=16,G=1,J=2,z=3,U=1/0,Q=9007199254740991,ee=17976931348623157e292,ae=NaN,be=4294967295,pe=be-1,ye=be>>>1,W=[["ary",T],["bind",I],["bindKey",A],["curry",M],["curryRight",P],["flip",x],["partial",q],["partialRight",L],["rearg",_]],X="[object Arguments]",ce="[object Array]",Oe="[object AsyncFunction]",ke="[object Boolean]",$e="[object Date]",je="[object DOMException]",gt="[object Error]",Ye="[object Function]",In="[object GeneratorFunction]",Pt="[object Map]",bt="[object Number]",Ut="[object Null]",it="[object Object]",Et="[object Promise]",rn="[object Proxy]",Xt="[object RegExp]",st="[object Set]",yn="[object String]",At="[object Symbol]",et="[object Undefined]",Ht="[object WeakMap]",Ot="[object WeakSet]",Mt="[object ArrayBuffer]",at="[object DataView]",un="[object Float32Array]",sn="[object Float64Array]",xn="[object Int8Array]",cn="[object Int16Array]",an="[object Int32Array]",Pn="[object Uint8Array]",ir="[object Uint8ClampedArray]",Ii="[object Uint16Array]",ta="[object Uint32Array]",Di=/\b__p \+= '';/g,Oi=/\b(__p \+=) '' \+/g,li=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qr=/&(?:amp|lt|gt|quot|#39);/g,Wn=/[&<>"']/g,Er=RegExp(qr.source),Xn=RegExp(Wn.source),Mi=/<%-([\s\S]+?)%>/g,ki=/<%([\s\S]+?)%>/g,sr=/<%=([\s\S]+?)%>/g,Un=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gu=/^\w*$/,Kn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$=/[\\^$.*+?()[\]{}|]/g,te=RegExp($.source),ie=/^\s+/,ge=/\s/,we=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ne=/\{\n\/\* \[wrapped with (.+)\] \*/,Pe=/,? & /,Ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Se=/[()=,{}\[\]\/\s]/,Te=/\\(\\)?/g,Ie=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ze=/\w*$/,qe=/^[-+]0x[0-9a-f]+$/i,En=/^0b[01]+$/i,St=/^\[object .+?Constructor\]$/,ot=/^0o[0-7]+$/i,qt=/^(?:0|[1-9]\d*)$/,as=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ui=/($^)/,ci=/['\n\r\u2028\u2029\\]/g,Vn="\\ud800-\\udfff",Fa="\\u0300-\\u036f",os="\\ufe20-\\ufe2f",kr="\\u20d0-\\u20ff",Lr=Fa+os+kr,ls="\\u2700-\\u27bf",lt="a-z\\xdf-\\xf6\\xf8-\\xff",Kt="\\xac\\xb1\\xd7\\xf7",us="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Rs="\\u2000-\\u206f",en=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",hi="A-Z\\xc0-\\xd6\\xd8-\\xde",Ha="\\ufe0e\\ufe0f",sl=Kt+us+Rs+en,oh="[']",Uv="["+Vn+"]",lh="["+sl+"]",al="["+Lr+"]",Md="\\d+",na="["+ls+"]",Li="["+lt+"]",ol="[^"+Vn+sl+Md+ls+lt+hi+"]",qa="\\ud83c[\\udffb-\\udfff]",kd="(?:"+al+"|"+qa+")",Gt="[^"+Vn+"]",Ga="(?:\\ud83c[\\udde6-\\uddff]){2}",ra="[\\ud800-\\udbff][\\udc00-\\udfff]",ji="["+hi+"]",Ld="\\u200d",uh="(?:"+Li+"|"+ol+")",Vv="(?:"+ji+"|"+ol+")",jd="(?:"+oh+"(?:d|ll|m|re|s|t|ve))?",Pd="(?:"+oh+"(?:D|LL|M|RE|S|T|VE))?",Ud=kd+"?",$a="["+Ha+"]?",Cs="(?:"+Ld+"(?:"+[Gt,Ga,ra].join("|")+")"+$a+Ud+")*",Vd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ch=$a+Ud+Cs,Ya="(?:"+[na,Ga,ra].join("|")+")"+ch,zv="(?:"+[Gt+al+"?",al,Ga,ra,Uv].join("|")+")",Bv=RegExp(oh,"g"),Fv=RegExp(al,"g"),Pi=RegExp(qa+"(?="+qa+")|"+zv+ch,"g"),Hv=RegExp([ji+"?"+Li+"+"+jd+"(?="+[lh,ji,"$"].join("|")+")",Vv+"+"+Pd+"(?="+[lh,ji+uh,"$"].join("|")+")",ji+"?"+uh+"+"+jd,ji+"+"+Pd,zd,Vd,Md,Ya].join("|"),"g"),qv=RegExp("["+Ld+Vn+Lr+Ha+"]"),vu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,yu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Bd=-1,Rt={};Rt[un]=Rt[sn]=Rt[xn]=Rt[cn]=Rt[an]=Rt[Pn]=Rt[ir]=Rt[Ii]=Rt[ta]=!0,Rt[X]=Rt[ce]=Rt[Mt]=Rt[ke]=Rt[at]=Rt[$e]=Rt[gt]=Rt[Ye]=Rt[Pt]=Rt[bt]=Rt[it]=Rt[Xt]=Rt[st]=Rt[yn]=Rt[Ht]=!1;var Tt={};Tt[X]=Tt[ce]=Tt[Mt]=Tt[at]=Tt[ke]=Tt[$e]=Tt[un]=Tt[sn]=Tt[xn]=Tt[cn]=Tt[an]=Tt[Pt]=Tt[bt]=Tt[it]=Tt[Xt]=Tt[st]=Tt[yn]=Tt[At]=Tt[Pn]=Tt[ir]=Tt[Ii]=Tt[ta]=!0,Tt[gt]=Tt[Ye]=Tt[Ht]=!1;var Fd={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},hh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},hn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Gv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$v=parseFloat,Hd=parseInt,fh=typeof Oh=="object"&&Oh&&Oh.Object===Object&&Oh,qd=typeof self=="object"&&self&&self.Object===Object&&self,Tn=fh||qd||Function("return this")(),_u=e&&!e.nodeType&&e,mr=_u&&!0&&t&&!t.nodeType&&t,dh=mr&&mr.exports===_u,mh=dh&&fh.process,ar=function(){try{var Z=mr&&mr.require&&mr.require("util").types;return Z||mh&&mh.binding&&mh.binding("util")}catch{}}(),ph=ar&&ar.isArrayBuffer,bu=ar&&ar.isDate,ll=ar&&ar.isMap,gh=ar&&ar.isRegExp,ul=ar&&ar.isSet,Gd=ar&&ar.isTypedArray;function Tr(Z,le,se){switch(se.length){case 0:return Z.call(le);case 1:return Z.call(le,se[0]);case 2:return Z.call(le,se[0],se[1]);case 3:return Z.call(le,se[0],se[1],se[2])}return Z.apply(le,se)}function cl(Z,le,se,Re){for(var We=-1,Nt=Z==null?0:Z.length;++We<Nt;){var Zn=Z[We];le(Re,Zn,se(Zn),Z)}return Re}function jr(Z,le){for(var se=-1,Re=Z==null?0:Z.length;++se<Re&&le(Z[se],se,Z)!==!1;);return Z}function $d(Z,le){for(var se=Z==null?0:Z.length;se--&&le(Z[se],se,Z)!==!1;);return Z}function wu(Z,le){for(var se=-1,Re=Z==null?0:Z.length;++se<Re;)if(!le(Z[se],se,Z))return!1;return!0}function Ui(Z,le){for(var se=-1,Re=Z==null?0:Z.length,We=0,Nt=[];++se<Re;){var Zn=Z[se];le(Zn,se,Z)&&(Nt[We++]=Zn)}return Nt}function hl(Z,le){var se=Z==null?0:Z.length;return!!se&&ia(Z,le,0)>-1}function Wa(Z,le,se){for(var Re=-1,We=Z==null?0:Z.length;++Re<We;)if(se(le,Z[Re]))return!0;return!1}function Qt(Z,le){for(var se=-1,Re=Z==null?0:Z.length,We=Array(Re);++se<Re;)We[se]=le(Z[se],se,Z);return We}function cs(Z,le){for(var se=-1,Re=le.length,We=Z.length;++se<Re;)Z[We+se]=le[se];return Z}function hs(Z,le,se,Re){var We=-1,Nt=Z==null?0:Z.length;for(Re&&Nt&&(se=Z[++We]);++We<Nt;)se=le(se,Z[We],We,Z);return se}function Yd(Z,le,se,Re){var We=Z==null?0:Z.length;for(Re&&We&&(se=Z[--We]);We--;)se=le(se,Z[We],We,Z);return se}function xu(Z,le){for(var se=-1,Re=Z==null?0:Z.length;++se<Re;)if(le(Z[se],se,Z))return!0;return!1}var Wd=R("length");function Xd(Z){return Z.split("")}function Eu(Z){return Z.match(Ce)||[]}function Ar(Z,le,se){var Re;return se(Z,function(We,Nt,Zn){if(le(We,Nt,Zn))return Re=Nt,!1}),Re}function fl(Z,le,se,Re){for(var We=Z.length,Nt=se+(Re?1:-1);Re?Nt--:++Nt<We;)if(le(Z[Nt],Nt,Z))return Nt;return-1}function ia(Z,le,se){return le===le?YD(Z,le,se):fl(Z,h,se)}function Xa(Z,le,se,Re){for(var We=se-1,Nt=Z.length;++We<Nt;)if(Re(Z[We],le))return We;return-1}function h(Z){return Z!==Z}function b(Z,le){var se=Z==null?0:Z.length;return se?_e(Z,le)/se:ae}function R(Z){return function(le){return le==null?n:le[Z]}}function B(Z){return function(le){return Z==null?n:Z[le]}}function re(Z,le,se,Re,We){return We(Z,function(Nt,Zn,Zt){se=Re?(Re=!1,Nt):le(se,Nt,Zn,Zt)}),se}function oe(Z,le){var se=Z.length;for(Z.sort(le);se--;)Z[se]=Z[se].value;return Z}function _e(Z,le){for(var se,Re=-1,We=Z.length;++Re<We;){var Nt=le(Z[Re]);Nt!==n&&(se=se===n?Nt:se+Nt)}return se}function Ct(Z,le){for(var se=-1,Re=Array(Z);++se<Z;)Re[se]=le(se);return Re}function Qn(Z,le){return Qt(le,function(se){return[se,Z[se]]})}function vt(Z){return Z&&Z.slice(0,sx(Z)+1).replace(ie,"")}function kt(Z){return function(le){return Z(le)}}function zn(Z,le){return Qt(le,function(se){return Z[se]})}function Vi(Z,le){return Z.has(le)}function Gr(Z,le){for(var se=-1,Re=Z.length;++se<Re&&ia(le,Z[se],0)>-1;);return se}function dl(Z,le){for(var se=Z.length;se--&&ia(le,Z[se],0)>-1;);return se}function vh(Z,le){for(var se=Z.length,Re=0;se--;)Z[se]===le&&++Re;return Re}var zD=B(Fd),BD=B(hh);function FD(Z){return"\\"+Gv[Z]}function HD(Z,le){return Z==null?n:Z[le]}function Tu(Z){return qv.test(Z)}function qD(Z){return vu.test(Z)}function GD(Z){for(var le,se=[];!(le=Z.next()).done;)se.push(le.value);return se}function Yv(Z){var le=-1,se=Array(Z.size);return Z.forEach(function(Re,We){se[++le]=[We,Re]}),se}function ix(Z,le){return function(se){return Z(le(se))}}function Ka(Z,le){for(var se=-1,Re=Z.length,We=0,Nt=[];++se<Re;){var Zn=Z[se];(Zn===le||Zn===f)&&(Z[se]=f,Nt[We++]=se)}return Nt}function Kd(Z){var le=-1,se=Array(Z.size);return Z.forEach(function(Re){se[++le]=Re}),se}function $D(Z){var le=-1,se=Array(Z.size);return Z.forEach(function(Re){se[++le]=[Re,Re]}),se}function YD(Z,le,se){for(var Re=se-1,We=Z.length;++Re<We;)if(Z[Re]===le)return Re;return-1}function WD(Z,le,se){for(var Re=se+1;Re--;)if(Z[Re]===le)return Re;return Re}function Au(Z){return Tu(Z)?KD(Z):Wd(Z)}function fs(Z){return Tu(Z)?QD(Z):Xd(Z)}function sx(Z){for(var le=Z.length;le--&&ge.test(Z.charAt(le)););return le}var XD=B(hn);function KD(Z){for(var le=Pi.lastIndex=0;Pi.test(Z);)++le;return le}function QD(Z){return Z.match(Pi)||[]}function ZD(Z){return Z.match(Hv)||[]}var JD=function Z(le){le=le==null?Tn:Su.defaults(Tn.Object(),le,Su.pick(Tn,yu));var se=le.Array,Re=le.Date,We=le.Error,Nt=le.Function,Zn=le.Math,Zt=le.Object,Wv=le.RegExp,e5=le.String,zi=le.TypeError,Qd=se.prototype,t5=Nt.prototype,Ru=Zt.prototype,Zd=le["__core-js_shared__"],Jd=t5.toString,Vt=Ru.hasOwnProperty,n5=0,ax=function(){var o=/[^.]+$/.exec(Zd&&Zd.keys&&Zd.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),em=Ru.toString,r5=Jd.call(Zt),i5=Tn._,s5=Wv("^"+Jd.call(Vt).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tm=dh?le.Buffer:n,Qa=le.Symbol,nm=le.Uint8Array,ox=tm?tm.allocUnsafe:n,rm=ix(Zt.getPrototypeOf,Zt),lx=Zt.create,ux=Ru.propertyIsEnumerable,im=Qd.splice,cx=Qa?Qa.isConcatSpreadable:n,yh=Qa?Qa.iterator:n,ml=Qa?Qa.toStringTag:n,sm=function(){try{var o=_l(Zt,"defineProperty");return o({},"",{}),o}catch{}}(),a5=le.clearTimeout!==Tn.clearTimeout&&le.clearTimeout,o5=Re&&Re.now!==Tn.Date.now&&Re.now,l5=le.setTimeout!==Tn.setTimeout&&le.setTimeout,am=Zn.ceil,om=Zn.floor,Xv=Zt.getOwnPropertySymbols,u5=tm?tm.isBuffer:n,hx=le.isFinite,c5=Qd.join,h5=ix(Zt.keys,Zt),Jn=Zn.max,Sr=Zn.min,f5=Re.now,d5=le.parseInt,fx=Zn.random,m5=Qd.reverse,Kv=_l(le,"DataView"),_h=_l(le,"Map"),Qv=_l(le,"Promise"),Cu=_l(le,"Set"),bh=_l(le,"WeakMap"),wh=_l(Zt,"create"),lm=bh&&new bh,Nu={},p5=bl(Kv),g5=bl(_h),v5=bl(Qv),y5=bl(Cu),_5=bl(bh),um=Qa?Qa.prototype:n,xh=um?um.valueOf:n,dx=um?um.toString:n;function V(o){if(An(o)&&!Ke(o)&&!(o instanceof ft)){if(o instanceof Bi)return o;if(Vt.call(o,"__wrapped__"))return mE(o)}return new Bi(o)}var Iu=function(){function o(){}return function(u){if(!_n(u))return{};if(lx)return lx(u);o.prototype=u;var g=new o;return o.prototype=n,g}}();function cm(){}function Bi(o,u){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=n}V.templateSettings={escape:Mi,evaluate:ki,interpolate:sr,variable:"",imports:{_:V}},V.prototype=cm.prototype,V.prototype.constructor=V,Bi.prototype=Iu(cm.prototype),Bi.prototype.constructor=Bi;function ft(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=be,this.__views__=[]}function b5(){var o=new ft(this.__wrapped__);return o.__actions__=$r(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=$r(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=$r(this.__views__),o}function w5(){if(this.__filtered__){var o=new ft(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function x5(){var o=this.__wrapped__.value(),u=this.__dir__,g=Ke(o),w=u<0,D=g?o.length:0,F=kO(0,D,this.__views__),H=F.start,Y=F.end,ne=Y-H,he=w?Y:H-1,fe=this.__iteratees__,ve=fe.length,xe=0,De=Sr(ne,this.__takeCount__);if(!g||!w&&D==ne&&De==ne)return Px(o,this.__actions__);var Ue=[];e:for(;ne--&&xe<De;){he+=u;for(var Ze=-1,Ve=o[he];++Ze<ve;){var ut=fe[Ze],yt=ut.iteratee,mi=ut.type,Vr=yt(Ve);if(mi==J)Ve=Vr;else if(!Vr){if(mi==G)continue e;break e}}Ue[xe++]=Ve}return Ue}ft.prototype=Iu(cm.prototype),ft.prototype.constructor=ft;function pl(o){var u=-1,g=o==null?0:o.length;for(this.clear();++u<g;){var w=o[u];this.set(w[0],w[1])}}function E5(){this.__data__=wh?wh(null):{},this.size=0}function T5(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}function A5(o){var u=this.__data__;if(wh){var g=u[o];return g===c?n:g}return Vt.call(u,o)?u[o]:n}function S5(o){var u=this.__data__;return wh?u[o]!==n:Vt.call(u,o)}function R5(o,u){var g=this.__data__;return this.size+=this.has(o)?0:1,g[o]=wh&&u===n?c:u,this}pl.prototype.clear=E5,pl.prototype.delete=T5,pl.prototype.get=A5,pl.prototype.has=S5,pl.prototype.set=R5;function sa(o){var u=-1,g=o==null?0:o.length;for(this.clear();++u<g;){var w=o[u];this.set(w[0],w[1])}}function C5(){this.__data__=[],this.size=0}function N5(o){var u=this.__data__,g=hm(u,o);if(g<0)return!1;var w=u.length-1;return g==w?u.pop():im.call(u,g,1),--this.size,!0}function I5(o){var u=this.__data__,g=hm(u,o);return g<0?n:u[g][1]}function D5(o){return hm(this.__data__,o)>-1}function O5(o,u){var g=this.__data__,w=hm(g,o);return w<0?(++this.size,g.push([o,u])):g[w][1]=u,this}sa.prototype.clear=C5,sa.prototype.delete=N5,sa.prototype.get=I5,sa.prototype.has=D5,sa.prototype.set=O5;function aa(o){var u=-1,g=o==null?0:o.length;for(this.clear();++u<g;){var w=o[u];this.set(w[0],w[1])}}function M5(){this.size=0,this.__data__={hash:new pl,map:new(_h||sa),string:new pl}}function k5(o){var u=Em(this,o).delete(o);return this.size-=u?1:0,u}function L5(o){return Em(this,o).get(o)}function j5(o){return Em(this,o).has(o)}function P5(o,u){var g=Em(this,o),w=g.size;return g.set(o,u),this.size+=g.size==w?0:1,this}aa.prototype.clear=M5,aa.prototype.delete=k5,aa.prototype.get=L5,aa.prototype.has=j5,aa.prototype.set=P5;function gl(o){var u=-1,g=o==null?0:o.length;for(this.__data__=new aa;++u<g;)this.add(o[u])}function U5(o){return this.__data__.set(o,c),this}function V5(o){return this.__data__.has(o)}gl.prototype.add=gl.prototype.push=U5,gl.prototype.has=V5;function ds(o){var u=this.__data__=new sa(o);this.size=u.size}function z5(){this.__data__=new sa,this.size=0}function B5(o){var u=this.__data__,g=u.delete(o);return this.size=u.size,g}function F5(o){return this.__data__.get(o)}function H5(o){return this.__data__.has(o)}function q5(o,u){var g=this.__data__;if(g instanceof sa){var w=g.__data__;if(!_h||w.length<i-1)return w.push([o,u]),this.size=++g.size,this;g=this.__data__=new aa(w)}return g.set(o,u),this.size=g.size,this}ds.prototype.clear=z5,ds.prototype.delete=B5,ds.prototype.get=F5,ds.prototype.has=H5,ds.prototype.set=q5;function mx(o,u){var g=Ke(o),w=!g&&wl(o),D=!g&&!w&&no(o),F=!g&&!w&&!D&&ku(o),H=g||w||D||F,Y=H?Ct(o.length,e5):[],ne=Y.length;for(var he in o)(u||Vt.call(o,he))&&!(H&&(he=="length"||D&&(he=="offset"||he=="parent")||F&&(he=="buffer"||he=="byteLength"||he=="byteOffset")||ca(he,ne)))&&Y.push(he);return Y}function px(o){var u=o.length;return u?o[l0(0,u-1)]:n}function G5(o,u){return Tm($r(o),vl(u,0,o.length))}function $5(o){return Tm($r(o))}function Zv(o,u,g){(g!==n&&!ms(o[u],g)||g===n&&!(u in o))&&oa(o,u,g)}function Eh(o,u,g){var w=o[u];(!(Vt.call(o,u)&&ms(w,g))||g===n&&!(u in o))&&oa(o,u,g)}function hm(o,u){for(var g=o.length;g--;)if(ms(o[g][0],u))return g;return-1}function Y5(o,u,g,w){return Za(o,function(D,F,H){u(w,D,g(D),H)}),w}function gx(o,u){return o&&Is(u,or(u),o)}function W5(o,u){return o&&Is(u,Wr(u),o)}function oa(o,u,g){u=="__proto__"&&sm?sm(o,u,{configurable:!0,enumerable:!0,value:g,writable:!0}):o[u]=g}function Jv(o,u){for(var g=-1,w=u.length,D=se(w),F=o==null;++g<w;)D[g]=F?n:M0(o,u[g]);return D}function vl(o,u,g){return o===o&&(g!==n&&(o=o<=g?o:g),u!==n&&(o=o>=u?o:u)),o}function Fi(o,u,g,w,D,F){var H,Y=u&p,ne=u&m,he=u&y;if(g&&(H=D?g(o,w,D,F):g(o)),H!==n)return H;if(!_n(o))return o;var fe=Ke(o);if(fe){if(H=jO(o),!Y)return $r(o,H)}else{var ve=Rr(o),xe=ve==Ye||ve==In;if(no(o))return zx(o,Y);if(ve==it||ve==X||xe&&!D){if(H=ne||xe?{}:sE(o),!Y)return ne?AO(o,W5(H,o)):TO(o,gx(H,o))}else{if(!Tt[ve])return D?o:{};H=PO(o,ve,Y)}}F||(F=new ds);var De=F.get(o);if(De)return De;F.set(o,H),kE(o)?o.forEach(function(Ve){H.add(Fi(Ve,u,g,Ve,o,F))}):OE(o)&&o.forEach(function(Ve,ut){H.set(ut,Fi(Ve,u,g,ut,o,F))});var Ue=he?ne?_0:y0:ne?Wr:or,Ze=fe?n:Ue(o);return jr(Ze||o,function(Ve,ut){Ze&&(ut=Ve,Ve=o[ut]),Eh(H,ut,Fi(Ve,u,g,ut,o,F))}),H}function X5(o){var u=or(o);return function(g){return vx(g,o,u)}}function vx(o,u,g){var w=g.length;if(o==null)return!w;for(o=Zt(o);w--;){var D=g[w],F=u[D],H=o[D];if(H===n&&!(D in o)||!F(H))return!1}return!0}function yx(o,u,g){if(typeof o!="function")throw new zi(a);return Ih(function(){o.apply(n,g)},u)}function Th(o,u,g,w){var D=-1,F=hl,H=!0,Y=o.length,ne=[],he=u.length;if(!Y)return ne;g&&(u=Qt(u,kt(g))),w?(F=Wa,H=!1):u.length>=i&&(F=Vi,H=!1,u=new gl(u));e:for(;++D<Y;){var fe=o[D],ve=g==null?fe:g(fe);if(fe=w||fe!==0?fe:0,H&&ve===ve){for(var xe=he;xe--;)if(u[xe]===ve)continue e;ne.push(fe)}else F(u,ve,w)||ne.push(fe)}return ne}var Za=Gx(Ns),_x=Gx(t0,!0);function K5(o,u){var g=!0;return Za(o,function(w,D,F){return g=!!u(w,D,F),g}),g}function fm(o,u,g){for(var w=-1,D=o.length;++w<D;){var F=o[w],H=u(F);if(H!=null&&(Y===n?H===H&&!di(H):g(H,Y)))var Y=H,ne=F}return ne}function Q5(o,u,g,w){var D=o.length;for(g=Qe(g),g<0&&(g=-g>D?0:D+g),w=w===n||w>D?D:Qe(w),w<0&&(w+=D),w=g>w?0:jE(w);g<w;)o[g++]=u;return o}function bx(o,u){var g=[];return Za(o,function(w,D,F){u(w,D,F)&&g.push(w)}),g}function pr(o,u,g,w,D){var F=-1,H=o.length;for(g||(g=VO),D||(D=[]);++F<H;){var Y=o[F];u>0&&g(Y)?u>1?pr(Y,u-1,g,w,D):cs(D,Y):w||(D[D.length]=Y)}return D}var e0=$x(),wx=$x(!0);function Ns(o,u){return o&&e0(o,u,or)}function t0(o,u){return o&&wx(o,u,or)}function dm(o,u){return Ui(u,function(g){return ha(o[g])})}function yl(o,u){u=eo(u,o);for(var g=0,w=u.length;o!=null&&g<w;)o=o[Ds(u[g++])];return g&&g==w?o:n}function xx(o,u,g){var w=u(o);return Ke(o)?w:cs(w,g(o))}function Pr(o){return o==null?o===n?et:Ut:ml&&ml in Zt(o)?MO(o):$O(o)}function n0(o,u){return o>u}function Z5(o,u){return o!=null&&Vt.call(o,u)}function J5(o,u){return o!=null&&u in Zt(o)}function eO(o,u,g){return o>=Sr(u,g)&&o<Jn(u,g)}function r0(o,u,g){for(var w=g?Wa:hl,D=o[0].length,F=o.length,H=F,Y=se(F),ne=1/0,he=[];H--;){var fe=o[H];H&&u&&(fe=Qt(fe,kt(u))),ne=Sr(fe.length,ne),Y[H]=!g&&(u||D>=120&&fe.length>=120)?new gl(H&&fe):n}fe=o[0];var ve=-1,xe=Y[0];e:for(;++ve<D&&he.length<ne;){var De=fe[ve],Ue=u?u(De):De;if(De=g||De!==0?De:0,!(xe?Vi(xe,Ue):w(he,Ue,g))){for(H=F;--H;){var Ze=Y[H];if(!(Ze?Vi(Ze,Ue):w(o[H],Ue,g)))continue e}xe&&xe.push(Ue),he.push(De)}}return he}function tO(o,u,g,w){return Ns(o,function(D,F,H){u(w,g(D),F,H)}),w}function Ah(o,u,g){u=eo(u,o),o=uE(o,u);var w=o==null?o:o[Ds(qi(u))];return w==null?n:Tr(w,o,g)}function Ex(o){return An(o)&&Pr(o)==X}function nO(o){return An(o)&&Pr(o)==Mt}function rO(o){return An(o)&&Pr(o)==$e}function Sh(o,u,g,w,D){return o===u?!0:o==null||u==null||!An(o)&&!An(u)?o!==o&&u!==u:iO(o,u,g,w,Sh,D)}function iO(o,u,g,w,D,F){var H=Ke(o),Y=Ke(u),ne=H?ce:Rr(o),he=Y?ce:Rr(u);ne=ne==X?it:ne,he=he==X?it:he;var fe=ne==it,ve=he==it,xe=ne==he;if(xe&&no(o)){if(!no(u))return!1;H=!0,fe=!1}if(xe&&!fe)return F||(F=new ds),H||ku(o)?nE(o,u,g,w,D,F):DO(o,u,ne,g,w,D,F);if(!(g&E)){var De=fe&&Vt.call(o,"__wrapped__"),Ue=ve&&Vt.call(u,"__wrapped__");if(De||Ue){var Ze=De?o.value():o,Ve=Ue?u.value():u;return F||(F=new ds),D(Ze,Ve,g,w,F)}}return xe?(F||(F=new ds),OO(o,u,g,w,D,F)):!1}function sO(o){return An(o)&&Rr(o)==Pt}function i0(o,u,g,w){var D=g.length,F=D,H=!w;if(o==null)return!F;for(o=Zt(o);D--;){var Y=g[D];if(H&&Y[2]?Y[1]!==o[Y[0]]:!(Y[0]in o))return!1}for(;++D<F;){Y=g[D];var ne=Y[0],he=o[ne],fe=Y[1];if(H&&Y[2]){if(he===n&&!(ne in o))return!1}else{var ve=new ds;if(w)var xe=w(he,fe,ne,o,u,ve);if(!(xe===n?Sh(fe,he,E|C,w,ve):xe))return!1}}return!0}function Tx(o){if(!_n(o)||BO(o))return!1;var u=ha(o)?s5:St;return u.test(bl(o))}function aO(o){return An(o)&&Pr(o)==Xt}function oO(o){return An(o)&&Rr(o)==st}function lO(o){return An(o)&&Im(o.length)&&!!Rt[Pr(o)]}function Ax(o){return typeof o=="function"?o:o==null?Xr:typeof o=="object"?Ke(o)?Cx(o[0],o[1]):Rx(o):YE(o)}function s0(o){if(!Nh(o))return h5(o);var u=[];for(var g in Zt(o))Vt.call(o,g)&&g!="constructor"&&u.push(g);return u}function uO(o){if(!_n(o))return GO(o);var u=Nh(o),g=[];for(var w in o)w=="constructor"&&(u||!Vt.call(o,w))||g.push(w);return g}function a0(o,u){return o<u}function Sx(o,u){var g=-1,w=Yr(o)?se(o.length):[];return Za(o,function(D,F,H){w[++g]=u(D,F,H)}),w}function Rx(o){var u=w0(o);return u.length==1&&u[0][2]?oE(u[0][0],u[0][1]):function(g){return g===o||i0(g,o,u)}}function Cx(o,u){return E0(o)&&aE(u)?oE(Ds(o),u):function(g){var w=M0(g,o);return w===n&&w===u?k0(g,o):Sh(u,w,E|C)}}function mm(o,u,g,w,D){o!==u&&e0(u,function(F,H){if(D||(D=new ds),_n(F))cO(o,u,H,g,mm,w,D);else{var Y=w?w(A0(o,H),F,H+"",o,u,D):n;Y===n&&(Y=F),Zv(o,H,Y)}},Wr)}function cO(o,u,g,w,D,F,H){var Y=A0(o,g),ne=A0(u,g),he=H.get(ne);if(he){Zv(o,g,he);return}var fe=F?F(Y,ne,g+"",o,u,H):n,ve=fe===n;if(ve){var xe=Ke(ne),De=!xe&&no(ne),Ue=!xe&&!De&&ku(ne);fe=ne,xe||De||Ue?Ke(Y)?fe=Y:Dn(Y)?fe=$r(Y):De?(ve=!1,fe=zx(ne,!0)):Ue?(ve=!1,fe=Bx(ne,!0)):fe=[]:Dh(ne)||wl(ne)?(fe=Y,wl(Y)?fe=PE(Y):(!_n(Y)||ha(Y))&&(fe=sE(ne))):ve=!1}ve&&(H.set(ne,fe),D(fe,ne,w,F,H),H.delete(ne)),Zv(o,g,fe)}function Nx(o,u){var g=o.length;if(g)return u+=u<0?g:0,ca(u,g)?o[u]:n}function Ix(o,u,g){u.length?u=Qt(u,function(F){return Ke(F)?function(H){return yl(H,F.length===1?F[0]:F)}:F}):u=[Xr];var w=-1;u=Qt(u,kt(Le()));var D=Sx(o,function(F,H,Y){var ne=Qt(u,function(he){return he(F)});return{criteria:ne,index:++w,value:F}});return oe(D,function(F,H){return EO(F,H,g)})}function hO(o,u){return Dx(o,u,function(g,w){return k0(o,w)})}function Dx(o,u,g){for(var w=-1,D=u.length,F={};++w<D;){var H=u[w],Y=yl(o,H);g(Y,H)&&Rh(F,eo(H,o),Y)}return F}function fO(o){return function(u){return yl(u,o)}}function o0(o,u,g,w){var D=w?Xa:ia,F=-1,H=u.length,Y=o;for(o===u&&(u=$r(u)),g&&(Y=Qt(o,kt(g)));++F<H;)for(var ne=0,he=u[F],fe=g?g(he):he;(ne=D(Y,fe,ne,w))>-1;)Y!==o&&im.call(Y,ne,1),im.call(o,ne,1);return o}function Ox(o,u){for(var g=o?u.length:0,w=g-1;g--;){var D=u[g];if(g==w||D!==F){var F=D;ca(D)?im.call(o,D,1):h0(o,D)}}return o}function l0(o,u){return o+om(fx()*(u-o+1))}function dO(o,u,g,w){for(var D=-1,F=Jn(am((u-o)/(g||1)),0),H=se(F);F--;)H[w?F:++D]=o,o+=g;return H}function u0(o,u){var g="";if(!o||u<1||u>Q)return g;do u%2&&(g+=o),u=om(u/2),u&&(o+=o);while(u);return g}function tt(o,u){return S0(lE(o,u,Xr),o+"")}function mO(o){return px(Lu(o))}function pO(o,u){var g=Lu(o);return Tm(g,vl(u,0,g.length))}function Rh(o,u,g,w){if(!_n(o))return o;u=eo(u,o);for(var D=-1,F=u.length,H=F-1,Y=o;Y!=null&&++D<F;){var ne=Ds(u[D]),he=g;if(ne==="__proto__"||ne==="constructor"||ne==="prototype")return o;if(D!=H){var fe=Y[ne];he=w?w(fe,ne,Y):n,he===n&&(he=_n(fe)?fe:ca(u[D+1])?[]:{})}Eh(Y,ne,he),Y=Y[ne]}return o}var Mx=lm?function(o,u){return lm.set(o,u),o}:Xr,gO=sm?function(o,u){return sm(o,"toString",{configurable:!0,enumerable:!1,value:j0(u),writable:!0})}:Xr;function vO(o){return Tm(Lu(o))}function Hi(o,u,g){var w=-1,D=o.length;u<0&&(u=-u>D?0:D+u),g=g>D?D:g,g<0&&(g+=D),D=u>g?0:g-u>>>0,u>>>=0;for(var F=se(D);++w<D;)F[w]=o[w+u];return F}function yO(o,u){var g;return Za(o,function(w,D,F){return g=u(w,D,F),!g}),!!g}function pm(o,u,g){var w=0,D=o==null?w:o.length;if(typeof u=="number"&&u===u&&D<=ye){for(;w<D;){var F=w+D>>>1,H=o[F];H!==null&&!di(H)&&(g?H<=u:H<u)?w=F+1:D=F}return D}return c0(o,u,Xr,g)}function c0(o,u,g,w){var D=0,F=o==null?0:o.length;if(F===0)return 0;u=g(u);for(var H=u!==u,Y=u===null,ne=di(u),he=u===n;D<F;){var fe=om((D+F)/2),ve=g(o[fe]),xe=ve!==n,De=ve===null,Ue=ve===ve,Ze=di(ve);if(H)var Ve=w||Ue;else he?Ve=Ue&&(w||xe):Y?Ve=Ue&&xe&&(w||!De):ne?Ve=Ue&&xe&&!De&&(w||!Ze):De||Ze?Ve=!1:Ve=w?ve<=u:ve<u;Ve?D=fe+1:F=fe}return Sr(F,pe)}function kx(o,u){for(var g=-1,w=o.length,D=0,F=[];++g<w;){var H=o[g],Y=u?u(H):H;if(!g||!ms(Y,ne)){var ne=Y;F[D++]=H===0?0:H}}return F}function Lx(o){return typeof o=="number"?o:di(o)?ae:+o}function fi(o){if(typeof o=="string")return o;if(Ke(o))return Qt(o,fi)+"";if(di(o))return dx?dx.call(o):"";var u=o+"";return u=="0"&&1/o==-U?"-0":u}function Ja(o,u,g){var w=-1,D=hl,F=o.length,H=!0,Y=[],ne=Y;if(g)H=!1,D=Wa;else if(F>=i){var he=u?null:NO(o);if(he)return Kd(he);H=!1,D=Vi,ne=new gl}else ne=u?[]:Y;e:for(;++w<F;){var fe=o[w],ve=u?u(fe):fe;if(fe=g||fe!==0?fe:0,H&&ve===ve){for(var xe=ne.length;xe--;)if(ne[xe]===ve)continue e;u&&ne.push(ve),Y.push(fe)}else D(ne,ve,g)||(ne!==Y&&ne.push(ve),Y.push(fe))}return Y}function h0(o,u){return u=eo(u,o),o=uE(o,u),o==null||delete o[Ds(qi(u))]}function jx(o,u,g,w){return Rh(o,u,g(yl(o,u)),w)}function gm(o,u,g,w){for(var D=o.length,F=w?D:-1;(w?F--:++F<D)&&u(o[F],F,o););return g?Hi(o,w?0:F,w?F+1:D):Hi(o,w?F+1:0,w?D:F)}function Px(o,u){var g=o;return g instanceof ft&&(g=g.value()),hs(u,function(w,D){return D.func.apply(D.thisArg,cs([w],D.args))},g)}function f0(o,u,g){var w=o.length;if(w<2)return w?Ja(o[0]):[];for(var D=-1,F=se(w);++D<w;)for(var H=o[D],Y=-1;++Y<w;)Y!=D&&(F[D]=Th(F[D]||H,o[Y],u,g));return Ja(pr(F,1),u,g)}function Ux(o,u,g){for(var w=-1,D=o.length,F=u.length,H={};++w<D;){var Y=w<F?u[w]:n;g(H,o[w],Y)}return H}function d0(o){return Dn(o)?o:[]}function m0(o){return typeof o=="function"?o:Xr}function eo(o,u){return Ke(o)?o:E0(o,u)?[o]:dE(Lt(o))}var _O=tt;function to(o,u,g){var w=o.length;return g=g===n?w:g,!u&&g>=w?o:Hi(o,u,g)}var Vx=a5||function(o){return Tn.clearTimeout(o)};function zx(o,u){if(u)return o.slice();var g=o.length,w=ox?ox(g):new o.constructor(g);return o.copy(w),w}function p0(o){var u=new o.constructor(o.byteLength);return new nm(u).set(new nm(o)),u}function bO(o,u){var g=u?p0(o.buffer):o.buffer;return new o.constructor(g,o.byteOffset,o.byteLength)}function wO(o){var u=new o.constructor(o.source,ze.exec(o));return u.lastIndex=o.lastIndex,u}function xO(o){return xh?Zt(xh.call(o)):{}}function Bx(o,u){var g=u?p0(o.buffer):o.buffer;return new o.constructor(g,o.byteOffset,o.length)}function Fx(o,u){if(o!==u){var g=o!==n,w=o===null,D=o===o,F=di(o),H=u!==n,Y=u===null,ne=u===u,he=di(u);if(!Y&&!he&&!F&&o>u||F&&H&&ne&&!Y&&!he||w&&H&&ne||!g&&ne||!D)return 1;if(!w&&!F&&!he&&o<u||he&&g&&D&&!w&&!F||Y&&g&&D||!H&&D||!ne)return-1}return 0}function EO(o,u,g){for(var w=-1,D=o.criteria,F=u.criteria,H=D.length,Y=g.length;++w<H;){var ne=Fx(D[w],F[w]);if(ne){if(w>=Y)return ne;var he=g[w];return ne*(he=="desc"?-1:1)}}return o.index-u.index}function Hx(o,u,g,w){for(var D=-1,F=o.length,H=g.length,Y=-1,ne=u.length,he=Jn(F-H,0),fe=se(ne+he),ve=!w;++Y<ne;)fe[Y]=u[Y];for(;++D<H;)(ve||D<F)&&(fe[g[D]]=o[D]);for(;he--;)fe[Y++]=o[D++];return fe}function qx(o,u,g,w){for(var D=-1,F=o.length,H=-1,Y=g.length,ne=-1,he=u.length,fe=Jn(F-Y,0),ve=se(fe+he),xe=!w;++D<fe;)ve[D]=o[D];for(var De=D;++ne<he;)ve[De+ne]=u[ne];for(;++H<Y;)(xe||D<F)&&(ve[De+g[H]]=o[D++]);return ve}function $r(o,u){var g=-1,w=o.length;for(u||(u=se(w));++g<w;)u[g]=o[g];return u}function Is(o,u,g,w){var D=!g;g||(g={});for(var F=-1,H=u.length;++F<H;){var Y=u[F],ne=w?w(g[Y],o[Y],Y,g,o):n;ne===n&&(ne=o[Y]),D?oa(g,Y,ne):Eh(g,Y,ne)}return g}function TO(o,u){return Is(o,x0(o),u)}function AO(o,u){return Is(o,rE(o),u)}function vm(o,u){return function(g,w){var D=Ke(g)?cl:Y5,F=u?u():{};return D(g,o,Le(w,2),F)}}function Du(o){return tt(function(u,g){var w=-1,D=g.length,F=D>1?g[D-1]:n,H=D>2?g[2]:n;for(F=o.length>3&&typeof F=="function"?(D--,F):n,H&&Ur(g[0],g[1],H)&&(F=D<3?n:F,D=1),u=Zt(u);++w<D;){var Y=g[w];Y&&o(u,Y,w,F)}return u})}function Gx(o,u){return function(g,w){if(g==null)return g;if(!Yr(g))return o(g,w);for(var D=g.length,F=u?D:-1,H=Zt(g);(u?F--:++F<D)&&w(H[F],F,H)!==!1;);return g}}function $x(o){return function(u,g,w){for(var D=-1,F=Zt(u),H=w(u),Y=H.length;Y--;){var ne=H[o?Y:++D];if(g(F[ne],ne,F)===!1)break}return u}}function SO(o,u,g){var w=u&I,D=Ch(o);function F(){var H=this&&this!==Tn&&this instanceof F?D:o;return H.apply(w?g:this,arguments)}return F}function Yx(o){return function(u){u=Lt(u);var g=Tu(u)?fs(u):n,w=g?g[0]:u.charAt(0),D=g?to(g,1).join(""):u.slice(1);return w[o]()+D}}function Ou(o){return function(u){return hs(GE(qE(u).replace(Bv,"")),o,"")}}function Ch(o){return function(){var u=arguments;switch(u.length){case 0:return new o;case 1:return new o(u[0]);case 2:return new o(u[0],u[1]);case 3:return new o(u[0],u[1],u[2]);case 4:return new o(u[0],u[1],u[2],u[3]);case 5:return new o(u[0],u[1],u[2],u[3],u[4]);case 6:return new o(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new o(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var g=Iu(o.prototype),w=o.apply(g,u);return _n(w)?w:g}}function RO(o,u,g){var w=Ch(o);function D(){for(var F=arguments.length,H=se(F),Y=F,ne=Mu(D);Y--;)H[Y]=arguments[Y];var he=F<3&&H[0]!==ne&&H[F-1]!==ne?[]:Ka(H,ne);if(F-=he.length,F<g)return Zx(o,u,ym,D.placeholder,n,H,he,n,n,g-F);var fe=this&&this!==Tn&&this instanceof D?w:o;return Tr(fe,this,H)}return D}function Wx(o){return function(u,g,w){var D=Zt(u);if(!Yr(u)){var F=Le(g,3);u=or(u),g=function(Y){return F(D[Y],Y,D)}}var H=o(u,g,w);return H>-1?D[F?u[H]:H]:n}}function Xx(o){return ua(function(u){var g=u.length,w=g,D=Bi.prototype.thru;for(o&&u.reverse();w--;){var F=u[w];if(typeof F!="function")throw new zi(a);if(D&&!H&&xm(F)=="wrapper")var H=new Bi([],!0)}for(w=H?w:g;++w<g;){F=u[w];var Y=xm(F),ne=Y=="wrapper"?b0(F):n;ne&&T0(ne[0])&&ne[1]==(T|M|q|_)&&!ne[4].length&&ne[9]==1?H=H[xm(ne[0])].apply(H,ne[3]):H=F.length==1&&T0(F)?H[Y]():H.thru(F)}return function(){var he=arguments,fe=he[0];if(H&&he.length==1&&Ke(fe))return H.plant(fe).value();for(var ve=0,xe=g?u[ve].apply(this,he):fe;++ve<g;)xe=u[ve].call(this,xe);return xe}})}function ym(o,u,g,w,D,F,H,Y,ne,he){var fe=u&T,ve=u&I,xe=u&A,De=u&(M|P),Ue=u&x,Ze=xe?n:Ch(o);function Ve(){for(var ut=arguments.length,yt=se(ut),mi=ut;mi--;)yt[mi]=arguments[mi];if(De)var Vr=Mu(Ve),pi=vh(yt,Vr);if(w&&(yt=Hx(yt,w,D,De)),F&&(yt=qx(yt,F,H,De)),ut-=pi,De&&ut<he){var On=Ka(yt,Vr);return Zx(o,u,ym,Ve.placeholder,g,yt,On,Y,ne,he-ut)}var ps=ve?g:this,da=xe?ps[o]:o;return ut=yt.length,Y?yt=YO(yt,Y):Ue&&ut>1&&yt.reverse(),fe&&ne<ut&&(yt.length=ne),this&&this!==Tn&&this instanceof Ve&&(da=Ze||Ch(da)),da.apply(ps,yt)}return Ve}function Kx(o,u){return function(g,w){return tO(g,o,u(w),{})}}function _m(o,u){return function(g,w){var D;if(g===n&&w===n)return u;if(g!==n&&(D=g),w!==n){if(D===n)return w;typeof g=="string"||typeof w=="string"?(g=fi(g),w=fi(w)):(g=Lx(g),w=Lx(w)),D=o(g,w)}return D}}function g0(o){return ua(function(u){return u=Qt(u,kt(Le())),tt(function(g){var w=this;return o(u,function(D){return Tr(D,w,g)})})})}function bm(o,u){u=u===n?" ":fi(u);var g=u.length;if(g<2)return g?u0(u,o):u;var w=u0(u,am(o/Au(u)));return Tu(u)?to(fs(w),0,o).join(""):w.slice(0,o)}function CO(o,u,g,w){var D=u&I,F=Ch(o);function H(){for(var Y=-1,ne=arguments.length,he=-1,fe=w.length,ve=se(fe+ne),xe=this&&this!==Tn&&this instanceof H?F:o;++he<fe;)ve[he]=w[he];for(;ne--;)ve[he++]=arguments[++Y];return Tr(xe,D?g:this,ve)}return H}function Qx(o){return function(u,g,w){return w&&typeof w!="number"&&Ur(u,g,w)&&(g=w=n),u=fa(u),g===n?(g=u,u=0):g=fa(g),w=w===n?u<g?1:-1:fa(w),dO(u,g,w,o)}}function wm(o){return function(u,g){return typeof u=="string"&&typeof g=="string"||(u=Gi(u),g=Gi(g)),o(u,g)}}function Zx(o,u,g,w,D,F,H,Y,ne,he){var fe=u&M,ve=fe?H:n,xe=fe?n:H,De=fe?F:n,Ue=fe?n:F;u|=fe?q:L,u&=~(fe?L:q),u&N||(u&=-4);var Ze=[o,u,D,De,ve,Ue,xe,Y,ne,he],Ve=g.apply(n,Ze);return T0(o)&&cE(Ve,Ze),Ve.placeholder=w,hE(Ve,o,u)}function v0(o){var u=Zn[o];return function(g,w){if(g=Gi(g),w=w==null?0:Sr(Qe(w),292),w&&hx(g)){var D=(Lt(g)+"e").split("e"),F=u(D[0]+"e"+(+D[1]+w));return D=(Lt(F)+"e").split("e"),+(D[0]+"e"+(+D[1]-w))}return u(g)}}var NO=Cu&&1/Kd(new Cu([,-0]))[1]==U?function(o){return new Cu(o)}:V0;function Jx(o){return function(u){var g=Rr(u);return g==Pt?Yv(u):g==st?$D(u):Qn(u,o(u))}}function la(o,u,g,w,D,F,H,Y){var ne=u&A;if(!ne&&typeof o!="function")throw new zi(a);var he=w?w.length:0;if(he||(u&=-97,w=D=n),H=H===n?H:Jn(Qe(H),0),Y=Y===n?Y:Qe(Y),he-=D?D.length:0,u&L){var fe=w,ve=D;w=D=n}var xe=ne?n:b0(o),De=[o,u,g,w,D,fe,ve,F,H,Y];if(xe&&qO(De,xe),o=De[0],u=De[1],g=De[2],w=De[3],D=De[4],Y=De[9]=De[9]===n?ne?0:o.length:Jn(De[9]-he,0),!Y&&u&(M|P)&&(u&=-25),!u||u==I)var Ue=SO(o,u,g);else u==M||u==P?Ue=RO(o,u,Y):(u==q||u==(I|q))&&!D.length?Ue=CO(o,u,g,w):Ue=ym.apply(n,De);var Ze=xe?Mx:cE;return hE(Ze(Ue,De),o,u)}function eE(o,u,g,w){return o===n||ms(o,Ru[g])&&!Vt.call(w,g)?u:o}function tE(o,u,g,w,D,F){return _n(o)&&_n(u)&&(F.set(u,o),mm(o,u,n,tE,F),F.delete(u)),o}function IO(o){return Dh(o)?n:o}function nE(o,u,g,w,D,F){var H=g&E,Y=o.length,ne=u.length;if(Y!=ne&&!(H&&ne>Y))return!1;var he=F.get(o),fe=F.get(u);if(he&&fe)return he==u&&fe==o;var ve=-1,xe=!0,De=g&C?new gl:n;for(F.set(o,u),F.set(u,o);++ve<Y;){var Ue=o[ve],Ze=u[ve];if(w)var Ve=H?w(Ze,Ue,ve,u,o,F):w(Ue,Ze,ve,o,u,F);if(Ve!==n){if(Ve)continue;xe=!1;break}if(De){if(!xu(u,function(ut,yt){if(!Vi(De,yt)&&(Ue===ut||D(Ue,ut,g,w,F)))return De.push(yt)})){xe=!1;break}}else if(!(Ue===Ze||D(Ue,Ze,g,w,F))){xe=!1;break}}return F.delete(o),F.delete(u),xe}function DO(o,u,g,w,D,F,H){switch(g){case at:if(o.byteLength!=u.byteLength||o.byteOffset!=u.byteOffset)return!1;o=o.buffer,u=u.buffer;case Mt:return!(o.byteLength!=u.byteLength||!F(new nm(o),new nm(u)));case ke:case $e:case bt:return ms(+o,+u);case gt:return o.name==u.name&&o.message==u.message;case Xt:case yn:return o==u+"";case Pt:var Y=Yv;case st:var ne=w&E;if(Y||(Y=Kd),o.size!=u.size&&!ne)return!1;var he=H.get(o);if(he)return he==u;w|=C,H.set(o,u);var fe=nE(Y(o),Y(u),w,D,F,H);return H.delete(o),fe;case At:if(xh)return xh.call(o)==xh.call(u)}return!1}function OO(o,u,g,w,D,F){var H=g&E,Y=y0(o),ne=Y.length,he=y0(u),fe=he.length;if(ne!=fe&&!H)return!1;for(var ve=ne;ve--;){var xe=Y[ve];if(!(H?xe in u:Vt.call(u,xe)))return!1}var De=F.get(o),Ue=F.get(u);if(De&&Ue)return De==u&&Ue==o;var Ze=!0;F.set(o,u),F.set(u,o);for(var Ve=H;++ve<ne;){xe=Y[ve];var ut=o[xe],yt=u[xe];if(w)var mi=H?w(yt,ut,xe,u,o,F):w(ut,yt,xe,o,u,F);if(!(mi===n?ut===yt||D(ut,yt,g,w,F):mi)){Ze=!1;break}Ve||(Ve=xe=="constructor")}if(Ze&&!Ve){var Vr=o.constructor,pi=u.constructor;Vr!=pi&&"constructor"in o&&"constructor"in u&&!(typeof Vr=="function"&&Vr instanceof Vr&&typeof pi=="function"&&pi instanceof pi)&&(Ze=!1)}return F.delete(o),F.delete(u),Ze}function ua(o){return S0(lE(o,n,vE),o+"")}function y0(o){return xx(o,or,x0)}function _0(o){return xx(o,Wr,rE)}var b0=lm?function(o){return lm.get(o)}:V0;function xm(o){for(var u=o.name+"",g=Nu[u],w=Vt.call(Nu,u)?g.length:0;w--;){var D=g[w],F=D.func;if(F==null||F==o)return D.name}return u}function Mu(o){var u=Vt.call(V,"placeholder")?V:o;return u.placeholder}function Le(){var o=V.iteratee||P0;return o=o===P0?Ax:o,arguments.length?o(arguments[0],arguments[1]):o}function Em(o,u){var g=o.__data__;return zO(u)?g[typeof u=="string"?"string":"hash"]:g.map}function w0(o){for(var u=or(o),g=u.length;g--;){var w=u[g],D=o[w];u[g]=[w,D,aE(D)]}return u}function _l(o,u){var g=HD(o,u);return Tx(g)?g:n}function MO(o){var u=Vt.call(o,ml),g=o[ml];try{o[ml]=n;var w=!0}catch{}var D=em.call(o);return w&&(u?o[ml]=g:delete o[ml]),D}var x0=Xv?function(o){return o==null?[]:(o=Zt(o),Ui(Xv(o),function(u){return ux.call(o,u)}))}:z0,rE=Xv?function(o){for(var u=[];o;)cs(u,x0(o)),o=rm(o);return u}:z0,Rr=Pr;(Kv&&Rr(new Kv(new ArrayBuffer(1)))!=at||_h&&Rr(new _h)!=Pt||Qv&&Rr(Qv.resolve())!=Et||Cu&&Rr(new Cu)!=st||bh&&Rr(new bh)!=Ht)&&(Rr=function(o){var u=Pr(o),g=u==it?o.constructor:n,w=g?bl(g):"";if(w)switch(w){case p5:return at;case g5:return Pt;case v5:return Et;case y5:return st;case _5:return Ht}return u});function kO(o,u,g){for(var w=-1,D=g.length;++w<D;){var F=g[w],H=F.size;switch(F.type){case"drop":o+=H;break;case"dropRight":u-=H;break;case"take":u=Sr(u,o+H);break;case"takeRight":o=Jn(o,u-H);break}}return{start:o,end:u}}function LO(o){var u=o.match(Ne);return u?u[1].split(Pe):[]}function iE(o,u,g){u=eo(u,o);for(var w=-1,D=u.length,F=!1;++w<D;){var H=Ds(u[w]);if(!(F=o!=null&&g(o,H)))break;o=o[H]}return F||++w!=D?F:(D=o==null?0:o.length,!!D&&Im(D)&&ca(H,D)&&(Ke(o)||wl(o)))}function jO(o){var u=o.length,g=new o.constructor(u);return u&&typeof o[0]=="string"&&Vt.call(o,"index")&&(g.index=o.index,g.input=o.input),g}function sE(o){return typeof o.constructor=="function"&&!Nh(o)?Iu(rm(o)):{}}function PO(o,u,g){var w=o.constructor;switch(u){case Mt:return p0(o);case ke:case $e:return new w(+o);case at:return bO(o,g);case un:case sn:case xn:case cn:case an:case Pn:case ir:case Ii:case ta:return Bx(o,g);case Pt:return new w;case bt:case yn:return new w(o);case Xt:return wO(o);case st:return new w;case At:return xO(o)}}function UO(o,u){var g=u.length;if(!g)return o;var w=g-1;return u[w]=(g>1?"& ":"")+u[w],u=u.join(g>2?", ":" "),o.replace(we,`{
/* [wrapped with `+u+`] */
`)}function VO(o){return Ke(o)||wl(o)||!!(cx&&o&&o[cx])}function ca(o,u){var g=typeof o;return u=u??Q,!!u&&(g=="number"||g!="symbol"&&qt.test(o))&&o>-1&&o%1==0&&o<u}function Ur(o,u,g){if(!_n(g))return!1;var w=typeof u;return(w=="number"?Yr(g)&&ca(u,g.length):w=="string"&&u in g)?ms(g[u],o):!1}function E0(o,u){if(Ke(o))return!1;var g=typeof o;return g=="number"||g=="symbol"||g=="boolean"||o==null||di(o)?!0:gu.test(o)||!Un.test(o)||u!=null&&o in Zt(u)}function zO(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function T0(o){var u=xm(o),g=V[u];if(typeof g!="function"||!(u in ft.prototype))return!1;if(o===g)return!0;var w=b0(g);return!!w&&o===w[0]}function BO(o){return!!ax&&ax in o}var FO=Zd?ha:B0;function Nh(o){var u=o&&o.constructor,g=typeof u=="function"&&u.prototype||Ru;return o===g}function aE(o){return o===o&&!_n(o)}function oE(o,u){return function(g){return g==null?!1:g[o]===u&&(u!==n||o in Zt(g))}}function HO(o){var u=Cm(o,function(w){return g.size===d&&g.clear(),w}),g=u.cache;return u}function qO(o,u){var g=o[1],w=u[1],D=g|w,F=D<(I|A|T),H=w==T&&g==M||w==T&&g==_&&o[7].length<=u[8]||w==(T|_)&&u[7].length<=u[8]&&g==M;if(!(F||H))return o;w&I&&(o[2]=u[2],D|=g&I?0:N);var Y=u[3];if(Y){var ne=o[3];o[3]=ne?Hx(ne,Y,u[4]):Y,o[4]=ne?Ka(o[3],f):u[4]}return Y=u[5],Y&&(ne=o[5],o[5]=ne?qx(ne,Y,u[6]):Y,o[6]=ne?Ka(o[5],f):u[6]),Y=u[7],Y&&(o[7]=Y),w&T&&(o[8]=o[8]==null?u[8]:Sr(o[8],u[8])),o[9]==null&&(o[9]=u[9]),o[0]=u[0],o[1]=D,o}function GO(o){var u=[];if(o!=null)for(var g in Zt(o))u.push(g);return u}function $O(o){return em.call(o)}function lE(o,u,g){return u=Jn(u===n?o.length-1:u,0),function(){for(var w=arguments,D=-1,F=Jn(w.length-u,0),H=se(F);++D<F;)H[D]=w[u+D];D=-1;for(var Y=se(u+1);++D<u;)Y[D]=w[D];return Y[u]=g(H),Tr(o,this,Y)}}function uE(o,u){return u.length<2?o:yl(o,Hi(u,0,-1))}function YO(o,u){for(var g=o.length,w=Sr(u.length,g),D=$r(o);w--;){var F=u[w];o[w]=ca(F,g)?D[F]:n}return o}function A0(o,u){if(!(u==="constructor"&&typeof o[u]=="function")&&u!="__proto__")return o[u]}var cE=fE(Mx),Ih=l5||function(o,u){return Tn.setTimeout(o,u)},S0=fE(gO);function hE(o,u,g){var w=u+"";return S0(o,UO(w,WO(LO(w),g)))}function fE(o){var u=0,g=0;return function(){var w=f5(),D=O-(w-g);if(g=w,D>0){if(++u>=j)return arguments[0]}else u=0;return o.apply(n,arguments)}}function Tm(o,u){var g=-1,w=o.length,D=w-1;for(u=u===n?w:u;++g<u;){var F=l0(g,D),H=o[F];o[F]=o[g],o[g]=H}return o.length=u,o}var dE=HO(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace(Kn,function(g,w,D,F){u.push(D?F.replace(Te,"$1"):w||g)}),u});function Ds(o){if(typeof o=="string"||di(o))return o;var u=o+"";return u=="0"&&1/o==-U?"-0":u}function bl(o){if(o!=null){try{return Jd.call(o)}catch{}try{return o+""}catch{}}return""}function WO(o,u){return jr(W,function(g){var w="_."+g[0];u&g[1]&&!hl(o,w)&&o.push(w)}),o.sort()}function mE(o){if(o instanceof ft)return o.clone();var u=new Bi(o.__wrapped__,o.__chain__);return u.__actions__=$r(o.__actions__),u.__index__=o.__index__,u.__values__=o.__values__,u}function XO(o,u,g){(g?Ur(o,u,g):u===n)?u=1:u=Jn(Qe(u),0);var w=o==null?0:o.length;if(!w||u<1)return[];for(var D=0,F=0,H=se(am(w/u));D<w;)H[F++]=Hi(o,D,D+=u);return H}function KO(o){for(var u=-1,g=o==null?0:o.length,w=0,D=[];++u<g;){var F=o[u];F&&(D[w++]=F)}return D}function QO(){var o=arguments.length;if(!o)return[];for(var u=se(o-1),g=arguments[0],w=o;w--;)u[w-1]=arguments[w];return cs(Ke(g)?$r(g):[g],pr(u,1))}var ZO=tt(function(o,u){return Dn(o)?Th(o,pr(u,1,Dn,!0)):[]}),JO=tt(function(o,u){var g=qi(u);return Dn(g)&&(g=n),Dn(o)?Th(o,pr(u,1,Dn,!0),Le(g,2)):[]}),eM=tt(function(o,u){var g=qi(u);return Dn(g)&&(g=n),Dn(o)?Th(o,pr(u,1,Dn,!0),n,g):[]});function tM(o,u,g){var w=o==null?0:o.length;return w?(u=g||u===n?1:Qe(u),Hi(o,u<0?0:u,w)):[]}function nM(o,u,g){var w=o==null?0:o.length;return w?(u=g||u===n?1:Qe(u),u=w-u,Hi(o,0,u<0?0:u)):[]}function rM(o,u){return o&&o.length?gm(o,Le(u,3),!0,!0):[]}function iM(o,u){return o&&o.length?gm(o,Le(u,3),!0):[]}function sM(o,u,g,w){var D=o==null?0:o.length;return D?(g&&typeof g!="number"&&Ur(o,u,g)&&(g=0,w=D),Q5(o,u,g,w)):[]}function pE(o,u,g){var w=o==null?0:o.length;if(!w)return-1;var D=g==null?0:Qe(g);return D<0&&(D=Jn(w+D,0)),fl(o,Le(u,3),D)}function gE(o,u,g){var w=o==null?0:o.length;if(!w)return-1;var D=w-1;return g!==n&&(D=Qe(g),D=g<0?Jn(w+D,0):Sr(D,w-1)),fl(o,Le(u,3),D,!0)}function vE(o){var u=o==null?0:o.length;return u?pr(o,1):[]}function aM(o){var u=o==null?0:o.length;return u?pr(o,U):[]}function oM(o,u){var g=o==null?0:o.length;return g?(u=u===n?1:Qe(u),pr(o,u)):[]}function lM(o){for(var u=-1,g=o==null?0:o.length,w={};++u<g;){var D=o[u];w[D[0]]=D[1]}return w}function yE(o){return o&&o.length?o[0]:n}function uM(o,u,g){var w=o==null?0:o.length;if(!w)return-1;var D=g==null?0:Qe(g);return D<0&&(D=Jn(w+D,0)),ia(o,u,D)}function cM(o){var u=o==null?0:o.length;return u?Hi(o,0,-1):[]}var hM=tt(function(o){var u=Qt(o,d0);return u.length&&u[0]===o[0]?r0(u):[]}),fM=tt(function(o){var u=qi(o),g=Qt(o,d0);return u===qi(g)?u=n:g.pop(),g.length&&g[0]===o[0]?r0(g,Le(u,2)):[]}),dM=tt(function(o){var u=qi(o),g=Qt(o,d0);return u=typeof u=="function"?u:n,u&&g.pop(),g.length&&g[0]===o[0]?r0(g,n,u):[]});function mM(o,u){return o==null?"":c5.call(o,u)}function qi(o){var u=o==null?0:o.length;return u?o[u-1]:n}function pM(o,u,g){var w=o==null?0:o.length;if(!w)return-1;var D=w;return g!==n&&(D=Qe(g),D=D<0?Jn(w+D,0):Sr(D,w-1)),u===u?WD(o,u,D):fl(o,h,D,!0)}function gM(o,u){return o&&o.length?Nx(o,Qe(u)):n}var vM=tt(_E);function _E(o,u){return o&&o.length&&u&&u.length?o0(o,u):o}function yM(o,u,g){return o&&o.length&&u&&u.length?o0(o,u,Le(g,2)):o}function _M(o,u,g){return o&&o.length&&u&&u.length?o0(o,u,n,g):o}var bM=ua(function(o,u){var g=o==null?0:o.length,w=Jv(o,u);return Ox(o,Qt(u,function(D){return ca(D,g)?+D:D}).sort(Fx)),w});function wM(o,u){var g=[];if(!(o&&o.length))return g;var w=-1,D=[],F=o.length;for(u=Le(u,3);++w<F;){var H=o[w];u(H,w,o)&&(g.push(H),D.push(w))}return Ox(o,D),g}function R0(o){return o==null?o:m5.call(o)}function xM(o,u,g){var w=o==null?0:o.length;return w?(g&&typeof g!="number"&&Ur(o,u,g)?(u=0,g=w):(u=u==null?0:Qe(u),g=g===n?w:Qe(g)),Hi(o,u,g)):[]}function EM(o,u){return pm(o,u)}function TM(o,u,g){return c0(o,u,Le(g,2))}function AM(o,u){var g=o==null?0:o.length;if(g){var w=pm(o,u);if(w<g&&ms(o[w],u))return w}return-1}function SM(o,u){return pm(o,u,!0)}function RM(o,u,g){return c0(o,u,Le(g,2),!0)}function CM(o,u){var g=o==null?0:o.length;if(g){var w=pm(o,u,!0)-1;if(ms(o[w],u))return w}return-1}function NM(o){return o&&o.length?kx(o):[]}function IM(o,u){return o&&o.length?kx(o,Le(u,2)):[]}function DM(o){var u=o==null?0:o.length;return u?Hi(o,1,u):[]}function OM(o,u,g){return o&&o.length?(u=g||u===n?1:Qe(u),Hi(o,0,u<0?0:u)):[]}function MM(o,u,g){var w=o==null?0:o.length;return w?(u=g||u===n?1:Qe(u),u=w-u,Hi(o,u<0?0:u,w)):[]}function kM(o,u){return o&&o.length?gm(o,Le(u,3),!1,!0):[]}function LM(o,u){return o&&o.length?gm(o,Le(u,3)):[]}var jM=tt(function(o){return Ja(pr(o,1,Dn,!0))}),PM=tt(function(o){var u=qi(o);return Dn(u)&&(u=n),Ja(pr(o,1,Dn,!0),Le(u,2))}),UM=tt(function(o){var u=qi(o);return u=typeof u=="function"?u:n,Ja(pr(o,1,Dn,!0),n,u)});function VM(o){return o&&o.length?Ja(o):[]}function zM(o,u){return o&&o.length?Ja(o,Le(u,2)):[]}function BM(o,u){return u=typeof u=="function"?u:n,o&&o.length?Ja(o,n,u):[]}function C0(o){if(!(o&&o.length))return[];var u=0;return o=Ui(o,function(g){if(Dn(g))return u=Jn(g.length,u),!0}),Ct(u,function(g){return Qt(o,R(g))})}function bE(o,u){if(!(o&&o.length))return[];var g=C0(o);return u==null?g:Qt(g,function(w){return Tr(u,n,w)})}var FM=tt(function(o,u){return Dn(o)?Th(o,u):[]}),HM=tt(function(o){return f0(Ui(o,Dn))}),qM=tt(function(o){var u=qi(o);return Dn(u)&&(u=n),f0(Ui(o,Dn),Le(u,2))}),GM=tt(function(o){var u=qi(o);return u=typeof u=="function"?u:n,f0(Ui(o,Dn),n,u)}),$M=tt(C0);function YM(o,u){return Ux(o||[],u||[],Eh)}function WM(o,u){return Ux(o||[],u||[],Rh)}var XM=tt(function(o){var u=o.length,g=u>1?o[u-1]:n;return g=typeof g=="function"?(o.pop(),g):n,bE(o,g)});function wE(o){var u=V(o);return u.__chain__=!0,u}function KM(o,u){return u(o),o}function Am(o,u){return u(o)}var QM=ua(function(o){var u=o.length,g=u?o[0]:0,w=this.__wrapped__,D=function(F){return Jv(F,o)};return u>1||this.__actions__.length||!(w instanceof ft)||!ca(g)?this.thru(D):(w=w.slice(g,+g+(u?1:0)),w.__actions__.push({func:Am,args:[D],thisArg:n}),new Bi(w,this.__chain__).thru(function(F){return u&&!F.length&&F.push(n),F}))});function ZM(){return wE(this)}function JM(){return new Bi(this.value(),this.__chain__)}function e6(){this.__values__===n&&(this.__values__=LE(this.value()));var o=this.__index__>=this.__values__.length,u=o?n:this.__values__[this.__index__++];return{done:o,value:u}}function t6(){return this}function n6(o){for(var u,g=this;g instanceof cm;){var w=mE(g);w.__index__=0,w.__values__=n,u?D.__wrapped__=w:u=w;var D=w;g=g.__wrapped__}return D.__wrapped__=o,u}function r6(){var o=this.__wrapped__;if(o instanceof ft){var u=o;return this.__actions__.length&&(u=new ft(this)),u=u.reverse(),u.__actions__.push({func:Am,args:[R0],thisArg:n}),new Bi(u,this.__chain__)}return this.thru(R0)}function i6(){return Px(this.__wrapped__,this.__actions__)}var s6=vm(function(o,u,g){Vt.call(o,g)?++o[g]:oa(o,g,1)});function a6(o,u,g){var w=Ke(o)?wu:K5;return g&&Ur(o,u,g)&&(u=n),w(o,Le(u,3))}function o6(o,u){var g=Ke(o)?Ui:bx;return g(o,Le(u,3))}var l6=Wx(pE),u6=Wx(gE);function c6(o,u){return pr(Sm(o,u),1)}function h6(o,u){return pr(Sm(o,u),U)}function f6(o,u,g){return g=g===n?1:Qe(g),pr(Sm(o,u),g)}function xE(o,u){var g=Ke(o)?jr:Za;return g(o,Le(u,3))}function EE(o,u){var g=Ke(o)?$d:_x;return g(o,Le(u,3))}var d6=vm(function(o,u,g){Vt.call(o,g)?o[g].push(u):oa(o,g,[u])});function m6(o,u,g,w){o=Yr(o)?o:Lu(o),g=g&&!w?Qe(g):0;var D=o.length;return g<0&&(g=Jn(D+g,0)),Dm(o)?g<=D&&o.indexOf(u,g)>-1:!!D&&ia(o,u,g)>-1}var p6=tt(function(o,u,g){var w=-1,D=typeof u=="function",F=Yr(o)?se(o.length):[];return Za(o,function(H){F[++w]=D?Tr(u,H,g):Ah(H,u,g)}),F}),g6=vm(function(o,u,g){oa(o,g,u)});function Sm(o,u){var g=Ke(o)?Qt:Sx;return g(o,Le(u,3))}function v6(o,u,g,w){return o==null?[]:(Ke(u)||(u=u==null?[]:[u]),g=w?n:g,Ke(g)||(g=g==null?[]:[g]),Ix(o,u,g))}var y6=vm(function(o,u,g){o[g?0:1].push(u)},function(){return[[],[]]});function _6(o,u,g){var w=Ke(o)?hs:re,D=arguments.length<3;return w(o,Le(u,4),g,D,Za)}function b6(o,u,g){var w=Ke(o)?Yd:re,D=arguments.length<3;return w(o,Le(u,4),g,D,_x)}function w6(o,u){var g=Ke(o)?Ui:bx;return g(o,Nm(Le(u,3)))}function x6(o){var u=Ke(o)?px:mO;return u(o)}function E6(o,u,g){(g?Ur(o,u,g):u===n)?u=1:u=Qe(u);var w=Ke(o)?G5:pO;return w(o,u)}function T6(o){var u=Ke(o)?$5:vO;return u(o)}function A6(o){if(o==null)return 0;if(Yr(o))return Dm(o)?Au(o):o.length;var u=Rr(o);return u==Pt||u==st?o.size:s0(o).length}function S6(o,u,g){var w=Ke(o)?xu:yO;return g&&Ur(o,u,g)&&(u=n),w(o,Le(u,3))}var R6=tt(function(o,u){if(o==null)return[];var g=u.length;return g>1&&Ur(o,u[0],u[1])?u=[]:g>2&&Ur(u[0],u[1],u[2])&&(u=[u[0]]),Ix(o,pr(u,1),[])}),Rm=o5||function(){return Tn.Date.now()};function C6(o,u){if(typeof u!="function")throw new zi(a);return o=Qe(o),function(){if(--o<1)return u.apply(this,arguments)}}function TE(o,u,g){return u=g?n:u,u=o&&u==null?o.length:u,la(o,T,n,n,n,n,u)}function AE(o,u){var g;if(typeof u!="function")throw new zi(a);return o=Qe(o),function(){return--o>0&&(g=u.apply(this,arguments)),o<=1&&(u=n),g}}var N0=tt(function(o,u,g){var w=I;if(g.length){var D=Ka(g,Mu(N0));w|=q}return la(o,w,u,g,D)}),SE=tt(function(o,u,g){var w=I|A;if(g.length){var D=Ka(g,Mu(SE));w|=q}return la(u,w,o,g,D)});function RE(o,u,g){u=g?n:u;var w=la(o,M,n,n,n,n,n,u);return w.placeholder=RE.placeholder,w}function CE(o,u,g){u=g?n:u;var w=la(o,P,n,n,n,n,n,u);return w.placeholder=CE.placeholder,w}function NE(o,u,g){var w,D,F,H,Y,ne,he=0,fe=!1,ve=!1,xe=!0;if(typeof o!="function")throw new zi(a);u=Gi(u)||0,_n(g)&&(fe=!!g.leading,ve="maxWait"in g,F=ve?Jn(Gi(g.maxWait)||0,u):F,xe="trailing"in g?!!g.trailing:xe);function De(On){var ps=w,da=D;return w=D=n,he=On,H=o.apply(da,ps),H}function Ue(On){return he=On,Y=Ih(ut,u),fe?De(On):H}function Ze(On){var ps=On-ne,da=On-he,WE=u-ps;return ve?Sr(WE,F-da):WE}function Ve(On){var ps=On-ne,da=On-he;return ne===n||ps>=u||ps<0||ve&&da>=F}function ut(){var On=Rm();if(Ve(On))return yt(On);Y=Ih(ut,Ze(On))}function yt(On){return Y=n,xe&&w?De(On):(w=D=n,H)}function mi(){Y!==n&&Vx(Y),he=0,w=ne=D=Y=n}function Vr(){return Y===n?H:yt(Rm())}function pi(){var On=Rm(),ps=Ve(On);if(w=arguments,D=this,ne=On,ps){if(Y===n)return Ue(ne);if(ve)return Vx(Y),Y=Ih(ut,u),De(ne)}return Y===n&&(Y=Ih(ut,u)),H}return pi.cancel=mi,pi.flush=Vr,pi}var N6=tt(function(o,u){return yx(o,1,u)}),I6=tt(function(o,u,g){return yx(o,Gi(u)||0,g)});function D6(o){return la(o,x)}function Cm(o,u){if(typeof o!="function"||u!=null&&typeof u!="function")throw new zi(a);var g=function(){var w=arguments,D=u?u.apply(this,w):w[0],F=g.cache;if(F.has(D))return F.get(D);var H=o.apply(this,w);return g.cache=F.set(D,H)||F,H};return g.cache=new(Cm.Cache||aa),g}Cm.Cache=aa;function Nm(o){if(typeof o!="function")throw new zi(a);return function(){var u=arguments;switch(u.length){case 0:return!o.call(this);case 1:return!o.call(this,u[0]);case 2:return!o.call(this,u[0],u[1]);case 3:return!o.call(this,u[0],u[1],u[2])}return!o.apply(this,u)}}function O6(o){return AE(2,o)}var M6=_O(function(o,u){u=u.length==1&&Ke(u[0])?Qt(u[0],kt(Le())):Qt(pr(u,1),kt(Le()));var g=u.length;return tt(function(w){for(var D=-1,F=Sr(w.length,g);++D<F;)w[D]=u[D].call(this,w[D]);return Tr(o,this,w)})}),I0=tt(function(o,u){var g=Ka(u,Mu(I0));return la(o,q,n,u,g)}),IE=tt(function(o,u){var g=Ka(u,Mu(IE));return la(o,L,n,u,g)}),k6=ua(function(o,u){return la(o,_,n,n,n,u)});function L6(o,u){if(typeof o!="function")throw new zi(a);return u=u===n?u:Qe(u),tt(o,u)}function j6(o,u){if(typeof o!="function")throw new zi(a);return u=u==null?0:Jn(Qe(u),0),tt(function(g){var w=g[u],D=to(g,0,u);return w&&cs(D,w),Tr(o,this,D)})}function P6(o,u,g){var w=!0,D=!0;if(typeof o!="function")throw new zi(a);return _n(g)&&(w="leading"in g?!!g.leading:w,D="trailing"in g?!!g.trailing:D),NE(o,u,{leading:w,maxWait:u,trailing:D})}function U6(o){return TE(o,1)}function V6(o,u){return I0(m0(u),o)}function z6(){if(!arguments.length)return[];var o=arguments[0];return Ke(o)?o:[o]}function B6(o){return Fi(o,y)}function F6(o,u){return u=typeof u=="function"?u:n,Fi(o,y,u)}function H6(o){return Fi(o,p|y)}function q6(o,u){return u=typeof u=="function"?u:n,Fi(o,p|y,u)}function G6(o,u){return u==null||vx(o,u,or(u))}function ms(o,u){return o===u||o!==o&&u!==u}var $6=wm(n0),Y6=wm(function(o,u){return o>=u}),wl=Ex(function(){return arguments}())?Ex:function(o){return An(o)&&Vt.call(o,"callee")&&!ux.call(o,"callee")},Ke=se.isArray,W6=ph?kt(ph):nO;function Yr(o){return o!=null&&Im(o.length)&&!ha(o)}function Dn(o){return An(o)&&Yr(o)}function X6(o){return o===!0||o===!1||An(o)&&Pr(o)==ke}var no=u5||B0,K6=bu?kt(bu):rO;function Q6(o){return An(o)&&o.nodeType===1&&!Dh(o)}function Z6(o){if(o==null)return!0;if(Yr(o)&&(Ke(o)||typeof o=="string"||typeof o.splice=="function"||no(o)||ku(o)||wl(o)))return!o.length;var u=Rr(o);if(u==Pt||u==st)return!o.size;if(Nh(o))return!s0(o).length;for(var g in o)if(Vt.call(o,g))return!1;return!0}function J6(o,u){return Sh(o,u)}function ek(o,u,g){g=typeof g=="function"?g:n;var w=g?g(o,u):n;return w===n?Sh(o,u,n,g):!!w}function D0(o){if(!An(o))return!1;var u=Pr(o);return u==gt||u==je||typeof o.message=="string"&&typeof o.name=="string"&&!Dh(o)}function tk(o){return typeof o=="number"&&hx(o)}function ha(o){if(!_n(o))return!1;var u=Pr(o);return u==Ye||u==In||u==Oe||u==rn}function DE(o){return typeof o=="number"&&o==Qe(o)}function Im(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Q}function _n(o){var u=typeof o;return o!=null&&(u=="object"||u=="function")}function An(o){return o!=null&&typeof o=="object"}var OE=ll?kt(ll):sO;function nk(o,u){return o===u||i0(o,u,w0(u))}function rk(o,u,g){return g=typeof g=="function"?g:n,i0(o,u,w0(u),g)}function ik(o){return ME(o)&&o!=+o}function sk(o){if(FO(o))throw new We(s);return Tx(o)}function ak(o){return o===null}function ok(o){return o==null}function ME(o){return typeof o=="number"||An(o)&&Pr(o)==bt}function Dh(o){if(!An(o)||Pr(o)!=it)return!1;var u=rm(o);if(u===null)return!0;var g=Vt.call(u,"constructor")&&u.constructor;return typeof g=="function"&&g instanceof g&&Jd.call(g)==r5}var O0=gh?kt(gh):aO;function lk(o){return DE(o)&&o>=-Q&&o<=Q}var kE=ul?kt(ul):oO;function Dm(o){return typeof o=="string"||!Ke(o)&&An(o)&&Pr(o)==yn}function di(o){return typeof o=="symbol"||An(o)&&Pr(o)==At}var ku=Gd?kt(Gd):lO;function uk(o){return o===n}function ck(o){return An(o)&&Rr(o)==Ht}function hk(o){return An(o)&&Pr(o)==Ot}var fk=wm(a0),dk=wm(function(o,u){return o<=u});function LE(o){if(!o)return[];if(Yr(o))return Dm(o)?fs(o):$r(o);if(yh&&o[yh])return GD(o[yh]());var u=Rr(o),g=u==Pt?Yv:u==st?Kd:Lu;return g(o)}function fa(o){if(!o)return o===0?o:0;if(o=Gi(o),o===U||o===-U){var u=o<0?-1:1;return u*ee}return o===o?o:0}function Qe(o){var u=fa(o),g=u%1;return u===u?g?u-g:u:0}function jE(o){return o?vl(Qe(o),0,be):0}function Gi(o){if(typeof o=="number")return o;if(di(o))return ae;if(_n(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=_n(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=vt(o);var g=En.test(o);return g||ot.test(o)?Hd(o.slice(2),g?2:8):qe.test(o)?ae:+o}function PE(o){return Is(o,Wr(o))}function mk(o){return o?vl(Qe(o),-Q,Q):o===0?o:0}function Lt(o){return o==null?"":fi(o)}var pk=Du(function(o,u){if(Nh(u)||Yr(u)){Is(u,or(u),o);return}for(var g in u)Vt.call(u,g)&&Eh(o,g,u[g])}),UE=Du(function(o,u){Is(u,Wr(u),o)}),Om=Du(function(o,u,g,w){Is(u,Wr(u),o,w)}),gk=Du(function(o,u,g,w){Is(u,or(u),o,w)}),vk=ua(Jv);function yk(o,u){var g=Iu(o);return u==null?g:gx(g,u)}var _k=tt(function(o,u){o=Zt(o);var g=-1,w=u.length,D=w>2?u[2]:n;for(D&&Ur(u[0],u[1],D)&&(w=1);++g<w;)for(var F=u[g],H=Wr(F),Y=-1,ne=H.length;++Y<ne;){var he=H[Y],fe=o[he];(fe===n||ms(fe,Ru[he])&&!Vt.call(o,he))&&(o[he]=F[he])}return o}),bk=tt(function(o){return o.push(n,tE),Tr(VE,n,o)});function wk(o,u){return Ar(o,Le(u,3),Ns)}function xk(o,u){return Ar(o,Le(u,3),t0)}function Ek(o,u){return o==null?o:e0(o,Le(u,3),Wr)}function Tk(o,u){return o==null?o:wx(o,Le(u,3),Wr)}function Ak(o,u){return o&&Ns(o,Le(u,3))}function Sk(o,u){return o&&t0(o,Le(u,3))}function Rk(o){return o==null?[]:dm(o,or(o))}function Ck(o){return o==null?[]:dm(o,Wr(o))}function M0(o,u,g){var w=o==null?n:yl(o,u);return w===n?g:w}function Nk(o,u){return o!=null&&iE(o,u,Z5)}function k0(o,u){return o!=null&&iE(o,u,J5)}var Ik=Kx(function(o,u,g){u!=null&&typeof u.toString!="function"&&(u=em.call(u)),o[u]=g},j0(Xr)),Dk=Kx(function(o,u,g){u!=null&&typeof u.toString!="function"&&(u=em.call(u)),Vt.call(o,u)?o[u].push(g):o[u]=[g]},Le),Ok=tt(Ah);function or(o){return Yr(o)?mx(o):s0(o)}function Wr(o){return Yr(o)?mx(o,!0):uO(o)}function Mk(o,u){var g={};return u=Le(u,3),Ns(o,function(w,D,F){oa(g,u(w,D,F),w)}),g}function kk(o,u){var g={};return u=Le(u,3),Ns(o,function(w,D,F){oa(g,D,u(w,D,F))}),g}var Lk=Du(function(o,u,g){mm(o,u,g)}),VE=Du(function(o,u,g,w){mm(o,u,g,w)}),jk=ua(function(o,u){var g={};if(o==null)return g;var w=!1;u=Qt(u,function(F){return F=eo(F,o),w||(w=F.length>1),F}),Is(o,_0(o),g),w&&(g=Fi(g,p|m|y,IO));for(var D=u.length;D--;)h0(g,u[D]);return g});function Pk(o,u){return zE(o,Nm(Le(u)))}var Uk=ua(function(o,u){return o==null?{}:hO(o,u)});function zE(o,u){if(o==null)return{};var g=Qt(_0(o),function(w){return[w]});return u=Le(u),Dx(o,g,function(w,D){return u(w,D[0])})}function Vk(o,u,g){u=eo(u,o);var w=-1,D=u.length;for(D||(D=1,o=n);++w<D;){var F=o==null?n:o[Ds(u[w])];F===n&&(w=D,F=g),o=ha(F)?F.call(o):F}return o}function zk(o,u,g){return o==null?o:Rh(o,u,g)}function Bk(o,u,g,w){return w=typeof w=="function"?w:n,o==null?o:Rh(o,u,g,w)}var BE=Jx(or),FE=Jx(Wr);function Fk(o,u,g){var w=Ke(o),D=w||no(o)||ku(o);if(u=Le(u,4),g==null){var F=o&&o.constructor;D?g=w?new F:[]:_n(o)?g=ha(F)?Iu(rm(o)):{}:g={}}return(D?jr:Ns)(o,function(H,Y,ne){return u(g,H,Y,ne)}),g}function Hk(o,u){return o==null?!0:h0(o,u)}function qk(o,u,g){return o==null?o:jx(o,u,m0(g))}function Gk(o,u,g,w){return w=typeof w=="function"?w:n,o==null?o:jx(o,u,m0(g),w)}function Lu(o){return o==null?[]:zn(o,or(o))}function $k(o){return o==null?[]:zn(o,Wr(o))}function Yk(o,u,g){return g===n&&(g=u,u=n),g!==n&&(g=Gi(g),g=g===g?g:0),u!==n&&(u=Gi(u),u=u===u?u:0),vl(Gi(o),u,g)}function Wk(o,u,g){return u=fa(u),g===n?(g=u,u=0):g=fa(g),o=Gi(o),eO(o,u,g)}function Xk(o,u,g){if(g&&typeof g!="boolean"&&Ur(o,u,g)&&(u=g=n),g===n&&(typeof u=="boolean"?(g=u,u=n):typeof o=="boolean"&&(g=o,o=n)),o===n&&u===n?(o=0,u=1):(o=fa(o),u===n?(u=o,o=0):u=fa(u)),o>u){var w=o;o=u,u=w}if(g||o%1||u%1){var D=fx();return Sr(o+D*(u-o+$v("1e-"+((D+"").length-1))),u)}return l0(o,u)}var Kk=Ou(function(o,u,g){return u=u.toLowerCase(),o+(g?HE(u):u)});function HE(o){return L0(Lt(o).toLowerCase())}function qE(o){return o=Lt(o),o&&o.replace(as,zD).replace(Fv,"")}function Qk(o,u,g){o=Lt(o),u=fi(u);var w=o.length;g=g===n?w:vl(Qe(g),0,w);var D=g;return g-=u.length,g>=0&&o.slice(g,D)==u}function Zk(o){return o=Lt(o),o&&Xn.test(o)?o.replace(Wn,BD):o}function Jk(o){return o=Lt(o),o&&te.test(o)?o.replace($,"\\$&"):o}var eL=Ou(function(o,u,g){return o+(g?"-":"")+u.toLowerCase()}),tL=Ou(function(o,u,g){return o+(g?" ":"")+u.toLowerCase()}),nL=Yx("toLowerCase");function rL(o,u,g){o=Lt(o),u=Qe(u);var w=u?Au(o):0;if(!u||w>=u)return o;var D=(u-w)/2;return bm(om(D),g)+o+bm(am(D),g)}function iL(o,u,g){o=Lt(o),u=Qe(u);var w=u?Au(o):0;return u&&w<u?o+bm(u-w,g):o}function sL(o,u,g){o=Lt(o),u=Qe(u);var w=u?Au(o):0;return u&&w<u?bm(u-w,g)+o:o}function aL(o,u,g){return g||u==null?u=0:u&&(u=+u),d5(Lt(o).replace(ie,""),u||0)}function oL(o,u,g){return(g?Ur(o,u,g):u===n)?u=1:u=Qe(u),u0(Lt(o),u)}function lL(){var o=arguments,u=Lt(o[0]);return o.length<3?u:u.replace(o[1],o[2])}var uL=Ou(function(o,u,g){return o+(g?"_":"")+u.toLowerCase()});function cL(o,u,g){return g&&typeof g!="number"&&Ur(o,u,g)&&(u=g=n),g=g===n?be:g>>>0,g?(o=Lt(o),o&&(typeof u=="string"||u!=null&&!O0(u))&&(u=fi(u),!u&&Tu(o))?to(fs(o),0,g):o.split(u,g)):[]}var hL=Ou(function(o,u,g){return o+(g?" ":"")+L0(u)});function fL(o,u,g){return o=Lt(o),g=g==null?0:vl(Qe(g),0,o.length),u=fi(u),o.slice(g,g+u.length)==u}function dL(o,u,g){var w=V.templateSettings;g&&Ur(o,u,g)&&(u=n),o=Lt(o),u=Om({},u,w,eE);var D=Om({},u.imports,w.imports,eE),F=or(D),H=zn(D,F),Y,ne,he=0,fe=u.interpolate||ui,ve="__p += '",xe=Wv((u.escape||ui).source+"|"+fe.source+"|"+(fe===sr?Ie:ui).source+"|"+(u.evaluate||ui).source+"|$","g"),De="//# sourceURL="+(Vt.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Bd+"]")+`
`;o.replace(xe,function(Ve,ut,yt,mi,Vr,pi){return yt||(yt=mi),ve+=o.slice(he,pi).replace(ci,FD),ut&&(Y=!0,ve+=`' +
__e(`+ut+`) +
'`),Vr&&(ne=!0,ve+=`';
`+Vr+`;
__p += '`),yt&&(ve+=`' +
((__t = (`+yt+`)) == null ? '' : __t) +
'`),he=pi+Ve.length,Ve}),ve+=`';
`;var Ue=Vt.call(u,"variable")&&u.variable;if(!Ue)ve=`with (obj) {
`+ve+`
}
`;else if(Se.test(Ue))throw new We(l);ve=(ne?ve.replace(Di,""):ve).replace(Oi,"$1").replace(li,"$1;"),ve="function("+(Ue||"obj")+`) {
`+(Ue?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Y?", __e = _.escape":"")+(ne?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ve+`return __p
}`;var Ze=$E(function(){return Nt(F,De+"return "+ve).apply(n,H)});if(Ze.source=ve,D0(Ze))throw Ze;return Ze}function mL(o){return Lt(o).toLowerCase()}function pL(o){return Lt(o).toUpperCase()}function gL(o,u,g){if(o=Lt(o),o&&(g||u===n))return vt(o);if(!o||!(u=fi(u)))return o;var w=fs(o),D=fs(u),F=Gr(w,D),H=dl(w,D)+1;return to(w,F,H).join("")}function vL(o,u,g){if(o=Lt(o),o&&(g||u===n))return o.slice(0,sx(o)+1);if(!o||!(u=fi(u)))return o;var w=fs(o),D=dl(w,fs(u))+1;return to(w,0,D).join("")}function yL(o,u,g){if(o=Lt(o),o&&(g||u===n))return o.replace(ie,"");if(!o||!(u=fi(u)))return o;var w=fs(o),D=Gr(w,fs(u));return to(w,D).join("")}function _L(o,u){var g=S,w=k;if(_n(u)){var D="separator"in u?u.separator:D;g="length"in u?Qe(u.length):g,w="omission"in u?fi(u.omission):w}o=Lt(o);var F=o.length;if(Tu(o)){var H=fs(o);F=H.length}if(g>=F)return o;var Y=g-Au(w);if(Y<1)return w;var ne=H?to(H,0,Y).join(""):o.slice(0,Y);if(D===n)return ne+w;if(H&&(Y+=ne.length-Y),O0(D)){if(o.slice(Y).search(D)){var he,fe=ne;for(D.global||(D=Wv(D.source,Lt(ze.exec(D))+"g")),D.lastIndex=0;he=D.exec(fe);)var ve=he.index;ne=ne.slice(0,ve===n?Y:ve)}}else if(o.indexOf(fi(D),Y)!=Y){var xe=ne.lastIndexOf(D);xe>-1&&(ne=ne.slice(0,xe))}return ne+w}function bL(o){return o=Lt(o),o&&Er.test(o)?o.replace(qr,XD):o}var wL=Ou(function(o,u,g){return o+(g?" ":"")+u.toUpperCase()}),L0=Yx("toUpperCase");function GE(o,u,g){return o=Lt(o),u=g?n:u,u===n?qD(o)?ZD(o):Eu(o):o.match(u)||[]}var $E=tt(function(o,u){try{return Tr(o,n,u)}catch(g){return D0(g)?g:new We(g)}}),xL=ua(function(o,u){return jr(u,function(g){g=Ds(g),oa(o,g,N0(o[g],o))}),o});function EL(o){var u=o==null?0:o.length,g=Le();return o=u?Qt(o,function(w){if(typeof w[1]!="function")throw new zi(a);return[g(w[0]),w[1]]}):[],tt(function(w){for(var D=-1;++D<u;){var F=o[D];if(Tr(F[0],this,w))return Tr(F[1],this,w)}})}function TL(o){return X5(Fi(o,p))}function j0(o){return function(){return o}}function AL(o,u){return o==null||o!==o?u:o}var SL=Xx(),RL=Xx(!0);function Xr(o){return o}function P0(o){return Ax(typeof o=="function"?o:Fi(o,p))}function CL(o){return Rx(Fi(o,p))}function NL(o,u){return Cx(o,Fi(u,p))}var IL=tt(function(o,u){return function(g){return Ah(g,o,u)}}),DL=tt(function(o,u){return function(g){return Ah(o,g,u)}});function U0(o,u,g){var w=or(u),D=dm(u,w);g==null&&!(_n(u)&&(D.length||!w.length))&&(g=u,u=o,o=this,D=dm(u,or(u)));var F=!(_n(g)&&"chain"in g)||!!g.chain,H=ha(o);return jr(D,function(Y){var ne=u[Y];o[Y]=ne,H&&(o.prototype[Y]=function(){var he=this.__chain__;if(F||he){var fe=o(this.__wrapped__),ve=fe.__actions__=$r(this.__actions__);return ve.push({func:ne,args:arguments,thisArg:o}),fe.__chain__=he,fe}return ne.apply(o,cs([this.value()],arguments))})}),o}function OL(){return Tn._===this&&(Tn._=i5),this}function V0(){}function ML(o){return o=Qe(o),tt(function(u){return Nx(u,o)})}var kL=g0(Qt),LL=g0(wu),jL=g0(xu);function YE(o){return E0(o)?R(Ds(o)):fO(o)}function PL(o){return function(u){return o==null?n:yl(o,u)}}var UL=Qx(),VL=Qx(!0);function z0(){return[]}function B0(){return!1}function zL(){return{}}function BL(){return""}function FL(){return!0}function HL(o,u){if(o=Qe(o),o<1||o>Q)return[];var g=be,w=Sr(o,be);u=Le(u),o-=be;for(var D=Ct(w,u);++g<o;)u(g);return D}function qL(o){return Ke(o)?Qt(o,Ds):di(o)?[o]:$r(dE(Lt(o)))}function GL(o){var u=++n5;return Lt(o)+u}var $L=_m(function(o,u){return o+u},0),YL=v0("ceil"),WL=_m(function(o,u){return o/u},1),XL=v0("floor");function KL(o){return o&&o.length?fm(o,Xr,n0):n}function QL(o,u){return o&&o.length?fm(o,Le(u,2),n0):n}function ZL(o){return b(o,Xr)}function JL(o,u){return b(o,Le(u,2))}function ej(o){return o&&o.length?fm(o,Xr,a0):n}function tj(o,u){return o&&o.length?fm(o,Le(u,2),a0):n}var nj=_m(function(o,u){return o*u},1),rj=v0("round"),ij=_m(function(o,u){return o-u},0);function sj(o){return o&&o.length?_e(o,Xr):0}function aj(o,u){return o&&o.length?_e(o,Le(u,2)):0}return V.after=C6,V.ary=TE,V.assign=pk,V.assignIn=UE,V.assignInWith=Om,V.assignWith=gk,V.at=vk,V.before=AE,V.bind=N0,V.bindAll=xL,V.bindKey=SE,V.castArray=z6,V.chain=wE,V.chunk=XO,V.compact=KO,V.concat=QO,V.cond=EL,V.conforms=TL,V.constant=j0,V.countBy=s6,V.create=yk,V.curry=RE,V.curryRight=CE,V.debounce=NE,V.defaults=_k,V.defaultsDeep=bk,V.defer=N6,V.delay=I6,V.difference=ZO,V.differenceBy=JO,V.differenceWith=eM,V.drop=tM,V.dropRight=nM,V.dropRightWhile=rM,V.dropWhile=iM,V.fill=sM,V.filter=o6,V.flatMap=c6,V.flatMapDeep=h6,V.flatMapDepth=f6,V.flatten=vE,V.flattenDeep=aM,V.flattenDepth=oM,V.flip=D6,V.flow=SL,V.flowRight=RL,V.fromPairs=lM,V.functions=Rk,V.functionsIn=Ck,V.groupBy=d6,V.initial=cM,V.intersection=hM,V.intersectionBy=fM,V.intersectionWith=dM,V.invert=Ik,V.invertBy=Dk,V.invokeMap=p6,V.iteratee=P0,V.keyBy=g6,V.keys=or,V.keysIn=Wr,V.map=Sm,V.mapKeys=Mk,V.mapValues=kk,V.matches=CL,V.matchesProperty=NL,V.memoize=Cm,V.merge=Lk,V.mergeWith=VE,V.method=IL,V.methodOf=DL,V.mixin=U0,V.negate=Nm,V.nthArg=ML,V.omit=jk,V.omitBy=Pk,V.once=O6,V.orderBy=v6,V.over=kL,V.overArgs=M6,V.overEvery=LL,V.overSome=jL,V.partial=I0,V.partialRight=IE,V.partition=y6,V.pick=Uk,V.pickBy=zE,V.property=YE,V.propertyOf=PL,V.pull=vM,V.pullAll=_E,V.pullAllBy=yM,V.pullAllWith=_M,V.pullAt=bM,V.range=UL,V.rangeRight=VL,V.rearg=k6,V.reject=w6,V.remove=wM,V.rest=L6,V.reverse=R0,V.sampleSize=E6,V.set=zk,V.setWith=Bk,V.shuffle=T6,V.slice=xM,V.sortBy=R6,V.sortedUniq=NM,V.sortedUniqBy=IM,V.split=cL,V.spread=j6,V.tail=DM,V.take=OM,V.takeRight=MM,V.takeRightWhile=kM,V.takeWhile=LM,V.tap=KM,V.throttle=P6,V.thru=Am,V.toArray=LE,V.toPairs=BE,V.toPairsIn=FE,V.toPath=qL,V.toPlainObject=PE,V.transform=Fk,V.unary=U6,V.union=jM,V.unionBy=PM,V.unionWith=UM,V.uniq=VM,V.uniqBy=zM,V.uniqWith=BM,V.unset=Hk,V.unzip=C0,V.unzipWith=bE,V.update=qk,V.updateWith=Gk,V.values=Lu,V.valuesIn=$k,V.without=FM,V.words=GE,V.wrap=V6,V.xor=HM,V.xorBy=qM,V.xorWith=GM,V.zip=$M,V.zipObject=YM,V.zipObjectDeep=WM,V.zipWith=XM,V.entries=BE,V.entriesIn=FE,V.extend=UE,V.extendWith=Om,U0(V,V),V.add=$L,V.attempt=$E,V.camelCase=Kk,V.capitalize=HE,V.ceil=YL,V.clamp=Yk,V.clone=B6,V.cloneDeep=H6,V.cloneDeepWith=q6,V.cloneWith=F6,V.conformsTo=G6,V.deburr=qE,V.defaultTo=AL,V.divide=WL,V.endsWith=Qk,V.eq=ms,V.escape=Zk,V.escapeRegExp=Jk,V.every=a6,V.find=l6,V.findIndex=pE,V.findKey=wk,V.findLast=u6,V.findLastIndex=gE,V.findLastKey=xk,V.floor=XL,V.forEach=xE,V.forEachRight=EE,V.forIn=Ek,V.forInRight=Tk,V.forOwn=Ak,V.forOwnRight=Sk,V.get=M0,V.gt=$6,V.gte=Y6,V.has=Nk,V.hasIn=k0,V.head=yE,V.identity=Xr,V.includes=m6,V.indexOf=uM,V.inRange=Wk,V.invoke=Ok,V.isArguments=wl,V.isArray=Ke,V.isArrayBuffer=W6,V.isArrayLike=Yr,V.isArrayLikeObject=Dn,V.isBoolean=X6,V.isBuffer=no,V.isDate=K6,V.isElement=Q6,V.isEmpty=Z6,V.isEqual=J6,V.isEqualWith=ek,V.isError=D0,V.isFinite=tk,V.isFunction=ha,V.isInteger=DE,V.isLength=Im,V.isMap=OE,V.isMatch=nk,V.isMatchWith=rk,V.isNaN=ik,V.isNative=sk,V.isNil=ok,V.isNull=ak,V.isNumber=ME,V.isObject=_n,V.isObjectLike=An,V.isPlainObject=Dh,V.isRegExp=O0,V.isSafeInteger=lk,V.isSet=kE,V.isString=Dm,V.isSymbol=di,V.isTypedArray=ku,V.isUndefined=uk,V.isWeakMap=ck,V.isWeakSet=hk,V.join=mM,V.kebabCase=eL,V.last=qi,V.lastIndexOf=pM,V.lowerCase=tL,V.lowerFirst=nL,V.lt=fk,V.lte=dk,V.max=KL,V.maxBy=QL,V.mean=ZL,V.meanBy=JL,V.min=ej,V.minBy=tj,V.stubArray=z0,V.stubFalse=B0,V.stubObject=zL,V.stubString=BL,V.stubTrue=FL,V.multiply=nj,V.nth=gM,V.noConflict=OL,V.noop=V0,V.now=Rm,V.pad=rL,V.padEnd=iL,V.padStart=sL,V.parseInt=aL,V.random=Xk,V.reduce=_6,V.reduceRight=b6,V.repeat=oL,V.replace=lL,V.result=Vk,V.round=rj,V.runInContext=Z,V.sample=x6,V.size=A6,V.snakeCase=uL,V.some=S6,V.sortedIndex=EM,V.sortedIndexBy=TM,V.sortedIndexOf=AM,V.sortedLastIndex=SM,V.sortedLastIndexBy=RM,V.sortedLastIndexOf=CM,V.startCase=hL,V.startsWith=fL,V.subtract=ij,V.sum=sj,V.sumBy=aj,V.template=dL,V.times=HL,V.toFinite=fa,V.toInteger=Qe,V.toLength=jE,V.toLower=mL,V.toNumber=Gi,V.toSafeInteger=mk,V.toString=Lt,V.toUpper=pL,V.trim=gL,V.trimEnd=vL,V.trimStart=yL,V.truncate=_L,V.unescape=bL,V.uniqueId=GL,V.upperCase=wL,V.upperFirst=L0,V.each=xE,V.eachRight=EE,V.first=yE,U0(V,function(){var o={};return Ns(V,function(u,g){Vt.call(V.prototype,g)||(o[g]=u)}),o}(),{chain:!1}),V.VERSION=r,jr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){V[o].placeholder=V}),jr(["drop","take"],function(o,u){ft.prototype[o]=function(g){g=g===n?1:Jn(Qe(g),0);var w=this.__filtered__&&!u?new ft(this):this.clone();return w.__filtered__?w.__takeCount__=Sr(g,w.__takeCount__):w.__views__.push({size:Sr(g,be),type:o+(w.__dir__<0?"Right":"")}),w},ft.prototype[o+"Right"]=function(g){return this.reverse()[o](g).reverse()}}),jr(["filter","map","takeWhile"],function(o,u){var g=u+1,w=g==G||g==z;ft.prototype[o]=function(D){var F=this.clone();return F.__iteratees__.push({iteratee:Le(D,3),type:g}),F.__filtered__=F.__filtered__||w,F}}),jr(["head","last"],function(o,u){var g="take"+(u?"Right":"");ft.prototype[o]=function(){return this[g](1).value()[0]}}),jr(["initial","tail"],function(o,u){var g="drop"+(u?"":"Right");ft.prototype[o]=function(){return this.__filtered__?new ft(this):this[g](1)}}),ft.prototype.compact=function(){return this.filter(Xr)},ft.prototype.find=function(o){return this.filter(o).head()},ft.prototype.findLast=function(o){return this.reverse().find(o)},ft.prototype.invokeMap=tt(function(o,u){return typeof o=="function"?new ft(this):this.map(function(g){return Ah(g,o,u)})}),ft.prototype.reject=function(o){return this.filter(Nm(Le(o)))},ft.prototype.slice=function(o,u){o=Qe(o);var g=this;return g.__filtered__&&(o>0||u<0)?new ft(g):(o<0?g=g.takeRight(-o):o&&(g=g.drop(o)),u!==n&&(u=Qe(u),g=u<0?g.dropRight(-u):g.take(u-o)),g)},ft.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},ft.prototype.toArray=function(){return this.take(be)},Ns(ft.prototype,function(o,u){var g=/^(?:filter|find|map|reject)|While$/.test(u),w=/^(?:head|last)$/.test(u),D=V[w?"take"+(u=="last"?"Right":""):u],F=w||/^find/.test(u);D&&(V.prototype[u]=function(){var H=this.__wrapped__,Y=w?[1]:arguments,ne=H instanceof ft,he=Y[0],fe=ne||Ke(H),ve=function(ut){var yt=D.apply(V,cs([ut],Y));return w&&xe?yt[0]:yt};fe&&g&&typeof he=="function"&&he.length!=1&&(ne=fe=!1);var xe=this.__chain__,De=!!this.__actions__.length,Ue=F&&!xe,Ze=ne&&!De;if(!F&&fe){H=Ze?H:new ft(this);var Ve=o.apply(H,Y);return Ve.__actions__.push({func:Am,args:[ve],thisArg:n}),new Bi(Ve,xe)}return Ue&&Ze?o.apply(this,Y):(Ve=this.thru(ve),Ue?w?Ve.value()[0]:Ve.value():Ve)})}),jr(["pop","push","shift","sort","splice","unshift"],function(o){var u=Qd[o],g=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",w=/^(?:pop|shift)$/.test(o);V.prototype[o]=function(){var D=arguments;if(w&&!this.__chain__){var F=this.value();return u.apply(Ke(F)?F:[],D)}return this[g](function(H){return u.apply(Ke(H)?H:[],D)})}}),Ns(ft.prototype,function(o,u){var g=V[u];if(g){var w=g.name+"";Vt.call(Nu,w)||(Nu[w]=[]),Nu[w].push({name:u,func:g})}}),Nu[ym(n,A).name]=[{name:"wrapper",func:n}],ft.prototype.clone=b5,ft.prototype.reverse=w5,ft.prototype.value=x5,V.prototype.at=QM,V.prototype.chain=ZM,V.prototype.commit=JM,V.prototype.next=e6,V.prototype.plant=n6,V.prototype.reverse=r6,V.prototype.toJSON=V.prototype.valueOf=V.prototype.value=i6,V.prototype.first=V.prototype.head,yh&&(V.prototype[yh]=t6),V},Su=JD();mr?((mr.exports=Su)._=Su,_u._=Su):Tn._=Su}).call(Oh)})(zg,zg.exports);var NW=zg.exports;const Xh=({label:t,className:e="",...n})=>v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-muted-foreground",children:t}),v.jsx("input",{...n,className:`mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent sm:text-sm ${n.type==="number"?"no-spinner":""} ${e}`})]}),Kh=({label:t,value:e,className:n=""})=>v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-muted-foreground",children:t}),v.jsx("div",{className:`mt-1 block w-full bg-input/50 border border-transparent rounded-md py-2 px-3 text-foreground/80 sm:text-sm min-h-[42px] flex items-center ${n}`,children:e||v.jsx("span",{className:"text-muted-foreground/50",children:"N/A"})})]}),IW=({label:t,value:e})=>{const n=bs(Wl(e));return v.jsxs("div",{className:"flex flex-col items-center gap-1",children:[v.jsx("div",{className:"text-lg font-bold text-accent h-7 flex items-center",children:n}),v.jsx("div",{className:"w-full bg-input/50 border border-transparent rounded-md py-2 px-3 text-foreground/80 text-2xl min-h-[52px] flex items-center justify-center font-bold",children:e}),v.jsx("label",{className:"block text-sm font-medium text-muted-foreground mt-1",children:t})]})},$y=({label:t,isActive:e,onClick:n})=>v.jsx("button",{onClick:n,className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${e?"bg-accent/20 text-accent":"text-muted-foreground hover:bg-muted/50"}`,children:t}),DW=({companion:t,onSave:e,onClose:n,readOnly:r=!1,onSetReadOnly:i})=>{const[s,a]=K.useState(t),l=K.useRef(null),[c,d]=K.useState(!1),{currentUser:f}=pu(),[p,m]=K.useState(!1),{character:y}=ea(),[E,C]=K.useState("overview"),I=K.useCallback(NW.debounce(x=>{r&&e(x,!1)},1e3),[r,e]);K.useEffect(()=>{var x;(x=l.current)==null||x.showModal()},[]);const A=x=>{const{name:S,value:k,type:j}=x.target;a(O=>({...O,[S]:j==="number"?parseInt(k)||0:k}))},N=(x,S)=>{a(k=>{const j={...k.hp,[x]:S};return j.current=Math.min(k.hp.current,S),{...k,hp:j}})},M=(x,S)=>{a(k=>({...k,abilityScores:{...k.abilityScores,[x]:S}}))},P=x=>{const S={...s,hp:x};a(S),I(S)},q=()=>{e(s)},L=()=>{i&&i(!1)},T=async x=>{if(!f||!y){const S="User or character not found. Cannot upload image.";throw new Error(S)}try{const S=await t$(x,f.uid,y.id,s.id),k={...s,imageUrl:S};a(k),e(k,!1)}catch(S){throw console.error("Failed to upload companion image:",S),new Error("Error uploading image. Please try again.")}},_=Wl(s.abilityScores.dexterity);return v.jsxs("dialog",{ref:l,onClose:n,className:"bg-card text-foreground p-0 sm:rounded-lg shadow-2xl w-full h-full sm:h-auto sm:max-h-[90vh] sm:max-w-3xl border border-border backdrop-filter backdrop-blur-sm backdrop:bg-black/50 flex flex-col",children:[v.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-border sticky top-0 bg-card z-10 flex-shrink-0",children:[v.jsx("h3",{className:"text-xl font-cinzel font-bold text-accent truncate min-w-0 pr-4",children:r?s.name:"Edit Companion"}),v.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r&&i&&v.jsxs("button",{onClick:L,className:"flex items-center gap-2 p-2 sm:px-4 sm:py-2 bg-secondary text-secondary-foreground font-bold rounded-lg shadow-md hover:bg-secondary/90 transition-colors",children:[v.jsx(Ba,{className:"w-5 h-5"}),v.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),!r&&v.jsxs("button",{onClick:q,className:"flex items-center gap-2 p-2 sm:px-4 sm:py-2 bg-primary text-primary-foreground font-bold rounded-lg shadow-md hover:bg-primary/90 transition-colors",children:[v.jsx(dD,{className:"w-5 h-5"}),v.jsx("span",{className:"hidden sm:inline",children:"Save"})]}),v.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-muted transition-colors",children:v.jsx(kv,{className:"w-6 h-6"})})]})]}),v.jsxs("div",{className:"p-4 sm:p-6 overflow-y-auto flex-1",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-6 border-b border-border pb-4",children:[v.jsx($y,{label:"Overview",isActive:E==="overview",onClick:()=>C("overview")}),v.jsx($y,{label:"Combat",isActive:E==="combat",onClick:()=>C("combat")}),v.jsx($y,{label:"Notes",isActive:E==="notes",onClick:()=>C("notes")})]}),v.jsxs("div",{hidden:E!=="overview",className:"space-y-6",children:[v.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[v.jsxs("div",{className:"flex-shrink-0 group relative",children:[v.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Portrait"}),v.jsxs("div",{onClick:()=>{r&&s.imageUrl?m(!0):r||d(!0)},className:`w-32 h-32 bg-muted rounded-lg overflow-hidden border border-border ${(!r||s.imageUrl)&&"cursor-pointer hover:border-accent transition-colors"}`,children:[s.imageUrl?v.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover"}):v.jsx(Lv,{className:"w-full h-full text-muted-foreground p-4"}),!r&&v.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-lg",children:v.jsx("span",{className:"text-white text-xs",children:"Change"})})]})]}),v.jsx("div",{className:"w-full max-w-md space-y-2",children:r?v.jsx(v.Fragment,{children:v.jsx(Kh,{label:"Type",value:s.type,className:"justify-center"})}):v.jsxs(v.Fragment,{children:[v.jsx(Xh,{label:"Name",name:"name",value:s.name,onChange:A,className:"text-2xl font-bold text-center"}),v.jsx(Xh,{label:"Type",name:"type",value:s.type,onChange:A,placeholder:"e.g., Familiar, Beast"})]})})]}),v.jsx(CW,{hp:s.hp,onHpChange:P}),v.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[r?v.jsx(Kh,{label:"Armor Class",value:s.armorClass}):v.jsx(Xh,{label:"Armor Class",name:"armorClass",type:"number",value:s.armorClass,onChange:A}),r?v.jsx(Kh,{label:"Speed",value:s.speed}):v.jsx(Xh,{label:"Speed",name:"speed",value:s.speed,onChange:A}),v.jsx(Kh,{label:"Initiative",value:bs(_)}),r?v.jsx(Kh,{label:"Max HP",value:s.hp.max}):v.jsx(Xh,{label:"Max HP",type:"number",value:s.hp.max,onChange:x=>N("max",parseInt(x.target.value)||0)})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-md font-semibold text-zinc-400 mb-2",children:"Ability Scores"}),v.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-y-4 gap-x-2 sm:gap-4",children:r?Object.keys(s.abilityScores).map(x=>v.jsx(IW,{label:x.substring(0,3).toUpperCase(),value:s.abilityScores[x]},x)):Object.keys(s.abilityScores).map(x=>v.jsx(PD,{label:x.substring(0,3).toUpperCase(),value:s.abilityScores[x],onChange:S=>M(x,Number(S))},x))})]})]}),v.jsxs("div",{hidden:E!=="combat",className:"space-y-6",children:[v.jsx(AW,{companion:s,setCompanion:a,readOnly:r}),v.jsx(RW,{companion:s,setCompanion:a,readOnly:r})]}),v.jsx("div",{hidden:E!=="notes",children:v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-muted-foreground",children:"Notes, Features & Traits"}),r?v.jsx("div",{className:"mt-1 p-3 bg-input/50 rounded-md min-h-[200px] text-foreground/80 whitespace-pre-wrap",children:s.notes||v.jsx("span",{className:"text-muted-foreground/50",children:"No notes."})}):v.jsx("textarea",{name:"notes",value:s.notes,onChange:A,rows:12,className:"mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent sm:text-sm",placeholder:"Special abilities, background, resistances, immunities, etc."})]})})]}),v.jsx(LD,{isOpen:c,onClose:()=>d(!1),onImageReady:T}),p&&s.imageUrl&&v.jsx(jD,{imageUrl:s.imageUrl,altText:`Portrait for ${s.name}`,onClose:()=>m(!1)})]})},UD=({readOnly:t=!1})=>{const{character:e,setCharacter:n}=ea(),[r,i]=K.useState(null),[s,a]=K.useState(!1),l=()=>({id:`comp_${Date.now()}`,name:"New Companion",type:"Familiar",hp:{max:10,current:10,temporary:0},armorClass:10,speed:"30 ft.",abilityScores:{strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10},skills:[],attacks:[],spells:[],featuresAndTraits:[],equipment:[],notes:""}),c=()=>{i(l()),a(!1)},d=C=>{i(C),a(!1)},f=C=>{i(C),a(!0)},p=C=>{window.confirm("Are you sure you want to delete this companion?")&&n(I=>I?{...I,companions:I.companions.filter(A=>A.id!==C)}:null)},m=C=>{const I=JSON.parse(JSON.stringify(C));I.id=`comp_${Date.now()}`,I.name=`${I.name} (Copy)`,n(A=>A?{...A,companions:[...A.companions,I]}:null)},y=(C,I)=>{let A=!1;n(M=>M?M.companions.find(q=>q.id===C.id)?(A=!1,{...M,companions:M.companions.map(q=>q.id===C.id?C:q)}):(A=!0,{...M,companions:[...M.companions,C]}):null),(I===void 0?A:I)?E():I===void 0&&!A&&a(!0)},E=()=>{i(null)};return e?v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("h2",{className:"text-2xl font-cinzel text-accent",children:"Companions & Summons"}),!t&&v.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-bold rounded-lg shadow-md hover:bg-primary/90 transition-colors",children:[v.jsx(iu,{className:"w-5 h-5"}),"Add Companion"]})]}),e.companions.length>0?v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.companions.map(C=>v.jsx(EW,{companion:C,onEdit:()=>!t&&d(C),onDuplicate:()=>!t&&m(C),onDelete:()=>p(C.id),onView:()=>f(C),readOnly:t},C.id))}):v.jsxs("div",{className:"text-center py-16 px-6 bg-muted/20 rounded-lg border-2 border-dashed border-border",children:[v.jsx(jg,{className:"mx-auto h-12 w-12 text-muted-foreground/50"}),v.jsx("h3",{className:"mt-2 text-lg font-medium text-zinc-300",children:"No Companions Yet"}),v.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Your familiars, animal companions, and summons will appear here."}),!t&&v.jsx("div",{className:"mt-6",children:v.jsxs("button",{onClick:c,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-bold rounded-lg shadow-md hover:bg-primary/90 transition-colors",children:[v.jsx(iu,{className:"w-5 h-5"})," Add your first companion"]})})]}),r&&v.jsx(DW,{companion:r,onSave:y,onClose:E,readOnly:s,onSetReadOnly:a})]}):null},Yy=["strength","dexterity","constitution","intelligence","wisdom","charisma"],OW=({label:t,isActive:e,onClick:n,controls:r,id:i})=>v.jsx("button",{id:i,role:"tab","aria-selected":e,"aria-controls":r,onClick:n,className:`px-3 py-2 text-sm font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-card text-accent border-b-2 border-accent":"text-muted-foreground hover:bg-muted border-b-2 border-transparent"}`,children:t}),Ms=({label:t,name:e,type:n,value:r,onChange:i,placeholder:s,className:a})=>v.jsxs("div",{className:a,children:[v.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-muted-foreground capitalize",children:t}),v.jsx("input",{type:n,id:e,name:e,value:r,onChange:i,placeholder:s,className:"mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent sm:text-sm"})]}),zu=({label:t,name:e,value:n,onChange:r,placeholder:i})=>v.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col",children:[v.jsx("h3",{className:"text-lg font-semibold text-accent mb-2",children:t}),v.jsx("textarea",{name:e,value:n,onChange:r,className:"w-full bg-input border border-border rounded-md p-3 text-foreground focus:ring-ring focus:border-accent resize-y flex-grow min-h-[100px]",placeholder:i||`Your character's ${t.toLowerCase()}...`})]}),MW=[{key:"main",label:"Main"},{key:"stats",label:"Stats & Skills"},{key:"combat",label:"Combat & Features"},{key:"bio",label:"Biography & Notes"},{key:"inventory",label:"Inventory"},{key:"spells",label:"Spells"},{key:"companions",label:"Companions"}],qS=()=>{var ye;const{characterId:t}=iI(),e=eh(),{character:n,setCharacter:r,updateCharacter:i,deleteCharacter:s,saveCharacter:a}=ea(),{currentUser:l}=pu(),[c,d]=K.useState(!1),[f,p]=K.useState(!1),[m,y]=K.useState(""),[E,C]=K.useState("main"),[I,A]=K.useState(!1),N=window.location.pathname.endsWith("/character/new");K.useEffect(()=>{let W=!0;return(async()=>{let ce;t?ce=await lD(t):ce={...Ua(),id:"temp_new"};const Oe={...Ua(),...ce};W&&r(Oe)})(),()=>{W=!1}},[t,r]);const M=K.useMemo(()=>n?Math.ceil(n.level/4)+1:0,[n==null?void 0:n.level]),P=async()=>{if(n){d(!0);try{const W=N?`char_${Date.now()}`:n.id,X={...n,id:W,proficiencyBonus:M,initiative:ae,lastUpdated:Date.now()},ce=await a(X);e(`/character/${ce.id}`,{replace:N})}catch(W){console.error("Failed to save character:",W),alert("An error occurred while saving. Please try again.")}finally{d(!1)}}},q=async()=>{if(n&&!N&&window.confirm(`Are you sure you want to permanently delete ${n.name}?`))try{await s(n.id),e("/")}catch(W){console.error("Failed to delete character:",W),alert("An error occurred while deleting the character.")}},L=()=>{e(N?"/":n?`/character/${n.id}`:-1)},T=async W=>{if(!(!l||!n||N))try{const X=await T1(W,l.uid,n.id);i({imageUrl:X})}catch(X){console.error("Failed to upload character portrait:",X),alert("Error uploading image. Please try again.")}},_=W=>{if(!n)return;const{name:X,value:ce,type:Oe}=W.target;let ke=ce;Oe==="number"&&(ke=parseInt(ce)||0),i({[X]:ke})},x=(W,X)=>{n&&r(ce=>({...ce,currency:{...ce.currency,[W]:X}}))},S=(W,X)=>{n&&r(ce=>({...ce,hp:{...ce.hp,[W]:X}}))},k=W=>{if(!n)return;const{value:X}=W.target;r(ce=>({...ce,hitDice:{...ce.hitDice,total:X}}))},j=(W,X)=>{n&&r(ce=>({...ce,abilityScores:{...ce.abilityScores,[W]:X}}))},O=W=>{if(!n)return;const X={...n.savingThrows};X[W].proficient=!X[W].proficient,r(ce=>({...ce,savingThrows:X}))},G=W=>{if(!n)return;const X=n.skills.map(ce=>{if(ce.name===W){const Oe=!ce.proficient,ke=Oe?ce.expertise:!1;return{...ce,proficient:Oe,expertise:ke}}return ce});r(ce=>({...ce,skills:X}))},J=W=>{if(!n)return;const X=n.skills.map(ce=>{if(ce.name===W){const Oe=!ce.expertise,ke=Oe||ce.proficient;return{...ce,proficient:ke,expertise:Oe}}return ce});r(ce=>({...ce,skills:X}))},z=W=>{var ce;if(!n)return;const X=parseInt(W.target.value,10)||0;i({unarmoredDefense:{base:X,abilities:((ce=n.unarmoredDefense)==null?void 0:ce.abilities)||[]}})},U=W=>{var Oe,ke;if(!n)return;const X=((Oe=n.unarmoredDefense)==null?void 0:Oe.abilities)||[],ce=X.includes(W)?X.filter($e=>$e!==W):[...X,W];i({unarmoredDefense:{base:((ke=n.unarmoredDefense)==null?void 0:ke.base)??10,abilities:ce}})},Q=(W,X)=>{if(!n)return;const ce={...n.spellSlots};ce[W]={...ce[W],max:X},r(Oe=>({...Oe,spellSlots:ce}))},ee=async()=>{if(!n)return;p(!0);const W=await dY(n,m);r(X=>({...X,...W})),p(!1)},ae=K.useMemo(()=>n?Wl(n.abilityScores.dexterity):0,[n==null?void 0:n.abilityScores.dexterity]),{spellSaveDC:be,spellAttackBonus:pe}=K.useMemo(()=>{if(!n||!n.spellcastingAbility)return{spellSaveDC:"-",spellAttackBonus:"-"};const W=Wl(n.abilityScores[n.spellcastingAbility]);return{spellSaveDC:8+M+W,spellAttackBonus:bs(M+W)}},[n==null?void 0:n.spellcastingAbility,n==null?void 0:n.abilityScores,M]);return n?v.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:pt-8",children:[v.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[v.jsxs("button",{onClick:L,className:"flex items-center gap-2 rounded-md px-3 py-2 font-semibold text-muted-foreground transition-all duration-200 hover:scale-105 hover:text-accent [text-shadow:0_1px_2px_rgba(0,0,0,0.3)] self-start","aria-label":N?"Cancel Creation":"Back to Play View",children:[v.jsx(fD,{className:"w-5 h-5"}),v.jsx("span",{children:N?"Cancel Creation":"Back to Play"})]}),v.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-center",children:[!N&&v.jsxs("button",{onClick:q,className:"flex items-center gap-2 rounded-md px-3 py-2 font-semibold text-destructive transition-all duration-200 hover:scale-105 hover:text-accent [text-shadow:0_1px_2px_rgba(0,0,0,0.3)]","aria-label":"Delete Character",children:[v.jsx(Js,{className:"w-4 h-4"}),v.jsx("span",{className:"hidden sm:inline",children:"Delete"})]}),v.jsxs("button",{onClick:P,disabled:c,className:"flex items-center gap-2 rounded-md px-3 py-2 font-bold text-primary transition-all duration-200 hover:scale-105 hover:text-accent [text-shadow:0_1px_2px_rgba(0,0,0,0.3)] disabled:text-muted-foreground/60 disabled:scale-100 disabled:cursor-not-allowed disabled:[text-shadow:none]",children:[v.jsx(dD,{className:"w-5 h-5"}),v.jsx("span",{className:"hidden sm:inline",children:c?"Saving...":"Save Changes"}),v.jsx("span",{className:"sm:hidden",children:c?"...":"Save"})]})]})]}),v.jsxs("div",{className:"bg-card border border-border shadow-lg shadow-accent/5 rounded-lg p-4 sm:p-6",children:[v.jsx("div",{role:"tablist","aria-label":"Character Sheet Sections",className:"flex space-x-1 mb-6 border-b border-border overflow-x-auto",children:MW.map(W=>v.jsx(OW,{id:`tab-${W.key}`,label:W.label,isActive:E===W.key,onClick:()=>C(W.key),controls:`panel-${W.key}`},W.key))}),v.jsx("div",{id:"panel-main",role:"tabpanel","aria-labelledby":"tab-main",hidden:E!=="main",children:v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[v.jsx("div",{className:"space-y-6",children:v.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-sm font-medium text-muted-foreground",children:"Character Portrait"}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("span",{className:"inline-block h-24 w-24 rounded-lg overflow-hidden bg-muted",children:n.imageUrl?v.jsx("img",{src:n.imageUrl,alt:"Character portrait",className:"h-full w-full object-cover"}):v.jsx(Lv,{className:"h-full w-full text-muted-foreground p-4"})}),v.jsx("button",{type:"button",onClick:()=>A(!0),disabled:N,className:"cursor-pointer rounded-md bg-secondary px-3 py-2 text-sm font-semibold text-secondary-foreground shadow-sm hover:bg-secondary/80 transition-colors disabled:bg-muted disabled:text-muted-foreground disabled:cursor-not-allowed",children:"Change"})]}),N&&v.jsx("p",{className:"text-xs text-muted-foreground",children:"Save the character to enable the image uploader."})]}),v.jsx(Ms,{label:"Character Name",name:"name",type:"text",value:n.name,onChange:_,placeholder:"e.g., Eldrin"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsx(Ms,{label:"Class",name:"class",type:"text",value:n.class,onChange:_,placeholder:"e.g., Wizard"}),v.jsx(Ms,{label:"Subclass",name:"subclass",type:"text",value:n.subclass,onChange:_,placeholder:"e.g., School of Evocation"})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsx(Ms,{label:"Race",name:"race",type:"text",value:n.race,onChange:_,placeholder:"e.g., High-Elf"}),v.jsx(Ms,{label:"Background",name:"background",type:"text",value:n.background,onChange:_,placeholder:"e.g., Sage"})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsx(Ms,{label:"Alignment",name:"alignment",type:"text",value:n.alignment,onChange:_,placeholder:"e.g., Chaotic Good"}),v.jsx(Ms,{label:"Level",name:"level",type:"number",value:n.level,onChange:_})]}),v.jsx(Ms,{label:"Languages",name:"languages",type:"text",value:n.languages,onChange:_,placeholder:"e.g., Common, Elvish"})]})}),v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Hit Points"}),v.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"hp-current",className:"block text-xs font-medium text-muted-foreground text-center",children:"Current"}),v.jsx("input",{id:"hp-current",type:"number",value:n.hp.current,onChange:W=>S("current",parseInt(W.target.value)||0),className:"mt-1 w-full bg-input border border-border rounded-md py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"hp-max",className:"block text-xs font-medium text-muted-foreground text-center",children:"Max"}),v.jsx("input",{id:"hp-max",type:"number",value:n.hp.max,onChange:W=>S("max",parseInt(W.target.value)||0),className:"mt-1 w-full bg-input border border-border rounded-md py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"hp-temporary",className:"block text-xs font-medium text-muted-foreground text-center",children:"Temporary"}),v.jsx("input",{id:"hp-temporary",type:"number",value:n.hp.temporary,onChange:W=>S("temporary",parseInt(W.target.value)||0),className:"mt-1 w-full bg-input border border-border rounded-md py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]})]})]}),v.jsx(Ms,{label:"Hit Dice",name:"hitDice",type:"text",value:n.hitDice.total,onChange:k,placeholder:"e.g. 1d8"})]}),v.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-2",children:[v.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Unarmored Defense"}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("input",{id:"unarmoredBase",type:"number",name:"unarmoredBase",value:((ye=n.unarmoredDefense)==null?void 0:ye.base)??10,onChange:z,className:"w-24 bg-input border border-border rounded-md py-1 px-2 text-foreground text-center focus:outline-none focus:ring-ring focus:border-accent","aria-label":"Base Armor Class"}),v.jsx("label",{htmlFor:"unarmoredBase",className:"text-xs text-muted-foreground mt-1",children:"Base AC"})]}),v.jsx("span",{className:"text-xl text-muted-foreground",children:" + "}),v.jsx("div",{className:"flex-1",children:v.jsx("div",{className:"grid grid-cols-3 gap-2",children:Yy.map(W=>{var X;return v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("input",{type:"checkbox",id:`unarmored-${W}`,checked:(X=n.unarmoredDefense)==null?void 0:X.abilities.includes(W),onChange:()=>U(W),className:"w-4 h-4 rounded-full text-primary bg-input border-border focus:ring-ring cursor-pointer"}),v.jsx("label",{htmlFor:`unarmored-${W}`,className:"text-xs text-muted-foreground mt-1 uppercase",children:W.substring(0,3)})]},W)})})})]})]})]}),v.jsx("div",{className:"space-y-6",children:v.jsxs("div",{className:"p-4 border border-border rounded-lg grid grid-cols-2 gap-4",children:[v.jsx(sp,{label:"Initiative",value:bs(ae)}),v.jsx(Ms,{label:"Speed",name:"speed",type:"number",value:n.speed,onChange:_}),v.jsx(sp,{label:"Proficiency",value:bs(M)}),v.jsxs("div",{className:"col-span-2",children:[v.jsx("label",{htmlFor:"spellcastingAbility",className:"block text-sm font-medium text-muted-foreground",children:"Spellcasting Ability"}),v.jsxs("select",{id:"spellcastingAbility",name:"spellcastingAbility",value:n.spellcastingAbility,onChange:_,className:"mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent sm:text-sm",children:[v.jsx("option",{value:"",children:"None"}),Yy.map(W=>v.jsx("option",{value:W,className:"capitalize",children:W},W))]})]}),v.jsx(sp,{label:"Spell Save DC",value:String(be)}),v.jsx(sp,{label:"Spell Attack",value:String(pe)})]})})]})}),v.jsx("div",{id:"panel-stats",role:"tabpanel","aria-labelledby":"tab-stats",hidden:E!=="stats",children:v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Yy.map(W=>{const X=n.abilityScores[W],ce=Wl(X),Oe=n.savingThrows[W],ke=ce+(Oe.proficient?M:0),$e=n.skills.filter(je=>je.ability===W);return v.jsxs("div",{className:"bg-card p-3 rounded-lg flex flex-col gap-3 border border-border",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("div",{className:"flex flex-col items-center justify-center bg-muted p-2 rounded-lg w-20",children:[v.jsx("span",{className:"text-3xl font-bold font-mono text-foreground",children:bs(ce)}),v.jsx("span",{className:"text-xs uppercase tracking-wider text-muted-foreground",children:W.substring(0,3)})]}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"text-xl font-cinzel text-accent capitalize",children:W}),v.jsx("input",{type:"number",value:X,onChange:je=>j(W,parseInt(je.target.value)||0),className:"w-full bg-input text-center text-lg rounded border border-border p-1 focus:ring-ring","aria-label":`${W} score`})]})]}),v.jsxs("div",{className:"bg-muted/60 p-2 rounded-md space-y-2",children:[v.jsxs("label",{htmlFor:`saving-throw-${W}`,className:"flex items-center justify-between cursor-pointer text-sm",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("input",{type:"checkbox",id:`saving-throw-${W}`,checked:Oe.proficient,onChange:()=>O(W),className:"w-4 h-4 rounded-full text-primary bg-input border-border focus:ring-ring"}),v.jsx("span",{className:"text-foreground",children:"Saving Throw"})]}),v.jsx("span",{className:"font-mono font-bold text-lg text-foreground",children:bs(ke)})]}),$e.map(je=>{const gt=ce+(je.proficient?M:0)+(je.expertise?M:0);return v.jsxs("div",{className:"flex items-center justify-between text-sm",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("input",{type:"checkbox",id:`skill-prof-${je.name}`,checked:je.proficient,onChange:()=>G(je.name),className:"w-4 h-4 rounded-full text-primary bg-input border-border focus:ring-ring cursor-pointer"}),v.jsx("input",{type:"checkbox",id:`skill-exp-${je.name}`,checked:je.expertise,onChange:()=>J(je.name),className:"w-4 h-4 rounded-sm text-accent bg-input border-border focus:ring-ring cursor-pointer",title:"Expertise"}),v.jsx("label",{htmlFor:`skill-prof-${je.name}`,className:"cursor-pointer text-foreground",children:je.name})]}),v.jsx("span",{className:"font-mono font-bold text-lg text-foreground",children:bs(gt)})]},je.name)})]})]},W)})})}),v.jsx("div",{id:"panel-combat",role:"tabpanel","aria-labelledby":"tab-combat",hidden:E!=="combat",className:"min-h-[60vh]",children:v.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-full",children:[v.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col p-4 border border-border rounded-lg",children:v.jsx(yW,{})}),v.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col p-4 border border-border rounded-lg",children:v.jsx(fW,{})})]})}),v.jsx("div",{id:"panel-bio",role:"tabpanel","aria-labelledby":"tab-bio",hidden:E!=="bio",className:"min-h-[60vh]",children:v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"flex flex-col gap-6",children:[v.jsx(zu,{label:"Personality Traits",name:"personalityTraits",value:n.personalityTraits,onChange:_}),v.jsx(zu,{label:"Ideals",name:"ideals",value:n.ideals,onChange:_}),v.jsx(zu,{label:"Bonds",name:"bonds",value:n.bonds,onChange:_}),v.jsx(zu,{label:"Flaws",name:"flaws",value:n.flaws,onChange:_})]}),v.jsxs("div",{className:"flex flex-col gap-6",children:[v.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border flex flex-col",children:[v.jsx("h3",{className:"text-lg font-semibold text-accent mb-2",children:"AI Personality Generator"}),v.jsx("input",{type:"text",placeholder:"Optional: Add a keyword (e.g., 'tragic', 'grew up an orphan')",value:m,onChange:W=>y(W.target.value),className:"w-full bg-input border border-border rounded-md p-2 text-sm mb-2 focus:ring-ring focus:border-accent"}),v.jsxs("button",{onClick:ee,disabled:f,className:"flex w-full justify-center items-center gap-2 text-sm bg-primary hover:bg-primary/90 px-3 py-2 rounded-md text-primary-foreground transition disabled:bg-muted disabled:text-muted-foreground",children:[v.jsx(jg,{className:"w-4 h-4"}),f?"Generating...":"Generate with AI"]})]}),v.jsx(zu,{label:"Notes",name:"notes",value:n.notes,onChange:_,placeholder:"Campaign notes, important NPCs, etc."}),v.jsx(zu,{label:"DM Notes",name:"dmNotes",value:n.dmNotes,onChange:_,placeholder:"Notes from your DM, or secrets your character knows."})]})]})}),v.jsx("div",{id:"panel-inventory",role:"tabpanel","aria-labelledby":"tab-inventory",hidden:E!=="inventory",className:"min-h-[60vh]",children:v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"lg:col-span-1",children:[v.jsx("h3",{className:"text-lg font-cinzel text-accent mb-4",children:"Currency"}),v.jsx("div",{className:"bg-muted/50 p-4 rounded-lg grid grid-cols-3 sm:grid-cols-5 gap-3 border border-border",children:Object.entries(n.currency).map(([W,X])=>v.jsxs("div",{children:[v.jsx("label",{className:"block text-center text-sm font-medium text-muted-foreground uppercase",children:W}),v.jsx("input",{type:"number",value:X,onChange:ce=>x(W,parseInt(ce.target.value,10)||0),className:"mt-1 block w-full bg-input border border-border rounded-md py-1 px-2 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]},W))})]}),v.jsx("div",{className:"lg:col-span-2 p-4 border border-border rounded-lg",children:v.jsx(pW,{})})]})}),v.jsxs("div",{id:"panel-spells",role:"tabpanel","aria-labelledby":"tab-spells",hidden:E!=="spells",className:"min-h-[60vh] space-y-6",children:[v.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg border border-border",children:[v.jsx("h4",{className:"text-lg font-cinzel text-accent mb-3",children:"Maximum Spell Slots"}),v.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-5 md:grid-cols-9 gap-3",children:Array.from({length:9},(W,X)=>X+1).map(W=>{var X;return v.jsxs("div",{children:[v.jsxs("label",{className:"block text-center text-sm font-medium text-muted-foreground",children:["Lvl ",W]}),v.jsx("input",{type:"number",min:"0",value:((X=n.spellSlots[W])==null?void 0:X.max)??0,onChange:ce=>Q(W,parseInt(ce.target.value,10)||0),className:"mt-1 block w-full bg-input border border-border rounded-md py-1 px-2 text-foreground focus:outline-none focus:ring-ring focus:border-accent text-center"})]},W)})})]}),v.jsx("div",{className:"p-4 border border-border rounded-lg",children:v.jsx(wW,{character:n,onUpdateCharacter:i})}),v.jsx("div",{className:"p-4 border border-border rounded-lg",children:v.jsx(uW,{})})]}),v.jsx("div",{id:"panel-companions",role:"tabpanel","aria-labelledby":"tab-companions",hidden:E!=="companions",className:"min-h-[60vh]",children:v.jsx(UD,{})})]}),v.jsx(LD,{isOpen:I,onClose:()=>A(!1),onImageReady:T})]}):v.jsx("div",{className:"flex justify-center items-center h-screen",children:v.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-accent"})})},kW="modulepreload",LW=function(t){return"/"+t},GS={},Od=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=LW(c),c in GS)return;GS[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":kW,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((m,y)=>{p.addEventListener("load",m),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},jW=t=>Math.floor((t-10)/2),Wy=t=>t>=0?`+${t}`:String(t),PW=["strength","dexterity","constitution","intelligence","wisdom","charisma"],UW=()=>{const{character:t}=ea();if(!t)return null;const{proficiencyBonus:e,abilityScores:n,savingThrows:r,skills:i}=t;return v.jsxs("div",{className:"bg-card p-4 rounded-lg border border-border",children:[v.jsx("h3",{className:"text-lg font-cinzel text-accent mb-3 text-center",children:"Abilities"}),v.jsx("div",{className:"space-y-3",children:PW.map(s=>{const a=n[s],l=jW(a),c=r[s],d=l+(c.proficient?e:0),f=i.filter(p=>p.ability===s);return v.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg border border-border/50",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("h4",{className:"text-lg font-cinzel text-accent capitalize",children:s}),v.jsxs("div",{className:"flex items-baseline gap-2",children:[v.jsx("span",{className:"text-3xl font-mono text-foreground font-bold",children:a}),v.jsxs("span",{className:"text-2xl font-mono text-accent font-bold",children:["(",Wy(l),")"]})]})]}),v.jsxs("div",{className:"bg-muted/60 p-2 rounded-md space-y-2",children:[v.jsxs("div",{className:"flex items-center justify-between text-sm text-foreground",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:`w-5 h-5 rounded-full border-2 transition-colors ${c.proficient?"bg-primary border-primary":"bg-transparent border-border"}`}),v.jsx("span",{children:"Saving Throw"})]}),v.jsx("span",{className:"font-mono font-bold text-base text-foreground",children:Wy(d)})]}),v.jsx("hr",{className:"border-border"}),f.map(p=>{const m=l+(p.proficient?e:0)+(p.expertise?e:0);let y="bg-transparent border-border";return p.expertise?y="bg-accent border-accent ring-2 ring-offset-2 ring-offset-muted/60 ring-accent":p.proficient&&(y="bg-accent-foreground border-primary"),v.jsxs("div",{className:"flex items-center justify-between text-sm text-foreground",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:`w-5 h-5 rounded-full border-2 transition-all ${y}`}),v.jsx("span",{children:p.name})]}),v.jsx("span",{className:"font-mono font-bold text-base text-foreground",children:Wy(m)})]},p.name)})]})]},s)})})]})},VW=K.lazy(()=>Od(()=>import("./MainTabView-CLbvIM5R.js"),[])),zW=K.lazy(()=>Od(()=>import("./CombatTabView-Bq8w3wmD.js"),[])),BW=K.lazy(()=>Od(()=>import("./SpellsTabView-BvpfJfCD.js"),[])),FW=K.lazy(()=>Od(()=>import("./InventoryTabView-jPSADYUr.js"),[])),HW=K.lazy(()=>Od(()=>import("./InfoTabView-D-0yJcmP.js"),[])),qW=()=>v.jsx("div",{className:"flex justify-center items-center h-64",children:v.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-accent"})}),GW=({label:t,isActive:e,onClick:n,id:r,controls:i})=>v.jsx("button",{id:r,role:"tab","aria-selected":e,"aria-controls":i,onClick:n,className:`px-4 py-2 text-sm sm:text-base font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-card text-accent border-b-2 border-accent":"text-muted-foreground hover:bg-muted border-b-2 border-transparent"}`,children:t}),$W=[{key:"main",label:"Main"},{key:"abilities",label:"Abilities"},{key:"combat",label:"Combat"},{key:"spells",label:"Spells"},{key:"inventory",label:"Inventory"},{key:"info",label:"Info"},{key:"companions",label:"Companions"}],YW={main:VW,abilities:UW,combat:zW,spells:BW,inventory:FW,info:HW,companions:UD},WW=()=>{const{characterId:t}=iI(),e=eh(),{character:n,setCharacter:r,updateCharacter:i}=ea(),[s,a]=K.useState("main"),[l,c]=K.useState(!1),[d,f]=K.useState(!1),[p,m]=K.useState(!1),y=K.useRef(!0);K.useEffect(()=>{if(!t)return;(async()=>{const A=await lD(t);r(A)})()},[t,r]),K.useEffect(()=>{if(y.current){y.current=!1;return}if(n){const I=setTimeout(()=>{uD(n)},1500);return()=>{clearTimeout(I)}}},[n]);const E=K.useRef(null),C=K.useCallback(()=>{const I=E.current;if(!I)return;const A=I.scrollWidth>I.clientWidth;f(A&&I.scrollLeft>0),m(A&&I.scrollLeft<I.scrollWidth-I.clientWidth-1)},[]);return K.useEffect(()=>{const I=E.current;if(I)return C(),window.addEventListener("resize",C),I.addEventListener("scroll",C),()=>{window.removeEventListener("resize",C),I.removeEventListener("scroll",C)}},[n,C]),n?v.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:pt-8",children:[v.jsxs("header",{className:"grid grid-cols-2 sm:flex sm:justify-between items-center gap-y-4 gap-x-2 mb-6 border-b border-border pb-4",children:[v.jsxs("div",{className:"col-span-2 flex items-center gap-4 text-center justify-center sm:order-2",children:[n.imageUrl&&v.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border-2 border-border shadow-md cursor-pointer hover:scale-105 transition-transform duration-200",onClick:()=>c(!0)}),v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl sm:text-3xl font-cinzel text-accent",children:n.name}),v.jsxs("p",{className:"text-muted-foreground capitalize text-sm",children:[n.race," ",n.class," ",n.subclass&&`(${n.subclass})`,"  Level ",n.level,"  ",n.alignment]})]})]}),v.jsxs("button",{onClick:()=>e("/"),className:"justify-self-start flex items-center gap-2 rounded-md px-3 py-2 font-semibold text-muted-foreground transition-all duration-200 hover:scale-105 hover:text-accent [text-shadow:0_1px_2px_rgba(0,0,0,0.3)] sm:order-1","aria-label":"Back to character list",children:[v.jsx(fD,{className:"w-5 h-5"}),v.jsx("span",{className:"hidden sm:inline",children:"Back to List"}),v.jsx("span",{className:"sm:hidden",children:"Back"})]}),v.jsxs("button",{onClick:()=>e(`/character/${t}/edit`),className:"justify-self-end flex items-center gap-2 rounded-md px-3 py-2 font-bold text-primary transition-all duration-200 hover:scale-105 hover:text-accent [text-shadow:0_1px_2px_rgba(0,0,0,0.3)] sm:order-3","aria-label":"Edit character sheet",children:[v.jsx(Ba,{className:"w-5 h-5"}),v.jsx("span",{className:"hidden sm:inline",children:"Edit Sheet"}),v.jsx("span",{className:"sm:hidden",children:"Edit"})]})]}),v.jsxs("div",{className:"relative",children:[v.jsx("div",{ref:E,role:"tablist","aria-label":"Character View Sections",className:"flex space-x-1 mb-6 border-b border-border overflow-x-auto no-scrollbar",children:$W.map(I=>v.jsx(GW,{id:`play-tab-${I.key}`,controls:`play-panel-${I.key}`,label:I.label,isActive:s===I.key,onClick:()=>a(I.key)},I.key))}),d&&v.jsx("div",{className:"absolute left-0 top-0 bottom-0 flex items-center bg-gradient-to-r from-background to-transparent pr-8 pointer-events-none",children:v.jsx("button",{onClick:()=>{var I;return(I=E.current)==null?void 0:I.scrollBy({left:-200,behavior:"smooth"})},className:"p-1 rounded-full bg-card/50 hover:bg-accent text-foreground hover:text-accent-foreground transition-colors pointer-events-auto","aria-label":"Scroll left",children:v.jsx(E$,{className:"w-5 h-5"})})}),p&&v.jsx("div",{className:"absolute right-0 top-0 bottom-0 flex items-center bg-gradient-to-l from-background to-transparent pl-8 pointer-events-none",children:v.jsx("button",{onClick:()=>{var I;return(I=E.current)==null?void 0:I.scrollBy({left:200,behavior:"smooth"})},className:"p-1 rounded-full bg-card/50 hover:bg-accent text-foreground hover:text-accent-foreground transition-colors pointer-events-auto","aria-label":"Scroll right",children:v.jsx(x$,{className:"w-5 h-5"})})})]}),v.jsx("main",{id:`play-panel-${s}`,role:"tabpanel","aria-labelledby":`play-tab-${s}`,className:"bg-muted/50 p-4 sm:p-6 rounded-b-lg rounded-tr-lg",children:v.jsx(K.Suspense,{fallback:v.jsx(qW,{}),children:Ol.createElement(YW[s],{readOnly:!0})})}),l&&n.imageUrl&&v.jsx(jD,{imageUrl:n.imageUrl,altText:`Profile image for ${n.name}`,onClose:()=>c(!1)})]}):v.jsx("div",{className:"flex justify-center items-center h-screen",children:v.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-accent"})})},XW=()=>{const{currentUser:t,signInWithGoogle:e}=pu(),n=eh();K.useEffect(()=>{t&&n("/")},[t,n]);const r=async()=>{try{await e(),n("/")}catch(i){console.error("Error during sign-in:",i)}};return v.jsx("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-100px)] p-4 text-center",children:v.jsxs("div",{className:"bg-card p-8 rounded-lg shadow-lg max-w-md w-full border border-border",children:[v.jsx("h1",{className:"text-3xl font-cinzel text-accent mb-4",children:"Join the Adventure"}),v.jsx("p",{className:"text-muted-foreground mb-8",children:"Sign in with Google to sync your characters across devices."}),v.jsxs("button",{onClick:r,className:"flex items-center justify-center gap-3 w-full px-6 py-3 bg-white text-zinc-700 font-bold rounded-lg shadow-md hover:bg-zinc-200 transition-colors",children:[v.jsx(A$,{className:"w-6 h-6"}),"Sign In with Google"]})]})})},KW=()=>{const{currentUser:t}=pu(),e=eh(),[n,r]=K.useState(""),[i,s]=K.useState(null),[a,l]=K.useState(null),[c,d]=K.useState(!1),[f,p]=K.useState("");K.useEffect(()=>{t?(r(t.displayName||""),l(t.photoURL||null)):e("/login")},[t,e]);const m=async E=>{if(E.target.files&&E.target.files[0]){const C=E.target.files[0];s(C),l(URL.createObjectURL(C))}},y=async()=>{if(t){d(!0),p("");try{let E=t.photoURL;if(i){const C=await gr(i,{maxSizeMB:.5,maxWidthOrHeight:512,useWebWorker:!0}),I=X3(),A=Ww(I,`users/${t.uid}/profile.jpg`);await UG(A,C),E=await Yw(A)}await J7(t,{displayName:n,photoURL:E}),alert("Profile updated successfully!"),s(null)}catch(E){console.error("Error updating profile:",E),p("Failed to update profile. Please try again.")}finally{d(!1)}}};return t?v.jsx("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-100px)] p-4 text-center",children:v.jsxs("div",{className:"bg-card p-8 rounded-lg shadow-lg max-w-md w-full border border-border",children:[v.jsxs("h1",{className:"text-3xl font-cinzel text-accent mb-4",children:["Welcome, ",t.displayName||"Adventurer"]}),v.jsx("p",{className:"text-muted-foreground mb-8",children:"Manage your account details below."}),v.jsxs("div",{className:"flex flex-col space-y-4 w-full",children:[v.jsxs("div",{className:"flex flex-col items-center gap-4 mb-4",children:[v.jsxs("label",{htmlFor:"profile-image-upload",className:"cursor-pointer group relative",children:[v.jsx("img",{src:a||`https://api.dicebear.com/8.x/lorelei/svg?seed=${t.uid}`,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-2 border-accent/50 group-hover:opacity-75 transition-opacity"}),v.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:v.jsx("span",{className:"text-white text-sm",children:"Change"})})]}),v.jsx("input",{id:"profile-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:m})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"nickname",className:"block text-sm font-medium text-muted-foreground text-left mb-1",children:"Nickname"}),v.jsx("input",{id:"nickname",type:"text",value:n,onChange:E=>r(E.target.value),placeholder:"Enter your nickname",className:"mt-1 block w-full bg-input border border-border rounded-md shadow-sm py-2 px-3 text-foreground focus:outline-none focus:ring-ring focus:border-accent sm:text-sm"})]}),v.jsx("button",{onClick:y,disabled:c,className:"px-6 py-3 bg-primary text-primary-foreground font-bold rounded-lg shadow-md hover:bg-primary/90 transition-colors disabled:bg-muted disabled:text-muted-foreground",children:c?"Saving...":"Save Profile"}),f&&v.jsx("p",{className:"text-destructive text-sm",children:f})]})]})}):null};function QW(){const t=lI();if(Pc(t))return v.jsxs("div",{className:"text-center p-8",children:[v.jsxs("h1",{className:"text-2xl font-bold text-red-500",children:[t.status," ",t.statusText]}),v.jsx("p",{className:"text-zinc-400",children:t.data})]});const e=t instanceof Error?t.message:"Unknown error";return v.jsxs("div",{className:"text-center p-8",children:[v.jsx("h1",{className:"text-2xl font-bold text-red-500",children:"Something went wrong"}),v.jsx("p",{className:"text-zinc-400",children:e})]})}function ZW(){return v.jsxs("div",{className:"text-center p-8",children:[v.jsx("h1",{className:"text-2xl font-bold text-red-500",children:"404 Not Found"}),v.jsx("p",{className:"text-zinc-400",children:"The page you are looking for does not exist."})]})}const JW=()=>v.jsx(z$,{children:v.jsx(uI,{})}),eX=b8([{path:"/",element:v.jsx(V$,{}),errorElement:v.jsx(QW,{}),children:[{element:v.jsx(JW,{}),children:[{index:!0,element:v.jsx(F$,{})},{path:"character/new",element:v.jsx(qS,{})},{path:"character/:characterId/edit",element:v.jsx(qS,{})},{path:"character/:characterId",element:v.jsx(WW,{})}]},{path:"login",element:v.jsx(XW,{})},{path:"account",element:v.jsx(KW,{})},{path:"*",element:v.jsx(ZW,{})}]}]),VD=document.getElementById("root");if(!VD)throw new Error("Could not find root element to mount to");s9.createRoot(VD).render(v.jsx(Ol.StrictMode,{children:v.jsx(d$,{children:v.jsx(h$,{children:v.jsx(N8,{router:eX})})})}));export{v$ as C,mD as H,pD as M,jv as P,rX as R,PD as S,iX as a,sp as b,i$ as c,bs as f,Wl as g,v as j,K as r,ea as u};
