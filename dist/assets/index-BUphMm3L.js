(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function M1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var k1={exports:{}},xf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DS=Symbol.for("react.transitional.element"),OS=Symbol.for("react.fragment");function P1(t,e,n){var r=null;if(n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:DS,type:t,key:r,ref:e!==void 0?e:null,props:n}}xf.Fragment=OS;xf.jsx=P1;xf.jsxs=P1;k1.exports=xf;var p=k1.exports,j1={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg=Symbol.for("react.transitional.element"),MS=Symbol.for("react.portal"),kS=Symbol.for("react.fragment"),PS=Symbol.for("react.strict_mode"),jS=Symbol.for("react.profiler"),US=Symbol.for("react.consumer"),LS=Symbol.for("react.context"),VS=Symbol.for("react.forward_ref"),zS=Symbol.for("react.suspense"),BS=Symbol.for("react.memo"),U1=Symbol.for("react.lazy"),Wy=Symbol.iterator;function FS(t){return t===null||typeof t!="object"?null:(t=Wy&&t[Wy]||t["@@iterator"],typeof t=="function"?t:null)}var L1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V1=Object.assign,z1={};function Go(t,e,n){this.props=t,this.context=e,this.refs=z1,this.updater=n||L1}Go.prototype.isReactComponent={};Go.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Go.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function B1(){}B1.prototype=Go.prototype;function ig(t,e,n){this.props=t,this.context=e,this.refs=z1,this.updater=n||L1}var sg=ig.prototype=new B1;sg.constructor=ig;V1(sg,Go.prototype);sg.isPureReactComponent=!0;var Zy=Array.isArray,pt={H:null,A:null,T:null,S:null,V:null},F1=Object.prototype.hasOwnProperty;function ag(t,e,n,r,i,s){return n=s.ref,{$$typeof:rg,type:t,key:e,ref:n!==void 0?n:null,props:s}}function HS(t,e){return ag(t.type,e,void 0,void 0,void 0,t.props)}function og(t){return typeof t=="object"&&t!==null&&t.$$typeof===rg}function qS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Jy=/\/+/g;function wd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qS(""+t.key):e.toString(36)}function ev(){}function GS(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(ev,ev):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Ba(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case rg:case MS:a=!0;break;case U1:return a=t._init,Ba(a(t._payload),e,n,r,i)}}if(a)return i=i(t),a=r===""?"."+wd(t,0):r,Zy(i)?(n="",a!=null&&(n=a.replace(Jy,"$&/")+"/"),Ba(i,e,n,"",function(c){return c})):i!=null&&(og(i)&&(i=HS(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(Jy,"$&/")+"/")+a)),e.push(i)),1;a=0;var o=r===""?".":r+":";if(Zy(t))for(var l=0;l<t.length;l++)r=t[l],s=o+wd(r,l),a+=Ba(r,e,n,s,i);else if(l=FS(t),typeof l=="function")for(t=l.call(t),l=0;!(r=t.next()).done;)r=r.value,s=o+wd(r,l++),a+=Ba(r,e,n,s,i);else if(s==="object"){if(typeof t.then=="function")return Ba(GS(t),e,n,r,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function vc(t,e,n){if(t==null)return t;var r=[],i=0;return Ba(t,r,"","",function(s){return e.call(n,s,i++)}),r}function $S(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tv=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function QS(){}xe.Children={map:vc,forEach:function(t,e,n){vc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vc(t,function(){e++}),e},toArray:function(t){return vc(t,function(e){return e})||[]},only:function(t){if(!og(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=Go;xe.Fragment=kS;xe.Profiler=jS;xe.PureComponent=ig;xe.StrictMode=PS;xe.Suspense=zS;xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=pt;xe.__COMPILER_RUNTIME={__proto__:null,c:function(t){return pt.H.useMemoCache(t)}};xe.cache=function(t){return function(){return t.apply(null,arguments)}};xe.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var r=V1({},t.props),i=t.key,s=void 0;if(e!=null)for(a in e.ref!==void 0&&(s=void 0),e.key!==void 0&&(i=""+e.key),e)!F1.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(r[a]=e[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}return ag(t.type,i,void 0,void 0,s,r)};xe.createContext=function(t){return t={$$typeof:LS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:US,_context:t},t};xe.createElement=function(t,e,n){var r,i={},s=null;if(e!=null)for(r in e.key!==void 0&&(s=""+e.key),e)F1.call(e,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return ag(t,s,void 0,void 0,null,i)};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:VS,render:t}};xe.isValidElement=og;xe.lazy=function(t){return{$$typeof:U1,_payload:{_status:-1,_result:t},_init:$S}};xe.memo=function(t,e){return{$$typeof:BS,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=pt.T,n={};pt.T=n;try{var r=t(),i=pt.S;i!==null&&i(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(QS,tv)}catch(s){tv(s)}finally{pt.T=e}};xe.unstable_useCacheRefresh=function(){return pt.H.useCacheRefresh()};xe.use=function(t){return pt.H.use(t)};xe.useActionState=function(t,e,n){return pt.H.useActionState(t,e,n)};xe.useCallback=function(t,e){return pt.H.useCallback(t,e)};xe.useContext=function(t){return pt.H.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t,e){return pt.H.useDeferredValue(t,e)};xe.useEffect=function(t,e,n){var r=pt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(t,e)};xe.useId=function(){return pt.H.useId()};xe.useImperativeHandle=function(t,e,n){return pt.H.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return pt.H.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return pt.H.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return pt.H.useMemo(t,e)};xe.useOptimistic=function(t,e){return pt.H.useOptimistic(t,e)};xe.useReducer=function(t,e,n){return pt.H.useReducer(t,e,n)};xe.useRef=function(t){return pt.H.useRef(t)};xe.useState=function(t){return pt.H.useState(t)};xe.useSyncExternalStore=function(t,e,n){return pt.H.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return pt.H.useTransition()};xe.version="19.1.0";j1.exports=xe;var z=j1.exports;const KS=M1(z);var H1={exports:{}},Sf={},q1={exports:{}},G1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,O){var $=D.length;D.push(O);e:for(;0<$;){var F=$-1>>>1,K=D[F];if(0<i(K,O))D[F]=O,D[$]=K,$=F;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var O=D[0],$=D.pop();if($!==O){D[0]=$;e:for(var F=0,K=D.length,ie=K>>>1;F<ie;){var ee=2*(F+1)-1,B=D[ee],Q=ee+1,V=D[Q];if(0>i(B,$))Q<K&&0>i(V,B)?(D[F]=V,D[Q]=$,F=Q):(D[F]=B,D[ee]=$,F=ee);else if(Q<K&&0>i(V,$))D[F]=V,D[Q]=$,F=Q;else break e}}return O}function i(D,O){var $=D.sortIndex-O.sortIndex;return $!==0?$:D.id-O.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,d=null,f=3,m=!1,E=!1,N=!1,k=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function M(D){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=D)r(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function U(D){if(N=!1,M(D),!E)if(n(l)!==null)E=!0,T||(T=!0,I());else{var O=n(c);O!==null&&H(U,O.startTime-D)}}var T=!1,A=-1,y=5,v=-1;function w(){return k?!0:!(t.unstable_now()-v<y)}function C(){if(k=!1,T){var D=t.unstable_now();v=D;var O=!0;try{e:{E=!1,N&&(N=!1,x(A),A=-1),m=!0;var $=f;try{t:{for(M(D),d=n(l);d!==null&&!(d.expirationTime>D&&w());){var F=d.callback;if(typeof F=="function"){d.callback=null,f=d.priorityLevel;var K=F(d.expirationTime<=D);if(D=t.unstable_now(),typeof K=="function"){d.callback=K,M(D),O=!0;break t}d===n(l)&&r(l),M(D)}else r(l);d=n(l)}if(d!==null)O=!0;else{var ie=n(c);ie!==null&&H(U,ie.startTime-D),O=!1}}break e}finally{d=null,f=$,m=!1}O=void 0}}finally{O?I():T=!1}}}var I;if(typeof S=="function")I=function(){S(C)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,L=R.port2;R.port1.onmessage=C,I=function(){L.postMessage(null)}}else I=function(){_(C,0)};function H(D,O){A=_(function(){D(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var $=f;f=O;try{return D()}finally{f=$}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(D,O){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var $=f;f=D;try{return O()}finally{f=$}},t.unstable_scheduleCallback=function(D,O,$){var F=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?F+$:F):$=F,D){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=$+K,D={id:h++,callback:O,priorityLevel:D,startTime:$,expirationTime:K,sortIndex:-1},$>F?(D.sortIndex=$,e(c,D),n(l)===null&&D===n(c)&&(N?(x(A),A=-1):N=!0,H(U,$-F))):(D.sortIndex=K,e(l,D),E||m||(E=!0,T||(T=!0,I()))),D},t.unstable_shouldYield=w,t.unstable_wrapCallback=function(D){var O=f;return function(){var $=f;f=O;try{return D.apply(this,arguments)}finally{f=$}}}})(G1);q1.exports=G1;var YS=q1.exports,$1={exports:{}},Sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XS=z;function Q1(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function qi(){}var An={d:{f:qi,r:function(){throw Error(Q1(522))},D:qi,C:qi,L:qi,m:qi,X:qi,S:qi,M:qi},p:0,findDOMNode:null},WS=Symbol.for("react.portal");function ZS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:WS,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}var Ml=XS.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Rf(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=An;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(Q1(299));return ZS(t,e,null,n)};Sn.flushSync=function(t){var e=Ml.T,n=An.p;try{if(Ml.T=null,An.p=2,t)return t()}finally{Ml.T=e,An.p=n,An.d.f()}};Sn.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,An.d.C(t,e))};Sn.prefetchDNS=function(t){typeof t=="string"&&An.d.D(t)};Sn.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,r=Rf(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?An.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):n==="script"&&An.d.X(t,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Sn.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Rf(e.as,e.crossOrigin);An.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&An.d.M(t)};Sn.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,r=Rf(n,e.crossOrigin);An.d.L(t,n,{crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Sn.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Rf(e.as,e.crossOrigin);An.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else An.d.m(t)};Sn.requestFormReset=function(t){An.d.r(t)};Sn.unstable_batchedUpdates=function(t,e){return t(e)};Sn.useFormState=function(t,e,n){return Ml.H.useFormState(t,e,n)};Sn.useFormStatus=function(){return Ml.H.useHostTransitionStatus()};Sn.version="19.1.0";function K1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(K1)}catch(t){console.error(t)}}K1(),$1.exports=Sn;var Y1=$1.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xt=YS,X1=z,JS=Y1;function J(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function W1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Su(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Z1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nv(t){if(Su(t)!==t)throw Error(J(188))}function eR(t){var e=t.alternate;if(!e){if(e=Su(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return nv(i),t;if(s===r)return nv(i),e;s=s.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function J1(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=J1(t),e!==null)return e;t=t.sibling}return null}var ht=Object.assign,tR=Symbol.for("react.element"),_c=Symbol.for("react.transitional.element"),Al=Symbol.for("react.portal"),Xa=Symbol.for("react.fragment"),eE=Symbol.for("react.strict_mode"),Rm=Symbol.for("react.profiler"),nR=Symbol.for("react.provider"),tE=Symbol.for("react.consumer"),yi=Symbol.for("react.context"),lg=Symbol.for("react.forward_ref"),Cm=Symbol.for("react.suspense"),Nm=Symbol.for("react.suspense_list"),ug=Symbol.for("react.memo"),Yi=Symbol.for("react.lazy"),Im=Symbol.for("react.activity"),rR=Symbol.for("react.memo_cache_sentinel"),rv=Symbol.iterator;function fl(t){return t===null||typeof t!="object"?null:(t=rv&&t[rv]||t["@@iterator"],typeof t=="function"?t:null)}var iR=Symbol.for("react.client.reference");function Dm(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===iR?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xa:return"Fragment";case Rm:return"Profiler";case eE:return"StrictMode";case Cm:return"Suspense";case Nm:return"SuspenseList";case Im:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Al:return"Portal";case yi:return(t.displayName||"Context")+".Provider";case tE:return(t._context.displayName||"Context")+".Consumer";case lg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ug:return e=t.displayName||null,e!==null?e:Dm(t.type)||"Memo";case Yi:e=t._payload,t=t._init;try{return Dm(t(e))}catch{}}return null}var xl=Array.isArray,_e=X1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fe=JS.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ea={pending:!1,data:null,method:null,action:null},Om=[],Wa=-1;function ii(t){return{current:t}}function tn(t){0>Wa||(t.current=Om[Wa],Om[Wa]=null,Wa--)}function gt(t,e){Wa++,Om[Wa]=t.current,t.current=e}var Qr=ii(null),tu=ii(null),hs=ii(null),yh=ii(null);function vh(t,e){switch(gt(hs,e),gt(tu,t),gt(Qr,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?l_(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=l_(e),t=vT(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}tn(Qr),gt(Qr,t)}function So(){tn(Qr),tn(tu),tn(hs)}function Mm(t){t.memoizedState!==null&&gt(yh,t);var e=Qr.current,n=vT(e,t.type);e!==n&&(gt(tu,t),gt(Qr,n))}function _h(t){tu.current===t&&(tn(Qr),tn(tu)),yh.current===t&&(tn(yh),hu._currentValue=ea)}var km=Object.prototype.hasOwnProperty,cg=Xt.unstable_scheduleCallback,Td=Xt.unstable_cancelCallback,sR=Xt.unstable_shouldYield,aR=Xt.unstable_requestPaint,Kr=Xt.unstable_now,oR=Xt.unstable_getCurrentPriorityLevel,nE=Xt.unstable_ImmediatePriority,rE=Xt.unstable_UserBlockingPriority,bh=Xt.unstable_NormalPriority,lR=Xt.unstable_LowPriority,iE=Xt.unstable_IdlePriority,uR=Xt.log,cR=Xt.unstable_setDisableYieldValue,Ru=null,Jn=null;function as(t){if(typeof uR=="function"&&cR(t),Jn&&typeof Jn.setStrictMode=="function")try{Jn.setStrictMode(Ru,t)}catch{}}var er=Math.clz32?Math.clz32:dR,hR=Math.log,fR=Math.LN2;function dR(t){return t>>>=0,t===0?32:31-(hR(t)/fR|0)|0}var bc=256,Ec=4194304;function Gs(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Cf(t,e,n){var r=t.pendingLanes;if(r===0)return 0;var i=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=r&134217727;return o!==0?(r=o&~s,r!==0?i=Gs(r):(a&=o,a!==0?i=Gs(a):n||(n=o&~t,n!==0&&(i=Gs(n))))):(o=r&~s,o!==0?i=Gs(o):a!==0?i=Gs(a):n||(n=r&~t,n!==0&&(i=Gs(n)))),i===0?0:e!==0&&e!==i&&!(e&s)&&(s=i&-i,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:i}function Cu(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function mR(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sE(){var t=bc;return bc<<=1,!(bc&4194048)&&(bc=256),t}function aE(){var t=Ec;return Ec<<=1,!(Ec&62914560)&&(Ec=4194304),t}function Ad(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Nu(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function pR(t,e,n,r,i,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,c=t.hiddenUpdates;for(n=a&~n;0<n;){var h=31-er(n),d=1<<h;o[h]=0,l[h]=-1;var f=c[h];if(f!==null)for(c[h]=null,h=0;h<f.length;h++){var m=f[h];m!==null&&(m.lane&=-536870913)}n&=~d}r!==0&&oE(t,r,0),s!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function oE(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var r=31-er(e);t.entangledLanes|=e,t.entanglements[r]=t.entanglements[r]|1073741824|n&4194090}function lE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-er(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}function hg(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function fg(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function uE(){var t=Fe.p;return t!==0?t:(t=window.event,t===void 0?32:CT(t.type))}function gR(t,e){var n=Fe.p;try{return Fe.p=t,e()}finally{Fe.p=n}}var js=Math.random().toString(36).slice(2),yn="__reactFiber$"+js,Ln="__reactProps$"+js,$o="__reactContainer$"+js,Pm="__reactEvents$"+js,yR="__reactListeners$"+js,vR="__reactHandles$"+js,iv="__reactResources$"+js,Iu="__reactMarker$"+js;function dg(t){delete t[yn],delete t[Ln],delete t[Pm],delete t[yR],delete t[vR]}function Za(t){var e=t[yn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$o]||n[yn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=h_(t);t!==null;){if(n=t[yn])return n;t=h_(t)}return e}t=n,n=t.parentNode}return null}function Qo(t){if(t=t[yn]||t[$o]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function Sl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(J(33))}function co(t){var e=t[iv];return e||(e=t[iv]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Jt(t){t[Iu]=!0}var cE=new Set,hE={};function Ea(t,e){Ro(t,e),Ro(t+"Capture",e)}function Ro(t,e){for(hE[t]=e,t=0;t<e.length;t++)cE.add(e[t])}var _R=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sv={},av={};function bR(t){return km.call(av,t)?!0:km.call(sv,t)?!1:_R.test(t)?av[t]=!0:(sv[t]=!0,!1)}function Hc(t,e,n){if(bR(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var r=e.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function wc(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function fi(t,e,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+r)}}var xd,ov;function Fa(t){if(xd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xd=e&&e[1]||"",ov=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xd+t+ov}var Sd=!1;function Rd(t,e){if(!t||Sd)return"";Sd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(m){var f=m}Reflect.construct(t,[],d)}else{try{d.call()}catch(m){f=m}t.call(d.prototype)}}else{try{throw Error()}catch(m){f=m}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(m){if(m&&f&&typeof m.stack=="string")return[m.stack,f.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split(`
`),c=o.split(`
`);for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(r!==1||i!==1)do if(r--,i--,0>i||l[r]!==c[i]){var h=`
`+l[r].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=r&&0<=i);break}}}finally{Sd=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Fa(n):""}function ER(t){switch(t.tag){case 26:case 27:case 5:return Fa(t.type);case 16:return Fa("Lazy");case 13:return Fa("Suspense");case 19:return Fa("SuspenseList");case 0:case 15:return Rd(t.type,!1);case 11:return Rd(t.type.render,!1);case 1:return Rd(t.type,!0);case 31:return Fa("Activity");default:return""}}function lv(t){try{var e="";do e+=ER(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function lr(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wR(t){var e=fE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Eh(t){t._valueTracker||(t._valueTracker=wR(t))}function dE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=fE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function wh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var TR=/[\n"\\]/g;function hr(t){return t.replace(TR,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function jm(t,e,n,r,i,s,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+lr(e)):t.value!==""+lr(e)&&(t.value=""+lr(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?Um(t,a,lr(e)):n!=null?Um(t,a,lr(n)):r!=null&&t.removeAttribute("value"),i==null&&s!=null&&(t.defaultChecked=!!s),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+lr(o):t.removeAttribute("name")}function mE(t,e,n,r,i,s,a,o){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null))return;n=n!=null?""+lr(n):"",e=e!=null?""+lr(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}r=r??i,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=o?t.checked:!!r,t.defaultChecked=!!r,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a)}function Um(t,e,n){e==="number"&&wh(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function ho(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+lr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function pE(t,e,n){if(e!=null&&(e=""+lr(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+lr(n):""}function gE(t,e,n,r){if(e==null){if(r!=null){if(n!=null)throw Error(J(92));if(xl(r)){if(1<r.length)throw Error(J(93));r=r[0]}n=r}n==null&&(n=""),e=n}n=lr(e),t.defaultValue=n,r=t.textContent,r===n&&r!==""&&r!==null&&(t.value=r)}function Co(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var AR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uv(t,e,n){var r=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":r?t.setProperty(e,n):typeof n!="number"||n===0||AR.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function yE(t,e,n){if(e!=null&&typeof e!="object")throw Error(J(62));if(t=t.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||e!=null&&e.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var i in e)r=e[i],e.hasOwnProperty(i)&&n[i]!==r&&uv(t,i,r)}else for(var s in e)e.hasOwnProperty(s)&&uv(t,s,e[s])}function mg(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),SR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qc(t){return SR.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Lm=null;function pg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ja=null,fo=null;function cv(t){var e=Qo(t);if(e&&(t=e.stateNode)){var n=t[Ln]||null;e:switch(t=e.stateNode,e.type){case"input":if(jm(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+hr(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=r[Ln]||null;if(!i)throw Error(J(90));jm(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)r=n[e],r.form===t.form&&dE(r)}break e;case"textarea":pE(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&ho(t,!!n.multiple,e,!1)}}}var Cd=!1;function vE(t,e,n){if(Cd)return t(e,n);Cd=!0;try{var r=t(e);return r}finally{if(Cd=!1,(Ja!==null||fo!==null)&&(Lf(),Ja&&(e=Ja,t=fo,fo=Ja=null,cv(e),t)))for(e=0;e<t.length;e++)cv(t[e])}}function nu(t,e){var n=t.stateNode;if(n===null)return null;var r=n[Ln]||null;if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vm=!1;if(Ri)try{var dl={};Object.defineProperty(dl,"passive",{get:function(){Vm=!0}}),window.addEventListener("test",dl,dl),window.removeEventListener("test",dl,dl)}catch{Vm=!1}var os=null,gg=null,Gc=null;function _E(){if(Gc)return Gc;var t,e=gg,n=e.length,r,i="value"in os?os.value:os.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Gc=i.slice(t,1<r?1-r:void 0)}function $c(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Tc(){return!0}function hv(){return!1}function Vn(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Tc:hv,this.isPropagationStopped=hv,this}return ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tc)},persist:function(){},isPersistent:Tc}),e}var wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nf=Vn(wa),Du=ht({},wa,{view:0,detail:0}),RR=Vn(Du),Nd,Id,ml,If=ht({},Du,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ml&&(ml&&t.type==="mousemove"?(Nd=t.screenX-ml.screenX,Id=t.screenY-ml.screenY):Id=Nd=0,ml=t),Nd)},movementY:function(t){return"movementY"in t?t.movementY:Id}}),fv=Vn(If),CR=ht({},If,{dataTransfer:0}),NR=Vn(CR),IR=ht({},Du,{relatedTarget:0}),Dd=Vn(IR),DR=ht({},wa,{animationName:0,elapsedTime:0,pseudoElement:0}),OR=Vn(DR),MR=ht({},wa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kR=Vn(MR),PR=ht({},wa,{data:0}),dv=Vn(PR),jR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LR[t])?!!e[t]:!1}function yg(){return VR}var zR=ht({},Du,{key:function(t){if(t.key){var e=jR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$c(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yg,charCode:function(t){return t.type==="keypress"?$c(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$c(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),BR=Vn(zR),FR=ht({},If,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mv=Vn(FR),HR=ht({},Du,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yg}),qR=Vn(HR),GR=ht({},wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),$R=Vn(GR),QR=ht({},If,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),KR=Vn(QR),YR=ht({},wa,{newState:0,oldState:0}),XR=Vn(YR),WR=[9,13,27,32],vg=Ri&&"CompositionEvent"in window,kl=null;Ri&&"documentMode"in document&&(kl=document.documentMode);var ZR=Ri&&"TextEvent"in window&&!kl,bE=Ri&&(!vg||kl&&8<kl&&11>=kl),pv=" ",gv=!1;function EE(t,e){switch(t){case"keyup":return WR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var eo=!1;function JR(t,e){switch(t){case"compositionend":return wE(e);case"keypress":return e.which!==32?null:(gv=!0,pv);case"textInput":return t=e.data,t===pv&&gv?null:t;default:return null}}function eC(t,e){if(eo)return t==="compositionend"||!vg&&EE(t,e)?(t=_E(),Gc=gg=os=null,eo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bE&&e.locale!=="ko"?null:e.data;default:return null}}var tC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tC[t.type]:e==="textarea"}function TE(t,e,n,r){Ja?fo?fo.push(r):fo=[r]:Ja=r,e=zh(e,"onChange"),0<e.length&&(n=new Nf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Pl=null,ru=null;function nC(t){pT(t,0)}function Df(t){var e=Sl(t);if(dE(e))return t}function vv(t,e){if(t==="change")return e}var AE=!1;if(Ri){var Od;if(Ri){var Md="oninput"in document;if(!Md){var _v=document.createElement("div");_v.setAttribute("oninput","return;"),Md=typeof _v.oninput=="function"}Od=Md}else Od=!1;AE=Od&&(!document.documentMode||9<document.documentMode)}function bv(){Pl&&(Pl.detachEvent("onpropertychange",xE),ru=Pl=null)}function xE(t){if(t.propertyName==="value"&&Df(ru)){var e=[];TE(e,ru,t,pg(t)),vE(nC,e)}}function rC(t,e,n){t==="focusin"?(bv(),Pl=e,ru=n,Pl.attachEvent("onpropertychange",xE)):t==="focusout"&&bv()}function iC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Df(ru)}function sC(t,e){if(t==="click")return Df(e)}function aC(t,e){if(t==="input"||t==="change")return Df(e)}function oC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ir=typeof Object.is=="function"?Object.is:oC;function iu(t,e){if(ir(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!km.call(e,i)||!ir(t[i],e[i]))return!1}return!0}function Ev(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wv(t,e){var n=Ev(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ev(n)}}function SE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?SE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function RE(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=wh(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wh(t.document)}return e}function _g(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var lC=Ri&&"documentMode"in document&&11>=document.documentMode,to=null,zm=null,jl=null,Bm=!1;function Tv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bm||to==null||to!==wh(r)||(r=to,"selectionStart"in r&&_g(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),jl&&iu(jl,r)||(jl=r,r=zh(zm,"onSelect"),0<r.length&&(e=new Nf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=to)))}function qs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var no={animationend:qs("Animation","AnimationEnd"),animationiteration:qs("Animation","AnimationIteration"),animationstart:qs("Animation","AnimationStart"),transitionrun:qs("Transition","TransitionRun"),transitionstart:qs("Transition","TransitionStart"),transitioncancel:qs("Transition","TransitionCancel"),transitionend:qs("Transition","TransitionEnd")},kd={},CE={};Ri&&(CE=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function Ta(t){if(kd[t])return kd[t];if(!no[t])return t;var e=no[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in CE)return kd[t]=e[n];return t}var NE=Ta("animationend"),IE=Ta("animationiteration"),DE=Ta("animationstart"),uC=Ta("transitionrun"),cC=Ta("transitionstart"),hC=Ta("transitioncancel"),OE=Ta("transitionend"),ME=new Map,Fm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fm.push("scrollEnd");function Or(t,e){ME.set(t,e),Ea(e,[t])}var Av=new WeakMap;function fr(t,e){if(typeof t=="object"&&t!==null){var n=Av.get(t);return n!==void 0?n:(e={value:t,source:e,stack:lv(e)},Av.set(t,e),e)}return{value:t,source:e,stack:lv(e)}}var ar=[],ro=0,bg=0;function Of(){for(var t=ro,e=bg=ro=0;e<t;){var n=ar[e];ar[e++]=null;var r=ar[e];ar[e++]=null;var i=ar[e];ar[e++]=null;var s=ar[e];if(ar[e++]=null,r!==null&&i!==null){var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}s!==0&&kE(n,i,s)}}function Mf(t,e,n,r){ar[ro++]=t,ar[ro++]=e,ar[ro++]=n,ar[ro++]=r,bg|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function Eg(t,e,n,r){return Mf(t,e,n,r),Th(t)}function Ko(t,e){return Mf(t,null,null,e),Th(t)}function kE(t,e,n){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n);for(var i=!1,s=t.return;s!==null;)s.childLanes|=n,r=s.alternate,r!==null&&(r.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(i=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,i&&e!==null&&(i=31-er(n),t=s.hiddenUpdates,r=t[i],r===null?t[i]=[e]:r.push(e),e.lane=n|536870912),s):null}function Th(t){if(50<$l)throw $l=0,up=null,Error(J(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var io={};function fC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(t,e,n,r){return new fC(t,e,n,r)}function wg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ai(t,e){var n=t.alternate;return n===null?(n=Yn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function PE(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Qc(t,e,n,r,i,s){var a=0;if(r=t,typeof t=="function")wg(t)&&(a=1);else if(typeof t=="string")a=mN(t,n,Qr.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Im:return t=Yn(31,n,e,i),t.elementType=Im,t.lanes=s,t;case Xa:return ta(n.children,i,s,e);case eE:a=8,i|=24;break;case Rm:return t=Yn(12,n,e,i|2),t.elementType=Rm,t.lanes=s,t;case Cm:return t=Yn(13,n,e,i),t.elementType=Cm,t.lanes=s,t;case Nm:return t=Yn(19,n,e,i),t.elementType=Nm,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nR:case yi:a=10;break e;case tE:a=9;break e;case lg:a=11;break e;case ug:a=14;break e;case Yi:a=16,r=null;break e}a=29,n=Error(J(130,t===null?"null":typeof t,"")),r=null}return e=Yn(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ta(t,e,n,r){return t=Yn(7,t,r,e),t.lanes=n,t}function Pd(t,e,n){return t=Yn(6,t,null,e),t.lanes=n,t}function jd(t,e,n){return e=Yn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var so=[],ao=0,Ah=null,xh=0,ur=[],cr=0,na=null,vi=1,_i="";function $s(t,e){so[ao++]=xh,so[ao++]=Ah,Ah=t,xh=e}function jE(t,e,n){ur[cr++]=vi,ur[cr++]=_i,ur[cr++]=na,na=t;var r=vi;t=_i;var i=32-er(r)-1;r&=~(1<<i),n+=1;var s=32-er(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,vi=1<<32-er(e)+i|n<<i|r,_i=s+t}else vi=1<<s|n<<i|r,_i=t}function Tg(t){t.return!==null&&($s(t,1),jE(t,1,0))}function Ag(t){for(;t===Ah;)Ah=so[--ao],so[ao]=null,xh=so[--ao],so[ao]=null;for(;t===na;)na=ur[--cr],ur[cr]=null,_i=ur[--cr],ur[cr]=null,vi=ur[--cr],ur[cr]=null}var Tn=null,xt=null,Be=!1,ra=null,qr=!1,Hm=Error(J(519));function ha(t){var e=Error(J(418,""));throw su(fr(e,t)),Hm}function xv(t){var e=t.stateNode,n=t.type,r=t.memoizedProps;switch(e[yn]=t,e[Ln]=r,n){case"dialog":Ne("cancel",e),Ne("close",e);break;case"iframe":case"object":case"embed":Ne("load",e);break;case"video":case"audio":for(n=0;n<lu.length;n++)Ne(lu[n],e);break;case"source":Ne("error",e);break;case"img":case"image":case"link":Ne("error",e),Ne("load",e);break;case"details":Ne("toggle",e);break;case"input":Ne("invalid",e),mE(e,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),Eh(e);break;case"select":Ne("invalid",e);break;case"textarea":Ne("invalid",e),gE(e,r.value,r.defaultValue,r.children),Eh(e)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||r.suppressHydrationWarning===!0||yT(e.textContent,n)?(r.popover!=null&&(Ne("beforetoggle",e),Ne("toggle",e)),r.onScroll!=null&&Ne("scroll",e),r.onScrollEnd!=null&&Ne("scrollend",e),r.onClick!=null&&(e.onclick=Bf),e=!0):e=!1,e||ha(t)}function Sv(t){for(Tn=t.return;Tn;)switch(Tn.tag){case 5:case 13:qr=!1;return;case 27:case 3:qr=!0;return;default:Tn=Tn.return}}function pl(t){if(t!==Tn)return!1;if(!Be)return Sv(t),Be=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||pp(t.type,t.memoizedProps)),n=!n),n&&xt&&ha(t),Sv(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){xt=Nr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}xt=null}}else e===27?(e=xt,Us(t.type)?(t=vp,vp=null,xt=t):xt=e):xt=Tn?Nr(t.stateNode.nextSibling):null;return!0}function Ou(){xt=Tn=null,Be=!1}function Rv(){var t=ra;return t!==null&&(On===null?On=t:On.push.apply(On,t),ra=null),t}function su(t){ra===null?ra=[t]:ra.push(t)}var qm=ii(null),Aa=null,bi=null;function Wi(t,e,n){gt(qm,e._currentValue),e._currentValue=n}function xi(t){t._currentValue=qm.current,tn(qm)}function Gm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function $m(t,e,n,r){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){var a=i.child;s=s.firstContext;e:for(;s!==null;){var o=s;s=i;for(var l=0;l<e.length;l++)if(o.context===e[l]){s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Gm(s.return,n,t),r||(a=null);break e}s=o.next}}else if(i.tag===18){if(a=i.return,a===null)throw Error(J(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Gm(a,n,t),a=null}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}}function Mu(t,e,n,r){t=null;for(var i=e,s=!1;i!==null;){if(!s){if(i.flags&524288)s=!0;else if(i.flags&262144)break}if(i.tag===10){var a=i.alternate;if(a===null)throw Error(J(387));if(a=a.memoizedProps,a!==null){var o=i.type;ir(i.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(i===yh.current){if(a=i.alternate,a===null)throw Error(J(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(hu):t=[hu])}i=i.return}t!==null&&$m(e,t,n,r),e.flags|=262144}function Sh(t){for(t=t.firstContext;t!==null;){if(!ir(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function fa(t){Aa=t,bi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function vn(t){return UE(Aa,t)}function Ac(t,e){return Aa===null&&fa(t),UE(t,e)}function UE(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},bi===null){if(t===null)throw Error(J(308));bi=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else bi=bi.next=e;return n}var dC=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,r){t.push(r)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},mC=Xt.unstable_scheduleCallback,pC=Xt.unstable_NormalPriority,Qt={$$typeof:yi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xg(){return{controller:new dC,data:new Map,refCount:0}}function ku(t){t.refCount--,t.refCount===0&&mC(pC,function(){t.controller.abort()})}var Ul=null,Qm=0,No=0,mo=null;function gC(t,e){if(Ul===null){var n=Ul=[];Qm=0,No=Kg(),mo={status:"pending",value:void 0,then:function(r){n.push(r)}}}return Qm++,e.then(Cv,Cv),e}function Cv(){if(--Qm===0&&Ul!==null){mo!==null&&(mo.status="fulfilled");var t=Ul;Ul=null,No=0,mo=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function yC(t,e){var n=[],r={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){r.status="fulfilled",r.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(r.status="rejected",r.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),r}var Nv=_e.S;_e.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&gC(t,e),Nv!==null&&Nv(t,e)};var ia=ii(null);function Sg(){var t=ia.current;return t!==null?t:at.pooledCache}function Kc(t,e){e===null?gt(ia,ia.current):gt(ia,e.pool)}function LE(){var t=Sg();return t===null?null:{parent:Qt._currentValue,pool:t}}var Pu=Error(J(460)),VE=Error(J(474)),kf=Error(J(542)),Km={then:function(){}};function Iv(t){return t=t.status,t==="fulfilled"||t==="rejected"}function xc(){}function zE(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(xc,xc),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Ov(t),t;default:if(typeof e.status=="string")e.then(xc,xc);else{if(t=at,t!==null&&100<t.shellSuspendCounter)throw Error(J(482));t=e,t.status="pending",t.then(function(r){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=r}},function(r){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=r}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Ov(t),t}throw Ll=e,Pu}}var Ll=null;function Dv(){if(Ll===null)throw Error(J(459));var t=Ll;return Ll=null,t}function Ov(t){if(t===Pu||t===kf)throw Error(J(483))}var Xi=!1;function Rg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ym(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function fs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ds(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ye&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,e=Th(t),kE(t,null,n),e}return Mf(t,r,e,n),Th(t)}function Vl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lE(t,n)}}function Ud(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Xm=!1;function zl(){if(Xm){var t=mo;if(t!==null)throw t}}function Bl(t,e,n,r){Xm=!1;var i=t.updateQueue;Xi=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,h=c=l=null,o=s;do{var f=o.lane&-536870913,m=f!==o.lane;if(m?(Ue&f)===f:(r&f)===f){f!==0&&f===No&&(Xm=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var E=t,N=o;f=e;var k=n;switch(N.tag){case 1:if(E=N.payload,typeof E=="function"){d=E.call(k,d,f);break e}d=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=N.payload,f=typeof E=="function"?E.call(k,d,f):E,f==null)break e;d=ht({},d,f);break e;case 2:Xi=!0}}f=o.callback,f!==null&&(t.flags|=64,m&&(t.flags|=8192),m=i.callbacks,m===null?i.callbacks=[f]:m.push(f))}else m={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,s===null&&(i.shared.lanes=0),xs|=a,t.lanes=a,t.memoizedState=d}}function BE(t,e){if(typeof t!="function")throw Error(J(191,t));t.call(e)}function FE(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)BE(n[t],e)}var Io=ii(null),Rh=ii(0);function Mv(t,e){t=Ii,gt(Rh,t),gt(Io,e),Ii=t|e.baseLanes}function Wm(){gt(Rh,Ii),gt(Io,Io.current)}function Cg(){Ii=Rh.current,tn(Io),tn(Rh)}var Ts=0,Re=null,et=null,Bt=null,Ch=!1,po=!1,da=!1,Nh=0,au=0,go=null,vC=0;function Mt(){throw Error(J(321))}function Ng(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ir(t[n],e[n]))return!1;return!0}function Ig(t,e,n,r,i,s){return Ts=s,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_e.H=t===null||t.memoizedState===null?_w:bw,da=!1,s=n(r,i),da=!1,po&&(s=qE(e,n,r,i)),HE(t),s}function HE(t){_e.H=Ih;var e=et!==null&&et.next!==null;if(Ts=0,Bt=et=Re=null,Ch=!1,au=0,go=null,e)throw Error(J(300));t===null||en||(t=t.dependencies,t!==null&&Sh(t)&&(en=!0))}function qE(t,e,n,r){Re=t;var i=0;do{if(po&&(go=null),au=0,po=!1,25<=i)throw Error(J(301));if(i+=1,Bt=et=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}_e.H=xC,s=e(n,r)}while(po);return s}function _C(){var t=_e.H,e=t.useState()[0];return e=typeof e.then=="function"?ju(e):e,t=t.useState()[0],(et!==null?et.memoizedState:null)!==t&&(Re.flags|=1024),e}function Dg(){var t=Nh!==0;return Nh=0,t}function Og(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Mg(t){if(Ch){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Ch=!1}Ts=0,Bt=et=Re=null,po=!1,au=Nh=0,go=null}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Re.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function qt(){if(et===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var e=Bt===null?Re.memoizedState:Bt.next;if(e!==null)Bt=e,et=t;else{if(t===null)throw Re.alternate===null?Error(J(467)):Error(J(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Bt===null?Re.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function kg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ju(t){var e=au;return au+=1,go===null&&(go=[]),t=zE(go,t,e),e=Re,(Bt===null?e.memoizedState:Bt.next)===null&&(e=e.alternate,_e.H=e===null||e.memoizedState===null?_w:bw),t}function Pf(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ju(t);if(t.$$typeof===yi)return vn(t)}throw Error(J(438,String(t)))}function Pg(t){var e=null,n=Re.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var r=Re.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(e={data:r.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=kg(),Re.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),r=0;r<t;r++)n[r]=rR;return e.index++,n}function Ci(t,e){return typeof e=="function"?e(t):e}function Yc(t){var e=qt();return jg(e,et,t)}function jg(t,e,n){var r=t.queue;if(r===null)throw Error(J(311));r.lastRenderedReducer=n;var i=t.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}e.baseQueue=i=s,r.pending=null}if(s=t.baseState,i===null)t.memoizedState=s;else{e=i.next;var o=a=null,l=null,c=e,h=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(Ue&d)===d:(Ts&d)===d){var f=c.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===No&&(h=!0);else if((Ts&f)===f){c=c.next,f===No&&(h=!0);continue}else d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=d,a=s):l=l.next=d,Re.lanes|=f,xs|=f;d=c.action,da&&n(s,d),s=c.hasEagerState?c.eagerState:n(s,d)}else f={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=f,a=s):l=l.next=f,Re.lanes|=d,xs|=d;c=c.next}while(c!==null&&c!==e);if(l===null?a=s:l.next=o,!ir(s,t.memoizedState)&&(en=!0,h&&(n=mo,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=l,r.lastRenderedState=s}return i===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function Ld(t){var e=qt(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);ir(s,e.memoizedState)||(en=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function GE(t,e,n){var r=Re,i=qt(),s=Be;if(s){if(n===void 0)throw Error(J(407));n=n()}else n=e();var a=!ir((et||i).memoizedState,n);a&&(i.memoizedState=n,en=!0),i=i.queue;var o=KE.bind(null,r,i,t);if(Uu(2048,8,o,[t]),i.getSnapshot!==e||a||Bt!==null&&Bt.memoizedState.tag&1){if(r.flags|=2048,Do(9,jf(),QE.bind(null,r,i,n,e),null),at===null)throw Error(J(349));s||Ts&124||$E(r,e,n)}return n}function $E(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e=kg(),Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QE(t,e,n,r){e.value=n,e.getSnapshot=r,YE(e)&&XE(t)}function KE(t,e,n){return n(function(){YE(e)&&XE(t)})}function YE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ir(t,n)}catch{return!0}}function XE(t){var e=Ko(t,2);e!==null&&nr(e,t,2)}function Zm(t){var e=In();if(typeof t=="function"){var n=t;if(t=n(),da){as(!0);try{n()}finally{as(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:t},e}function WE(t,e,n,r){return t.baseState=n,jg(t,et,typeof r=="function"?r:Ci)}function bC(t,e,n,r,i){if(Uf(t))throw Error(J(485));if(t=e.action,t!==null){var s={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};_e.T!==null?n(!0):s.isTransition=!1,r(s),n=e.pending,n===null?(s.next=e.pending=s,ZE(e,s)):(s.next=n.next,e.pending=n.next=s)}}function ZE(t,e){var n=e.action,r=e.payload,i=t.state;if(e.isTransition){var s=_e.T,a={};_e.T=a;try{var o=n(i,r),l=_e.S;l!==null&&l(a,o),kv(t,e,o)}catch(c){Jm(t,e,c)}finally{_e.T=s}}else try{s=n(i,r),kv(t,e,s)}catch(c){Jm(t,e,c)}}function kv(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){Pv(t,e,r)},function(r){return Jm(t,e,r)}):Pv(t,e,n)}function Pv(t,e,n){e.status="fulfilled",e.value=n,JE(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,ZE(t,n)))}function Jm(t,e,n){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do e.status="rejected",e.reason=n,JE(e),e=e.next;while(e!==r)}t.action=null}function JE(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function ew(t,e){return e}function jv(t,e){if(Be){var n=at.formState;if(n!==null){e:{var r=Re;if(Be){if(xt){t:{for(var i=xt,s=qr;i.nodeType!==8;){if(!s){i=null;break t}if(i=Nr(i.nextSibling),i===null){i=null;break t}}s=i.data,i=s==="F!"||s==="F"?i:null}if(i){xt=Nr(i.nextSibling),r=i.data==="F!";break e}}ha(r)}r=!1}r&&(e=n[0])}}return n=In(),n.memoizedState=n.baseState=e,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ew,lastRenderedState:e},n.queue=r,n=gw.bind(null,Re,r),r.dispatch=n,r=Zm(!1),s=zg.bind(null,Re,!1,r.queue),r=In(),i={state:e,dispatch:null,action:t,pending:null},r.queue=i,n=bC.bind(null,Re,i,s,n),i.dispatch=n,r.memoizedState=t,[e,n,!1]}function Uv(t){var e=qt();return tw(e,et,t)}function tw(t,e,n){if(e=jg(t,e,ew)[0],t=Yc(Ci)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var r=ju(e)}catch(a){throw a===Pu?kf:a}else r=e;e=qt();var i=e.queue,s=i.dispatch;return n!==e.memoizedState&&(Re.flags|=2048,Do(9,jf(),EC.bind(null,i,n),null)),[r,s,t]}function EC(t,e){t.action=e}function Lv(t){var e=qt(),n=et;if(n!==null)return tw(e,n,t);qt(),e=e.memoizedState,n=qt();var r=n.queue.dispatch;return n.memoizedState=t,[e,r,!1]}function Do(t,e,n,r){return t={tag:t,create:n,deps:r,inst:e,next:null},e=Re.updateQueue,e===null&&(e=kg(),Re.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function jf(){return{destroy:void 0,resource:void 0}}function nw(){return qt().memoizedState}function Xc(t,e,n,r){var i=In();r=r===void 0?null:r,Re.flags|=t,i.memoizedState=Do(1|e,jf(),n,r)}function Uu(t,e,n,r){var i=qt();r=r===void 0?null:r;var s=i.memoizedState.inst;et!==null&&r!==null&&Ng(r,et.memoizedState.deps)?i.memoizedState=Do(e,s,n,r):(Re.flags|=t,i.memoizedState=Do(1|e,s,n,r))}function Vv(t,e){Xc(8390656,8,t,e)}function rw(t,e){Uu(2048,8,t,e)}function iw(t,e){return Uu(4,2,t,e)}function sw(t,e){return Uu(4,4,t,e)}function aw(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ow(t,e,n){n=n!=null?n.concat([t]):null,Uu(4,4,aw.bind(null,e,t),n)}function Ug(){}function lw(t,e){var n=qt();e=e===void 0?null:e;var r=n.memoizedState;return e!==null&&Ng(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function uw(t,e){var n=qt();e=e===void 0?null:e;var r=n.memoizedState;if(e!==null&&Ng(e,r[1]))return r[0];if(r=t(),da){as(!0);try{t()}finally{as(!1)}}return n.memoizedState=[r,e],r}function Lg(t,e,n){return n===void 0||Ts&1073741824?t.memoizedState=e:(t.memoizedState=n,t=Jw(),Re.lanes|=t,xs|=t,n)}function cw(t,e,n,r){return ir(n,e)?n:Io.current!==null?(t=Lg(t,n,r),ir(t,e)||(en=!0),t):Ts&42?(t=Jw(),Re.lanes|=t,xs|=t,e):(en=!0,t.memoizedState=n)}function hw(t,e,n,r,i){var s=Fe.p;Fe.p=s!==0&&8>s?s:8;var a=_e.T,o={};_e.T=o,zg(t,!1,e,n);try{var l=i(),c=_e.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=yC(l,r);Fl(t,e,h,tr(t))}else Fl(t,e,r,tr(t))}catch(d){Fl(t,e,{then:function(){},status:"rejected",reason:d},tr())}finally{Fe.p=s,_e.T=a}}function wC(){}function ep(t,e,n,r){if(t.tag!==5)throw Error(J(476));var i=fw(t).queue;hw(t,i,e,ea,n===null?wC:function(){return dw(t),n(r)})}function fw(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:ea,baseState:ea,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:ea},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function dw(t){var e=fw(t).next.queue;Fl(t,e,{},tr())}function Vg(){return vn(hu)}function mw(){return qt().memoizedState}function pw(){return qt().memoizedState}function TC(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=tr();t=fs(n);var r=ds(e,t,n);r!==null&&(nr(r,e,n),Vl(r,e,n)),e={cache:xg()},t.payload=e;return}e=e.return}}function AC(t,e,n){var r=tr();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Uf(t)?yw(e,n):(n=Eg(t,e,n,r),n!==null&&(nr(n,t,r),vw(n,e,r)))}function gw(t,e,n){var r=tr();Fl(t,e,n,r)}function Fl(t,e,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uf(t))yw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,ir(o,a))return Mf(t,e,i,0),at===null&&Of(),!1}catch{}finally{}if(n=Eg(t,e,i,r),n!==null)return nr(n,t,r),vw(n,e,r),!0}return!1}function zg(t,e,n,r){if(r={lane:2,revertLane:Kg(),action:r,hasEagerState:!1,eagerState:null,next:null},Uf(t)){if(e)throw Error(J(479))}else e=Eg(t,n,r,2),e!==null&&nr(e,t,2)}function Uf(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function yw(t,e){po=Ch=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vw(t,e,n){if(n&4194048){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lE(t,n)}}var Ih={readContext:vn,use:Pf,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt},_w={readContext:vn,use:Pf,useCallback:function(t,e){return In().memoizedState=[t,e===void 0?null:e],t},useContext:vn,useEffect:Vv,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Xc(4194308,4,aw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xc(4194308,4,t,e)},useInsertionEffect:function(t,e){Xc(4,2,t,e)},useMemo:function(t,e){var n=In();e=e===void 0?null:e;var r=t();if(da){as(!0);try{t()}finally{as(!1)}}return n.memoizedState=[r,e],r},useReducer:function(t,e,n){var r=In();if(n!==void 0){var i=n(e);if(da){as(!0);try{n(e)}finally{as(!1)}}}else i=e;return r.memoizedState=r.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},r.queue=t,t=t.dispatch=AC.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=In();return t={current:t},e.memoizedState=t},useState:function(t){t=Zm(t);var e=t.queue,n=gw.bind(null,Re,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Ug,useDeferredValue:function(t,e){var n=In();return Lg(n,t,e)},useTransition:function(){var t=Zm(!1);return t=hw.bind(null,Re,t.queue,!0,!1),In().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var r=Re,i=In();if(Be){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),at===null)throw Error(J(349));Ue&124||$E(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Vv(KE.bind(null,r,s,t),[t]),r.flags|=2048,Do(9,jf(),QE.bind(null,r,s,n,e),null),n},useId:function(){var t=In(),e=at.identifierPrefix;if(Be){var n=_i,r=vi;n=(r&~(1<<32-er(r)-1)).toString(32)+n,e=""+e+"R"+n,n=Nh++,0<n&&(e+="H"+n.toString(32)),e+=""}else n=vC++,e=""+e+"r"+n.toString(32)+"";return t.memoizedState=e},useHostTransitionStatus:Vg,useFormState:jv,useActionState:jv,useOptimistic:function(t){var e=In();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=zg.bind(null,Re,!0,n),n.dispatch=e,[t,e]},useMemoCache:Pg,useCacheRefresh:function(){return In().memoizedState=TC.bind(null,Re)}},bw={readContext:vn,use:Pf,useCallback:lw,useContext:vn,useEffect:rw,useImperativeHandle:ow,useInsertionEffect:iw,useLayoutEffect:sw,useMemo:uw,useReducer:Yc,useRef:nw,useState:function(){return Yc(Ci)},useDebugValue:Ug,useDeferredValue:function(t,e){var n=qt();return cw(n,et.memoizedState,t,e)},useTransition:function(){var t=Yc(Ci)[0],e=qt().memoizedState;return[typeof t=="boolean"?t:ju(t),e]},useSyncExternalStore:GE,useId:mw,useHostTransitionStatus:Vg,useFormState:Uv,useActionState:Uv,useOptimistic:function(t,e){var n=qt();return WE(n,et,t,e)},useMemoCache:Pg,useCacheRefresh:pw},xC={readContext:vn,use:Pf,useCallback:lw,useContext:vn,useEffect:rw,useImperativeHandle:ow,useInsertionEffect:iw,useLayoutEffect:sw,useMemo:uw,useReducer:Ld,useRef:nw,useState:function(){return Ld(Ci)},useDebugValue:Ug,useDeferredValue:function(t,e){var n=qt();return et===null?Lg(n,t,e):cw(n,et.memoizedState,t,e)},useTransition:function(){var t=Ld(Ci)[0],e=qt().memoizedState;return[typeof t=="boolean"?t:ju(t),e]},useSyncExternalStore:GE,useId:mw,useHostTransitionStatus:Vg,useFormState:Lv,useActionState:Lv,useOptimistic:function(t,e){var n=qt();return et!==null?WE(n,et,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Pg,useCacheRefresh:pw},yo=null,ou=0;function Sc(t){var e=ou;return ou+=1,yo===null&&(yo=[]),zE(yo,t,e)}function gl(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Rc(t,e){throw e.$$typeof===tR?Error(J(525)):(t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function zv(t){var e=t._init;return e(t._payload)}function Ew(t){function e(_,x){if(t){var S=_.deletions;S===null?(_.deletions=[x],_.flags|=16):S.push(x)}}function n(_,x){if(!t)return null;for(;x!==null;)e(_,x),x=x.sibling;return null}function r(_){for(var x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function i(_,x){return _=Ai(_,x),_.index=0,_.sibling=null,_}function s(_,x,S){return _.index=S,t?(S=_.alternate,S!==null?(S=S.index,S<x?(_.flags|=67108866,x):S):(_.flags|=67108866,x)):(_.flags|=1048576,x)}function a(_){return t&&_.alternate===null&&(_.flags|=67108866),_}function o(_,x,S,M){return x===null||x.tag!==6?(x=Pd(S,_.mode,M),x.return=_,x):(x=i(x,S),x.return=_,x)}function l(_,x,S,M){var U=S.type;return U===Xa?h(_,x,S.props.children,M,S.key):x!==null&&(x.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Yi&&zv(U)===x.type)?(x=i(x,S.props),gl(x,S),x.return=_,x):(x=Qc(S.type,S.key,S.props,null,_.mode,M),gl(x,S),x.return=_,x)}function c(_,x,S,M){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=jd(S,_.mode,M),x.return=_,x):(x=i(x,S.children||[]),x.return=_,x)}function h(_,x,S,M,U){return x===null||x.tag!==7?(x=ta(S,_.mode,M,U),x.return=_,x):(x=i(x,S),x.return=_,x)}function d(_,x,S){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=Pd(""+x,_.mode,S),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case _c:return S=Qc(x.type,x.key,x.props,null,_.mode,S),gl(S,x),S.return=_,S;case Al:return x=jd(x,_.mode,S),x.return=_,x;case Yi:var M=x._init;return x=M(x._payload),d(_,x,S)}if(xl(x)||fl(x))return x=ta(x,_.mode,S,null),x.return=_,x;if(typeof x.then=="function")return d(_,Sc(x),S);if(x.$$typeof===yi)return d(_,Ac(_,x),S);Rc(_,x)}return null}function f(_,x,S,M){var U=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return U!==null?null:o(_,x,""+S,M);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case _c:return S.key===U?l(_,x,S,M):null;case Al:return S.key===U?c(_,x,S,M):null;case Yi:return U=S._init,S=U(S._payload),f(_,x,S,M)}if(xl(S)||fl(S))return U!==null?null:h(_,x,S,M,null);if(typeof S.then=="function")return f(_,x,Sc(S),M);if(S.$$typeof===yi)return f(_,x,Ac(_,S),M);Rc(_,S)}return null}function m(_,x,S,M,U){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return _=_.get(S)||null,o(x,_,""+M,U);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case _c:return _=_.get(M.key===null?S:M.key)||null,l(x,_,M,U);case Al:return _=_.get(M.key===null?S:M.key)||null,c(x,_,M,U);case Yi:var T=M._init;return M=T(M._payload),m(_,x,S,M,U)}if(xl(M)||fl(M))return _=_.get(S)||null,h(x,_,M,U,null);if(typeof M.then=="function")return m(_,x,S,Sc(M),U);if(M.$$typeof===yi)return m(_,x,S,Ac(x,M),U);Rc(x,M)}return null}function E(_,x,S,M){for(var U=null,T=null,A=x,y=x=0,v=null;A!==null&&y<S.length;y++){A.index>y?(v=A,A=null):v=A.sibling;var w=f(_,A,S[y],M);if(w===null){A===null&&(A=v);break}t&&A&&w.alternate===null&&e(_,A),x=s(w,x,y),T===null?U=w:T.sibling=w,T=w,A=v}if(y===S.length)return n(_,A),Be&&$s(_,y),U;if(A===null){for(;y<S.length;y++)A=d(_,S[y],M),A!==null&&(x=s(A,x,y),T===null?U=A:T.sibling=A,T=A);return Be&&$s(_,y),U}for(A=r(A);y<S.length;y++)v=m(A,_,y,S[y],M),v!==null&&(t&&v.alternate!==null&&A.delete(v.key===null?y:v.key),x=s(v,x,y),T===null?U=v:T.sibling=v,T=v);return t&&A.forEach(function(C){return e(_,C)}),Be&&$s(_,y),U}function N(_,x,S,M){if(S==null)throw Error(J(151));for(var U=null,T=null,A=x,y=x=0,v=null,w=S.next();A!==null&&!w.done;y++,w=S.next()){A.index>y?(v=A,A=null):v=A.sibling;var C=f(_,A,w.value,M);if(C===null){A===null&&(A=v);break}t&&A&&C.alternate===null&&e(_,A),x=s(C,x,y),T===null?U=C:T.sibling=C,T=C,A=v}if(w.done)return n(_,A),Be&&$s(_,y),U;if(A===null){for(;!w.done;y++,w=S.next())w=d(_,w.value,M),w!==null&&(x=s(w,x,y),T===null?U=w:T.sibling=w,T=w);return Be&&$s(_,y),U}for(A=r(A);!w.done;y++,w=S.next())w=m(A,_,y,w.value,M),w!==null&&(t&&w.alternate!==null&&A.delete(w.key===null?y:w.key),x=s(w,x,y),T===null?U=w:T.sibling=w,T=w);return t&&A.forEach(function(I){return e(_,I)}),Be&&$s(_,y),U}function k(_,x,S,M){if(typeof S=="object"&&S!==null&&S.type===Xa&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case _c:e:{for(var U=S.key;x!==null;){if(x.key===U){if(U=S.type,U===Xa){if(x.tag===7){n(_,x.sibling),M=i(x,S.props.children),M.return=_,_=M;break e}}else if(x.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Yi&&zv(U)===x.type){n(_,x.sibling),M=i(x,S.props),gl(M,S),M.return=_,_=M;break e}n(_,x);break}else e(_,x);x=x.sibling}S.type===Xa?(M=ta(S.props.children,_.mode,M,S.key),M.return=_,_=M):(M=Qc(S.type,S.key,S.props,null,_.mode,M),gl(M,S),M.return=_,_=M)}return a(_);case Al:e:{for(U=S.key;x!==null;){if(x.key===U)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(_,x.sibling),M=i(x,S.children||[]),M.return=_,_=M;break e}else{n(_,x);break}else e(_,x);x=x.sibling}M=jd(S,_.mode,M),M.return=_,_=M}return a(_);case Yi:return U=S._init,S=U(S._payload),k(_,x,S,M)}if(xl(S))return E(_,x,S,M);if(fl(S)){if(U=fl(S),typeof U!="function")throw Error(J(150));return S=U.call(S),N(_,x,S,M)}if(typeof S.then=="function")return k(_,x,Sc(S),M);if(S.$$typeof===yi)return k(_,x,Ac(_,S),M);Rc(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint"?(S=""+S,x!==null&&x.tag===6?(n(_,x.sibling),M=i(x,S),M.return=_,_=M):(n(_,x),M=Pd(S,_.mode,M),M.return=_,_=M),a(_)):n(_,x)}return function(_,x,S,M){try{ou=0;var U=k(_,x,S,M);return yo=null,U}catch(A){if(A===Pu||A===kf)throw A;var T=Yn(29,A,null,_.mode);return T.lanes=M,T.return=_,T}finally{}}}var Oo=Ew(!0),ww=Ew(!1),vr=ii(null),Yr=null;function Zi(t){var e=t.alternate;gt(Kt,Kt.current&1),gt(vr,t),Yr===null&&(e===null||Io.current!==null||e.memoizedState!==null)&&(Yr=t)}function Tw(t){if(t.tag===22){if(gt(Kt,Kt.current),gt(vr,t),Yr===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Yr=t)}}else Ji()}function Ji(){gt(Kt,Kt.current),gt(vr,vr.current)}function Ei(t){tn(vr),Yr===t&&(Yr=null),tn(Kt)}var Kt=ii(0);function Dh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||yp(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Vd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ht({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var tp={enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tr(),i=fs(r);i.payload=e,n!=null&&(i.callback=n),e=ds(t,i,r),e!==null&&(nr(e,t,r),Vl(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tr(),i=fs(r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ds(t,i,r),e!==null&&(nr(e,t,r),Vl(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tr(),r=fs(n);r.tag=2,e!=null&&(r.callback=e),e=ds(t,r,n),e!==null&&(nr(e,t,n),Vl(e,t,n))}};function Bv(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!iu(n,r)||!iu(i,s):!0}function Fv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&tp.enqueueReplaceState(e,e.state,null)}function ma(t,e){var n=e;if("ref"in e){n={};for(var r in e)r!=="ref"&&(n[r]=e[r])}if(t=t.defaultProps){n===e&&(n=ht({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}var Oh=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Aw(t){Oh(t)}function xw(t){console.error(t)}function Sw(t){Oh(t)}function Mh(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(r){setTimeout(function(){throw r})}}function Hv(t,e,n){try{var r=t.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function np(t,e,n){return n=fs(n),n.tag=3,n.payload={element:null},n.callback=function(){Mh(t,e)},n}function Rw(t){return t=fs(t),t.tag=3,t}function Cw(t,e,n,r){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=r.value;t.payload=function(){return i(s)},t.callback=function(){Hv(e,n,r)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){Hv(e,n,r),typeof i!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var o=r.stack;this.componentDidCatch(r.value,{componentStack:o!==null?o:""})})}function SC(t,e,n,r,i){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(e=n.alternate,e!==null&&Mu(e,n,i,!0),n=vr.current,n!==null){switch(n.tag){case 13:return Yr===null?cp():n.alternate===null&&St===0&&(St=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Km?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([r]):e.add(r),Xd(t,r,i)),!1;case 22:return n.flags|=65536,r===Km?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([r]):n.add(r)),Xd(t,r,i)),!1}throw Error(J(435,n.tag))}return Xd(t,r,i),cp(),!1}if(Be)return e=vr.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,r!==Hm&&(t=Error(J(422),{cause:r}),su(fr(t,n)))):(r!==Hm&&(e=Error(J(423),{cause:r}),su(fr(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,r=fr(r,n),i=np(t.stateNode,r,i),Ud(t,i),St!==4&&(St=2)),!1;var s=Error(J(520),{cause:r});if(s=fr(s,n),Gl===null?Gl=[s]:Gl.push(s),St!==4&&(St=2),e===null)return!0;r=fr(r,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=np(n.stateNode,r,t),Ud(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(ms===null||!ms.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,i=Rw(i),Cw(i,t,n,r),Ud(n,i),!1}n=n.return}while(n!==null);return!1}var Nw=Error(J(461)),en=!1;function rn(t,e,n,r){e.child=t===null?ww(e,null,n,r):Oo(e,t.child,n,r)}function qv(t,e,n,r,i){n=n.render;var s=e.ref;if("ref"in r){var a={};for(var o in r)o!=="ref"&&(a[o]=r[o])}else a=r;return fa(e),r=Ig(t,e,n,a,s,i),o=Dg(),t!==null&&!en?(Og(t,e,i),Ni(t,e,i)):(Be&&o&&Tg(e),e.flags|=1,rn(t,e,r,i),e.child)}function Gv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!wg(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,Iw(t,e,s,r,i)):(t=Qc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!Bg(t,i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:iu,n(a,r)&&t.ref===e.ref)return Ni(t,e,i)}return e.flags|=1,t=Ai(s,r),t.ref=e.ref,t.return=e,e.child=t}function Iw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(iu(s,r)&&t.ref===e.ref)if(en=!1,e.pendingProps=r=s,Bg(t,i))t.flags&131072&&(en=!0);else return e.lanes=t.lanes,Ni(t,e,i)}return rp(t,e,n,r,i)}function Dw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden"){if(e.flags&128){if(r=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,s=0;i!==null;)s=s|i.lanes|i.childLanes,i=i.sibling;e.childLanes=s&~r}else e.childLanes=0,e.child=null;return $v(t,e,r,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Kc(e,s!==null?s.cachePool:null),s!==null?Mv(e,s):Wm(),Tw(e);else return e.lanes=e.childLanes=536870912,$v(t,e,s!==null?s.baseLanes|n:n,n)}else s!==null?(Kc(e,s.cachePool),Mv(e,s),Ji(),e.memoizedState=null):(t!==null&&Kc(e,null),Wm(),Ji());return rn(t,e,i,n),e.child}function $v(t,e,n,r){var i=Sg();return i=i===null?null:{parent:Qt._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},t!==null&&Kc(e,null),Wm(),Tw(e),t!==null&&Mu(t,e,r,!0),null}function Wc(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(J(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function rp(t,e,n,r,i){return fa(e),n=Ig(t,e,n,r,void 0,i),r=Dg(),t!==null&&!en?(Og(t,e,i),Ni(t,e,i)):(Be&&r&&Tg(e),e.flags|=1,rn(t,e,n,i),e.child)}function Qv(t,e,n,r,i,s){return fa(e),e.updateQueue=null,n=qE(e,r,n,i),HE(t),r=Dg(),t!==null&&!en?(Og(t,e,s),Ni(t,e,s)):(Be&&r&&Tg(e),e.flags|=1,rn(t,e,n,s),e.child)}function Kv(t,e,n,r,i){if(fa(e),e.stateNode===null){var s=io,a=n.contextType;typeof a=="object"&&a!==null&&(s=vn(a)),s=new n(r,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=tp,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=r,s.state=e.memoizedState,s.refs={},Rg(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?vn(a):io,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Vd(e,n,a,r),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&tp.enqueueReplaceState(s,s.state,null),Bl(e,r,s,i),zl(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!0}else if(t===null){s=e.stateNode;var o=e.memoizedProps,l=ma(n,o);s.props=l;var c=s.context,h=n.contextType;a=io,typeof h=="object"&&h!==null&&(a=vn(h));var d=n.getDerivedStateFromProps;h=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o||c!==a)&&Fv(e,s,r,a),Xi=!1;var f=e.memoizedState;s.state=f,Bl(e,r,s,i),zl(),c=e.memoizedState,o||f!==c||Xi?(typeof d=="function"&&(Vd(e,n,d,r),c=e.memoizedState),(l=Xi||Bv(e,n,l,r,f,c,a))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=a,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Ym(t,e),a=e.memoizedProps,h=ma(n,a),s.props=h,d=e.pendingProps,f=s.context,c=n.contextType,l=io,typeof c=="object"&&c!==null&&(l=vn(c)),o=n.getDerivedStateFromProps,(c=typeof o=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Fv(e,s,r,l),Xi=!1,f=e.memoizedState,s.state=f,Bl(e,r,s,i),zl();var m=e.memoizedState;a!==d||f!==m||Xi||t!==null&&t.dependencies!==null&&Sh(t.dependencies)?(typeof o=="function"&&(Vd(e,n,o,r),m=e.memoizedState),(h=Xi||Bv(e,n,h,r,f,m,l)||t!==null&&t.dependencies!==null&&Sh(t.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),s.props=r,s.state=m,s.context=l,r=h):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return s=r,Wc(t,e),r=(e.flags&128)!==0,s||r?(s=e.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&r?(e.child=Oo(e,t.child,null,i),e.child=Oo(e,null,n,i)):rn(t,e,n,i),e.memoizedState=s.state,t=e.child):t=Ni(t,e,i),t}function Yv(t,e,n,r){return Ou(),e.flags|=256,rn(t,e,n,r),e.child}var zd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bd(t){return{baseLanes:t,cachePool:LE()}}function Fd(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=mr),t}function Ow(t,e,n){var r=e.pendingProps,i=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(Kt.current&2)!==0),a&&(i=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(Be){if(i?Zi(e):Ji(),Be){var o=xt,l;if(l=o){e:{for(l=o,o=qr;l.nodeType!==8;){if(!o){o=null;break e}if(l=Nr(l.nextSibling),l===null){o=null;break e}}o=l}o!==null?(e.memoizedState={dehydrated:o,treeContext:na!==null?{id:vi,overflow:_i}:null,retryLane:536870912,hydrationErrors:null},l=Yn(18,null,null,0),l.stateNode=o,l.return=e,e.child=l,Tn=e,xt=null,l=!0):l=!1}l||ha(e)}if(o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return yp(o)?e.lanes=32:e.lanes=536870912,null;Ei(e)}return o=r.children,r=r.fallback,i?(Ji(),i=e.mode,o=kh({mode:"hidden",children:o},i),r=ta(r,i,n,null),o.return=e,r.return=e,o.sibling=r,e.child=o,i=e.child,i.memoizedState=Bd(n),i.childLanes=Fd(t,a,n),e.memoizedState=zd,r):(Zi(e),ip(e,o))}if(l=t.memoizedState,l!==null&&(o=l.dehydrated,o!==null)){if(s)e.flags&256?(Zi(e),e.flags&=-257,e=Hd(t,e,n)):e.memoizedState!==null?(Ji(),e.child=t.child,e.flags|=128,e=null):(Ji(),i=r.fallback,o=e.mode,r=kh({mode:"visible",children:r.children},o),i=ta(i,o,n,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,Oo(e,t.child,null,n),r=e.child,r.memoizedState=Bd(n),r.childLanes=Fd(t,a,n),e.memoizedState=zd,e=i);else if(Zi(e),yp(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var c=a.dgst;a=c,r=Error(J(419)),r.stack="",r.digest=a,su({value:r,source:null,stack:null}),e=Hd(t,e,n)}else if(en||Mu(t,e,n,!1),a=(n&t.childLanes)!==0,en||a){if(a=at,a!==null&&(r=n&-n,r=r&42?1:hg(r),r=r&(a.suspendedLanes|n)?0:r,r!==0&&r!==l.retryLane))throw l.retryLane=r,Ko(t,r),nr(a,t,r),Nw;o.data==="$?"||cp(),e=Hd(t,e,n)}else o.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,xt=Nr(o.nextSibling),Tn=e,Be=!0,ra=null,qr=!1,t!==null&&(ur[cr++]=vi,ur[cr++]=_i,ur[cr++]=na,vi=t.id,_i=t.overflow,na=e),e=ip(e,r.children),e.flags|=4096);return e}return i?(Ji(),i=r.fallback,o=e.mode,l=t.child,c=l.sibling,r=Ai(l,{mode:"hidden",children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,c!==null?i=Ai(c,i):(i=ta(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o===null?o=Bd(n):(l=o.cachePool,l!==null?(c=Qt._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=LE(),o={baseLanes:o.baseLanes|n,cachePool:l}),i.memoizedState=o,i.childLanes=Fd(t,a,n),e.memoizedState=zd,r):(Zi(e),n=t.child,t=n.sibling,n=Ai(n,{mode:"visible",children:r.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function ip(t,e){return e=kh({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function kh(t,e){return t=Yn(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Hd(t,e,n){return Oo(e,t.child,null,n),t=ip(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gm(t.return,e,n)}function qd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Mw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(rn(t,e,r.children,n),r=Kt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xv(t,n,e);else if(t.tag===19)Xv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}switch(gt(Kt,r),i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Dh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),qd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Dh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}qd(e,!0,n,null,s);break;case"together":qd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ni(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xs|=e.lanes,!(n&e.childLanes))if(t!==null){if(Mu(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Ai(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ai(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Bg(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Sh(t)))}function RC(t,e,n){switch(e.tag){case 3:vh(e,e.stateNode.containerInfo),Wi(e,Qt,t.memoizedState.cache),Ou();break;case 27:case 5:Mm(e);break;case 4:vh(e,e.stateNode.containerInfo);break;case 10:Wi(e,e.type,e.memoizedProps.value);break;case 13:var r=e.memoizedState;if(r!==null)return r.dehydrated!==null?(Zi(e),e.flags|=128,null):n&e.child.childLanes?Ow(t,e,n):(Zi(e),t=Ni(t,e,n),t!==null?t.sibling:null);Zi(e);break;case 19:var i=(t.flags&128)!==0;if(r=(n&e.childLanes)!==0,r||(Mu(t,e,n,!1),r=(n&e.childLanes)!==0),i){if(r)return Mw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),gt(Kt,Kt.current),r)break;return null;case 22:case 23:return e.lanes=0,Dw(t,e,n);case 24:Wi(e,Qt,t.memoizedState.cache)}return Ni(t,e,n)}function kw(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)en=!0;else{if(!Bg(t,n)&&!(e.flags&128))return en=!1,RC(t,e,n);en=!!(t.flags&131072)}else en=!1,Be&&e.flags&1048576&&jE(e,xh,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var r=e.elementType,i=r._init;if(r=i(r._payload),e.type=r,typeof r=="function")wg(r)?(t=ma(r,t),e.tag=1,e=Kv(null,e,r,t,n)):(e.tag=0,e=rp(null,e,r,t,n));else{if(r!=null){if(i=r.$$typeof,i===lg){e.tag=11,e=qv(null,e,r,t,n);break e}else if(i===ug){e.tag=14,e=Gv(null,e,r,t,n);break e}}throw e=Dm(r)||r,Error(J(306,e,""))}}return e;case 0:return rp(t,e,e.type,e.pendingProps,n);case 1:return r=e.type,i=ma(r,e.pendingProps),Kv(t,e,r,i,n);case 3:e:{if(vh(e,e.stateNode.containerInfo),t===null)throw Error(J(387));r=e.pendingProps;var s=e.memoizedState;i=s.element,Ym(t,e),Bl(e,r,null,n);var a=e.memoizedState;if(r=a.cache,Wi(e,Qt,r),r!==s.cache&&$m(e,[Qt],n,!0),zl(),r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=Yv(t,e,r,n);break e}else if(r!==i){i=fr(Error(J(424)),e),su(i),e=Yv(t,e,r,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(xt=Nr(t.firstChild),Tn=e,Be=!0,ra=null,qr=!0,n=ww(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ou(),r===i){e=Ni(t,e,n);break e}rn(t,e,r,n)}e=e.child}return e;case 26:return Wc(t,e),t===null?(n=d_(e.type,null,e.pendingProps,null))?e.memoizedState=n:Be||(n=e.type,t=e.pendingProps,r=Bh(hs.current).createElement(n),r[yn]=e,r[Ln]=t,ln(r,n,t),Jt(r),e.stateNode=r):e.memoizedState=d_(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Mm(e),t===null&&Be&&(r=e.stateNode=bT(e.type,e.pendingProps,hs.current),Tn=e,qr=!0,i=xt,Us(e.type)?(vp=i,xt=Nr(r.firstChild)):xt=i),rn(t,e,e.pendingProps.children,n),Wc(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Be&&((i=r=xt)&&(r=tN(r,e.type,e.pendingProps,qr),r!==null?(e.stateNode=r,Tn=e,xt=Nr(r.firstChild),qr=!1,i=!0):i=!1),i||ha(e)),Mm(e),i=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,r=s.children,pp(i,s)?r=null:a!==null&&pp(i,a)&&(e.flags|=32),e.memoizedState!==null&&(i=Ig(t,e,_C,null,null,n),hu._currentValue=i),Wc(t,e),rn(t,e,r,n),e.child;case 6:return t===null&&Be&&((t=n=xt)&&(n=nN(n,e.pendingProps,qr),n!==null?(e.stateNode=n,Tn=e,xt=null,t=!0):t=!1),t||ha(e)),null;case 13:return Ow(t,e,n);case 4:return vh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Oo(e,null,r,n):rn(t,e,r,n),e.child;case 11:return qv(t,e,e.type,e.pendingProps,n);case 7:return rn(t,e,e.pendingProps,n),e.child;case 8:return rn(t,e,e.pendingProps.children,n),e.child;case 12:return rn(t,e,e.pendingProps.children,n),e.child;case 10:return r=e.pendingProps,Wi(e,e.type,r.value),rn(t,e,r.children,n),e.child;case 9:return i=e.type._context,r=e.pendingProps.children,fa(e),i=vn(i),r=r(i),e.flags|=1,rn(t,e,r,n),e.child;case 14:return Gv(t,e,e.type,e.pendingProps,n);case 15:return Iw(t,e,e.type,e.pendingProps,n);case 19:return Mw(t,e,n);case 31:return r=e.pendingProps,n=e.mode,r={mode:r.mode,children:r.children},t===null?(n=kh(r,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=Ai(t.child,r),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return Dw(t,e,n);case 24:return fa(e),r=vn(Qt),t===null?(i=Sg(),i===null&&(i=at,s=xg(),i.pooledCache=s,s.refCount++,s!==null&&(i.pooledCacheLanes|=n),i=s),e.memoizedState={parent:r,cache:i},Rg(e),Wi(e,Qt,i)):(t.lanes&n&&(Ym(t,e),Bl(e,null,null,n),zl()),i=t.memoizedState,s=e.memoizedState,i.parent!==r?(i={parent:r,cache:r},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),Wi(e,Qt,r)):(r=s.cache,Wi(e,Qt,r),r!==i.cache&&$m(e,[Qt],n,!0))),rn(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(J(156,e.tag))}function di(t){t.flags|=4}function Wv(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!TT(e)){if(e=vr.current,e!==null&&((Ue&4194048)===Ue?Yr!==null:(Ue&62914560)!==Ue&&!(Ue&536870912)||e!==Yr))throw Ll=Km,VE;t.flags|=8192}}function Cc(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?aE():536870912,t.lanes|=e,Mo|=e)}function yl(t,e){if(!Be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function CC(t,e,n){var r=e.pendingProps;switch(Ag(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(e),null;case 1:return vt(e),null;case 3:return n=e.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),xi(Qt),So(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(pl(e)?di(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rv())),vt(e),null;case 26:return n=e.memoizedState,t===null?(di(e),n!==null?(vt(e),Wv(e,n)):(vt(e),e.flags&=-16777217)):n?n!==t.memoizedState?(di(e),vt(e),Wv(e,n)):(vt(e),e.flags&=-16777217):(t.memoizedProps!==r&&di(e),vt(e),e.flags&=-16777217),null;case 27:_h(e),n=hs.current;var i=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==r&&di(e);else{if(!r){if(e.stateNode===null)throw Error(J(166));return vt(e),null}t=Qr.current,pl(e)?xv(e):(t=bT(i,r,n),e.stateNode=t,di(e))}return vt(e),null;case 5:if(_h(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==r&&di(e);else{if(!r){if(e.stateNode===null)throw Error(J(166));return vt(e),null}if(t=Qr.current,pl(e))xv(e);else{switch(i=Bh(hs.current),t){case 1:t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof r.is=="string"?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?t.multiple=!0:r.size&&(t.size=r.size);break;default:t=typeof r.is=="string"?i.createElement(n,{is:r.is}):i.createElement(n)}}t[yn]=e,t[Ln]=r;e:for(i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}e.stateNode=t;e:switch(ln(t,n,r),n){case"button":case"input":case"select":case"textarea":t=!!r.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&di(e)}}return vt(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==r&&di(e);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(t=hs.current,pl(e)){if(t=e.stateNode,n=e.memoizedProps,r=null,i=Tn,i!==null)switch(i.tag){case 27:case 5:r=i.memoizedProps}t[yn]=e,t=!!(t.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||yT(t.nodeValue,n)),t||ha(e)}else t=Bh(t).createTextNode(r),t[yn]=e,e.stateNode=t}return vt(e),null;case 13:if(r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=pl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(J(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(J(317));i[yn]=e}else Ou(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vt(e),i=!1}else i=Rv(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(Ei(e),e):(Ei(e),null)}if(Ei(e),e.flags&128)return e.lanes=n,e;if(n=r!==null,t=t!==null&&t.memoizedState!==null,n){r=e.child,i=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),Cc(e,e.updateQueue),vt(e),null;case 4:return So(),t===null&&Yg(e.stateNode.containerInfo),vt(e),null;case 10:return xi(e.type),vt(e),null;case 19:if(tn(Kt),i=e.memoizedState,i===null)return vt(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)yl(i,!1);else{if(St!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Dh(t),s!==null){for(e.flags|=128,yl(i,!1),t=s.updateQueue,e.updateQueue=t,Cc(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)PE(n,t),n=n.sibling;return gt(Kt,Kt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Kr()>jh&&(e.flags|=128,r=!0,yl(i,!1),e.lanes=4194304)}else{if(!r)if(t=Dh(s),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,Cc(e,t),yl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Be)return vt(e),null}else 2*Kr()-i.renderingStartTime>jh&&n!==536870912&&(e.flags|=128,r=!0,yl(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Kr(),e.sibling=null,t=Kt.current,gt(Kt,r?t&1|2:t&1),e):(vt(e),null);case 22:case 23:return Ei(e),Cg(),r=e.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(e.flags|=8192):r&&(e.flags|=8192),r?n&536870912&&!(e.flags&128)&&(vt(e),e.subtreeFlags&6&&(e.flags|=8192)):vt(e),n=e.updateQueue,n!==null&&Cc(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),r=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),r!==n&&(e.flags|=2048),t!==null&&tn(ia),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),xi(Qt),vt(e),null;case 25:return null;case 30:return null}throw Error(J(156,e.tag))}function NC(t,e){switch(Ag(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xi(Qt),So(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return _h(e),null;case 13:if(Ei(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));Ou()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return tn(Kt),null;case 4:return So(),null;case 10:return xi(e.type),null;case 22:case 23:return Ei(e),Cg(),t!==null&&tn(ia),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return xi(Qt),null;case 25:return null;default:return null}}function Pw(t,e){switch(Ag(e),e.tag){case 3:xi(Qt),So();break;case 26:case 27:case 5:_h(e);break;case 4:So();break;case 13:Ei(e);break;case 19:tn(Kt);break;case 10:xi(e.type);break;case 22:case 23:Ei(e),Cg(),t!==null&&tn(ia);break;case 24:xi(Qt)}}function Lu(t,e){try{var n=e.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var i=r.next;n=i;do{if((n.tag&t)===t){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(o){nt(e,e.return,o)}}function As(t,e,n){try{var r=e.updateQueue,i=r!==null?r.lastEffect:null;if(i!==null){var s=i.next;r=s;do{if((r.tag&t)===t){var a=r.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,i=e;var l=n,c=o;try{c()}catch(h){nt(i,l,h)}}}r=r.next}while(r!==s)}}catch(h){nt(e,e.return,h)}}function jw(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{FE(e,n)}catch(r){nt(t,t.return,r)}}}function Uw(t,e,n){n.props=ma(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(r){nt(t,e,r)}}function Hl(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof n=="function"?t.refCleanup=n(r):n.current=r}}catch(i){nt(t,e,i)}}function $r(t,e){var n=t.ref,r=t.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(i){nt(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){nt(t,e,i)}else n.current=null}function Lw(t){var e=t.type,n=t.memoizedProps,r=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){nt(t,t.return,i)}}function Gd(t,e,n){try{var r=t.stateNode;XC(r,t.type,n,e),r[Ln]=e}catch(i){nt(t,t.return,i)}}function Vw(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Us(t.type)||t.tag===4}function $d(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Us(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Bf));else if(r!==4&&(r===27&&Us(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(sp(t,e,n),t=t.sibling;t!==null;)sp(t,e,n),t=t.sibling}function Ph(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(r===27&&Us(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Ph(t,e,n),t=t.sibling;t!==null;)Ph(t,e,n),t=t.sibling}function zw(t){var e=t.stateNode,n=t.memoizedProps;try{for(var r=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ln(e,r,n),e[yn]=t,e[Ln]=n}catch(s){nt(t,t.return,s)}}var gi=!1,kt=!1,Qd=!1,Zv=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function IC(t,e){if(t=t.containerInfo,dp=Gh,t=RE(t),_g(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(o=a+i),d!==s||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++c===i&&(o=a),f===s&&++h===r&&(l=a),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(mp={focusedElem:t,selectionRange:n},Gh=!1,Zt=e;Zt!==null;)if(e=Zt,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,Zt=t;else for(;Zt!==null;){switch(e=Zt,s=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var E=ma(n.type,i,n.elementType===n.type);t=r.getSnapshotBeforeUpdate(E,s),r.__reactInternalSnapshotBeforeUpdate=t}catch(N){nt(n,n.return,N)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)gp(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":gp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(J(163))}if(t=e.sibling,t!==null){t.return=e.return,Zt=t;break}Zt=e.return}}function Bw(t,e,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Gi(t,n),r&4&&Lu(5,n);break;case 1:if(Gi(t,n),r&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){nt(n,n.return,a)}else{var i=ma(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){nt(n,n.return,a)}}r&64&&jw(n),r&512&&Hl(n,n.return);break;case 3:if(Gi(t,n),r&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{FE(t,e)}catch(a){nt(n,n.return,a)}}break;case 27:e===null&&r&4&&zw(n);case 26:case 5:Gi(t,n),e===null&&r&4&&Lw(n),r&512&&Hl(n,n.return);break;case 12:Gi(t,n);break;case 13:Gi(t,n),r&4&&qw(t,n),r&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=VC.bind(null,n),rN(t,n))));break;case 22:if(r=n.memoizedState!==null||gi,!r){e=e!==null&&e.memoizedState!==null||kt,i=gi;var s=kt;gi=r,(kt=e)&&!s?Qi(t,n,(n.subtreeFlags&8772)!==0):Gi(t,n),gi=i,kt=s}break;case 30:break;default:Gi(t,n)}}function Fw(t){var e=t.alternate;e!==null&&(t.alternate=null,Fw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&dg(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var mt=null,Dn=!1;function mi(t,e,n){for(n=n.child;n!==null;)Hw(t,e,n),n=n.sibling}function Hw(t,e,n){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(Ru,n)}catch{}switch(n.tag){case 26:kt||$r(n,e),mi(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:kt||$r(n,e);var r=mt,i=Dn;Us(n.type)&&(mt=n.stateNode,Dn=!1),mi(t,e,n),Ql(n.stateNode),mt=r,Dn=i;break;case 5:kt||$r(n,e);case 6:if(r=mt,i=Dn,mt=null,mi(t,e,n),mt=r,Dn=i,mt!==null)if(Dn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(n.stateNode)}catch(s){nt(n,e,s)}else try{mt.removeChild(n.stateNode)}catch(s){nt(n,e,s)}break;case 18:mt!==null&&(Dn?(t=mt,c_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),mu(t)):c_(mt,n.stateNode));break;case 4:r=mt,i=Dn,mt=n.stateNode.containerInfo,Dn=!0,mi(t,e,n),mt=r,Dn=i;break;case 0:case 11:case 14:case 15:kt||As(2,n,e),kt||As(4,n,e),mi(t,e,n);break;case 1:kt||($r(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"&&Uw(n,e,r)),mi(t,e,n);break;case 21:mi(t,e,n);break;case 22:kt=(r=kt)||n.memoizedState!==null,mi(t,e,n),kt=r;break;default:mi(t,e,n)}}function qw(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{mu(t)}catch(n){nt(e,e.return,n)}}function DC(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Zv),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Zv),e;default:throw Error(J(435,t.tag))}}function Kd(t,e){var n=DC(t);e.forEach(function(r){var i=zC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}function Gn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r],s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(Us(o.type)){mt=o.stateNode,Dn=!1;break e}break;case 5:mt=o.stateNode,Dn=!1;break e;case 3:case 4:mt=o.stateNode.containerInfo,Dn=!0;break e}o=o.return}if(mt===null)throw Error(J(160));Hw(s,a,i),mt=null,Dn=!1,s=i.alternate,s!==null&&(s.return=null),i.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)Gw(e,t),e=e.sibling}var Sr=null;function Gw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Gn(e,t),$n(t),r&4&&(As(3,t,t.return),Lu(3,t),As(5,t,t.return));break;case 1:Gn(e,t),$n(t),r&512&&(kt||n===null||$r(n,n.return)),r&64&&gi&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var i=Sr;if(Gn(e,t),$n(t),r&512&&(kt||n===null||$r(n,n.return)),r&4){var s=n!==null?n.memoizedState:null;if(r=t.memoizedState,n===null)if(r===null)if(t.stateNode===null){e:{r=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":s=i.getElementsByTagName("title")[0],(!s||s[Iu]||s[yn]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),ln(s,r,n),s[yn]=t,Jt(s),r=s;break e;case"link":var a=p_("link","href",i).get(r+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(s=a[o],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}s=i.createElement(r),ln(s,r,n),i.head.appendChild(s);break;case"meta":if(a=p_("meta","content",i).get(r+(n.content||""))){for(o=0;o<a.length;o++)if(s=a[o],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}s=i.createElement(r),ln(s,r,n),i.head.appendChild(s);break;default:throw Error(J(468,r))}s[yn]=t,Jt(s),r=s}t.stateNode=r}else g_(i,t.type,t.stateNode);else t.stateNode=m_(i,r,t.memoizedProps);else s!==r?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,r===null?g_(i,t.type,t.stateNode):m_(i,r,t.memoizedProps)):r===null&&t.stateNode!==null&&Gd(t,t.memoizedProps,n.memoizedProps)}break;case 27:Gn(e,t),$n(t),r&512&&(kt||n===null||$r(n,n.return)),n!==null&&r&4&&Gd(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Gn(e,t),$n(t),r&512&&(kt||n===null||$r(n,n.return)),t.flags&32){i=t.stateNode;try{Co(i,"")}catch(m){nt(t,t.return,m)}}r&4&&t.stateNode!=null&&(i=t.memoizedProps,Gd(t,i,n!==null?n.memoizedProps:i)),r&1024&&(Qd=!0);break;case 6:if(Gn(e,t),$n(t),r&4){if(t.stateNode===null)throw Error(J(162));r=t.memoizedProps,n=t.stateNode;try{n.nodeValue=r}catch(m){nt(t,t.return,m)}}break;case 3:if(eh=null,i=Sr,Sr=Fh(e.containerInfo),Gn(e,t),Sr=i,$n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mu(e.containerInfo)}catch(m){nt(t,t.return,m)}Qd&&(Qd=!1,$w(t));break;case 4:r=Sr,Sr=Fh(t.stateNode.containerInfo),Gn(e,t),$n(t),Sr=r;break;case 12:Gn(e,t),$n(t);break;case 13:Gn(e,t),$n(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&($g=Kr()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Kd(t,r)));break;case 22:i=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=gi,h=kt;if(gi=c||i,kt=h||l,Gn(e,t),kt=h,gi=c,$n(t),r&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||l||gi||kt||Qs(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(s=l.stateNode,i)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,f=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(m){nt(l,l.return,m)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=i?"":l.memoizedProps}catch(m){nt(l,l.return,m)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}r&4&&(r=t.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,Kd(t,n))));break;case 19:Gn(e,t),$n(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,Kd(t,r)));break;case 30:break;case 21:break;default:Gn(e,t),$n(t)}}function $n(t){var e=t.flags;if(e&2){try{for(var n,r=t.return;r!==null;){if(Vw(r)){n=r;break}r=r.return}if(n==null)throw Error(J(160));switch(n.tag){case 27:var i=n.stateNode,s=$d(t);Ph(t,s,i);break;case 5:var a=n.stateNode;n.flags&32&&(Co(a,""),n.flags&=-33);var o=$d(t);Ph(t,o,a);break;case 3:case 4:var l=n.stateNode.containerInfo,c=$d(t);sp(t,c,l);break;default:throw Error(J(161))}}catch(h){nt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $w(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;$w(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Gi(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Bw(t,e.alternate,e),e=e.sibling}function Qs(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:As(4,e,e.return),Qs(e);break;case 1:$r(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&Uw(e,e.return,n),Qs(e);break;case 27:Ql(e.stateNode);case 26:case 5:$r(e,e.return),Qs(e);break;case 22:e.memoizedState===null&&Qs(e);break;case 30:Qs(e);break;default:Qs(e)}t=t.sibling}}function Qi(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var r=e.alternate,i=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:Qi(i,s,n),Lu(4,s);break;case 1:if(Qi(i,s,n),r=s,i=r.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(c){nt(r,r.return,c)}if(r=s,i=r.updateQueue,i!==null){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(l!==null)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)BE(l[i],o)}catch(c){nt(r,r.return,c)}}n&&a&64&&jw(s),Hl(s,s.return);break;case 27:zw(s);case 26:case 5:Qi(i,s,n),n&&r===null&&a&4&&Lw(s),Hl(s,s.return);break;case 12:Qi(i,s,n);break;case 13:Qi(i,s,n),n&&a&4&&qw(i,s);break;case 22:s.memoizedState===null&&Qi(i,s,n),Hl(s,s.return);break;case 30:break;default:Qi(i,s,n)}e=e.sibling}}function Fg(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&ku(n))}function Hg(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ku(t))}function Br(t,e,n,r){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Qw(t,e,n,r),e=e.sibling}function Qw(t,e,n,r){var i=e.flags;switch(e.tag){case 0:case 11:case 15:Br(t,e,n,r),i&2048&&Lu(9,e);break;case 1:Br(t,e,n,r);break;case 3:Br(t,e,n,r),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ku(t)));break;case 12:if(i&2048){Br(t,e,n,r),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,o=s.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){nt(e,e.return,l)}}else Br(t,e,n,r);break;case 13:Br(t,e,n,r);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?Br(t,e,n,r):ql(t,e):s._visibility&2?Br(t,e,n,r):(s._visibility|=2,Ha(t,e,n,r,(e.subtreeFlags&10256)!==0)),i&2048&&Fg(a,e);break;case 24:Br(t,e,n,r),i&2048&&Hg(e.alternate,e);break;default:Br(t,e,n,r)}}function Ha(t,e,n,r,i){for(i=i&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var s=t,a=e,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Ha(s,a,o,l,i),Lu(8,a);break;case 23:break;case 22:var h=a.stateNode;a.memoizedState!==null?h._visibility&2?Ha(s,a,o,l,i):ql(s,a):(h._visibility|=2,Ha(s,a,o,l,i)),i&&c&2048&&Fg(a.alternate,a);break;case 24:Ha(s,a,o,l,i),i&&c&2048&&Hg(a.alternate,a);break;default:Ha(s,a,o,l,i)}e=e.sibling}}function ql(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,r=e,i=r.flags;switch(r.tag){case 22:ql(n,r),i&2048&&Fg(r.alternate,r);break;case 24:ql(n,r),i&2048&&Hg(r.alternate,r);break;default:ql(n,r)}e=e.sibling}}var Rl=8192;function La(t){if(t.subtreeFlags&Rl)for(t=t.child;t!==null;)Kw(t),t=t.sibling}function Kw(t){switch(t.tag){case 26:La(t),t.flags&Rl&&t.memoizedState!==null&&gN(Sr,t.memoizedState,t.memoizedProps);break;case 5:La(t);break;case 3:case 4:var e=Sr;Sr=Fh(t.stateNode.containerInfo),La(t),Sr=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=Rl,Rl=16777216,La(t),Rl=e):La(t));break;default:La(t)}}function Yw(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function vl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];Zt=r,Ww(r,t)}Yw(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Xw(t),t=t.sibling}function Xw(t){switch(t.tag){case 0:case 11:case 15:vl(t),t.flags&2048&&As(9,t,t.return);break;case 3:vl(t);break;case 12:vl(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Zc(t)):vl(t);break;default:vl(t)}}function Zc(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];Zt=r,Ww(r,t)}Yw(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:As(8,e,e.return),Zc(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Zc(e));break;default:Zc(e)}t=t.sibling}}function Ww(t,e){for(;Zt!==null;){var n=Zt;switch(n.tag){case 0:case 11:case 15:As(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ku(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,Zt=r;else e:for(n=t;Zt!==null;){r=Zt;var i=r.sibling,s=r.return;if(Fw(r),r===n){Zt=null;break e}if(i!==null){i.return=s,Zt=i;break e}Zt=s}}}var OC={getCacheForType:function(t){var e=vn(Qt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},MC=typeof WeakMap=="function"?WeakMap:Map,Ye=0,at=null,Ie=null,Ue=0,Ke=0,Qn=null,ls=!1,Yo=!1,qg=!1,Ii=0,St=0,xs=0,sa=0,Gg=0,mr=0,Mo=0,Gl=null,On=null,ap=!1,$g=0,jh=1/0,Uh=null,ms=null,an=0,ps=null,ko=null,vo=0,op=0,lp=null,Zw=null,$l=0,up=null;function tr(){if(Ye&2&&Ue!==0)return Ue&-Ue;if(_e.T!==null){var t=No;return t!==0?t:Kg()}return uE()}function Jw(){mr===0&&(mr=!(Ue&536870912)||Be?sE():536870912);var t=vr.current;return t!==null&&(t.flags|=32),mr}function nr(t,e,n){(t===at&&(Ke===2||Ke===9)||t.cancelPendingCommit!==null)&&(Po(t,0),us(t,Ue,mr,!1)),Nu(t,n),(!(Ye&2)||t!==at)&&(t===at&&(!(Ye&2)&&(sa|=n),St===4&&us(t,Ue,mr,!1)),si(t))}function eT(t,e,n){if(Ye&6)throw Error(J(327));var r=!n&&(e&124)===0&&(e&t.expiredLanes)===0||Cu(t,e),i=r?jC(t,e):Yd(t,e,!0),s=r;do{if(i===0){Yo&&!r&&us(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!kC(n)){i=Yd(t,e,!1),s=!1;continue}if(i===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;i=Gl;var l=o.current.memoizedState.isDehydrated;if(l&&(Po(o,a).flags|=256),a=Yd(o,a,!1),a!==2){if(qg&&!l){o.errorRecoveryDisabledLanes|=s,sa|=s,i=4;break e}s=On,On=i,s!==null&&(On===null?On=s:On.push.apply(On,s))}i=a}if(s=!1,i!==2)continue}}if(i===1){Po(t,0),us(t,e,0,!0);break}e:{switch(r=t,s=i,s){case 0:case 1:throw Error(J(345));case 4:if((e&4194048)!==e)break;case 6:us(r,e,mr,!ls);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(J(329))}if((e&62914560)===e&&(i=$g+300-Kr(),10<i)){if(us(r,e,mr,!ls),Cf(r,0,!0)!==0)break e;r.timeoutHandle=_T(Jv.bind(null,r,n,On,Uh,ap,e,mr,sa,Mo,ls,s,2,-0,0),i);break e}Jv(r,n,On,Uh,ap,e,mr,sa,Mo,ls,s,0,-0,0)}}break}while(!0);si(t)}function Jv(t,e,n,r,i,s,a,o,l,c,h,d,f,m){if(t.timeoutHandle=-1,d=e.subtreeFlags,(d&8192||(d&16785408)===16785408)&&(cu={stylesheets:null,count:0,unsuspend:pN},Kw(e),d=yN(),d!==null)){t.cancelPendingCommit=d(t_.bind(null,t,e,s,n,r,i,a,o,l,h,1,f,m)),us(t,s,a,!c);return}t_(t,e,s,n,r,i,a,o,l)}function kC(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ir(s(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function us(t,e,n,r){e&=~Gg,e&=~sa,t.suspendedLanes|=e,t.pingedLanes&=~e,r&&(t.warmLanes|=e),r=t.expirationTimes;for(var i=e;0<i;){var s=31-er(i),a=1<<s;r[s]=-1,i&=~a}n!==0&&oE(t,n,e)}function Lf(){return Ye&6?!0:(Vu(0),!1)}function Qg(){if(Ie!==null){if(Ke===0)var t=Ie.return;else t=Ie,bi=Aa=null,Mg(t),yo=null,ou=0,t=Ie;for(;t!==null;)Pw(t.alternate,t),t=t.return;Ie=null}}function Po(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,ZC(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Qg(),at=t,Ie=n=Ai(t.current,null),Ue=e,Ke=0,Qn=null,ls=!1,Yo=Cu(t,e),qg=!1,Mo=mr=Gg=sa=xs=St=0,On=Gl=null,ap=!1,e&8&&(e|=e&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=e;0<r;){var i=31-er(r),s=1<<i;e|=t[i],r&=~s}return Ii=e,Of(),n}function tT(t,e){Re=null,_e.H=Ih,e===Pu||e===kf?(e=Dv(),Ke=3):e===VE?(e=Dv(),Ke=4):Ke=e===Nw?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Qn=e,Ie===null&&(St=1,Mh(t,fr(e,t.current)))}function nT(){var t=_e.H;return _e.H=Ih,t===null?Ih:t}function rT(){var t=_e.A;return _e.A=OC,t}function cp(){St=4,ls||(Ue&4194048)!==Ue&&vr.current!==null||(Yo=!0),!(xs&134217727)&&!(sa&134217727)||at===null||us(at,Ue,mr,!1)}function Yd(t,e,n){var r=Ye;Ye|=2;var i=nT(),s=rT();(at!==t||Ue!==e)&&(Uh=null,Po(t,e)),e=!1;var a=St;e:do try{if(Ke!==0&&Ie!==null){var o=Ie,l=Qn;switch(Ke){case 8:Qg(),a=6;break e;case 3:case 2:case 9:case 6:vr.current===null&&(e=!0);var c=Ke;if(Ke=0,Qn=null,oo(t,o,l,c),n&&Yo){a=0;break e}break;default:c=Ke,Ke=0,Qn=null,oo(t,o,l,c)}}PC(),a=St;break}catch(h){tT(t,h)}while(!0);return e&&t.shellSuspendCounter++,bi=Aa=null,Ye=r,_e.H=i,_e.A=s,Ie===null&&(at=null,Ue=0,Of()),a}function PC(){for(;Ie!==null;)iT(Ie)}function jC(t,e){var n=Ye;Ye|=2;var r=nT(),i=rT();at!==t||Ue!==e?(Uh=null,jh=Kr()+500,Po(t,e)):Yo=Cu(t,e);e:do try{if(Ke!==0&&Ie!==null){e=Ie;var s=Qn;t:switch(Ke){case 1:Ke=0,Qn=null,oo(t,e,s,1);break;case 2:case 9:if(Iv(s)){Ke=0,Qn=null,e_(e);break}e=function(){Ke!==2&&Ke!==9||at!==t||(Ke=7),si(t)},s.then(e,e);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:Iv(s)?(Ke=0,Qn=null,e_(e)):(Ke=0,Qn=null,oo(t,e,s,7));break;case 5:var a=null;switch(Ie.tag){case 26:a=Ie.memoizedState;case 5:case 27:var o=Ie;if(!a||TT(a)){Ke=0,Qn=null;var l=o.sibling;if(l!==null)Ie=l;else{var c=o.return;c!==null?(Ie=c,Vf(c)):Ie=null}break t}}Ke=0,Qn=null,oo(t,e,s,5);break;case 6:Ke=0,Qn=null,oo(t,e,s,6);break;case 8:Qg(),St=6;break e;default:throw Error(J(462))}}UC();break}catch(h){tT(t,h)}while(!0);return bi=Aa=null,_e.H=r,_e.A=i,Ye=n,Ie!==null?0:(at=null,Ue=0,Of(),St)}function UC(){for(;Ie!==null&&!sR();)iT(Ie)}function iT(t){var e=kw(t.alternate,t,Ii);t.memoizedProps=t.pendingProps,e===null?Vf(t):Ie=e}function e_(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Qv(n,e,e.pendingProps,e.type,void 0,Ue);break;case 11:e=Qv(n,e,e.pendingProps,e.type.render,e.ref,Ue);break;case 5:Mg(e);default:Pw(n,e),e=Ie=PE(e,Ii),e=kw(n,e,Ii)}t.memoizedProps=t.pendingProps,e===null?Vf(t):Ie=e}function oo(t,e,n,r){bi=Aa=null,Mg(e),yo=null,ou=0;var i=e.return;try{if(SC(t,i,e,n,Ue)){St=1,Mh(t,fr(n,t.current)),Ie=null;return}}catch(s){if(i!==null)throw Ie=i,s;St=1,Mh(t,fr(n,t.current)),Ie=null;return}e.flags&32768?(Be||r===1?t=!0:Yo||Ue&536870912?t=!1:(ls=t=!0,(r===2||r===9||r===3||r===6)&&(r=vr.current,r!==null&&r.tag===13&&(r.flags|=16384))),sT(e,t)):Vf(e)}function Vf(t){var e=t;do{if(e.flags&32768){sT(e,ls);return}t=e.return;var n=CC(e.alternate,e,Ii);if(n!==null){Ie=n;return}if(e=e.sibling,e!==null){Ie=e;return}Ie=e=t}while(e!==null);St===0&&(St=5)}function sT(t,e){do{var n=NC(t.alternate,t);if(n!==null){n.flags&=32767,Ie=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Ie=t;return}Ie=t=n}while(t!==null);St=6,Ie=null}function t_(t,e,n,r,i,s,a,o,l){t.cancelPendingCommit=null;do zf();while(an!==0);if(Ye&6)throw Error(J(327));if(e!==null){if(e===t.current)throw Error(J(177));if(s=e.lanes|e.childLanes,s|=bg,pR(t,n,s,a,o,l),t===at&&(Ie=at=null,Ue=0),ko=e,ps=t,vo=n,op=s,lp=i,Zw=r,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,BC(bh,function(){return cT(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(e.flags&13878)!==0,e.subtreeFlags&13878||r){r=_e.T,_e.T=null,i=Fe.p,Fe.p=2,a=Ye,Ye|=4;try{IC(t,e,n)}finally{Ye=a,Fe.p=i,_e.T=r}}an=1,aT(),oT(),lT()}}function aT(){if(an===1){an=0;var t=ps,e=ko,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=_e.T,_e.T=null;var r=Fe.p;Fe.p=2;var i=Ye;Ye|=4;try{Gw(e,t);var s=mp,a=RE(t.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&SE(o.ownerDocument.documentElement,o)){if(l!==null&&_g(o)){var c=l.start,h=l.end;if(h===void 0&&(h=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(h,o.value.length);else{var d=o.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var m=f.getSelection(),E=o.textContent.length,N=Math.min(l.start,E),k=l.end===void 0?N:Math.min(l.end,E);!m.extend&&N>k&&(a=k,k=N,N=a);var _=wv(o,N),x=wv(o,k);if(_&&x&&(m.rangeCount!==1||m.anchorNode!==_.node||m.anchorOffset!==_.offset||m.focusNode!==x.node||m.focusOffset!==x.offset)){var S=d.createRange();S.setStart(_.node,_.offset),m.removeAllRanges(),N>k?(m.addRange(S),m.extend(x.node,x.offset)):(S.setEnd(x.node,x.offset),m.addRange(S))}}}}for(d=[],m=o;m=m.parentNode;)m.nodeType===1&&d.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var M=d[o];M.element.scrollLeft=M.left,M.element.scrollTop=M.top}}Gh=!!dp,mp=dp=null}finally{Ye=i,Fe.p=r,_e.T=n}}t.current=e,an=2}}function oT(){if(an===2){an=0;var t=ps,e=ko,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=_e.T,_e.T=null;var r=Fe.p;Fe.p=2;var i=Ye;Ye|=4;try{Bw(t,e.alternate,e)}finally{Ye=i,Fe.p=r,_e.T=n}}an=3}}function lT(){if(an===4||an===3){an=0,aR();var t=ps,e=ko,n=vo,r=Zw;e.subtreeFlags&10256||e.flags&10256?an=5:(an=0,ko=ps=null,uT(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(ms=null),fg(n),e=e.stateNode,Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(Ru,e,void 0,(e.current.flags&128)===128)}catch{}if(r!==null){e=_e.T,i=Fe.p,Fe.p=2,_e.T=null;try{for(var s=t.onRecoverableError,a=0;a<r.length;a++){var o=r[a];s(o.value,{componentStack:o.stack})}}finally{_e.T=e,Fe.p=i}}vo&3&&zf(),si(t),i=t.pendingLanes,n&4194090&&i&42?t===up?$l++:($l=0,up=t):$l=0,Vu(0)}}function uT(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,ku(e)))}function zf(t){return aT(),oT(),lT(),cT()}function cT(){if(an!==5)return!1;var t=ps,e=op;op=0;var n=fg(vo),r=_e.T,i=Fe.p;try{Fe.p=32>n?32:n,_e.T=null,n=lp,lp=null;var s=ps,a=vo;if(an=0,ko=ps=null,vo=0,Ye&6)throw Error(J(331));var o=Ye;if(Ye|=4,Xw(s.current),Qw(s,s.current,a,n),Ye=o,Vu(0,!1),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(Ru,s)}catch{}return!0}finally{Fe.p=i,_e.T=r,uT(t,e)}}function n_(t,e,n){e=fr(n,e),e=np(t.stateNode,e,2),t=ds(t,e,2),t!==null&&(Nu(t,2),si(t))}function nt(t,e,n){if(t.tag===3)n_(t,t,n);else for(;e!==null;){if(e.tag===3){n_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ms===null||!ms.has(r))){t=fr(n,t),n=Rw(2),r=ds(e,n,2),r!==null&&(Cw(n,r,e,t),Nu(r,2),si(r));break}}e=e.return}}function Xd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new MC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(qg=!0,i.add(n),t=LC.bind(null,t,e,n),e.then(t,t))}function LC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,at===t&&(Ue&n)===n&&(St===4||St===3&&(Ue&62914560)===Ue&&300>Kr()-$g?!(Ye&2)&&Po(t,0):Gg|=n,Mo===Ue&&(Mo=0)),si(t)}function hT(t,e){e===0&&(e=aE()),t=Ko(t,e),t!==null&&(Nu(t,e),si(t))}function VC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hT(t,n)}function zC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(J(314))}r!==null&&r.delete(e),hT(t,n)}function BC(t,e){return cg(t,e)}var Lh=null,qa=null,hp=!1,Vh=!1,Wd=!1,aa=0;function si(t){t!==qa&&t.next===null&&(qa===null?Lh=qa=t:qa=qa.next=t),Vh=!0,hp||(hp=!0,HC())}function Vu(t,e){if(!Wd&&Vh){Wd=!0;do for(var n=!1,r=Lh;r!==null;){if(t!==0){var i=r.pendingLanes;if(i===0)var s=0;else{var a=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-er(42|t)+1)-1,s&=i&~(a&~o),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,r_(r,s))}else s=Ue,s=Cf(r,r===at?s:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(s&3)||Cu(r,s)||(n=!0,r_(r,s));r=r.next}while(n);Wd=!1}}function FC(){fT()}function fT(){Vh=hp=!1;var t=0;aa!==0&&(WC()&&(t=aa),aa=0);for(var e=Kr(),n=null,r=Lh;r!==null;){var i=r.next,s=dT(r,e);s===0?(r.next=null,n===null?Lh=i:n.next=i,i===null&&(qa=n)):(n=r,(t!==0||s&3)&&(Vh=!0)),r=i}Vu(t)}function dT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-er(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=mR(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}if(e=at,n=Ue,n=Cf(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,n===0||t===e&&(Ke===2||Ke===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&Td(r),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Cu(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(r!==null&&Td(r),fg(n)){case 2:case 8:n=rE;break;case 32:n=bh;break;case 268435456:n=iE;break;default:n=bh}return r=mT.bind(null,t),n=cg(n,r),t.callbackPriority=e,t.callbackNode=n,e}return r!==null&&r!==null&&Td(r),t.callbackPriority=2,t.callbackNode=null,2}function mT(t,e){if(an!==0&&an!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(zf()&&t.callbackNode!==n)return null;var r=Ue;return r=Cf(t,t===at?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(eT(t,r,e),dT(t,Kr()),t.callbackNode!=null&&t.callbackNode===n?mT.bind(null,t):null)}function r_(t,e){if(zf())return null;eT(t,e,!0)}function HC(){JC(function(){Ye&6?cg(nE,FC):fT()})}function Kg(){return aa===0&&(aa=sE()),aa}function i_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:qc(""+t)}function s_(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function qC(t,e,n,r,i){if(e==="submit"&&n&&n.stateNode===i){var s=i_((i[Ln]||null).action),a=r.submitter;a&&(e=(e=a[Ln]||null)?i_(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var o=new Nf("action","action",null,r,i);t.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(aa!==0){var l=a?s_(i,a):new FormData(i);ep(n,{pending:!0,data:l,method:i.method,action:s},null,l)}}else typeof s=="function"&&(o.preventDefault(),l=a?s_(i,a):new FormData(i),ep(n,{pending:!0,data:l,method:i.method,action:s},s,l))},currentTarget:i}]})}}for(var Zd=0;Zd<Fm.length;Zd++){var Jd=Fm[Zd],GC=Jd.toLowerCase(),$C=Jd[0].toUpperCase()+Jd.slice(1);Or(GC,"on"+$C)}Or(NE,"onAnimationEnd");Or(IE,"onAnimationIteration");Or(DE,"onAnimationStart");Or("dblclick","onDoubleClick");Or("focusin","onFocus");Or("focusout","onBlur");Or(uC,"onTransitionRun");Or(cC,"onTransitionStart");Or(hC,"onTransitionCancel");Or(OE,"onTransitionEnd");Ro("onMouseEnter",["mouseout","mouseover"]);Ro("onMouseLeave",["mouseout","mouseover"]);Ro("onPointerEnter",["pointerout","pointerover"]);Ro("onPointerLeave",["pointerout","pointerover"]);Ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ea("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lu));function pT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(h){Oh(h)}i.currentTarget=null,s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(h){Oh(h)}i.currentTarget=null,s=l}}}}function Ne(t,e){var n=e[Pm];n===void 0&&(n=e[Pm]=new Set);var r=t+"__bubble";n.has(r)||(gT(e,t,2,!1),n.add(r))}function em(t,e,n){var r=0;e&&(r|=4),gT(n,t,r,e)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function Yg(t){if(!t[Nc]){t[Nc]=!0,cE.forEach(function(n){n!=="selectionchange"&&(QC.has(n)||em(n,!1,t),em(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nc]||(e[Nc]=!0,em("selectionchange",!1,e))}}function gT(t,e,n,r){switch(CT(e)){case 2:var i=bN;break;case 8:i=EN;break;default:i=Jg}n=i.bind(null,e,n,t),i=void 0,!Vm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function tm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===i)return;a=a.return}for(;o!==null;){if(a=Za(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){r=s=a;continue e}o=o.parentNode}}r=r.return}vE(function(){var c=s,h=pg(n),d=[];e:{var f=ME.get(t);if(f!==void 0){var m=Nf,E=t;switch(t){case"keypress":if($c(n)===0)break e;case"keydown":case"keyup":m=BR;break;case"focusin":E="focus",m=Dd;break;case"focusout":E="blur",m=Dd;break;case"beforeblur":case"afterblur":m=Dd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=fv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=NR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=qR;break;case NE:case IE:case DE:m=OR;break;case OE:m=$R;break;case"scroll":case"scrollend":m=RR;break;case"wheel":m=KR;break;case"copy":case"cut":case"paste":m=kR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=mv;break;case"toggle":case"beforetoggle":m=XR}var N=(e&4)!==0,k=!N&&(t==="scroll"||t==="scrollend"),_=N?f!==null?f+"Capture":null:f;N=[];for(var x=c,S;x!==null;){var M=x;if(S=M.stateNode,M=M.tag,M!==5&&M!==26&&M!==27||S===null||_===null||(M=nu(x,_),M!=null&&N.push(uu(x,M,S))),k)break;x=x.return}0<N.length&&(f=new m(f,E,null,n,h),d.push({event:f,listeners:N}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Lm&&(E=n.relatedTarget||n.fromElement)&&(Za(E)||E[$o]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(E=n.relatedTarget||n.toElement,m=c,E=E?Za(E):null,E!==null&&(k=Su(E),N=E.tag,E!==k||N!==5&&N!==27&&N!==6)&&(E=null)):(m=null,E=c),m!==E)){if(N=fv,M="onMouseLeave",_="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(N=mv,M="onPointerLeave",_="onPointerEnter",x="pointer"),k=m==null?f:Sl(m),S=E==null?f:Sl(E),f=new N(M,x+"leave",m,n,h),f.target=k,f.relatedTarget=S,M=null,Za(h)===c&&(N=new N(_,x+"enter",E,n,h),N.target=S,N.relatedTarget=k,M=N),k=M,m&&E)t:{for(N=m,_=E,x=0,S=N;S;S=Va(S))x++;for(S=0,M=_;M;M=Va(M))S++;for(;0<x-S;)N=Va(N),x--;for(;0<S-x;)_=Va(_),S--;for(;x--;){if(N===_||_!==null&&N===_.alternate)break t;N=Va(N),_=Va(_)}N=null}else N=null;m!==null&&a_(d,f,m,N,!1),E!==null&&k!==null&&a_(d,k,E,N,!0)}}e:{if(f=c?Sl(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var U=vv;else if(yv(f))if(AE)U=aC;else{U=iC;var T=rC}else m=f.nodeName,!m||m.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?c&&mg(c.elementType)&&(U=vv):U=sC;if(U&&(U=U(t,c))){TE(d,U,n,h);break e}T&&T(t,f,c),t==="focusout"&&c&&f.type==="number"&&c.memoizedProps.value!=null&&Um(f,"number",f.value)}switch(T=c?Sl(c):window,t){case"focusin":(yv(T)||T.contentEditable==="true")&&(to=T,zm=c,jl=null);break;case"focusout":jl=zm=to=null;break;case"mousedown":Bm=!0;break;case"contextmenu":case"mouseup":case"dragend":Bm=!1,Tv(d,n,h);break;case"selectionchange":if(lC)break;case"keydown":case"keyup":Tv(d,n,h)}var A;if(vg)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else eo?EE(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(bE&&n.locale!=="ko"&&(eo||y!=="onCompositionStart"?y==="onCompositionEnd"&&eo&&(A=_E()):(os=h,gg="value"in os?os.value:os.textContent,eo=!0)),T=zh(c,y),0<T.length&&(y=new dv(y,t,null,n,h),d.push({event:y,listeners:T}),A?y.data=A:(A=wE(n),A!==null&&(y.data=A)))),(A=ZR?JR(t,n):eC(t,n))&&(y=zh(c,"onBeforeInput"),0<y.length&&(T=new dv("onBeforeInput","beforeinput",null,n,h),d.push({event:T,listeners:y}),T.data=A)),qC(d,t,c,n,h)}pT(d,e)})}function uu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function zh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||s===null||(i=nu(t,n),i!=null&&r.unshift(uu(t,i,s)),i=nu(t,e),i!=null&&r.push(uu(t,i,s))),t.tag===3)return r;t=t.return}return[]}function Va(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function a_(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===r)break;o!==5&&o!==26&&o!==27||c===null||(l=c,i?(c=nu(n,s),c!=null&&a.unshift(uu(n,c,l))):i||(c=nu(n,s),c!=null&&a.push(uu(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var KC=/\r\n?/g,YC=/\u0000|\uFFFD/g;function o_(t){return(typeof t=="string"?t:""+t).replace(KC,`
`).replace(YC,"")}function yT(t,e){return e=o_(e),o_(t)===e}function Bf(){}function Je(t,e,n,r,i,s){switch(n){case"children":typeof r=="string"?e==="body"||e==="textarea"&&r===""||Co(t,r):(typeof r=="number"||typeof r=="bigint")&&e!=="body"&&Co(t,""+r);break;case"className":wc(t,"class",r);break;case"tabIndex":wc(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":wc(t,n,r);break;case"style":yE(t,r,s);break;case"data":if(e!=="object"){wc(t,"data",r);break}case"src":case"href":if(r===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=qc(""+r),t.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&Je(t,e,"name",i.name,i,null),Je(t,e,"formEncType",i.formEncType,i,null),Je(t,e,"formMethod",i.formMethod,i,null),Je(t,e,"formTarget",i.formTarget,i,null)):(Je(t,e,"encType",i.encType,i,null),Je(t,e,"method",i.method,i,null),Je(t,e,"target",i.target,i,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=qc(""+r),t.setAttribute(n,r);break;case"onClick":r!=null&&(t.onclick=Bf);break;case"onScroll":r!=null&&Ne("scroll",t);break;case"onScrollEnd":r!=null&&Ne("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(J(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(J(60));t.innerHTML=n}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}n=qc(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""+r):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":r===!0?t.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,r):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(n,r):t.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(n):t.setAttribute(n,r);break;case"popover":Ne("beforetoggle",t),Ne("toggle",t),Hc(t,"popover",r);break;case"xlinkActuate":fi(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":fi(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":fi(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":fi(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":fi(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":fi(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":fi(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":fi(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":fi(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Hc(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=xR.get(n)||n,Hc(t,n,r))}}function fp(t,e,n,r,i,s){switch(n){case"style":yE(t,r,s);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(J(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(J(60));t.innerHTML=n}}break;case"children":typeof r=="string"?Co(t,r):(typeof r=="number"||typeof r=="bigint")&&Co(t,""+r);break;case"onScroll":r!=null&&Ne("scroll",t);break;case"onScrollEnd":r!=null&&Ne("scrollend",t);break;case"onClick":r!=null&&(t.onclick=Bf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hE.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),s=t[Ln]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,i),typeof r=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,r,i);break e}n in t?t[n]=r:r===!0?t.setAttribute(n,""):Hc(t,n,r)}}}function ln(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",t),Ne("load",t);var r=!1,i=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":r=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(J(137,e));default:Je(t,e,s,a,n,null)}}i&&Je(t,e,"srcSet",n.srcSet,n,null),r&&Je(t,e,"src",n.src,n,null);return;case"input":Ne("invalid",t);var o=s=a=i=null,l=null,c=null;for(r in n)if(n.hasOwnProperty(r)){var h=n[r];if(h!=null)switch(r){case"name":i=h;break;case"type":a=h;break;case"checked":l=h;break;case"defaultChecked":c=h;break;case"value":s=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(J(137,e));break;default:Je(t,e,r,h,n,null)}}mE(t,s,o,l,c,a,i,!1),Eh(t);return;case"select":Ne("invalid",t),r=a=s=null;for(i in n)if(n.hasOwnProperty(i)&&(o=n[i],o!=null))switch(i){case"value":s=o;break;case"defaultValue":a=o;break;case"multiple":r=o;default:Je(t,e,i,o,n,null)}e=s,n=a,t.multiple=!!r,e!=null?ho(t,!!r,e,!1):n!=null&&ho(t,!!r,n,!0);return;case"textarea":Ne("invalid",t),s=i=r=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":r=o;break;case"defaultValue":i=o;break;case"children":s=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(J(91));break;default:Je(t,e,a,o,n,null)}gE(t,r,i,s),Eh(t);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:Je(t,e,l,r,n,null)}return;case"dialog":Ne("beforetoggle",t),Ne("toggle",t),Ne("cancel",t),Ne("close",t);break;case"iframe":case"object":Ne("load",t);break;case"video":case"audio":for(r=0;r<lu.length;r++)Ne(lu[r],t);break;case"image":Ne("error",t),Ne("load",t);break;case"details":Ne("toggle",t);break;case"embed":case"source":case"link":Ne("error",t),Ne("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(r=n[c],r!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(J(137,e));default:Je(t,e,c,r,n,null)}return;default:if(mg(e)){for(h in n)n.hasOwnProperty(h)&&(r=n[h],r!==void 0&&fp(t,e,h,r,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(r=n[o],r!=null&&Je(t,e,o,r,n,null))}function XC(t,e,n,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,o=null,l=null,c=null,h=null;for(m in n){var d=n[m];if(n.hasOwnProperty(m)&&d!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":l=d;default:r.hasOwnProperty(m)||Je(t,e,m,null,r,d)}}for(var f in r){var m=r[f];if(d=n[f],r.hasOwnProperty(f)&&(m!=null||d!=null))switch(f){case"type":s=m;break;case"name":i=m;break;case"checked":c=m;break;case"defaultChecked":h=m;break;case"value":a=m;break;case"defaultValue":o=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(J(137,e));break;default:m!==d&&Je(t,e,f,m,r,d)}}jm(t,a,o,l,c,h,s,i);return;case"select":m=a=o=f=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":m=l;default:r.hasOwnProperty(s)||Je(t,e,s,null,r,l)}for(i in r)if(s=r[i],l=n[i],r.hasOwnProperty(i)&&(s!=null||l!=null))switch(i){case"value":f=s;break;case"defaultValue":o=s;break;case"multiple":a=s;default:s!==l&&Je(t,e,i,s,r,l)}e=o,n=a,r=m,f!=null?ho(t,!!n,f,!1):!!r!=!!n&&(e!=null?ho(t,!!n,e,!0):ho(t,!!n,n?[]:"",!1));return;case"textarea":m=f=null;for(o in n)if(i=n[o],n.hasOwnProperty(o)&&i!=null&&!r.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Je(t,e,o,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(i!=null||s!=null))switch(a){case"value":f=i;break;case"defaultValue":m=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(J(91));break;default:i!==s&&Je(t,e,a,i,r,s)}pE(t,f,m);return;case"option":for(var E in n)if(f=n[E],n.hasOwnProperty(E)&&f!=null&&!r.hasOwnProperty(E))switch(E){case"selected":t.selected=!1;break;default:Je(t,e,E,null,r,f)}for(l in r)if(f=r[l],m=n[l],r.hasOwnProperty(l)&&f!==m&&(f!=null||m!=null))switch(l){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Je(t,e,l,f,r,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var N in n)f=n[N],n.hasOwnProperty(N)&&f!=null&&!r.hasOwnProperty(N)&&Je(t,e,N,null,r,f);for(c in r)if(f=r[c],m=n[c],r.hasOwnProperty(c)&&f!==m&&(f!=null||m!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(J(137,e));break;default:Je(t,e,c,f,r,m)}return;default:if(mg(e)){for(var k in n)f=n[k],n.hasOwnProperty(k)&&f!==void 0&&!r.hasOwnProperty(k)&&fp(t,e,k,void 0,r,f);for(h in r)f=r[h],m=n[h],!r.hasOwnProperty(h)||f===m||f===void 0&&m===void 0||fp(t,e,h,f,r,m);return}}for(var _ in n)f=n[_],n.hasOwnProperty(_)&&f!=null&&!r.hasOwnProperty(_)&&Je(t,e,_,null,r,f);for(d in r)f=r[d],m=n[d],!r.hasOwnProperty(d)||f===m||f==null&&m==null||Je(t,e,d,f,r,m)}var dp=null,mp=null;function Bh(t){return t.nodeType===9?t:t.ownerDocument}function l_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vT(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function pp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nm=null;function WC(){var t=window.event;return t&&t.type==="popstate"?t===nm?!1:(nm=t,!0):(nm=null,!1)}var _T=typeof setTimeout=="function"?setTimeout:void 0,ZC=typeof clearTimeout=="function"?clearTimeout:void 0,u_=typeof Promise=="function"?Promise:void 0,JC=typeof queueMicrotask=="function"?queueMicrotask:typeof u_<"u"?function(t){return u_.resolve(null).then(t).catch(eN)}:_T;function eN(t){setTimeout(function(){throw t})}function Us(t){return t==="head"}function c_(t,e){var n=e,r=0,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(0<r&&8>r){n=r;var a=t.ownerDocument;if(n&1&&Ql(a.documentElement),n&2&&Ql(a.body),n&4)for(n=a.head,Ql(n),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Iu]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=o}}if(i===0){t.removeChild(s),mu(e);return}i--}else n==="$"||n==="$?"||n==="$!"?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);mu(e)}function gp(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gp(n),dg(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function tN(t,e,n,r){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[Iu])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=Nr(t.nextSibling),t===null)break}return null}function nN(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Nr(t.nextSibling),t===null))return null;return t}function yp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function rN(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var r=function(){e(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function Nr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var vp=null;function h_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function bT(t,e,n){switch(e=Bh(n),t){case"html":if(t=e.documentElement,!t)throw Error(J(452));return t;case"head":if(t=e.head,!t)throw Error(J(453));return t;case"body":if(t=e.body,!t)throw Error(J(454));return t;default:throw Error(J(451))}}function Ql(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);dg(t)}var _r=new Map,f_=new Set;function Fh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ji=Fe.d;Fe.d={f:iN,r:sN,D:aN,C:oN,L:lN,m:uN,X:hN,S:cN,M:fN};function iN(){var t=ji.f(),e=Lf();return t||e}function sN(t){var e=Qo(t);e!==null&&e.tag===5&&e.type==="form"?dw(e):ji.r(t)}var Xo=typeof document>"u"?null:document;function ET(t,e,n){var r=Xo;if(r&&typeof e=="string"&&e){var i=hr(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),f_.has(i)||(f_.add(i),t={rel:t,crossOrigin:n,href:e},r.querySelector(i)===null&&(e=r.createElement("link"),ln(e,"link",t),Jt(e),r.head.appendChild(e)))}}function aN(t){ji.D(t),ET("dns-prefetch",t,null)}function oN(t,e){ji.C(t,e),ET("preconnect",t,e)}function lN(t,e,n){ji.L(t,e,n);var r=Xo;if(r&&t&&e){var i='link[rel="preload"][as="'+hr(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+hr(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+hr(n.imageSizes)+'"]')):i+='[href="'+hr(t)+'"]';var s=i;switch(e){case"style":s=jo(t);break;case"script":s=Wo(t)}_r.has(s)||(t=ht({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),_r.set(s,t),r.querySelector(i)!==null||e==="style"&&r.querySelector(zu(s))||e==="script"&&r.querySelector(Bu(s))||(e=r.createElement("link"),ln(e,"link",t),Jt(e),r.head.appendChild(e)))}}function uN(t,e){ji.m(t,e);var n=Xo;if(n&&t){var r=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+hr(r)+'"][href="'+hr(t)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Wo(t)}if(!_r.has(s)&&(t=ht({rel:"modulepreload",href:t},e),_r.set(s,t),n.querySelector(i)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Bu(s)))return}r=n.createElement("link"),ln(r,"link",t),Jt(r),n.head.appendChild(r)}}}function cN(t,e,n){ji.S(t,e,n);var r=Xo;if(r&&t){var i=co(r).hoistableStyles,s=jo(t);e=e||"default";var a=i.get(s);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(zu(s)))o.loading=5;else{t=ht({rel:"stylesheet",href:t,"data-precedence":e},n),(n=_r.get(s))&&Xg(t,n);var l=a=r.createElement("link");Jt(l),ln(l,"link",t),l._p=new Promise(function(c,h){l.onload=c,l.onerror=h}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Jc(a,e,r)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(s,a)}}}function hN(t,e){ji.X(t,e);var n=Xo;if(n&&t){var r=co(n).hoistableScripts,i=Wo(t),s=r.get(i);s||(s=n.querySelector(Bu(i)),s||(t=ht({src:t,async:!0},e),(e=_r.get(i))&&Wg(t,e),s=n.createElement("script"),Jt(s),ln(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}function fN(t,e){ji.M(t,e);var n=Xo;if(n&&t){var r=co(n).hoistableScripts,i=Wo(t),s=r.get(i);s||(s=n.querySelector(Bu(i)),s||(t=ht({src:t,async:!0,type:"module"},e),(e=_r.get(i))&&Wg(t,e),s=n.createElement("script"),Jt(s),ln(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}function d_(t,e,n,r){var i=(i=hs.current)?Fh(i):null;if(!i)throw Error(J(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=jo(n.href),n=co(i).hoistableStyles,r=n.get(e),r||(r={type:"style",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=jo(n.href);var s=co(i).hoistableStyles,a=s.get(t);if(a||(i=i.ownerDocument||i,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=i.querySelector(zu(t)))&&!s._p&&(a.instance=s,a.state.loading=5),_r.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},_r.set(t,n),s||dN(i,t,n,a.state))),e&&r===null)throw Error(J(528,""));return a}if(e&&r!==null)throw Error(J(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Wo(n),n=co(i).hoistableScripts,r=n.get(e),r||(r={type:"script",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(J(444,t))}}function jo(t){return'href="'+hr(t)+'"'}function zu(t){return'link[rel="stylesheet"]['+t+"]"}function wT(t){return ht({},t,{"data-precedence":t.precedence,precedence:null})}function dN(t,e,n,r){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?r.loading=1:(e=t.createElement("link"),r.preload=e,e.addEventListener("load",function(){return r.loading|=1}),e.addEventListener("error",function(){return r.loading|=2}),ln(e,"link",n),Jt(e),t.head.appendChild(e))}function Wo(t){return'[src="'+hr(t)+'"]'}function Bu(t){return"script[async]"+t}function m_(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var r=t.querySelector('style[data-href~="'+hr(n.href)+'"]');if(r)return e.instance=r,Jt(r),r;var i=ht({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),Jt(r),ln(r,"style",i),Jc(r,n.precedence,t),e.instance=r;case"stylesheet":i=jo(n.href);var s=t.querySelector(zu(i));if(s)return e.state.loading|=4,e.instance=s,Jt(s),s;r=wT(n),(i=_r.get(i))&&Xg(r,i),s=(t.ownerDocument||t).createElement("link"),Jt(s);var a=s;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),ln(s,"link",r),e.state.loading|=4,Jc(s,n.precedence,t),e.instance=s;case"script":return s=Wo(n.src),(i=t.querySelector(Bu(s)))?(e.instance=i,Jt(i),i):(r=n,(i=_r.get(s))&&(r=ht({},n),Wg(r,i)),t=t.ownerDocument||t,i=t.createElement("script"),Jt(i),ln(i,"link",r),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(J(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(r=e.instance,e.state.loading|=4,Jc(r,n.precedence,t));return e.instance}function Jc(t,e,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===e)s=o;else if(s!==i)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Xg(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Wg(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var eh=null;function p_(t,e,n){if(eh===null){var r=new Map,i=eh=new Map;i.set(n,r)}else i=eh,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(t))return r;for(r.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var s=n[i];if(!(s[Iu]||s[yn]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var o=r.get(a);o?o.push(s):r.set(a,[s])}}return r}function g_(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function mN(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function TT(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var cu=null;function pN(){}function gN(t,e,n){if(cu===null)throw Error(J(475));var r=cu;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var i=jo(n.href),s=t.querySelector(zu(i));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(r.count++,r=Hh.bind(r),t.then(r,r)),e.state.loading|=4,e.instance=s,Jt(s);return}s=t.ownerDocument||t,n=wT(n),(i=_r.get(i))&&Xg(n,i),s=s.createElement("link"),Jt(s);var a=s;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),ln(s,"link",n),e.instance=s}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(r.count++,e=Hh.bind(r),t.addEventListener("load",e),t.addEventListener("error",e))}}function yN(){if(cu===null)throw Error(J(475));var t=cu;return t.stylesheets&&t.count===0&&_p(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&_p(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function Hh(){if(this.count--,this.count===0){if(this.stylesheets)_p(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var qh=null;function _p(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,qh=new Map,e.forEach(vN,t),qh=null,Hh.call(t))}function vN(t,e){if(!(e.state.loading&4)){var n=qh.get(t);if(n)var r=n.get(null);else{n=new Map,qh.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}i=e.instance,a=i.getAttribute("data-precedence"),s=n.get(a)||r,s===r&&n.set(null,i),n.set(a,i),this.count++,r=Hh.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var hu={$$typeof:yi,Provider:null,Consumer:null,_currentValue:ea,_currentValue2:ea,_threadCount:0};function _N(t,e,n,r,i,s,a,o){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ad(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ad(0),this.hiddenUpdates=Ad(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function AT(t,e,n,r,i,s,a,o,l,c,h,d){return t=new _N(t,e,n,a,o,l,c,d),e=1,s===!0&&(e|=24),s=Yn(3,null,null,e),t.current=s,s.stateNode=t,e=xg(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:e},Rg(s),t}function xT(t){return t?(t=io,t):io}function ST(t,e,n,r,i,s){i=xT(i),r.context===null?r.context=i:r.pendingContext=i,r=fs(e),r.payload={element:n},s=s===void 0?null:s,s!==null&&(r.callback=s),n=ds(t,r,e),n!==null&&(nr(n,t,e),Vl(n,t,e))}function y_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zg(t,e){y_(t,e),(t=t.alternate)&&y_(t,e)}function RT(t){if(t.tag===13){var e=Ko(t,67108864);e!==null&&nr(e,t,67108864),Zg(t,67108864)}}var Gh=!0;function bN(t,e,n,r){var i=_e.T;_e.T=null;var s=Fe.p;try{Fe.p=2,Jg(t,e,n,r)}finally{Fe.p=s,_e.T=i}}function EN(t,e,n,r){var i=_e.T;_e.T=null;var s=Fe.p;try{Fe.p=8,Jg(t,e,n,r)}finally{Fe.p=s,_e.T=i}}function Jg(t,e,n,r){if(Gh){var i=bp(r);if(i===null)tm(t,e,r,$h,n),v_(t,r);else if(TN(i,t,e,n,r))r.stopPropagation();else if(v_(t,r),e&4&&-1<wN.indexOf(t)){for(;i!==null;){var s=Qo(i);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=Gs(s.pendingLanes);if(a!==0){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-er(a);o.entanglements[1]|=l,a&=~l}si(s),!(Ye&6)&&(jh=Kr()+500,Vu(0))}}break;case 13:o=Ko(s,2),o!==null&&nr(o,s,2),Lf(),Zg(s,2)}if(s=bp(r),s===null&&tm(t,e,r,$h,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else tm(t,e,r,null,n)}}function bp(t){return t=pg(t),e0(t)}var $h=null;function e0(t){if($h=null,t=Za(t),t!==null){var e=Su(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=Z1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return $h=t,null}function CT(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oR()){case nE:return 2;case rE:return 8;case bh:case lR:return 32;case iE:return 268435456;default:return 32}default:return 32}}var Ep=!1,gs=null,ys=null,vs=null,fu=new Map,du=new Map,es=[],wN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function v_(t,e){switch(t){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":fu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":du.delete(e.pointerId)}}function _l(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Qo(e),e!==null&&RT(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function TN(t,e,n,r,i){switch(e){case"focusin":return gs=_l(gs,t,e,n,r,i),!0;case"dragenter":return ys=_l(ys,t,e,n,r,i),!0;case"mouseover":return vs=_l(vs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return fu.set(s,_l(fu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,du.set(s,_l(du.get(s)||null,t,e,n,r,i)),!0}return!1}function NT(t){var e=Za(t.target);if(e!==null){var n=Su(e);if(n!==null){if(e=n.tag,e===13){if(e=Z1(n),e!==null){t.blockedOn=e,gR(t.priority,function(){if(n.tag===13){var r=tr();r=hg(r);var i=Ko(n,r);i!==null&&nr(i,n,r),Zg(n,r)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function th(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bp(t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Lm=r,n.target.dispatchEvent(r),Lm=null}else return e=Qo(n),e!==null&&RT(e),t.blockedOn=n,!1;e.shift()}return!0}function __(t,e,n){th(t)&&n.delete(e)}function AN(){Ep=!1,gs!==null&&th(gs)&&(gs=null),ys!==null&&th(ys)&&(ys=null),vs!==null&&th(vs)&&(vs=null),fu.forEach(__),du.forEach(__)}function Ic(t,e){t.blockedOn===e&&(t.blockedOn=null,Ep||(Ep=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,AN)))}var Dc=null;function b_(t){Dc!==t&&(Dc=t,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,function(){Dc===t&&(Dc=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],i=t[e+2];if(typeof r!="function"){if(e0(r||n)===null)continue;break}var s=Qo(n);s!==null&&(t.splice(e,3),e-=3,ep(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function mu(t){function e(l){return Ic(l,t)}gs!==null&&Ic(gs,t),ys!==null&&Ic(ys,t),vs!==null&&Ic(vs,t),fu.forEach(e),du.forEach(e);for(var n=0;n<es.length;n++){var r=es[n];r.blockedOn===t&&(r.blockedOn=null)}for(;0<es.length&&(n=es[0],n.blockedOn===null);)NT(n),n.blockedOn===null&&es.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[Ln]||null;if(typeof s=="function")a||b_(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[Ln]||null)o=a.formAction;else if(e0(i)!==null)continue}else o=a.action;typeof o=="function"?n[r+1]=o:(n.splice(r,3),r-=3),b_(n)}}}function t0(t){this._internalRoot=t}Ff.prototype.render=t0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));var n=e.current,r=tr();ST(n,r,t,e,null,null)};Ff.prototype.unmount=t0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ST(t.current,2,null,t,null,null),Lf(),e[$o]=null}};function Ff(t){this._internalRoot=t}Ff.prototype.unstable_scheduleHydration=function(t){if(t){var e=uE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<es.length&&e!==0&&e<es[n].priority;n++);es.splice(n,0,t),n===0&&NT(t)}};var E_=X1.version;if(E_!=="19.1.0")throw Error(J(527,E_,"19.1.0"));Fe.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=eR(e),t=t!==null?J1(t):null,t=t===null?null:t.stateNode,t};var xN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:_e,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oc.isDisabled&&Oc.supportsFiber)try{Ru=Oc.inject(xN),Jn=Oc}catch{}}Sf.createRoot=function(t,e){if(!W1(t))throw Error(J(299));var n=!1,r="",i=Aw,s=xw,a=Sw,o=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(o=e.unstable_transitionCallbacks)),e=AT(t,1,!1,null,null,n,r,i,s,a,o,null),t[$o]=e.current,Yg(t),new t0(e)};Sf.hydrateRoot=function(t,e,n){if(!W1(t))throw Error(J(299));var r=!1,i="",s=Aw,a=xw,o=Sw,l=null,c=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(c=n.formState)),e=AT(t,1,!0,e,n??null,r,i,s,a,o,l,c),e.context=xT(null),n=e.current,r=tr(),r=hg(r),i=fs(r),i.callback=null,ds(n,i,r),n=r,e.current.lanes=n,Nu(e,n),si(e),t[$o]=e.current,Yg(t),new Ff(e)};Sf.version="19.1.0";function IT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(IT)}catch(t){console.error(t)}}IT(),H1.exports=Sf;var SN=H1.exports;const RN=M1(SN);/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var DT=t=>{throw TypeError(t)},CN=(t,e,n)=>e.has(t)||DT("Cannot "+n),rm=(t,e,n)=>(CN(t,e,"read from private field"),n?n.call(t):e.get(t)),NN=(t,e,n)=>e.has(t)?DT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),w_="popstate";function IN(t={}){function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return pu("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ss(i)}return ON(e,n,null,t)}function De(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Gt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DN(){return Math.random().toString(36).substring(2,10)}function T_(t,e){return{usr:t.state,key:t.key,idx:e}}function pu(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ls(e):e,state:n,key:e&&e.key||r||DN()}}function Ss({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ls(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function ON(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o="POP",l=null,c=h();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function h(){return(a.state||{idx:null}).idx}function d(){o="POP";let k=h(),_=k==null?null:k-c;c=k,l&&l({action:o,location:N.location,delta:_})}function f(k,_){o="PUSH";let x=pu(N.location,k,_);c=h()+1;let S=T_(x,c),M=N.createHref(x);try{a.pushState(S,"",M)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(M)}s&&l&&l({action:o,location:N.location,delta:1})}function m(k,_){o="REPLACE";let x=pu(N.location,k,_);c=h();let S=T_(x,c),M=N.createHref(x);a.replaceState(S,"",M),s&&l&&l({action:o,location:N.location,delta:0})}function E(k){return OT(k)}let N={get action(){return o},get location(){return t(i,a)},listen(k){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(w_,d),l=k,()=>{i.removeEventListener(w_,d),l=null}},createHref(k){return e(i,k)},createURL:E,encodeLocation(k){let _=E(k);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:m,go(k){return a.go(k)}};return N}function OT(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),De(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Ss(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}var Cl,A_=class{constructor(t){if(NN(this,Cl,new Map),t)for(let[e,n]of t)this.set(e,n)}get(t){if(rm(this,Cl).has(t))return rm(this,Cl).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){rm(this,Cl).set(t,e)}};Cl=new WeakMap;var MN=new Set(["lazy","caseSensitive","path","id","index","children"]);function kN(t){return MN.has(t)}var PN=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function jN(t){return PN.has(t)}function UN(t){return t.index===!0}function gu(t,e,n=[],r={},i=!1){return t.map((s,a)=>{let o=[...n,String(a)],l=typeof s.id=="string"?s.id:o.join("-");if(De(s.index!==!0||!s.children,"Cannot specify children on an index route"),De(i||!r[l],`Found a route id collision on id "${l}".  Route id's must be globally unique within Data Router usages`),UN(s)){let c={...s,...e(s),id:l};return r[l]=c,c}else{let c={...s,...e(s),id:l,children:void 0};return r[l]=c,s.children&&(c.children=gu(s.children,e,o,r,i)),c}})}function ts(t,e,n="/"){return nh(t,e,n,!1)}function nh(t,e,n,r){let i=typeof e=="string"?Ls(e):e,s=br(i.pathname||"/",n);if(s==null)return null;let a=MT(t);VN(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=XN(s);o=KN(a[l],c,r)}return o}function LN(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function MT(t,e=[],n=[],r=""){let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(De(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=Xr([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(De(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),MT(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:$N(c,s.index),routesMeta:h})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of kT(s.path))i(s,a,l)}),e}function kT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=kT(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function VN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:QN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var zN=/^:[\w-]+$/,BN=3,FN=2,HN=1,qN=10,GN=-2,x_=t=>t==="*";function $N(t,e){let n=t.split("/"),r=n.length;return n.some(x_)&&(r+=GN),e&&(r+=FN),n.filter(i=>!x_(i)).reduce((i,s)=>i+(zN.test(s)?BN:s===""?HN:qN),r)}function QN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function KN(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=Qh({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=Qh({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:Xr([s,d.pathname]),pathnameBase:eI(Xr([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Xr([s,d.pathnameBase]))}return a}function Qh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=YN(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((c,{paramName:h,isOptional:d},f)=>{if(h==="*"){let E=o[f]||"";a=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const m=o[f];return d&&!m?c[h]=void 0:c[h]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function YN(t,e=!1,n=!0){Gt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function XN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function br(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function WN({basename:t,pathname:e}){return e==="/"?t:Xr([t,e])}function ZN(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ls(t):t;return{pathname:n?n.startsWith("/")?n:JN(n,e):e,search:tI(r),hash:nI(i)}}function JN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function im(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function PT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function n0(t){let e=PT(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function r0(t,e,n,r=!1){let i;typeof t=="string"?i=Ls(t):(i={...t},De(!i.pathname||!i.pathname.includes("?"),im("?","pathname","search",i)),De(!i.pathname||!i.pathname.includes("#"),im("#","pathname","hash",i)),De(!i.search||!i.search.includes("#"),im("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let d=e.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}o=d>=0?e[d]:"/"}let l=ZN(i,o),c=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var Xr=t=>t.join("/").replace(/\/\/+/g,"/"),eI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),tI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,nI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Kh=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Uo(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var jT=["POST","PUT","PATCH","DELETE"],rI=new Set(jT),iI=["GET",...jT],sI=new Set(iI),aI=new Set([301,302,303,307,308]),oI=new Set([307,308]),sm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},lI={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},bl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},uI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,i0=t=>uI.test(t),cI=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),UT="remix-router-transitions",LT=Symbol("ResetLoaderData");function hI(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";De(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=t.hydrationRouteProperties||[],i=t.mapRouteProperties||cI,s={},a=gu(t.routes,i,void 0,s),o,l=t.basename||"/",c=t.dataStrategy||gI,h={unstable_middleware:!1,...t.future},d=null,f=new Set,m=null,E=null,N=null,k=t.hydrationData!=null,_=ts(a,t.history.location,l),x=!1,S=null,M;if(_==null&&!t.patchRoutesOnNavigation){let j=or(404,{pathname:t.history.location.pathname}),{matches:q,route:Y}=U_(a);M=!0,_=q,S={[Y.id]:j}}else if(_&&!t.hydrationData&&$t(_,a,t.history.location.pathname).active&&(_=null),_)if(_.some(j=>j.route.lazy))M=!1;else if(!_.some(j=>j.route.loader))M=!0;else{let j=t.hydrationData?t.hydrationData.loaderData:null,q=t.hydrationData?t.hydrationData.errors:null;if(q){let Y=_.findIndex(te=>q[te.route.id]!==void 0);M=_.slice(0,Y+1).every(te=>!Tp(te.route,j,q))}else M=_.every(Y=>!Tp(Y.route,j,q))}else{M=!1,_=[];let j=$t(null,a,t.history.location.pathname);j.active&&j.matches&&(x=!0,_=j.matches)}let U,T={historyAction:t.history.action,location:t.history.location,matches:_,initialized:M,navigation:sm,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||S,fetchers:new Map,blockers:new Map},A="POP",y=!1,v,w=!1,C=new Map,I=null,R=!1,L=!1,H=new Set,D=new Map,O=0,$=-1,F=new Map,K=new Set,ie=new Map,ee=new Map,B=new Set,Q=new Map,V,se=null;function Ee(){if(d=t.history.listen(({action:j,location:q,delta:Y})=>{if(V){V(),V=void 0;return}Gt(Q.size===0||Y!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let te=Pr({currentLocation:T.location,nextLocation:q,historyAction:j});if(te&&Y!=null){let ne=new Promise(le=>{V=le});t.history.go(Y*-1),Vi(te,{state:"blocked",location:q,proceed(){Vi(te,{state:"proceeding",proceed:void 0,reset:void 0,location:q}),ne.then(()=>t.history.go(Y))},reset(){let le=new Map(T.blockers);le.set(te,bl),ye({blockers:le})}});return}return bt(j,q)}),n){RI(e,C);let j=()=>CI(e,C);e.addEventListener("pagehide",j),I=()=>e.removeEventListener("pagehide",j)}return T.initialized||bt("POP",T.location,{initialHydration:!0}),U}function Ce(){d&&d(),I&&I(),f.clear(),v&&v.abort(),T.fetchers.forEach((j,q)=>Cn(q)),T.blockers.forEach((j,q)=>Li(q))}function pe(j){return f.add(j),()=>f.delete(j)}function ye(j,q={}){j.matches&&(j.matches=j.matches.map(ne=>{let le=s[ne.route.id],fe=ne.route;return fe.element!==le.element||fe.errorElement!==le.errorElement||fe.hydrateFallbackElement!==le.hydrateFallbackElement?{...ne,route:le}:ne})),T={...T,...j};let Y=[],te=[];T.fetchers.forEach((ne,le)=>{ne.state==="idle"&&(B.has(le)?Y.push(le):te.push(le))}),B.forEach(ne=>{!T.fetchers.has(ne)&&!D.has(ne)&&Y.push(ne)}),[...f].forEach(ne=>ne(T,{deletedFetchers:Y,viewTransitionOpts:q.viewTransitionOpts,flushSync:q.flushSync===!0})),Y.forEach(ne=>Cn(ne)),te.forEach(ne=>T.fetchers.delete(ne))}function Le(j,q,{flushSync:Y}={}){var me,he;let te=T.actionData!=null&&T.navigation.formMethod!=null&&kn(T.navigation.formMethod)&&T.navigation.state==="loading"&&((me=j.state)==null?void 0:me._isRedirect)!==!0,ne;q.actionData?Object.keys(q.actionData).length>0?ne=q.actionData:ne=null:te?ne=T.actionData:ne=null;let le=q.loaderData?P_(T.loaderData,q.loaderData,q.matches||[],q.errors):T.loaderData,fe=T.blockers;fe.size>0&&(fe=new Map(fe),fe.forEach((we,We)=>fe.set(We,bl)));let ue=R?!1:En(j,q.matches||T.matches),ce=y===!0||T.navigation.formMethod!=null&&kn(T.navigation.formMethod)&&((he=j.state)==null?void 0:he._isRedirect)!==!0;o&&(a=o,o=void 0),R||A==="POP"||(A==="PUSH"?t.history.push(j,j.state):A==="REPLACE"&&t.history.replace(j,j.state));let ge;if(A==="POP"){let we=C.get(T.location.pathname);we&&we.has(j.pathname)?ge={currentLocation:T.location,nextLocation:j}:C.has(j.pathname)&&(ge={currentLocation:j,nextLocation:T.location})}else if(w){let we=C.get(T.location.pathname);we?we.add(j.pathname):(we=new Set([j.pathname]),C.set(T.location.pathname,we)),ge={currentLocation:T.location,nextLocation:j}}ye({...q,actionData:ne,loaderData:le,historyAction:A,location:j,initialized:!0,navigation:sm,revalidation:"idle",restoreScrollPosition:ue,preventScrollReset:ce,blockers:fe},{viewTransitionOpts:ge,flushSync:Y===!0}),A="POP",y=!1,w=!1,R=!1,L=!1,se==null||se.resolve(),se=null}async function it(j,q){if(typeof j=="number"){t.history.go(j);return}let Y=wp(T.location,T.matches,l,j,q==null?void 0:q.fromRouteId,q==null?void 0:q.relative),{path:te,submission:ne,error:le}=S_(!1,Y,q),fe=T.location,ue=pu(T.location,te,q&&q.state);ue={...ue,...t.history.encodeLocation(ue)};let ce=q&&q.replace!=null?q.replace:void 0,ge="PUSH";ce===!0?ge="REPLACE":ce===!1||ne!=null&&kn(ne.formMethod)&&ne.formAction===T.location.pathname+T.location.search&&(ge="REPLACE");let me=q&&"preventScrollReset"in q?q.preventScrollReset===!0:void 0,he=(q&&q.flushSync)===!0,we=Pr({currentLocation:fe,nextLocation:ue,historyAction:ge});if(we){Vi(we,{state:"blocked",location:ue,proceed(){Vi(we,{state:"proceeding",proceed:void 0,reset:void 0,location:ue}),it(j,q)},reset(){let We=new Map(T.blockers);We.set(we,bl),ye({blockers:We})}});return}await bt(ge,ue,{submission:ne,pendingError:le,preventScrollReset:me,replace:q&&q.replace,enableViewTransition:q&&q.viewTransition,flushSync:he})}function zn(){se||(se=NI()),Ut(),ye({revalidation:"loading"});let j=se.promise;return T.navigation.state==="submitting"?j:T.navigation.state==="idle"?(bt(T.historyAction,T.location,{startUninterruptedRevalidation:!0}),j):(bt(A||T.historyAction,T.navigation.location,{overrideNavigation:T.navigation,enableViewTransition:w===!0}),j)}async function bt(j,q,Y){v&&v.abort(),v=null,A=j,R=(Y&&Y.startUninterruptedRevalidation)===!0,Nn(T.location,T.matches),y=(Y&&Y.preventScrollReset)===!0,w=(Y&&Y.enableViewTransition)===!0;let te=o||a,ne=Y&&Y.overrideNavigation,le=Y!=null&&Y.initialHydration&&T.matches&&T.matches.length>0&&!x?T.matches:ts(te,q,l),fe=(Y&&Y.flushSync)===!0;if(le&&T.initialized&&!L&&wI(T.location,q)&&!(Y&&Y.submission&&kn(Y.submission.formMethod))){Le(q,{matches:le},{flushSync:fe});return}let ue=$t(le,te,q.pathname);if(ue.active&&ue.matches&&(le=ue.matches),!le){let{error:dt,notFoundMatches:lt,route:Ze}=oi(q.pathname);Le(q,{matches:lt,loaderData:{},errors:{[Ze.id]:dt}},{flushSync:fe});return}v=new AbortController;let ce=Ga(t.history,q,v.signal,Y&&Y.submission),ge=new A_(t.unstable_getContext?await t.unstable_getContext():void 0),me;if(Y&&Y.pendingError)me=[Ys(le).route.id,{type:"error",error:Y.pendingError}];else if(Y&&Y.submission&&kn(Y.submission.formMethod)){let dt=await Xe(ce,q,Y.submission,le,ge,ue.active,Y&&Y.initialHydration===!0,{replace:Y.replace,flushSync:fe});if(dt.shortCircuited)return;if(dt.pendingActionResult){let[lt,Ze]=dt.pendingActionResult;if(Kn(Ze)&&Uo(Ze.error)&&Ze.error.status===404){v=null,Le(q,{matches:dt.matches,loaderData:{},errors:{[lt]:Ze.error}});return}}le=dt.matches||le,me=dt.pendingActionResult,ne=am(q,Y.submission),fe=!1,ue.active=!1,ce=Ga(t.history,ce.url,ce.signal)}let{shortCircuited:he,matches:we,loaderData:We,errors:Ot}=await Nt(ce,q,le,ge,ue.active,ne,Y&&Y.submission,Y&&Y.fetcherSubmission,Y&&Y.replace,Y&&Y.initialHydration===!0,fe,me);he||(v=null,Le(q,{matches:we||le,...j_(me),loaderData:We,errors:Ot}))}async function Xe(j,q,Y,te,ne,le,fe,ue={}){Ut();let ce=xI(q,Y);if(ye({navigation:ce},{flushSync:ue.flushSync===!0}),le){let he=await Fn(te,q.pathname,j.signal);if(he.type==="aborted")return{shortCircuited:!0};if(he.type==="error"){let we=Ys(he.partialMatches).route.id;return{matches:he.partialMatches,pendingActionResult:[we,{type:"error",error:he.error}]}}else if(he.matches)te=he.matches;else{let{notFoundMatches:we,error:We,route:Ot}=oi(q.pathname);return{matches:we,pendingActionResult:[Ot.id,{type:"error",error:We}]}}}let ge,me=rh(te,q);if(!me.route.action&&!me.route.lazy)ge={type:"error",error:or(405,{method:j.method,pathname:q.pathname,routeId:me.route.id})};else{let he=_o(i,s,j,te,me,fe?[]:r,ne),we=await He(j,he,ne,null);if(ge=we[me.route.id],!ge){for(let We of te)if(we[We.route.id]){ge=we[We.route.id];break}}if(j.signal.aborted)return{shortCircuited:!0}}if(Xs(ge)){let he;return ue&&ue.replace!=null?he=ue.replace:he=O_(ge.response.headers.get("Location"),new URL(j.url),l)===T.location.pathname+T.location.search,await yt(j,ge,!0,{submission:Y,replace:he}),{shortCircuited:!0}}if(Kn(ge)){let he=Ys(te,me.route.id);return(ue&&ue.replace)!==!0&&(A="PUSH"),{matches:te,pendingActionResult:[he.route.id,ge,me.route.id]}}return{matches:te,pendingActionResult:[me.route.id,ge]}}async function Nt(j,q,Y,te,ne,le,fe,ue,ce,ge,me,he){let we=le||am(q,fe),We=fe||ue||V_(we),Ot=!R&&!ge;if(ne){if(Ot){let Vt=$e(he);ye({navigation:we,...Vt!==void 0?{actionData:Vt}:{}},{flushSync:me})}let Oe=await Fn(Y,q.pathname,j.signal);if(Oe.type==="aborted")return{shortCircuited:!0};if(Oe.type==="error"){let Vt=Ys(Oe.partialMatches).route.id;return{matches:Oe.partialMatches,loaderData:{},errors:{[Vt]:Oe.error}}}else if(Oe.matches)Y=Oe.matches;else{let{error:Vt,notFoundMatches:Ma,route:Bi}=oi(q.pathname);return{matches:Ma,loaderData:{},errors:{[Bi.id]:Vt}}}}let dt=o||a,{dsMatches:lt,revalidatingFetchers:Ze}=R_(j,te,i,s,t.history,T,Y,We,q,ge?[]:r,ge===!0,L,H,B,ie,K,dt,l,t.patchRoutesOnNavigation!=null,he);if($=++O,!t.dataStrategy&&!lt.some(Oe=>Oe.shouldLoad)&&Ze.length===0){let Oe=bn();return Le(q,{matches:Y,loaderData:{},errors:he&&Kn(he[1])?{[he[0]]:he[1].error}:null,...j_(he),...Oe?{fetchers:new Map(T.fetchers)}:{}},{flushSync:me}),{shortCircuited:!0}}if(Ot){let Oe={};if(!ne){Oe.navigation=we;let Vt=$e(he);Vt!==void 0&&(Oe.actionData=Vt)}Ze.length>0&&(Oe.fetchers=Qe(Ze)),ye(Oe,{flushSync:me})}Ze.forEach(Oe=>{wt(Oe.key),Oe.controller&&D.set(Oe.key,Oe.controller)});let Er=()=>Ze.forEach(Oe=>wt(Oe.key));v&&v.signal.addEventListener("abort",Er);let{loaderResults:ui,fetcherResults:wr}=await Ve(lt,Ze,j,te);if(j.signal.aborted)return{shortCircuited:!0};v&&v.signal.removeEventListener("abort",Er),Ze.forEach(Oe=>D.delete(Oe.key));let Hn=Mc(ui);if(Hn)return await yt(j,Hn.result,!0,{replace:ce}),{shortCircuited:!0};if(Hn=Mc(wr),Hn)return K.add(Hn.key),await yt(j,Hn.result,!0,{replace:ce}),{shortCircuited:!0};let{loaderData:rl,errors:Lr}=k_(T,Y,ui,he,Ze,wr);ge&&T.errors&&(Lr={...T.errors,...Lr});let Vr=bn(),zi=cn($),zr=Vr||zi||Ze.length>0;return{matches:Y,loaderData:rl,errors:Lr,...zr?{fetchers:new Map(T.fetchers)}:{}}}function $e(j){if(j&&!Kn(j[1]))return{[j[0]]:j[1].data};if(T.actionData)return Object.keys(T.actionData).length===0?null:T.actionData}function Qe(j){return j.forEach(q=>{let Y=T.fetchers.get(q.key),te=El(void 0,Y?Y.data:void 0);T.fetchers.set(q.key,te)}),new Map(T.fetchers)}async function Et(j,q,Y,te){wt(j);let ne=(te&&te.flushSync)===!0,le=o||a,fe=wp(T.location,T.matches,l,Y,q,te==null?void 0:te.relative),ue=ts(le,fe,l),ce=$t(ue,le,fe);if(ce.active&&ce.matches&&(ue=ce.matches),!ue){qe(j,q,or(404,{pathname:fe}),{flushSync:ne});return}let{path:ge,submission:me,error:he}=S_(!0,fe,te);if(he){qe(j,q,he,{flushSync:ne});return}let we=new A_(t.unstable_getContext?await t.unstable_getContext():void 0),We=(te&&te.preventScrollReset)===!0;if(me&&kn(me.formMethod)){await It(j,q,ge,ue,we,ce.active,ne,We,me);return}ie.set(j,{routeId:q,path:ge}),await ot(j,q,ge,ue,we,ce.active,ne,We,me)}async function It(j,q,Y,te,ne,le,fe,ue,ce){Ut(),ie.delete(j);let ge=T.fetchers.get(j);Pe(j,SI(ce,ge),{flushSync:fe});let me=new AbortController,he=Ga(t.history,Y,me.signal,ce);if(le){let Tt=await Fn(te,new URL(he.url).pathname,he.signal,j);if(Tt.type==="aborted")return;if(Tt.type==="error"){qe(j,q,Tt.error,{flushSync:fe});return}else if(Tt.matches)te=Tt.matches;else{qe(j,q,or(404,{pathname:Y}),{flushSync:fe});return}}let we=rh(te,Y);if(!we.route.action&&!we.route.lazy){let Tt=or(405,{method:ce.formMethod,pathname:Y,routeId:q});qe(j,q,Tt,{flushSync:fe});return}D.set(j,me);let We=O,Ot=_o(i,s,he,te,we,r,ne),lt=(await He(he,Ot,ne,j))[we.route.id];if(he.signal.aborted){D.get(j)===me&&D.delete(j);return}if(B.has(j)){if(Xs(lt)||Kn(lt)){Pe(j,Ki(void 0));return}}else{if(Xs(lt))if(D.delete(j),$>We){Pe(j,Ki(void 0));return}else return K.add(j),Pe(j,El(ce)),yt(he,lt,!1,{fetcherSubmission:ce,preventScrollReset:ue});if(Kn(lt)){qe(j,q,lt.error);return}}let Ze=T.navigation.location||T.location,Er=Ga(t.history,Ze,me.signal),ui=o||a,wr=T.navigation.state!=="idle"?ts(ui,T.navigation.location,l):T.matches;De(wr,"Didn't find any matches after fetcher action");let Hn=++O;F.set(j,Hn);let rl=El(ce,lt.data);T.fetchers.set(j,rl);let{dsMatches:Lr,revalidatingFetchers:Vr}=R_(Er,ne,i,s,t.history,T,wr,ce,Ze,r,!1,L,H,B,ie,K,ui,l,t.patchRoutesOnNavigation!=null,[we.route.id,lt]);Vr.filter(Tt=>Tt.key!==j).forEach(Tt=>{let Bs=Tt.key,ka=T.fetchers.get(Bs),il=El(void 0,ka?ka.data:void 0);T.fetchers.set(Bs,il),wt(Bs),Tt.controller&&D.set(Bs,Tt.controller)}),ye({fetchers:new Map(T.fetchers)});let zi=()=>Vr.forEach(Tt=>wt(Tt.key));me.signal.addEventListener("abort",zi);let{loaderResults:zr,fetcherResults:Oe}=await Ve(Lr,Vr,Er,ne);if(me.signal.aborted)return;if(me.signal.removeEventListener("abort",zi),F.delete(j),D.delete(j),Vr.forEach(Tt=>D.delete(Tt.key)),T.fetchers.has(j)){let Tt=Ki(lt.data);T.fetchers.set(j,Tt)}let Vt=Mc(zr);if(Vt)return yt(Er,Vt.result,!1,{preventScrollReset:ue});if(Vt=Mc(Oe),Vt)return K.add(Vt.key),yt(Er,Vt.result,!1,{preventScrollReset:ue});let{loaderData:Ma,errors:Bi}=k_(T,wr,zr,void 0,Vr,Oe);cn(Hn),T.navigation.state==="loading"&&Hn>$?(De(A,"Expected pending action"),v&&v.abort(),Le(T.navigation.location,{matches:wr,loaderData:Ma,errors:Bi,fetchers:new Map(T.fetchers)})):(ye({errors:Bi,loaderData:P_(T.loaderData,Ma,wr,Bi),fetchers:new Map(T.fetchers)}),L=!1)}async function ot(j,q,Y,te,ne,le,fe,ue,ce){let ge=T.fetchers.get(j);Pe(j,El(ce,ge?ge.data:void 0),{flushSync:fe});let me=new AbortController,he=Ga(t.history,Y,me.signal);if(le){let Ze=await Fn(te,new URL(he.url).pathname,he.signal,j);if(Ze.type==="aborted")return;if(Ze.type==="error"){qe(j,q,Ze.error,{flushSync:fe});return}else if(Ze.matches)te=Ze.matches;else{qe(j,q,or(404,{pathname:Y}),{flushSync:fe});return}}let we=rh(te,Y);D.set(j,me);let We=O,Ot=_o(i,s,he,te,we,r,ne),lt=(await He(he,Ot,ne,j))[we.route.id];if(D.get(j)===me&&D.delete(j),!he.signal.aborted){if(B.has(j)){Pe(j,Ki(void 0));return}if(Xs(lt))if($>We){Pe(j,Ki(void 0));return}else{K.add(j),await yt(he,lt,!1,{preventScrollReset:ue});return}if(Kn(lt)){qe(j,q,lt.error);return}Pe(j,Ki(lt.data))}}async function yt(j,q,Y,{submission:te,fetcherSubmission:ne,preventScrollReset:le,replace:fe}={}){q.response.headers.has("X-Remix-Revalidate")&&(L=!0);let ue=q.response.headers.get("Location");De(ue,"Expected a Location header on the redirect Response"),ue=O_(ue,new URL(j.url),l);let ce=pu(T.location,ue,{_isRedirect:!0});if(n){let Ot=!1;if(q.response.headers.has("X-Remix-Reload-Document"))Ot=!0;else if(i0(ue)){const dt=OT(ue,!0);Ot=dt.origin!==e.location.origin||br(dt.pathname,l)==null}if(Ot){fe?e.location.replace(ue):e.location.assign(ue);return}}v=null;let ge=fe===!0||q.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:me,formAction:he,formEncType:we}=T.navigation;!te&&!ne&&me&&he&&we&&(te=V_(T.navigation));let We=te||ne;if(oI.has(q.response.status)&&We&&kn(We.formMethod))await bt(ge,ce,{submission:{...We,formAction:ue},preventScrollReset:le||y,enableViewTransition:Y?w:void 0});else{let Ot=am(ce,te);await bt(ge,ce,{overrideNavigation:Ot,fetcherSubmission:ne,preventScrollReset:le||y,enableViewTransition:Y?w:void 0})}}async function He(j,q,Y,te){let ne,le={};try{ne=await yI(c,j,q,te,Y,!1)}catch(fe){return q.filter(ue=>ue.shouldLoad).forEach(ue=>{le[ue.route.id]={type:"error",error:fe}}),le}if(j.signal.aborted)return le;for(let[fe,ue]of Object.entries(ne))if(TI(ue)){let ce=ue.result;le[fe]={type:"redirect",response:bI(ce,j,fe,q,l)}}else le[fe]=await _I(ue);return le}async function Ve(j,q,Y,te){let ne=He(Y,j,te,null),le=Promise.all(q.map(async ce=>{if(ce.matches&&ce.match&&ce.request&&ce.controller){let me=(await He(ce.request,ce.matches,te,ce.key))[ce.match.route.id];return{[ce.key]:me}}else return Promise.resolve({[ce.key]:{type:"error",error:or(404,{pathname:ce.path})}})})),fe=await ne,ue=(await le).reduce((ce,ge)=>Object.assign(ce,ge),{});return{loaderResults:fe,fetcherResults:ue}}function Ut(){L=!0,ie.forEach((j,q)=>{D.has(q)&&H.add(q),wt(q)})}function Pe(j,q,Y={}){T.fetchers.set(j,q),ye({fetchers:new Map(T.fetchers)},{flushSync:(Y&&Y.flushSync)===!0})}function qe(j,q,Y,te={}){let ne=Ys(T.matches,q);Cn(j),ye({errors:{[ne.route.id]:Y},fetchers:new Map(T.fetchers)},{flushSync:(te&&te.flushSync)===!0})}function ft(j){return ee.set(j,(ee.get(j)||0)+1),B.has(j)&&B.delete(j),T.fetchers.get(j)||lI}function Cn(j){let q=T.fetchers.get(j);D.has(j)&&!(q&&q.state==="loading"&&F.has(j))&&wt(j),ie.delete(j),F.delete(j),K.delete(j),B.delete(j),H.delete(j),T.fetchers.delete(j)}function Lt(j){let q=(ee.get(j)||0)-1;q<=0?(ee.delete(j),B.add(j)):ee.set(j,q),ye({fetchers:new Map(T.fetchers)})}function wt(j){let q=D.get(j);q&&(q.abort(),D.delete(j))}function Dt(j){for(let q of j){let Y=ft(q),te=Ki(Y.data);T.fetchers.set(q,te)}}function bn(){let j=[],q=!1;for(let Y of K){let te=T.fetchers.get(Y);De(te,`Expected fetcher: ${Y}`),te.state==="loading"&&(K.delete(Y),j.push(Y),q=!0)}return Dt(j),q}function cn(j){let q=[];for(let[Y,te]of F)if(te<j){let ne=T.fetchers.get(Y);De(ne,`Expected fetcher: ${Y}`),ne.state==="loading"&&(wt(Y),F.delete(Y),q.push(Y))}return Dt(q),q.length>0}function Bn(j,q){let Y=T.blockers.get(j)||bl;return Q.get(j)!==q&&Q.set(j,q),Y}function Li(j){T.blockers.delete(j),Q.delete(j)}function Vi(j,q){let Y=T.blockers.get(j)||bl;De(Y.state==="unblocked"&&q.state==="blocked"||Y.state==="blocked"&&q.state==="blocked"||Y.state==="blocked"&&q.state==="proceeding"||Y.state==="blocked"&&q.state==="unblocked"||Y.state==="proceeding"&&q.state==="unblocked",`Invalid blocker state transition: ${Y.state} -> ${q.state}`);let te=new Map(T.blockers);te.set(j,q),ye({blockers:te})}function Pr({currentLocation:j,nextLocation:q,historyAction:Y}){if(Q.size===0)return;Q.size>1&&Gt(!1,"A router only supports one blocker at a time");let te=Array.from(Q.entries()),[ne,le]=te[te.length-1],fe=T.blockers.get(ne);if(!(fe&&fe.state==="proceeding")&&le({currentLocation:j,nextLocation:q,historyAction:Y}))return ne}function oi(j){let q=or(404,{pathname:j}),Y=o||a,{matches:te,route:ne}=U_(Y);return{notFoundMatches:te,route:ne,error:q}}function jr(j,q,Y){if(m=j,N=q,E=Y||null,!k&&T.navigation===sm){k=!0;let te=En(T.location,T.matches);te!=null&&ye({restoreScrollPosition:te})}return()=>{m=null,N=null,E=null}}function Ur(j,q){return E&&E(j,q.map(te=>LN(te,T.loaderData)))||j.key}function Nn(j,q){if(m&&N){let Y=Ur(j,q);m[Y]=N()}}function En(j,q){if(m){let Y=Ur(j,q),te=m[Y];if(typeof te=="number")return te}return null}function $t(j,q,Y){if(t.patchRoutesOnNavigation)if(j){if(Object.keys(j[0].params).length>0)return{active:!0,matches:nh(q,Y,l,!0)}}else return{active:!0,matches:nh(q,Y,l,!0)||[]};return{active:!1,matches:null}}async function Fn(j,q,Y,te){if(!t.patchRoutesOnNavigation)return{type:"success",matches:j};let ne=j;for(;;){let le=o==null,fe=o||a,ue=s;try{await t.patchRoutesOnNavigation({signal:Y,path:q,matches:ne,fetcherKey:te,patch:(me,he)=>{Y.aborted||C_(me,he,fe,ue,i,!1)}})}catch(me){return{type:"error",error:me,partialMatches:ne}}finally{le&&!Y.aborted&&(a=[...a])}if(Y.aborted)return{type:"aborted"};let ce=ts(fe,q,l);if(ce)return{type:"success",matches:ce};let ge=nh(fe,q,l,!0);if(!ge||ne.length===ge.length&&ne.every((me,he)=>me.route.id===ge[he].route.id))return{type:"success",matches:null};ne=ge}}function li(j){s={},o=gu(j,i,void 0,s)}function sr(j,q,Y=!1){let te=o==null;C_(j,q,o||a,s,i,Y),te&&(a=[...a],ye({}))}return U={get basename(){return l},get future(){return h},get state(){return T},get routes(){return a},get window(){return e},initialize:Ee,subscribe:pe,enableScrollRestoration:jr,navigate:it,fetch:Et,revalidate:zn,createHref:j=>t.history.createHref(j),encodeLocation:j=>t.history.encodeLocation(j),getFetcher:ft,deleteFetcher:Lt,dispose:Ce,getBlocker:Bn,deleteBlocker:Li,patchRoutes:sr,_internalFetchControllers:D,_internalSetRoutes:li,_internalSetStateDoNotUseOrYouWillBreakYourApp(j){ye(j)}},U}function fI(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function wp(t,e,n,r,i,s){let a,o;if(i){a=[];for(let c of e)if(a.push(c),c.route.id===i){o=c;break}}else a=e,o=e[e.length-1];let l=r0(r||".",n0(a),br(t.pathname,n)||t.pathname,s==="path");if(r==null&&(l.search=t.search,l.hash=t.hash),(r==null||r===""||r===".")&&o){let c=s0(l.search);if(o.route.index&&!c)l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index";else if(!o.route.index&&c){let h=new URLSearchParams(l.search),d=h.getAll("index");h.delete("index"),d.filter(m=>m).forEach(m=>h.append("index",m));let f=h.toString();l.search=f?`?${f}`:""}}return n!=="/"&&(l.pathname=WN({basename:n,pathname:l.pathname})),Ss(l)}function S_(t,e,n){if(!n||!fI(n))return{path:e};if(n.formMethod&&!AI(n.formMethod))return{path:e,error:or(405,{method:n.formMethod})};let r=()=>({path:e,error:or(400,{type:"invalid-body"})}),s=(n.formMethod||"get").toUpperCase(),a=qT(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!kn(s))return r();let d=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((f,[m,E])=>`${f}${m}=${E}
`,""):String(n.body);return{path:e,submission:{formMethod:s,formAction:a,formEncType:n.formEncType,formData:void 0,json:void 0,text:d}}}else if(n.formEncType==="application/json"){if(!kn(s))return r();try{let d=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:s,formAction:a,formEncType:n.formEncType,formData:void 0,json:d,text:void 0}}}catch{return r()}}}De(typeof FormData=="function","FormData is not available in this environment");let o,l;if(n.formData)o=xp(n.formData),l=n.formData;else if(n.body instanceof FormData)o=xp(n.body),l=n.body;else if(n.body instanceof URLSearchParams)o=n.body,l=M_(o);else if(n.body==null)o=new URLSearchParams,l=new FormData;else try{o=new URLSearchParams(n.body),l=M_(o)}catch{return r()}let c={formMethod:s,formAction:a,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(kn(c.formMethod))return{path:e,submission:c};let h=Ls(e);return t&&h.search&&s0(h.search)&&o.append("index",""),h.search=`?${o}`,{path:Ss(h),submission:c}}function R_(t,e,n,r,i,s,a,o,l,c,h,d,f,m,E,N,k,_,x,S){var R;let M=S?Kn(S[1])?S[1].error:S[1].data:void 0,U=i.createURL(s.location),T=i.createURL(l),A;if(h&&s.errors){let L=Object.keys(s.errors)[0];A=a.findIndex(H=>H.route.id===L)}else if(S&&Kn(S[1])){let L=S[0];A=a.findIndex(H=>H.route.id===L)-1}let y=S?S[1].statusCode:void 0,v=y&&y>=400,w={currentUrl:U,currentParams:((R=s.matches[0])==null?void 0:R.params)||{},nextUrl:T,nextParams:a[0].params,...o,actionResult:M,actionStatus:y},C=a.map((L,H)=>{let{route:D}=L,O=null;if(A!=null&&H>A?O=!1:D.lazy?O=!0:D.loader==null?O=!1:h?O=Tp(D,s.loaderData,s.errors):dI(s.loaderData,s.matches[H],L)&&(O=!0),O!==null)return Ap(n,r,t,L,c,e,O);let $=v?!1:d||U.pathname+U.search===T.pathname+T.search||U.search!==T.search||mI(s.matches[H],L),F={...w,defaultShouldRevalidate:$},K=Yh(L,F);return Ap(n,r,t,L,c,e,K,F)}),I=[];return E.forEach((L,H)=>{if(h||!a.some(B=>B.route.id===L.routeId)||m.has(H))return;let D=s.fetchers.get(H),O=D&&D.state!=="idle"&&D.data===void 0,$=ts(k,L.path,_);if(!$){if(x&&O)return;I.push({key:H,routeId:L.routeId,path:L.path,matches:null,match:null,request:null,controller:null});return}if(N.has(H))return;let F=rh($,L.path),K=new AbortController,ie=Ga(i,L.path,K.signal),ee=null;if(f.has(H))f.delete(H),ee=_o(n,r,ie,$,F,c,e);else if(O)d&&(ee=_o(n,r,ie,$,F,c,e));else{let B={...w,defaultShouldRevalidate:v?!1:d};Yh(F,B)&&(ee=_o(n,r,ie,$,F,c,e,B))}ee&&I.push({key:H,routeId:L.routeId,path:L.path,matches:ee,match:F,request:ie,controller:K})}),{dsMatches:C,revalidatingFetchers:I}}function Tp(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&t.id in e,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function dI(t,e,n){let r=!e||n.route.id!==e.route.id,i=!t.hasOwnProperty(n.route.id);return r||i}function mI(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Yh(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function C_(t,e,n,r,i,s){let a;if(t){let c=r[t];De(c,`No route found to patch children into: routeId = ${t}`),c.children||(c.children=[]),a=c.children}else a=n;let o=[],l=[];if(e.forEach(c=>{let h=a.find(d=>VT(c,d));h?l.push({existingRoute:h,newRoute:c}):o.push(c)}),o.length>0){let c=gu(o,i,[t||"_","patch",String((a==null?void 0:a.length)||"0")],r);a.push(...c)}if(s&&l.length>0)for(let c=0;c<l.length;c++){let{existingRoute:h,newRoute:d}=l[c],f=h,[m]=gu([d],i,[],{},!0);Object.assign(f,{element:m.element?m.element:f.element,errorElement:m.errorElement?m.errorElement:f.errorElement,hydrateFallbackElement:m.hydrateFallbackElement?m.hydrateFallbackElement:f.hydrateFallbackElement})}}function VT(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>VT(n,s))}):!1}var N_=new WeakMap,zT=({key:t,route:e,manifest:n,mapRouteProperties:r})=>{let i=n[e.id];if(De(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let s=i.lazy[t];if(!s)return;let a=N_.get(i);a||(a={},N_.set(i,a));let o=a[t];if(o)return o;let l=(async()=>{let c=kN(t),d=i[t]!==void 0&&t!=="hasErrorBoundary";if(c)Gt(!c,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),a[t]=Promise.resolve();else if(d)Gt(!1,`Route "${i.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let f=await s();f!=null&&(Object.assign(i,{[t]:f}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[t]=void 0,Object.values(i.lazy).every(f=>f===void 0)&&(i.lazy=void 0))})();return a[t]=l,l},I_=new WeakMap;function pI(t,e,n,r,i){let s=n[t.id];if(De(s,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let h=I_.get(s);if(h)return{lazyRoutePromise:h,lazyHandlerPromise:h};let d=(async()=>{De(typeof t.lazy=="function","No lazy route function found");let f=await t.lazy(),m={};for(let E in f){let N=f[E];if(N===void 0)continue;let k=jN(E),x=s[E]!==void 0&&E!=="hasErrorBoundary";k?Gt(!k,"Route property "+E+" is not a supported property to be returned from a lazy route function. This property will be ignored."):x?Gt(!x,`Route "${s.id}" has a static property "${E}" defined but its lazy function is also returning a value for this property. The lazy route property "${E}" will be ignored.`):m[E]=N}Object.assign(s,m),Object.assign(s,{...r(s),lazy:void 0})})();return I_.set(s,d),d.catch(()=>{}),{lazyRoutePromise:d,lazyHandlerPromise:d}}let a=Object.keys(t.lazy),o=[],l;for(let h of a){if(i&&i.includes(h))continue;let d=zT({key:h,route:t,manifest:n,mapRouteProperties:r});d&&(o.push(d),h===e&&(l=d))}let c=o.length>0?Promise.all(o).then(()=>{}):void 0;return c==null||c.catch(()=>{}),l==null||l.catch(()=>{}),{lazyRoutePromise:c,lazyHandlerPromise:l}}async function D_(t){let e=t.matches.filter(i=>i.shouldLoad),n={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,s)=>{n[e[s].route.id]=i}),n}async function gI(t){return t.matches.some(e=>e.route.unstable_middleware)?BT(t,!1,()=>D_(t),(e,n)=>({[n]:{type:"error",result:e}})):D_(t)}async function BT(t,e,n,r){let{matches:i,request:s,params:a,context:o}=t,l={handlerResult:void 0};try{let c=i.flatMap(d=>d.route.unstable_middleware?d.route.unstable_middleware.map(f=>[d.route.id,f]):[]),h=await FT({request:s,params:a,context:o},c,e,l,n);return e?h:l.handlerResult}catch(c){if(!l.middlewareError)throw c;let h=await r(l.middlewareError.error,l.middlewareError.routeId);return l.handlerResult?Object.assign(l.handlerResult,h):h}}async function FT(t,e,n,r,i,s=0){let{request:a}=t;if(a.signal.aborted)throw a.signal.reason?a.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${a.method} ${a.url}`);let o=e[s];if(!o)return r.handlerResult=await i(),r.handlerResult;let[l,c]=o,h=!1,d,f=async()=>{if(h)throw new Error("You may only call `next()` once per middleware");h=!0,await FT(t,e,n,r,i,s+1)};try{let m=await c({request:t.request,params:t.params,context:t.context},f);return h?m===void 0?d:m:f()}catch(m){throw r.middlewareError?r.middlewareError.error!==m&&(r.middlewareError={routeId:l,error:m}):r.middlewareError={routeId:l,error:m},m}}function HT(t,e,n,r,i){let s=zT({key:"unstable_middleware",route:r.route,manifest:e,mapRouteProperties:t}),a=pI(r.route,kn(n.method)?"action":"loader",e,t,i);return{middleware:s,route:a.lazyRoutePromise,handler:a.lazyHandlerPromise}}function Ap(t,e,n,r,i,s,a,o=null){let l=!1,c=HT(t,e,n,r,i);return{...r,_lazyPromises:c,shouldLoad:a,unstable_shouldRevalidateArgs:o,unstable_shouldCallHandler(h){return l=!0,o?typeof h=="boolean"?Yh(r,{...o,defaultShouldRevalidate:h}):Yh(r,o):a},resolve(h){return l||a||h&&!kn(n.method)&&(r.route.lazy||r.route.loader)?vI({request:n,match:r,lazyHandlerPromise:c==null?void 0:c.handler,lazyRoutePromise:c==null?void 0:c.route,handlerOverride:h,scopedContext:s}):Promise.resolve({type:"data",result:void 0})}}}function _o(t,e,n,r,i,s,a,o=null){return r.map(l=>l.route.id!==i.route.id?{...l,shouldLoad:!1,unstable_shouldRevalidateArgs:o,unstable_shouldCallHandler:()=>!1,_lazyPromises:HT(t,e,n,l,s),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Ap(t,e,n,l,s,a,!0,o))}async function yI(t,e,n,r,i,s){n.some(c=>{var h;return(h=c._lazyPromises)==null?void 0:h.middleware})&&await Promise.all(n.map(c=>{var h;return(h=c._lazyPromises)==null?void 0:h.middleware}));let a={request:e,params:n[0].params,context:i,matches:n},l=await t({...a,fetcherKey:r,unstable_runClientMiddleware:c=>{let h=a;return BT(h,!1,()=>c({...h,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(d,f)=>({[f]:{type:"error",result:d}}))}});try{await Promise.all(n.flatMap(c=>{var h,d;return[(h=c._lazyPromises)==null?void 0:h.handler,(d=c._lazyPromises)==null?void 0:d.route]}))}catch{}return l}async function vI({request:t,match:e,lazyHandlerPromise:n,lazyRoutePromise:r,handlerOverride:i,scopedContext:s}){let a,o,l=kn(t.method),c=l?"action":"loader",h=d=>{let f,m=new Promise((k,_)=>f=_);o=()=>f(),t.signal.addEventListener("abort",o);let E=k=>typeof d!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${c}" [routeId: ${e.route.id}]`)):d({request:t,params:e.params,context:s},...k!==void 0?[k]:[]),N=(async()=>{try{return{type:"data",result:await(i?i(_=>E(_)):E())}}catch(k){return{type:"error",result:k}}})();return Promise.race([N,m])};try{let d=l?e.route.action:e.route.loader;if(n||r)if(d){let f,[m]=await Promise.all([h(d).catch(E=>{f=E}),n,r]);if(f!==void 0)throw f;a=m}else{await n;let f=l?e.route.action:e.route.loader;if(f)[a]=await Promise.all([h(f),r]);else if(c==="action"){let m=new URL(t.url),E=m.pathname+m.search;throw or(405,{method:t.method,pathname:E,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(d)a=await h(d);else{let f=new URL(t.url),m=f.pathname+f.search;throw or(404,{pathname:m})}}catch(d){return{type:"error",result:d}}finally{o&&t.signal.removeEventListener("abort",o)}return a}async function _I(t){var r,i,s,a,o,l;let{result:e,type:n}=t;if(GT(e)){let c;try{let h=e.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?e.body==null?c=null:c=await e.json():c=await e.text()}catch(h){return{type:"error",error:h}}return n==="error"?{type:"error",error:new Kh(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:"data",data:c,statusCode:e.status,headers:e.headers}}return n==="error"?L_(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new Kh(((s=e.init)==null?void 0:s.status)||500,void 0,e.data),statusCode:Uo(e)?e.status:void 0,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Uo(e)?e.status:void 0}:L_(e)?{type:"data",data:e.data,statusCode:(o=e.init)==null?void 0:o.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function bI(t,e,n,r,i){let s=t.headers.get("Location");if(De(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!i0(s)){let a=r.slice(0,r.findIndex(o=>o.route.id===n)+1);s=wp(new URL(e.url),a,i,s),t.headers.set("Location",s)}return t}function O_(t,e,n){if(i0(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=br(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Ga(t,e,n,r){let i=t.createURL(qT(e)).toString(),s={signal:n};if(r&&kn(r.formMethod)){let{formMethod:a,formEncType:o}=r;s.method=a.toUpperCase(),o==="application/json"?(s.headers=new Headers({"Content-Type":o}),s.body=JSON.stringify(r.json)):o==="text/plain"?s.body=r.text:o==="application/x-www-form-urlencoded"&&r.formData?s.body=xp(r.formData):s.body=r.formData}return new Request(i,s)}function xp(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function M_(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function EI(t,e,n,r=!1,i=!1){let s={},a=null,o,l=!1,c={},h=n&&Kn(n[1])?n[1].error:void 0;return t.forEach(d=>{if(!(d.route.id in e))return;let f=d.route.id,m=e[f];if(De(!Xs(m),"Cannot handle redirect results in processLoaderData"),Kn(m)){let E=m.error;if(h!==void 0&&(E=h,h=void 0),a=a||{},i)a[f]=E;else{let N=Ys(t,f);a[N.route.id]==null&&(a[N.route.id]=E)}r||(s[f]=LT),l||(l=!0,o=Uo(m.error)?m.error.status:500),m.headers&&(c[f]=m.headers)}else s[f]=m.data,m.statusCode&&m.statusCode!==200&&!l&&(o=m.statusCode),m.headers&&(c[f]=m.headers)}),h!==void 0&&n&&(a={[n[0]]:h},n[2]&&(s[n[2]]=void 0)),{loaderData:s,errors:a,statusCode:o||200,loaderHeaders:c}}function k_(t,e,n,r,i,s){let{loaderData:a,errors:o}=EI(e,n,r);return i.filter(l=>!l.matches||l.matches.some(c=>c.shouldLoad)).forEach(l=>{let{key:c,match:h,controller:d}=l,f=s[c];if(De(f,"Did not find corresponding fetcher result"),!(d&&d.signal.aborted))if(Kn(f)){let m=Ys(t.matches,h==null?void 0:h.route.id);o&&o[m.route.id]||(o={...o,[m.route.id]:f.error}),t.fetchers.delete(c)}else if(Xs(f))De(!1,"Unhandled fetcher revalidation redirect");else{let m=Ki(f.data);t.fetchers.set(c,m)}}),{loaderData:a,errors:o}}function P_(t,e,n,r){let i=Object.entries(e).filter(([,s])=>s!==LT).reduce((s,[a,o])=>(s[a]=o,s),{});for(let s of n){let a=s.route.id;if(!e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&s.route.loader&&(i[a]=t[a]),r&&r.hasOwnProperty(a))break}return i}function j_(t){return t?Kn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ys(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function U_(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function or(t,{pathname:e,routeId:n,method:r,type:i,message:s}={}){let a="Unknown Server Error",o="Unknown @remix-run/router error";return t===400?(a="Bad Request",r&&e&&n?o=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:i==="invalid-body"&&(o="Unable to encode submission body")):t===403?(a="Forbidden",o=`Route "${n}" does not match URL "${e}"`):t===404?(a="Not Found",o=`No route matches URL "${e}"`):t===405&&(a="Method Not Allowed",r&&e&&n?o=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(o=`Invalid request method "${r.toUpperCase()}"`)),new Kh(t||500,a,new Error(o),!0)}function Mc(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(Xs(i))return{key:r,result:i}}}function qT(t){let e=typeof t=="string"?Ls(t):t;return Ss({...e,hash:""})}function wI(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function TI(t){return GT(t.result)&&aI.has(t.result.status)}function Kn(t){return t.type==="error"}function Xs(t){return(t&&t.type)==="redirect"}function L_(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function GT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function AI(t){return sI.has(t.toUpperCase())}function kn(t){return rI.has(t.toUpperCase())}function s0(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function rh(t,e){let n=typeof e=="string"?Ls(e).search:e.search;if(t[t.length-1].route.index&&s0(n||""))return t[t.length-1];let r=PT(t);return r[r.length-1]}function V_(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:a}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:a,text:void 0}}}function am(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function xI(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function El(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function SI(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Ki(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function RI(t,e){try{let n=t.sessionStorage.getItem(UT);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function CI(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(UT,JSON.stringify(n))}catch(r){Gt(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function NI(){let t,e,n=new Promise((r,i)=>{t=async s=>{r(s);try{await n}catch{}},e=async s=>{i(s);try{await n}catch{}}});return{promise:n,resolve:t,reject:e}}var xa=z.createContext(null);xa.displayName="DataRouter";var Fu=z.createContext(null);Fu.displayName="DataRouterState";z.createContext(!1);var a0=z.createContext({isTransitioning:!1});a0.displayName="ViewTransition";var $T=z.createContext(new Map);$T.displayName="Fetchers";var II=z.createContext(null);II.displayName="Await";var ai=z.createContext(null);ai.displayName="Navigation";var Hf=z.createContext(null);Hf.displayName="Location";var Mr=z.createContext({outlet:null,matches:[],isDataRoute:!1});Mr.displayName="Route";var o0=z.createContext(null);o0.displayName="RouteError";function DI(t,{relative:e}={}){De(Hu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=z.useContext(ai),{hash:i,pathname:s,search:a}=qu(t,{relative:e}),o=s;return n!=="/"&&(o=s==="/"?n:Xr([n,s])),r.createHref({pathname:o,search:a,hash:i})}function Hu(){return z.useContext(Hf)!=null}function Sa(){return De(Hu(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(Hf).location}var QT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function KT(t){z.useContext(ai).static||z.useLayoutEffect(t)}function qf(){let{isDataRoute:t}=z.useContext(Mr);return t?GI():OI()}function OI(){De(Hu(),"useNavigate() may be used only in the context of a <Router> component.");let t=z.useContext(xa),{basename:e,navigator:n}=z.useContext(ai),{matches:r}=z.useContext(Mr),{pathname:i}=Sa(),s=JSON.stringify(n0(r)),a=z.useRef(!1);return KT(()=>{a.current=!0}),z.useCallback((l,c={})=>{if(Gt(a.current,QT),!a.current)return;if(typeof l=="number"){n.go(l);return}let h=r0(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Xr([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,s,i,t])}var MI=z.createContext(null);function kI(t){let e=z.useContext(Mr).outlet;return e&&z.createElement(MI.Provider,{value:t},e)}function YT(){let{matches:t}=z.useContext(Mr),e=t[t.length-1];return e?e.params:{}}function qu(t,{relative:e}={}){let{matches:n}=z.useContext(Mr),{pathname:r}=Sa(),i=JSON.stringify(n0(n));return z.useMemo(()=>r0(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function PI(t,e,n,r){De(Hu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=z.useContext(ai),{matches:s}=z.useContext(Mr),a=s[s.length-1],o=a?a.params:{},l=a?a.pathname:"/",c=a?a.pathnameBase:"/",h=a&&a.route;{let _=h&&h.path||"";WT(l,!h||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let d=Sa(),f;f=d;let m=f.pathname||"/",E=m;if(c!=="/"){let _=c.replace(/^\//,"").split("/");E="/"+m.replace(/^\//,"").split("/").slice(_.length).join("/")}let N=ts(t,{pathname:E});return Gt(h||N!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Gt(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),zI(N&&N.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:Xr([c,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Xr([c,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,r)}function jI(){let t=XT(),e=Uo(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:s},"ErrorBoundary")," or"," ",z.createElement("code",{style:s},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),n?z.createElement("pre",{style:i},n):null,a)}var UI=z.createElement(jI,null),LI=class extends z.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?z.createElement(Mr.Provider,{value:this.props.routeContext},z.createElement(o0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function VI({routeContext:t,match:e,children:n}){let r=z.useContext(xa);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(Mr.Provider,{value:t},n)}function zI(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let l=i.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);De(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let a=!1,o=-1;if(n)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(o=l),c.route.id){let{loaderData:h,errors:d}=n,f=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||f){a=!0,o>=0?i=i.slice(0,o+1):i=[i[0]];break}}}return i.reduceRight((l,c,h)=>{let d,f=!1,m=null,E=null;n&&(d=s&&c.route.id?s[c.route.id]:void 0,m=c.route.errorElement||UI,a&&(o<0&&h===0?(WT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,E=null):o===h&&(f=!0,E=c.route.hydrateFallbackElement||null)));let N=e.concat(i.slice(0,h+1)),k=()=>{let _;return d?_=m:f?_=E:c.route.Component?_=z.createElement(c.route.Component,null):c.route.element?_=c.route.element:_=l,z.createElement(VI,{match:c,routeContext:{outlet:l,matches:N,isDataRoute:n!=null},children:_})};return n&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?z.createElement(LI,{location:n.location,revalidation:n.revalidation,component:m,error:d,children:k(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):k()},null)}function l0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BI(t){let e=z.useContext(xa);return De(e,l0(t)),e}function FI(t){let e=z.useContext(Fu);return De(e,l0(t)),e}function HI(t){let e=z.useContext(Mr);return De(e,l0(t)),e}function u0(t){let e=HI(t),n=e.matches[e.matches.length-1];return De(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function qI(){return u0("useRouteId")}function XT(){var r;let t=z.useContext(o0),e=FI("useRouteError"),n=u0("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function GI(){let{router:t}=BI("useNavigate"),e=u0("useNavigate"),n=z.useRef(!1);return KT(()=>{n.current=!0}),z.useCallback(async(i,s={})=>{Gt(n.current,QT),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var z_={};function WT(t,e,n){!e&&!z_[t]&&(z_[t]=!0,Gt(!1,n))}var B_={};function F_(t,e){!t&&!B_[e]&&(B_[e]=!0,console.warn(e))}function $I(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&Gt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:z.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&Gt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:z.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&Gt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:z.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var QI=["HydrateFallback","hydrateFallbackElement"],KI=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function YI({router:t,flushSync:e}){let[n,r]=z.useState(t.state),[i,s]=z.useState(),[a,o]=z.useState({isTransitioning:!1}),[l,c]=z.useState(),[h,d]=z.useState(),[f,m]=z.useState(),E=z.useRef(new Map),N=z.useCallback((S,{deletedFetchers:M,flushSync:U,viewTransitionOpts:T})=>{S.fetchers.forEach((y,v)=>{y.data!==void 0&&E.current.set(v,y.data)}),M.forEach(y=>E.current.delete(y)),F_(U===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let A=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(F_(T==null||A,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!T||!A){e&&U?e(()=>r(S)):z.startTransition(()=>r(S));return}if(e&&U){e(()=>{h&&(l&&l.resolve(),h.skipTransition()),o({isTransitioning:!0,flushSync:!0,currentLocation:T.currentLocation,nextLocation:T.nextLocation})});let y=t.window.document.startViewTransition(()=>{e(()=>r(S))});y.finished.finally(()=>{e(()=>{c(void 0),d(void 0),s(void 0),o({isTransitioning:!1})})}),e(()=>d(y));return}h?(l&&l.resolve(),h.skipTransition(),m({state:S,currentLocation:T.currentLocation,nextLocation:T.nextLocation})):(s(S),o({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}))},[t.window,e,h,l]);z.useLayoutEffect(()=>t.subscribe(N),[t,N]),z.useEffect(()=>{a.isTransitioning&&!a.flushSync&&c(new KI)},[a]),z.useEffect(()=>{if(l&&i&&t.window){let S=i,M=l.promise,U=t.window.document.startViewTransition(async()=>{z.startTransition(()=>r(S)),await M});U.finished.finally(()=>{c(void 0),d(void 0),s(void 0),o({isTransitioning:!1})}),d(U)}},[i,l,t.window]),z.useEffect(()=>{l&&i&&n.location.key===i.location.key&&l.resolve()},[l,h,n.location,i]),z.useEffect(()=>{!a.isTransitioning&&f&&(s(f.state),o({isTransitioning:!0,flushSync:!1,currentLocation:f.currentLocation,nextLocation:f.nextLocation}),m(void 0))},[a.isTransitioning,f]);let k=z.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:S=>t.navigate(S),push:(S,M,U)=>t.navigate(S,{state:M,preventScrollReset:U==null?void 0:U.preventScrollReset}),replace:(S,M,U)=>t.navigate(S,{replace:!0,state:M,preventScrollReset:U==null?void 0:U.preventScrollReset})}),[t]),_=t.basename||"/",x=z.useMemo(()=>({router:t,navigator:k,static:!1,basename:_}),[t,k,_]);return z.createElement(z.Fragment,null,z.createElement(xa.Provider,{value:x},z.createElement(Fu.Provider,{value:n},z.createElement($T.Provider,{value:E.current},z.createElement(a0.Provider,{value:a},z.createElement(JI,{basename:_,location:n.location,navigationType:n.historyAction,navigator:k},z.createElement(XI,{routes:t.routes,future:t.future,state:n})))))),null)}var XI=z.memo(WI);function WI({routes:t,future:e,state:n}){return PI(t,void 0,n,e)}function ZI(t){return kI(t.context)}function JI({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){De(!Hu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=z.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof n=="string"&&(n=Ls(n));let{pathname:l="/",search:c="",hash:h="",state:d=null,key:f="default"}=n,m=z.useMemo(()=>{let E=br(l,a);return E==null?null:{location:{pathname:E,search:c,hash:h,state:d,key:f},navigationType:r}},[a,l,c,h,d,f,r]);return Gt(m!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:z.createElement(ai.Provider,{value:o},z.createElement(Hf.Provider,{children:e,value:m}))}var ih="get",sh="application/x-www-form-urlencoded";function Gf(t){return t!=null&&typeof t.tagName=="string"}function e4(t){return Gf(t)&&t.tagName.toLowerCase()==="button"}function t4(t){return Gf(t)&&t.tagName.toLowerCase()==="form"}function n4(t){return Gf(t)&&t.tagName.toLowerCase()==="input"}function r4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function i4(t,e){return t.button===0&&(!e||e==="_self")&&!r4(t)}var kc=null;function s4(){if(kc===null)try{new FormData(document.createElement("form"),0),kc=!1}catch{kc=!0}return kc}var a4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function om(t){return t!=null&&!a4.has(t)?(Gt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${sh}"`),null):t}function o4(t,e){let n,r,i,s,a;if(t4(t)){let o=t.getAttribute("action");r=o?br(o,e):null,n=t.getAttribute("method")||ih,i=om(t.getAttribute("enctype"))||sh,s=new FormData(t)}else if(e4(t)||n4(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(r=l?br(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||ih,i=om(t.getAttribute("formenctype"))||om(o.getAttribute("enctype"))||sh,s=new FormData(o,t),!s4()){let{name:c,type:h,value:d}=t;if(h==="image"){let f=c?`${c}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else c&&s.append(c,d)}}else{if(Gf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ih,r=null,i=sh,a=t}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function c0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function l4(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&br(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function u4(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function c4(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function h4(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await u4(s,n);return a.links?a.links():[]}return[]}));return p4(r.flat(1).filter(c4).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function H_(t,e,n,r,i,s){let a=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>{var h;return n[c].pathname!==l.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?e.filter((l,c)=>{var d;let h=r.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function f4(t,e,{includeHydrateFallback:n}={}){return d4(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function d4(t){return[...new Set(t)]}function m4(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function p4(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(m4(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function ZT(){let t=z.useContext(xa);return c0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function g4(){let t=z.useContext(Fu);return c0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var h0=z.createContext(void 0);h0.displayName="FrameworkContext";function JT(){let t=z.useContext(h0);return c0(t,"You must render this element inside a <HydratedRouter> element"),t}function y4(t,e){let n=z.useContext(h0),[r,i]=z.useState(!1),[s,a]=z.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:d}=e,f=z.useRef(null);z.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let N=_=>{_.forEach(x=>{a(x.isIntersecting)})},k=new IntersectionObserver(N,{threshold:.5});return f.current&&k.observe(f.current),()=>{k.disconnect()}}},[t]),z.useEffect(()=>{if(r){let N=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(N)}}},[r]);let m=()=>{i(!0)},E=()=>{i(!1),a(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:wl(o,m),onBlur:wl(l,E),onMouseEnter:wl(c,m),onMouseLeave:wl(h,E),onTouchStart:wl(d,m)}]:[!1,f,{}]}function wl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function v4({page:t,...e}){let{router:n}=ZT(),r=z.useMemo(()=>ts(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?z.createElement(b4,{page:t,matches:r,...e}):null}function _4(t){let{manifest:e,routeModules:n}=JT(),[r,i]=z.useState([]);return z.useEffect(()=>{let s=!1;return h4(t,e,n).then(a=>{s||i(a)}),()=>{s=!0}},[t,e,n]),r}function b4({page:t,matches:e,...n}){let r=Sa(),{manifest:i,routeModules:s}=JT(),{basename:a}=ZT(),{loaderData:o,matches:l}=g4(),c=z.useMemo(()=>H_(t,e,l,i,r,"data"),[t,e,l,i,r]),h=z.useMemo(()=>H_(t,e,l,i,r,"assets"),[t,e,l,i,r]),d=z.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let E=new Set,N=!1;if(e.forEach(_=>{var S;let x=i.routes[_.route.id];!x||!x.hasLoader||(!c.some(M=>M.route.id===_.route.id)&&_.route.id in o&&((S=s[_.route.id])!=null&&S.shouldRevalidate)||x.hasClientLoader?N=!0:E.add(_.route.id))}),E.size===0)return[];let k=l4(t,a,"data");return N&&E.size>0&&k.searchParams.set("_routes",e.filter(_=>E.has(_.route.id)).map(_=>_.route.id).join(",")),[k.pathname+k.search]},[a,o,r,i,c,e,t,s]),f=z.useMemo(()=>f4(h,i),[h,i]),m=_4(h);return z.createElement(z.Fragment,null,d.map(E=>z.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...n})),f.map(E=>z.createElement("link",{key:E,rel:"modulepreload",href:E,...n})),m.map(({key:E,link:N})=>z.createElement("link",{key:E,...N})))}function E4(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var eA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{eA&&(window.__reactRouterVersion="7.7.0")}catch{}function w4(t,e){return hI({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:IN({window:e==null?void 0:e.window}),hydrationData:T4(),routes:t,mapRouteProperties:$I,hydrationRouteProperties:QI,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function T4(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:A4(t.errors)}),t}function A4(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Kh(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let a=new s(i.message);a.stack="",n[r]=a}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}var tA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,f0=z.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:h,viewTransition:d,...f},m){let{basename:E}=z.useContext(ai),N=typeof c=="string"&&tA.test(c),k,_=!1;if(typeof c=="string"&&N&&(k=c,eA))try{let v=new URL(window.location.href),w=c.startsWith("//")?new URL(v.protocol+c):new URL(c),C=br(w.pathname,E);w.origin===v.origin&&C!=null?c=C+w.search+w.hash:_=!0}catch{Gt(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=DI(c,{relative:i}),[S,M,U]=y4(r,f),T=C4(c,{replace:a,state:o,target:l,preventScrollReset:h,relative:i,viewTransition:d});function A(v){e&&e(v),v.defaultPrevented||T(v)}let y=z.createElement("a",{...f,...U,href:k||x,onClick:_||s?e:A,ref:E4(m,M),target:l,"data-discover":!N&&n==="render"?"true":void 0});return S&&!N?z.createElement(z.Fragment,null,y,z.createElement(v4,{page:x})):y});f0.displayName="Link";var x4=z.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:o,children:l,...c},h){let d=qu(a,{relative:c.relative}),f=Sa(),m=z.useContext(Fu),{navigator:E,basename:N}=z.useContext(ai),k=m!=null&&M4(d)&&o===!0,_=E.encodeLocation?E.encodeLocation(d).pathname:d.pathname,x=f.pathname,S=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(x=x.toLowerCase(),S=S?S.toLowerCase():null,_=_.toLowerCase()),S&&N&&(S=br(S,N)||S);const M=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let U=x===_||!i&&x.startsWith(_)&&x.charAt(M)==="/",T=S!=null&&(S===_||!i&&S.startsWith(_)&&S.charAt(_.length)==="/"),A={isActive:U,isPending:T,isTransitioning:k},y=U?e:void 0,v;typeof r=="function"?v=r(A):v=[r,U?"active":null,T?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let w=typeof s=="function"?s(A):s;return z.createElement(f0,{...c,"aria-current":y,className:v,ref:h,style:w,to:a,viewTransition:o},typeof l=="function"?l(A):l)});x4.displayName="NavLink";var S4=z.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:a=ih,action:o,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:d,...f},m)=>{let E=D4(),N=O4(o,{relative:c}),k=a.toLowerCase()==="get"?"get":"post",_=typeof o=="string"&&tA.test(o),x=S=>{if(l&&l(S),S.defaultPrevented)return;S.preventDefault();let M=S.nativeEvent.submitter,U=(M==null?void 0:M.getAttribute("formmethod"))||a;E(M||S.currentTarget,{fetcherKey:e,method:U,navigate:n,replace:i,state:s,relative:c,preventScrollReset:h,viewTransition:d})};return z.createElement("form",{ref:m,method:k,action:N,onSubmit:r?l:x,...f,"data-discover":!_&&t==="render"?"true":void 0})});S4.displayName="Form";function R4(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nA(t){let e=z.useContext(xa);return De(e,R4(t)),e}function C4(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=qf(),l=Sa(),c=qu(t,{relative:s});return z.useCallback(h=>{if(i4(h,e)){h.preventDefault();let d=n!==void 0?n:Ss(l)===Ss(c);o(t,{replace:d,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[l,o,c,n,r,e,t,i,s,a])}var N4=0,I4=()=>`__${String(++N4)}__`;function D4(){let{router:t}=nA("useSubmit"),{basename:e}=z.useContext(ai),n=qI();return z.useCallback(async(r,i={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=o4(r,e);if(i.navigate===!1){let h=i.fetcherKey||I4();await t.fetch(h,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function O4(t,{relative:e}={}){let{basename:n}=z.useContext(ai),r=z.useContext(Mr);De(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...qu(t||".",{relative:e})},a=Sa();if(t==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(h=>h==="")){o.delete("index"),l.filter(d=>d).forEach(d=>o.append("index",d));let h=o.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Xr([n,s.pathname])),Ss(s)}function M4(t,e={}){let n=z.useContext(a0);De(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=nA("useViewTransitionState"),i=qu(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=br(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=br(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Qh(i.pathname,a)!=null||Qh(i.pathname,s)!=null}function k4(t){return z.createElement(YI,{flushSync:Y1.flushSync,...t})}const P4=()=>{};var q_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},j4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],o=t[n++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},iA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|o>>4;let f=(o&15)<<2|c>>6,m=c&63;l||(m=64,a||(f=64)),r.push(n[h],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):j4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||o==null||c==null||d==null)throw new U4;const f=s<<2|o>>4;if(r.push(f),c!==64){const m=o<<4&240|c>>2;if(r.push(m),d!==64){const E=c<<6&192|d;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class U4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const L4=function(t){const e=rA(t);return iA.encodeByteArray(e,!0)},Xh=function(t){return L4(t).replace(/\./g,"")},sA=function(t){try{return iA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=()=>V4().__FIREBASE_DEFAULTS__,B4=()=>{if(typeof process>"u"||typeof q_>"u")return;const t=q_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},F4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sA(t[1]);return e&&JSON.parse(e)},$f=()=>{try{return P4()||z4()||B4()||F4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aA=t=>{var e,n;return(n=(e=$f())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},d0=t=>{const e=aA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},oA=()=>{var t;return(t=$f())===null||t===void 0?void 0:t.config},lA=t=>{var e;return(e=$f())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Qf(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Xh(JSON.stringify(n)),Xh(JSON.stringify(a)),""].join(".")}const Kl={};function q4(){const t={prod:[],emulator:[]};for(const e of Object.keys(Kl))Kl[e]?t.emulator.push(e):t.prod.push(e);return t}function G4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let G_=!1;function Kf(t,e){if(typeof window>"u"||typeof document>"u"||!Ui(window.location.host)||Kl[t]===e||Kl[t]||G_)return;Kl[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=q4().prod.length>0;function a(){const f=document.getElementById(r);f&&f.remove()}function o(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{G_=!0,a()},f}function h(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=G4(r),m=n("text"),E=document.getElementById(m)||document.createElement("span"),N=n("learnmore"),k=document.getElementById(N)||document.createElement("a"),_=n("preprendIcon"),x=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const S=f.element;o(S),h(k,N);const M=c();l(x,_),S.append(x,E,k,M),document.body.appendChild(S)}s?(E.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function Q4(){var t;const e=(t=$f())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function K4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Y4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function X4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function W4(){const t=_n();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Z4(){return!Q4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J4(){try{return typeof indexedDB=="object"}catch{return!1}}function e3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3="FirebaseError";class kr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=t3,Object.setPrototypeOf(this,kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gu.prototype.create)}}class Gu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?n3(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new kr(i,o,r)}}function n3(t,e){return t.replace(r3,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const r3=/\{\$([^}]+)}/g;function i3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if($_(s)&&$_(a)){if(!pa(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function $_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function s3(t,e){const n=new a3(t,e);return n.subscribe.bind(n)}class a3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");o3(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=lm),i.error===void 0&&(i.error=lm),i.complete===void 0&&(i.complete=lm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function o3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function lm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t){return t&&t._delegate?t._delegate:t}class Di{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new H4;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(c3(e))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ks){return this.instances.has(e)}getOptions(e=Ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:u3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ks){return this.component?this.component.multipleInstances?e:Ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function u3(t){return t===Ks?void 0:t}function c3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new l3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Me||(Me={}));const f3={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},d3=Me.INFO,m3={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},p3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=m3[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class m0{constructor(e){this.name=e,this._logLevel=d3,this._logHandler=p3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?f3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const g3=(t,e)=>e.some(n=>t instanceof n);let Q_,K_;function y3(){return Q_||(Q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function v3(){return K_||(K_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cA=new WeakMap,Sp=new WeakMap,hA=new WeakMap,um=new WeakMap,p0=new WeakMap;function _3(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(_s(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&cA.set(n,t)}).catch(()=>{}),p0.set(e,t),e}function b3(t){if(Sp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Sp.set(t,e)}let Rp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _s(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function E3(t){Rp=t(Rp)}function w3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(cm(this),e,...n);return hA.set(r,e.sort?e.sort():[e]),_s(r)}:v3().includes(t)?function(...e){return t.apply(cm(this),e),_s(cA.get(this))}:function(...e){return _s(t.apply(cm(this),e))}}function T3(t){return typeof t=="function"?w3(t):(t instanceof IDBTransaction&&b3(t),g3(t,y3())?new Proxy(t,Rp):t)}function _s(t){if(t instanceof IDBRequest)return _3(t);if(um.has(t))return um.get(t);const e=T3(t);return e!==t&&(um.set(t,e),p0.set(e,t)),e}const cm=t=>p0.get(t);function A3(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=_s(a);return r&&a.addEventListener("upgradeneeded",l=>{r(_s(a.result),l.oldVersion,l.newVersion,_s(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const x3=["get","getKey","getAll","getAllKeys","count"],S3=["put","add","delete","clear"],hm=new Map;function Y_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hm.get(e))return hm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=S3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||x3.includes(n)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),i&&l.done]))[0]};return hm.set(e,s),s}E3(t=>({...t,get:(e,n,r)=>Y_(e,n)||t.get(e,n,r),has:(e,n)=>!!Y_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(C3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function C3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cp="@firebase/app",X_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new m0("@firebase/app"),N3="@firebase/app-compat",I3="@firebase/analytics-compat",D3="@firebase/analytics",O3="@firebase/app-check-compat",M3="@firebase/app-check",k3="@firebase/auth",P3="@firebase/auth-compat",j3="@firebase/database",U3="@firebase/data-connect",L3="@firebase/database-compat",V3="@firebase/functions",z3="@firebase/functions-compat",B3="@firebase/installations",F3="@firebase/installations-compat",H3="@firebase/messaging",q3="@firebase/messaging-compat",G3="@firebase/performance",$3="@firebase/performance-compat",Q3="@firebase/remote-config",K3="@firebase/remote-config-compat",Y3="@firebase/storage",X3="@firebase/storage-compat",W3="@firebase/firestore",Z3="@firebase/ai",J3="@firebase/firestore-compat",eD="firebase",tD="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="[DEFAULT]",nD={[Cp]:"fire-core",[N3]:"fire-core-compat",[D3]:"fire-analytics",[I3]:"fire-analytics-compat",[M3]:"fire-app-check",[O3]:"fire-app-check-compat",[k3]:"fire-auth",[P3]:"fire-auth-compat",[j3]:"fire-rtdb",[U3]:"fire-data-connect",[L3]:"fire-rtdb-compat",[V3]:"fire-fn",[z3]:"fire-fn-compat",[B3]:"fire-iid",[F3]:"fire-iid-compat",[H3]:"fire-fcm",[q3]:"fire-fcm-compat",[G3]:"fire-perf",[$3]:"fire-perf-compat",[Q3]:"fire-rc",[K3]:"fire-rc-compat",[Y3]:"fire-gcs",[X3]:"fire-gcs-compat",[W3]:"fire-fst",[J3]:"fire-fst-compat",[Z3]:"fire-vertex","fire-js":"fire-js",[eD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=new Map,rD=new Map,Ip=new Map;function W_(t,e){try{t.container.addComponent(e)}catch(n){Oi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rs(t){const e=t.name;if(Ip.has(e))return Oi.debug(`There were multiple attempts to register component ${e}.`),!1;Ip.set(e,t);for(const n of Wh.values())W_(n,t);for(const n of rD.values())W_(n,t);return!0}function Qu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bs=new Gu("app","Firebase",iD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=tD;function fA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Np,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw bs.create("bad-app-name",{appName:String(i)});if(n||(n=oA()),!n)throw bs.create("no-options");const s=Wh.get(i);if(s){if(pa(n,s.options)&&pa(r,s.config))return s;throw bs.create("duplicate-app",{appName:i})}const a=new h3(i);for(const l of Ip.values())a.addComponent(l);const o=new sD(n,r,a);return Wh.set(i,o),o}function Yf(t=Np){const e=Wh.get(t);if(!e&&t===Np&&oA())return fA();if(!e)throw bs.create("no-app",{appName:t});return e}function gr(t,e,n){var r;let i=(r=nD[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oi.warn(o.join(" "));return}Rs(new Di(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD="firebase-heartbeat-database",oD=1,yu="firebase-heartbeat-store";let fm=null;function dA(){return fm||(fm=A3(aD,oD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yu)}catch(n){console.warn(n)}}}}).catch(t=>{throw bs.create("idb-open",{originalErrorMessage:t.message})})),fm}async function lD(t){try{const n=(await dA()).transaction(yu),r=await n.objectStore(yu).get(mA(t));return await n.done,r}catch(e){if(e instanceof kr)Oi.warn(e.message);else{const n=bs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Oi.warn(n.message)}}}async function Z_(t,e){try{const r=(await dA()).transaction(yu,"readwrite");await r.objectStore(yu).put(e,mA(t)),await r.done}catch(n){if(n instanceof kr)Oi.warn(n.message);else{const r=bs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Oi.warn(r.message)}}}function mA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=1024,cD=30;class hD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=J_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>cD){const a=mD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Oi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=J_(),{heartbeatsToSend:r,unsentEntries:i}=fD(this._heartbeatsCache.heartbeats),s=Xh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Oi.warn(n),""}}}function J_(){return new Date().toISOString().substring(0,10)}function fD(t,e=uD){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),eb(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),eb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return J4()?e3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Z_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Z_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function eb(t){return Xh(JSON.stringify({version:2,heartbeats:t})).length}function mD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t){Rs(new Di("platform-logger",e=>new R3(e),"PRIVATE")),Rs(new Di("heartbeat",e=>new hD(e),"PRIVATE")),gr(Cp,X_,t),gr(Cp,X_,"esm2017"),gr("fire-js","")}pD("");function g0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function pA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gD=pA,gA=new Gu("auth","Firebase",pA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=new m0("@firebase/auth");function yD(t,...e){Zh.logLevel<=Me.WARN&&Zh.warn(`Auth (${Ra}): ${t}`,...e)}function ah(t,...e){Zh.logLevel<=Me.ERROR&&Zh.error(`Auth (${Ra}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(t,...e){throw v0(t,...e)}function Ir(t,...e){return v0(t,...e)}function y0(t,e,n){const r=Object.assign(Object.assign({},gD()),{[e]:n});return new Gu("auth","Firebase",r).create(e,{appName:t.name})}function oa(t){return y0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vD(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ni(t,"argument-error"),y0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function v0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gA.create(t,...e)}function be(t,e,...n){if(!t)throw v0(e,...n)}function wi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ah(e),new Error(e)}function Mi(t,e){t||wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _D(){return tb()==="http:"||tb()==="https:"}function tb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_D()||Y4()||"connection"in navigator)?navigator.onLine:!0}function ED(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mi(n>e,"Short delay should be less than long delay!"),this.isMobile=$4()||X4()}get(){return bD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(t,e){Mi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],AD=new Ku(3e4,6e4);function b0(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Zo(t,e,n,r,i={}){return vA(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=$u(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return K4()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Ui(t.emulatorConfig.host)&&(c.credentials="include"),yA.fetch()(await _A(t,t.config.apiHost,n,o),c)})}async function vA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},wD),e);try{const i=new SD(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Pc(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pc(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Pc(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Pc(t,"user-disabled",a);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw y0(t,h,c);ni(t,h)}}catch(i){if(i instanceof kr)throw i;ni(t,"network-request-failed",{message:String(i)})}}async function xD(t,e,n,r,i={}){const s=await Zo(t,e,n,r,i);return"mfaPendingCredential"in s&&ni(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function _A(t,e,n,r){const i=`${e}${n}?${r}`,s=t,a=s.config.emulator?_0(t.config,i):`${t.config.apiScheme}://${i}`;return TD.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class SD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ir(this.auth,"network-request-failed")),AD.get())})}}function Pc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ir(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(t,e){return Zo(t,"POST","/v1/accounts:delete",e)}async function Jh(t,e){return Zo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CD(t,e=!1){const n=rt(t),r=await n.getIdToken(e),i=E0(r);be(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Yl(dm(i.auth_time)),issuedAtTime:Yl(dm(i.iat)),expirationTime:Yl(dm(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function dm(t){return Number(t)*1e3}function E0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ah("JWT malformed, contained fewer than 3 sections"),null;try{const i=sA(n);return i?JSON.parse(i):(ah("Failed to decode base64 JWT payload"),null)}catch(i){return ah("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function nb(t){const e=E0(t);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kr&&ND(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ND({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yl(this.lastLoginAt),this.creationTime=Yl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ef(t){var e;const n=t.auth,r=await t.getIdToken(),i=await vu(t,Jh(n,{idToken:r}));be(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?bA(s.providerUserInfo):[],o=OD(t.providerData,a),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Op(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function DD(t){const e=rt(t);await ef(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OD(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bA(t){return t.map(e=>{var{providerId:n}=e,r=g0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MD(t,e){const n=await vA(t,{},async()=>{const r=$u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=await _A(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return t.emulatorConfig&&Ui(t.emulatorConfig.host)&&(l.credentials="include"),yA.fetch()(a,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kD(t,e){return Zo(t,"POST","/v2/accounts:revokeToken",b0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=nb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await MD(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new bo;return r&&(be(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(be(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(be(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bo,this.toJSON())}_performRefresh(){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t,e){be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Cr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=g0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ID(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Op(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await vu(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return CD(this,e)}reload(){return DD(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Cr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ef(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(oa(this.auth));const e=await this.getIdToken();return await vu(this,RD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,o,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(a=n.photoURL)!==null&&a!==void 0?a:void 0,N=(o=n.tenantId)!==null&&o!==void 0?o:void 0,k=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:M,isAnonymous:U,providerData:T,stsTokenManager:A}=n;be(S&&A,e,"internal-error");const y=bo.fromJSON(this.name,A);be(typeof S=="string",e,"internal-error"),$i(d,e.name),$i(f,e.name),be(typeof M=="boolean",e,"internal-error"),be(typeof U=="boolean",e,"internal-error"),$i(m,e.name),$i(E,e.name),$i(N,e.name),$i(k,e.name),$i(_,e.name),$i(x,e.name);const v=new Cr({uid:S,auth:e,email:f,emailVerified:M,displayName:d,isAnonymous:U,photoURL:E,phoneNumber:m,tenantId:N,stsTokenManager:y,createdAt:_,lastLoginAt:x});return T&&Array.isArray(T)&&(v.providerData=T.map(w=>Object.assign({},w))),k&&(v._redirectEventId=k),v}static async _fromIdTokenResponse(e,n,r=!1){const i=new bo;i.updateFromServerResponse(n);const s=new Cr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ef(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];be(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?bA(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new bo;o.updateFromIdToken(r);const l=new Cr({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Op(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=new Map;function Ti(t){Mi(t instanceof Function,"Expected a class definition");let e=rb.get(t);return e?(Mi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}EA.type="NONE";const ib=EA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(t,e,n){return`firebase:${t}:${e}:${n}`}class Eo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=oh(this.userKey,i.apiKey,s),this.fullPersistenceKey=oh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Jh(this.auth,{idToken:e}).catch(()=>{});return n?Cr._fromGetAccountInfoResponse(this.auth,n,e):null}return Cr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Eo(Ti(ib),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Ti(ib);const a=oh(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const h=await c._get(a);if(h){let d;if(typeof h=="string"){const f=await Jh(e,{idToken:h}).catch(()=>{});if(!f)break;d=await Cr._fromGetAccountInfoResponse(e,f,h)}else d=Cr._fromJSON(e,h);c!==s&&(o=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Eo(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new Eo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RA(e))return"Blackberry";if(CA(e))return"Webos";if(TA(e))return"Safari";if((e.includes("chrome/")||AA(e))&&!e.includes("edge/"))return"Chrome";if(SA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function wA(t=_n()){return/firefox\//i.test(t)}function TA(t=_n()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AA(t=_n()){return/crios\//i.test(t)}function xA(t=_n()){return/iemobile/i.test(t)}function SA(t=_n()){return/android/i.test(t)}function RA(t=_n()){return/blackberry/i.test(t)}function CA(t=_n()){return/webos/i.test(t)}function w0(t=_n()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function PD(t=_n()){var e;return w0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function jD(){return W4()&&document.documentMode===10}function NA(t=_n()){return w0(t)||SA(t)||CA(t)||RA(t)||/windows phone/i.test(t)||xA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t,e=[]){let n;switch(t){case"Browser":n=sb(_n());break;case"Worker":n=`${sb(_n())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ra}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(t,e={}){return Zo(t,"GET","/v2/passwordPolicy",b0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=6;class zD{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:VD,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ab(this),this.idTokenSubscription=new ab(this),this.beforeStateQueue=new UD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ti(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Eo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Jh(this,{idToken:e}),r=await Cr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ef(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ED()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(oa(this));const n=e?rt(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(oa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(oa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ti(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LD(this),n=new zD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await kD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ti(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await Eo.create(this,[Ti(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&yD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Xf(t){return rt(t)}class ab{constructor(e){this.auth=e,this.observer=null,this.addObserver=s3(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FD(t){T0=t}function HD(t){return T0.loadJS(t)}function qD(){return T0.gapiScript}function GD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t,e){const n=Qu(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(pa(s,e??{}))return i;ni(i,"already-initialized")}return n.initialize({options:e})}function QD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ti);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function KD(t,e,n){const r=Xf(t);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=DA(e),{host:a,port:o}=YD(e),l=o===null?"":`:${o}`,c={url:`${s}//${a}${l}/`},h=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be(pa(c,r.config.emulator)&&pa(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ui(a)?(Qf(`${s}//${a}${l}`),Kf("Auth",!0)):XD()}function DA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function YD(t){const e=DA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:ob(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:ob(a)}}}function ob(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function XD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,n){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(t,e){return xD(t,"POST","/v1/accounts:signInWithIdp",b0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="http://localhost";class ga extends OA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ni("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=g0(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new ga(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return wo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,wo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wo(e,n)}buildRequest(){const e={requestUri:WD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$u(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends A0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Yu{constructor(){super("facebook.com")}static credential(e){return ga._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.FACEBOOK_SIGN_IN_METHOD="facebook.com";ns.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ga._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Gr.credential(n,r)}catch{return null}}}Gr.GOOGLE_SIGN_IN_METHOD="google.com";Gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Yu{constructor(){super("github.com")}static credential(e){return ga._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.GITHUB_SIGN_IN_METHOD="github.com";rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Yu{constructor(){super("twitter.com")}static credential(e,n){return ga._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return is.credential(n,r)}catch{return null}}}is.TWITTER_SIGN_IN_METHOD="twitter.com";is.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Cr._fromIdTokenResponse(e,r,i),a=lb(r);return new Lo({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=lb(r);return new Lo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function lb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends kr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,tf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new tf(e,n,r,i)}}function MA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?tf._fromErrorAndOperation(t,s,e,r):s})}async function ZD(t,e,n=!1){const r=await vu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Lo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JD(t,e,n=!1){const{auth:r}=t;if(Xn(r.app))return Promise.reject(oa(r));const i="reauthenticate";try{const s=await vu(t,MA(r,i,e,t),n);be(s.idToken,r,"internal-error");const a=E0(s.idToken);be(a,r,"internal-error");const{sub:o}=a;return be(t.uid===o,r,"user-mismatch"),Lo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ni(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e5(t,e,n=!1){if(Xn(t.app))return Promise.reject(oa(t));const r="signIn",i=await MA(t,r,e),s=await Lo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function t5(t,e,n,r){return rt(t).onIdTokenChanged(e,n,r)}function n5(t,e,n){return rt(t).beforeAuthStateChanged(e,n)}function r5(t,e,n,r){return rt(t).onAuthStateChanged(e,n,r)}function i5(t){return rt(t).signOut()}const nf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(nf,"1"),this.storage.removeItem(nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5=1e3,a5=10;class PA extends kA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);jD()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,a5):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},s5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}PA.type="LOCAL";const o5=PA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA extends kA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jA.type="SESSION";const UA=jA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Wf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async c=>c(n.origin,s)),l=await l5(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=x0("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(){return window}function c5(t){Wr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(){return typeof Wr().WorkerGlobalScope<"u"&&typeof Wr().importScripts=="function"}async function h5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function f5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function d5(){return LA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="firebaseLocalStorageDb",m5=1,rf="firebaseLocalStorage",zA="fbase_key";class Xu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zf(t,e){return t.transaction([rf],e?"readwrite":"readonly").objectStore(rf)}function p5(){const t=indexedDB.deleteDatabase(VA);return new Xu(t).toPromise()}function Mp(){const t=indexedDB.open(VA,m5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(rf,{keyPath:zA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(rf)?e(r):(r.close(),await p5(),e(await Mp()))})})}async function ub(t,e,n){const r=Zf(t,!0).put({[zA]:e,value:n});return new Xu(r).toPromise()}async function g5(t,e){const n=Zf(t,!1).get(e),r=await new Xu(n).toPromise();return r===void 0?null:r.value}function cb(t,e){const n=Zf(t,!0).delete(e);return new Xu(n).toPromise()}const y5=800,v5=3;class BA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>v5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wf._getInstance(d5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await h5(),!this.activeServiceWorker)return;this.sender=new u5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||f5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mp();return await ub(e,nf,"1"),await cb(e,nf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ub(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>g5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>cb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Zf(i,!1).getAll();return new Xu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),y5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BA.type="LOCAL";const _5=BA;new Ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t,e){return e?Ti(e):(be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0 extends OA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function b5(t){return e5(t.auth,new S0(t),t.bypassAuthState)}function E5(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),JD(n,new S0(t),t.bypassAuthState)}async function w5(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),ZD(n,new S0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return b5;case"linkViaPopup":case"linkViaRedirect":return w5;case"reauthViaPopup":case"reauthViaRedirect":return E5;default:ni(this.auth,"internal-error")}}resolve(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=new Ku(2e3,1e4);async function A5(t,e,n){if(Xn(t.app))return Promise.reject(Ir(t,"operation-not-supported-in-this-environment"));const r=Xf(t);vD(t,e,A0);const i=FA(r,n);return new Ws(r,"signInViaPopup",e,i).executeNotNull()}class Ws extends HA{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ws.currentPopupAction&&Ws.currentPopupAction.cancel(),Ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Mi(this.filter.length===1,"Popup operations only handle one event");const e=x0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ir(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ir(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ir(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,T5.get())};e()}}Ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5="pendingRedirect",lh=new Map;class S5 extends HA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=lh.get(this.auth._key());if(!e){try{const r=await R5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}lh.set(this.auth._key(),e)}return this.bypassAuthState||lh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function R5(t,e){const n=I5(e),r=N5(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function C5(t,e){lh.set(t._key(),e)}function N5(t){return Ti(t._redirectPersistence)}function I5(t){return oh(x5,t.config.apiKey,t.name)}async function D5(t,e,n=!1){if(Xn(t.app))return Promise.reject(oa(t));const r=Xf(t),i=FA(r,e),a=await new S5(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=10*60*1e3;class M5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!k5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!qA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ir(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=O5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hb(e))}saveEventToCache(e){this.cachedEventUids.add(hb(e)),this.lastProcessedEventTime=Date.now()}}function hb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function k5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(t,e={}){return Zo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,U5=/^https?/;async function L5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await P5(t);for(const n of e)try{if(V5(n))return}catch{}ni(t,"unauthorized-domain")}function V5(t){const e=Dp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!U5.test(n))return!1;if(j5.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5=new Ku(3e4,6e4);function fb(){const t=Wr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function B5(t){return new Promise((e,n)=>{var r,i,s;function a(){fb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fb(),n(Ir(t,"network-request-failed"))},timeout:z5.get()})}if(!((i=(r=Wr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Wr().gapi)===null||s===void 0)&&s.load)a();else{const o=GD("iframefcb");return Wr()[o]=()=>{gapi.load?a():n(Ir(t,"network-request-failed"))},HD(`${qD()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw uh=null,e})}let uh=null;function F5(t){return uh=uh||B5(t),uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=new Ku(5e3,15e3),q5="__/auth/iframe",G5="emulator/auth/iframe",$5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Q5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function K5(t){const e=t.config;be(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_0(e,G5):`https://${t.config.authDomain}/${q5}`,r={apiKey:e.apiKey,appName:t.name,v:Ra},i=Q5.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${$u(r).slice(1)}`}async function Y5(t){const e=await F5(t),n=Wr().gapi;return be(n,t,"internal-error"),e.open({where:document.body,url:K5(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$5,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Ir(t,"network-request-failed"),o=Wr().setTimeout(()=>{s(a)},H5.get());function l(){Wr().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},W5=500,Z5=600,J5="_blank",eO="http://localhost";class db{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tO(t,e,n,r=W5,i=Z5){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},X5),{width:r.toString(),height:i.toString(),top:s,left:a}),c=_n().toLowerCase();n&&(o=AA(c)?J5:n),wA(c)&&(e=e||eO,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[m,E])=>`${f}${m}=${E},`,"");if(PD(c)&&o!=="_self")return nO(e||"",o),new db(null);const d=window.open(e||"",o,h);be(d,t,"popup-blocked");try{d.focus()}catch{}return new db(d)}function nO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO="__/auth/handler",iO="emulator/auth/handler",sO=encodeURIComponent("fac");async function mb(t,e,n,r,i,s){be(t.config.authDomain,t,"auth-domain-config-required"),be(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ra,eventId:i};if(e instanceof A0){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",i3(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))a[h]=d}if(e instanceof Yu){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const l=await t._getAppCheckToken(),c=l?`#${sO}=${encodeURIComponent(l)}`:"";return`${aO(t)}?${$u(o).slice(1)}${c}`}function aO({config:t}){return t.emulator?_0(t,iO):`https://${t.authDomain}/${rO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="webStorageSupport";class oO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UA,this._completeRedirectFn=D5,this._overrideRedirectResult=C5}async _openPopup(e,n,r,i){var s;Mi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await mb(e,n,r,Dp(),i);return tO(e,a,x0())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await mb(e,n,r,Dp(),i);return c5(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Mi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Y5(e),r=new M5(e);return n.register("authEvent",i=>(be(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(mm,{type:mm},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[mm];a!==void 0&&n(!!a),ni(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=L5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return NA()||TA()||w0()}}const lO=oO;var pb="@firebase/auth",gb="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hO(t){Rs(new Di("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;be(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IA(t)},c=new BD(r,i,s,l);return QD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rs(new Di("auth-internal",e=>{const n=Xf(e.getProvider("auth").getImmediate());return(r=>new uO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gr(pb,gb,cO(t)),gr(pb,gb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=5*60,dO=lA("authIdTokenMaxAge")||fO;let yb=null;const mO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>dO)return;const i=n==null?void 0:n.token;yb!==i&&(yb=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function pO(t=Yf()){const e=Qu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$D(t,{popupRedirectResolver:lO,persistence:[_5,o5,UA]}),r=lA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=mO(s.toString());n5(n,a,()=>a(n.currentUser)),t5(n,o=>a(o))}}const i=aA("auth");return i&&KD(n,`http://${i}`),n}function gO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}FD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Ir("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",gO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hO("Browser");var yO="firebase",vO="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr(yO,vO,"app");var vb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,GA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,y){function v(){}v.prototype=y.prototype,A.D=y.prototype,A.prototype=new v,A.prototype.constructor=A,A.C=function(w,C,I){for(var R=Array(arguments.length-2),L=2;L<arguments.length;L++)R[L-2]=arguments[L];return y.prototype[C].apply(w,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,y,v){v||(v=0);var w=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)w[C]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(C=0;16>C;++C)w[C]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=A.g[0],v=A.g[1],C=A.g[2];var I=A.g[3],R=y+(I^v&(C^I))+w[0]+3614090360&4294967295;y=v+(R<<7&4294967295|R>>>25),R=I+(C^y&(v^C))+w[1]+3905402710&4294967295,I=y+(R<<12&4294967295|R>>>20),R=C+(v^I&(y^v))+w[2]+606105819&4294967295,C=I+(R<<17&4294967295|R>>>15),R=v+(y^C&(I^y))+w[3]+3250441966&4294967295,v=C+(R<<22&4294967295|R>>>10),R=y+(I^v&(C^I))+w[4]+4118548399&4294967295,y=v+(R<<7&4294967295|R>>>25),R=I+(C^y&(v^C))+w[5]+1200080426&4294967295,I=y+(R<<12&4294967295|R>>>20),R=C+(v^I&(y^v))+w[6]+2821735955&4294967295,C=I+(R<<17&4294967295|R>>>15),R=v+(y^C&(I^y))+w[7]+4249261313&4294967295,v=C+(R<<22&4294967295|R>>>10),R=y+(I^v&(C^I))+w[8]+1770035416&4294967295,y=v+(R<<7&4294967295|R>>>25),R=I+(C^y&(v^C))+w[9]+2336552879&4294967295,I=y+(R<<12&4294967295|R>>>20),R=C+(v^I&(y^v))+w[10]+4294925233&4294967295,C=I+(R<<17&4294967295|R>>>15),R=v+(y^C&(I^y))+w[11]+2304563134&4294967295,v=C+(R<<22&4294967295|R>>>10),R=y+(I^v&(C^I))+w[12]+1804603682&4294967295,y=v+(R<<7&4294967295|R>>>25),R=I+(C^y&(v^C))+w[13]+4254626195&4294967295,I=y+(R<<12&4294967295|R>>>20),R=C+(v^I&(y^v))+w[14]+2792965006&4294967295,C=I+(R<<17&4294967295|R>>>15),R=v+(y^C&(I^y))+w[15]+1236535329&4294967295,v=C+(R<<22&4294967295|R>>>10),R=y+(C^I&(v^C))+w[1]+4129170786&4294967295,y=v+(R<<5&4294967295|R>>>27),R=I+(v^C&(y^v))+w[6]+3225465664&4294967295,I=y+(R<<9&4294967295|R>>>23),R=C+(y^v&(I^y))+w[11]+643717713&4294967295,C=I+(R<<14&4294967295|R>>>18),R=v+(I^y&(C^I))+w[0]+3921069994&4294967295,v=C+(R<<20&4294967295|R>>>12),R=y+(C^I&(v^C))+w[5]+3593408605&4294967295,y=v+(R<<5&4294967295|R>>>27),R=I+(v^C&(y^v))+w[10]+38016083&4294967295,I=y+(R<<9&4294967295|R>>>23),R=C+(y^v&(I^y))+w[15]+3634488961&4294967295,C=I+(R<<14&4294967295|R>>>18),R=v+(I^y&(C^I))+w[4]+3889429448&4294967295,v=C+(R<<20&4294967295|R>>>12),R=y+(C^I&(v^C))+w[9]+568446438&4294967295,y=v+(R<<5&4294967295|R>>>27),R=I+(v^C&(y^v))+w[14]+3275163606&4294967295,I=y+(R<<9&4294967295|R>>>23),R=C+(y^v&(I^y))+w[3]+4107603335&4294967295,C=I+(R<<14&4294967295|R>>>18),R=v+(I^y&(C^I))+w[8]+1163531501&4294967295,v=C+(R<<20&4294967295|R>>>12),R=y+(C^I&(v^C))+w[13]+2850285829&4294967295,y=v+(R<<5&4294967295|R>>>27),R=I+(v^C&(y^v))+w[2]+4243563512&4294967295,I=y+(R<<9&4294967295|R>>>23),R=C+(y^v&(I^y))+w[7]+1735328473&4294967295,C=I+(R<<14&4294967295|R>>>18),R=v+(I^y&(C^I))+w[12]+2368359562&4294967295,v=C+(R<<20&4294967295|R>>>12),R=y+(v^C^I)+w[5]+4294588738&4294967295,y=v+(R<<4&4294967295|R>>>28),R=I+(y^v^C)+w[8]+2272392833&4294967295,I=y+(R<<11&4294967295|R>>>21),R=C+(I^y^v)+w[11]+1839030562&4294967295,C=I+(R<<16&4294967295|R>>>16),R=v+(C^I^y)+w[14]+4259657740&4294967295,v=C+(R<<23&4294967295|R>>>9),R=y+(v^C^I)+w[1]+2763975236&4294967295,y=v+(R<<4&4294967295|R>>>28),R=I+(y^v^C)+w[4]+1272893353&4294967295,I=y+(R<<11&4294967295|R>>>21),R=C+(I^y^v)+w[7]+4139469664&4294967295,C=I+(R<<16&4294967295|R>>>16),R=v+(C^I^y)+w[10]+3200236656&4294967295,v=C+(R<<23&4294967295|R>>>9),R=y+(v^C^I)+w[13]+681279174&4294967295,y=v+(R<<4&4294967295|R>>>28),R=I+(y^v^C)+w[0]+3936430074&4294967295,I=y+(R<<11&4294967295|R>>>21),R=C+(I^y^v)+w[3]+3572445317&4294967295,C=I+(R<<16&4294967295|R>>>16),R=v+(C^I^y)+w[6]+76029189&4294967295,v=C+(R<<23&4294967295|R>>>9),R=y+(v^C^I)+w[9]+3654602809&4294967295,y=v+(R<<4&4294967295|R>>>28),R=I+(y^v^C)+w[12]+3873151461&4294967295,I=y+(R<<11&4294967295|R>>>21),R=C+(I^y^v)+w[15]+530742520&4294967295,C=I+(R<<16&4294967295|R>>>16),R=v+(C^I^y)+w[2]+3299628645&4294967295,v=C+(R<<23&4294967295|R>>>9),R=y+(C^(v|~I))+w[0]+4096336452&4294967295,y=v+(R<<6&4294967295|R>>>26),R=I+(v^(y|~C))+w[7]+1126891415&4294967295,I=y+(R<<10&4294967295|R>>>22),R=C+(y^(I|~v))+w[14]+2878612391&4294967295,C=I+(R<<15&4294967295|R>>>17),R=v+(I^(C|~y))+w[5]+4237533241&4294967295,v=C+(R<<21&4294967295|R>>>11),R=y+(C^(v|~I))+w[12]+1700485571&4294967295,y=v+(R<<6&4294967295|R>>>26),R=I+(v^(y|~C))+w[3]+2399980690&4294967295,I=y+(R<<10&4294967295|R>>>22),R=C+(y^(I|~v))+w[10]+4293915773&4294967295,C=I+(R<<15&4294967295|R>>>17),R=v+(I^(C|~y))+w[1]+2240044497&4294967295,v=C+(R<<21&4294967295|R>>>11),R=y+(C^(v|~I))+w[8]+1873313359&4294967295,y=v+(R<<6&4294967295|R>>>26),R=I+(v^(y|~C))+w[15]+4264355552&4294967295,I=y+(R<<10&4294967295|R>>>22),R=C+(y^(I|~v))+w[6]+2734768916&4294967295,C=I+(R<<15&4294967295|R>>>17),R=v+(I^(C|~y))+w[13]+1309151649&4294967295,v=C+(R<<21&4294967295|R>>>11),R=y+(C^(v|~I))+w[4]+4149444226&4294967295,y=v+(R<<6&4294967295|R>>>26),R=I+(v^(y|~C))+w[11]+3174756917&4294967295,I=y+(R<<10&4294967295|R>>>22),R=C+(y^(I|~v))+w[2]+718787259&4294967295,C=I+(R<<15&4294967295|R>>>17),R=v+(I^(C|~y))+w[9]+3951481745&4294967295,A.g[0]=A.g[0]+y&4294967295,A.g[1]=A.g[1]+(C+(R<<21&4294967295|R>>>11))&4294967295,A.g[2]=A.g[2]+C&4294967295,A.g[3]=A.g[3]+I&4294967295}r.prototype.u=function(A,y){y===void 0&&(y=A.length);for(var v=y-this.blockSize,w=this.B,C=this.h,I=0;I<y;){if(C==0)for(;I<=v;)i(this,A,I),I+=this.blockSize;if(typeof A=="string"){for(;I<y;)if(w[C++]=A.charCodeAt(I++),C==this.blockSize){i(this,w),C=0;break}}else for(;I<y;)if(w[C++]=A[I++],C==this.blockSize){i(this,w),C=0;break}}this.h=C,this.o+=y},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var y=1;y<A.length-8;++y)A[y]=0;var v=8*this.o;for(y=A.length-8;y<A.length;++y)A[y]=v&255,v/=256;for(this.u(A),A=Array(16),y=v=0;4>y;++y)for(var w=0;32>w;w+=8)A[v++]=this.g[y]>>>w&255;return A};function s(A,y){var v=o;return Object.prototype.hasOwnProperty.call(v,A)?v[A]:v[A]=y(A)}function a(A,y){this.h=y;for(var v=[],w=!0,C=A.length-1;0<=C;C--){var I=A[C]|0;w&&I==y||(v[C]=I,w=!1)}this.g=v}var o={};function l(A){return-128<=A&&128>A?s(A,function(y){return new a([y|0],0>y?-1:0)}):new a([A|0],0>A?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return d;if(0>A)return k(c(-A));for(var y=[],v=1,w=0;A>=v;w++)y[w]=A/v|0,v*=4294967296;return new a(y,0)}function h(A,y){if(A.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(A.charAt(0)=="-")return k(h(A.substring(1),y));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=c(Math.pow(y,8)),w=d,C=0;C<A.length;C+=8){var I=Math.min(8,A.length-C),R=parseInt(A.substring(C,C+I),y);8>I?(I=c(Math.pow(y,I)),w=w.j(I).add(c(R))):(w=w.j(v),w=w.add(c(R)))}return w}var d=l(0),f=l(1),m=l(16777216);t=a.prototype,t.m=function(){if(N(this))return-k(this).m();for(var A=0,y=1,v=0;v<this.g.length;v++){var w=this.i(v);A+=(0<=w?w:4294967296+w)*y,y*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(E(this))return"0";if(N(this))return"-"+k(this).toString(A);for(var y=c(Math.pow(A,6)),v=this,w="";;){var C=M(v,y).g;v=_(v,C.j(y));var I=((0<v.g.length?v.g[0]:v.h)>>>0).toString(A);if(v=C,E(v))return I+w;for(;6>I.length;)I="0"+I;w=I+w}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function E(A){if(A.h!=0)return!1;for(var y=0;y<A.g.length;y++)if(A.g[y]!=0)return!1;return!0}function N(A){return A.h==-1}t.l=function(A){return A=_(this,A),N(A)?-1:E(A)?0:1};function k(A){for(var y=A.g.length,v=[],w=0;w<y;w++)v[w]=~A.g[w];return new a(v,~A.h).add(f)}t.abs=function(){return N(this)?k(this):this},t.add=function(A){for(var y=Math.max(this.g.length,A.g.length),v=[],w=0,C=0;C<=y;C++){var I=w+(this.i(C)&65535)+(A.i(C)&65535),R=(I>>>16)+(this.i(C)>>>16)+(A.i(C)>>>16);w=R>>>16,I&=65535,R&=65535,v[C]=R<<16|I}return new a(v,v[v.length-1]&-2147483648?-1:0)};function _(A,y){return A.add(k(y))}t.j=function(A){if(E(this)||E(A))return d;if(N(this))return N(A)?k(this).j(k(A)):k(k(this).j(A));if(N(A))return k(this.j(k(A)));if(0>this.l(m)&&0>A.l(m))return c(this.m()*A.m());for(var y=this.g.length+A.g.length,v=[],w=0;w<2*y;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(var C=0;C<A.g.length;C++){var I=this.i(w)>>>16,R=this.i(w)&65535,L=A.i(C)>>>16,H=A.i(C)&65535;v[2*w+2*C]+=R*H,x(v,2*w+2*C),v[2*w+2*C+1]+=I*H,x(v,2*w+2*C+1),v[2*w+2*C+1]+=R*L,x(v,2*w+2*C+1),v[2*w+2*C+2]+=I*L,x(v,2*w+2*C+2)}for(w=0;w<y;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=y;w<2*y;w++)v[w]=0;return new a(v,0)};function x(A,y){for(;(A[y]&65535)!=A[y];)A[y+1]+=A[y]>>>16,A[y]&=65535,y++}function S(A,y){this.g=A,this.h=y}function M(A,y){if(E(y))throw Error("division by zero");if(E(A))return new S(d,d);if(N(A))return y=M(k(A),y),new S(k(y.g),k(y.h));if(N(y))return y=M(A,k(y)),new S(k(y.g),y.h);if(30<A.g.length){if(N(A)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var v=f,w=y;0>=w.l(A);)v=U(v),w=U(w);var C=T(v,1),I=T(w,1);for(w=T(w,2),v=T(v,2);!E(w);){var R=I.add(w);0>=R.l(A)&&(C=C.add(v),I=R),w=T(w,1),v=T(v,1)}return y=_(A,C.j(y)),new S(C,y)}for(C=d;0<=A.l(y);){for(v=Math.max(1,Math.floor(A.m()/y.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),I=c(v),R=I.j(y);N(R)||0<R.l(A);)v-=w,I=c(v),R=I.j(y);E(I)&&(I=f),C=C.add(I),A=_(A,R)}return new S(C,A)}t.A=function(A){return M(this,A).h},t.and=function(A){for(var y=Math.max(this.g.length,A.g.length),v=[],w=0;w<y;w++)v[w]=this.i(w)&A.i(w);return new a(v,this.h&A.h)},t.or=function(A){for(var y=Math.max(this.g.length,A.g.length),v=[],w=0;w<y;w++)v[w]=this.i(w)|A.i(w);return new a(v,this.h|A.h)},t.xor=function(A){for(var y=Math.max(this.g.length,A.g.length),v=[],w=0;w<y;w++)v[w]=this.i(w)^A.i(w);return new a(v,this.h^A.h)};function U(A){for(var y=A.g.length+1,v=[],w=0;w<y;w++)v[w]=A.i(w)<<1|A.i(w-1)>>>31;return new a(v,A.h)}function T(A,y){var v=y>>5;y%=32;for(var w=A.g.length-v,C=[],I=0;I<w;I++)C[I]=0<y?A.i(I+v)>>>y|A.i(I+v+1)<<32-y:A.i(I+v);return new a(C,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,GA=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=h,Es=a}).apply(typeof vb<"u"?vb:typeof self<"u"?self:typeof window<"u"?window:{});var jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $A,Nl,QA,ch,kp,KA,YA,XA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,b){return u==Array.prototype||u==Object.prototype||(u[g]=b.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof jc=="object"&&jc];for(var g=0;g<u.length;++g){var b=u[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function i(u,g){if(g)e:{var b=r;u=u.split(".");for(var P=0;P<u.length-1;P++){var G=u[P];if(!(G in b))break e;b=b[G]}u=u[u.length-1],P=b[u],g=g(P),g!=P&&g!=null&&e(b,u,{configurable:!0,writable:!0,value:g})}}function s(u,g){u instanceof String&&(u+="");var b=0,P=!1,G={next:function(){if(!P&&b<u.length){var X=b++;return{value:g(X,u[X]),done:!1}}return P=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}i("Array.prototype.values",function(u){return u||function(){return s(this,function(g,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function h(u,g,b){return u.call.apply(u.bind,arguments)}function d(u,g,b){if(!u)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,P),u.apply(g,G)}}return function(){return u.apply(g,arguments)}}function f(u,g,b){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function m(u,g){var b=Array.prototype.slice.call(arguments,1);return function(){var P=b.slice();return P.push.apply(P,arguments),u.apply(this,P)}}function E(u,g){function b(){}b.prototype=g.prototype,u.aa=g.prototype,u.prototype=new b,u.prototype.constructor=u,u.Qb=function(P,G,X){for(var re=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)re[tt-2]=arguments[tt];return g.prototype[G].apply(P,re)}}function N(u){const g=u.length;if(0<g){const b=Array(g);for(let P=0;P<g;P++)b[P]=u[P];return b}return[]}function k(u,g){for(let b=1;b<arguments.length;b++){const P=arguments[b];if(l(P)){const G=u.length||0,X=P.length||0;u.length=G+X;for(let re=0;re<X;re++)u[G+re]=P[re]}else u.push(P)}}class _{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function x(u){return/^[\s\xa0]*$/.test(u)}function S(){var u=o.navigator;return u&&(u=u.userAgent)?u:""}function M(u){return M[" "](u),u}M[" "]=function(){};var U=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function T(u,g,b){for(const P in u)g.call(b,u[P],P,u)}function A(u,g){for(const b in u)g.call(void 0,u[b],b,u)}function y(u){const g={};for(const b in u)g[b]=u[b];return g}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(u,g){let b,P;for(let G=1;G<arguments.length;G++){P=arguments[G];for(b in P)u[b]=P[b];for(let X=0;X<v.length;X++)b=v[X],Object.prototype.hasOwnProperty.call(P,b)&&(u[b]=P[b])}}function C(u){var g=1;u=u.split(":");const b=[];for(;0<g&&u.length;)b.push(u.shift()),g--;return u.length&&b.push(u.join(":")),b}function I(u){o.setTimeout(()=>{throw u},0)}function R(){var u=F;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class L{constructor(){this.h=this.g=null}add(g,b){const P=H.get();P.set(g,b),this.h?this.h.next=P:this.g=P,this.h=P}}var H=new _(()=>new D,u=>u.reset());class D{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let O,$=!1,F=new L,K=()=>{const u=o.Promise.resolve(void 0);O=()=>{u.then(ie)}};var ie=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(b){I(b)}var g=H;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}$=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var Q=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};o.addEventListener("test",b,g),o.removeEventListener("test",b,g)}catch{}return u}();function V(u,g){if(B.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var b=this.type=u.type,P=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(U){e:{try{M(g.nodeName);var G=!0;break e}catch{}G=!1}G||(g=null)}}else b=="mouseover"?g=u.fromElement:b=="mouseout"&&(g=u.toElement);this.relatedTarget=g,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:se[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&V.aa.h.call(this)}}E(V,B);var se={2:"touch",3:"pen",4:"mouse"};V.prototype.h=function(){V.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),Ce=0;function pe(u,g,b,P,G){this.listener=u,this.proxy=null,this.src=g,this.type=b,this.capture=!!P,this.ha=G,this.key=++Ce,this.da=this.fa=!1}function ye(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Le(u){this.src=u,this.g={},this.h=0}Le.prototype.add=function(u,g,b,P,G){var X=u.toString();u=this.g[X],u||(u=this.g[X]=[],this.h++);var re=zn(u,g,P,G);return-1<re?(g=u[re],b||(g.fa=!1)):(g=new pe(g,this.src,X,!!P,G),g.fa=b,u.push(g)),g};function it(u,g){var b=g.type;if(b in u.g){var P=u.g[b],G=Array.prototype.indexOf.call(P,g,void 0),X;(X=0<=G)&&Array.prototype.splice.call(P,G,1),X&&(ye(g),u.g[b].length==0&&(delete u.g[b],u.h--))}}function zn(u,g,b,P){for(var G=0;G<u.length;++G){var X=u[G];if(!X.da&&X.listener==g&&X.capture==!!b&&X.ha==P)return G}return-1}var bt="closure_lm_"+(1e6*Math.random()|0),Xe={};function Nt(u,g,b,P,G){if(Array.isArray(g)){for(var X=0;X<g.length;X++)Nt(u,g[X],b,P,G);return null}return b=Ut(b),u&&u[Ee]?u.K(g,b,c(P)?!!P.capture:!1,G):$e(u,g,b,!1,P,G)}function $e(u,g,b,P,G,X){if(!g)throw Error("Invalid event type");var re=c(G)?!!G.capture:!!G,tt=He(u);if(tt||(u[bt]=tt=new Le(u)),b=tt.add(g,b,P,re,X),b.proxy)return b;if(P=Qe(),b.proxy=P,P.src=u,P.listener=b,u.addEventListener)Q||(G=re),G===void 0&&(G=!1),u.addEventListener(g.toString(),P,G);else if(u.attachEvent)u.attachEvent(ot(g.toString()),P);else if(u.addListener&&u.removeListener)u.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Qe(){function u(b){return g.call(u.src,u.listener,b)}const g=yt;return u}function Et(u,g,b,P,G){if(Array.isArray(g))for(var X=0;X<g.length;X++)Et(u,g[X],b,P,G);else P=c(P)?!!P.capture:!!P,b=Ut(b),u&&u[Ee]?(u=u.i,g=String(g).toString(),g in u.g&&(X=u.g[g],b=zn(X,b,P,G),-1<b&&(ye(X[b]),Array.prototype.splice.call(X,b,1),X.length==0&&(delete u.g[g],u.h--)))):u&&(u=He(u))&&(g=u.g[g.toString()],u=-1,g&&(u=zn(g,b,P,G)),(b=-1<u?g[u]:null)&&It(b))}function It(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ee])it(g.i,u);else{var b=u.type,P=u.proxy;g.removeEventListener?g.removeEventListener(b,P,u.capture):g.detachEvent?g.detachEvent(ot(b),P):g.addListener&&g.removeListener&&g.removeListener(P),(b=He(g))?(it(b,u),b.h==0&&(b.src=null,g[bt]=null)):ye(u)}}}function ot(u){return u in Xe?Xe[u]:Xe[u]="on"+u}function yt(u,g){if(u.da)u=!0;else{g=new V(g,this);var b=u.listener,P=u.ha||u.src;u.fa&&It(u),u=b.call(P,g)}return u}function He(u){return u=u[bt],u instanceof Le?u:null}var Ve="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ut(u){return typeof u=="function"?u:(u[Ve]||(u[Ve]=function(g){return u.handleEvent(g)}),u[Ve])}function Pe(){ee.call(this),this.i=new Le(this),this.M=this,this.F=null}E(Pe,ee),Pe.prototype[Ee]=!0,Pe.prototype.removeEventListener=function(u,g,b,P){Et(this,u,g,b,P)};function qe(u,g){var b,P=u.F;if(P)for(b=[];P;P=P.F)b.push(P);if(u=u.M,P=g.type||g,typeof g=="string")g=new B(g,u);else if(g instanceof B)g.target=g.target||u;else{var G=g;g=new B(P,u),w(g,G)}if(G=!0,b)for(var X=b.length-1;0<=X;X--){var re=g.g=b[X];G=ft(re,P,!0,g)&&G}if(re=g.g=u,G=ft(re,P,!0,g)&&G,G=ft(re,P,!1,g)&&G,b)for(X=0;X<b.length;X++)re=g.g=b[X],G=ft(re,P,!1,g)&&G}Pe.prototype.N=function(){if(Pe.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var b=u.g[g],P=0;P<b.length;P++)ye(b[P]);delete u.g[g],u.h--}}this.F=null},Pe.prototype.K=function(u,g,b,P){return this.i.add(String(u),g,!1,b,P)},Pe.prototype.L=function(u,g,b,P){return this.i.add(String(u),g,!0,b,P)};function ft(u,g,b,P){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var G=!0,X=0;X<g.length;++X){var re=g[X];if(re&&!re.da&&re.capture==b){var tt=re.listener,nn=re.ha||re.src;re.fa&&it(u.i,re),G=tt.call(nn,P)!==!1&&G}}return G&&!P.defaultPrevented}function Cn(u,g,b){if(typeof u=="function")b&&(u=f(u,b));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:o.setTimeout(u,g||0)}function Lt(u){u.g=Cn(()=>{u.g=null,u.i&&(u.i=!1,Lt(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class wt extends ee{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Lt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dt(u){ee.call(this),this.h=u,this.g={}}E(Dt,ee);var bn=[];function cn(u){T(u.g,function(g,b){this.g.hasOwnProperty(b)&&It(g)},u),u.g={}}Dt.prototype.N=function(){Dt.aa.N.call(this),cn(this)},Dt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bn=o.JSON.stringify,Li=o.JSON.parse,Vi=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Pr(){}Pr.prototype.h=null;function oi(u){return u.h||(u.h=u.i())}function jr(){}var Ur={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nn(){B.call(this,"d")}E(Nn,B);function En(){B.call(this,"c")}E(En,B);var $t={},Fn=null;function li(){return Fn=Fn||new Pe}$t.La="serverreachability";function sr(u){B.call(this,$t.La,u)}E(sr,B);function j(u){const g=li();qe(g,new sr(g))}$t.STAT_EVENT="statevent";function q(u,g){B.call(this,$t.STAT_EVENT,u),this.stat=g}E(q,B);function Y(u){const g=li();qe(g,new q(g,u))}$t.Ma="timingevent";function te(u,g){B.call(this,$t.Ma,u),this.size=g}E(te,B);function ne(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function le(){this.g=!0}le.prototype.xa=function(){this.g=!1};function fe(u,g,b,P,G,X){u.info(function(){if(u.g)if(X)for(var re="",tt=X.split("&"),nn=0;nn<tt.length;nn++){var ze=tt[nn].split("=");if(1<ze.length){var hn=ze[0];ze=ze[1];var fn=hn.split("_");re=2<=fn.length&&fn[1]=="type"?re+(hn+"="+ze+"&"):re+(hn+"=redacted&")}}else re=null;else re=X;return"XMLHTTP REQ ("+P+") [attempt "+G+"]: "+g+`
`+b+`
`+re})}function ue(u,g,b,P,G,X,re){u.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+G+"]: "+g+`
`+b+`
`+X+" "+re})}function ce(u,g,b,P){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+me(u,b)+(P?" "+P:"")})}function ge(u,g){u.info(function(){return"TIMEOUT: "+g})}le.prototype.info=function(){};function me(u,g){if(!u.g)return g;if(!g)return null;try{var b=JSON.parse(g);if(b){for(u=0;u<b.length;u++)if(Array.isArray(b[u])){var P=b[u];if(!(2>P.length)){var G=P[1];if(Array.isArray(G)&&!(1>G.length)){var X=G[0];if(X!="noop"&&X!="stop"&&X!="close")for(var re=1;re<G.length;re++)G[re]=""}}}}return Bn(b)}catch{return g}}var he={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},we={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},We;function Ot(){}E(Ot,Pr),Ot.prototype.g=function(){return new XMLHttpRequest},Ot.prototype.i=function(){return{}},We=new Ot;function dt(u,g,b,P){this.j=u,this.i=g,this.l=b,this.R=P||1,this.U=new Dt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lt}function lt(){this.i=null,this.g="",this.h=!1}var Ze={},Er={};function ui(u,g,b){u.L=1,u.v=uc(ci(g)),u.m=b,u.P=!0,wr(u,null)}function wr(u,g){u.F=Date.now(),Lr(u),u.A=ci(u.v);var b=u.A,P=u.R;Array.isArray(P)||(P=[String(P)]),Ny(b.i,"t",P),u.C=0,b=u.j.J,u.h=new lt,u.g=Qy(u.j,b?g:null,!u.m),0<u.O&&(u.M=new wt(f(u.Y,u,u.g),u.O)),g=u.U,b=u.g,P=u.ca;var G="readystatechange";Array.isArray(G)||(G&&(bn[0]=G.toString()),G=bn);for(var X=0;X<G.length;X++){var re=Nt(b,G[X],P||g.handleEvent,!1,g.h||g);if(!re)break;g.g[re.key]=re}g=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),j(),fe(u.i,u.u,u.A,u.l,u.R,u.m)}dt.prototype.ca=function(u){u=u.target;const g=this.M;g&&hi(u)==3?g.j():this.Y(u)},dt.prototype.Y=function(u){try{if(u==this.g)e:{const fn=hi(this.g);var g=this.g.Ba();const Ua=this.g.Z();if(!(3>fn)&&(fn!=3||this.g&&(this.h.h||this.g.oa()||jy(this.g)))){this.J||fn!=4||g==7||(g==8||0>=Ua?j(3):j(2)),zi(this);var b=this.g.Z();this.X=b;t:if(Hn(this)){var P=jy(this.g);u="";var G=P.length,X=hi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Oe(this),zr(this);var re="";break t}this.h.i=new o.TextDecoder}for(g=0;g<G;g++)this.h.h=!0,u+=this.h.i.decode(P[g],{stream:!(X&&g==G-1)});P.length=0,this.h.g+=u,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=b==200,ue(this.i,this.u,this.A,this.l,this.R,fn,b),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,nn=this.g;if((tt=nn.g?nn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(tt)){var ze=tt;break t}}ze=null}if(b=ze)ce(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vt(this,b);else{this.o=!1,this.s=3,Y(12),Oe(this),zr(this);break e}}if(this.P){b=!0;let Tr;for(;!this.J&&this.C<re.length;)if(Tr=rl(this,re),Tr==Er){fn==4&&(this.s=4,Y(14),b=!1),ce(this.i,this.l,null,"[Incomplete Response]");break}else if(Tr==Ze){this.s=4,Y(15),ce(this.i,this.l,re,"[Invalid Chunk]"),b=!1;break}else ce(this.i,this.l,Tr,null),Vt(this,Tr);if(Hn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fn!=4||re.length!=0||this.h.h||(this.s=1,Y(16),b=!1),this.o=this.o&&b,!b)ce(this.i,this.l,re,"[Invalid Chunked Response]"),Oe(this),zr(this);else if(0<re.length&&!this.W){this.W=!0;var hn=this.j;hn.g==this&&hn.ba&&!hn.M&&(hn.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),bd(hn),hn.M=!0,Y(11))}}else ce(this.i,this.l,re,null),Vt(this,re);fn==4&&Oe(this),this.o&&!this.J&&(fn==4?Hy(this.j,this):(this.o=!1,Lr(this)))}else NS(this.g),b==400&&0<re.indexOf("Unknown SID")?(this.s=3,Y(12)):(this.s=0,Y(13)),Oe(this),zr(this)}}}catch{}finally{}};function Hn(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function rl(u,g){var b=u.C,P=g.indexOf(`
`,b);return P==-1?Er:(b=Number(g.substring(b,P)),isNaN(b)?Ze:(P+=1,P+b>g.length?Er:(g=g.slice(P,P+b),u.C=P+b,g)))}dt.prototype.cancel=function(){this.J=!0,Oe(this)};function Lr(u){u.S=Date.now()+u.I,Vr(u,u.I)}function Vr(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ne(f(u.ba,u),g)}function zi(u){u.B&&(o.clearTimeout(u.B),u.B=null)}dt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ge(this.i,this.A),this.L!=2&&(j(),Y(17)),Oe(this),this.s=2,zr(this)):Vr(this,this.S-u)};function zr(u){u.j.G==0||u.J||Hy(u.j,u)}function Oe(u){zi(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,cn(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function Vt(u,g){try{var b=u.j;if(b.G!=0&&(b.g==u||ka(b.h,u))){if(!u.K&&ka(b.h,u)&&b.G==3){try{var P=b.Da.g.parse(g)}catch{P=null}if(Array.isArray(P)&&P.length==3){var G=P;if(G[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<u.F)pc(b),dc(b);else break e;_d(b),Y(18)}}else b.za=G[1],0<b.za-b.T&&37500>G[2]&&b.F&&b.v==0&&!b.C&&(b.C=ne(f(b.Za,b),6e3));if(1>=Bs(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Hs(b,11)}else if((u.K||b.g==u)&&pc(b),!x(g))for(G=b.Da.g.parse(g),g=0;g<G.length;g++){let ze=G[g];if(b.T=ze[0],ze=ze[1],b.G==2)if(ze[0]=="c"){b.K=ze[1],b.ia=ze[2];const hn=ze[3];hn!=null&&(b.la=hn,b.j.info("VER="+b.la));const fn=ze[4];fn!=null&&(b.Aa=fn,b.j.info("SVER="+b.Aa));const Ua=ze[5];Ua!=null&&typeof Ua=="number"&&0<Ua&&(P=1.5*Ua,b.L=P,b.j.info("backChannelRequestTimeoutMs_="+P)),P=b;const Tr=u.g;if(Tr){const yc=Tr.g?Tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yc){var X=P.h;X.g||yc.indexOf("spdy")==-1&&yc.indexOf("quic")==-1&&yc.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(il(X,X.h),X.h=null))}if(P.D){const Ed=Tr.g?Tr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ed&&(P.ya=Ed,ut(P.I,P.D,Ed))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-u.F,b.j.info("Handshake RTT: "+b.R+"ms")),P=b;var re=u;if(P.qa=$y(P,P.J?P.ia:null,P.W),re.K){Ey(P.h,re);var tt=re,nn=P.L;nn&&(tt.I=nn),tt.B&&(zi(tt),Lr(tt)),P.g=re}else By(P);0<b.i.length&&mc(b)}else ze[0]!="stop"&&ze[0]!="close"||Hs(b,7);else b.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Hs(b,7):vd(b):ze[0]!="noop"&&b.l&&b.l.ta(ze),b.v=0)}}j(4)}catch{}}var Ma=class{constructor(u,g){this.g=u,this.map=g}};function Bi(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tt(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Bs(u){return u.h?1:u.g?u.g.size:0}function ka(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function il(u,g){u.g?u.g.add(g):u.h=g}function Ey(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Bi.prototype.cancel=function(){if(this.i=wy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function wy(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const b of u.g.values())g=g.concat(b.D);return g}return N(u.i)}function mS(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var g=[],b=u.length,P=0;P<b;P++)g.push(u[P]);return g}g=[],b=0;for(P in u)g[b++]=u[P];return g}function pS(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var g=[];u=u.length;for(var b=0;b<u;b++)g.push(b);return g}g=[],b=0;for(const P in u)g[b++]=P;return g}}}function Ty(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var b=pS(u),P=mS(u),G=P.length,X=0;X<G;X++)g.call(void 0,P[X],b&&b[X],u)}var Ay=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gS(u,g){if(u){u=u.split("&");for(var b=0;b<u.length;b++){var P=u[b].indexOf("="),G=null;if(0<=P){var X=u[b].substring(0,P);G=u[b].substring(P+1)}else X=u[b];g(X,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Fs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Fs){this.h=u.h,oc(this,u.j),this.o=u.o,this.g=u.g,lc(this,u.s),this.l=u.l;var g=u.i,b=new ol;b.i=g.i,g.g&&(b.g=new Map(g.g),b.h=g.h),xy(this,b),this.m=u.m}else u&&(g=String(u).match(Ay))?(this.h=!1,oc(this,g[1]||"",!0),this.o=sl(g[2]||""),this.g=sl(g[3]||"",!0),lc(this,g[4]),this.l=sl(g[5]||"",!0),xy(this,g[6]||"",!0),this.m=sl(g[7]||"")):(this.h=!1,this.i=new ol(null,this.h))}Fs.prototype.toString=function(){var u=[],g=this.j;g&&u.push(al(g,Sy,!0),":");var b=this.g;return(b||g=="file")&&(u.push("//"),(g=this.o)&&u.push(al(g,Sy,!0),"@"),u.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&u.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(al(b,b.charAt(0)=="/"?_S:vS,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",al(b,ES)),u.join("")};function ci(u){return new Fs(u)}function oc(u,g,b){u.j=b?sl(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function lc(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function xy(u,g,b){g instanceof ol?(u.i=g,wS(u.i,u.h)):(b||(g=al(g,bS)),u.i=new ol(g,u.h))}function ut(u,g,b){u.i.set(g,b)}function uc(u){return ut(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function sl(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function al(u,g,b){return typeof u=="string"?(u=encodeURI(u).replace(g,yS),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function yS(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Sy=/[#\/\?@]/g,vS=/[#\?:]/g,_S=/[#\?]/g,bS=/[#\?@]/g,ES=/#/g;function ol(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Fi(u){u.g||(u.g=new Map,u.h=0,u.i&&gS(u.i,function(g,b){u.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}t=ol.prototype,t.add=function(u,g){Fi(this),this.i=null,u=Pa(this,u);var b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(g),this.h+=1,this};function Ry(u,g){Fi(u),g=Pa(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Cy(u,g){return Fi(u),g=Pa(u,g),u.g.has(g)}t.forEach=function(u,g){Fi(this),this.g.forEach(function(b,P){b.forEach(function(G){u.call(g,G,P,this)},this)},this)},t.na=function(){Fi(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),b=[];for(let P=0;P<g.length;P++){const G=u[P];for(let X=0;X<G.length;X++)b.push(g[P])}return b},t.V=function(u){Fi(this);let g=[];if(typeof u=="string")Cy(this,u)&&(g=g.concat(this.g.get(Pa(this,u))));else{u=Array.from(this.g.values());for(let b=0;b<u.length;b++)g=g.concat(u[b])}return g},t.set=function(u,g){return Fi(this),this.i=null,u=Pa(this,u),Cy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function Ny(u,g,b){Ry(u,g),0<b.length&&(u.i=null,u.g.set(Pa(u,g),N(b)),u.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var b=0;b<g.length;b++){var P=g[b];const X=encodeURIComponent(String(P)),re=this.V(P);for(P=0;P<re.length;P++){var G=X;re[P]!==""&&(G+="="+encodeURIComponent(String(re[P]))),u.push(G)}}return this.i=u.join("&")};function Pa(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function wS(u,g){g&&!u.j&&(Fi(u),u.i=null,u.g.forEach(function(b,P){var G=P.toLowerCase();P!=G&&(Ry(this,P),Ny(this,G,b))},u)),u.j=g}function TS(u,g){const b=new le;if(o.Image){const P=new Image;P.onload=m(Hi,b,"TestLoadImage: loaded",!0,g,P),P.onerror=m(Hi,b,"TestLoadImage: error",!1,g,P),P.onabort=m(Hi,b,"TestLoadImage: abort",!1,g,P),P.ontimeout=m(Hi,b,"TestLoadImage: timeout",!1,g,P),o.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=u}else g(!1)}function AS(u,g){const b=new le,P=new AbortController,G=setTimeout(()=>{P.abort(),Hi(b,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:P.signal}).then(X=>{clearTimeout(G),X.ok?Hi(b,"TestPingServer: ok",!0,g):Hi(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(G),Hi(b,"TestPingServer: error",!1,g)})}function Hi(u,g,b,P,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),P(b)}catch{}}function xS(){this.g=new Vi}function SS(u,g,b){const P=b||"";try{Ty(u,function(G,X){let re=G;c(G)&&(re=Bn(G)),g.push(P+X+"="+encodeURIComponent(re))})}catch(G){throw g.push(P+"type="+encodeURIComponent("_badmap")),G}}function cc(u){this.l=u.Ub||null,this.j=u.eb||!1}E(cc,Pr),cc.prototype.g=function(){return new hc(this.l,this.j)},cc.prototype.i=function(u){return function(){return u}}({});function hc(u,g){Pe.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(hc,Pe),t=hc.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,ul(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||o).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ll(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ul(this)),this.g&&(this.readyState=3,ul(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Iy(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Iy(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?ll(this):ul(this),this.readyState==3&&Iy(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,ll(this))},t.Qa=function(u){this.g&&(this.response=u,ll(this))},t.ga=function(){this.g&&ll(this)};function ll(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ul(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=g.next();return u.join(`\r
`)};function ul(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(hc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Dy(u){let g="";return T(u,function(b,P){g+=P,g+=":",g+=b,g+=`\r
`}),g}function yd(u,g,b){e:{for(P in b){var P=!1;break e}P=!0}P||(b=Dy(b),typeof u=="string"?b!=null&&encodeURIComponent(String(b)):ut(u,g,b))}function At(u){Pe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(At,Pe);var RS=/^https?$/i,CS=["POST","PUT"];t=At.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,b,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():We.g(),this.v=this.o?oi(this.o):oi(We),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(X){Oy(this,X);return}if(u=b||"",b=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var G in P)b.set(G,P[G]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const X of P.keys())b.set(X,P.get(X));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(b.keys()).find(X=>X.toLowerCase()=="content-type"),G=o.FormData&&u instanceof o.FormData,!(0<=Array.prototype.indexOf.call(CS,g,void 0))||P||G||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,re]of b)this.g.setRequestHeader(X,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Py(this),this.u=!0,this.g.send(u),this.u=!1}catch(X){Oy(this,X)}};function Oy(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,My(u),fc(u)}function My(u){u.A||(u.A=!0,qe(u,"complete"),qe(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,qe(this,"complete"),qe(this,"abort"),fc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fc(this,!0)),At.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ky(this):this.bb())},t.bb=function(){ky(this)};function ky(u){if(u.h&&typeof a<"u"&&(!u.v[1]||hi(u)!=4||u.Z()!=2)){if(u.u&&hi(u)==4)Cn(u.Ea,0,u);else if(qe(u,"readystatechange"),hi(u)==4){u.h=!1;try{const re=u.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var P;if(P=re===0){var G=String(u.D).match(Ay)[1]||null;!G&&o.self&&o.self.location&&(G=o.self.location.protocol.slice(0,-1)),P=!RS.test(G?G.toLowerCase():"")}b=P}if(b)qe(u,"complete"),qe(u,"success");else{u.m=6;try{var X=2<hi(u)?u.g.statusText:""}catch{X=""}u.l=X+" ["+u.Z()+"]",My(u)}}finally{fc(u)}}}}function fc(u,g){if(u.g){Py(u);const b=u.g,P=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||qe(u,"ready");try{b.onreadystatechange=P}catch{}}}function Py(u){u.I&&(o.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function hi(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<hi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Li(g)}};function jy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function NS(u){const g={};u=(u.g&&2<=hi(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<u.length;P++){if(x(u[P]))continue;var b=C(u[P]);const G=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const X=g[G]||[];g[G]=X,X.push(b)}A(g,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cl(u,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||g}function Uy(u){this.Aa=0,this.i=[],this.j=new le,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cl("baseRetryDelayMs",5e3,u),this.cb=cl("retryDelaySeedMs",1e4,u),this.Wa=cl("forwardChannelMaxRetries",2,u),this.wa=cl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Bi(u&&u.concurrentRequestLimit),this.Da=new xS,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Uy.prototype,t.la=8,t.G=1,t.connect=function(u,g,b,P){Y(0),this.W=u,this.H=g||{},b&&P!==void 0&&(this.H.OSID=b,this.H.OAID=P),this.F=this.X,this.I=$y(this,null,this.W),mc(this)};function vd(u){if(Ly(u),u.G==3){var g=u.U++,b=ci(u.I);if(ut(b,"SID",u.K),ut(b,"RID",g),ut(b,"TYPE","terminate"),hl(u,b),g=new dt(u,u.j,g),g.L=2,g.v=uc(ci(b)),b=!1,o.navigator&&o.navigator.sendBeacon)try{b=o.navigator.sendBeacon(g.v.toString(),"")}catch{}!b&&o.Image&&(new Image().src=g.v,b=!0),b||(g.g=Qy(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Lr(g)}Gy(u)}function dc(u){u.g&&(bd(u),u.g.cancel(),u.g=null)}function Ly(u){dc(u),u.u&&(o.clearTimeout(u.u),u.u=null),pc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&o.clearTimeout(u.s),u.s=null)}function mc(u){if(!Tt(u.h)&&!u.s){u.s=!0;var g=u.Ga;O||K(),$||(O(),$=!0),F.add(g,u),u.B=0}}function IS(u,g){return Bs(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ne(f(u.Ga,u,g),qy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const G=new dt(this,this.j,u);let X=this.o;if(this.S&&(X?(X=y(X),w(X,this.S)):X=this.S),this.m!==null||this.O||(G.H=X,X=null),this.P)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var P=this.i[b];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(g+=P,4096<g){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=zy(this,G,g),b=ci(this.I),ut(b,"RID",u),ut(b,"CVER",22),this.D&&ut(b,"X-HTTP-Session-Id",this.D),hl(this,b),X&&(this.O?g="headers="+encodeURIComponent(String(Dy(X)))+"&"+g:this.m&&yd(b,this.m,X)),il(this.h,G),this.Ua&&ut(b,"TYPE","init"),this.P?(ut(b,"$req",g),ut(b,"SID","null"),G.T=!0,ui(G,b,null)):ui(G,b,g),this.G=2}}else this.G==3&&(u?Vy(this,u):this.i.length==0||Tt(this.h)||Vy(this))};function Vy(u,g){var b;g?b=g.l:b=u.U++;const P=ci(u.I);ut(P,"SID",u.K),ut(P,"RID",b),ut(P,"AID",u.T),hl(u,P),u.m&&u.o&&yd(P,u.m,u.o),b=new dt(u,u.j,b,u.B+1),u.m===null&&(b.H=u.o),g&&(u.i=g.D.concat(u.i)),g=zy(u,b,1e3),b.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),il(u.h,b),ui(b,P,g)}function hl(u,g){u.H&&T(u.H,function(b,P){ut(g,P,b)}),u.l&&Ty({},function(b,P){ut(g,P,b)})}function zy(u,g,b){b=Math.min(u.i.length,b);var P=u.l?f(u.l.Na,u.l,u):null;e:{var G=u.i;let X=-1;for(;;){const re=["count="+b];X==-1?0<b?(X=G[0].g,re.push("ofs="+X)):X=0:re.push("ofs="+X);let tt=!0;for(let nn=0;nn<b;nn++){let ze=G[nn].g;const hn=G[nn].map;if(ze-=X,0>ze)X=Math.max(0,G[nn].g-100),tt=!1;else try{SS(hn,re,"req"+ze+"_")}catch{P&&P(hn)}}if(tt){P=re.join("&");break e}}}return u=u.i.splice(0,b),g.D=u,P}function By(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;O||K(),$||(O(),$=!0),F.add(g,u),u.v=0}}function _d(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ne(f(u.Fa,u),qy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Fy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ne(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Y(10),dc(this),Fy(this))};function bd(u){u.A!=null&&(o.clearTimeout(u.A),u.A=null)}function Fy(u){u.g=new dt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=ci(u.qa);ut(g,"RID","rpc"),ut(g,"SID",u.K),ut(g,"AID",u.T),ut(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&ut(g,"TO",u.ja),ut(g,"TYPE","xmlhttp"),hl(u,g),u.m&&u.o&&yd(g,u.m,u.o),u.L&&(u.g.I=u.L);var b=u.g;u=u.ia,b.L=1,b.v=uc(ci(g)),b.m=null,b.P=!0,wr(b,u)}t.Za=function(){this.C!=null&&(this.C=null,dc(this),_d(this),Y(19))};function pc(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Hy(u,g){var b=null;if(u.g==g){pc(u),bd(u),u.g=null;var P=2}else if(ka(u.h,g))b=g.D,Ey(u.h,g),P=1;else return;if(u.G!=0){if(g.o)if(P==1){b=g.m?g.m.length:0,g=Date.now()-g.F;var G=u.B;P=li(),qe(P,new te(P,b)),mc(u)}else By(u);else if(G=g.s,G==3||G==0&&0<g.X||!(P==1&&IS(u,g)||P==2&&_d(u)))switch(b&&0<b.length&&(g=u.h,g.i=g.i.concat(b)),G){case 1:Hs(u,5);break;case 4:Hs(u,10);break;case 3:Hs(u,6);break;default:Hs(u,2)}}}function qy(u,g){let b=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(b*=2),b*g}function Hs(u,g){if(u.j.info("Error code "+g),g==2){var b=f(u.fb,u),P=u.Xa;const G=!P;P=new Fs(P||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||oc(P,"https"),uc(P),G?TS(P.toString(),b):AS(P.toString(),b)}else Y(2);u.G=0,u.l&&u.l.sa(g),Gy(u),Ly(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Y(2)):(this.j.info("Failed to ping google.com"),Y(1))};function Gy(u){if(u.G=0,u.ka=[],u.l){const g=wy(u.h);(g.length!=0||u.i.length!=0)&&(k(u.ka,g),k(u.ka,u.i),u.h.i.length=0,N(u.i),u.i.length=0),u.l.ra()}}function $y(u,g,b){var P=b instanceof Fs?ci(b):new Fs(b);if(P.g!="")g&&(P.g=g+"."+P.g),lc(P,P.s);else{var G=o.location;P=G.protocol,g=g?g+"."+G.hostname:G.hostname,G=+G.port;var X=new Fs(null);P&&oc(X,P),g&&(X.g=g),G&&lc(X,G),b&&(X.l=b),P=X}return b=u.D,g=u.ya,b&&g&&ut(P,b,g),ut(P,"VER",u.la),hl(u,P),P}function Qy(u,g,b){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new At(new cc({eb:b})):new At(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ky(){}t=Ky.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function gc(){}gc.prototype.g=function(u,g){return new qn(u,g)};function qn(u,g){Pe.call(this),this.g=new Uy(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!x(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!x(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ja(this)}E(qn,Pe),qn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){vd(this.g)},qn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.u&&(b={},b.__data__=Bn(u),u=b);g.i.push(new Ma(g.Ya++,u)),g.G==3&&mc(g)},qn.prototype.N=function(){this.g.l=null,delete this.j,vd(this.g),delete this.g,qn.aa.N.call(this)};function Yy(u){Nn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const b in g){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}E(Yy,Nn);function Xy(){En.call(this),this.status=1}E(Xy,En);function ja(u){this.g=u}E(ja,Ky),ja.prototype.ua=function(){qe(this.g,"a")},ja.prototype.ta=function(u){qe(this.g,new Yy(u))},ja.prototype.sa=function(u){qe(this.g,new Xy)},ja.prototype.ra=function(){qe(this.g,"b")},gc.prototype.createWebChannel=gc.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,XA=function(){return new gc},YA=function(){return li()},KA=$t,kp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},he.NO_ERROR=0,he.TIMEOUT=8,he.HTTP_ERROR=6,ch=he,we.COMPLETE="complete",QA=we,jr.EventType=Ur,Ur.OPEN="a",Ur.CLOSE="b",Ur.ERROR="c",Ur.MESSAGE="d",Pe.prototype.listen=Pe.prototype.K,Nl=jr,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,$A=At}).apply(typeof jc<"u"?jc:typeof self<"u"?self:typeof window<"u"?window:{});const _b="@firebase/firestore",bb="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new m0("@firebase/firestore");function $a(){return ya.logLevel}function oe(t,...e){if(ya.logLevel<=Me.DEBUG){const n=e.map(R0);ya.debug(`Firestore (${Jo}): ${t}`,...n)}}function ki(t,...e){if(ya.logLevel<=Me.ERROR){const n=e.map(R0);ya.error(`Firestore (${Jo}): ${t}`,...n)}}function Cs(t,...e){if(ya.logLevel<=Me.WARN){const n=e.map(R0);ya.warn(`Firestore (${Jo}): ${t}`,...n)}}function R0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,WA(t,r,n)}function WA(t,e,n){let r=`FIRESTORE (${Jo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ki(r),new Error(r)}function Ge(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||WA(e,i,r)}function Ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends kr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _O{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pn.UNAUTHENTICATED))}shutdown(){}}class bO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class EO{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ge(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Si;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Si,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Si)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string",31837,{l:r}),new ZA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new pn(e)}}class wO{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class TO{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new wO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Eb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ge(this.o===void 0,3512);const r=s=>{s.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,oe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Eb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Eb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=xO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function Pp(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Se(r,i);{const s=JA(),a=SO(s.encode(wb(t,n)),s.encode(wb(e,n)));return a!==0?a:Se(r,i)}}n+=r>65535?2:1}return Se(t.length,e.length)}function wb(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function SO(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Se(t[n],e[n]);return Se(t.length,e.length)}function Vo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="__name__";class Fr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ve(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Fr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Fr.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Se(e.length,n.length)}static compareSegments(e,n){const r=Fr.isNumericId(e),i=Fr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Fr.extractNumericId(e).compare(Fr.extractNumericId(n)):Pp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Es.fromString(e.substring(4,e.length-2))}}class st extends Fr{construct(e,n,r){return new st(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new st(n)}static emptyPath(){return new st([])}}const RO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Fr{construct(e,n,r){return new on(e,n,r)}static isValidIdentifier(e){return RO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tb}static keyField(){return new on([Tb])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ae(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new ae(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ae(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new ae(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(n)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(st.fromString(e))}static fromName(e){return new de(st.fromString(e).popFirst(5))}static empty(){return new de(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(t,e,n){if(!n)throw new ae(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function CO(t,e,n,r){if(e===!0&&r===!0)throw new ae(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ab(t){if(!de.isDocumentKey(t))throw new ae(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xb(t){if(de.isDocumentKey(t))throw new ae(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tx(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Jf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve(12329,{type:typeof t})}function yr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ae(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jf(t);throw new ae(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t,e){const n={typeString:t};return e&&(n.value=e),n}function Wu(t,e){if(!tx(t))throw new ae(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new ae(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=-62135596800,Rb=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Rb);return new ct(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Sb)throw new ae(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Rb}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wu(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Ht("string",ct._jsonSchemaVersion),seconds:Ht("number"),nanoseconds:Ht("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new ct(0,0))}static max(){return new Te(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=-1;function NO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Te.fromTimestamp(r===1e9?new ct(n+1,0):new ct(n,r));return new Ns(i,de.empty(),e)}function IO(t){return new Ns(t.readTime,t.key,_u)}class Ns{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ns(Te.min(),de.empty(),_u)}static max(){return new Ns(Te.max(),de.empty(),_u)}}function DO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==OO)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,r)=>{n(e)})}static reject(e){return new Z((n,r)=>{r(e)})}static waitFor(e){return new Z((n,r)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&n()},l=>r(l))}),a=!0,s===i&&n()})}static or(e){let n=Z.resolve(!1);for(const r of e)n=n.next(i=>i?Z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Z((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{a[c]=h,++o,o===s&&r(a)},h=>i(h))}})}static doWhile(e,n){return new Z((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function kO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}ed.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=-1;function td(t){return t==null}function sf(t){return t===0&&1/t==-1/0}function PO(t){return typeof t=="number"&&Number.isInteger(t)&&!sf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="";function jO(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Cb(e)),e=UO(t.get(n),e);return Cb(e)}function UO(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case nx:n+="";break;default:n+=s}}return n}function Cb(t){return t+nx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){this.comparator=e,this.root=n||sn.EMPTY}insert(e,n){return new _t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uc(this.root,e,this.comparator,!0)}}class Uc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??sn.RED,this.left=i??sn.EMPTY,this.right=s??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new sn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return sn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ib(this.data.getIterator())}getIteratorFrom(e){return new Ib(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Yt(this.comparator);return n.data=e,n}}class Ib{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Wn([])}unionWith(e){let n=new Yt(on.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ix("Invalid base64 string: "+s):s}}(e);return new un(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new un(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const LO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Is(t){if(Ge(!!t,39018),typeof t=="string"){let e=0;const n=LO.exec(t);if(Ge(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pt(t.seconds),nanos:Pt(t.nanos)}}function Pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ds(t){return typeof t=="string"?un.fromBase64String(t):un.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="server_timestamp",ax="__type__",ox="__previous_value__",lx="__local_write_time__";function I0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[ax])===null||n===void 0?void 0:n.stringValue)===sx}function nd(t){const e=t.mapValue.fields[ox];return I0(e)?nd(e):e}function bu(t){const e=Is(t.mapValue.fields[lx].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,n,r,i,s,a,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const af="(default)";class Eu{constructor(e,n){this.projectId=e,this.database=n||af}static empty(){return new Eu("","")}get isDefaultDatabase(){return this.database===af}isEqual(e){return e instanceof Eu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="__type__",zO="__max__",Lc={mapValue:{}},cx="__vector__",of="value";function Os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?I0(t)?4:FO(t)?9007199254740991:BO(t)?10:11:ve(28295,{value:t})}function ri(t,e){if(t===e)return!0;const n=Os(t);if(n!==Os(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bu(t).isEqual(bu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Is(i.timestampValue),o=Is(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ds(i.bytesValue).isEqual(Ds(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Pt(i.geoPointValue.latitude)===Pt(s.geoPointValue.latitude)&&Pt(i.geoPointValue.longitude)===Pt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Pt(i.integerValue)===Pt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Pt(i.doubleValue),o=Pt(s.doubleValue);return a===o?sf(a)===sf(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Vo(t.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(Nb(a)!==Nb(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!ri(a[l],o[l])))return!1;return!0}(t,e);default:return ve(52216,{left:t})}}function wu(t,e){return(t.values||[]).find(n=>ri(n,e))!==void 0}function zo(t,e){if(t===e)return 0;const n=Os(t),r=Os(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=Pt(s.integerValue||s.doubleValue),l=Pt(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return Db(t.timestampValue,e.timestampValue);case 4:return Db(bu(t),bu(e));case 5:return Pp(t.stringValue,e.stringValue);case 6:return function(s,a){const o=Ds(s),l=Ds(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const h=Se(o[c],l[c]);if(h!==0)return h}return Se(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=Se(Pt(s.latitude),Pt(a.latitude));return o!==0?o:Se(Pt(s.longitude),Pt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ob(t.arrayValue,e.arrayValue);case 10:return function(s,a){var o,l,c,h;const d=s.fields||{},f=a.fields||{},m=(o=d[of])===null||o===void 0?void 0:o.arrayValue,E=(l=f[of])===null||l===void 0?void 0:l.arrayValue,N=Se(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:Ob(m,E)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Lc.mapValue&&a===Lc.mapValue)return 0;if(s===Lc.mapValue)return 1;if(a===Lc.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=Pp(l[d],h[d]);if(f!==0)return f;const m=zo(o[l[d]],c[h[d]]);if(m!==0)return m}return Se(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ve(23264,{le:n})}}function Db(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Is(t),r=Is(e),i=Se(n.seconds,r.seconds);return i!==0?i:Se(n.nanos,r.nanos)}function Ob(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=zo(n[i],r[i]);if(s)return s}return Se(n.length,r.length)}function Bo(t){return jp(t)}function jp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Is(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ds(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=jp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${jp(n.fields[a])}`;return i+"}"}(t.mapValue):ve(61005,{value:t})}function hh(t){switch(Os(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nd(t);return e?16+hh(e):16;case 5:return 2*t.stringValue.length;case 6:return Ds(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+hh(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Vs(r.fields,(s,a)=>{i+=s.length+hh(a)}),i}(t.mapValue);default:throw ve(13486,{value:t})}}function Mb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Up(t){return!!t&&"integerValue"in t}function D0(t){return!!t&&"arrayValue"in t}function kb(t){return!!t&&"nullValue"in t}function Pb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fh(t){return!!t&&"mapValue"in t}function BO(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[ux])===null||n===void 0?void 0:n.stringValue)===cx}function Xl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Vs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Xl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function FO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===zO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xl(n)}setAll(e){let n=on.emptyPath(),r={},i=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=o.popLast()}a?r[o.lastSegment()]=Xl(a):i.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());fh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];fh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Vs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new jn(Xl(this.value))}}function hx(t){const e=[];return Vs(t.fields,(n,r)=>{const i=new on([n]);if(fh(r)){const s=hx(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,n,r,i,s,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new gn(e,0,Te.min(),Te.min(),Te.min(),jn.empty(),0)}static newFoundDocument(e,n,r,i){return new gn(e,1,n,Te.min(),r,i,0)}static newNoDocument(e,n){return new gn(e,2,n,Te.min(),Te.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new gn(e,3,n,Te.min(),Te.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n){this.position=e,this.inclusive=n}}function jb(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=de.comparator(de.fromName(a.referenceValue),n.key):r=zo(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ub(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ri(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n="asc"){this.field=e,this.dir=n}}function HO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{}class Ft extends fx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new GO(e,n,r):n==="array-contains"?new KO(e,r):n==="in"?new YO(e,r):n==="not-in"?new XO(e,r):n==="array-contains-any"?new WO(e,r):new Ft(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new $O(e,r):new QO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(zo(n,this.value)):n!==null&&Os(this.value)===Os(n)&&this.matchesComparison(zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dr extends fx{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Dr(e,n)}matches(e){return dx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function dx(t){return t.op==="and"}function mx(t){return qO(t)&&dx(t)}function qO(t){for(const e of t.filters)if(e instanceof Dr)return!1;return!0}function Lp(t){if(t instanceof Ft)return t.field.canonicalString()+t.op.toString()+Bo(t.value);if(mx(t))return t.filters.map(e=>Lp(e)).join(",");{const e=t.filters.map(n=>Lp(n)).join(",");return`${t.op}(${e})`}}function px(t,e){return t instanceof Ft?function(r,i){return i instanceof Ft&&r.op===i.op&&r.field.isEqual(i.field)&&ri(r.value,i.value)}(t,e):t instanceof Dr?function(r,i){return i instanceof Dr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&px(a,i.filters[o]),!0):!1}(t,e):void ve(19439)}function gx(t){return t instanceof Ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Bo(n.value)}`}(t):t instanceof Dr?function(n){return n.op.toString()+" {"+n.getFilters().map(gx).join(" ,")+"}"}(t):"Filter"}class GO extends Ft{constructor(e,n,r){super(e,n,r),this.key=de.fromName(r.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class $O extends Ft{constructor(e,n){super(e,"in",n),this.keys=yx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QO extends Ft{constructor(e,n){super(e,"not-in",n),this.keys=yx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>de.fromName(r.referenceValue))}class KO extends Ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return D0(n)&&wu(n.arrayValue,this.value)}}class YO extends Ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wu(this.value.arrayValue,n)}}class XO extends Ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!wu(this.value.arrayValue,n)}}class WO extends Ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!D0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e,n=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Pe=null}}function Lb(t,e=null,n=[],r=[],i=null,s=null,a=null){return new ZO(t,e,n,r,i,s,a)}function O0(t){const e=Ae(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Lp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),td(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Bo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Bo(r)).join(",")),e.Pe=n}return e.Pe}function M0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!HO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!px(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ub(t.startAt,e.startAt)&&Ub(t.endAt,e.endAt)}function Vp(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function JO(t,e,n,r,i,s,a,o){return new Zu(t,e,n,r,i,s,a,o)}function rd(t){return new Zu(t)}function Vb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vx(t){return t.collectionGroup!==null}function Wl(t){const e=Ae(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Yt(on.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new uf(s,r))}),n.has(on.keyField().canonicalString())||e.Te.push(new uf(on.keyField(),r))}return e.Te}function Zr(t){const e=Ae(t);return e.Ie||(e.Ie=e6(e,Wl(t))),e.Ie}function e6(t,e){if(t.limitType==="F")return Lb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new uf(i.field,s)});const n=t.endAt?new lf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new lf(t.startAt.position,t.startAt.inclusive):null;return Lb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function zp(t,e){const n=t.filters.concat([e]);return new Zu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Bp(t,e,n){return new Zu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function id(t,e){return M0(Zr(t),Zr(e))&&t.limitType===e.limitType}function _x(t){return`${O0(Zr(t))}|lt:${t.limitType}`}function Qa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>gx(i)).join(", ")}]`),td(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Bo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Bo(i)).join(",")),`Target(${r})`}(Zr(t))}; limitType=${t.limitType})`}function sd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):de.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Wl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,o,l){const c=jb(a,o,l);return a.inclusive?c<=0:c<0}(r.startAt,Wl(r),i)||r.endAt&&!function(a,o,l){const c=jb(a,o,l);return a.inclusive?c>=0:c>0}(r.endAt,Wl(r),i))}(t,e)}function t6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bx(t){return(e,n)=>{let r=!1;for(const i of Wl(t)){const s=n6(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function n6(t,e,n){const r=t.field.isKeyField()?de.comparator(e.key,n.key):function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?zo(l,c):ve(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Vs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return rx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=new _t(de.comparator);function Pi(){return r6}const Ex=new _t(de.comparator);function Il(...t){let e=Ex;for(const n of t)e=e.insert(n.key,n);return e}function wx(t){let e=Ex;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zs(){return Zl()}function Tx(){return Zl()}function Zl(){return new Ca(t=>t.toString(),(t,e)=>t.isEqual(e))}const i6=new _t(de.comparator),s6=new Yt(de.comparator);function ke(...t){let e=s6;for(const n of t)e=e.add(n);return e}const a6=new Yt(Se);function o6(){return a6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sf(e)?"-0":e}}function Ax(t){return{integerValue:""+t}}function l6(t,e){return PO(e)?Ax(e):k0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(){this._=void 0}}function u6(t,e,n){return t instanceof cf?function(i,s){const a={fields:{[ax]:{stringValue:sx},[lx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&I0(s)&&(s=nd(s)),s&&(a.fields[ox]=s),{mapValue:a}}(n,e):t instanceof Tu?Sx(t,e):t instanceof Au?Rx(t,e):function(i,s){const a=xx(i,s),o=zb(a)+zb(i.Ee);return Up(a)&&Up(i.Ee)?Ax(o):k0(i.serializer,o)}(t,e)}function c6(t,e,n){return t instanceof Tu?Sx(t,e):t instanceof Au?Rx(t,e):n}function xx(t,e){return t instanceof hf?function(r){return Up(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class cf extends ad{}class Tu extends ad{constructor(e){super(),this.elements=e}}function Sx(t,e){const n=Cx(e);for(const r of t.elements)n.some(i=>ri(i,r))||n.push(r);return{arrayValue:{values:n}}}class Au extends ad{constructor(e){super(),this.elements=e}}function Rx(t,e){let n=Cx(e);for(const r of t.elements)n=n.filter(i=>!ri(i,r));return{arrayValue:{values:n}}}class hf extends ad{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function zb(t){return Pt(t.integerValue||t.doubleValue)}function Cx(t){return D0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function h6(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Tu&&i instanceof Tu||r instanceof Au&&i instanceof Au?Vo(r.elements,i.elements,ri):r instanceof hf&&i instanceof hf?ri(r.Ee,i.Ee):r instanceof cf&&i instanceof cf}(t.transform,e.transform)}class f6{constructor(e,n){this.version=e,this.transformResults=n}}class rr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rr}static exists(e){return new rr(void 0,e)}static updateTime(e){return new rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class od{}function Nx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ld(t.key,rr.none()):new Ju(t.key,t.data,rr.none());{const n=t.data,r=jn.empty();let i=new Yt(on.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new zs(t.key,r,new Wn(i.toArray()),rr.none())}}function d6(t,e,n){t instanceof Ju?function(i,s,a){const o=i.value.clone(),l=Fb(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof zs?function(i,s,a){if(!dh(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=Fb(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(Ix(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Jl(t,e,n,r){return t instanceof Ju?function(s,a,o,l){if(!dh(s.precondition,a))return o;const c=s.value.clone(),h=Hb(s.fieldTransforms,l,a);return c.setAll(h),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof zs?function(s,a,o,l){if(!dh(s.precondition,a))return o;const c=Hb(s.fieldTransforms,l,a),h=a.data;return h.setAll(Ix(s)),h.setAll(c),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,a,o){return dh(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function m6(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=xx(r.transform,i||null);s!=null&&(n===null&&(n=jn.empty()),n.set(r.field,s))}return n||null}function Bb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vo(r,i,(s,a)=>h6(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ju extends od{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zs extends od{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ix(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Fb(t,e,n){const r=new Map;Ge(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,c6(a,o,n[i]))}return r}function Hb(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,u6(s,a,e))}return r}class ld extends od{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class p6 extends od{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&d6(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Jl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Jl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Tx();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(i.key)?null:o;const l=Nx(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,(n,r)=>Bb(n,r))&&Vo(this.baseMutations,e.baseMutations,(n,r)=>Bb(n,r))}}class P0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ge(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return i6}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new P0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,je;function _6(t){switch(t){case W.OK:return ve(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return ve(15467,{code:t})}}function Dx(t){if(t===void 0)return ki("GRPC error has no .code"),W.UNKNOWN;switch(t){case zt.OK:return W.OK;case zt.CANCELLED:return W.CANCELLED;case zt.UNKNOWN:return W.UNKNOWN;case zt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case zt.INTERNAL:return W.INTERNAL;case zt.UNAVAILABLE:return W.UNAVAILABLE;case zt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case zt.NOT_FOUND:return W.NOT_FOUND;case zt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case zt.ABORTED:return W.ABORTED;case zt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case zt.DATA_LOSS:return W.DATA_LOSS;default:return ve(39323,{code:t})}}(je=zt||(zt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=new Es([4294967295,4294967295],0);function qb(t){const e=JA().encode(t),n=new GA;return n.update(e),new Uint8Array(n.digest())}function Gb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Es([n,r],0),new Es([i,s],0)]}class j0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Dl(`Invalid padding: ${n}`);if(r<0)throw new Dl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Dl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Dl(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Es.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Es.fromNumber(r)));return i.compare(b6)===1&&(i=new Es([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=qb(e),[r,i]=Gb(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(r,i,s);if(!this.ye(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new j0(s,i,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.fe===0)return;const n=qb(e),[r,i]=Gb(n);for(let s=0;s<this.hashCount;s++){const a=this.pe(r,i,s);this.we(a)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ec.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ud(Te.min(),i,new _t(Se),Pi(),ke())}}class ec{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ec(r,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class Ox{constructor(e,n){this.targetId=e,this.De=n}}class Mx{constructor(e,n,r=un.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class $b{constructor(){this.ve=0,this.Ce=Qb(),this.Fe=un.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ke(),n=ke(),r=ke();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ve(38017,{changeType:s})}}),new ec(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Qb()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ge(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class E6{constructor(e){this.We=e,this.Ge=new Map,this.ze=Pi(),this.je=Vc(),this.Je=Vc(),this.He=new _t(Se)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:ve(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const s=i.target;if(Vp(s))if(r===0){const a=new de(s.path);this.Xe(n,a,gn.newNoDocument(a,Te.min()))}else Ge(r===1,20013,{expectedCount:r});else{const a=this.ot(n);if(a!==r){const o=this._t(e),l=o?this.ut(o,e,a):1;if(l!==0){this.rt(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,o;try{a=Ds(r).toUint8Array()}catch(l){if(l instanceof ix)return Cs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new j0(a,i,s)}catch(l){return Cs(l instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.fe===0?null:o}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.We.lt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Xe(n,s,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((s,a)=>{const o=this.st(a);if(o){if(s.current&&Vp(o.target)){const l=new de(o.target.path);this.Tt(l).has(a)||this.It(a,l)||this.Xe(a,l,gn.newNoDocument(l,e))}s.Ne&&(n.set(a,s.Le()),s.ke())}});let r=ke();this.Je.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.st(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.ze.forEach((s,a)=>a.setReadTime(e));const i=new ud(e,n,this.He,this.ze,r);return this.ze=Pi(),this.je=Vc(),this.Je=Vc(),this.He=new _t(Se),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new $b,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Yt(Se),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Yt(Se),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new $b),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Vc(){return new _t(de.comparator)}function Qb(){return new _t(de.comparator)}const w6={asc:"ASCENDING",desc:"DESCENDING"},T6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A6={and:"AND",or:"OR"};class x6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fp(t,e){return t.useProto3Json||td(e)?e:{value:e}}function ff(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function S6(t,e){return ff(t,e.toTimestamp())}function Jr(t){return Ge(!!t,49232),Te.fromTimestamp(function(n){const r=Is(n);return new ct(r.seconds,r.nanos)}(t))}function U0(t,e){return Hp(t,e).canonicalString()}function Hp(t,e){const n=function(i){return new st(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Px(t){const e=st.fromString(t);return Ge(zx(e),10190,{key:e.toString()}),e}function qp(t,e){return U0(t.databaseId,e.path)}function pm(t,e){const n=Px(e);if(n.get(1)!==t.databaseId.projectId)throw new ae(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ae(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(Ux(n))}function jx(t,e){return U0(t.databaseId,e)}function R6(t){const e=Px(t);return e.length===4?st.emptyPath():Ux(e)}function Gp(t){return new st(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ux(t){return Ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Kb(t,e,n){return{name:qp(t,e),fields:n.value.mapValue.fields}}function C6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ve(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Ge(h===void 0||typeof h=="string",58123),un.fromBase64String(h||"")):(Ge(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),un.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const h=c.code===void 0?W.UNKNOWN:Dx(c.code);return new ae(h,c.message||"")}(a);n=new Mx(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=pm(t,r.document.name),s=Jr(r.document.updateTime),a=r.document.createTime?Jr(r.document.createTime):Te.min(),o=new jn({mapValue:{fields:r.document.fields}}),l=gn.newFoundDocument(i,s,a,o),c=r.targetIds||[],h=r.removedTargetIds||[];n=new mh(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=pm(t,r.document),s=r.readTime?Jr(r.readTime):Te.min(),a=gn.newNoDocument(i,s),o=r.removedTargetIds||[];n=new mh([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=pm(t,r.document),s=r.removedTargetIds||[];n=new mh([],s,i,null)}else{if(!("filter"in e))return ve(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new v6(i,s),o=r.targetId;n=new Ox(o,a)}}return n}function N6(t,e){let n;if(e instanceof Ju)n={update:Kb(t,e.key,e.value)};else if(e instanceof ld)n={delete:qp(t,e.key)};else if(e instanceof zs)n={update:Kb(t,e.key,e.data),updateMask:L6(e.fieldMask)};else{if(!(e instanceof p6))return ve(16599,{Rt:e.type});n={verify:qp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof cf)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Tu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Au)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof hf)return{fieldPath:a.field.canonicalString(),increment:o.Ee};throw ve(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:S6(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ve(27497)}(t,e.precondition)),n}function I6(t,e){return t&&t.length>0?(Ge(e!==void 0,14353),t.map(n=>function(i,s){let a=i.updateTime?Jr(i.updateTime):Jr(s);return a.isEqual(Te.min())&&(a=Jr(s)),new f6(a,i.transformResults||[])}(n,e))):[]}function D6(t,e){return{documents:[jx(t,e.path)]}}function O6(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=jx(t,i);const s=function(c){if(c.length!==0)return Vx(Dr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:Ka(f.field),direction:P6(f.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Fp(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{Vt:n,parent:i}}function M6(t){let e=R6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ge(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=Lx(d);return f instanceof Dr&&mx(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(d){return d.map(f=>function(E){return new uf(Ya(E.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(d){let f;return f=typeof d=="object"?d.value:d,td(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new lf(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,m=d.values||[];return new lf(m,f)}(n.endAt)),JO(e,i,a,s,o,"F",l,c)}function k6(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Lx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ya(n.unaryFilter.field);return Ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ya(n.unaryFilter.field);return Ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ya(n.unaryFilter.field);return Ft.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ya(n.unaryFilter.field);return Ft.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ft.create(Ya(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Dr.create(n.compositeFilter.filters.map(r=>Lx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ve(1026)}}(n.compositeFilter.op))}(t):ve(30097,{filter:t})}function P6(t){return w6[t]}function j6(t){return T6[t]}function U6(t){return A6[t]}function Ka(t){return{fieldPath:t.canonicalString()}}function Ya(t){return on.fromServerFormat(t.fieldPath)}function Vx(t){return t instanceof Ft?function(n){if(n.op==="=="){if(Pb(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NAN"}};if(kb(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Pb(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NAN"}};if(kb(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(n.field),op:j6(n.op),value:n.value}}}(t):t instanceof Dr?function(n){const r=n.getFilters().map(i=>Vx(i));return r.length===1?r[0]:{compositeFilter:{op:U6(n.op),filters:r}}}(t):ve(54877,{filter:t})}function L6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,r,i,s=Te.min(),a=Te.min(),o=un.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e){this.gt=e}}function z6(t){const e=M6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(){this.Dn=new F6}addToCollectionParentIndex(e,n){return this.Dn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(Ns.min())}updateCollectionGroup(e,n,r){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class F6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Yt(st.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Yt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bx=41943040;class Mn{static withCacheSize(e){return new Mn(e,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(Bx,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Fo(0)}static ur(){return new Fo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="LruGarbageCollector",H6=1048576;function Wb([t,e],[n,r]){const i=Se(t,n);return i===0?Se(e,r):i}class q6{constructor(e){this.Tr=e,this.buffer=new Yt(Wb),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Wb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class G6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){oe(Xb,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){tl(n)?oe(Xb,"Ignoring IndexedDB error during garbage collection: ",n):await el(n)}await this.Rr(3e5)})}}class $6{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(ed.ue);const r=new q6(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Yb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yb):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,a,o,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,a=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,o=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),$a()<=Me.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function Q6(t,e){return new $6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(){this.changes=new Ca(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Jl(r.mutation,i,Wn.empty(),ct.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ke()){const i=Zs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Il();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Zs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ke()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,i){let s=Pi();const a=Zl(),o=function(){return Zl()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof zs)?s=s.insert(c.key,c):h!==void 0?(a.set(c.key,h.mutation.getFieldMask()),Jl(h.mutation,c,h.mutation.getFieldMask(),ct.now())):a.set(c.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>a.set(c,h)),n.forEach((c,h)=>{var d;return o.set(c,new Y6(h,(d=a.get(c))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,n){const r=Zl();let i=new _t((a,o)=>a-o),s=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Wn.empty();h=o.applyToLocalView(c,h),r.set(l,h);const d=(i.get(o.batchId)||ke()).add(l);i=i.insert(o.batchId,d)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,h=l.value,d=Tx();h.forEach(f=>{if(!s.has(f)){const m=Nx(n.get(f),r.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return Z.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return de.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Z.resolve(Zs());let o=_u,l=s;return a.next(c=>Z.forEach(c,(h,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(h)?Z.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ke())).next(h=>({batchId:o,changes:wx(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(r=>{let i=Il();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Il();return this.indexManager.getCollectionParents(e,s).next(o=>Z.forEach(o,l=>{const c=function(d,f){return new Zu(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,f)=>{a=a.insert(d,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((l,c)=>{const h=c.getKey();a.get(h)===null&&(a=a.insert(h,gn.newInvalidDocument(h)))});let o=Il();return a.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Jl(h.mutation,c,Wn.empty(),ct.now()),sd(n,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Jr(i.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:z6(i.bundledQuery),readTime:Jr(i.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(){this.overlays=new _t(de.comparator),this.kr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zs();return Z.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),Z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),Z.resolve()}getOverlaysForCollection(e,n,r){const i=Zs(),s=n.length+1,a=new de(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new _t((c,h)=>c-h);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Zs(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const o=Zs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>o.set(c,h)),!(o.size()>=i)););return Z.resolve(o)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new y6(n,r));let s=this.kr.get(n);s===void 0&&(s=ke(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.qr=new Yt(Wt.Qr),this.$r=new Yt(Wt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Wt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Wt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new de(new st([])),r=new Wt(n,e),i=new Wt(n,e+1),s=[];return this.$r.forEachInRange([r,i],a=>{this.Wr(a),s.push(a.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new de(new st([])),r=new Wt(n,e),i=new Wt(n,e+1);let s=ke();return this.$r.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Wt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Wt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return de.comparator(e.key,n.key)||Se(e.Hr,n.Hr)}static Ur(e,n){return Se(e.Hr,n.Hr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Yt(Wt.Qr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new g6(s,n,r,i);this.mutationQueue.push(a);for(const o of i)this.Yr=this.Yr.add(new Wt(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Z.resolve(a)}lookupMutationBatch(e,n){return Z.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return Z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?N0:this.er-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Wt(n,0),i=new Wt(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],a=>{const o=this.Zr(a.Hr);s.push(o)}),Z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Yt(Se);return n.forEach(i=>{const s=new Wt(i,0),a=new Wt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,a],o=>{r=r.add(o.Hr)})}),Z.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;de.isDocumentKey(s)||(s=s.child(""));const a=new Wt(new de(s),0);let o=new Yt(Se);return this.Yr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(o=o.add(l.Hr)),!0)},a),Z.resolve(this.ei(o))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ge(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Z.forEach(n.mutations,i=>{const s=new Wt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Wt(n,0),i=this.Yr.firstAfterOrEqual(r);return Z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e){this.ni=e,this.docs=function(){return new _t(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Z.resolve(r?r.document.mutableCopy():gn.newInvalidDocument(n))}getEntries(e,n){let r=Pi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():gn.newInvalidDocument(i))}),Z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Pi();const a=n.path,o=new de(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||DO(IO(h),r)<=0||(i.has(h.key)||sd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Z.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ve(9500)}ri(e,n){return Z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new nM(this)}getSize(e){return Z.resolve(this.size)}}class nM extends K6{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),Z.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.persistence=e,this.ii=new Ca(n=>O0(n),M0),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.si=0,this.oi=new L0,this.targetCount=0,this._i=Fo.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),Z.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Fo(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.hr(n),Z.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ii.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.ii.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Z.waitFor(s).next(()=>i)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return Z.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),Z.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return Z.resolve(r)}containsKey(e,n){return Z.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n){this.ai={},this.overlays={},this.ui=new ed(0),this.ci=!1,this.ci=!0,this.li=new J6,this.referenceDelegate=e(this),this.hi=new rM(this),this.indexManager=new B6,this.remoteDocumentCache=function(i){return new tM(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new V6(n),this.Ti=new W6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Z6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new eM(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const i=new iM(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return Z.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class iM extends MO{constructor(e){super(),this.currentSequenceNumber=e}}class V0{constructor(e){this.persistence=e,this.Ai=new L0,this.Ri=null}static Vi(e){return new V0(e)}get mi(){if(this.Ri)return this.Ri;throw ve(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),Z.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.mi,r=>{const i=de.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,Te.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return Z.or([()=>Z.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class df{constructor(e,n){this.persistence=e,this.gi=new Ca(r=>jO(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Q6(this,n)}static Vi(e,n){return new df(e,n)}Ii(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return Z.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?Z.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,a=>this.Sr(e,a,n).next(o=>{o||(r++,s.removeEntry(a,Te.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),Z.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=hh(e.data.value)),n}Sr(e,n,r){return Z.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return Z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ke(),i=ke();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new z0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return Z4()?8:kO(_n())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ps(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new sM;return this.ws(e,n,a).next(o=>{if(s.result=o,this.Rs)return this.Ss(e,n,a,o.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?($a()<=Me.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):($a()<=Me.DEBUG&&oe("QueryEngine","Query:",Qa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?($a()<=Me.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zr(n))):Z.resolve())}ps(e,n){if(Vb(n))return Z.resolve(null);let r=Zr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Bp(n,null,"F"),r=Zr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=ke(...s);return this.gs.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.bs(n,o);return this.Ds(n,c,a,l.readTime)?this.ps(e,Bp(n,null,"F")):this.vs(e,c,n,l)}))})))}ys(e,n,r,i){return Vb(n)||i.isEqual(Te.min())?Z.resolve(null):this.gs.getDocuments(e,r).next(s=>{const a=this.bs(n,s);return this.Ds(n,a,r,i)?Z.resolve(null):($a()<=Me.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qa(n)),this.vs(e,a,n,NO(i,_u)).next(o=>o))})}bs(e,n){let r=new Yt(bx(e));return n.forEach((i,s)=>{sd(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return $a()<=Me.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Qa(n)),this.gs.getDocumentsMatchingQuery(e,n,Ns.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="LocalStore",oM=3e8;class lM{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new _t(Se),this.Ms=new Ca(s=>O0(s),M0),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new X6(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function uM(t,e,n,r){return new lM(t,e,n,r)}async function Hx(t,e){const n=Ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let l=ke();for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Bs:c,removedBatchIds:a,addedBatchIds:o}))})})}function cM(t,e){const n=Ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(o,l,c,h){const d=c.batch,f=d.keys();let m=Z.resolve();return f.forEach(E=>{m=m.next(()=>h.getEntry(l,E)).next(N=>{const k=c.docVersions.get(E);Ge(k!==null,48541),N.version.compareTo(k)<0&&(d.applyToRemoteDocument(N,c),N.isValidDocument()&&(N.setReadTime(c.commitVersion),h.addEntry(N)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=ke();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function qx(t){const e=Ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function hM(t,e){const n=Ae(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const o=[];e.targetChanges.forEach((h,d)=>{const f=i.get(d);if(!f)return;o.push(n.hi.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.hi.addMatchingKeys(s,h.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(un.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(d,m),function(N,k,_){return N.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=oM?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,m,h)&&o.push(n.hi.updateTargetData(s,m))});let l=Pi(),c=ke();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),o.push(fM(s,a,e.documentUpdates).next(h=>{l=h.Ls,c=h.ks})),!r.isEqual(Te.min())){const h=n.hi.getLastRemoteSnapshotVersion(s).next(d=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(h)}return Z.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Fs=i,s))}function fM(t,e,n){let r=ke(),i=ke();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Pi();return n.forEach((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Te.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):oe(B0,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ls:a,ks:i}})}function dM(t,e){const n=Ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=N0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function mM(t,e){const n=Ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,Z.resolve(i)):n.hi.allocateTargetId(r).next(a=>(i=new cs(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function $p(t,e,n){const r=Ae(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!tl(a))throw a;oe(B0,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function Zb(t,e,n){const r=Ae(t);let i=Te.min(),s=ke();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,h){const d=Ae(l),f=d.Ms.get(h);return f!==void 0?Z.resolve(d.Fs.get(f)):d.hi.getTargetData(c,h)}(r,a,Zr(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,n?i:Te.min(),n?s:ke())).next(o=>(pM(r,t6(e),o),{documents:o,qs:s})))}function pM(t,e,n){let r=t.xs.get(e)||Te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}class Jb{constructor(){this.activeTargetIds=o6()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gM{constructor(){this.Fo=new Jb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Jb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="ConnectivityMonitor";class t1{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){oe(e1,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){oe(e1,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc=null;function Qp(){return zc===null?zc=function(){return 268435456+Math.round(2147483648*Math.random())}():zc++,"0x"+zc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="RestConnection",vM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _M{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===af?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const a=Qp(),o=this.Go(e,n.toUriEncodedString());oe(gm,`Sending RPC '${e}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,s);const{host:c}=new URL(o),h=Ui(c);return this.jo(e,o,l,r,h).then(d=>(oe(gm,`Received RPC '${e}' ${a}: `,d),d),d=>{throw Cs(gm,`RPC '${e}' ${a} failed with error: `,d,"url: ",o,"request:",r),d})}Jo(e,n,r,i,s,a){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){const r=vM[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class EM extends _M{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){const a=Qp();return new Promise((o,l)=>{const c=new $A;c.setWithCredentials(!0),c.listenOnce(QA.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ch.NO_ERROR:const d=c.getResponseJson();oe(dn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case ch.TIMEOUT:oe(dn,`RPC '${e}' ${a} timed out`),l(new ae(W.DEADLINE_EXCEEDED,"Request time out"));break;case ch.HTTP_ERROR:const f=c.getStatus();if(oe(dn,`RPC '${e}' ${a} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const E=m==null?void 0:m.error;if(E&&E.status&&E.message){const N=function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(x)>=0?x:W.UNKNOWN}(E.status);l(new ae(N,E.message))}else l(new ae(W.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ae(W.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{c_:e,streamId:a,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{oe(dn,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(i);oe(dn,`RPC '${e}' ${a} sending request:`,i),c.send(n,"POST",h,r,15)})}P_(e,n,r){const i=Qp(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=XA(),o=YA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");oe(dn,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=a.createWebChannel(h,l);this.T_(d);let f=!1,m=!1;const E=new bM({Ho:k=>{m?oe(dn,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(f||(oe(dn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),oe(dn,`RPC '${e}' stream ${i} sending:`,k),d.send(k))},Yo:()=>d.close()}),N=(k,_,x)=>{k.listen(_,S=>{try{x(S)}catch(M){setTimeout(()=>{throw M},0)}})};return N(d,Nl.EventType.OPEN,()=>{m||(oe(dn,`RPC '${e}' stream ${i} transport opened.`),E.s_())}),N(d,Nl.EventType.CLOSE,()=>{m||(m=!0,oe(dn,`RPC '${e}' stream ${i} transport closed`),E.__(),this.I_(d))}),N(d,Nl.EventType.ERROR,k=>{m||(m=!0,Cs(dn,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),E.__(new ae(W.UNAVAILABLE,"The operation could not be completed")))}),N(d,Nl.EventType.MESSAGE,k=>{var _;if(!m){const x=k.data[0];Ge(!!x,16349);const S=x,M=(S==null?void 0:S.error)||((_=S[0])===null||_===void 0?void 0:_.error);if(M){oe(dn,`RPC '${e}' stream ${i} received error:`,M);const U=M.status;let T=function(v){const w=zt[v];if(w!==void 0)return Dx(w)}(U),A=M.message;T===void 0&&(T=W.INTERNAL,A="Unknown error status: "+U+" with message "+M.message),m=!0,E.__(new ae(T,A)),d.close()}else oe(dn,`RPC '${e}' stream ${i} received:`,x),E.a_(x)}}),N(o,KA.STAT_EVENT,k=>{k.stat===kp.PROXY?oe(dn,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===kp.NOPROXY&&oe(dn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.o_()},0),E}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function ym(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(t){return new x6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="PersistentStream";class $x{constructor(e,n,r,i,s,a,o,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Gx(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(ki(n.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new ae(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return oe(n1,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(oe(n1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wM extends $x{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=C6(this.serializer,e),r=function(s){if(!("targetChange"in s))return Te.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Te.min():a.readTime?Jr(a.readTime):Te.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Gp(this.serializer),n.addTarget=function(s,a){let o;const l=a.target;if(o=Vp(l)?{documents:D6(s,l)}:{query:O6(s,l).Vt},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=kx(s,a.resumeToken);const c=Fp(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Te.min())>0){o.readTime=ff(s,a.snapshotVersion.toTimestamp());const c=Fp(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=k6(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Gp(this.serializer),n.removeTarget=e,this.k_(n)}}class TM extends $x{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=I6(e.writeResults,e.commitTime),r=Jr(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Gp(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>N6(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{}class xM extends AM{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ae(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,Hp(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ae(W.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Jo(e,Hp(n,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ae(W.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class SM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ki(n),this._a=!1):oe("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="RemoteStore";class RM{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(a=>{r.enqueueAndForget(async()=>{Na(this)&&(oe(va,"Restarting streams for network reachability change."),await async function(l){const c=Ae(l);c.Ia.add(4),await tc(c),c.Aa.set("Unknown"),c.Ia.delete(4),await hd(c)}(this))})}),this.Aa=new SM(r,i)}}async function hd(t){if(Na(t))for(const e of t.da)await e(!0)}async function tc(t){for(const e of t.da)await e(!1)}function Qx(t,e){const n=Ae(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),G0(n)?q0(n):nl(n).x_()&&H0(n,e))}function F0(t,e){const n=Ae(t),r=nl(n);n.Ta.delete(e),r.x_()&&Kx(n,e),n.Ta.size===0&&(r.x_()?r.B_():Na(n)&&n.Aa.set("Unknown"))}function H0(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nl(t).H_(e)}function Kx(t,e){t.Ra.$e(e),nl(t).Y_(e)}function q0(t){t.Ra=new E6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),nl(t).start(),t.Aa.aa()}function G0(t){return Na(t)&&!nl(t).M_()&&t.Ta.size>0}function Na(t){return Ae(t).Ia.size===0}function Yx(t){t.Ra=void 0}async function CM(t){t.Aa.set("Online")}async function NM(t){t.Ta.forEach((e,n)=>{H0(t,e)})}async function IM(t,e){Yx(t),G0(t)?(t.Aa.la(e),q0(t)):t.Aa.set("Unknown")}async function DM(t,e,n){if(t.Aa.set("Online"),e instanceof Mx&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ta.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ta.delete(o),i.Ra.removeTarget(o))}(t,e)}catch(r){oe(va,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mf(t,r)}else if(e instanceof mh?t.Ra.Ye(e):e instanceof Ox?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Te.min()))try{const r=await qx(t.localStore);n.compareTo(r)>=0&&await function(s,a){const o=s.Ra.Pt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ta.get(c);h&&s.Ta.set(c,h.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const h=s.Ta.get(l);if(!h)return;s.Ta.set(l,h.withResumeToken(un.EMPTY_BYTE_STRING,h.snapshotVersion)),Kx(s,l);const d=new cs(h.target,l,c,h.sequenceNumber);H0(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){oe(va,"Failed to raise snapshot:",r),await mf(t,r)}}async function mf(t,e,n){if(!tl(e))throw e;t.Ia.add(1),await tc(t),t.Aa.set("Offline"),n||(n=()=>qx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(va,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await hd(t)})}function Xx(t,e){return e().catch(n=>mf(t,n,e))}async function fd(t){const e=Ae(t),n=Ms(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:N0;for(;OM(e);)try{const i=await dM(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,MM(e,i)}catch(i){await mf(e,i)}Wx(e)&&Zx(e)}function OM(t){return Na(t)&&t.Pa.length<10}function MM(t,e){t.Pa.push(e);const n=Ms(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function Wx(t){return Na(t)&&!Ms(t).M_()&&t.Pa.length>0}function Zx(t){Ms(t).start()}async function kM(t){Ms(t).na()}async function PM(t){const e=Ms(t);for(const n of t.Pa)e.X_(n.mutations)}async function jM(t,e,n){const r=t.Pa.shift(),i=P0.from(r,e,n);await Xx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await fd(t)}async function UM(t,e){e&&Ms(t).Z_&&await async function(r,i){if(function(a){return _6(a)&&a!==W.ABORTED}(i.code)){const s=r.Pa.shift();Ms(r).N_(),await Xx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await fd(r)}}(t,e),Wx(t)&&Zx(t)}async function r1(t,e){const n=Ae(t);n.asyncQueue.verifyOperationInProgress(),oe(va,"RemoteStore received new credentials");const r=Na(n);n.Ia.add(3),await tc(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await hd(n)}async function LM(t,e){const n=Ae(t);e?(n.Ia.delete(2),await hd(n)):e||(n.Ia.add(2),await tc(n),n.Aa.set("Unknown"))}function nl(t){return t.Va||(t.Va=function(n,r,i){const s=Ae(n);return s.ia(),new wM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:CM.bind(null,t),e_:NM.bind(null,t),n_:IM.bind(null,t),J_:DM.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),G0(t)?q0(t):t.Aa.set("Unknown")):(await t.Va.stop(),Yx(t))})),t.Va}function Ms(t){return t.ma||(t.ma=function(n,r,i){const s=Ae(n);return s.ia(),new TM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:kM.bind(null,t),n_:UM.bind(null,t),ea:PM.bind(null,t),ta:jM.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await fd(t)):(await t.ma.stop(),t.Pa.length>0&&(oe(va,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,o=new $0(e,n,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Q0(t,e){if(ki("AsyncQueue",`${e}: ${t}`),tl(t))return new ae(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{static emptySet(e){return new To(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||de.comparator(n.key,r.key):(n,r)=>de.comparator(n.key,r.key),this.keyedMap=Il(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof To)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new To;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(){this.fa=new _t(de.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):ve(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ho{constructor(e,n,r,i,s,a,o,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new Ho(e,n,To.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class zM{constructor(){this.queries=s1(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=Ae(n),s=i.queries;i.queries=s1(),s.forEach((a,o)=>{for(const l of o.wa)l.onError(r)})})(this,new ae(W.ABORTED,"Firestore shutting down"))}}function s1(){return new Ca(t=>_x(t),id)}async function K0(t,e){const n=Ae(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new VM,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const o=Q0(a,`Initialization of query '${Qa(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&X0(n)}async function Y0(t,e){const n=Ae(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.wa.indexOf(e);a>=0&&(s.wa.splice(a,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function BM(t,e){const n=Ae(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const o of a.wa)o.Ca(i)&&(r=!0);a.ya=i}}r&&X0(n)}function FM(t,e,n){const r=Ae(t),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(e)}function X0(t){t.Da.forEach(e=>{e.next()})}var Kp,a1;(a1=Kp||(Kp={})).Fa="default",a1.Cache="cache";class W0{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ho(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Kp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.key=e}}class e2{constructor(e){this.key=e}}class HM{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ke(),this.mutatedKeys=ke(),this.Xa=bx(e),this.eu=new To(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new i1,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const f=i.get(h),m=sd(this.query,d)?d:null,E=!!f&&this.mutatedKeys.has(f.key),N=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let k=!1;f&&m?f.data.isEqual(m.data)?E!==N&&(r.track({type:3,doc:m}),k=!0):this.iu(f,m)||(r.track({type:2,doc:m}),k=!0,(l&&this.Xa(m,l)>0||c&&this.Xa(m,c)<0)&&(o=!0)):!f&&m?(r.track({type:0,doc:m}),k=!0):f&&!m&&(r.track({type:1,doc:f}),k=!0,(l||c)&&(o=!0)),k&&(m?(a=a.add(m),s=N?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:a,ru:r,Ds:o,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort((h,d)=>function(m,E){const N=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{At:k})}};return N(m)-N(E)}(h.type,d.type)||this.Xa(h.doc,d.doc)),this.su(r),i=i!=null&&i;const o=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,c=l!==this.Ya;return this.Ya=l,a.length!==0||c?{snapshot:new Ho(this.query,e.eu,s,a,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new i1,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ke(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new e2(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Jx(r))}),n}uu(e){this.Ha=e.qs,this.Za=ke();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ho.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Z0="SyncEngine";class qM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class GM{constructor(e){this.key=e,this.lu=!1}}class $M{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new Ca(o=>_x(o),id),this.Tu=new Map,this.Iu=new Set,this.du=new _t(de.comparator),this.Eu=new Map,this.Au=new L0,this.Ru={},this.Vu=new Map,this.mu=Fo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function QM(t,e,n=!0){const r=a2(t);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await t2(r,e,n,!0),i}async function KM(t,e){const n=a2(t);await t2(n,e,!0,!1)}async function t2(t,e,n,r){const i=await mM(t.localStore,Zr(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await YM(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&Qx(t.remoteStore,i),o}async function YM(t,e,n,r,i){t.gu=(d,f,m)=>async function(N,k,_,x){let S=k.view.nu(_);S.Ds&&(S=await Zb(N.localStore,k.query,!1).then(({documents:A})=>k.view.nu(A,S)));const M=x&&x.targetChanges.get(k.targetId),U=x&&x.targetMismatches.get(k.targetId)!=null,T=k.view.applyChanges(S,N.isPrimaryClient,M,U);return l1(N,k.targetId,T._u),T.snapshot}(t,d,f,m);const s=await Zb(t.localStore,e,!0),a=new HM(e,s.qs),o=a.nu(s.documents),l=ec.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=a.applyChanges(o,t.isPrimaryClient,l);l1(t,n,c._u);const h=new qM(e,n,a);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),c.snapshot}async function XM(t,e,n){const r=Ae(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(a=>!id(a,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await $p(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&F0(r.remoteStore,i.targetId),Yp(r,i.targetId)}).catch(el)):(Yp(r,i.targetId),await $p(r.localStore,i.targetId,!0))}async function WM(t,e){const n=Ae(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),F0(n.remoteStore,r.targetId))}async function ZM(t,e,n){const r=sk(t);try{const i=await function(a,o){const l=Ae(a),c=ct.now(),h=o.reduce((m,E)=>m.add(E.key),ke());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let E=Pi(),N=ke();return l.Os.getEntries(m,h).next(k=>{E=k,E.forEach((_,x)=>{x.isValidDocument()||(N=N.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,E)).next(k=>{d=k;const _=[];for(const x of o){const S=m6(x,d.get(x.key).overlayedDocument);S!=null&&_.push(new zs(x.key,S,hx(S.value.mapValue),rr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,_,o)}).next(k=>{f=k;const _=k.applyToLocalDocumentSet(d,N);return l.documentOverlayCache.saveOverlays(m,k.batchId,_)})}).then(()=>({batchId:f.batchId,changes:wx(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let c=a.Ru[a.currentUser.toKey()];c||(c=new _t(Se)),c=c.insert(o,l),a.Ru[a.currentUser.toKey()]=c}(r,i.batchId,n),await nc(r,i.changes),await fd(r.remoteStore)}catch(i){const s=Q0(i,"Failed to persist write");n.reject(s)}}async function n2(t,e){const n=Ae(t);try{const r=await hM(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Eu.get(s);a&&(Ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.lu=!0:i.modifiedDocuments.size>0?Ge(a.lu,14607):i.removedDocuments.size>0&&(Ge(a.lu,42227),a.lu=!1))}),await nc(n,r,e)}catch(r){await el(r)}}function o1(t,e,n){const r=Ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=Ae(a);l.onlineState=o;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.wa)f.va(o)&&(c=!0)}),c&&X0(l)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function JM(t,e,n){const r=Ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),s=i&&i.key;if(s){let a=new _t(de.comparator);a=a.insert(s,gn.newNoDocument(s,Te.min()));const o=ke().add(s),l=new ud(Te.min(),new Map,new _t(Se),a,o);await n2(r,l),r.du=r.du.remove(s),r.Eu.delete(e),J0(r)}else await $p(r.localStore,e,!1).then(()=>Yp(r,e,n)).catch(el)}async function ek(t,e){const n=Ae(t),r=e.batch.batchId;try{const i=await cM(n.localStore,e);i2(n,r,null),r2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nc(n,i)}catch(i){await el(i)}}async function tk(t,e,n){const r=Ae(t);try{const i=await function(a,o){const l=Ae(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,o).next(d=>(Ge(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);i2(r,e,n),r2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await nc(r,i)}catch(i){await el(i)}}function r2(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function i2(t,e,n){const r=Ae(t);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Yp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||s2(t,r)})}function s2(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(F0(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),J0(t))}function l1(t,e,n){for(const r of n)r instanceof Jx?(t.Au.addReference(r.key,e),nk(t,r)):r instanceof e2?(oe(Z0,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||s2(t,r.key)):ve(19791,{yu:r})}function nk(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(oe(Z0,"New document in limbo: "+n),t.Iu.add(r),J0(t))}function J0(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new de(st.fromString(e)),r=t.mu.next();t.Eu.set(r,new GM(n)),t.du=t.du.insert(n,r),Qx(t.remoteStore,new cs(Zr(rd(n.path)),r,"TargetPurposeLimboResolution",ed.ue))}}async function nc(t,e,n){const r=Ae(t),i=[],s=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((o,l)=>{a.push(r.gu(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=z0.Es(l.targetId,c);s.push(d)}}))}),await Promise.all(a),r.hu.J_(i),await async function(l,c){const h=Ae(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Z.forEach(c,f=>Z.forEach(f.Is,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>Z.forEach(f.ds,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!tl(d))throw d;oe(B0,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const m=h.Fs.get(f),E=m.snapshotVersion,N=m.withLastLimboFreeSnapshotVersion(E);h.Fs=h.Fs.insert(f,N)}}}(r.localStore,s))}async function rk(t,e){const n=Ae(t);if(!n.currentUser.isEqual(e)){oe(Z0,"User change. New user:",e.toKey());const r=await Hx(n.localStore,e);n.currentUser=e,function(s,a){s.Vu.forEach(o=>{o.forEach(l=>{l.reject(new ae(W.CANCELLED,a))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await nc(n,r.Bs)}}function ik(t,e){const n=Ae(t),r=n.Eu.get(e);if(r&&r.lu)return ke().add(r.key);{let i=ke();const s=n.Tu.get(e);if(!s)return i;for(const a of s){const o=n.Pu.get(a);i=i.unionWith(o.view.tu)}return i}}function a2(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=n2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ik.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JM.bind(null,e),e.hu.J_=BM.bind(null,e.eventManager),e.hu.pu=FM.bind(null,e.eventManager),e}function sk(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ek.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tk.bind(null,e),e}class pf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return uM(this.persistence,new aM,e.initialUser,this.serializer)}Du(e){return new Fx(V0.Vi,this.serializer)}bu(e){return new gM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pf.provider={build:()=>new pf};class ak extends pf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ge(this.persistence.referenceDelegate instanceof df,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new G6(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Mn.withCacheSize(this.cacheSizeBytes):Mn.DEFAULT;return new Fx(r=>df.Vi(r,n),this.serializer)}}class Xp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>o1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rk.bind(null,this.syncEngine),await LM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zM}()}createDatastore(e){const n=cd(e.databaseInfo.databaseId),r=function(s){return new EM(s)}(e.databaseInfo);return function(s,a,o,l){return new xM(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,o){return new RM(r,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>o1(this.syncEngine,n,0),function(){return t1.C()?new t1:new yM}())}createSyncEngine(e,n){return function(i,s,a,o,l,c,h){const d=new $M(i,s,a,o,l,c);return h&&(d.fu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Ae(i);oe(va,"RemoteStore shutting down."),s.Ia.add(5),await tc(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Xp.provider={build:()=>new Xp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ki("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="FirestoreClient";class ok{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pn.UNAUTHENTICATED,this.clientId=C0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{oe(ks,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(oe(ks,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Q0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function vm(t,e){t.asyncQueue.verifyOperationInProgress(),oe(ks,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Hx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Cs("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{oe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Cs("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function u1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lk(t);oe(ks,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>r1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>r1(e.remoteStore,i)),t._onlineComponents=e}async function lk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(ks,"Using user provided OfflineComponentProvider");try{await vm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===W.FAILED_PRECONDITION||i.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Cs("Error using user provided cache. Falling back to memory cache: "+n),await vm(t,new pf)}}else oe(ks,"Using default OfflineComponentProvider"),await vm(t,new ak(void 0));return t._offlineComponents}async function o2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(ks,"Using user provided OnlineComponentProvider"),await u1(t,t._uninitializedComponentsProvider._online)):(oe(ks,"Using default OnlineComponentProvider"),await u1(t,new Xp))),t._onlineComponents}function uk(t){return o2(t).then(e=>e.syncEngine)}async function gf(t){const e=await o2(t),n=e.eventManager;return n.onListen=QM.bind(null,e.syncEngine),n.onUnlisten=XM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=KM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=WM.bind(null,e.syncEngine),n}function ck(t,e,n={}){const r=new Si;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const h=new ey({next:f=>{h.Ou(),a.enqueueAndForget(()=>Y0(s,d));const m=f.docs.has(o);!m&&f.fromCache?c.reject(new ae(W.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new ae(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new W0(rd(o.path),h,{includeMetadataChanges:!0,ka:!0});return K0(s,d)}(await gf(t),t.asyncQueue,e,n,r)),r.promise}function hk(t,e,n={}){const r=new Si;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const h=new ey({next:f=>{h.Ou(),a.enqueueAndForget(()=>Y0(s,d)),f.fromCache&&l.source==="server"?c.reject(new ae(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new W0(o,h,{includeMetadataChanges:!0,ka:!0});return K0(s,d)}(await gf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="firestore.googleapis.com",h1=!0;class f1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=u2,this.ssl=h1}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:h1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Bx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<H6)throw new ae(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=l2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new f1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new f1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _O;switch(r.type){case"firstParty":return new TO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=c1.get(n);r&&(oe("ComponentProvider","Removing Datastore"),c1.delete(n),r.terminate())}(this),Promise.resolve()}}function fk(t,e,n,r={}){var i;t=yr(t,dd);const s=Ui(e),a=t._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;s&&(Qf(`https://${l}`),Kf("Firestore",!0)),a.host!==u2&&a.host!==l&&Cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},a),{host:l,ssl:s,emulatorOptions:r});if(!pa(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,d;if(typeof r.mockUserToken=="string")h=r.mockUserToken,d=pn.MOCK_USER;else{h=uA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ae(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new pn(f)}t._authCredentials=new bO(new ZA(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ia(this.firestore,e,this._query)}}class jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}toJSON(){return{type:jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Wu(n,jt._jsonSchema))return new jt(e,r||null,new de(st.fromString(n.referencePath)))}}jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:Ht("string",jt._jsonSchemaVersion),referencePath:Ht("string")};class ws extends Ia{constructor(e,n,r){super(e,n,rd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new de(e))}withConverter(e){return new ws(this.firestore,e,this._path)}}function dk(t,e,...n){if(t=rt(t),ex("collection","path",e),t instanceof dd){const r=st.fromString(e,...n);return xb(r),new ws(t,null,r)}{if(!(t instanceof jt||t instanceof ws))throw new ae(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(st.fromString(e,...n));return xb(r),new ws(t.firestore,null,r)}}function c2(t,e,...n){if(t=rt(t),arguments.length===1&&(e=C0.newId()),ex("doc","path",e),t instanceof dd){const r=st.fromString(e,...n);return Ab(r),new jt(t,null,new de(r))}{if(!(t instanceof jt||t instanceof ws))throw new ae(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(st.fromString(e,...n));return Ab(r),new jt(t.firestore,t instanceof ws?t.converter:null,new de(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="AsyncQueue";class m1{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Gx(this,"async_queue_retry"),this.oc=()=>{const r=ym();r&&oe(d1,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=ym();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=ym();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Si;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!tl(e))throw e;oe(d1,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ki("INTERNAL UNHANDLED ERROR: ",p1(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=$0.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&ve(47125,{hc:p1(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function p1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ps extends dd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new m1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new m1(e),this._firestoreClient=void 0,await e}}}function mk(t,e){const n=typeof t=="object"?t:Yf(),r=typeof t=="string"?t:af,i=Qu(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=d0("firestore");s&&fk(i,...s)}return i}function rc(t){if(t._terminated)throw new ae(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pk(t),t._firestoreClient}function pk(t){var e,n,r;const i=t._freezeSettings(),s=function(o,l,c,h){return new VO(o,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,l2(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new ok(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dr(un.fromBase64String(e))}catch(n){throw new ae(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new dr(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:dr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wu(e,dr._jsonSchema))return dr.fromBase64String(e.bytes)}}dr._jsonSchemaVersion="firestore/bytes/1.0",dr._jsonSchema={type:Ht("string",dr._jsonSchemaVersion),bytes:Ht("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ei._jsonSchemaVersion}}static fromJSON(e){if(Wu(e,ei._jsonSchema))return new ei(e.latitude,e.longitude)}}ei._jsonSchemaVersion="firestore/geoPoint/1.0",ei._jsonSchema={type:Ht("string",ei._jsonSchemaVersion),latitude:Ht("number"),longitude:Ht("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ti._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wu(e,ti._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ti(e.vectorValues);throw new ae(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ti._jsonSchemaVersion="firestore/vectorValue/1.0",ti._jsonSchema={type:Ht("string",ti._jsonSchemaVersion),vectorValues:Ht("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=/^__.*__$/;class yk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ju(e,this.data,n,this.fieldTransforms)}}class h2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function f2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ec:t})}}class ny{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new ny(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return yf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(f2(this.Ec)&&gk.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class vk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||cd(e)}Dc(e,n,r,i=!1){return new ny({Ec:e,methodName:n,bc:r,path:on.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ry(t){const e=t._freezeSettings(),n=cd(t._databaseId);return new vk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function d2(t,e,n,r,i,s={}){const a=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);iy("Data must be an object, but it was:",a,r);const o=m2(r,a);let l,c;if(s.merge)l=new Wn(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=Wp(e,d,n);if(!a.contains(f))throw new ae(W.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);g2(h,f)||h.push(f)}l=new Wn(h),c=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=a.fieldTransforms;return new yk(new jn(o),l,c)}class pd extends ty{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pd}}function _k(t,e,n,r){const i=t.Dc(1,e,n);iy("Data must be an object, but it was:",i,r);const s=[],a=jn.empty();Vs(r,(l,c)=>{const h=sy(e,l,n);c=rt(c);const d=i.gc(h);if(c instanceof pd)s.push(h);else{const f=ic(c,d);f!=null&&(s.push(h),a.set(h,f))}});const o=new Wn(s);return new h2(a,o,i.fieldTransforms)}function bk(t,e,n,r,i,s){const a=t.Dc(1,e,n),o=[Wp(e,r,n)],l=[i];if(s.length%2!=0)throw new ae(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)o.push(Wp(e,s[f])),l.push(s[f+1]);const c=[],h=jn.empty();for(let f=o.length-1;f>=0;--f)if(!g2(c,o[f])){const m=o[f];let E=l[f];E=rt(E);const N=a.gc(m);if(E instanceof pd)c.push(m);else{const k=ic(E,N);k!=null&&(c.push(m),h.set(m,k))}}const d=new Wn(c);return new h2(h,d,a.fieldTransforms)}function Ek(t,e,n,r=!1){return ic(n,t.Dc(r?4:3,e))}function ic(t,e){if(p2(t=rt(t)))return iy("Unsupported field value:",e,t),m2(t,e);if(t instanceof ty)return function(r,i){if(!f2(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let l=ic(o,i.yc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return l6(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ct.fromDate(r);return{timestampValue:ff(i.serializer,s)}}if(r instanceof ct){const s=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ff(i.serializer,s)}}if(r instanceof ei)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dr)return{bytesValue:kx(i.serializer,r._byteString)};if(r instanceof jt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:U0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ti)return function(a,o){return{mapValue:{fields:{[ux]:{stringValue:cx},[of]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.wc("VectorValues must only contain numeric values.");return k0(o.serializer,c)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Jf(r)}`)}(t,e)}function m2(t,e){const n={};return rx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vs(t,(r,i)=>{const s=ic(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function p2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof ei||t instanceof dr||t instanceof jt||t instanceof ty||t instanceof ti)}function iy(t,e,n){if(!p2(n)||!tx(n)){const r=Jf(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Wp(t,e,n){if((e=rt(e))instanceof md)return e._internalPath;if(typeof e=="string")return sy(t,e);throw yf("Field path arguments must be of type string or ",t,!1,void 0,n)}const wk=new RegExp("[~\\*/\\[\\]]");function sy(t,e,n){if(e.search(wk)>=0)throw yf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new md(...e.split("."))._internalPath}catch{throw yf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yf(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new ae(W.INVALID_ARGUMENT,o+t+l)}function g2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Tk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(v2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Tk extends y2{data(){return super.data()}}function v2(t,e){return typeof e=="string"?sy(t,e):e instanceof md?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ae(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ay{}class Ak extends ay{}function xk(t,e,...n){let r=[];e instanceof ay&&r.push(e),r=r.concat(n),function(s){const a=s.filter(l=>l instanceof ly).length,o=s.filter(l=>l instanceof oy).length;if(a>1||a>0&&o>0)throw new ae(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class oy extends Ak{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new oy(e,n,r)}_apply(e){const n=this._parse(e);return b2(e._query,n),new Ia(e.firestore,e.converter,zp(e._query,n))}_parse(e){const n=ry(e.firestore);return function(s,a,o,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ae(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){v1(d,h);const E=[];for(const N of d)E.push(y1(l,s,N));f={arrayValue:{values:E}}}else f=y1(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||v1(d,h),f=Ek(o,a,d,h==="in"||h==="not-in");return Ft.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class ly extends ay{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ly(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Dr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)b2(a,l),a=zp(a,l)}(e._query,n),new Ia(e.firestore,e.converter,zp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function y1(t,e,n){if(typeof(n=rt(n))=="string"){if(n==="")throw new ae(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vx(e)&&n.indexOf("/")!==-1)throw new ae(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(st.fromString(n));if(!de.isDocumentKey(r))throw new ae(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Mb(t,new de(r))}if(n instanceof jt)return Mb(t,n._key);throw new ae(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jf(n)}.`)}function v1(t,e){if(!Array.isArray(t)||t.length===0)throw new ae(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function b2(t,e){const n=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ae(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Sk{convertValue(e,n="none"){switch(Os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Vs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[of].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Pt(a.doubleValue));return new ti(s)}convertGeoPoint(e){return new ei(Pt(e.latitude),Pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=nd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bu(e));default:return null}}convertTimestamp(e){const n=Is(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=st.fromString(e);Ge(zx(r),9688,{name:e});const i=new Eu(r.get(1),r.get(3)),s=new de(r.popFirst(5));return i.isEqual(n)||ki(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Ol{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class la extends y2{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(v2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=la._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}la._jsonSchemaVersion="firestore/documentSnapshot/1.0",la._jsonSchema={type:Ht("string",la._jsonSchemaVersion),bundleSource:Ht("string","DocumentSnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class ph extends la{data(e={}){return super.data(e)}}class ua{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ol(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ph(this._firestore,this._userDataWriter,r.key,r,new Ol(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new ph(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Ol(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new ph(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Ol(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:Rk(o.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ua._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=C0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Rk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(t){t=yr(t,jt);const e=yr(t.firestore,Ps);return ck(rc(e),t._key).then(n=>w2(e,t,n))}ua._jsonSchemaVersion="firestore/querySnapshot/1.0",ua._jsonSchema={type:Ht("string",ua._jsonSchemaVersion),bundleSource:Ht("string","QuerySnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class uy extends Sk{constructor(e){super(),this.firestore=e}convertBytes(e){return new dr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function Nk(t){t=yr(t,Ia);const e=yr(t.firestore,Ps),n=rc(e),r=new uy(e);return _2(t._query),hk(n,t._query).then(i=>new ua(e,r,t,i))}function Ik(t,e,n){t=yr(t,jt);const r=yr(t.firestore,Ps),i=E2(t.converter,e,n);return cy(r,[d2(ry(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,rr.none())])}function Dk(t){return cy(yr(t.firestore,Ps),[new ld(t._key,rr.none())])}function Ok(t,...e){var n,r,i;t=rt(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||g1(e[a])||(s=e[a++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(g1(e[a])){const d=e[a];e[a]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[a+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[a+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,h;if(t instanceof jt)c=yr(t.firestore,Ps),h=rd(t._key.path),l={next:d=>{e[a]&&e[a](w2(c,t,d))},error:e[a+1],complete:e[a+2]};else{const d=yr(t,Ia);c=yr(d.firestore,Ps),h=d._query;const f=new uy(c);l={next:m=>{e[a]&&e[a](new ua(c,f,d,m))},error:e[a+1],complete:e[a+2]},_2(t._query)}return function(f,m,E,N){const k=new ey(N),_=new W0(m,k,E);return f.asyncQueue.enqueueAndForget(async()=>K0(await gf(f),_)),()=>{k.Ou(),f.asyncQueue.enqueueAndForget(async()=>Y0(await gf(f),_))}}(rc(c),h,o,l)}function cy(t,e){return function(r,i){const s=new Si;return r.asyncQueue.enqueueAndForget(async()=>ZM(await uk(r),i,s)),s.promise}(rc(t),e)}function w2(t,e,n){const r=n.docs.get(e._key),i=new uy(t);return new la(t,i,e._key,r,new Ol(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ry(e)}set(e,n,r){this._verifyNotCommitted();const i=_m(e,this._firestore),s=E2(i.converter,n,r),a=d2(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,rr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=_m(e,this._firestore);let a;return a=typeof(n=rt(n))=="string"||n instanceof md?bk(this._dataReader,"WriteBatch.update",s._key,n,r,i):_k(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,rr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=_m(e,this._firestore);return this._mutations=this._mutations.concat(new ld(n._key,rr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ae(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _m(t,e){if((t=rt(t)).firestore!==e)throw new ae(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t){return rc(t=yr(t,Ps)),new Mk(t,e=>cy(t,e))}(function(e,n=!0){(function(i){Jo=i})(Ra),Rs(new Di("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new Ps(new EO(r.getProvider("auth-internal")),new AO(a,r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ae(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eu(c.options.projectId,h)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),gr(_b,bb,e),gr(_b,bb,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="firebasestorage.googleapis.com",A2="storageBucket",Pk=2*60*1e3,jk=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct extends kr{constructor(e,n,r=0){super(bm(e),`Firebase Storage: ${n} (${bm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ct.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Rt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Rt||(Rt={}));function bm(t){return"storage/"+t}function hy(){const t="An unknown error occurred, please check the error payload for server response.";return new Ct(Rt.UNKNOWN,t)}function Uk(t){return new Ct(Rt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Lk(t){return new Ct(Rt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Vk(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ct(Rt.UNAUTHENTICATED,t)}function zk(){return new Ct(Rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Bk(t){return new Ct(Rt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Fk(){return new Ct(Rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Hk(){return new Ct(Rt.CANCELED,"User canceled the upload/download.")}function qk(t){return new Ct(Rt.INVALID_URL,"Invalid URL '"+t+"'.")}function Gk(t){return new Ct(Rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function $k(){return new Ct(Rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+A2+"' property when initializing the app?")}function Qk(){return new Ct(Rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Kk(){return new Ct(Rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Yk(t){return new Ct(Rt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Zp(t){return new Ct(Rt.INVALID_ARGUMENT,t)}function x2(){return new Ct(Rt.APP_DELETED,"The Firebase app was deleted.")}function Xk(t){return new Ct(Rt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function eu(t,e){return new Ct(Rt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Tl(t){throw new Ct(Rt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Zn.makeFromUrl(e,n)}catch{return new Zn(e,"")}if(r.path==="")return r;throw Gk(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function c(M){M.path_=decodeURIComponent(M.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${i}/o${f}`,"i"),E={bucket:1,path:3},N=n===T2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",_=new RegExp(`^https?://${N}/${i}/${k}`,"i"),S=[{regex:o,indices:l,postModify:s},{regex:m,indices:E,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let M=0;M<S.length;M++){const U=S[M],T=U.regex.exec(e);if(T){const A=T[U.indices.bucket];let y=T[U.indices.path];y||(y=""),r=new Zn(A,y),U.postModify(r);break}}if(r==null)throw qk(e);return r}}class Wk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t,e,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let c=!1;function h(...k){c||(c=!0,e.apply(null,k))}function d(k){i=setTimeout(()=>{i=null,t(m,l())},k)}function f(){s&&clearTimeout(s)}function m(k,..._){if(c){f();return}if(k){f(),h.call(null,k,..._);return}if(l()||a){f(),h.call(null,k,..._);return}r<64&&(r*=2);let S;o===1?(o=2,S=0):S=(r+Math.random())*1e3,d(S)}let E=!1;function N(k){E||(E=!0,f(),!c&&(i!==null?(k||(o=2),clearTimeout(i),d(0)):k||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,N(!0)},n),N}function Jk(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(t){return t!==void 0}function tP(t){return typeof t=="object"&&!Array.isArray(t)}function fy(t){return typeof t=="string"||t instanceof String}function _1(t){return dy()&&t instanceof Blob}function dy(){return typeof Blob<"u"}function b1(t,e,n,r){if(r<e)throw Zp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Zp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function S2(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ca;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ca||(ca={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n,r,i,s,a,o,l,c,h,d,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,N)=>{this.resolve_=E,this.reject_=N,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Bc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===ca.NO_ERROR,l=s.getStatus();if(!o||nP(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===ca.ABORT;r(!1,new Bc(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Bc(c,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());eP(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=hy();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?x2():Hk();a(l)}else{const l=Fk();a(l)}};this.canceled_?n(!1,new Bc(!1,null,!0)):this.backoffId_=Zk(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Jk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function iP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function sP(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function aP(t,e){e&&(t["X-Firebase-GMPID"]=e)}function oP(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function lP(t,e,n,r,i,s,a=!0,o=!1){const l=S2(t.urlParams),c=t.url+l,h=Object.assign({},t.headers);return aP(h,e),iP(h,n),sP(h,s),oP(h,r),new rP(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function cP(...t){const e=uP();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(dy())return new Blob(t);throw new Ct(Rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function hP(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(t){if(typeof atob>"u")throw Yk("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Em{constructor(e,n){this.data=e,this.contentType=n||null}}function R2(t,e){switch(t){case pr.RAW:return new Em(C2(e));case pr.BASE64:case pr.BASE64URL:return new Em(N2(t,e));case pr.DATA_URL:return new Em(mP(e),pP(e))}throw hy()}function C2(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=t.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function dP(t){let e;try{e=decodeURIComponent(t)}catch{throw eu(pr.DATA_URL,"Malformed data URL.")}return C2(e)}function N2(t,e){switch(t){case pr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw eu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case pr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw eu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=fP(e)}catch(i){throw i.message.includes("polyfill")?i:eu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class I2{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw eu(pr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=gP(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function mP(t){const e=new I2(t);return e.base64?N2(pr.BASE64,e.rest):dP(e.rest)}function pP(t){return new I2(t).contentType}function gP(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n){let r=0,i="";_1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(_1(this.data_)){const r=this.data_,i=hP(r,e,n);return i===null?null:new ss(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ss(r,!0)}}static getBlob(...e){if(dy()){const n=e.map(r=>r instanceof ss?r.data_:r);return new ss(cP.apply(null,n))}else{const n=e.map(a=>fy(a)?R2(pr.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)i[s++]=a[o]}),new ss(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(t){let e;try{e=JSON.parse(t)}catch{return null}return tP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function vP(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function O2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(t,e){return e}class wn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||_P}}let Fc=null;function bP(t){return!fy(t)||t.length<2?t:O2(t)}function M2(){if(Fc)return Fc;const t=[];t.push(new wn("bucket")),t.push(new wn("generation")),t.push(new wn("metageneration")),t.push(new wn("name","fullPath",!0));function e(s,a){return bP(a)}const n=new wn("name");n.xform=e,t.push(n);function r(s,a){return a!==void 0?Number(a):a}const i=new wn("size");return i.xform=r,t.push(i),t.push(new wn("timeCreated")),t.push(new wn("updated")),t.push(new wn("md5Hash",null,!0)),t.push(new wn("cacheControl",null,!0)),t.push(new wn("contentDisposition",null,!0)),t.push(new wn("contentEncoding",null,!0)),t.push(new wn("contentLanguage",null,!0)),t.push(new wn("contentType",null,!0)),t.push(new wn("metadata","customMetadata",!0)),Fc=t,Fc}function EP(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Zn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function wP(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const a=n[s];r[a.local]=a.xform(r,e[a.server])}return EP(r,t),r}function k2(t,e,n){const r=D2(e);return r===null?null:wP(t,r,n)}function TP(t,e,n,r){const i=D2(e);if(i===null||!fy(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+a(h)+"/o/"+a(d),m=my(f,n,r),E=S2({alt:"media",token:c});return m+E})[0]}function AP(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class P2{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(t){if(!t)throw hy()}function xP(t,e){function n(r,i){const s=k2(t,i,e);return j2(s!==null),s}return n}function SP(t,e){function n(r,i){const s=k2(t,i,e);return j2(s!==null),TP(s,i,t.host,t._protocol)}return n}function U2(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=zk():i=Vk():n.getStatus()===402?i=Lk(t.bucket):n.getStatus()===403?i=Bk(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function RP(t){const e=U2(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Uk(t.path)),s.serverResponse=i.serverResponse,s}return n}function CP(t,e,n){const r=e.fullServerUrl(),i=my(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new P2(i,s,SP(t,n),a);return o.errorHandler=RP(e),o}function NP(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function IP(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=NP(null,e)),r}function DP(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let S="";for(let M=0;M<2;M++)S=S+Math.random().toString().slice(2);return S}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=IP(e,r,i),h=AP(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=ss.getBlob(d,r,f);if(m===null)throw Qk();const E={name:c.fullPath},N=my(s,t.host,t._protocol),k="POST",_=t.maxUploadRetryTime,x=new P2(N,k,xP(t,n),_);return x.urlParams=E,x.headers=a,x.body=m.uploadData(),x.errorHandler=U2(e),x}class OP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ca.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ca.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ca.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw Tl("cannot .send() more than once");if(Ui(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Tl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Tl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Tl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Tl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class MP extends OP{initXhr(){this.xhr_.responseType="text"}}function L2(){return new MP}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n){this._service=e,n instanceof Zn?this._location=n:this._location=Zn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new _a(e,n)}get root(){const e=new Zn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return O2(this._location.path)}get storage(){return this._service}get parent(){const e=yP(this._location.path);if(e===null)return null;const n=new Zn(this._location.bucket,e);return new _a(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Xk(e)}}function V2(t,e,n){t._throwIfRoot("uploadBytes");const r=DP(t.storage,t._location,M2(),new ss(e,!0),n);return t.storage.makeRequestWithTokens(r,L2).then(i=>({metadata:i,ref:t}))}function kP(t,e,n=pr.RAW,r){t._throwIfRoot("uploadString");const i=R2(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),V2(t,i.data,s)}function PP(t){t._throwIfRoot("getDownloadURL");const e=CP(t.storage,t._location,M2());return t.storage.makeRequestWithTokens(e,L2).then(n=>{if(n===null)throw Kk();return n})}function jP(t,e){const n=vP(t._location.path,e),r=new Zn(t._location.bucket,n);return new _a(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t){return/^[A-Za-z]+:\/\//.test(t)}function LP(t,e){return new _a(t,e)}function z2(t,e){if(t instanceof py){const n=t;if(n._bucket==null)throw $k();const r=new _a(n,n._bucket);return e!=null?z2(r,e):r}else return e!==void 0?jP(t,e):t}function VP(t,e){if(e&&UP(e)){if(t instanceof py)return LP(t,e);throw Zp("To use ref(service, url), the first argument must be a Storage instance.")}else return z2(t,e)}function E1(t,e){const n=e==null?void 0:e[A2];return n==null?null:Zn.makeFromBucketSpec(n,t)}function zP(t,e,n,r={}){t.host=`${e}:${n}`;const i=Ui(e);i&&(Qf(`https://${t.host}/b`),Kf("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:uA(s,t.app.options.projectId))}class py{constructor(e,n,r,i,s,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=T2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Pk,this._maxUploadRetryTime=jk,this._requests=new Set,i!=null?this._bucket=Zn.makeFromBucketSpec(i,this._host):this._bucket=E1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zn.makeFromBucketSpec(this._url,e):this._bucket=E1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){b1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){b1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _a(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Wk(x2());{const a=lP(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const w1="@firebase/storage",T1="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="storage";function BP(t,e,n){return t=rt(t),V2(t,e,n)}function FP(t,e,n,r){return t=rt(t),kP(t,e,n,r)}function A1(t){return t=rt(t),PP(t)}function x1(t,e){return t=rt(t),VP(t,e)}function HP(t=Yf(),e){t=rt(t);const r=Qu(t,B2).getImmediate({identifier:e}),i=d0("storage");return i&&qP(r,...i),r}function qP(t,e,n,r={}){zP(t,e,n,r)}function GP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new py(n,r,i,e,Ra)}function $P(){Rs(new Di(B2,GP,"PUBLIC").setMultipleInstances(!0)),gr(w1,T1,""),gr(w1,T1,"esm2017")}$P();const wm={apiKey:"AIzaSyBivqXghVKoxfSsJVXxmNi3n2yO1l2U9zU",authDomain:"runica-heros-folio.firebaseapp.com",projectId:"runica-heros-folio",storageBucket:"runica-heros-folio.firebasestorage.app",messagingSenderId:"1092943227692",appId:"1:1092943227692:web:342ed3d5e7c682b7eb9a89",measurementId:"G-GKS7XV7YEW"};let lo,xn,ba,Ao;if(wm.apiKey&&wm.projectId)try{lo=fA(wm),xn=pO(lo),ba=mk(lo),Ao=HP(lo),console.log("Firebase initialized successfully.")}catch(t){console.error("Error initializing Firebase. Please check your configuration.",t)}else console.warn("Firebase configuration environment variables are not set. Cloud features are disabled.");new Gr;const QP=t=>xn?r5(xn,t):(t(null),()=>{}),KP=()=>xn?xn.currentUser:null;function YP(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function F2(t,e){return new Promise(function(n,r){let i;return XP(t).then(function(s){try{return i=s,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(a){return r(a)}},r)})}const XP=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const s=new DataView(i);let a=0;if(s.getUint16(a)!==65496)return n("not a valid JPEG");for(a+=2;;){const o=s.getUint16(a);if(o===65498)break;const l=s.getUint16(a+2);if(o===65505&&s.getUint32(a+4)===1165519206){const c=a+10;let h;switch(s.getUint16(c)){case 18761:h=!0;break;case 19789:h=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(c+2,h)!==42)return n("TIFF header contains invalid version");const d=s.getUint32(c+4,h),f=c+d+2+12*s.getUint16(c+d,h);for(let m=c+d+2;m<f;m+=12)if(s.getUint16(m,h)==274){if(s.getUint16(m+2,h)!==3)return n("Orientation data type is invalid");if(s.getUint32(m+4,h)!==1)return n("Orientation data count is invalid");s.setUint16(m+8,1,h);break}return e(i.slice(a,a+2+l))}a+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var vf={},WP={get exports(){return vf},set exports(t){vf=t}};(function(t){var e,n,r={};WP.exports=r,r.parse=function(i,s){for(var a=r.bin.readUshort,o=r.bin.readUint,l=0,c={},h=new Uint8Array(i),d=h.length-4;o(h,d)!=101010256;)d--;l=d,l+=4;var f=a(h,l+=4);a(h,l+=2);var m=o(h,l+=2),E=o(h,l+=4);l+=4,l=E;for(var N=0;N<f;N++){o(h,l),l+=4,l+=4,l+=4,o(h,l+=4),m=o(h,l+=4);var k=o(h,l+=4),_=a(h,l+=4),x=a(h,l+2),S=a(h,l+4);l+=6;var M=o(h,l+=8);l+=4,l+=_+x+S,r._readLocal(h,M,c,m,k,s)}return c},r._readLocal=function(i,s,a,o,l,c){var h=r.bin.readUshort,d=r.bin.readUint;d(i,s),h(i,s+=4),h(i,s+=2);var f=h(i,s+=2);d(i,s+=2),d(i,s+=4),s+=4;var m=h(i,s+=8),E=h(i,s+=2);s+=2;var N=r.bin.readUTF8(i,s,m);if(s+=m,s+=E,c)a[N]={size:l,csize:o};else{var k=new Uint8Array(i.buffer,s);if(f==0)a[N]=new Uint8Array(k.buffer.slice(s,s+o));else{if(f!=8)throw"unknown compression method: "+f;var _=new Uint8Array(l);r.inflateRaw(k,_),a[N]=_}}},r.inflateRaw=function(i,s){return r.F.inflate(i,s)},r.inflate=function(i,s){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),s)},r.deflate=function(i,s){s==null&&(s={level:6});var a=0,o=new Uint8Array(50+Math.floor(1.1*i.length));o[a]=120,o[a+1]=156,a+=2,a=r.F.deflateRaw(i,o,a,s.level);var l=r.adler(i,0,i.length);return o[a+0]=l>>>24&255,o[a+1]=l>>>16&255,o[a+2]=l>>>8&255,o[a+3]=l>>>0&255,new Uint8Array(o.buffer,0,a+4)},r.deflateRaw=function(i,s){s==null&&(s={level:6});var a=new Uint8Array(50+Math.floor(1.1*i.length)),o=r.F.deflateRaw(i,a,o,s.level);return new Uint8Array(a.buffer,0,o)},r.encode=function(i,s){s==null&&(s=!1);var a=0,o=r.bin.writeUint,l=r.bin.writeUshort,c={};for(var h in i){var d=!r._noNeed(h)&&!s,f=i[h],m=r.crc.crc(f,0,f.length);c[h]={cpr:d,usize:f.length,crc:m,file:d?r.deflateRaw(f):f}}for(var h in c)a+=c[h].file.length+30+46+2*r.bin.sizeUTF8(h);a+=22;var E=new Uint8Array(a),N=0,k=[];for(var h in c){var _=c[h];k.push(N),N=r._writeHeader(E,N,h,_,0)}var x=0,S=N;for(var h in c)_=c[h],k.push(N),N=r._writeHeader(E,N,h,_,1,k[x++]);var M=N-S;return o(E,N,101010256),N+=4,l(E,N+=4,x),l(E,N+=2,x),o(E,N+=2,M),o(E,N+=4,S),N+=4,N+=2,E.buffer},r._noNeed=function(i){var s=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},r._writeHeader=function(i,s,a,o,l,c){var h=r.bin.writeUint,d=r.bin.writeUshort,f=o.file;return h(i,s,l==0?67324752:33639248),s+=4,l==1&&(s+=2),d(i,s,20),d(i,s+=2,0),d(i,s+=2,o.cpr?8:0),h(i,s+=2,0),h(i,s+=4,o.crc),h(i,s+=4,f.length),h(i,s+=4,o.usize),d(i,s+=4,r.bin.sizeUTF8(a)),d(i,s+=2,0),s+=2,l==1&&(s+=2,s+=2,h(i,s+=6,c),s+=4),s+=r.bin.writeUTF8(i,s,a),l==0&&(i.set(f,s),s+=f.length),s},r.crc={table:function(){for(var i=new Uint32Array(256),s=0;s<256;s++){for(var a=s,o=0;o<8;o++)1&a?a=3988292384^a>>>1:a>>>=1;i[s]=a}return i}(),update:function(i,s,a,o){for(var l=0;l<o;l++)i=r.crc.table[255&(i^s[a+l])]^i>>>8;return i},crc:function(i,s,a){return 4294967295^r.crc.update(4294967295,i,s,a)}},r.adler=function(i,s,a){for(var o=1,l=0,c=s,h=s+a;c<h;){for(var d=Math.min(c+5552,h);c<d;)l+=o+=i[c++];o%=65521,l%=65521}return l<<16|o},r.bin={readUshort:function(i,s){return i[s]|i[s+1]<<8},writeUshort:function(i,s,a){i[s]=255&a,i[s+1]=a>>8&255},readUint:function(i,s){return 16777216*i[s+3]+(i[s+2]<<16|i[s+1]<<8|i[s])},writeUint:function(i,s,a){i[s]=255&a,i[s+1]=a>>8&255,i[s+2]=a>>16&255,i[s+3]=a>>24&255},readASCII:function(i,s,a){for(var o="",l=0;l<a;l++)o+=String.fromCharCode(i[s+l]);return o},writeASCII:function(i,s,a){for(var o=0;o<a.length;o++)i[s+o]=a.charCodeAt(o)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,s,a){for(var o,l="",c=0;c<a;c++)l+="%"+r.bin.pad(i[s+c].toString(16));try{o=decodeURIComponent(l)}catch{return r.bin.readASCII(i,s,a)}return o},writeUTF8:function(i,s,a){for(var o=a.length,l=0,c=0;c<o;c++){var h=a.charCodeAt(c);if(!(4294967168&h))i[s+l]=h,l++;else if(!(4294965248&h))i[s+l]=192|h>>6,i[s+l+1]=128|h>>0&63,l+=2;else if(!(4294901760&h))i[s+l]=224|h>>12,i[s+l+1]=128|h>>6&63,i[s+l+2]=128|h>>0&63,l+=3;else{if(4292870144&h)throw"e";i[s+l]=240|h>>18,i[s+l+1]=128|h>>12&63,i[s+l+2]=128|h>>6&63,i[s+l+3]=128|h>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var s=i.length,a=0,o=0;o<s;o++){var l=i.charCodeAt(o);if(!(4294967168&l))a++;else if(!(4294965248&l))a+=2;else if(!(4294901760&l))a+=3;else{if(4292870144&l)throw"e";a+=4}}return a}},r.F={},r.F.deflateRaw=function(i,s,a,o){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],c=r.F.U,h=r.F._goodIndex;r.F._hash;var d=r.F._putsE,f=0,m=a<<3,E=0,N=i.length;if(o==0){for(;f<N;)d(s,m,f+(C=Math.min(65535,N-f))==N?1:0),m=r.F._copyExact(i,f,C,s,m+8),f+=C;return m>>>3}var k=c.lits,_=c.strt,x=c.prev,S=0,M=0,U=0,T=0,A=0,y=0;for(N>2&&(_[y=r.F._hash(i,0)]=0),f=0;f<N;f++){if(A=y,f+1<N-2){y=r.F._hash(i,f+1);var v=f+1&32767;x[v]=_[y],_[y]=v}if(E<=f){(S>14e3||M>26697)&&N-f>100&&(E<f&&(k[S]=f-E,S+=2,E=f),m=r.F._writeBlock(f==N-1||E==N?1:0,k,S,T,i,U,f-U,s,m),S=M=T=0,U=f);var w=0;f<N-2&&(w=r.F._bestMatch(i,f,x,A,Math.min(l[2],N-f),l[3]));var C=w>>>16,I=65535&w;if(w!=0){I=65535&w;var R=h(C=w>>>16,c.of0);c.lhst[257+R]++;var L=h(I,c.df0);c.dhst[L]++,T+=c.exb[R]+c.dxb[L],k[S]=C<<23|f-E,k[S+1]=I<<16|R<<8|L,S+=2,E=f+C}else c.lhst[i[f]]++;M++}}for(U==f&&i.length!=0||(E<f&&(k[S]=f-E,S+=2,E=f),m=r.F._writeBlock(1,k,S,T,i,U,f-U,s,m),S=0,M=0,S=M=T=0,U=f);7&m;)m++;return m>>>3},r.F._bestMatch=function(i,s,a,o,l,c){var h=32767&s,d=a[h],f=h-d+32768&32767;if(d==h||o!=r.F._hash(i,s-f))return 0;for(var m=0,E=0,N=Math.min(32767,s);f<=N&&--c!=0&&d!=h;){if(m==0||i[s+m]==i[s+m-f]){var k=r.F._howLong(i,s,f);if(k>m){if(E=f,(m=k)>=l)break;f+2<k&&(k=f+2);for(var _=0,x=0;x<k-2;x++){var S=s-f+x+32768&32767,M=S-a[S]+32768&32767;M>_&&(_=M,d=S)}}}f+=(h=d)-(d=a[h])+32768&32767}return m<<16|E},r.F._howLong=function(i,s,a){if(i[s]!=i[s-a]||i[s+1]!=i[s+1-a]||i[s+2]!=i[s+2-a])return 0;var o=s,l=Math.min(i.length,s+258);for(s+=3;s<l&&i[s]==i[s-a];)s++;return s-o},r.F._hash=function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,s,a,o,l,c,h,d,f){var m,E,N,k,_,x,S,M,U,T=r.F.U,A=r.F._putsF,y=r.F._putsE;T.lhst[256]++,E=(m=r.F.getTrees())[0],N=m[1],k=m[2],_=m[3],x=m[4],S=m[5],M=m[6],U=m[7];var v=32+(f+3&7?8-(f+3&7):0)+(h<<3),w=o+r.F.contSize(T.fltree,T.lhst)+r.F.contSize(T.fdtree,T.dhst),C=o+r.F.contSize(T.ltree,T.lhst)+r.F.contSize(T.dtree,T.dhst);C+=14+3*S+r.F.contSize(T.itree,T.ihst)+(2*T.ihst[16]+3*T.ihst[17]+7*T.ihst[18]);for(var I=0;I<286;I++)T.lhst[I]=0;for(I=0;I<30;I++)T.dhst[I]=0;for(I=0;I<19;I++)T.ihst[I]=0;var R=v<w&&v<C?0:w<C?1:2;if(A(d,f,i),A(d,f+1,R),f+=3,R==0){for(;7&f;)f++;f=r.F._copyExact(l,c,h,d,f)}else{var L,H;if(R==1&&(L=T.fltree,H=T.fdtree),R==2){r.F.makeCodes(T.ltree,E),r.F.revCodes(T.ltree,E),r.F.makeCodes(T.dtree,N),r.F.revCodes(T.dtree,N),r.F.makeCodes(T.itree,k),r.F.revCodes(T.itree,k),L=T.ltree,H=T.dtree,y(d,f,_-257),y(d,f+=5,x-1),y(d,f+=5,S-4),f+=4;for(var D=0;D<S;D++)y(d,f+3*D,T.itree[1+(T.ordr[D]<<1)]);f+=3*S,f=r.F._codeTiny(M,T.itree,d,f),f=r.F._codeTiny(U,T.itree,d,f)}for(var O=c,$=0;$<a;$+=2){for(var F=s[$],K=F>>>23,ie=O+(8388607&F);O<ie;)f=r.F._writeLit(l[O++],L,d,f);if(K!=0){var ee=s[$+1],B=ee>>16,Q=ee>>8&255,V=255&ee;y(d,f=r.F._writeLit(257+Q,L,d,f),K-T.of0[Q]),f+=T.exb[Q],A(d,f=r.F._writeLit(V,H,d,f),B-T.df0[V]),f+=T.dxb[V],O+=K}}f=r.F._writeLit(256,L,d,f)}return f},r.F._copyExact=function(i,s,a,o,l){var c=l>>>3;return o[c]=a,o[c+1]=a>>>8,o[c+2]=255-o[c],o[c+3]=255-o[c+1],c+=4,o.set(new Uint8Array(i.buffer,s,a),c),l+(a+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,s=r.F._hufTree(i.lhst,i.ltree,15),a=r.F._hufTree(i.dhst,i.dtree,15),o=[],l=r.F._lenCodes(i.ltree,o),c=[],h=r.F._lenCodes(i.dtree,c),d=0;d<o.length;d+=2)i.ihst[o[d]]++;for(d=0;d<c.length;d+=2)i.ihst[c[d]]++;for(var f=r.F._hufTree(i.ihst,i.itree,7),m=19;m>4&&i.itree[1+(i.ordr[m-1]<<1)]==0;)m--;return[s,a,f,l,h,m,o,c]},r.F.getSecond=function(i){for(var s=[],a=0;a<i.length;a+=2)s.push(i[a+1]);return s},r.F.nonZero=function(i){for(var s="",a=0;a<i.length;a+=2)i[a+1]!=0&&(s+=(a>>1)+",");return s},r.F.contSize=function(i,s){for(var a=0,o=0;o<s.length;o++)a+=s[o]*i[1+(o<<1)];return a},r.F._codeTiny=function(i,s,a,o){for(var l=0;l<i.length;l+=2){var c=i[l],h=i[l+1];o=r.F._writeLit(c,s,a,o);var d=c==16?2:c==17?3:7;c>15&&(r.F._putsE(a,o,h,d),o+=d)}return o},r.F._lenCodes=function(i,s){for(var a=i.length;a!=2&&i[a-1]==0;)a-=2;for(var o=0;o<a;o+=2){var l=i[o+1],c=o+3<a?i[o+3]:-1,h=o+5<a?i[o+5]:-1,d=o==0?-1:i[o-1];if(l==0&&c==l&&h==l){for(var f=o+5;f+2<a&&i[f+2]==l;)f+=2;(m=Math.min(f+1-o>>>1,138))<11?s.push(17,m-3):s.push(18,m-11),o+=2*m-2}else if(l==d&&c==l&&h==l){for(f=o+5;f+2<a&&i[f+2]==l;)f+=2;var m=Math.min(f+1-o>>>1,6);s.push(16,m-3),o+=2*m-2}else s.push(l,0)}return a>>>1},r.F._hufTree=function(i,s,a){var o=[],l=i.length,c=s.length,h=0;for(h=0;h<c;h+=2)s[h]=0,s[h+1]=0;for(h=0;h<l;h++)i[h]!=0&&o.push({lit:h,f:i[h]});var d=o.length,f=o.slice(0);if(d==0)return 0;if(d==1){var m=o[0].lit;return f=m==0?1:0,s[1+(m<<1)]=1,s[1+(f<<1)]=1,1}o.sort(function(M,U){return M.f-U.f});var E=o[0],N=o[1],k=0,_=1,x=2;for(o[0]={lit:-1,f:E.f+N.f,l:E,r:N,d:0};_!=d-1;)E=k!=_&&(x==d||o[k].f<o[x].f)?o[k++]:o[x++],N=k!=_&&(x==d||o[k].f<o[x].f)?o[k++]:o[x++],o[_++]={lit:-1,f:E.f+N.f,l:E,r:N};var S=r.F.setDepth(o[_-1],0);for(S>a&&(r.F.restrictDepth(f,a,S),S=a),h=0;h<d;h++)s[1+(f[h].lit<<1)]=f[h].d;return S},r.F.setDepth=function(i,s){return i.lit!=-1?(i.d=s,s):Math.max(r.F.setDepth(i.l,s+1),r.F.setDepth(i.r,s+1))},r.F.restrictDepth=function(i,s,a){var o=0,l=1<<a-s,c=0;for(i.sort(function(d,f){return f.d==d.d?d.f-f.f:f.d-d.d}),o=0;o<i.length&&i[o].d>s;o++){var h=i[o].d;i[o].d=s,c+=l-(1<<a-h)}for(c>>>=a-s;c>0;)(h=i[o].d)<s?(i[o].d++,c-=1<<s-h-1):o++;for(;o>=0;o--)i[o].d==s&&c<0&&(i[o].d--,c++);c!=0&&console.log("debt left")},r.F._goodIndex=function(i,s){var a=0;return s[16|a]<=i&&(a|=16),s[8|a]<=i&&(a|=8),s[4|a]<=i&&(a|=4),s[2|a]<=i&&(a|=2),s[1|a]<=i&&(a|=1),a},r.F._writeLit=function(i,s,a,o){return r.F._putsF(a,o,s[i<<1]),o+s[1+(i<<1)]},r.F.inflate=function(i,s){var a=Uint8Array;if(i[0]==3&&i[1]==0)return s||new a(0);var o=r.F,l=o._bitsF,c=o._bitsE,h=o._decodeTiny,d=o.makeCodes,f=o.codes2map,m=o._get17,E=o.U,N=s==null;N&&(s=new a(i.length>>>2<<3));for(var k,_,x=0,S=0,M=0,U=0,T=0,A=0,y=0,v=0,w=0;x==0;)if(x=l(i,w,1),S=l(i,w+1,2),w+=3,S!=0){if(N&&(s=r.F._check(s,v+(1<<17))),S==1&&(k=E.flmap,_=E.fdmap,A=511,y=31),S==2){M=c(i,w,5)+257,U=c(i,w+5,5)+1,T=c(i,w+10,4)+4,w+=14;for(var C=0;C<38;C+=2)E.itree[C]=0,E.itree[C+1]=0;var I=1;for(C=0;C<T;C++){var R=c(i,w+3*C,3);E.itree[1+(E.ordr[C]<<1)]=R,R>I&&(I=R)}w+=3*T,d(E.itree,I),f(E.itree,I,E.imap),k=E.lmap,_=E.dmap,w=h(E.imap,(1<<I)-1,M+U,i,w,E.ttree);var L=o._copyOut(E.ttree,0,M,E.ltree);A=(1<<L)-1;var H=o._copyOut(E.ttree,M,U,E.dtree);y=(1<<H)-1,d(E.ltree,L),f(E.ltree,L,k),d(E.dtree,H),f(E.dtree,H,_)}for(;;){var D=k[m(i,w)&A];w+=15&D;var O=D>>>4;if(!(O>>>8))s[v++]=O;else{if(O==256)break;var $=v+O-254;if(O>264){var F=E.ldef[O-257];$=v+(F>>>3)+c(i,w,7&F),w+=7&F}var K=_[m(i,w)&y];w+=15&K;var ie=K>>>4,ee=E.ddef[ie],B=(ee>>>4)+l(i,w,15&ee);for(w+=15&ee,N&&(s=r.F._check(s,v+(1<<17)));v<$;)s[v]=s[v++-B],s[v]=s[v++-B],s[v]=s[v++-B],s[v]=s[v++-B];v=$}}}else{7&w&&(w+=8-(7&w));var Q=4+(w>>>3),V=i[Q-4]|i[Q-3]<<8;N&&(s=r.F._check(s,v+V)),s.set(new a(i.buffer,i.byteOffset+Q,V),v),w=Q+V<<3,v+=V}return s.length==v?s:s.slice(0,v)},r.F._check=function(i,s){var a=i.length;if(s<=a)return i;var o=new Uint8Array(Math.max(a<<1,s));return o.set(i,0),o},r.F._decodeTiny=function(i,s,a,o,l,c){for(var h=r.F._bitsE,d=r.F._get17,f=0;f<a;){var m=i[d(o,l)&s];l+=15&m;var E=m>>>4;if(E<=15)c[f]=E,f++;else{var N=0,k=0;E==16?(k=3+h(o,l,2),l+=2,N=c[f-1]):E==17?(k=3+h(o,l,3),l+=3):E==18&&(k=11+h(o,l,7),l+=7);for(var _=f+k;f<_;)c[f]=N,f++}}return l},r.F._copyOut=function(i,s,a,o){for(var l=0,c=0,h=o.length>>>1;c<a;){var d=i[c+s];o[c<<1]=0,o[1+(c<<1)]=d,d>l&&(l=d),c++}for(;c<h;)o[c<<1]=0,o[1+(c<<1)]=0,c++;return l},r.F.makeCodes=function(i,s){for(var a,o,l,c,h=r.F.U,d=i.length,f=h.bl_count,m=0;m<=s;m++)f[m]=0;for(m=1;m<d;m+=2)f[i[m]]++;var E=h.next_code;for(a=0,f[0]=0,o=1;o<=s;o++)a=a+f[o-1]<<1,E[o]=a;for(l=0;l<d;l+=2)(c=i[l+1])!=0&&(i[l]=E[c],E[c]++)},r.F.codes2map=function(i,s,a){for(var o=i.length,l=r.F.U.rev15,c=0;c<o;c+=2)if(i[c+1]!=0)for(var h=c>>1,d=i[c+1],f=h<<4|d,m=s-d,E=i[c]<<m,N=E+(1<<m);E!=N;)a[l[E]>>>15-s]=f,E++},r.F.revCodes=function(i,s){for(var a=r.F.U.rev15,o=15-s,l=0;l<i.length;l+=2){var c=i[l]<<s-i[l+1];i[l]=a[c]>>>o}},r.F._putsE=function(i,s,a){a<<=7&s;var o=s>>>3;i[o]|=a,i[o+1]|=a>>>8},r.F._putsF=function(i,s,a){a<<=7&s;var o=s>>>3;i[o]|=a,i[o+1]|=a>>>8,i[o+2]|=a>>>16},r.F._bitsE=function(i,s,a){return(i[s>>>3]|i[1+(s>>>3)]<<8)>>>(7&s)&(1<<a)-1},r.F._bitsF=function(i,s,a){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)&(1<<a)-1},r.F._get17=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)},r.F._get25=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16|i[3+(s>>>3)]<<24)>>>(7&s)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,s=0;s<32768;s++){var a=s;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,i.rev15[s]=(a>>>16|a<<16)>>>17}function o(l,c,h){for(;c--!=0;)l.push(0,h)}for(s=0;s<32;s++)i.ldef[s]=i.of0[s]<<3|i.exb[s],i.ddef[s]=i.df0[s]<<4|i.dxb[s];o(i.fltree,144,8),o(i.fltree,112,9),o(i.fltree,24,7),o(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),o(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),o(i.itree,19,0),o(i.ltree,286,0),o(i.dtree,30,0),o(i.ttree,320,0)}()})();var ZP=YP({__proto__:null,default:vf},[vf]);const xr=function(){var t={nextZero(h,d){for(;h[d]!=0;)d++;return d},readUshort:(h,d)=>h[d]<<8|h[d+1],writeUshort(h,d,f){h[d]=f>>8&255,h[d+1]=255&f},readUint:(h,d)=>16777216*h[d]+(h[d+1]<<16|h[d+2]<<8|h[d+3]),writeUint(h,d,f){h[d]=f>>24&255,h[d+1]=f>>16&255,h[d+2]=f>>8&255,h[d+3]=255&f},readASCII(h,d,f){let m="";for(let E=0;E<f;E++)m+=String.fromCharCode(h[d+E]);return m},writeASCII(h,d,f){for(let m=0;m<f.length;m++)h[d+m]=f.charCodeAt(m)},readBytes(h,d,f){const m=[];for(let E=0;E<f;E++)m.push(h[d+E]);return m},pad:h=>h.length<2?`0${h}`:h,readUTF8(h,d,f){let m,E="";for(let N=0;N<f;N++)E+=`%${t.pad(h[d+N].toString(16))}`;try{m=decodeURIComponent(E)}catch{return t.readASCII(h,d,f)}return m}};function e(h,d,f,m){const E=d*f,N=s(m),k=Math.ceil(d*N/8),_=new Uint8Array(4*E),x=new Uint32Array(_.buffer),{ctype:S}=m,{depth:M}=m,U=t.readUshort;if(S==6){const F=E<<2;if(M==8)for(var T=0;T<F;T+=4)_[T]=h[T],_[T+1]=h[T+1],_[T+2]=h[T+2],_[T+3]=h[T+3];if(M==16)for(T=0;T<F;T++)_[T]=h[T<<1]}else if(S==2){const F=m.tabs.tRNS;if(F==null){if(M==8)for(T=0;T<E;T++){var A=3*T;x[T]=255<<24|h[A+2]<<16|h[A+1]<<8|h[A]}if(M==16)for(T=0;T<E;T++)A=6*T,x[T]=255<<24|h[A+4]<<16|h[A+2]<<8|h[A]}else{var y=F[0];const K=F[1],ie=F[2];if(M==8)for(T=0;T<E;T++){var v=T<<2;A=3*T,x[T]=255<<24|h[A+2]<<16|h[A+1]<<8|h[A],h[A]==y&&h[A+1]==K&&h[A+2]==ie&&(_[v+3]=0)}if(M==16)for(T=0;T<E;T++)v=T<<2,A=6*T,x[T]=255<<24|h[A+4]<<16|h[A+2]<<8|h[A],U(h,A)==y&&U(h,A+2)==K&&U(h,A+4)==ie&&(_[v+3]=0)}}else if(S==3){const F=m.tabs.PLTE,K=m.tabs.tRNS,ie=K?K.length:0;if(M==1)for(var w=0;w<f;w++){var C=w*k,I=w*d;for(T=0;T<d;T++){v=I+T<<2;var R=3*(L=h[C+(T>>3)]>>7-((7&T)<<0)&1);_[v]=F[R],_[v+1]=F[R+1],_[v+2]=F[R+2],_[v+3]=L<ie?K[L]:255}}if(M==2)for(w=0;w<f;w++)for(C=w*k,I=w*d,T=0;T<d;T++)v=I+T<<2,R=3*(L=h[C+(T>>2)]>>6-((3&T)<<1)&3),_[v]=F[R],_[v+1]=F[R+1],_[v+2]=F[R+2],_[v+3]=L<ie?K[L]:255;if(M==4)for(w=0;w<f;w++)for(C=w*k,I=w*d,T=0;T<d;T++)v=I+T<<2,R=3*(L=h[C+(T>>1)]>>4-((1&T)<<2)&15),_[v]=F[R],_[v+1]=F[R+1],_[v+2]=F[R+2],_[v+3]=L<ie?K[L]:255;if(M==8)for(T=0;T<E;T++){var L;v=T<<2,R=3*(L=h[T]),_[v]=F[R],_[v+1]=F[R+1],_[v+2]=F[R+2],_[v+3]=L<ie?K[L]:255}}else if(S==4){if(M==8)for(T=0;T<E;T++){v=T<<2;var H=h[D=T<<1];_[v]=H,_[v+1]=H,_[v+2]=H,_[v+3]=h[D+1]}if(M==16)for(T=0;T<E;T++){var D;v=T<<2,H=h[D=T<<2],_[v]=H,_[v+1]=H,_[v+2]=H,_[v+3]=h[D+2]}}else if(S==0)for(y=m.tabs.tRNS?m.tabs.tRNS:-1,w=0;w<f;w++){const F=w*k,K=w*d;if(M==1)for(var O=0;O<d;O++){var $=(H=255*(h[F+(O>>>3)]>>>7-(7&O)&1))==255*y?0:255;x[K+O]=$<<24|H<<16|H<<8|H}else if(M==2)for(O=0;O<d;O++)$=(H=85*(h[F+(O>>>2)]>>>6-((3&O)<<1)&3))==85*y?0:255,x[K+O]=$<<24|H<<16|H<<8|H;else if(M==4)for(O=0;O<d;O++)$=(H=17*(h[F+(O>>>1)]>>>4-((1&O)<<2)&15))==17*y?0:255,x[K+O]=$<<24|H<<16|H<<8|H;else if(M==8)for(O=0;O<d;O++)$=(H=h[F+O])==y?0:255,x[K+O]=$<<24|H<<16|H<<8|H;else if(M==16)for(O=0;O<d;O++)H=h[F+(O<<1)],$=U(h,F+(O<<1))==y?0:255,x[K+O]=$<<24|H<<16|H<<8|H}return _}function n(h,d,f,m){const E=s(h),N=Math.ceil(f*E/8),k=new Uint8Array((N+1+h.interlace)*m);return d=h.tabs.CgBI?i(d,k):r(d,k),h.interlace==0?d=a(d,h,0,f,m):h.interlace==1&&(d=function(x,S){const M=S.width,U=S.height,T=s(S),A=T>>3,y=Math.ceil(M*T/8),v=new Uint8Array(U*y);let w=0;const C=[0,0,4,0,2,0,1],I=[0,4,0,2,0,1,0],R=[8,8,8,4,4,2,2],L=[8,8,4,4,2,2,1];let H=0;for(;H<7;){const O=R[H],$=L[H];let F=0,K=0,ie=C[H];for(;ie<U;)ie+=O,K++;let ee=I[H];for(;ee<M;)ee+=$,F++;const B=Math.ceil(F*T/8);a(x,S,w,F,K);let Q=0,V=C[H];for(;V<U;){let se=I[H],Ee=w+Q*B<<3;for(;se<M;){var D;if(T==1&&(D=(D=x[Ee>>3])>>7-(7&Ee)&1,v[V*y+(se>>3)]|=D<<7-((7&se)<<0)),T==2&&(D=(D=x[Ee>>3])>>6-(7&Ee)&3,v[V*y+(se>>2)]|=D<<6-((3&se)<<1)),T==4&&(D=(D=x[Ee>>3])>>4-(7&Ee)&15,v[V*y+(se>>1)]|=D<<4-((1&se)<<2)),T>=8){const Ce=V*y+se*A;for(let pe=0;pe<A;pe++)v[Ce+pe]=x[(Ee>>3)+pe]}Ee+=T,se+=$}Q++,V+=O}F*K!=0&&(w+=K*(1+B)),H+=1}return v}(d,h)),d}function r(h,d){return i(new Uint8Array(h.buffer,2,h.length-6),d)}var i=function(){const h={H:{}};return h.H.N=function(d,f){const m=Uint8Array;let E,N,k=0,_=0,x=0,S=0,M=0,U=0,T=0,A=0,y=0;if(d[0]==3&&d[1]==0)return f||new m(0);const v=h.H,w=v.b,C=v.e,I=v.R,R=v.n,L=v.A,H=v.Z,D=v.m,O=f==null;for(O&&(f=new m(d.length>>>2<<5));k==0;)if(k=w(d,y,1),_=w(d,y+1,2),y+=3,_!=0){if(O&&(f=h.H.W(f,A+(1<<17))),_==1&&(E=D.J,N=D.h,U=511,T=31),_==2){x=C(d,y,5)+257,S=C(d,y+5,5)+1,M=C(d,y+10,4)+4,y+=14;let F=1;for(var $=0;$<38;$+=2)D.Q[$]=0,D.Q[$+1]=0;for($=0;$<M;$++){const ee=C(d,y+3*$,3);D.Q[1+(D.X[$]<<1)]=ee,ee>F&&(F=ee)}y+=3*M,R(D.Q,F),L(D.Q,F,D.u),E=D.w,N=D.d,y=I(D.u,(1<<F)-1,x+S,d,y,D.v);const K=v.V(D.v,0,x,D.C);U=(1<<K)-1;const ie=v.V(D.v,x,S,D.D);T=(1<<ie)-1,R(D.C,K),L(D.C,K,E),R(D.D,ie),L(D.D,ie,N)}for(;;){const F=E[H(d,y)&U];y+=15&F;const K=F>>>4;if(!(K>>>8))f[A++]=K;else{if(K==256)break;{let ie=A+K-254;if(K>264){const se=D.q[K-257];ie=A+(se>>>3)+C(d,y,7&se),y+=7&se}const ee=N[H(d,y)&T];y+=15&ee;const B=ee>>>4,Q=D.c[B],V=(Q>>>4)+w(d,y,15&Q);for(y+=15&Q;A<ie;)f[A]=f[A++-V],f[A]=f[A++-V],f[A]=f[A++-V],f[A]=f[A++-V];A=ie}}}}else{7&y&&(y+=8-(7&y));const F=4+(y>>>3),K=d[F-4]|d[F-3]<<8;O&&(f=h.H.W(f,A+K)),f.set(new m(d.buffer,d.byteOffset+F,K),A),y=F+K<<3,A+=K}return f.length==A?f:f.slice(0,A)},h.H.W=function(d,f){const m=d.length;if(f<=m)return d;const E=new Uint8Array(m<<1);return E.set(d,0),E},h.H.R=function(d,f,m,E,N,k){const _=h.H.e,x=h.H.Z;let S=0;for(;S<m;){const M=d[x(E,N)&f];N+=15&M;const U=M>>>4;if(U<=15)k[S]=U,S++;else{let T=0,A=0;U==16?(A=3+_(E,N,2),N+=2,T=k[S-1]):U==17?(A=3+_(E,N,3),N+=3):U==18&&(A=11+_(E,N,7),N+=7);const y=S+A;for(;S<y;)k[S]=T,S++}}return N},h.H.V=function(d,f,m,E){let N=0,k=0;const _=E.length>>>1;for(;k<m;){const x=d[k+f];E[k<<1]=0,E[1+(k<<1)]=x,x>N&&(N=x),k++}for(;k<_;)E[k<<1]=0,E[1+(k<<1)]=0,k++;return N},h.H.n=function(d,f){const m=h.H.m,E=d.length;let N,k,_,x;const S=m.j;for(var M=0;M<=f;M++)S[M]=0;for(M=1;M<E;M+=2)S[d[M]]++;const U=m.K;for(N=0,S[0]=0,k=1;k<=f;k++)N=N+S[k-1]<<1,U[k]=N;for(_=0;_<E;_+=2)x=d[_+1],x!=0&&(d[_]=U[x],U[x]++)},h.H.A=function(d,f,m){const E=d.length,N=h.H.m.r;for(let k=0;k<E;k+=2)if(d[k+1]!=0){const _=k>>1,x=d[k+1],S=_<<4|x,M=f-x;let U=d[k]<<M;const T=U+(1<<M);for(;U!=T;)m[N[U]>>>15-f]=S,U++}},h.H.l=function(d,f){const m=h.H.m.r,E=15-f;for(let N=0;N<d.length;N+=2){const k=d[N]<<f-d[N+1];d[N]=m[k]>>>E}},h.H.M=function(d,f,m){m<<=7&f;const E=f>>>3;d[E]|=m,d[E+1]|=m>>>8},h.H.I=function(d,f,m){m<<=7&f;const E=f>>>3;d[E]|=m,d[E+1]|=m>>>8,d[E+2]|=m>>>16},h.H.e=function(d,f,m){return(d[f>>>3]|d[1+(f>>>3)]<<8)>>>(7&f)&(1<<m)-1},h.H.b=function(d,f,m){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16)>>>(7&f)&(1<<m)-1},h.H.Z=function(d,f){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16)>>>(7&f)},h.H.i=function(d,f){return(d[f>>>3]|d[1+(f>>>3)]<<8|d[2+(f>>>3)]<<16|d[3+(f>>>3)]<<24)>>>(7&f)},h.H.m=function(){const d=Uint16Array,f=Uint32Array;return{K:new d(16),j:new d(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new d(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new f(32),J:new d(512),_:[],h:new d(32),$:[],w:new d(32768),C:[],v:[],d:new d(32768),D:[],u:new d(512),Q:[],r:new d(32768),s:new f(286),Y:new f(30),a:new f(19),t:new f(15e3),k:new d(65536),g:new d(32768)}}(),function(){const d=h.H.m;for(var f=0;f<32768;f++){let E=f;E=(2863311530&E)>>>1|(1431655765&E)<<1,E=(3435973836&E)>>>2|(858993459&E)<<2,E=(4042322160&E)>>>4|(252645135&E)<<4,E=(4278255360&E)>>>8|(16711935&E)<<8,d.r[f]=(E>>>16|E<<16)>>>17}function m(E,N,k){for(;N--!=0;)E.push(0,k)}for(f=0;f<32;f++)d.q[f]=d.S[f]<<3|d.T[f],d.c[f]=d.p[f]<<4|d.z[f];m(d._,144,8),m(d._,112,9),m(d._,24,7),m(d._,8,8),h.H.n(d._,9),h.H.A(d._,9,d.J),h.H.l(d._,9),m(d.$,32,5),h.H.n(d.$,5),h.H.A(d.$,5,d.h),h.H.l(d.$,5),m(d.Q,19,0),m(d.C,286,0),m(d.D,30,0),m(d.v,320,0)}(),h.H.N}();function s(h){return[1,null,3,1,2,null,4][h.ctype]*h.depth}function a(h,d,f,m,E){let N=s(d);const k=Math.ceil(m*N/8);let _,x;N=Math.ceil(N/8);let S=h[f],M=0;if(S>1&&(h[f]=[0,0,1][S-2]),S==3)for(M=N;M<k;M++)h[M+1]=h[M+1]+(h[M+1-N]>>>1)&255;for(let U=0;U<E;U++)if(_=f+U*k,x=_+U+1,S=h[x-1],M=0,S==0)for(;M<k;M++)h[_+M]=h[x+M];else if(S==1){for(;M<N;M++)h[_+M]=h[x+M];for(;M<k;M++)h[_+M]=h[x+M]+h[_+M-N]}else if(S==2)for(;M<k;M++)h[_+M]=h[x+M]+h[_+M-k];else if(S==3){for(;M<N;M++)h[_+M]=h[x+M]+(h[_+M-k]>>>1);for(;M<k;M++)h[_+M]=h[x+M]+(h[_+M-k]+h[_+M-N]>>>1)}else{for(;M<N;M++)h[_+M]=h[x+M]+o(0,h[_+M-k],0);for(;M<k;M++)h[_+M]=h[x+M]+o(h[_+M-N],h[_+M-k],h[_+M-N-k])}return h}function o(h,d,f){const m=h+d-f,E=m-h,N=m-d,k=m-f;return E*E<=N*N&&E*E<=k*k?h:N*N<=k*k?d:f}function l(h,d,f){f.width=t.readUint(h,d),d+=4,f.height=t.readUint(h,d),d+=4,f.depth=h[d],d++,f.ctype=h[d],d++,f.compress=h[d],d++,f.filter=h[d],d++,f.interlace=h[d],d++}function c(h,d,f,m,E,N,k,_,x){const S=Math.min(d,E),M=Math.min(f,N);let U=0,T=0;for(let H=0;H<M;H++)for(let D=0;D<S;D++)if(k>=0&&_>=0?(U=H*d+D<<2,T=(_+H)*E+k+D<<2):(U=(-_+H)*d-k+D<<2,T=H*E+D<<2),x==0)m[T]=h[U],m[T+1]=h[U+1],m[T+2]=h[U+2],m[T+3]=h[U+3];else if(x==1){var A=h[U+3]*.00392156862745098,y=h[U]*A,v=h[U+1]*A,w=h[U+2]*A,C=m[T+3]*(1/255),I=m[T]*C,R=m[T+1]*C,L=m[T+2]*C;const O=1-A,$=A+C*O,F=$==0?0:1/$;m[T+3]=255*$,m[T+0]=(y+I*O)*F,m[T+1]=(v+R*O)*F,m[T+2]=(w+L*O)*F}else if(x==2)A=h[U+3],y=h[U],v=h[U+1],w=h[U+2],C=m[T+3],I=m[T],R=m[T+1],L=m[T+2],A==C&&y==I&&v==R&&w==L?(m[T]=0,m[T+1]=0,m[T+2]=0,m[T+3]=0):(m[T]=y,m[T+1]=v,m[T+2]=w,m[T+3]=A);else if(x==3){if(A=h[U+3],y=h[U],v=h[U+1],w=h[U+2],C=m[T+3],I=m[T],R=m[T+1],L=m[T+2],A==C&&y==I&&v==R&&w==L)continue;if(A<220&&C>20)return!1}return!0}return{decode:function(d){const f=new Uint8Array(d);let m=8;const E=t,N=E.readUshort,k=E.readUint,_={tabs:{},frames:[]},x=new Uint8Array(f.length);let S,M=0,U=0;const T=[137,80,78,71,13,10,26,10];for(var A=0;A<8;A++)if(f[A]!=T[A])throw"The input is not a PNG file!";for(;m<f.length;){const H=E.readUint(f,m);m+=4;const D=E.readASCII(f,m,4);if(m+=4,D=="IHDR")l(f,m,_);else if(D=="iCCP"){for(var y=m;f[y]!=0;)y++;E.readASCII(f,m,y-m),f[y+1];const O=f.slice(y+2,m+H);let $=null;try{$=r(O)}catch{$=i(O)}_.tabs[D]=$}else if(D=="CgBI")_.tabs[D]=f.slice(m,m+4);else if(D=="IDAT"){for(A=0;A<H;A++)x[M+A]=f[m+A];M+=H}else if(D=="acTL")_.tabs[D]={num_frames:k(f,m),num_plays:k(f,m+4)},S=new Uint8Array(f.length);else if(D=="fcTL"){U!=0&&((L=_.frames[_.frames.length-1]).data=n(_,S.slice(0,U),L.rect.width,L.rect.height),U=0);const O={x:k(f,m+12),y:k(f,m+16),width:k(f,m+4),height:k(f,m+8)};let $=N(f,m+22);$=N(f,m+20)/($==0?100:$);const F={rect:O,delay:Math.round(1e3*$),dispose:f[m+24],blend:f[m+25]};_.frames.push(F)}else if(D=="fdAT"){for(A=0;A<H-4;A++)S[U+A]=f[m+A+4];U+=H-4}else if(D=="pHYs")_.tabs[D]=[E.readUint(f,m),E.readUint(f,m+4),f[m+8]];else if(D=="cHRM")for(_.tabs[D]=[],A=0;A<8;A++)_.tabs[D].push(E.readUint(f,m+4*A));else if(D=="tEXt"||D=="zTXt"){_.tabs[D]==null&&(_.tabs[D]={});var v=E.nextZero(f,m),w=E.readASCII(f,m,v-m),C=m+H-v-1;if(D=="tEXt")R=E.readASCII(f,v+1,C);else{var I=r(f.slice(v+2,v+2+C));R=E.readUTF8(I,0,I.length)}_.tabs[D][w]=R}else if(D=="iTXt"){_.tabs[D]==null&&(_.tabs[D]={}),v=0,y=m,v=E.nextZero(f,y),w=E.readASCII(f,y,v-y);const O=f[y=v+1];var R;f[y+1],y+=2,v=E.nextZero(f,y),E.readASCII(f,y,v-y),y=v+1,v=E.nextZero(f,y),E.readUTF8(f,y,v-y),C=H-((y=v+1)-m),O==0?R=E.readUTF8(f,y,C):(I=r(f.slice(y,y+C)),R=E.readUTF8(I,0,I.length)),_.tabs[D][w]=R}else if(D=="PLTE")_.tabs[D]=E.readBytes(f,m,H);else if(D=="hIST"){const O=_.tabs.PLTE.length/3;for(_.tabs[D]=[],A=0;A<O;A++)_.tabs[D].push(N(f,m+2*A))}else if(D=="tRNS")_.ctype==3?_.tabs[D]=E.readBytes(f,m,H):_.ctype==0?_.tabs[D]=N(f,m):_.ctype==2&&(_.tabs[D]=[N(f,m),N(f,m+2),N(f,m+4)]);else if(D=="gAMA")_.tabs[D]=E.readUint(f,m)/1e5;else if(D=="sRGB")_.tabs[D]=f[m];else if(D=="bKGD")_.ctype==0||_.ctype==4?_.tabs[D]=[N(f,m)]:_.ctype==2||_.ctype==6?_.tabs[D]=[N(f,m),N(f,m+2),N(f,m+4)]:_.ctype==3&&(_.tabs[D]=f[m]);else if(D=="IEND")break;m+=H,E.readUint(f,m),m+=4}var L;return U!=0&&((L=_.frames[_.frames.length-1]).data=n(_,S.slice(0,U),L.rect.width,L.rect.height)),_.data=n(_,x,_.width,_.height),delete _.compress,delete _.interlace,delete _.filter,_},toRGBA8:function(d){const f=d.width,m=d.height;if(d.tabs.acTL==null)return[e(d.data,f,m,d).buffer];const E=[];d.frames[0].data==null&&(d.frames[0].data=d.data);const N=f*m*4,k=new Uint8Array(N),_=new Uint8Array(N),x=new Uint8Array(N);for(let M=0;M<d.frames.length;M++){const U=d.frames[M],T=U.rect.x,A=U.rect.y,y=U.rect.width,v=U.rect.height,w=e(U.data,y,v,d);if(M!=0)for(var S=0;S<N;S++)x[S]=k[S];if(U.blend==0?c(w,y,v,k,f,m,T,A,0):U.blend==1&&c(w,y,v,k,f,m,T,A,1),E.push(k.buffer.slice(0)),U.dispose!=0){if(U.dispose==1)c(_,y,v,k,f,m,T,A,0);else if(U.dispose==2)for(S=0;S<N;S++)k[S]=x[S]}}return E},_paeth:o,_copyTile:c,_bin:t}}();(function(){const{_copyTile:t}=xr,{_bin:e}=xr,n=xr._paeth;var r={table:function(){const y=new Uint32Array(256);for(let v=0;v<256;v++){let w=v;for(let C=0;C<8;C++)1&w?w=3988292384^w>>>1:w>>>=1;y[v]=w}return y}(),update(y,v,w,C){for(let I=0;I<C;I++)y=r.table[255&(y^v[w+I])]^y>>>8;return y},crc:(y,v,w)=>4294967295^r.update(4294967295,y,v,w)};function i(y,v,w,C){v[w]+=y[0]*C>>4,v[w+1]+=y[1]*C>>4,v[w+2]+=y[2]*C>>4,v[w+3]+=y[3]*C>>4}function s(y){return Math.max(0,Math.min(255,y))}function a(y,v){const w=y[0]-v[0],C=y[1]-v[1],I=y[2]-v[2],R=y[3]-v[3];return w*w+C*C+I*I+R*R}function o(y,v,w,C,I,R,L){L==null&&(L=1);const H=C.length,D=[];for(var O=0;O<H;O++){const V=C[O];D.push([V>>>0&255,V>>>8&255,V>>>16&255,V>>>24&255])}for(O=0;O<H;O++){let V=4294967295;for(var $=0,F=0;F<H;F++){var K=a(D[O],D[F]);F!=O&&K<V&&(V=K,$=F)}}const ie=new Uint32Array(I.buffer),ee=new Int16Array(v*w*4),B=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(O=0;O<B.length;O++)B[O]=255*((B[O]+.5)/16-.5);for(let V=0;V<w;V++)for(let se=0;se<v;se++){var Q;O=4*(V*v+se),L!=2?Q=[s(y[O]+ee[O]),s(y[O+1]+ee[O+1]),s(y[O+2]+ee[O+2]),s(y[O+3]+ee[O+3])]:(K=B[4*(3&V)+(3&se)],Q=[s(y[O]+K),s(y[O+1]+K),s(y[O+2]+K),s(y[O+3]+K)]),$=0;let Ee=16777215;for(F=0;F<H;F++){const ye=a(Q,D[F]);ye<Ee&&(Ee=ye,$=F)}const Ce=D[$],pe=[Q[0]-Ce[0],Q[1]-Ce[1],Q[2]-Ce[2],Q[3]-Ce[3]];L==1&&(se!=v-1&&i(pe,ee,O+4,7),V!=w-1&&(se!=0&&i(pe,ee,O+4*v-4,3),i(pe,ee,O+4*v,5),se!=v-1&&i(pe,ee,O+4*v+4,1))),R[O>>2]=$,ie[O>>2]=C[$]}}function l(y,v,w,C,I){I==null&&(I={});const{crc:R}=r,L=e.writeUint,H=e.writeUshort,D=e.writeASCII;let O=8;const $=y.frames.length>1;let F,K=!1,ie=33+($?20:0);if(I.sRGB!=null&&(ie+=13),I.pHYs!=null&&(ie+=21),I.iCCP!=null&&(F=pako.deflate(I.iCCP),ie+=21+F.length+4),y.ctype==3){for(var ee=y.plte.length,B=0;B<ee;B++)y.plte[B]>>>24!=255&&(K=!0);ie+=8+3*ee+4+(K?8+1*ee+4:0)}for(var Q=0;Q<y.frames.length;Q++)$&&(ie+=38),ie+=(Ce=y.frames[Q]).cimg.length+12,Q!=0&&(ie+=4);ie+=12;const V=new Uint8Array(ie),se=[137,80,78,71,13,10,26,10];for(B=0;B<8;B++)V[B]=se[B];if(L(V,O,13),O+=4,D(V,O,"IHDR"),O+=4,L(V,O,v),O+=4,L(V,O,w),O+=4,V[O]=y.depth,O++,V[O]=y.ctype,O++,V[O]=0,O++,V[O]=0,O++,V[O]=0,O++,L(V,O,R(V,O-17,17)),O+=4,I.sRGB!=null&&(L(V,O,1),O+=4,D(V,O,"sRGB"),O+=4,V[O]=I.sRGB,O++,L(V,O,R(V,O-5,5)),O+=4),I.iCCP!=null){const pe=13+F.length;L(V,O,pe),O+=4,D(V,O,"iCCP"),O+=4,D(V,O,"ICC profile"),O+=11,O+=2,V.set(F,O),O+=F.length,L(V,O,R(V,O-(pe+4),pe+4)),O+=4}if(I.pHYs!=null&&(L(V,O,9),O+=4,D(V,O,"pHYs"),O+=4,L(V,O,I.pHYs[0]),O+=4,L(V,O,I.pHYs[1]),O+=4,V[O]=I.pHYs[2],O++,L(V,O,R(V,O-13,13)),O+=4),$&&(L(V,O,8),O+=4,D(V,O,"acTL"),O+=4,L(V,O,y.frames.length),O+=4,L(V,O,I.loop!=null?I.loop:0),O+=4,L(V,O,R(V,O-12,12)),O+=4),y.ctype==3){for(L(V,O,3*(ee=y.plte.length)),O+=4,D(V,O,"PLTE"),O+=4,B=0;B<ee;B++){const pe=3*B,ye=y.plte[B],Le=255&ye,it=ye>>>8&255,zn=ye>>>16&255;V[O+pe+0]=Le,V[O+pe+1]=it,V[O+pe+2]=zn}if(O+=3*ee,L(V,O,R(V,O-3*ee-4,3*ee+4)),O+=4,K){for(L(V,O,ee),O+=4,D(V,O,"tRNS"),O+=4,B=0;B<ee;B++)V[O+B]=y.plte[B]>>>24&255;O+=ee,L(V,O,R(V,O-ee-4,ee+4)),O+=4}}let Ee=0;for(Q=0;Q<y.frames.length;Q++){var Ce=y.frames[Q];$&&(L(V,O,26),O+=4,D(V,O,"fcTL"),O+=4,L(V,O,Ee++),O+=4,L(V,O,Ce.rect.width),O+=4,L(V,O,Ce.rect.height),O+=4,L(V,O,Ce.rect.x),O+=4,L(V,O,Ce.rect.y),O+=4,H(V,O,C[Q]),O+=2,H(V,O,1e3),O+=2,V[O]=Ce.dispose,O++,V[O]=Ce.blend,O++,L(V,O,R(V,O-30,30)),O+=4);const pe=Ce.cimg;L(V,O,(ee=pe.length)+(Q==0?0:4)),O+=4;const ye=O;D(V,O,Q==0?"IDAT":"fdAT"),O+=4,Q!=0&&(L(V,O,Ee++),O+=4),V.set(pe,O),O+=ee,L(V,O,R(V,ye,O-ye)),O+=4}return L(V,O,0),O+=4,D(V,O,"IEND"),O+=4,L(V,O,R(V,O-4,4)),O+=4,V.buffer}function c(y,v,w){for(let C=0;C<y.frames.length;C++){const I=y.frames[C];I.rect.width;const R=I.rect.height,L=new Uint8Array(R*I.bpl+R);I.cimg=m(I.img,R,I.bpp,I.bpl,L,v,w)}}function h(y,v,w,C,I){const R=I[0],L=I[1],H=I[2],D=I[3],O=I[4],$=I[5];let F=6,K=8,ie=255;for(var ee=0;ee<y.length;ee++){const Nt=new Uint8Array(y[ee]);for(var B=Nt.length,Q=0;Q<B;Q+=4)ie&=Nt[Q+3]}const V=ie!=255,se=function($e,Qe,Et,It,ot,yt){const He=[];for(var Ve=0;Ve<$e.length;Ve++){const Lt=new Uint8Array($e[Ve]),wt=new Uint32Array(Lt.buffer);var Ut;let Dt=0,bn=0,cn=Qe,Bn=Et,Li=It?1:0;if(Ve!=0){const Vi=yt||It||Ve==1||He[Ve-2].dispose!=0?1:2;let Pr=0,oi=1e9;for(let jr=0;jr<Vi;jr++){var Pe=new Uint8Array($e[Ve-1-jr]);const Ur=new Uint32Array($e[Ve-1-jr]);let Nn=Qe,En=Et,$t=-1,Fn=-1;for(let sr=0;sr<Et;sr++)for(let j=0;j<Qe;j++)wt[ft=sr*Qe+j]!=Ur[ft]&&(j<Nn&&(Nn=j),j>$t&&($t=j),sr<En&&(En=sr),sr>Fn&&(Fn=sr));$t==-1&&(Nn=En=$t=Fn=0),ot&&((1&Nn)==1&&Nn--,(1&En)==1&&En--);const li=($t-Nn+1)*(Fn-En+1);li<oi&&(oi=li,Pr=jr,Dt=Nn,bn=En,cn=$t-Nn+1,Bn=Fn-En+1)}Pe=new Uint8Array($e[Ve-1-Pr]),Pr==1&&(He[Ve-1].dispose=2),Ut=new Uint8Array(cn*Bn*4),t(Pe,Qe,Et,Ut,cn,Bn,-Dt,-bn,0),Li=t(Lt,Qe,Et,Ut,cn,Bn,-Dt,-bn,3)?1:0,Li==1?f(Lt,Qe,Et,Ut,{x:Dt,y:bn,width:cn,height:Bn}):t(Lt,Qe,Et,Ut,cn,Bn,-Dt,-bn,0)}else Ut=Lt.slice(0);He.push({rect:{x:Dt,y:bn,width:cn,height:Bn},img:Ut,blend:Li,dispose:0})}if(It)for(Ve=0;Ve<He.length;Ve++){if((Cn=He[Ve]).blend==1)continue;const Lt=Cn.rect,wt=He[Ve-1].rect,Dt=Math.min(Lt.x,wt.x),bn=Math.min(Lt.y,wt.y),cn={x:Dt,y:bn,width:Math.max(Lt.x+Lt.width,wt.x+wt.width)-Dt,height:Math.max(Lt.y+Lt.height,wt.y+wt.height)-bn};He[Ve-1].dispose=1,Ve-1!=0&&d($e,Qe,Et,He,Ve-1,cn,ot),d($e,Qe,Et,He,Ve,cn,ot)}let qe=0;if($e.length!=1)for(var ft=0;ft<He.length;ft++){var Cn;qe+=(Cn=He[ft]).rect.width*Cn.rect.height}return He}(y,v,w,R,L,H),Ee={},Ce=[],pe=[];if(C!=0){const Nt=[];for(Q=0;Q<se.length;Q++)Nt.push(se[Q].img.buffer);const $e=function(ot){let yt=0;for(var He=0;He<ot.length;He++)yt+=ot[He].byteLength;const Ve=new Uint8Array(yt);let Ut=0;for(He=0;He<ot.length;He++){const Pe=new Uint8Array(ot[He]),qe=Pe.length;for(let ft=0;ft<qe;ft+=4){let Cn=Pe[ft],Lt=Pe[ft+1],wt=Pe[ft+2];const Dt=Pe[ft+3];Dt==0&&(Cn=Lt=wt=0),Ve[Ut+ft]=Cn,Ve[Ut+ft+1]=Lt,Ve[Ut+ft+2]=wt,Ve[Ut+ft+3]=Dt}Ut+=qe}return Ve.buffer}(Nt),Qe=N($e,C);for(Q=0;Q<Qe.plte.length;Q++)Ce.push(Qe.plte[Q].est.rgba);let Et=0;for(Q=0;Q<se.length;Q++){const It=(Le=se[Q]).img.length;var ye=new Uint8Array(Qe.inds.buffer,Et>>2,It>>2);pe.push(ye);const ot=new Uint8Array(Qe.abuf,Et,It);$&&o(Le.img,Le.rect.width,Le.rect.height,Ce,ot,ye),Le.img.set(ot),Et+=It}}else for(ee=0;ee<se.length;ee++){var Le=se[ee];const Nt=new Uint32Array(Le.img.buffer);var it=Le.rect.width;for(B=Nt.length,ye=new Uint8Array(B),pe.push(ye),Q=0;Q<B;Q++){const $e=Nt[Q];if(Q!=0&&$e==Nt[Q-1])ye[Q]=ye[Q-1];else if(Q>it&&$e==Nt[Q-it])ye[Q]=ye[Q-it];else{let Qe=Ee[$e];if(Qe==null&&(Ee[$e]=Qe=Ce.length,Ce.push($e),Ce.length>=300))break;ye[Q]=Qe}}}const zn=Ce.length;for(zn<=256&&O==0&&(K=zn<=2?1:zn<=4?2:zn<=16?4:8,K=Math.max(K,D)),ee=0;ee<se.length;ee++){(Le=se[ee]).rect.x,Le.rect.y,it=Le.rect.width;const Nt=Le.rect.height;let $e=Le.img;new Uint32Array($e.buffer);let Qe=4*it,Et=4;if(zn<=256&&O==0){Qe=Math.ceil(K*it/8);var bt=new Uint8Array(Qe*Nt);const It=pe[ee];for(let ot=0;ot<Nt;ot++){Q=ot*Qe;const yt=ot*it;if(K==8)for(var Xe=0;Xe<it;Xe++)bt[Q+Xe]=It[yt+Xe];else if(K==4)for(Xe=0;Xe<it;Xe++)bt[Q+(Xe>>1)]|=It[yt+Xe]<<4-4*(1&Xe);else if(K==2)for(Xe=0;Xe<it;Xe++)bt[Q+(Xe>>2)]|=It[yt+Xe]<<6-2*(3&Xe);else if(K==1)for(Xe=0;Xe<it;Xe++)bt[Q+(Xe>>3)]|=It[yt+Xe]<<7-1*(7&Xe)}$e=bt,F=3,Et=1}else if(V==0&&se.length==1){bt=new Uint8Array(it*Nt*3);const It=it*Nt;for(Q=0;Q<It;Q++){const ot=3*Q,yt=4*Q;bt[ot]=$e[yt],bt[ot+1]=$e[yt+1],bt[ot+2]=$e[yt+2]}$e=bt,F=2,Et=3,Qe=3*it}Le.img=$e,Le.bpl=Qe,Le.bpp=Et}return{ctype:F,depth:K,plte:Ce,frames:se}}function d(y,v,w,C,I,R,L){const H=Uint8Array,D=Uint32Array,O=new H(y[I-1]),$=new D(y[I-1]),F=I+1<y.length?new H(y[I+1]):null,K=new H(y[I]),ie=new D(K.buffer);let ee=v,B=w,Q=-1,V=-1;for(let Ee=0;Ee<R.height;Ee++)for(let Ce=0;Ce<R.width;Ce++){const pe=R.x+Ce,ye=R.y+Ee,Le=ye*v+pe,it=ie[Le];it==0||C[I-1].dispose==0&&$[Le]==it&&(F==null||F[4*Le+3]!=0)||(pe<ee&&(ee=pe),pe>Q&&(Q=pe),ye<B&&(B=ye),ye>V&&(V=ye))}Q==-1&&(ee=B=Q=V=0),L&&((1&ee)==1&&ee--,(1&B)==1&&B--),R={x:ee,y:B,width:Q-ee+1,height:V-B+1};const se=C[I];se.rect=R,se.blend=1,se.img=new Uint8Array(R.width*R.height*4),C[I-1].dispose==0?(t(O,v,w,se.img,R.width,R.height,-R.x,-R.y,0),f(K,v,w,se.img,R)):t(K,v,w,se.img,R.width,R.height,-R.x,-R.y,0)}function f(y,v,w,C,I){t(y,v,w,C,I.width,I.height,-I.x,-I.y,2)}function m(y,v,w,C,I,R,L){const H=[];let D,O=[0,1,2,3,4];R!=-1?O=[R]:(v*C>5e5||w==1)&&(O=[0]),L&&(D={level:0});const $=ZP;for(var F=0;F<O.length;F++){for(let ee=0;ee<v;ee++)E(I,y,ee,C,w,O[F]);H.push($.deflate(I,D))}let K,ie=1e9;for(F=0;F<H.length;F++)H[F].length<ie&&(K=F,ie=H[F].length);return H[K]}function E(y,v,w,C,I,R){const L=w*C;let H=L+w;if(y[H]=R,H++,R==0)if(C<500)for(var D=0;D<C;D++)y[H+D]=v[L+D];else y.set(new Uint8Array(v.buffer,L,C),H);else if(R==1){for(D=0;D<I;D++)y[H+D]=v[L+D];for(D=I;D<C;D++)y[H+D]=v[L+D]-v[L+D-I]+256&255}else if(w==0){for(D=0;D<I;D++)y[H+D]=v[L+D];if(R==2)for(D=I;D<C;D++)y[H+D]=v[L+D];if(R==3)for(D=I;D<C;D++)y[H+D]=v[L+D]-(v[L+D-I]>>1)+256&255;if(R==4)for(D=I;D<C;D++)y[H+D]=v[L+D]-n(v[L+D-I],0,0)+256&255}else{if(R==2)for(D=0;D<C;D++)y[H+D]=v[L+D]+256-v[L+D-C]&255;if(R==3){for(D=0;D<I;D++)y[H+D]=v[L+D]+256-(v[L+D-C]>>1)&255;for(D=I;D<C;D++)y[H+D]=v[L+D]+256-(v[L+D-C]+v[L+D-I]>>1)&255}if(R==4){for(D=0;D<I;D++)y[H+D]=v[L+D]+256-n(0,v[L+D-C],0)&255;for(D=I;D<C;D++)y[H+D]=v[L+D]+256-n(v[L+D-I],v[L+D-C],v[L+D-I-C])&255}}}function N(y,v){const w=new Uint8Array(y),C=w.slice(0),I=new Uint32Array(C.buffer),R=k(C,v),L=R[0],H=R[1],D=w.length,O=new Uint8Array(D>>2);let $;if(w.length<2e7)for(var F=0;F<D;F+=4)$=_(L,K=w[F]*(1/255),ie=w[F+1]*(1/255),ee=w[F+2]*(1/255),B=w[F+3]*(1/255)),O[F>>2]=$.ind,I[F>>2]=$.est.rgba;else for(F=0;F<D;F+=4){var K=w[F]*.00392156862745098,ie=w[F+1]*(1/255),ee=w[F+2]*(1/255),B=w[F+3]*(1/255);for($=L;$.left;)$=x($.est,K,ie,ee,B)<=0?$.left:$.right;O[F>>2]=$.ind,I[F>>2]=$.est.rgba}return{abuf:C.buffer,inds:O,plte:H}}function k(y,v,w){w==null&&(w=1e-4);const C=new Uint32Array(y.buffer),I={i0:0,i1:y.length,bst:null,est:null,tdst:0,left:null,right:null};I.bst=U(y,I.i0,I.i1),I.est=T(I.bst);const R=[I];for(;R.length<v;){let H=0,D=0;for(var L=0;L<R.length;L++)R[L].est.L>H&&(H=R[L].est.L,D=L);if(H<w)break;const O=R[D],$=S(y,C,O.i0,O.i1,O.est.e,O.est.eMq255);if(O.i0>=$||O.i1<=$){O.est.L=0;continue}const F={i0:O.i0,i1:$,bst:null,est:null,tdst:0,left:null,right:null};F.bst=U(y,F.i0,F.i1),F.est=T(F.bst);const K={i0:$,i1:O.i1,bst:null,est:null,tdst:0,left:null,right:null};for(K.bst={R:[],m:[],N:O.bst.N-F.bst.N},L=0;L<16;L++)K.bst.R[L]=O.bst.R[L]-F.bst.R[L];for(L=0;L<4;L++)K.bst.m[L]=O.bst.m[L]-F.bst.m[L];K.est=T(K.bst),O.left=F,O.right=K,R[D]=F,R.push(K)}for(R.sort((H,D)=>D.bst.N-H.bst.N),L=0;L<R.length;L++)R[L].ind=L;return[I,R]}function _(y,v,w,C,I){if(y.left==null)return y.tdst=function(F,K,ie,ee,B){const Q=K-F[0],V=ie-F[1],se=ee-F[2],Ee=B-F[3];return Q*Q+V*V+se*se+Ee*Ee}(y.est.q,v,w,C,I),y;const R=x(y.est,v,w,C,I);let L=y.left,H=y.right;R>0&&(L=y.right,H=y.left);const D=_(L,v,w,C,I);if(D.tdst<=R*R)return D;const O=_(H,v,w,C,I);return O.tdst<D.tdst?O:D}function x(y,v,w,C,I){const{e:R}=y;return R[0]*v+R[1]*w+R[2]*C+R[3]*I-y.eMq}function S(y,v,w,C,I,R){for(C-=4;w<C;){for(;M(y,w,I)<=R;)w+=4;for(;M(y,C,I)>R;)C-=4;if(w>=C)break;const L=v[w>>2];v[w>>2]=v[C>>2],v[C>>2]=L,w+=4,C-=4}for(;M(y,w,I)>R;)w-=4;return w+4}function M(y,v,w){return y[v]*w[0]+y[v+1]*w[1]+y[v+2]*w[2]+y[v+3]*w[3]}function U(y,v,w){const C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=[0,0,0,0],R=w-v>>2;for(let L=v;L<w;L+=4){const H=y[L]*.00392156862745098,D=y[L+1]*(1/255),O=y[L+2]*(1/255),$=y[L+3]*(1/255);I[0]+=H,I[1]+=D,I[2]+=O,I[3]+=$,C[0]+=H*H,C[1]+=H*D,C[2]+=H*O,C[3]+=H*$,C[5]+=D*D,C[6]+=D*O,C[7]+=D*$,C[10]+=O*O,C[11]+=O*$,C[15]+=$*$}return C[4]=C[1],C[8]=C[2],C[9]=C[6],C[12]=C[3],C[13]=C[7],C[14]=C[11],{R:C,m:I,N:R}}function T(y){const{R:v}=y,{m:w}=y,{N:C}=y,I=w[0],R=w[1],L=w[2],H=w[3],D=C==0?0:1/C,O=[v[0]-I*I*D,v[1]-I*R*D,v[2]-I*L*D,v[3]-I*H*D,v[4]-R*I*D,v[5]-R*R*D,v[6]-R*L*D,v[7]-R*H*D,v[8]-L*I*D,v[9]-L*R*D,v[10]-L*L*D,v[11]-L*H*D,v[12]-H*I*D,v[13]-H*R*D,v[14]-H*L*D,v[15]-H*H*D],$=O,F=A;let K=[Math.random(),Math.random(),Math.random(),Math.random()],ie=0,ee=0;if(C!=0)for(let Q=0;Q<16&&(K=F.multVec($,K),ee=Math.sqrt(F.dot(K,K)),K=F.sml(1/ee,K),!(Q!=0&&Math.abs(ee-ie)<1e-9));Q++)ie=ee;const B=[I*D,R*D,L*D,H*D];return{Cov:O,q:B,e:K,L:ie,eMq255:F.dot(F.sml(255,B),K),eMq:F.dot(K,B),rgba:(Math.round(255*B[3])<<24|Math.round(255*B[2])<<16|Math.round(255*B[1])<<8|Math.round(255*B[0])<<0)>>>0}}var A={multVec:(y,v)=>[y[0]*v[0]+y[1]*v[1]+y[2]*v[2]+y[3]*v[3],y[4]*v[0]+y[5]*v[1]+y[6]*v[2]+y[7]*v[3],y[8]*v[0]+y[9]*v[1]+y[10]*v[2]+y[11]*v[3],y[12]*v[0]+y[13]*v[1]+y[14]*v[2]+y[15]*v[3]],dot:(y,v)=>y[0]*v[0]+y[1]*v[1]+y[2]*v[2]+y[3]*v[3],sml:(y,v)=>[y*v[0],y*v[1],y*v[2],y*v[3]]};xr.encode=function(v,w,C,I,R,L,H){I==null&&(I=0),H==null&&(H=!1);const D=h(v,w,C,I,[!1,!1,!1,0,H,!1]);return c(D,-1),l(D,w,C,R,L)},xr.encodeLL=function(v,w,C,I,R,L,H,D){const O={ctype:0+(I==1?0:2)+(R==0?0:4),depth:L,frames:[]},$=(I+R)*L,F=$*w;for(let K=0;K<v.length;K++)O.frames.push({rect:{x:0,y:0,width:w,height:C},img:new Uint8Array(v[K]),blend:0,dispose:1,bpp:Math.ceil($/8),bpl:Math.ceil(F/8)});return c(O,0,!0),l(O,w,C,H,D)},xr.encode.compress=h,xr.encode.dither=o,xr.quantize=N,xr.quantize.getKDtree=k,xr.quantize.getNearest=_})();const H2={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,s=t.getContext("2d").getImageData(0,0,n,r),a=new Uint32Array(s.data.buffer),o=(32*n+31)/32<<2,l=o*r,c=122+l,h=new ArrayBuffer(c),d=new DataView(h),f=1<<20;let m,E,N,k,_=f,x=0,S=0,M=0;function U(y){d.setUint16(S,y,!0),S+=2}function T(y){d.setUint32(S,y,!0),S+=4}function A(y){S+=y}U(19778),T(c),A(4),T(122),T(108),T(n),T(-r>>>0),U(1),U(32),T(3),T(l),T(2835),T(2835),A(8),T(16711680),T(65280),T(255),T(4278190080),T(1466527264),function y(){for(;x<r&&_>0;){for(k=122+x*o,m=0;m<i;)_--,E=a[M++],N=E>>>24,d.setUint32(k+m,E<<8|N),m+=4;x++}M<a.length?(_=f,setTimeout(y,H2._dly)):e(h)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var Pn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},JP={[Pn.CHROME]:16384,[Pn.FIREFOX]:11180,[Pn.DESKTOP_SAFARI]:16384,[Pn.IE]:8192,[Pn.IOS]:4096,[Pn.ETC]:8192};const gy=typeof window<"u",q2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,_f=gy&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),ej=(gy||q2)&&(_f&&_f.getOriginalSymbol(window,"File")||typeof File<"u"&&File),G2=(gy||q2)&&(_f&&_f.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function yy(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),s=i[0].match(/:(.*?);/)[1],a=globalThis.atob(i[1]);let o=a.length;const l=new Uint8Array(o);for(;o--;)l[o]=a.charCodeAt(o);const c=new Blob([l],{type:s});c.name=e,c.lastModified=n,r(c)})}function $2(t){return new Promise((e,n)=>{const r=new G2;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function Q2(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function Js(){if(Js.cachedResult!==void 0)return Js.cachedResult;let t=Pn.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=Pn.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=Pn.IOS:/Safari/i.test(e)?t=Pn.DESKTOP_SAFARI:/Firefox/i.test(e)?t=Pn.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=Pn.IE),Js.cachedResult=t,Js.cachedResult}function K2(t,e){const n=Js(),r=JP[n];let i=t,s=e,a=i*s;const o=i>s?s/i:i/s;for(;a>r*r;){const l=(r+i)/2,c=(r+s)/2;l<c?(s=c,i=c*o):(s=l*o,i=l),a=i*s}return{width:i,height:s}}function gd(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function Y2(t,e){const{width:n,height:r}=K2(t.width,t.height),[i,s]=gd(n,r);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(t,0,0,i.width,i.height),i}function gh(){return gh.cachedResult!==void 0||(gh.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),gh.cachedResult}function bf(t,e={}){return new Promise(function(n,r){let i,s;var a=function(){try{return s=Y2(i,e.fileType||t.type),n([i,s])}catch(l){return r(l)}},o=function(l){try{var c=function(h){try{throw h}catch(d){return r(d)}};try{let h;return $2(t).then(function(d){try{return h=d,Q2(h).then(function(f){try{return i=f,function(){try{return a()}catch(m){return r(m)}}()}catch(m){return c(m)}},c)}catch(f){return c(f)}},c)}catch(h){c(h)}}catch(h){return r(h)}};try{if(gh()||[Pn.DESKTOP_SAFARI,Pn.MOBILE_SAFARI].includes(Js()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return i=l,a()}catch{return o()}},o)}catch{o()}})}function Ef(t,e,n,r,i=1){return new Promise(function(s,a){let o;if(e==="image/png"){let d,f,m;return d=t.getContext("2d"),{data:f}=d.getImageData(0,0,t.width,t.height),m=xr.encode([f.buffer],t.width,t.height,4096*i),o=new Blob([m],{type:e}),o.name=n,o.lastModified=r,l.call(this)}{let d=function(){return l.call(this)};var c=d;if(e==="image/bmp")return new Promise(f=>H2.toBlob(t,f)).then((function(f){try{return o=f,o.name=n,o.lastModified=r,d.call(this)}catch(m){return a(m)}}).bind(this),a);{let f=function(){return d.call(this)};var h=f;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(m){try{return o=m,o.name=n,o.lastModified=r,f.call(this)}catch(E){return a(E)}}).bind(this),a);{let m;return m=t.toDataURL(e,i),yy(m,n,r).then((function(E){try{return o=E,f.call(this)}catch(N){return a(N)}}).bind(this),a)}}}function l(){return s(o)}})}function Hr(t){t.width=0,t.height=0}function uo(){return new Promise(function(t,e){let n,r,i,s;return uo.cachedResult!==void 0?t(uo.cachedResult):yy("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(a){try{return n=a,bf(n).then(function(o){try{return r=o[1],Ef(r,n.type,n.name,n.lastModified).then(function(l){try{return i=l,Hr(r),bf(i).then(function(c){try{return s=c[0],uo.cachedResult=s.width===1&&s.height===2,t(uo.cachedResult)}catch(h){return e(h)}},e)}catch(c){return e(c)}},e)}catch(l){return e(l)}},e)}catch(o){return e(o)}},e)})}function X2(t){return new Promise((e,n)=>{const r=new G2;r.onload=i=>{const s=new DataView(i.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const a=s.byteLength;let o=2;for(;o<a;){if(s.getUint16(o+2,!1)<=8)return e(-1);const l=s.getUint16(o,!1);if(o+=2,l==65505){if(s.getUint32(o+=2,!1)!=1165519206)return e(-1);const c=s.getUint16(o+=6,!1)==18761;o+=s.getUint32(o+4,c);const h=s.getUint16(o,c);o+=2;for(let d=0;d<h;d++)if(s.getUint16(o+12*d,c)==274)return e(s.getUint16(o+12*d+8,c))}else{if((65280&l)!=65280)break;o+=s.getUint16(o,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function W2(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let s,a=t;return isFinite(i)&&(n>i||r>i)&&([a,s]=gd(n,r),n>r?(a.width=i,a.height=r/n*i):(a.width=n/r*i,a.height=i),s.drawImage(t,0,0,a.width,a.height),Hr(t)),a}function Z2(t,e){const{width:n}=t,{height:r}=t,[i,s]=gd(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,r),Hr(t),i}function S1(t,e,n=0){return new Promise(function(r,i){let s,a,o,l,c,h,d,f,m,E,N,k,_,x,S,M,U,T,A,y;function v(C=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=C,e.onProgress(Math.min(s,100))}function w(C){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(C,s),100),e.onProgress(s)}return s=n,a=e.maxIteration||10,o=1024*e.maxSizeMB*1024,v(),bf(t,e).then((function(C){try{return[,l]=C,v(),c=W2(l,e),v(),new Promise(function(I,R){var L;if(!(L=e.exifOrientation))return X2(t).then((function(D){try{return L=D,H.call(this)}catch(O){return R(O)}}).bind(this),R);function H(){return I(L)}return H.call(this)}).then((function(I){try{return h=I,v(),uo().then((function(R){try{return d=R?c:Z2(c,h),v(),f=e.initialQuality||1,m=e.fileType||t.type,Ef(d,m,t.name,t.lastModified,f).then((function(L){try{{let $=function(){if(a--&&(S>o||S>_)){let K,ie;return K=y?.95*A.width:A.width,ie=y?.95*A.height:A.height,[U,T]=gd(K,ie),T.drawImage(A,0,0,K,ie),f*=m==="image/png"?.85:.95,Ef(U,m,t.name,t.lastModified,f).then(function(ee){try{return M=ee,Hr(A),A=U,S=M.size,w(Math.min(99,Math.floor((x-S)/(x-o)*100))),$}catch(B){return i(B)}},i)}return[1]},F=function(){return Hr(A),Hr(U),Hr(c),Hr(d),Hr(l),w(100),r(M)};var D=$,O=F;if(E=L,v(),N=E.size>o,k=E.size>t.size,!N&&!k)return w(100),r(E);var H;return _=t.size,x=E.size,S=x,A=d,y=!e.alwaysKeepResolution&&N,(H=(function(K){for(;K;){if(K.then)return void K.then(H,i);try{if(K.pop){if(K.length)return K.pop()?F.call(this):K;K=$}else K=K.call(this)}catch(ie){return i(ie)}}}).bind(this))($)}}catch($){return i($)}}).bind(this),i)}catch(L){return i(L)}}).bind(this),i)}catch(R){return i(R)}}).bind(this),i)}catch(I){return i(I)}}).bind(this),i)})}const tj=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Tm;function nj(t,e){return new Promise((n,r)=>{Tm||(Tm=function(a){const o=[];return o.push(a),URL.createObjectURL(new Blob(o))}(tj));const i=new Worker(Tm);i.addEventListener("message",function(a){if(e.signal&&e.signal.aborted)i.terminate();else if(a.data.progress===void 0){if(a.data.error)return r(new Error(a.data.error)),void i.terminate();n(a.data.file),i.terminate()}else e.onProgress(a.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function mn(t,e){return new Promise(function(n,r){let i,s,a,o,l,c;if(i={...e},a=0,{onProgress:o}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=m=>{a=m,typeof o=="function"&&o(a)},!(t instanceof Blob||t instanceof ej))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(c=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||c)return S1(t,i).then((function(m){try{return s=m,f.call(this)}catch(E){return r(E)}}).bind(this),r);var h=(function(){try{return f.call(this)}catch(m){return r(m)}}).bind(this),d=function(m){try{return S1(t,i).then(function(E){try{return s=E,h()}catch(N){return r(N)}},r)}catch(E){return r(E)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",nj(t,i).then(function(m){try{return s=m,h()}catch{return d()}},d)}catch{d()}function f(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(s=F2(t,s))}catch{}return n(s)}})}mn.getDataUrlFromFile=$2,mn.getFilefromDataUrl=yy,mn.loadImage=Q2,mn.drawImageInCanvas=Y2,mn.drawFileInCanvas=bf,mn.canvasToFile=Ef,mn.getExifOrientation=X2,mn.handleMaxWidthOrHeight=W2,mn.followExifOrientation=Z2,mn.cleanupCanvasMemory=Hr,mn.isAutoOrientationInBrowser=uo,mn.approximateBelowMaximumCanvasSizeOfBrowser=K2,mn.copyExifWithoutOrientation=F2,mn.getBrowserName=Js,mn.version="2.0.2";async function rj(t){const e={maxSizeMB:1,maxWidthOrHeight:1024,useWebWorker:!0};try{return await mn(t,e)}catch(n){return console.error("Image compression failed:",n),t}}let Jp,eg;Ao&&(Jp=async(t,e,n)=>{const r=await rj(t),i=x1(Ao,`users/${e}/character-portraits/${n}`);return await BP(i,r),A1(i)},eg=async(t,e,n)=>{const r=x1(Ao,`users/${e}/character-portraits/${n}`);return await FP(r,t,pr.DATA_URL),A1(r)});const ij=t=>Math.ceil(t/4)+1,tg=t=>Math.floor((t-10)/2),sj=t=>[{name:"Acrobatics",ability:"dexterity",proficient:!1,expertise:!1},{name:"Animal Handling",ability:"wisdom",proficient:!1,expertise:!1},{name:"Arcana",ability:"intelligence",proficient:!1,expertise:!1},{name:"Athletics",ability:"strength",proficient:!1,expertise:!1},{name:"Deception",ability:"charisma",proficient:!1,expertise:!1},{name:"History",ability:"intelligence",proficient:!1,expertise:!1},{name:"Insight",ability:"wisdom",proficient:!1,expertise:!1},{name:"Intimidation",ability:"charisma",proficient:!1,expertise:!1},{name:"Investigation",ability:"intelligence",proficient:!1,expertise:!1},{name:"Medicine",ability:"wisdom",proficient:!1,expertise:!1},{name:"Nature",ability:"intelligence",proficient:!1,expertise:!1},{name:"Perception",ability:"wisdom",proficient:!1,expertise:!1},{name:"Performance",ability:"charisma",proficient:!1,expertise:!1},{name:"Persuasion",ability:"charisma",proficient:!1,expertise:!1},{name:"Religion",ability:"intelligence",proficient:!1,expertise:!1},{name:"Sleight of Hand",ability:"dexterity",proficient:!1,expertise:!1},{name:"Stealth",ability:"dexterity",proficient:!1,expertise:!1},{name:"Survival",ability:"wisdom",proficient:!1,expertise:!1}],xu=()=>{const t={strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10};return{id:`new_${Date.now()}`,lastUpdated:Date.now(),name:"",class:"",subclass:"",level:1,race:"",alignment:"",background:"",playerName:"",experiencePoints:0,abilityScores:t,inspiration:0,proficiencyBonus:ij(1),savingThrows:{strength:{proficient:!1},dexterity:{proficient:!1},constitution:{proficient:!1},intelligence:{proficient:!1},wisdom:{proficient:!1},charisma:{proficient:!1}},skills:sj(),unarmoredDefense:{base:10,abilities:["dexterity"]},initiative:tg(t.dexterity),speed:30,hp:{max:10,current:10,temporary:0},hitDice:{total:"1d8",used:0},deathSaves:{successes:0,failures:0},personalityTraits:"",ideals:"",bonds:"",flaws:"",languages:"Common",attacks:[],currency:{cp:0,sp:0,ep:0,gp:0,pp:0},equipment:[],featuresAndTraits:[],notes:"",dmNotes:"",spellcastingAbility:"",spells:[],spellSlots:{1:{max:0,used:0},2:{max:0,used:0},3:{max:0,used:0},4:{max:0,used:0},5:{max:0,used:0},6:{max:0,used:0},7:{max:0,used:0},8:{max:0,used:0},9:{max:0,used:0}},customResources:[],imageUrl:""}},J2=t=>{var s,a;if(!t)return 10;const e=tg(t.abilityScores.dexterity);let n=0;const r=(s=t.equipment)==null?void 0:s.find(o=>o.equipped&&["light","medium","heavy"].includes(o.armorType||"")),i=(a=t.equipment)==null?void 0:a.find(o=>o.equipped&&o.armorType==="shield");if(r){const o=r.armorClass||0;switch(r.armorType){case"light":n=o+e;break;case"medium":n=o+Math.min(2,e);break;case"heavy":n=o;break}}else{const o=t.unarmoredDefense||{base:10,abilities:[]};let l=o.base;o.abilities.forEach(c=>{l+=tg(t.abilityScores[c])}),n=l}return i&&(n+=i.armorClass||2),n},eS="runica-characters",sc=()=>{try{const t=localStorage.getItem(eS);return t?JSON.parse(t).map(e=>({...xu(),...e})):[]}catch(t){return console.error("Error reading from local storage",t),[]}},wf=t=>{try{localStorage.setItem(eS,JSON.stringify(t))}catch(e){console.error("Error saving to local storage",e)}},vy=()=>!ba||!(xn!=null&&xn.currentUser)?null:dk(ba,"users",xn.currentUser.uid,"characters"),_y=t=>{const e=vy();return e?c2(e,t):null},aj=t=>{const e=vy();return e?Ok(xk(e),n=>{const r=n.docs.map(i=>i.data());t(r)}):(t(sc()),()=>{})},tS=async t=>{if(t==="new")return xu();const e=_y(t);if(e){const n=await Ck(e);return n.exists()?n.data():null}else return sc().find(n=>n.id===t)||null},nS=async t=>{const e={...t,lastUpdated:Date.now()},n=_y(e.id);if(n)await Ik(n,e);else{const r=sc(),i=r.findIndex(s=>s.id===e.id);i>-1?r[i]=e:r.push(e),wf(r)}return e},rS=async t=>{const e=_y(t);if(e)await Dk(e);else{const n=sc();wf(n.filter(r=>r.id!==t))}},oj=async()=>{if(!ba||!(xn!=null&&xn.currentUser)||!eg)return;const t=sc();if(t.length===0||!window.confirm("You have local characters saved on this device. Do you want to move them to your account? This will merge them with any existing characters on your account."))return;const e=vy();if(!e)return;const n=kk(ba),i=(await Nk(e)).docs.map(a=>a.data());let s=0;for(const a of t){const o=i.find(l=>l.id===a.id);if(!o||a.lastUpdated>(o.lastUpdated||0)){const l={...a};if(l.imageUrl&&l.imageUrl.startsWith("data:image"))try{const h=xn.currentUser.uid;l.imageUrl=await eg(l.imageUrl,h,l.id)}catch(h){console.error(`Failed to upload image for character ${l.name}. It will be saved with the local data URL.`,h),l.imageUrl=""}const c=c2(e,a.id);n.set(c,l),s++}}if(s>0)try{await n.commit(),alert(`${s} character(s) migrated to your account.`),wf([])}catch(a){console.error("Failed to migrate characters:",a),alert("There was an error migrating your characters. They remain on this device for now.")}else alert("No characters needed to be migrated. Your cloud data is up to date."),wf([])},iS=z.createContext({currentUser:null,loading:!0}),sS=()=>z.useContext(iS),lj=({children:t})=>{const[e,n]=z.useState(null),[r,i]=z.useState(!0);z.useEffect(()=>QP(async l=>{n(l),l&&(await l.getIdToken(),await oj()),i(!1)}),[]);const s={currentUser:e,loading:r};return p.jsx(iS.Provider,{value:s,children:t})},uj=()=>{if(!lo||!xn||!ba||!Ao)throw new Error("Firebase is not initialized. Make sure your environment variables are set.");return{app:lo,auth:xn,db:ba,storage:Ao}},cj=()=>{const{currentUser:t}=sS(),e=z.useMemo(()=>{try{return uj()}catch(i){return console.warn("Firebase non disponibile, le funzionalit di autenticazione sono disabilitate.",i),null}},[]),n=async()=>{if(!e)return;const i=new Gr;try{await A5(e.auth,i)}catch(s){console.error("Errore durante il sign-in:",s)}},r=async()=>{if(e)try{await i5(e.auth)}catch(i){console.error("Errore durante il sign-out:",i)}};return t?p.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("img",{src:t.photoURL||"",alt:"User",className:"w-9 h-9 rounded-full"}),p.jsx("span",{className:"text-zinc-300 hidden sm:inline",children:t.displayName||t.email})]}),p.jsxs("button",{onClick:r,className:"flex items-center justify-center bg-zinc-700 hover:bg-zinc-600 rounded-md text-white transition-colors h-9 w-9 sm:w-auto sm:px-4 disabled:bg-zinc-600 disabled:cursor-not-allowed",title:"Sign Out",disabled:!e,children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),p.jsx("span",{className:"hidden sm:inline sm:ml-2",children:"Sign Out"})]})]}):p.jsxs("button",{onClick:n,className:"flex items-center justify-center bg-amber-600 hover:bg-amber-500 rounded-md text-white font-bold transition-colors h-9 w-9 sm:w-auto sm:px-4 sm:gap-2 disabled:bg-zinc-600 disabled:cursor-not-allowed",title:"Sign in",disabled:!e,children:[p.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M22.56,12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26,1.37-1.04,2.53-2.21,3.31v2.77h3.57c2.08-1.92,3.28-4.74,3.28-8.09Z"}),p.jsx("path",{d:"M12,23c2.97,0,5.46-.98,7.28-2.66l-3.57-2.77c-.98.66-2.23,1.06-3.71,1.06-2.86,0-5.29-1.93-6.16-4.53H2.18v2.84C3.99,20.53,7.7,23,12,23Z"}),p.jsx("path",{d:"M5.84,14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43,8.55,1,10.22,1,12s.43,3.45,1.18,4.93l3.66-2.84Z"}),p.jsx("path",{d:"M12,5.38c1.62,0,3.06.56,4.21,1.64l3.15-3.15C17.45,2.09,14.97,1,12,1,7.7,1,3.99,3.47,2.18,7.07l3.66,2.84c.87-2.6,3.3-4.53,6.16-4.53Z"})]}),p.jsx("span",{className:"hidden sm:inline",children:"Sign in"})]})},hj=({className:t})=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor",children:[p.jsx("path",{fillRule:"evenodd",d:"M9.315 7.584C12.195 3.883 19.695 4.032 22.425 8.133c.225.33.015.765-.36.765h-2.19c-.39 0-.683-.404-.509-.757C17.58 4.568 11.535 4.818 9.315 7.584zM10.035 15c-2.88 3.701-10.38 3.552-13.11-0.549a.6.6 0 01.36-.765h2.19c.39 0 .683.404.509.757 1.785 3.552 7.83 3.302 10.05-0.21z",clipRule:"evenodd"}),p.jsx("path",{d:"M11.25 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75V12zM12 4.5a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75V4.5zM12 18a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75V18zM4.5 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75H5.25a.75.75 0 01-.75-.75V12zM18 12a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75V12z"})]}),Da=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.256 1.478l-.209-.035-1.005 13.006a.75.75 0 01-.75.742H5.625a.75.75 0 01-.75-.742L3.87 6.66l-.209.035a.75.75 0 01-.256-1.478A48.567 48.567 0 017.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 013.369 0c1.603.051 2.815 1.387 2.815 2.951zm-6.136-1.452a51.196 51.196 0 013.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 00-6 0v-.113c0-.794.609-1.428 1.364-1.452z",clipRule:"evenodd"})}),Oa=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:t,children:p.jsx("path",{d:"M2.695 14.763l-1.262 3.154a.5.5 0 00.65.65l3.155-1.262a4 4 0 001.343-.885L17.5 5.5a2.121 2.121 0 00-3-3L3.58 13.42a4 4 0 00-.885 1.343z"})}),aS=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),oS=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),fj=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),ac=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),dj=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),lS=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),mj=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),pj=t=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),gj=()=>{const[t,e]=z.useState(null),[n,r]=z.useState(!1);z.useEffect(()=>{const s=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,a="standalone"in window.navigator&&window.navigator.standalone;r(s&&!a);const o=l=>{l.preventDefault(),e(l)};return window.addEventListener("beforeinstallprompt",o),()=>{window.removeEventListener("beforeinstallprompt",o)}},[]);const i=async()=>{t&&(await t.prompt(),e(null))};return p.jsx("header",{className:"group bg-zinc-900/80 backdrop-blur-sm sticky top-0 z-50 border-b border-zinc-700/50",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-8",children:p.jsxs("div",{className:"flex justify-between items-center h-12 group-hover:h-16 transition-all duration-300 ease-in-out",children:[p.jsx(f0,{to:"/",className:"text-5xl font-bold text-amber-400 font-norse tracking-wider [text-shadow:0_0_8px_theme(colors.amber.300)]",children:"RUNICA"}),p.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[t&&!n&&p.jsxs("button",{onClick:i,className:"flex items-center justify-center text-sm bg-amber-600 hover:bg-amber-500 h-9 w-9 sm:w-auto sm:px-3 sm:py-2 sm:gap-2 rounded-md text-white transition",title:"Installa Runica sul tuo dispositivo",children:[p.jsx(mj,{className:"w-5 h-5"}),p.jsx("span",{className:"hidden sm:inline",children:"Installa App"})]}),n&&!t&&p.jsxs("div",{className:"flex items-center justify-center text-sm bg-sky-600 h-9 w-9 sm:w-auto sm:px-3 sm:py-2 sm:gap-2 rounded-md text-white",title:"Per installare: tocca l'icona Condividi e poi 'Aggiungi a Home'",children:[p.jsx(pj,{className:"w-5 h-5"}),p.jsx("span",{className:"hidden sm:inline",children:"Installa App"})]}),p.jsx(cj,{})]})]})})})},yj=()=>p.jsxs("div",{className:"min-h-screen bg-zinc-900 text-zinc-200",children:[p.jsx(gj,{}),p.jsx("main",{children:p.jsx(ZI,{})}),p.jsx("footer",{className:"text-center text-sm text-zinc-500 py-4",children:p.jsxs("p",{children:[" ",new Date().getFullYear()," RUNICA. All rights reserved."]})})]}),uS=z.createContext(void 0),Rn=()=>{const t=z.useContext(uS);if(!t)throw new Error("useCharacter must be used within a CharacterProvider");return t},Am=({children:t})=>{const[e,n]=z.useState(null),i={character:e,setCharacter:n,updateCharacter:s=>{n(a=>a?{...a,...s}:null)}};return p.jsx(uS.Provider,{value:i,children:t})},vj=({character:t,onSelect:e,onDelete:n,onEdit:r})=>p.jsxs("div",{onClick:e,className:"bg-zinc-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 hover:shadow-amber-500/20 hover:scale-105 group relative cursor-pointer",role:"button",tabIndex:0,children:[p.jsx("div",{className:"h-32 bg-zinc-700/50 relative",children:t.imageUrl?p.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-600",children:p.jsx(oS,{className:"w-16 h-16"})})}),p.jsxs("div",{className:"p-5",children:[p.jsx("h3",{className:"text-xl font-bold font-cinzel text-amber-400 truncate",children:t.name||"Unnamed Adventurer"}),p.jsxs("p",{className:"text-zinc-400 capitalize text-sm",children:[t.race||"Race"," ",t.class||"Class","  Level ",t.level]}),p.jsxs("div",{className:"mt-4 flex items-center gap-4 text-sm text-zinc-300 border-t border-zinc-700 pt-4",children:[p.jsxs("div",{className:"flex items-center gap-1.5",title:"Hit Points",children:[p.jsx("span",{className:"font-bold text-red-400",children:"HP"}),p.jsxs("span",{children:[t.hp.current,"/",t.hp.max]})]}),p.jsxs("div",{className:"flex items-center gap-1.5",title:"Armor Class",children:[p.jsx("span",{className:"font-bold text-sky-400",children:"AC"}),p.jsx("span",{children:J2(t)})]})]})]}),p.jsxs("div",{className:"absolute top-3 right-3 flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsx("button",{onClick:r,className:"p-2 rounded-full bg-zinc-700 hover:bg-amber-500 text-zinc-300 hover:text-white transition-colors","aria-label":`Edit ${t.name}`,children:p.jsx(Oa,{className:"w-4 h-4"})}),p.jsx("button",{onClick:n,className:"p-2 rounded-full bg-zinc-700 hover:bg-red-600 text-zinc-300 hover:text-white transition-colors","aria-label":`Delete ${t.name}`,children:p.jsx(Da,{className:"w-4 h-4"})})]})]}),_j=()=>{const[t,e]=z.useState([]),[n,r]=z.useState(!0),{currentUser:i}=sS(),s=qf();z.useEffect(()=>{r(!0);const c=aj(h=>{const d=h.map(f=>({...xu(),...f}));e(d.sort((f,m)=>f.name.localeCompare(m.name))),r(!1)});return()=>c()},[i]);const a=c=>{s(c==="new"?"/character/new":`/character/${c}`)},o=c=>{s(`/character/${c}/edit`)},l=async(c,h)=>{window.confirm(`Are you sure you want to delete ${h}? This cannot be undone.`)&&await rS(c)};return n?p.jsx("div",{className:"flex justify-center items-center h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})}):p.jsxs("div",{className:"p-4 sm:p-8 max-w-7xl mx-auto pt-12",children:[p.jsx("h2",{className:"text-3xl font-cinzel text-center text-zinc-300 mb-8",children:"Your Characters"}),p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsxs("button",{onClick:()=>a("new"),className:"mb-10 flex items-center gap-2 px-6 py-3 bg-amber-600 text-white font-bold rounded-lg shadow-md hover:bg-amber-500 transition-all duration-300 transform hover:scale-105",children:[p.jsx(dj,{className:"w-5 h-5"}),"Create New Character"]}),t.length>0?p.jsx("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(c=>p.jsx(vj,{character:c,onSelect:()=>a(c.id),onDelete:h=>{h.stopPropagation(),l(c.id,c.name)},onEdit:h=>{h.stopPropagation(),o(c.id)}},c.id))}):p.jsxs("div",{className:"text-center w-full max-w-2xl mt-8 py-16 px-6 bg-zinc-800/50 rounded-lg",children:[p.jsx("h2",{className:"text-2xl font-semibold text-zinc-300 font-cinzel",children:"Your adventure awaits!"}),p.jsxs("p",{className:"text-zinc-400 mt-2",children:[i?"You have no characters synced to this account.":"You have no local characters.",p.jsx("br",{}),"Click the button above to forge your first hero."]})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj="type.googleapis.com/google.protobuf.Int64Value",Ej="type.googleapis.com/google.protobuf.UInt64Value";function cS(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Tf(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Tf(e));if(typeof t=="function"||typeof t=="object")return cS(t,e=>Tf(e));throw new Error("Data cannot be encoded in JSON: "+t)}function qo(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case bj:case Ej:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>qo(e)):typeof t=="function"||typeof t=="object"?cS(t,e=>qo(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Un extends kr{constructor(e,n,r){super(`${by}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Un.prototype)}}function wj(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Af(t,e){let n=wj(t),r=n,i;try{const s=e&&e.error;if(s){const a=s.status;if(typeof a=="string"){if(!R1[a])return new Un("internal","internal");n=R1[a],r=a}const o=s.message;typeof o=="string"&&(r=o),i=s.details,i!==void 0&&(i=qo(i))}}catch{}return n==="ok"?null:new Un(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Xn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i==null||i.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="us-central1",Aj=/^data: (.*?)(?:\n|$)/;function xj(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Un("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Sj{constructor(e,n,r,i,s=ng,a=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new Tj(e,n,r,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=ng}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Rj(t,e,n){const r=Ui(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Qf(t.emulatorOrigin),Kf("Functions",!0))}function Cj(t,e,n){const r=i=>Ij(t,e,i,{});return r.stream=(i,s)=>Oj(t,e,i,s),r}async function Nj(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}async function hS(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Ij(t,e,n,r){const i=t._url(e);return Dj(t,i,n,r)}async function Dj(t,e,n,r){n=Tf(n);const i={data:n},s=await hS(t,r),a=r.timeout||7e4,o=xj(a),l=await Promise.race([Nj(e,i,s,t.fetchImpl),o.promise,t.cancelAllRequests]);if(o.cancel(),!l)throw new Un("cancelled","Firebase Functions instance was deleted.");const c=Af(l.status,l.json);if(c)throw c;if(!l.json)throw new Un("internal","Response is not valid JSON object.");let h=l.json.data;if(typeof h>"u"&&(h=l.json.result),typeof h>"u")throw new Un("internal","Response is missing data field.");return{data:qo(h)}}function Oj(t,e,n,r){const i=t._url(e);return Mj(t,i,n,r||{})}async function Mj(t,e,n,r){var i;n=Tf(n);const s={data:n},a=await hS(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:a,signal:r==null?void 0:r.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const N=new Un("cancelled","Request was cancelled.");return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}const E=Af(0,null);return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}let l,c;const h=new Promise((m,E)=>{l=m,c=E});(i=r==null?void 0:r.signal)===null||i===void 0||i.addEventListener("abort",()=>{const m=new Un("cancelled","Request was cancelled.");c(m)});const d=o.body.getReader(),f=kj(d,l,c,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=f.getReader();return{async next(){const{value:E,done:N}=await m.read();return{value:E,done:N}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:h}}function kj(t,e,n,r){const i=(a,o)=>{const l=a.match(Aj);if(!l)return;const c=l[1];try{const h=JSON.parse(c);if("result"in h){e(qo(h.result));return}if("message"in h){o.enqueue(qo(h.message));return}if("error"in h){const d=Af(0,h);o.error(d),n(d);return}}catch(h){if(h instanceof Un){o.error(h),n(h);return}}},s=new TextDecoder;return new ReadableStream({start(a){let o="";return l();async function l(){if(r!=null&&r.aborted){const c=new Un("cancelled","Request was cancelled");return a.error(c),n(c),Promise.resolve()}try{const{value:c,done:h}=await t.read();if(h){o.trim()&&i(o.trim(),a),a.close();return}if(r!=null&&r.aborted){const f=new Un("cancelled","Request was cancelled");a.error(f),n(f),await t.cancel();return}o+=s.decode(c,{stream:!0});const d=o.split(`
`);o=d.pop()||"";for(const f of d)f.trim()&&i(f.trim(),a);return l()}catch(c){const h=c instanceof Un?c:Af(0,null);a.error(h),n(h)}}},cancel(){return t.cancel()}})}const C1="@firebase/functions",N1="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj="auth-internal",jj="app-check-internal",Uj="messaging-internal";function Lj(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),s=n.getProvider(Pj),a=n.getProvider(Uj),o=n.getProvider(jj);return new Sj(i,s,a,o,r)};Rs(new Di(by,e,"PUBLIC").setMultipleInstances(!0)),gr(C1,N1,t),gr(C1,N1,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(t=Yf(),e=ng){const r=Qu(rt(t),by).getImmediate({identifier:e}),i=d0("functions");return i&&zj(r,...i),r}function zj(t,e,n){Rj(rt(t),e,n)}function Bj(t,e,n){return Cj(rt(t),e)}Lj();const Fj={personalityTraits:"Generazione AI fallita. Impossibile contattare il servizio.",ideals:"Errore.",bonds:"Errore.",flaws:"Errore."},Hj=Bj(Vj(),"callGemini"),qj=async(t,e)=>{const{name:n,race:r,class:i,background:s,alignment:a}=t,o=`
     Generate personality aspects for a Dungeons & Dragons character.
     Based on the following details:
     - Name: ${n}
     - Race: ${r}
     - Class: ${i}
     - Background: ${s}
     - Alignment: ${a}
     ${e?`
- Additional Theme: "${e}"`:""}

     Return a JSON object with four keys: "personalityTraits", "ideals", "bonds", and "flaws".
     - "personalityTraits": A short paragraph describing the character's general demeanor.
     - "ideals": A sentence describing a core belief.
     - "bonds": A sentence about something or someone the character cares deeply about.
     - "flaws": A sentence describing a significant weakness or fear.
   `;try{console.log("Calling Cloud Function 'callGemini'...");const l=await Hj(o);if(!l.data.success||!l.data.response)throw new Error("La Cloud Function ha riportato un errore: "+l.data.response);const c=l.data.response.trim(),h=JSON.parse(c);return{personalityTraits:h.personalityTraits||"",ideals:h.ideals||"",bonds:h.bonds||"",flaws:h.flaws||""}}catch(l){return console.error("Errore durante la chiamata alla Cloud Function 'callGemini':",l),Fj}},Gj={name:"",level:0,school:"Evocation",castingTime:"1 Action",range:"60 feet",components:"V, S",duration:"Instantaneous",description:""},$j=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=z.useState(t),s=(c,h)=>{i(d=>({...d,[c]:h}))},a=c=>{c.preventDefault(),r.name.trim()&&e(r)},o=["Abjuration","Conjuration","Divination","Enchantment","Evocation","Illusion","Necromancy","Transmutation"],l="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return p.jsxs("form",{onSubmit:a,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-6",children:[p.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Spell":"Add New Spell"}),p.jsx("input",{type:"text",placeholder:"Spell Name",value:r.name,onChange:c=>s("name",c.target.value),required:!0,className:l}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsx("input",{type:"number",placeholder:"Level",value:r.level,onChange:c=>s("level",parseInt(c.target.value)),min:"0",max:"9",className:l}),p.jsx("select",{value:r.school,onChange:c=>s("school",c.target.value),className:l,children:o.map(c=>p.jsx("option",{value:c,children:c},c))})]}),p.jsx("textarea",{placeholder:"Description",value:r.description,onChange:c=>s("description",c.target.value),rows:4,className:`${l} resize-y`}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Spell"})]})]})},Qj=({spell:t,onEdit:e,onDelete:n,onToggleExpand:r,isExpanded:i})=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg",children:[p.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-3",onClick:r,children:[p.jsx("h4",{className:"font-bold text-amber-300",children:t.name}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("span",{className:"text-sm text-zinc-400 capitalize",children:t.school}),p.jsx("button",{onClick:s=>{s.stopPropagation(),e()},className:"text-zinc-400 hover:text-amber-400 p-1",children:p.jsx(Oa,{className:"w-4 h-4"})}),p.jsx("button",{onClick:s=>{s.stopPropagation(),n()},className:"text-zinc-500 hover:text-red-400 p-1",children:p.jsx(Da,{className:"w-4 h-4"})})]})]}),i&&p.jsxs("div",{className:"mt-2 pt-3 border-t border-zinc-600/50 space-y-2 text-sm p-3 bg-zinc-900/30",children:[p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Casting Time:"})," ",t.castingTime]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Range:"})," ",t.range]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Components:"})," ",t.components]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Duration:"})," ",t.duration]}),p.jsx("p",{className:"text-zinc-300 mt-2 whitespace-pre-wrap",children:t.description})]})]}),Kj=()=>{const{character:t,updateCharacter:e}=Rn(),[n,r]=z.useState(null),[i,s]=z.useState({});if(!t)return null;const a=d=>{let f;if("id"in d)f=t.spells.map(m=>m.id===d.id?d:m);else{const m={...d,id:`spell_${Date.now()}`};f=[...t.spells,m]}e({spells:f}),r(null)},o=d=>{if(window.confirm("Are you sure you want to delete this spell?")){const f=t.spells.filter(m=>m.id!==d);e({spells:f})}},l=d=>{s(f=>({...f,[d]:!f[d]}))},c=z.useMemo(()=>t.spells.reduce((d,f)=>(d[f.level]=[...d[f.level]||[],f],d[f.level].sort((m,E)=>m.name.localeCompare(E.name)),d),{}),[t.spells]),h=Object.keys(c).map(Number).sort((d,f)=>d-f);return p.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Spellbook"}),p.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[p.jsx(ac,{className:"w-5 h-5"})," Add Spell"]})]}),n&&p.jsx($j,{initialData:n==="new"?Gj:n,onSave:a,onCancel:()=>r(null)}),p.jsxs("div",{className:"space-y-6 overflow-y-auto pr-2 -mr-2",children:[t.spells.length===0&&!n&&p.jsx("p",{className:"text-center text-zinc-500 text-sm py-8",children:"This character knows no spells. Add one to get started!"}),h.map(d=>p.jsxs("div",{children:[p.jsx("h4",{className:"text-xl font-serif text-zinc-300 border-b border-zinc-600 pb-1 mb-3",children:d===0?"Cantrips":`Level ${d}`}),p.jsx("div",{className:"space-y-3",children:c[d].map(f=>p.jsx(Qj,{spell:f,isExpanded:!!i[f.id],onToggleExpand:()=>l(f.id),onEdit:()=>r(f),onDelete:()=>o(f.id)},f.id))})]},d))]})]})},Yj={name:"",description:""},Xj=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=z.useState(t),s=(l,c)=>{i(h=>({...h,[l]:c}))},a=l=>{l.preventDefault(),r.name.trim()&&e(r)},o="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return p.jsxs("form",{onSubmit:a,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[p.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Feature":"Add New Feature"}),p.jsx("input",{type:"text",placeholder:"Feature or Trait Name",value:r.name,onChange:l=>s("name",l.target.value),required:!0,className:o}),p.jsx("textarea",{placeholder:"Description",value:r.description,onChange:l=>s("description",l.target.value),rows:4,className:`${o} resize-y`}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Feature"})]})]})},Wj=()=>{const{character:t,updateCharacter:e}=Rn(),[n,r]=z.useState(null),[i,s]=z.useState({});if(!t)return null;const a=h=>{let d;if("id"in h)d=t.featuresAndTraits.map(f=>f.id===h.id?h:f);else{const f={...h,id:`feat_${Date.now()}`};d=[...t.featuresAndTraits,f]}e({featuresAndTraits:d}),r(null)},o=h=>{if(window.confirm("Are you sure you want to delete this feature?")){const d=t.featuresAndTraits.filter(f=>f.id!==h);e({featuresAndTraits:d})}},l=h=>{s(d=>({...d,[h]:!d[h]}))},c=z.useMemo(()=>[...t.featuresAndTraits].sort((h,d)=>h.name.localeCompare(d.name)),[t.featuresAndTraits]);return p.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Features & Traits"}),p.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[p.jsx(ac,{className:"w-5 h-5"})," Add Feature"]})]}),n&&p.jsx(Xj,{initialData:n==="new"?Yj:n,onSave:a,onCancel:()=>r(null)}),p.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[c.length===0&&!n&&p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"No features or traits have been added."})}),c.map(h=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:[p.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer",onClick:()=>l(h.id),children:[p.jsx("span",{className:"font-semibold text-amber-300",children:h.name}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:d=>{d.stopPropagation(),r(h)},className:"text-zinc-400 hover:text-amber-400 p-1",children:p.jsx(Oa,{className:"w-4 h-4"})}),p.jsx("button",{onClick:d=>{d.stopPropagation(),o(h.id)},className:"text-zinc-500 hover:text-red-400 p-1",children:p.jsx(Da,{className:"w-4 h-4"})})]})]}),i[h.id]&&p.jsx("div",{className:"p-3 border-t border-zinc-600/50 bg-zinc-900/30",children:p.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:h.description})})]},h.id))]})]})},Zj={name:"",quantity:1,description:"",equipped:!1},Jj=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=z.useState(t),s=(c,h)=>{i(d=>({...d,[c]:h}))},a=c=>{c.preventDefault(),r.name.trim()&&e(r)},o="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500 text-sm",l="block text-xs font-medium text-zinc-400 mb-1";return p.jsxs("form",{onSubmit:a,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[p.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Item":"Add New Item"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"md:col-span-2",children:[p.jsx("label",{htmlFor:"name",className:l,children:"Item Name"}),p.jsx("input",{id:"name",type:"text",placeholder:"e.g., Longsword",value:r.name,onChange:c=>s("name",c.target.value),required:!0,className:o})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"quantity",className:l,children:"Quantity"}),p.jsx("input",{id:"quantity",type:"number",value:r.quantity,onChange:c=>s("quantity",parseInt(c.target.value)||1),min:"1",className:`${o} text-center`})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"description",className:l,children:"Description"}),p.jsx("textarea",{id:"description",value:r.description,onChange:c=>s("description",c.target.value),className:o,rows:3})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"armorType",className:l,children:"Armor Type"}),p.jsxs("select",{id:"armorType",value:r.armorType||"",onChange:c=>s("armorType",c.target.value||void 0),className:o,children:[p.jsx("option",{value:"",children:"Not Armor"}),p.jsx("option",{value:"light",children:"Light Armor"}),p.jsx("option",{value:"medium",children:"Medium Armor"}),p.jsx("option",{value:"heavy",children:"Heavy Armor"}),p.jsx("option",{value:"shield",children:"Shield"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"armorClass",className:l,children:"Armor Class (AC)"}),p.jsx("input",{id:"armorClass",type:"number",placeholder:"e.g., 14",value:r.armorClass||"",onChange:c=>s("armorClass",parseInt(c.target.value)||void 0),className:o})]})]}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition text-sm",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition text-sm",children:"Save Item"})]})]})},I1=({title:t,items:e,expandedItem:n,onToggleExpand:r,onEdit:i,onDelete:s})=>p.jsxs("div",{children:[p.jsx("h4",{className:"text-base font-semibold text-zinc-300 border-b border-zinc-700 pb-2 mb-3",children:t}),p.jsxs("div",{className:"space-y-2",children:[e.length===0&&p.jsx("p",{className:"text-center text-zinc-500 text-xs py-2",children:"Empty"}),e.map(a=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:[p.jsxs("div",{className:"p-3 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[p.jsx("button",{onClick:()=>r(a.id),className:"flex-shrink-0 text-zinc-400 hover:text-white",children:p.jsx(lS,{className:`w-5 h-5 transition-transform ${n===a.id?"rotate-180":""}`})}),p.jsxs("p",{className:"font-semibold text-amber-300 truncate",title:a.name,children:[a.name," ",p.jsxs("span",{className:"text-xs text-zinc-400",children:["(x",a.quantity,")"]})]})]}),p.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[p.jsx("button",{onClick:()=>i(a),className:"text-zinc-400 hover:text-amber-400 p-1",children:p.jsx(Oa,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>s(a.id),className:"text-zinc-500 hover:text-red-400 p-1",children:p.jsx(Da,{className:"w-4 h-4"})})]})]}),n===a.id&&p.jsxs("div",{className:"p-3 border-t border-zinc-600/50 bg-zinc-900/30 space-y-2",children:[a.armorType&&p.jsxs("p",{children:[p.jsxs("strong",{className:"text-zinc-400 capitalize",children:[a.armorType," Armor"]}),a.armorClass?p.jsxs("span",{className:"text-zinc-300",children:[" (AC: ",a.armorClass,")"]}):""]}),p.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:a.description||"No description."})]})]},a.id))]})]}),eU=()=>{const{character:t,updateCharacter:e}=Rn(),[n,r]=z.useState(null),[i,s]=z.useState(null),a=d=>{let f;if("id"in d)f=(t.equipment||[]).map(m=>m.id===d.id?d:m);else{const m={...d,id:`item_${Date.now()}`};f=[...t.equipment||[],m]}e({equipment:f}),r(null)},o=d=>{if(window.confirm("Are you sure you want to delete this item?")){const f=(t.equipment||[]).filter(m=>m.id!==d);e({equipment:f})}},l=d=>{s(f=>f===d?null:d)},{equippableItems:c,backpackItems:h}=z.useMemo(()=>{const d=[],f=[];return(t.equipment||[]).forEach(m=>{m.armorType?d.push(m):f.push(m)}),{equippableItems:d.sort((m,E)=>m.name.localeCompare(E.name)),backpackItems:f.sort((m,E)=>m.name.localeCompare(E.name))}},[t.equipment]);return p.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-lg",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Inventory"}),p.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[p.jsx(ac,{className:"w-5 h-5"})," Add Item"]})]}),n&&p.jsx(Jj,{initialData:n==="new"?Zj:n,onSave:a,onCancel:()=>r(null)}),p.jsxs("div",{className:"space-y-6",children:[p.jsx(I1,{title:"Equippable Gear",items:c,expandedItem:i,onToggleExpand:l,onEdit:r,onDelete:o}),p.jsx(I1,{title:"Backpack",items:h,expandedItem:i,onToggleExpand:l,onEdit:r,onDelete:o})]})]})},tU={name:"",bonus:"+0",damage:"1d4"},nU=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=z.useState(t),s=(l,c)=>{i(h=>({...h,[l]:c}))},a=l=>{l.preventDefault(),r.name.trim()&&e(r)},o="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return p.jsxs("form",{onSubmit:a,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[p.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Attack":"Add New Attack"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsx("input",{type:"text",placeholder:"Attack Name",value:r.name,onChange:l=>s("name",l.target.value),required:!0,className:`${o} sm:col-span-1`}),p.jsx("input",{type:"text",placeholder:"e.g. +5",value:r.bonus,onChange:l=>s("bonus",l.target.value),required:!0,className:`${o} text-center`}),p.jsx("input",{type:"text",placeholder:"e.g. (2d6)+(1d4)+3",value:r.damage,onChange:l=>s("damage",l.target.value),required:!0,className:`${o} text-center`})]}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save Attack"})]})]})},rU=()=>{const{character:t,updateCharacter:e}=Rn(),[n,r]=z.useState(null);if(!t)return null;const i=o=>{let l;if("id"in o)l=t.attacks.map(c=>c.id===o.id?o:c);else{const c={...o,id:`attack_${Date.now()}`};l=[...t.attacks,c]}e({attacks:l}),r(null)},s=o=>{if(window.confirm("Are you sure you want to delete this attack?")){const l=t.attacks.filter(c=>c.id!==o);e({attacks:l})}},a=z.useMemo(()=>[...t.attacks||[]].sort((o,l)=>o.name.localeCompare(l.name)),[t.attacks]);return p.jsxs("div",{className:"bg-zinc-800/80 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Attacks & Cantrips"}),p.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[p.jsx(ac,{className:"w-5 h-5"})," Add Attack"]})]}),n&&p.jsx(nU,{initialData:n==="new"?tU:n,onSave:i,onCancel:()=>r(null)}),p.jsxs("div",{className:"space-y-2 overflow-y-auto pr-2 -mr-2 flex-grow",children:[a.length===0&&!n&&p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"No attacks have been defined."})}),a.map(o=>p.jsx("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:p.jsxs("div",{className:"grid grid-cols-6 items-center p-3",children:[p.jsx("span",{className:"font-semibold text-amber-300 col-span-3",children:o.name}),p.jsx("span",{className:"font-mono text-zinc-300 col-span-1 text-center",children:o.bonus}),p.jsx("span",{className:"font-mono text-zinc-300 col-span-1 text-center",children:o.damage}),p.jsxs("div",{className:"flex items-center gap-2 justify-end col-span-1",children:[p.jsx("button",{onClick:()=>r(o),className:"text-zinc-400 hover:text-amber-400 p-1",children:p.jsx(Oa,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>s(o.id),className:"text-zinc-500 hover:text-red-400 p-1",children:p.jsx(Da,{className:"w-4 h-4"})})]})]})},o.id))]})]})},iU={name:"",max:1},sU=({initialData:t,onSave:e,onCancel:n})=>{const[r,i]=z.useState(t),s=(l,c)=>{i(h=>({...h,[l]:c}))},a=l=>{l.preventDefault(),r.name.trim()&&e(r)},o="w-full bg-zinc-800 p-2 rounded border border-zinc-600 focus:ring-amber-500 focus:border-amber-500";return p.jsxs("form",{onSubmit:a,className:"bg-zinc-700/80 p-4 rounded-lg border border-amber-500/30 space-y-4 mb-4",children:[p.jsx("h3",{className:"font-cinzel text-lg text-amber-400",children:"id"in t?"Edit Resource":"Add New Resource"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsx("input",{type:"text",placeholder:"Resource Name",value:r.name,onChange:l=>s("name",l.target.value),required:!0,className:`${o} sm:col-span-2`}),p.jsx("input",{type:"number",placeholder:"Max",value:r.max,onChange:l=>s("max",parseInt(l.target.value)||1),min:"1",className:`${o} text-center`})]}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-2 px-4 rounded transition",children:"Save"})]})]})},aU=({character:t,onUpdateCharacter:e})=>{const[n,r]=z.useState(null),i=a=>{let o;if("id"in a)o=(t.customResources||[]).map(l=>l.id===a.id?{...l,name:a.name,max:a.max}:l);else{const l={...a,id:`resource_${Date.now()}`,used:0};o=[...t.customResources||[],l]}e({customResources:o}),r(null)},s=a=>{if(window.confirm("Are you sure you want to delete this resource?")){const o=(t.customResources||[]).filter(l=>l.id!==a);e({customResources:o})}};return p.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-lg",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Other Resources"}),p.jsxs("button",{onClick:()=>r("new"),className:"flex items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition",children:[p.jsx(ac,{className:"w-5 h-5"})," Add Resource"]})]}),n&&p.jsx(sU,{initialData:n==="new"?iU:n,onSave:i,onCancel:()=>r(null)}),p.jsxs("div",{className:"space-y-2",children:[(t.customResources||[]).length===0&&!n&&p.jsx("p",{className:"text-center text-zinc-500 text-sm py-4",children:"No custom resources defined."}),(t.customResources||[]).map(a=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm p-3 flex items-center justify-between",children:[p.jsx("span",{className:"font-semibold text-amber-300",children:a.name}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("span",{className:"text-zinc-400",children:["Max: ",a.max]}),p.jsx("button",{onClick:()=>r(a),className:"text-zinc-400 hover:text-amber-400 p-1",children:p.jsx(Oa,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>s(a.id),className:"text-zinc-500 hover:text-red-400 p-1",children:p.jsx(Da,{className:"w-4 h-4"})})]})]},a.id))]})]})},Rr=({label:t,value:e,subValue:n,className:r})=>p.jsxs("div",{className:`flex flex-col items-center justify-center p-3 bg-zinc-800 border border-zinc-700 rounded-lg text-center ${r}`,children:[p.jsx("span",{className:"text-2xl sm:text-3xl font-bold font-mono text-white",children:e}),p.jsx("span",{className:"text-xs uppercase tracking-wider text-zinc-400 mt-1",children:t}),n&&p.jsx("span",{className:"text-xs text-zinc-500",children:n})]}),xo=t=>Math.floor((t-10)/2),pi=t=>t>=0?`+${t}`:String(t),xm=["strength","dexterity","constitution","intelligence","wisdom","charisma"],oU=({label:t,isActive:e,onClick:n,controls:r,id:i})=>p.jsx("button",{id:i,role:"tab","aria-selected":e,"aria-controls":r,onClick:n,className:`px-3 py-2 text-sm font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-zinc-700 text-amber-400 border-b-2 border-amber-400":"text-zinc-400 hover:bg-zinc-800/60 border-b-2 border-transparent"}`,children:t}),Ar=({label:t,name:e,type:n,value:r,onChange:i,placeholder:s,className:a})=>p.jsxs("div",{className:a,children:[p.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-zinc-400 capitalize",children:t}),p.jsx("input",{type:n,id:e,name:e,value:r,onChange:i,placeholder:s,className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md shadow-sm py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm"})]}),za=({label:t,name:e,value:n,onChange:r,placeholder:i})=>p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col flex-1 h-full",children:[p.jsx("h3",{className:"text-lg font-semibold text-amber-400 mb-2",children:t}),p.jsx("textarea",{name:e,value:n,onChange:r,className:"w-full bg-zinc-700 border border-zinc-600 rounded-md p-3 text-zinc-200 focus:ring-amber-500 focus:border-amber-500 resize-y flex-grow min-h-[100px]",placeholder:i||`Your character's ${t.toLowerCase()}...`})]}),lU=[{key:"main",label:"Main"},{key:"stats",label:"Stats & Skills"},{key:"combat",label:"Combat & Features"},{key:"bio",label:"Biography & Notes"},{key:"inventory",label:"Inventory"},{key:"spells",label:"Spells"}],D1=()=>{var ee;const{characterId:t}=YT(),e=qf(),{character:n,setCharacter:r,updateCharacter:i}=Rn(),[s,a]=z.useState(!1),[o,l]=z.useState(!1),[c,h]=z.useState(""),[d,f]=z.useState("main"),[m,E]=z.useState(null),[N,k]=z.useState(null),_=window.location.pathname.endsWith("/character/new");z.useEffect(()=>{let B=!0;return(async()=>{let V;t?V=await tS(t):V={...xu(),id:"temp_new"};const se={...xu(),...V};B&&(r(se),se!=null&&se.imageUrl&&k(se.imageUrl))})(),()=>{B=!1}},[t,r]);const x=z.useMemo(()=>n?Math.ceil(n.level/4)+1:0,[n==null?void 0:n.level]),S=async()=>{if(n){a(!0);try{const B=_?`char_${Date.now()}`:n.id;let Q=n.imageUrl||"";if(m){const Ee=KP();if(Jp&&Ee)try{Q=await Jp(m,Ee.uid,B)}catch(Ce){console.error("Image upload failed, saving with local data URL:",Ce),Q=N||""}else Q=N||""}const V={...n,id:B,imageUrl:Q,proficiencyBonus:x,initiative:F,lastUpdated:Date.now()},se=await nS(V);e(`/character/${se.id}`)}catch(B){console.error("Failed to save character:",B),alert("An error occurred while saving. Please try again.")}finally{a(!1)}}},M=async()=>{n&&!_&&window.confirm(`Are you sure you want to permanently delete ${n.name}?`)&&(await rS(n.id),e("/"))},U=()=>{e(_?"/":n?`/character/${n.id}`:-1)},T=B=>{if(B.target.files&&B.target.files[0]){const Q=B.target.files[0];E(Q);const V=new FileReader;V.onloadend=()=>{k(V.result)},V.readAsDataURL(Q)}},A=B=>{if(!n)return;const{name:Q,value:V,type:se}=B.target;let Ee=V;se==="number"&&(Ee=parseInt(V)||0),i({[Q]:Ee})},y=(B,Q)=>{n&&r(V=>({...V,currency:{...V.currency,[B]:Q}}))},v=(B,Q)=>{n&&r(V=>({...V,hp:{...V.hp,[B]:Q}}))},w=B=>{if(!n)return;const{value:Q}=B.target;r(V=>({...V,hitDice:{...V.hitDice,total:Q}}))},C=(B,Q)=>{n&&r(V=>({...V,abilityScores:{...V.abilityScores,[B]:Q}}))},I=B=>{if(!n)return;const Q={...n.savingThrows};Q[B].proficient=!Q[B].proficient,r(V=>({...V,savingThrows:Q}))},R=B=>{if(!n)return;const Q=n.skills.map(V=>{if(V.name===B){const se=!V.proficient,Ee=se?V.expertise:!1;return{...V,proficient:se,expertise:Ee}}return V});r(V=>({...V,skills:Q}))},L=B=>{if(!n)return;const Q=n.skills.map(V=>{if(V.name===B){const se=!V.expertise,Ee=se||V.proficient;return{...V,proficient:Ee,expertise:se}}return V});r(V=>({...V,skills:Q}))},H=B=>{var V;if(!n)return;const Q=parseInt(B.target.value,10)||0;i({unarmoredDefense:{base:Q,abilities:((V=n.unarmoredDefense)==null?void 0:V.abilities)||[]}})},D=B=>{var se,Ee;if(!n)return;const Q=((se=n.unarmoredDefense)==null?void 0:se.abilities)||[],V=Q.includes(B)?Q.filter(Ce=>Ce!==B):[...Q,B];i({unarmoredDefense:{base:((Ee=n.unarmoredDefense)==null?void 0:Ee.base)??10,abilities:V}})},O=(B,Q)=>{if(!n)return;const V={...n.spellSlots};V[B]={...V[B],max:Q},r(se=>({...se,spellSlots:V}))},$=async()=>{if(!n)return;l(!0);const B=await qj(n,c);r(Q=>({...Q,...B})),l(!1)},F=z.useMemo(()=>n?xo(n.abilityScores.dexterity):0,[n==null?void 0:n.abilityScores.dexterity]),{spellSaveDC:K,spellAttackBonus:ie}=z.useMemo(()=>{if(!n||!n.spellcastingAbility)return{spellSaveDC:"-",spellAttackBonus:"-"};const B=xo(n.abilityScores[n.spellcastingAbility]);return{spellSaveDC:8+x+B,spellAttackBonus:pi(x+B)}},[n==null?void 0:n.spellcastingAbility,n==null?void 0:n.abilityScores,x]);return n?p.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:pt-8",children:[p.jsxs("header",{className:"flex justify-between items-center mb-4 border-b border-zinc-700 pb-4",children:[p.jsxs("button",{onClick:U,className:"flex items-center gap-2 text-zinc-300 hover:text-amber-400 transition-colors",children:[p.jsx(aS,{className:"w-5 h-5"}),_?"Cancel Creation":"Back to Play"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[!_&&p.jsx("button",{onClick:M,className:"p-2 rounded-full bg-red-800/50 hover:bg-red-600 text-red-300 hover:text-white transition-colors","aria-label":"Delete Character",children:p.jsx(Da,{className:"w-5 h-5"})}),p.jsxs("button",{onClick:S,disabled:s,className:"flex items-center gap-2 px-4 py-2 bg-amber-600 text-white font-bold rounded-lg shadow-md hover:bg-amber-500 transition-colors disabled:bg-zinc-600",children:[p.jsx(fj,{className:"w-5 h-5"}),s?"Saving...":"Save Changes"]})]})]}),p.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 shadow-2xl shadow-amber-900/10 rounded-lg p-4 sm:p-6",children:[p.jsx("div",{role:"tablist","aria-label":"Character Sheet Sections",className:"flex space-x-1 mb-6 border-b border-zinc-700 overflow-x-auto",children:lU.map(B=>p.jsx(oU,{id:`tab-${B.key}`,label:B.label,isActive:d===B.key,onClick:()=>f(B.key),controls:`panel-${B.key}`},B.key))}),p.jsx("div",{id:"panel-main",role:"tabpanel","aria-labelledby":"tab-main",hidden:d!=="main",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"space-y-4 md:col-span-1",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-zinc-400",children:"Character Portrait"}),p.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[p.jsx("span",{className:"inline-block h-24 w-24 rounded-lg overflow-hidden bg-zinc-700",children:N?p.jsx("img",{src:N,alt:"Character portrait",className:"h-full w-full object-cover"}):p.jsx(oS,{className:"h-full w-full text-zinc-500 p-4"})}),p.jsx("input",{type:"file",id:"imageUpload",className:"hidden",accept:"image/png, image/jpeg, image/webp, image/gif",onChange:T}),p.jsx("label",{htmlFor:"imageUpload",className:"cursor-pointer rounded-md bg-zinc-700 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-zinc-600",children:"Change"})]})]}),p.jsx(Ar,{label:"Character Name",name:"name",type:"text",value:n.name,onChange:A,placeholder:"e.g., Eldrin"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx(Ar,{label:"Class",name:"class",type:"text",value:n.class,onChange:A,placeholder:"e.g., Wizard"}),p.jsx(Ar,{label:"Subclass",name:"subclass",type:"text",value:n.subclass,onChange:A,placeholder:"e.g., School of Evocation"})]}),p.jsx(Ar,{label:"Race",name:"race",type:"text",value:n.race,onChange:A,placeholder:"e.g., High-Elf"}),p.jsx(Ar,{label:"Background",name:"background",type:"text",value:n.background,onChange:A,placeholder:"e.g., Sage"}),p.jsx(Ar,{label:"Languages",name:"languages",type:"text",value:n.languages,onChange:A,placeholder:"e.g., Common, Elvish"})]}),p.jsxs("div",{className:"space-y-4 md:col-span-1",children:[p.jsx(Ar,{label:"Level",name:"level",type:"number",value:n.level,onChange:A}),p.jsx(Ar,{label:"Alignment",name:"alignment",type:"text",value:n.alignment,onChange:A,placeholder:"e.g., Chaotic Good"}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Hit Points"}),p.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"hp-current",className:"block text-xs font-medium text-zinc-500 text-center",children:"Current"}),p.jsx("input",{id:"hp-current",type:"number",value:n.hp.current,onChange:B=>v("current",parseInt(B.target.value)||0),className:"mt-1 w-full bg-zinc-700 border border-zinc-600 rounded-md py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"hp-max",className:"block text-xs font-medium text-zinc-500 text-center",children:"Max"}),p.jsx("input",{id:"hp-max",type:"number",value:n.hp.max,onChange:B=>v("max",parseInt(B.target.value)||0),className:"mt-1 w-full bg-zinc-700 border border-zinc-600 rounded-md py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"hp-temporary",className:"block text-xs font-medium text-zinc-500 text-center",children:"Temporary"}),p.jsx("input",{id:"hp-temporary",type:"number",value:n.hp.temporary,onChange:B=>v("temporary",parseInt(B.target.value)||0),className:"mt-1 w-full bg-zinc-700 border border-zinc-600 rounded-md py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]})]})]}),p.jsx(Ar,{label:"Hit Dice",name:"hitDice",type:"text",value:n.hitDice.total,onChange:w,placeholder:"e.g. 1d8"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 md:col-span-1",children:[p.jsxs("div",{className:"col-span-2 bg-zinc-900/50 p-3 rounded-lg",children:[p.jsx("h4",{className:"text-sm font-medium text-zinc-400 mb-2",children:"Unarmored Defense"}),p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(Ar,{label:"Base AC",name:"unarmoredBase",type:"number",value:((ee=n.unarmoredDefense)==null?void 0:ee.base)??10,onChange:H,className:"flex-1"}),p.jsx("span",{className:"pt-6 text-xl text-zinc-400",children:"+"}),p.jsx("div",{className:"flex-1 pt-6 text-center text-zinc-200",children:"Modifiers"})]}),p.jsx("div",{className:"grid grid-cols-3 gap-x-2 gap-y-1",children:xm.map(B=>{var Q;return p.jsxs("label",{className:"flex items-center gap-1.5 text-xs cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:((Q=n.unarmoredDefense)==null?void 0:Q.abilities.includes(B))??!1,onChange:()=>D(B),className:"w-4 h-4 rounded text-amber-600 bg-zinc-800 border-zinc-600 focus:ring-amber-500"}),p.jsx("span",{className:"text-zinc-300 uppercase",children:B.substring(0,3)})]},B)})})]}),p.jsx(Rr,{label:"Initiative",value:pi(F)}),p.jsx(Ar,{label:"Speed",name:"speed",type:"number",value:n.speed,onChange:A,className:"col-span-1"}),p.jsx(Rr,{label:"Proficiency",value:pi(x)}),p.jsxs("div",{className:"col-span-2",children:[p.jsx("label",{htmlFor:"spellcastingAbility",className:"block text-sm font-medium text-zinc-400",children:"Spellcasting Ability"}),p.jsxs("select",{id:"spellcastingAbility",name:"spellcastingAbility",value:n.spellcastingAbility,onChange:A,className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md shadow-sm py-2 px-3 text-zinc-100 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm",children:[p.jsx("option",{value:"",children:"None"}),xm.map(B=>p.jsx("option",{value:B,className:"capitalize",children:B},B))]})]}),p.jsx(Rr,{label:"Spell Save DC",value:String(K)}),p.jsx(Rr,{label:"Spell Attack",value:String(ie)})]})]})}),p.jsx("div",{id:"panel-stats",role:"tabpanel","aria-labelledby":"tab-stats",hidden:d!=="stats",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:xm.map(B=>{const Q=n.abilityScores[B],V=xo(Q),se=n.savingThrows[B],Ee=V+(se.proficient?x:0),Ce=n.skills.filter(pe=>pe.ability===B);return p.jsxs("div",{className:"bg-zinc-700/50 p-3 rounded-lg flex flex-col gap-3",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"flex flex-col items-center justify-center bg-zinc-900/50 p-2 rounded-lg w-20",children:[p.jsx("span",{className:"text-3xl font-bold font-mono text-white",children:pi(V)}),p.jsx("span",{className:"text-xs uppercase tracking-wider text-zinc-400",children:B.substring(0,3)})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-xl font-cinzel text-amber-400 capitalize",children:B}),p.jsx("input",{type:"number",value:Q,onChange:pe=>C(B,parseInt(pe.target.value)||0),className:"w-full bg-zinc-800 text-center text-lg rounded border border-zinc-600 p-1 focus:ring-amber-500","aria-label":`${B} score`})]})]}),p.jsxs("div",{className:"bg-zinc-800/60 p-2 rounded-md space-y-2",children:[p.jsxs("label",{htmlFor:`saving-throw-${B}`,className:"flex items-center justify-between cursor-pointer text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",id:`saving-throw-${B}`,checked:se.proficient,onChange:()=>I(B),className:"w-4 h-4 rounded-full text-amber-600 bg-zinc-900 border-zinc-600 focus:ring-amber-500"}),p.jsx("span",{children:"Saving Throw"})]}),p.jsx("span",{className:"font-mono font-bold text-lg text-white",children:pi(Ee)})]}),Ce.map(pe=>{const ye=V+(pe.proficient?x:0)+(pe.expertise?x:0);return p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",id:`skill-prof-${pe.name}`,checked:pe.proficient,onChange:()=>R(pe.name),className:"w-4 h-4 rounded-full text-amber-600 bg-zinc-900 border-zinc-600 focus:ring-amber-500 cursor-pointer"}),p.jsx("input",{type:"checkbox",id:`skill-exp-${pe.name}`,checked:pe.expertise,onChange:()=>L(pe.name),className:"w-4 h-4 rounded-sm text-yellow-300 bg-zinc-900 border-zinc-600 focus:ring-yellow-400 cursor-pointer",title:"Expertise"}),p.jsx("label",{htmlFor:`skill-prof-${pe.name}`,className:"cursor-pointer",children:pe.name})]}),p.jsx("span",{className:"font-mono font-bold text-lg text-white",children:pi(ye)})]},pe.name)})]})]},B)})})}),p.jsx("div",{id:"panel-combat",role:"tabpanel","aria-labelledby":"tab-combat",hidden:d!=="combat",className:"min-h-[60vh]",children:p.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-full",children:[p.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col",children:p.jsx(rU,{})}),p.jsx("div",{className:"flex-1 lg:w-1/2 flex flex-col",children:p.jsx(Wj,{})})]})}),p.jsx("div",{id:"panel-bio",role:"tabpanel","aria-labelledby":"tab-bio",hidden:d!=="bio",className:"min-h-[60vh]",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsx(za,{label:"Personality Traits",name:"personalityTraits",value:n.personalityTraits,onChange:A}),p.jsx(za,{label:"Ideals",name:"ideals",value:n.ideals,onChange:A}),p.jsx(za,{label:"Bonds",name:"bonds",value:n.bonds,onChange:A}),p.jsx(za,{label:"Flaws",name:"flaws",value:n.flaws,onChange:A})]}),p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-amber-400 mb-2",children:"AI Personality Generator"}),p.jsxs("div",{className:"p-4 bg-zinc-800 border border-zinc-700 rounded-lg",children:[p.jsx("input",{type:"text",placeholder:"Optional: Add a keyword (e.g., 'tragic', 'grew up an orphan')",value:c,onChange:B=>h(B.target.value),className:"w-full bg-zinc-700 border border-zinc-600 rounded-md p-2 text-sm mb-2 focus:ring-amber-500 focus:border-amber-500"}),p.jsxs("button",{onClick:$,disabled:o,className:"flex w-full justify-center items-center gap-2 text-sm bg-amber-600 hover:bg-amber-500 px-3 py-2 rounded-md text-white transition disabled:bg-zinc-600",children:[p.jsx(hj,{className:"w-4 h-4"}),o?"Generating...":"Generate with AI"]})]})]}),p.jsx(za,{label:"Notes",name:"notes",value:n.notes,onChange:A,placeholder:"Campaign notes, important NPCs, etc."}),p.jsx(za,{label:"DM Notes",name:"dmNotes",value:n.dmNotes,onChange:A,placeholder:"Notes from your DM, or secrets your character knows."})]})]})}),p.jsx("div",{id:"panel-inventory",role:"tabpanel","aria-labelledby":"tab-inventory",hidden:d!=="inventory",className:"min-h-[60vh]",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"lg:col-span-1",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-4",children:"Currency"}),p.jsx("div",{className:"bg-zinc-900/50 p-4 rounded-lg grid grid-cols-3 sm:grid-cols-5 gap-3",children:Object.entries(n.currency).map(([B,Q])=>p.jsxs("div",{children:[p.jsx("label",{className:"block text-center text-sm font-medium text-zinc-400 uppercase",children:B}),p.jsx("input",{type:"number",value:Q,onChange:V=>y(B,parseInt(V.target.value,10)||0),className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md py-1 px-2 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]},B))})]}),p.jsx("div",{className:"lg:col-span-2",children:p.jsx(eU,{})})]})}),p.jsxs("div",{id:"panel-spells",role:"tabpanel","aria-labelledby":"tab-spells",hidden:d!=="spells",className:"min-h-[60vh] space-y-6",children:[p.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-lg",children:[p.jsx("h4",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Maximum Spell Slots"}),p.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-5 md:grid-cols-9 gap-3",children:Array.from({length:9},(B,Q)=>Q+1).map(B=>{var Q;return p.jsxs("div",{children:[p.jsxs("label",{className:"block text-center text-sm font-medium text-zinc-400",children:["Lvl ",B]}),p.jsx("input",{type:"number",min:"0",value:((Q=n.spellSlots[B])==null?void 0:Q.max)??0,onChange:V=>O(B,parseInt(V.target.value,10)||0),className:"mt-1 block w-full bg-zinc-700 border border-zinc-600 rounded-md py-1 px-2 text-zinc-100 focus:outline-none focus:ring-amber-500 text-center"})]},B)})})]}),p.jsx(aU,{character:n,onUpdateCharacter:i}),p.jsx(Kj,{})]})]})]}):p.jsx("div",{className:"flex justify-center items-center h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})})},uU=t=>Math.floor((t-10)/2),Sm=t=>t>=0?`+${t}`:String(t),cU=["strength","dexterity","constitution","intelligence","wisdom","charisma"],hU=()=>{const{character:t}=Rn();if(!t)return null;const{proficiencyBonus:e,abilityScores:n,savingThrows:r,skills:i}=t;return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3 text-center",children:"Abilities"}),p.jsx("div",{className:"space-y-3",children:cU.map(s=>{const a=n[s],o=uU(a),l=r[s],c=o+(l.proficient?e:0),h=i.filter(d=>d.ability===s);return p.jsxs("div",{className:"bg-zinc-900/50 p-3 rounded-lg border border-zinc-700/50",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("h4",{className:"text-lg font-cinzel text-amber-400 capitalize",children:s}),p.jsxs("div",{className:"flex items-baseline gap-2",children:[p.jsx("span",{className:"text-3xl font-mono text-white font-bold",children:a}),p.jsxs("span",{className:"text-2xl font-mono text-amber-300 font-bold",children:["(",Sm(o),")"]})]})]}),p.jsxs("div",{className:"bg-zinc-800/60 p-2 rounded-md space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:`w-3 h-3 rounded-full border-2 ${l.proficient?"bg-amber-400 border-amber-200":"border-zinc-500"}`}),p.jsx("span",{children:"Saving Throw"})]}),p.jsx("span",{className:"font-mono font-bold text-base text-white",children:Sm(c)})]}),p.jsx("hr",{className:"border-zinc-700"}),h.map(d=>{const f=o+(d.proficient?e:0)+(d.expertise?e:0);let m="border-zinc-500";return d.expertise?m="bg-white border-white":d.proficient&&(m="bg-amber-400 border-amber-200"),p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:`w-3 h-3 rounded-full border-2 ${m}`}),p.jsx("span",{children:d.name})]}),p.jsx("span",{className:"font-mono font-bold text-base text-white",children:Sm(f)})]},d.name)})]})]},s)})})]})},fU=({spell:t,onToggleExpand:e,isExpanded:n})=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg",children:[p.jsxs("div",{className:"flex justify-between items-center cursor-pointer p-3",onClick:e,children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h4",{className:"font-bold text-amber-300 truncate",title:t.name,children:t.name}),p.jsxs("div",{className:"flex items-center gap-2 text-xs text-zinc-400 mt-1",children:[p.jsx("span",{className:"truncate",title:t.castingTime,children:t.castingTime}),p.jsx("span",{className:"opacity-50",children:"|"}),p.jsx("span",{className:"truncate",title:t.range,children:t.range})]})]}),p.jsx("div",{className:"flex items-center gap-2 pl-2 flex-shrink-0",children:p.jsx("span",{className:"text-xs text-zinc-400 capitalize",children:t.school})})]}),n&&p.jsxs("div",{className:"mt-2 pt-3 border-t border-zinc-600/50 space-y-2 text-sm p-3 bg-zinc-900/30",children:[p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Components:"})," ",t.components]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-zinc-400",children:"Duration:"})," ",t.duration]}),p.jsx("p",{className:"text-zinc-300 mt-2 whitespace-pre-wrap",children:t.description})]})]}),dU=()=>{const{character:t}=Rn(),[e,n]=z.useState({}),[r,i]=z.useState(""),s=l=>{n(c=>({...c,[l]:!c[l]}))},a=z.useMemo(()=>t?t.spells.filter(c=>c.name.toLowerCase().includes(r.toLowerCase())).reduce((c,h)=>(c[h.level]=[...c[h.level]||[],h],c[h.level].sort((d,f)=>d.name.localeCompare(f.name)),c),{}):{},[t,r]),o=Object.keys(a).map(Number).sort((l,c)=>l-c);return t?p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col h-auto max-h-[calc(100vh-10rem)]",children:[p.jsx("div",{className:"flex justify-between items-center mb-2",children:p.jsx("h3",{className:"text-lg font-cinzel text-amber-400",children:"Spellbook"})}),p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"text",placeholder:"Search spells...",value:r,onChange:l=>i(l.target.value),className:"w-full bg-zinc-700 p-2 rounded-md border border-zinc-600 text-sm focus:ring-amber-500 focus:border-amber-500"})}),p.jsx("div",{className:"space-y-6 overflow-y-auto pr-2 -mr-2 flex-grow",children:t.spells.length===0?p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-center text-zinc-500 text-sm py-8",children:"This character knows no spells."})}):o.length===0?p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-center text-zinc-500 text-sm py-8",children:"No spells match your search."})}):o.map(l=>p.jsxs("div",{children:[p.jsx("h4",{className:"text-xl font-serif text-zinc-300 border-b border-zinc-600 pb-1 mb-3",children:l===0?"Cantrips":`Level ${l}`}),p.jsx("div",{className:"space-y-3",children:a[l].map(c=>p.jsx(fU,{spell:c,isExpanded:!!e[c.id],onToggleExpand:()=>s(c.id)},c.id))})]},l))})]}):null},mU=({label:t,isActive:e,onClick:n,id:r,controls:i})=>p.jsx("button",{id:r,role:"tab","aria-selected":e,"aria-controls":i,onClick:n,className:`px-4 py-2 text-sm sm:text-base font-medium rounded-t-lg transition-colors whitespace-nowrap ${e?"bg-zinc-800 text-amber-400 border-b-2 border-amber-400":"text-zinc-400 hover:bg-zinc-800/60 border-b-2 border-transparent"}`,children:t}),fS=t=>{if(!t||typeof t!="string")return{total:0,pretty:"Invalid input"};const e=t.replace(/[\s()]/g,"").split("+");let n=0;const r=[],i=/(\d+)d(\d+)/i;for(const s of e){if(!s)continue;const a=s.match(i);if(a){const o=parseInt(a[1],10),l=parseInt(a[2],10);if(isNaN(o)||isNaN(l))continue;const c=Array.from({length:o},()=>Math.floor(Math.random()*l)+1),h=c.reduce((d,f)=>d+f,0);n+=h,r.push(`[${c.join("+")}]`)}else{const o=parseInt(s,10);isNaN(o)||(n+=o,r.push(String(o)))}}return r.length===0?{total:0,pretty:"Invalid Format"}:{total:n,pretty:`${r.join(" + ")} = ${n}`}},pU=()=>{const[t,e]=z.useState(null),{character:n,updateCharacter:r}=Rn(),i=xo(n.abilityScores.constitution),s=z.useMemo(()=>{const l=xo(n.abilityScores.wisdom),c=n.skills.find(d=>d.name==="Perception");let h=0;return c&&(c.expertise?h=n.proficiencyBonus*2:c.proficient&&(h=n.proficiencyBonus)),10+l+h},[n]),a=()=>{if(n.hitDice.used>=n.level)return;const{total:l,pretty:c}=fS(`${n.hitDice.total}+${i}`),h=Math.min(n.hp.max,n.hp.current+Math.max(1,l));e(`${c} HP`),r({hp:{...n.hp,current:h},hitDice:{...n.hitDice,used:n.hitDice.used+1}})},o=()=>{r({hitDice:{...n.hitDice,used:0}}),e(null)};return p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"md:col-span-2 lg:col-span-3 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:[p.jsx(Rr,{label:"Armor Class",value:z.useMemo(()=>J2(n),[n])}),p.jsx(Rr,{label:"Initiative",value:pi(n.initiative)}),p.jsx(Rr,{label:"Speed",value:`${n.speed}ft`,subValue:` ${Math.round(n.speed*.3)}m`}),p.jsx(Rr,{label:"Proficiency",value:pi(n.proficiencyBonus)}),p.jsx(Rr,{label:"Passive Perception",value:s,className:"col-span-2 sm:col-span-1"})]}),p.jsx(wU,{}),p.jsx(TU,{}),p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Hit Dice"}),p.jsxs("p",{className:"text-center text-3xl font-bold font-mono text-white mb-3",children:[n.level-n.hitDice.used," / ",n.level]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:a,disabled:n.hitDice.used>=n.level,className:"w-full bg-green-800/80 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md transition-colors disabled:bg-zinc-600 disabled:cursor-not-allowed",children:["Spend (",n.hitDice.total,")"]}),p.jsx("button",{onClick:o,className:"bg-sky-800/80 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-md transition-colors",children:"Reset"})]}),t&&p.jsx("p",{className:"text-center text-amber-300 font-mono mt-3 p-2 bg-zinc-900/50 rounded-md",children:t})]}),p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Languages"}),p.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:n.languages||"None"})]})]})},gU=()=>{const{character:t}=Rn();return p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsx(AU,{items:t.attacks||[]}),p.jsx(xU,{title:"Features & Traits",items:t.featuresAndTraits||[]})]})},yU=()=>{const{character:t,updateCharacter:e}=Rn(),n=t.spellcastingAbility,r=n?xo(t.abilityScores[n]):0,i=n?8+t.proficiencyBonus+r:"-",s=n?t.proficiencyBonus+r:0;return p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3 text-center",children:"Spellcasting"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx(Rr,{label:"Save DC",value:i}),p.jsx(Rr,{label:"Attack Bonus",value:pi(s)}),p.jsxs("div",{className:"col-span-2 text-center",children:[p.jsx("p",{className:"text-xs uppercase tracking-wider text-zinc-400",children:"Ability"}),p.jsx("p",{className:"text-xl font-bold text-white capitalize",children:n||"None"})]})]})]}),p.jsx(O1,{title:"Spell Slots",slots:t.spellSlots,onSlotChange:a=>e({spellSlots:a})}),t.customResources&&t.customResources.length>0&&p.jsx(O1,{title:"Other Resources",slots:t.customResources,onSlotChange:a=>e({customResources:a}),isCustom:!0})]}),p.jsx("div",{className:"lg:col-span-2",children:p.jsx(dU,{})})]})},vU=()=>{const{character:t,updateCharacter:e}=Rn(),[n,r]=z.useState(null),i=c=>{const h=t.equipment.find(m=>m.id===c);if(!h)return;const d=!h.equipped,f=t.equipment.map(m=>{if(m.id===c)return{...m,equipped:d};if(d){const E=h.armorType&&h.armorType!=="shield",N=m.equipped&&m.armorType&&m.armorType!=="shield";if(E&&N)return{...m,equipped:!1};if(h.armorType==="shield"&&m.equipped&&m.armorType==="shield")return{...m,equipped:!1}}return m});e({equipment:f})},s=c=>{r(h=>h===c?null:c)},{equippableItems:a,backpackItems:o}=z.useMemo(()=>{const c=[],h=[];return(t.equipment||[]).forEach(d=>{d.armorType?c.push(d):h.push(d)}),{equippableItems:c.sort((d,f)=>d.name.localeCompare(f.name)),backpackItems:h.sort((d,f)=>d.name.localeCompare(f.name))}},[t.equipment]),l=({title:c,items:h})=>p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:c}),h.length===0?p.jsx("p",{className:"text-zinc-500 text-sm text-center py-4",children:"None."}):p.jsx("div",{className:"space-y-2",children:h.map(d=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:[p.jsxs("div",{className:"p-3 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[p.jsx("button",{onClick:()=>s(d.id),className:"flex-shrink-0 text-zinc-400 hover:text-white",children:p.jsx(lS,{className:`w-5 h-5 transition-transform ${n===d.id?"rotate-180":""}`})}),p.jsxs("p",{className:"font-semibold text-amber-300 truncate",title:d.name,children:[d.name," ",p.jsxs("span",{className:"text-xs text-zinc-400",children:["(x",d.quantity,")"]})]})]}),d.armorType&&p.jsx("button",{onClick:()=>i(d.id),className:`px-3 py-1 text-xs font-bold rounded ${d.equipped?"bg-amber-500 text-white":"bg-zinc-600 hover:bg-zinc-500"}`,children:d.equipped?"Equipped":"Equip"})]}),n===d.id&&p.jsxs("div",{className:"p-3 border-t border-zinc-600/50 bg-zinc-900/30 space-y-2",children:[d.armorType&&p.jsxs("p",{children:[p.jsxs("strong",{className:"text-zinc-400 capitalize",children:[d.armorType," Armor"]}),d.armorClass?p.jsxs("span",{className:"text-zinc-300",children:[" (AC: ",d.armorClass,")"]}):""]}),p.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:d.description||"No description."})]})]},d.id))})]});return p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Currency"}),p.jsx("div",{className:"grid grid-cols-3 gap-2 text-center",children:Object.keys(t.currency).map(c=>p.jsxs("div",{children:[p.jsx("p",{className:"text-xl font-mono text-white",children:t.currency[c]}),p.jsx("p",{className:"text-xs uppercase text-zinc-400",children:c})]},c))})]}),p.jsx(l,{title:"Equippable Gear",items:a})]}),p.jsx("div",{className:"lg:col-span-2",children:p.jsx(l,{title:"Backpack",items:o})})]})},_U=()=>{const{character:t}=Rn(),e=({title:n,content:r})=>p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex-grow",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-2",children:n}),p.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:r||"Not set."})]});return p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-6 flex flex-col",children:[p.jsx(e,{title:"Personality Traits",content:t.personalityTraits}),p.jsx(e,{title:"Ideals",content:t.ideals}),p.jsx(e,{title:"Bonds",content:t.bonds}),p.jsx(e,{title:"Flaws",content:t.flaws})]}),p.jsxs("div",{className:"space-y-6 flex flex-col",children:[p.jsx(e,{title:"Character Notes",content:t.notes}),p.jsx(e,{title:"Campaign Info",content:t.dmNotes})]})]})},bU=[{key:"main",label:"Main"},{key:"abilities",label:"Abilities"},{key:"combat",label:"Combat"},{key:"spells",label:"Spells"},{key:"inventory",label:"Inventory"},{key:"info",label:"Info"}],EU=()=>{const{characterId:t}=YT(),e=qf(),{character:n,setCharacter:r,updateCharacter:i}=Rn(),[s,a]=z.useState("main"),o=z.useRef(!0);return z.useEffect(()=>{if(!t)return;(async()=>{const c=await tS(t);r(c)})()},[t,r]),z.useEffect(()=>{if(o.current){o.current=!1;return}if(n){const l=setTimeout(()=>{nS(n)},1500);return()=>{clearTimeout(l)}}},[n]),n?p.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:pt-8",children:[p.jsxs("header",{className:"flex justify-between items-center mb-6 border-b border-zinc-700 pb-4",children:[p.jsxs("button",{onClick:()=>e("/"),className:"flex items-center gap-2 text-zinc-300 hover:text-amber-400 transition-colors",children:[p.jsx(aS,{className:"w-5 h-5"})," Back to List"]}),p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-2xl sm:text-3xl font-cinzel text-amber-400",children:n.name}),p.jsxs("p",{className:"text-zinc-400 capitalize text-sm",children:[n.race," ",n.class," ",n.subclass&&`(${n.subclass})`,"  Level ",n.level,"  ",n.alignment]})]}),p.jsxs("button",{onClick:()=>e(`/character/${t}/edit`),className:"flex items-center gap-2 px-4 py-2 bg-zinc-700 text-white font-bold rounded-lg shadow-md hover:bg-zinc-600 transition-colors",children:[p.jsx(Oa,{className:"w-5 h-5"})," Edit Sheet"]})]}),p.jsx("div",{role:"tablist","aria-label":"Character View Sections",className:"flex space-x-1 mb-6 border-b border-zinc-700 overflow-x-auto",children:bU.map(l=>p.jsx(mU,{id:`play-tab-${l.key}`,controls:`play-panel-${l.key}`,label:l.label,isActive:s===l.key,onClick:()=>a(l.key)},l.key))}),p.jsxs("div",{className:"bg-zinc-900/50 p-4 sm:p-6 rounded-b-lg rounded-tr-lg",children:[p.jsx("div",{id:"play-panel-main",role:"tabpanel","aria-labelledby":"play-tab-main",style:{display:s==="main"?"block":"none"},children:p.jsx(pU,{})}),p.jsx("div",{id:"play-panel-abilities",role:"tabpanel","aria-labelledby":"play-tab-abilities",style:{display:s==="abilities"?"block":"none"},children:p.jsx(hU,{})}),p.jsx("div",{id:"play-panel-combat",role:"tabpanel","aria-labelledby":"play-tab-combat",style:{display:s==="combat"?"block":"none"},children:p.jsx(gU,{})}),p.jsx("div",{id:"play-panel-spells",role:"tabpanel","aria-labelledby":"play-tab-spells",style:{display:s==="spells"?"block":"none"},children:p.jsx(yU,{})}),p.jsx("div",{id:"play-panel-inventory",role:"tabpanel","aria-labelledby":"play-tab-inventory",style:{display:s==="inventory"?"block":"none"},children:p.jsx(vU,{})}),p.jsx("div",{id:"play-panel-info",role:"tabpanel","aria-labelledby":"play-tab-info",style:{display:s==="info"?"block":"none"},children:p.jsx(_U,{})})]})]}):p.jsx("div",{className:"flex justify-center items-center h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-amber-500"})})},wU=()=>{const{character:t,updateCharacter:e}=Rn(),{hp:n}=t,[r,i]=z.useState(""),[s,a]=z.useState(""),[o,l]=z.useState(""),c=()=>{const f=parseInt(r,10);if(!isNaN(f)&&f>0){const m=Math.min(f,n.temporary),E=n.temporary-m,N=f-m,k=Math.max(0,n.current-N);e({hp:{...n,current:k,temporary:E}}),i("")}},h=()=>{const f=parseInt(s,10);if(!isNaN(f)&&f>0){const m=Math.min(n.max,n.current+f);e({hp:{...n,current:m}}),a("")}},d=()=>{const f=parseInt(o,10);!isNaN(f)&&f>=0&&(e({hp:{...n,temporary:f}}),l(""))};return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3 text-center",children:"Hit Points"}),p.jsxs("div",{className:"text-center mb-4",children:[p.jsx("span",{className:"text-5xl font-bold text-red-400",children:n.current}),n.temporary>0&&p.jsxs("span",{className:"text-3xl font-bold text-sky-400",title:"Temporary HP",children:[" +",n.temporary]}),p.jsxs("span",{className:"text-2xl text-zinc-400",children:[" / ",n.max]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("input",{type:"number",value:r,onChange:f=>i(f.target.value),onKeyDown:f=>f.key==="Enter"&&c(),placeholder:"Damage",className:"bg-zinc-700 text-center rounded-md p-2 border border-zinc-600 focus:ring-red-500 focus:border-red-500"}),p.jsx("button",{onClick:c,className:"bg-red-800/80 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Apply"})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("input",{type:"number",value:s,onChange:f=>a(f.target.value),onKeyDown:f=>f.key==="Enter"&&h(),placeholder:"Healing",className:"bg-zinc-700 text-center rounded-md p-2 border border-zinc-600 focus:ring-green-500 focus:border-green-500"}),p.jsx("button",{onClick:h,className:"bg-green-800/80 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Apply"})]})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("input",{type:"number",value:o,onChange:f=>l(f.target.value),onKeyDown:f=>f.key==="Enter"&&d(),placeholder:"Set/Replace Temp HP",className:"bg-zinc-700 text-center rounded-md p-2 border border-zinc-600 focus:ring-sky-500 focus:border-sky-500"}),p.jsx("button",{onClick:d,className:"bg-sky-800/80 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-md mt-1 transition-colors",children:"Set Temp HP"})]})]})},O1=({title:t,slots:e,onSlotChange:n,isCustom:r})=>{const i=(o,l)=>{if(r){const c=e,h=c.findIndex(E=>E.id===o);if(h===-1)return;const d=c[h],f=l<d.used?l:l+1,m=[...c];m[h]={...d,used:f},n(m)}else{const c=e,h=c[o],d=l<h.used?l:l+1;n({...c,[o]:{...h,used:d}})}},s=r?e:Object.entries(e),a=s.some(o=>r?o.max>0:o[1].max>0);return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:t}),!a&&p.jsx("p",{className:"text-zinc-500 text-sm text-center",children:"No resources available."}),p.jsx("div",{className:"space-y-3",children:s.map(o=>{const[l,c]=r?[o.id,o]:o,h=r?c.name:`Lvl ${l}`;return c.max===0?null:p.jsxs("div",{className:"flex items-center",children:[p.jsxs("span",{className:"font-bold text-zinc-400 w-24 truncate",title:h,children:[h,":"]}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:c.max}).map((d,f)=>p.jsx("button",{onClick:()=>i(l,f),className:`w-5 h-5 rounded-md border-2 transition-colors ${f<c.used?"bg-amber-500 border-amber-400":"bg-zinc-600 border-zinc-500 hover:border-amber-400"}`,"aria-label":`Slot ${f+1} for ${h}. ${f<c.used?"Used":"Available"}`},f))})]},l)})})]})},TU=()=>{const{character:t,updateCharacter:e}=Rn(),{deathSaves:n}=t,r=(i,s)=>{const a=n[i],o=s<a?s:s+1;e({deathSaves:{...n,[i]:o}})};return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Death Saves"}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"font-semibold text-zinc-300",children:"Successes"}),p.jsx("div",{className:"flex gap-2",children:Array.from({length:3}).map((i,s)=>p.jsx("input",{type:"checkbox",checked:s<n.successes,onChange:()=>r("successes",s),className:"w-5 h-5 rounded-full text-green-500 bg-zinc-600 border-zinc-500 focus:ring-green-500"},s))})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"font-semibold text-zinc-300",children:"Failures"}),p.jsx("div",{className:"flex gap-2",children:Array.from({length:3}).map((i,s)=>p.jsx("input",{type:"checkbox",checked:s<n.failures,onChange:()=>r("failures",s),className:"w-5 h-5 rounded-full text-red-500 bg-zinc-600 border-zinc-500 focus:ring-red-500"},s))})]})]})]})},AU=({items:t})=>{const[e,n]=z.useState({}),r=s=>{const a=parseInt(s.bonus)||0,o=Math.floor(Math.random()*20)+1,l=o+a,c=`${o} ${a>=0?"+":"-"} ${Math.abs(a)} = ${l}`;n(h=>({...h,[s.id]:{...h[s.id],atk:c}}))},i=s=>{const{pretty:a}=fS(s.damage);n(o=>({...o,[s.id]:{...o[s.id],dmg:a}}))};return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:"Attacks & Cantrips"}),p.jsxs("div",{className:"space-y-3 flex-grow overflow-y-auto pr-2 -mr-2 max-h-[calc(50vh-5rem)]",children:[t.length===0&&p.jsx("p",{className:"text-zinc-500 text-sm text-center py-4",children:"None."}),t.map(s=>{var a,o;return p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm p-3 space-y-2",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsx("span",{className:"font-semibold text-amber-300 text-base",children:s.name}),p.jsxs("div",{className:"flex gap-4 font-mono text-zinc-300 text-right",children:[p.jsx("span",{title:"Attack Bonus",children:s.bonus}),p.jsx("span",{title:"Damage",children:s.damage})]})]}),p.jsxs("div",{className:"flex justify-end items-center gap-2",children:[p.jsx("button",{onClick:()=>r(s),className:"text-xs bg-zinc-600 hover:bg-zinc-500 rounded px-3 py-1.5 transition-colors font-bold",children:"ATK"}),p.jsx("button",{onClick:()=>i(s),className:"text-xs bg-red-800/80 hover:bg-red-700 rounded px-3 py-1.5 transition-colors font-bold",children:"DMG"})]}),(((a=e[s.id])==null?void 0:a.atk)||((o=e[s.id])==null?void 0:o.dmg))&&p.jsxs("div",{className:"text-xs text-zinc-300 bg-zinc-900/50 p-2 rounded-md border-l-2 border-amber-500 space-y-1",children:[e[s.id].atk&&p.jsxs("div",{children:[p.jsx("strong",{children:"Attack:"})," ",p.jsx("span",{className:"font-mono text-amber-300",children:e[s.id].atk})]}),e[s.id].dmg&&p.jsxs("div",{children:[p.jsx("strong",{children:"Damage:"})," ",p.jsx("span",{className:"font-mono text-red-400",children:e[s.id].dmg})]})]})]},s.id)})]})]})},xU=({title:t,items:e})=>{const[n,r]=z.useState({});return p.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg border border-zinc-700 flex flex-col h-full",children:[p.jsx("h3",{className:"text-lg font-cinzel text-amber-400 mb-3",children:t}),p.jsxs("div",{className:"space-y-2 flex-grow overflow-y-auto pr-2 -mr-2 max-h-[calc(50vh-5rem)]",children:[e.length===0&&p.jsx("p",{className:"text-zinc-500 text-sm text-center py-4",children:"None."}),e.map(i=>p.jsxs("div",{className:"bg-zinc-700/50 rounded-lg text-sm",children:[p.jsx("div",{className:"flex items-center justify-between p-3 cursor-pointer w-full text-left",onClick:()=>i.description&&r(s=>({...s,[i.id]:!s[i.id]})),children:p.jsx("span",{className:"font-semibold text-amber-300",children:i.name})}),n[i.id]&&i.description&&p.jsx("div",{className:"p-3 border-t border-zinc-600/50 bg-zinc-900/30",children:p.jsx("p",{className:"text-zinc-300 whitespace-pre-wrap",children:i.description})})]},i.id))]})]})};function SU(){const t=XT();if(Uo(t))return p.jsxs("div",{className:"text-center p-8",children:[p.jsxs("h1",{className:"text-2xl font-bold text-red-500",children:[t.status," ",t.statusText]}),p.jsx("p",{className:"text-zinc-400",children:t.data})]});const e=t instanceof Error?t.message:"Unknown error";return p.jsxs("div",{className:"text-center p-8",children:[p.jsx("h1",{className:"text-2xl font-bold text-red-500",children:"Something went wrong"}),p.jsx("p",{className:"text-zinc-400",children:e})]})}function RU(){return p.jsxs("div",{className:"text-center p-8",children:[p.jsx("h1",{className:"text-2xl font-bold text-red-500",children:"404 Not Found"}),p.jsx("p",{className:"text-zinc-400",children:"The page you are looking for does not exist."})]})}const CU=w4([{path:"/",element:p.jsx(yj,{}),errorElement:p.jsx(SU,{}),children:[{index:!0,element:p.jsx(_j,{})},{path:"character/new",element:p.jsx(Am,{children:p.jsx(D1,{})})},{path:"character/:characterId/edit",element:p.jsx(Am,{children:p.jsx(D1,{})})},{path:"character/:characterId",element:p.jsx(Am,{children:p.jsx(EU,{})})},{path:"*",element:p.jsx(RU,{})}]}]),dS=document.getElementById("root");if(!dS)throw new Error("Could not find root element to mount to");RN.createRoot(dS).render(p.jsx(KS.StrictMode,{children:p.jsx(lj,{children:p.jsx(k4,{router:CU})})}));
